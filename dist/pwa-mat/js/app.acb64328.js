(function(e){function t(t){for(var a,i,o=t[0],l=t[1],u=t[2],c=0,p=[];c<o.length;c++)i=o[c],r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},r={2:0},n=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{0:"00f4c126"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise(function(t,a){s=r[e]=[t,a]});t.push(s[2]=a);var n=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=i(e);var u=setTimeout(function(){c({type:"timeout",target:l})},12e4);function c(t){l.onerror=l.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+n+")");i.type=a,i.request=n,s[1](i)}r[e]=void 0}}l.onerror=l.onload=c,n.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=u;n.push([21,1]),s()})({"+0yv":function(e){e.exports=[{id:1,name:"Museum"},{id:2,name:"CityOrDistrict"},{id:3,name:"Countryside"},{id:4,name:"Other"}]},"+fOQ":function(e,t,s){},21:function(e,t,s){e.exports=s("JJXq")},"4Y7M":function(e){e.exports=[{code:"fr",name:"French"},{code:"en",name:"English"}]},"4wco":function(e,t,s){},"5Syt":function(e,t,s){"use strict";var a=s("x9yo"),r=s.n(a);r.a},Al57:function(e){e.exports=[{category:"transition",code:"info-text",icon:"file-image",title:"ImageAndText",description:"ImageAndTextDesc",showTrick:"no",enabled:!0},{category:"transition",code:"info-video",icon:"file-video",title:"Video",description:"VideoDesc",showTrick:"no",enabled:!0},{category:"transition",code:"new-item",icon:"briefcase",title:"NewObject",description:"NewObjectDesc",showTrick:"no",enabled:!0},{category:"enigma",code:"geolocation",icon:"map-marker",title:"FindALocation",description:"FindALocationDesc",showTrick:"yes",textRules:{maxNbChars:180,maxNbCarriageReturns:5},enabled:!0},{category:"enigma",code:"locate-item-ar",icon:"cube",title:"LocateItemAR",description:"LocateItemARDesc",showTrick:"yes",textRules:{maxNbChars:50,maxNbCarriageReturns:1},hasBackgroundImage:!1,enabled:!0},{category:"enigma",code:"choose",icon:"list",title:"ChoiceQuestion",description:"ChoiceQuestionDesc",showTrick:"yes",textRules:{maxNbChars:240,maxNbCarriageReturns:5},enabled:!0},{category:"enigma",code:"write-text",icon:"font",title:"TextQuestion",description:"TextQuestionDesc",showTrick:"yes",enabled:!0},{category:"enigma",code:"code-keypad",icon:"calculator",title:"FindTheCode",description:"FindTheCodeDesc",showTrick:"yes",textRules:{maxNbChars:90,maxNbCarriageReturns:2},enabled:!0},{category:"enigma",code:"code-color",icon:"paint-brush",title:"FindTheColorCode",description:"FindTheColorCodeDesc",showTrick:"yes",textRules:{maxNbChars:150,maxNbCarriageReturns:4},enabled:!0},{category:"enigma",code:"code-image",icon:"images",title:"FindTheImageCode",description:"FindTheImageCodeDesc",showTrick:"yes",textRules:{maxNbChars:150,maxNbCarriageReturns:4},enabled:!0},{category:"enigma",code:"find-item",icon:"search",title:"FindAnItem",description:"FindAnItemDesc",showTrick:"yes",textRules:{maxNbChars:50,maxNbCarriageReturns:1},enabled:!0},{category:"enigma",code:"use-item",icon:"wrench",title:"UseAnItem",description:"UseAnItemDesc",showTrick:"yes",textRules:{maxNbChars:50,maxNbCarriageReturns:1},enabled:!0},{category:"enigma",code:"image-recognition",icon:"camera",title:"PhotographAnObject",description:"PhotographAnObjectDesc",showTrick:"yes",enabled:!1},{category:"enigma",code:"jigsaw-puzzle",icon:"puzzle-piece",title:"JigsawPuzzle",description:"JigsawPuzzleDesc",showTrick:"no",textRules:{maxNbChars:50,maxNbCarriageReturns:1},hasBackgroundImage:!1,enabled:!0},{category:"enigma",code:"memory",icon:"clone",title:"Memory",description:"MemoryDesc",showTrick:"no",textRules:{maxNbChars:50,maxNbCarriageReturns:1},enabled:!0}]},FM9K:function(e,t,s){"use strict";var a=s("H081"),r=s.n(a);r.a},H081:function(e,t,s){},H4RK:function(e,t,s){},Hl11:function(e,t,s){},Iq7u:function(e){e.exports=["red","green","blue","black","white"]},JJXq:function(e,t,s){"use strict";s.r(t);var a=s("MVZn"),r=s.n(a),n=s("Pi8J"),i=s("Kw5r"),o=s("4IOb");i["a"].use(o["La"],{cfg:{},iconSet:n["a"],components:{QAlert:o["e"],QAutocomplete:o["f"],QBtn:o["g"],QBtnDropdown:o["h"],QBtnGroup:o["i"],QCard:o["j"],QCardMain:o["k"],QCardMedia:o["l"],QCardTitle:o["m"],QCarousel:o["n"],QCarouselSlide:o["p"],QCarouselControl:o["o"],QCheckbox:o["q"],QChip:o["r"],QChipsInput:o["s"],QCollapsible:o["t"],QField:o["u"],QIcon:o["v"],QInfiniteScroll:o["w"],QInput:o["x"],QItem:o["y"],QItemMain:o["z"],QItemSide:o["B"],QItemSeparator:o["A"],QItemTile:o["C"],QLayout:o["D"],QLayoutDrawer:o["E"],QLayoutFooter:o["F"],QLayoutHeader:o["G"],QList:o["H"],QListHeader:o["I"],QModal:o["J"],QOptionGroup:o["K"],QPageContainer:o["M"],QPage:o["L"],QParallax:o["N"],QPopover:o["O"],QProgress:o["P"],QRadio:o["Q"],QRating:o["R"],QRouteTab:o["S"],QSearch:o["T"],QSelect:o["U"],QSlider:o["V"],QSpinner:o["W"],QSpinnerDots:o["X"],QSpinnerPuff:o["Y"],QSpinnerRadio:o["Z"],QTabs:o["Ca"],QTab:o["Aa"],QTabPane:o["Ba"],QToggle:o["Da"],QToolbar:o["Ea"],QToolbarTitle:o["Fa"],QTooltip:o["Ga"],QUploader:o["Ha"]},directives:{Ripple:o["Ia"],Scroll:o["Ja"],TouchSwipe:o["Ka"]},plugins:{ActionSheet:o["a"],Dialog:o["b"],Loading:o["c"],Notify:o["d"]}});var l=s("lIOY");Object(l["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});s("QBu7"),s("flf9"),s("OKqc"),s("qWPx"),s("+FdI"),s("O3aI"),s("CkM9"),s("Hl11"),s("fm0S");var u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"q-app"}},[s("router-view")],1)},c=[];u._withStripped=!0;var d={name:"App"},p=d,m=(s("ZL7j"),s("KHd+")),h=Object(m["a"])(p,u,c,!1,null,null,null),g=h.exports,f=s("jE9Z"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[s("q-page-container",[s("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),s("div",{attrs:{id:"screen-too-large"}},[s("h5",{staticClass:"text-center"},[e._v(e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens")))])])],1)},b=[];v._withStripped=!0;var w={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},updated:function(){this.fixLayout()},mounted:function(){this.fixLayout(),this.$store.state.user&&this.$store.state.user.language&&(this.$i18n.locale=this.$store.state.user.language)},watch:{$route:function(e){this.fixLayout(),this.$store.state.user&&this.$store.state.user.language&&(this.$i18n.locale=this.$store.state.user.language)}},methods:{fixLayout:function(){document.getElementById("q-app").style.height=window.innerHeight+"px",document.getElementById("q-app").style.minHeight=window.innerHeight+"px",document.getElementById("q-app").style.maxHeight=window.innerHeight+"px";var e=window.innerHeight+"px",t=document.getElementById("main-view");"undefined"!==typeof t&&null!==t&&(t.style.height=e,t.style.minHeight=e,t.style.maxHeight=e)}}},y=w,q=Object(m["a"])(y,v,b,!1,null,null,null),C=q.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"div-column",staticClass:"column"},[e.geolocationIsSupported?s("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){e.updateCenter(t)},dragend:function(t){e.dragEnd(t)},click:function(t){e.closeInfoWindows()}}},[s("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}),e._l(e.questList,function(t,a){return s("gmap-marker",{key:t._id,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(s){e.openQuestSummary(t,a)}}})}),s("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[s("div",{staticClass:"infoWindow"},[s("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),s("p",[e._v(e._s(e.$t("label.Difficulty"))+" : "+e._s(e.$t("label."+(e.currentQuest?e.getQuestLevelName(e.currentQuest.level):e.getQuestLevelName(2)))))]),s("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.$router.push("/quest/play/"+(e.currentQuest?e.currentQuest._id:""))}}},[e._v(e._s(e.$t("label.Play")))])],1)])],2):e._e()],1):e._e(),e.geolocationIsSupported?e._e():s("div",{staticClass:"row enable-geolocation fixed-center centered"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"text-primary"},[e._v(e._s(e.$t("label.PleaseActivateGeolocation")))]),e.nativeSettingsIsEnabled?s("div",[s("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.PressHere")))])],1):e._e(),e.nativeSettingsIsEnabled?e._e():s("div",[e.isChrome?s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})]),s("p",[e._v("\n          "+e._s(e.$t("label.OnceGeolocationEnabled"))+"\n          "),s("router-link",{attrs:{to:e.$route.path+"?_="+(new Date).getTime()}},[e._v(e._s(e.$t("label.PressHere")))]),e._v(".\n        ")],1)])])]),s("div",{staticClass:"score-box"},[s("div",{staticClass:"q-pa-md score-text"},[e._v(e._s(e.$store.state.user.score)+" "),s("q-icon",{attrs:{name:"fas fa-trophy"}})],1)]),s("div",{staticClass:"coin-box"},[s("div",{staticClass:"q-pa-md score-text"},[s("q-icon",{attrs:{name:"fas fa-coins"}}),e._v(" "+e._s(e.$store.state.user.coins)+" "),s("q-icon",{attrs:{name:"add_circle",color:"primary"},nativeOn:{click:function(t){e.buyCoins()}}})],1)]),s("q-layout-drawer",{staticClass:"over-map",attrs:{side:"left"},model:{value:e.showSuccess,callback:function(t){e.showSuccess=t},expression:"showSuccess"}},[s("q-tabs",{attrs:{"two-lines":""}},[s("q-tab",{attrs:{slot:"title",name:"ranking",icon:"star",label:e.$t("label.YourRanking"),default:""},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"built",icon:"add_box",label:e.$t("label.QuestsCreated")},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"played",icon:"play_circle_filled",label:e.$t("label.QuestsSuccessful")},slot:"title"}),s("q-tab-pane",{attrs:{name:"built"}},[s("q-btn",{staticClass:"full-width",attrs:{link:"",color:"tertiary"},on:{click:function(t){e.$router.push("/quest/create/welcome")}}},[e._v(e._s(e.$t("label.CreateANewQuest")))]),s("q-list",{attrs:{highlight:""}},[e._l(e.success.quests.built,function(t){return s("q-item",{key:t._id,nativeOn:{click:function(s){e.$router.push("/quest/settings/"+t._id)}}},[t.picture?s("q-item-side",{attrs:{avatar:e.serverUrl+"/upload/quest/"+t.picture}}):e._e(),t.picture?e._e():s("q-item-side",{attrs:{avatar:"statics/profiles/noprofile.png"}}),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?s("q-item-tile",{attrs:{sublabel:""}},[s("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated))+"\n              ")],1):e._e(),"unpublished"==t.status?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e(),"tovalidate"==t.status?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                "+e._s(e.$t("label.PublicationRequested"))+" ...\n              ")]):e._e(),"rejected"==t.status?s("q-item-tile",{staticStyle:{color:"#f00"},attrs:{sublabel:""}},[e._v("\n                "+e._s(e.$t("label.PublicationRejected"))+"\n              ")]):e._e()],1)],1)}),0===e.success.quests.built.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.$t("label.NoQuestCreated")))])],1)],1):e._e()],2)],1),s("q-tab-pane",{attrs:{name:"played"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.success.quests.played,function(t){return e.success.quests.played&&e.success.quests.played.length>0?s("q-item",{key:t._id,nativeOn:{click:function(s){e.$router.push("/quest/play/"+t.questId)}}},[t.questData&&t.questData.picture?s("q-item-side",{attrs:{avatar:t.questData.picture&&"_"===t.questData.picture[0]?"statics/images/quest/"+t.questData.picture:e.serverUrl+"/upload/quest/"+t.questData.picture}}):e._e(),t.questData&&t.questData.picture?e._e():s("q-item-side",{attrs:{avatar:"statics/profiles/noprofile.png"}}),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.getQuestTitle(t.questData,!1))+" "+e._s(t.type))]),t.dateCreated&&"finished"==t.status&&!t.score?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n              "+e._s(e.$t("label.PlayedOn"))+" "+e._s(e._f("formatDate")(t.dateCreated))+"\n            ")]):e._e(),t.dateCreated&&"finished"==t.status&&t.score?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n              "+e._s(e.$t("label.Succeeded"))+" "+e._s(e._f("formatDate")(t.dateCreated))+"\n            ")]):e._e(),t.dateCreated?e._e():s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n              "+e._s(e.$t("label.Succeeded"))+"\n            ")]),"in-progress"==t.status?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n              "+e._s(e.$t("label.ContinueThisQuest"))+"\n            ")]):e._e()],1),t.questData.type&&"quest"!==t.questData.type?e._e():s("q-item-side",{staticClass:"score",attrs:{right:""}},[e._v("\n            "+e._s(t.score)+" "),s("q-icon",{attrs:{name:"fas fa-trophy"}})],1),t.questData.type&&"quest"!==t.questData.type?s("q-item-side",{staticClass:"score",attrs:{right:""}},[e._v("\n            "+e._s(t.reward)+" "),s("q-icon",{attrs:{name:"fas fa-coins"}})],1):e._e()],1):e._e()}),0===e.success.quests.played.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.$t("label.NoQuestPlayed")))])],1)],1):e._e()],2)],1),s("q-tab-pane",{attrs:{name:"ranking"}},[e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?s("div",{staticClass:"row"},[s("div",{staticClass:"col centered"},[s("q-icon",{staticClass:"big-icon",attrs:{name:"public",color:"yellow-5"}},[s("q-tooltip",[e._v("\n                "+e._s(e.$t("label.YourWorldRanking"))+"\n              ")])],1),s("p",{staticClass:"size-1"},[e._v("\n              Rank: "+e._s(e.$store.state.user.statistics.rankings.world)+"\n            ")])],1),s("div",{staticClass:"col centered"},[s("q-icon",{staticClass:"big-icon",attrs:{name:"home",color:"yellow-5"}},[s("q-tooltip",[e._v("\n                "+e._s(e.$t("label.YourCityRanking"))+"\n              ")])],1),s("p",{staticClass:"size-1"},[e._v("\n              Rank: "+e._s(e.$store.state.user.statistics.rankings.town)+"\n            ")])],1)]):e._e(),e.success.ranking&&e.success.ranking.length>0?s("q-list",[s("q-list-header",[e._v(e._s(e.$t("label.TerritoriesWon")))]),e._l(e.success.ranking,function(t,a){return s("q-item",{key:a},[s("q-item-main",{attrs:{label:t.town}}),t.playedNb<t.totalNb?s("q-item-side",{attrs:{right:""}},[s("q-progress",{staticStyle:{width:"75px"},attrs:{percentage:parseInt(t.playedNb/t.totalNb*100,10),color:"yellow-5",height:"18px"}})],1):e._e(),t.playedNb>=t.totalNb?s("q-item-side",{attrs:{right:""}},[s("q-icon",{attrs:{name:"flag",size:"2rem",color:"yellow-5"}})],1):e._e()],1)}),s("q-item",[e._v("\n          "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n          ")])],2):e._e(),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():s("p",[e._v("\n          "+e._s(e.$t("label.NoRankingYet"))+"\n        ")])],1)],1)],1),s("q-layout-drawer",{staticClass:"over-map",attrs:{side:"right"},model:{value:e.showProfile,callback:function(t){e.showProfile=t},expression:"showProfile"}},[s("div",{staticClass:"header row"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"big-avatar"},[e.$store.state.user.picture&&-1!==e.$store.state.user.picture.indexOf("http")?s("div",{style:"background-image: url("+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture&&-1===e.$store.state.user.picture.indexOf("http")?s("div",{style:"background-image: url("+e.serverUrl+"/upload/profile/"+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture?e._e():s("div",{style:"background-image: url(statics/icons/game/profile-small.png); background-color: #fff;"}),s("label",{attrs:{for:"picturefile"}},[e._v(e._s(e.$t("label.Edit")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*"},on:{change:e.uploadImage}})])]),s("div",{staticClass:"col"},[s("div",{staticClass:"title"},[e._v(e._s(e.$store.state.user.name))]),s("q-btn",{attrs:{label:e.$t("label.SignOut"),icon:"power_settings_new",flat:""},nativeOn:{click:function(t){e.Disconnect()}}})],1)]),s("div",{staticClass:"q-pa-md"},[s("p",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyLevel"))+" : "+e._s(e.$store.state.user.level))]),s("q-progress",{attrs:{percentage:e.profile.level.progress,stripe:"",animate:"",height:"30px",color:"primary"}}),e._v("\n      "+e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max}))+" "),s("a",{on:{click:function(t){e.openHowTo()}}},[e._v(e._s(e.$t("label.HowTo")))])],1),s("q-tabs",[s("q-tab",{attrs:{slot:"title",name:"profile",icon:"face",label:e.$t("label.MyProfile")},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"friends",icon:"supervised_user_circle",label:e.$t("label.Friends")},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"news",icon:"notifications",label:e.$t("label.News"),default:""},slot:"title"}),s("q-tab-pane",{attrs:{name:"profile"}},[s("form",{on:{submit:function(t){t.preventDefault(),e.submitProfileChanges()}}},[s("q-field",{staticClass:"padding-medium",attrs:{icon:"account circle",label:e.$t("label.EditYourInformations")}},[s("q-field",{attrs:{error:e.$v.profile.form.name.$error}},[s("q-input",{attrs:{"stack-label":e.$t("label.YourName"),placeholder:"John Doe"},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),e.profile.form.name.$error?s("div",{staticClass:"q-field-bottom"},[e.profile.form.name.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourName")))])]):e._e()],1),e.profile.userCanChangeEmail?s("q-field",{attrs:{error:e.$v.profile.form.email.$error}},[s("q-input",{attrs:{"stack-label":e.$t("label.YourEmail"),placeholder:e.$t("label.emailExample")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.profile.form.email.$error?s("div",{staticClass:"q-field-bottom"},[e.profile.form.email.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourEmailAddress")))]),e.profile.form.email.email?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterAValidEmailAddress")))])]):e._e()],1):e._e(),s("q-field",{attrs:{error:e.$v.profile.form.country.$error}},[s("q-select",{attrs:{"stack-label":e.$t("label.YourCountry"),options:e.profile.countries},model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),e.profile.form.country.$error?s("div",{staticClass:"q-field-bottom"},[e.profile.form.country.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseSelectYourCountry")))])]):e._e()],1),s("q-field",{attrs:{error:e.$v.profile.form.zipCode.$error}},[s("q-input",{attrs:{"stack-label":e.$t("label.YourZipCode"),placeholder:"38500"},model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),e.profile.form.zipCode.$error?s("div",{staticClass:"q-field-bottom"},[e.profile.form.zipCode.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourZipCode")))])]):e._e()],1),s("q-field",[s("q-select",{attrs:{"stack-label":e.$t("label.YourLanguage"),options:e.languages},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}})],1),s("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:function(t){e.submitProfileChanges()}}},[e._v(e._s(e.$t("label.Save")))])],1),e.profile.userCanChangePassword?s("q-field",{staticClass:"padding-medium",attrs:{icon:"lock",label:e.$t("label.ChangeYourPassword")}},[s("q-field",[s("q-input",{attrs:{type:"password","stack-label":e.$t("label.CurrentPassword")},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}})],1),s("q-field",[s("q-input",{attrs:{type:"password","stack-label":e.$t("label.NewPassword")},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}})],1),s("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:function(t){e.submitProfileChanges()}}},[e._v(e._s(e.$t("label.Save")))])],1):e._e()],1)]),s("q-tab-pane",{attrs:{name:"friends"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.friends.list,function(t){return s("q-item",{key:t.friendId,nativeOn:{click:function(s){e.openFriendCard(t.friendId)}}},[s("q-item-side",[s("q-item-tile",{attrs:{avatar:""}},[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-main",[s("q-item-tile",[e._v(e._s(t.name))])],1)],1)}),0===e.friends.list.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.$t("label.NoFriend")))])],1)],1):e._e()],2)],1),s("q-tab-pane",{attrs:{name:"news"}},[s("q-infinite-scroll",{attrs:{handler:e.loadNews}},[s("q-list",{attrs:{highlight:""}},[e._l(e.friends.news.items,function(t,a){return s("q-item",{key:t._id},[t.data.picture&&-1!==t.data.picture.indexOf("http")?s("q-item-side",{attrs:{avatar:t.data.picture}}):e._e(),t.data.picture&&-1===t.data.picture.indexOf("http")?s("q-item-side",{attrs:{avatar:e.serverUrl+"/upload/profile/"+t.data.picture}}):e._e(),t.data.picture?e._e():s("q-item-side",{attrs:{avatar:"statics/icons/game/profile-small.png"}}),s("q-item-main",[t.data&&t.data.userId?s("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.data.name))]):e._e(),"standard"===t.type?s("q-item-tile",{attrs:{label:""}},[e._v("\n                  "+e._s(t.title)+"\n                ")]):e._e(),"standard"!==t.type?s("q-item-tile",{attrs:{label:""}},[s("p",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?s("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                  "+e._s(e._f("formatDate")(t.creation.date))+"\n                  "),"friends"===t.destination?s("span",[e._v("\n                    - \n                    "),e.isLiked(t)?e._e():s("a",{staticStyle:{color:"#000"},on:{click:function(t){e.like(a)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?s("a",{on:{click:function(t){e.unlike(a)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?s("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])],1)],1)}),0===e.friends.news.items.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.$t("label.NoNews")))])],1)],1):e._e()],2),s("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[s("q-spinner-dots",{attrs:{size:5}})],1)],1)],1)],1)],1),s("q-modal",{staticClass:"over-map",model:{value:e.showSearch,callback:function(t){e.showSearch=t},expression:"showSearch"}},[s("div",{ref:"div-column",staticClass:"column"},[s("div",{staticClass:"row q-pa-md"},[s("q-search",{attrs:{after:[{icon:"close",handler:function(){e.closeSearch()}}]},on:{input:function(t){e.findQuests()}},model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1),s("div",{staticClass:"row"},[s("q-list",{attrs:{highlight:""}},e._l(e.search.quests,function(t){return s("q-item",{key:t._id},[s("q-card",{staticClass:"q-ma-sm",attrs:{inline:""}},[s("q-card-media",{staticClass:"preview",attrs:{"overlay-position":"top"}},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.picture}}),s("q-card-title",{attrs:{slot:"overlay"},nativeOn:{click:function(s){e.$router.push("/quest/play/"+t._id)}},slot:"overlay"},[e._v("\n                  "+e._s(e.getQuestTitle(t,!0))+"\n                  "),t.rating?s("q-rating",{attrs:{slot:"subtitle",color:"primary",max:5},slot:"subtitle",model:{value:t.rating,callback:function(s){e.$set(t,"rating",s)},expression:"item.rating"}}):e._e(),t.distance&&t.distance>0&&t.distance<=99?s("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[s("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n                  ")],1):e._e(),0===t.distance?s("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[s("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" <1 "+e._s(e.$t("label.km"))+"\n                  ")],1):e._e(),t.distance>99?s("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[s("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" >99 "+e._s(e.$t("label.km"))+"\n                  ")],1):e._e()],1)],1)],1)],1)})),s("q-item",{directives:[{name:"show",rawName:"v-show",value:0==e.search.quests.length,expression:"search.quests.length == 0"}],nativeOn:{click:function(t){e.$router.push("/quest/create")}}},[s("q-item-side",[s("q-icon",{attrs:{name:"explore",size:"2rem"}})],1),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.$t("label.NoQuestForThisSearch")))]),s("q-item-tile",{attrs:{sublabel:""}},[s("a",{on:{click:function(t){e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1)],1)],1)])]),s("q-modal",{staticClass:"over-map",model:{value:e.friends.show,callback:function(t){e.$set(e.friends,"show",t)},expression:"friends.show"}},[s("div",{staticClass:"panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.friends.show=!1}}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.friends.selected.name))]),s("q-tabs",{attrs:{"two-lines":""}},[s("q-tab",{attrs:{slot:"title",name:"friendranking",icon:"star",label:e.$t("label.Ranking"),default:""},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"friendbuilt",icon:"add_box",label:e.$t("label.QuestsCreated")},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"friendplayed",icon:"play_circle_filled",label:e.$t("label.QuestsSuccessful")},slot:"title"}),s("q-tab-pane",{attrs:{name:"friendranking"}}),s("q-tab-pane",{attrs:{name:"friendbuilt"}}),s("q-tab-pane",{attrs:{name:"friendplayed"}})],1)],1)]),s("q-modal",{staticClass:"over-map",model:{value:e.shop.show,callback:function(t){e.$set(e.shop,"show",t)},expression:"shop.show"}},[s("a",{staticClass:"float-right no-underline q-pa-md",attrs:{color:"grey"},on:{click:e.closeShop}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Shop")))]),s("shop",{on:{close:e.closeShop}})],1),s("div",{staticClass:"fixed-bottom over-map"},[s("div",{staticClass:"menu-background"}),s("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:e.swipeMenu,expression:"swipeMenu",modifiers:{horizontal:!0}}],staticClass:"menu row"},[s("div",{staticClass:"col-4 centered",on:{click:function(t){e.openSuccessPage()}}},[s("q-btn",{attrs:{icon:"fingerprint",round:"",color:"primary"}})],1),s("div",{staticClass:"col-4 centered",on:{click:function(t){e.openSearchOptions()}}},[s("img",{attrs:{src:"statics/icons/game/menu-main.png"}})]),s("div",{staticClass:"col-4 centered",on:{click:function(t){e.openProfilePage()}}},[s("q-btn",{attrs:{icon:"group",round:"",color:"primary"}})],1)]),e.warnings.noLocation?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1):e._e(),e.warnings.lowBattery?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n    ")],1):e._e(),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n    ")],1):e._e()])],1)},S=[];k._withStripped=!0;s("dRSK"),s("OG14"),s("yt8O"),s("RW0V"),s("f3/d"),s("rE2o"),s("ioFf"),s("rGqo"),s("ls82");var x=s("yXPU"),_=s.n(x),$=(s("SRfc"),s("vDqi")),A=s.n($);A.a.defaults.withCredentials=!0;var T=function(){var e="https://api.graaly.com";return A.a.create({baseURL:e,validateStatus:function(e){return e<500}})},P={listNearest:function(e,t){return T().get("quests/nearest/"+e.lng+"-"+e.lat+"/"+t)},getById:function(e){return T().get("quest/"+e)},find:function(e,t){return T().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude)},create:function(e){return T().post("quest/create",e)},save:function(e){return T().put("quest/"+e._id+"/update",e)},remove:function(e){return T().delete("quest/"+e+"/remove")},addLanguage:function(e,t){return T().put("quest/"+e+"/lang/add/"+t)},publish:function(e,t){return T().put("quest/"+e+"/publish/"+t)},unpublish:function(e,t){return T().put("quest/"+e+"/unpublish/"+t)},ListCreatedByAUser:function(e){return T().get("user/"+e+"/quests/created")},ListPlayedByAUser:function(e){return T().get("user/"+e+"/quests/played")},uploadPicture:function(e){return T().post("/quest/picture/upload",e,{headers:{"Content-Type":"multipart/form-data"}})}},I={checkEmail:function(e){return T().get("check/email/"+e)},login:function(e,t){return T().post("login",{email:e,password:t})},logout:function(){return T().post("logout")},getAccount:function(e){return e&&"me"!==e?T().get("user/"+e):T().get("account")},createAccount:function(e){return T().post("user/create",e)},modifyAccount:function(e){return T().post("user/modify",e)},uploadAccountPicture:function(e){return T().post("/user/picture/upload",e,{headers:{"Content-Type":"multipart/form-data"}})},validateAccount:function(e,t){return T().post("account/validate",{email:e,code:t})},changePassword:function(e,t,s){return T().post("user/forgottenpassword/code/validate",{email:e,password:t,code:s})},sendForgottenPasswordCode:function(e){return T().post("user/forgottenpassword/code/generate",{email:e})},generateANewValidationCode:function(e){return T().post("user/validate/code/new",{email:e})}},R={listFriends:function(){return T().get("user/friends/list")},listNews:function(e,t,s){return T().get("user/friends/news/list/"+e+"/"+t).then(function(e){s(!1,e)})},likeNews:function(e){return T().put("user/friends/news/"+e+"/like")},unlikeNews:function(e){return T().put("user/friends/news/"+e+"/unlike")},getFriend:function(e){return T().get("user/"+e+"/profile")},getRanking:function(){return T().get("account/ranking")},addFriend:function(e){return T().post("user/friend/add/"+e)},challengeFriend:function(e,t){return T().post("user/friend/"+e+"/challenge/"+t)},getBestFriends:function(){return T().get("user/bestfriends")},buy:function(e){return T().post("user/buy/offer/"+e)}},N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, les pièces sont gratuites !")]),s("q-list",{attrs:{highlight:""}},[s("q-list-header",[e._v(e._s(e.$t("label.Coins")))]),s("q-item",[s("q-item-side",{attrs:{image:"statics/icons/game/shop-coins-medium.png"}}),s("q-item-main",{attrs:{label:"600 "+e.$t("label.coins")}}),s("q-item-side",{attrs:{right:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-side",{attrs:{image:"statics/icons/game/shop-bag-medium.png"}}),s("q-item-main",{attrs:{label:"3000 "+e.$t("label.coins")}}),s("q-item-side",{attrs:{right:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-side",{attrs:{image:"statics/icons/game/shop-chest-medium.png"}}),s("q-item-main",{attrs:{label:"6000 "+e.$t("label.coins")}}),s("q-item-side",{attrs:{right:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?s("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-coins"}})],1):e._e()],1)},M=[];N._withStripped=!0;var L={data:function(){return{coinsWon:0}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.coinsWon=0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{buy:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.coinsWon=0,e.next=3,R.buy(t);case 3:s=e.sent,s&&s.data&&s.data.coins&&(this.coinsWon=s.data.coins,this.$store.state.user.coins+=this.coinsWon),setTimeout(this.resetCoinsWon,2e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},z=L,O=Object(m["a"])(z,N,M,!1,null,null,null),F=O.exports,D=(s("Oyvg"),s("pIFo"),s("L2JU")),j=s("DkTT"),Y=s("p46w");i["a"].use(D["a"]);var E={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null},B={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t}},Q={login:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,a("loginStart"),e.next=4,I.login(s.email,s.password);case 4:return r=e.sent,200===r.status&&(a("loginSuccess",r.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),logout:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.next=3,I.logout();case 3:return a=e.sent,s("logout"),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setLastLoadedRoute:function(e,t){var s=e.commit;return s("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var s=e.commit,a=e.state;if(null===t){var r=a.questSteps.geolocation.drawDirectionInterval;null!==r&&window.clearInterval(r)}s("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var s=e.commit;return s("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var s=e.commit;return s("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var s=e.commit;return s("setErrorMessage",t)},setCurrentRun:function(e,t){var s=e.commit;return s("setCurrentRun",t)}},U={},W=new D["a"].Store({state:E,getters:U,actions:Q,mutations:B,plugins:[Object(j["a"])({getState:function(e){return Y["getJSON"](e)},setState:function(e,t){Y["set"](e,t,{expires:432e6,secure:!0})}})]}),G={handleError:function(e){W.dispatch("setErrorMessage",e),vs.push("/error")},buildOptionsForSelect:function(e,t,s){var a=[];return e.forEach(function(e){a.push({value:e[t.valueField],label:s("label."+e[t.labelField])})}),a},getById:function(e,t){for(var s=0;s<e.length;s++)if(e[s].id===t)return e[s];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,s,a){var r=6371,n=G.degreesToRadians(s-e),i=G.degreesToRadians(a-t);e=G.degreesToRadians(e),s=G.degreesToRadians(s);var o=Math.sin(n/2)*Math.sin(n/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(e)*Math.cos(s),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return r*l},bearingBetweenEarthCoordinates:function(e,t,s,a){var r=a-t,n=Math.sin(r)*Math.cos(s),i=Math.cos(e)*Math.sin(s)-Math.sin(e)*Math.cos(s)*Math.cos(r),o=G.radiansToDegrees(Math.atan2(n,i));return(o+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),s={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var a in s)t=t.replace(new RegExp(s[a],"g"),a);return t},shuffle:function(e){var t,s,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),s=e[a],e[a]=e[t],e[t]=s;return e},buildIncrementalArray:function(e){for(var t=[],s=1;s<=e;s++)t.push(s);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))}},V=G,H=s("ta7f"),K=s("dV7z"),J=(s("91GP"),{position:"top",actions:[{icon:"close"}]}),Z=function(e,t){var s;switch(t){case"positive":s={icon:"check_circle",color:"positive"};break;case"warning":s={icon:"warning",color:"orange"};break;case"error":s={icon:"report_problem",color:"negative"};break;default:s={icon:"info",color:"info"};break}o["d"].create(Object.assign({message:e},J,s))},X=function(e){return e>=5e4?{level:8,next:8,max:1e5,progress:100}:e>=25e3?{level:8,next:8,max:5e4,progress:Math.round((e-25e3)/25e3*100)}:e>=15e3?{level:7,next:8,max:25e3,progress:Math.round((e-15e3)/1e4*100)}:e>=1e4?{level:6,next:7,max:15e3,progress:Math.round((e-1e4)/5e3*100)}:e>=6e3?{level:5,next:6,max:1e4,progress:Math.round((e-6e3)/4e3*100)}:e>=3e3?{level:4,next:5,max:6e3,progress:Math.round((e-3e3)/3e3*100)}:e>=1500?{level:3,next:4,max:3e3,progress:Math.round((e-1500)/1500*100)}:e>=500?{level:2,next:3,max:1500,progress:Math.round((e-500)/1e3*100)}:{level:1,next:2,max:500,progress:Math.round(e/500*100)}},ee=s("U0of"),te=s("TBgu"),se=s("z4Pu"),ae=s("4Y7M"),re={components:{QInfiniteScroll:o["w"],QSpinnerDots:o["X"],shop:F},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-35}}}},search:{quests:[],text:""},user:{position:{latitude:0,longitude:0}},friends:{list:[],news:{limit:20,skip:0,items:[]},show:!1,selected:{}},shop:{show:!1},currentQuestIndex:null,currentQuest:null,geolocationIsSupported:!1,searchText:"",questList:[],serverUrl:"https://api.graaly.com",showSuccess:!1,showProfile:!1,showSearch:!1,nativeSettingsIsEnabled:!0,warnings:{lowBattery:!1,noLocation:!1,noNetwork:!1},success:{quests:{played:[],built:[]},ranking:[]},profile:{level:{},progress:10,form:{name:"--",picture:"",email:"",zipCode:"",country:"",oldPassword:"",newPassword:"",language:"en"},countries:"fr"===this.$i18n.locale?te:se,userCanChangeEmail:!0,userCanChangePassword:!0},languages:V.buildOptionsForSelect(ae,{valueField:"code",labelField:"name"},this.$t),isMounted:!1}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,s=t.vendor,a=t.userAgent.indexOf("Edge")>-1,r=t.userAgent.match("CriOS");return!!r||null!==e&&"undefined"!==typeof e&&"Google Inc."===s&&!1===a},google:K["gmapApi"]},mounted:function(){var e=this;this.findLocation(),window.addEventListener("batterylow",this.checkBattery,!1),this.checkNetwork(),this.$nextTick(function(){e.isMounted=!0})},methods:{closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},findLocation:function(){var e=this;navigator&&navigator.geolocation?(this.$q.loading.show(),navigator.geolocation.getCurrentPosition(function(){var t=_()(regeneratorRuntime.mark(function t(s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.geolocationIsSupported=!0,e.user.position.latitude=s.coords.latitude,e.user.position.longitude=s.coords.longitude,t.next=5,e.getQuests();case 5:e.questList.length>0?e.$refs.mapRef.$mapPromise.then(function(t){var s=new google.maps.LatLngBounds,a=!0,r=!1,n=void 0;try{for(var i,o=e.questList[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;s.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}t.fitBounds(s)}):e.CenterMapOnPosition(e.user.position.latitude,e.user.position.longitude),e.$q.loading.hide(),e.warnings.noLocation=!1;case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),function(t){console.error("geolocation failed",t),e.geolocationIsSupported=!1,e.$q.loading.hide(),setTimeout(e.findLocation,1e4),e.warnings.noLocation=!0},{timeout:5e3,maximumAge:1e4})):this.warnings.noLocation=!0},checkBattery:function(e){e.level<30?this.warnings.lowBattery=!0:this.warnings.lowBattery=!1},checkNetwork:function(){navigator.connection&&navigator.connection.type&&"undefined"!==typeof Connection&&navigator.connection.type===Connection.NONE?this.warnings.noNetwork=!0:this.warnings.noNetwork=!1,setTimeout(this.checkNetwork,2e4)},CenterMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var s=this.map.infoWindow,a={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};this.map.infoWindow.location=a,this.currentQuestIndex===t?s.isOpen=!s.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],s.isOpen=!0,this.panTo(a))},getQuests:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.map.filter=t||"all",e.next=3,P.listNearest({lng:this.user.position.longitude,lat:this.user.position.latitude},this.map.filter);case 3:s=e.sent,this.questList=s.data;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getQuestLevelName:function(e){var t=V.getById(ee,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),s=e.lng();this.map.center.lat===t&&this.map.center.lng===s||(this.map.centerTmp={lng:s,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},openSearchOptions:function(){var e=this;if(this.showSuccess)this.showSuccess=!1;else if(this.showProfile)this.showProfile=!1;else{var t=[{label:this.$t("label.CenterOnYourPosition"),icon:"gps_fixed",color:"primary",handler:function(){e.findLocation()}},{label:this.$t("label.BuildAQuestHere"),icon:"add_location",color:"primary",handler:function(){e.$router.push("/quest/create")}},{},{label:"best"===this.map.filter?this.$t("label.DisplayAllQuests"):this.$t("label.BestQuests"),icon:"best"===this.map.filter?"place":"favorite",color:"primary",handler:function(){"best"===e.map.filter?e.getQuests("all"):e.getQuests("best")}},{label:"easy"===this.map.filter?this.$t("label.DisplayAllQuests"):this.$t("label.OnlyEasy"),icon:"easy"===this.map.filter?"place":"child_care",color:"primary",handler:function(){"easy"===e.map.filter?e.getQuests("all"):e.getQuests("easy")}},{label:this.$t("label.SearchForAQuest"),icon:"search",color:"primary",handler:function(){e.openSearch()}}];this.$store.state.user.isAdmin&&t.push({label:this.$t("label.Administrate"),icon:"settings",color:"primary",handler:function(){e.openAdminPage()}}),this.$q.actionSheet({grid:!1,actions:t,dismiss:{label:"Cancel",handler:function(){e.$q.notify("Cancelled...")}}})}},openSuccessPage:function(){this.showSuccess||(this.listCreatedQuests(this.$store.state.user._id),this.listPlayedQuests(this.$store.state.user._id),this.getRanking()),this.showSuccess=!this.showSuccess},getRanking:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.getRanking();case 2:t=e.sent,this.success.ranking=t.data;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),listCreatedQuests:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.ListCreatedByAUser(t);case 2:s=e.sent,this.success.quests.built=s.data;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),listPlayedQuests:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.ListPlayedByAUser(t);case 2:s=e.sent,this.success.quests.played=s.data;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openProfilePage:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.showProfile=!this.showProfile,this.profile.level=X(this.$store.state.user.score),this.getProfileChangeData(this.$store.state.user._id),e.next=5,this.loadFriends();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),loadFriends:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.listFriends();case 2:t=e.sent,this.friends.list=t.data;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),loadNews:function(e,t){var s=this;R.listNews(this.friends.news.limit,this.friends.news.skip,function(e,a){s.friends.news.skip+=s.friends.news.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.friends.news.items=s.friends.news.items.concat(a.data),t())})},like:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.friends.news.items[t].likes.push({userId:this.$store.state.user._id,date:new Date}),e.next=3,R.likeNews(this.friends.news.items[t]._id);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),unlike:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(s=0;s<this.friends.news.items[t].likes.length;s++)this.friends.news.items[t].likes[s].userId===this.$store.state.user._id&&this.friends.news.items[t].likes.splice(s,1);return e.next=3,R.unlikeNews(this.friends.news.items[t]._id);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},openFriendCard:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.getFriend(t);case 2:s=e.sent,this.friends.selected=s.data,this.friends.show=!0;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getProfileChangeData:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.profile.form={name:this.$store.state.user.name,email:this.$store.state.user.email,picture:this.$store.state.user.picture,zipCode:this.$store.state.user.location.postalCode,country:this.$store.state.user.location.country,language:this.$store.state.user.language},this.$store.state.user.provider&&"graaly"!==this.$store.state.user.provider.name&&(this.profile.userCanChangeEmail=!1,this.profile.userCanChangePassword=!1);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),submitProfileChanges:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.profile.form.$error){e.next=6;break}return t={name:this.profile.form.name,email:this.profile.form.email,oldPassword:this.profile.form.oldPassword,newPassword:this.profile.form.newPassword,zipCode:this.profile.form.zipCode,country:this.profile.form.country,language:this.profile.form.language},e.next=4,I.modifyAccount(t);case 4:s=e.sent,s.status>=300&&s.data&&s.data.message?Z(s.data.message,"warning"):Z(this.$t("label.AccountModifiedLong"),"positive");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changeLanguage:function(){this.$i18n.locale=this.profile.form.language},uploadImage:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.target.files,s[0]){e.next=3;break}return e.abrupt("return");case 3:return a=new FormData,a.append("image",s[0]),e.next=7,I.uploadAccountPicture(a);case 7:r=e.sent,r&&(this.$store.state.user.picture=r.data.file);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Disconnect:function(){this.$router.push("/user/logout")},openAdminPage:function(){this.$router.push("/admin")},openHowTo:function(){this.$q.dialog({message:"to complete",position:"top"})},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]&&this.$store.state.user.language!==e.mainLanguage?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},backToMap:function(){this.showProfile=!1,this.showSuccess=!1},setMapIcon:function(e){var t={url:"statics/icons/game/pointer-inactive.png",size:{width:40,height:40,f:"px",b:"px"},scaledSize:{width:40,height:40,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:20,y:40}};return e?"played"!==e.status&&("quest"===e.type?t.url="statics/icons/game/pointer-quest.png":t.url="statics/icons/game/pointer-"+e.category+".png"):t.url="statics/icons/game/pointer-me.png",t},swipeMenu:function(e){"right"===e.direction&&this.openSuccessPage(),"left"===e.direction&&this.openProfilePage()},openSearch:function(){this.showSearch=!0},closeSearch:function(){this.showSearch=!1},findQuests:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.search.text.length>3)){e.next=9;break}return this.$q.loading.show(),t=this.user.position,e.next=6,P.find(this.search.text,t);case 6:s=e.sent,this.search.quests=s.data,this.geolocationIsSupported&&(this.search.quests=this.search.quests.map(function(e){var s=6378.137,a=e.location.coordinates[1]*Math.PI/180-t.latitude*Math.PI/180,r=e.location.coordinates[0]*Math.PI/180-t.longitude*Math.PI/180,n=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),i=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return e.distance=Math.floor(s*i),e}));case 9:this.$q.loading.hide(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$q.loading.hide();case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),buyCoins:function(){this.shop.show=!0},closeShop:function(){this.shop.show=!1},openLocationSettings:function(){window.cordova&&window.cordova.plugins.settings?(console.log("openNativeSettings is active"),window.cordova.plugins.settings.open("location",function(){console.log("opened settings"),this.nativeSettingsIsEnabled=!0},function(){console.log("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.log("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}},validations:{profile:{form:{email:{required:H["required"],email:H["email"]},name:{required:H["required"]},country:{required:H["required"]},zipCode:{required:H["required"]}}}}},ne=re,ie=(s("FM9K"),Object(m["a"])(ne,k,S,!1,null,null,null)),oe=ie.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.scrolling,expression:"scrolling"}],staticClass:"scroll"},[e.geolocationIsSupported?s("div",{staticClass:"fit",attrs:{id:"teaser"}},[s("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:e.swipeMgmt,expression:"swipeMgmt",modifiers:{horizontal:!0}}],staticClass:"fit",style:"background: url("+(e.quest.picture&&"_"===e.quest.picture[0]?"statics/images/quest/"+e.quest.picture:e.serverUrl+"/upload/quest/"+e.quest.picture)+" ) center center / cover no-repeat "},[s("div",{staticClass:"fit"},[s("div",{staticClass:"text-center bottom-dark-banner"},[s("p",{staticClass:"title"},[e._v("\n            "+e._s(e.getLanguage()?e.quest.title[e.getLanguage()]:e.$t("label.NoTitle"))+"\n            "),e.getLanguage()!==e.$store.state.user.language?s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()]),s("p",{staticClass:"medium-icon q-pa-none q-ma-none"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.availablePoints&&e.quest.availablePoints>0,expression:"!(isRunFinished || (isOwner && !isAdmin)) && quest.availablePoints && quest.availablePoints > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v(e._s(e.quest.availablePoints)+" "),s("q-icon",{attrs:{name:"fas fa-trophy"}})],1),s("span",{directives:[{name:"show",rawName:"v-show",value:(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.availablePoints&&e.quest.availablePoints>0,expression:"(isRunFinished || (isOwner && !isAdmin)) && quest.availablePoints && quest.availablePoints > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v("0 "),s("q-icon",{attrs:{name:"fas fa-trophy"}})],1),s("span",{directives:[{name:"show",rawName:"v-show",value:!(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.reward&&e.quest.reward>0,expression:"!(isRunFinished || (isOwner && !isAdmin)) && quest.reward && quest.reward > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v(e._s(e.quest.reward)+" "),s("q-icon",{attrs:{name:"fas fa-coins"}})],1),s("span",{directives:[{name:"show",rawName:"v-show",value:(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.reward&&e.quest.reward>0,expression:"(isRunFinished || (isOwner && !isAdmin)) && quest.reward && quest.reward > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v("0 "),s("q-icon",{attrs:{name:"fas fa-coins"}})],1)]),e.quest.rating?s("p",[s("q-rating",{attrs:{readonly:"",value:e.quest.rating&&e.quest.rating.rounded,color:"white",max:5,size:"1.2rem"}})],1):e._e(),e._v("  \n          "),s("div",{staticClass:"text-center"},[s("p",[(!this.isUserTooFar||e.quest.allowRemotePlay)&&e.isRunPlayable&&(e.isOwner||e.isAdmin||e.isRunStarted||e.isRunFinished)&&e.getAllLanguages()&&1===e.getAllLanguages().length?s("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest._id,e.getLanguage())}}},[e._v(e._s(e.$t("label.SolveThisQuest")))]):e._e(),(!this.isUserTooFar||e.quest.allowRemotePlay)&&e.isRunPlayable&&e.getAllLanguages()&&e.getAllLanguages().length>1?s("q-btn-dropdown",{attrs:{color:"primary",label:e.$t("label.SolveThisQuest")}},[s("q-list",{attrs:{link:""}},e._l(e.getAllLanguages(),function(t){return s("q-item",{directives:[{name:"show",rawName:"v-show",value:t.published,expression:"lang.published"}],key:t.lang,nativeOn:{click:function(s){e.playQuest(e.quest._id,t.lang)}}},[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+t.lang+".png"}}),e._v("\n                        "+e._s(e.$t("language."+t.lang))+"\n                      ")])],1)],1)}))],1):e._e(),this.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||e.isOwner||e.isAdmin||e.isRunStarted||e.isRunFinished||!e.getAllLanguages()||1!==e.getAllLanguages().length?e._e():s("button",{staticClass:"q-btn q-btn-item q-btn-rectange bg-primary",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest._id,e.getLanguage())}}},[e._v("\n                "+e._s(e.$t("label.SolveThisQuest"))),s("br"),e.quest.price&&e.quest.price>0?s("span",[e._v(e._s(e.quest.price)+" "),s("q-icon",{attrs:{name:"fas fa-coins"}})],1):e._e()]),e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():s("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.buyCoins()}}},[e._v(e._s(e.$t("label.BuyCoinsToPlay")))]),this.isUserTooFar&&!e.quest.allowRemotePlay?s("q-btn",{attrs:{disabled:"",color:"primary"}},[e._v(e._s(e.$t("label.GetCloserToStartingPoint")))]):e._e()],1)]),s("div",{staticClass:"full-width text-center"},[s("q-btn",{attrs:{flat:"",label:e.$t("label.BackToTheMap")},on:{click:function(t){e.backToTheMap()}}}),e.scrolled?e._e():s("span",[s("q-btn",{attrs:{flat:"",icon:"arrow_downward",label:e.$t("label.ScrollForMoreDetails")},on:{click:function(t){e.scrollToDetail()}}})],1)],1)])])]),s("div",{staticClass:"q-pa-md q-pb-xxxl",attrs:{id:"detail"}},[this.isRunFinished?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.YouAlreadyDidThisQuest"))),s("br"),e._v("\n        "+e._s(e.$t("label.YouCanResolveItAgain"))+"\n      ")]):e._e(),this.isRunFinished?e._e():s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.GeneralWarning"))+"\n      ")]),this.isUserTooFar&&e.quest.allowRemotePlay?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.QuestIsFarFromUser"))),s("br"),e._v("\n        "+e._s(e.$t("label.QuestIsFarFromUserDesc"))+"\n      ")]):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author._id===e.$store.state.user._id?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.YouAreQuestOwnerDesc"))+"\n      ")]):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author.name?s("p",[s("strong",[e._v(e._s(e.$t("label.Author"))+":")]),e._v(" "+e._s(e.quest.author.name))]):e._e(),e.quest.level?s("p",[s("strong",[e._v(e._s(e.$t("label.Difficulty"))+":")]),s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/magnifying-red.png"}}),s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/magnifying-"+(1===e.quest.level?"grey":"red")+".png"}}),s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/magnifying-"+(3===e.quest.level?"red":"grey")+".png"}})]):e._e(),e.quest.duration?s("p",[s("strong",[e._v(e._s(e.$t("label.Duration"))+":")]),e._v(" "+e._s(e.quest.duration)+" "+e._s(e.$t("label.minutes")))]):e._e(),e.quest.startingPlace?s("p",[s("strong",[e._v(e._s(e.$t("label.StartingPoint"))+":")]),e._v(" "+e._s(e.quest.startingPlace))]):e._e(),s("p",[e._v(e._s(e.getLanguage()?e.quest.description[e.getLanguage()]:""))])],1)]):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}],staticClass:"panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.ranking.show=!1}}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Ranking")))]),s("q-list",e._l(e.ranking.items,function(t){return s("q-item",{key:t.position},[s("q-item-side",[s("q-item-tile",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}})])],1),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.name)+" ("+e._s(t.score)+" "),s("q-icon",{attrs:{name:"fas fa-trophy"}}),e._v(")")],1)],1),s("q-item-side",{attrs:{right:""}},[s("q-item-tile",{attrs:{avatar:""}},[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"/statics/icons/game/profile-small.png"}})])],1),t.isFriend?e._e():s("q-item-side",{attrs:{right:""},nativeOn:{click:function(s){e.addFriend(t.id)}}},[s("q-item-tile",{attrs:{icon:"person_add",color:"primary"}})],1),t.isFriend?s("q-item-side",{attrs:{right:""}}):e._e()],1)}))],1)]),s("q-modal",{model:{value:e.shop.show,callback:function(t){e.$set(e.shop,"show",t)},expression:"shop.show"}},[s("a",{staticClass:"float-right no-underline q-pa-md",attrs:{color:"grey"},on:{click:e.closeShop}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Shop")))]),s("shop")],1),e.geolocationIsSupported?e._e():s("div",{staticClass:"row enable-geolocation"},[s("div",{staticClass:"col-12"},[s("h5",[e._v(e._s(e.$t("label.PleaseActivateGeolocation")))]),e.isChrome?s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}}),s("p",[e._v("\n          "+e._s(e.$t("label.OnceGeolocationEnabled"))+"\n          "),s("router-link",{attrs:{to:e.$route.path+"?_="+(new Date).getTime()}},[e._v(e._s(e.$t("label.PressHere")))]),e._v(".\n        ")],1)]):e._e()])])],1)},ue=[];le._withStripped=!0;s("Vd3H");var ce={getById:function(e){return T().get("run/"+e)},listForAQuest:function(e){return T().get("run/quest/"+e)},listPlayersForThisQuest:function(e){return T().get("run/quest/"+e+"/ranking")},getHint:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("run/"+t+"/step/"+s+"/hint");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),init:function(e,t,s){return T().post("run/quest/"+e+"/init/"+t+"/remote/"+s)},endRun:function(e){return T().put("run/"+e+"/end")},rate:function(e,t){return T().put("run/"+e+"/rate/"+t)},passCurrentStep:function(e){return T().put("run/"+e+"/passCurrentStep")}},de=o["Ma"].getScrollTarget,pe=o["Ma"].setScrollPosition,me={components:{shop:F},data:function(){return{quest:{},ranking:{show:!1,items:[]},shop:{show:!1},serverUrl:"https://api.graaly.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isOwner:!1,isAdmin:!1,geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,scrolled:!1}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,s=t.vendor,a=t.userAgent.indexOf("Edge")>-1,r=t.userAgent.match("CriOS");return!!r||null!==e&&"undefined"!==typeof e&&"Google Inc."===s&&!1===a}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.id);case 2:return this.$store.state.user.isAdmin&&(this.isAdmin=!0),this.$store.state.user._id===this.quest.authorUserId&&(this.isOwner=!0),e.next=6,this.getRun();case 6:return e.next=8,this.checkUserCanPlay();case 8:return e.next=10,this.getRanking();case 10:this.checkUserIsCloseFromStartingPoint();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;this.$data.geolocationIsSupported&&navigator.geolocation.getCurrentPosition(function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(Math.abs(t.coords.latitude-e.quest.location.coordinates[0])>.009||Math.abs(t.coords.longitude-e.quest.location.coordinates[1])>.013)&&(e.isUserTooFar=!0,setTimeout(e.checkUserIsCloseFromStartingPoint,15e3))},function(){console.error("geolocation failed"),e.geolocationIsSupported=!1},{timeout:1e4,maximumAge:1e4})},getQuest:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.getById(t);case 2:if(s=e.sent,this.quest=s.data,"undefined"===typeof this.quest.authorUserId){e.next=10;break}return e.next=7,I.getAccount(this.quest.authorUserId);case 7:s=e.sent,this.$set(this.quest,"author",s.data),this.quest.description=V.replaceBreakByBR(this.quest.description);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRun:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.listForAQuest(this.quest._id);case 2:if(t=e.sent,s=0,a="en",t&&t.data&&t.data.length>0){for(r=0;r<t.data.length;r++)"finished"===t.data[r].status&&(this.isRunFinished=!0),"in-progress"===t.data[r].status&&t.data[r].currentStep>s&&(s=t.data[r].currentStep,a=t.data[r].language);s>0&&(this.isRunStarted=!0,n=this,this.isOwner||this.$q.dialog({title:this.$t("label.ContinueThisStep"),message:this.$t("label.YouAlreadyStartThisQuest"),ok:this.$t("label.Continue"),cancel:this.$t("label.Restart")}).then(function(){return n.$router.push("/quest/play/"+n.quest._id+"/step/"+s+"/"+a)}))}case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkUserCanPlay:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isRunStarted&&!this.isRunFinished){e.next=2;break}return e.abrupt("return",!0);case 2:if(!(this.quest.price>this.$store.state.user.coins)||this.isAdmin||this.isOwner){e.next=5;break}return this.isRunPlayable=!1,e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addFriend:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.addFriend(t);case 2:if(s=e.sent,console.log(s),s)for(a=0;a<this.ranking.items.length;a++)this.ranking.items[a].id===t&&(this.ranking.items[a].isFriend=!0);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRanking:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.listPlayersForThisQuest(this.quest._id);case 2:if(t=e.sent,t&&t.data&&t.data.length>0){for(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),s=0;s<this.ranking.items.length;s++)0===s||this.ranking.items[s].score!==this.ranking.items[s-1].score?this.ranking.items[s].position=s+1:this.ranking.items[s].position=this.ranking.items[s-1].position;setTimeout(this.showRanking,3e3)}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showRanking:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.ranking.show=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t=e.languages.filter(function(e){return e.published});if(t&&t.length>0){for(var s="",a=0;a<t.length;a++)t[a].lang===this.$store.state.user.language&&(s=this.$store.state.user.language);""===s&&t.length>0&&(s=t[0].lang)}else e.languages.length>0&&(s=e.languages[0].lang);return s},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter(function(e){return e.published});return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},swipeMgmt:function(e){if("right"===e.direction&&this.backToTheMap(),"left"===e.direction){var t=this.getAllLanguages(this.quest),s=t[0].lang;this.playQuest(this.quest._id,s)}},playQuest:function(e,t){this.$router.push("/quest/play/"+e+"/step/1/"+t+"?remoteplay="+this.isUserTooFar)},scrolling:function(e){this.scrolled=e>40},scrollToDetail:function(){var e=document.getElementById("detail"),t=de(e),s=e.offsetTop,a=1e3;pe(t,s,a)},backToTheMap:function(){this.$router.push("/map")},buyCoins:function(){this.shop.show=!0},closeShop:function(){this.shop.show=!1}}},he=me,ge=Object(m["a"])(he,le,ue,!1,null,null,null),fe=ge.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:e.swipeMgmt,expression:"swipeMgmt",modifiers:{horizontal:!0}}],staticClass:"play"},[s("stepPlay",{attrs:{step:e.step,runId:e.run._id,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass}}),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"inventory panel-bottom q-pa-md"},[s("h1",[e._v(e._s(e.$t("label.Inventory")))]),e.inventory.items.length>0?s("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,function(t,a){return s("div",{key:a,on:{click:function(s){e.selectItem(t)}}},[s("img",{attrs:{src:t.picture.indexOf("statics/")>-1?t.picture:e.serverUrl+"/upload/quest/"+e.quest.id+"/step/new-item/"+t.picture}}),s("p",[e._v(e._s(t.title))])])}))])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}]},[s("div",{staticClass:"panel-bottom no-padding",style:"background: url("+(e.info.quest.picture&&"_"===e.info.quest.picture[0]?"/statics/images/quest/"+e.info.quest.picture:e.serverUrl+"/upload/quest/"+e.info.quest.picture)+" ) center center / cover no-repeat "},[s("div",{staticClass:"text-center bottom-dark-banner q-pb-xl"},[s("p",{staticClass:"title"},[e._v(e._s(e.info.quest&&e.info.quest.title?e.info.quest.title[e.lang]:e.$t("label.NoTitle")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.info&&e.info.score,expression:"info && info.score"}],staticClass:"q-pa-md score-text"},[e._v(e._s(e.info.score)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-trophy"}})],1),s("p",{staticClass:"q-pb-xl"},[s("q-btn",{attrs:{color:"primary"},on:{click:e.backToMap}},[e._v(e._s(e.$t("label.LeaveQuest")))])],1)])])])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hint.isOpened,expression:"hint.isOpened"}],staticClass:"hint panel-bottom q-pa-md"},[s("h1",[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?s("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?s("p",[e._v(e._s(e.hint.label[e.lang]))]):e._e(),s("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){e.askForHint()}}},[e._v(e._s(e.$t("label.Close")))])],1)]),s("q-layout-footer",{staticClass:"step-menu",model:{value:e.footer.show,callback:function(t){e.$set(e.footer,"show",t)},expression:"footer.show"}},[s("q-progress",{attrs:{percentage:100*(this.step.number-1)/e.info.stepsNumber,animate:"",stripe:"",color:"primary"}}),s("q-tabs",{model:{value:e.footer.tabSelected,callback:function(t){e.$set(e.footer,"tabSelected",t)},expression:"footer.tabSelected"}},[s("q-tab",{attrs:{slot:"title",name:"info",icon:"menu"},on:{click:function(t){e.openInfo()}},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"inventory",icon:"work"},on:{click:function(t){e.openInventory()}},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"hint",icon:"lightbulb outline",disable:!e.isHintAvailable()},on:{click:function(t){e.askForHint()}},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"previous",icon:"arrow_back"},on:{click:function(t){e.previousStep()}},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"next",icon:"arrow_forward",disable:!e.canMoveNextStep&&!e.canPass},on:{click:function(t){e.nextStep()}},slot:"title"})],1)],1)],1)},be=[];ve._withStripped=!0;var we={listForAQuest:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("quest/"+t+"/steps");case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),listWonObjects:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("quest/"+t+"/steps/"+s+"/objectswon");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),getById:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("step/"+t);case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getByNumber:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("quest/"+t+"/step/number/"+s);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),checkAnswer:function(){var e=_()(regeneratorRuntime.mark(function e(t,s,a,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().post("quest/"+t+"/step/"+s+"/check/"+a,r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,s,a,r){return e.apply(this,arguments)}}(),countForAQuest:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T().get("quest/"+t+"/steps/count");case 2:return s=e.sent,e.abrupt("return",s.data.count);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),save:function(e){return T().put("quest/"+e.questId+"/step/"+e._id+"/update",e)},remove:function(e,t){return T().delete("quest/"+e+"/step/"+t+"/remove")},move:function(e,t,s){return T().put("quest/"+e+"/step/"+t+"/move/"+s)},uploadBackgroundImage:function(e,t){return T().post("/quest/"+e+"/step/background/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadImageToRecognize:function(e,t){return T().post("/quest/"+e+"/step/image-recognition/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadAnswerImage:function(e,t){return T().post("/quest/"+e+"/step/choose-image/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadMemoryImage:function(e,t){return T().post("/quest/"+e+"/step/memory/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadCodeAnswerImage:function(e,t){return T().post("/quest/"+e+"/step/code-image/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadVideo:function(e,t){return T().post("/quest/"+e+"/step/video/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadPuzzleImage:function(e,t){return T().post("/quest/"+e+"/step/jigsaw-puzzle/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},uploadItemImage:function(e,t,s){return T().post("/quest/"+e+"/step/"+t+"/upload",s,{headers:{"Content-Type":"multipart/form-data"}})}},ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fit",attrs:{id:"play-view"}},[s("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden"},["info-text"==e.step.type||"info-video"==e.step.type?s("div",{staticClass:"info"},[s("div",{class:{grow:!e.step.videoStream},attrs:{id:"info-clickable"}},[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))]),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.playerResult,expression:"playerResult"}],staticClass:"text right"},[e._v(e._s(e.$t("label.ClickOnArrowToMoveToNextStep")))])])]),e.step.videoStream?s("div",{staticClass:"video"},[s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[s("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream,type:"video/mp4"}})])]):e._e()]):e._e(),"choose"==e.step.type?s("div",{staticClass:"choose"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),"text"===e.answerType?s("div",{staticClass:"answers-text"},e._l(e.step.options,function(t,a){return s("q-btn",{key:a,staticClass:"full-width",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult},on:{click:function(t){e.checkAnswer(a)}}},[e._v("\n          "+e._s(t.text)+"\n        ")])})):e._e(),"image"===e.answerType?s("div",{staticClass:"answers-images"},[s("div",{staticClass:"images-block"},e._l(e.step.options,function(t,a){return s("div",{key:a,class:t.class,on:{click:function(t){e.checkAnswer(a)}}},[s("img",{class:t.class,attrs:{src:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?s("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)}))]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.GoodAnswer"):e.$t("label.WrongAnswer")))])])]):e._e(),"code-keypad"==e.step.type?s("div",{staticClass:"code"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{staticClass:"typed-code"},[s("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[s("tr",e._l(e.playerCode,function(t,a){return s("td",{key:a,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])}))])]),s("div",{staticClass:"keypad"},[s("div",{staticClass:"keypadLine"},e._l(e.keypad,function(t,a){return s("div",{key:a},e._l(t,function(t,a){return s("q-btn",{key:a,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult},on:{click:function(s){e.addCodeChar(t)}}},[e._v(e._s(t))])}))}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions buttons-bottom"},[1===e.nbTry?s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))]):e._e(),s("div",[s("q-btn",{attrs:{color:"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){e.clearLastCodeChar()}}},[e._v(e._s(e.$t("label.Clear")))]),s("q-btn",{attrs:{color:"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1]},on:{click:function(t){e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.GoodAnswer"):e.$t("label.WrongGoodCodeWas")+" "+e.step.answers))])])]):e._e(),"code-color"==e.step.type?s("div",{staticClass:"code code-color"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{staticClass:"color-bubbles"},e._l(e.playerCode,function(t,a){return s("div",{key:a,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[a],on:{click:function(t){e.changeColorForCode(a)}}},[e._v(" ")])})),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions buttons-bottom"},[1===e.nbTry?s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))]):e._e(),s("div",[s("q-btn",{attrs:{color:"primary",icon:"done"},on:{click:function(t){e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.GoodAnswer"):e.$t("label.WrongAnswer")))])])]):e._e(),"code-image"==e.step.type?s("div",{staticClass:"code code-image"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("table",[s("tr",e._l(e.playerCode,function(t,a){return s("td",{key:a,staticClass:"text-center",on:{click:function(t){e.previousCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),s("tr",e._l(e.playerCode,function(t,a){return s("td",{key:a},[s("img",{attrs:{id:"image-code-"+a,src:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath}})])})),s("tr",e._l(e.playerCode,function(t,a){return s("td",{key:a,staticClass:"text-center",on:{click:function(t){e.nextCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions buttons-bottom"},[1===e.nbTry?s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))]):e._e(),s("div",[s("q-btn",{attrs:{color:"primary",icon:"done"},on:{click:function(t){e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.GoodAnswer"):e.$t("label.WrongAnswer")))])])]):e._e(),"image-recognition"==e.step.type?s("div",{staticClass:"image-recognition"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{staticClass:"photo"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.cameraStreamEnabled&&!e.photoTaken,expression:"!cameraStreamEnabled && !photoTaken"}],ref:"original-photo",staticClass:"shadow-8",attrs:{src:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/image-recognition/"+e.step.answers}}),s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-recognition"}),s("canvas",{ref:"photo-buffer",staticClass:"hidden"}),s("img",{directives:[{name:"show",rawName:"v-show",value:e.photoTaken,expression:"photoTaken"}],ref:"player-photo",attrs:{alt:e.$t("label.TheScreenCaptureWillAppearInThisBox")}})]),s("div",{staticClass:"actions buttons-bottom"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.cameraStreamEnabled&&!e.photoTaken,expression:"!cameraStreamEnabled && !photoTaken"}],staticClass:"full-width",attrs:{icon:"photo camera",color:"primary"},on:{click:function(t){e.togglecameraStream()}}},[e._v(e._s(e.$t("label.TakeThePicture")))]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}]},[s("q-btn",{attrs:{color:"primary",icon:"clear"},on:{click:function(t){e.togglecameraStream()}}},[e._v(e._s(e.$t("label.Cancel")))]),s("q-btn",{attrs:{color:"primary",icon:"done"},on:{click:function(t){e.checkAnswer()}}},[e._v(e._s(e.$t("label.Check")))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"text resultMessage",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.WellDone"):e.$t("label.PhotosDoesntMatch")))])],1)]):e._e(),"geolocation"==e.step.type?s("div",{staticClass:"geolocation"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))]),e.step.showDistanceToTarget?s("p",{staticClass:"text"},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e()]),e.step.showDirectionToTarget?s("div",{staticClass:"direction-helper"},[s("canvas",{attrs:{id:"direction-canvas"}})]):e._e(),s("div",{staticClass:"resultMessage"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.playerResult,expression:"playerResult"}],staticClass:"text right"},[e._v(e._s(e.$t("label.YouHaveFoundThePlace")))])])]):e._e(),"write-text"==e.step.type?s("div",{staticClass:"write-text"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{staticClass:"answer-text"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.writetext.playerAnswer,expression:"writetext.playerAnswer"}],class:{right:!0===e.playerResult,wrong:!1===e.playerResult},attrs:{placeholder:e.$t("label.YourAnswer")},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){t.target.composing||e.$set(e.writetext,"playerAnswer",t.target.value)}}}),s("q-btn",{staticClass:"full-width",attrs:{color:"primary",disabled:null!==e.playerResult},on:{click:function(t){e.checkAnswer()}}},[e._v(e._s(e.$t("label.ConfirmTheAnswer")))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&e.nbTry>0&&e.nbTry<2,expression:"playerResult === null && nbTry >0 && nbTry < 2"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.playerResult,expression:"playerResult !== null"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text",class:e.playerResult?"right":"wrong"},[e._v(e._s(e.playerResult?e.$t("label.GoodAnswer"):e.$t("label.WrongAnswer")))])])]):e._e(),"jigsaw-puzzle"===e.step.type?s("div",{staticClass:"puzzle"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,function(t){return s("div",{key:t.pos,staticClass:"piece",style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){e.handleDragStart(t)},drop:function(t){e.handleDrop(t)},dragend:function(t){e.handleDragEnd(t)}}},[s("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),s("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult,expression:"playerResult === true "}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.WellDone")))])])]):e._e(),"memory"===e.step.type?s("div",{staticClass:"puzzle"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("ul",{staticClass:"memory",attrs:{id:"card-deck"}},e._l(e.memory.items,function(t,a){return s("li",{key:a,staticClass:"card",class:{open:t.isClicked,show:t.isClicked,disabled:t.isFound},on:{click:function(t){e.selectMemoryCard(a)}}},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}})])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult,expression:"playerResult === true "}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.WellDone")))])])]):e._e(),"new-item"==e.step.type?s("div",{staticClass:"new-item"},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(""===e.step.text[e.lang]?e.$t("label.YouHaveWinANewItem"):e.step.text[e.lang]))])]),s("div",{staticClass:"item"},[s("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture}}),s("p",[e._v(e._s(e.step.options.title))])]),s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.playerResult,expression:"playerResult"}],staticClass:"text right"},[e._v(e._s(e.$t("label.ClickOnArrowToMoveToNextStep")))])])]):e._e(),"use-item"==e.step.type?s("div",{staticClass:"use-item",on:{click:function(t){e.useItem(t)}}},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.step.questId+"/step/background/"+e.step.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;"},[s("img",{staticStyle:{position:"relative","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.playerResult&&e.nbTry>0&&e.nbTry<2,expression:"playerResult === false && nbTry >0 && nbTry < 2"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.playerResult&&2===e.nbTry,expression:"playerResult === false && nbTry === 2"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.WrongAnswer")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult,expression:"playerResult === true"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.WellDone")))])])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?s("p",{staticClass:"inventory-btn"},[s("q-btn",{attrs:{round:"",color:"primary"}},[e.itemUsed?s("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e()]),e._v("\n      "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n    ")],1):e._e(),"find-item"==e.step.type?s("div",{staticClass:"find-item",on:{click:function(t){e.findItem(t)}}},[s("div",[s("p",{staticClass:"text"},[e._v(e._s(e.step.text[e.lang]))])]),s("div",{ref:"findItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.step.questId+"/step/background/"+e.step.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;"},[s("img",{staticStyle:{position:"relative","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.playerResult&&e.nbTry>0&&e.nbTry<2,expression:"playerResult === false && nbTry >0 && nbTry < 2"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text wrong"},[e._v(e._s(e.$t("label.SecondTry")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.playerResult&&2===e.nbTry,expression:"playerResult === false && nbTry === 2"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.WrongAnswer")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult,expression:"playerResult === true"}],staticClass:"resultMessage buttons-bottom"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.WellDone")))])])]):e._e(),"locate-item-ar"==e.step.type?s("div",{staticClass:"locate-item-ar"},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&!e.playerResult,expression:"cameraStreamEnabled && !playerResult"}],ref:"camera-stream-for-locate-item-ar"}),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.playerResult,expression:"!playerResult"}]},[s("div",{staticClass:"text"},[s("p",[e._v(e._s(e.step.text[e.lang]))]),s("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]),this.geolocation.canSeeTarget?e._e():s("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]),this.geolocation.canTouchTarget?s("p",[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e()])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.playerResult,expression:"!playerResult"}],staticClass:"target-view"},[s("canvas",{attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.playerResult,expression:"playerResult"}],staticClass:"resultMessage"},[s("div",{staticClass:"text right"},[e._v(e._s(e.$t("label.YouHaveWinANewItem")))]),e.step.options.is3D?e._e():s("img",{ref:"itemImage"})])]):e._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.score>0,expression:"playerResult === true && score > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.score)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-trophy"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-coins"}})],1)])},qe=[];ye._withStripped=!0;s("VRzm"),s("KKXr"),s("bHtr");var Ce=16,ke=16;function Se(e,t){if(e.width!==t.width||e.height!==t.height){var s=e.width*e.height,a=t.width*t.height;if(s<a){var r=[e,t,s,a];t=r[0],e=r[1],a=r[2],s=r[3]}var n=Math.sqrt(a/s),i=Math.round(e.width*n),o=Math.round(e.height*n);e=xe(e,i,o);var l=0,u=Math.min(e.width,t.width),c=e.width>t.width;e.width!==t.width&&(l=Math.round(Math.abs(e.width-t.width)/2));var d=0,p=Math.min(e.height,t.height),m=e.height>t.height;e.height!==t.height&&(d=Math.round(Math.abs(e.height-t.height)/2));var h=e;e=document.createElement("canvas"),e.width=u,e.height=p,e.getContext("2d").drawImage(h,c?l:0,m?d:0,u,p,0,0,u,p),h=t,t=document.createElement("canvas"),t.width=u,t.height=p,t.getContext("2d").drawImage(h,c?0:l,m?0:d,u,p,0,0,u,p)}var g=Ce,f=ke,v=e.width/e.height;return e.width>e.height?g=Math.round(g*v):e.width<e.height&&(f=Math.round(f/v)),e=xe(e,g,f),t=xe(t,g,f),_e(e,t)}function xe(e,t,s){var a=document.createElement("canvas");return a.width=t,a.height=s,a.getContext("2d").drawImage(e,0,0,t,s),a}function _e(e,t){var s=$e(e),a=$e(t),r=100*Ae.hammingDistance(s,a,e.width);return r.toFixed(3)}function $e(e){for(var t=Ae.pixelsMap(e),s=Ae.desaturate(t),a=Ae.average(s),r=Ae.thresholdMap(s,a),n="",i=0;i<r.length;i++)n+=r[i]?"-":"X",n+=(i+1)%e.width===0?"\n":"";return console.log(n),r}var Ae={desaturate:function(e){for(var t=new Array(e.length/4),s=0;s<t.length;s++){var a=4*s;t[s]=Math.round((e[a]+e[a+1]+e[a+2])/3)}return t},average:function(e){for(var t=0,s=0;s<e.length;s++)t+=e[s];return t/e.length},thresholdMap:function(e,t){return e.map(function(e){return e>=t})},pixelsMap:function(e){return e.getContext("2d").getImageData(0,0,e.width,e.height).data},hammingDistance:function(e,t,s){for(var a=0,r="",n=0;n<e.length;n++)"undefined"!==typeof t[n]&&e[n]===t[n]?(a++,r+="."):r+="*",r+=(n+1)%s===0?"\n":"";return console.log(r),e.length>0?a/e.length:0}},Te={hash:$e,compare:Se,compareHash:_e,utils:Ae},Pe=s("Iq7u"),Ie=s("O6Zk"),Re=s("Womt"),Ne=s("aCrv"),Me=s("vS4O"),Le=s.n(Me),ze={props:["step","runId","reload","itemUsed","lang"],watch:{reload:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}()},data:function(){return this.initialState()},mounted:function(){this.initData()},beforeDestroy:function(){"geolocation"!==this.step.type&&"locate-item-ar"!==this.step.type||navigator.geolocation.clearWatch(this.geolocation.locationWatcher)},methods:{initialState:function(){return{run:{},isRunFinished:!1,playerResult:null,cameraStreamEnabled:!1,serverUrl:"https://api.graaly.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,answerType:"text",playerCode:[],keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],photoComparisonThreshold:70,photoTaken:!1,geolocation:{distance:null,direction:null,locationWatcher:null,watchLocationInterval:1e3,rawDirection:null,alpha:null,beta:null,absoluteOrientationSensor:null,target:null,canSeeTarget:!1,canTouchTarget:!1},writetext:{playerAnswer:null},puzzle:{pieces:[],picture:"statics/icons/game/medal.png",dragSrcEl:null,element:{}},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},itemAdded:null}},initData:function(){var e=this;this.$nextTick(_()(regeneratorRuntime.mark(function t(){var s,a,r,n,i,o,l,u,c,d,p,m,h,g,f,v,b,w,y,q,C;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.getElementById("play-view"),e.step.backgroundImage?"find-item"===e.step.type||"use-item"===e.step.type?(s.style.background="none",s.style.backgroundColor="#000",e.showControls()):"jigsaw-puzzle"===e.step.type?(s.style.background="none",s.style.backgroundColor="#fff",e.showControls()):(a="_"===e.step.backgroundImage[0]?"statics/images/quest/"+e.step.backgroundImage:"https://api.graaly.com/upload/quest/"+e.step.questId+"/step/background/"+e.step.backgroundImage,s.style.background='#fff url("'+a+'") center/cover no-repeat',setTimeout(e.showControls,1500)):(s.style.background="none",s.style.backgroundColor="#fff",e.showControls()),r=e.$store.state.questSteps.geolocation.drawDirectionInterval,null!==r&&window.clearInterval(r),e.$store.dispatch("setDrawDirectionInterval",null),"info-text"!==e.step.type&&"info-video"!==e.step.type&&"new-item"!==e.step.type||setTimeout(e.checkAnswer,4500),"choose"===e.step.type&&(e.answerType=Array.isArray(e.step.options)&&e.step.options[0].hasOwnProperty("imagePath")&&null!==e.step.options[0].imagePath?"image":"text"),"code-keypad"===e.step.type&&e.resetKeypadCode(),"code-color"===e.step.type&&e.resetColorCode(),"code-image"===e.step.type&&e.resetImageCode(),"jigsaw-puzzle"===e.step.type&&(setTimeout(e.initPuzzle,1e3),e.$emit("pass")),"memory"===e.step.type&&(e.initMemory(),e.$emit("pass")),"geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type||(e.$emit("pass"),e.geolocation.locationWatcher=navigator.geolocation.watchPosition(e.watchLocationSuccess,e.watchLocationError,{enableHighAccuracy:!0,timeout:e.geolocation.watchLocationInterval,maximumAge:0})),"geolocation"===e.step.type&&("ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",e.handleOrientation):console.warn("No absolute orientation info is available"),e.$store.dispatch("setDrawDirectionInterval",window.setInterval(e.drawDirectionArrow,200))),"locate-item-ar"!==e.step.type||e.playerResult){t.next=83;break}if(n=e.$refs["camera-stream-for-locate-item-ar"],navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(t){n.srcObject=t,n.play(),e.cameraStreamEnabled=!0}).catch(function(e){console.warn("No camera stream available"),console.log(e)}),i=new AbsoluteOrientationSensor({frequency:30}),i.onerror=function(e){return console.log(e.error.name,e.error.message)},i.onreading=e.onAbsoluteOrientationSensorReading,i.start(),e.geolocation.absoluteOrientationSensor=i,o=document.getElementById("target-canvas"),e.geolocation.target={scene:new Re["Scene"],camera:new Re["PerspectiveCamera"](45,window.innerWidth/window.innerHeight,.001,1e3),renderer:new Re["WebGLRenderer"]({canvas:o,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new Re["Clock"]},e.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),l=e.geolocation.target,u=l.scene,c=new Re["PointLight"](13684944),c.position.set(0,0,1e3),u.add(c),u.add(new Re["AmbientLight"](10526880)),!e.step.options.is3D){t.next=60;break}return p=e.step.options.model,m=Ie[p],t.prev=34,t.next=37,e.ModelLoaderAsync(p);case 37:h=t.sent,t.next=45;break;case 40:return t.prev=40,t.t0=t["catch"](34),console.error("Error while loading 3D model:",t.t0),Z(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 45:d=h.scene,m.scale&&(g=m.scale,d.scale.set(g,g,g)),m.rotation=m.rotation||{},m.rotation.hasOwnProperty("x")?d.rotateX(V.degreesToRadians(m.rotation.x)):d.rotateX(Math.PI/2),m.rotation.hasOwnProperty("y")&&d.rotateY(V.degreesToRadians(m.rotation.y)),m.rotation.hasOwnProperty("z")&&d.rotateZ(V.degreesToRadians(m.rotation.z)),d.traverse(function(e){e instanceof Re["Mesh"]&&e.geometry.center()}),f=(new Re["Box3"]).setFromObject(d),v=(f.max.z-f.min.z)/2,d.applyMatrix((new Re["Matrix4"]).makeTranslation(0,0,v)),l.size=Math.max(f.max.x-f.min.x,f.max.y-f.min.y,f.max.z-f.min.z),m.translation&&(m.translation.hasOwnProperty("x")&&(d.position.x+=m.translation.x),m.translation.hasOwnProperty("y")&&(d.position.y+=m.translation.y),m.translation.hasOwnProperty("z")&&(d.position.z+=m.translation.z)),h.animations.length>0&&(b=new Re["AnimationMixer"](h.scene),b.clipAction(h.animations[0]).play(),e.geolocation.target.mixers.push(b)),t.next=77;break;case 60:w=e.serverUrl+"/upload/quest/"+e.step.questId+"/step/locate-item-ar/"+e.step.options.picture,e.$refs["itemImage"].src=w,l.size=e.step.options.objectSize||1,y=new Re["PlaneGeometry"](l.size,l.size),t.prev=64,q=(new Re["TextureLoader"]).load(w),t.next=73;break;case 68:return t.prev=68,t.t1=t["catch"](64),console.error("Error while loading image:",t.t1),Z(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 73:C=new Re["MeshBasicMaterial"]({map:q}),d=new Re["Mesh"](y,C),d.rotation.x=Math.PI/2,d.position.y=0;case 77:d.name="targetObject",d.visible=!1,u.add(d),e.geolocation.target.camera.lookAt(new Re["Vector3"](0,1,0)),e.geolocation.target.camera.position.z=1.5,e.animateTargetCanvas();case 83:case"end":return t.stop()}},t,this,[[34,40],[64,68]])})))},showControls:function(){this.controlsAreDisplayed=!0},checkAnswer:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.playerResult){e.next=2;break}return e.abrupt("return");case 2:e.t0=this.step.type,e.next="info-text"===e.t0?5:"info-video"===e.t0?5:"new-item"===e.t0?5:"choose"===e.t0?10:"geolocation"===e.t0?15:"image-recognition"===e.t0?20:"code-keypad"===e.t0?26:"code-color"===e.t0?31:"code-image"===e.t0?36:"jigsaw-puzzle"===e.t0?41:"memory"===e.t0?46:"write-text"===e.t0?51:"use-item"===e.t0?56:"find-item"===e.t0?61:"locate-item-ar"===e.t0?66:71;break;case 5:return e.next=7,we.checkAnswer(this.step.questId,this.step.id,this.runId,{});case 7:return s=e.sent,this.submitGoodAnswer(0),e.abrupt("break",72);case 10:return e.next=12,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t});case 12:return s=e.sent,!0===s.result?(a=this.step.options[t],a.icon="done",a.class="right",i["a"].set(this.step.options,t,a),this.submitGoodAnswer(s&&s.score?s.score:0)):(r=this.step.options[t],r.icon="clear",r.class="wrong",i["a"].set(this.step.options,t,r),(s.answer||0===s.answer)&&(n=this.step.options[s.answer],n.icon="done",n.class="right",i["a"].set(this.step.options,s.answer,n)),this.nbTry++,this.submitWrongAnswer()),e.abrupt("break",72);case 15:return e.next=17,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t});case 17:return s=e.sent,!0===s.result&&this.submitGoodAnswer(s&&s.score?s.score:0),e.abrupt("break",72);case 20:return o=this.checkPhoto(),e.next=23,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:o});case 23:return s=e.sent,!0===s.result?this.submitGoodAnswer(s&&s.score?s.score:0):this.submitWrongAnswer(),e.abrupt("break",72);case 26:return e.next=28,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:this.playerCode.join("")});case 28:return s=e.sent,!0===s.result?this.submitGoodAnswer(s&&s.score?s.score:0):(this.nbTry++,this.nbTry<2?this.resetKeypadCode():this.submitWrongAnswer()),e.abrupt("break",72);case 31:return e.next=33,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:this.playerCode.join("|")});case 33:return s=e.sent,!0===s.result?this.submitGoodAnswer(s&&s.score?s.score:0):(this.nbTry++,this.nbTry<2?this.resetColorCode():this.submitWrongAnswer()),e.abrupt("break",72);case 36:return e.next=38,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:this.playerCode.join("|")});case 38:return s=e.sent,!0===s.result?this.submitGoodAnswer(s&&s.score?s.score:0):(this.nbTry++,this.nbTry<2?this.resetImageCode():this.submitWrongAnswer()),e.abrupt("break",72);case 41:return e.next=43,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t.join("|")});case 43:return s=e.sent,!0===s.result&&this.submitGoodAnswer(s&&s.score?s.score:0),e.abrupt("break",72);case 46:return e.next=48,we.checkAnswer(this.step.questId,this.step.id,this.runId,{});case 48:return s=e.sent,!0===s.result&&this.submitGoodAnswer(s&&s.score?s.score:0),e.abrupt("break",72);case 51:return e.next=53,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:this.writetext.playerAnswer});case 53:return s=e.sent,!0===s.result?this.submitGoodAnswer(s&&s.score?s.score:0):(this.nbTry++,this.nbTry<2?this.writetext.playerAnswer="":this.submitWrongAnswer()),e.abrupt("break",72);case 56:return e.next=58,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t});case 58:return s=e.sent,!0===s.result?(this.showItemLocation(s.answer.coordinates.left,s.answer.coordinates.top),this.submitGoodAnswer(s&&s.score?s.score:0)):(this.nbTry++,this.nbTry<2?Z(this.$t("label.UseItemNothingHappens"),"error"):(this.showItemLocation(s.answer.coordinates.left,s.answer.coordinates.top),this.submitWrongAnswer())),e.abrupt("break",72);case 61:return e.next=63,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t});case 63:return s=e.sent,!0===s.result?(this.showFoundLocation(s.answer.left,s.answer.top),this.submitGoodAnswer(s&&s.score?s.score:0)):(this.nbTry++,this.nbTry<2?Z(this.$t("label.FindItemNothingHappens"),"error"):(this.showFoundLocation(s.answer.left,s.answer.top),this.submitWrongAnswer())),e.abrupt("break",72);case 66:return e.next=68,we.checkAnswer(this.step.questId,this.step.id,this.runId,{answer:t});case 68:return s=e.sent,!0===s.result&&this.submitGoodAnswer(s&&s.score?s.score:0),e.abrupt("break",72);case 71:console.log("checkAnswer(): Step type "+this.step.type+" not supported.");case 72:this.score=s&&s.score?s.score:0,this.reward=s&&s.reward?s.reward:0;case 74:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),submitGoodAnswer:function(e){this.playerResult=!0,this.$emit("success",e),this.$emit("played")},submitWrongAnswer:function(){this.playerResult=!1,this.$emit("fail"),this.$emit("played")},resetKeypadCode:function(){this.playerCode=Array(4).fill("")},resetColorCode:function(){this.playerCode=Array(4).fill("red")},resetImageCode:function(){this.playerCode=[0,0,0,0]},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){var t=this.playerCode.indexOf("");-1!==t&&i["a"].set(this.playerCode,t,e)},clearLastCodeChar:function(){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||i["a"].set(this.playerCode,e,"")},changeColorForCode:function(e){if(null===this.playerResult){var t=Pe.indexOf(this.playerCode[e]),s=(t+1)%Pe.length;this.$set(this.playerCode,e,Pe[s])}},changeImageForCode:function(e){if(null===this.playerResult){var t=Pe.indexOf(this.playerCode[e]),s=(t+1)%Pe.length;this.$set(this.playerCode,e,Pe[s])}},togglecameraStream:function(){var e=this;if(this.cameraStreamEnabled)this.stopVideoTracks("camera-stream-for-recognition");else{var t=this.$refs["camera-stream-for-recognition"],s=this.$refs["photo-buffer"],a=this.$refs["player-photo"];navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(e){t.srcObject=e,t.play()}).catch(function(e){console.log("An error occured! "+e)}),t.addEventListener("canplay",function(r){if(!e.cameraStreamEnabled){var n=r.target.parentElement,i=getComputedStyle(n),o=n.clientWidth-(parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)),l=Math.floor(t.videoHeight/(t.videoWidth/o));t.setAttribute("width",o),t.setAttribute("height",l),s.setAttribute("width",o),s.setAttribute("height",l),a.setAttribute("width",o),a.setAttribute("height",l),e.cameraStreamEnabled=!0}},!1)}},checkPhoto:function(){var e=this,t=this.$refs["photo-buffer"],s=t.getContext("2d");if(this.cameraStreamEnabled){s.drawImage(this.$refs["camera-stream-for-recognition"],0,0,t.width,t.height);var a=t.toDataURL("image/png");this.$refs["player-photo"].setAttribute("src",a),this.stopVideoTracks("camera-stream-for-recognition");var r=document.createElement("canvas"),n=new Image;n.crossOrigin="anonymous",n.src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/image-recognition/"+this.step.answers,n.onload=_()(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return r.width=n.naturalWidth,r.height=n.naturalHeight,r.getContext("2d").drawImage(n,0,0,r.width,r.height),e.photoTaken=!0,s.abrupt("return",Te.compare(t,r)>=e.photoComparisonThreshold);case 5:case"end":return s.stop()}},s,this)}))}},stopVideoTracks:function(e){this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach(function(e){e.stop()}),this.cameraStreamEnabled=!1},handleOrientation:function(e){this.geolocation.alpha=360-e.alpha,this.geolocation.direction=(this.geolocation.rawDirection-this.geolocation.alpha+360)%360,this.geolocation.beta=e.beta},drawDirectionArrow:function(){if(null!==this.geolocation.alpha&&null!==document.querySelector(".direction-helper canvas")){var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),s=e.width,a=e.height,r=Math.round(s/2),n=Math.round(a/2);t.save(),t.clearRect(0,0,s,a),t.translate(r,n),t.lineWidth=20,t.strokeStyle="#ff0000",t.fillStyle="#ff0000",t.beginPath(),t.arc(0,0,Math.round(a/2)-10,0,2*Math.PI),t.stroke(),t.rotate(V.degreesToRadians(this.geolocation.direction)),t.beginPath(),t.moveTo(0,Math.round(a/2)-30),t.lineTo(0,45-Math.round(a/2)),t.stroke(),t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(a/2)),t.lineTo(-20,45-Math.round(a/2)),t.lineTo(20,45-Math.round(a/2)),t.fill(),t.stroke(),t.restore()}},watchLocationError:function(e){console.warn("Could not get location from watchPosition()"),console.log(e)},watchLocationSuccess:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r,n,i,o,l,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.coords,a=this.step.options,this.geolocation.distance=1e3*V.distanceInKmBetweenEarthCoordinates(a.lat,a.lng,s.latitude,s.longitude),this.geolocation.rawDirection=V.bearingBetweenEarthCoordinates(s.latitude,s.longitude,a.lat,a.lng),"locate-item-ar"!==this.step.type||null===this.geolocation.target.scene){e.next=17;break}if(r=this.geolocation.target,n=r.scene,i=n.getObjectByName("targetObject"),this.geolocation.canSeeTarget=null===r.size||this.geolocation.distance<40*r.size,"undefined"!==typeof i){e.next=11;break}return e.abrupt("return");case 11:i.visible=!0,o=V.degreesToRadians(this.geolocation.rawDirection),l=0!==this.geolocation.distance?Math.sin(o)*this.geolocation.distance:0,u=0!==this.geolocation.distance?Math.cos(o)*this.geolocation.distance:0,new Ne["Tween"](i.position).to({x:l,y:u},this.geolocation.watchLocationInterval).easing(Ne["Easing"].Quadratic.InOut).start(),!this.geolocation.canTouchTarget&&this.geolocation.distance<=10&&(this.geolocation.canTouchTarget=!0);case 17:if(c={geolocation:20,"locate-item-ar":3},!(this.geolocation.distance<=c[this.step.type])){e.next=22;break}return navigator.geolocation.clearWatch(this.geolocation.locationWatcher),e.next=22,this.checkAnswer(s);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),useItem:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(!0===this.playerResult||this.nbTry>=3)){e.next=2;break}return e.abrupt("return");case 2:if(null!==this.itemUsed){e.next=5;break}return Z(this.$t("label.PleaseSelectAnItemFirst"),"error"),e.abrupt("return");case 5:return s=window.innerWidth/100,a={windowWidth:s,posX:t.offsetX,posY:t.offsetY,item:this.itemUsed.picture},e.next=9,this.checkAnswer(a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),showItemLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n,i,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=window.innerWidth/100,r={left:Math.round(t/100*100*a),top:Math.round(s/100*133*a)},n=Math.round(8*a),i=document.getElementById("cross-play"),i.style.top=r.top-n+"px",i.style.left=r.left-n+"px",i.style.display="block",o=i.src,l=this,setInterval(function(){i.src===o?(i.src=l.step.answers.item.indexOf("statics/")>-1?l.step.answers.item:l.serverUrl+"/upload/quest/"+l.step.questId+"/step/new-item/"+l.step.answers.item,i.style.borderRadius="50%"):(i.src=o,i.style.borderRadius="0")},1e3);case 10:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),findItem:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(!0===this.playerResult||this.nbTry>=3)){e.next=2;break}return e.abrupt("return");case 2:return s=window.innerWidth/100,a={windowWidth:s,posX:t.offsetX,posY:t.offsetY},e.next=6,this.checkAnswer(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),showFoundLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=window.innerWidth/100,r={left:Math.round(t/100*100*a),top:Math.round(s/100*133*a)},n=Math.round(8*a),i=document.getElementById("cross-play"),i.style.top=r.top-n+"px",i.style.left=r.left-n+"px",i.style.display="block";case 7:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),checkPuzzle:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=!0,s=[],a=this.step.answers.split("|"),r=0;case 4:if(!(r<this.puzzle.pieces.length)){e.next=12;break}if(s.push(this.puzzle.pieces[r].pos),a[r]===this.puzzle.pieces[r].pos){e.next=9;break}return t=!1,e.abrupt("continue",9);case 9:r++,e.next=4;break;case 12:t&&this.checkAnswer(s);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),initPuzzle:function(){for(var e=parseInt(this.step.options.level||2,10),t=2*e,s=document.getElementById("pieces").clientWidth,a=s,r=Math.floor(a/t),n=Math.floor(s/t),i=this.step.answers.split("|"),o=0;o<t*t;o++){var l=n*(o%t)+"px",u=r*Math.floor(o/t)+"px";this.puzzle.pieces[o]={pos:i[o],backSize:100*t,backXPos:l,backYPos:u,width:n,height:r}}this.puzzle.pieces=this.shuffle(this.puzzle.pieces),this.puzzle.picture=-1===this.step.options.picture.indexOf("upload/")?this.serverUrl+"/upload/quest/"+this.step.questId+"/step/jigsaw-puzzle/"+this.step.options.picture:this.serverUrl+this.step.options.picture,initJigsaw(this.puzzle.element)},shuffle:function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[s],e[s]=a}return e},handleDragStart:function(e){-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target)},handleDragEnd:function(e){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");[].forEach.call(t,function(e){e.style.opacity="",e.classList.remove("over")})},handleDrop:function(e){if(this.puzzle.dragSrcEl&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=e.target.parentNode.id.replace("piece-",""),s=this.puzzle.dragSrcEl.id.replace("piece-",""),a=0,r=0;if(t!==s){for(var n=0;n<this.puzzle.pieces.length;n++)this.puzzle.pieces[n].pos===t&&(a=n),this.puzzle.pieces[n].pos===s&&(r=n);var o=this.puzzle.pieces[a];i["a"].set(this.puzzle.pieces,a,this.puzzle.pieces[r]),i["a"].set(this.puzzle.pieces,r,o),this.checkPuzzle()}}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var s=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!s.single||t<this.step.options.items.length)&&(e[t]={imagePath:s.imagePath,isClicked:!1,isFound:!1})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,i["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){for(var s=0;s<this.memory.items.length;s++)this.memory.items[s].isFound||(this.memory.items[s].isClicked=!0,i["a"].set(this.memory.items,s,this.memory.items[s]));this.checkAnswer(!0)}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,i["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),i["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,setTimeout(function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,i["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),i["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1},1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},animateTargetCanvas:function(){requestAnimationFrame(this.animateTargetCanvas);var e=this.geolocation.target,t=e.mixers;if(!this.step.options.is3D){var s=e.scene.getObjectByName("targetObject");s.lookAt(e.camera.position)}if(t.length>0)for(var a=0;a<t.length;a++)t[a].update(e.clock.getDelta());e.renderer.render(e.scene,e.camera),Ne["update"]()},onAbsoluteOrientationSensorReading:function(){var e=this.geolocation.target.camera;e.quaternion.fromArray(this.geolocation.absoluteOrientationSensor.quaternion)},onTargetCanvasClick:function(e){e.preventDefault();var t=this.geolocation.target,s=t.scene.getObjectByName("targetObject"),a=new Re["Vector2"];a.x=e.clientX/t.renderer.domElement.clientWidth*2-1,a.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var r=new Re["Raycaster"];r.setFromCamera(a,t.camera);var n=r.intersectObject(s,!0);n.length>0&&this.geolocation.canTouchTarget&&(navigator.geolocation.clearWatch(this.geolocation.locationWatcher),this.stopVideoTracks("camera-stream-for-locate-item-ar"),this.checkAnswer())},ModelLoaderAsync:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=console.log,e.abrupt("return",new Promise(function(e,r){var n=new Le.a;n.load(a.serverUrl+"/statics/3d-models/"+t+"/scene.gltf",e,s,r)}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},Oe=ze,Fe=(s("iw2i"),Object(m["a"])(Oe,ye,qe,!1,null,"b0736702",null)),De=Fe.exports,je=s("U/5H"),Ye=s.n(je);i["a"].directive("sortable",{inserted:function(e,t){return new Ye.a(e,t.value||{})}});var Ee={components:{stepPlay:De},data:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,items:[]},hint:{isOpened:!1,label:""},info:{isOpened:!1,score:0,quest:{}},quest:{id:this.$route.params.questId},step:{nextNumber:2},loadStepData:!1,run:{},isRunFinished:!1,canMoveNextStep:!1,canPass:!1,remotePlay:!1,serverUrl:"https://api.graaly.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,selectedItem:null}},mounted:function(){var e=this;this.getStep().then(function(){var t=_()(regeneratorRuntime.mark(function t(s){var a,r,n,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!s.redirect){t.next=2;break}return t.abrupt("return",e.$router.push("/quest/play/"+e.quest.id+"/step/"+s.redirect+"/"+e.$route.params.lang));case 2:return t.next=4,e.getQuest(e.quest.id);case 4:return t.next=6,e.countStepsNumber(e.quest.id);case 6:if("undefined"!==typeof s&&"OK"!==s){t.next=16;break}if(!e.$store.state.user.isAdmin){t.next=11;break}return t.abrupt("return",e.$router.push("/admin/validate/"+e.quest.id));case 11:if(e.$store.state.user._id!==e.info.quest.authorUserId){t.next=15;break}return t.abrupt("return",e.$router.push("/quest/settings/"+e.quest.id));case 15:return t.abrupt("return",e.$router.push("/quest/"+e.quest.id+"/end"));case 16:return t.next=18,ce.listForAQuest(e.quest.id);case 18:if(a=t.sent,r=0,a&&a.data&&a.data.length>0)for(n=0;n<a.data.length;n++)"finished"===a.data[n].status&&(e.isRunFinished=!0),"in-progress"===a.data[n].status&&a.data[n].currentStep>r&&(e.run=a.data[n],r=a.data[n].currentStep);if(e.info.score=e.run.tempScore,0!==r){t.next=28;break}return i=!!e.$route.query.hasOwnProperty("remoteplay")&&e.$route.query.remoteplay,t.next=26,ce.init(e.quest.id,e.$route.params.lang,i);case 26:o=t.sent,200===o.status&&o.data&&o.data._id&&(e.run=o.data);case 28:e.step=s,e.step.id=s._id,e.step.nextNumber=e.step.number+1,e.loadStepData=!0;case 32:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){Z(e.$t("label.ErrorStandardMessage"),"error"),console.log(t)})},methods:{getStep:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",we.getByNumber(this.quest.id,this.$route.params.stepNumber));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),trackStepSuccess:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.info.score+=t,this.hideHint();case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),trackStepPlayed:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep=!0,this.footer.tabSelected="next";case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),trackStepPass:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canPass=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),trackStepFail:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.hideHint();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),hideHint:function(){this.step.hint={}},swipeMgmt:function(e){"right"===e.direction&&this.previousStep(),"left"===e.direction&&this.canMoveNextStep&&this.nextStep()},nextStep:function(){var e=_()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep?"no next step"===this.step.nextNumber?this.$router.push("/quest/"+this.quest.id+"/end"):this.$router.push("/quest/play/"+this.quest.id+"/step/"+this.step.nextNumber+"/"+this.$route.params.lang):this.canPass&&this.$q.dialog({message:this.$t("label.ConfirmPass"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).then(_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.passCurrentStep(t.run._id);case 2:t.$router.push("/quest/play/"+t.quest.id+"/step/"+t.step.nextNumber+"/"+t.$route.params.lang);case 3:case"end":return e.stop()}},e,this)})));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),previousStep:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.step.number&&this.step.number>1?this.$router.push("/quest/play/"+this.quest.id+"/step/"+(this.step.number-1)+"/"+this.$route.params.lang):this.$router.push("/quest/play/"+this.quest.id);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),askForHint:function(){var e=_()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(!this.hint.isOpened){e.next=6;break}this.closeAllPanels(),e.next=12;break;case 6:if(!this.$store.state.user.bonus||!this.$store.state.user.bonus.name||"infinitehint"!==this.$store.state.user.bonus.name){e.next=11;break}return e.next=9,this.getHint();case 9:e.next=12;break;case 11:this.$q.dialog({message:this.$t("label.ConfirmHint"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).then(_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHint();case 2:case"end":return e.stop()}},e,this)})));case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getHint:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.getHint(this.run._id,this.step._id);case 2:t=e.sent,t&&t.hint&&(this.hint.label=t.hint,this.closeAllPanels(),this.hint.isOpened=!0,this.footer.tabSelected="hint");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},fillInventory:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.listWonObjects(this.quest.id,this.step._id);case 2:this.inventory.items=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),openInventory:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.footer.tabSelected="inventory");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),openInfo:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.info.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.info.isOpened=!0,this.footer.tabSelected="info");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),backToMap:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$router.push("/map"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getQuest:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.getById(t);case 2:s=e.sent,this.info.quest=s.data;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),countStepsNumber:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.countForAQuest(t);case 2:s=e.sent,this.info.stepsNumber=s||1;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selectItem:function(e){"use-item"===this.step.type?(this.selectedItem=e,this.closeAllPanels()):Z(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},isHintAvailable:function(){return this.step&&this.step.hint&&this.step.hint[this.lang]&&""!==this.step.hint[this.lang]}}},Be=Ee,Qe=(s("TYH3"),Object(m["a"])(Be,ve,be,!1,null,"ce932c46",null)),Ue=Qe.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dark-background"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0||e.run.reward>0,expression:"run.score > 0 || run.reward > 0"}],staticClass:"centered"},[s("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouWin")))]),s("h2",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0||0===e.run.reward,expression:"run.score > 0 || run.reward === 0"}],staticClass:"size-1 q-mt-sm q-mb-sm"},[e._v(e._s(e.run.score)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-trophy"}})],1),s("h2",{directives:[{name:"show",rawName:"v-show",value:e.run.reward>0,expression:"run.reward > 0"}],staticClass:"size-1 q-mt-sm q-mb-sm"},[e._v(e._s(e.run.reward)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-coins"}})],1),s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0,expression:"run.score > 0"}],attrs:{to:"/help/points"}},[e._v(e._s(e.$t("label.WhatCanYouDoWithThesePoints")))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0,expression:"run.score > 0"}],staticClass:"q-pa-md centered"},[s("p",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyLevel"))+" : "+e._s(e.$store.state.user.level))]),s("q-progress",{attrs:{percentage:e.level.progress,height:"30px",color:"white"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0,expression:"run.score > 0"}],staticClass:"q-mt-md q-ml-md q-mr-md q-pb-md centered"},[s("q-btn",{attrs:{icon:"people",color:"tertiary",size:"lg",label:e.$t("label.ChallengeYourFriends")},on:{click:e.openChallengeBox}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.run.reward<=0,expression:"run.reward <= 0"}],staticClass:"bg-secondary q-mt-md q-ml-md q-mr-md q-pb-md centered"},[s("h3",{staticClass:"size-2 q-ma-sm"},[e._v(e._s(e.$t("label.RateThisQuest"))+" (+2 "),s("q-icon",{attrs:{color:"white",name:"fas fa-coins"}}),e._v(")")],1),s("q-rating",{attrs:{max:5,size:"1.5rem"},on:{input:e.rate},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),s("div",{staticClass:"share bg-secondary q-mt-md q-ml-md q-mr-md q-pb-md centered"},[s("h3",{staticClass:"size-2 q-ma-sm"},[e._v(e._s(e.$t("label.ShareYourSuccess")))]),e._m(0)]),s("div",{staticClass:"back centered q-pa-md bg-primary"},[s("q-btn",{attrs:{flat:"",label:e.$t("label.BackToTheMap")},on:{click:function(t){e.$router.push("/map")}}})],1)]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}],staticClass:"panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.ranking.show=!1}}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Ranking")))]),s("q-list",e._l(e.ranking.items,function(t){return s("q-item",{key:t.id,class:t.className},[s("q-item-side",[s("q-item-tile",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}})])],1),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.name))]),s("q-item-tile",{attrs:{sublabel:""}},[e._v(e._s(t.score)+" "),s("q-icon",{attrs:{name:"fas fa-trophy"}})],1)],1),s("q-item-side",{attrs:{right:""}},[s("q-item-tile",{attrs:{avatar:""}},[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),t.isFriend||t.id===e.$store.state.user._id?e._e():s("q-item-side",{attrs:{right:""},nativeOn:{click:function(s){e.addFriend(t.id)}}},[s("q-item-tile",{attrs:{icon:"person_add",color:"primary"}})],1),t.isFriend?s("q-item-side",{attrs:{right:""}}):e._e()],1)}))],1)]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),s("div",[s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{attrs:{color:"primary",size:"lg",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),s("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?s("div",[s("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,function(t){return s("q-item",{key:t.friendId},[s("q-item-side",[s("q-item-tile",{attrs:{avatar:""}},[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-main",[s("q-item-tile",[e._v(e._s(t.name))])],1),s("q-item-side",{attrs:{right:""}},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(s){e.challenge(t)}}})],1)],1)}))],1):e._e()])])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showBonus,expression:"showBonus"}],staticClass:"panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeBonus}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YouWonABonus")))]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"q-ma-sm",attrs:{inline:""}},[s("q-card-media",[s("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}})]),s("q-card-title",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus))+"\n          ")]),s("q-card-main",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")])],1)],1)])]),e.level.upgraded?s("div",{staticClass:"fadein-message"},[e._v("+100 "),s("q-icon",{attrs:{color:"white",name:"fas fa-coins"}})],1):e._e()],1)},Ge=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"https://www.facebook.com/sharer/sharer.php?u=http://graaly.com",target:"_blank"}},[s("img",{attrs:{src:"statics/icons/social-networks/facebook.png"}})])]),s("li",[s("a",{attrs:{href:"https://twitter.com/intent/tweet?text=To%Define&url=http://graaly.com",target:"_blank"}},[s("img",{attrs:{src:"statics/icons/social-networks/twitter.png"}})])]),s("li",[s("a",{attrs:{href:"https://plus.google.com/share?url=http://graaly.com",target:"_blank"}},[s("img",{attrs:{src:"statics/icons/social-networks/googleplus.png"}})])])])}];We._withStripped=!0;var Ve={data:function(){return{title:"Enquête réussie",rating:0,ranking:{show:!1,items:[]},score:{},level:{color:"white",upgraded:!1},run:{score:0},friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=!1,e.next=3,ce.listForAQuest(this.questId);case 3:if(s=e.sent,s&&s.data&&s.data.length>0)for(a=0;a<s.data.length;a++)"finished"===s.data[a].status&&(this.run=s.data[a]),"in-progress"===s.data[a].status&&(this.run=s.data[a],t=!0);return e.next=7,this.getRanking();case 7:return this.score.old=this.$store.state.user.score,this.initProgression(),e.next=11,ce.endRun(this.run._id);case 11:r=e.sent,r&&r.data&&(this.run.score=r.data.score,this.run.reward=r.data.reward,r.data.newBonus&&""!==r.data.newBonus&&(this.run.bonus=r.data.newBonus,this.showBonus=!0)),this.score.new=t?this.score.old+this.run.score:this.score.old,setTimeout(this.updateProgression,3e3);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{rate:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.rate(this.run._id,this.rating);case 2:t=e.sent,200!==t.status?this.$q.notify({type:"warning",message:this.$t("label.YourRatingHasNotBeenSaved")}):this.$q.notify({type:"positive",message:this.$t("label.YourRatingHasBeenSaved")});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),initProgression:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.level=X(this.score.old);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateProgression:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.ranking.show||this.showChallenge||this.showBonus?setTimeout(this.updateProgression,2e3):(t=X(this.score.new),t.level>this.level.level?(this.level.progress=100,this.$store.state.user.level=t.level,this.level=t,this.level.progress=10,this.level.upgraded=!0):this.level=t);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getRanking:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.listPlayersForThisQuest(this.questId);case 2:t=e.sent,t&&t.data&&t.data.length>0&&(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),this.refreshPosition(),setTimeout(this.showRanking,5e3));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),showRanking:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(this.ranking.show=!0,t=!1,s=0;s<this.ranking.items.length;s++)this.ranking.items[s].id===this.$store.state.user._id&&(t=!0);t||(this.ranking.items.push({id:this.$store.state.user._id,score:this.run.score,name:this.$store.state.user.name,picture:this.$store.state.user.picture,position:this.ranking.items.length+1,isFriend:!0,className:"selected"}),setTimeout(this.updateRanking,3e3));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],s=this.ranking.items[e-1];this.$set(this.ranking.items,e,s),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.showChallenge=!0,e.next=3,R.listFriends();case 3:t=e.sent,t&&t.data&&t.data.length>0&&(this.friends=t.data,this.filteredFriends=this.friends);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeChallenge:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.showChallenge=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),challenge:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.challengeFriend(t.friendId,this.run._id);case 2:for(s=0;s<this.filteredFriends.length;s++)this.filteredFriends[s].friendId===t.friendId&&(this.filteredFriends[s].isChallenged=!0,i["a"].set(this.filteredFriends,s,this.filteredFriends[s]));console.log(this.filteredFriends);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),challengeAll:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.challengeFriend("all",this.run._id);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeBonus:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.showBonus=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},He=Ve,Ke=(s("vjzl"),Object(m["a"])(He,We,Ge,!1,null,"7b228fd1",null)),Je=Ke.exports,Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"wrapper"},[s("h1",{staticClass:"size-3 centered"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"grow"},[s("div",{staticClass:"centered",domProps:{innerHTML:e._s(e.$t("label.andWin"))}}),s("div",{staticClass:"row q-pa-md"},[s("div",{staticClass:"col score-text centered"},[e._v("600 "),s("q-icon",{attrs:{color:"warning",name:"fas fa-coins"}})],1),s("div",{staticClass:"col centered"},[s("q-icon",{attrs:{color:"positive",size:"2rem",name:"fas fa-money-bill-wave"}}),s("br"),e._v("\n          "+e._s(e.$t("label.SomeMoney"))+" \n          "),s("a",{on:{click:function(t){e.openMoneyPopup()}}},[e._v("*")])],1)]),s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}})]),s("q-btn",{staticClass:"full-width center",attrs:{color:"primary"},on:{click:function(t){e.createNewQuest()}}},[e._v(e._s(e.$t("label.AcceptTheRules")))])],1)])},Xe=[];Ze._withStripped=!0;var et={methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},createNewQuest:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={title:{}},e.next=3,P.create(t);case 3:s=e.sent,s&&s.data&&s.data._id?this.$router.push("/quest/settings/"+s.data._id):Z(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},tt=et,st=Object(m["a"])(tt,Ze,Xe,!1,null,null,null),at=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.steps.showNewStepOverview&&!e.steps.showNewStepPageSettings,expression:"!steps.showNewStepOverview && !steps.showNewStepPageSettings"}],staticClass:"float-right no-underline",attrs:{to:{path:"/map"},color:"grey"}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{directives:[{name:"show",rawName:"v-show",value:!e.steps.showNewStepOverview&&!e.steps.showNewStepPageSettings,expression:"!steps.showNewStepOverview && !steps.showNewStepPageSettings"}],staticClass:"size-3 q-pl-md"},[e.tabs.progress>=2?s("span",[e._v(e._s(e.form.fields.title[e.languages.current]||e.form.fields.title[e.quest.mainLanguage]))]):s("span",[e._v(e._s(e.$t("label.NewQuest")))])]),s("q-tabs",{directives:[{name:"show",rawName:"v-show",value:!e.steps.showNewStepOverview&&!e.steps.showNewStepPageSettings,expression:"!steps.showNewStepOverview && !steps.showNewStepPageSettings"}],model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[s("q-tab",{attrs:{slot:"title",name:"languages",icon:0===e.tabs.progress?"looks_one":"check_circle",label:e.$t("label.Languages"),default:""},slot:"title"}),s("q-tab",{attrs:{slot:"title",disable:e.tabs.progress<1,name:"settings",icon:e.tabs.progress<2?"looks_two":"check_circle",label:e.$t("label.Intro")+" ("+e.languages.current+")"},slot:"title"}),s("q-tab",{attrs:{slot:"title",disable:e.tabs.progress<2,name:"steps",icon:e.tabs.progress<3?"looks_3":"check_circle",label:e.$t("label.Steps")+" ("+e.languages.current+")"},slot:"title"}),s("q-tab",{attrs:{slot:"title",disable:e.tabs.progress<3,name:"publish",icon:e.tabs.progress<4?"looks_4":"check_circle",label:e.$t("label.Publish")},slot:"title"}),s("q-tab-pane",{staticClass:"q-pa-md",attrs:{name:"languages"}},[s("q-field",{attrs:{icon:"language",helper:e.$t("label.SelectTheLanguageAndClickOnNextButton"),label:e.$t("label.SelectedLanguage")}},[s("q-option-group",{attrs:{type:"radio",color:"primary",options:e.form.languages},model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}})],1),s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"primary",label:e.$t("label.Save")},on:{click:function(t){e.selectLanguage()}}})],1),s("q-tab-pane",{attrs:{name:"settings"}},[s("form",{on:{submit:function(t){t.preventDefault(),e.submitSettings()}}},[s("q-field",{attrs:{error:e.$v.form.fields.title.$error,count:e.titleMaxLength}},[s("q-input",{attrs:{type:"text","float-label":e.$t("label.Title")+" "+e.currentLanguageForLabels,maxlength:"titleMaxLength"},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}}),e.$v.form.fields.title.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.fields.title.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterATitle")))])]):e._e()],1),s("q-field",{attrs:{error:e.$v.form.fields.category.$error}},[s("q-select",{attrs:{"float-label":e.$t("label.Category"),options:e.form.categories},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}),e.$v.form.fields.category.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.fields.category.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseSelectACategory")))])]):e._e()],1),s("q-field",[s("q-select",{attrs:{"float-label":e.$t("label.Difficulty"),options:e.form.levels},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}})],1),s("q-field",[s("q-select",{attrs:{"float-label":e.$t("label.Duration"),options:e.form.durations},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}})],1),s("div",{staticClass:"description"},[s("q-input",{staticClass:"full-width",attrs:{type:"textarea","float-label":e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),s("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),s("div",{staticClass:"location-address"},[s("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?s("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest")},on:{place_changed:e.setLocation},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}):e._e()],1),s("a",{on:{click:function(t){e.getCurrentLocation()}}},[s("img",{attrs:{src:"statics/icons/game/location.png"}})])]),null!==e.form.fields.picture?s("div",[s("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),s("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.picture}})]):e._e(),s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"picturefile"}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*"},on:{change:e.uploadImage}})]),s("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"primary"}},[e._v(e._s(e.$t("label.Save")))])],1)]),s("q-tab-pane",{attrs:{name:"steps"}},[s("p",[e._v(e._s(e.$t("label.AddYourSteps")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.steps.items&&e.steps.items.length>6,expression:"steps.items && steps.items.length > 6"}],staticClass:"centered"},[s("q-btn",{attrs:{color:"primary",icon:"fas fa-plus-circle",label:e.$t("label.AddAStep")},on:{click:function(t){e.addStep()}}})],1),s("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.steps.items,function(t){return s("li",{key:t._id,staticClass:"list-group-item"},[s("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),s("p",[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),s("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),s("q-btn",{on:{click:function(s){e.modifyStep(t)}}},[s("q-icon",{attrs:{name:"mode edit"}})],1),s("q-btn",{on:{click:function(s){e.removeStep(t._id)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("p",{staticClass:"centered"},[s("q-btn",{attrs:{color:"primary",icon:"fas fa-plus-circle",label:e.$t("label.AddAStep")},on:{click:function(t){e.addStep()}}})],1)]),s("q-tab-pane",{attrs:{name:"publish"}},["tovalidate"===e.quest.status?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.QuestUnderValidation"))+"\n      ")]):e._e(),"rejected"===e.quest.status?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.QuestPublicationRejected"))+"\n      ")]):e._e(),e.steps.items.length<6?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.YourQuestMustContainAtLeast6Steps"))+"\n      ")]):e._e(),e.steps.items.length>50?s("q-alert",{staticClass:"q-mb-md",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n      ")]):e._e(),s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{attrs:{color:"primary",icon:"play_arrow",label:e.$t("label.TestYourQuest")},on:{click:function(t){e.testQuest()}}})],1),s("q-field",{attrs:{icon:"visibility",helper:e.$t("label.ActivateTheLanguageVisible"),label:e.$t("label.LanguagesPublished")}},e._l(e.form.fields.languages,function(t){return s("p",{key:t.lang},[s("q-toggle",{attrs:{disable:e.steps.items.length<6||e.steps.items.length>50,label:e.$t("language."+t.lang)},on:{input:function(s){e.publish(t.lang)}},model:{value:t.published,callback:function(s){e.$set(t,"published",s)},expression:"lang.published"}})],1)})),"published"!==e.quest.status?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{attrs:{flat:"",color:"primary",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){e.removeQuest()}}})],1):e._e()],1)],1),s("q-modal",{model:{value:e.steps.showNewStepPage,callback:function(t){e.$set(e.steps,"showNewStepPage",t)},expression:"steps.showNewStepPage"}},[s("div",[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),s("div",{staticClass:"q-pa-md"},[s("p",{staticClass:"caption"},[e._v(e._s(e.$t("label.Transition")))]),s("q-list",e._l(e.filteredStepTypes("transition"),function(t){return s("q-collapsible",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",[e._v("\n              "+e._s(e.$t("stepType."+t.description))+"\n              "),s("q-btn",{attrs:{color:"primary",label:e.$t("label.UseThisGame")},nativeOn:{click:function(s){e.selectStepType(t)}}})],1)])})),s("p",{staticClass:"caption"},[e._v(e._s(e.$t("label.Quest")))]),s("q-list",e._l(e.filteredStepTypes("enigma"),function(t){return s("q-collapsible",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",[e._v("\n              "+e._s(e.$t("stepType."+t.description))+"\n              "),s("q-btn",{attrs:{color:"primary",label:e.$t("label.UseThisGame")},nativeOn:{click:function(s){e.selectStepType(t)}}})],1)])})),s("div",{staticClass:"q-pa-md centered"},[s("a",{on:{click:function(t){e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])])],1)])]),e.steps.showNewStepPageSettings?s("div",{staticClass:"fit",attrs:{id:"overview"}},[s("div",{staticClass:"fit"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeStepSettingsPage}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s("undefined"!==typeof e.steps.new.type.title?e.$t("stepType."+e.steps.new.type.title):""))]),s("div",{staticClass:"q-pa-md"},[s("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:e.steps.new.type},on:{change:e.trackStepChanges}})],1)])]):e._e(),e.steps.showNewStepOverview?s("div",{staticClass:"fit",attrs:{id:"overview"}},[s("stepPlay",{attrs:{step:e.steps.new.overviewData,runId:"0",itemUsed:e.selectedItem,reload:e.steps.reloadStepPlay,lang:e.languages.current},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass}}),s("q-layout-footer",{staticClass:"step-menu"},[s("q-tabs",{model:{value:e.overview.tabSelected,callback:function(t){e.$set(e.overview,"tabSelected",t)},expression:"overview.tabSelected"}},[s("q-tab",{attrs:{slot:"title",name:"inventory",icon:"work"},on:{click:function(t){e.openInventory()}},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"previous",icon:"arrow_back"},on:{click:e.modifyStep},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"info",icon:"edit",disable:""},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"next",icon:"arrow_forward",disable:!e.canMoveNextStep&&!e.canPass},on:{click:e.closeOverview},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"hint",icon:"lightbulb outline",disable:!e.isHintAvailable()},on:{click:function(t){e.askForHint()}},slot:"title"})],1)],1)],1):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"inventory panel-bottom q-pa-md"},[s("h1",[e._v(e._s(e.$t("label.Inventory")))]),e.inventory.items.length>0?s("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,function(t,a){return s("div",{key:a,on:{click:function(s){e.selectItem(t)}}},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),s("p",[e._v(e._s(t.title))])])}))])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hint.isOpened,expression:"hint.isOpened"}],staticClass:"hint panel-bottom q-pa-md"},[s("h1",[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?s("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?s("p",[e._v(e._s(e.hint.label[e.languages.current]))]):e._e(),s("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){e.askForHint()}}},[e._v(e._s(e.$t("label.Close")))])],1)])],1)},nt=[];rt._withStripped=!0;var it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("q-field",{attrs:{error:e.$v.selectedStep.form.title[e.lang].$error,count:e.titleMaxLength}},[s("q-input",{attrs:{type:"text","float-label":e.$t("label.Title")+" "+e.currentLanguageForLabels,maxlength:e.titleMaxLength},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),e.$v.selectedStep.form.title[e.lang].$error?s("div",{staticClass:"q-field-bottom"},[e.$v.selectedStep.form.title[e.lang].required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterATitle")))])]):e._e()],1),s("q-field",{attrs:{error:e.$v.selectedStep.form.text[e.lang].$error,"error-label":e.$t("label.KeepEnigmaQuestionsShort"),count:e.mainTextMaxLength}},[s("q-input",{staticClass:"full-width",attrs:{"float-label":e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4},on:{blur:e.$v.selectedStep.form.text[e.lang].$touch,input:e.$v.selectedStep.form.text[e.lang].$touch},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!1!==e.options.hasBackgroundImage,expression:"options.hasBackgroundImage !== false"}],staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"picturefile"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*"},on:{input:e.uploadBackgroundImage}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage?e._e():s("p",[e._v(e._s(e.$t("label.WarningImageResize")))]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.code&&"use-item"!==e.options.code?s("div",[s("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),s("br"),s("a",{on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.code?s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"videofile"}},[e._v(e._s(e.$t("label.UploadAVideo")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"videofile",id:"videofile",type:"file",accept:"video/mp4,video/x-m4v,video/*"},on:{change:e.uploadVideo}})]),s("div",[s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:null===e.selectedStep.form.videoStream,expression:"selectedStep.form.videoStream === null"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),null!==e.selectedStep.form.videoStream?s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload"}},[s("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream,type:"video/mp4"}})]):e._e()])],1):e._e(),"geolocation"==e.options.code?s("div",{staticClass:"location-gps"},[s("p",[e._v(e._s(e.$t("label.AddressToFind")))]),s("div",{staticClass:"location-address"},[s("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[s("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address")},on:{place_changed:e.setLocation},model:{value:e.selectedStep.form.options.destination,callback:function(t){e.$set(e.selectedStep.form.options,"destination",t)},expression:"selectedStep.form.options.destination"}})],1),s("a",{on:{click:function(t){e.getCurrentLocation()}}},[s("img",{attrs:{src:"statics/icons/game/location.png"}})])]),s("q-list",[s("q-collapsible",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])])])],1),s("q-checkbox",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),s("q-checkbox",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}})],1):e._e(),"choose"==e.options.code?s("div",[s("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),s("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.$touch},model:{value:e.answerType,callback:function(t){e.answerType=t},expression:"answerType"}}),s("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures")},on:{click:e.$v.selectedStep.form.options.$touch},model:{value:e.answerType,callback:function(t){e.answerType=t},expression:"answerType"}}),s("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),s("p",[e._v(e._s(e.$t("label.SelectTheGoodAnswer")))]),e._l(e.selectedStep.form.options,function(t,a){return s("div",{key:a,staticClass:"answer"},[s("q-radio",{attrs:{val:a},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.answerType,expression:"answerType === 'text'"}],on:{input:function(t){e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.$each[a].text.$touch}},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"option.text"}}),"text"===e.answerType&&e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].text.required?s("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.answerType&&null===t.imagePath,expression:"answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",["image"===e.answerType&&null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.answerType,expression:"answerType === 'image'"}]},[s("label",{attrs:{for:"answerImage"+a}},[s("q-icon",{attrs:{name:"file upload"}})],1),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"answerImage"+a,id:"answerImage"+a,type:"file",accept:"image/*"},on:{change:function(t){e.uploadAnswerImage(a,t)}}})]),s("q-btn",{on:{click:function(t){e.deleteAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)}),s("q-btn",{staticClass:"full-width add-answer",on:{click:function(t){e.addAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddAnAnswer"))+"\n    ")])],2):e._e(),"write-text"==e.options.code?s("div",[s("q-field",{attrs:{error:e.$v.selectedStep.form.answers.$error,"error-label":e.$t("label.RequiredField")}},[s("q-input",{attrs:{"float-label":e.$t("label.ExpectedAnswer")},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1)],1):e._e(),"code-keypad"==e.options.code?s("div",[s("q-field",{attrs:{error:e.$v.selectedStep.form.answers.$error,"error-label":e.$t("label.CodeKeypadFormatError")}},[s("q-input",{attrs:{"float-label":e.$t("label.Code"),"min-length":"2","max-length":"6"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1)],1):e._e(),"code-color"==e.options.code?s("div",{staticClass:"code-color"},[s("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),s("table",[s("tr",e._l(e.unformatedAnswer,function(t,a){return s("td",{key:a},[s("q-select",{ref:"colorSelect"+a,refInFor:!0,attrs:{options:e.colorsForCode},model:{value:e.unformatedAnswer[a],callback:function(t){e.$set(e.unformatedAnswer,a,t)},expression:"unformatedAnswer[index]"}})],1)})),s("tr",e._l(e.unformatedAnswer,function(t,a){return s("td",{key:a},[s("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[a],on:{click:function(t){e.triggerClickOnColorSelect(a)}}},[e._v(" ")])])}))])]):e._e(),"code-image"==e.options.code?s("div",{staticClass:"code-image"},[s("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),s("q-btn",[s("label",{attrs:{for:"answerImage"+a}},[s("q-icon",{attrs:{name:"file upload"}})],1),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"answerImage"+a,id:"answerImage"+a,type:"file",accept:"image/*"},on:{change:function(t){e.uploadCodeAnswerImage(a,t)}}})]),s("q-btn",{on:{click:function(t){e.deleteCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)}),s("q-btn",{staticClass:"full-width add-answer",on:{click:function(t){e.addCodeAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddAnImage"))+"\n    ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?s("div",[s("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),s("table",[s("tr",e._l(e.unformatedAnswer,function(t,a){return s("td",{key:a,staticClass:"text-center",on:{click:function(t){e.previousCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),s("tr",e._l(e.unformatedAnswer,function(t,a){return s("td",{key:a},[s("img",{attrs:{id:"image-code-setting-"+a,src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),s("tr",e._l(e.unformatedAnswer,function(t,a){return s("td",{key:a,staticClass:"text-center",on:{click:function(t){e.nextCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)}))])]):e._e()],2):e._e(),"image-recognition"==e.options.code?s("div",{staticClass:"image-recognition"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"image-to-recognize"}},[e._v(e._s(e.$t("label.UploadThePictureOfTheObjectToFind")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"image-to-recognize",id:"image-to-recognize",type:"file",accept:"image/*"},on:{change:e.uploadImageToRecognize}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.answers.$error,expression:"$v.selectedStep.form.answers.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),""!=e.selectedStep.form.answers?s("div",[s("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/image-recognition/"+e.selectedStep.form.answers}})]):e._e()],1):e._e(),"jigsaw-puzzle"===e.options.code?s("div",[s("div",{staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"puzzlefile"}},[e._v(e._s(e.$t("label.UploadThePuzzlePicture")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"puzzlefile",id:"puzzlefile",type:"file",accept:"image/*"},on:{change:e.uploadPuzzleImage}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?e._e():s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture}})]):e._e()],1),s("div",[s("q-select",{attrs:{"float-label":e.$t("label.Difficulty"),options:e.jigsawLevels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.code?s("div",[e._l(e.memoryItems,function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),s("q-btn",[s("label",{attrs:{for:"answerImage"+a}},[s("q-icon",{attrs:{name:"file upload"}})],1),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"answerImage"+a,id:"answerImage"+a,type:"file",accept:"image/*"},on:{change:function(t){e.uploadMemoryImage(a,t)}}})]),s("q-btn",{on:{click:function(t){e.deleteMemoryAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)}),s("q-btn",{staticClass:"full-width add-answer",on:{click:function(t){e.addAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddAnAnswer"))+"\n    ")]),s("q-checkbox",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}})],2):e._e(),"use-item"==e.options.code&&e.selectedStep.form.backgroundImage?s("div",{staticClass:"find-item"},[s("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){e.getClickCoordinates(t)}}},[s("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: 16vw; height: 16vw;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.options.code?s("div",{staticClass:"inventory"},[s("q-field",{attrs:{error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-label":e.$t("label.RequiredField")}},[s("q-select",{attrs:{"float-label":e.$t("label.ObjectToUse"),options:e.questItemsAsOptions},on:{change:e.$v.selectedStep.form.answerItem.$touch},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}})],1),null!==e.selectedStep.form.answerItem?s("div",[e._v("\n      "+e._s(e.$t("label.SelectedObject"))+" :\n      "),s("img",{attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e()],1):e._e(),"new-item"==e.options.code?s("div",{staticClass:"inventory"},[s("div",{staticClass:"row"},e._l(e.objectsList,function(t,a){return s("div",{key:a,staticClass:"col-2 q-pa-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb},on:{click:function(t){e.selectObject(a)}}})])})),s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"itemfile"}},[e._v(e._s(e.$t("label.UploadTheItemPicture")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"itemfile",id:"itemfile",type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture}})]):e._e(),s("q-field",{attrs:{error:e.$v.selectedStep.form.options.title.$error,"error-label":e.$t("label.RequiredField")}},[s("q-input",{attrs:{"float-label":e.$t("label.ObjectName")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1)],1):e._e(),"find-item"===e.options.code&&null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage?s("div",{staticClass:"find-item"},[s("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),s("div",{ref:"findItemPicture",style:"overflow: hidden;background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){e.getClickCoordinates(t)}}},[s("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: 16vw; height: 16vw;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"===e.options.code?s("div",{staticClass:"locate-item-ar"},[s("q-radio",{attrs:{val:!1,label:"2D"},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),s("q-radio",{attrs:{val:!0,label:"3D"},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():s("div",{staticClass:"fields-group"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"}},[s("label",{attrs:{for:"item-to-find"}},[e._v(e._s(e.$t("label.UploadThePictureOfTheObjectToFind")))]),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"item-to-find",id:"item-to-find",type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),s("div",[s("p",[e._v(e._s(e.$t("label.ObjectSize")))]),s("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"",decimals:1,"label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}})],1)],1),e.selectedStep.form.options.is3D?s("div",{staticClass:"fields-group"},[s("q-select",{attrs:{"float-label":e.$t("label.Choose3DModel"),options:e.selectModel3DOptions},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])],1):e._e(),s("p",[e._v(e._s(e.$t("label.AddressToFind")))]),s("div",{staticClass:"location-address"},[s("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[s("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address")},on:{place_changed:e.setLocation},model:{value:e.selectedStep.form.options.destination,callback:function(t){e.$set(e.selectedStep.form.options,"destination",t)},expression:"selectedStep.form.options.destination"}})],1),s("a",{on:{click:function(t){e.getCurrentLocation()}}},[s("img",{attrs:{src:"statics/icons/game/location.png"}})])]),s("q-list",[s("q-collapsible",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])])])],1)],1):e._e(),"yes"==e.options.showTrick?s("div",[s("q-input",{attrs:{"float-label":e.$t("label.Hint")},model:{value:e.selectedStep.form.hint[e.lang],callback:function(t){e.$set(e.selectedStep.form.hint,e.lang,t)},expression:"selectedStep.form.hint[lang]"}})],1):e._e(),s("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.submitStep}},[e._v(e._s(e.$t("label.SaveThisStep")))])],1)},ot=[];it._withStripped=!0;var lt=s("Al57"),ut=s("VH++"),ct={props:["quest","stepId","lang","options"],watch:{stepId:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initData();case 2:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}()},data:function(){return{questId:null,selectedStep:{isNew:!0,id:0,code:null,form:{title:{},text:{},options:{}}},stepTypes:lt,objectsList:ut,titleMaxLength:50,jigsawLevels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:3,label:this.$t("label.Hard")}],answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6,rightAnswerIndex:0,serverUrl:"https://api.graaly.com",colorsForCode:this.getColorsForCodeOptions(),imagesForCode:this.getImagesForCodeOptions(),questItemsAsOptions:[],questItems:[],memoryItems:[],unformatedAnswer:null,selectModel3DOptions:[]}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.textRules&&this.options.textRules.maxNbChars&&(e=this.options.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initData();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{getStepId:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.stepId&&"0"!==this.stepId?(this.selectedStep.id=this.stepId,this.selectedStep.isNew=!1):(this.selectedStep.id=0,this.selectedStep.isNew=!0);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resetStep:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form={title:{},text:{},answers:{},options:{},backgroundImage:null,videoStream:null,answerPointerCoordinates:{top:50,left:50},answerItem:null,showDistanceToTarget:!1,showDirectionToTarget:!1,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},number:null},this.$nextTick(function(){document.getElementById("picturefile")&&(document.getElementById("picturefile").value="")});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),initData:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.questId=this.quest._id,this.resetStep(),!this.stepId||"-1"!==this.stepId){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getStepId();case 6:if(this.selectedStep.isNew){e.next=13;break}return e.t0=Object,e.t1=this.selectedStep.form,e.next=11,we.getById(this.stepId);case 11:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 13:if(null!==this.selectedStep.form.number){e.next=18;break}return e.next=16,we.countForAQuest(this.questId);case 16:e.t3=e.sent,this.selectedStep.form.number=e.t3+1;case 18:if(this.selectedStep.form.title[this.lang]&&""!==this.selectedStep.form.title[this.lang]||(t=this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.title[this.quest.mainLanguage]?this.selectedStep.form.title[this.quest.mainLanguage]:this.$t("label.Step")+" "+this.selectedStep.form.number,this.$set(this.selectedStep.form.title,this.lang,t)),this.selectedStep.form.text[this.lang]&&""!==this.selectedStep.form.text[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.text[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.text,this.lang,this.selectedStep.form.text[this.quest.mainLanguage]),this.selectedStep.form.hint[this.lang]&&""!==this.selectedStep.form.hint[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.hint[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.hint,this.lang,this.selectedStep.form.hint[this.quest.mainLanguage]),"choose"===this.options.code){if(Array.isArray(this.selectedStep.form.options))this.answerType=this.selectedStep.form.options[0].hasOwnProperty("imagePath")&&null!==this.selectedStep.form.options[0].imagePath?"image":"text";else for(this.answerType="text",this.selectedStep.form.options=[],this.selectedStep.form.answers=0,s=0;s<this.defaultNbAnswers;s++)this.selectedStep.form.options.push({text:this.$t("label.AnswerNb",{nb:s+1}),imagePath:null});this.minNbAnswers=2,this.maxNbAnswers=6}else if("code-color"===this.options.code)this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=Array(4).fill("red");else if("code-image"===this.options.code){if(!this.selectedStep.form.options||!this.selectedStep.form.options.images)for(this.selectedStep.form.options={images:[]},a=0;a<this.defaultNbAnswers;a++)this.selectedStep.form.options.images.push({imagePath:null});this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=[0,0,0,0]}else if("code-keypad"===this.options.code)"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers="");else if("write-text"===this.options.code)"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers="");else if("image-recognition"===this.options.code)"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers="");else if("find-item"===this.options.code)this.selectedStep.form.answers.hasOwnProperty("top")&&(this.selectedStep.form.answerPointerCoordinates=this.selectedStep.form.answers,this.$nextTick(function(){this.positionFindItemPointer()}));else if("use-item"===this.options.code)this.selectedStep.form.answers.hasOwnProperty("coordinates")&&(this.selectedStep.form.answerPointerCoordinates=this.selectedStep.form.answers.coordinates,this.$nextTick(function(){this.positionFindItemPointer()})),this.selectedStep.form.answers&&this.selectedStep.form.answers.item&&(this.selectedStep.form.answerItem=this.selectedStep.form.answers.item),this.getQuestItemsAsOptions();else if("new-item"===this.options.code)this.selectedStep.form.options.hasOwnProperty("picture")||(this.selectedStep.form.options={picture:null,title:""});else if("jigsaw-puzzle"===this.options.code)this.selectedStep.form.options.hasOwnProperty("picture")||(this.selectedStep.form.options={picture:null,level:2});else if("memory"===this.options.code){if(this.selectedStep.form.options.items)this.memoryItems=this.selectedStep.form.options.items;else for(this.selectedStep.form.options={lastIsSingle:!1},this.memoryItems=[],r=0;r<8;r++)this.memoryItems.push({imagePath:null,single:!1});this.minNbAnswers=3,this.maxNbAnswers=12}else if("locate-item-ar"===this.options.code)for(n in this.selectedStep.form.options.hasOwnProperty("picture")||this.$set(this.selectedStep.form.options,"picture",null),this.selectedStep.form.options.hasOwnProperty("objectSize")||this.$set(this.selectedStep.form.options,"objectSize",1),this.selectedStep.form.options.hasOwnProperty("is3D")||this.$set(this.selectedStep.form.options,"is3D",!1),this.selectedStep.form.options.hasOwnProperty("model")||this.$set(this.selectedStep.form.options,"model",null),Ie)this.selectModel3DOptions.push({label:Ie[n].name[this.$store.state.user.language],value:n});case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),submitStep:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.selectedStep.form.$touch(),!this.$v.selectedStep.form.$error){e.next=4;break}return Z(this.$t("label.StepSettingsFormError"),"error"),e.abrupt("return");case 4:return"choose"===this.options.code&&"text"===this.answerType&&(this.selectedStep.form.options=this.selectedStep.form.options.map(function(e){return e.imagePath=null,e})),"code-color"===this.options.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|")),"code-image"===this.options.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|")),"jigsaw-puzzle"===this.options.code&&(t=V.buildIncrementalArray(Math.pow(2*parseInt(this.selectedStep.form.options.level,10),2)),t=V.shuffle(t),this.selectedStep.form.answers=t.join("|")),"memory"===this.options.code&&(this.selectedStep.form.options.items=this.memoryItems,this.selectedStep.form.options.lastIsSingle&&this.selectedStep.form.options.items&&this.selectedStep.form.options.items.length>0&&(this.selectedStep.form.options.items[this.selectedStep.form.options.items.length-1].single=!0)),"find-item"===this.options.code&&(this.selectedStep.form.answers=this.selectedStep.form.answerPointerCoordinates),"use-item"===this.options.code&&(this.selectedStep.form.answers={coordinates:this.selectedStep.form.answerPointerCoordinates,item:this.selectedStep.form.answerItem}),this.options.code,s=Object.assign(this.selectedStep.form,{questId:this.questId,type:this.options.code}),e.next=15,we.save(s);case 15:a=e.sent,a&&a.data&&a.data.stepId?(s.id=a.data.stepId,this.$emit("change",s)):Z(this.$t("label.TechnicalIssue"),"error");case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addAnswer:function(){this.selectedStep.form.options.length>=this.maxNbAnswers?Z(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.maxNbAnswers}),"error"):this.selectedStep.form.options.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.length+1}),imagePath:null})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.maxNbAnswers?Z(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.length<=this.minNbAnswers?Z(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.minNbAnswers}),"error"):this.selectedStep.form.options.splice(e,1)},deleteCodeAnswer:function(e){this.selectedStep.form.options.images.length<=this.minNbAnswers?Z(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.minNbAnswers}),"error"):this.selectedStep.form.options.images.splice(e,1)},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},uploadBackgroundImage:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("image",s[0]),e.next=8,we.uploadBackgroundImage(this.questId,a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.selectedStep.form.backgroundImage=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),resetBackgroundImage:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.backgroundImage=null,document.getElementById("picturefile")&&(document.getElementById("picturefile").value="");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),uploadVideo:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("video",s[0]),e.next=8,we.uploadVideo(this.questId,a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.selectedStep.form.videoStream=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadImageToRecognize:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("image",s[0]),e.next=8,we.uploadImageToRecognize(this.questId,a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.selectedStep.form.answers=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadAnswerImage:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),a=s.target.files,a[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",a[0]),e.next=8,we.uploadAnswerImage(this.questId,r);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.selectedStep.form.options[t].imagePath=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),uploadMemoryImage:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),a=s.target.files,a[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",a[0]),e.next=8,we.uploadMemoryImage(this.questId,r);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.memoryItems[t].imagePath=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),deleteMemoryAnswer:function(e){this.memoryItems.length<=this.minNbAnswers?Z(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.minNbAnswers}),"error"):this.memoryItems.splice(e,1)},uploadCodeAnswerImage:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),a=s.target.files,a[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",a[0]),e.next=8,we.uploadCodeAnswerImage(this.questId,r);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.selectedStep.form.options.images[t].imagePath=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),uploadPuzzleImage:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("image",s[0]),e.next=8,we.uploadPuzzleImage(this.questId,a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.selectedStep.form.options.picture=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadItemImage:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("image",s[0]),e.next=8,we.uploadItemImage(this.questId,this.options.code,a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.selectedStep.form.options.picture=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selectObject:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.title=this.objectsList[t].name[this.lang],this.selectedStep.form.options.picture="statics/images/object/"+this.objectsList[t].file;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getColorsForCodeOptions:function(){var e=this,t=[];return Pe.forEach(function(s){t.push({value:s,label:e.$t("color."+s)})}),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},getQuestItemsAsOptions:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.listWonObjects(this.questId,this.stepId);case 2:this.questItems=e.sent,t=[],this.questItems.forEach(function(e){t.push({value:e.picture,label:e.title})}),t.sort(function(e,t){return e.label>t.label?1:-1}),this.questItemsAsOptions=t;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getItemIcon:function(e){var t=this.questItems.find(function(t){return t.code===e});return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,r="use-item"===this.options.code?this.$refs["useItemPicture"]:this.$refs["findItemPicture"];this.selectedStep.form.answerPointerCoordinates.left=Math.round(s/r.clientWidth*100),this.selectedStep.form.answerPointerCoordinates.top=Math.round(a/r.clientHeight*100),this.positionFindItemPointer()},positionFindItemPointer:function(){var e=window.innerWidth/100,t=Math.round(8*e);document.getElementById("cross").style.left=Math.round(90*this.selectedStep.form.answerPointerCoordinates.left*e/100-t)+"px",document.getElementById("cross").style.top=Math.round(120*this.selectedStep.form.answerPointerCoordinates.top*e/100-t)+"px"},setLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.lat=parseFloat(t.geometry.location.lat()),this.selectedStep.form.options.lng=parseFloat(t.geometry.location.lng()),this.selectedStep.form.options.destination=t.formatted_address||"",this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getCurrentLocation:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fillLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.lat=t.coords.latitude,this.selectedStep.form.options.lng=t.coords.longitude,this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch(),s=new google.maps.Geocoder,s.geocode({location:{lat:t.coords.latitude,lng:t.coords.longitude}},function(e,t){a.$q.loading.hide(),"OK"===t&&e[0].formatted_address?(a.selectedStep.form.options.destination=e[0].formatted_address,document.getElementById("destination").value=a.selectedStep.form.options.destination):Z(a.$t("label.ErrorStandardMessage"),"error")});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),checkMainTextLength:function(e){var t=11,s=this.mainTextMaxLength;return this.options.textRules&&this.options.textRules.maxNbCarriageReturns&&(t=this.options.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=s&&(e.match(/\n/g)||[]).length<=t}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:H["required"]},e.text[this.lang]={function:function(e){return this.checkMainTextLength(e)}},this.options.code){case"choose":e.options={$each:"text"===this.answerType?{text:{required:H["required"]},imagePath:{}}:{text:{},imagePath:{required:H["required"]}}};break;case"code-keypad":e.answers={required:H["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:H["required"]};break;case"geolocation":e.options={lat:{required:H["required"]},lng:{required:H["required"]}};break;case"info-video":e.videoStream={required:H["required"]};break;case"image-recognition":e.answers={required:H["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:H["required"]}};break;case"new-item":e.options={picture:{required:H["required"]},title:{required:H["required"]}};break;case"use-item":e.backgroundImage={required:H["required"]},e.answerItem={required:H["required"]};break;case"write-text":e.answers={required:H["required"]};break;case"locate-item-ar":e.options={lat:{required:H["required"]},lng:{required:H["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:H["required"]}:e.options.picture={required:H["required"]};break}return{selectedStep:{form:e}}}},dt=ct,pt=(s("mhDg"),Object(m["a"])(dt,it,ot,!1,null,"62cac991",null)),mt=pt.exports,ht=s("+0yv");i["a"].directive("sortable",{inserted:function(e,t){return new Ye.a(e,t.value||{})}});var gt={components:{stepSettings:mt,stepPlay:De},data:function(){return{questId:null,stepId:"-1",tabs:{selected:"languages",progress:0,list:["languages","settings","steps","publish"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},form:{fields:{title:{},category:"",description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,town:"",country:"",zipcode:""},categories:V.buildOptionsForSelect(ht,{valueField:"id",labelField:"name"},this.$t),languages:V.buildOptionsForSelect(ae,{valueField:"code",labelField:"name"},this.$t),levels:V.buildOptionsForSelect(ee,{valueField:"id",labelField:"name"},this.$t),durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120}]},quest:{languages:[]},steps:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,new:{title:"ImageAndText",type:{},overviewData:{}}},inventory:{isOpened:!1,items:[]},selectedItem:null,hint:{isOpened:!1,label:""},canMoveNextStep:!1,canPass:!1,itemUsed:null,serverUrl:"https://api.graaly.com",pictureUploadURL:this.serverUrl+"/quest/picture/upload",titleMaxLength:50}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$route.params.questId&&""!==this.$route.params.questId?this.loadQuestData():this.$router.push("/quest/create/welcome");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{loadQuestData:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.questId=this.$route.params.questId,e.next=3,P.getById(this.questId);case 3:if(t=e.sent,!t||!t.data){e.next=20;break}if(this.quest=t.data,this.quest.languages&&this.quest.languages.length>0&&""===this.languages.current)for(this.languages.current=this.quest.languages[0].lang,s=0;s<this.quest.languages.length;s++)this.languages.available.push({label:this.$t("language."+this.quest.languages[s].lang),value:this.quest.languages[s].lang});return this.quest.description[this.languages.current]&&""!==this.quest.description[this.languages.current]||(this.quest.description[this.languages.current]=this.quest.description[this.quest.mainLanguage]),this.form.fields=this.quest,this.form.fields.startingPlace=this.form.fields.location.address||"",this.form.fields.zipcode=this.form.fields.location&&this.form.fields.location.zipcode?this.form.fields.location.zipcode:"",this.form.fields.town=this.form.fields.location&&this.form.fields.location.town?this.form.fields.location.town:"",this.form.fields.country=this.form.fields.location&&this.form.fields.location.country?this.form.fields.location.country:"",this.form.fields.location.hasOwnProperty("coordinates")&&2===this.form.fields.location.coordinates.length&&(a=this.form.fields.location.coordinates,this.form.fields.location={lng:a[0],lat:a[1]}),this.tabs.progress=this.quest.creationStep,this.tabs.progress<4&&(this.tabs.selected=this.tabs.list[this.tabs.progress]),e.next=18,this.refreshStepsList();case 18:e.next=22;break;case 20:console.error("Could not load quest data"),Z(this.$t("label.ErrorStandardMessage"),"error");case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),refreshStepsList:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.listForAQuest(this.questId);case 2:this.steps.items=e.sent,this.steps.items&&this.steps.items.length>0&&this.tabs.progress<3&&(this.tabs.progress=3);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),submitSettings:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.form.fields.location.lat&&0!==this.form.fields.location.lng){e.next=3;break}return Z(this.$t("label.YouMustDefineStartLocation"),"warning"),e.abrupt("return");case 3:if(this.$v.form.fields.$touch(),this.$v.form.fields.$error){e.next=11;break}return t={languages:[this.form.fields.mainLanguage],location:{type:"Point",coordinates:[this.form.fields.location.lng,this.form.fields.location.lat],town:this.form.fields.town,country:this.form.fields.country,zipcode:this.form.fields.zipcode,address:this.form.fields.startingPlace}},s=Object.assign({},this.form.fields,t),e.next=9,P.save(s);case 9:a=e.sent,a&&a.data?(this.tabs.progress<2&&(this.tabs.progress=2,this.tabs.selected="steps"),Z(this.$t("label.QuestSaved"),"info")):Z(this.$t("label.ErrorStandardMessage"),"error");case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),uploadImage:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),s=t.target.files,s[0]){e.next=4;break}return e.abrupt("return");case 4:return a=new FormData,a.append("image",s[0]),e.next=8,P.uploadPicture(a);case 8:r=e.sent,r&&r.hasOwnProperty("data")&&(this.form.fields.picture=r.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getCurrentLocation:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fillLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.location={lat:t.coords.latitude,lng:t.coords.longitude},s=new google.maps.Geocoder,s.geocode({location:{lat:t.coords.latitude,lng:t.coords.longitude}},function(e,t){a.$q.loading.hide(),"OK"===t&&e[0].formatted_address?(a.form.fields.town=a.getCity(e[0]),a.form.fields.country=a.getCountry(e[0]),a.form.fields.zipcode=a.getZipcode(e[0]),a.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=a.form.fields.startingPlace):Z(a.$t("label.ErrorStandardMessage"),"error")});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setLocation:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.location={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},this.form.fields.town=this.getCity(t),this.form.fields.country=this.getCountry(t),this.form.fields.zipcode=this.getZipcode(t),this.form.fields.startingPlace=t.formatted_address||"";case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("postal_code"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("locality"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("country"===e.address_components[t].types[s])return e.address_components[t].short_name;return""},onStepListUpdate:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.move(this.questId,t.oldIndex+1,t.newIndex+1);case 2:s=e.sent,s&&this.steps.items.splice(t.newIndex,0,this.steps.items.splice(t.oldIndex,1)[0]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),publish:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(s="unpublish",a=0;a<this.form.fields.languages.length;a++)this.form.fields.languages[a].lang&&this.form.fields.languages[a].lang===t&&this.form.fields.languages[a].published&&(s="publish");if("publish"!==s){e.next=9;break}return e.next=5,P.publish(this.questId,t);case 5:"unpublished"===this.quest.status&&(this.quest.status="tovalidate"),this.tabs.progress=4,e.next=13;break;case 9:return e.next=11,P.unpublish(this.questId,t);case 11:this.quest.status="unpublished",this.tabs.progress=3;case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),unpublish:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.quest.status="unpublished",e.next=3,P.unpublish(this.questId);case 3:Z(this.$t("label.YourQuestIsUnpublished"),"positive");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),testQuest:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/quest/play/"+this.questId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),removeQuest:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).then(_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.remove(t.questId);case 2:s.$router.push("/map");case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),removeStep:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=this,this.$q.dialog({message:this.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).then(_()(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.remove(s.questId,t);case 2:return r=s.steps.items.map(function(e){return e._id}).indexOf(t),s.steps.items.splice(r,1),e.next=6,a.refreshStepsList();case 6:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),modifyStep:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t&&t._id&&(this.stepId=t._id,this.steps.new.type=this.getStepTypeInformations(t.type)),this.closeAllPanels(),this.steps.showNewStepOverview=!1,this.steps.showNewStepPageSettings=!0,this.steps.reloadStepPlay=!1,this.moveToTop();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),closeOverview:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.closeAllPanels(),e.next=3,this.refreshStepsList();case 3:this.resetStepData(),this.steps.showNewStepOverview=!1,this.tabs.selected="steps";case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resetStepData:function(){this.stepId="-1",this.steps.new.overviewData={},this.steps.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1},closeStepSettingsPage:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshStepsList();case 2:this.steps.new.type={},this.stepId="0",this.steps.showNewStepPageSettings=!1,this.tabs.selected="steps";case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addStep:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.steps.showNewStepPage=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),reindexSteps:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.steps.items.length)){e.next=8;break}return s=this.steps.items[t],e.next=5,we.save({_id:s._id,questId:this.questId,number:t+1});case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),selectLanguage:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.languages.current,s=!1,this.quest.languages)for(a=0;a<this.quest.languages.length;a++)this.quest.languages[a].lang===t&&(s=!0);if(s){e.next=6;break}return e.next=6,P.addLanguage(this.questId,t);case 6:return e.next=8,this.loadQuestData();case 8:this.quest.title[t]&&""!==this.quest.title[t]||(t===this.quest.mainLanguage?this.quest.title[t]=this.$t("label.NewQuest",t):this.quest.title[t]=this.quest.title[this.quest.mainLanguage]),this.tabs.progress<1&&(this.tabs.progress=1),this.tabs.selected="settings";case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),closeStepTypePage:function(){this.stepId="-1",this.steps.reloadStepPlay=!1,this.steps.new.type={},this.steps.showNewStepPage=!1},filteredStepTypes:function(e){return lt.filter(function(t){return t.category===e&&t.enabled})},selectStepType:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.steps.new.type=t,this.steps.showNewStepPage=!1,this.stepId="0",this.steps.showNewStepPageSettings=!0,this.moveToTop();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),trackStepChanges:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.steps.showNewStepPageSettings=!1,this.steps.showNewStepOverview=!0,this.stepId=t.id,this.steps.new.overviewData=t,this.steps.reloadStepPlay=!0,this.moveToTop();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),trackStepPlayed:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep=!0;case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),trackStepSuccess:function(){var e=_()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep=!0,this.hideHint();case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),trackStepPass:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.canPass=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),trackStepFail:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.hideHint();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),hideHint:function(){this.steps.new.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<lt.length;t++)if(lt[t].code===e)return"fas fa-"+lt[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<lt.length;t++)if(lt[t].code===e)return lt[t];return""},fillInventory:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we.listWonObjects(this.questId,this.stepId);case 2:this.inventory.items=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),openInventory:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.overview.tabSelected="inventory");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),selectItem:function(e){"use-item"===this.steps.new.overviewData.type?(this.selectedItem=e,this.closeAllPanels()):Z(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},askForHint:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(!this.hint.isOpened){e.next=6;break}this.closeAllPanels(),e.next=10;break;case 6:return e.next=8,ce.getHint(0,this.stepId);case 8:t=e.sent,t&&t.hint&&(this.hint.label=t.hint,this.closeAllPanels(),this.hint.isOpened=!0,this.overview.tabSelected="hint");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),isHintAvailable:function(){return this.steps.new.overviewData&&this.steps.new.overviewData.hint&&this.steps.new.overviewData.hint[ae.current]&&""!==this.steps.new.overviewData.hint[ae.current]},moveToTop:function(){window.scrollTo(0,0)}},validations:{form:{fields:{title:{required:H["required"]},category:{required:H["required"]}}}}},ft=gt,vt=(s("OGu7"),Object(m["a"])(ft,rt,nt,!1,null,null,null)),bt=vt.exports,wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper dark-background"},[s("div",{staticClass:"page-content top-padding-middle"},[s("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.letsGo")))]),s("form",{on:{submit:function(t){t.preventDefault(),e.formSubmit()}}},[s("div",{staticClass:"q-pa-lg"},["email"===e.step?s("q-field",{attrs:{error:e.$v.form.email.$error}},[s("q-input",{attrs:{type:"email",dark:"",color:"white","float-label":e.$t("label.YourEmail")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.email.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourEmailAddress")))]),e.$v.form.email.email?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterAValidEmailAddress")))])]):e._e()],1):e._e(),"password"===e.step?s("q-field",[s("q-input",{attrs:{type:"password",dark:"",color:"white","float-label":e.$t("label.YourPassword")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),"password"===e.step?s("p",{staticClass:"text-right q-mt-md q-mb-md"},[s("a",{on:{click:function(t){e.sendForgottenPasswordCode()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?s("q-field",[e._v("\n          "+e._s(e.$t("label.EnterTheCodeYouReceivedByEmail"))+"\n          "),s("q-input",{attrs:{"float-label":e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?s("q-field",[s("q-input",{attrs:{type:"password",dark:"",color:"white","float-label":e.$t("label.YourNewPassword")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}}),e.$v.form.newPassword.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.newPassword.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourPassword")))]),e.$v.form.newPassword.minLength?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.YourPasswordMustBe6digitsLength")))]),e.$v.form.newPassword.checkPasswordComplexity?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PasswordComplexityRule")))])]):e._e()],1):e._e()],1),s("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg q-mb-xl"},["email"!==e.step?s("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"arrow_back_ios",loading:e.submitting},on:{click:function(t){e.backAction()}}}):e._e(),s("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"arrow_forward_ios",loading:e.submitting,type:"submit"}})],1)]),s("p",{staticClass:"text-center margin-size-3 q-mt-xl q-mb-lg"},[e._v("\n      "+e._s(e.$t("label.orSignInWith"))+"\n    ")]),s("div",[s("q-btn",{staticClass:"full-width",attrs:{color:"facebook",icon:"fab fa-facebook",label:"Facebook"},on:{click:e.facebookLogin}}),s("q-btn",{staticClass:"full-width",attrs:{color:"google",icon:"fab fa-google",label:"Google"},on:{click:e.googleLogin}})],1)])])},yt=[];wt._withStripped=!0;var qt=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},Ct={data:function(){return{step:"email",form:{email:"",password:"",newPassword:"",code:""},serverUrl:"https://api.graaly.com",submitting:!1}},mounted:function(){this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation)},methods:{formSubmit:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="email"===e.t0?3:"password"===e.t0?9:"forgottenpassword"===e.t0?14:22;break;case 3:if(this.$v.form.email.$error){e.next=8;break}return e.next=6,this.checkUserIsExisting(this.form.email);case 6:t=e.sent,t&&t.status?"active"===t.status?this.step="password":"new"===t.status?this.$router.push("/user/createAccount/"+this.form.email+"/validation"):"blocked"===t.status?Z(this.$t("label.YourAccountIsBlocked"),"warning"):this.$router.push("/user/createAccount/"+this.form.email+"/generic"):Z(this.$t("label.ErrorStandardMessage"),"error");case 8:return e.abrupt("break",22);case 9:return e.next=11,this.signIn(this.form.email,this.form.password);case 11:return s=e.sent,s.status?("success"===s.status&&(a="/home",this.$route.query.hasOwnProperty("redirect")&&(a=this.$route.query.redirect),this.$router.push(a)),"failed"===s.status&&Z(this.$t("label.IncorrectLoginPleaseRetry"),"warning")):Z(this.$t("label.ErrorStandardMessage"),"error"),e.abrupt("break",22);case 14:if(this.$v.form.newPassword.$error){e.next=21;break}return e.next=17,I.changePassword(this.form.email,this.form.newPassword,this.form.code);case 17:r=e.sent,this.submitting=!0,r.status&&200===r.status?(n="/home",this.$route.query.hasOwnProperty("redirect")&&(n=this.$route.query.redirect),this.$router.push(n)):r.data&&"You have tries too much codes"===r.data.message?Z(this.$t("label.YourAccountIsBlocked"),"warning"):Z(this.$t("label.IncorrectCodePleaseRetry"),"warning"),this.submitting=!1;case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),backAction:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="password"===e.t0?3:"forgottenpassword"===e.t0?5:7;break;case 3:return this.step="email",e.abrupt("break",7);case 5:return this.step="password",e.abrupt("break",7);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkUserIsExisting:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.checkEmail(t);case 2:if(s=e.sent,!(s&&s.data&&s.data.hasOwnProperty("existing")&&!0===s.data.existing)){e.next=7;break}return e.abrupt("return",{status:s.data.status});case 7:if(!(s&&s.data&&s.data.hasOwnProperty("existing")&&!1===s.data.existing)){e.next=11;break}return e.abrupt("return",{status:"missing"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),signIn:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.login(t,s);case 2:if(a=e.sent,200!==a.status){e.next=7;break}return e.abrupt("return",{status:"success"});case 7:if(401!==a.status){e.next=11;break}return e.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),validateAccount:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.validateAccount(t,s);case 2:a=e.sent,a.status>=300&&a.data&&a.data.message?Z(a.data.message,"warning"):Z(this.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},facebookLogin:function(){window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0)},sendForgottenPasswordCode:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,I.sendForgottenPasswordCode(this.form.email);case 3:t=e.sent,200===t.status&&(this.step="forgottenpassword"),this.submitting=!1;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},validations:{form:{email:{required:H["required"],email:H["email"]},newPassword:{required:H["required"],minLength:Object(H["minLength"])(6),checkPasswordComplexity:qt}}}},kt=Ct,St=Object(m["a"])(kt,wt,yt,!1,null,null,null),xt=St.exports,_t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},$t=[];_t._withStripped=!0;var At={mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("logout");case 2:this.$router.push("/user/login");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Tt=At,Pt=Object(m["a"])(Tt,_t,$t,!1,null,null,null),It=Pt.exports,Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.$router.push("/map")}}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("h1",{staticClass:"size-3"},[e._v("Administration")]),s("q-tabs",{attrs:{"two-lines":""}},[s("q-tab",{attrs:{slot:"title",name:"validation",icon:"check_box",label:"Quests validation",default:""},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"rejected",icon:"sentiment_very_dissatisfied",label:"Quests rejected"},slot:"title"}),s("q-tab",{attrs:{slot:"title",name:"minigames",icon:"child_friendly",label:"Mini games"},slot:"title"}),s("q-tab-pane",{attrs:{name:"validation"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.questsToValidate.items,function(t){return s("q-item",{key:t._id,nativeOn:{click:function(s){e.$router.push("/quest/play/"+t._id)}}},[t.picture?s("q-item-side",{attrs:{avatar:e.serverUrl+"/upload/quest/"+t.picture}}):e._e(),t.picture?e._e():s("q-item-side",{attrs:{avatar:"statics/profiles/noprofile.png"}}),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?s("q-item-tile",{attrs:{sublabel:""}},[s("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated))+"\n              ")],1):e._e(),"unpublished"==t.status?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)}),0===e.questsToValidate.items.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v("No quest to validate")])],1)],1):e._e()],2)],1),s("q-tab-pane",{attrs:{name:"rejected"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.questsRejected.items,function(t){return s("q-item",{key:t._id,nativeOn:{click:function(s){e.$router.push("/quest/play/"+t._id)}}},[t.picture?s("q-item-side",{attrs:{avatar:e.serverUrl+"/upload/quest/"+t.picture}}):e._e(),t.picture?e._e():s("q-item-side",{attrs:{avatar:"statics/profiles/noprofile.png"}}),s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?s("q-item-tile",{attrs:{sublabel:""}},[s("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated))+"\n              ")],1):e._e(),"unpublished"==t.status?s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)}),0===e.questsRejected.items.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v("No quest rejected")])],1)],1):e._e()],2)],1),s("q-tab-pane",{attrs:{name:"minigames"}},[s("q-btn",{staticClass:"full-width",attrs:{link:"",color:"tertiary"},on:{click:function(t){e.$router.push("/admin/minigames/builder")}}},[e._v(e._s(e.$t("label.AddATown")))]),s("q-list",{attrs:{highlight:""}},[e._l(e.towns.items,function(t){return s("q-item",{key:t._id},[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.name)+" ("+e._s(t.zipcode)+")")]),s("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                "+e._s(t.country)+"\n              ")])],1),"new"===t.status?s("q-item-side",[s("q-btn",[e._v("Configure")])],1):e._e(),"configured"===t.status?s("q-item-side",[s("q-btn",[e._v("Update")])],1):e._e()],1)}),0===e.towns.items.length?s("q-item",[s("q-item-main",[s("q-item-tile",{attrs:{label:""}},[e._v("No town configured yet")])],1)],1):e._e()],2)],1)],1)],1)])},Nt=[];Rt._withStripped=!0;var Mt={ListQuestsToValidate:function(){return T().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return T().get("admin/quests/rejected")},ListTowns:function(){return T().get("admin/towns")},publish:function(e){return T().get("admin/quests/publish/"+e)},CreateTown:function(e){return T().post("admin/town/add/",e)},reject:function(e){return T().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return T().post("/admin/town/place/picture/upload",e,{headers:{"Content-Type":"multipart/form-data"}})}},Lt={data:function(){return{questsToValidate:{items:[]},questsRejected:{items:[]},towns:{items:[]},serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadQuestsToValidate(),this.loadQuestsRejected(),this.loadTowns()},methods:{loadQuestsToValidate:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.ListQuestsToValidate();case 2:t=e.sent,this.questsToValidate.items=t.data.quests;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),loadTowns:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.ListTowns();case 2:t=e.sent,this.towns.items=t.data.towns;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),loadQuestsRejected:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.ListQuestsRejected();case 2:t=e.sent,this.questsRejected.items=t.data.quests;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},zt=Lt,Ot=(s("ZMtm"),Object(m["a"])(zt,Rt,Nt,!1,null,null,null)),Ft=Ot.exports,Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("p",[e._v("\n      Validation of the quest "),s("strong",[e._v(e._s(e.quest.title.fr)+" "+e._s(e.quest.title.en))])]),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){e.publish()}}})],1),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){e.reject()}}})],1),s("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the quest is rejected\n    ")])])])},jt=[];Dt._withStripped=!0;var Yt={data:function(){return{quest:{},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.questId);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{getQuest:function(){var e=_()(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.getById(t);case 2:s=e.sent,this.quest=s.data;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),publish:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.publish(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),reject:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.reject(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},Et=Yt,Bt=Object(m["a"])(Et,Dt,jt,!1,null,null,null),Qt=Bt.exports,Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("form",{on:{submit:function(t){t.preventDefault(),e.configureTown()}}},[s("q-field",{attrs:{error:e.$v.form.fields.name.$error}},[s("q-input",{attrs:{type:"text","float-label":"Name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),e.$v.form.fields.name.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.fields.name.required?e._e():s("div",{staticClass:"q-field-error"},[e._v("Please enter a name")])]):e._e()],1),s("q-field",{attrs:{error:e.$v.form.fields.zipcode.$error}},[s("q-input",{attrs:{type:"text","float-label":"Zip Code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),e.$v.form.fields.zipcode.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.fields.zipcode.required?e._e():s("div",{staticClass:"q-field-error"},[e._v("Please enter a zip code")])]):e._e()],1),s("q-field",[s("q-select",{attrs:{"float-label":"Country",options:[{label:"France",value:"fr"}]},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}})],1),s("q-field",{attrs:{icon:"explore",label:"GPS location bottom left"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text","float-label":"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text","float-label":"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])]),s("q-field",{attrs:{icon:"explore",label:"GPS location top right"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text","float-label":"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text","float-label":"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])]),e._l(e.form.fields.places,function(t,a){return s("q-field",{key:a,attrs:{icon:"place",label:"Place"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("q-input",{attrs:{type:"text","float-label":"Name"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"place.name"}})],1),s("div",{staticClass:"col"},[""===t.picture?s("q-btn",{attrs:{type:"button"}},[s("label",{attrs:{for:"placepicture"+a}},[s("q-icon",{attrs:{name:"file upload"}})],1),s("input",{staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"placepicture"+a,id:"placepicture"+a,type:"file",accept:"image/*"},on:{change:function(t){e.uploadPlacePicture(a,t)}}})]):e._e(),""!==t.picture?s("div",[s("img",{staticStyle:{width:"50px"},attrs:{src:e.serverUrl+"/upload/town/place/"+t.picture}})]):e._e()],1)]),s("q-select",{attrs:{"float-label":"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}]},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"place.type"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text","float-label":"Longitude"},model:{value:t.location.lng,callback:function(s){e.$set(t.location,"lng",s)},expression:"place.location.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text","float-label":"Latitude"},model:{value:t.location.lat,callback:function(s){e.$set(t.location,"lat",s)},expression:"place.location.lat"}})],1)])],1)}),s("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),s("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"primary"}},[e._v("Save")])],2)])])},Wt=[];Ut._withStripped=!0;var Gt={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.addPlace();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{configureTown:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt.CreateTown(this.form.fields);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(){var e=_()(regeneratorRuntime.mark(function e(t,s){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),a=s.target.files,a[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",a[0]),e.next=8,Mt.uploadPlaceImage(r);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.form.fields.places[t].picture=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}()},validations:{form:{fields:{name:{required:H["required"]},zipcode:{required:H["required"]}}}}},Vt=Gt,Ht=Object(m["a"])(Vt,Ut,Wt,!1,null,null,null),Kt=Ht.exports,Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper dark-background"},[s("div",{staticClass:"page-content top-padding-middle"},["firstusage"!==e.step?s("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.tellUsAboutYou")))]):e._e(),"firstusage"===e.step?s("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.IfYouUseGraalyForTheFirstTime")))]):e._e(),s("form",{on:{submit:function(t){t.preventDefault(),e.formSubmit()}}},["generic"===e.step?s("q-field",{attrs:{error:e.$v.form.name.$error}},[s("q-input",{attrs:{dark:"","float-label":e.$t("label.YourName")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.$v.form.name.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.name.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourName")))])]):e._e()],1):e._e(),"generic"===e.step?s("q-field",[s("q-select",{attrs:{dark:"","float-label":e.$t("label.YourSex"),options:e.sexes},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1):e._e(),"generic"===e.step?s("q-field",[s("q-select",{attrs:{dark:"","float-label":e.$t("label.YourAge"),options:e.ages},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1):e._e(),"location"===e.step?s("q-field",{attrs:{error:e.$v.form.country.$error}},[s("q-select",{attrs:{dark:"","float-label":e.$t("label.YourCountry"),options:e.countries},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}),e.$v.form.country.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.country.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseSelectYourCountry")))])]):e._e()],1):e._e(),"location"===e.step?s("q-field",{attrs:{error:e.$v.form.zipCode.$error}},[s("q-input",{attrs:{dark:"","float-label":e.$t("label.YourZipCode")},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}),e.$v.form.zipCode.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.zipCode.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourZipCode")))])]):e._e()],1):e._e(),"password"===e.step?s("q-field",{attrs:{error:e.$v.form.password.$error}},[s("q-input",{attrs:{dark:"",type:"password","float-label":e.$t("label.YourPassword")},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.$v.form.password.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.password.required?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseEnterYourPassword")))]),e.$v.form.password.minLength?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.YourPasswordMustBe6digitsLength")))]),e.$v.form.password.checkPasswordComplexity?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PasswordComplexityRule")))])]):e._e()],1):e._e(),"validation"===e.step?s("q-field",[e._v("\n        "+e._s(e.$t("label.EnterTheCodeYouReceivedByEmail"))+"\n        "),s("q-input",{attrs:{dark:"","float-label":e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?s("p",{staticClass:"text-right q-mt-md q-mb-md"},[s("a",{on:{click:function(t){e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?s("p",{staticClass:"text-center q-mt-md q-mb-md"},[s("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),s("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg q-mb-xl"},["firstusage"!==e.step?s("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"arrow_back_ios",loading:e.submitting},on:{click:function(t){e.backAction()}}}):e._e(),s("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"arrow_forward_ios",loading:e.submitting,type:"submit"}})],1)],1),"generic"===e.step?s("div",{staticClass:"link-below-button"},[s("a",{on:{click:function(t){e.showPrivateBox=!0}}},[e._v(e._s(e.$t("label.HowWeUseYourData")))])]):e._e(),e.showPrivateBox&&"generic"===e.step?s("div",[e._v("\n      TODO\n    ")]):e._e()])])},Zt=[];Jt._withStripped=!0;var Xt={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:""},showPrivateBox:!1,submitting:!1,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?te:se,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){this.$route.params.email?this.form.email=this.$route.params.email:this.$router.push("/user/login")},methods:{formSubmit:function(){var e=_()(regeneratorRuntime.mark(function e(){var t,s,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?6:"password"===e.t0?10:"validation"===e.t0?20:"firstusage"===e.t0?27:31;break;case 3:return this.$v.form.name.$touch(),this.$v.form.name.$error||(this.step="location"),e.abrupt("break",31);case 6:return this.$v.form.country.$touch(),this.$v.form.zipCode.$touch(),this.$v.form.country.$error||this.$v.form.zipCode.$error||(this.step="password"),e.abrupt("break",31);case 10:if(this.$v.form.password.$touch(),this.$v.form.password.$error){e.next=19;break}return t={name:this.form.name,email:this.form.email,sex:this.form.sex,age:this.form.age,password:this.form.password,zipcode:this.form.zipCode,country:this.form.country,language:this.$i18n.locale},this.submitting=!0,e.next=16,I.createAccount(t);case 16:s=e.sent,s.status&&200===s.status?this.step="validation":Z(this.$t("label.IncorrectLoginPleaseRetry"),"warning"),this.submitting=!1;case 19:return e.abrupt("break",31);case 20:return e.next=22,I.validateAccount(this.form.email,this.form.code);case 22:return a=e.sent,this.submitting=!0,a.status&&200===a.status?this.step="firstusage":a.data&&"You have tries too much codes"===a.data.message?Z(this.$t("label.YourAccountIsBlocked"),"warning"):Z(this.$t("label.IncorrectCodePleaseRetry"),"warning"),this.submitting=!1,e.abrupt("break",31);case 27:return r="/home",this.$route.query.hasOwnProperty("redirect")&&(r=this.$route.query.redirect),this.$router.push(r),e.abrupt("break",31);case 31:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),backAction:function(){var e=_()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?5:"password"===e.t0?7:"validation"===e.t0?9:11;break;case 3:return this.$router.push("/user/login"),e.abrupt("break",11);case 5:return this.step="generic",e.abrupt("break",11);case 7:return this.step="location",e.abrupt("break",11);case 9:return this.$router.push("/user/login"),e.abrupt("break",11);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),generateANewCode:function(){var e=_()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,I.generateANewValidationCode(this.form.email);case 3:t=e.sent,200===t.status&&Z(this.$t("label.ANewCodeHasBeenSent"),"info"),this.submitting=!1;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},validations:{form:{name:{required:H["required"]},country:{required:H["required"]},zipCode:{required:H["required"]},password:{required:H["required"],minLength:Object(H["minLength"])(6),checkPasswordComplexity:qt}}}},es=Xt,ts=(s("bu9U"),Object(m["a"])(es,Jt,Zt,!1,null,null,null)),ss=ts.exports,as=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper dark-background"},[s("div",{staticClass:"page-content top-padding-middle fit"},[s("q-carousel",{staticClass:"text-white fit",attrs:{"quick-nav":""},scopedSlots:e._u([{key:"control-nav",fn:function(t){return s("q-carousel-control",{staticClass:"fit",attrs:{offset:[0,0]}},[s("q-btn",{staticClass:"q-carousel-left-arrow absolute",attrs:{disable:!t.canGoToPrevious,color:"white","text-color":"primary",icon:"keyboard_arrow_left",round:""},on:{click:t.previous}}),s("q-btn",{staticClass:"q-carousel-right-arrow absolute",attrs:{disable:e.hideRightButton,color:"white","text-color":"primary",icon:"keyboard_arrow_right",round:""},on:{click:function(s){e.nextSlide(t)}}})],1)}}])},[s("q-carousel-slide",{staticClass:"bg-primary"},[s("div",{staticClass:"row fit"},[s("div",{staticClass:"col centered"},[s("h1",{staticClass:"vertical-middle size1"},[e._v(e._s(e.$t("label.WelcomeInGraalyWorld")))])])])]),s("q-carousel-slide",{staticClass:"bg-primary"},[s("div",{staticClass:"row fit"},[s("div",{staticClass:"col centered"},[s("h2",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.DiscoverPlacesAroundYou")))]),s("img",{attrs:{src:"statics/images/firstusage1.png"}})])])]),s("q-carousel-slide",{staticClass:"bg-primary"},[s("div",{staticClass:"row fit"},[s("div",{staticClass:"col centered"},[s("h2",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.WinPointsAndUnlockQuests")))]),s("img",{attrs:{src:"statics/images/firstusage2.png"}})])])]),s("q-carousel-slide",{staticClass:"bg-primary"},[s("div",{staticClass:"row fit"},[s("div",{staticClass:"col centered"},[s("h2",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.CreateYourQuestsAndWinMoney")))]),s("img",{attrs:{src:"statics/images/firstusage3.png"}})])])])],1)],1)])},rs=[];as._withStripped=!0;var ns={data:function(){return{hideRightButton:!1}},methods:{nextSlide:function(e){3===e.slide?this.$router.push("/user/login"):e.next()}}},is=ns,os=Object(m["a"])(is,as,rs,!1,null,null,null),ls=os.exports,us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Désolé, une erreur est survenue.")]),null!==e.errorMessage?s("p",[e._v("Message : "+e._s(e.errorMessage))]):e._e(),s("p",[e._v("Veuillez contacter le support.")])])},cs=[];us._withStripped=!0;var ds={data:function(){return{errorMessage:null}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage)}},ps=ds,ms=(s("5Syt"),Object(m["a"])(ps,us,cs,!1,null,"a68816d0",null)),hs=ms.exports,gs=[{path:"/",component:C,children:[{path:"",redirect:"/map",meta:{requiresAuth:!0}},{path:"home",redirect:"/map",meta:{requiresAuth:!0}},{path:"firstusage",component:ls,meta:{requiresAuth:!1}},{path:"map",component:oe,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",component:fe,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/step/:stepNumber/:lang",component:Ue,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",component:Je,meta:{requiresAuth:!0}},{path:"quest/create",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",component:at,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",component:bt,meta:{requiresAuth:!0}},{path:"user/createAccount/:email/:step",component:ss,meta:{requiresAuth:!1}},{path:"user/login",component:xt,meta:{requiresAuth:!1}},{path:"user/logout",component:It,meta:{requiresAuth:!0}},{path:"admin",component:Ft,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})",component:Qt,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",component:Kt,meta:{requiresAuth:!0}},{path:"error",component:hs,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return s.e(0).then(s.bind(null,"7l0S"))}}];i["a"].use(f["a"]);var fs=new f["a"]({mode:"hash",base:"/",scrollBehavior:function(){return{y:0}},routes:gs}),vs=fs,bs=s("wd/R"),ws=s.n(bs),ys=function(e){var t=e.Vue;t.filter("formatDate",function(e){if(ws.a.locale("fr"),e)return ws()(String(e)).fromNow()})},qs=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=_()(regeneratorRuntime.mark(function e(t,s,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=7;break}return e.next=3,I.getAccount();case 3:r=e.sent,r.data&&r.data.name?(W.state.user=r.data,a()):(n=Y["get"]("firstusage"),n&&"ok"===n?a({path:"/user/login",query:"/"===s.path?null:{redirect:t.fullPath}}):(Y["set"]("firstusage","ok",{expires:432e6,secure:!0}),a({path:"/firstusage"}))),e.next=8;break;case 7:a();case 8:case"end":return e.stop()}},e,this)}));return function(t,s,a){return e.apply(this,arguments)}}())},Cs=function(e){var t=e.Vue;t.use(K,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},ks=s("qSUR"),Ss=s("MBMU"),xs=s.n(Ss),_s=function(e){var t=e.app,s=e.Vue;s.use(ks["a"]),t.i18n=new ks["a"]({locale:"fr",messages:xs.a})},$s=s("Hc5T"),As=s.n($s),Ts=function(e){var t=e.Vue;t.use(As.a)},Ps=s("/jzl"),Is=s.n(Ps);i["a"].config.productionTip=!0;var Rs=r()({el:"#q-app",router:vs,store:W},g),Ns=[];Ns.push(ys),Ns.push(qs),Ns.push(Cs),Ns.push(_s),Ns.push(Ts),Ns.forEach(function(e){return e({app:Rs,router:vs,store:W,Vue:i["a"]})}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&document.addEventListener("DOMContentLoaded",function(){Is.a.attach(document.body)},!1),new i["a"](Rs)},Ls4Y:function(e,t,s){},MBMU:function(e,t){e.exports={en:{challenge:{challengePlay10Quests:"Play 10 quests",challengePlay30Quests:"Play 30 quests",challengePlay100Quests:"Play 100 quests",challengePlay1000Quests:"Play 1000 quests",challengeBuild1Quests:"Create 1 quest",challengeBuild5Quests:"Create 5 quests",challengeBuild10Quests:"Create 10 quests",challengeBuild40Quests:"Create 40 quests",challengeHave2members:"Invite 2 members in your agency",challengeHave10members:"Invite 10 members in your agency",challengeHave20members:"Invite 20 members in your agency"},color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White"},news:{newQuestWon:"Has won the quest <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the quest <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your quest <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on quest <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the quests you run during the next 3 days is doubled",rewardx2:"Coins x 2",rewardx2Desc:"The coins you win during the next 3 days are doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in quests during 1 day","100coins":"100 coins","100coinsDesc":"You win 100 extra coins","10coins":"10 coins","10coinsDesc":"You win 10 extra coins"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Find a location",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",PhotographAnObject:"Photograph an item",PhotographAnObjectDesc:"Compare your picture with a play camera picture",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Locate item using augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near."},messages:{SignIn:"Sign-in",toStartTheAdventure:"to start the adventure!",CreateAnAccount:"Create an account",YourAccountIsNowValidated:"Your account is now validated",YourHaveJoinedTheNewTeam:"You have joined the new team",QuestsMap:"Quests map",MyAgency:"My agency",MyProfile:"My profile",CreateAQuest:"Create a quest",Connection:"Sign-in",SignUp:"Sign-up",Subscribe:"Subscribe",YouHaveAnAccount:"You have an account?",Belgium:"Belgium",France:"France",Spain:"Spain",introNewAgency:"Congratulations, you have created your private detective agency!",introJoinAgency:"Congratulations, you have joined a private detective agency!",CompleteYourProfile:"Complete your profile",YouCanJoinAnotherAgencyLater:"You can join another agency later",EnterANameForYourAgency:"Enter a name for your agency",successfulQuests:"{nb} quests successful",createdQuests:"{nb} quests created",LearnMore:"Learn more",introBlock1:"Your objective is to win the more <strong>reputation points</strong> for you and your agency",introBlock2:"To win points, you need to <strong>solve quests</strong> that are on the map",introBlock3:"You can also <strong>create your own quests</strong>, you will then win points every time someone play your quest",introBlock4:"The more points you win for your agency, the more chance it will have to <strong>conquer a territory</strong>",ChooseMyFirstQuest:"Choose my first quest",emailExample:"your.name@mailbox.com",YouAreMemberOfTheAgency:"You are member of this agency",ButYouCanChangeIt:"But you can change it",CreateAnAgency:"Create an agency",JoinAnAgency:"Join an agency",CreateAndJoinThisAgency:"Create and join this agency",MembersNearby:"Members nearby",PleaseEnterYourAgencyName:"Please enter your agency name",Challenges:"Challenges",News:"News",Members:"Members",ChallengesForMyTeam:"Challenges for my team",Share:"Share",Won:"Won!",Competitor:"Competitor",InviteAFriend:"Invite a friend",JoinThisAgency:"Join this agency",RequestSent:"Request sent",NameWantToJoinYourAgency:"{name} want to join your agency",Accept:"Accept",Reject:"Reject",MembersOfMyAgency:"Member(s) of my agency",MembersOfTheAgency:"Member(s) of the agency",PleaseEnterTheEmailAddressOfThePersonYouWantToInvite:"Please enter the email of the person you want to invite",Email:"Email",YourInvitationHasBeenSent:"Your invitation has been sent",YourComment:"Your comment",NewsOfYourAgency:"News of your agency",NewsOfTheAgency:"News of the agency",Like:"Like",NoNewsForThisTeam:"No news for this team",PleaseEnterAComment:"Please enter a comment",YourCommentIsAdded:"Your comment is added",CongratulationThisCaseIsClassified:"Congratulations! This case is classified",YouAlreadyDidThisQuest:"You already completed this quest",YouCanResolveItAgain:"You can play it again, but this will not give you points again",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play this quest",Language:"Language",StartingPoint:"Location",SolveAQuest:"Play a quest",DisplayAHint:"Hint (-5 points)",CreateAQuestAndWinPoints:"Create a quest",BackToTheListOfAllMyQuest:"Back to all my quests list",YourQuest:"Your quest",ChangeStepType:"Change the type of the step",BackToStepChoice:"Back to the step choice",BackToThisQuestStepslist:"Back to the steps of this quest",BackToTheStepsList:"Back to the steps list",YouWonNbPoints:"You won {nb}",Map:"Map",NewQuestCreated:"New quest created",ObjectToFind:"Object to find",ObjectWon:"Object won",nbQuestWonThisMonth:"You won {nb} quest(s) this month",ScoreThisMonth:"Score this month: {score} points",minutes:"minute(s)",QuestParameters:"Describe your quest",Duration:"Duration",BackToPreviousStep:"Back to previous step",NoQuestPlayedThisMonth:"No quest played this month by this team",Search:"Search",NoTeamsNearFromYou:"No team nearby",NoLocalizedQuests:"Not localized quests",DetailOfYourRankingThisMonth:"Detail by city",RankingThisMonth:"Ranking of the month"},language:{en:"English",fr:"French"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",pleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error occurs, please try again later!",YourAccountIsBlocked:"Your account is blocked. Please try again one hour later",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe6digitsLength:"Your password must be 6 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"If you use Graaly for the first time, we advise to start with the discovery quest",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful quests",QuestsCreated:"Created quests",CreateANewQuest:"Create a new quest",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No quest created",NoQuestPlayed:"No quet played",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",BackToMap:"Back to the map",MyProfile:"My profile",Friends:"Friends",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to do ?",ReachScoreOf:"Reach a score of {score} to unlock new quests",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",Play:"Play",PleaseActivateGeolocation:"Please turn on location on your mobile device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",YouAlreadyDidThisQuest:"You already completed this quest",YouCanResolveItAgain:"You can play it again, but this will not give you points again",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play this quest",Language:"Language",StartingPoint:"Location",QuestIsFarFromUser:"You are far from this quest",QuestIsFarFromUserDesc:"By solving this quest afar, you will miss many clues and so many points",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",BackToTheMap:"Back to the map",WelcomeInGraalyWorld:"Welcome in the Graaly world!",DiscoverPlacesAroundYou:"Play and discover places around you!",WinPointsAndUnlockQuests:"Win points and unlock quests!",CreateYourQuestsAndWinMoney:"Build your own quests and earn money!",CenterOnYourPosition:"Center map on your location",BuildAQuestHere:"Build a quest",BestQuests:"Best quests",OnlyEasy:"Easiest quests",SearchForAQuest:"Search for a quest",DisplayAllQuests:"Display all quests",km:"km",NoQuestForThisSearch:"No quest for this search",WhyDontYouCreateAQuest:"Why don't you create a quest?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this quest",YouAlreadyStartThisQuest:"You have already played this quest, do you want to continue with the step you stopped?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",CreateYourQuest:"Create your quest!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>Graaly helps you create funny quest to challenge players and win points!</p><p>By pressing the Start button, you accept those rules, described in the XXXXX:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the quest, do not ask players to touch, move, or degrade things.</p><p>The story of your quest must not undermine living or dead people</li><li>Your quest must concern a location where no quest has already be done, except if the content is enough different.</li><li>Your quest must have more than 6 steps and less than 50 steps</li><li>Our moderation team will check if your quest respects these rules, and if the quality level is enough. If not, you will be asked to improve your quest, or your quest will be rejected</li></ul></p>",HowToWinMoney:"How to win money?",HowToWinMoneyExplaination:"Graaly share with you 50% of the revenues of the ads displayed when a use play one of your quest. The revenues are payed when they reach $100.",NewQuest:"New quest",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Location of the starting of the quest",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your quest is published",YourQuestIsUnpublished:"Your quest is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your quest",PublishYourQuest:"Publish your quest",UnpublishYourQuest:"Unpublish your quest",SelectTheLanguageAndClickOnNextButton:"Select the language to define settings and steps in the next tabs",SelectedLanguage:"Type quest in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Quest",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of the thing to find",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture width and height must be the same",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",SaveThisStep:"Save this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Try again (-5 points)",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found the place",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Add the pages of your quest, and order them",ActivateTheLanguageVisible:"Activate the languages playable for your quest",LanguagesPublished:"Languages published",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave quest",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you 5 points. Are you sure to use it?",YouWin:"You win",WhatCanYouDoWithThesePoints:"What can you do with these points?",RateThisQuest:"Rate this quest",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this quest in the past",ResolveOtherQuestsToWinPoints:"Play new quests to win points",ChallengeYourFriends:"Challenge your friends!",YouAreQuestOwnerDesc:"You are the owner of this quest, you will not win any point",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",GeneralWarning:"For your safety, do not play Graaly driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",YourLanguage:"Your language",NoFriend:"You have not friend yet",YourRanking:"Your ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy coins to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this quest?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OnceGeolocationEnabled:"Once location enabled,",PressHere:"press here",Map:"Quests map",AddressToFind:"Address of the location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"Your global rank",YourCityRanking:"Your rank in your city",PlayAllQuestsInACityToWin:"Play all the quests of a city to conquest the territory",NoRankingYet:"Your rank is not yet computed, please wait for tomorrow",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your quest will be validated by our game master. This can take days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email to know why",QuestPublicationRejected:"Your quest has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"Touch the object",ObjectSize:"Object size",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Coins",coins:"coins",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the quest",ClickOnArrowToMoveToNextStep:"Touch the arrow to move to next step",YourQuestMustContainAtLeast6Steps:"Your quest is too short, you must create at least 6 steps",YourQuestMustContainLessThan50Steps:"Your quest is too long, you must create less than 50 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Charge your phone before starting quest",WarningNoNetwork:"No network...",CouldNotDisplayObject:"The object to find cannot be displayed. To succeed finding the object, try to get very close using the distance indicator.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this quest",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this quest? It will be remove permanently!"}},fr:{challenge:{challengePlay10Quests:"Résoudre 10 enquêtes",challengePlay30Quests:"Résoudre 30 enquêtes",challengePlay100Quests:"Résoudre 100 enquêtes",challengePlay1000Quests:"Résoudre 1000 enquêtes",challengeBuild1Quests:"Créer 1 enquête",challengeBuild5Quests:"Créer 5 enquêtes",challengeBuild10Quests:"Créer 10 enquêtes",challengeBuild40Quests:"Créer 40 enquêtes",challengeHave2members:"Inviter 2 membres dans votre agence",challengeHave10members:"Inviter 10 membres dans votre agence",challengeHave20members:"Inviter 20 membres dans votre agence"},color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc"},news:{newQuestWon:"A réussi l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre enquête <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos enquêtes durant 3 jours",rewardx2:"Pièces x 2",rewardx2Desc:"Les pièces que vous gagnez sont doublées durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"100 pièces","100coinsDesc":"Vous gagnez 100 pièces bonus","10coins":"10 pièces","10coinsDesc":"Vous gagnez 10 pièces bonus"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Trouver un lieu",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Trouver un code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Trouver un code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",PhotographAnObject:"Photographier un objet",PhotographAnObjectDesc:"Retrouver et photographier un objet",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser objet",UseAnItemDesc:"Utiliser un objet de l'inventaire",LocateItemAR:"Localiser un objet en réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité."},messages:{SignIn:"Connectez-vous",toStartTheAdventure:"pour commencer l'aventure !",CreateAnAccount:"Créer un compte",YourHaveJoinedTheNewTeam:"Vous avez maintenant rejoint la nouvelle équipe",QuestsMap:"Carte des enquêtes",MyAgency:"Mon agence",MyProfile:"Mon profil",CreateAQuest:"Créer une enquête",Connection:"Connexion",SignUp:"Créer un compte",Subscribe:"Inscrivez-vous",YouHaveAnAccount:"Déjà inscrit ?",Belgium:"Belgique",France:"France",Spain:"Espagne",introNewAgency:"Bravo, vous venez de créer votre agence de détectives privés !",introJoinAgency:"Bravo, vous venez de rejoindre une agence de détectives privés !",CompleteYourProfile:"Complétez votre profil",YouCanJoinAnotherAgencyLater:"Vous pourrez rejoindre une autre agence ultérieurement",EnterANameForYourAgency:"Tapez un nom de votre agence",successfulQuests:"{nb} enquêtes résolues",createdQuests:"{nb} enquêtes créées",LearnMore:"En savoir +",introBlock1:"Votre objectif est de gagner le plus de <strong>points de réputation</strong> possible pour vous et votre agence",introBlock2:"Pour gagner des points, il faut <strong>réussir des enquêtes</strong> présentes sur la carte",introBlock3:"Vous pouvez aussi <strong>créer vos propre enquêtes</strong>, vous gagnerez des points à chaque fois qu'un joueur la réussi",introBlock4:"Plus vous ferez gagner des points à votre agence, plus elle aura de chances de <strong>conquérir des territoires</strong>",ChooseMyFirstQuest:"Choisir ma première enquête",YouAreMemberOfTheAgency:"Vous êtes actuellement membre de l'agence",ButYouCanChangeIt:"Mais vous pouvez en changer",CreateAnAgency:"Créer une agence",JoinAnAgency:"Rejoindre une agence",CreateAndJoinThisAgency:"Créer et rejoindre cette agence",MembersNearby:"Membre à proximité",PleaseEnterYourAgencyName:"Veuillez entrer le nom de votre agence",TechnicalIssue:"Problème technique, veuillez nous excuser et ré-essayer plus tard",Challenges:"Défis",News:"News",Members:"Membres",ChallengesForMyTeam:"Défis à relever par mon équipe",Share:"Partager",Won:"Gagné !",Competitor:"Agence concurrente",InviteAFriend:"Inviter un ami",JoinThisAgency:"Rejoindre cette agence",RequestSent:"Demande envoyée",NameWantToJoinYourAgency:"{name} souhaite rejoindre votre agence",Accept:"Accepter",Reject:"Refuser",MembersOfMyAgency:"Membre(s) de mon agence",MembersOfTheAgency:"Membre(s) de l'agence",PleaseEnterTheEmailAddressOfThePersonYouWantToInvite:"Veuillez entrer l'adresse email de la personne à inviter",Email:"Email",YourInvitationHasBeenSent:"Votre invitation est envoyée",YourComment:"Votre commentaire",NewsOfYourAgency:"Actualités de mon agence",NewsOfTheAgency:"Actualités de mon agence",NoNewsForThisTeam:"Aucune actualité pour cette agence",PleaseEnterAComment:"Veuillez entrer un commentaire",YourCommentIsAdded:"Votre commentaire est ajouté",CongratulationThisCaseIsClassified:"Bravo ! Cette affaire est maintenant classée",YouWin:"Vous gagnez",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",RateThisQuest:"Notez cette enquête",ShareYourSuccess:"Partagez votre réussite !",SolveAQuest:"Résoudre une enquête",DisplayAHint:"Indice (-5 points)",CreateAQuestAndWinPoints:"Créer une enquête",BackToTheListOfAllMyQuest:"Retour à la liste de toutes mes enquêtes",YourQuest:"Votre enquête",ChangeStepType:"Changer de type d'étape",BackToStepChoice:"Retour au choix d'étape",BackToThisQuestStepslist:"Retour aux étapes de cette enquête",BackToTheStepsList:"Retour à la liste des étapes",YouWonNbPoints:"Vous avez gagné {nb}",test:"test",Map:"Carte",NewQuestCreated:"Nouvelle enquête créée",ObjectToFind:"Objet à trouver",ObjectWon:"Objet gagné",nbQuestWonThisMonth:"Vous avez résolu {nb} enquête(s) ce mois",ScoreThisMonth:"Score du mois : {score} points",QuestParameters:"Décrivez votre enquête",Duration:"Durée",BackToPreviousStep:"Revenir à l'étape précédente",NoQuestPlayedThisMonth:"Aucune enquête résolue ce mois par cette équipe",Search:"Recherche",NoTeamsNearFromYou:"Aucune équipe à proximité",NoLocalizedQuests:"Enquêtes non localisées",DetailOfYourRankingThisMonth:"Détail par ville",RankingThisMonth:"Classement du mois"},language:{en:"Anglais",fr:"Français"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Indentifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance !",HowWeUseYourData:"Utilisation de vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez contacter le support",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe6digitsLength:"Votre mot de passe doit faire 6 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Si vous utilisez Graaly pour la première fois, nous vous conseillons de commencer par l'énigme de découverte",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Enquêtes résolues",QuestsCreated:"Enquêtes créées",CreateANewQuest:"Créer une nouvelle enquête",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucune enquête créée",NoQuestPlayed:"Aucune enquête résolue",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",Friends:"Amis",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez une score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",Play:"Enquêter",PleaseActivateGeolocation:"Veuillez activer la localisation sur votre appareil mobile",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d`Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l`application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d`IOS.",YouAlreadyDidThisQuest:"Vous avez déjà réussi cette enquête",YouCanResolveItAgain:"Vous pouvez la résoudre à nouveau, mais elle ne vous rapportera aucun point",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Résoudre l'enquête",Language:"Langue",StartingPoint:"Lieu de départ",QuestIsFarFromUser:"Vous n'êtes pas sur le lieu de l'enquête",QuestIsFarFromUserDesc:"En résolvant cette enquête à distance, vous allez manquer plein d'indices et donc de points",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",BackToTheMap:"Retour à la carte",WelcomeInGraalyWorld:"Bienvenue dans le monde de Graaly !",DiscoverPlacesAroundYou:"Découvrez les lieux autour de vous en jouant !",WinPointsAndUnlockQuests:"Gagnez des points et débloquez des enquêtes !",CreateYourQuestsAndWinMoney:"Créez vos enquêtes et gagnez de l'argent !",CenterOnYourPosition:"Centrer sur votre position",BuildAQuestHere:"Créer une enquête",BestQuests:"Les plus populaires",OnlyEasy:"Les plus faciles",SearchForAQuest:"Chercher des enquêtes",DisplayAllQuests:"Afficher toutes les enquêtes",km:"km",NoQuestForThisSearch:"Aucune enquête ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer cette enquête ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer cette enquête",YouAlreadyStartThisQuest:"Vous avez déjà commencé cette enquête, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",CreateYourQuest:"Créez votre enquête !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>Graaly vous permet de créer très simplement, et pas à pas, des enquêtes ludiques pour les autres joueurs.</p><p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre enquête ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre enquête ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre enquête ne doit pas concerner un lieu pour lequel une enquête existe déjà, sauf si le thême est suffisamment différent</li><li>Votre enquête doit faire plus de 6 étapes et moins de 50</li><li>Notre équipe de modérateurs validera si votre enquête respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre enquête, ou elle sera refusée</li></ul></p>",HowToWinMoney:"Comment gagner de l'argent",HowToWinMoneyExplaination:"Graaly partage avec vous 50% des revenus des publicités affichées quand un utilisateur joue à votre enquête. Les revenus sont payés à partir du moment où ils atteignent 100 euros.",NewQuest:"Nouvelle enquête",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ de l'enquête",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre enquête est publiée",YourQuestIsUnpublished:"Votre enquête est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre enquête",PublishYourQuest:"Publier votre enquête",UnpublishYourQuest:"Dépublier votre enquête",SelectTheLanguageAndClickOnNextButton:"Selectionner la langue et définissez les paramètres et étapes dans les onglets",SelectedLanguage:"Saisir l'enquête en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Vérifiez SVP le formulaire et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image doit avoir la même largeur que hauteur",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez nous excuser et ré-essayer plus tard",SaveThisStep:"Enregistrer cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Essaye à nouveau (-5 points)",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé le lieu",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Ajoutez les pages de votre énigme, et placez-les dans l'ordre",ActivateTheLanguageVisible:"Activez les langues jouables pour votre enquête",LanguagesPublished:"Langues publiées",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter l'enquête",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"L'indice va vous coûter 5 points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous gagnez",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",RateThisQuest:"Notez cette enquête",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de cette enquête",ResolveOtherQuestsToWinPoints:"Résolvez de nouvelles enquêtes pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",YouAreQuestOwnerDesc:"Vous êtes le créateur de cette enquête, elle ne vous rapportera aucun point",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",GeneralWarning:"Pour votre sécurité, ne jouez pas à Graaly en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Votre classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter des pièces pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté cette enquête",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OnceGeolocationEnabled:"Une fois la localisation activée,",PressHere:"appuyez ici",Map:"Carte",AddressToFind:"Adresse du lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Votre classement mondial",YourCityRanking:"Votre classement dans votre ville",PlayAllQuestsInACityToWin:"Jouez à toutes les enquêtes d'une ville pour conquérir le territoire",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre enquête va être validée par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejectée. Cliquez ici pour savoir pourquoi",QuestPublicationRejected:"Votre enquête n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Touchez l'objet",ObjectSize:"Taille de l'objet",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Pièces",coins:"pièces",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ de l'enquête",ClickOnArrowToMoveToNextStep:"Touchez la flèche pour passer à l'étape suivante",YourQuestMustContainAtLeast6Steps:"Votre enquête est trop courte, vous devez créer au moins 6 étapes",YourQuestMustContainLessThan50Steps:"Votre enquête est trop longue, vous devez créer moins de 50 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile",WarningNoNetwork:"Aucun réseau ...",CouldNotDisplayObject:"L'objet à trouver ne peut pas être affiché. Pour réussir, essayez de vous approcher le plus possible à l'aide de l'indicateur de distance.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer cette enquête",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer cette enquête ? Elle sera définivement supprimée."}}}},NYss:function(e,t,s){},O6Zk:function(e){e.exports={backpack:{name:{fr:"Sac à dos",en:"Backpack"},author:"Alex “SAFFY” Safayan",url:"https://poly.google.com/view/5UQVd1Agl11",scale:.4,rotation:{y:-45}},book:{name:{fr:"Livre",en:"Book"},author:"Anastasiia Ku",url:"https://poly.google.com/view/0-_UGETLPsX",rotation:{x:-15,y:90,z:55}},candelabra:{name:{fr:"Candélabre",en:"Candelabra"},author:"BitGem",url:"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749",scale:.005},chest:{name:{fr:"Coffre",en:"Chest"},author:"Alex “SAFFY” Safayan",url:"https://poly.google.com/view/3SGvQIwe214",rotation:{y:225},scale:.2},ghost:{name:{fr:"Fantôme",en:"Ghost"},url:"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c",license:"Sketchfab standard, see https://sketchfab.com/licenses",scale:100,translation:{z:1}},griffin:{name:{fr:"Griffon",en:"Griffin"},author:"VitSh",url:"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9",rotation:{y:45},scale:.3},gun:{name:{fr:"Pistolet",en:"Gun"},author:"legoingr",url:"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e",rotation:{y:-135,z:90},scale:.02},key:{name:{fr:"Clé",en:"Key"},author:"Jerad Bitner",url:"https://poly.google.com/view/dR-kItm5ihP",rotation:{x:180,z:45},scale:.05},knife:{name:{fr:"Couteau",en:"Knife"},author:"vepr",url:"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184",scale:4,rotation:{y:225,z:90}},lamp:{name:{fr:"Lampe à pétrole",en:"Kerosene lamp"},author:"Bruno Oliveira",url:"https://poly.google.com/view/3wJ6loGTYJj",rotation:{y:135}},"phone-booth":{name:{fr:"Cabine téléphonique",en:"Phone booth"},author:"Mountrise",url:"https://sketchfab.com/models/94fca8c5ac9f4974bd4a02e8f571f493",scale:.2},"phone-rotary":{name:{fr:"Téléphone à cadran",en:"Phone (rotary)"},author:"Zell-Wu",url:"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce",scale:.01}}},OGu7:function(e,t,s){"use strict";var a=s("+fOQ"),r=s.n(a);r.a},RnhZ:function(e,t,s){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=n(e),a=s(t);return a}function n(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id="RnhZ"},TBgu:function(e){e.exports=[{label:"Afghanistan",value:"AFG"},{label:"Afrique du sud",value:"ZAF"},{label:"Albanie",value:"ALB"},{label:"Algerie",value:"DZA"},{label:"Allemagne",value:"DEU"},{label:"Andorre",value:"AND"},{label:"Angola",value:"AGO"},{label:"Anguilla",value:"AIA"},{label:"Antarctique",value:"ATA"},{label:"Antigua et Barbuda",value:"ATG"},{label:"Arabie Saoudite",value:"SAU"},{label:"Argentine",value:"ARG"},{label:"Armenie",value:"ARM"},{label:"Aruba",value:"ABW"},{label:"Australie",value:"AUS"},{label:"Autriche",value:"AUT"},{label:"Azerbaïdjan",value:"AZE"},{label:"Bahamas",value:"BHS"},{label:"Bahreïn",value:"BHR"},{label:"Barbades",value:"BRB"},{label:"Belgique",value:"BEL"},{label:"Belize",value:"BLZ"},{label:"Bengladesh",value:"BGD"},{label:"Bermudes",value:"BMU"},{label:"Bhoutan",value:"BTN"},{label:"Bolivie",value:"BOL"},{label:"Bonaire, Saint-Eustache et Saba",value:"BES"},{label:"Bosnie Herzégovine",value:"BIH"},{label:"Botswana",value:"BWA"},{label:"Brunei Darussalam",value:"BRN"},{label:"Brésil",value:"BRA"},{label:"Bulgarie",value:"BGR"},{label:"Burkina Faso",value:"BFA"},{label:"Burundi",value:"BDI"},{label:"Bélarus",value:"BLR"},{label:"Bénin",value:"BEN"},{label:"Cabo Verde",value:"CPV"},{label:"Cambodge",value:"KHM"},{label:"Cameroun",value:"CMR"},{label:"Canada",value:"CAN"},{label:"Chad",value:"TCD"},{label:"Chili",value:"CHL"},{label:"Chine",value:"CHN"},{label:"Chypre",value:"CYP"},{label:"Colombie",value:"COL"},{label:"Comores",value:"COM"},{label:"Congo (République démocratique)",value:"COD"},{label:"Congo",value:"COG"},{label:"Costa Rica",value:"CRI"},{label:"Croatie",value:"HRV"},{label:"Cuba",value:"CUB"},{label:"Curacao",value:"CUW"},{label:"Côte d'Ivoire",value:"CIV"},{label:"Danemark",value:"DNK"},{label:"Djibouti",value:"DJI"},{label:"Dominique",value:"DMA"},{label:"Egypte",value:"EGY"},{label:"Emirats Arabes Unis",value:"ARE"},{label:"Equateur",value:"ECU"},{label:"Erythrée",value:"ERI"},{label:"Espagne",value:"ESP"},{label:"Estonie",value:"EST"},{label:"Ethiopie",value:"ETH"},{label:"Fidji",value:"FJI"},{label:"Finlande",value:"FIN"},{label:"France",value:"FRA"},{label:"Fédération Russe",value:"RUS"},{label:"Gabon",value:"GAB"},{label:"Gambie",value:"GMB"},{label:"Georgie",value:"GEO"},{label:"Ghana",value:"GHA"},{label:"Gibraltar",value:"GIB"},{label:"Grenade",value:"GRD"},{label:"Groenland",value:"GRL"},{label:"Grèce",value:"GRC"},{label:"Guadeloupe",value:"GLP"},{label:"Guam",value:"GUM"},{label:"Guatemala",value:"GTM"},{label:"Guernsey",value:"GGY"},{label:"Guinée Française",value:"GUF"},{label:"Guinée Équatoriale",value:"GNQ"},{label:"Guinée",value:"GIN"},{label:"Guinée-Bissau",value:"GNB"},{label:"Guyane",value:"GUY"},{label:"Géorgie du Sud et les îles Sandwich du Sud",value:"SGS"},{label:"Haiti",value:"HTI"},{label:"Honduras",value:"HND"},{label:"Hong Kong",value:"HKG"},{label:"Hongrie",value:"HUN"},{label:"Ile Bouvet",value:"BVT"},{label:"Ile Heard et îles McDonald",value:"HMD"},{label:"Ile de Man",value:"IMN"},{label:"Iles Aland",value:"ALA"},{label:"Iles Caïmans",value:"CYM"},{label:"Iles Cocos (Keeling)",value:"CCK"},{label:"Iles Falkland (Malvinas)",value:"FLK"},{label:"Iles Féroé",value:"FRO"},{label:"Iles Mariannes du Nord",value:"MNP"},{label:"Iles Marshall",value:"MHL"},{label:"Iles Turques-et-Caïques",value:"TCA"},{label:"Iles Vierges (États-Unis)",value:"VIR"},{label:"Iles Vierges britanniques",value:"VGB"},{label:"Iles mineures éloignées des États-Unis",value:"UMI"},{label:"Indie",value:"IND"},{label:"Indonesie",value:"IDN"},{label:"Irak",value:"IRQ"},{label:"Iran",value:"IRN"},{label:"Irlande",value:"IRL"},{label:"Islande",value:"ISL"},{label:"Israel",value:"ISR"},{label:"Italie",value:"ITA"},{label:"Jamaïque",value:"JAM"},{label:"Japon",value:"JPN"},{label:"Jersey",value:"JEY"},{label:"Jordanie",value:"JOR"},{label:"Kazakhstan",value:"KAZ"},{label:"Kenya",value:"KEN"},{label:"Kirghizistan",value:"KGZ"},{label:"Kiribati",value:"KIR"},{label:"Koweit",value:"KWT"},{label:"L'ile de Norfolk",value:"NFK"},{label:"L'île de noël",value:"CXR"},{label:"Laos",value:"LAO"},{label:"Latvie",value:"LVA"},{label:"Le Salvador",value:"SLV"},{label:"Les Îles Cook",value:"COK"},{label:"Les îles Salomon",value:"SLB"},{label:"Lesotho",value:"LSO"},{label:"Liban",value:"LBN"},{label:"Liberia",value:"LBR"},{label:"Libye",value:"LBY"},{label:"Liechtenstein",value:"LIE"},{label:"Lituanie",value:"LTU"},{label:"Luxembourg",value:"LUX"},{label:"Macao",value:"MAC"},{label:"Macedonie",value:"MKD"},{label:"Madagascar",value:"MDG"},{label:"Malawi",value:"MWI"},{label:"Malaysie",value:"MYS"},{label:"Maldives",value:"MDV"},{label:"Mali",value:"MLI"},{label:"Malte",value:"MLT"},{label:"Maroc",value:"MAR"},{label:"Martinique",value:"MTQ"},{label:"Maurice",value:"MUS"},{label:"Mauritanie",value:"MRT"},{label:"Mayotte",value:"MYT"},{label:"Mexique",value:"MEX"},{label:"Micronésie",value:"FSM"},{label:"Moldavie",value:"MDA"},{label:"Monaco",value:"MCO"},{label:"Mongolie",value:"MNG"},{label:"Montenegro",value:"MNE"},{label:"Montserrat",value:"MSR"},{label:"Mozambique",value:"MOZ"},{label:"Myanmar",value:"MMR"},{label:"Namibie",value:"NAM"},{label:"Nauru",value:"NRU"},{label:"Nicaragua",value:"NIC"},{label:"Niger",value:"NER"},{label:"Nigeria",value:"NGA"},{label:"Nioué",value:"NIU"},{label:"Norvège",value:"NOR"},{label:"Nouvelle Caledonie",value:"NCL"},{label:"Nouvelle Zélande",value:"NZL"},{label:"Népal",value:"NPL"},{label:"Oman",value:"OMN"},{label:"Ouganda",value:"UGA"},{label:"Ouzbékistan",value:"UZB"},{label:"Pakistan",value:"PAK"},{label:"Palau",value:"PLW"},{label:"Palestine (état de)",value:"PSE"},{label:"Panama",value:"PAN"},{label:"Papouasie Nouvelle Guinée",value:"PNG"},{label:"Paraguay",value:"PRY"},{label:"Pays-Bas",value:"NLD"},{label:"Philippines",value:"PHL"},{label:"Pitcairn",value:"PCN"},{label:"Pologne",value:"POL"},{label:"Polynesie Française",value:"PYF"},{label:"Portugal",value:"PRT"},{label:"Puerto Rico",value:"PRI"},{label:"Pérou",value:"PER"},{label:"Qatar",value:"QAT"},{label:"Romanie",value:"ROU"},{label:"Royaume-Uni de Grande-Bretagne et d'Irlande du Nord",value:"GBR"},{label:"Rwanda",value:"RWA"},{label:"République Dominicaine",value:"DOM"},{label:"République Tchèque",value:"CZE"},{label:"République arabe syrienne",value:"SYR"},{label:"République centrafricaine",value:"CAF"},{label:"République de Corée",value:"KOR"},{label:"République populaire démocratique de Corée",value:"PRK"},{label:"Réunion",value:"REU"},{label:"Sahara occidental",value:"ESH"},{label:"Saint Barthélemy",value:"BLM"},{label:"Saint Marin",value:"SMR"},{label:"Saint Martin",value:"MAF"},{label:"Saint Pierre et Miquelon",value:"SPM"},{label:"Saint-Christophe-et-Niévès",value:"KNA"},{label:"Saint-Siège",value:"VAT"},{label:"Saint-Vincent-et-les-Grenadines",value:"VCT"},{label:"Sainte-Hélène, Ascension et Tristan da Cunha",value:"SHN"},{label:"Sainte-Lucie",value:"LCA"},{label:"Samoa américaines",value:"ASM"},{label:"Samoa",value:"WSM"},{label:"Sao Tomé et Principe",value:"STP"},{label:"Serbie",value:"SRB"},{label:"Seychelles",value:"SYC"},{label:"Sierra Leone",value:"SLE"},{label:"Singapour",value:"SGP"},{label:"Sint Maarten",value:"SXM"},{label:"Slovaquie",value:"SVK"},{label:"Slovénie",value:"SVN"},{label:"Somalie",value:"SOM"},{label:"Soudan du sud",value:"SSD"},{label:"Soudan",value:"SDN"},{label:"Sri Lanka",value:"LKA"},{label:"Suisse",value:"CHE"},{label:"Suriname",value:"SUR"},{label:"Suède",value:"SWE"},{label:"Svalbard et Jan Mayen",value:"SJM"},{label:"Swaziland",value:"SWZ"},{label:"Sénégal",value:"SEN"},{label:"Tadjikistan",value:"TJK"},{label:"Taiwan, Province de Chine",value:"TWN"},{label:"Tanzanie, United Republic of",value:"TZA"},{label:"Terres australes françaises",value:"ATF"},{label:"Territoire britannique de l'océan Indien",value:"IOT"},{label:"Thaïlande",value:"THA"},{label:"Timor-Leste",value:"TLS"},{label:"Togo",value:"TGO"},{label:"Tokelau",value:"TKL"},{label:"Tonga",value:"TON"},{label:"Trinité-et-Tobago",value:"TTO"},{label:"Tunisie",value:"TUN"},{label:"Turkménistan",value:"TKM"},{label:"Turquie",value:"TUR"},{label:"Tuvalu",value:"TUV"},{label:"USA",value:"USA"},{label:"Ukraine",value:"UKR"},{label:"Uruguay",value:"URY"},{label:"Vanuatu",value:"VUT"},{label:"Venezuela",value:"VEN"},{label:"VietNam",value:"VNM"},{label:"Wallis et Futuna",value:"WLF"},{label:"Yemen",value:"YEM"},{label:"Zambie",value:"ZMB"},{label:"Zimbabwe",value:"ZWE"}]},TYH3:function(e,t,s){"use strict";var a=s("NYss"),r=s.n(a);r.a},U0of:function(e){e.exports=[{id:1,name:"EasyLongDesc"},{id:2,name:"NormalLongDesc"},{id:3,name:"HardLongDesc"}]},"UJO/":function(e,t,s){},"VH++":function(e){e.exports=[{id:"coins",file:"coins-big.png",thumb:"coins-medium.png",name:{fr:"Pièces",en:"Coins"},author:"Flaticons.com",url:""},{id:"chest",file:"chest-big.png",thumb:"chest-medium.png",name:{fr:"Coffre",en:"Chest"},author:"Flaticons.com",url:""},{id:"goldbag",file:"goldbag-big.png",thumb:"goldbag-medium.png",name:{fr:"Sac d'or",en:"Gold bag"},author:"Flaticons.com",url:""},{id:"rope",file:"rope-big.png",thumb:"rope-medium.png",name:{fr:"Corde",en:"Rope"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/military-11"},{id:"key",file:"key-big.png",thumb:"key-medium.png",name:{fr:"Clé",en:"Key"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/miscellaneous"},{id:"airplane",file:"airplane-big.png",thumb:"airplane-medium.png",name:{fr:"Avion",en:"Airplane"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/miscellaneous"},{id:"backpack",file:"backpack-big.png",thumb:"backpack-medium.png",name:{fr:"Sac à dos",en:"Backpack"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/miscellaneous"},{id:"briefcase",file:"briefcase-big.png",thumb:"briefcase-medium.png",name:{fr:"Valise",en:"Briefcase"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/miscellaneous"},{id:"car",file:"car-big.png",thumb:"car-medium.png",name:{fr:"Voiture",en:"Car"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"clock",file:"clock-big.png",thumb:"clock-medium.png",name:{fr:"Horloge",en:"Clock"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"compass",file:"compass-big.png",thumb:"compass-medium.png",name:{fr:"Boussole",en:"Compass"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"diamond",file:"diamond-big.png",thumb:"diamond-medium.png",name:{fr:"Diamand",en:"Diamond"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"eyeglasses",file:"eyeglasses-big.png",thumb:"eyeglasses-medium.png",name:{fr:"Lunettes",en:"Glasses"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"gift",file:"gift-big.png",thumb:"gift-medium.png",name:{fr:"Cadeau",en:"Gift"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"lifebuoy",file:"help-big.png",thumb:"help-medium.png",name:{fr:"Boué de sauvetage",en:"Life buoy"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"letter",file:"letter-big.png",thumb:"letter-medium.png",name:{fr:"Lettre",en:"Letter"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"map",file:"map-big.png",thumb:"map-medium.png",name:{fr:"Carte",en:"Map"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"medal",file:"medal-big.png",thumb:"medal-medium.png",name:{fr:"Medaille",en:"Medal"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"newspaper",file:"newspaper-big.png",thumb:"newspaper-medium.png",name:{fr:"Journal",en:"Newspaper"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"paintbrush",file:"paintbrush-big.png",thumb:"paintbrush-medium.png",name:{fr:"Pinceau",en:"Paint brush"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"pencil",file:"pencil-big.png",thumb:"pencil-medium.png",name:{fr:"Crayon",en:"Pencil"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"camera",file:"camera-big.png",thumb:"camera-medium.png",name:{fr:"Appareil photo",en:"Camera"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"pictures",file:"pictures-big.png",thumb:"pictures-medium.png",name:{fr:"Photos",en:"Pictures"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"rocket",file:"rocket-big.png",thumb:"rocket-medium.png",name:{fr:"Fusée",en:"Rocket"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"scissors",file:"scissors-big.png",thumb:"scissors-medium.png",name:{fr:"Ciseaux",en:"Scissors"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"search",file:"search-big.png",thumb:"search-medium.png",name:{fr:"Loupe",en:"Magnifier"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"bag",file:"bag-big.png",thumb:"bag-medium.png",name:{fr:"Sac",en:"Bag"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"smartphone",file:"smartphone-big.png",thumb:"smartphone-medium.png",name:{fr:"Téléphone",en:"Smartphone"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"swissknife",file:"swissknife-big.png",thumb:"swissknife-medium.png",name:{fr:"Couteau",en:"Knife"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"television",file:"television-big.png",thumb:"television-medium.png",name:{fr:"Télévision",en:"Television"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"trash",file:"trash-big.png",thumb:"trash-medium.png",name:{fr:"Poubelle",en:"Trash"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"umbrella",file:"umbrella-big.png",thumb:"umbrella-medium.png",name:{fr:"Parapluie",en:"Umbrella"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"vest",file:"vest-big.png",thumb:"vest-medium.png",name:{fr:"Veste",en:"Vest"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"wallet",file:"wallet-big.png",thumb:"wallet-medium.png",name:{fr:"Portefeuille",en:"Wallet"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"watch",file:"watch-big.png",thumb:"watch-medium.png",name:{fr:"Montre",en:"Watch"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"meal",file:"meal-big.png",thumb:"meal-medium.png",name:{fr:"Repas",en:"Meal"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"fruit",file:"fruit-big.png",thumb:"fruit-medium.png",name:{fr:"Fruit",en:"Fruit"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"chicken",file:"chicken-big.png",thumb:"chicken-medium.png",name:{fr:"Repas",en:"Meal"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/fast-food-43"},{id:"worker",file:"worker-big.png",thumb:"worker-medium.png",name:{fr:"Casque",en:"Helmet"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/basic-flat-icons"},{id:"oldkey",file:"oldkey-big.png",thumb:"oldkey-medium.png",name:{fr:"Vielle clé",en:"Old key"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/real-assets-3"},{id:"hammer",file:"hammer-big.png",thumb:"hammer-medium.png",name:{fr:"Marteau",en:"Hammer"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/real-assets-3"},{id:"tools",file:"tools-big.png",thumb:"tools-medium.png",name:{fr:"Outils",en:"Tools"},author:"Flaticons.com",url:"https://www.flaticon.com/packs/real-assets-3"}]},ZL7j:function(e,t,s){"use strict";var a=s("usnz"),r=s.n(a);r.a},ZMtm:function(e,t,s){"use strict";var a=s("UJO/"),r=s.n(a);r.a},bu9U:function(e,t,s){"use strict";var a=s("4wco"),r=s.n(a);r.a},fm0S:function(e,t,s){},iw2i:function(e,t,s){"use strict";var a=s("H4RK"),r=s.n(a);r.a},mhDg:function(e,t,s){"use strict";var a=s("Ls4Y"),r=s.n(a);r.a},usnz:function(e,t,s){},utiI:function(e,t,s){},vjzl:function(e,t,s){"use strict";var a=s("utiI"),r=s.n(a);r.a},x9yo:function(e,t,s){},z4Pu:function(e){e.exports=[{label:"Afghanistan",value:"AFG"},{label:"Åland Islands",value:"ALA"},{label:"Albania",value:"ALB"},{label:"Algeria",value:"DZA"},{label:"American Samoa",value:"ASM"},{label:"Andorra",value:"AND"},{label:"Angola",value:"AGO"},{label:"Anguilla",value:"AIA"},{label:"Antarctica",value:"ATA"},{label:"Antigua and Barbuda",value:"ATG"},{label:"Argentina",value:"ARG"},{label:"Armenia",value:"ARM"},{label:"Aruba",value:"ABW"},{label:"Australia",value:"AUS"},{label:"Austria",value:"AUT"},{label:"Azerbaijan",value:"AZE"},{label:"Bahamas",value:"BHS"},{label:"Bahrain",value:"BHR"},{label:"Bangladesh",value:"BGD"},{label:"Barbados",value:"BRB"},{label:"Belarus",value:"BLR"},{label:"Belgium",value:"BEL"},{label:"Belize",value:"BLZ"},{label:"Benin",value:"BEN"},{label:"Bermuda",value:"BMU"},{label:"Bhutan",value:"BTN"},{label:"Bolivia (Plurinational State of)",value:"BOL"},{label:"Bonaire, Sint Eustatius and Saba",value:"BES"},{label:"Bosnia and Herzegovina",value:"BIH"},{label:"Botswana",value:"BWA"},{label:"Bouvet Island",value:"BVT"},{label:"Brazil",value:"BRA"},{label:"British Indian Ocean Territory",value:"IOT"},{label:"Brunei Darussalam",value:"BRN"},{label:"Bulgaria",value:"BGR"},{label:"Burkina Faso",value:"BFA"},{label:"Burundi",value:"BDI"},{label:"Cambodia",value:"KHM"},{label:"Cameroon",value:"CMR"},{label:"Canada",value:"CAN"},{label:"Cabo Verde",value:"CPV"},{label:"Cayman Islands",value:"CYM"},{label:"Central African Republic",value:"CAF"},{label:"Chad",value:"TCD"},{label:"Chile",value:"CHL"},{label:"China",value:"CHN"},{label:"Christmas Island",value:"CXR"},{label:"Cocos (Keeling) Islands",value:"CCK"},{label:"Colombia",value:"COL"},{label:"Comoros",value:"COM"},{label:"Congo",value:"COG"},{label:"Congo (Democratic Republic of the)",value:"COD"},{label:"Cook Islands",value:"COK"},{label:"Costa Rica",value:"CRI"},{label:"Ivory Coast",value:"CIV"},{label:"Croatia",value:"HRV"},{label:"Cuba",value:"CUB"},{label:"Curaçao",value:"CUW"},{label:"Cyprus",value:"CYP"},{label:"Czech Republic",value:"CZE"},{label:"Denmark",value:"DNK"},{label:"Djibouti",value:"DJI"},{label:"Dominica",value:"DMA"},{label:"Dominican Republic",value:"DOM"},{label:"Ecuador",value:"ECU"},{label:"Egypt",value:"EGY"},{label:"El Salvador",value:"SLV"},{label:"Equatorial Guinea",value:"GNQ"},{label:"Eritrea",value:"ERI"},{label:"Estonia",value:"EST"},{label:"Ethiopia",value:"ETH"},{label:"Falkland Islands (Malvinas)",value:"FLK"},{label:"Faroe Islands",value:"FRO"},{label:"Fiji",value:"FJI"},{label:"Finland",value:"FIN"},{label:"France",value:"FRA"},{label:"French Guiana",value:"GUF"},{label:"French Polynesia",value:"PYF"},{label:"French Southern Territories",value:"ATF"},{label:"Gabon",value:"GAB"},{label:"Gambia",value:"GMB"},{label:"Georgia",value:"GEO"},{label:"Germany",value:"DEU"},{label:"Ghana",value:"GHA"},{label:"Gibraltar",value:"GIB"},{label:"Greece",value:"GRC"},{label:"Greenland",value:"GRL"},{label:"Grenada",value:"GRD"},{label:"Guadeloupe",value:"GLP"},{label:"Guam",value:"GUM"},{label:"Guatemala",value:"GTM"},{label:"Guernsey",value:"GGY"},{label:"Guinea",value:"GIN"},{label:"Guinea-Bissau",value:"GNB"},{label:"Guyana",value:"GUY"},{label:"Haiti",value:"HTI"},{label:"Heard Island and McDonald Islands",value:"HMD"},{label:"Holy See",value:"VAT"},{label:"Honduras",value:"HND"},{label:"Hong Kong",value:"HKG"},{label:"Hungary",value:"HUN"},{label:"Iceland",value:"ISL"},{label:"India",value:"IND"},{label:"Indonesia",value:"IDN"},{label:"Iran (Islamic Republic of)",value:"IRN"},{label:"Iraq",value:"IRQ"},{label:"Ireland",value:"IRL"},{label:"Isle of Man",value:"IMN"},{label:"Israel",value:"ISR"},{label:"Italy",value:"ITA"},{label:"Jamaica",value:"JAM"},{label:"Japan",value:"JPN"},{label:"Jersey",value:"JEY"},{label:"Jordan",value:"JOR"},{label:"Kazakhstan",value:"KAZ"},{label:"Kenya",value:"KEN"},{label:"Kiribati",value:"KIR"},{label:"Korea (Democratic People's Republic of)",value:"PRK"},{label:"Korea (Republic of)",value:"KOR"},{label:"Kuwait",value:"KWT"},{label:"Kyrgyzstan",value:"KGZ"},{label:"Lao People's Democratic Republic",value:"LAO"},{label:"Latvia",value:"LVA"},{label:"Lebanon",value:"LBN"},{label:"Lesotho",value:"LSO"},{label:"Liberia",value:"LBR"},{label:"Libya",value:"LBY"},{label:"Liechtenstein",value:"LIE"},{label:"Lithuania",value:"LTU"},{label:"Luxembourg",value:"LUX"},{label:"Macao",value:"MAC"},{label:"Macedonia (the former Yugoslav Republic of)",value:"MKD"},{label:"Madagascar",value:"MDG"},{label:"Malawi",value:"MWI"},{label:"Malaysia",value:"MYS"},{label:"Maldives",value:"MDV"},{label:"Mali",value:"MLI"},{label:"Malta",value:"MLT"},{label:"Marshall Islands",value:"MHL"},{label:"Martinique",value:"MTQ"},{label:"Mauritania",value:"MRT"},{label:"Mauritius",value:"MUS"},{label:"Mayotte",value:"MYT"},{label:"Mexico",value:"MEX"},{label:"Micronesia (Federated States of)",value:"FSM"},{label:"Moldova (Republic of)",value:"MDA"},{label:"Monaco",value:"MCO"},{label:"Mongolia",value:"MNG"},{label:"Montenegro",value:"MNE"},{label:"Montserrat",value:"MSR"},{label:"Morocco",value:"MAR"},{label:"Mozambique",value:"MOZ"},{label:"Myanmar",value:"MMR"},{label:"Namibia",value:"NAM"},{label:"Nauru",value:"NRU"},{label:"Nepal",value:"NPL"},{label:"Netherlands",value:"NLD"},{label:"New Caledonia",value:"NCL"},{label:"New Zealand",value:"NZL"},{label:"Nicaragua",value:"NIC"},{label:"Niger",value:"NER"},{label:"Nigeria",value:"NGA"},{label:"Niue",value:"NIU"},{label:"Norfolk Island",value:"NFK"},{label:"Northern Mariana Islands",value:"MNP"},{label:"Norway",value:"NOR"},{label:"Oman",value:"OMN"},{label:"Pakistan",value:"PAK"},{label:"Palau",value:"PLW"},{label:"Palestine, State of",value:"PSE"},{label:"Panama",value:"PAN"},{label:"Papua New Guinea",value:"PNG"},{label:"Paraguay",value:"PRY"},{label:"Peru",value:"PER"},{label:"Philippines",value:"PHL"},{label:"Pitcairn",value:"PCN"},{label:"Poland",value:"POL"},{label:"Portugal",value:"PRT"},{label:"Puerto Rico",value:"PRI"},{label:"Qatar",value:"QAT"},{label:"Reunion Island",value:"REU"},{label:"Romania",value:"ROU"},{label:"Russian Federation",value:"RUS"},{label:"Rwanda",value:"RWA"},{label:"Saint Barthelemy",value:"BLM"},{label:"Saint Helena, Ascension and Tristan da Cunha",value:"SHN"},{label:"Saint Kitts and Nevis",value:"KNA"},{label:"Saint Lucia",value:"LCA"},{label:"Saint Martin (French part)",value:"MAF"},{label:"Saint Pierre and Miquelon",value:"SPM"},{label:"Saint Vincent and the Grenadines",value:"VCT"},{label:"Samoa",value:"WSM"},{label:"San Marino",value:"SMR"},{label:"Sao Tome and Principe",value:"STP"},{label:"Saudi Arabia",value:"SAU"},{label:"Senegal",value:"SEN"},{label:"Serbia",value:"SRB"},{label:"Seychelles",value:"SYC"},{label:"Sierra Leone",value:"SLE"},{label:"Singapore",value:"SGP"},{label:"Sint Maarten (Dutch part)",value:"SXM"},{label:"Slovakia",value:"SVK"},{label:"Slovenia",value:"SVN"},{label:"Solomon Islands",value:"SLB"},{label:"Somalia",value:"SOM"},{label:"South Africa",value:"ZAF"},{label:"South Georgia and the South Sandwich Islands",value:"SGS"},{label:"South Sudan",value:"SSD"},{label:"Spain",value:"ESP"},{label:"Sri Lanka",value:"LKA"},{label:"Sudan",value:"SDN"},{label:"Suriname",value:"SUR"},{label:"Svalbard and Jan Mayen",value:"SJM"},{label:"Swaziland",value:"SWZ"},{label:"Sweden",value:"SWE"},{label:"Switzerland",value:"CHE"},{label:"Syrian Arab Republic",value:"SYR"},{label:"Taiwan, Province of China",value:"TWN"},{label:"Tajikistan",value:"TJK"},{label:"Tanzania, United Republic of",value:"TZA"},{label:"Thailand",value:"THA"},{label:"Timor-Leste",value:"TLS"},{label:"Togo",value:"TGO"},{label:"Tokelau",value:"TKL"},{label:"Tonga",value:"TON"},{label:"Trinidad and Tobago",value:"TTO"},{label:"Tunisia",value:"TUN"},{label:"Turkey",value:"TUR"},{label:"Turkmenistan",value:"TKM"},{label:"Turks and Caicos Islands",value:"TCA"},{label:"Tuvalu",value:"TUV"},{label:"Uganda",value:"UGA"},{label:"Ukraine",value:"UKR"},{label:"United Arab Emirates",value:"ARE"},{label:"United Kingdom of Great Britain and Northern Ireland",value:"GBR"},{label:"United States of America",value:"USA"},{label:"United States Minor Outlying Islands",value:"UMI"},{label:"Uruguay",value:"URY"},{label:"Uzbekistan",value:"UZB"},{label:"Vanuatu",value:"VUT"},{label:"Venezuela (Bolivarian Republic of)",value:"VEN"},{label:"Viet Nam",value:"VNM"},{label:"Virgin Islands (British)",value:"VGB"},{label:"Virgin Islands (U.S.)",value:"VIR"},{label:"Wallis and Futuna",value:"WLF"},{label:"Western Sahara",value:"ESH"},{label:"Yemen",value:"YEM"},{label:"Zambia",value:"ZMB"},{label:"Zimbabwe",value:"ZWE"}]}});