(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var l=r[n];0!==i[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={1:0},s=[];function n(e){return o.p+"js/"+({}[e]||e)+"."+{2:"5af11629"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=i[e]=[t,a]}));t.push(r[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=n(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(u);var r=i[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,r[1](c)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;s.push([0,0]),r()})({0:function(e,t,r){e.exports=r("2f39")},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"help","icon":"question","title":"HelpStep","description":"HelpStepDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false,"nbTrials":0,"passOption":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":false},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":90,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-over-flow","icon":"layer-group","title":"ImageOverFlow","description":"ImageOverFlowDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"no","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"no","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"portrait-robot","icon":"user-circle","title":"PortraitRobot","description":"PortraitRobotDesc","showTrick":"no","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":true},{"category":"enigma","code":"binocular","icon":"binoculars","title":"Binocular","description":"BinocularDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"phone-call","icon":"phone-volume","title":"PhoneCall","description":"PhoneCallDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"trigger-event","icon":"bolt","title":"TriggerEvent","description":"TriggerEventDesc","showTrick":"no","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"wait-for-event","icon":"bolt","title":"WaitForEvent","description":"WaitForEventDesc","showTrick":"yes","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true}]')},1:function(e,t){},1530:function(e,t,r){},"165e":function(e,t,r){"use strict";var a=r("93e3"),i=r.n(a);i.a},1686:function(e,t,r){},"17eb":function(e,t,r){"use strict";var a=r("9593"),i=r.n(a);i.a},2:function(e,t){},"22ae":function(e){e.exports=JSON.parse('[{"label":"red","value":"#FF0000"},{"label":"pink","value":"#FFC0CB"},{"label":"purple","value":"#800080"},{"label":"green","value":"#008000"},{"label":"blue","value":"#0000FF"},{"label":"yellow","value":"#FFFF00"},{"label":"orange","value":"#FFA500"},{"label":"black","value":"#000000"},{"label":"white","value":"#FFFFFF"},{"label":"gray","value":"#808080"}]')},"2f04":function(e){e.exports=JSON.parse('[{"code":"keypad","step":"wait-for-event"},{"code":"joystick","step":"wait-for-event"},{"code":"distance","step":"wait-for-event"},{"code":"pot","step":"wait-for-event"},{"code":"escapebox","step":"wait-for-event"},{"code":"button","step":"wait-for-event"},{"code":"lcd","step":"trigger-event"},{"code":"buzzer","step":"trigger-event"},{"code":"chest","step":"trigger-event"},{"code":"relay","step":"trigger-event"}]')},"2f39":function(e,t,r){"use strict";r.r(t);var a=r("deb5"),i=r.n(a),s=(r("a481"),r("96cf"),r("f44b")),n=r.n(s),o=(r("7d6e"),r("e54f"),r("573e"),r("4848"),r("c382"),r("4a8e"),r("58af"),r("b828"),r("7713"),r("3c1c"),r("e046"),r("62f2"),r("7e6d"),r("2b0e")),l=r("b3f7"),c=r("b05d"),u=r("cb32"),d=r("54e1"),p=r("58a8"),f=r("9c40"),m=r("f20b"),h=r("e7a9"),b=r("f09f"),g=r("4b7e"),v=r("a370"),w=r("880c"),k=r("32a7"),y=r("62cd"),_=r("8f8e"),S=r("b047"),x=r("b498"),C=r("52ee"),q=r("24e8"),T=r("9404"),E=r("3b73"),P=r("0016"),A=r("068f"),M=r("ef35"),I=r("27f9"),R=r("66e5"),O=r("0170"),$=r("4074"),F=r("4d5a"),D=r("1c1c"),N=r("9f0a"),L=r("09e3"),j=r("9989"),z=r("639d"),H=r("7cbe"),B=r("6b1d"),U=r("3786"),Q=r("7bbf"),W=r("daf4"),Y=r("ed5e"),V=r("ddd8"),G=r("eb85"),K=r("c1d0"),J=r("2c91"),X=r("0d59"),Z=r("8380"),ee=r("06d5"),te=r("9569"),re=r("7460"),ae=r("429b"),ie=r("823b"),se=r("adad"),ne=r("9564"),oe=r("65c6"),le=r("6ac5"),ce=r("7f67"),ue=r("714f"),de=r("4396"),pe=r("75c3"),fe=r("12c5"),me=r("436b"),he=r("f5084"),be=r("2a19");o["a"].use(c["a"],{config:{cordova:{backButtonExit:!1},loading:{delay:500}},iconSet:l["a"],components:{QAvatar:u["a"],QBanner:d["a"],QBadge:p["a"],QBtn:f["a"],QBtnDropdown:m["a"],QBtnGroup:h["a"],QCard:b["a"],QCardActions:g["a"],QCardSection:v["a"],QCarousel:w["a"],QCarouselControl:k["a"],QCarouselSlide:y["a"],QCheckbox:_["a"],QChip:S["a"],QColor:x["a"],QDate:C["a"],QDialog:q["a"],QDrawer:T["a"],QExpansionItem:E["a"],QIcon:P["a"],QImg:A["a"],QInfiniteScroll:M["a"],QInput:I["a"],QItem:R["a"],QItemLabel:O["a"],QItemSection:$["a"],QLayout:F["a"],QList:D["a"],QOptionGroup:N["a"],QPageContainer:L["a"],QPage:j["a"],QParallax:z["a"],QPopupProxy:H["a"],QLinearProgress:B["a"],QRadio:U["a"],QRange:Q["a"],QRating:W["a"],QScrollObserver:Y["a"],QSelect:V["a"],QSeparator:G["a"],QSlider:K["a"],QSpace:J["a"],QSpinner:X["a"],QSpinnerDots:Z["a"],QSpinnerPuff:ee["a"],QSpinnerRadio:te["a"],QTab:re["a"],QTabs:ae["a"],QTabPanel:ie["a"],QTabPanels:se["a"],QToggle:ne["a"],QToolbar:oe["a"],QToolbarTitle:le["a"]},directives:{ClosePopup:ce["a"],Ripple:ue["a"],Scroll:de["a"],TouchPan:pe["a"],TouchSwipe:fe["a"]},plugins:{Dialog:me["a"],Loading:he["a"],Notify:be["a"]}});var ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},ve=[],we={name:"App"},ke=we,ye=r("2877"),_e=Object(ye["a"])(ke,ge,ve,!1,null,null,null),Se=_e.exports,xe=(r("ac4d"),r("8a81"),r("ac6a"),r("2f62")),Ce=r("0e44"),qe=r("a78e"),Te=(r("551c"),r("06db"),r("bc3a")),Ee=r.n(Te),Pe=r("04ac"),Ae=r.n(Pe),Me="https://api.graaly.com",Ie=Ee.a.create({baseURL:Me,validateStatus:function(e){return!0}});Ie.defaults.timeout=4500,Ae()(Ie,{retries:10,retryCondition:function(e){return e.code&&"ECONNABORTED"===e.code},shouldResetTimeout:!0,retryDelay:function(){return 5e3}}),Ie.interceptors.request.use((function(e){var t=localStorage.getItem("jwt");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var Re=function(){return Ie},Oe={checkEmail:function(e){return Re().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return Re().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,r){return Re().post("login/facebook",{id:e,token:t}).then((function(e){r(!1,e)}))},playAnonymous:function(e){return Re().post("user/create/anonymous/"+e).catch((function(e){return console.log(e.request)}))},logout:function(){return Re().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return Re().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?Re().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):Re().post("account",{}).catch((function(e){return console.log(e.request)}))},createAccount:function(e){return Re().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return Re().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return Re().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return Re().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,r){return Re().post("user/forgottenpassword/code/validate",{email:e,password:t,code:r}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e){return Re().post("user/forgottenpassword/code/generate",{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return Re().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};o["a"].use(xe["a"]);var $e={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[],mediaStreams:[]},Fe={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]},addMediaStream:function(e,t){e.mediaStreams.push(t)},clearMediaStreams:function(e){var t=!0,r=!1,a=void 0;try{for(var i,s=e.mediaStreams[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var n=i.value;n&&n.getTracks&&n.getTracks().forEach((function(e){return e.stop()}))}}catch(o){r=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}e.mediaStreams=[]}},De={login:function(){var e=n()(i.a.mark((function e(t,r){var a,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,a("loginStart"),e.next=4,Oe.login(r.email,r.password);case 4:return s=e.sent,200===s.status&&(a("loginSuccess",s.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),logout:function(){var e=n()(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,Oe.logout();case 3:return a=e.sent,r("logout"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var r=e.commit;return r("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var r=e.commit,a=e.state;if(null===t){var i=a.questSteps.geolocation.drawDirectionInterval;null!==i&&window.clearInterval(i)}r("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var r=e.commit;return r("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var r=e.commit;return r("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var r=e.commit;return r("setErrorMessage",t)},setCurrentRun:function(e,t){var r=e.commit;return r("setCurrentRun",t)},addTimeoutId:function(e,t){var r=e.commit;return r("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var r=e.commit;return r("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")},addMediaStream:function(e,t){var r=e.commit;return r("addMediaStream",t)},clearMediaStreams:function(e){var t=e.commit;return t("clearMediaStreams")}},Ne={},Le=new xe["a"].Store({state:$e,getters:Ne,actions:De,mutations:Fe,plugins:[Object(Ce["a"])({getState:function(e){return qe["getJSON"](e)},setState:function(e,t){qe["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),je=r("8c4f"),ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[r("q-page-container",[r("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),r("div",{attrs:{id:"screen-too-large"}},[r("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},He=[],Be={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"}},methods:{}},Ue=Be,Qe=Object(ye["a"])(Ue,ze,He,!1,null,null,null),We=Qe.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{staticClass:"teaser"},[e.offline.active?e._e():r("mainQuest",{attrs:{quest:e.bestQuest}}),e.offline.active?r("div",{staticClass:"q-pt-lg"},[r("div",{staticClass:"q-pa-md no-internet-connection"},[r("q-icon",{attrs:{name:"cloud_off"}}),r("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():r("div",{staticClass:"q-pa-md"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?r("div",[r("mainQuest",{attrs:{quest:e.questList[0]}}),e.warnings.noNetwork?r("div",{staticClass:"centered bg-warning q-pa-sm"},[r("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n        ")],1):e._e(),r("titleBar",{attrs:{title:{text:e.$t("label.CachedQuests"),type:"key"}}}),r("questsList",{attrs:{format:"small",quests:e.questList}})],1):e._e()]):e._e(),e.warnings.noNetwork?r("div",{staticClass:"centered bg-warning q-pa-sm"},[r("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n      ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?r("div",[!e.warnings.noNetwork&&e.warnings.noServerReponse?r("div",{staticClass:"centered bg-warning q-pa-sm"},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]):e._e(),!e.offline.active&&e.invitationQuests&&e.invitationQuests.length>0?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.Invitations"),type:"key"}}}),r("questsList",{attrs:{format:"small",quests:e.invitationQuests}})],1):e._e(),!e.offline.active&&e.onTopQuests&&e.onTopQuests.length>0?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.OnTopGames"),type:"key"}}}),r("questsList",{attrs:{format:"small",quests:e.onTopQuests}})],1):e._e(),!e.offline.active&&e.extraQuests&&e.extraQuests.items&&e.extraQuests.items.length>0?r("div",[e.extraQuests.title&&e.extraQuests.title[e.$t("label.shortLang")]?r("titleBar",{attrs:{title:{text:e.extraQuests.title[e.$t("label.shortLang")],type:"key"}}}):e._e(),r("questsList",{attrs:{format:"small",quests:e.extraQuests.items}})],1):e._e(),e.isHybrid&&!e.offline.active?r("div",{staticClass:"q-px-md q-pt-lg"},[r("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/scan-button.png)"},on:{click:e.startScanQRCode}},[e._v("\n        "+e._s(e.$t("label.ScanQRCode"))+"\n      ")])]):e._e(),e.offline.active?e._e():r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.AroundYou"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAroundYou}}),!e.nearestQuests||e.nearestQuests.length>0?r("div",[r("questsList",{attrs:{format:"small",quests:e.nearestQuests}})],1):e._e(),e.nearestQuests&&0===e.nearestQuests.length?r("div",[r("div",{staticClass:"centered q-pa-md"},[e._v("\n          "+e._s(e.$t("label.NoQuestAroundYou"))+"\n          "),r("div",[r("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])])])]):e._e()],1),e.offline.active||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country?e._e():r("div",{staticClass:"q-px-md q-pt-lg"},[r("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/profile-button.png)"},on:{click:e.openUpdateProfilePage}},[e._v("\n        "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n      ")])]),e.offline.active||e.friendQuests&&!(e.friendQuests.length>0)?e._e():r("div",[r("titleBar",{attrs:{format:"small",title:{text:e.$t("label.FriendsQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreFriendsGames}}),r("questsList",{attrs:{format:"small",quests:e.friendQuests}})],1),e.offline.active||e.users&&!(e.users.length>0)?e._e():r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.Designers"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllCreators}}),r("usersList",{attrs:{format:"scroll",users:e.users}})],1),e.offline.active?e._e():r("div",{staticClass:"q-ma-md relative-position creator-button cursor-pointer",on:{click:e.buildQuest}},[r("img",{staticClass:"full-width",attrs:{src:"statics/images/other/creator.jpg"}}),r("div",{staticClass:"bg-accent subtitle2 q-pa-md full-width",staticStyle:{bottom:"0px",position:"absolute","line-height":"0.8em"}},[e._m(0),r("span",[e._v(e._s(e.$t("label.StartCreation")))])])]),e.offline.active?e._e():r("div",{staticClass:"q-px-md q-py-lg"},[r("div",{staticClass:"image-button cursor-pointer",staticStyle:{"background-image":"url(statics/images/icon/locator-button.png)"},on:{click:e.openMap}},[e._v("\n        "+e._s(e.$t("label.OpenTheMap"))+"\n      ")])]),r("div",{staticClass:"fixed-top"},[r("div",{staticClass:"home-header row no-wrap",class:{disabled:e.offline.active}},[r("img",{staticClass:"logo",attrs:{src:"statics/images/logo/logo-header-color.png"}}),r("q-space"),e.$store.state.user.isAdmin?r("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/tools.png"},on:{click:e.openAdminPage}}):e._e(),r("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/search.svg"},on:{click:e.openSearch}}),r("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"},on:{click:e.openRanking}}),r("q-avatar",{staticClass:"cursor-pointer",on:{click:function(t){return e.openProfile()}}},[r("img",{attrs:{src:e.getProfileImage()}})])],1)]),e.offline.active?e._e():r("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}}),r("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.ranking.show,callback:function(t){e.$set(e.ranking,"show",t)},expression:"ranking.show"}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YourRanking")))]),r("q-space"),r("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e.warnings.rankingMissing?r("q-card-section",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.getRanking}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),r("q-card-section",[r("q-list",[r("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Level")))]),r("q-item",{attrs:{multiline:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"trending_up",color:"primary"}})],1),r("q-item-section",[r("q-item-label",[e._v(e._s(e.$t("label.MyLevel"))+": "+e._s(e.$store.state.user.level)+" ("+e._s(e.$store.state.user.score)+" "+e._s(e.$t("label.points"))+")")]),r("q-linear-progress",{staticClass:"q-my-sm",staticStyle:{height:"18px"},attrs:{rounded:"",value:e.profile.level.progress,color:"primary"}}),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max})))])],1)],1)],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?r("q-list",[r("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Rankings")))]),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"public",color:"primary"}})],1),r("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourWorldRanking"))+" : \n                "),e.$store.state.user.statistics.rankings.world?r("span",[e._v(e._s(e.$store.state.user.statistics.rankings.world))]):e._e(),e.$store.state.user.statistics.rankings.world?e._e():r("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"home",color:"primary"}})],1),r("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourCityRanking"))+" :\n                "),e.$store.state.user.statistics.rankings.town?r("span",[e._v(e._s(e.$store.state.user.statistics.rankings.town))]):e._e(),e.$store.state.user.statistics.rankings.town?e._e():r("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1)],1):e._e(),e.success.ranking&&e.success.ranking.length>0?r("div",[r("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Rewards")))]),e._l(e.success.ranking,(function(t,a){return r("q-list",{key:a},[r("q-item-label",{attrs:{header:""}},[e._v(e._s(t.city))]),r("q-item",{staticStyle:{"flex-wrap":"wrap"}},e._l(t.rewards,(function(t,a){return r("img",{key:a,class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}})})),0)],1)})),e._v("\n            "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n          ")],2):e._e()],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():r("q-card-section",[e._v("\n          "+e._s(e.$t("label.NoRankingYet"))+"\n        ")])],1)],1),e.offline.active?e._e():r("div",{staticClass:"fixed-bottom over-map"},[e.offline.show?r("div",[r("offlineLoader",{attrs:{quest:e.offline.quest,design:"download",lang:e.$t("label.shortLang")},on:{end:function(t){return e.questLoadedInCache()}}})],1):e._e()]),r("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[r("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1)])},Ve=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"float-right"},[r("img",{staticStyle:{width:"32px"},attrs:{src:"statics/images/icon/puzzle-big.svg"}})])}],Ge=(r("7f7f"),r("28a5"),r("34ef"),r("ff57")),Ke=r.n(Ge),Je=(r("6b54"),r("3b2b"),r("5a89")),Xe=r("3452"),Ze={notificationsArr:[],handleError:function(e){Le.dispatch("setErrorMessage",e),dn.push("/error")},buildOptionsForSelect:function(e,t,r){var a=[];return e.forEach((function(e){a.push({value:e[t.valueField],label:r("label."+e[t.labelField])})})),a},getById:function(e,t){for(var r=0;r<e.length;r++)if(e[r].id===t)return e[r];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,r,a){var i=6371,s=Ze.degreesToRadians(r-e),n=Ze.degreesToRadians(a-t);e=Ze.degreesToRadians(e),r=Ze.degreesToRadians(r);var o=Math.sin(s/2)*Math.sin(s/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(e)*Math.cos(r),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return i*l},bearingBetweenEarthCoordinates:function(e,t,r,a){var i=Ze.degreesToRadians(a-t),s=Ze.degreesToRadians(e),n=Ze.degreesToRadians(r),o=Math.sin(i)*Math.cos(n),l=Math.cos(s)*Math.sin(n)-Math.sin(s)*Math.cos(n)*Math.cos(i),c=Ze.radiansToDegrees(Math.atan2(o,l));return(c+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),r={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var a in r)t=t.replace(new RegExp(r[a],"g"),a);return t},shuffle:function(e){var t,r,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),r=e[a],e[a]=e[t],e[t]=r;return e},buildIncrementalArray:function(e){for(var t=[],r=1;r<=e;r++)t.push(r);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var r=setTimeout(e,t);return Le.dispatch("addTimeoutId",r),r})),clearAllTimeouts:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=Le.state.runningTimeoutsIds[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;clearTimeout(s)}}catch(n){t=!0,r=n}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}Le.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var r=setInterval(e,t);Le.dispatch("addIntervalId",r)})),clearAllIntervals:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=Le.state.runningIntervalIds[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;clearInterval(s)}}catch(n){t=!0,r=n}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}Le.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},getDurationFromNow:function(e){var t=new Date(e),r=new Date,a=r.getTime()-t.getTime();return{h:parseInt(a/36e5%24),m:parseInt(a/6e4%60)}},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==Ke()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e["isActiveClone"]=null,t[r]=this.clone(e[r]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,r){var a=t?1e3:1024,i=r("label.byteCharacter");if(Math.abs(e)<a)return e+" "+i;var s=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],n=-1;s=s.map((function(e){return e+i}));do{e/=a,++n}while(Math.abs(e)>=a&&n<s.length-1);return e.toFixed(1)+" "+s[n]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<16;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},detachObject3D:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attachObject3D:function(e,t,r){e.applyMatrix((new Je["Matrix4"]).getInverse(t.matrixWorld)),r.remove(e),t.add(e)},initFileStorage:function(e,t,r){return new Promise((function(a,i){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(i){e&&""!==e?i.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:r,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)})):i.root.getFile(t,{create:r,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},checkIfFileExists:function(e,t,r){return new Promise((function(a,i){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(i){e&&""!==e?i.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:r,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)})):i.root.getFile(t,{create:r,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},writeInFile:function(e,t,r,a){var i=this;return new Promise((function(s,n){window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,0,(function(n){e&&""!==e?n.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),s(!1)},r||(r=new Blob(["some file data"],{type:"text/plain"}));var t=i.gcrypt(r,"Gr44lyCryp7");e.write(t)}))}),(function(){s(!1)}))}),(function(){s(!1)})):n.root.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),s(!1)},r||(r=new Blob(["some file data"],{type:"text/plain"}));var t=i.gcrypt(r,"Gr44lyCryp7");e.write(t)}))}),(function(){s(!1)}))}),(function(){s(!1)}))}))},readFile:function(e,t){var r=this;return new Promise((function(a,i){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(i){i||a(!1),e&&""!==e?i.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=r.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):i.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=r.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},saveBinaryFile:function(e,t,r){return new Promise((function(a,i){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(i){var s=new XMLHttpRequest;s.open("GET",t+r,!0),s.responseType="blob",s.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?i.root.getDirectory(e,{create:!0},(function(e){e.getFile(r,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}),(function(){a(!1)})):i.root.getFile(r,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}else a(!1)},s.send()}),(function(){a(!1)}))}))},readBinaryFile:function(e,t){var r=this;return new Promise((function(a,i){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(i){i||a(!1),e&&""!==e?i.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var i=new FileReader;i.onloadend=function(){var e=r.getMimeType(t),i=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(i))},i.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):i.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var i=new FileReader;i.onloadend=function(){var e=r.getMimeType(t),i=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(i))},i.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,r){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){r||t(!1),r.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",r=e.substr(-4);switch(r){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,r){return r?Xe["AES"].decrypt(e,t).toString(Xe["enc"].Utf8):Xe["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},openExternalLink:function(e){window.cordova?navigator.app.loadUrl(e,{openExternal:!0}):window.open(e,"_blank")},removeUnusedUrl:function(e){if(-1!==e.indexOf("gc=")){var t=e.indexOf("gc=");return e.substring(t+3)}return e},loadImage:function(e){return new Promise((function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=r,a.src=e}))},isIOS:function(){return window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId},requestDeviceMotionPermission:function(){return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceMotionEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},requestDeviceOrientationPermission:function(){return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceOrientationEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},stringToBytes:function(e){for(var t=new Uint8Array(e.length),r=0,a=e.length;r<a;r++)t[r]=e.charCodeAt(r);return t.buffer},bytesToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},replaceStringAt:function(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},timeStringToSeconds:function(e){var t=e.split("h"),r=t[1].split("m"),a=r[1].split("s"),i=3600*t[0],s=60*r[0],n=1*a[0],o=i+s+n;return o},secondsToTimeString:function(e){var t=Math.floor(e/3600);e%=3600;var r=Math.floor(e/60),a=e%60;return t+"h"+r+"m"+a+"s"},map:function(e,t,r,a,i){return(e-t)*(i-a)/(r-t)+a}},et=Ze,tt={listNearest:function(e,t){return t||(t="default"),Re().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/0/lang/"+t).catch((function(e){return console.log(e.request)}))},listNearestSync:function(e,t,r,a){return t||(t="default"),Re().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/"+r+"/lang/"+t).then((function(e){a(!1,e)}))},listHomeQuests:function(e,t){return t||(t="default"),Re().get("quests/home/"+e.lng+"-"+e.lat+"/lang/"+t).catch((function(e){return console.log(e.request)}))},listAllForCountry:function(){return Re().get("quests/country/FR").catch((function(e){return console.log(e.request)}))},listFriendQuests:function(e){return e||(e="default"),Re().get("quests/friends/played/0/lang/"+e).catch((function(e){return console.log(e.request)}))},listFriendQuestsync:function(e,t,r){return e||(e="default"),Re().get("quests/friends/played/"+t+"/lang/"+e).then((function(e){r(!1,e)}))},getById:function(e,t,r){return r||(r="default"),Re().get("quest/"+e+"/version/"+t+"/lang/"+r).catch((function(e){return console.log(e.request)}))},getSize:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e,t){return t||(t="default"),Re().get("quest/"+e+"/version/999/lang/"+t).catch((function(e){return console.log("getLastById(): could not retrieve quest data",e)}))},find:function(e,t,r){return r||(r="default"),Re().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/0/lang/"+r)},findSync:function(e,t,r,a,i){return r||(r="default"),Re().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/"+a+"/lang/"+r).then((function(e){i(!1,e)}))},create:function(e,t,r,a){return Re().post("quest/create/"+a+"/"+t+"/"+r,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return Re().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return Re().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return Re().delete("quest/"+e+"/version/"+t+"/remove")},clone:function(e,t){return Re().post("quest/"+e+"/version/"+t+"/clone")},closePrivate:function(e,t){return Re().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return Re().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return Re().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return Re().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return Re().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e,t){return t||(t="default"),Re().get("user/"+e+"/quests/created/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e,t){return t||(t="default"),Re().get("user/"+e+"/quests/played/0/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUserSync:function(e,t,r,a){return t||(t="default"),Re().get("user/"+e+"/quests/played/"+r+"/lang/"+t).then((function(e){a(!1,e)}))},listMedia:function(e,t,r){return r||(r="all"),Re().get("quest/"+e+"/version/"+t+"/media/"+r+"/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,r){return Re().delete("quest/"+e+"/version/"+t+"/media/"+r+"/remove")},listObjectFiles:function(e,t){return Re().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,r){return Re().get("quest/"+e+"/version/"+t+"/statistics/"+r).catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return Re().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return Re().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAudio:function(e){return Re().post("/quest/audio/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacter:function(e){return Re().post("/quest/character/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return Re().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return Re().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return Re().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return Re().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},checkTierPayment:function(e){return Re().get("quest/"+e+"/payment/tier/check").catch((function(e){return console.log(e.request)}))},createTierPayment:function(e,t){return Re().post("quest/"+e+"/payment/tier/add",{price:t}).catch((function(e){return console.log(e.request)}))},removeTierPayment:function(e,t){return Re().delete("quest/"+e+"/payment/tier/remove/"+t).catch((function(e){return console.log(e.request)}))},listTierPayments:function(e){return Re().get("quest/"+e+"/payment/tier/list").catch((function(e){return console.log(e.request)}))},useTierPaymentCode:function(e,t){return Re().post("quest/"+e+"/payment/tier/use",{code:t}).catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return Re().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return Re().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return Re().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Re().get("quest/"+e+"/connectandplay/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},checkQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Re().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return Re().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,r){return Re().put("quest/"+e+"/version/"+t+"/editor/add/"+r).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,r){return Re().delete("quest/"+e+"/version/"+t+"/editor/remove/"+r)},listInvitees:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,r){return Re().put("quest/"+e+"/version/"+t+"/invitee/add/"+r).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,r){return Re().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+r)},isCached:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(window.cordova){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,et.checkIfFileExists(e,"quest_"+e+".json");case 4:if(a=r.sent,a){r.next=7;break}return r.abrupt("return",!1);case 7:if(et.isNetworkAvailable()){r.next=9;break}return r.abrupt("return",!0);case 9:return r.t0=JSON,r.next=12,et.readFile(e,"quest_"+e+".json");case 12:return r.t1=r.sent,s=r.t0.parse.call(r.t0,r.t1),r.next=16,t.getLastById(e);case 16:if(n=r.sent,n){r.next=19;break}return r.abrupt("return",!1);case 19:return n=n.data,r.abrupt("return",n.version===s.version);case 21:case"end":return r.stop()}}),r)})))()},removeFromCache:function(e){return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.removeDirectory(e);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://api.graaly.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.png"}},rt={listFriends:function(e,t,r){return Re().get("user/"+e+"/friends/list/"+t+"/"+r).catch((function(e){return console.log(e.request)}))},listFriendsSync:function(e,t,r,a){return Re().get("user/"+e+"/friends/list/"+t+"/"+r).then((function(e){a(!1,e)}))},listSuggestions:function(e,t){return Re().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/0").catch((function(e){return console.log(e.request)}))},listSuggestionsSync:function(e,t,r,a){return Re().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/"+r).then((function(e){a(!1,e)}))},listFollowersSync:function(e,t,r){return Re().get("user/followers/"+e+"/"+t).then((function(e){r(!1,e)}))},find:function(e,t){return Re().get("user/type/"+e+"/filter/"+t+"/0").catch((function(e){return console.log(e.request)}))},findSync:function(e,t,r,a){return Re().get("user/type/"+e+"/filter/"+t+"/"+r).then((function(e){a(!1,e)}))},listNews:function(e,t,r){return Re().get("user/friends/news/list/"+e+"/"+t).then((function(e){r(!1,e)}))},likeNews:function(e){return Re().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return Re().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return Re().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRangeRanking:function(e){return Re().get("ranking/"+e).catch((function(e){return console.log(e.request)}))},getRewards:function(e,t){return Re().get("user/"+e+"/reward/list/"+t).catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return Re().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return Re().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return Re().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return Re().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return Re().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?Re().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?Re().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):Re().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return Re().delete("user/friend/remove/"+e)},checkContacts:function(e){return Re().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return Re().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},at={launchpopup:function(){var e=this;AppRate.preferences.useLanguage="fr",AppRate.preferences.storeAppURL={ios:"id1448284225",android:"market://details?id=graaly.app"},AppRate.preferences.reviewType={ios:"InAppReview",android:"InAppReview"},AppRate.preferences.simpleMode=!0,AppRate.preferences.callbacks.onButtonClicked=function(t){switch(console.log("onButtonClicked -> "+t),t){case 1:e.addAlreadyAskedForRating();break;case 2:e.addLater(7);break;case 3:break;default:break}},AppRate.promptForRating()},initLocalStorage:function(){null===window.localStorage.getItem("alreadyAsked")&&window.localStorage.setItem("alreadyAsked","false"),null===window.localStorage.getItem("futuredate")&&window.localStorage.setItem("futuredate","")},addAlreadyAskedForRating:function(){window.localStorage.setItem("alreadyAsked","true")},addLater:function(e){var t=new Date,r=new Date;r.setDate(t.getDate()+e),window.localStorage.setItem("alreadyAsked","later"),window.localStorage.setItem("futuredate",r.toString())},hasAlreadyHavePopup:function(){var e=window.localStorage.getItem("alreadyAsked");if("true"===e||"false"===e)return console.log("has already awensered"),e;if("later"===e){var t=window.localStorage.getItem("futuredate");return new Date(t)<new Date?"false":"true"}},resetAlreadyAsked:function(){window.localStorage.setItem("alreadyAsked","false"),window.localStorage.setItem("futuredate","")}},it=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isSupported&&e.isActive?e._e():r("div",{staticClass:"geolocation-layer"},[e.isActive?e._e():r("div",{staticClass:"search-geolocation fixed-bottom"},[r("div",{staticClass:"centered q-pa-md"},[r("q-spinner-puff",{attrs:{color:"primary",size:"25px"}}),e._v("  "+e._s(e.$t("label.LocationSearching"))+"\n    ")],1),e.askUserToEnableGeolocation?r("div",[r("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n        "+e._s(e.$t("label.CouldNotRetrieveYourPosition"))+"\n      ")]),r("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.ReadMore")}},[r("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n          "+e._s(e.$t("label.PossibleReasons"))+"\n          "),r("ul",[r("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),r("li",[e._v("\n              "+e._s(e.$t("label.GeolocationDisabled"))+"\n              "),e.nativeSettingsIsEnabled?r("span",[r("br"),r("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():r("div",[e.isChrome?r("div",[r("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():r("div",[r("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])])])],1):e._e()]),e.isSupported?e._e():r("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n    "+e._s(e.$t("label.GeolocationNotSupported"))+"\n  ")])])},st=[],nt=(r("4917"),r("c5f6"),{props:{maximumAge:{type:Number,default:0},withNavBar:{type:Boolean,default:!1}},data:function(){return{isSupported:!0,isActive:!1,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:1e4,nbFails:0,disabled:!1,alreadyWorked:!1,method:et.isIOS()?"getCurrentPosition":"watchPosition",geolocationWatchId:null,timeoutIds:[],positionHistory:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,r=t.vendor,a=t.userAgent.indexOf("Edge")>-1,i=t.userAgent.match("CriOS");return!!i||null!==e&&"undefined"!==typeof e&&"Google Inc."===r&&!1===a},askUserToEnableGeolocation:function(){return this.nbFails>=1&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||("watchPosition"===this.method?this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(console.log("*** locationError",e),!this.disabled){console.warn("Could not get location"),console.log(e),this.isSupported=!0,this.isActive=!1,this.nbFails++,this.userDeniedGeolocation=1===e.code,this.$emit("error",!this.alreadyWorked),"watchPosition"===this.method&&this.stopTracking();var t=et.setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);"getCurrentPosition"===this.method&&this.timeoutIds.push(t)}},locationSuccess:function(e){if(!this.disabled){this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1;var t=this.computeRelevantPosition(e);if(this.$emit("success",{coords:{accuracy:e.coords&&e.coords.accuracy?e.coords.accuracy:10,altitude:e.coords?e.coords.altitude:null,speed:e.coords?e.coords.speed:null,latitude:t.latitude,longitude:t.longitude}}),"getCurrentPosition"===this.method){var r=et.setTimeout(this.startTracking,1e3);this.timeoutIds.push(r)}}},stopTracking:function(){if("watchPosition"===this.method)null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null);else if(this.timeoutIds.length>0){var e=!0,t=!1,r=void 0;try{for(var a,i=this.timeoutIds[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;clearTimeout(s)}}catch(n){t=!0,r=n}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this.timeoutIds=[]}},computeRelevantPosition:function(e){if(e&&e.coords){this.positionHistory.length>=5&&this.positionHistory.splice(0,1),this.positionHistory.push({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy});for(var t=this.positionHistory.length,r=0,a=0,i=0,s=0,n=0,o=0,l=0;l<t;l++)n=1/(this.positionHistory[l].latitude*(t-l)),o=1/(this.positionHistory[l].longitude*(t-l)),i+=this.positionHistory[l].latitude*n,s+=this.positionHistory[l].longitude*o,r+=n,a+=o;return{latitude:i/r,longitude:s/a}}return e},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),ot=nt,lt=(r("ac85"),Object(ye["a"])(ot,it,st,!1,null,"5026aeaf",null)),ct=lt.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'énergie est gratuite !")]),r("q-list",{attrs:{highlight:""}},[r("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),r("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),r("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),r("q-item",[r("q-item-section",{attrs:{avatar:""}},[r("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),r("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?r("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),r("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},dt=[],pt=(r("f751"),{position:"top",actions:[{icon:"close"}]}),ft=function(e,t,r){var a,i=window.cordova;switch(t){case"positive":a={icon:"check_circle",color:"positive"};break;case"warning":a={icon:"warning",color:"orange"};break;case"error":a={icon:"report_problem",color:"negative"};break;case"rightAnswer":a={color:"positive",timeout:4e3};break;case"wrongAnswer":a={color:"orange",timeout:4e3};break;case"readMore":a={icon:"info",color:"positive",timeout:0,position:i?"bottom":"top-right"};break;default:a={icon:"info",color:"info"};break}r&&(a.actions=r);var s=be["a"].create(Object.assign({message:e},pt,a));return et.notificationsArr.push(s),s},mt={data:function(){return{coinsWon:0}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.coinsWon=0;case 1:case"end":return t.stop()}}),t)})))()},methods:{buy:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.coinsWon=0,r.next=3,rt.buy(e);case 3:a=r.sent,a&&a.data&&a.data.coins?(t.coinsWon=a.data.coins,t.$store.state.user.coins+=t.coinsWon):ft(t.$t("label.ErrorStandardMessage"),"error"),setTimeout(t.resetCoinsWon,2e3);case 6:case"end":return r.stop()}}),r)})))()},resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},ht=mt,bt=Object(ye["a"])(ht,ut,dt,!1,null,null,null),gt=bt.exports,vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pt-lg"},[r("div",{staticClass:"q-pa-md bg-grey-8"},[r("div",{staticClass:"subtitle4 centered"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),r("div",{staticClass:"subtitle6 q-py-md"},[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),r("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[r("q-input",{attrs:{dark:"",label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))])],1),r("div",{staticClass:"centered q-pt-md"},[r("a",{on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),r("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)])])},wt=[],kt={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.submitSuggestion(e.place);case 2:r=t.sent,r&&r.data&&"ok"===r.data.status?(ft(e.$t("label.ThankYouForYourProposal"),"positive"),e.emitClose()):ft(e.$t("label.TechnicalIssue"),"error");case 4:case"end":return t.stop()}}),t)})))()}}},yt=kt,_t=Object(ye["a"])(yt,vt,wt,!1,null,null,null),St=_t.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-px-md"},[r("div",{staticClass:"float-right bar-link"},[e.link?r("a",{staticClass:"cursor-pointer",on:{click:e.clickLink}},[e._v(e._s(e.link.text))]):e._e()]),r("div",{class:"title-bar "+e.title.type+"-bar"},[e._v("\n    "+e._s(e.title.text)+"\n  ")])])},Ct=[],qt={props:["title","link"],methods:{clickLink:function(){this.$emit("click")}}},Tt=qt,Et=Object(ye["a"])(Tt,xt,Ct,!1,null,null,null),Pt=Et.exports,At=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-quest relative-position",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[e.quest?e._e():r("div",{staticClass:"absolute-center"},[r("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1),e.quest?r("div",[r("div",{staticClass:"centered main-quest-banner q-pa-md",staticStyle:{background:"linear-gradient(to bottom, transparent, #323232)"}},[r("div",{staticClass:"title2"},[e._v("\n        "+e._s(e.quest.title)+"\n      ")]),r("div",{staticClass:"q-pt-md q-pb-md subtitle6"},[e._v("\n        "+e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        "),r("img",{attrs:{src:"statics/images/icon/separator.png"}}),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?r("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Paying")))]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?e._e():r("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Free")))]),e.quest.availablePoints&&e.quest.availablePoints.maxPts?r("span",[r("img",{attrs:{src:"statics/images/icon/separator.png"}}),e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+" "+e._s(e.$t("label.points"))+"\n        ")]):e._e()]),r("div",[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Play"),loading:e.submitting},on:{click:e.playQuest}})],1),r("div",{staticClass:"white-overliner q-mt-md subtitle6"},[e._v("\n        "+e._s(e.$t("label."+e.quest.description))+"\n      ")])])]):e._e()])},Mt=[],It={props:["quest"],data:function(){return{serverUrl:"https://api.graaly.com",submitting:!1}},methods:{playQuest:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.submitting=!0,e.$router.push("/quest/play/"+e.quest.questId);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(){return this.quest?this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png":""}}},Rt=It,Ot=Object(ye["a"])(Rt,At,Mt,!1,null,null,null),$t=Ot.exports,Ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pl-md"},[e.quests?e._e():r("div",{staticClass:"quest-small relative-position"},[r("div",{staticClass:"absolute-center"},[r("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.quests&&(e.quests.length>0||e.add)&&"small"===e.format?r("div",{staticClass:"horizontal-scroll-wrapper quests-horizontal-scroll-wrapper",class:{"quest-red":"red"===e.color}},[e.add?r("div",{staticClass:"quest-add-button relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.buildQuest()}}},[r("div",[r("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.quests,(function(t){return r("div",{key:t._id,staticClass:"quest-small relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(r){return e.$router.push("/quest/play/"+t.questId)}}},[t.status&&"published"!==t.status?r("div",[r("q-chip",{attrs:{color:"status-"+t.status}},[e._v("\n          "+e._s(e.$t("status."+t.status))+"\n        ")])],1):e._e(),t.userName?r("div",[r("q-chip",{attrs:{color:"graaly-blue-dark"}},[r("q-avatar",[r("img",{attrs:{src:e.getUserBackgroundImage(t.userPicture)}})]),e._v("\n          "+e._s(t.userName)+"\n        ")],1)],1):e._e(),r("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?r("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?r("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?r("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():r("div",[r("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?r("div",[e._v("\n          €"),r("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?r("div",[e._v("\n          €€"),r("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?r("div",[e._v("\n          €€€\n        ")]):e._e(),t.rating&&t.rating.nbVoters?r("div",[r("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),r("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),r("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?r("div",["in-progress"===t.playStatus?r("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?r("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),r("div",{staticClass:"title-banner q-pl-sm"},[r("div",[t.location&&t.location.town?r("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():r("span",[e._v(" ")])]),t.title?r("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?r("div",[e._m(0,!0),r("div",{staticClass:"point-banner with-plus"},[r("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?r("div",[e._m(1,!0),r("div",{staticClass:"point-banner point-won"},[r("div",[e._v(e._s(t.points))])])]):e._e()])}))],2):e._e(),e.quests&&e.quests.length>0&&"big"===e.format?r("div",{class:{"quest-red":"red"===e.color}},e._l(e.quests,(function(t){return r("div",{key:t._id,staticClass:"quest-big relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(r){return e.$router.push("/quest/play/"+t.questId)}}},[r("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?r("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?r("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?r("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():r("div",[r("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?r("div",[e._v("\n          €"),r("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?r("div",[e._v("\n          €€"),r("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?r("div",[e._v("\n          €€€\n        ")]):e._e(),t.distance?r("div",[e._v("\n          "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n        ")]):e._e(),t.rating&&t.rating.nbVoters?r("div",[r("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),r("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),r("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?r("div",["in-progress"===t.playStatus?r("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?r("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),r("div",{staticClass:"title-banner q-pl-sm"},[r("div",[t.location&&t.location.town?r("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():r("span",[e._v(" ")])]),t.title?r("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?r("div",[e._m(2,!0),r("div",{staticClass:"point-banner with-plus"},[r("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?r("div",[e._m(3,!0),r("div",{staticClass:"point-banner point-won"},[r("div",[e._v(e._s(t.points))])])]):e._e()])})),0):e._e()])},Dt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"point-banner"},[r("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"point-banner point-won"},[r("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"point-banner"},[r("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"point-banner point-won"},[r("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])}],Nt={props:["quests","format","color","add"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.png"},getUserBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")}}},Lt=Nt,jt=Object(ye["a"])(Lt,Ft,Dt,!1,null,null,null),zt=jt.exports,Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pl-md"},[e.users?e._e():r("div",{staticClass:"user-card-small relative-position"},[r("div",{staticClass:"centered q-pt-lg"},[r("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),"scroll"===e.format&&(e.users&&e.users.length>0||e.add)?r("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},[e.add?r("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[r("div",{staticClass:"user-add-button"},[r("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return r("div",{key:t._id,staticClass:"cursor-pointer"},[r("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),"list"===e.format&&(e.users&&e.users.length>0||e.add)?r("div",{staticClass:"row justify-around q-pt-sm"},[e.add?r("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[r("div",{staticClass:"user-add-button"},[r("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return r("div",{key:t._id,staticClass:"cursor-pointer"},[r("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),r("q-dialog",{model:{value:e.addFriend.show,callback:function(t){e.$set(e.addFriend,"show",t)},expression:"addFriend.show"}},[r("q-card",[r("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.FollowYourFriends"))+"\n        "),r("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),r("q-separator"),r("q-card-section",{staticClass:"subtitle5"},[r("newfriend",{on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},Bt=[],Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",["suggestions"===e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?r("div",[e.loadingContacts?r("div",{staticClass:"centered"},[r("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n          "+e._s(e.$t("label.LoadingContacts"))+"\n        ")],1):e._e(),null===e.loadingContacts?r("div",{staticClass:"centered"},[r("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?r("div",[r("q-list",{attrs:{highlight:""}},[e._l(e.validatedContacts,(function(t){return r("q-item",{key:t._id},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?r("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?r("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():r("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),r("q-item-section",[r("q-item-label",[e._v(e._s(t.name))]),r("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(r){return e.addFriend(t._id)}}})],1)],1)})),r("q-item",[r("q-item-section",{attrs:{avatar:""}}),r("q-item-section",[r("q-item-label",[r("a",{on:{click:function(t){e.newFriendMode="addFriend"}}},[e._v(e._s(e.$t("label.AddFriendManually")))])])],1)],1)],2)],1):e._e()]):e._e(),"addFriend"!==e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?e._e():r("div",[r("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n        \n          "+e._s(e.$t("label.FindWithEmail"))+"\n          "),r("div",{staticClass:"row q-pb-md"},[r("div",{staticClass:"col-8"},[r("q-input",{attrs:{dark:"",color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?r("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():r("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),r("div",{staticClass:"col-4 centered"},[r("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n          "+e._s(e.$t("label.FindWithPhone"))+"\n          "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-8"},[r("q-input",{attrs:{dark:"",color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?r("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():r("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),r("div",{staticClass:"col-4 centered"},[r("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])])])},Qt=[],Wt=(r("7514"),r("b5ae")),Yt=function(e){var t=e.match(/\d/g);return 10===t.length},Vt={data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,serverUrl:"https://api.graaly.com",submitting:!1,loadingContacts:null,console:"",newFriendMode:"suggestions",isHybrid:window.cordova}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid||(e.newFriendMode="addFriend");case 1:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error&&e.$v.form.phone.$error){t.next=5;break}return t.next=3,rt.addFriend({email:e.form.email,phone:e.form.phone});case 3:r=t.sent,r?200===r.status?(r.data&&r.data.hasOwnProperty("status")&&"invitationsent"===r.data.status?ft(e.$t("label.InvitationSent"),"success"):(ft(e.$t("label.FriendsAdded"),"success"),e.$emit("friendadded")),e.form.email="",e.form.phone=""):r.data&&"Friend not found"===r.data.message?ft(e.$t("label.FriendNotFound"),"error"):r.data&&"Too much friends"===r.data.message?ft(e.$t("label.TooMuchFriends"),"error"):r.data&&"User can not be friend with him"===r.data.message?ft(e.$t("label.UserCanNotBeFriendWithHim"),"error"):r.data&&"Already friends"===r.data.message?ft(e.$t("label.AlreadyFriends"),"error"):ft(e.$t("label.ErrorStandardMessage"),"error"):ft(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return s=new FormData,s.append("image",a[0]),r.next=7,AuthService.uploadAccountPicture(s);case 7:n=r.sent,n&&n.data&&(n.data.file?t.$store.state.user.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&ft(t.$t("label.FileTooLarge"),"error"));case 9:case"end":return r.stop()}}),r)})))()},getContacts:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.cordova?(e.loadingContacts=!0,r=new ContactFindOptions,r.filter="",r.multiple=!0,a=["displayName","emails","phoneNumbers"],navigator.contacts.find(a,e.checkContacts,e.onError,r),e.loadingContacts=!1):e.newFriendMode="addFriend";case 1:case"end":return t.stop()}}),t)})))()},checkContacts:function(e){for(var t=[],r=0;r<e.length;r++)if(e[r].emails&&e[r].emails.length>0){var a=e[r].emails[0].value;a=a.toLowerCase(),t.push({name:e[r].displayName,email:a})}else if(e[r].phoneNumbers&&e[r].phoneNumbers.length>0){var i=e[r].phoneNumbers[0].value,s=i.match(/\d/g);t.push({name:e[r].displayName,phone:s.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,rt.checkContacts(e);case 2:return a=r.sent,a&&a.data&&a.data.contacts&&(t.validatedContacts=a.data.contacts),r.next=6,t.hideContactsAlreadyfriends();case 6:case"end":return r.stop()}}),r)})))()},hideContactsAlreadyfriends:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.listFriends();case 2:for(r=t.sent,a=r.data,s=e.validatedContacts.length-1;s>=0;s--)for(n=0;n<a.length;n++)e.validatedContacts.length>s&&e.validatedContacts[s]._id===a[n].friendId&&e.validatedContacts.splice(s,1);case 5:case"end":return t.stop()}}),t)})))()},hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,rt.addFriend(e);case 2:a=r.sent,a?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?ft(t.$t("label.InvitationSent"),"success"):(ft(t.$t("label.FriendsAdded"),"success"),t.$emit("friendadded")),t.hideUserFromValidatedContacts(e)):ft(t.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return r.stop()}}),r)})))()},onError:function(e){ft(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:Wt["email"]},phone:{checkPhone:Yt}}}},Gt=Vt,Kt=Object(ye["a"])(Gt,Ut,Qt,!1,null,null,null),Jt=Kt.exports,Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relative-position q-mr-md user-card",class:"user-card-"+e.size+(e.showName?" user-"+e.size+"-with-title":""),on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[r("div",{style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "}),e.showName?r("div",{staticClass:"centered subtitle6 user-card-name"},[e._v("\n    "+e._s(e.user.name)+"\n  ")]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?r("div",{staticClass:"profile-item-creator"},[r("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?r("div",{staticClass:"profile-item-level"},[r("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()])},Zt=[],er={props:["user","size","showName"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},tr=er,rr=Object(ye["a"])(tr,Xt,Zt,!1,null,null,null),ar=rr.exports,ir={components:{newfriend:Jt,userCard:ar},props:["users","add","format"],data:function(){return{addFriend:{show:!1}}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriend.show=!0},closeAddFriends:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addFriend.show=!1;case 1:case"end":return t.stop()}}),t)})))()},updateFriendsActivity:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh");case 1:case"end":return t.stop()}}),t)})))()}}},sr=ir,nr=Object(ye["a"])(sr,Ht,Bt,!1,null,null,null),or=nr.exports,lr=function(e){return e>=3e3?{level:9,next:9,max:15e3,progress:(e-3e3)/12e3}:e>=1500?{level:8,next:9,max:3e3,progress:(e-1500)/1500}:e>=800?{level:7,next:8,max:1500,progress:(e-800)/700}:e>=400?{level:6,next:7,max:800,progress:(e-400)/400}:e>=200?{level:5,next:6,max:400,progress:(e-200)/200}:e>=100?{level:4,next:5,max:200,progress:(e-100)/100}:e>=30?{level:3,next:4,max:100,progress:(e-30)/70}:e>=15?{level:2,next:3,max:30,progress:(e-15)/15}:{level:1,next:2,max:15,progress:e/15}},cr={components:{QInfiniteScroll:M["a"],QSpinnerDots:Z["a"],geolocation:ct,shop:gt,suggest:St,mainQuest:$t,titleBar:Pt,questsList:zt,usersList:or},data:function(){return{bestQuest:null,nearestQuests:null,invitationQuests:null,onTopQuests:null,extraQuests:null,friendQuests:null,users:null,search:{quests:[],text:""},user:{position:null,positionType:null,proposeAQuest:!0},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://api.graaly.com",showSearch:!1,warnings:{noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{ranking:[]},profile:{level:{},organization:{},progress:.1,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},isMounted:!1,isHybrid:window.cordova,isQuestsLoaded:!1,suggestQuest:{show:!1},innerWidth:window.innerWidth,QuestService:tt}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;if(this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name){if(window.cordova){at.initLocalStorage();var t=this.$store.state.user.statistics.nbQuestsSuccessful;t>=1&&"false"===at.hasAlreadyHavePopup()&&(console.log("the user has done at least one quest"),at.launchpopup())}this.initPage(),this.$nextTick((function(){e.isMounted=!0}))}else this.backToLogin();this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide()},methods:{initPage:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkIfProfileIsComplete(),et.clearAllRunningProcesses(),t.next=4,e.checkNetwork();case 4:return e.profile.level=lr(e.$store.state.user.score),t.next=7,e.getFriendQuests();case 7:case"end":return t.stop()}}),t)})))()},checkIfProfileIsComplete:function(){18!==this.$store.state.user.story.step||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.openUpdateProfilePage()},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},onLocationSuccess:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.isQuestsLoaded&&"defaultProfilePosition"!==t.user.positionType||t.offline.active){r.next=4;break}return r.next=4,t.loadQuests();case 4:if(null!==t.users){r.next=7;break}return r.next=7,t.getCreators();case 7:t.user.positionType="userCurrentLocation",t.$refs["geolocation-component"].stopTracking();case 9:case"end":return r.stop()}}),r)})))()},startScanQRCode:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.isHybrid&&cordova.plugins.barcodeScanner.scan((function(e){if(e&&e.text){var t=et.removeUnusedUrl(e.text);r.checkCode(t)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1});case 2:case"end":return t.stop()}}),t)})))()},checkCode:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.checkQRCode(e,t.$t("label.shortLang"));case 2:a=r.sent,a&&a.data&&"ok"===a.data.status?-1===e.indexOf("_score")?a.data.questId?t.playQuest(a.data.questId):t.playQuest(e):t.$router.push("/quest/"+e.substring(0,24)+"/end"):ft(t.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return r.stop()}}),r)})))()},checkNetwork:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.offline.active,a=et.isNetworkAvailable(),e.warnings.noNetwork=!a,e.offline.active=!a,r===e.offline.active){t.next=9;break}return e.questList=[],t.next=8,e.loadQuests();case 8:e.questList[0].description="CachedQuests";case 9:et.setTimeout(e.checkNetwork,5e3);case 10:case"end":return t.stop()}}),t)})))()},loadQuests:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noServerReponse=!1,t.next=3,e.getQuests();case 3:case"end":return t.stop()}}),t)})))()},getQuests:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isQuestsLoaded=null,e.showBottomMenu=!1,e.offline.active){t.next=18;break}if(null!==e.user.position){t.next=7;break}return ft(e.$t("label.LocationSearching"),"warning"),e.isQuestsLoaded=!1,t.abrupt("return");case 7:return t.next=9,tt.listHomeQuests({lng:e.user.position.longitude,lat:e.user.position.latitude});case 9:if(r=t.sent,r&&r.data){t.next=14;break}return ft(e.$t("label.TechnicalIssue"),"error"),e.isQuestsLoaded=!1,t.abrupt("return");case 14:e.isQuestsLoaded=!0,r.data.message&&"No quest"===r.data.message||(r.data.best&&(e.bestQuest=r.data.best),r.data.nearests?e.nearestQuests=r.data.nearests:e.nearestQuests=[],r.data.topQuests?e.onTopQuests=r.data.topQuests:e.onTopQuests=[],r.data.invitations&&(e.invitationQuests=r.data.invitations),r.data.extra&&(e.extraQuests=r.data.extra)),t.next=45;break;case 18:return t.next=20,et.readFile("","quests.json");case 20:if(a=t.sent,!a){t.next=43;break}if(s=JSON.parse(a),!s||!s.list){t.next=41;break}if(n=s.list,!(n.length>0)){t.next=39;break}o=0;case 27:if(!(o<n.length)){t.next=35;break}return t.next=30,et.readBinaryFile(n[o].questId,n[o].picture);case 30:l=t.sent,n[o].picture=l||"_default-quest-picture.png";case 32:o++,t.next=27;break;case 35:e.questList=n,e.offline.active=!0,t.next=41;break;case 39:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 41:t.next=45;break;case 43:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 45:case"end":return t.stop()}}),t)})))()},getFriendQuests:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.listFriendQuests();case 2:if(r=t.sent,e.friendQuests=[],r&&r.data)for(a=0;a<r.data.length;a++)e.friendQuests.push({questId:r.data[a].questId,picture:r.data[a].questData.picture,title:r.data[a].questData.title,location:{town:r.data[a].questData.town},userPicture:r.data[a].userData.picture,userName:r.data[a].userData.name,playStatus:r.data[a].status?r.data[a].status:"succeeded",points:r.data[a].stars});case 5:case"end":return t.stop()}}),t)})))()},getCreators:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.listSuggestions({lng:e.user.position.longitude,lat:e.user.position.latitude},10);case 2:if(r=t.sent,r&&r.data){t.next=6;break}return ft(e.$t("label.TechnicalIssue"),"error"),t.abrupt("return");case 6:r.data.message&&"No users"===r.data.message||(e.users=r.data);case 7:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.rankingMissing=!1,e.$q.loading.show(),t.next=4,rt.getRanking();case 4:r=t.sent,e.$q.loading.hide(),r&&r.data?e.success.ranking=r.data:e.warnings.rankingMissing=!0;case 7:case"end":return t.stop()}}),t)})))()},openAdminPage:function(){this.offline.active||this.$router.push("/admin")},getQuestTitle:function(e,t){return e&&e.title?e.title:this.$t("label.NoTitle")},backToLogin:function(){this.$router.push("/user/login")},trackCallBackFunction:function(){return!1},onLocationError:function(e){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.user.location&&t.$store.state.user.location.geometry&&t.$store.state.user.location.geometry.coordinates&&0!==t.$store.state.user.location.geometry.coordinates[0]&&null===t.user.position&&t.$set(t.user,"position",{longitude:t.$store.state.user.location.geometry.coordinates[0],latitude:t.$store.state.user.location.geometry.coordinates[1]}),null===t.user.position||t.offline.active){e.next=10;break}if(!1!==t.isQuestsLoaded){e.next=5;break}return e.next=5,t.loadQuests();case 5:if(null!==t.users){e.next=8;break}return e.next=8,t.getCreators();case 8:t.user.positionType="defaultProfilePosition",t.$refs["geolocation-component"].stopTracking();case 10:case"end":return e.stop()}}),e)})))()},playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){if(this.userIsConnected())this.$router.push("/quest/create/welcome");else{var e=this;this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToCreateAnAccount"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.openUpdateProfilePage();case 1:case"end":return t.stop()}}),t)}))))}},userIsConnected:function(){return"-"!==this.$store.state.user.name},modifyQuest:function(e){this.$router.push("/quest/builder/"+e)},readMore:function(){ft(this.$t("label.QuestDownloadFinished"),"positive")},readMoreAroundYou:function(){this.$router.push("/search/quest/around")},readMoreFriendsGames:function(){this.$router.push("/search/quest/friends")},readMoreAllCreators:function(){this.$router.push("/user/"+this.$store.state.user.id+"/friends")},openProfile:function(e){this.offline.active||(e||(e=this.$store.state.user.id),this.$router.push("/profile/"+e))},openSearch:function(){this.offline.active||this.$router.push("/search/quest/around")},openRanking:function(){this.offline.active||this.$router.push("/user/ranking/level/all")},openMap:function(){this.offline.active||this.$router.push("/map")},getProfileImage:function(){var e=this.$store.state.user;return e.picture&&-1!==e.picture.indexOf("http")?e.picture:e.picture?this.serverUrl+"/upload/profile/"+e.picture:"statics/images/icon/profile-small.png"}}},ur=cr,dr=(r("a2e6"),Object(ye["a"])(ur,Ye,Ve,!1,null,null,null)),pr=dr.exports,fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"div-column",staticClass:"column"},[null!==e.user.position?r("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?r("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,a){return r("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(r){return e.openQuestSummary(t,a)}}})})),e.map.loaded?r("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}):e._e(),r("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[r("div",{staticClass:"infoWindow"},[r("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),r("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?r("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?r("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?r("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?r("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?r("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?r("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?r("p",[e._v("\n            "+e._s(e.currentQuest.displayPrice)+"\n          ")]):e._e(),r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Play")))])],1)])],2):e._e()],1):e._e(),r("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}}),r("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top over-map"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:e.backToHome}})],1)],1)},mr=[],hr=(r("cadf"),r("456d"),r("755e")),br={components:{geolocation:ct},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},user:{position:null},currentQuestIndex:null,currentQuest:null,questList:[],serverUrl:"https://api.graaly.com",isMounted:!1,isHybrid:window.cordova,loadingMap:!0}},computed:{google:hr["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.initPage(),this.$nextTick((function(){e.isMounted=!0}))},methods:{initPage:function(){return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:et.clearAllRunningProcesses();case 1:case"end":return e.stop()}}),e)})))()},onNewUserPosition:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.map.loaded){r.next=4;break}return r.next=4,t.reloadMap();case 4:case"end":return r.stop()}}),r)})))()},centerOnUserPosition:function(){this.showBottomMenu=!1,null!==this.user.position?(this.CenterMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):Notification(this.$t("label.LocationSearching"),"warning")},CenterMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var r=this.map.infoWindow,a={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=a,this.currentQuestIndex!==t||!r.isOpen){var i=this.$refs.questMarkers[t].$markerObject;i.setAnimation(google.maps.Animation.BOUNCE),et.setTimeout((function(){i.setAnimation(null)}),700)}if(this.currentQuestIndex===t?r.isOpen=!r.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",r.isOpen=!0,this.panTo(a)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){var s={premiumprice1:"0,99 €",premiumprice2:"1,99 €",premiumprice3:"2,99 €",premiumprice5:"4,99 €",premiumprice10:"9,99 €",premiumprice20:"19,99 €"};this.currentQuest.displayPrice=s[e.premiumPrice.androidId]}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},reloadMap:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.map.loaded=null,e.$q.loading.show(),t.next=4,e.getQuests();case 4:e.closeInfoWindows(),e.$refs.mapRef?(e.questList.length>0?e.$refs.mapRef.$mapPromise.then((function(t){var r=new google.maps.LatLngBounds,a=!0,i=!1,s=void 0;try{for(var n,o=e.questList[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var l=n.value;r.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(c){i=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}r.extend({lng:e.user.position.longitude,lat:e.user.position.latitude}),t.fitBounds(r)})):e.centerOnUserPosition(),e.map.loaded=!0):(e.centerOnUserPosition(),e.map.loaded=!0),e.loadingMap=!1,e.$q.loading.hide();case 8:case"end":return t.stop()}}),t)})))()},getQuests:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.showBottomMenu=!1,null!==t.user.position){r.next=4;break}return Notification(t.$t("label.LocationSearching"),"warning"),r.abrupt("return");case 4:return t.map.filter=e||"all",t.$q.loading.show(),r.next=8,tt.listAllForCountry();case 8:if(a=r.sent,t.$q.loading.hide(),a&&a.data){r.next=13;break}return Notification(t.$t("label.TechnicalIssue"),"error"),r.abrupt("return");case 13:if(a.data.message&&"No quest"===a.data.message||(t.questList=a.data),0!==t.questList.length||"world"===t.map.filter){r.next=16;break}return r.abrupt("return",t.getQuests("world"));case 16:case"end":return r.stop()}}),r)})))()},getQuestLevelName:function(e){var t=et.getById(questLevels,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),r=e.lng();this.map.center.lat===t&&this.map.center.lng===r||(this.map.centerTmp={lng:r,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},setMapIcon:function(e){return{url:"statics/images/icon/place.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},trackCallBackFunction:function(){return!1},onUserPositionError:function(e){e&&(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},backToHome:function(){this.$router.push("/home")}}},gr=br,vr=Object(ye["a"])(gr,fr,mr,!1,null,null,null),wr=vr.exports,kr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{staticClass:"reduce-window-size-desktop",class:{loaded:e.pageReady},attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():r("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.Loading"))+"\n      "),r("div",{staticClass:"q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?r("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.QuestNeedNetwork"))+"\n      "),r("div",[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),e.quest&&e.quest.status?r("div",{staticClass:"relative-position image-banner"},[r("div",{staticClass:"effect-kenburns limit-size-desktop",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat ;"}),r("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1),r("div",{staticClass:"q-py-sm dark-banner absolute-bottom limit-size-desktop"},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.openProfile(e.quest.authorUserId)}}},[r("q-item-section",{attrs:{side:""}},[r("q-avatar",{attrs:{size:"50px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?r("img",{attrs:{src:e.serverUrl+"/upload/profile/"+e.quest.author.picture}}):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?e._e():r("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),r("q-item-section",{staticStyle:{"padding-right":"84px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.name?r("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(e.quest.author.name))]):e._e()],1)],1)],1)]):e._e(),e.quest&&e.quest.status?r("div",{staticClass:"q-pa-md quest-description text-white",staticStyle:{"padding-bottom":"-50px"}},[!e.quest.availablePoints||!e.quest.availablePoints.maxPts||e.quest.customization&&e.quest.customization.removeScoring?e._e():r("div",{staticClass:"float-right quest-score",on:{click:e.showRewards}},[r("img",{attrs:{src:"statics/images/icon/point.png"}}),r("div",{staticClass:"absolute"},[e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+"\n        ")])]),e.warning.lowBattery?r("div",{staticClass:"bg-warning q-pa-sm"},[r("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n      ")],1):e._e(),e.warning.tooMuchUsers?r("div",{staticClass:"bg-warning q-pa-sm"},[r("q-icon",{attrs:{name:"warning"}}),e._v(" "+e._s(e.$t("label.TooMuchUsersCurrently"))+"\n      ")],1):e._e(),"published"!==e.quest.status?r("div",{staticClass:"bg-primary centered q-pa-sm q-mb-md"},[e._v("\n        "+e._s(e.$t("label."+("quest"===e.quest.type?"QuestDraftVersion":"PageDraftVersion")))+"\n      ")]):e._e(),r("div",{staticClass:"text-h5"},[e._v("\n        "+e._s(""===e.quest.title?e.$t("label.NoTitle"):e.quest.title)+" \n         "),e.getLanguage()!==e.$store.state.user.language?r("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()]),r("div",{staticClass:"row q-pt-md text-subtitle1 properties-bar"},[r("div",{staticClass:"q-mr-lg"},[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/difficulty.svg"}}),e._v(e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        ")]),e.quest.duration&&e.quest.duration<999?r("div",{staticClass:"q-mr-lg"},[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/duration.svg"}}),e.quest.duration&&e.quest.duration<60?r("span",[e._v(e._s(e.quest.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),e.quest.duration&&e.quest.duration>=60?r("span",[e._v(e._s(e.quest.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e()]):e._e(),"quest"!==e.quest.type||e.quest.customization&&e.quest.customization.removeScoring?e._e():r("div",{staticClass:"q-mr-lg"},[e.quest.premiumPrice.tier||"free"!==e.shop.premiumQuest.priceCode||"quest"!==e.quest.type?e._e():r("span",[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),e.shop.premiumQuest.alreadyPayed?e._e():r("span",[e._v(e._s(e.$t("label.Free")))]),e.shop.premiumQuest.alreadyPayed?r("span",[e._v(e._s(e.$t("label.AlreadyPaied")))]):e._e()]),"free"!==e.shop.premiumQuest.priceCode&&"quest"===e.quest.type?r("span",[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),r("span",[e._v(e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue))])]):e._e()]),e.quest.customization&&e.quest.customization.removeScoring?e._e():r("div",[e.quest.rating&&e.quest.rating.rounded?r("q-rating",{attrs:{readonly:"",color:"yellow-8",max:5,size:"0.8em"},model:{value:e.quest.rating.rounded,callback:function(t){e.$set(e.quest.rating,"rounded",t)},expression:"quest.rating.rounded"}}):e._e()],1)]),"room"===e.quest.type&&e.quest.premiumPrice.manual?r("div",[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),r("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.premiumPrice.tier&&"quest"===e.quest.type&&e.quest.premiumPrice.manual&&"free"===e.shop.premiumQuest.priceCode?r("div",[r("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),r("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.location&&e.quest.location.address?r("div",{staticClass:"text-subtitle1 q-mt-sm quest-location",on:{click:function(t){return e.goToLocationWithMaps(e.quest.location.coordinates[0],e.quest.location.coordinates[1])}}},[r("u",[e._v(" "+e._s(e.quest.location.address))])]):e._e(),e.quest.warning?r("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning",on:{click:function(t){return e.openWarningLink()}}},[r("q-icon",{attrs:{color:"secondary",name:"warning"}}),r("u",[e._v(e._s(e.getTranslatedData(e.quest.warning)))])],1):e._e(),e.quest.playersNumber&&e.quest.playersNumber>1?r("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning"},[r("q-icon",{attrs:{color:"secondary",name:"group"}}),e._v(" "+e._s(e.$t("label.YouNeedToBeXPlayers",{nb:e.quest.playersNumber}))+"\n      ")],1):e._e(),r("div",{staticClass:"text-subtitle1 q-mt-sm quest-ranking"},[r("a",{staticClass:"concertone",on:{click:function(t){return e.$router.push("/user/ranking/ranking/"+e.quest.questId)}}},[e._v(e._s(e.$t("label.Ranking")))])])]):e._e(),r("div",{staticClass:"quest-home-button"},[r("div",{staticClass:"text-center q-pt-md"},[r("p",[!e.isQuestOpen.status||"quest"!==e.quest.type||e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)||this.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||!e.getAllLanguages()?e._e():r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[e.continueQuest?r("span",[e._v(e._s(e.$t("label.ContinueTheQuest")))]):e._e(),!e.continueQuest&&e.isRunFinished?r("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))]):e._e(),e.continueQuest||e.isRunFinished?e._e():r("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]),"room"===e.quest.type&&e.quest.readMoreLink&&""!==e.quest.readMoreLink?r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:e.openReadMoreLink}},[r("span",[e._v(e._s(e.$t("label.Book")))])]):e._e(),!e.isQuestOpen.status||e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyCoins()}}},[r("span",[e._v(e._s(e.$t("label.BuyCoinsToPlay")))])]),e.isQuestOpen.status&&this.isUserTooFar&&!e.quest.allowRemotePlay?r("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[r("span",[e._v(e._s(e.$t("label.GetCloserToStartingPoint"))+" ("+e._s(e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m")+")")])]):e._e(),e.isQuestOpen.status&&e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)&&"notplayableonweb"!==e.shop.premiumQuest.priceCode&&(!this.isUserTooFar||e.quest.allowRemotePlay)?r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[r("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]):e._e(),!e.isQuestOpen.status||"notplayableonweb"!==e.shop.premiumQuest.priceCode||e.isAdmin||e.isOwner?e._e():r("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[r("span",[e._v(e._s(e.$t("label.QuestPlayableOnMobile")))])]),e.isQuestOpen.status&&"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[r("span",[e._v(e._s(e.$t("label.TestYourQuest")))])]):e._e(),e.isQuestOpen.status?e._e():r("span",[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.isQuestOpen.displayHours=!0}}},[r("span",[e._v(e._s(e.$t("label.OpeningHours")))])]),r("div",[e._v(e._s(e.$t("label.QuestIsNotPlayableNow")))])],1)],1)])]),r("div",{staticClass:"q-pa-md"},[r("div",{staticClass:"text-subtitle2",domProps:{innerHTML:e._s(this.quest.description)}}),e.isUserTooFar&&!e.quest.allowRemotePlay?r("div",{staticClass:"q-pt-md"},[r("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),r("span",{domProps:{innerHTML:e._s(e.$t("label.QuestIsFarFromUser"))}})],1):e._e()]),e.isOwner||e.isAdmin?r("div",{staticClass:"q-pa-md subtitle5 centered"},[r("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),r("span",{domProps:{innerHTML:e._s(e.$t("label.YouAreQuestOwnerDesc"))}}),e._v("\n       "),r("q-btn",{attrs:{flat:"",color:"secondary",label:e.$t("label.Modify")},on:{click:function(t){return e.modifyQuest()}}})],1):e._e(),"room"===e.quest.type?r("div",{staticClass:"q-pa-md subtitle5"},[e._v("\n      "+e._s(e.$t("label.RoomDataWarning"))+"\n    ")]):e._e()]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreloaderPopup,expression:"showPreloaderPopup"}],staticClass:"panel-bottom background-dark"},[r("div",{staticClass:"reduce-window-size-desktop"},[r("div",{staticClass:"centered q-pa-lg title2 text-primary background-lighter"},[r("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.InProgressPreparation")))]),r("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),e.offline.show?r("div",{staticClass:"centered"},[r("offlineLoader",{attrs:{quest:this.quest,design:"prepare",lang:e.getLanguage()},on:{end:function(t){return e.showCalibrationAndStartQuest()}}})],1):e._e(),r("div",[r("div",{staticClass:"q-px-lg q-pb-lg q-pt-md centered subtitle2"},[e._v("\n            "+e._s(e.$t("label.Warnings"))+"\n          ")]),r("div",{staticClass:"q-pa-md subtitle5"},[r("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),r("span",{domProps:{innerHTML:e._s(e.$t("label.GeneralWarning"))}})],1),e.isRunFinished?r("div",{staticClass:"q-pa-md subtitle5"},[r("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),r("span",{domProps:{innerHTML:e._s(e.$t("label.YouAlreadyDidThisQuest"))}})],1):e._e()]),r("gpscalibration",{ref:"gpscal",on:{end:function(t){e.startQuest(e.quest.questId,e.getLanguage())}}})],1)])]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.multiplayer.show,expression:"multiplayer.show"}],staticClass:"panel-bottom background-dark"},[r("div",{staticClass:"reduce-window-size-desktop"},[r("div",{staticClass:"bottom-margin-for-keypad"},[r("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n            "+e._s(e.$t("label.ThisIsAMultiplayerGame"))+"\n          ")]),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.JoinATeam")))])]),r("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[r("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanMultiplayerQRCode}},[r("span",[e._v(e._s(e.$t("label.ScanTheLeaderQRCode")))])])],1)],1)],1),r("div",{staticClass:"centered"},[e._v("\n            -\n            "),r("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n            -\n          ")]),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.CreateATeam")))])]),r("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[""===e.multiplayer.qrcode?r("div",{staticClass:"centered"},[r("q-input",{attrs:{dark:"",type:"text",label:e.$t("label.TeamName"),"bottom-slots":"",counter:"",maxlength:"20"},model:{value:e.multiplayer.team,callback:function(t){e.$set(e.multiplayer,"team",t)},expression:"multiplayer.team"}}),r("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.createTeam}},[r("span",[e._v(e._s(e.$t("label.CreateTeam")))])])],1):e._e(),""!==e.multiplayer.qrcode?r("div",{staticClass:"centered"},[r("div",[e._v(e._s(e.$t("label.OtherPlayersMustScanThisQRCode")))]),r("div",{staticClass:"q-pa-md"},[r("img",{attrs:{src:e.serverUrl+"/upload/teams/"+e.multiplayer.qrcode+".png"}})]),r("div",[r("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.checkTeamAndStart}},[r("span",[e._v(e._s(e.$t("label.MyTeamIsCompleteLetsGo")))])])],1)]):e._e()])],1)],1)])])])]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.shop.show,expression:"shop.show"}],staticClass:"panel-bottom background-dark"},[r("div",{staticClass:"reduce-window-size-desktop"},[r("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[r("q-icon",{attrs:{name:"close"}})],1),r("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n          "+e._s(e.$t("label.BuyThisQuest"))+"\n        ")]),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&!e.isIOs?r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.YouHaveReceivedAQrCodeFrom",{author:e.quest.author.name})))])]),r("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[r("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanTierPaymentQRCode}},[r("span",[e._v(e._s(e.$t("label.ScanTheUniqueQRCode")))])])],1)],1)],1):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&e.quest.premiumPrice.active&&!e.isIOs?r("div",{staticClass:"centered"},[e._v("\n          -\n          "),r("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n          -\n        ")]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.active?r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.BuyInOneClick")))])]),r("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():r("q-btn",{staticClass:"glossy large-button text-primary bg-white",attrs:{disabled:!e.shop.premiumQuest.buyable},on:{click:function(t){return e.buyQuest()}}},[r("span",[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue)+")")])])],1)],1)],1):e._e(),r("div",{staticClass:"centered"},[r("q-btn",{attrs:{flat:"",color:"primary"},on:{click:e.closeShop}},[e._v(e._s(e.$t("label.Cancel")))])],1)])])]),r("q-dialog",{model:{value:e.showRewardsPopup,callback:function(t){e.showRewardsPopup=t},expression:"showRewardsPopup"}},[r("q-card",[r("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.ScoreAndBadges"))+"\n        "),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),r("q-separator"),r("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.OnThisEscapeGameYouCanWin"))+"\n        "),r("ul",[e.quest.availablePoints&&e.quest.availablePoints.minPts&&e.quest.availablePoints.maxPts?r("li",[e._v(e._s(e.$t("label.ScoreRange",{min:e.quest.availablePoints.minPts,max:e.quest.availablePoints.maxPts})))]):e._e(),e.quest.rewardPicture&&""!==e.quest.rewardPicture?r("li",[e._v(e._s(e.$t("label.OneBadge")))]):e._e()])])],1)],1),r("q-dialog",{model:{value:e.isQuestOpen.displayHours,callback:function(t){e.$set(e.isQuestOpen,"displayHours",t)},expression:"isQuestOpen.displayHours"}},[r("q-card",[r("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.OpeningHours"))+"\n        "),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),r("q-separator"),r("q-card-section",{staticClass:"subtitle5"},[e.quest.scheduling&&e.quest.scheduling.length>0?r("div",[r("div",{staticClass:"centered q-pb-md"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.quest.scheduling,(function(t,a){return r("div",{key:a,staticClass:"row"},[r("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),r("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.From"))+" "+e._s(t[0])+"h\n            ")]),r("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.To"))+" "+e._s(t[1])+"h\n            ")])])}))],2):e._e()])],1)],1),e.geolocationIsSupported?e._e():r("div",{staticClass:"fixed-bottom over-map"},[r("div",{staticClass:"centered bg-warning q-pa-sm"},[r("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1)])],1)},yr=[],_r=(r("b54a"),{getById:function(e){return Re().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Re().get("run/quest/"+e,{"axios-retry":t}).catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return Re().get("run/quest/"+e+"/ranking/friends").catch((function(e){return console.log(e.request)}))},checkNumberOfPlayers:function(e){return Re().get("run/quest/"+e+"/players/number").catch((function(e){return console.log(e.request)}))},getRankingForAQuest:function(e){return Re().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return Re().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e,t){return Re().get("run/"+e+"/step/next/player/"+t).catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t,r){return Re().get("run/"+e+"/marker/"+t+"/next/player/"+r).catch((function(e){return console.log(e.request)}))},listWonObjects:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().get("quest/"+e+"/runs/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),r)})))()},getHint:function(e,t,r,a){return n()(i.a.mark((function s(){var n;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a||(a="default"),i.next=3,Re().get("run/"+e+"/step/"+t+"/version/"+r+"/hint/lang/"+a);case 3:return n=i.sent,i.abrupt("return",n.data);case 5:case"end":return i.stop()}}),s)})))()},init:function(e,t,r,a,i,s){return i||(i="noteamnamedefined"),Re().post("run/quest/"+e+"/version/"+t+"/init/"+r+"/remote/"+a+"/team/"+i+"/datashared/"+s).catch((function(e){return console.log(e.request)}))},initTeamPlay:function(e,t,r,a,i){return Re().post("run/teamplay/quest/"+e+"/init/"+t+"/"+r+"/"+a+"/"+i).catch((function(e){return console.log(e.request)}))},addTeamPlayer:function(e){return Re().post("run/join/"+e).catch((function(e){return console.log(e.request)}))},createATeam:function(e,t){return Re().post("run/quest/"+questId+"/version/"+version+"/init/"+lang+"/remote/"+remotePlay).catch((function(e){return console.log(e.request)}))},checkTeamIsReady:function(e){return Re().get("run/"+e+"/check/team/ready").catch((function(e){return console.log(e.request)}))},endRun:function(e,t,r,a,i){return Re().put("run/"+e+"/quest/"+r+"/version/"+a+"/lang/"+i+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t,r){return Re().put("run/"+e+"/passstep/"+t+"/player/"+r).catch((function(e){return console.log(e.request)}))},closeInProgressRuns:function(e){return Re().post("run/quest/"+e+"/close").catch((function(e){return console.log(e.request)}))},createMultiplayerRunForTesters:function(e){return Re().post("run/quest/"+e+"/test/create").catch((function(e){return console.log(e.request)}))}}),Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.offline.progress>0&&e.offline.progress<1?r("div",{staticClass:"centered q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():r("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():r("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.Downloading")))]),e.error.raised?e._e():r("div",{staticClass:"q-pa-md"},[r("q-linear-progress",{staticStyle:{height:"5px"},attrs:{color:"primary","track-color":"grey-1",value:e.offline.progress}}),e.isIOs?r("div",{staticClass:"centered"},[e._v("\n        "+e._s(parseInt(100*e.offline.progress,10))+" %\n      ")]):e._e()],1),e.error.raised&&e.error.nb<2?r("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+" \n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?r("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+" \n    ")]):e._e()]):e._e()])},xr=[],Cr={listForAQuest:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r||(r="default"),a.next=3,Re().get("quest/"+e+"/version/"+t+"/steps/lang/"+r).catch((function(e){return console.log(e.request)}));case 3:return s=a.sent,a.abrupt("return",s);case 5:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,r,a){return n()(i.a.mark((function s(){var n;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a||(a="default"),i.next=3,Re().get("quest/"+e+"/version/"+r+"/chapter/"+t+"/steps/lang/"+a).catch((function(e){return console.log(e.request)}));case 3:return n=i.sent,i.abrupt("return",n);case 5:case"end":return i.stop()}}),s)})))()},listWonObjects:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().get("quest/"+e+"/version/"+r+"/steps/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()},getById:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r||(r="default"),a.next=3,Re().get("step/"+e+"/version/"+t+"/lang/"+r).catch((function(e){return console.log(e.request)}));case 3:return s=a.sent,a.abrupt("return",s);case 5:case"end":return a.stop()}}),a)})))()},checkAnswer:function(e,t,r,a,s,o){var l=arguments;return n()(i.a.mark((function n(){var c,u;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c=l.length>6&&void 0!==l[6]?l[6]:{},i.next=3,Re().post("quest/"+e+"/version/"+r+"/step/"+t+"/check/"+a+"/player/"+o,s,{"axios-retry":c}).catch((function(e){return console.log(e.request)}));case 3:return u=i.sent,i.abrupt("return",u);case 5:case"end":return i.stop()}}),n)})))()},countForAQuest:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().get("quest/"+e+"/version/"+t+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),r)})))()},save:function(e){return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().put("quest/"+e.questId+"/version/"+e.version+"/step/"+e.stepId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return r=t.sent,t.next=5,tt.removeFromCache(e.questId);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},modifyChapter:function(e){return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().put("quest/"+e.questId+"/version/"+e.version+"/chapter/"+e.chapterId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return r=t.sent,t.next=5,tt.removeFromCache(e.questId);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},remove:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().delete("quest/"+e+"/version/"+r+"/step/"+t+"/remove");case 2:return s=a.sent,a.next=5,tt.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},removeChapter:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().delete("quest/"+e+"/version/"+r+"/chapter/"+t+"/remove");case 2:return s=a.sent,a.next=5,tt.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},move:function(e,t,r,a){return n()(i.a.mark((function s(){var n;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Re().put("quest/"+e+"/version/"+t+"/step/"+r+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return n=i.sent,i.next=5,tt.removeFromCache(e);case 5:return i.abrupt("return",n);case 6:case"end":return i.stop()}}),s)})))()},moveChapter:function(e,t,r,a){return n()(i.a.mark((function s(){var n;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Re().put("quest/"+e+"/version/"+t+"/chapter/"+r+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return n=i.sent,i.next=5,tt.removeFromCache(e);case 5:return i.abrupt("return",n);case 6:case"end":return i.stop()}}),s)})))()},uploadBackgroundImage:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/background/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadAnswerImage:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/choose-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadMemoryImage:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/memory/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadCodeAnswerImage:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/code-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadVideo:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/video/upload",t,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadPuzzleImage:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().post("/quest/"+e+"/step/jigsaw-puzzle/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=r.sent,r.next=5,tt.removeFromCache(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},uploadItemImage:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().post("/quest/"+e+"/step/"+t+"/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,tt.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadItemObject:function(e,t,r){return n()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().post("/quest/"+e+"/step/3dobject/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,tt.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e,t,r){return n()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().post("/quest/"+e+"/step/character/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,tt.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadAlternativeImage:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().post("/quest/"+e+"/step/"+t+"/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,tt.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadSnapshot:function(e,t,r){return n()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",Re().post("/quest/"+e+"/snapshot/upload",t,{timeout:6e5,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r(!1,e)})));case 1:case"end":return a.stop()}}),a)})))()},generateTextsExportFile:function(e,t,r){return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().get("quest/"+e+"/version/"+t+"/"+r+"/export/texts").catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()}},qr={props:["quest","design","lang"],watch:{quest:function(){var e=n()(i.a.mark((function e(t,r){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.saveOfflineQuest(e.quest);case 4:case"end":return t.stop()}}),t)})))()},methods:{saveOfflineQuest:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.error.raised=!1,r.next=3,tt.isCached(e.questId);case 3:if(a=r.sent,t.offline.progress=.1,a){r.next=11;break}return r.next=8,t.saveQuestData(e);case 8:if(s=r.sent,s){r.next=11;break}return r.abrupt("return");case 11:t.offline.progress=1,n=t,setTimeout((function(){n.$emit("end")}),3e3);case 14:case"end":return r.stop()}}),r)})))()},addQuestInOfflineList:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,et.checkIfFileExists("","quests.json");case 2:if(a=r.sent,!a){r.next=10;break}return r.next=6,et.readFile("","quests.json");case 6:n=r.sent,s=JSON.parse(n),r.next=11;break;case 10:s={list:[]};case 11:for(o=!1,l=0;l<s.list.length;l++)s.list[l].questId===e&&(o=!0);return o||s.list.push(t.quest),r.next=16,et.writeInFile("","quests.json",JSON.stringify(s),!0);case 16:case"end":return r.stop()}}),r)})))()},saveQuestData:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T,E;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,et.setTimeout(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.cancelSavingTooLong(a.quest.questId);case 2:case"end":return e.stop()}}),e)}))),42e4),r.next=4,Cr.listForAQuest(e.questId,e.version,t.lang);case 4:for(s=r.sent,o=s.data.steps,l=s.data.chapters,t.quest.steps=[],c=0;c<o.length;c++)t.quest.steps.push(o[c].stepId);for(t.quest.chapters=[],c=0;c<l.length;c++)t.quest.chapters.push(l[c].chapterId);if(t.error.raised){r.next=194;break}return r.next=14,et.writeInFile(e.questId,"quest_"+e.questId+".json",JSON.stringify(e),!0);case 14:if(u=r.sent,u){r.next=18;break}return t.throwSaveError("Could not create quest file for quest "+e.questId),r.abrupt("return",!1);case 18:return r.next=20,t.addQuestInOfflineList(e.questId);case 20:if(t.error.raised){r.next=191;break}if(t.offline.progress=.2,!e.picture||""===e.picture){r.next=29;break}return r.next=25,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.picture);case 25:if(d=r.sent,d){r.next=29;break}return t.throwSaveError("Could not create quest picture for quest "+e.questId),r.abrupt("return",!1);case 29:if(t.offline.progress+=.1,!e.customization||!e.customization.character||""===e.customization.character){r.next=33;break}return r.next=33,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.character);case 33:if(!e.customization||!e.customization.logo||""===e.customization.logo){r.next=36;break}return r.next=36,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.logo);case 36:if(!e.customization||!e.customization.audio||""===e.customization.audio){r.next=39;break}return r.next=39,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.audio);case 39:if(!s||!s.data){r.next=188;break}p=Math.ceil(70/o.length)/100,c=0;case 42:if(!(c<o.length)){r.next=175;break}if(!t.error.raised){r.next=45;break}return r.abrupt("return",!1);case 45:return f=o[c],r.next=48,et.writeInFile(e.questId,"step_"+f.stepId+".json",JSON.stringify(f),!0);case 48:if(m=r.sent,m){r.next=52;break}return t.throwSaveError("Could not save step file for quest "+e.questId+" and step "+f.stepId),r.abrupt("return",!1);case 52:if(!f.backgroundImage||""===f.backgroundImage){r.next=59;break}return r.next=55,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/background/",f.backgroundImage);case 55:if(h=r.sent,h){r.next=59;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+f.stepId),r.abrupt("return",!1);case 59:if(!f.videoStream||""===f.videoStream){r.next=66;break}return r.next=62,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/video/",f.videoStream);case 62:if(b=r.sent,b){r.next=66;break}return t.throwSaveError("Could not save video for quest "+e.questId+" and step "+f.stepId),r.abrupt("return",!1);case 66:if("choose"!==f.type||!f.options||!f.options.items){r.next=80;break}g=!0,v=0;case 69:if(!(v<f.options.items.length)){r.next=80;break}if(!f.options.items[v].imagePath){r.next=77;break}return r.next=73,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/",f.options.items[v].imagePath);case 73:if(g=r.sent,g){r.next=77;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "choose-image" '+f.stepId),r.abrupt("return",!1);case 77:v++,r.next=69;break;case 80:if("memory"!==f.type||!f.options||!f.options.items){r.next=94;break}w=!0,v=0;case 83:if(!(v<f.options.items.length)){r.next=94;break}if(!f.options.items[v].imagePath){r.next=91;break}return r.next=87,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/memory/",f.options.items[v].imagePath);case 87:if(w=r.sent,w){r.next=91;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "memory" '+f.stepId),r.abrupt("return",!1);case 91:v++,r.next=83;break;case 94:if("code-image"!==f.type||!f.options||!f.options.images){r.next=108;break}k=!0,v=0;case 97:if(!(v<f.options.images.length)){r.next=108;break}if(!f.options.images[v].imagePath){r.next=105;break}return r.next=101,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/",f.options.images[v].imagePath);case 101:if(k=r.sent,k){r.next=105;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "code-image" '+f.stepId),r.abrupt("return",!1);case 105:v++,r.next=97;break;case 108:if("jigsaw-puzzle"!==f.type||!f.options||!f.options.picture||""===f.options.picture){r.next=115;break}return r.next=111,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/",f.options.picture);case 111:if(y=r.sent,y){r.next=115;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "jigsaw-puzzle" '+f.stepId),r.abrupt("return",!1);case 115:if("new-item"!==f.type||!f.options||!f.options.picture||""===f.options.picture){r.next=129;break}if(-1!==f.options.picture.indexOf("statics")){r.next=129;break}if(!f.options.pictures||!f.options.pictures[t.lang]||""===f.options.pictures[t.lang]){r.next=123;break}return r.next=120,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/",f.options.pictures[t.lang]);case 120:_=r.sent,r.next=126;break;case 123:return r.next=125,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/",f.options.picture);case 125:_=r.sent;case 126:if(_){r.next=129;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "new-item" '+f.stepId),r.abrupt("return",!1);case 129:if("character"!==f.type||!f.options||!f.options.character||""===f.options.character||"usequestcharacter"===f.options.character){r.next=137;break}if(!(f.options.character.length>3)){r.next=137;break}return r.next=133,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/character/",f.options.character);case 133:if(S=r.sent,S){r.next=137;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "character" '+f.stepId),r.abrupt("return",!1);case 137:if("find-item"!==f.type&&"use-item"!==f.type||!f.options||!f.options.altFile||""===f.options.altFile){r.next=145;break}if(!(f.options.altFile.length>3)){r.next=145;break}return r.next=141,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/background/",f.options.altFile);case 141:if(x=r.sent,x){r.next=145;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+f.stepId),r.abrupt("return",!1);case 145:if("locate-item-ar"!==f.type||!f.options){r.next=169;break}if(!f.options.picture||""===f.options.picture){r.next=153;break}return r.next=149,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/",f.options.picture);case 149:if(C=r.sent,C){r.next=153;break}return t.throwSaveError("Could not save 2D image for quest "+e.questId+' and step "locate-item-ar" '+f.stepId),r.abrupt("return",!1);case 153:if(!f.options.is3D){r.next=169;break}if(!f.options.customModel){r.next=163;break}return r.next=157,et.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/3dobject/",f.options.customModel+".glb");case 157:if(q=r.sent,q){r.next=161;break}return t.throwSaveError("Could not save custom 3D model for quest "+e.questId+' and step "locate-item-ar" '+f.stepId),r.abrupt("return",!1);case 161:r.next=169;break;case 163:return r.next=165,et.saveBinaryFile(e.questId,t.serverUrl+"/statics/3d-models/",f.options.model+".glb");case 165:if(T=r.sent,T){r.next=169;break}return t.throwSaveError("Could not save standard 3D model for quest "+e.questId+' and step "locate-item-ar" '+f.stepId),r.abrupt("return",!1);case 169:if(!t.error.raised){r.next=171;break}return r.abrupt("return",!1);case 171:t.offline.progress+=p;case 172:c++,r.next=42;break;case 175:c=0;case 176:if(!(c<l.length)){r.next=188;break}if(!t.error.raised){r.next=179;break}return r.abrupt("return",!1);case 179:return r.next=181,et.writeInFile(e.questId,"chapter_"+l[c].chapterId+".json",JSON.stringify(l[c]),!0);case 181:if(E=r.sent,E){r.next=185;break}return t.throwSaveError("Could not save chapter "+l[c].chapterId+" for quest "+e.questId),r.abrupt("return",!1);case 185:c++,r.next=176;break;case 188:return r.abrupt("return",!0);case 191:return r.abrupt("return",!1);case 192:r.next=195;break;case 194:return r.abrupt("return",!1);case 195:case"end":return r.stop()}}),r)})))()},throwSaveError:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.error("OfflineLoader error: "+e),ft(t.$t("label.ErrorOfflineSaving"),"error"),t.error.raised=!0,t.error.nb++,a=t,t.$q.dialog({dark:!0,message:a.$t("label.ErrorDownloadNeedsToRestart"),ok:!0,cancel:!0}).onCancel(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$router.push("/home");case 1:case"end":return e.stop()}}),e)})))).onOk(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.cancelOfflineLoading(),a.removeOfflineData(),a.saveOfflineQuest(quest);case 3:case"end":return e.stop()}}),e)}))));case 6:case"end":return r.stop()}}),r)})))()},cancelSavingTooLong:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.offline.progress||1===e.offline.progress||e.error.raised||(ft(e.$t("label.ErrorOfflineSaving"),"error"),e.error.raised=!0,e.error.nb++);case 1:case"end":return t.stop()}}),t)})))()},cancelOfflineLoading:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,et.setTimeout(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.removeOfflineData(r.quest.questId);case 2:case"end":return e.stop()}}),e)}))),7e3),ft(e.$t("label.CancelOfflineWarning"),"warning"),e.offline.progress=0,e.$emit("end");case 5:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,et.removeDirectory(e);case 2:return a=r.sent,r.next=5,t.removeQuestFromOfflineList(e);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()},removeQuestFromOfflineList:function(e){return n()(i.a.mark((function t(){var r,a,s,n,o;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.checkIfFileExists("","quests.json");case 2:if(r=t.sent,!r){t.next=13;break}return t.next=6,et.readFile("","quests.json");case 6:for(s=t.sent,a=JSON.parse(s),n=-1,o=0;o<a.list.length;o++)a.list[o].questId===e&&(n=o);return-1!==n&&a.list.splice(n,1),t.next=13,et.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},Tr=qr,Er=Object(ye["a"])(Tr,Sr,xr,!1,null,null,null),Pr=Er.exports,Ar=r("b06b"),Mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{model:{value:e.geolocationshowCalibration,callback:function(t){e.geolocationshowCalibration=t},expression:"geolocationshowCalibration"}},[r("div",{staticClass:"bg-black centered q-pa-md"},[r("img",{staticStyle:{width:"100%","max-width":"500px"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),r("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.WaveThePhoneForGPSPrecision")))])])])},Ir=[],Rr={data:function(){return{geolocationshowCalibration:!1}},methods:{askUserToCalibrateGPS:function(e){var t=this;this.geolocationshowCalibration=!0,setTimeout((function(){t.closeGPSCalibration(e)}),5500)},closeGPSCalibration:function(e){this.geolocationshowCalibration=!1,null!==e&&void 0!==e&&"locate-item-ar"===e?this.$emit("endvertical"):this.$emit("end")}}},Or=Rr,$r=Object(ye["a"])(Or,Mr,Ir,!1,null,null,null),Fr=$r.exports,Dr=r("b047c"),Nr=r.n(Dr),Lr={components:{shop:gt,offlineLoader:Pr,gpscalibration:Fr},data:function(){return{quest:{},ranking:{show:!1,items:[]},playStep:0,shop:{show:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1,alreadyPayed:!1}},offline:{active:!1,show:!1},warning:{questNotLoaded:!1,lowBattery:!1,tooMuchUsers:!1},serverUrl:"https://api.graaly.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isQuestOpen:{status:!0,displayHours:!1},isSharedWithPartners:!1,isOwner:!1,isAdmin:!1,showRewardsPopup:!1,showPreloaderPopup:!1,multiplayer:{show:!1,team:"",qrcode:""},geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,distanceFromStart:0,pageReady:!1,isHybrid:window.cordova,isIOs:et.isIOS()}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return et.clearAllRunningProcesses(),window.addEventListener("batterystatus",e.checkBattery,!1),t.next=4,e.initQuest();case 4:e.$store.state.history={items:[],index:0};case 5:case"end":return t.stop()}}),t)})))()},updated:Nr()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*et.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),et.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0}),(function(){e.geolocationIsSupported=!1,et.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3)}),{timeout:1e4,maximumAge:1e4}):(this.geolocationIsSupported=!1,et.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3))},checkIfQuestIsOpened:function(){if(this.quest.scheduling&&this.quest.scheduling.length>0&&!this.isAdmin&&!this.isOwner){var e=new Date,t=e.getDay();if(this.quest.scheduling[t]&&2===this.quest.scheduling[t].length){var r=e.getHours();this.quest.scheduling[t][0]<=r&&this.quest.scheduling[t][1]>r?this.isQuestOpen.status=!0:this.isQuestOpen.status=!1}}},initQuest:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.id);case 2:if(window.cordova&&e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&store.products.length>0&&e.$router.go(0),e.checkUserIsCloseFromStartingPoint(),e.$store.state.user.isAdmin&&(e.isAdmin=!0),e.quest.editorsUserId)for(r=0;r<e.quest.editorsUserId.length;r++)e.quest.editorsUserId[r]===e.$store.state.user._id&&(e.isOwner=!0);else e.$store.state.user._id===e.quest.authorUserId&&(e.isOwner=!0);if(e.checkIfQuestIsOpened(),!e.offline.active||!e.isOwner&&!e.isAdmin){t.next=10;break}return t.next=10,e.getQuest(e.quest.questId,!0);case 10:return t.next=12,e.getRun();case 12:return t.next=14,e.checkUserCanPlay();case 14:return t.next=16,e.initPay();case 16:return t.next=18,e.checkSimultaneousPlayers();case 18:case"end":return t.stop()}}),t)})))()},getQuest:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l,c;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,tt.isCached(e);case 2:if(s=a.sent,s&&!t){a.next=22;break}return r.offline.active=!1,a.next=7,tt.getLastById(e);case 7:if(n=a.sent,!n||!n.data||200!==n.status){a.next=18;break}if(r.quest=n.data,"undefined"===typeof r.quest.authorUserId){a.next=16;break}return a.next=13,Oe.getAccount(r.quest.authorUserId);case 13:n=a.sent,n&&n.data&&r.$set(r.quest,"author",n.data),r.quest.description=et.replaceBreakByBR(r.quest.description);case 16:a.next=20;break;case 18:throw r.$q.dialog({dark:!0,title:r.$t("label.TechnicalProblem"),message:r.$t("label.TechnicalProblemNetworkIssue"),ok:r.$t("label.BackToMap")}).onOk((function(){r.backToTheMap()})),new Error("Could not load quest with questId = '"+e+"'");case 20:a.next=42;break;case 22:return r.offline.active=!0,a.next=25,et.readFile(e,"quest_"+e+".json");case 25:if(o=a.sent,o){a.next=37;break}if(!t){a.next=31;break}r.warning.questNotLoaded=!0,a.next=35;break;case 31:return a.next=33,r.getQuest(e,!0);case 33:return l=a.sent,a.abrupt("return",l);case 35:a.next=42;break;case 37:return r.quest=JSON.parse(o),a.next=40,et.readBinaryFile(e,r.quest.picture);case 40:c=a.sent,r.quest.picture=c||"_default-quest-picture.png";case 42:return a.abrupt("return",!0);case 43:case"end":return a.stop()}}),a)})))()},showCalibrationAndStartQuest:function(){this.quest.hasGeolocationSteps?this.$refs.gpscal.askUserToCalibrateGPS():this.startQuest(this.quest.questId,this.getLanguage())},getRun:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_r.listForAQuest(e.quest.questId);case 2:if(r=t.sent,!(r&&r.data&&r.data.length>0)){t.next=8;break}for(a=0;a<r.data.length;a++)"finished"===r.data[a].status&&(e.isRunFinished=!0),"in-progress"===r.data[a].status&&r.data[a].currentStep&&(e.isRunStarted=!0);e.isRunStarted&&(e.continueQuest=!0,e.isOwner||e.startQuest(e.quest.questId,e.$route.params.lang)),t.next=12;break;case 8:return t.next=10,tt.isCached(e.quest.questId);case 10:s=t.sent,s&&(e.continueQuest=!0);case 12:case"end":return t.stop()}}),t)})))()},checkSimultaneousPlayers:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.quest.limitNumberOfPlayer){t.next=5;break}return t.next=3,_r.checkNumberOfPlayers(e.quest.questId);case 3:r=t.sent,r&&r.data&&parseInt(r.data,10)>=e.quest.limitNumberOfPlayer&&(e.warning.tooMuchUsers=!0);case 5:return t.next=7,et.writeInFile(e.quest.questId,"run_"+e.quest.questId+".json",JSON.stringify({}),!1);case 7:case"end":return t.stop()}}),t)})))()},checkBattery:function(e){e.level<50?this.warning.lowBattery=!0:this.warning.lowBattery=!1},checkUserCanPlay:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRunStarted&&!e.isRunFinished){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(e.quest.price>e.$store.state.user.coins)||e.isAdmin||e.isOwner){t.next=5;break}return e.isRunPlayable=!1,t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=2;break}return t.abrupt("return","free");case 2:if(e.quest.premiumPrice.active){t.next=4;break}return t.abrupt("return","free");case 4:if(!e.isRunStarted&&!e.isRunFinished){t.next=6;break}return t.abrupt("return","free");case 6:if(window.cordova){t.next=10;break}return e.isAdmin||e.isOwner||ft(e.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),e.shop.premiumQuest.priceCode="notplayableonweb",t.abrupt("return");case 10:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=13;break}return ft(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("return");case 13:return t.next=15,tt.hasPayed(e.quest.questId);case 15:if(r=t.sent,!(r&&r.data&&r.data.status&&"paied"===r.data.status)){t.next=20;break}return e.shop.premiumQuest.priceCode="free",e.shop.premiumQuest.alreadyPayed=!0,t.abrupt("return","free");case 20:e.shop.premiumQuest.priceCode=e.quest.premiumPrice.androidId,store.register({id:e.quest.premiumPrice.androidId,alias:e.quest.premiumPrice.androidId,type:store.CONSUMABLE}),store.error((function(e){ft(e.message+"(code: "+e.code+")","error")})),store.when(e.quest.premiumPrice.androidId).updated(e.displayPrice),store.when(e.quest.premiumPrice.androidId).approved((function(e){e.verify()})),store.when(e.quest.premiumPrice.androidId).verified(function(){var t=n()(i.a.mark((function t(r){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(r);case 2:a=t.sent,a?r.finish():ft(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 27:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.shop.premiumQuest.priceValue=e.price,e.canPurchase&&(this.shop.premiumQuest.buyable=!0)},savePurchase:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.purchasePremium(t.quest.questId,e);case 2:if(a=r.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){r.next=7;break}return t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang),r.abrupt("return",!0);case 7:return r.abrupt("return",!1);case 8:case"end":return r.stop()}}),r)})))()},buyQuest:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:store.order(e.quest.premiumPrice.androidId);case 1:case"end":return t.stop()}}),t)})))()},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t;if(t=this.isOwner||this.isAdmin?e.languages:e.languages.filter((function(e){return e.published})),t&&t.length>0){for(var r="",a=0;a<t.length;a++)t[a].lang===this.$store.state.user.language&&(r=this.$store.state.user.language);""===r&&t.length>0&&(r=t[0].lang)}else e.languages.length>0&&(r=e.languages[0].lang);return r},getTranslatedData:function(e){var t=this.getLanguage();return e[t]?e[t]:(this.quest.warning=null,"")},openWarningLink:function(){this.quest&&this.quest.warning&&this.quest.warning.link&&et.openExternalLink(this.quest.warning.link)},goToLocationWithMaps:function(e,t){Object(Ar["a"])("https://maps.google.com/?daddr=".concat(t,",").concat(e))},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},playQuest:function(e,t){var r=this;return n()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.quest.forcePlayerToHaveAccount||"-"!==r.$store.state.user.name){a.next=3;break}return r.$q.dialog({message:r.$t("label.YouNeedToCreateYourAccountToPlay"),ok:r.$t("label.Ok"),cancel:r.$t("label.Cancel")}).onOk((function(){r.$router.push("/profile/"+r.$store.state.user.id)})).onCancel((function(){return!1})),a.abrupt("return",!1);case 3:if(!r.quest.shareUserDataWithCreator||"-"===r.$store.state.user.name||r.isSharedWithPartners){a.next=7;break}r.$q.dialog({message:r.$t("label.PartnerAskForYouData"),options:{type:"checkbox",model:[],items:[{label:r.$t("label.ShareDataWithPartner"),value:"ok"}]},ok:r.$t("label.Ok"),cancel:r.$t("label.Cancel")}).onOk((function(a){a.length>0&&"ok"===a[0]&&(r.isSharedWithPartners=!0),r.playQuestLaunch(e,t)})).onCancel((function(){return!1})),a.next=9;break;case 7:return a.next=9,r.playQuestLaunch(e,t);case 9:case"end":return a.stop()}}),a)})))()},playQuestLaunch:function(e,t){var r=this;return n()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==r.playStep||!r.quest.premiumPrice||!r.quest.premiumPrice.tier&&!r.quest.premiumPrice.active||r.isAdmin||r.isOwner||r.isRunFinished||r.isRunStarted){t.next=11;break}if(!r.quest.premiumPrice.tier){t.next=8;break}return t.next=4,tt.checkTierPayment(e);case 4:a=t.sent,200===a.status?r.startPreloader():r.shop.show=!0,t.next=9;break;case 8:r.shop.show=!0;case 9:t.next=12;break;case 11:r.playStep<=1&&r.quest.playersNumber>1&&!r.continueQuest?(r.shop.show=!1,r.multiplayer.show=!0):r.startPreloader();case 12:case"end":return t.stop()}}),t)})))()},startPreloader:function(){if(this.shop.show=!1,this.multiplayer.show=!1,this.showPreloaderPopup=!0,this.isHybrid)this.offline.show=!0;else{var e=this;setTimeout((function(){e.showCalibrationAndStartQuest()}),3e3)}},openProfile:function(e){this.$router.push("/profile/"+e)},scanMultiplayerQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&(-1===t.text.indexOf("team_")?ft(e.$t("label.ThisIsNotATeamQRCodeValid"),"error"):e.checkTeamCode(t.text))}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},scanTierPaymentQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkTierPaymentCode(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},checkTeamCode:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_r.addTeamPlayer(e);case 2:a=r.sent,200===a.status?(t.playStep=2,t.playQuest(t.quest.questId,t.$route.params.lang)):ft(t.$t("label.ErrorMessageForNewTeamMember"),"error");case 4:case"end":return r.stop()}}),r)})))()},checkTierPaymentCode:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.useTierPaymentCode(t.quest.questId,e);case 2:a=r.sent,200===a.status?(t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang)):ft(t.$t("label.TechnicalIssueOrCodeAlreadyUsed"),"error");case 4:case"end":return r.stop()}}),r)})))()},createTeam:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multiplayer.team||""===e.multiplayer.team){t.next=7;break}return t.next=3,_r.init(e.quest.questId,e.quest.version,e.$route.params.lang,e.isUserTooFar,e.multiplayer.team,e.isSharedWithPartners);case 3:r=t.sent,200===r.status&&r.data&&r.data._id?(e.multiplayer.runId=r.data._id,e.multiplayer.qrcode=r.data._id):ft(e.$t("label.ErrorStandardMessage"),"error"),t.next=8;break;case 7:ft(e.$t("label.PleaseEnterYourTeamName"),"error");case 8:case"end":return t.stop()}}),t)})))()},checkTeamAndStart:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_r.checkTeamIsReady(e.multiplayer.runId);case 2:r=t.sent,200===r.status?(e.playStep=2,e.playQuest(e.quest.questId,e.$route.params.lang)):r.data&&r.data.members&&r.data.members.length>0?(a=r.data.members.join(", "),ft(e.$t("label.YouNeedMoreMembersToPlay",{nb:e.quest.playersNumber,members:a}),"warning")):ft(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},openReadMoreLink:function(){et.openExternalLink(this.quest.readMoreLink)},startQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar+"&sharepartner="+this.isSharedWithPartners)},showRewards:function(){this.showRewardsPopup=!0},backToTheMap:function(){this.$router.back()},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){return this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png"}}},jr=Lr,zr=Object(ye["a"])(jr,kr,yr,!1,null,null,null),Hr=zr.exports,Br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reduce-window-size-desktop"},[e.warnings.stepDataMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n  ")],1):e._e(),e.warnings.isNetworkLow?r("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?r("div",{staticClass:"centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?r("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():r("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),r("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),e.info&&""!==e.info.audio?r("audio",{attrs:{id:"background-music",autoplay:"",loop:"",src:e.info.audio}}):e._e(),r("div",{class:{fit:"image-over-flow"!==e.step.type}},[r("stepPlay",{attrs:{step:e.step,runId:e.runId,inventory:e.inventory,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,customization:e.info.quest.customization?e.info.quest.customization:{color:"primary"},answer:e.offline.answer,player:e.player},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.nextStep(!0)},hideButtons:e.hideFooterButtons,showButtons:e.showFooterButtons,msg:e.trackMessage}})],1),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[r("div",{staticClass:"q-pa-md"},[r("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[r("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),r("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"===this.step.type?r("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"!==this.step.type?r("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryZoom")))]):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():r("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),r("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return r("div",{key:a,on:{click:function(r){return e.selectItem(t)}}},[r("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?r("p",[e._v(e._s(t.titles[e.lang]))]):e._e(),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?e._e():r("p",[e._v(e._s(t.title))])])})),0)])])]),r("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[r("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?r("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?r("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[r("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?r("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[r("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),r("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),r("div",{staticClass:"q-pa-md text-grey"},[e._v(e._s(e.$t("label.YouCanNotUseAnItemInThisStep")))]),r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[r("div",[e._v(e._s(e.$t("label.Close")))])]),r("div",[r("q-btn-group",{attrs:{outline:""}},[r("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),r("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),r("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),r("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}],staticClass:"reduce-window-size-desktop"},[e.warnings.questDataMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.getQuest(e.questId)}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():r("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[e.info&&""!==e.info.audio?r("div",{staticClass:"fixed-top align-right full-width q-pa-lg"},[e.sound&&"play"===e.sound.status?r("q-btn",{attrs:{flat:"",color:"white",icon:"volume_off"},on:{click:e.cutSound}}):e._e(),e.sound&&"pause"===e.sound.status?r("q-btn",{attrs:{flat:"",color:"white",icon:"volume_up"},on:{click:e.cutSound}}):e._e()],1):e._e(),r("div",{staticClass:"text-center dark-banner q-pb-xl q-pt-md fixed-bottom"},[r("p",{staticClass:"title"},[e._v("\n            "+e._s(e.info.quest&&e.info.quest.title?e.info.quest.title:e.$t("label.NoTitle"))+"\n          ")]),e.run&&e.run.team&&e.run.team.name?r("p",[e._v("\n            "+e._s(e.$t("label.Team"))+" : "+e._s(e.run.team.name)+"\n          ")]):e._e(),r("p",[e.info.quest&&e.info.quest.customization&&e.info.quest.customization.removeScoring?e._e():r("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[r("span",[e._v("\n                "+e._s(e.$t("label.LeaveQuest"))+"\n              ")])])],1),r("p",[e.info.quest&&e.info.quest.playersNumber&&e.info.quest.playersNumber<2?r("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.restartGame}},[r("span",[e._v("\n                "+e._s(e.$t("label.RestartQuest"))+"\n              ")])]):e._e()],1),r("p",[e.offline.active?e._e():r("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[r("span",[e._v("\n                "+e._s(e.$t("label.Feedback"))+"\n              ")])])],1),r("p",{staticClass:"q-pb-xl"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"secondary"},on:{click:e.openInfo}},[r("span",[e._v("\n                "+e._s(e.$t("label.BackToQuest"))+"\n              ")])])],1),r("p",{staticClass:"q-pb-lg"})])])])]),e.hint.isOpened?r("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[r("story",{attrs:{step:"hint",data:{hint:e.hint.label,character:e.info.quest.customization&&e.info.quest.customization.character&&""!==e.info.quest.customization.character?-1===e.info.quest.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.info.quest.customization.character:e.info.quest.customization.character:"3"}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?r("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[r("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),r("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[r("div",{staticClass:"bg-white q-pa-md reduce-window-size-desktop"},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),r("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[r("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),r("div",{staticClass:"q-pa-md q-gutter-sm centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),r("div",{staticClass:"q-pt-md"},[r("a",{staticClass:"dark",on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Cancel")))])])],1)])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu step-menu-fixed fixed-bottom"},[r("div",{staticClass:"row white-buttons"},[r("div",{staticClass:"col centered q-pb-md"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():r("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}}),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?r("q-btn",{staticClass:"bg-white",staticStyle:{"padding-top":"0 !important"},attrs:{round:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[r("q-avatar",{attrs:{size:"60px"}},[r("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}},[this.step&&this.step.hint?r("q-badge",{attrs:{color:"secondary",floating:""}},[e._v(e._s(this.hint.remainingNumber))]):e._e()],1)],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",disable:0===e.$store.state.history.index,icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.next.enabled||e.next.canPass,expression:"next.enabled || next.canPass"}],class:{flashing:e.next.suggest,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])])],1)},Ur=[],Qr=(r("6762"),r("2fdb"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fit",class:{"bg-black":"locate-marker"===e.step.type||"sensor"===e.step.id,loaded:e.pageReady},attrs:{id:"play-view"}},["image-over-flow"!==e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type?r("div",{staticClass:"step-background",class:{"effect-kenburns":e.step.options&&e.step.options.kenBurnsEffect},attrs:{id:"background-image"}}):e._e(),r("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden"},[null!==e.step.countDownTime&&void 0!==e.step.countDownTime&&!0===e.step.countDownTime.enabled?r("q-linear-progress",{staticClass:"timer-progress-bar",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{value:e.map(this.countdowntimeleft,0,this.step.countDownTime.time,0,1),color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"white":"primary","instant-feedback":!0}}):e._e(),e.isNetworkLow?r("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type||"help"==e.step.type?r("div",{staticClass:"info"},[e.showTools&&""!=e.getTranslatedText()?r("div",{class:{grow:!e.step.videoStream},attrs:{id:"info-clickable"}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"help"!==e.step.type&&"info-video"!==e.step.type?r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1):e._e()]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1),e.step.videoStream?r("div",{staticClass:"video"},[r("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[r("source",{attrs:{src:e.step.videoStream&&-1!==e.step.videoStream.indexOf("blob:")?e.step.videoStream:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream,type:"video/mp4"}})])]):e._e()]):e._e(),"help"==e.step.type?r("div",{staticStyle:{overflow:"auto","margin-bottom":"80px"}},[r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessage"))}}),e.step.options&&e.step.options.helpNext?r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageNextMessage"))}}):e._e(),e.step.options&&e.step.options.helpPrevious?r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessagePreviousMessage"))}}):e._e(),e.step.options&&e.step.options.helpInventory?r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageInventoryMessage"))}}):e._e(),e.step.options&&e.step.options.helpHint?r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageHintMessage"))}}):e._e(),r("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageEnd"))}})]):e._e(),"new-item"==e.step.type?r("div",{staticClass:"new-item"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"item"},[r("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture}}),r("p",[r("span",[e._v(e._s(e.step.options.title))])])])]):e._e(),"end-chapter"==e.step.type?r("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"character"==e.step.type?r("div",{staticClass:"character"},[r("div",{staticClass:"fixed-bottom-character story",on:{click:function(t){return e.nextCharacterBubbleText()}}},[e._m(0),r("div",{staticClass:"bubble-middle",staticStyle:{"font-size":"0.9em",background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[e.character.needToScroll?r("div",{staticClass:"scroll-indicator"},[r("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),!(e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber])||e.step.options&&e.step.options.html?e._e():r("p",{ref:"bubbleText",staticClass:"carrier-return",class:"font-"+e.customization.font},[e._v(e._s(e.character.bubbleText[e.character.bubbleNumber]))]),e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber]&&e.step.options&&e.step.options.html?r("p",{ref:"bubbleTextHtml",staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.character.bubbleText[e.character.bubbleNumber])}}):e._e(),e.character.bubbleNumber<e.character.numberOfBubble-1?r("p",{staticClass:"text text-grey"},[e._v(e._s(e.$t("label.ReadNext")))]):e._e()]),e._m(1),r("div",{staticClass:"character"},[e.step.options.character.length<3?r("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.step.options.character+"_attitude1.png"}}):e._e(),e.step.options.character.length>2&&"usequestcharacter"!==e.step.options.character?r("img",{staticStyle:{"max-width":"100%","max-height":"200px","vertical-align":"bottom"},attrs:{src:-1!==e.step.options.character.indexOf("blob:")?e.step.options.character:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.step.options.character}}):e._e(),"usequestcharacter"===e.step.options.character?r("img",{staticStyle:{"max-width":"100%","max-height":"200px","vertical-align":"bottom"},attrs:{src:-1===e.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]),r("div",{staticClass:"full-width bg-black",staticStyle:{height:"70px"}})])]):e._e(),"choose"==e.step.type?r("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?r("div",[r("div",{on:{click:e.hideControlsTemporaly}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),"text"===e.answerType?r("div",{staticClass:"answers-text"},e._l(e.step.options.items,(function(t,a){return r("q-btn",{key:a,staticClass:"full-width shadowed",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+a},on:{click:function(t){return e.checkAnswer(a)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():r("span",{class:"font-"+e.customization.font},[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?r("span",{class:"font-"+e.customization.font},[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?r("div",{staticClass:"answers-images"},[r("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,a){return r("div",{key:a,class:t.class,attrs:{"test-id":"answer-image-"+a},on:{click:function(t){return e.checkAnswer(a)}}},[r("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?r("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e(),r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-keypad"==e.step.type?r("div",{staticClass:"code"},[e.showTools?r("div",[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"typed-code"},[r("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[r("tr",e._l(e.playerCode,(function(t,a){return r("td",{key:a,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)])]),r("div",{staticClass:"keypad"},[r("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,a){return r("div",{key:a},e._l(t,(function(t,a){return r("q-btn",{key:a,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(r){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mb-md q-px-md"},[r("div",[r("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[r("div",[e._v("\n                  "+e._s(e.$t("label.Clear"))+"\n                ")])]),r("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[r("div",[e._v("\n                  "+e._s(e.$t("label.Confirm"))+"\n                ")])])],1)]),r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-color"==e.step.type?r("div",{staticClass:"code code-color"},[e.showTools?r("div",[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"color-bubbles"},e._l(e.playerCode,(function(t,a){return r("div",{key:a,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[a],attrs:{"test-id":"color-code-"+a},on:{click:function(t){return e.changeColorForCode(a)}}},[e._v(" ")])})),0),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[r("div",[r("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[r("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-image"==e.step.type?r("div",{staticClass:"code code-image"},[e.showTools?r("div",[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("table",[r("tr",e._l(e.playerCode,(function(t,a){return r("td",{key:a,staticClass:"text-center"},[r("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}})],1)})),0),r("tr",e._l(e.playerCode,(function(t,a){return r("td",{key:a},[r("img",{attrs:{id:"image-code-"+a,src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(a)}}})])})),0),r("tr",e._l(e.playerCode,(function(t,a){return r("td",{key:a,staticClass:"text-center"},[r("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}})],1)})),0)]),r("div",{staticClass:"centered text-grey q-py-md"},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[r("div",[r("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[r("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"geolocation"==e.step.type?r("div",{staticClass:"geolocation"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.step.showDistanceToTarget&&e.geolocation.active?r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e()])]):e._e(),"write-text"==e.step.type?r("div",{staticClass:"write-text"},[e.showTools?r("div",[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"answer-text q-pa-md"},[r("input",{staticClass:"subtitle6",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),r("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer"},on:{click:function(t){return e.checkAnswer()}}},[r("div",[e._v(e._s(e.$t("label.ConfirmTheAnswer")))])])],1),r("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"jigsaw-puzzle"===e.step.type?r("div",{staticClass:"puzzle"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return r("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(r){return e.movePieceWithClick(t.pos)}}},[r("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),r("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),r("div",{staticClass:"q-mt-lg background-lighter4 q-pa-md"},[e.puzzle&&"drag"===e.puzzle.mode?r("div",{staticClass:"centered arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpText"))+"\n          ")]):e._e(),"click"===e.puzzle.mode?r("div",{staticClass:"centered text-primary q-pt-lg arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n          ")]):e._e(),e.puzzle&&"drag"===e.puzzle.mode?r("div",{staticClass:"centeredq-pt-sm"},[r("a",{staticClass:"text-black",on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()])]):e._e(),"memory"===e.step.type?r("div",{staticClass:"puzzle"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("ul",{staticClass:"memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,a){return r("li",{key:a,staticClass:"card",class:{open:t.isClicked,show:t.isClicked,disabled:t.isFound||e.stepPlayed,match:t.isFound},on:{click:function(t){return e.selectMemoryCard(a)}}},[t.imagePath?r("img",{attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}}):e._e()])})),0)]):e._e(),"portrait-robot"===e.step.type?r("div",{staticClass:"portrait-robot"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"relative-position"},[r("div",[r("img",{attrs:{src:"statics/portrait-robot/face-"+e.portrait.face.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/eye-"+e.portrait.eye.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/mouth-"+e.portrait.mouth.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/nose-"+e.portrait.nose.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/hair-"+e.portrait.hair.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/beard-"+e.portrait.beard.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/glass-"+e.portrait.glass.position+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/hat-"+e.portrait.hat.position+".png"}})])]),r("table",{staticClass:"portrait-parts relative-position"},[r("tr",[r("td",[r("img",{attrs:{src:"statics/portrait-robot/face-1.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/eye-1.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/nose-1.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/hair-1.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/beard-2.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/glass-2.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/hat-4.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[r("div",[r("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done"},on:{click:function(t){return e.checkAnswer()}}},[r("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)])]):e._e(),"binocular"===e.step.type?r("div",{staticClass:"binocular"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"relative-position"},[r("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[r("img",{staticStyle:{width:"400%"},attrs:{src:e.getBackgroundImage()}})]),e._m(2)])]):e._e(),"phone-call"===e.step.type?r("div",{staticClass:"phone-call fit"},[r("div",{staticClass:"fit bg-black"},[r("div",{staticClass:"q-pb-xxl"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{staticClass:"fixed-bottom q-pb-xxl q-pl-xl q-pr-xl"},[r("q-btn",{attrs:{round:"",color:"positive",icon:"call"},on:{click:function(t){return e.phoneCall()}}}),r("q-btn",{staticClass:"float-right",attrs:{round:"",color:"negative",icon:"call_end"},on:{click:function(t){return e.forceNextStep()}}})],1)])]):e._e(),"use-item"==e.step.type?r("div",{staticClass:"use-item"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.useItem.imageHeight+"px;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.checkUseItem(t)}}},[r("img",{style:"position: relative; z-index: 500; width: "+e.useItem.crossSize+"px; height: "+e.useItem.crossSize+"px; display: none;",attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?r("p",{staticClass:"inventory-btn"},[r("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"}},[r("q-avatar",[e.itemUsed&&e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?r("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e(),!e.itemUsed||e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?e._e():r("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}})])],1),e._v("\n        "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n      ")],1):e._e(),"find-item"==e.step.type?r("div",{staticClass:"find-item"},[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),r("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.findItem.imageHeight+"px;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.checkFindItem(t)}}},[r("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play0",src:"statics/icons/game/find-item-locator.png"}}),r("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play1",src:"statics/icons/game/find-item-locator.png"}}),r("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play2",src:"statics/icons/game/find-item-locator.png"}}),r("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play3",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"==e.step.type?r("div",{staticClass:"locate-item-ar"},[r("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[r("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult&&e.geolocation.active,expression:"cameraStreamEnabled && playerResult === null && geolocation.active"}],ref:"camera-stream-for-locate-item-ar"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&this.geolocation.active,expression:"playerResult === null && this.geolocation.active"}]},[r("div",{staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():r("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?r("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.step.showDistanceToTarget&&e.geolocation.active?r("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e(),!e.geolocation.canSeeTarget&&e.geolocation.active?r("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]):e._e(),e.geolocation.canTouchTarget&&e.geolocation.active?r("p",[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&e.geolocation.active?r("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||null!==e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult !== null && step.options && step.options.is3D)"}],staticClass:"target-view"},[r("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),r("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})],1):e._e(),"image-over-flow"==e.step.type?r("div",{staticClass:"image-over-flow"},[r("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-image-over-flow"}),r("div",[e.isHybrid&&!e.takingSnapshot?r("div",{staticStyle:{position:"absolute",top:"8px",right:"8px","z-index":"1990"}},[r("q-btn",{staticClass:"text-white q-mr-md",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"flip_camera_ios"},on:{click:function(t){return e.switchCamera()}}}),e.step.options&&e.step.options.snapshotAllowed?r("q-btn",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"photo_camera"},on:{click:function(t){return e.prepareSnapshot()}}}):e._e()],1):e._e(),!e.isIOs&&e.takingSnapshot?r("img",{staticStyle:{position:"absolute",top:"0",left:"0",height:"100%",width:"auto","z-index":"1980"},attrs:{id:"snapshotImage"}}):e._e(),e.isIOs&&e.takingSnapshot?r("img",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"1980"},attrs:{id:"snapshotImageIos"}}):e._e(),r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),e.step.options&&(e.step.options.fullWidthPicture||e.step.options.redFilter)?e._e():r("div",{ref:"ImageOverFlowPicture",staticClass:"image",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw; z-index: 1985;"}),e.step.options&&e.step.options.fullWidthPicture&&!e.step.options.redFilter?r("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985"},attrs:{src:e.getBackgroundImage()}}):e._e(),e.step.options&&e.step.options.redFilter?r("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985","mix-blend-mode":"multiply",opacity:"0.8"},attrs:{src:"statics/images/background/red.png"}}):e._e()])]):e._e(),"locate-marker"==e.step.type||"sensor"==e.step.id?r("div",{staticClass:"locate-marker"},[r("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[r("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),r("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[r("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():r("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?r("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.isHybrid?e._e():r("p",[e._v(e._s(e.$t("label.ThisStepOnlyWorkOnMobile")))])])]),e.locateMarker.compliant&&null===e.playerResult&&!e.isHybrid?r("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){e.locateMarker.showHelp=!0}}},[r("span",[e._v("?")])]):e._e(),e.locateMarker.compliant&&null===e.playerResult&&e.isHybrid?r("div",{staticClass:"text-white centered q-mt-md"},[e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?r("div",[e._v(e._s(e.customization.qrCodeMessage[e.lang]))]):e._e(),e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?e._e():r("div",[e._v(e._s(e.$t("label.ScanTheMarkersLikeThat")))]),e._m(3),e._v("\n          "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n          "),r("div",[r("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.startScanQRCode()}}},[r("div",[e._v(e._s(e.$t("label.LaunchTheScanner")))])])],1)]):e._e(),r("div",{staticClass:"text-center"},[e.locateMarker.compliant?e._e():r("div",[e._v("\n            "+e._s(e.$t("label.YourPhoneIsNotCompliantWithThisStepType"))+"\n          ")]),e.playerResult&&e.locateMarker.compliant&&e.step.options&&"scan"==e.step.options.mode?r("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.locateMarker.compliant,expression:"locateMarker.compliant"}],staticClass:"marker-view"},[r("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"marker-canvas"},on:{click:e.onTargetCanvasClick}})])]),e.locateMarker.showHelp?r("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font,staticStyle:{height:"100%"}},[r("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&e.step.options&&"scan"===e.step.options.mode?"FindMarkerHelp":"TouchObjectOnMarkerHelp"}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e(),"wait-for-event"==e.step.type?r("div",[r("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"distance"===e.step.options.object&&null!==e.iot.distance?r("h2",{staticClass:"centered big q-pb-lg",class:{right:!0===e.playerResult}},[e._v("\n            "+e._s(e.iot.distance)+" cm\n          ")]):e._e(),"pot"===e.step.options.object&&null!==e.iot["pot1"]?r("div",e._l([1,2,3],(function(t){return r("q-linear-progress",{key:t,staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["pot"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})})),1):e._e(),"keypad"===e.step.options.object?r("div",[r("p",[e._v(e._s(e.$t("label.KeypadInput")))]),r("p",{ref:"iot-keypad",staticClass:"iot-keypad",class:{right:!0===e.playerResult,wrong:!1===e.playerResult,shake:!1===e.playerResult}},[e._v(e._s(e.iot.keypadAnswer))])]):e._e(),"joystick"===e.step.options.object&&null!==e.iot["axisX"]?r("div",e._l(["X","Y"],(function(t){return r("div",{key:t},[r("p",[e._v(e._s("X"===t?e.$t("label.Horizontal"):e.$t("label.Vertical")))]),r("q-linear-progress",{staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["axis"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})],1)})),0):e._e(),"button"===e.step.options.object&&!0===e.playerResult?r("div",[r("p",{staticClass:"right q-pb-md q-px-md q-my-md"},[e._v(e._s(this.step.options.message))])]):e._e()])]):e._e(),"trigger-event"==e.step.type?r("div",{staticClass:"trigger-event"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():r("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?r("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"},domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"chest"!==e.step.options.object||"relay"===e.step.options.object?r("div",[e.step.options.triggerMode&&"manual"===e.step.options.triggerMode?r("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.TriggerTheEvent"),size:"xl",disable:null===e.bluetooth.deviceId},on:{click:function(t){return e.triggerIotEvent()}}}):e._e()],1):e._e(),"chest"===e.step.options.object||"relay"===e.step.options.object?r("div",[r("p",[e._v(e._s(e.$t("label.ChestActions")))]),r("div",{staticStyle:{display:"flex"}},[r("q-btn",{staticStyle:{"flex-grow":"1","margin-right":"1rem"},attrs:{color:"primary",label:e.$t("label.Open"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("open")}}}),r("q-btn",{staticStyle:{"flex-grow":"1"},attrs:{color:"primary",label:e.$t("label.Close"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("close")}}})],1)]):e._e(),"bluetooth"===e.step.options.protocol&&null===e.bluetooth.deviceId?r("p",[e._v(e._s(e.$t("label.SearchingBluetoothDevice")))]):e._e()]):e._e(),null!==e.story.step&&"end"!==e.story.step?r("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font},[r("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"waiting"==e.step.id,expression:"step.id == 'waiting'"}],staticClass:"panel-bottom background-dark"},[r("div",{staticClass:"centered q-pa-lg title4 text-primary"},[r("div",{staticClass:"q-pa-lg text-uppercase",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.WaitingForOtherUsersActions")))]),r("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),r("div",[r("div",{staticClass:"q-pa-lg centered"},[e._v("\n              "+e._s(e.$t("label.WaitingForOtherUsersActionsDesc"))+"\n            ")])])])])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type||"locate-item-ar"==e.step.type)&&e.step.showDirectionToTarget&&null===e.playerResult&&e.geolocation.active,expression:"(step.type == 'geolocation' || step.type == 'locate-item-ar') && step.showDirectionToTarget && playerResult === null && geolocation.active"}],staticClass:"direction-helper"},[r("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),"geolocation"==e.step.type||"locate-item-ar"==e.step.type?r("geolocation",{ref:"geolocation-component",attrs:{withNavBar:!0},on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.displaySuccessIcon,expression:"playerResult === true && displaySuccessIcon"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[r("q-icon",{attrs:{color:"white",name:"thumb_up"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.geolocation.foundStep,expression:"geolocation.foundStep"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[r("q-icon",{attrs:{color:"white",name:"check_box"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),r("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:60===this.countdowntimeleft||30===this.countdowntimeleft||15===this.countdowntimeleft||10===this.countdowntimeleft||5===this.countdowntimeleft,expression:"\n        this.countdowntimeleft === 60 ||\n        this.countdowntimeleft === 30 || \n        this.countdowntimeleft === 15 || \n        this.countdowntimeleft === 10 || \n        this.countdowntimeleft === 5 \n        "}],staticClass:"fadein-message text-center"},[r("div",{staticStyle:{"font-size":"0.6em"}},[e._v(e._s(e.$t("label.ItRemains")))]),e._v("\n        "+e._s(this.countdowntimeleft)+" "+e._s(e.$t("label.s"))+"\n    ")]),null!==e.story.step&&"end"!==e.story.step?r("div",{staticClass:"fixed-bottom over-map"},[r("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),r("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[r("div",{staticClass:"bg-white centered q-pa-md"},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[r("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),r("gpscalibration",{ref:"gpscal"}),r("holdphonevertically",{attrs:{show:e.geolocation.showARHelp}})],1)}),Wr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bubble-top"},[r("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bubble-bottom"},[r("img",{attrs:{src:"statics/icons/story/sticker-bottom.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"absolute no-mouse-event",staticStyle:{top:"0px",width:"100%"}},[r("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/binoculars.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-mt-md"},[r("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],Yr=(r("6c7b"),r("5df3"),r("1c4c"),r("f5766"),r("14b9"),r("bc78")),Vr={storeTimeLeft:function(e,t,r){var a={runid:e,stepid:t,timeleft:r};a=JSON.stringify(a),localStorage.setItem("timer-"+e+"-"+t,a)},allStorage:function(){for(var e=[],t=0,r=localStorage.length;t<r;t++){var a=localStorage.key(t),i=localStorage[a];if(a.includes("timer-")){var s={key:a,value:i};e.push(s)}}return e},getTimeLeft:function(e,t){var r=this.allStorage(),a=!0,i=!1,s=void 0;try{for(var n,o=r[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var l=n.value,c=JSON.parse(l.value);if(c.runid===e&&c.stepid===t)return c.timeleft<0&&(c.timeleft=0),c.timeleft}}catch(u){i=!0,s=u}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}return null},clearStoredTimers:function(){var e=this.allStorage();e.forEach((function(e){localStorage.removeItem(e.key)}))}},Gr=r("22ae"),Kr=r("3ba6"),Jr=r("57e4"),Xr=r("2f04"),Zr=r("e08c"),ea=r("025e"),ta=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-dialog",{model:{value:e.showPhoneAnimation,callback:function(t){e.showPhoneAnimation=t},expression:"showPhoneAnimation"}},[r("div",{staticClass:"bg-black centered q-pa-md"},[r("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),r("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])},ra=[],aa={props:["show"],watch:{show:function(){var e=n()(i.a.mark((function e(t,r){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:!0!==t&&"true"!==t||(et.setTimeout(this.closeHandleMobileVertically,5e3),this.showPhoneAnimation=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},data:function(){return{showPhoneAnimation:!1}},methods:{closeHandleMobileVertically:function(){this.showPhoneAnimation=!1}}},ia=aa,sa=Object(ye["a"])(ia,ta,ra,!1,null,null,null),na=sa.exports,oa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?r("div",{staticClass:"story fit reduce-window-size-desktop",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"},on:{click:e.closeBubble}},[r("div",{staticClass:"fixed-story",style:"position: fixed; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),r("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?r("div",{staticClass:"scroll-indicator"},[r("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),r("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),r("div",{staticClass:"text-right font-standard"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?r("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v("  \n        "),e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button2")?r("q-btn",{on:{click:e.buttonAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.label))+"\n        ")]):e._e(),e._v("  \n        "),r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.next}},[r("div",[e._v(e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>"))])])],1)]),e._m(1),r("div",{staticClass:"character"},[-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")&&-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?r("img",{staticStyle:{"min-height":"30vh"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}}):e._e(),-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")||-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?r("img",{staticStyle:{"min-height":"20vh","max-height":"30vh"},attrs:{src:e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character}}):e._e()]),e.steps[e.currentStep.id].allowSkip?r("div",{staticClass:"fixed-bottom-left q-pa-md font-standard"},[r("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},la=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bubble-top"},[r("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bubble-bottom"},[r("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],ca={props:["step","data"],data:function(){return{steps:{hint:{discussions:[{character:this.data&&this.data.character?this.data.character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:this.data.help,button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null,button:{label:"Yes"},button2:{label:"No",action:"closeall"}},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:this.data&&this.data.character?this.data.character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks",action:"close"}}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentStep.id=e.step,e.steps[e.currentStep.id]){t.next=4;break}return e.hideStory(),t.abrupt("return");case 4:return e.currentStep.discussionId=0,e.nextStep=e.step,e.hide=!1,e.moreToValidStep(),t.next=10,e.saveStepPassed();case 10:et.setTimeout(e.checkIfTextIsHidden,500);case 11:case"end":return t.stop()}}),t)})))()},methods:{next:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.needToScroll=!1,!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")||!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.hasOwnProperty("action")){t.next=6;break}e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.action),et.setTimeout(e.checkIfTextIsHidden,500),t.next=8;break;case 6:return t.next=8,e.closeStory();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:r=e.$refs.bubbleText.clientHeight,r>"140"&&(e.needToScroll=!0);case 4:case"end":return t.stop()}}),t)})))()},moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("nextStep")){t.next=5;break}return e.nextStep=e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].nextStep,e.$store.state.user.story.step=e.nextStep,t.next=5,rt.nextStoryStep(e.nextStep);case 5:case"end":return t.stop()}}),t)})))()},skipTutorial:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,e.$q.dialog({title:e.$t("label.SkipTutorial"),message:e.$t("label.SkipTutorialDesc"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk((function(){e.nextStep=17,rt.nextStoryStep(e.nextStep),e.$store.state.user.story.step=e.nextStep,e.hideStory()})).onCancel((function(){console.log("cancel"),e.hide=!1}));case 2:case"end":return t.stop()}}),t)})))()},closeStory:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveStepPassed();case 2:e.steps[e.currentStep.id].discussions.length-1>e.currentStep.discussionId?(e.currentStep.discussionId++,e.moreToValidStep()):e.hideStory();case 3:case"end":return t.stop()}}),t)})))()},hideStory:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,setTimeout(e.emitNext,500);case 2:case"end":return t.stop()}}),t)})))()},emitNext:function(){this.$emit("next",this.nextStep)},closeBubble:function(){6===this.currentStep.id&&this.$emit("next",this.nextStep)},linkAction:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action?e.hideStory():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},buttonAction:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.hideStory():"closeall"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.skipTutorial():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}},ua=ca,da=Object(ye["a"])(ua,oa,la,!1,null,null,null),pa=da.exports,fa=r("22b5"),ma=r("bd2e"),ha=r.n(ma),ba=r("8c64"),ga=r("0321"),va=r("e7fc"),wa={props:["step","runId","reload","itemUsed","lang","answer","customization","player","inventory"],components:{holdphonevertically:na,gpscalibration:Fr,geolocation:ct,story:pa},watch:{reload:function(){var e=n()(i.a.mark((function e(t,r){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),itemUsed:function(){var e=n()(i.a.mark((function e(t,r){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.step&&"use-item"===this.step.type&&this.step.options&&this.step.options.hasOwnProperty("touchLocation")&&!1===this.step.options.touchLocation&&this.checkUseItem();case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){},updated:Nr()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),beforeDestroy:function(){},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,imageCapture:null,takingSnapshot:!1,cameraUsed:"environment",serverUrl:"https://api.graaly.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,isIOs:et.isIOS(),isNetworkLow:!1,isTimeUp:!1,displaySuccessIcon:!1,character:{bubbleText:[],numberOfBubble:1,bubbleNumber:0,needToScroll:!1},answerType:"text",playerCode:[],keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],showTools:!0,codeColors:{},geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},absoluteOrientationSensor:null,initialBearingAngle:null,target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:Yr["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1,gyroscopeDetectionCounter:0,lowCompassAccuracy:!1,compassAccuracyTimeout:null,showARHelp:!1,currentIndex:0,foundStep:!1},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:4},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationCounter:1},minDistanceForGPS:20,deviceHasGyroscope:null,locateMarker:{renderer:null,scene:null,camera:null,mixers:[],clock:null,arToolkitContext:null,arSmoothedControls:null,markerRoots:{},markerControls:{},playerAnswer:"",layer:null,flash:!1,showHelp:!1,compliant:!0},writetext:{playerAnswer:""},puzzle:{pieces:[],picture:"statics/icons/game/medal.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},portrait:{face:{position:1,number:4},eye:{position:1,number:16},mouth:{position:1,number:1},nose:{position:1,number:5},hair:{position:1,number:26},beard:{position:1,number:31},glass:{position:1,number:5},hat:{position:1,number:4}},findItem:{nbItemsFound:0,crossSize:30,imageWidth:900,imageHeight:1200},useItem:{crossSize:30,imageWidth:900,imageHeight:1200},readMoreNotif:null,itemUsedComputed:null,mqttClient:null,bluetooth:{enabled:!1,deviceId:null},iotObject:null,iot:{distance:null,pot1:null,pot2:null,pot3:null,keypadAnswer:null,axisX:null,axisY:null,chest:{disableActionButtons:!1},relay:{disableActionButtons:!1}},story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null,pageReady:!1,countdowntimeleft:0}},resetData:function(){var e=this.initialState();this.playerResult=e.playerResult,this.stepPlayed=e.stepPlayed,this.cameraStreamEnabled=e.cameraStreamEnabled,this.imageCapture=e.imageCapture,this.takingSnapshot=e.takingSnapshot,this.nbTry=e.nbTry,this.score=e.score,this.reward=e.reward,this.controlsAreDisplayed=e.controlsAreDisplayed,this.isNetworkLow=e.isNetworkLow,this.isTimeUp=e.isTimeUp,this.displaySuccessIcon=e.displaySuccessIcon,this.character=e.character,this.playerCode=e.playerCode,this.geolocation=e.geolocation,this.deviceMotion=e.deviceMotion,this.locateMarker=e.locateMarker,this.writetext=e.writetext,this.puzzle=e.puzzle,this.memory=e.memory,this.portrait=e.portrait,this.nbItemsFound=e.nbItemsFound,this.readMoreNotif=e.readMoreNotif,this.itemUsedComputed=e.itemUsedComputed,this.mqttClient=e.mqttClient,this.bluetooth=e.bluetooth,this.iotObject=e.iotObject,this.iot=e.iot,this.story=e.story,this.enlargePicture=e.enlargePicture,this.latestRequestAnimationId=e.latestRequestAnimationId,this.countdowntimeleft=e.countdowntimeleft,this.pageReady=e.pageReady,this.showTools=e.showTools},resetEvents:function(){if(this.clearAllCameraStreams(),this.stopLatestAnimation(),null!==this.geolocation.absoluteOrientationSensor&&this.geolocation.absoluteOrientationSensor.stop(),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),et.clearAllRunningProcesses(),fa["a"].removeAll(),null!==this.mqttClient){var e=this;this.mqttClient.end(!1,{},(function(){e.mqttClient=null}))}if(this.bluetooth.enabled&&this.bluetoothDisconnect(this.bluetooth.deviceId),this.step.countDownTime&&this.step.countDownTime.enabled||this.stopcountdown(),["geolocation","locate-item-ar"].includes(this.step.type))try{cordova.plugins.headingcalibration.stopWatchCalibration()}catch(t){}},getBackgroundImage:function(){return this.step.backgroundImage&&"_"===this.step.backgroundImage[0]?"statics/images/quest/"+this.step.backgroundImage:this.step.backgroundImage&&-1!==this.step.backgroundImage.indexOf("blob:")?this.step.backgroundImage:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/background/"+this.step.backgroundImage},resetBackgroundImage:function(){var e=document.getElementById("play-view");e.style.background="none",e.style.backgroundColor="transparent";var t=document.getElementById("background-image");t&&(t.style.background="none",t.style.backgroundColor="transparent")},initData:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resetEvents(),e.resetData(),e.resetBackgroundImage(),fa["a"].removeAll(),e.$nextTick(n()(i.a.mark((function t(){var r,a,s,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T,E;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=document.getElementById("play-view"),e.step.backgroundImage?"find-item"===e.step.type||"use-item"===e.step.type||"binocular"===e.step.type||"phone-call"===e.step.type?(r.style.background="none",r.style.backgroundColor="#000",e.showControls()):"image-over-flow"===e.step.type?(e.showControls(),r.style.background="none",r.style.backgroundColor="transparent"):"jigsaw-puzzle"===e.step.type?(a=e.getBackgroundImage(),r.style.background='#fff url("'+a+'") center/cover no-repeat',e.showControls()):(s=e.getBackgroundImage(),o=document.getElementById("background-image"),o&&(o.style.background='#fff url("'+s+'") center/cover no-repeat'),e.step.options&&e.step.options.hasOwnProperty("initDuration")?et.setTimeout(e.showControls,1e3*parseInt(e.step.options.initDuration,10)):et.setTimeout(e.showControls,1e3)):(e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type&&"sensor"!==e.step.id?(r.style.background="none",r.style.backgroundColor="#fff"):(r.style.background="none",r.style.backgroundColor="transparent"),e.showControls()),e.resetDrawDirectionInterval(),e.isIOs&&(e.deviceHasGyroscope=!0),"end-chapter"===e.step.type&&e.checkAnswer(),"choose"===e.step.type&&(e.answerType=Array.isArray(e.step.options.items)&&e.step.options.items[0].hasOwnProperty("imagePath")&&null!==e.step.options.items[0].imagePath?"image":"text"),"character"===e.step.type&&(e.step.text&&""!==e.step.text?(e.character.bubbleText=e.step.text.split("|"),e.character.numberOfBubble=e.character.bubbleText.length,1===e.character.numberOfBubble&&e.checkAnswer(),et.setTimeout(e.checkIfTextIsHidden,1500)):e.checkAnswer()),"code-keypad"===e.step.type&&e.resetKeypadCode(),"code-color"===e.step.type){if(e.step.options.colors)for(e.codeColors=[],l=0;l<e.step.options.colors.length;l++)e.codeColors.push(e.step.options.colors[l].value);else e.codeColors=Gr;e.resetColorCode()}if("code-image"===e.step.type&&e.resetImageCode(),"find-item"===e.step.type&&et.setTimeout(e.initFindItemElements,2e3),"use-item"===e.step.type&&et.setTimeout(e.initUseItemElements,2e3),"new-item"===e.step.type&&(e.step.options.hasOwnProperty("pictures")&&e.step.options.pictures[e.lang]&&(e.step.options.picture=e.step.options.pictures[e.lang]),e.step.options.hasOwnProperty("titles")&&e.step.options.titles[e.lang]&&(e.step.options.title=e.step.options.titles[e.lang])),"jigsaw-puzzle"!==e.step.type){t.next=17;break}return t.next=16,e.initPuzzle();case 16:e.$emit("pass");case 17:if("memory"===e.step.type&&(e.initMemory(),e.$emit("pass")),"binocular"===e.step.type&&(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&ft(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")),"phone-call"===e.step.type&&(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&ft(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")),"geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type){t.next=62;break}if(!(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop)){t.next=25;break}"0"===e.runId?(ft(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")):(e.$emit("pass"),e.$emit("forceMoveNext")),t.next=60;break;case 25:if(e.$emit("pass"),t.prev=26,!("AbsoluteOrientationSensor"in window)){t.next=35;break}u=new AbsoluteOrientationSensor({frequency:30}),u.onerror=function(e){return console.error(e.error.name,e.error.message)},u.onreading=e.onAbsoluteOrientationSensorReading,u.start(),e.geolocation.absoluteOrientationSensor=u,t.next=43;break;case 35:return e.geolocation.absoluteOrientationSensor={stop:e.stopAlternateAbsoluteOrientationSensor},t.next=38,et.requestDeviceOrientationPermission();case 38:if(c=t.sent,"granted"===c){t.next=42;break}return ft(e.$t("label.PleaseAcceptDeviceOrientationPermissionRequest"),"error"),t.abrupt("return");case 42:window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1);case 43:t.next=48;break;case 45:t.prev=45,t.t0=t["catch"](26),console.error(t.t0);case 48:if("locate-item-ar"!==e.step.type){t.next=60;break}return e.geolocation.showARHelp=!0,t.next=52,et.requestDeviceMotionPermission();case 52:if(c=t.sent,"granted"===c){t.next=56;break}return ft(e.$t("label.PleaseAcceptDeviceMotionPermissionRequest"),"error"),t.abrupt("return");case 56:return window.addEventListener("devicemotion",e.handleMotionEvent,!0),t.next=59,e.waitForGyroscopeDetection();case 59:e.deviceHasGyroscope||ft(e.$t("label.CouldNotEnableAR"),"warning");case 60:e.$store.dispatch("setDrawDirectionInterval",window.setInterval(e.drawDirectionArrow,100)),e.isHybrid&&!e.isIOS&&cordova.plugins.headingcalibration.watchCalibration((function(t){t<=1?(e.geolocation.lowCompassAccuracy=!0,null!==e.geolocation.compassAccuracyTimeout||e.geolocation.showCalibration||(e.geolocation.compassAccuracyTimeout=et.setTimeout((function(){e.$refs.gpscal.askUserToCalibrateGPS(),null!==e.geolocation.compassAccuracyTimeout&&(clearTimeout(e.geolocation.compassAccuracyTimeout),e.geolocation.compassAccuracyTimeout=null)}),1e4))):(e.geolocation.lowCompassAccuracy=!1,null!==e.geolocation.compassAccuracyTimeout&&(clearTimeout(e.geolocation.compassAccuracyTimeout),e.geolocation.compassAccuracyTimeout=null))}),(function(e){console.error("watch calibration: failure",e)}));case 62:if("locate-item-ar"!==e.step.type||e.playerResult){t.next=113;break}if(!e.deviceHasGyroscope&&e.step.backgroundImage||(e.isIOs&&CameraPreview?(d={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(d),CameraPreview.show()):e.launchVideoStreamForAndroid("camera-stream-for-locate-item-ar")),p=document.getElementById("target-canvas"),e.geolocation.target={scene:new Je["Scene"],camera:new Je["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new Je["WebGLRenderer"]({canvas:p,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new Je["Clock"]},e.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),f=e.geolocation.target,m=f.scene,e.addDefaultLightTo3DScene(m),!e.step.options.is3D){t.next=84;break}return t.next=73,e.loadAndPrepare3DModel(e.step.options.customModel?e.step.options.customModel:e.step.options.model,e.step.questId,e.step.options.customModel||!1);case 73:g=t.sent,h=g.object,b=g.animations,v=(new Je["Box3"]).setFromObject(h),w=(v.max.z-v.min.z)/2,h.applyMatrix((new Je["Matrix4"]).makeTranslation(0,0,w)),f.size=Math.max(v.max.x-v.min.x,v.max.y-v.min.y,v.max.z-v.min.z),b.length>0&&(k=new Je["AnimationMixer"](h),k.clipAction(b[0]).play(),e.geolocation.target.mixers.push(k)),e.geolocation.target.renderer.gammaOutput=!0,t.next=105;break;case 84:y="",y=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/locate-item-ar/"+e.step.options.picture,e.$refs["item-image"].src=y,f.size=e.step.options.objectSize||1,_=new Je["PlaneGeometry"](f.size,f.size),t.prev=89,S=(new Je["TextureLoader"]).load(y),S.anisotropy=0,S.magFilter=Je["NearestFilter"],S.minFilter=Je["NearestFilter"],t.next=101;break;case 96:return t.prev=96,t.t1=t["catch"](89),console.error("Error while loading image:",t.t1),ft(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 101:x=new Je["MeshBasicMaterial"]({map:S}),x.transparent=!0,h=new Je["Mesh"](_,x),h.position.y=0;case 105:h.name="targetObject",h.up=new Je["Vector3"](0,0,1),h.visible=!1,m.add(h),e.geolocation.target.camera.up=new Je["Vector3"](0,0,1),e.geolocation.target.camera.lookAt(new Je["Vector3"](0,1,0)),e.geolocation.target.camera.position.z=1.5,e.animateTargetCanvas();case 113:if("image-over-flow"===e.step.type&&(e.$emit("pass"),e.isIOs&&CameraPreview?(C={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(C),CameraPreview.show()):e.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0)),"geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type||(e.$refs["geolocation-component"].disabled=!1),"locate-marker"!==e.step.type&&"sensor"!==e.step.id||e.playerResult||("sensor"===e.step.id?e.step.options={mode:"scan",layerCode:"magnifier"}:e.$emit("pass"),e.isHybrid?e.initQRCodes():(q=e.$refs["camera-stream-for-locate-marker"],navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then((function(t){q.srcObject=t,q.play(),q.onloadeddata=function(){var t=n()(i.a.mark((function t(r){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cameraStreamEnabled=!0,a=document.getElementById("marker-canvas"),a.height=window.screen.height,a.width=window.screen.width,t.next=6,e.displayMarkers(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.$store.dispatch("addMediaStream",t)})).catch((function(e){console.warn("No camera stream available"),console.log(e)})))),"wait-for-event"!==e.step.type&&"trigger-event"!==e.step.type){t.next=135;break}if(e.iotObject=e.getIotObjectFromCode(e.step.options.object),"keypad"===e.step.options.object&&(e.iot.keypadAnswer="_".repeat(e.step.options.answer.length)),"mqtt"!==e.step.options.protocol){t.next=127;break}T=e,e.mqttClient=va["connect"]("wss://api.graaly.com:9001"),e.mqttClient.on("connect",(function(){console.log("Successfully connected to MQTT server wss://api.graaly.com:9001"),"wait-for-event"===T.step.type&&T.mqttClient.subscribe("Graaly",(function(e){e?console.error("Error when subscribing to topic Graaly:",e):console.log("Successfully subscribed to MQTT topic Graaly")}))})),e.mqttClient.on("error",(function(e){console.error("Error connecting to MQTT server wss://api.graaly.com:9001","connack=",e)})),"wait-for-event"===T.step.type&&e.mqttClient.on("message",(function(e,t){console.log("Received MQTT message (topic "+e+"): ",t.toString());try{t=JSON.parse(t)}catch(r){console.error("Could not read MQTT message. Error:",r)}t.macAddress===T.step.options.boardMacAddress&&(console.log("*** MAC ADDRESSES MATCHED ***",T.step.stepId),console.log("matching codes?",t.code,T.step.options.code),t.code===T.step.options.code&&(console.log("*** CODES MATCHED, CHECK ANSWER ***"),ft(T.step.options.successMessage,"positive"),T.checkAnswer()))})),t.next=132;break;case 127:if("bluetooth"!==e.step.options.protocol){t.next=131;break}e.isHybrid?ble.enable(e.bluetoothEnableSuccess,e.bluetoothEnableFailure):console.warn("Webapp mode => no bluetooth support."),t.next=132;break;case 131:throw new Error("Unsupported IoT step protocol: "+e.step.options.protocol);case 132:e.$emit("pass"),t.next=137;break;case 135:null!==e.mqttClient&&(E=e,e.mqttClient.end(!1,{},(function(){E.mqttClient=null}))),e.bluetooth&&e.bluetooth.enabled&&e.bluetoothDisconnect(e.bluetooth.deviceId);case 137:if(!e.isTimerAvailable()){t.next=140;break}return t.next=140,e.startCountdown();case 140:case"end":return t.stop()}}),t,null,[[26,45],[89,96]])}))));case 5:case"end":return t.stop()}}),t)})))()},eventAlternateAbsoluteOrientationSensor:function(e){null===this.geolocation.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.geolocation.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.geolocation.initialBearingAngle+e.alpha)%360:e.alpha,r=e.beta,a=e.gamma,i=Math.PI/180,s=r?r*i:0,n=a?a*i:0,o=t?t*i:0,l=Math.cos(s/2),c=Math.cos(n/2),u=Math.cos(o/2),d=Math.sin(s/2),p=Math.sin(n/2),f=Math.sin(o/2),m=l*c*u-d*p*f,h=d*c*u-l*p*f,b=l*p*u+d*c*f,g=l*c*f+d*p*u;this.geolocation.absoluteOrientationSensor.quaternion=[h,b,g,m],this.onAbsoluteOrientationSensorReading()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},initQRCodes:function(){for(var e=1;e<=60;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkAnswer(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},createMarkerControl:function(e){var t,r=this,a=this.locateMarker.arToolkitContext;t=this.step.options&&"scan"===this.step.options.mode?this.locateMarker.markerRoots["commonRoot"]:this.locateMarker.markerRoots[e];var i=new ba["a"].ArMarkerControls(a,t,{type:"pattern",patternUrl:"statics/markers/"+e+"/pattern-marker.patt"});return i.code=e,i.addEventListener("markerFound",(function(e){r.step.options&&"scan"===r.step.options.mode&&r.checkAnswer(e.target.code)})),i.detected=!1,i},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"help"!==this.step.type&&"image-over-flow"!==this.step.type&&"binocular"!==this.step.type&&"phone-call"!==this.step.type&&"new-item"!==this.step.type&&"trigger-event"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},hideControlsTemporaly:function(){this.controlsAreDisplayed=!1,et.setTimeout(this.showControls,4e3)},displayMarkers:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.locateMarker.markerRoots={},a=new Je["WebGLRenderer"]({canvas:e,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),s=new Je["Scene"],n=new Je["PerspectiveCamera"](45,window.innerWidth/window.innerHeight,.001,1e3),s.add(n),t.addDefaultLightTo3DScene(s),o=new ba["a"].ArToolkitContext({cameraParametersUrl:"statics/markers/camera_para.dat",detectionMode:"mono",maxDetectionRate:30,canvasWidth:640,canvasHeight:480,patternRatio:.8}),o.initAsync=Object(ga["promisify"])(o.init),r.next=10,o.initAsync();case 10:if(l=new Je["Group"],s.add(l),c=new ba["a"].ArSmoothedControls(l,{lerpPosition:.4,lerpQuaternion:.3,lerpScale:1}),t.locateMarker.arToolkitContext=o,t.locateMarker.arSmoothedControls=c,t.locateMarker.renderer=a,t.locateMarker.scene=s,t.locateMarker.camera=n,t.locateMarker.markerCodeAnswer=t.step.answers,t.step.options&&"scan"===t.step.options.mode&&(u=new Je["Group"],s.add(u),t.locateMarker.markerRoots["commonRoot"]=u,d=new Je["PlaneGeometry"](1,1),p=new Je["MeshNormalMaterial"]({transparent:!0,opacity:0,side:Je["DoubleSide"]}),f=new Je["Mesh"](d,p),f.rotateX(Math.PI/2),l.add(f),l.name="markerObject"),Jr.forEach((function(e){if(t.step.options&&"touch"===t.step.options.mode){var r=new Je["Group"];s.add(r),t.locateMarker.markerRoots[e]=r}t.locateMarker.markerControls[e]=t.createMarkerControl(e)})),!t.step.options||"touch"!==t.step.options.mode){r.next=35;break}return r.next=24,t.loadAndPrepare3DModel(t.step.options.customModel?t.step.options.customModel:t.step.options.model,t.step.questId,t.step.options.customModel||!1);case 24:b=r.sent,m=b.object,h=b.animations,m.rotateX(-Math.PI/2),g=(new Je["Box3"]).setFromObject(m),v=(g.max.y-g.min.y)/2,m.applyMatrix((new Je["Matrix4"]).makeTranslation(0,v,0)),m.name="targetObject",h.length>0&&(w=new Je["AnimationMixer"](m),w.clipAction(h[0]).play(),t.locateMarker.mixers.push(w)),t.locateMarker.clock=new Je["Clock"],l.add(m);case 35:t.animateMarkerCanvas();case 36:case"end":return r.stop()}}),r)})))()},sendAnswer:function(e,t,r,a,s){var o=this;return n()(i.a.mark((function n(){var l,c,u,d,p;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s&&o.$q.loading.show(),l=o,c=et.setTimeout((function(){l.isNetworkLow=!0}),8e3),i.next=5,Cr.checkAnswer(e,t,o.step.version,r,a,o.player,{retries:0});case 5:if(u=i.sent,clearTimeout(c),o.isNetworkLow=!1,!u||!u.data){i.next=15;break}return s&&o.$q.loading.hide(),d=u.data,"0"===o.runId&&(d.remainingTrial=o.step.nbTrial-o.nbTry-1),i.abrupt("return",d);case 15:return s&&o.$q.loading.hide(),p=o.checkOfflineAnswer(a.answer),i.abrupt("return",p);case 18:case"end":return i.stop()}}),n)})))()},checkOfflineAnswer:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l,c;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.step.type,"info-text"!==a&&"info-video"!==a&&"new-item"!==a&&"character"!==a&&"help"!==a&&"image-over-flow"!==a&&"binocular"!==a&&"phone-call"!==a){r.next=5;break}return r.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("geolocation"!==a&&"locate-item-ar"!==a&&"jigsaw-puzzle"!==a){r.next=9;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 9:if("use-item"!==a){r.next=25;break}if(!0!==t.isTimeUp){r.next=12;break}return r.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 12:if(!t.step.options||!t.step.options.hasOwnProperty("touchLocation")||!1!==t.step.options.touchLocation){r.next=17;break}if(t.answer.item!==e.item){r.next=15;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 15:r.next=23;break;case 17:if(s=e&&e.windowWidth?e.windowWidth:t.getFindItemPictureSize()/100,n={left:Math.round(t.answer.coordinates.left/100*100*s),top:Math.round(t.answer.coordinates.top/100*133*s)},o=Math.round(8*e.windowWidth),l=Math.sqrt(Math.pow(n.left-e.posX,2)+Math.pow(n.top-e.posY,2)),!(l<=o&&t.answer.item===e.item)){r.next=23;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 23:r.next=52;break;case 25:if("find-item"!==a){r.next=31;break}if(!0!==t.isTimeUp){r.next=28;break}return r.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 28:return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 31:if("write-text"!==a){r.next=41;break}c=0;case 33:if(!(c<t.answer.length)){r.next=39;break}if(et.removeAccents(e)!==et.removeAccents(t.answer[c])){r.next=36;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 36:c++,r.next=33;break;case 39:r.next=52;break;case 41:if("memory"!==a){r.next=45;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 45:if("portrait-robot"!==a){r.next=50;break}if(JSON.stringify(e)!==JSON.stringify(t.answer)){r.next=48;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 48:r.next=52;break;case 50:if(e!==t.answer){r.next=52;break}return r.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 52:if(!(!t.isTimeUp&&t.step.nbTrial&&t.step.nbTrial>0&&t.nbTry+1<t.step.nbTrial)){r.next=56;break}return r.abrupt("return",{result:!1,remainingTrial:t.step.nbTrial-t.nbTry-1,offline:!0});case 56:return r.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 57:case"end":return r.stop()}}),r)})))()},checkAnswer:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(null===t.playerResult){r.next=2;break}return r.abrupt("return");case 2:if("sensor"!==t.step.id){r.next=5;break}return t.locateMarker.markerControls[e].detected||(t.locateMarker.flash=!1,t.locateMarker.flash=!0,t.locateMarker.markerControls[e].detected=!0,t.$emit("played",e)),r.abrupt("return");case 5:r.t0=t.step.type,r.next="info-text"===r.t0||"info-video"===r.t0||"new-item"===r.t0||"help"===r.t0||"end-chapter"===r.t0||"character"===r.t0||"image-over-flow"===r.t0||"binocular"===r.t0||"phone-call"===r.t0||"trigger-event"===r.t0?8:"choose"===r.t0?13:"geolocation"===r.t0?18:"code-keypad"===r.t0?23:"code-color"===r.t0?28:"code-image"===r.t0?33:"jigsaw-puzzle"===r.t0?38:"memory"===r.t0?43:"portrait-robot"===r.t0?48:"write-text"===r.t0?54:"use-item"===r.t0?60:"find-item"===r.t0?69:"locate-item-ar"===r.t0||"locate-marker"===r.t0?90:"wait-for-event"===r.t0?105:122;break;case 8:return r.next=10,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{},!1);case 10:return a=r.sent,t.submitGoodAnswer(0,a.offline,!1),r.abrupt("break",123);case 13:return r.next=15,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 15:return a=r.sent,!0===a.result?(s=t.step.options.items[e],!1===t.step.displayRightAnswer?s.class="rightorwrong":(s.icon="done",s.class="right"),o["a"].set(t.step.options.items,e,s),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer)):(t.isTimeUp||(n=t.step.options.items[e],!1===t.step.displayRightAnswer?n.class="rightorwrong":(n.icon="clear",n.class="wrong"),o["a"].set(t.step.options.items,e,n)),t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(l=t.step.options.items[a.answer],l.icon="done",l.class="right",o["a"].set(t.step.options.items,a.answer,l))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 18:return r.next=20,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 20:return a=r.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),r.abrupt("break",123);case 23:return r.next=25,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join(""),isTimeUp:t.isTimeUp},!0);case 25:return a=r.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?(t.resetKeypadCode(),t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 28:return r.next=30,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 30:return a=r.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 33:return r.next=35,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 35:return a=r.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 38:return r.next=40,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 40:return a=r.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),r.abrupt("break",123);case 43:return r.next=45,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{isTimeUp:t.isTimeUp},!1);case 45:return a=r.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),r.abrupt("break",123);case 48:return c={items:{type:1,face:t.portrait.face.position,eye:t.portrait.eye.position,mouth:t.portrait.mouth.position,nose:t.portrait.nose.position,hair:t.portrait.hair.position,beard:t.portrait.beard.position,glass:t.portrait.glass.position,hat:t.portrait.hat.position}},r.next=51,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:c,isTimeUp:t.isTimeUp},!1);case 51:return a=r.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 54:return t.writetext.playerAnswer=t.writetext.playerAnswer.trim(),r.next=57,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.writetext.playerAnswer,isTimeUp:t.isTimeUp},!0);case 57:return a=r.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?(t.writetext.playerAnswer="",t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer)),r.abrupt("break",123);case 60:return r.next=62,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 62:if(a=r.sent,!t.isTimeUp){r.next=67;break}if(t.inventory&&t.inventory.items&&Array.isArray(t.inventory.items)){r.next=66;break}throw new Error("Could not retrieve inventory items. Inventory content: ",t.inventory);case 66:Array.from(t.inventory.items).forEach((function(e){var r=e.originalPicture?e.originalPicture:e.picture;r===a.answer.item&&(t.itemUsedComputed=e)}));case 67:return!0===a.result?(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.step.options&&t.step.options.altFile&&(t.step.backgroundImage=t.step.options.altFile),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer)):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?ft(t.$t("label.UseItemNothingHappens"),"error"):(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.submitWrongAnswer(a.offline,t.step.displayRightAnswer))),r.abrupt("break",123);case 69:if(u=t.findItemIsFound(e),!u.all){r.next=78;break}return r.next=73,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 73:a=r.sent,t.step.options&&t.step.options.altFile&&(t.step.backgroundImage=t.step.options.altFile),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer),r.next=89;break;case 78:if(d=t.isTimeUp?0:t.step.nbTrial-t.nbTry-1,u.one){r.next=89;break}if(t.nbTry++,!(d>0)){r.next=85;break}ft(t.$t("label.FindItemNothingHappens"),"error"),r.next=89;break;case 85:return r.next=87,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 87:a=r.sent,t.submitWrongAnswer(!1,t.step.displayRightAnswer);case 89:return r.abrupt("break",123);case 90:if(!("locate-item-ar"===t.step.type||"locate-marker"===t.step.type&&t.step.options&&"touch"===t.step.options.mode)){r.next=97;break}return r.next=93,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 93:a=r.sent,a&&a.hasOwnProperty("result")&&("locate-item-ar"===t.step.type&&(window.removeEventListener("devicemotion",t.handleMotionEvent,!0),t.geolocation.absoluteOrientationSensor.stop()),t.isIOs&&CameraPreview&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),fa["a"].removeAll(),"locate-item-ar"===t.step.type&&t.step.options&&t.step.options.is3D||"locate-marker"===t.step.type?("locate-item-ar"===t.step.type?p=t.geolocation.target:(p=t.locateMarker,p.arToolkitContext=null),f=p.camera,m=p.scene.getObjectByName("targetObject"),m.visible=!0,h=(new Je["Box3"]).setFromObject(m),b=new Je["Vector3"],h.getSize(b),g=2*Math.max(b.x,b.y,b.z),v=Object.assign({},m.scale),w=new fa["a"].Tween(m.scale).to({x:0,y:0,z:0},1e3).easing(fa["a"].Easing.Back.In).onComplete((function(){"locate-marker"===t.step.type&&(et.detachObject3D(m,m.parent,p.scene),et.attachObject3D(m,p.scene,p.scene)),f.position.set(0,0,2*g/3),f.lookAt(new Je["Vector3"](0,g,b.z/2)),m.scale.set(0,0,0),m.position.set(0,g,b.z/2),m.rotation.set(0,0,0),!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)})),k=new fa["a"].Tween(m.scale).to({x:v.x,y:v.y,z:v.z},1e3).easing(fa["a"].Easing.Back.Out),y=new fa["a"].Tween(m.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),w.chain(k,y).start()):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)),r.next=104;break;case 97:if(_=!1,t.isHybrid?t.locateMarker.markerControls[e]&&!t.locateMarker.markerControls[e].detected&&(t.locateMarker.markerControls[e].detected=!0,_=!0):t.locateMarker.markerControls[e].detected||(S=t.locateMarker.scene.getObjectByName("markerObject"),x=new Je["Raycaster"],x.setFromCamera(new Je["Vector2"](0,0),t.locateMarker.camera),C=x.intersectObject(S,!0),C.length,t.locateMarker.markerControls[e].detected=!0,_=!0),!_){r.next=104;break}return r.next=102,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 102:a=r.sent,!0===a.result?(t.submitGoodAnswer(a.score,a.offline,!0),t.stopMarkersSensors(),t.locateMarker.playerAnswer=e):(t.nbTry++,2===t.nbTry||t.isTimeUp?(t.submitWrongAnswer(a.offline,!0),t.stopMarkersSensors()):t.submitRetry(1));case 104:return r.abrupt("break",123);case 105:return r.next=107,t.stopBluetoothNotification();case 107:return r.next=109,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 109:if(a=r.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):ft(t.$t("label.TechnicalIssue"),"error"),"mqtt"!==t.step.options.protocol){r.next=116;break}q=t,t.mqttClient.end(!1,{},(function(){q.mqttClient=null})),r.next=121;break;case 116:if("bluetooth"!==t.step.options.protocol){r.next=120;break}t.bluetoothDisconnect(t.bluetooth.deviceId),r.next=121;break;case 120:throw new Error("Unknown IoT protocol '"+t.step.options.protocol+"'");case 121:return r.abrupt("break",123);case 122:console.log("checkAnswer(): Step type "+t.step.type+" not supported.");case 123:t.score=a&&a.score?a.score:0,t.reward=a&&a.reward?a.reward:0;case 125:case"end":return r.stop()}}),r)})))()},submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),et.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,r){if(this.playerResult=!!r||null,void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled){var a=this.getStepType(this.step.type);"enigma"===a.category&&(this.step.countDownTime.enabled=!1,this.stopcountdown())}if(this.stepPlayed=!0,this.$emit("success",e,t,r),this.$emit("played"),this.displayReadMoreAlert(),r)switch(this.step.type){case"character":case"new-item":case"info-text":case"help":case"end-chapter":case"info-video":case"image-over-flow":case"binocular":case"phone-call":break;case"choose":break;case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"));break;case"write-text":case"jigsaw-puzzle":case"memory":case"portrait-robot":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"));break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem")):this.displaySuccessMessage(!0,this.$t("label.WellDone"));break;case"wait-for-event":this.displaySuccessMessage(!0,this.$t("label.WellDone"));break}},stopMarkersSensors:function(){this.isHybrid||(this.stopVideoTracks("camera-stream-for-locate-marker"),this.locateMarker.scene=new Je["Scene"],this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera))},submitWrongAnswer:function(e,t){null!==this.step.countDownTime&&(this.step.countDownTime.enabled=!1,this.stopcountdown()),this.playerResult=!t&&null,this.stepPlayed=!0,this.$emit("fail",e,t),this.$emit("played"),this.displayReadMoreAlert(),!0===this.isTimeUp?this.displaySuccessMessage(!1,this.$t("label.CountDownPopupfail")):t&&this.displaySuccessMessage(!1,this.$t("label.WrongAnswer")),!0===this.step.displayRightAnswer&&et.setTimeout(this.alertToPassToNextStep,15e3)},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"))},displayReadMoreAlert:function(){var e=this;if(this.step.extraText){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=ft("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(e){this.displaySuccessMessage(!1,this.$t("label.SecondTry",{nb:e}))},forceNextStep:function(){this.$emit("forceMoveNext")},nextCharacterBubbleText:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.character.bubbleNumber<e.character.numberOfBubble-1&&(e.character.bubbleNumber++,e.character.needToScroll=!1,et.setTimeout(e.checkIfTextIsHidden,500)),!(e.character.bubbleNumber>=e.character.numberOfBubble-1)){t.next=8;break}if(e.stepPlayed){t.next=7;break}return t.next=5,e.checkAnswer();case 5:t.next=8;break;case 7:e.forceNextStep();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:r=e.$refs.bubbleText?e.$refs.bubbleText.clientHeight:0,a=e.$refs.bubbleTextHtml?e.$refs.bubbleTextHtml.clientHeight:0,s=Math.max(r,a),s>"177"&&(e.character.needToScroll=!0);case 6:case"end":return t.stop()}}),t)})))()},resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(this.codeColors[0])},resetImageCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(0)},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e)},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e)},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options.images[this.playerCode[e]].imagePath&&-1!==this.step.options.images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options.images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){if(this.playerCode){var t=this.playerCode.indexOf("");-1!==t&&o["a"].set(this.playerCode,t,e)}},clearLastCodeChar:function(){if(this.playerCode){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||o["a"].set(this.playerCode,e,"")}},changeColorForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),r=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[r])}},changeImageForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),r=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[r])}},launchVideoStreamForAndroid:function(e,t,r){var a=this;r||(r=this.cameraUsed);var i=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:r},audio:!1}).then((function(e){if(i.setAttribute("muted",!0),i.setAttribute("playsinline",!0),i.srcObject=e,i.play(),a.cameraStreamEnabled=!0,a.$store.dispatch("addMediaStream",e),t){var r=e.getVideoTracks()[0];a.imageCapture=new ImageCapture(r)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),i},stopVideoTracks:function(e){this.$refs[e]&&this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),r=e.width,a=e.height,i=Math.round(r/2),s=Math.round(a/2);t.save(),t.clearRect(0,0,r,a),t.translate(i,s),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor,t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),a>25&&t.arc(0,0,Math.round(a/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(et.degreesToRadians(this.geolocation.direction));var n=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(a/2.5)),t.lineTo(-20,45-Math.round(a/2.5)),t.lineTo(-n,45-Math.round(a/2.5)),t.lineTo(-n,Math.round(a/2.5)-25),t.lineTo(n,Math.round(a/2.5)-25),t.lineTo(n,45-Math.round(a/2.5)),t.lineTo(20,45-Math.round(a/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l,c,u,d,p,f;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.geolocation.active=!0,a=e.coords,0===t.step.options.lat&&parseInt(t.step.options.lng,10)===t.step.options.lng&&(0===t.step.options.lng?"locate-item-ar"===t.step.type?(t.step.options.lat=a.latitude+5e-5,t.step.options.lng=a.longitude):(t.step.options.lat=a.latitude+5e-4,t.step.options.lng=a.longitude+5e-4):"locate-item-ar"===t.step.type?(t.step.options.lat=a.latitude+1e-5*t.step.options.lng,t.step.options.lng=a.longitude):(t.step.options.lat=a.latitude+1e-4*t.step.options.lng,t.step.options.lng=a.longitude+1e-4*t.step.options.lng)),s=t.step.options,"undefined"!==typeof s){r.next=7;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),r.abrupt("return");case 7:if(n=t.geolocation.GPSdistance,o={lat:s.lat,lng:s.lng},"geolocation"===t.step.type&&s.locations&&s.locations.length>0&&(o.lat=s.locations[t.geolocation.currentIndex].lat,o.lng=s.locations[t.geolocation.currentIndex].lng),t.geolocation.GPSdistance=1e3*et.distanceInKmBetweenEarthCoordinates(o.lat,o.lng,a.latitude,a.longitude),l=et.bearingBetweenEarthCoordinates(a.latitude,a.longitude,o.lat,o.lng),(null===t.geolocation.distance||"locate-item-ar"===t.step.type&&(null!==n&&n>t.minDistanceForGPS||!t.deviceHasGyroscope)||"locate-item-ar"!==t.step.type)&&((!t.geolocation.distance||t.geolocation.GPSdistance<t.geolocation.distance||t.geolocation.GPSdistance>t.geolocation.distance+4)&&(t.geolocation.distance=t.geolocation.GPSdistance),t.geolocation.rawDirection=l),c=et.degreesToRadians(l),t.deviceHasGyroscope||(c=0,u=2+(null!==t.geolocation.target?t.geolocation.target.size:0),t.geolocation.GPSdistance=Math.max(u,t.geolocation.GPSdistance)),t.geolocation.position.x=Math.sin(c)*t.geolocation.GPSdistance,t.geolocation.position.y=Math.cos(c)*t.geolocation.GPSdistance,"locate-item-ar"!==t.step.type||null===t.geolocation.target||null===t.geolocation.target.scene){r.next=27;break}if(d=t.geolocation.target,p=d.scene,f=p.getObjectByName("targetObject"),t.geolocation.canSeeTarget=null===d.size||t.geolocation.GPSdistance<40*d.size,"undefined"!==typeof f){r.next=24;break}return r.abrupt("return");case 24:f.visible||(f.position.x=t.geolocation.position.x,f.position.y=t.geolocation.position.y,f.visible=!0),(null!==n&&n>t.minDistanceForGPS||!1===t.deviceHasGyroscope)&&new fa["a"].Tween(f.position).to({x:t.geolocation.position.x,y:t.geolocation.position.y},1e3).easing(fa["a"].Easing.Quadratic.InOut).start(),t.updatePlayerCanTouchTarget();case 27:if("geolocation"!==t.step.type||!(s.distance&&t.geolocation.distance<=parseInt(s.distance,10)||t.geolocation.distance<=20)){r.next=39;break}if(t.geolocation.currentIndex++,!(s.locations&&s.locations.length>0&&t.geolocation.currentIndex<s.locations.length)){r.next=34;break}t.geolocation.foundStep=!1,t.geolocation.foundStep=!0,r.next=39;break;case 34:return t.$refs["geolocation-component"].disabled=!0,t.geolocation.active=!1,t.resetDrawDirectionInterval(),r.next=39,t.checkAnswer(a);case 39:case"end":return r.stop()}}),r)})))()},onUserPositionError:function(e){console.error("UserPositionError",e)},checkUseItem:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!0!==t.playerResult){r.next=2;break}return r.abrupt("return");case 2:if(null!==t.itemUsed){r.next=6;break}return ft(t.$t("label.PleaseSelectAnItemFirst"),"error"),t.$emit("msg","suggestInventory"),r.abrupt("return");case 6:return a=t.getUseItemPictureSize()/100,s={windowWidth:a,item:t.itemUsed.originalPicture?t.itemUsed.originalPicture:t.itemUsed.picture},e&&(s.posX=e.offsetX,s.posY=e.offsetY),r.next=11,t.checkAnswer(s);case 11:case"end":return r.stop()}}),r)})))()},showItemLocation:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l,c,u,d;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=r.getUseItemPictureSize()/100,n={left:Math.round(e/100*100*s),top:Math.round(t/100*133*s)},o=r.useItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=n.top-o+"px",l.style.left=n.left-o+"px",l.style.display="block",c=l.src,u=null!==r.itemUsedComputed?r.itemUsedComputed:r.itemUsed,d=r,et.setInterval((function(){l.src===c&&d.step.answers&&d.step.answers.item?(u.pictures&&u.pictures[d.lang]&&""!==u.pictures[d.lang]?l.src=d.step.answers.item.indexOf("statics/")>-1||-1!==d.step.answers.item.indexOf("blob:")?u.picture:d.serverUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+u.picture:l.src=d.step.answers.item.indexOf("statics/")>-1||-1!==d.step.answers.item.indexOf("blob:")?d.step.answers.item:d.serverUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+d.step.answers.item,l.style.borderRadius="50%"):(l.src=c,l.style.borderRadius="0")}),1e3);case 11:case"end":return a.stop()}}),a)})))()},initUseItemElements:function(){this.useItem.imageWidth=this.getUseItemPictureSize(),this.useItem.crossSize=this.useItem.imageWidth/8,this.useItem.imageHeight=4*this.useItem.imageWidth/3},getUseItemPictureSize:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},checkFindItem:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!0!==t.playerResult){r.next=2;break}return r.abrupt("return");case 2:return a=t.getFindItemPictureSize()/100,s={windowWidth:a,posX:e.offsetX,posY:e.offsetY},r.next=6,t.checkAnswer(s);case 6:case"end":return r.stop()}}),r)})))()},initFindItemElements:function(){this.findItem.imageWidth=this.getFindItemPictureSize(),this.findItem.crossSize=this.findItem.imageWidth/8,this.findItem.imageHeight=4*this.findItem.imageWidth/3},getFindItemPictureSize:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},prepareSnapshot:function(){this.takingSnapshot=!0,this.$q.loading.show(),this.$emit("hideButtons");var e=this;this.isIOs&&CameraPreview?CameraPreview.takePicture({quality:85},(function(t){var r="data:image/jpeg;base64,"+t,a=document.getElementById("snapshotImageIos");a.src=r,setTimeout((function(){e.takeSnapshot()}),2e3)})):this.imageCapture.takePhoto().then((function(t){var r=document.getElementById("snapshotImage");r.src=URL.createObjectURL(t),r.onload=function(){var t=r.width,a=r.height;t>a&&(r.style.transform="rotate(90deg)");var i=e.getScreenWidth(),s=e.getScreenHeight();r.style.height=s+"px",r.style.width=a/s*t+"px",r.style.left=(i-parseInt(r.style.width,10))/2+"px",setTimeout((function(){e.takeSnapshot()}),2e3)}})).catch((function(t){ft(e.$t("label.SnapshotTakenIssue"),"info"),console.log(t),e.$q.loading.hide(),e.$emit("showButtons")}))},switchCamera:function(){"environment"===this.cameraUsed?this.cameraUsed="user":this.cameraUsed="environment",this.isIOs&&CameraPreview?CameraPreview.switchCamera():(this.clearAllCameraStreams(),this.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0))},takeSnapshot:function(){var e=this;this.$q.loading.hide(),navigator.screenshot.save((function(t,r){if(t)console.error(t),ft(e.$t("label.ErrorTakingSnapshot"),"info");else{var a=cordova.plugins.permissions;a.requestPermission(a.READ_EXTERNAL_STORAGE,(function(t){t.hasPermission?e.saveSnapshot(r):ft(e.$t("label.ErrorTakingSnapshot"),"info")}),alert)}e.takingSnapshot=!1,e.$emit("showButtons")}))},saveSnapshot:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,new Promise((function(t){return window.resolveLocalFileSystemURL("file://"+e.filePath,t,(function(e){console.log("Error "+e)}))}));case 3:return a=r.sent,r.next=6,new Promise((function(e,t){return a.file((function(t){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.readAsArrayBuffer(t)}))}));case 6:s=r.sent,n=new Blob([new Uint8Array(s)],{type:"image/jpg"}),o=new FormData,o.append("image",n),l=t,Cr.uploadSnapshot(t.step.questId,o,(function(e,t){e?ft(this.$t("label.ErrorTakingSnapshot"),"error"):ft(l.$t("label.SnapshotTaken"),"info")})),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),ft(t.$t("label.ErrorTakingSnapshot"),"error"),console.log("Error: "+r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,r=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",r.getMonth()+1+"."+r.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return!this.isHybrid&&e>500&&(e=500),e},getScreenHeight:function(){var e=window.innerHeight;return e},showFoundLocation:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=r.getFindItemPictureSize()/100,n={left:Math.round(e/100*100*s),top:Math.round(t/100*133*s)},o=r.findItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=n.top-o+"px",l.style.left=n.left-o+"px",l.style.display="block";case 7:case"end":return a.stop()}}),a)})))()},checkPuzzle:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.comparePuzzlePiecePositions(),r&&e.checkAnswer(),t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)})))()},comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l,c,u,d,p,f,m;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.step.options.picture&&-1===e.step.options.picture.indexOf("upload/")?e.serverUrl+"/upload/quest/"+e.step.questId+"/step/jigsaw-puzzle/"+e.step.options.picture:e.serverUrl+e.step.options.picture,t.next=3,et.loadImage(r);case 3:for(e.puzzle.picture=r,a=parseInt(e.step.options.level||2,10),s=e.puzzle.colsByLevel[a],n=Math.pow(s,2),o=document.getElementById("pieces").clientWidth,l=o,c=Math.floor(l/s),u=Math.floor(o/s),d=0;d<n;d++)p=u*(d%s)+"px",f=c*Math.floor(d/s)+"px",e.puzzle.pieces[d]={pos:d,backSize:100*s,backXPos:p,backYPos:f,width:u,height:c,classes:"piece"};m=!0;while(m)e.puzzle.pieces=e.shuffle(e.puzzle.pieces),m=e.comparePuzzlePiecePositions();return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},shuffle:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[r],e[r]=a}return e},handleDragStart:function(e){if(this.puzzle&&"drag"===this.puzzle.mode)return e.target.className&&-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0;this.puzzle.dragSrcEl=null,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},handleDragOver:function(e){this.puzzle&&"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),r=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(r,t)}return!0}},switchPieces:function(e,t){var r=0,a=0;if(t!==e){for(var i=0;i<this.puzzle.pieces.length;i++)this.puzzle.pieces[i].pos===t&&(r=i),this.puzzle.pieces[i].pos===e&&(a=i);var s=this.puzzle.pieces[r];o["a"].set(this.puzzle.pieces,r,this.puzzle.pieces[a]),o["a"].set(this.puzzle.pieces,a,s),this.checkPuzzle()}},changePuzzleMode:function(){this.puzzle&&"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if(this.puzzle.dragSrcEl=null,this.puzzle&&"click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var r=this.puzzle.pieces[t];o["a"].set(this.puzzle.pieces,t,r)}}else{if(this.puzzle.clickModeSelected===e)return;for(var a=0;a<this.puzzle.pieces.length;a++)this.puzzle.pieces[a].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var r=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!r.single||t<this.step.options.items.length)&&(e[t]={imagePath:r.imagePath,isClicked:!1,isFound:!1})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,o["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){for(var r=0;r<this.memory.items.length;r++)this.memory.items[r].isFound||(this.memory.items[r].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,o["a"].set(this.memory.items,r,this.memory.items[r]));this.checkAnswer(!0)}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,o["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),o["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,et.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,o["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),o["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},changePortraitPart:function(e){o["a"].set(this.portrait[e],"position",this.portrait[e].position+1),this.portrait[e].position>this.portrait[e].number&&o["a"].set(this.portrait[e],"position",1)},phoneCall:function(){var e="0668666194";cordova.plugins.phonedialer.dial(e,(function(e){console.log("Dialing succeeded")}),(function(e){"empty"==e?console.log("Unknown phone number"):console.log("Dialer Error:"+e)}),!1)},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,r=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&r.lookAt(e.camera.position),t.length>0)for(var a=0;a<t.length;a++)t[a].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(r.position),e.renderer.render(e.scene,e.camera),fa["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},animateMarkerCanvas:function(){if("undefined"===typeof this.step||"sensor"!==this.step.id&&"undefined"===typeof this.step.type)this.stopLatestAnimation();else{var e=this.locateMarker.mixers;if(null!==this.locateMarker.arToolkitContext)if(this.locateMarker.arToolkitContext.update(this.$refs["camera-stream-for-locate-marker"]),"locate-marker"===this.step.type&&this.step.options&&"scan"===this.step.options.mode||"sensor"===this.step.id)for(var t in this.locateMarker.markerRoots)this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[t]);else this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[this.step.answers]);if(null!==this.locateMarker.renderer&&this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera),e.length>0)for(var r=0;r<e.length;r++)e[r].update(this.locateMarker.clock.getDelta());fa["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateMarkerCanvas)}},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onAbsoluteOrientationSensorReading:function(){var e=this;if(!1!==this.geolocation.absoluteOrientationSensor.activated){var t=(new Je["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&(this.geolocation.target.camera.quaternion=t),!this.geolocation.waitForNextQuaternionRead){var r=(new Je["Euler"]).setFromQuaternion(t,"ZXY"),a=(new Je["Euler"]).setFromQuaternion(t,"XZY"),i=r.x<Math.PI/4?r.z:a.y,s=JSON.stringify((360-et.radiansToDegrees(i))%360);this.geolocation.direction=(this.geolocation.rawDirection-s+360)%360,this.geolocation.waitForNextQuaternionRead=!0,et.setTimeout((function(){e.geolocation.waitForNextQuaternionRead=!1}),100)}}else console.warn("sensor is not activated")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var r=t.scene.getObjectByName("targetObject"),a=new Je["Vector2"];a.x=e.clientX/t.renderer.domElement.clientWidth*2-1,a.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var i=new Je["Raycaster"];i.setFromCamera(a,t.camera);var s=i.intersectObject(r,!0),n="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(s.length>0&&n){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.$refs["geolocation-component"].disabled=!0,this.geolocation.active=!1);var o="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(o),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(e,t,r){var a=this;return n()(i.a.mark((function s(){var n,o,l,c,u,d,p,f;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=4,o=Kr[e],i.prev=2,i.next=5,a.ModelLoaderAsync(e,t,r);case 5:l=i.sent,i.next=13;break;case 8:return i.prev=8,i.t0=i["catch"](2),console.error("Error while loading 3D model:",i.t0),ft(a.$t("label.CouldNotDisplayObject"),"error"),i.abrupt("return");case 13:return c=l.scene,o&&(o.rotation=o.rotation||{},o.rotation.hasOwnProperty("x")&&c.rotateX(et.degreesToRadians(o.rotation.x)),o.rotation.hasOwnProperty("y")&&c.rotateY(et.degreesToRadians(o.rotation.y)),o.rotation.hasOwnProperty("z")&&c.rotateZ(et.degreesToRadians(o.rotation.z)),u=(o.scale||1)*n,c.scale.set(u,u,u)),d=(new Je["Box3"]).setFromObject(c),p=d.getCenter(new Je["Vector3"]),p.multiplyScalar(-1),f=new Je["Object3D"],c.applyMatrix((new Je["Matrix4"]).makeTranslation(p.x,p.y,p.z)),f.add(c),f.up=new Je["Vector3"](0,0,1),c=f,o&&o.translation&&"locate-item-ar"===a.step.type&&(o.translation.hasOwnProperty("x")&&(c.position.x+=o.translation.x*n),o.translation.hasOwnProperty("y")&&(c.position.y+=o.translation.y*n),o.translation.hasOwnProperty("z")&&(c.position.z+=o.translation.z*n)),i.abrupt("return",{object:c,animations:l.animations});case 25:case"end":return i.stop()}}),s,null,[[2,8]])})))()},ModelLoaderAsync:function(e,t,r){var a=this;return n()(i.a.mark((function s(){var n,o;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=console.log,i.next=3,et.readBinaryFile(t,e+".glb");case 3:return o=i.sent,i.abrupt("return",new Promise((function(i,s){var l=new ha.a;e&&-1!==e.indexOf("blob:")?l.load(e,i,n,s):o?l.load(o,i,n,s):r?l.load(a.serverUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",i,n,s):l.load(a.serverUrl+"/statics/3d-models/"+e+".glb",i,n,s)})));case 5:case"end":return i.stop()}}),s)})))()},addDefaultLightTo3DScene:function(e){var t=new Je["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new Je["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,r){this.displaySuccessIcon=!0,ft(t,e?"rightAnswer":"wrongAnswer",r)},readMore:function(){this.step.extraText&&(this.story.step=6,this.story.data={readMore:et.replaceBreakByBR(this.step.extraText),character:this.customization&&this.customization.character&&""!==this.customization.character?-1===this.customization.character.indexOf("blob:")?this.serverUrl+"/upload/quest/"+this.customization.character:this.customization.character:"2"})},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera():this.$store.dispatch("clearMediaStreams")},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t,r=this.deviceMotion,a=!0;if(null!==this.deviceHasGyroscope||this.isIOs||(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha),(!this.deviceHasGyroscope||null===this.geolocation.distance||null===this.geolocation.GPSdistance||this.geolocation.GPSdistance>this.minDistanceForGPS||null===this.geolocation.absoluteOrientationSensor||!this.geolocation.absoluteOrientationSensor.quaternion||isNaN(this.geolocation.position.x)||isNaN(this.geolocation.position.y))&&(a=!1),this.geolocation.target&&this.geolocation.target.scene?(t=this.geolocation.target.scene.getObjectByName("targetObject"),a=a&&"undefined"!==typeof t&&0===fa["a"].getAll().length):a=!1,!a)return r.acceleration.avgData={x:[],y:[],z:[]},r.velocity={x:0,y:0},void(r.dateLatestEvent=null);var i=e.acceleration,s=new Je["Vector3"](i.x,i.y,i.z),n=(new Je["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);s.applyQuaternion(n),r.acceleration.raw=s;var o=new Date;if(null!==r.dateLatestEvent){var l=(o.getTime()-r.dateLatestEvent.getTime())/1e3;r.acceleration.avgData.x.push(r.acceleration.raw.x),r.acceleration.avgData.y.push(r.acceleration.raw.y),r.acceleration.avgData.z.push(r.acceleration.raw.z),r.acceleration.avgData.x.length>r.acceleration.maxAvgItems&&r.acceleration.avgData.x.shift(),r.acceleration.avgData.y.length>r.acceleration.maxAvgItems&&r.acceleration.avgData.y.shift(),r.acceleration.avgData.z.length>r.acceleration.maxAvgItems&&r.acceleration.avgData.z.shift(),r.acceleration.filtered.x=et.arrayAverage(r.acceleration.avgData.x),r.acceleration.filtered.y=et.arrayAverage(r.acceleration.avgData.y),r.acceleration.filtered.z=et.arrayAverage(r.acceleration.avgData.z),r.isAccelerationIdle=Math.pow(r.acceleration.filtered.x,2)+Math.pow(r.acceleration.filtered.y,2)+Math.pow(r.acceleration.filtered.z,2)<.08;var c=1.4,u=.3;r.velocity.x*r.acceleration.filtered.x<0?r.acceleration.filtered.x*=u:r.isAccelerationIdle||(r.acceleration.filtered.x*=c),r.velocity.y*r.acceleration.filtered.y<0?r.acceleration.filtered.y*=u:r.isAccelerationIdle||(r.acceleration.filtered.y*=c),r.velocity.x+=r.acceleration.filtered.x*l,r.velocity.y+=r.acceleration.filtered.y*l,r.isAccelerationIdle?(r.velocity.x*=.99/Math.pow(r.idleAccelerationCounter,2),r.velocity.y*=.99/Math.pow(r.idleAccelerationCounter,2),r.idleAccelerationCounter=Math.max(100,r.idleAccelerationCounter+1)):r.idleAccelerationCounter=1;var d=5e3/3600,p=Math.sqrt(Math.pow(r.velocity.x,2)+Math.pow(r.velocity.y,2));p>d&&(r.velocity.x=r.velocity.x*d/p,r.velocity.y=r.velocity.y*d/p);var f,m={x:t.position.x,y:t.position.y},h={x:-r.velocity.x*l,y:-r.velocity.y*l};f=r.isAccelerationIdle?{x:0,y:0}:{x:(this.geolocation.position.x-m.x)/600,y:(this.geolocation.position.y-m.y)/600},this.geolocation.GPSdistance<=this.minDistanceForGPS&&(t.position.x=m.x+h.x+f.x,t.position.y=m.y+h.y+f.y,this.geolocation.distance=Math.sqrt(Math.pow(t.position.x,2)+Math.pow(t.position.y,2)),this.geolocation.rawDirection=(et.radiansToDegrees(-Math.atan2(t.position.y,t.position.x))+90)%360,this.updatePlayerCanTouchTarget())}r.dateLatestEvent=o},updatePlayerCanTouchTarget:function(){!this.geolocation.canTouchTarget&&this.geolocation.distance<=10&&(this.geolocation.canTouchTarget=!0)},waitForGyroscopeDetection:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,t.abrupt("return",new Promise((function(t,a){null!==e.deviceHasGyroscope||e.geolocation.gyroscopeDetectionCounter>100?t():(e.geolocation.gyroscopeDetectionCounter++,et.setTimeout(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.waitForGyroscopeDetection();case 2:t();case 3:case"end":return e.stop()}}),e)}))),250))})));case 2:case"end":return t.stop()}}),t)})))()},enlargeThePicture:function(e){this.enlargePicture.show=!0;var t=this.step.options.images[this.playerCode[e]].imagePath;this.enlargePicture.url=t&&-1!==t.indexOf("blob:")?t:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t},triggerIotEvent:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("mqtt"!==t.step.options.protocol){r.next=4;break}t.mqttClient.publish("Graaly",JSON.stringify({macAddress:t.step.options.boardMacAddress,code:t.step.options.code})),r.next=31;break;case 4:if("bluetooth"!==t.step.options.protocol){r.next=30;break}r.t0=t.step.options.object,r.next="lcd"===r.t0?8:"buzzer"===r.t0?10:"chest"===r.t0?12:"relay"===r.t0?15:18;break;case 8:return a=t.step.options.message,r.abrupt("break",19);case 10:return a=t.step.options.duration+","+t.step.options.frequency,r.abrupt("break",19);case 12:return t.iot.chest.disableActionButtons=!0,a=e,r.abrupt("break",19);case 15:return t.iot.relay.disableActionButtons=!0,a=e,r.abrupt("break",19);case 18:throw new Error("Object '"+t.step.options.object+"' not supported");case 19:if(t.sendMessageToBluetoothServer(t.step.options.object+":"+a),"chest"!==t.step.options.object){r.next=24;break}return r.next=23,et.sleep(2e3);case 23:t.iot.chest.disableActionButtons=!1;case 24:if("relay"!==t.step.options.object){r.next=28;break}return r.next=27,et.sleep(2e3);case 27:t.iot.relay.disableActionButtons=!1;case 28:r.next=31;break;case 30:throw new Error("IoT protocol not supported: "+t.step.options.protocol);case 31:case"end":return r.stop()}}),r)})))()},bluetoothEnableSuccess:function(){console.log("Bluetooth is enabled"),this.bluetooth.enabled=!0,this.searchForBluetoothPeripheral()},bluetoothDisconnect:function(e){if(this.isHybrid){console.log("Disconnecting BLE");var t=this;ble.disconnect(e,(function(){t.bluetooth.enabled=!1,t.bluetooth.deviceId=null}))}},bluetoothEnableFailure:function(){console.log("The user did *not* enable Bluetooth"),ft("Bluetooth could not be enabled","error")},searchForBluetoothPeripheral:function(){console.log("Searching for BT peripherals..."),ble.startScan([],this.bluetoothScanResult)},bluetoothScanResult:function(e){console.log("Device discovered",e),console.log(this.step.options.deviceid),e.name===this.step.options.deviceid&&(this.stopBluetoothScan(),console.log("Graaly IoT BT device discovered"),this.bluetooth.deviceId=e.id,ble.connect(e.id,this.bluetoothDeviceConnected,this.bluetoothDeviceDisonnected))},bluetoothDeviceConnected:function(){var e=n()(i.a.mark((function e(t){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("BT device connected",t),e.next=3,this.sendMessageToBluetoothServer("cm:"+this.step.options.object);case 3:"wait-for-event"===this.step.type&&(console.log("Start notification listening"),ble.startNotification(t.id,this.iotObject.bleServiceId,this.iotObject.bleCharacteristicId,this.onBluetoothNotification,(function(e){return console.error(e)}))),"trigger-event"!==this.step.type||this.step.options.triggerMode&&"auto"!==this.step.options.triggerMode||("chest"===this.step.options.object||"relay"===this.step.options.object?this.triggerIotEvent("open"):this.triggerIotEvent(""));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceDisonnected:function(e){console.log("BT device disconnected",e)},onBluetoothNotification:function(){var e=n()(i.a.mark((function e(t){var r,a,s,n,o,l,c,u,d,p,f;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=et.bytesToString(t),console.log("Received BT notification: "+r),this.lastReceivedValue=r,null===this.playerResult){e.next=5;break}return e.abrupt("return");case 5:e.t0=this.step.options.object,e.next="keypad"===e.t0?8:"joystick"===e.t0?22:"distance"===e.t0?30:"pot"===e.t0?33:"button"===e.t0?40:"escapebox"===e.t0?45:46;break;case 8:if(!(r.length<8)){e.next=10;break}throw new Error("Invalid data retrieved from IoT device (keypad mode): "+r);case 10:if(this.iot.keypadAnswer=et.replaceStringAt(this.iot.keypadAnswer,this.iot.keypadAnswer.indexOf("_"),r.charAt(7)),-1!==this.iot.keypadAnswer.indexOf("_")){e.next=21;break}if(this.iot.keypadAnswer!==this.step.options.answer){e.next=16;break}this.checkAnswer(),e.next=21;break;case 16:return this.playerResult=!1,e.next=19,et.sleep(1e3);case 19:this.iot.keypadAnswer="_".repeat(this.step.options.answer.length),this.playerResult=null;case 21:return e.abrupt("break",47);case 22:if(s=r.match(new RegExp("(\\d+)","g")),a=!0,2===s.length){e.next=26;break}throw new Error("Invalid length for array 'axisValues'");case 26:for(s={X:s[1],Y:s[0]},n=0,o=["X","Y"];n<o.length;n++)l=o[n],c=parseInt(s[l],10),this.iot["axis"+l]=c/255,(c<this.step.options["range"+l].min||c>this.step.options["range"+l].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 30:return this.iot.distance=parseInt(r.substring(9),10),this.iot.distance>=this.step.options.range.min&&this.iot.distance<=this.step.options.range.max&&this.checkAnswer(),e.abrupt("break",47);case 33:if(u=r.match(new RegExp("(\\d+)","g")),a=!0,3===u.length){e.next=37;break}throw new Error("Invalid length for array 'potValues'");case 37:for(d=0;d<3;d++)p=parseInt(u[d],10),this.iot["pot"+(d+1)]=p/255,(p<this.step.options["range"+(d+1)].min||p>this.step.options["range"+(d+1)].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 40:if(!(r.length<8)){e.next=42;break}throw new Error("Invalid data retrieved from IoT device (button mode): "+r);case 42:return f=r.substring(7),"pressed"===f&&this.checkAnswer(),e.abrupt("break",47);case 45:return e.abrupt("break",47);case 46:throw new Error("Unknown IoT object code '"+this.step.options.object+"'");case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendMessageToBluetoothServer:function(e){var t=this;return new Promise((function(r,a){t.bluetooth.enabled&&null!==t.bluetooth.deviceId?(console.log("sendMessageToBluetoothServer: "+e),ble.writeWithoutResponse(t.bluetooth.deviceId,Zr.baseServiceID,t.createIotCara(t.bluetooth.deviceId),et.stringToBytes(e),(function(e){console.log("BLE write success",e),r()}),(function(e){console.log("BLE write failure",e),a(e)}))):a(new Error("Bluetooth device not connected"))}))},stopBluetoothScan:function(){var e=n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ble.stopScan((function(){console.log("BT Scan stopped")}),(function(e){console.log("Could not stop BT scan",e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stopBluetoothNotification:function(){if(this.isHybrid){var e=this;return new Promise((function(t,r){ble.stopNotification(e.bluetooth.deviceId,Zr.baseServiceID,e.createIotCara(e.bluetooth.deviceId),(function(){t()}),(function(e){r(new Error("Could not stop bluetooth notifications. error: "+e))}))}))}},getIotObjectFromCode:function(e){var t=!0,r=!1,a=void 0;try{for(var i,s=Xr[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var n=i.value;if(n.code===e)return n}}catch(o){r=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}throw new Error("Unknown object code '"+e+"'")},createIotCara:function(e){var t=Zr.baseCara+e.toLowerCase().replaceAll(":","");return t},isTimerAvailable:function(){return!!(this.step&&void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled&&et.timeStringToSeconds(this.step.countDownTime.time)>0)},startCountdown:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==e.isTimerAvailable()){t.next=11;break}if(r=0,a=Vr.getTimeLeft(e.runId,e.step._id),r=null===a?et.timeStringToSeconds(e.step.countDownTime.time):a,!(r<0&&e.step.countDownTime)){t.next=9;break}e.step.countDownTime.enabled=!1,t.next=11;break;case 9:return t.next=11,e.manageCountDown(r,e.step._id);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("error in countdown()",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},manageCountDown:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=r,r.step.countDownTime&&r.step.countDownTime.enabled&&t===r.step._id&&setTimeout(n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e<=0)){r.next=5;break}return r.next=3,s.handleTimeUp();case 3:r.next=10;break;case 5:return e--,s.countdowntimeleft=e,e%2===0&&"0"!==s.runId&&Vr.storeTimeLeft(s.runId,s.step._id,e),r.next=10,s.manageCountDown(e,t);case 10:case"end":return r.stop()}}),r)}))),1e3);case 2:case"end":return a.stop()}}),a)})))()},handleTimeUp:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTimeUp=!0,e.stopcountdown(),e.step.countDownTime&&(e.step.countDownTime.enabled=!1),r=e.getStepType(e.step.type),e.$emit("closeAllPanels"),"enigma"!==r.category){t.next=8;break}return t.next=8,e.checkAnswer();case 8:case"end":return t.stop()}}),t)})))()},stopcountdown:function(){this.step.countDownTime&&(this.step.countDownTime.enabled=!1)},map:function(e,t,r,a,i){var s=et.map(e,t,et.timeStringToSeconds(r),a,i);return s},getStepType:function(e){var t=!0,r=!1,a=void 0;try{for(var i,s=ea[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var n=i.value;if(n.code===e)return n}}catch(o){r=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},findItemIsFound:function(e){for(var t=!1,r=!1,a=e&&e.windowWidth?e.windowWidth:this.getFindItemPictureSize()/100,i=0;i<this.step.options.coordinates.length;i++)if(!this.step.options.coordinates[i].found){var s={left:Math.round(this.step.options.coordinates[i].left/100*100*a),top:Math.round(this.step.options.coordinates[i].top/100*133*a)},n=Math.round(8*a),o=e?Math.sqrt(Math.pow(s.left-e.posX,2)+Math.pow(s.top-e.posY,2)):100;o<=n?(this.step.options.coordinates[i].found=!0,r=!0,document.getElementById("cross-play"+i).style.left=s.left-n+"px",document.getElementById("cross-play"+i).style.top=s.top-n+"px",document.getElementById("cross-play"+i).style.display="block"):t=!0}return{all:!t,one:r}}}},ka=wa,ya=(r("58dd"),Object(ye["a"])(ka,Qr,Wr,!1,null,"6d2858e8",null)),_a=ya.exports,Sa=r("53fe"),xa=r.n(Sa);o["a"].directive("sortable",{inserted:function(e,t){return new xa.a(e,t.value||{})}});var Ca={components:{stepPlay:_a,story:pa},data:function(){return this.initialState()},mounted:function(){et.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake(),this.isHybrid&&"android"===cordova.platformId&&StatusBar.show()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1}},hint:{isOpened:!1,label:"",suggest:!1,show:!1,used:!1,number:0,remainingNumber:0},info:{isOpened:!1,score:0,quest:{},audio:""},next:{suggest:!1,enabled:!1,canPass:!1},sound:{status:"play"},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},story:{step:null,data:null},loadStepData:!1,run:{},runId:0,player:"P1",isRunFinished:!1,remotePlay:!1,dataSharedWithPartner:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!0,answer:null},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:et.isIOS(),selectedItem:null}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.next=e.next,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectedItem,this.loadStepData=e.loadStepData,this.startDate=e.startDate,this.footer=e.footer},initData:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,e.getQuest(e.questId);case 3:return e.getAudioSound(),e.loadStepData=!1,t.next=7,e.getRun();case 7:return t.next=9,e.getPlayer();case 9:return e.player=t.sent,t.next=12,e.getStep();case 12:if(e.updateHistory(),"use-item"!==e.step.type){t.next=16;break}return t.next=16,e.fillInventory();case 16:e.$q.loading.hide(),e.isHintAvailable()&&(et.setTimeout(e.alertOnHint,12e3),e.hint.show=!0),et.setTimeout(e.alertOnNext,18e4),e.loadStepData=!0;case 20:case"end":return t.stop()}}),t)})))()},moveToStep:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return et.clearAllRunningProcesses(),t.resetData(),t.$q.loading.show(),t.loadStepData=!1,r.next=6,t.getRun();case 6:return r.next=8,t.getPlayer();case 8:return t.player=r.sent,r.next=11,t.getStep(!1,e);case 11:if(t.updateHistory(),"use-item"!==t.step.type){r.next=15;break}return r.next=15,t.fillInventory();case 15:t.$q.loading.hide(),t.isHintAvailable()&&(et.setTimeout(t.alertOnHint,12e3),t.hint.show=!0),et.setTimeout(t.alertOnNext,18e4),t.loadStepData=!0;case 19:case"end":return r.stop()}}),r)})))()},getRun:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l,c,u,d;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_r.listForAQuest(e.questId,{retries:0});case 2:return r=t.sent,a=0,s=!!e.$route.query.hasOwnProperty("remoteplay")&&e.$route.query.remoteplay,n=e.$route.query.hasOwnProperty("sharepartner")&&"true"===e.$route.query.sharepartner,t.next=8,e.checkIfRunIsAlreadyLoaded(e.questId);case 8:if(o=t.sent,!o){t.next=13;break}return t.next=12,e.loadOfflineRun(e.questId);case 12:l=t.sent;case 13:if(!r||!r.data){t.next=63;break}e.offline.active=!1,c=0;case 16:if(!(c<r.data.length)){t.next=38;break}if(r.data[c]&&r.data[c].status&&"finished"===r.data[c].status&&(e.isRunFinished=!0),!r.data[c]||!r.data[c].status||"in-progress"!==r.data[c].status){t.next=35;break}if(e.run=r.data[c],e.runId=e.run._id,a=r.data[c].currentChapter,!o){t.next=35;break}if(!(l.dateUpdated>e.run.dateUpdated)){t.next=32;break}return u=e.run._id,e.run=l,e.run._id||(e.run._id=u,e.runId=u),e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=30,_r.updateFromOffline(e.run);case 30:t.next=35;break;case 32:return e.run.answers=l.answers,t.next=35,e.updateOfflineRun(e.questId);case 35:c++,t.next=16;break;case 38:if(0!==a){t.next=60;break}return t.next=41,_r.init(e.questId,e.questVersion,e.$route.params.lang,s,null,n);case 41:if(d=t.sent,!(d&&200===d.status&&d.data&&d.data._id)){t.next=56;break}if(!o){t.next=52;break}return e.run=l,e.run._id=d.data._id,e.runId=e.run._id,e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=50,_r.updateFromOffline(e.run);case 50:t.next=54;break;case 52:e.run=d.data,e.runId=e.run._id;case 54:t.next=57;break;case 56:e.$q.dialog({title:e.$t("label.TechnicalProblem"),message:e.$t("label.TechnicalProblemNetworkIssue")}).onOk((function(){e.$router.push("/quest/play/"+e.questId)}));case 57:e.info.score=0,t.next=61;break;case 60:e.info.score=e.run.tempScore;case 61:t.next=70;break;case 63:if(e.offline.active=!0,!o){t.next=68;break}l&&(e.run=l,e.run._id&&(e.runId=e.run._id),e.info.score=e.run.tempScore,a=e.run.currentChapter),t.next=70;break;case 68:return t.next=70,e.updateOfflineRun(e.questId);case 70:if(0!==a){t.next=73;break}return t.next=73,e.updateOfflineRun(e.questId);case 73:case"end":return t.stop()}}),t)})))()},getPlayer:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.run.team||!e.run.team.members){t.next=8;break}r=0;case 2:if(!(r<e.run.team.members.length)){t.next=8;break}if(e.run.team.members[r]._id!==e.$store.state.user._id){t.next=5;break}return t.abrupt("return",e.run.team.members[r].player);case 5:r++,t.next=2;break;case 8:return t.abrupt("return","P1");case 9:case"end":return t.stop()}}),t)})))()},getStep:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=r.$store.state.user._id===r.info.quest.authorUserId,n=Array.isArray(r.info.quest.editorsUserId)&&r.info.quest.editorsUserId.includes(r.$store.state.user._id),o=r.$store.state.user.isAdmin||s||n,r.warnings.stepDataMissing=!1,!t){a.next=8;break}l=t,a.next=37;break;case 8:if(r.offline.active&&!o){a.next=15;break}return a.next=11,_r.getNextStep(r.questId,r.player);case 11:if(c=a.sent,!c||200===c.status){a.next=15;break}return"app_quest_data_is_obsolete"===c.data.message?r.$q.dialog({title:r.$t("label.QuestUpdated"),message:r.$t("label.PleaseRestartQuest")}).onOk((function(){r.$router.push("/quest/play/"+r.questId)})):r.$q.dialog({title:r.$t("label.TechnicalProblem")}).onOk((function(){r.$router.push("/quest/play/"+r.questId)})),a.abrupt("return",!1);case 15:if(!c||!c.data||200!==c.status){a.next=30;break}if(!c.data.next){a.next=25;break}if("locationMarker"!==c.data.next){a.next=22;break}return r.step={id:"sensor"},a.abrupt("return",!1);case 22:l=c.data.next;case 23:a.next=28;break;case 25:return r.info.quest.playersNumber&&r.info.quest.playersNumber>1&&r.showWaitingPage(),r.getPreviousStep(),a.abrupt("return",!1);case 28:a.next=37;break;case 30:return a.next=32,r.getNextOfflineStep(r.questId,null,r.player);case 32:if(l=a.sent,l){a.next=37;break}return r.info.quest.playersNumber&&r.info.quest.playersNumber>1&&r.showWaitingPage(),r.getPreviousStep(),a.abrupt("return",!1);case 37:if("locationMarker"!==l){a.next=40;break}return r.step={id:"sensor"},a.abrupt("return",!1);case 40:if("end"!==l){a.next=42;break}return a.abrupt("return",r.$router.push("/quest/"+r.questId+"/end"));case 42:return a.next=44,r.checkIfStepIsAlreadyLoaded(l);case 44:if(u=a.sent,u&&!e){a.next=57;break}return a.next=48,Cr.getById(l,r.questVersion,r.lang);case 48:if(d=a.sent,!d||!d.data||200!==d.status){a.next=53;break}d.data&&d.data.message?"Step not yet available"===d.data.message&&r.showStepBlockedMessage(d.data.startDate):(r.step=d.data,r.step.id=r.step.stepId,r.getPreviousStep(),r.step.hint&&(r.hint.remainingNumber=r.step.hint.length)),a.next=55;break;case 53:return r.warnings.stepDataMissing=!0,a.abrupt("return",!1);case 55:a.next=143;break;case 57:return a.next=59,et.readFile(r.questId,"step_"+l+".json");case 59:if(p=a.sent,p){a.next=71;break}if(!e){a.next=65;break}r.warnings.questDataMissing=!0,a.next=69;break;case 65:return a.next=67,r.getStep(!0,t);case 67:return f=a.sent,a.abrupt("return",f);case 69:a.next=143;break;case 71:if(m=JSON.parse(p),m.hint&&(r.hint.remainingNumber=m.hint.length),h=r.offlineCheckAccess(m),h&&h.message&&"Step not yet available"===stepAccessMessage&&r.showStepBlockedMessage(h.startDate),!m.backgroundImage){a.next=80;break}return a.next=78,et.readBinaryFile(r.questId,m.backgroundImage);case 78:b=a.sent,b?m.backgroundImage=b:r.warnings.stepDataMissing=!0;case 80:if(!m.videoStream||""===m.videoStream){a.next=85;break}return a.next=83,et.readBinaryFile(r.questId,m.videoStream);case 83:g=a.sent,g?m.videoStream=g:r.warnings.stepDataMissing=!0;case 85:if("choose"!==m.type||!m.options){a.next=96;break}v=0;case 87:if(!(v<m.options.items.length)){a.next=96;break}if(!m.options.items[v].imagePath){a.next=93;break}return a.next=91,et.readBinaryFile(r.questId,m.options.items[v].imagePath);case 91:w=a.sent,w?m.options.items[v].imagePath=w:r.warnings.stepDataMissing=!0;case 93:v++,a.next=87;break;case 96:if("memory"!==m.type||!m.options||!m.options.items){a.next=107;break}v=0;case 98:if(!(v<m.options.items.length)){a.next=107;break}if(!m.options.items[v].imagePath){a.next=104;break}return a.next=102,et.readBinaryFile(r.questId,m.options.items[v].imagePath);case 102:k=a.sent,k?m.options.items[v].imagePath=k:r.warnings.stepDataMissing=!0;case 104:v++,a.next=98;break;case 107:if("code-image"!==m.type||!m.options||!m.options.images){a.next=118;break}v=0;case 109:if(!(v<m.options.images.length)){a.next=118;break}if(!m.options.images[v].imagePath){a.next=115;break}return a.next=113,et.readBinaryFile(r.questId,m.options.images[v].imagePath);case 113:y=a.sent,y?m.options.images[v].imagePath=y:r.warnings.stepDataMissing=!0;case 115:v++,a.next=109;break;case 118:if("jigsaw-puzzle"!==m.type||!m.options||!m.options.picture||""===m.options.picture){a.next=123;break}return a.next=121,et.readBinaryFile(r.questId,m.options.picture);case 121:_=a.sent,_?m.options.picture=_:r.warnings.stepDataMissing=!0;case 123:if("new-item"!==m.type||!m.options||!m.options.picture||""===m.options.picture){a.next=128;break}return a.next=126,et.readBinaryFile(r.questId,m.options.picture);case 126:S=a.sent,S&&(m.options.picture=S,m.options.hasOwnProperty("pictures")&&m.options.pictures[r.lang]&&(m.options.pictures[r.lang]=S));case 128:if("character"!==m.type||!m.options||!m.options.character||""===m.options.character||"usequestcharacter"===m.options.character){a.next=133;break}return a.next=131,et.readBinaryFile(r.questId,m.options.character);case 131:x=a.sent,x&&(m.options.character=x);case 133:if("find-item"!==m.type&&"use-item"!==m.type||!m.options||!m.options.altFile||""===m.options.altFile){a.next=138;break}return a.next=136,et.readBinaryFile(r.questId,m.options.altFile);case 136:C=a.sent,C&&(m.options.altFile=C);case 138:return r.step=m,r.step.id=r.step.stepId,r.getPreviousStep(),r.offline.answer=r.step.answers,a.abrupt("return",!0);case 143:case"end":return a.stop()}}),a)})))()},showWaitingPage:function(){var e=this;this.step={id:"waiting"},this.next.enabled=!1,this.next.canPass=!1,setTimeout(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.moveToStep();case 1:case"end":return t.stop()}}),t)}))),15e3)},updateHistory:function(){this.$store.state.history&&this.$store.state.history.items||(this.$store.state.history={items:[],index:0}),-1===this.$store.state.history.items.indexOf(this.step.stepId)&&this.step.stepId&&this.$store.state.history.items.push(this.step.stepId)},getPreviousStep:function(){(this.step.conditions&&this.step.conditions.length>0||"waiting"===this.step.id)&&(this.previousStepId="ok")},trackStepSuccess:function(e,t,r){var a=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r&&(a.info.score+=e),"image-over-flow"!==a.step.type&&a.hideHint(),t.next=4,a.saveOfflineAnswer(!0);case 4:!1===a.step.displayRightAnswer&&a.nextStep();case 5:case"end":return t.stop()}}),t)})))()},trackStepPlayed:function(e,t){var r=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("sensor"!==r.step.id){t.next=5;break}return t.next=3,r.getMarkerStep(e);case 3:t.next=14;break;case 5:if("waiting"!==r.step.id){t.next=10;break}return t.next=8,r.getMarkerStep(e);case 8:t.next=14;break;case 10:r.next.enabled=!0,"image-over-flow"!==r.step.type&&(r.next.suggest=!0,r.hint.show=!1,r.hint.suggest=!1),r.inventory.show=!1,r.footer.tabSelected="next";case 14:case"end":return t.stop()}}),t)})))()},trackStepPass:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(!e.step.canPass&&!1!==e.step.canPass||!0===e.step.canPass)&&(e.next.canPass=!0);case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(e,t){var r=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.hideHint(),e.next=3,r.saveOfflineAnswer(!1);case 3:!1===r.step.displayRightAnswer&&r.nextStep();case 4:case"end":return e.stop()}}),e)})))()},trackMessage:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:"suggestInventory"===e&&(t.inventory.suggest=!0);case 1:case"end":return r.stop()}}),r)})))()},getMarkerStep:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.offline.active){r.next=4;break}return r.next=3,_r.getMarkerNextStep(t.questId,e,t.player);case 3:s=r.sent;case 4:if(!s||!s.data){r.next=8;break}s.data.next?a=s.data.next:ft(t.$t("label.NothingOccurs"),"info"),r.next=11;break;case 8:return r.next=10,t.getNextOfflineStep(t.questId,e,t.player);case 10:a=r.sent;case 11:if(!a){r.next=25;break}if("end"!==a){r.next=24;break}if(!t.$store.state.user.isAdmin){r.next=17;break}return r.abrupt("return",t.$router.push("/admin/validate/"+t.questId));case 17:if(t.$store.state.user._id!==t.info.quest.authorUserId){r.next=21;break}return r.abrupt("return",t.$router.push("/quest/builder/"+t.questId));case 21:return r.abrupt("return",t.$router.push("/quest/"+t.questId+"/end"));case 22:r.next=25;break;case 24:t.moveToStep(a);case 25:case"end":return r.stop()}}),r)})))()},hideHint:function(){this.step.hint={}},getBackgroundImage:function(){return this.info.quest.picture&&"_"===this.info.quest.picture[0]?"statics/images/quest/"+this.info.quest.picture:this.info.quest.picture&&-1!==this.info.quest.picture.indexOf("blob:")?this.info.quest.picture:this.info.quest.picture?this.serverUrl+"/upload/quest/"+this.info.quest.picture:"statics/images/quest/default-quest-picture.png"},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.serverUrl+"/upload/quest/"+this.info.quest.customization.logo},getAudioSound:function(){this.info.quest.customization&&this.info.quest.customization.audio?-1!==this.info.quest.customization.audio.indexOf("blob:")?this.info.audio=this.info.quest.customization.audio:this.info.audio=this.serverUrl+"/upload/quest/"+this.info.quest.customization.audio:this.info.audio=null},nextStep:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$store.state.history.index++,!(t.$store.state.history.items&&t.$store.state.history.index<t.$store.state.history.items.length)){r.next=4;break}return t.moveToStep(t.$store.state.history.items[t.$store.state.history.index]),r.abrupt("return");case 4:if(t.loadStepData=!1,!t.next.enabled){r.next=10;break}return r.next=8,t.moveToNextStep("success");case 8:r.next=17;break;case 10:if(!t.next.canPass){r.next=17;break}if(!e){r.next=16;break}return r.next=14,t.passStep();case 14:r.next=17;break;case 16:t.$q.dialog({dark:!0,message:t.$t("label.ConfirmPass"),ok:t.$t("label.Ok"),cancel:t.$t("label.Cancel")}).onOk(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.passStep();case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){}));case 17:case"end":return r.stop()}}),r)})))()},passStep:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=3;break}return t.next=3,_r.passStep(e.runId,e.step.id,e.player);case 3:return t.next=5,e.passOfflineStep(e.step.id);case 5:return t.next=7,e.moveToNextStep("pass");case 7:case"end":return t.stop()}}),t)})))()},moveToNextStep:function(e){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveOfflineRun(t.questId,t.run);case 2:t.next.enabled=!1,t.next.suggest=!1,t.next.canPass=!1,"locate-item-ar"!==t.step.type&&"image-over-flow"!==t.step.type||t.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),t.moveToStep();case 7:case"end":return e.stop()}}),e)})))()},previousStep:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=!0,e.$store.state.history.index--,e.$store.state.history.index<0?(e.$store.state.history.index=0,r=!1):e.$store.state.history.items&&e.$store.state.history.index>e.$store.state.history.items.length&&(e.$store.state.history.index=e.$store.state.history.items.length),r&&e.moveToStep(e.$store.state.history.items[e.$store.state.history.index]);case 4:case"end":return t.stop()}}),t)})))()},askForHint:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(e.hint.suggest=!1,!e.hint.isOpened){t.next=7;break}e.closeAllPanels(),t.next=13;break;case 7:if(!e.$store.state.user.bonus||!e.$store.state.user.bonus.name||"infinitehint"!==e.$store.state.user.bonus.name){t.next=12;break}return t.next=10,e.getHint();case 10:t.next=13;break;case 12:e.$q.dialog({dark:!0,message:e.$t("label.ConfirmHint"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHint();case 2:case"end":return t.stop()}}),t)}))));case 13:case"end":return t.stop()}}),t)})))()},getHint:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,_r.getHint(e.runId,e.step.stepId,e.run.version);case 3:r=t.sent;case 4:r&&r.hint?e.hint.label=r.hint:e.hint.label=e.step.hint[e.hint.number],e.step.hint&&e.hint.number<e.step.hint.length-1?e.hint.number++:e.hint.number=0,e.hint.used=!0,e.closeAllPanels(),e.hint.isOpened=!0,e.footer.tabSelected="hint",e.hint.remainingNumber>0&&e.hint.remainingNumber--;case 11:case"end":return t.stop()}}),t)})))()},closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},hideFooterButtons:function(){this.footer.show=!1},showFooterButtons:function(){this.footer.show=!0},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.warnings.inventoryMissing=!1,e.offline.active){t.next=5;break}return t.next=4,_r.listWonObjects(e.questId,e.runId);case 4:r=t.sent;case 5:if(!r||!r.data){t.next=10;break}for(e.inventory.items.length=0,a=0;a<r.data.length;a++)e.inventory.items.push({picture:r.data[a].pictures&&r.data[a].pictures[e.lang]?r.data[a].pictures[e.lang]:r.data[a].picture,title:r.data[a].title}),r.data[a].titles&&(e.inventory.items[a].titles=r.data[a].titles);t.next=14;break;case 10:return t.next=12,e.listWonObjects();case 12:s=t.sent,s?e.inventory.items=s:e.warnings.inventoryMissing=!0;case 14:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.inventory.items||0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.footer.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},openInfo:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.info.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.info.isOpened=!0,e.footer.tabSelected="info");case 1:case"end":return t.stop()}}),t)})))()},backToMap:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$router.push("/home"));case 1:case"end":return t.stop()}}),t)})))()},restartGame:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){r.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_r.endRun(e.runId,null,e.questId,e.questVersion,e.info.quest.mainLanguage);case 2:return t.next=4,et.writeInFile(e.questId,"run_"+e.questId+".json",JSON.stringify({}),!1);case 4:e.$router.push("/quest/play/"+e.questId);case 5:case"end":return t.stop()}}),t)})))()},showStepBlockedMessage:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.startDate.enabled=!0,t.startDate.date=e,et.setTimeout(t.computeRemainingTime,1e3);case 3:case"end":return r.stop()}}),r)})))()},computeRemainingTime:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=new Date,a=new Date(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2)-1,e.startDate.date.substr(8,2),0,0,0),s=(a-r.getTime())/1e3,!(s<0)){t.next=7;break}return t.next=6,e.initData();case 6:return t.abrupt("return");case 7:e.startDate.remainingDays=Math.floor(s/86400),e.startDate.remainingHours=Math.floor((s-86400*e.startDate.remainingDays)/3600),e.startDate.remainingMinutes=Math.floor((s-86400*e.startDate.remainingDays-3600*e.startDate.remainingHours)/60),e.startDate.remainingSeconds=Math.floor(s%60),et.setTimeout(e.computeRemainingTime,1e3);case 12:case"end":return t.stop()}}),t)})))()},getQuest:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l,c,u,d,p;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.warnings.questDataMissing=!1,a.next=3,tt.isCached(e);case 3:if(s=a.sent,s&&!t){a.next=11;break}return a.next=7,tt.getLastById(e);case 7:n=a.sent,n&&n.data?r.info.quest=n.data:r.warnings.questDataMissing=!0,a.next=45;break;case 11:return a.next=13,et.readFile(e,"quest_"+e+".json");case 13:if(o=a.sent,o){a.next=25;break}if(!t){a.next=19;break}r.warnings.questDataMissing=!0,a.next=23;break;case 19:return a.next=21,r.getQuest(e,!0);case 21:return l=a.sent,a.abrupt("return",l);case 23:a.next=45;break;case 25:return r.info.quest=JSON.parse(o),a.next=28,et.readBinaryFile(e,r.info.quest.picture);case 28:if(c=a.sent,r.info.quest.picture=c||"_default-quest-picture.png",!r.info.quest.customization||!r.info.quest.customization.logo||""===r.info.quest.customization.logo){a.next=35;break}return a.next=33,et.readBinaryFile(e,r.info.quest.customization.logo);case 33:u=a.sent,u&&(r.info.quest.customization.logo=u);case 35:if(!r.info.quest.customization||!r.info.quest.customization.audio||""===r.info.quest.customization.audio||r.isIOs){a.next=40;break}return a.next=38,et.readBinaryFile(e,r.info.quest.customization.audio);case 38:d=a.sent,d&&(r.info.quest.customization.audio=d);case 40:if(!r.info.quest.customization||!r.info.quest.customization.character||""===r.info.quest.customization.character){a.next=45;break}return a.next=43,et.readBinaryFile(e,r.info.quest.customization.character);case 43:p=a.sent,p&&(r.info.quest.customization.character=p);case 45:case"end":return a.stop()}}),a)})))()},selectItem:function(e){this.inventory.detail.zoom=1,"use-item"!==this.step.type?(this.inventory.detail.isOpened=!0,e.pictures&&e.pictures[this.lang]&&""!==e.pictures[this.lang]?this.inventory.detail.url=e.picture.indexOf("statics/")>-1||-1!==e.picture.indexOf("blob:")?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture:this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.lang]&&""!==e.titles[this.lang]?this.inventory.detail.title=e.titles[this.lang]:this.inventory.detail.title=e.title):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},inventoryZoom:function(e){o["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.sendFeedback(e.feedback.message,{questId:e.questId,stepId:e.step.stepId});case 2:r=t.sent,r?(ft(e.$t("label.YourMessageHasBeenSent"),"info"),e.feedback.isOpened=!1):ft(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return!!(this.step&&this.step.hint&&""!==this.step.hint&&this.step.hint.length>0)},alertOnHint:function(){this.hint.suggest=!0},alertOnNext:function(){this.next.suggest=!0},checkIfStepIsAlreadyLoaded:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(window.cordova){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,et.checkIfFileExists(t.questId,"step_"+e+".json");case 4:if(a=r.sent,!a){r.next=9;break}return r.abrupt("return",!0);case 9:return r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r)})))()},checkIfRunIsAlreadyLoaded:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(window.cordova){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,et.checkIfFileExists(t.questId,"run_"+e+".json");case 4:if(a=r.sent,!a){r.next=9;break}return r.abrupt("return",!0);case 9:return r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r)})))()},loadOfflineRun:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,et.readFile(t.questId,"run_"+e+".json");case 4:if(a=r.sent,a){r.next=9;break}return r.abrupt("return",!1);case 9:return r.abrupt("return",JSON.parse(a));case 10:case"end":return r.stop()}}),r)})))()},updateOfflineRun:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){r.next=2;break}return r.abrupt("return",!1);case 2:return t.run&&t.run.questId||(t.run={_id:t.runId,userId:t.$store.state.user._id,questId:e,version:t.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:t.remotePlay,dataSharedWithPartner:t.dataSharedWithPartner,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:t.info.quest.picture,thumb:t.info.quest.thumb||"default-quest-thumb.png",title:t.info.quest.title,type:t.info.quest.type,zipcode:t.info.quest.location.zipcode,town:t.info.quest.location.town,country:t.info.quest.location.country},language:t.lang,userData:{name:t.$store.state.user.name,picture:t.$store.state.user.picture,location:t.$store.state.user.location},history:[],historyIndex:0}),r.next=5,t.saveOfflineRun(e,t.run);case 5:case"end":return r.stop()}}),r)})))()},saveOfflineAnswer:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l,c,u,d,p,f;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,t.checkIfStepIsAlreadyPlayedInRun(t.step.stepId,t.player);case 4:if(a=r.sent,s=t.run.conditionsDone,n=!1,o=0,!e){r.next=22;break}if(!1!==t.step.displayRightAnswer){r.next=16;break}return r.next=12,t.removeConditionsUntilLastMarker(s,t.step.stepId,t.run.version);case 12:c=r.sent,s=c.found?t.updateConditions(s,t.step.stepId,!0,t.step.type,!1,t.player):t.updateConditions(s,t.step.stepId,!0,t.step.type,!0,t.player),r.next=17;break;case 16:s=t.updateConditions(s,t.step.stepId,!0,t.step.type,!0,t.player);case 17:n=!0,o=t.hint.used||t.nbTry>1?t.step.points/2:t.step.points,l="success",r.next=32;break;case 22:if(n=!0,l="fail",!1!==t.step.displayRightAnswer){r.next=31;break}return r.next=27,t.removeConditionsUntilLastMarker(s,t.step.stepId,t.run.version);case 27:c=r.sent,s=c.found?t.updateConditions(s,t.step.stepId,!1,t.step.type,!1,t.player):t.updateConditions(s,t.step.stepId,!1,t.step.type,!0,t.player),r.next=32;break;case 31:s=t.updateConditions(s,t.step.stepId,!1,t.step.type,!0,t.player);case 32:if(u={stepId:t.step.stepId,stepNumber:t.step.number,nbTry:1,ended:n,score:o,reward:0,status:l,useHint:!1,date:new Date,online:!1},"new-item"===t.step.type&&(t.run.inventory?t.run.inventory.push(t.step.answers):t.run.inventory=[t.step.answers],-1===s.indexOf("objectWon_"+t.step.stepId)&&s.push("objectWon_"+t.step.stepId)),!a){if(d=!1,t.run.answers&&t.run.answers.length>1)for(p=0;p<t.run.answers.length;p++)t.run.answers[p]&&t.run.answers[p].stepId&&null!==t.run.answers[p].stepId&&t.run.answers[p].stepId===t.step.stepId&&(d=!0,u.nbTry=t.run.answers[p].nbTry+1,u.useHint=t.run.answers[p].useHint,t.run.answers[p]=u);d||(t.run.answers||(t.run.answers=[]),t.run.answers.push(u))}return t.run.conditionsDone=s,r.next=38,t.saveOfflineRun(t.questId,t.run);case 38:if(f=r.sent,!f){r.next=41;break}return r.abrupt("return",!0);case 41:return r.abrupt("return",!1);case 42:case"end":return r.stop()}}),r)})))()},passOfflineStep:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){r.next=2;break}return r.abrupt("return",!1);case 2:return t.run.conditionsDone=t.updateConditions(t.run.conditionsDone,e,!1,t.step.type,!0,t.player),r.next=5,t.saveOfflineRun(t.questId,t.run);case 5:case"end":return r.stop()}}),r)})))()},offlineCheckAccess:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){r.next=2;break}return r.abrupt("return",!1);case 2:if(!(e&&e.startDate&&e.startDate.enabled&&e.startDate.date)){r.next=7;break}if(a=new Date,s=Date.UTC(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2),e.startDate.date.substr(8,2),0,0,0),!(a<s)){r.next=7;break}return r.abrupt("return",{message:"Step not yet available",date:e.startDate.date});case 7:return r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})))()},saveOfflineRun:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(r.info.quest.playersNumber&&r.info.quest.playersNumber>1)){a.next=2;break}return a.abrupt("return",!1);case 2:return t.dateUpdated=new Date,a.next=5,et.writeInFile(r.questId,"run_"+e+".json",JSON.stringify(t),!0);case 5:if(s=a.sent,!s){a.next=10;break}return a.abrupt("return",!0);case 10:return a.abrupt("return",!1);case 11:case"end":return a.stop()}}),a)})))()},getNextOfflineStep:function(e,t,r){var a=this;return n()(i.a.mark((function s(){var n,o,l,c,u,d,p,f,m,h,b,g,v,w,k;return i.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=[],i.next=3,a.updateOfflineRun(e);case 3:if(!(a.run.history&&a.run.historyIndex<a.run.history.length)){i.next=8;break}return a.run.historyIndex++,i.next=7,a.saveOfflineRun(e,a.run);case 7:return i.abrupt("return",a.run.history[a.run.historyIndex-1]);case 8:if(!a.info.quest.steps){i.next=18;break}o=0;case 10:if(!(o<a.info.quest.steps.length)){i.next=18;break}return i.next=13,et.readFile(e,"step_"+a.info.quest.steps[o]+".json");case 13:l=i.sent,n.push(JSON.parse(l));case 15:o++,i.next=10;break;case 18:if(c=a.run.currentChapter,c){i.next=25;break}if(!(a.info.quest.chapters&&a.info.quest.chapters.length>0)){i.next=24;break}c=a.info.quest.chapters[0],i.next=25;break;case 24:return i.abrupt("return",!1);case 25:if(!t){i.next=65;break}return i.next=28,a.listSpecificTypeForAChapter(n,c,"locate-marker");case 28:if(u=i.sent,d=[],!(u&&u.length>0)){i.next=51;break}o=0;case 32:if(!(o<u.length)){i.next=51;break}if(!t||u[o].answers===t){i.next=35;break}return i.abrupt("continue",48);case 35:if(!a.run.conditionsDone||-1!==a.run.conditionsDone.indexOf("stepDone_"+u[o].stepId)){i.next=48;break}if(!(u[o].conditions&&u[o].conditions.length>0)){i.next=47;break}p=0;case 38:if(!(p<u[o].conditions.length)){i.next=44;break}if(-1!==a.run.conditionsDone.indexOf(u[o].conditions[p])){i.next=41;break}return i.abrupt("continue",48);case 41:p++,i.next=38;break;case 44:d.push({id:u[o].stepId,nbConditions:u[o].conditions.length}),i.next=48;break;case 47:d.push({id:u[o].stepId,nbConditions:0});case 48:o++,i.next=32;break;case 51:if(0!==d.length){i.next=53;break}return i.abrupt("return",!1);case 53:for(f=0,o=0;o<d.length;o++)d[o].nbConditions>=f&&(m=d[o].id,f=d[o].nbConditions);if("simple"!==a.info.quest.editorMode){i.next=60;break}return i.next=58,a.saveOfflineAnswer("success");case 58:i.next=65;break;case 60:h=a.run.conditionsDone,h.push("stepDone_"+m.toString()),h.push("stepDone"+a.player+"_"+m.toString()),a.run.conditionDone=h,a.run.currentStep=m;case 65:return i.next=67,a.listForAChapter(n,c,r);case 67:if(b=i.sent,g=!1,!(b&&b.length>0)){i.next=101;break}o=0;case 71:if(!(o<b.length)){i.next=101;break}if(!a.run.conditionsDone||-1!==a.run.conditionsDone.indexOf("stepDone"+r+"_"+b[o].stepId)){i.next=98;break}if(!(b[o].conditions&&b[o].conditions.length>0)){i.next=81;break}p=0;case 75:if(!(p<b[o].conditions.length)){i.next=81;break}if(-1!==a.run.conditionsDone.indexOf(b[o].conditions[p])){i.next=78;break}return i.abrupt("continue",98);case 78:p++,i.next=75;break;case 81:if("locate-marker"!==b[o].type){i.next=85;break}if(!a.info.quest||"advanced"!==a.info.quest.editorMode){i.next=85;break}return g=!0,i.abrupt("continue",98);case 85:if("end-chapter"!==b[o].type){i.next=96;break}return i.next=88,a.moveToNextChapter();case 88:if(v=i.sent,"end"===v){i.next=93;break}return i.next=92,a.getNextOfflineStep(e,t,r);case 92:v=i.sent;case 93:return i.abrupt("return",v);case 96:return w=b[o].stepId,i.abrupt("return",w);case 98:o++,i.next=71;break;case 101:if(!a.info.quest||"simple"!==a.info.quest.editorMode||g){i.next=110;break}return i.next=104,a.moveToNextChapter();case 104:if(k=i.sent,"end"===k){i.next=109;break}return i.next=108,a.getNextOfflineStep(e,t,r);case 108:k=i.sent;case 109:return i.abrupt("return",k);case 110:if(!g||!a.info.quest||"advanced"!==a.info.quest.editorMode){i.next=112;break}return i.abrupt("return","locationMarker");case 112:return i.abrupt("return",!1);case 113:case"end":return i.stop()}}),s)})))()},listSpecificTypeForAChapter:function(e,t,r){return n()(i.a.mark((function a(){var s,n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=[],e)for(n=0;n<e.length;n++)e[n].chapterId.toString()===t.toString()&&e[n].type.toString()===r.toString()&&s.push(e[n]);return a.abrupt("return",s);case 3:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,r){return n()(i.a.mark((function a(){var s,n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=[],e)for(n=0;n<e.length;n++)e[n].chapterId!==t||"All"!==e[n].player&&e[n].player!==r||s.push(e[n]);return a.abrupt("return",s);case 3:case"end":return a.stop()}}),a)})))()},listWonObjects:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],!(e.run.conditionsDone&&e.run.conditionsDone.length>0)){t.next=29;break}a=0;case 3:if(!(a<e.run.conditionsDone.length)){t.next=29;break}if(-1===e.run.conditionsDone[a].indexOf("objectWon_")){t.next=26;break}return s=e.run.conditionsDone[a].replace("objectWon_",""),t.next=8,et.readFile(e.questId,"step_"+s+".json");case 8:if(n=t.sent,!n){t.next=26;break}if(o=JSON.parse(n),!(o.options&&o.options.picture&&o.options.title)){t.next=26;break}if(-1!==o.options.picture.indexOf("statics")){t.next=24;break}if(!o.options.pictures||!o.options.pictures[e.lang]||""===o.options.pictures[e.lang]){t.next=19;break}return t.next=16,et.readBinaryFile(e.questId,o.options.pictures[e.lang]);case 16:l=t.sent,t.next=22;break;case 19:return t.next=21,et.readBinaryFile(e.questId,o.options.picture);case 21:l=t.sent;case 22:t.next=25;break;case 24:l=o.options.picture;case 25:r.push({step:s,picture:l,originalPicture:o.options.picture,title:o.options.title,pictures:o.options.pictures,titles:o.options.titles});case 26:a++,t.next=3;break;case 29:return t.abrupt("return",r);case 30:case"end":return t.stop()}}),t)})))()},checkIfStepIsAlreadyPlayedInRun:function(e,t){var r=this;return n()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(r.run&&r.run.conditionsDone&&r.run.conditionsDone.length>0)){a.next=3;break}if(-1===r.run.conditionsDone.indexOf("stepDone"+t+"_"+e)){a.next=3;break}return a.abrupt("return",!0);case 3:return a.abrupt("return",!1);case 4:case"end":return a.stop()}}),a)})))()},updateConditions:function(e,t,r,a,i,s){if("undefined"===typeof e&&(e=[]),-1===e.indexOf("stepDone_"+t)&&i&&e.push("stepDone_"+t),-1===e.indexOf("stepDone"+s+"_"+t)&&i&&e.push("stepDone"+s+"_"+t),-1!==e.indexOf("stepSuccess_"+t)){var n=e.indexOf("stepSuccess_"+t);e.splice(n,1),-1!==e.indexOf("stepSuccess"+s+"_"+t)&&(n=e.indexOf("stepSuccess"+s+"_"+t),e.splice(n,1))}if(-1!==e.indexOf("stepFail_"+t)){var o=e.indexOf("stepFail_"+t);e.splice(o,1),-1!==e.indexOf("stepFail"+s+"_"+t)&&(o=e.indexOf("stepFail"+s+"_"+t),e.splice(o,1))}var l=["info-text","info-video","new-item","character","end-chapter"];return-1===l.indexOf(a)&&(r?(e.push("stepSuccess_"+t),e.push("stepSuccess"+s+"_"+t)):(e.push("stepFail_"+t),e.push("stepFail"+s+"_"+t))),e},removeStepFromConditions:function(e,t){if(!e)return e;for(var r=[],a=0;a<e.length;a++)-1!==e[a].indexOf("_"+t)&&r.push(a);for(a=r.length-1;a>=0;a--)e.splice(r[a],1);return e},removeConditionsUntilLastMarker:function(e,t,r){var a=this;return n()(i.a.mark((function r(){var s,n,o,l,c,u;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s=[t],n=0;case 2:if(!(n<7)){r.next=18;break}return r.next=5,et.readFile(a.questId,"step_"+t+".json");case 5:if(l=r.sent,l&&(o=JSON.parse(l)),"locate-marker"!==o.type){r.next=9;break}return r.abrupt("break",18);case 9:if(c=!1,o.conditions&&o.conditions.length>0)for(u=0;u<o.conditions.length;u++)-1!==o.conditions[u].indexOf("stepDone_")&&(t=o.conditions[u].replace("stepDone_",""),s.push(t),c=!0);if(c){r.next=13;break}return r.abrupt("return",{found:!1,updatedCondition:e});case 13:if(6!==n){r.next=15;break}return r.abrupt("return",{found:!1,updatedCondition:e});case 15:n++,r.next=2;break;case 18:for(u=0;u<s.length;u++)e=a.removeStepFromConditions(e,s[u]);return r.abrupt("return",{found:!0,updatedCondition:e});case 20:case"end":return r.stop()}}),r)})))()},moveToNextChapter:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=0,e.info.quest.chapters&&e.info.quest.chapters.length>0)if(e.run.currentChapter&&0!==e.run.currentChapter)for(a=0;a<e.info.quest.chapters.length;a++)e.info.quest.chapters[a]===e.run.currentChapter&&(r=a<e.info.quest.chapters.length-1?e.info.quest.chapters[a+1]:"end");else r=e.info.quest.chapters[0];return e.run.currentChapter=r,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},cutSound:function(){var e=document.getElementById("background-music");e&&(this.sound&&this.sound.status&&"play"===this.sound.status?(e.pause(),this.sound.status="pause"):(e.play(),this.sound.status="play"))}}},qa=Ca,Ta=(r("165e"),Object(ye["a"])(qa,Br,Ur,!1,null,"63b373d0",null)),Ea=Ta.exports,Pa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[e.warnings.noNetwork?r("div",[r("div",{staticClass:"bg-primary"},[r("div",{staticClass:"centered q-pa-lg"},[r("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),r("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),!e.warnings.noNetwork&&e.quest&&e.quest.customization&&e.quest.customization.removeScoring?r("div",{staticClass:"q-ma-md rounded background-lighter2"},[r("div",[e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?r("h4",{domProps:{innerHTML:e._s(e.quest.customization.endMessage)}}):e._e(),e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?e._e():r("h4",[e._v(e._s(e.$t("label.ThanksForPlaying")))])]),e.isUserAuthor?r("div",{staticClass:"back centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?r("div",{staticClass:"back centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.openValidation(e.questId,e.quest.version)}}})],1):e._e()]):e._e(),e.isUserAuthor?r("div",{staticClass:"back centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():r("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?r("div",[r("div",{staticClass:"relative-position header-point-box"},[r("div",{staticClass:"full-width centered header-point absolute"},[r("img",{attrs:{src:"statics/images/icon/wonpoint.png"}}),r("div",[e._v("+"+e._s(e.run.stars))])]),r("div",{staticStyle:{"padding-top":"100px"}},[r("div",{staticClass:"rounded background-lighter2 centered full-width",staticStyle:{"padding-top":"35px"}},[r("h2",{staticClass:"text-center title2 q-mt-xl q-mb-sm q-mx-xl text-uppercase"},[e._v(e._s(e.$t("label.YouWin")))]),r("div",{staticClass:"relative-position progress-box"},[r("div",{staticClass:"progress-bar"},[r("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),r("div",{staticClass:"value"},[e._v("\n                  "+e._s(Math.floor(100*e.level.progress))+"%\n                ")])]),r("div",{staticClass:"rank-level"},[r("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])]),e.run&&e.run.duration?r("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourTime"))+": "+e._s(e.run.duration.h)+"h "+e._s(e.run.duration.m)+"m \n            ")]):e._e(),e.run&&e.run.score&&e.run.score>0?r("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourScore"))+": "+e._s(e.run.score)+" "+e._s(e.$t("label.pts"))+"\n            ")]):e._e(),e.run&&e.ranking&&e.ranking.position&&"-"!==e.ranking.position?r("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.YourRanking"))+": "+e._s(e.ranking.position)+" \n            ")]):e._e()])])]),r("div",{staticClass:"centered q-mt-md subtitle5"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),r("div",{staticClass:"centered q-px-md"},[r("span",{directives:[{name:"show",rawName:"v-show",value:"discovery"!==e.quest.type&&e.run.score>0&&e.quest&&"public"===e.quest.access,expression:"quest.type !== 'discovery' && run.score > 0 && quest && quest.access === 'public'"}]},[r("a",{staticClass:"small",on:{click:e.openChallengeBox}},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),r("span",{staticClass:"secondary-font-very-small"},[e._v(" "+e._s(e.$t("label.or"))+" ")])]),r("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])]),e.author?r("div",{staticClass:"centered q-mt-lg"},[r("div",{staticClass:"user-card user-card-small relative-position",staticStyle:{margin:"0px"}},[r("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.author.statistics&&e.author.statistics.nbQuestsCreated&&e.author.statistics.nbQuestsCreated>0?r("div",{staticClass:"profile-item-creator"},[r("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.author.statistics&&e.author.statistics.nbQuestsSuccessful&&e.author.statistics.nbQuestsSuccessful>0?r("div",{staticClass:"profile-item-level"},[r("img",{attrs:{src:"statics/images/icon/level"+e.author.level+".svg"}})]):e._e()])]),r("div",{staticClass:"centered subtitle3"},[e._v("\n          "+e._s(e.author.name)+"\n        ")]),e.$store.state.user.id!==e.author._id?r("div",{staticClass:"centered q-pt-sm"},[e.author.status&&"friend"===e.author.status?e._e():r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.author.status&&"friend"===e.author.status?r("div",{staticClass:"centered"},[r("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n              "+e._s(e.$t("label.Followed"))+"\n            ")])],1):e._e()],1):e._e()]):e._e(),r("q-dialog",{attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[r("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1),"discovery"!==e.quest.type&&e.showAddReview&&e.quest&&"public"===e.quest.access?r("div",{staticClass:"q-mx-md q-mt-xl q-pa-sm centered"},[r("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),r("div",{staticClass:"q-py-sm"},[r("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"white",disable:e.reviewSent},on:{click:function(t){e.showReviewText=!0}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1)]):e._e(),r("q-dialog",{staticClass:"over-map",model:{value:e.showReviewText,callback:function(t){e.showReviewText=t},expression:"showReviewText"}},[r("div",{staticClass:"q-pa-md q-pt-lg centered bg-grey"},[r("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),r("div",{staticClass:"q-py-sm"},[r("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"secondary",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),r("div",{staticClass:"subtitle6 q-pt-lg"},[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width q-my-sm",attrs:{placeholder:e.$t("label.Feedback"),rows:"4",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}}),r("div",{staticClass:"q-pa-md"},[r("a",{on:{click:function(t){e.showReviewText=!1}}},[e._v(e._s(e.$t("label.Cancel")))])])],1)]),e.showReward&&e.run&&e.run.questData?r("div",{staticClass:"q-pa-md q-mt-lg centered rounded background-lighter2"},[r("div",{staticClass:"subtitle4 q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),r("div",{staticClass:"q-pt-md"},[r("img",{staticClass:"badge-alone",attrs:{src:e.serverUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),r("div",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}]},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),r("div",[e._v(e._s(e.$t("label.RankingEndIntro")))]),e._l(e.ranking.items,(function(t){return r("div",{key:t.id,staticClass:"q-py-md rank-box"},[r("div",[r("userCard",{attrs:{user:t,size:"medium"}})],1),r("div",{staticClass:"full-width"},["-"!==t.name?r("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?r("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?r("div",{staticClass:"subtitle6"},[t.location.postalCode?r("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?r("span",[e._v(", ")]):e._e(),t.location.country?r("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),r("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                "+e._s(t.stars)+"\n              ")]),r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                "+e._s(t.position)+"\n              ")])])])])}))],2),r("div",{staticClass:"back centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/home")}}})],1),e.isUserAdmin?r("div",{staticClass:"back centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.version)}}})],1):e._e()],1):e._e(),e.warnings.noNetwork?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md bg-graaly-blue-dark"},[r("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[r("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),r("div",{staticClass:"subtitle3 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?r("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?r("div",[r("div",{staticClass:"q-pa-md centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),r("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?r("div",[r("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return r("q-item",{key:t.friendId},[r("q-item-section",[r("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?r("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?r("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():r("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),r("q-item-label",[e._v(e._s(t.name))]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],staticClass:"normal-button glossy",attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(r){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),r("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?r("div",{staticClass:"panel-bottom q-pa-md"},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg centered"},[e._v(e._s(e.$t("label.YouWonABonus")))]),r("div",{staticClass:"q-pa-md text-primary"},[r("q-card",{staticClass:"q-ma-sm"},[r("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),r("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")]),r("q-card-section",[r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.closeBonus}},[r("div",[e._v(e._s(e.$t("label.Close")))])])],1)],1)],1)]):e._e()])],1)},Aa=[],Ma={add:function(e,t,r,a,i){return Re().put("review/add",{questId:e,version:t,runId:r,text:a,rating:i}).catch((function(e){return console.log(e.request)}))},list:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().get("review/list",{params:{filter:JSON.stringify(e),options:JSON.stringify(t)}});case 2:if(a=r.sent,200===a.status){r.next=5;break}throw new Error("Request "+a.config.url+" failed with code "+a.status+"/"+a.statusText+". Data returned: "+a.data);case 5:return r.abrupt("return",a);case 6:case"end":return r.stop()}}),r)})))()}},Ia={components:{suggest:St,userCard:ar},data:function(){return{title:"Enquête réussie",rating:0,comment:"",ranking:{show:!1,items:[],position:"-"},score:{},level:{color:"white",upgraded:!1},run:{score:0,stars:1},quest:null,friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},author:null,questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,showReviewText:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},isHybrid:window.cordova,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return et.clearAllRunningProcesses(),t.next=3,e.loadData();case 3:e.isHybrid&&"android"===cordova.platformId&&StatusBar.hide();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l,c,u,d;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noNetwork=!1,r=!1,e.$q.loading.show(),t.next=5,_r.listForAQuest(e.questId);case 5:if(a=t.sent,!a){t.next=54;break}if(a&&a.data&&a.data.length>0)for(s=0;s<a.data.length;s++)"finished"===a.data[s].status&&(e.run=a.data[s]),"in-progress"===a.data[s].status&&(e.run=a.data[s],r=!0);if(!e.run||!e.run.version){t.next=14;break}return t.next=11,tt.getById(e.questId,e.run.version);case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,tt.getLastById(e.questId);case 16:n=t.sent;case 17:if(n&&n.data&&(e.quest=n.data),!n||!n.data){t.next=25;break}return e.isUserAuthor=e.$store.state.user._id===e.quest.authorUserId,t.next=22,Ma.list({questId:e.questId,userId:e.$store.state.user._id,version:e.run.version},{limit:1});case 22:o=t.sent,l=o.data&&o.data.length>=1,e.showAddReview=!e.isUserAdmin&&!e.isUserAuthor&&!l;case 25:return e.score.old=e.$store.state.user.points,e.score.old||(e.score.old=0),e.initProgression(),t.next=30,e.getOfflineRunData();case 30:return c=t.sent,t.next=33,_r.endRun(e.run._id,c,e.questId,e.quest.version,e.quest.mainLanguage);case 33:if(u=t.sent,!u||!u.data){t.next=40;break}return e.quest.customization&&e.quest.customization.removeScoring||(e.run.score=u.data.score,e.run.reward=u.data.reward,e.run.stars=u.data.stars,u.data.newBonus&&""!==u.data.newBonus&&(e.run.bonus=u.data.newBonus,e.showBonus=!0),e.run.questData&&e.run.questData.rewardPicture&&""!==e.run.questData.rewardPicture&&(e.showReward=!0)),t.next=38,e.removeOfflineData();case 38:t.next=41;break;case 40:e.warnings.noNetwork=!0;case 41:if(e.run._id){t.next=46;break}return t.next=44,_r.listForAQuest(e.questId);case 44:a=t.sent,a&&a.data&&a.data.length>0&&(e.run=a.data[0]);case 46:return e.quest.customization&&e.quest.customization.removeScoring||(e.score.new=r?e.score.old+e.run.stars:e.score.old,e.$store.state.user.points=e.score.new,et.setTimeout(e.updateProgression,3e3)),t.next=49,e.getRanking();case 49:d=et.getDurationFromNow(e.run.dateCreated),e.run.duration={h:d.h,m:d.m},e.getAuthorProfile(),t.next=55;break;case 54:e.warnings.noNetwork=!0;case 55:e.$q.loading.hide();case 56:case"end":return t.stop()}}),t)})))()},initProgression:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.level=lr(e.score.old);case 1:case"end":return t.stop()}}),t)})))()},updateProgression:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge||e.showBonus?et.setTimeout(e.updateProgression,2e3):(r=lr(e.score.new),r.level>e.level.level?(e.level.progress=1,e.$store.state.user.level=r.level,e.level=r,e.level.progress=.1,e.level.upgraded=!0):e.level=r);case 1:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===e.questId){t.next=5;break}return t.next=3,_r.listPlayersForThisQuest(e.questId);case 3:r=t.sent,r&&r.data&&(e.ranking.position=r.data);case 5:case"end":return t.stop()}}),t)})))()},showRanking:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.ranking.show=!0,r=!1,a=0;a<e.ranking.items.length;a++)e.ranking.items[a].id===e.$store.state.user._id&&(r=!0);r||(e.ranking.items.push({id:e.$store.state.user._id,score:e.run.score,name:e.$store.state.user.name,picture:e.$store.state.user.picture,position:e.ranking.items.length+1,isFriend:!0,className:"selected"}),et.setTimeout(e.updateRanking,3e3));case 4:case"end":return t.stop()}}),t)})))()},updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],r=this.ranking.items[e-1];this.$set(this.ranking.items,e,r),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),et.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.$router.push("/user/updateprofile"),t.next=9;break;case 4:return e.showChallenge=!0,t.next=7,rt.listFriends(e.$store.state.user._id,0,100);case 7:r=t.sent,r&&r.data&&r.data.length>0&&(e.friends=r.data,e.filteredFriends=e.friends);case 9:case"end":return t.stop()}}),t)})))()},closeChallenge:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge=!1;case 1:case"end":return t.stop()}}),t)})))()},challenge:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,rt.challengeFriend(e.friendId,t.run._id);case 2:for(a=0;a<t.filteredFriends.length;a++)t.filteredFriends[a].friendId===e.friendId&&(t.filteredFriends[a].isChallenged=!0,o["a"].set(t.filteredFriends,a,t.filteredFriends[a]));case 3:case"end":return r.stop()}}),r)})))()},challengeAll:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.challengeFriend("all",e.run._id);case 2:case"end":return t.stop()}}),t)})))()},closeBonus:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showBonus=!1;case 1:case"end":return t.stop()}}),t)})))()},closeReward:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showReward=!1;case 1:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.getFriend(e.quest.authorUserId);case 2:r=t.sent,r&&r.data&&"friend"!==r.data.status&&(e.author=r.data);case 4:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){return this.author.picture&&-1!==this.author.picture.indexOf("http")?this.author.picture:this.author.picture?this.serverUrl+"/upload/profile/"+this.author.picture:"statics/images/icon/profile-small.png"},follow:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"===e.$store.state.user.name){t.next=5;break}return t.next=3,rt.addFriend(e.quest.authorUserId);case 3:r=t.sent,r?(r.data&&r.data.hasOwnProperty("status")&&"invitationsent"===r.data.status?ft(e.$t("label.InvitationSent"),"success"):ft(e.$t("label.FriendsAdded"),"success"),o["a"].set(e.author,"status","friend")):ft(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},openValidation:function(e,t){this.$router.push("/admin/validate/"+e+"/version/"+t)},addReview:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.rating){t.next=3;break}return ft(e.$t("label.PleaseRateTheQuest"),"warning"),t.abrupt("return",!1);case 3:return e.$q.loading.show(),t.next=6,Ma.add(e.questId,e.run.version,e.run._id,e.comment,e.rating);case 6:e.$q.loading.hide(),e.reviewSent=!0,e.showReviewText=!1,ft(e.$t("label.ReviewSent"),"positive");case 10:case"end":return t.stop()}}),t)})))()},getOfflineRunData:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.readFile(e.questId,"run_"+e.questId+".json");case 2:if(r=t.sent,r){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",JSON.parse(r));case 8:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.removeDirectory(e.questId);case 2:return r=t.sent,t.next=5,e.removeQuestFromOfflineList(e.questId);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return n()(i.a.mark((function t(){var r,a,s,n,o;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,et.checkIfFileExists("","quests.json");case 2:if(r=t.sent,!r){t.next=13;break}return t.next=6,et.readFile("","quests.json");case 6:for(s=t.sent,a=JSON.parse(s),n=-1,o=0;o<a.list.length;o++)a.list[o].questId===e&&(n=o);return-1!==n&&a.list.splice(n,1),t.next=13,et.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},Ra=Ia,Oa=Object(ye["a"])(Ra,Pa,Aa,!1,null,null,null),$a=Oa.exports,Fa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper background-map"},[r("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),r("div",{staticClass:"q-pa-md"},[r("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),r("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[r("div",[r("q-input",{attrs:{outlined:"",label:e.$t("label.TeamID"),error:e.$v.form.teamId.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamId.$touch},model:{value:e.form.teamId,callback:function(t){e.$set(e.form,"teamId",t)},expression:"form.teamId"}}),r("q-input",{attrs:{outlined:"",label:e.$t("label.TeamName"),error:e.$v.form.teamName.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamName.$touch},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}}),r("q-input",{attrs:{outlined:"",label:e.$t("label.YourName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("div",{staticClass:"text-center"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.SignIn"),loading:e.submitting}})],1)]),r("div",{staticClass:"centered smaller version secondary-font"},[e._v("Version "+e._s(e.version))])])])])},Da=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"centered q-pt-lg q-pb-md"},[r("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],Na={data:function(){return{questId:this.$route.params.id,lang:this.$route.params.lang,form:{teamId:"",teamName:"",name:""},isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1,version:"2.1.12"}},mounted:function(){},methods:{formSubmit:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$v.$touch(),e.submitting=!0,t.next=4,Oe.playAnonymous(e.$t("label.shortLang"));case 4:if(r=t.sent,!r||!r.data||"ok"!==r.data.status){t.next=18;break}if(!r.data.user){t.next=15;break}return window.localStorage.setItem("jwt",r.data.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.data.user.jwt),t.next=11,_r.initTeamPlay(e.questId,e.lang,e.form.teamId,e.form.teamName,e.form.name);case 11:a=t.sent,a&&a.data&&e.$router.push("/quest/play/"+e.questId+"/version/"+a.data.version+"/step/0/undefined?remoteplay=false"),t.next=16;break;case 15:ft(e.$t("label.ErrorStandardMessage"),"error");case 16:t.next=19;break;case 18:ft(e.$t("label.ErrorStandardMessage"),"error");case 19:case"end":return t.stop()}}),t)})))()}},validations:{form:{teamId:{required:Wt["required"]},teamName:{required:Wt["required"]},name:{required:Wt["required"]}}}},La=Na,ja=Object(ye["a"])(La,Fa,Da,!1,null,null,null),za=ja.exports,Ha=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},Ba=[],Ua={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},Qa=Ua,Wa=Object(ye["a"])(Qa,Ha,Ba,!1,null,null,null),Ya=Wa.exports,Va=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{staticClass:"reduce-window-size-desktop",attrs:{id:"teaser"}},[e.userType?e._e():r("div",[r("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),r("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderChooseUserType"))+"\n      ")]),r("div",{staticClass:"q-pa-md cursor-pointer",attrs:{"test-id":"btn-create-public-quest"},on:{click:function(t){return e.changeUserType("pro")}}},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AProfessional")))])]),r("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AProfessionalDesc1"))+"\n          ")])],1)],1),r("div",{staticClass:"q-pa-md cursor-pointer",on:{click:function(t){return e.changeUserType("individual")}}},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AnIndividual")))])]),r("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AnIndividualDesc1"))+"\n          ")])],1)],1),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card"},[r("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.Education")))])]),r("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.EducationDesc"))+"\n          ")])],1)],1),r("div",{staticClass:"centered"},[r("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.Cancel")))])],1)]),"pro"!==e.userType||e.access?e._e():r("div",[r("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),r("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderProIntro"))+"\n      ")]),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("public")}}},[r("q-card-section",{staticClass:"centered"},[r("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PublicQuest")))]),r("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),r("q-card-section",{staticClass:"subtitle5"},[r("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc1"))}})]),e.readMorePublicProQuest?r("q-card-section",[r("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc2"))}})]):e._e(),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("private")}}},[r("q-card-section",{staticClass:"centered"},[r("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),r("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),r("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateProQuestDesc1"))+"\n          ")]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),r("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.AddYourRoomInTheDirectory"))+"\n      ")]),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){e.changeAccess("public"),e.changeQuestType("room")}}},[r("q-card-section",{staticClass:"centered"},[r("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.AddYourRoom")))]),r("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.Free")))])]),r("q-card-section",{staticClass:"subtitle5"},[r("div",{domProps:{innerHTML:e._s(e.$t("label.ProAddYourRoom"))}})]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.Add")))])],1)],1)],1),r("div",{staticClass:"centered"},[r("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"individual"!==e.userType||e.access?e._e():r("div",[r("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),r("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderIntro"))+"\n      ")]),r("div",{staticClass:"q-pa-md"},[r("q-card",{staticClass:"my-card bg-primary text-white"},[r("q-card-section",{staticClass:"centered"},[r("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),e.privateQuest.buyable?r("div",{staticClass:"subtitle4"},[e._v(e._s(e.privateQuest.price))]):e._e()]),r("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateQuestDesc1"))+"\n          ")]),r("q-separator"),r("q-card-actions",{attrs:{align:"right"}},[e.privateQuest.buyable?r("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.BuyPrivateQuest")))]):e._e(),e.privateQuest.buyable?e._e():r("q-btn",{attrs:{flat:"",disabled:""}},[e._v(e._s(e.$t("label.OnlyBuyableOnMobile")))])],1)],1)],1),r("div",{staticClass:"centered"},[r("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"public"===e.access&&"room"===e.questType?r("div",{staticClass:"grow"},[r("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.AddYourRoom")))]),r("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderAddRoomMessage"))}}),r("div",{staticClass:"q-px-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[r("div",[e._v(e._s(e.$t("label.Add")))])]),r("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"public"===e.access&&"quest"===e.questType?r("div",{staticClass:"grow"},[r("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPublicQuest")))]),r("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),r("div",{staticClass:"q-px-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[r("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]),r("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"private"===e.access?r("div",{staticClass:"grow"},[r("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPrivateQuest")))]),"individual"===e.userType?r("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}):e._e(),"pro"===e.userType?r("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateProWelcomeMessage"))}}):e._e(),r("div",{staticClass:"q-px-md centered"},["individual"===e.userType?r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyPrivateQuest()}}},[r("div",[e._v(e._s(e.$t("label.AcceptAndBuyAPrivateQuest"))+" ("+e._s(e.privateQuest.price)+")")])]):e._e(),"pro"===e.userType?r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.createNewQuest()}}},[r("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]):e._e(),r("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.cancel()}}})],1)])])},Ga=[],Ka={data:function(){return{userType:null,access:null,questType:"quest",readMorePublicProQuest:!1,privateQuest:{price:"-",buyable:!1,computed:!1}}},mounted:function(){return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},changeUserType:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.userType=e,t.moveToTop(),"individual"!==e){r.next=5;break}return r.next=5,t.initPay();case 5:case"end":return r.stop()}}),r)})))()},changeAccess:function(e){this.access=e,this.moveToTop()},changeQuestType:function(e){this.questType=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order("privatequestprice");case 1:case"end":return e.stop()}}),e)})))()},createNewQuest:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={title:{}},t.next=3,tt.create(r,e.access,e.userType,e.questType);case 3:a=t.sent,a&&a.data&&a.data.questId?e.$router.push("/quest/builder/"+a.data.questId):ft(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:if(!e.privateQuest.computed){t.next=4;break}return t.abrupt("return");case 4:e.privateQuest.computed=!0,store.products.byId["privatequestprice"]?(r=store.get("privatequestprice"),e.displayPrice(r)):store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){ft(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(e.displayPrice),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var t=n()(i.a.mark((function t(r){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(r);case 2:a=t.sent,a?r.finish():ft(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 11:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.privateQuest.price=e.price,e.canPurchase&&(this.privateQuest.buyable=!0)},savePurchase:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.purchasePrivateQuest(null,e);case 2:if(a=r.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){r.next=7;break}return r.next=6,t.createNewQuest();case 6:return r.abrupt("return",!0);case 7:return r.abrupt("return",!1);case 8:case"end":return r.stop()}}),r)})))()},cancel:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/profile/me");case 1:case"end":return t.stop()}}),t)})))()},backToUserType:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userType=null,e.access=null;case 2:case"end":return t.stop()}}),t)})))()}}},Ja=Ka,Xa=Object(ye["a"])(Ja,Va,Ga,!1,null,null,null),Za=Xa.exports,ei=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll row",class:{"bg-white":!e.chapters.showNewStepOverview}},[r("div",{staticClass:"col bg-white",class:{"desktop-only":e.chapters.showNewStepOverview},staticStyle:{"min-width":"260px"}},[r("div",{staticClass:"settings-bar background-dark",class:{"desktop-only":e.chapters.showNewStepOverview}},[r("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn q-pa-sm",attrs:{to:{path:"/profile/me"}}},[r("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e.readOnly&&"rejected"===e.quest.status?r("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.YourQuestHasNotBeenPublished"))+"\n      ")]):e._e(),!e.readOnly||"published"!==e.quest.status&&"unpublished"!==e.quest.status&&"rejected"!==e.quest.status?e._e():r("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n      ")]),r("div",{staticClass:"q-pa-md full-width"},[e.tabs.progress>0?r("span",[e.form.fields.title[e.languages.current]?r("span",[e.form.fields.title[e.languages.current].length<=30?r("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?r("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():r("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?r("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?r("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):r("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),r("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",class:{"desktop-only":e.chapters.showNewStepOverview},model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[r("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:"quest"===e.quest.type?e.$t("label.Intro")+" ("+e.languages.current+")":e.$t("label.YourRoom"),default:""}}),"quest"===e.quest.type?r("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}):e._e(),r("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier?r("q-tab",{attrs:{name:"payments",icon:e.getTabIcon(5),label:e.$t("label.Payments")},on:{click:e.listPayments}}):e._e(),e.isEdition?r("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(6),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?r("q-tab",{attrs:{name:"results",icon:e.getTabIcon(7),label:e.$t("label.Results")}}):e._e()],1),r("q-separator"),"settings"===e.tabs.selected?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[this.quest.languages&&0!==this.quest.languages.length?e._e():r("div",[r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"language"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),r("q-option-group",{attrs:{type:"radio",color:"primary",options:e.form.languages,disable:e.readOnly},model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}})],1)],1),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{big:"",disabled:e.readOnly,color:"primary","test-id":"btn-save-language"},on:{click:function(t){return e.selectLanguage()}}},[e._v(e._s(e.$t("label.Save")))])],1)],1),this.quest.languages.length>0?r("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?r("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")]):e._e(),"public"===this.quest.access?r("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")]):e._e(),this.quest.isPremium?r("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")]):e._e(),r("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),r("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}}),"quest"===e.quest.type?r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}):e._e(),"quest"===e.quest.type?r("div",[e._v("\n          "+e._s(e.$t("label.QuestType"))+" \n          "),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),r("div",{staticClass:"q-gutter-md"},[r("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),r("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1)],1):e._e(),r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}}),r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),r("div",{staticClass:"description"},[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),e.isIOs?e._e():r("div",[r("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():r("div",{staticClass:"location-address"},[r("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?r("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest"),value:e.form.fields.startingPlace},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}}):e._e()],1),r("a",{on:{click:function(t){return e.getCurrentLocation()}}},[r("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?r("div",[r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),r("table",[r("tr",[r("td",[r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}})],1),r("td",[r("q-btn",{staticClass:"q-ma-md",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])],1)])])],1):e._e(),null!==e.form.fields.picture?r("div",[r("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),r("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.picture}})]):e._e(),e.isIOs?e._e():r("div",[e.readOnly?e._e():r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["picturefile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),r("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.ModifyThePicture"))+":\n          "),r("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),null!==e.form.fields.thumb?r("div",[r("p",[e._v(e._s(e.$t("label.SmallPicture"))+" :")]),r("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.thumb}})]):e._e(),e.isIOs?e._e():r("div",[e.readOnly?e._e():r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["thumbfile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),r("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadThumb}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.ModifyThePicture"))+":\n          "),r("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadThumb}})]):e._e(),this.quest.isPremium&&e.form.fields.customization&&e.form.fields.customization.audio&&""!==e.form.fields.customization.audio?r("div",[r("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.form.fields.customization.audio))]),r("div",{staticClass:"centered"},[r("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!this.quest.isPremium||e.isIOs||e.readOnly?e._e():r("div",[r("q-btn-group",{staticClass:"full-width"},[r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["audiofile"].click()}}},[e._v(e._s(e.$t("label.AddAnAudioFile")))])],1),r("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3",hidden:""},on:{change:e.uploadAudio}})],1),this.quest.isPremium&&e.isIOs&&!e.readOnly?r("div",[e._v("\n          "+e._s(e.$t("label.AddAnAudioFile"))+":\n          "),r("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]):e._e(),"room"===this.quest.type?r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ReadMoreLink")},model:{value:e.form.fields.readMoreLink,callback:function(t){e.$set(e.form.fields,"readMoreLink",t)},expression:"form.fields.readMoreLink"}})],1):e._e(),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?r("div",[r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PlayersNumber"),options:e.form.players,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestMultiplayer")}}})]},proxy:!0}],null,!1,3064096794),model:{value:e.form.fields.playersNumber,callback:function(t){e.$set(e.form.fields,"playersNumber",t)},expression:"form.fields.playersNumber"}})],1):e._e(),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.QRCodeMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.qrCodeMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.qrCodeMessage,e.languages.current,t)},expression:"form.fields.customization.qrCodeMessage[languages.current]"}})],1):e._e(),this.quest.isPremium&&"quest"===this.quest.type?r("div",[r("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnMobile")},model:{value:e.showPaymentBox,callback:function(t){e.showPaymentBox=t},expression:"showPaymentBox"}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnMobileHelp")}}}),e.showPaymentBox?r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}):e._e(),r("div",[r("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnYourSide")},model:{value:e.showTierPaymentBox,callback:function(t){e.showTierPaymentBox=t},expression:"showTierPaymentBox"}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnYourSideHelp")}}})],1),e.showTierPaymentBox?r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.tierPriceForPlayer,callback:function(t){e.$set(e.form.fields,"tierPriceForPlayer",t)},expression:"form.fields.tierPriceForPlayer"}})],1):e._e(),r("div",[r("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.RemoveScoringAndRating")},model:{value:e.form.fields.customization.removeScoring,callback:function(t){e.$set(e.form.fields.customization,"removeScoring",t)},expression:"form.fields.customization.removeScoring"}})],1),e.form.fields.customization.removeScoring?r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessage"),type:"textarea"},model:{value:e.form.fields.customization.endMessage,callback:function(t){e.$set(e.form.fields.customization,"endMessage",t)},expression:"form.fields.customization.endMessage"}})],1):e._e(),r("div",[r("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ForcePlayerToHaveAccount")},model:{value:e.form.fields.forcePlayerToHaveAccount,callback:function(t){e.$set(e.form.fields,"forcePlayerToHaveAccount",t)},expression:"form.fields.forcePlayerToHaveAccount"}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ForcePlayerToHaveAccountHelp")}}})],1),r("div",[r("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShareUserDataWithCreator")},model:{value:e.form.fields.shareUserDataWithCreator,callback:function(t){e.$set(e.form.fields,"shareUserDataWithCreator",t)},expression:"form.fields.shareUserDataWithCreator"}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ShareUserDataWithCreatorHelp")}}})],1),r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.LimitNumberOfPlayerInOneHour")},model:{value:e.form.fields.limitNumberOfPlayer,callback:function(t){e.$set(e.form.fields,"limitNumberOfPlayer",t)},expression:"form.fields.limitNumberOfPlayer"}})],1),e.form.fields.scheduling&&0===e.form.fields.scheduling.length?r("q-btn",{staticClass:"full-width",on:{click:e.startSchedule}},[e._v(e._s(e.$t("label.ScheduleGame")))]):e._e(),e.form.fields.scheduling&&e.form.fields.scheduling.length>0?r("div",[r("div",{staticClass:"centered"},[r("strong",[e._v(e._s(e.$t("label.GameSchedule")))])]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.form.fields.scheduling,(function(t,a){return r("div",{key:a,staticClass:"row"},[r("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),r("div",{staticClass:"col"},[r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.From"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[0],callback:function(r){e.$set(t,0,r)},expression:"schedule[0]"}})],1),r("div",{staticClass:"col"},[r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.To"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[1],callback:function(r){e.$set(t,1,r)},expression:"schedule[1]"}})],1)])})),r("q-btn",{staticClass:"full-width",attrs:{flat:""},on:{click:e.resetSchedule}},[e._v(e._s(e.$t("label.Reset")))])],2):e._e(),e.form.fields.customization?r("div",["quest"===e.quest.type?r("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.FontFamily"),options:e.form.fonts,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.itemProps,i=t.itemEvents,s=t.opt;t.selected;return[r("q-item",e._g(e._b({},"q-item",a,!1),i),[r("q-item-section",[r("q-item-label",{class:"font-"+s.value,domProps:{innerHTML:e._s(s.label)}})],1)],1)]}}],null,!1,3917634456),model:{value:e.form.fields.customization.font,callback:function(t){e.$set(e.form.fields.customization,"font",t)},expression:"form.fields.customization.font"}}):e._e()],1):e._e(),e.form.fields.customization?r("div",[r("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?r("div",[r("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),r("img",{staticClass:"limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.logo}}),r("div",{staticClass:"centered"},[r("a",{staticClass:"dark",on:{click:e.removeLogo}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():r("div",[r("q-btn-group",{staticClass:"full-width"},[r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["logofile"].click()}}},[e._v(e._s(e.$t("label.AddALogo")))]),r("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),r("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?r("div",[e._v("\n            "+e._s(e.$t("label.AddALogo"))+":\n            "),r("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e(),e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture?r("div",[r("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),r("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"background-color":"#f00"},attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),r("div",[e._v(e._s(e.$t("label.RewardPictureWarning")))]),r("div",{staticClass:"centered"},[r("a",{staticClass:"dark",on:{click:e.removeReward}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():r("div",{staticClass:"q-mt-md"},[r("q-btn-group",{staticClass:"full-width"},[r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["rewardfile"].click()}}},[e._v(e._s(e.$t("label.AddAReward")))]),r("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),r("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),e.isIOs&&!e.readOnly?r("div",{staticClass:"q-mt-md"},[e._v("\n            "+e._s(e.$t("label.AddAReward"))+":\n            "),r("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.character&&""!==e.form.fields.customization.character?r("div",[r("p",[e._v(e._s(e.$t("label.YourCharacter"))+" :")]),r("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.character}}),r("div",{staticClass:"centered"},[r("a",{staticClass:"dark",on:{click:e.removeCharacter}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():r("div",[r("q-btn-group",{staticClass:"full-width"},[r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacter")))]),r("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1),r("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacter}})],1),e.isIOs&&!e.readOnly?r("div",[e._v("\n            "+e._s(e.$t("label.AddACustomCharacter"))+":\n            "),r("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacter}}),r("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1):e._e()],1):e._e(),r("div",[e._v("\n          "+e._s(e.$t("label.Version"))+": "+e._s(e.quest.version)+"\n        ")]),r("div",{staticClass:"centered"},[e.readOnly?e._e():r("q-btn",{staticClass:"glossy large-button q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),"published"!==e.quest.status?r("p",{staticClass:"centered q-pa-md"},[r("q-btn",{attrs:{flat:"",color:"negative",size:"md",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]):e._e(),"steps"===e.tabs.selected?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[e.warnings.stepsMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?r("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?r("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),r("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return r("li",{key:t._id,staticClass:"list-group-item"},[e.readOnly?e._e():r("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),r("div",[r("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),r("span",{staticStyle:{"margin-top":"4px"},on:{click:function(r){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():r("q-btn",{staticClass:"float-right",on:{click:function(r){return e.removeStep(t.stepId)}}},[r("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():r("q-btn",{staticClass:"float-right",on:{click:function(r){return e.modifyStep(t)}}},[r("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():r("p",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}},[e._v(e._s(e.$t("label.AddAStep")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?r("p",{staticClass:"centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?r("p",{staticClass:"smaller"}):e._e(),r("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),r("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}}),r("p")],1):e._e(),"advanced"===e.form.fields.editorMode?r("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():r("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),r("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t){return r("li",{key:t._id,staticClass:"step-list list-group-item align-top"},[e.readOnly?e._e():r("q-icon",{staticClass:"handle",staticStyle:{"font-size":"1.3rem"},attrs:{name:"reorder"}}),r("div",[r("p",{staticClass:"bigger"},[e._v("\n                "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n                "),e.readOnly?e._e():r("q-icon",{staticClass:"float-right q-mt-sm q-ml-md size-1",attrs:{name:"add_box"},nativeOn:{click:function(r){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():r("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(r){return e.removeChapter(t.chapterId)}}}),e.readOnly?e._e():r("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(r){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?r("q-icon",{staticClass:"float-right q-mt-sm a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(r){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():r("div",[e._v("\n                "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n              ")]),e._l(t.steps,(function(a){return r("div",{key:a._id,staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[r("div",{staticClass:"step-text"},[r("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===a.level},attrs:{color:"grey",name:e.getIconFromStepType(a.type)}}),e.readOnly||a.error?e._e():r("span",{on:{click:function(t){return e.playStep(a)}}},["All"!==a.player?r("q-badge",{attrs:{color:"primary",align:"top"}},[e._v(e._s(a.player))]):e._e(),e._v(" "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))],1),!e.readOnly&&a.error?r("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(a.error)}}},[r("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                    "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage])+"\n                  ")],1):e._e(),e.readOnly?r("span",[e._v(e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))]):e._e()],1),r("div",{staticClass:"step-button"},[e.readOnly?e._e():r("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(a)}}},[r("q-list",[r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(r){return e.insertStep(t.chapterId,a.stepId)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),r("q-item-section",[r("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(a.stepId)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{icon:"delete"}})],1),r("q-item-section",[r("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():r("p",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"fas fa-plus-circle"},on:{click:function(t){return e.addChapter()}}},[e._v(e._s(e.$t("label.AddASChapter")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?r("p",{staticClass:"centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?r("p",{staticClass:"smaller"}):e._e(),r("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),r("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}}),r("p")],1):e._e()]):e._e(),"publish"===e.tabs.selected?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["old"===e.quest.status?r("div",[r("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n        ")])],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?r("div",["tovalidate"===e.quest.status?r("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestUnderValidation"))+"\n        ")]):e._e(),"rejected"===e.quest.status?r("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestPublicationRejected"))+"\n        ")]):e._e(),e.chapters.items.length>100?r("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n        ")]):e._e(),"quest"===e.quest.type?r("p",{staticClass:"centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),"room"===e.quest.type?r("p",{staticClass:"centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.SeeYourQuestPage")))])],1):e._e(),"private"===e.quest.access?r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"people"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Invitees"))+" "),e.quest.limitations&&e.quest.limitations.nbInvitees?r("span",[e._v("("+e._s(e.invitee.items.length)+"/"+e._s(e.quest.limitations.nbInvitees)+")")]):e._e()]),e._l(e.invitee.items,(function(t){return r("p",{key:t.id},[r("q-toggle",{attrs:{label:t.name},on:{input:function(r){return e.removeInvitee(t.id)}},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}})],1)})),e.warnings.inviteeMissing?r("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),r("q-input",{attrs:{type:"text",label:e.$t("label.InvitePeople"),"bottom-slots":"",error:!e.invitee.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addInvitee()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteInviteesHelp"))+"\n              ")]},proxy:!0}],null,!1,3016168484),model:{value:e.invitee.new.email,callback:function(t){e.$set(e.invitee.new,"email",t)},expression:"invitee.new.email"}})],2)],1):e._e(),r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label."+("quest"===e.quest.type?"public"===e.quest.access?"LanguagesPublished":"LanguagesPublishedForPrivate":"PageLanguagesPublished"))))]),e._l(e.form.fields.languages,(function(t){return r("p",{key:t.lang},[r("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(r){return e.publish(t.lang)}},model:{value:t.published,callback:function(r){e.$set(t,"published",r)},expression:"lang.published"}})],1)})),"public"===e.quest.access&&"quest"===e.quest.type?r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1),r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?r("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return r("p",{key:t.id},[r("q-toggle",{attrs:{label:t.name},on:{input:function(r){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?r("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),r("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.EditorIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteEditorsHelp"))+"\n              ")]},proxy:!0}],null,!1,658616356),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),"quest"===e.quest.type?r("div",{staticClass:"q-pt-md"},[r("div",{domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest"))}}),r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"_qrcode.png"}})]):e._e(),"room"===e.quest.type?r("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.SaveQuestResultsMarker",{url1:e.serverUrl+"/upload/quest/"+e.questId+"_score1_qrcode.png",url2:e.serverUrl+"/upload/quest/"+e.questId+"_score2_qrcode.png",url3:e.serverUrl+"/upload/quest/"+e.questId+"_score3_qrcode.png"}))}}):e._e()],1)],1),r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"file_download"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Downloads")))]),"quest"===e.quest.type?r("div",[e.isHybrid?e._e():r("div",[r("q-btn",{attrs:{color:"primary",flat:"",type:"a",href:"statics/markers/all.pdf",download:""}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1),e.isHybrid?r("div",[r("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadMarkers()}}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1):e._e(),e.isHybrid?e._e():r("div",[r("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadTexts()}}},[e._v(e._s(e.$t("label.ExportTexts")))])],1)]):e._e()],1)],1),"room"!==e.quest.type?r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),r("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e(),"published"!==e.quest.status?r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),r("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"negative"},on:{click:function(t){return e.removeQuest()}}},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),e._v("\n            "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n          ")],1)],1):e._e(),"published"===e.quest.status?r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),r("q-item-section",[e._v("\n            "+e._s(e.$t("label.YouNeedToUnpublishYourQuestToRemoveIt"))+"\n          ")])],1):e._e()],1):e._e()]):e._e(),"payments"===e.tabs.selected&&e.isEdition?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[r("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.payments,(function(t){return r("q-item",{key:t._id},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{rounded:""}},[r("img",{attrs:{src:e.serverUrl+"/upload/tiers/"+t.qrCode+".png"}})])],1),r("q-item-section",[r("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.qrCode.replace("tierplay_","")))]),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("status."+t.status))+" - "+e._s(e._f("formatDate")(t.dateUpdate,e.$store.state.user.language)))])],1),r("q-item-section",{attrs:{side:""}},[r("q-btn-dropdown",{attrs:{icon:"cloud_upload",split:"",dense:""},on:{click:function(r){return e.downloadQRCode(t.qrCode)}}},[r("q-list",["new"===t.status?r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(r){return e.removeCode(t._id)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{icon:"delete"}})],1),r("q-item-section",[r("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1):e._e()],1)],1)],1)],1)})),1),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.createNewPaymentQRCode}},[r("span",[e._v(e._s(e.$t("label.CreateNewQRCodeForPlay")))])]),r("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(10)}}},[r("span",[e._v(e._s(e.$t("label.Create10NewQRCodeForPlay")))])]),r("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(50)}}},[r("span",[e._v(e._s(e.$t("label.Create50NewQRCodeForPlay")))])])],1)],1):e._e(),"reviews"===e.tabs.selected&&e.isEdition?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))])],1):e._e()],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sellings?r("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[r("q-card-section",[r("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalSellings")))])]),r("q-separator",{attrs:{inset:""}}),r("q-card-section",[r("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(parseInt(70*e.statistics.statistics.sellings)/100)+" €")]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.YourRevenues"))+e._s(e.$t("label.colons"))+e._s(parseInt(40*e.statistics.statistics.sellings)/100)+"€ TTC")]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RevenuesPayedFloor")))])])],1):e._e(),r("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[r("q-card-section",[r("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalNumberOfPlayers")))])]),r("q-separator",{attrs:{inset:""}}),r("q-card-section",[r("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished)),e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>0?r("span",{staticClass:"smaller",class:{"text-red":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays<=e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished,"text-grey":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished}},[e._v("/"+e._s(e.quest.limitations.nbPlays))]):e._e()]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers)+" ")])])],1),r("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[r("q-card-section",[r("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageScore")))])]),r("q-separator",{attrs:{inset:""}}),r("q-card-section",[r("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageScore)))]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MaxScore"))+e._s(e.$t("label.colons"))+e._s(e.quest.availablePoints.score)+" ")])])],1),r("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[r("q-card-section",[r("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageDuration")))])]),r("q-separator",{attrs:{inset:""}}),r("q-card-section",[r("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageDuration)))])])],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?r("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersByAge")}},[r("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return r("q-item",{key:t._id},[t&&!t._id?r("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?r("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?r("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersBySex")}},[r("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return r("q-item",{key:t._id},[r("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),e.reviews.length>0?r("q-item",[r("q-item-section",{attrs:{side:"",top:""}},[r("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1)],1):e._e(),r("q-item",[r("q-item-section",[r("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),r("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return r("q-item",{key:t._id},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",[r("img",{attrs:{src:e.getAvatar(t.userId.picture)}})])],1),r("q-item-section",[r("q-item-label",[e._v("\n                    "+e._s(t.userId.name)+"\n                  ")]),r("q-item-label",{attrs:{caption:""}},[r("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(r){e.$set(t,"rating",r)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                  ")],1),r("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?r("q-item",[r("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1)],1):e._e(),"results"===e.tabs.selected&&e.isEdition&&"private"===e.quest.access?r("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["published"===e.quest.status?r("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?r("div",[r("q-list",e._l(e.ranking.items,(function(t,a){return r("q-item",{key:a},[r("q-item-section",{attrs:{top:"",avatar:""}},[r("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?r("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?r("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():r("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),r("q-item-section",[r("q-item-label",[e._v(e._s(t.name))]),"finished"===t.status?r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?r("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n        ")]):e._e(),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),r("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?r("div",[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?r("div",[e._v("\n          "+e._s(e.$t("label.FinalRankingIntro"))+"\n          "),r("q-list",e._l(e.ranking.items,(function(t,a){return r("q-item",{key:a},[r("q-item-section",{attrs:{avatar:""}},[t.position<=10?r("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}}):e._e()]),r("q-item-section",[r("q-item-label",[e._v(e._s(t.name))]),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),r("q-item-section",{attrs:{side:"",top:"",avatar:""}},[r("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?r("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?r("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():r("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?r("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n        ")]):e._e()]):e._e()]):e._e(),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white hint panel-bottom q-pa-md"},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,a){return r("q-list",{key:t.id},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[r("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(a)}}},[r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),r("q-item-section",[e._v(e._s(t.size)+" Ko")]),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{icon:"delete"},on:{click:function(r){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?r("div",[e._v("\n          "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n        ")]):e._e(),r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),r("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?r("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),r("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[r("div",{staticClass:"q-pa-md"},[r("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),r("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),r("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():r("div",{staticClass:"centered"},[r("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"q-mb-sm glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?r("div",{staticClass:"over-map mobile-fit",class:"font-"+e.form.fields.customization.font},[r("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1),r("div",{staticClass:"col-auto"},[e.chapters.showNewStepPageSettings||e.chapters.showNewStepOverview||e.chapters.showNewStepPage?e._e():r("div",{staticClass:"desktop-only background-dark arial full-page-div full-height"},[r("div",{staticClass:"q-pa-xl",domProps:{innerHTML:e._s(e.$t("label.CreationStudioHelp"))}})]),e.chapters.showNewStepPage?r("div",{staticClass:"bg-white arial full-page-div"},[r("div",{staticClass:"scroll"},[r("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[r("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),r("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),r("div",[r("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),r("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return r("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[r("div",{staticClass:"centered q-pa-sm"},[r("div",[e._v(e._s(e.$t("stepType."+t.description)))]),r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(r){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),r("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),r("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return r("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[r("div",{staticClass:"centered q-pa-sm"},[r("div",[e._v(e._s(e.$t("stepType."+t.description)))]),r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(r){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),r("div",{staticClass:"q-pa-md centered"},[r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]):e._e(),e.chapters.showNewStepPageSettings?r("div",{staticClass:"bg-white arial full-page-div"},[r("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1):e._e(),e.chapters.showNewStepOverview?r("div",{staticClass:"fullscreen-mobile",staticStyle:{background:"none","background-color":"transparent"}},[r("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",customization:e.quest.customization?e.quest.customization:{color:"primary"},inventory:e.inventory,itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.closeOverview()}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu step-menu-fixed"},[r("div",{staticClass:"row white-buttons"},[r("div",{staticClass:"col centered q-pb-md"},[e.quest.customization.logo&&""!==e.quest.customization.logo?r("q-btn",{staticClass:"bg-white",attrs:{round:"",size:"lg"}},[r("q-avatar",{attrs:{size:"60px"}},[r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),r("div",{staticClass:"col centered q-pb-md"},[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])])],1):e._e(),r("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[r("div",{staticClass:"inventory panel-bottom q-pa-md"},[r("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[r("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items.length>0&&!e.warnings.inventoryMissing?r("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?r("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),r("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return r("div",{key:a,on:{click:function(r){return e.selectItem(t)}}},[t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?r("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.pictures[e.languages.current]:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.pictures[e.languages.current]}}):e._e(),t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?e._e():r("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?r("p",[e._v(e._s(t.titles[e.languages.current]))]):e._e(),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?e._e():r("p",[e._v(e._s(t.title))])])})),0)])]),r("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[r("div",{staticClass:"hint panel-bottom q-pa-md"},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?r("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?r("p",[e._v(e._s(e.hint.label[e.hint.number]))]):e._e(),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"q-mb-xl glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[r("div",[e._v(e._s(e.$t("label.Close")))])])],1)])])],1)])},ti=[],ri=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-white arial step-setting"},[r("div",{staticClass:"q-pa-md background-dark"},[r("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.close}},[r("q-icon",{staticClass:"subtitle4",attrs:{name:"close"}})],1),null!==e.selectedStep.type?r("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e()]),r("div",{staticClass:"q-pa-md q-pt-md q-mt-lg bottom-margin-for-keypad"},[r("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code?r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"",maxlength:e.mainTextMaxLength,error:e.$v.selectedStep.form.text[e.lang].$error,"error-message":e.$t("label.KeepEnigmaQuestionsShort"),"test-id":"step-text"},on:{blur:e.$v.selectedStep.form.text[e.lang].$touch,input:e.$v.selectedStep.form.text[e.lang].$touch},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[r("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n        "+e._s(e.$t("label.AddABackgroundImage"))+"\n      ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?r("div",[r("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?r("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),r("br"),r("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.type.code?r("div",[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),r("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?r("div",[e._v("\n        "+e._s(e.$t("label.UploadAVideo"))+":\n        "),r("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),r("div",[r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),r("p",{directives:[{name:"show",rawName:"v-show",value:null===e.selectedStep.form.videoStream,expression:"selectedStep.form.videoStream === null"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),null!==e.selectedStep.form.videoStream?r("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[r("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream,type:"video/mp4"}})]):e._e()])]):e._e(),"new-item"==e.options.type.code?r("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():r("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,a){return r("div",{key:a,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(a)}}},[r("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[a].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():r("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),r("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.UploadTheItemPicture"))+":\n          "),r("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),r("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?r("div",[r("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),r("div",{staticClass:"centered"},[r("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),r("a",{staticClass:"dark",on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),r("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?r("div",[r("div",[e._v(e._s(e.$t("label.SplitMessageWithPipe")))]),r("h2",[e._v(e._s(e.$t("label.Character")))]),e.quest.customization.character&&""!==e.quest.customization.character?r("div",[r("q-radio",{attrs:{val:"usequestcharacter"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),r("p",[r("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.character}})])],1):e._e(),e._l(6,(function(t){return r("div",{key:t,staticClass:"answer"},[r("q-radio",{attrs:{val:t.toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),r("p",[r("img",{attrs:{src:"statics/icons/story/character"+t+"_attitude1.png"}})])],1)})),r("q-list",{attrs:{bordered:""}},[r("q-expansion-item",{attrs:{label:e.$t("label.OtherCharacters")}},e._l(34,(function(t){return r("div",{key:t,staticClass:"answer"},[r("q-radio",{attrs:{val:(t+6).toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),r("p",[r("img",{attrs:{src:"statics/icons/story/character"+(t+6)+"_attitude1.png"}})])],1)})),0)],1),r("div",[r("div",{staticClass:"q-mb-sm"},[e._v("\n          "+e._s(e.$t("label.OrDownloadAFile"))+"\n          "),e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),r("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?r("div",[e._v("\n            "+e._s(e.$t("label.UploadACharacter"))+":\n            "),r("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.character.$error,expression:"$v.selectedStep.form.options.character.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.character&&e.selectedStep.form.options.character.length>2&&"usequestcharacter"!==e.selectedStep.form.options.character?r("div",{staticClass:"centered"},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/character/"+e.selectedStep.form.options.character}})]):e._e()])])],2):e._e(),"geolocation"==e.options.type.code?r("div",{staticClass:"location-gps"},[r("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),e._l(e.selectedStep.form.options.locations,(function(t,a){return r("div",{key:a,staticClass:"fields-group"},[e.isIOs?e._e():r("div",{staticClass:"location-address"},[r("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[r("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination"+a,placeholder:e.$t("label.Address"),value:t.destination},on:{place_changed:e.setLocation,input:function(t){e.config.geolocation.currentIndex=a,e.value=t.target.value}}})],1),r("a",{staticClass:"dark",on:{click:function(t){return e.getCurrentLocation(a)}}},[r("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs||t.lat&&""!==t.lat?r("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),r("div",{staticClass:"location-gps-inputs"},[r("div",[r("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lat,expression:"location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"ex. 5,65487",step:"any"},domProps:{value:t.lat},on:{input:function(r){r.target.composing||e.$set(t,"lat",e._n(r.target.value))},blur:function(t){return e.$forceUpdate()}}})]),r("div",[r("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lng,expression:"location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"ex. 45,49812",step:"any"},domProps:{value:t.lng},on:{input:function(r){r.target.composing||e.$set(t,"lng",e._n(r.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),r("div",[r("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation(a)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs||t.lat&&""!==t.lat?e._e():r("q-list",[r("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[r("div",{staticClass:"location-gps-inputs"},[r("div",[r("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lat,expression:"location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"ex. 5,65487",step:"any"},domProps:{value:t.lat},on:{input:function(r){r.target.composing||e.$set(t,"lat",e._n(r.target.value))},blur:function(t){return e.$forceUpdate()}}})]),r("div",[r("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lng,expression:"location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"ex. 45,49812",step:"any"},domProps:{value:t.lng},on:{input:function(r){r.target.composing||e.$set(t,"lng",e._n(r.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),r("div",[r("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation(a)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)})),r("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddAnGPSLocation")},on:{click:function(t){return e.addGPSLocation()}}})],2):e._e(),"choose"==e.options.type.code?r("div",[r("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),r("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),r("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),r("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),r("p",[e._v(e._s(e.$t("label.SelectTheGoodAnswer")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return r("div",{key:a,staticClass:"answer"},[r("q-radio",{attrs:{val:a,"test-id":"radio-answer-"+a},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}}),r("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+a},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[a].text.$touch}},model:{value:t.text,callback:function(r){e.$set(t,"text",r)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].text.required?r("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),r("p",["image"===e.config.choose.answerType&&null!==t.imagePath?r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():r("span",[r("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})],1),e.isIOs?r("span",[r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})]):e._e(),r("q-btn",{attrs:{"test-id":"delete-answer-"+a},on:{click:function(t){return e.deleteAnswer(a)}}},[r("q-icon",{attrs:{name:"clear"}})],1)],1)})),r("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnAnswer"))+"\n      ")])],2):e._e(),"write-text"==e.options.type.code?r("div",[e._l(e.selectedStep.form.answers,(function(t,a){return r("div",{key:a},[r("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.answers[a],callback:function(t){e.$set(e.selectedStep.form.answers,a,t)},expression:"selectedStep.form.answers[index]"}})],1)})),r("q-btn",{staticClass:"full-width",on:{click:function(t){return e.addWriteTextAnswer()}}},[e._v(e._s(e.$t("label.AddAnAnswer")))]),r("div",[e._v(e._s(e.$t("label.WriteTextWarning")))])],2):e._e(),"code-keypad"==e.options.type.code?r("div",[r("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"6","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?r("div",{staticClass:"code-color"},[r("h2",[e._v(e._s(e.$t("label.AvailableColors")))]),r("q-list",e._l(e.config.colorCode.colorsForCode,(function(t,a){return r("q-item",{key:a,style:"background-color: "+t.value},[r("q-item-section",[r("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.label))])],1),r("q-item-section",{attrs:{side:""}},[r("q-btn",{staticClass:"bg-white",on:{click:function(t){return e.deleteColor(a)}}},[r("q-icon",{attrs:{name:"clear"}})],1)],1)],1)})),1),r("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[r("q-expansion-item",{staticClass:"q-pa-md",attrs:{dense:"",icon:"playlist_add",label:e.$t("label.AddNewColor")}},[r("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCodeName"),maxlength:"15"},model:{value:e.config.colorCode.newColor.label,callback:function(t){e.$set(e.config.colorCode.newColor,"label",t)},expression:"config.colorCode.newColor.label"}}),r("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCode"),maxlength:"7"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[r("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[r("q-color",{model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}})],1)],1)]},proxy:!0}],null,!1,2730844002),model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}}),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"secondary"},on:{click:function(t){return e.addColor()}}},[e._v("\n              "+e._s(e.$t("label.Add"))+"\n            ")])],1)],1)],1),r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),r("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),r("table",[r("tr",e._l(e.unformatedAnswer,(function(t,a){return r("td",{key:a},[r("q-select",{ref:"colorSelect"+a,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+a},model:{value:e.unformatedAnswer[a],callback:function(t){e.$set(e.unformatedAnswer,a,t)},expression:"unformatedAnswer[index]"}})],1)})),0),r("tr",e._l(e.unformatedAnswer,(function(t,a){return r("td",{key:a},[r("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[a],on:{click:function(t){return e.triggerClickOnColorSelect(a)}}},[e._v(" ")])])})),0)])],1):e._e(),"code-image"==e.options.type.code?r("div",{staticClass:"code-image"},[r("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,(function(t,a){return r("div",{key:a,staticClass:"answer"},[r("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),r("p",[null!==t.imagePath?r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():r("span",[r("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})],1),e.isIOs?r("span",[r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})]):e._e(),r("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(a)}}},[r("q-icon",{attrs:{name:"clear"}})],1)],1)})),r("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnImage"))+"\n      ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?r("div",[r("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),r("table",[r("tr",e._l(e.unformatedAnswer,(function(t,a){return r("td",{key:a,staticClass:"text-center",attrs:{"test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}},[r("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),r("tr",e._l(e.unformatedAnswer,(function(t,a){return r("td",{key:a},[r("img",{attrs:{id:"image-code-setting-"+a,src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),0),r("tr",e._l(e.unformatedAnswer,(function(t,a){return r("td",{key:a,staticClass:"text-center",attrs:{"test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}},[r("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"jigsaw-puzzle"===e.options.type.code?r("div",[r("div",{staticClass:"background-upload"},[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),r("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.UploadThePuzzlePicture"))+":\n          "),r("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?e._e():r("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture?r("div",[r("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),r("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture}})]):e._e()]),r("div",[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?r("div",[r("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return r("div",{key:a,staticClass:"answer"},[r("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),r("p",[null!==t.imagePath?r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():r("span",[r("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})],1),e.isIOs?r("span",[r("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})]):e._e(),r("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(a)}}},[r("q-icon",{attrs:{name:"clear"}})],1)],1)})),r("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddACardPair"))+"\n      ")])],2):e._e(),"phone-call"==e.options.type.code?r("div",[r("q-input",{attrs:{label:e.$t("label.PhoneNumber"),"min-length":"2","max-length":"10","bottom-slots":""},model:{value:e.selectedStep.form.options.number,callback:function(t){e.$set(e.selectedStep.form.options,"number",t)},expression:"selectedStep.form.options.number"}})],1):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage?r("div",{staticClass:"find-item"},[r("p",[r("q-toggle",{attrs:{label:e.$t("label.ObjectNeedToBeAppliedOnPicture")},model:{value:e.selectedStep.form.options.touchLocation,callback:function(t){e.$set(e.selectedStep.form.options,"touchLocation",t)},expression:"selectedStep.form.options.touchLocation"}})],1),r("div",[r("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),r("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.useItem.imageHeight+"px; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[e.selectedStep.form.options.touchLocation?r("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: "+e.config.useItem.crossSize+"px; height: "+e.config.useItem.crossSize+"px;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}}):e._e()])])]):e._e(),"use-item"==e.options.type.code?r("div",{staticClass:"inventory"},[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:e.$v.selectedStep.form.answerItem.$touch},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?r("div",[e._v("\n        "+e._s(e.$t("label.SelectedObject"))+" :\n        "),r("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e(),r("div",[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),r("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),r("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?r("div",{staticClass:"centered"},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"find-item"===e.options.type.code&&null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage?r("div",{staticClass:"find-item"},[r("q-select",{attrs:{label:e.$t("label.AreasNumber"),options:e.config.findItem.numberOfAreas,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},on:{input:e.changeNbAreas},model:{value:e.selectedStep.form.options.nbAreas,callback:function(t){e.$set(e.selectedStep.form.options,"nbAreas",t)},expression:"selectedStep.form.options.nbAreas"}}),r("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),e.selectedStep&&e.selectedStep.form&&e.selectedStep.form.answers?r("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden;background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.findItem.imageHeight+"px; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinatesFindItem(t)}}},[r("img",{style:"position: absolute; z-index: 500; top: 100px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross0",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(0)}}}),r("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross1",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(1)}}}),r("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross2",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(2)}}}),r("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 200px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross3",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(3)}}})]):e._e(),r("div",[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),r("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?r("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),r("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?r("div",{staticClass:"centered"},[r("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"locate-item-ar"===e.options.type.code?r("div",{staticClass:"locate-item-ar"},[r("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),r("div",{staticClass:"fields-group"},[r("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),r("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():r("div",[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),r("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?r("div",[e._v("\n            "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n            "),r("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?r("div",[r("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),r("div",[r("p",[e._v(e._s(e.$t("label.ObjectSize")))]),"undefined"!==typeof e.selectedStep.form.options.objectSize?r("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?r("div",[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?r("div",[e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),r("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?r("div",[e._v("\n              "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n              "),r("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),r("div",{attrs:{id:"target-canvas"}}),r("div",[e._v("\n            "+e._s(e.$t("label.TouchAndDragObject"))+"\n          ")])],1):e._e()],1),r("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),r("div",{staticClass:"fields-group"},[e.isIOs?e._e():r("div",{staticClass:"location-address"},[r("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[r("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address"),value:e.selectedStep.form.options.destination},on:{place_changed:e.setLocation,input:function(t){e.config.geolocation.currentIndex=-1,e.value=t.target.value}}})],1),r("a",{staticClass:"dark",on:{click:function(t){return e.getCurrentLocation(-1)}}},[r("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs||e.selectedStep.form.options.lat&&""!==e.selectedStep.form.options.lat?r("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),r("div",{staticClass:"location-gps-inputs"},[r("div",[r("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),r("div",[r("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),r("div",[r("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation(-1)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs||e.selectedStep.form.options.lat&&""!==e.selectedStep.form.options.lat?e._e():r("q-list",[r("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[r("div",{staticClass:"location-gps-inputs"},[r("div",[r("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),r("div",[r("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),r("div",[r("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation(-1)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?r("div",{staticClass:"locate-marker"},[r("h2",[e._v(e._s(e.$t("label.Marker")))]),r("p",[r("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),r("span",[e._v(e._s(e.selectedStep.form.answers))]),r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary","test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}},[e._v("\n          "+e._s(e.$t("label.Choose"))+"\n        ")])],1),r("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[r("q-card",[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),r("q-card-section",e._l(e.markersList,(function(t,a){return r("q-btn",{key:a,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(r){return e.selectMarker(t)}}},[r("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),r("span",[e._v(e._s(t))])])})),1),r("q-card-actions",[r("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),"portrait-robot"===e.options.type.code&&e.selectedStep.form.answers&&e.selectedStep.form.answers.items?r("div",{staticClass:"portrait-robot"},[r("h2",[e._v(e._s(e.$t("label.BuildThePortraitRobot")))]),r("div",{staticClass:"relative-position"},[r("div",[r("img",{attrs:{src:"statics/portrait-robot/face-"+e.selectedStep.form.answers.items.face+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/eye-"+e.selectedStep.form.answers.items.eye+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/mouth-"+e.selectedStep.form.answers.items.mouth+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/nose-"+e.selectedStep.form.answers.items.nose+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/hair-"+e.selectedStep.form.answers.items.hair+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/beard-"+e.selectedStep.form.answers.items.beard+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/glass-"+e.selectedStep.form.answers.items.glass+".png"}})]),r("div",{staticClass:"absolute"},[r("img",{attrs:{src:"statics/portrait-robot/hat-"+e.selectedStep.form.answers.items.hat+".png"}})])]),r("table",{staticClass:"portrait-parts"},[r("tr",[r("td",[r("img",{attrs:{src:"statics/portrait-robot/face-1.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/eye-1.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/nose-1.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/hair-1.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/beard-2.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/glass-2.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),r("td",[r("img",{attrs:{src:"statics/portrait-robot/hat-4.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])])]):e._e(),"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?r("div",[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Protocol"),options:e.config.iot.protocols},model:{value:e.selectedStep.form.options.protocol,callback:function(t){e.$set(e.selectedStep.form.options,"protocol",t)},expression:"selectedStep.form.options.protocol"}}),r("q-input",{attrs:{"emit-value":"","map-options":"",label:"DeviceID (plug the device in)",options:e.config.iot.triggerEvent.modes,mask:"NN:NN:NN:NN:NN:NN","fill-mask":"",value:"00:00:00:00:00:00"},model:{value:e.selectedStep.form.options.deviceid,callback:function(t){e.$set(e.selectedStep.form.options,"deviceid",t)},expression:"selectedStep.form.options.deviceid"}}),"wait-for-event"===e.options.type.code?r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.waitForEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.triggerEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.TriggerMode"),options:e.config.iot.triggerEvent.modes},model:{value:e.selectedStep.form.options.triggerMode,callback:function(t){e.$set(e.selectedStep.form.options,"triggerMode",t)},expression:"selectedStep.form.options.triggerMode"}}):e._e(),"distance"===e.selectedStep.form.options.object?r("div",[r("h2",[e._v(e._s(e.$t("label.SuccessRange")))]),r("q-range",{attrs:{min:0,max:200,"left-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.min+"cm":"","right-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.max+"cm":"","label-always":""},model:{value:e.selectedStep.form.options.range,callback:function(t){e.$set(e.selectedStep.form.options,"range",t)},expression:"selectedStep.form.options.range"}})],1):e._e(),"pot"===e.selectedStep.form.options.object?r("div",[r("h2",[e._v(e._s(e.$t("label.SuccessRanges")))]),e._l([1,2,3],(function(t){return r("q-range",{key:t,staticClass:"q-my-md",attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].min:"","right-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].max:"","label-always":""},model:{value:e.selectedStep.form.options["range"+t],callback:function(r){e.$set(e.selectedStep.form.options,"range"+t,r)},expression:"selectedStep.form.options['range' + index]"}})}))],2):e._e(),"keypad"===e.selectedStep.form.options.object?r("div",[r("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.selectedStep.form.options.answer,callback:function(t){e.$set(e.selectedStep.form.options,"answer",t)},expression:"selectedStep.form.options.answer"}})],1):e._e(),"joystick"===e.selectedStep.form.options.object?r("div",[r("h2",{staticStyle:{"line-height":"1.5rem"}},[e._v(e._s(e.$t("label.SuccessRanges")))]),r("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Horizontal")))]),r("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.min:"","right-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.max:"","label-always":""},model:{value:e.selectedStep.form.options.rangeX,callback:function(t){e.$set(e.selectedStep.form.options,"rangeX",t)},expression:"selectedStep.form.options.rangeX"}}),r("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Vertical")))]),r("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.min+"":"","right-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.max+"":"","label-always":""},model:{value:e.selectedStep.form.options.rangeY,callback:function(t){e.$set(e.selectedStep.form.options,"rangeY",t)},expression:"selectedStep.form.options.rangeY"}})],1):e._e(),"button"===e.selectedStep.form.options.object?r("div",[r("q-input",{attrs:{type:"textarea",label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:300},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"lcd"===e.selectedStep.form.options.object?r("div",[r("q-input",{attrs:{label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:16},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"buzzer"===e.selectedStep.form.options.object?r("div",[r("h2",[e._v(e._s(e.$t("label.Duration")))]),r("q-slider",{attrs:{min:0,max:3e3,"label-value":e.selectedStep.form.options.duration?e.selectedStep.form.options.duration+"ms":"","label-always":""},model:{value:e.selectedStep.form.options.duration,callback:function(t){e.$set(e.selectedStep.form.options,"duration",t)},expression:"selectedStep.form.options.duration"}}),r("h2",[e._v(e._s(e.$t("label.Frequency")))]),r("q-slider",{attrs:{min:100,max:1e4,"label-value":e.selectedStep.form.options.frequency?e.selectedStep.form.options.frequency+"Hz":"","label-always":""},model:{value:e.selectedStep.form.options.frequency,callback:function(t){e.$set(e.selectedStep.form.options,"frequency",t)},expression:"selectedStep.form.options.frequency"}})],1):e._e()],1):e._e(),e.quest.playersNumber>1?r("div",[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Player"),options:e.players},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpPlayer")}}})]},proxy:!0}],null,!1,3443813941),model:{value:e.selectedStep.form.player,callback:function(t){e.$set(e.selectedStep.form,"player",t)},expression:"selectedStep.form.player"}})],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?r("q-list",{attrs:{bordered:""}},[r("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[r("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?r("q-list",{attrs:{highlight:""}},[r("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,a){return r("q-item",{key:a},[r("q-item-section",[r("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),r("q-item-section",{attrs:{side:""}},[r("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(a)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?r("div",[e._v("\n            "+e._s(e.$t("label.NoCondition"))+"\n          ")]):e._e(),e.selectedStep.newConditionForm?e._e():r("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?r("div",[r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),r("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}),r("div",{staticClass:"centered"},[r("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),r("q-btn",{staticClass:"q-mx-md",attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),r("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[r("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[r("div",{staticClass:"q-pa-sm"},[e.options&&e.options.mode&&"advanced"===e.options.mode&&("use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code)?r("div",{staticClass:"q-pb-md"},[r("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}})],1):e._e(),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?r("div",{staticClass:"location-gps"},[r("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),r("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}})],1):e._e(),"geolocation"==e.options.type.code?r("div",[r("q-input",{attrs:{label:e.$t("label.DistanceToWin")},model:{value:e.selectedStep.form.options.distance,callback:function(t){e.$set(e.selectedStep.form.options,"distance",t)},expression:"selectedStep.form.options.distance"}})],1):e._e(),"memory"===e.options.type.code?r("div",[r("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}})],1):e._e(),"help"===e.options.type.code?r("div",[r("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageInventory")},model:{value:e.selectedStep.form.options.helpInventory,callback:function(t){e.$set(e.selectedStep.form.options,"helpInventory",t)},expression:"selectedStep.form.options.helpInventory"}}),r("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageHint")},model:{value:e.selectedStep.form.options.helpHint,callback:function(t){e.$set(e.selectedStep.form.options,"helpHint",t)},expression:"selectedStep.form.options.helpHint"}}),r("q-toggle",{attrs:{label:e.$t("label.HelpStepMessagePrevious")},model:{value:e.selectedStep.form.options.helpPrevious,callback:function(t){e.$set(e.selectedStep.form.options,"helpPrevious",t)},expression:"selectedStep.form.options.helpPrevious"}}),r("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageNext")},model:{value:e.selectedStep.form.options.helpNext,callback:function(t){e.$set(e.selectedStep.form.options,"helpNext",t)},expression:"selectedStep.form.options.helpNext"}})],1):e._e(),e.options.type.nbTrials>0?r("div",[r("q-input",{attrs:{label:e.$t("label.NbTrials")},model:{value:e.selectedStep.form.nbTrial,callback:function(t){e.$set(e.selectedStep.form,"nbTrial",t)},expression:"selectedStep.form.nbTrial"}})],1):e._e(),e.options.type.passOption>0?r("div",[r("q-toggle",{attrs:{label:e.$t("label.UserCanPass")},model:{value:e.selectedStep.form.canPass,callback:function(t){e.$set(e.selectedStep.form,"canPass",t)},expression:"selectedStep.form.canPass"}})],1):e._e(),"image-over-flow"===e.options.type.code?r("div",[r("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullWidth")},model:{value:e.selectedStep.form.options.fullWidthPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullWidthPicture",t)},expression:"selectedStep.form.options.fullWidthPicture"}}),r("q-toggle",{attrs:{label:e.$t("label.PlayerCanTakeSnapshot")},model:{value:e.selectedStep.form.options.snapshotAllowed,callback:function(t){e.$set(e.selectedStep.form.options,"snapshotAllowed",t)},expression:"selectedStep.form.options.snapshotAllowed"}}),r("q-toggle",{attrs:{label:e.$t("label.ReplacePictureByRedFilter")},model:{value:e.selectedStep.form.options.redFilter,callback:function(t){e.$set(e.selectedStep.form.options,"redFilter",t)},expression:"selectedStep.form.options.redFilter"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?r("div",[r("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[r("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n              "+e._s(e.$t("label.AddABackgroundImage"))+"\n            ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?r("div",[r("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?r("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),r("br"),r("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?r("div",[r("q-toggle",{attrs:{label:e.$t("label.KenBurnsEffect")},model:{value:e.selectedStep.form.options.kenBurnsEffect,callback:function(t){e.$set(e.selectedStep.form.options,"kenBurnsEffect",t)},expression:"selectedStep.form.options.kenBurnsEffect"}})],1):e._e(),"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code?r("div",[r("q-toggle",{attrs:{label:e.$t("label.UseHtmlInDescription")},model:{value:e.selectedStep.form.options.html,callback:function(t){e.$set(e.selectedStep.form.options,"html",t)},expression:"selectedStep.form.options.html"}})],1):e._e(),r("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel"),type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}})],1)])],1),r("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[r("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hints")}},[r("div",{staticClass:"q-pa-sm"},[e.selectedStep.form.hint&&e.selectedStep.form.hint[e.lang]&&e.selectedStep.form.hint[e.lang].length>0?r("div",e._l(e.selectedStep.form.hint[e.lang],(function(t,a){return r("div",{key:a},[r("q-btn",{staticClass:"float-right",on:{click:function(t){return e.removeHint(a)}}},[r("q-icon",{attrs:{name:"delete"}})],1),r("q-btn",{staticClass:"float-right q-mr-sm",on:{click:function(t){return e.updateHint(a)}}},[r("q-icon",{attrs:{name:"mode_edit"}})],1),r("div",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("label.Hint")+" "+(a+1)))]),e._v("\n              "+e._s(t)+"\n            ")],1)})),0):e._e(),r("div",[r("q-input",{attrs:{label:e.$t("label.NewHint")},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"check"},on:{click:function(t){return e.addHint()}}})]},proxy:!0}]),model:{value:e.newHint,callback:function(t){e.newHint=t},expression:"newHint"}})],1)])])],1),r("q-list",{attrs:{bordered:""}},[r("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[r("div",{staticClass:"q-pa-sm"},[r("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),r("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),r("q-list",{directives:[{name:"show",rawName:"v-show",value:"enigma"===e.options.type.category&&"image-over-flow"!==e.options.type.code&&!["image-over-flow","trigger-event"].includes(e.options.type.code),expression:"options.type.category === 'enigma' && options.type.code !== 'image-over-flow' && !['image-over-flow', 'trigger-event'].includes(options.type.code)"}],attrs:{bordered:""}},[r("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.CountDownLabel")}},[r("div",{staticClass:"q-pa-sm"},[r("q-toggle",{attrs:{label:e.$t("label.CountDownLabel")},on:{input:e.activateCountDown},model:{value:e.selectedStep.form.countDownTime.enabled,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"enabled",t)},expression:"selectedStep.form.countDownTime.enabled"}}),r("q-input",{attrs:{filled:"",label:e.$t("label.CountDownIsActive"),mask:"##h##m##s","fill-mask":"",value:"00h00m00s"},model:{value:e.selectedStep.form.countDownTime.time,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"time",t)},expression:"selectedStep.form.countDownTime.time"}})],1)])],1),r("div",{staticClass:"centered q-pa-md q-pt-lg q-pb-sm"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:function(t){return e.submitStep(!0)}}},[e._v(e._s(e.$t("label.SaveAndTestThisStep")))])],1),r("div",{staticClass:"centered q-px-md q-pb-xl"},[r("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.submitStep(!1)}}},[e._v(e._s(e.$t("label.SaveThisStep")))])],1)],1),r("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[r("q-card",[r("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),r("q-card-actions",[r("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.submitStep(!1)}}}),r("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),r("q-dialog",{model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[r("div",{staticClass:"q-pa-md centered"},[r("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),r("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),r("transition",{attrs:{name:"slideInBottom"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white panel-bottom q-pa-md"},[r("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.AddABackgroundImage")))]),e.isIOs?e._e():r("div",[r("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return e.$refs["backgroundfile"].click()}}},[r("q-icon",{attrs:{name:"cloud_upload"}}),r("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),r("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?r("div",[e._v("\n        "+e._s(e.$t("label.UploadABackgroundImage"))+":\n        "),r("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),e.media.isSimulated?r("div",{staticClass:"centered"},[r("div",{style:"width: 105px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),r("div",{style:"width: 84px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),r("div",{style:"width: 135px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block;"})]):e._e(),e.media.isSimulated?r("div",[r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyBackgroundPictureImageDisplaysOnMobiles")))]),r("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[r("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.MyPictureIsNotDisplayedWell")}},[r("q-card",[r("q-card-section",[r("span",{domProps:{innerHTML:e._s(e.$t("label.MyPictureIsNotDisplayedWellDesc"))}})])],1)],1)],1)],1):e._e(),r("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage||e.media.isSimulated?e._e():r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.WarningImageResize")))]),e.media&&e.media.items&&e.media.items.length>0&&!e.media.isSimulated?r("div",[r("div",{staticClass:"centered q-pa-md"},[e._v(e._s(e.$t("label.OrSelectAnImageInTheList")))]),e._l(e.media.items,(function(t,a){return r("img",{key:t.id,staticStyle:{width:"30vw","max-width":"300px",height:"40vw","max-height":"400px"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file},on:{click:function(t){return e.selectMedia(a)}}})}))],2):e._e(),r("div",{staticClass:"centered q-ma-md"},[r("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1)])])],1)},ai=[],ii=r("d442"),si=r.n(ii),ni=r("547f"),oi=r("e030"),li=r("6397"),ci=r.n(li),ui="demoObject",di={props:["quest","stepId","lang","options"],watch:{stepId:function(){var e=n()(i.a.mark((function e(t,r){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},extraText:{},player:"All",options:{},hint:{},nbTrial:0,canPass:!0,chapterId:"0",conditions:[],startDate:{enabled:!1},countDownTime:{enabled:!1}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"}],selectedValue:"",values:[]}},media:{isOpened:!1,isSimulated:!1,simulationPicture:"",items:[],detail:{isOpened:!1,index:0}},players:[],stepTypes:ea,objectsList:ni,markersList:Jr,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],colorsForCode:this.getColorsForCodeOptions(),newColor:{label:"",value:""}},geolocation:{currentIndex:0},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions(),maxNbAnswers:10},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[],crossSize:40,imageHeight:1200,imageWidth:900},findItem:{numberOfAreas:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],currentArea:0,crossSize:40,imageHeight:1200,imageWidth:900},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1,layersForMarkersOptions:[]},portrait:{face:{number:4},eye:{number:16},mouth:{number:1},nose:{number:5},hair:{number:26},beard:{number:31},glass:{number:5},hat:{number:4}},iot:{triggerEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("trigger-event"),modes:[{label:this.$t("label.TriggerModeAuto"),value:"auto"},{label:this.$t("label.TriggerModeManual"),value:"manual"}]},waitForEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("wait-for-event")},DeviceID:"0000000000",protocols:[{label:"MQTT",value:"mqtt"},{label:"Bluetooth",value:"bluetooth"}]}},newHint:"",questItems:[],isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("0"!==e.stepId){t.next=3;break}return t.next=3,e.initData();case 3:case"end":return t.stop()}}),t)})))()},methods:{getStepId:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.stepId&&"0"!==e.stepId?(e.selectedStep.id=e.stepId,e.selectedStep.isNew=!1):(e.selectedStep.id=0,e.selectedStep.isNew=!0);case 1:case"end":return t.stop()}}),t)})))()},resetStep:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:null,videoStream:null,answerPointerCoordinates:{top:50,left:50},answerItem:null,player:"All",nbTrial:0,canPass:!0,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},countDownTime:{enabled:!1},number:null},e.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="")}));case 2:case"end":return t.stop()}}),t)})))()},initData:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,l,c,u,d,p,f,m,h,b,g,v,w,k,y;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.questId=e.quest.questId,e.resetStep(),!e.stepId||-1!==e.stepId){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getStepId();case 6:if(e.selectedStep.isNew){t.next=15;break}return t.next=9,Cr.getById(e.stepId,e.quest.version,"all");case 9:r=t.sent,r&&r.data?Object.assign(e.selectedStep.form,r.data):ft(e.$t("label.ErrorStandardMessage"),"error"),e.options.chapterId=r.data&&r.data.chapterId?r.data.chapterId:0,e.getUnderstandableConditions(),t.next=18;break;case 15:e.selectedStep.form.type=e.options.type.code,e.selectedStep.form.chapterId=e.options.chapterId,0!==e.options.previousStepId&&(e.selectedStep.form.conditions.push("stepDone_"+e.options.previousStepId),e.getUnderstandableConditions());case 18:if(e.selectedStep.type=e.getStepType(e.selectedStep.form.type),e.selectedStep.form.nbTrial&&0!==e.selectedStep.form.nbTrial||(e.selectedStep.form.nbTrial=e.selectedStep.type.nbTrials),null!==e.selectedStep.form.number){t.next=25;break}return t.next=23,Cr.countForAQuest(e.questId,e.quest.version);case 23:a=t.sent,e.selectedStep.form.number=a&&a.data&&a.data.count?a.data.count+1:1;case 25:if(e.selectedStep.form.title[e.lang]&&""!==e.selectedStep.form.title[e.lang]||(s=e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.title[e.quest.mainLanguage]?e.selectedStep.form.title[e.quest.mainLanguage]:e.$t("label.Step")+" "+e.selectedStep.form.number,e.$set(e.selectedStep.form.title,e.lang,s)),e.selectedStep.form.text[e.lang]&&""!==e.selectedStep.form.text[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.text[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.text,e.lang,e.selectedStep.form.text[e.quest.mainLanguage]),e.selectedStep.form.extraText[e.lang]&&""!==e.selectedStep.form.extraText[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.extraText[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.extraText,e.lang,e.selectedStep.form.extraText[e.quest.mainLanguage]),(!e.selectedStep.form.hint[e.lang]||""===e.selectedStep.form.hint[e.lang])&&e.lang!==e.quest.mainLanguage&&e.selectedStep.form.hint[e.quest.mainLanguage]&&e.selectedStep.form.hint[e.quest.mainLanguage].length>0)for(e.selectedStep.form.hint[e.lang]=[],n=0;n<e.selectedStep.form.hint[e.quest.mainLanguage].length;n++)e.selectedStep.form.hint[e.lang].push(e.selectedStep.form.hint[e.quest.mainLanguage][n]);for("info-text"!==e.options.type.code&&"info-video"!==e.options.type.code&&"new-item"!==e.options.type.code&&"character"!==e.options.type.code&&"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code||e.players.push({label:e.$t("label.All"),value:"All"}),l=0;l<e.quest.playersNumber;l++)e.players.push({label:e.$t("label.Player")+" "+(l+1),value:"P"+(l+1)});if(e.selectedStep.form.options.hasOwnProperty("kenBurnsEffect")||(e.selectedStep.form.options.kenBurnsEffect=!1),"choose"!==e.options.type.code){t.next=36;break}if(e.selectedStep.form.options&&e.selectedStep.form.options.items&&Array.isArray(e.selectedStep.form.options.items)){if(e.config.choose.answerType=e.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==e.selectedStep.form.options.items[0].imagePath?"image":"text","text"===e.config.choose.answerType)for(u=0;u<e.selectedStep.form.options.items.length;u++)e.selectedStep.form.options.items[u].textLanguage&&e.selectedStep.form.options.items[u].textLanguage[e.lang]&&(e.selectedStep.form.options.items[u].text=e.selectedStep.form.options.items[u].textLanguage[e.lang])}else for(e.config.choose.answerType="text",e.selectedStep.form.options={items:[]},e.selectedStep.form.answers=0,c=0;c<e.config.choose.defaultNbAnswers;c++)e.selectedStep.form.options.items.push({text:e.$t("label.AnswerNb",{nb:c+1}),imagePath:null});t.next=150;break;case 36:if("help"!==e.options.type.code){t.next=40;break}e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("helpInventory")||(e.selectedStep.form.options.helpHint=!0,e.selectedStep.form.options.helpInventory=!0,e.selectedStep.form.options.helpNext=!0,e.selectedStep.form.options.helpPrevious=!0),t.next=150;break;case 40:if("code-color"!==e.options.type.code){t.next=46;break}e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=Array(4).fill("#FF0000"),e.selectedStep.form.options.colors&&(e.config.colorCode.colorsForCode=e.selectedStep.form.options.colors),e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),t.next=150;break;case 46:if("code-image"!==e.options.type.code){t.next=52;break}if(!e.selectedStep.form.options||!e.selectedStep.form.options.images)for(e.selectedStep.form.options={images:[]},d=0;d<e.config.imageCode.defaultNbAnswers;d++)e.selectedStep.form.options.images.push({imagePath:null});e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=[0,0,0,0],t.next=150;break;case 52:if("code-keypad"!==e.options.type.code){t.next=56;break}"string"!==typeof e.selectedStep.form.answers&&(e.selectedStep.form.answers=""),t.next=150;break;case 56:if("write-text"!==e.options.type.code){t.next=60;break}"object"===Ke()(e.selectedStep.form.answers)&&e.selectedStep.form.answers.length||(e.selectedStep.form.answers=[],e.selectedStep.form.answers.push("")),t.next=150;break;case 60:if("info-text"!==e.options.type.code&&"character"!==e.options.type.code&&"choose"!==e.options.type.code&&"write-text"!==e.options.type.code&&"code-keypad"!==e.options.type.code){t.next=65;break}e.selectedStep.form.options.hasOwnProperty("initDuration")||(e.selectedStep.form.options.initDuration=1),"character"!==e.options.type.code||e.selectedStep.form.options.character||o["a"].set(e.selectedStep.form.options,"character","1"),t.next=150;break;case 65:if("find-item"!==e.options.type.code){t.next=70;break}e.selectedStep.form.options.hasOwnProperty("nbAreas")?e.$nextTick((function(){this.initFindItemElements(),this.positionFindItemPointer()})):(e.selectedStep.form.options.nbAreas=1,e.selectedStep.form.options.coordinates=[{top:50,left:50}]),e.selectedStep.form.options||(e.selectedStep.form.options={}),t.next=150;break;case 70:if("use-item"!==e.options.type.code){t.next=77;break}e.selectedStep.form.answers.hasOwnProperty("coordinates")&&(e.selectedStep.form.answerPointerCoordinates=e.selectedStep.form.answers.coordinates,e.$nextTick((function(){this.initUseItemElements(),this.positionUseItemPointer()}))),e.selectedStep.form.answers&&e.selectedStep.form.answers.item&&(e.selectedStep.form.answerItem=e.selectedStep.form.answers.item),e.getQuestItemsAsOptions(),e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("touchLocation")||(e.selectedStep.form.options={touchLocation:!0}),t.next=150;break;case 77:if("new-item"!==e.options.type.code){t.next=81;break}e.selectedStep.form.options.hasOwnProperty("picture")?(e.selectedStep.form.options.hasOwnProperty("pictures")&&e.selectedStep.form.options.pictures[e.lang]&&(e.selectedStep.form.options.picture=e.selectedStep.form.options.pictures[e.lang]),e.selectedStep.form.options.hasOwnProperty("titles")&&e.selectedStep.form.options.titles[e.lang]&&(e.selectedStep.form.options.title=e.selectedStep.form.options.titles[e.lang])):e.selectedStep.form.options={picture:null,title:"",pictures:{fr:"",en:""},titles:{fr:"",en:""}},t.next=150;break;case 81:if("jigsaw-puzzle"!==e.options.type.code){t.next=85;break}e.selectedStep.form.options.hasOwnProperty("picture")||(e.selectedStep.form.options={picture:null,level:2}),t.next=150;break;case 85:if("memory"!==e.options.type.code){t.next=89;break}if(!e.selectedStep.form.options.hasOwnProperty("items")){for(p=[],f=0;f<8;f++)p.push({imagePath:null,single:!1});e.$set(e.selectedStep.form.options,"items",p)}t.next=150;break;case 89:if("portrait-robot"!==e.options.type.code){t.next=93;break}e.selectedStep.form.answers.hasOwnProperty("items")||e.$set(e.selectedStep.form.answers,"items",{type:1,face:1,eye:1,mouth:1,nose:1,hair:1,beard:1,glass:1,hat:1}),t.next=150;break;case 93:if("phone-call"!==e.options.type.code){t.next=97;break}e.selectedStep.form.options.hasOwnProperty("number")||e.$set(e.selectedStep.form.options,"number","000000000"),t.next=150;break;case 97:if("geolocation"!==e.options.type.code){t.next=103;break}e.selectedStep.form.options.hasOwnProperty("distance")||e.$set(e.selectedStep.form.options,"distance","20"),e.selectedStep.form.options.hasOwnProperty("showHelp")||e.$set(e.selectedStep.form.options,"showHelp",!0),e.selectedStep.form.options.hasOwnProperty("locations")||e.$set(e.selectedStep.form.options,"locations",[{lat:"",lng:"",destination:""}]),t.next=150;break;case 103:if("locate-item-ar"!==e.options.type.code){t.next=120;break}for(m in e.selectedStep.form.options.hasOwnProperty("picture")||e.$set(e.selectedStep.form.options,"picture",null),e.selectedStep.form.options.hasOwnProperty("objectSize")||e.$set(e.selectedStep.form.options,"objectSize",1),e.selectedStep.form.options.hasOwnProperty("is3D")||e.$set(e.selectedStep.form.options,"is3D",!1),Kr)e.config.locateItem.selectModel3DOptions.push({label:Kr[m].name[e.$store.state.user.language],value:m});if(e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),!e.selectedStep.form.options.is3D){t.next=118;break}if(!e.selectedStep.form.options.customModel){t.next=116;break}return t.next=114,e.displayARObject(e.selectedStep.form.options.customModel,e.questId);case 114:t.next=118;break;case 116:return t.next=118,e.displayARObject(e.selectedStep.form.options.model);case 118:t.next=150;break;case 120:if("locate-marker"!==e.options.type.code){t.next=149;break}for("string"!==typeof e.selectedStep.form.answers&&e.$set(e.selectedStep.form,"answers",Jr[0]),h=!0,b=!1,g=void 0,t.prev=125,v=oi[Symbol.iterator]();!(h=(w=v.next()).done);h=!0)k=w.value,e.config.locateMarker.layersForMarkersOptions.push({label:e.$t("layersForMarkers."+k.label),value:k.code});t.next=133;break;case 129:t.prev=129,t.t0=t["catch"](125),b=!0,g=t.t0;case 133:t.prev=133,t.prev=134,h||null==v.return||v.return();case 136:if(t.prev=136,!b){t.next=139;break}throw g;case 139:return t.finish(136);case 140:return t.finish(133);case 141:for(y in e.config.locateMarker.layersForMarkersOptions=e.config.locateMarker.layersForMarkersOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("layerCode")||e.$set(e.selectedStep.form.options,"layerCode",oi[0].code),Kr)e.config.locateItem.selectModel3DOptions.push({label:Kr[y].name[e.$store.state.user.language],value:y});e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","scan"),t.next=150;break;case 149:"wait-for-event"!==e.options.type.code&&"trigger-event"!==e.options.type.code||(e.selectedStep.form.options.hasOwnProperty("protocol")||e.$set(e.selectedStep.form.options,"protocol","bluetooth"),e.selectedStep.form.options.hasOwnProperty("object")||("wait-for-event"===e.options.type.code?e.$set(e.selectedStep.form.options,"object","distance"):e.$set(e.selectedStep.form.options,"object","lcd"),e.updateIotStepOptions()),"trigger-event"!==e.options.type.code||e.selectedStep.form.options.hasOwnProperty("triggerMode")||e.$set(e.selectedStep.form.options,"triggerMode","auto"));case 150:return e.originalStepData=et.clone(e.selectedStep.form),t.next=153,e.changeNewConditionType();case 153:case"end":return t.stop()}}),t,null,[[125,129,133,141],[134,,136,140]])})))()},submitStep:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o,l,c,u;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$v.selectedStep.form.$touch(),!t.$v.selectedStep.form.$error){r.next=4;break}return ft(t.$t("label.StepSettingsFormError"),"error"),r.abrupt("return");case 4:if("choose"===t.options.type.code&&"text"===t.config.choose.answerType){for(a=0;a<t.selectedStep.form.options.items.length;a++)t.selectedStep.form.options&&t.selectedStep.form.options.items&&t.selectedStep.form.options.items[a]&&t.selectedStep.form.options.items[a].textLanguage?t.selectedStep.form.options.items[a].textLanguage[t.lang]=t.selectedStep.form.options.items[a].text:(s={},s[t.lang]=t.selectedStep.form.options.items[a].text,t.selectedStep.form.options.items[a].textLanguage=s);t.selectedStep.form.options.items=t.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}return"character"===t.options.type.code&&(t.selectedStep.form.options.character||(t.selectedStep.form.options.character="1")),"code-keypad"===t.options.type.code&&(t.selectedStep.form.options.codeLength=t.selectedStep.form.answers.length),"code-color"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|"),t.selectedStep.form.options.colors=t.config.colorCode.colorsForCode),"code-image"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|")),"jigsaw-puzzle"===t.options.type.code&&(n=parseInt(t.selectedStep.form.options.level,10),o=t.config.jigsaw.nbPiecesByLevel[n],l=et.buildIncrementalArray(Math.pow(o,2)),l=et.shuffle(l),t.selectedStep.form.answers=l.join("|")),"memory"===t.options.type.code&&Array.isArray(t.selectedStep.form.options.items)&&t.selectedStep.form.options.items.length>0&&(t.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),t.selectedStep.form.options.lastIsSingle&&(t.selectedStep.form.options.items[t.selectedStep.form.options.items.length-1].single=!0)),t.options.type.code,t.options.type.code,"use-item"===t.options.type.code&&(t.selectedStep.form.answers={coordinates:t.selectedStep.form.answerPointerCoordinates,item:t.selectedStep.form.answerItem}),"new-item"===t.options.type.code&&(t.selectedStep.form.options.titles||(t.selectedStep.form.options.titles={}),t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures||(t.selectedStep.form.options.pictures={}),t.selectedStep.form.options.pictures[t.lang]||(t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture)),c=Object.assign(t.selectedStep.form,{questId:t.questId,version:t.quest.version,chapterId:t.options.chapterId,type:t.options.type.code}),t.$q.loading.show(),r.next=19,Cr.save(c);case 19:u=r.sent,t.$q.loading.hide(),!0===e?u&&u.data&&u.data.stepId?(c.id=u.data.stepId,c.stepId=u.data.stepId,t.$emit("change",c)):ft(t.$t("label.TechnicalIssue"),"error"):!1===e&&(ft(t.$t("label.StepSaved"),"success"),t.$emit("close"));case 22:case"end":return r.stop()}}),r)})))()},addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?ft(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?ft(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.config.imageCode.maxNbAnswers?ft(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.imageCode.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?ft(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},deleteCodeAnswer:function(e){if(this.selectedStep.form.options.images.length<=this.config.choose.minNbAnswers)ft(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options.images.splice(e,1)}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("#FF0000")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},changePortraitPart:function(e){this.selectedStep.form.answers.items&&(o["a"].set(this.selectedStep.form.answers.items,e,this.selectedStep.form.answers.items[e]+1),this.selectedStep.form.answers.items[e]>this.config.portrait[e].number&&o["a"].set(this.selectedStep.form.answers.items,e,1))},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.formatedConditions.length=0,r=0;case 2:if(!(r<e.selectedStep.form.conditions.length)){t.next=13;break}if(a=e.selectedStep.form.conditions[r],s=a.split("_"),"stepDone"!==s[0]&&"stepSuccess"!==s[0]&&"stepFail"!==s[0]){t.next=10;break}return t.next=8,Cr.getById(s[1],e.quest.version,"all");case 8:n=t.sent,n&&n.data&&n.data.hasOwnProperty("title")&&(o=n.data.title[e.lang]?n.data.title[e.lang]:n.data.title[Object.keys(n.data.title)[0]],"stepDone"===s[0]&&e.selectedStep.formatedConditions.push(e.$t("label.FollowStep")+" <i>"+o+"</i>"),"stepSuccess"===s[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepSuccess")+" <i>"+o+"</i>"),"stepFail"===s[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepFail")+" <i>"+o+"</i>"));case 10:r++,t.next=2;break;case 13:case"end":return t.stop()}}),t)})))()},deleteCondition:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.selectedStep.form.conditions.splice(e,1),t.selectedStep.formatedConditions.splice(e,1);case 2:case"end":return r.stop()}}),r)})))()},changeNewConditionType:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedStep.newCondition.values.length=0,r=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","jigsaw-puzzle","memory"],"stepDone"!==e.selectedStep.newCondition.selectedType&&"stepSuccess"!==e.selectedStep.newCondition.selectedType&&"stepFail"!==e.selectedStep.newCondition.selectedType){t.next=7;break}return t.next=5,Cr.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 5:if(a=t.sent,a&&a.data&&a.data.length>0)for(s=0;s<a.data.length;s++)a.data[s].stepId.toString()!==e.stepId.toString()&&("stepDone"!==e.selectedStep.newCondition.selectedType&&-1===r.indexOf(a.data[s].type)||(n=a.data[s].title[e.lang]?a.data[s].title[e.lang]:a.data[s].title[Object.keys(a.data[s].title)[0]],e.selectedStep.newCondition.values.push({label:n,value:a.data[s].stepId})));case 7:case"end":return t.stop()}}),t)})))()},saveNewCondition:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""!==e.selectedStep.newCondition.selectedType&&""!==e.selectedStep.newCondition.selectedValue&&("stepDone"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepDone_"+e.selectedStep.newCondition.selectedValue),"stepSuccess"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepSuccess_"+e.selectedStep.newCondition.selectedValue),"stepFail"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepFail_"+e.selectedStep.newCondition.selectedValue)),e.getUnderstandableConditions(),t.next=4,e.resetNewConditionForm();case 4:e.selectedStep.newConditionForm=!1;case 5:case"end":return t.stop()}}),t)})))()},resetNewConditionForm:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.newCondition.selectedType="stepDone",t.next=3,e.changeNewConditionType();case 3:e.selectedStep.newCondition.selectedValue="";case 4:case"end":return t.stop()}}),t)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},uploadBackgroundImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadBackgroundImage(t.questId,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.selectedStep.form.backgroundImage=n.data.file,t.displayBackgroundImageSize(t.selectedStep.form.backgroundImage)):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},displayBackgroundImageSize:function(e){this.media.isSimulated=!0,this.media.simulationPicture=this.serverUrl+"/upload/quest/"+this.questId+"/step/background/"+e},resetBackgroundImage:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.backgroundImage=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="");case 3:case"end":return t.stop()}}),t)})))()},uploadVideo:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("video",a[0]),r.next=8,Cr.uploadVideo(t.questId,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?t.selectedStep.form.videoStream=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadImageToRecognize:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadImageToRecognize(t.questId,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?t.selectedStep.form.answers=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadAnswerImage:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return r.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,Cr.uploadAnswerImage(r.questId,n);case 8:o=a.sent,o&&o.hasOwnProperty("data")?o.data.file?r.selectedStep.form.options.items[e].imagePath=o.data.file:o.data.message&&"Error: File too large"===o.data.message?ft(r.$t("label.FileTooLarge"),"error"):ft(r.$t("label.UnknowUploadError"),"error"):ft(r.$t("label.ErrorStandardMessage"),"error"),r.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadMemoryImage:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return r.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,Cr.uploadMemoryImage(r.questId,n);case 8:o=a.sent,o&&o.hasOwnProperty("data")?o.data.file?r.selectedStep.form.options.items[e].imagePath=o.data.file:o.data.message&&"Error: File too large"===o.data.message?ft(r.$t("label.FileTooLarge"),"error"):ft(r.$t("label.UnknowUploadError"),"error"):ft(r.$t("label.ErrorStandardMessage"),"error"),r.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?ft(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return r.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,Cr.uploadCodeAnswerImage(r.questId,n);case 8:o=a.sent,o&&o.hasOwnProperty("data")?o.data.file?r.selectedStep.form.options.images[e].imagePath=o.data.file:o.data.message&&"Error: File too large"===o.data.message?ft(r.$t("label.FileTooLarge"),"error"):ft(r.$t("label.UnknowUploadError"),"error"):ft(r.$t("label.ErrorStandardMessage"),"error"),r.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadPuzzleImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadPuzzleImage(t.questId,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?t.selectedStep.form.options.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadItemImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadItemImage(t.questId,t.options.type.code,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.selectedStep.form.options.picture=n.data.file,t.selectedStep.form.options.pictures&&(t.selectedStep.form.options.pictures[t.lang]=n.data.file)):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadItemObject:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadItemObject(t.questId,t.options.type.code,s);case 8:if(n=r.sent,!n||!n.hasOwnProperty("data")){r.next=19;break}if(!n.data.file){r.next=16;break}return t.selectedStep.form.options.customModel=n.data.file,r.next=14,t.displayARObject(t.selectedStep.form.options.customModel,t.questId);case 14:r.next=17;break;case 16:n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error");case 17:r.next=20;break;case 19:ft(t.$t("label.ErrorStandardMessage"),"error");case 20:t.$q.loading.hide();case 21:case"end":return r.stop()}}),r)})))()},changeObjectInList:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.form.options.customModel=null,t.next=3,e.displayARObject(e.selectedStep.form.options.model);case 3:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadCharacterImage(t.questId,t.options.type.code,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?o["a"].set(t.selectedStep.form.options,"character",n.data.file):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadAlternativeImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return t.$q.loading.show(),s=new FormData,s.append("image",a[0]),r.next=8,Cr.uploadAlternativeImage(t.questId,t.options.type.code,s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?o["a"].set(t.selectedStep.form.options,"altFile",n.data.file):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},loadAndPrepare3DModel:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l,c;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r.$q.loading.show(),a.next=4,r.ModelLoaderAsync(e,t);case 4:s=a.sent,r.$q.loading.hide(),a.next=13;break;case 8:return a.prev=8,a.t0=a["catch"](0),console.error("Error while loading 3D model:",a.t0),ft(r.$t("label.CouldNotDisplayObject"),"error"),a.abrupt("return");case 13:return n=s.scene,o=(new Je["Box3"]).setFromObject(n),l=o.getCenter(new Je["Vector3"]),l.multiplyScalar(-1),c=new Je["Object3D"],n.applyMatrix((new Je["Matrix4"]).makeTranslation(l.x,l.y,l.z)),c.add(n),c.up=new Je["Vector3"](0,0,1),n=c,n.rotation.z=Math.PI/4,a.abrupt("return",{object:n,animations:s.animations});case 24:case"end":return a.stop()}}),a,null,[[0,8]])})))()},ModelLoaderAsync:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=console.log,a.abrupt("return",new Promise((function(a,i){var n=new ha.a;-1!==e.indexOf("blob:")?n.load(e,a,s,i):t?n.load(r.serverUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",a,s,i):n.load(r.serverUrl+"/statics/3d-models/"+e+".glb",a,s,i)})));case 2:case"end":return a.stop()}}),a)})))()},displayARObject:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==r.config.locateItem.object){a.next=5;break}s=r,r.$nextTick(n()(i.a.mark((function r(){var a,n,o,l;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=document.getElementById("target-canvas"),a){r.next=3;break}throw new Error("missing 3D canvas");case 3:return s.config.locateItem.scene=new Je["Scene"],n=new Je["PerspectiveCamera"](70,1.333,.001,1e3),n.up=new Je["Vector3"](0,0,1),n.rotation.x=Math.PI/2,n.lookAt(new Je["Vector3"](0,0,0)),s.config.locateItem.camera=n,o=new Je["WebGLRenderer"]({alpha:!0,antialias:!0}),a.appendChild(o.domElement),s.config.locateItem.renderer=o,s.config.locateItem.renderer.setSize(Math.round(a.clientWidth),Math.round(.8*a.clientWidth)),s.config.locateItem.renderer.gammaOutput=!0,s.config.locateItem.controls=new ci.a(n,o.domElement),l=new Je["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),s.config.locateItem.scene.add(l),s.config.locateItem.scene.add(new Je["AmbientLight"](11579568)),r.next=21,s.displayARObjectEnd(e,t);case 21:s.animateModelPreview();case 22:case"end":return r.stop()}}),r)})))),a.next=9;break;case 5:return o=r.config.locateItem.scene.getObjectByName(ui),r.config.locateItem.scene.remove(o),a.next=9,r.displayARObjectEnd(e,t);case 9:case"end":return a.stop()}}),a)})))()},displayARObjectEnd:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o,l;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.loadAndPrepare3DModel(e,t);case 2:s=a.sent,n=s.object,n.up=new Je["Vector3"](0,0,1),n.visible=!0,n.name=ui,r.config.locateItem.scene.add(n),o=(new Je["Box3"]).setFromObject(n),l=new Je["Vector3"],o.getSize(l),r.config.locateItem.zoom=1.5*Math.max(l.x,l.y,l.z),r.config.locateItem.camera.position.set(0,-r.config.locateItem.zoom,0),r.config.locateItem.controls.update(),r.config.locateItem.object=n;case 15:case"end":return a.stop()}}),a)})))()},animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.changeObjectInList();case 2:case"end":return t.stop()}}),t)})))()},selectObject:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.selectedStep.form.options.title=t.objectsList[e].name[t.lang],t.selectedStep.form.options.picture="statics/images/object/"+t.objectsList[e].file,t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture;case 4:case"end":return r.stop()}}),r)})))()},getColorsForCodeOptions:function(){var e=this,t=[];return Gr.forEach((function(r){t.push({value:r.value,label:e.$t("color."+r.label)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},deleteColor:function(e){this.config.colorCode.colorsForCode.splice(e,1)},addColor:function(){this.config.colorCode.colorsForCode.push({value:this.config.colorCode.newColor.value,label:this.config.colorCode.newColor.label}),this.config.colorCode.newColor={label:"",value:""}},removeHint:function(e){this.selectedStep.form.hint[this.lang].splice(e,1),this.$forceUpdate()},updateHint:function(e){var t=this;this.$q.dialog({dark:!0,message:this.$t("label.ModifyTheHint"),prompt:{model:this.selectedStep.form.hint[this.lang][e],type:"text"},cancel:!0}).onOk(function(){var r=n()(i.a.mark((function r(a){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.selectedStep.form.hint[t.lang][e]=a,t.$forceUpdate();case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).onCancel((function(){}))},addHint:function(){this.selectedStep.form.hint&&this.selectedStep.form.hint[this.lang]||(this.selectedStep.form.hint||(this.selectedStep.form.hint={}),this.selectedStep.form.hint[this.lang]=[]),this.selectedStep.form.hint[this.lang].push(this.newHint),this.newHint=""},getQuestItemsAsOptions:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Cr.listWonObjects(e.questId,e.stepId,e.quest.version);case 2:r=t.sent,r&&r.data?(e.questItems=r.data,a=[],e.questItems.forEach((function(e){a.push({value:e.picture,label:e.title})})),a.sort((function(e,t){return e.label>t.label?1:-1})),e.config.useItem.questItemsAsOptions=a):ft(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,i=this.getUseItemPictureWidth();this.selectedStep.form.answerPointerCoordinates.left=Math.round(100*r/i),this.selectedStep.form.answerPointerCoordinates.top=Math.round(75*a/i),this.positionUseItemPointer()},getClickCoordinatesFindItem:function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,i=this.getFindItemPictureWidth();this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].left=Math.round(100*r/i),this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].top=Math.round(75*a/i),this.positionFindItemPointer()},positionFindItemPointer:function(){for(var e=this.getFindItemPictureWidth()/100,t=this.config.findItem.crossSize/2,r=0;r<4;r++)document.getElementById("cross"+r)&&(r<this.selectedStep.form.options.nbAreas?(document.getElementById("cross"+r).style.display="block",document.getElementById("cross"+r).style.left=Math.round(this.selectedStep.form.options.coordinates[r].left*e-t)+"px",document.getElementById("cross"+r).style.top=Math.round(this.selectedStep.form.options.coordinates[r].top*(4*e/3)-t)+"px"):document.getElementById("cross"+r).style.display="none")},getFindItemPictureWidth:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},initFindItemElements:function(){this.config.findItem.imageWidth=this.getFindItemPictureWidth(),this.config.findItem.crossSize=this.config.findItem.imageWidth/8,this.config.findItem.imageHeight=4*this.config.findItem.imageWidth/3},getUseItemPictureWidth:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},initUseItemElements:function(){this.config.useItem.imageWidth=this.getUseItemPictureWidth(),this.config.useItem.crossSize=this.config.useItem.imageWidth/8,this.config.useItem.imageHeight=4*this.config.useItem.imageWidth/3},positionUseItemPointer:function(){var e=this.getUseItemPictureWidth()/100,t=this.config.useItem.crossSize/2;document.getElementById("cross").style.left=Math.round(this.selectedStep.form.answerPointerCoordinates.left*e-t)+"px",document.getElementById("cross").style.top=Math.round(this.selectedStep.form.answerPointerCoordinates.top*(4*e/3)-t)+"px"},setLocation:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:-1!==t.config.geolocation.currentIndex&&t.selectedStep.form.options.locations&&t.selectedStep.form.options.locations.length>0?(t.selectedStep.form.options.locations[t.config.geolocation.currentIndex].lat=parseFloat(e.geometry.location.lat()),t.selectedStep.form.options.locations[t.config.geolocation.currentIndex].lng=parseFloat(e.geometry.location.lng()),t.selectedStep.form.options.locations[t.config.geolocation.currentIndex].destination=e.formatted_address||""):(t.selectedStep.form.options.lat=parseFloat(e.geometry.location.lat()),t.selectedStep.form.options.lng=parseFloat(e.geometry.location.lng()),t.selectedStep.form.options.destination=e.formatted_address||"",t.$v.selectedStep.form.options.lat.$touch(),t.$v.selectedStep.form.options.lng.$touch());case 1:case"end":return r.stop()}}),r)})))()},getCurrentLocation:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.config.geolocation.currentIndex=e,t.$q.loading.show(),navigator.geolocation.getCurrentPosition(t.fillLocation,t.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return r.stop()}}),r)})))()},getLocationError:function(e){this.$q.loading.hide(),console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")})},fillLocation:function(e){var t=this;-1!==this.config.geolocation.currentIndex&&this.selectedStep.form.options.locations&&this.selectedStep.form.options.locations.length>0?(this.selectedStep.form.options.locations[this.config.geolocation.currentIndex].lat=e.coords.latitude,this.selectedStep.form.options.locations[this.config.geolocation.currentIndex].lng=e.coords.longitude):(this.selectedStep.form.options.lat=e.coords.latitude,this.selectedStep.form.options.lng=e.coords.longitude,this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch());var r=new google.maps.Geocoder;r.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,r){t.$q.loading.hide(),"OK"===r&&e[0].formatted_address?-1!==t.config.geolocation.currentIndex&&t.selectedStep.form.options.locations&&t.selectedStep.form.options.locations.length>0?(t.selectedStep.form.options.locations[t.config.geolocation.currentIndex].destination=e[0].formatted_address,document.getElementById("destination"+t.config.geolocation.currentIndex).value=t.selectedStep.form.options.destination):(t.selectedStep.form.options.destination=e[0].formatted_address,document.getElementById("destination").value=t.selectedStep.form.options.destination):ft(t.$t("label.ErrorStandardMessage"),"error")}))},getMyGPSLocation:function(e){this.$q.loading.show();var t=this;navigator.geolocation.getCurrentPosition((function(r){-1!==e&&t.selectedStep.form.options.locations&&t.selectedStep.form.options.locations.length>0?(t.$set(t.selectedStep.form.options.locations[e],"lat",r.coords.latitude),t.$set(t.selectedStep.form.options.locations[e],"lng",r.coords.longitude)):(t.$set(t.selectedStep.form.options,"lat",r.coords.latitude),t.$set(t.selectedStep.form.options,"lng",r.coords.longitude),t.$v.selectedStep.form.options.lat.$touch(),t.$v.selectedStep.form.options.lng.$touch()),t.$q.loading.hide()}),this.getLocationError,{timeout:5e3,maximumAge:1e4})},addGPSLocation:function(){this.selectedStep.form.options.locations?this.selectedStep.form.options.locations.push({lat:"",lng:"",destination:""}):this.selectedStep.form.options.locations=[{lat:"",lng:"",destination:""}]},checkMainTextLength:function(e){var t=11,r=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=r&&(e.match(/\n/g)||[]).length<=t},addWriteTextAnswer:function(){this.selectedStep.form.answers.push("")},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){si()(this.originalStepData)!==si()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,r=!1,a=void 0;try{for(var i,s=ea[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var n=i.value;if(n.code===e)return n}}catch(o){r=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},showMedia:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia("background");case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},selectMedia:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.selectedStep.form.backgroundImage=t.media.items[e].file,t.hideMedia();case 2:case"end":return r.stop()}}),r)})))()},loadMedia:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.listMedia(t.quest.questId,t.quest.version,e);case 2:a=r.sent,a&&a.data&&(t.media.items=a.data);case 4:case"end":return r.stop()}}),r)})))()},hideMedia:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.media.isOpened=!1,e.media.isSimulated=!1,"use-item"===e.options.type.code&&et.setTimeout(e.initUseItemElements,2e3),"find-item"===e.options.type.code&&et.setTimeout(e.initFindItemElements,2e3);case 4:case"end":return t.stop()}}),t)})))()},getIotObjectsAsOptions:function(e){var t=this;if(!["wait-for-event","trigger-event"].includes(e))throw new Error("Unsupported step type: "+e);var r=[];return Xr.forEach((function(a){a.step===e&&r.push({value:a.code,label:t.$t("iotObjects."+a.code)})})),r.sort((function(e,t){return e.label>t.label?1:-1})),r},updateIotStepOptions:function(){for(var e=["range","rangeX","rangeY","message","answer"],t=1;t<=3;t++)e.push("range"+t);for(var r=0,a=e;r<a.length;r++){var i=a[r];delete this.selectedStep.form.options[i]}switch(this.selectedStep.form.options.object){case"keypad":this.$set(this.selectedStep.form.options,"answer","");break;case"joystick":this.$set(this.selectedStep.form.options,"rangeX",{min:100,max:200}),this.$set(this.selectedStep.form.options,"rangeY",{min:100,max:200});break;case"distance":this.$set(this.selectedStep.form.options,"range",{min:50,max:150});break;case"pot":for(var s=1;s<=3;s++)this.$set(this.selectedStep.form.options,"range"+s,{min:100,max:200});break;case"escapebox":break;case"lcd":this.$set(this.selectedStep.form.options,"message","");break;case"buzzer":this.$set(this.selectedStep.form.options,"duration",1e3),this.$set(this.selectedStep.form.options,"frequency",440);break;case"chest":break;case"relay":break;default:throw new Error("unknown IoT object code '"+this.selectedStep.form.options.object+"'")}},activateCountDown:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,!0===e&&t.$q.dialog({dark:!0,message:t.$t("label.CountDownWarning"),ok:!0,cancel:!0}).onCancel(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.selectedStep.form.countDownTime.enabled=!1;case 1:case"end":return e.stop()}}),e)}))));case 2:case"end":return r.stop()}}),r)})))()},selectFindItemArea:function(e){for(var t=0;t<this.selectedStep.form.options.nbAreas;t++)document.getElementById("cross"+t)&&(document.getElementById("cross"+t).style.opacity=.5);document.getElementById("cross"+e)&&(document.getElementById("cross"+e).style.opacity=1),this.config.findItem.currentArea=e},changeNbAreas:function(){if(this.selectedStep.form.options&&this.selectedStep.form.options.coordinates)if(this.selectedStep.form.options.coordinates.length<this.selectedStep.form.options.nbAreas){for(var e=this.selectedStep.form.options.coordinates.length;e<this.selectedStep.form.options.nbAreas;e++)this.selectedStep.form.options.coordinates.push({top:50,left:50});this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1,this.selectFindItemArea(this.config.findItem.currentArea-1)}else this.selectedStep.form.options.coordinates.length=this.selectedStep.form.options.nbAreas,this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1;return this.positionFindItemPointer(),!0}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:Wt["required"]},e.text[this.lang]={function:function(e){return this.checkMainTextLength(e)}},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:Wt["required"]},imagePath:{}}:{text:{},imagePath:{required:Wt["required"]}}}};break;case"code-keypad":e.answers={required:Wt["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:Wt["required"]};break;case"geolocation":break;case"info-video":e.videoStream={required:Wt["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:Wt["required"]}};break;case"new-item":e.options={picture:{required:Wt["required"]},title:{required:Wt["required"]}};break;case"character":e.options={character:{required:Wt["required"]}};break;case"use-item":e.backgroundImage={required:Wt["required"]},e.answerItem={required:Wt["required"]};break;case"write-text":e.answers={required:Wt["required"]};break;case"locate-item-ar":e.options={lat:{required:Wt["required"]},lng:{required:Wt["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:Wt["required"]}:e.options.picture={required:Wt["required"]};break;case"touch-object-on-marker":e.options={model:{required:Wt["required"]}};break;case"wait-for-event":e.options={protocol:{required:Wt["required"]},object:{required:Wt["required"]}};break}return{selectedStep:{form:e}}}},pi=di,fi=(r("5b1e"),r("b650"),Object(ye["a"])(pi,ri,ai,!1,null,"436ba520",null)),mi=fi.exports,hi=r("fb4c"),bi=r("534a"),gi=r("e18e");o["a"].directive("sortable",{inserted:function(e,t){return new xa.a(e,t.value||{})}});var vi={components:{stepSettings:mi,stepPlay:_a,story:pa},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},form:{fields:{title:{},category:"",priceForPlayer:"",tierPriceForPlayer:"",premiumPrice:{},playersNumber:1,description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,town:"",country:"",zipcode:"",editorMode:"simple",customization:{audio:"",color:"",logo:"",character:"",removeScoring:!1,endMessage:"",font:"standard",qrCodeMessage:{fr:"",en:""}},rewardPicture:"",readMoreLink:"",limitNumberOfPlayer:0,scheduling:[],forcePlayerToHaveAccount:!1,shareUserDataWithCreator:!1,countDownTime:{enabled:!1,time:0}},categories:et.buildOptionsForSelect(hi,{valueField:"id",labelField:"name"},this.$t),languages:et.buildOptionsForSelect(gi,{valueField:"code",labelField:"name"},this.$t),levels:et.buildOptionsForSelect(bi,{valueField:"id",labelField:"name"},this.$t),prices:[{label:"0,99 €",value:"premiumprice1"},{label:"1,99 €",value:"premiumprice2"},{label:"2,99 €",value:"premiumprice3"},{label:"4,99 €",value:"premiumprice5"},{label:"9,99 €",value:"premiumprice10"},{label:"14,99 €",value:"premiumprice15"},{label:"19,99 €",value:"premiumprice20"}],fonts:[{label:"Standard",value:"standard",class:"font-standard"},{label:"Arial",value:"arial",class:"font-arial"},{label:"Garamond",value:"garamond",class:"font-garamond"},{label:"Courrier New",value:"courrier",class:"font-courrier"},{label:"Brush script",value:"brush",class:"font-brush"}],players:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],times:[{label:"00h",value:0},{label:"01h",value:1},{label:"02h",value:2},{label:"03h",value:3},{label:"04h",value:4},{label:"05h",value:5},{label:"06h",value:6},{label:"07h",value:7},{label:"08h",value:8},{label:"09h",value:9},{label:"10h",value:10},{label:"11h",value:11},{label:"12h",value:12},{label:"13h",value:13},{label:"14h",value:14},{label:"15h",value:15},{label:"16h",value:16},{label:"17h",value:17},{label:"18h",value:18},{label:"19h",value:19},{label:"20h",value:20},{label:"21h",value:21},{label:"22h",value:22},{label:"23h",value:23},{label:"24h",value:24}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120},{label:"240 "+this.$t("label.minutes"),value:240},{label:this.$t("label.DoNotDisplay"),value:999}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[]},selectedItem:null,hint:{isOpened:!1,label:"",number:0},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],payments:[],statistics:[],canMoveNextStep:!1,canPass:!1,showPaymentBox:!1,showTierPaymentBox:!1,storage:"",itemUsed:null,isIOs:et.isIOS(),serverUrl:"https://api.graaly.com",pictureUploadURL:this.serverUrl+"/quest/picture/upload",titleMaxLength:50,isHybrid:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:et.clearAllRunningProcesses(),e.$route.params.questId&&""!==e.$route.params.questId?("undefined"!==typeof window.cordova&&(e.isHybrid=!0),e.loadQuestData()):e.$router.push("/quest/create/welcome");case 2:case"end":return t.stop()}}),t)})))()},methods:{loadQuestData:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.questId=e.$route.params.questId,t.next=3,tt.getLastById(e.questId,"all");case 3:if(r=t.sent,!r||!r.data){t.next=53;break}if(e.quest=r.data,"draft"!==e.quest.status&&(e.readOnly=!0),e.editor.initMode=e.quest.editorMode,e.quest.languages&&e.quest.languages.length>0&&"fr"===e.languages.current)for(e.languages.current=e.quest.languages[0].lang,a=0;a<e.quest.languages.length;a++)e.languages.available.push({label:e.$t("language."+e.quest.languages[a].lang),value:e.quest.languages[a].lang});return e.quest.description[e.languages.current]&&""!==e.quest.description[e.languages.current]||(e.quest.description[e.languages.current]=e.quest.description[e.quest.mainLanguage]),e.form.fields.questId=e.quest.questId,e.quest.title&&Object.keys(e.quest.title).length>0?e.form.fields.title=e.quest.title:(e.form.fields.title={},e.form.fields.title[e.languages.current]="-"),e.form.fields.description=e.quest.description,e.form.fields.category=e.quest.category,e.form.fields.location=e.quest.location,e.form.fields.languages=e.quest.languages,e.form.fields.mainLanguage=e.quest.mainLanguage,e.form.fields.level=e.quest.level,e.form.fields.duration=e.quest.duration,e.form.fields.picture=e.quest.picture,e.form.fields.thumb=e.quest.thumb,e.form.fields.editorMode=e.quest.editorMode,e.form.fields.customization=e.quest.customization,e.form.fields.rewardPicture=e.quest.rewardPicture,e.form.fields.readMoreLink=e.quest.readMoreLink,e.form.fields.limitNumberOfPlayer=e.quest.limitNumberOfPlayer,e.form.fields.scheduling=e.quest.scheduling,e.form.fields.forcePlayerToHaveAccount=e.quest.forcePlayerToHaveAccount,e.form.fields.shareUserDataWithCreator=e.quest.shareUserDataWithCreator,e.form.fields.playersNumber=e.quest.playersNumber,e.form.fields.startingPlace=e.form.fields.location.address||"",e.form.fields.zipcode=e.form.fields.location&&e.form.fields.location.zipcode?e.form.fields.location.zipcode:"",e.form.fields.town=e.form.fields.location&&e.form.fields.location.town?e.form.fields.location.town:"",e.form.fields.country=e.form.fields.location&&e.form.fields.location.country?e.form.fields.location.country:"",e.form.fields.countDownTime=e.form.fields.countDownTime,"room"===e.quest.type?e.form.fields.priceForPlayer=e.quest.premiumPrice.manual:"quest"===e.quest.type&&(e.quest.premiumPrice||(e.form.fields.premiumPrice={}),e.quest.premiumPrice.androidId&&(e.form.fields.priceForPlayer=e.quest.premiumPrice.androidId),e.quest.premiumPrice.active?e.showPaymentBox=!0:e.showPaymentBox=!1,e.quest.premiumPrice.tier?(e.form.fields.tierPriceForPlayer=e.quest.premiumPrice.manual,e.showTierPaymentBox=!0):e.showTierPaymentBox=!1),e.form.fields.location.hasOwnProperty("coordinates")&&2===e.form.fields.location.coordinates.length&&(s=e.form.fields.location.coordinates,e.form.fields.location={lng:s[0],lat:s[1]}),e.tabs.progress=e.quest.creationStep,e.tabs.progress<=3&&(e.tabs.selected=e.tabs.list[Math.min(e.tabs.progress,2)]),t.next=41,e.refreshStepsList();case 41:return t.next=43,e.listEditors();case 43:return t.next=45,e.listInvitees();case 45:return t.next=47,e.listReviews();case 47:return t.next=49,e.getStatistics();case 49:e.quest.access&&"private"===e.quest.access&&e.getPrivateRanking(),e.getReadableStorageUsage(),t.next=54;break;case 53:ft(e.$t("label.ErrorStandardMessage"),"error");case 54:case"end":return t.stop()}}),t)})))()},movePremium:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=11;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=11;break}return t.next=4,tt.CheckIfCanBeMovedPremium(e.questId);case 4:if(r=t.sent,!(r&&r.data&&r.data.canBePremium)){t.next=10;break}return t.next=8,tt.MoveToPremium(e.questId);case 8:a=t.sent,a&&a.data&&a.data.status&&"ok"===a.data.status?(e.quest.isPremium=!0,e.quest.size.limit=6e8):ft(e.$t("label.ErrorStandardMessage"),"error");case 10:e.premium.isOpened=!1;case 11:case"end":return t.stop()}}),t)})))()},openPremiumBox:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=7;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=6;break}return t.next=4,tt.CheckIfCanBeMovedPremium(e.questId);case 4:r=t.sent,r&&r.data&&r.data.canBePremium&&(e.premium.canMovePremium=!0);case 6:e.premium.isOpened=!0;case 7:case"end":return t.stop()}}),t)})))()},uploadReward:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("image",a[0]),r.next=8,tt.uploadReward(s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.rewardPicture=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},removeReward:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.rewardPicture=null;case 1:case"end":return t.stop()}}),t)})))()},changeEditorMode:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("advanced"!==e.form.fields.editorMode){t.next=4;break}e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:case"end":return t.stop()}}),t)})))).onCancel(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.editorMode="simple";case 1:case"end":return t.stop()}}),t)})))),t.next=6;break;case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})))()},refreshStepsList:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.stepsMissing=!1,e.$q.loading.show(),t.next=4,Cr.listForAQuest(e.questId,e.quest.version,"all");case 4:if(r=t.sent,!r||!r.data){t.next=80;break}if(e.chapters.items=r.data.chapters,a=r.data.steps,"simple"!==e.form.fields.editorMode){t.next=12;break}e.chapters.items&&e.chapters.items.length>0&&(e.chapters.items[0].steps=a),t.next=66;break;case 12:s=0;case 13:if(!(s<e.chapters.items.length)){t.next=66;break}for(n=!1,o=[],l=[],c=[],u=[],d=0;d<a.length;d++)a[d].chapterId.toString()===e.chapters.items[s].chapterId.toString()&&(e.chapters.items[s].steps||(e.chapters.items[s].steps=[]),"end-chapter"===a[d].type&&(n=!0),c.push(a[d]));for(p=[],d=0;d<c.length;d++)p.push(c[d].stepId.toString());f=[],m=0;case 24:if(!(p.length>0&&m<1e3)){t.next=55;break}m++,d=0;case 27:if(!(d<c.length)){t.next=53;break}if(h=c[d].stepId.toString(),-1!==f.indexOf(h)){t.next=50;break}if(c[d].conditions&&0===c[d].conditions.length&&(f.unshift(h),p.splice(p.indexOf(h),1),o.push(c[d].title[e.languages.current])),!(c[d].conditions&&c[d].conditions.length>0)){t.next=50;break}b=0,g=0;case 34:if(!(g<c[d].conditions.length)){t.next=48;break}if(v=c[d].conditions[g].replace("stepDone_",""),v=v.replace("stepSuccess_",""),v=v.replace("stepFail_",""),-1!==f.indexOf(v)){t.next=43;break}return-1===p.indexOf(v)&&(l.push(h),p.splice(p.indexOf(h),1),f.push(h)),t.abrupt("continue",50);case 43:w=f.indexOf(v),w>b&&(b=w);case 45:g++,t.next=34;break;case 48:f.length>=b?f.splice(b+1,0,h):f.push(h),p.splice(p.indexOf(h),1);case 50:d++,t.next=27;break;case 53:t.next=24;break;case 55:for(d=0;d<f.length;d++)for(g=0;g<c.length;g++)f[d]===c[g].stepId.toString()&&(-1!==l.indexOf(c[g].stepId.toString())&&(c[g].error="FollowingStepsHaveInvalidCondition"),0===d||0===c[g].conditions.length||c[g].conditions.length>1||"locate-marker"===c[g].type?c[g].level=1:c[g].level=2,e.chapters.items[s].steps.push(c[g]));for(k=!1,g=0;g<c.length;g++){for(k=!1,d=0;d<f.length;d++)f[d]===c[g].stepId.toString()&&(k=!0);k||(c[g].error="FollowingStepsHaveInvalidCondition",c[g].level=1,e.chapters.items[s].steps.push(c[g]))}e.chapters.items[s].warnings=[],n||e.chapters.items[s].warnings.push({noEndOfChapter:!0}),o.length>1&&e.chapters.items[s].warnings.push({moreThan1StepWithNoCondition:o}),u.length>0&&e.chapters.items[s].warnings.push({stepsWithMissingParent:u}),l.length>0&&e.chapters.items[s].warnings.push({stepWithNoParent:l});case 63:s++,t.next=13;break;case 66:a&&a.length>0&&e.tabs.progress<2&&(e.tabs.progress=2),y=!1,_=0;case 69:if(!(_<a.length)){t.next=77;break}if(S=a[_],"locate-marker"!==S.type){t.next=74;break}return y=!0,t.abrupt("break",77);case 74:_++,t.next=69;break;case 77:e.quest.hasLocateMarkerSteps=y,t.next=81;break;case 80:e.warnings.stepsMissing=!0;case 81:e.$q.loading.hide();case 82:case"end":return t.stop()}}),t)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",r=0;r<e.length;r++)if(e[r].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[r].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[r].moreThan1StepWithNoCondition.join(", ")+". "),e[r].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[r].hasOwnProperty("stepsWithMissingParent")){for(var a in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[r].stepsWithMissingParent)for(var i=0;i<this.chapters.items.length;i++)for(var s=0;s<this.chapters.items[i].steps.length;s++)this.chapters.items[i].steps[s].stepId.toString()===a&&(t+=this.chapters.items[i].steps[s].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("public"!==e.quest.access||0!==e.form.fields.location.lat&&0!==e.form.fields.location.lng){t.next=3;break}return ft(e.$t("label.YouMustDefineStartLocation"),"warning"),t.abrupt("return");case 3:if(e.$v.form.fields.$touch(),e.$v.form.fields.$error){t.next=17;break}return r={languages:[e.form.fields.mainLanguage],version:e.quest.version,type:e.quest.type,location:{type:"Point",coordinates:[e.form.fields.location.lng,e.form.fields.location.lat],town:e.form.fields.town,country:e.form.fields.country,zipcode:e.form.fields.zipcode,address:e.form.fields.startingPlace}},e.form.fields.premiumPrice||(e.form.fields.premiumPrice={}),e.showPaymentBox&&(e.form.fields.premiumPrice.active=!0),e.showTierPaymentBox&&(e.form.fields.premiumPrice.tier=!0),a=Object.assign({},e.form.fields,r),a.questId||(a.questId=e.questId),e.$q.loading.show(),t.next=14,tt.save(a);case 14:s=t.sent,e.$q.loading.hide(),s&&s.data?(e.quest.playersNumber=e.form.fields.playersNumber,e.tabs.progress<1&&("quest"===e.quest.type?(e.tabs.progress=1,e.tabs.selected="steps"):(e.tabs.progress=2,e.tabs.selected="publish")),ft(e.$t("label.QuestSaved"),"info")):ft(e.$t("label.ErrorStandardMessage"),"error");case 17:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n,o;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("image",a[0]),r.next=8,tt.uploadPicture(s);case 8:return n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?t.form.fields.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),r.next=12,tt.uploadThumb(s);case 12:o=r.sent,o&&o.hasOwnProperty("data")?o.data.file?t.form.fields.thumb=o.data.file:o.data.message&&"Error: File too large"===o.data.message&&ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 15:case"end":return r.stop()}}),r)})))()},uploadThumb:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("image",a[0]),r.next=8,tt.uploadThumb(s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?t.form.fields.thumb=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},uploadLogo:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("image",a[0]),r.next=8,tt.uploadLogo(s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.logo=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},removeLogo:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.logo=null;case 1:case"end":return t.stop()}}),t)})))()},uploadAudio:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("audio",a[0]),r.next=8,tt.uploadAudio(s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.audio=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},removeAudio:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.audio=null;case 1:case"end":return t.stop()}}),t)})))()},uploadCharacter:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){r.next=4;break}return r.abrupt("return");case 4:return s=new FormData,s.append("image",a[0]),r.next=8,tt.uploadCharacter(s);case 8:n=r.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.character=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?ft(t.$t("label.FileTooLarge"),"error"):ft(t.$t("label.UnknowUploadError"),"error"):ft(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},removeCharacter:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.character=null;case 1:case"end":return t.stop()}}),t)})))()},startStory:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.countForUser(e.$store.state.user._id);case 2:r=t.sent,r.data&&r.data<2&&(e.story.active=!0,null===e.story.step&&"settings"===e.tabs.selected&&(e.story.step=17));case 4:case"end":return t.stop()}}),t)})))()},getCurrentLocation:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),navigator.geolocation.getCurrentPosition(e.fillLocation,e.getLocationError,{timeout:5e3,maximumAge:1e4});case 2:case"end":return t.stop()}}),t)})))()},getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var r=new google.maps.Geocoder;r.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,r){t.$q.loading.hide(),"OK"===r&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),ft(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.form.fields.location={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},t.form.fields.town=t.getCity(e),t.form.fields.country=t.getCountry(e),t.form.fields.zipcode=t.getZipcode(e),t.form.fields.startingPlace=e.formatted_address||"";case 5:case"end":return r.stop()}}),r)})))()},getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var r=0;r<e.address_components[t].types.length;r++)if("postal_code"===e.address_components[t].types[r])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var r=0;r<e.address_components[t].types.length;r++)if("locality"===e.address_components[t].types[r])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var r=0;r<e.address_components[t].types.length;r++)if("country"===e.address_components[t].types[r])return e.address_components[t].short_name;return""},onChapterListUpdate:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Cr.moveChapter(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=r.sent,a&&t.chapters.items.splice(e.newIndex,0,t.chapters.items.splice(e.oldIndex,1)[0]);case 4:case"end":return r.stop()}}),r)})))()},onStepListUpdate:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Cr.move(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=r.sent,a&&t.chapters.items[0].steps.splice(e.newIndex,0,t.chapters.items[0].steps.splice(e.oldIndex,1)[0]);case 4:case"end":return r.stop()}}),r)})))()},publish:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,o,l;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.checkIfTestable();case 2:if(a=r.sent,!a){r.next=36;break}for(s="unpublish",o=0;o<t.form.fields.languages.length;o++)t.form.fields.languages[o].lang&&t.form.fields.languages[o].lang===e&&t.form.fields.languages[o].published&&(s="publish");if("publish"!==s){r.next=28;break}if("unpublished"!==t.quest.status&&"draft"!==t.quest.status){r.next=21;break}if("private"!==t.quest.access||t.quest.isPremium){r.next=16;break}return t.$q.loading.show(),r.next=12,tt.publish(t.questId,e);case 12:t.$q.loading.hide(),t.quest.status="published",r.next=18;break;case 16:l=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l.$q.loading.show(),t.next=3,tt.publish(l.questId,e);case 3:l.$q.loading.hide(),l.quest.status="tovalidate";case 5:case"end":return t.stop()}}),t)})))).onCancel(n()(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=0;t<l.form.fields.languages.length;t++)l.form.fields.languages[t].published=!1;case 1:case"end":return e.stop()}}),e)}))));case 18:t.readOnly=!0,r.next=25;break;case 21:return t.$q.loading.show(),r.next=24,tt.publish(t.questId,e);case 24:t.$q.loading.hide();case 25:t.tabs.progress=3,r.next=34;break;case 28:return t.$q.loading.show(),r.next=31,tt.unpublish(t.questId,e);case 31:t.$q.loading.hide(),t.quest.status="unpublished",t.tabs.progress=2;case 34:r.next=38;break;case 36:for(ft(t.$t("label.YourQuestContainsErrorsInSteps"),"error"),o=0;o<t.form.fields.languages.length;o++)t.form.fields.languages[o].published=!1;case 38:case"end":return r.stop()}}),r)})))()},isReadOnly:function(){return"disabled"===this.quest.status||"tovalidate"===this.quest.status},unpublish:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="unpublished",e.$q.loading.show(),t.next=4,tt.unpublish(e.questId);case 4:e.$q.loading.hide(),ft(e.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return t.stop()}}),t)})))()},testQuest:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfTestable();case 2:r=t.sent,r&&(e.isHybrid?e.$router.push("/quest/play/"+e.questId):e.$q.dialog({dark:!0,message:e.$t("label.TestWithSimulatorWarning"),ok:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/quest/play/"+e.questId);case 1:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t)})))()},checkIfTestable:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<e.chapters.items.length)){t.next=8;break}if(!(e.chapters.items[r].warnings&&e.chapters.items[r].warnings.length>0)){t.next=5;break}return ft(e.$t("label.YourQuestContainsErrorsInSteps"),"error"),t.abrupt("return",!1);case 5:r++,t.next=1;break;case 8:if(!(e.editor.items&&e.quest.playersNumber&&e.editor.items.length>=e.quest.playersNumber)){t.next=18;break}return t.next=11,_r.closeInProgressRuns(e.questId);case 11:if(!(e.quest.playersNumber>1)){t.next=16;break}return t.next=14,_r.createMultiplayerRunForTesters(e.questId);case 14:if(a=t.sent,a){for(s=[],r=0;r<e.editor.items.length;r++)s.push(e.editor.items[r].name);ft(e.$t("label.HereAreTheTesters",{nameList:s.join(", ")}),"info")}case 16:t.next=20;break;case 18:return ft(e.$t("label.YouNeedAtLeastXEditorsToTest",{nb:e.quest.playersNumber}),"error"),t.abrupt("return",!1);case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})))()},removeQuest:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.remove(r.questId,r.quest.version);case 2:e.$router.push("/home");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},duplicateQuest:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.clone(e.questId,e.quest.version);case 2:r=t.sent,r&&r.data&&r.data.newId&&(a=r.data.newId,s=e,e.$q.dialog({dark:!0,message:e.$t("label.DoYouWantToOpenClonedQuest"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$router.push("/quest/settings/"+a);case 1:case"end":return e.stop()}}),e)})))));case 4:case"end":return t.stop()}}),t)})))()},removeStep:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Cr.remove(a.questId,e,a.quest.version);case 2:return t.next=4,a.refreshStepsList();case 4:case"end":return t.stop()}}),t)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return r.stop()}}),r)})))()},createNewVersion:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.createNewVersion(r.questId);case 2:e.$router.push("/quest/builder/"+r.questId);case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},removeChapter:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,s=0;case 2:if(!(s<t.chapters.items.length)){r.next=10;break}if(t.chapters.items[s].chapterId.toString()!==e){r.next=7;break}if(!(t.chapters.items[s].steps&&t.chapters.items[s].steps.length>0)){r.next=7;break}return ft(t.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),r.abrupt("return",!1);case 7:s++,r.next=2;break;case 10:t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function r(){var s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Cr.removeChapter(a.questId,e,a.quest.version);case 2:return s=a.chapters.items.map((function(e){return e.chapterId})).indexOf(e),a.chapters.items.splice(s,1),r.next=6,t.refreshStepsList();case 6:case"end":return r.stop()}}),r)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return r.stop()}}),r)})))()},modifyChapter:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,o;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(a=t,s={name:"",position:0},o=0;o<t.chapters.items.length;o++)t.chapters.items[o].chapterId.toString()===e&&(s.name=t.chapters.items[o].title[t.languages.current]?t.chapters.items[o].title[t.languages.current]:"",s.position=o);t.$q.dialog({dark:!0,message:t.$t("label.ModifyTheChapter"),prompt:{model:s.name,type:"text"},cancel:!0}).onOk(function(){var t=n()(i.a.mark((function t(r){var n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n[a.languages.current]=r,t.next=4,Cr.modifyChapter({questId:a.questId,version:a.quest.version,chapterId:e,title:n});case 4:a.chapters.items[s.position].title[a.languages.current]=r;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return r.stop()}}),r)})))()},addChapter:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var t=n()(i.a.mark((function t(a){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={},s[r.languages.current]=a,t.next=4,Cr.modifyChapter({questId:r.questId,version:r.quest.version,chapterId:"0",title:s});case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},modifyStep:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.chapters.showNewStepPageSettings=!0,e&&e.stepId&&(a=t,setTimeout((function(){a.stepId=e.stepId,a.chapters.newStep.type=a.getStepTypeInformations(e.type),a.chapters.newStep.chapterId=e.chapterId,a.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),t.closeAllPanels(),t.closeStepTypePage(),t.chapters.showNewStepOverview=!1,t.chapters.showNewStep=!1,t.chapters.reloadStepPlay=!1,t.moveToTop();case 8:case"end":return r.stop()}}),r)})))()},playStep:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.chapters.reloadStepPlay=!1,e&&e.stepId&&(t.stepId=e.stepId,e.id=e.stepId,t.chapters.newStep.type=t.getStepTypeInformations(e.type),t.chapters.newStep.chapterId=e.chapterId,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop),t.closeAllPanels(),r.next=5,Cr.getById(t.stepId,t.quest.version,t.languages.current);case 5:a=r.sent,a&&a.data?(t.chapters.newStep.overviewData=a.data,t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!0,t.hint.number=0,t.moveToTop(),s=t,setTimeout((function(){s.chapters.reloadStepPlay=!0}),300)):ft(t.$t("label.ErrorStandardMessage"),"error");case 7:case"end":return r.stop()}}),r)})))()},moveToPosition:function(e){return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.scrollTo(0,e);case 1:case"end":return t.stop()}}),t)})))()},closeOverview:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resetStepData(),e.closeAllPanels(),e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.showNewStepOverview=!1,e.tabs.selected="steps",et.clearAllNotifications(),e.story.active&&7===e.countSteps()&&(e.story.step=22);case 7:case"end":return t.stop()}}),t)})))()},resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1,this.hint.number=0},closeStepSettingsPage:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:return e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.newStep.type={},e.stepId=-1,e.chapters.showNewStepPageSettings=!1,e.tabs.selected="steps",t.next=9,e.refreshMediaSize();case 9:case"end":return t.stop()}}),t)})))()},addStep:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e||(e=t.chapters.items[0].chapterId),t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepOverview=!1,t.chapters.showNewStepPage=!0,t.chapters.newStep.chapterId=e,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop,a=0,s=0;case 8:if(!(s<t.chapters.items.length)){r.next=16;break}if(t.chapters.items[s].chapterId.toString()!==e||!t.chapters.items[s].steps){r.next=13;break}return n=t.chapters.items[s].steps.length,n>0&&(a=t.chapters.items[s].steps[n-1].stepId),r.abrupt("break",16);case 13:s++,r.next=8;break;case 16:t.chapters.newStep.previousStepId=a;case 17:case"end":return r.stop()}}),r)})))()},insertStep:function(e,t){var r=this;return n()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e||(e=r.chapters.items[0].chapterId),r.chapters.showNewStepPage=!0,r.chapters.showNewStepPageSettings=!1,r.chapters.showNewStepOverview=!1,r.chapters.newStep.chapterId=e,r.chapters.newStep.previousStepId=t;case 6:case"end":return a.stop()}}),a)})))()},selectLanguage:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.languages.current,a=!1,e.quest.languages)for(s=0;s<e.quest.languages.length;s++)e.quest.languages[s].lang===r&&(a=!0);if(a){t.next=6;break}return t.next=6,tt.addLanguage(e.questId,r);case 6:return t.next=8,e.loadQuestData();case 8:e.quest.title[r]&&""!==e.quest.title[r]||(r===e.quest.mainLanguage?e.quest.title[r]=e.$t("label.NewQuest",r):e.quest.title[r]=e.quest.title[e.quest.mainLanguage]),e.story.active&&(e.story.step=18);case 10:case"end":return t.stop()}}),t)})))()},changeLanguage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,o;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=!1,t.quest.languages)for(s=0;s<t.quest.languages.length;s++)t.quest.languages[s].lang===e&&(a=!0);if(a){r.next=7;break}o=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.addLanguage(o.questId,e);case 2:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 3:case"end":return r.stop()}}),r)})))).onCancel(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.languages.current=o.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),r.next=10;break;case 7:return r.next=9,t.loadQuestData();case 9:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 10:case"end":return r.stop()}}),r)})))()},closePrivateQuest:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tt.closePrivate(r.questId,r.quest.version);case 2:return r.quest.status="old",e.next=5,r.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getPrivateRanking:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_r.listPlayersForThisQuest(e.questId);case 2:r=t.sent,r&&r.data&&(e.ranking.items=r.data,e.ranking.items.sort(e.compareScore),e.refreshPosition());case 4:case"end":return t.stop()}}),t)})))()},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return ea.filter((function(r){return r.category===e&&r.enabled&&!("end-chapter"===r.code&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.chapters.newStep.type=e,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!1,t.stepId="0",t.chapters.showNewStepPageSettings=!0,t.moveToTop(),0===t.countSteps()&&t.story.active&&(t.story.step=20);case 7:case"end":return r.stop()}}),r)})))()},countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(e){var t=this;return n()(i.a.mark((function r(){var a,s;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,"end-chapter"!==e.type){r.next=8;break}return r.next=5,t.closeOverview();case 5:return r.next=7,t.refreshStepsList();case 7:return r.abrupt("return",!1);case 8:return t.chapters.showNewStepOverview=!0,t.stepId=e.id,r.next=12,Cr.getById(t.stepId,t.quest.version,t.languages.current);case 12:if(a=r.sent,!a||!a.data){r.next=28;break}return t.chapters.newStep.overviewData=a.data,t.moveToTop(),s=t,setTimeout((function(){s.chapters.reloadStepPlay=!0}),300),t.story.active&&0===t.countSteps()&&(t.story.step=21),r.next=21,t.refreshMediaSize();case 21:return r.next=23,t.refreshStepsList();case 23:if("use-item"!==t.chapters.newStep.overviewData.type){r.next=26;break}return r.next=26,t.fillInventory();case 26:r.next=29;break;case 28:ft(t.$t("label.ErrorStandardMessage"),"error");case 29:case"end":return r.stop()}}),r)})))()},trackStepPlayed:function(e){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0;case 1:case"end":return e.stop()}}),e)})))()},trackStepSuccess:function(e){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0,t.hideHint();case 2:case"end":return e.stop()}}),e)})))()},trackStepPass:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.canPass=!0;case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hideHint();case 1:case"end":return t.stop()}}),t)})))()},trackMessage:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:"suggestInventory"===e&&(t.inventory.suggest=!0);case 1:case"end":return r.stop()}}),r)})))()},addEditor:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,tt.addEditor(e.questId,e.quest.version,e.editor.new.email);case 3:if(r=t.sent,e.$q.loading.hide(),!r||403===r.status){t.next=12;break}return t.next=8,e.listEditors();case 8:e.editor.new.email="",e.editor.new.isExisting=!0,t.next=13;break;case 12:e.editor.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listEditors:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.editorsMissing=!1,t.next=3,tt.listEditors(e.questId,e.quest.version);case 3:if(r=t.sent,r&&r.data)for(e.editor.items=r.data,a=0;a<e.editor.items.length;a++)e.editor.items[a].checked=!0;else e.warnings.editorsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeEditor:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$q.loading.show(),r.next=3,tt.removeEditor(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),r.next=6,t.listEditors();case 6:case"end":return r.stop()}}),r)})))()},addInvitee:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,tt.addInvitee(e.questId,e.quest.version,e.invitee.new.email);case 3:if(r=t.sent,e.$q.loading.hide(),!r||403===r.status){t.next=12;break}return t.next=8,e.listInvitees();case 8:e.invitee.new.email="",e.invitee.new.isExisting=!0,t.next=13;break;case 12:e.invitee.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listInvitees:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inviteeMissing=!1,t.next=3,tt.listInvitees(e.questId,e.quest.version);case 3:if(r=t.sent,r&&r.data)for(e.invitee.items=r.data,a=0;a<e.invitee.items.length;a++)e.invitee.items[a].checked=!0;else e.warnings.inviteeMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeInvitee:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$q.loading.show(),r.next=3,tt.removeInvitee(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),r.next=6,t.listInvitees();case 6:case"end":return r.stop()}}),r)})))()},hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<ea.length;t++)if(ea[t].code===e)return"fas fa-"+ea[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<ea.length;t++)if(ea[t].code===e)return ea[t];return""},fillInventory:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inventoryMissing=!1,e.$q.loading.show(),t.next=4,Cr.listWonObjects(e.questId,e.stepId,e.quest.version);case 4:r=t.sent,r&&r.data?e.inventory.items=r.data:e.warnings.inventoryMissing=!0,e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.overview.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},selectItem:function(e){"use-item"===this.chapters.newStep.overviewData.type?(this.selectedItem=e,this.closeAllPanels()):ft(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},askForHint:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(!e.hint.isOpened){t.next=8;break}e.closeAllPanels(),e.hint.number++,e.hint.number>=e.hint.label.length&&(e.hint.number=0),t.next=12;break;case 8:return t.next=10,_r.getHint(0,e.stepId,e.quest.version,e.languages.current);case 10:r=t.sent,r&&r.hint?(e.hint.label=r.hint,e.closeAllPanels(),e.hint.isOpened=!0,e.overview.tabSelected="hint"):ft(e.$t("label.ErrorStandardMessage"),"error");case 12:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&""!==this.chapters.newStep.overviewData.hint&&this.chapters.newStep.overviewData.hint.length>0},getMyGPSLocation:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),r=e,navigator.geolocation.getCurrentPosition((function(e){r.$q.loading.hide(),r.form.fields.location.lat=e.coords.latitude,r.form.fields.location.lng=e.coords.longitude}),e.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return t.stop()}}),t)})))()},moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=et.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=et.humanReadableFileSize(this.quest.size.limit,!0,this.$t);this.storage=this.$t("label.UsedOver",{current:e,limit:t})}},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia();case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},loadMedia:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.listMedia(e.questId,e.quest.version);case 2:r=t.sent,r&&r.data&&(e.media.items=r.data);case 4:case"end":return t.stop()}}),t)})))()},refreshMediaSize:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.getSize(e.questId,e.quest.version);case 2:r=t.sent,r&&r.data&&(e.quest.size=r.data.size);case 4:case"end":return t.stop()}}),t)})))()},removeMedia:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.removeMedia(t.questId,t.quest.version,e);case 2:if(a=r.sent,a){r.next=7;break}t.$q.dialog({message:t.$t("label.TechnicalIssue")}),r.next=9;break;case 7:return r.next=9,t.loadMedia();case 9:case"end":return r.stop()}}),r)})))()},zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshMediaSize();case 2:e.media.isOpened=!1;case 3:case"end":return t.stop()}}),t)})))()},startSchedule:function(){this.form.fields.scheduling=[[0,24],[0,24],[0,24],[0,24],[0,24],[0,24],[0,24]]},resetSchedule:function(){this.form.fields.scheduling=[]},downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var r=new XMLHttpRequest;r.open("GET","statics/markers/all.pdf",!0),r.responseType="blob",r.onload=function(r){if(200!==this.status)return ft(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var a=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(a)}))}),(function(t){ft(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},r.send()}),(function(t){ft(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},downloadTexts:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Cr.generateTextsExportFile(e.questId,e.quest.version,e.languages.current);case 2:window.open(e.serverUrl+"/upload/quest/"+e.questId+"/texts_fr.csv","_self");case 3:case"end":return t.stop()}}),t)})))()},createNewPaymentQRCode:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.createTierPayment(e.questId,e.quest.premiumPrice.manual);case 2:return t.next=4,e.listPayments();case 4:case"end":return t.stop()}}),t)})))()},createMultipleNewPaymentQRCode:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=0;case 1:if(!(a<e)){r.next=7;break}return r.next=4,tt.createTierPayment(t.questId,t.quest.premiumPrice.manual);case 4:a++,r.next=1;break;case 7:return r.next=9,t.listPayments();case 9:case"end":return r.stop()}}),r)})))()},listPayments:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier)){t.next=5;break}return t.next=3,tt.listTierPayments(e.questId);case 3:r=t.sent,e.payments=r.data;case 5:case"end":return t.stop()}}),t)})))()},downloadQRCode:function(e){et.openExternalLink(this.serverUrl+"/upload/tiers/"+e+".png")},removeCode:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToRemoveThisTierCode"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.removeTierPayment(t.questId,e);case 2:return r.next=4,t.listPayments();case 4:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},listReviews:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ma.list({questId:e.questId,version:e.quest.version});case 2:r=t.sent,e.reviews=r.data;case 4:case"end":return t.stop()}}),t)})))()},getStatistics:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date,t.next=3,tt.getStatistics(e.questId,e.quest.version,r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate());case 3:a=t.sent,e.statistics=a.data;case 5:case"end":return t.stop()}}),t)})))()},getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.serverUrl+"/upload/profile/"+e:"statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],r="check_circle";return this.isEdition||"quest"!==this.quest.type?"img:":e<=this.tabs.progress?r:t},trackCallBackFunction:function(){return!1}},validations:{form:{fields:{title:{required:Wt["required"]},category:{required:Wt["required"]}}}}},wi=vi,ki=(r("74f2"),Object(ye["a"])(wi,ei,ti,!1,null,null,null)),yi=ki.exports,_i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper background-map"},[r("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),r("div",{staticClass:"q-pa-md"},[r("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),r("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[r("div",[r("q-input",{attrs:{id:"loginemail",outlined:"",type:"email",label:e.$t("label.YourEmail"),error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),"forgottenpassword"!==e.step?r("q-input",{attrs:{id:"loginPass",outlined:"",type:"password",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"forgottenpassword"!==e.step?r("p",{staticClass:"centered q-mt-sm q-mb-lg"},[r("a",{on:{click:function(t){return e.openPasswordForgottenPopup()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?r("div",[r("p",[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),r("q-input",{attrs:{outlined:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?r("div",[r("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),r("div",{staticClass:"text-center"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.SignIn"),loading:e.submitting}})],1),r("div",{staticClass:"centered q-mt-sm q-mb-xl"},[r("q-btn",{staticClass:"large-btn",attrs:{outline:"",color:"primary",label:e.$t("label.Subscribe")},on:{click:function(t){return e.goToSubscribe()}}})],1)]),e.isHybrid?r("div",{staticClass:"q-py-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.ScanQRCodeToStartQuest")},on:{click:function(t){return e.startScanQRCode()}}})],1):e._e(),r("div",{staticClass:"q-py-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.LetsPlayWithoutAccount")},on:{click:function(t){return e.validateTerms()}}})],1),r("div",{staticClass:"centered smaller version secondary-font"},[e._v("Version "+e._s(e.version))])])]),r("q-dialog",{model:{value:e.passwordForgottenPopup,callback:function(t){e.passwordForgottenPopup=t},expression:"passwordForgottenPopup"}},[r("q-card",[r("q-card-section",{staticClass:"popup-header row items-center"},[e._v("\n        "+e._s(e.$t("label.ForgottenPassword"))+"\n        "),r("q-space"),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),r("q-separator"),r("q-card-section",[r("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),r("q-btn",{staticClass:"glossy full-width",attrs:{color:"primary",label:e.$t("label.Ok")},on:{click:function(t){return e.sendForgottenPasswordCode()}}})],1)],1)],1),r("q-dialog",{model:{value:e.terms.show,callback:function(t){e.$set(e.terms,"show",t)},expression:"terms.show"}},[r("div",{staticClass:"q-pa-md"},[r("q-item",{attrs:{dense:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-checkbox",{attrs:{dark:""},model:{value:e.terms.usage,callback:function(t){e.$set(e.terms,"usage",t)},expression:"terms.usage"}})],1),r("q-item-section",[r("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.terms.usageError?r("div",{staticClass:"q-field-bottom"},[r("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])],1),r("q-item",{attrs:{dense:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-checkbox",{attrs:{dark:""},model:{value:e.terms.privacy,callback:function(t){e.$set(e.terms,"privacy",t)},expression:"terms.privacy"}})],1),r("q-item-section",[r("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.terms.privacyError?r("div",{staticClass:"q-field-bottom"},[r("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])],1),r("div",{staticClass:"centered q-pa-md"},[r("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.playAnonymous()}}},[r("span",[e._v(e._s(e.$t("label.Confirm")))])])],1)],1)])],1)},Si=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"centered q-pt-lg q-pb-md"},[r("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],xi=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},Ci={data:function(){return{step:"password",form:{email:"",password:"",newPassword:"",code:""},terms:{show:!1,usage:!1,usageError:!1,privacy:!1,privacyError:!1},showSocialLogin:{facebook:!1,google:!1},passwordForgottenPopup:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1,version:"2.1.12"}},mounted:function(){et.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),window.cordova&&(this.showSocialLogin.facebook=!0)},methods:{formSubmit:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$v.$touch(),e.submitting=!0,t.t0=e.step,t.next="password"===t.t0?5:"forgottenpassword"===t.t0?10:16;break;case 5:return t.next=7,e.signIn(e.form.email,e.form.password);case 7:return r=t.sent,r.status?("success"===r.status&&(window.localStorage.setItem("jwt",r.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.user.jwt),a="/home",e.$route.query.hasOwnProperty("redirect")&&(a=e.$route.query.redirect),e.$router.push(a)),"failed"===r.status&&ft(e.$t("label.IncorrectLoginPleaseRetry"),"warning")):ft(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("break",16);case 10:if(e.$v.form.newPassword.$error){t.next=15;break}return t.next=13,Oe.changePassword(e.form.email,e.form.newPassword,e.form.code);case 13:s=t.sent,s.status&&200===s.status?s.data&&s.data.user?(window.localStorage.setItem("jwt",s.data.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),n="/home",e.$route.query.hasOwnProperty("redirect")&&(n=e.$route.query.redirect),e.$router.push(n)):ft(e.$t("label.ErrorStandardMessage"),"error"):s.data&&"You have tries too much codes"===s.data.message?ft(e.$t("label.YourAccountIsBlocked"),"warning"):ft(e.$t("label.IncorrectCodePleaseRetry"),"warning");case 15:return t.abrupt("break",16);case 16:e.submitting=!1;case 17:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Oe.login(e,t);case 2:if(a=r.sent,200!==a.status){r.next=7;break}return r.abrupt("return",{status:"success",user:a.data.user});case 7:if(401!==a.status){r.next=11;break}return r.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return r.abrupt("return",{error:"technical issue"});case 12:case"end":return r.stop()}}),r)})))()},validateAccount:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Oe.validateAccount(e,t);case 2:s=a.sent,s.status>=300&&s.data&&s.data.message?ft(s.data.message,"warning"):ft(r.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return a.stop()}}),a)})))()},googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},fbLoginSuccess:function(e){var t=this;facebookConnectPlugin.getAccessToken((function(r){Oe.checkFacebookToken(e.authResponse.userID,r,(function(e,r){if(e&&ft(t.$t("label.TechnicalIssue"),"error"),r&&("login successful"===r.message||r.data&&"login successful"===r.data.message))return t.$router.push("/home");ft(t.$t("label.TechnicalIssue"),"error")}))}))},facebookLogin:function(){var e=this;window.cordova&&facebookConnectPlugin?facebookConnectPlugin.login(["public_profile"],this.fbLoginSuccess,(function(t){console.log(t),ft(e.$t("label.TechnicalIssue"),"error")})):(window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0))},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){if(t&&t.text){var r=et.removeUnusedUrl(t.text);e.checkCode(r)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},validateTerms:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.terms.show=!0;case 1:case"end":return t.stop()}}),t)})))()},playAnonymous:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.terms.usageError=!1,e.terms.privacyError=!1,!1!==e.terms.usage){t.next=6;break}e.terms.usageError=!0,t.next=14;break;case 6:if(!1!==e.terms.privacy){t.next=10;break}e.terms.privacyError=!0,t.next=14;break;case 10:return t.next=12,Oe.playAnonymous(e.$t("label.shortLang"));case 12:r=t.sent,r&&r.data&&"ok"===r.data.status&&r.data.user?(window.localStorage.setItem("jwt",r.data.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.data.user.jwt),e.$router.push("/home")):ft(e.$t("label.ErrorStandardMessage"),"error");case 14:case"end":return t.stop()}}),t)})))()},checkCode:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,tt.checkLoginQRCode(e,t.$t("label.shortLang"));case 2:a=r.sent,a&&a.data&&"ok"===a.data.status&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),-1===e.indexOf("_score")?a.data.questId?t.$router.push("/quest/play/"+a.data.questId):t.$router.push("/quest/play/"+e):t.$router.push("/quest/"+e.substring(0,24)+"/end")):ft(t.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return r.stop()}}),r)})))()},goToSubscribe:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/createAccount/generic");case 1:case"end":return t.stop()}}),t)})))()},openPasswordForgottenPopup:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.passwordForgottenPopup=!0;case 1:case"end":return t.stop()}}),t)})))()},sendForgottenPasswordCode:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Oe.sendForgottenPasswordCode(e.form.email);case 3:r=t.sent,200===r.status?(e.step="forgottenpassword",e.passwordForgottenPopup=!1):ft(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()}},validations:{form:{email:{required:Wt["required"],email:Wt["email"]},newPassword:{required:Wt["required"],minLength:Object(Wt["minLength"])(8),checkPasswordComplexity:xi}}}},qi=Ci,Ti=Object(ye["a"])(qi,_i,Si,!1,null,null,null),Ei=Ti.exports,Pi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},Ai=[],Mi={mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logout");case 2:window.localStorage.removeItem("jwt"),delete Ee.a.defaults.headers.common["Authorization"],e.$router.push("/user/login");case 5:case"end":return t.stop()}}),t)})))()}},Ii=Mi,Ri=Object(ye["a"])(Ii,Pi,Ai,!1,null,null,null),Oi=Ri.exports,$i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg"}},[r("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToProfile()}}})],1),r("div",{staticClass:"centered"},[r("div",{staticClass:"user-card user-card-big main-profile centered relative-position"},[r("div",{staticClass:"relative-position no-overflow",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[r("div",{staticClass:"edit-bar centered"},[r("label",{on:{click:function(t){return e.$refs["uploadfile"].click()}}},[r("q-icon",{attrs:{name:"camera_alt"}})],1),r("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),""!==e.profile.form.name?r("div",[r("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n            "+e._s(e.profile.form.name)+"\n          ")]),e.profile.form.location&&(e.profile.form.location.postalCode||e.profile.form.location.country)?r("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.profile.form.location.postalCode?r("span",[e._v(e._s(e.profile.form.location.postalCode))]):e._e(),e.profile.form.location.postalCode&&e.profile.form.location.country?r("span",[e._v(", ")]):e._e(),e.profile.form.location.country?r("span",[e._v(e._s(e.profile.form.location.country))]):e._e()]):e._e()]):e._e()])]),r("div",[""===e.profile.form.name?r("div",[r("div",{staticClass:"centered subtitle5 q-mt-lg"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n        ")]),r("div",{staticClass:"centered subtitle6"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYouDesc"))+"\n        ")])]):e._e()]),r("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[r("q-input",{attrs:{dark:"",label:e.$t("label.YourName"),placeholder:"John Doe","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.YourEmail"),placeholder:"john.doe@gmail.com","bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?r("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.profile.form.password.$error,"error-message":e.$v.profile.form.password.checkPasswordComplexity?e.$v.profile.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),r("q-input",{attrs:{dark:"",label:e.$t("label.YourPresentation"),"bottom-slots":"",type:"textarea","min-rows":3},model:{value:e.profile.form.description,callback:function(t){e.$set(e.profile.form,"description",t)},expression:"profile.form.description"}}),r("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),r("q-select",{attrs:{dark:"",label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),r("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":""},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),r("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge")},on:{blur:e.$v.profile.form.age.$touch},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),r("q-input",{attrs:{dark:"",label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},scopedSlots:e._u([{key:"after",fn:function(){return[r("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}),r("div",{staticClass:"q-pt-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitProfileChanges()}}}),""===e.$store.state.user.name?r("q-btn",{staticClass:"q-pt-md",attrs:{color:"primary",flat:"",label:e.$t("label.MaybeLater")},on:{click:function(t){return e.backToMap()}}}):e._e()],1)],1),e.displayPassword?e._e():r("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.ChangeYourPassword")))]),r("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.CurrentPassword"),"bottom-slots":"",error:e.$v.profile.form.oldPassword.$error,"error-message":e.$v.profile.form.oldPassword.checkPasswordComplexity?e.$v.profile.form.oldPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.oldPassword.$touch},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),r("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.NewPassword"),"bottom-slots":"",error:e.$v.profile.form.newPassword.$error,"error-message":e.$v.profile.form.newPassword.checkPasswordComplexity?e.$v.profile.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.newPassword.$touch},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),r("div",{staticClass:"q-pt-md centered"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitChangePassword()}}})],1)],1),r("div",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded"},[r("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RemoveYourAccount")))]),r("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),r("q-btn",{staticClass:"q-my-md glossy",attrs:{color:"negative",label:e.$t("label.IConfirmIWantToRemoveMyAccount")},on:{click:function(t){return e.removeAccount()}}})],1),r("div",[r("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[r("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),r("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),r("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})])]),r("q-dialog",{model:{value:e.showHelpPopup,callback:function(t){e.showHelpPopup=t},expression:"showHelpPopup"}},[r("q-card",[r("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.HowWeUseYourData"))+"\n        "),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),r("q-separator"),r("q-card-section",{staticClass:"subtitle5"},[r("ul",[r("li",[e._v(e._s(e.$t("label.DataCountry")))]),r("li",[e._v(e._s(e.$t("label.DataZipcode")))]),r("li",[e._v(e._s(e.$t("label.DataSex")))]),r("li",[e._v(e._s(e.$t("label.DataAge")))]),r("li",[e._v(e._s(e.$t("label.DataPhone")))])])])],1)],1)],1)},Fi=[],Di=r("4c18"),Ni=r("cf83"),Li={data:function(){return{profile:{form:{name:"--",description:"",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:"",oldPassword:"",newPassword:""}},position:null,countries:"fr"===this.$i18n.locale?Di:Ni,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:et.buildOptionsForSelect(gi,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,showHelpPopup:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){this.profile.form={name:this.$store.state.user.name?"-"===this.$store.state.user.name?"":this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email&&-1===this.$store.state.user.email.indexOf("dummyuser")?this.$store.state.user.email:"",password:"",description:this.$store.state.user.description?this.$store.state.user.description:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language},this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{getProfileImage:function(){return this.profile.form.picture&&-1!==this.profile.form.picture.indexOf("http")?this.profile.form.picture:this.profile.form.picture?this.serverUrl+"/upload/profile/"+this.profile.form.picture:"statics/images/icon/profile-small.png"},submitProfileChanges:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.name.$error||e.$v.profile.form.email.$error||e.$v.profile.form.password.$error&&e.displayPassword){t.next=9;break}return r={name:e.profile.form.name,email:e.profile.form.email,description:e.profile.form.description,password:e.profile.form.password,phone:e.profile.form.phone?e.profile.form.phone:"",zipCode:e.profile.form.zipCode,country:e.profile.form.country,language:e.profile.form.language,age:e.profile.form.age,sex:e.profile.form.sex},e.position&&(r.position=e.position),e.$q.loading.show(),t.next=6,Oe.modifyAccount(r);case 6:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?ft(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 9:case"end":return t.stop()}}),t)})))()},getLocation:function(){var e=this;if(this.profile.form.zipCode&&""!==this.profile.form.zipCode&&this.profile.form.country&&""!==this.profile.form.country){var t=new google.maps.Geocoder;t.geocode({address:this.profile.form.zipCode+" "+this.profile.form.country},(function(t,r){e.$q.loading.hide(),"OK"===r&&t[0].geometry&&(e.position={},e.position.lat=t[0].geometry.location.lat(),e.position.lng=t[0].geometry.location.lng())}))}},submitChangePassword:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.oldPassword.$error||e.$v.profile.form.newPassword.$error){t.next=8;break}return r={oldPassword:e.profile.form.oldPassword,newPassword:e.profile.form.newPassword},e.$q.loading.show(),t.next=5,Oe.modifyAccount(r);case 5:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?ft(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 8:case"end":return t.stop()}}),t)})))()},backToProfile:function(){""===this.profile.form.name?this.$router.push("/home"):this.$router.push("/profile/"+this.$store.state.user.id)},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},helpFields:function(){this.showHelpPopup=!0},uploadImage:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.target.files,a[0]){r.next=3;break}return r.abrupt("return");case 3:return s=new FormData,s.append("image",a[0]),t.$q.loading.show(),r.next=8,Oe.uploadAccountPicture(s);case 8:n=r.sent,n&&n.data&&(n.data.file?t.profile.form.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&ft(t.$t("label.FileTooLarge"),"error")),t.$q.loading.hide();case 11:case"end":return r.stop()}}),r)})))()},disconnect:function(){this.$router.push("/user/logout")},removeAccount:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveYourAccount"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Oe.removeAccount();case 2:if(t=e.sent,!t){e.next=9;break}return ft(r.$t("label.YourAccountIsRemoved"),"info"),e.next=7,r.disconnect();case 7:e.next=10;break;case 9:ft(r.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return t.stop()}}),t)})))()}},validations:{profile:{form:{email:{required:Wt["required"],email:Wt["email"]},name:{required:Wt["required"],minLength:Object(Wt["minLength"])(2)},country:{required:Wt["required"]},zipCode:{required:Wt["required"]},password:{required:Wt["required"],minLength:Object(Wt["minLength"])(8),checkPasswordComplexity:xi},oldPassword:{required:Wt["required"],minLength:Object(Wt["minLength"])(8),checkPasswordComplexity:xi},newPassword:{required:Wt["required"],minLength:Object(Wt["minLength"])(8),checkPasswordComplexity:xi},age:{required:Wt["required"]}}}}},ji=Li,zi=Object(ye["a"])(ji,$i,Fi,!1,null,null,null),Hi=zi.exports,Bi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg"}},[r("div",{style:"padding-top: "+("level"===e.tab?200:"ranking"===e.tab?160:110)+"px;"},[r("transition",{attrs:{name:"slideInTop"}},["level"===e.tab?r("div",e._l(e.levels,(function(t){return r("div",{key:t.number,staticClass:"q-ma-md level-to-reach",class:{"level-not-reached":e.$store.state.user.points<t.minPoints},style:"background-image: url(statics/images/icon/level"+t.number+".svg)"},[e.$store.state.user.points<t.minPoints?r("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.PointsToReachLevel",{score:t.minPoints})))]):e._e(),e.$store.state.user.points>=t.minPoints?r("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.LevelReached")))]):e._e()])})),0):e._e()]),r("transition",{attrs:{name:"slideInTop"}},["ranking"===e.tab?r("div",[e._l(e.ranking,(function(t,a){return"quest"!==e.range&&e.ranking&&e.ranking.length>0?r("div",{key:a,staticClass:"q-pa-md rank-box"},[r("div",[r("userCard",{attrs:{user:t,size:"medium"},on:{click:e.openProfile}})],1),r("div",{staticClass:"full-width"},["-"!==t.name?r("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?r("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?r("div",{staticClass:"subtitle6"},[t.location.postalCode?r("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?r("span",[e._v(", ")]):e._e(),t.location.country?r("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),r("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.points)+"\n                ")]),r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")])])])]):e._e()})),"quest"===e.range&&e.ranking&&e.ranking.length>0?r("div",{staticClass:"subtitle3 q-pa-md"},[e._v("\n            "+e._s(e.ranking[0].questData.title.fr)+"\n          ")]):e._e(),e._l(e.ranking,(function(t,a){return"quest"===e.range&&e.ranking&&e.ranking.length>0?r("div",{key:a,staticClass:"q-pa-md rank-box"},[r("div",[r("userCard",{attrs:{user:t.userData,size:"medium"},on:{click:function(r){return e.openProfile(t.userId[0])}}})],1),r("div",{staticClass:"full-width"},[r("div",{staticClass:"subtitle5"},[e._v(e._s(t.userData.name))]),t.userData.location&&(t.userData.location.country||t.userData.location.postalCode)?r("div",{staticClass:"subtitle6"},[t.userData.location.postalCode?r("span",[e._v(e._s(t.userData.location.postalCode))]):e._e(),t.userData.location.postalCode&&t.userData.location.country?r("span",[e._v(", ")]):e._e(),t.userData.location.country?r("span",[e._v(e._s(t.userData.location.country))]):e._e()]):e._e(),r("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.stars)+"\n                ")]),r("div",{staticClass:"col-6 centered"},[r("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")])])])]):e._e()})),e.ranking&&0===e.ranking.length?r("div",{staticClass:"centered"},[e._v("\n            "+e._s(e.$t("label.NoRanking"))+"\n          ")]):e._e()],2):e._e()]),r("transition",{attrs:{name:"slideInTop"}},["news"===e.tab?r("div",[r("q-infinite-scroll",{on:{load:e.loadNews}},[r("q-list",[e._l(e.news.items,(function(t,a){return r("q-item",{key:t._id},[r("q-item-section",{staticClass:"q-pl-md",attrs:{avatar:""}},[r("userCard",{attrs:{user:t.data,size:"medium"},on:{click:e.openProfile}})],1),r("q-item-section",{staticClass:"force-justify-start"},[t.data&&t.data.userId?r("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(t.data.name))]):e._e(),r("q-item-label",{staticClass:"grey-round-box subtitle6 q-pa-sm"},["standard"===t.type?r("div",[e._v("\n                      "+e._s(t.title)+"\n                    ")]):e._e(),"standard"!==t.type?r("div",[r("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?r("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),r("div",{staticClass:"q-pt-sm"},[e._v("\n                      "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                      "),"friends"===t.destination?r("span",[e._v("\n                        - \n                        "),e.isLiked(t)?e._e():r("a",{on:{click:function(t){return e.like(a)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?r("a",{on:{click:function(t){return e.unlike(a)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?r("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])])],1)],1)})),0===e.news.items.length?r("q-item",[r("q-item-label",[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),r("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[r("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e()])],1),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-4",class:{"tab-unselected":"level"!==e.tab},on:{click:function(t){return e.selectTab("level")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Level"))+"\n          ")])]),r("div",{staticClass:"col-4",class:{"tab-unselected":"ranking"!==e.tab},on:{click:function(t){return e.selectTab("ranking")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Ranking"))+"\n          ")])]),r("div",{staticClass:"col-4",class:{"tab-unselected":"news"!==e.tab},on:{click:function(t){return e.selectTab("news")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.News"))+"\n          ")])])]),"level"===e.tab?r("div",[r("div",{staticClass:"relative-position progress-box"},[r("div",{staticClass:"progress-bar"},[r("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),r("div",{staticClass:"value"},[e._v("\n              "+e._s(Math.floor(100*e.level.progress))+"%\n            ")])]),r("div",{staticClass:"score subtitle6"},[e._v("\n            "+e._s(e.$t("label.YouHaveReachAScore",{score:e.$store.state.user.points}))+"\n          ")]),r("div",{staticClass:"rank-level"},[r("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])])]):e._e(),"ranking"===e.tab?r("div",[r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-3",class:{"tab-unselected":"world"!==e.range},on:{click:function(t){return e.selectRange("world")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.World"))+"\n            ")])]),r("div",{staticClass:"col-3",class:{"tab-unselected":"country"!==e.range},on:{click:function(t){return e.selectRange("country")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCountry"))+"\n            ")])]),r("div",{staticClass:"col-3",class:{"tab-unselected":"city"!==e.range},on:{click:function(t){return e.selectRange("city")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCity"))+"\n            ")])]),r("div",{staticClass:"col-3",class:{"tab-unselected":"friends"!==e.range},on:{click:function(t){return e.selectRange("friends")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.Friends"))+"\n            ")])])])]):e._e()],1)])])},Ui=[],Qi={components:{userCard:ar},data:function(){return{tab:"level",range:"world",news:{limit:20,skip:0,items:[]},levels:[{number:9,minPoints:3e3,maxPoints:15e3},{number:8,minPoints:1500,maxPoints:3e3},{number:7,minPoints:800,maxPoints:1500},{number:6,minPoints:400,maxPoints:800},{number:5,minPoints:200,maxPoints:400},{number:4,minPoints:100,maxPoints:200},{number:3,minPoints:30,maxPoints:100},{number:2,minPoints:15,maxPoints:30},{number:1,minPoints:0,maxPoints:15}],ranking:null,level:{progress:.04},serverUrl:"https://api.graaly.com"}},mounted:function(){this.$store.state.user.points||(this.$store.state.user.points=0),this.selectTab(this.$route.params.type)},methods:{selectTab:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.tab=e,"level"===t.tab&&(t.range=null,t.computeProgression()),"ranking"!==t.tab){r.next=10;break}if(24!==t.$route.params.subtype.length){r.next=8;break}return r.next=6,t.selectRange(t.$route.params.subtype);case 6:r.next=10;break;case 8:return r.next=10,t.selectRange();case 10:case"end":return r.stop()}}),r)})))()},selectRange:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e||(e="world"),t.range=e,r.next=4,t.getRanking(e);case 4:case"end":return r.stop()}}),r)})))()},openProfile:function(e){this.$router.push("/profile/"+e)},backToTheMap:function(){this.$router.back()},computeProgression:function(){this.level=lr(this.$store.state.user.points)},loadNews:function(e,t){var r=this;rt.listNews(this.news.limit,this.news.skip,(function(e,a){r.news.skip+=r.news.limit,e&&t(e),a&&a.data&&a.data.length>0&&(r.news.items=r.news.items.concat(a.data),t())}))},like:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$q.loading.show(),t.news.items[e].likes.push({userId:t.$store.state.user._id,date:new Date}),r.next=4,rt.likeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return r.stop()}}),r)})))()},unlike:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(t.$q.loading.show(),a=0;a<t.news.items[e].likes.length;a++)t.news.items[e].likes[a].userId===t.$store.state.user._id&&t.news.items[e].likes.splice(a,1);return r.next=4,rt.unlikeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return r.stop()}}),r)})))()},isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},getRanking:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$q.loading.show(),"world"!==e&&"country"!==e&&"city"!==e&&"friends"!==e){r.next=7;break}return r.next=4,rt.getRangeRanking(e);case 4:a=r.sent,r.next=11;break;case 7:return r.next=9,_r.getRankingForAQuest(e);case 9:a=r.sent,t.range="quest";case 11:a&&a.data?a.data.users?t.ranking=a.data.users:t.ranking=a.data:t.ranking=[],t.$q.loading.hide();case 13:case"end":return r.stop()}}),r)})))()}}},Wi=Qi,Yi=Object(ye["a"])(Wi,Bi,Ui,!1,null,null,null),Vi=Yi.exports,Gi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[r("div",{staticStyle:{"margin-top":"120px"}},["played"===e.tab?r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadPlayed}},[r("questsList",{attrs:{format:"big",quests:e.quests.played}})],1):e._e(),"created"===e.tab&&e.$route.params.id!==e.$store.state.user.id?r("div",[r("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),"created"===e.tab&&e.$route.params.id===e.$store.state.user.id?r("div",[e.quests.built&&e.quests.built.rejected&&e.quests.built.rejected.length>0?r("div",[r("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourRejectedQuests")))]),r("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.rejected}})],1):e._e(),e.quests.built&&e.quests.built.tovalidate&&e.quests.built.tovalidate.length>0?r("div",[r("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourUnderValidationQuests")))]),r("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.tovalidate}})],1):e._e(),e.quests.built&&e.quests.built.draft?r("div",[r("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourDraftQuests")))]),r("questsList",{attrs:{format:"big",color:"red",add:!0,quests:e.quests.built.draft}})],1):e._e(),e.quests.built&&e.quests.built.published&&e.quests.built.published.length>0?r("div",[r("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourPublishedQuests")))]),r("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.published}})],1):e._e()]):e._e(),"played"===e.tab&&e.quests.played&&0===e.quests.played.length?r("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestPlayed"))+"\n      ")]):e._e(),"created"===e.tab&&e.quests.built&&0===e.quests.built.length?r("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e()],1),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-6",class:{"tab-unselected":"played"!==e.tab},on:{click:function(t){return e.selectTab("played")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsSuccessful"))+"\n          ")])]),r("div",{staticClass:"col-6",class:{"tab-unselected":"created"!==e.tab},on:{click:function(t){return e.selectTab("created")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsCreated"))+"\n          ")])])])],1)])])},Ki=[],Ji={components:{questsList:zt},data:function(){return{quests:{played:null,built:null},skip:0,limit:12,tab:"played",serverUrl:"https://api.graaly.com"}},mounted:function(){this.selectTab(this.$route.params.type)},methods:{loadPlayed:function(e,t){var r=this;return n()(i.a.mark((function e(){var a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r,tt.ListPlayedByAUserSync(r.$route.params.id,null,r.skip,(function(e,r){if(a.skip+=a.limit,e&&t(e),r&&r.data&&r.data.length>0){a.quests.played=[];for(var i=0;i<r.data.length;i++)a.quests.played.push({questId:r.data[i].questId,picture:r.data[i].questData.picture,title:r.data[i].questData.title,location:{town:r.data[i].questData.town},playStatus:r.data[i].status&&""!==r.data[i].status?r.data[i].status:"finished",points:r.data[i].stars});t()}}));case 2:case"end":return e.stop()}}),e)})))()},loadCreated:function(e){var t=this;return n()(i.a.mark((function r(){var a,s,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e||(e=t.$store.state.user.id),r.next=3,tt.ListCreatedByAUser(e);case 3:if(a=r.sent,e===t.$store.state.user.id&&(t.quests.built={rejected:[],tovalidate:[],draft:[],published:[]}),a&&a.data){if(a.data.length>0)if(t.quests.createdNb=a.data.length,e===t.$store.state.user.id)for(s=0;s<a.data.length;s++)n=a.data[s],"published"===n.status?t.quests.built["published"].push(n):"rejected"===n.status?t.quests.built["rejected"].push(n):"tovalidate"===n.status?t.quests.built["tovalidate"].push(n):t.quests.built["draft"].push(n);else t.quests.built=a.data}else t.quests.built=[];case 6:case"end":return r.stop()}}),r)})))()},selectTab:function(e){this.tab=e,this.skip=0,"created"===e&&this.loadCreated(this.$route.params.id)},backToTheMap:function(){this.$router.back()}}},Xi=Ji,Zi=Object(ye["a"])(Xi,Gi,Ki,!1,null,null,null),es=Zi.exports,ts=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[r("div",{staticStyle:{"margin-top":"120px"}},["follow"===e.tab?r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadFriends}},[r("usersList",{attrs:{format:"list",add:e.$store.state.user.id===e.$route.params.id,users:e.users},on:{refresh:e.reloadFriends}})],1):e._e(),"suggestion"===e.tab&&null!==e.user.position?r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadSuggestions}},[r("usersList",{attrs:{format:"list",add:!1,users:e.suggestions}})],1):e._e(),"suggestion"===e.tab&&null===e.user.position?r("div",[e._v("\n        "+e._s(e.$t("label.WeNeedYourPositionForThisFeature"))+"\n      ")]):e._e()],1),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.$route.params.id?r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-6",class:{"tab-unselected":"follow"!==e.tab},on:{click:function(t){return e.selectTab("follow")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.YouFollowThem"))+"\n          ")])]),r("div",{staticClass:"col-6",class:{"tab-unselected":"suggestion"!==e.tab},on:{click:function(t){return e.selectTab("suggestion")}}},[r("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Suggestions"))+"\n          ")])])]):e._e(),e.$store.state.user.id!==e.$route.params.id?r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n          "+e._s(e.$t("label.FollowedPeople"))+"\n        ")])]):e._e()],1)]),r("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},rs=[],as={components:{usersList:or,geolocation:ct},data:function(){return{users:null,user:{position:null},suggestions:null,suggestionType:"followers",skip:0,limit:12,tab:"follow",serverUrl:"https://api.graaly.com"}},mounted:function(){},methods:{reloadFriends:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skip=0,t.next=3,e.loadFriends(0,(function(){}));case 3:case"end":return t.stop()}}),t)})))()},loadFriends:function(e,t){var r=this;return n()(i.a.mark((function e(){var a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r,rt.listFriendsSync(0,r.skip,r.limit,(function(e,r){null===a.users&&(a.users=[]),e&&t(e),r&&r.data&&r.data.length>0&&(a.skip+=a.limit,a.users=a.users.concat(r.data),t())}));case 2:case"end":return e.stop()}}),e)})))()},loadSuggestions:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=r,"near"===r.suggestionType?rt.listSuggestionsSync({lng:r.user.position.longitude,lat:r.user.position.latitude},r.limit,r.skip,(function(e,r){s.skip+=s.limit,null===s.suggestions&&(s.suggestions=[]),e&&t(e),r&&r.data&&r.data.length>0&&(s.suggestions=s.suggestions.concat(r.data),t())})):rt.listFollowersSync(r.limit,r.skip,(function(r,a){null===s.suggestions&&(s.suggestions=[]),r&&t(r),a&&a.data&&a.data.length>0&&(s.skip+=a.data.length,s.suggestions=s.suggestions.concat(a.data),t()),a&&a.data&&a.data.length>0&&!(a.data.length<s.limit)||(s.suggestionType="near",s.loadSuggestions(e,t))}));case 2:case"end":return a.stop()}}),a)})))()},onLocationSuccess:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$set(t.user,"position",e.coords);case 1:case"end":return r.stop()}}),r)})))()},onLocationError:function(e){e&&(this.user.position=null)},selectTab:function(e){this.tab=e,this.skip=0,"suggestion"===e&&null===this.suggestions&&this.loadSuggestions(0,(function(){}))},backToTheMap:function(){this.$router.back()}}},is=as,ss=Object(ye["a"])(is,ts,rs,!1,null,null,null),ns=ss.exports,os=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg"}},[r("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n      "+e._s(e.$t("label."+(e.$store.state.user.id===e.$route.params.id?"YourBadges":"Badges")))+"\n    ")]),r("badgesList",{attrs:{format:e.$store.state.user.id===e.$route.params.id?"bytown":"list",badges:e.badges}}),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1)],1)])},ls=[],cs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pl-md"},[e.badges?e._e():r("div",{staticClass:"badge relative-position"},[r("div",{staticClass:"centered q-pt-lg"},[r("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.badges&&0===e.badges.length?r("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):e._e(),"scroll"===e.format&&e.badges&&e.badges.length>0?r("div",{staticClass:"horizontal-scroll-wrapper badges-horizontal-scroll-wrapper"},e._l(e.badges,(function(t){return r("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),r("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"list"===e.format&&e.badges&&e.badges.length>0?r("div",{staticClass:"row justify-around"},e._l(e.badges,(function(t){return r("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),r("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"bytown"===e.format&&e.badges&&e.badges.length>0?r("div",[e._l(e.badges,(function(t,a){return r("div",{key:a},[r("div",{staticClass:"subtitle4 q-pb-md"},[e._v(e._s(t.city))]),r("div",{staticClass:"row justify-around"},e._l(t.rewards,(function(t,a){return r("div",{key:a,staticClass:"badge relative-position q-mr-md",on:{click:function(r){return e.openQuest(t.questId)}}},[r("img",{class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}}),t.won?r("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(t.title)+"\n          ")]):e._e(),t.won?e._e():r("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(e.$t("label.NotWon"))+"\n          ")])])})),0)])})),e._v("\n    "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n  ")],2):e._e()])},us=[],ds={props:["badges","format"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{openQuest:function(e){this.$router.push("/quest/play/"+e)}}},ps=ds,fs=Object(ye["a"])(ps,cs,us,!1,null,null,null),ms=fs.exports,hs={components:{badgesList:ms},data:function(){return{badges:null,serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadBadges()},methods:{loadBadges:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.getRewards(e.$route.params.id,"all");case 2:r=t.sent,r&&r.data&&(e.badges=r.data);case 4:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.$router.back()}}},bs=hs,gs=Object(ye["a"])(bs,os,ls,!1,null,null,null),vs=gs.exports,ws=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg"}},[r("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.userId?r("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"settings"},on:{click:function(t){return e.updateProfile()}}}):e._e()],1),r("div",{staticClass:"centered"},[r("div",{staticClass:"user-card user-card-big main-profile relative-position"},[r("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?r("div",{staticClass:"profile-item-creator"},[r("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?r("div",{staticClass:"profile-item-level"},[r("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()]),r("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e.user.location&&(e.user.location.postalCode||e.user.location.country)?r("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.user.location.postalCode?r("span",[e._v(e._s(e.user.location.postalCode))]):e._e(),e.user.location.postalCode&&e.user.location.country?r("span",[e._v(", ")]):e._e(),e.user.location.country?r("span",[e._v(e._s(e.user.location.country))]):e._e()]):e._e()])]),e.user.description?r("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n      "+e._s(e.user.description)+"\n    ")]):e._e(),e.$store.state.user.id!==e.userId?r("div",{staticClass:"centered q-pa-md"},[e.user.status&&"friend"===e.user.status?e._e():r("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.user.status&&"friend"===e.user.status?r("div",{staticClass:"centered"},[r("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n          "+e._s(e.$t("label.Followed"))+"\n        ")]),r("div",{staticClass:"q-pt-sm"},[r("a",{on:{click:e.removeFriend}},[e._v(e._s(e.$t("label.DoNotFollowAnymore")))])])],1):e._e()],1):e._e(),r("div",[e.warnings.listCreatedQuestsMissing?r("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[r("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]),e.$store.state.user.id===e.userId?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),r("questsList",{attrs:{format:"small",color:"red",add:!0,quests:e.quests.built}})],1):e._e(),e.$store.state.user.id!==e.userId&&e.quests&&e.quests.built&&e.quests.built.length>0?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),r("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),null===e.badges||e.badges.length>0?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.Badges"),type:"badge"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreBadges}}),r("badgesList",{attrs:{format:"scroll",badges:e.badges}})],1):e._e(),null===e.quests.played||e.quests.played.length>0?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.SolvedQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPlayed}}),r("questsList",{attrs:{format:"small",quests:e.quests.played}})],1):e._e(),null===e.friends.list||e.friends.list.length>0||e.$store.state.user.id===e.userId?r("div",[r("titleBar",{attrs:{title:{text:e.$t("label.YouFollowThem"),type:"friend"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllFriends}}),r("usersList",{attrs:{format:"scroll",add:e.$store.state.user.id===e.userId,users:e.friends.list},on:{refresh:e.loadFriends}})],1):e._e(),e.$store.state.user.id===e.userId?r("div",[r("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[r("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),r("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),r("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})]):e._e()])])},ks=[],ys={components:{titleBar:Pt,questsList:zt,usersList:or,badgesList:ms},data:function(){return{user:{position:null,proposeAQuest:!0},userId:null,friends:{list:null,show:!1},quests:{played:null,built:null,createdNb:0},badges:null,warnings:{listCreatedQuestsMissing:!1,listFriendsMissing:!1},serverUrl:"https://api.graaly.com"}},mounted:function(){"me"===this.$route.params.id?this.userId=this.$store.state.user.id:this.userId=this.$route.params.id,this.getProfile(),this.listCreatedQuests(),this.listPlayedQuests(),this.loadFriends(),this.loadBadges()},methods:{getProfile:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId!==e.$store.state.user.id){t.next=5;break}e.user={name:e.$store.state.user.name,email:e.$store.state.user.email,description:e.$store.state.user.description,phone:e.$store.state.user.phone?e.$store.state.user.phone:"",picture:e.$store.state.user.picture,zipCode:e.$store.state.user.location.postalCode,country:e.$store.state.user.location.country,language:e.$store.state.user.language,statistics:e.$store.state.user.statistics,level:e.$store.state.user.level},"-"===e.user.name&&e.updateProfile(),t.next=9;break;case 5:return t.next=7,rt.getFriend(e.userId);case 7:r=t.sent,r&&r.data&&(e.user=r.data);case 9:case"end":return t.stop()}}),t)})))()},listCreatedQuests:function(e){var t=this;return n()(i.a.mark((function e(){var r,a,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.warnings.listCreatedQuestsMissing=!1,e.next=3,tt.ListCreatedByAUser(t.userId);case 3:if(r=e.sent,t.quests.built=[],r&&r.data){if(r.data.length>0)for(t.quests.createdNb=r.data.length,a=[],t.quests.built=[],s=0;s<r.data.length;s++)-1===a.indexOf(r.data[s].questId)&&(t.quests.built.push(r.data[s]),a.push(r.data[s].questId))}else t.warnings.listCreatedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e)})))()},listPlayedQuests:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt.ListPlayedByAUser(e.userId);case 2:r=t.sent,r&&r.data&&(e.quests.played=e.formatRunResults(r.data));case 4:case"end":return t.stop()}}),t)})))()},formatRunResults:function(e){for(var t=[],r=0;r<e.length;r++)t.push({questId:e[r].questId,picture:e[r].questData.picture,title:e[r].questData.title,location:{town:e[r].questData.town},playStatus:e[r].status?e[r].status:"succeeded",points:e[r].stars});return t},loadFriends:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.listFriendsMissing=!1,t.next=3,rt.listFriends(e.userId,0,10);case 3:r=t.sent,r&&r.data?e.friends.list=r.data:e.warnings.listFriendsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},loadBadges:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.getRewards(e.userId,"won");case 2:r=t.sent,r&&r.data&&(e.badges=r.data);case 4:case"end":return t.stop()}}),t)})))()},loadOrganization:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.user.organizationId){t.next=5;break}return t.next=3,rt.getOrganization();case 3:r=t.sent,r&&(e.user.organization=r.data);case 5:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.updateProfile(),t.next=8;break;case 4:return t.next=6,rt.addFriend(e.userId);case 6:r=t.sent,r?(r.data&&r.data.hasOwnProperty("status")&&"invitationsent"===r.data.status?ft(e.$t("label.InvitationSent"),"success"):ft(e.$t("label.FriendsAdded"),"success"),o["a"].set(e.user,"status","friend")):ft(e.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return t.stop()}}),t)})))()},readMoreQuestPublished:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/created");case 1:case"end":return t.stop()}}),t)})))()},readMoreQuestPlayed:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/played");case 1:case"end":return t.stop()}}),t)})))()},readMoreBadges:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/badges");case 1:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.userId===this.$store.state.user.id?this.$router.push("/home"):this.$router.back()},readMoreAllFriends:function(){this.$router.push("/user/"+this.userId+"/friends")},getProfileImage:function(){return this.user.picture&&-1!==this.user.picture.indexOf("http")?this.user.picture:this.user.picture?this.serverUrl+"/upload/profile/"+this.user.picture:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")},updateProfile:function(){this.$router.push("/user/updateprofile")},disconnect:function(){this.$router.push("/user/logout")},removeFriend:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.userId,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rt.removeFriend(r);case 2:o["a"].set(e.user,"status","normal");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()}}},_s=ys,Ss=Object(ye["a"])(_s,ws,ks,!1,null,null,null),xs=Ss.exports,Cs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll background-dark"},[r("div",{attrs:{id:"teaser q-mb-lg"}},[r("div",{style:"padding-top: "+("quest"===e.type?"302":"258")+"px;"},["quest"===e.type&&e.results.quests&&e.results.quests.length>0?r("div",[r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherQuests}},[r("questsList",{attrs:{format:"big",quests:e.results.quests}})],1)],1):e._e(),"designer"===e.type&&e.results.designers&&e.results.designers.length>0?r("div",[r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[r("usersList",{attrs:{format:"list",users:e.results.designers}})],1)],1):e._e(),"player"===e.type&&e.results.players&&e.results.players.length>0?r("div",[r("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[r("usersList",{attrs:{format:"list",users:e.results.players}})],1)],1):e._e(),"quest"===e.type&&e.results.quests&&0===e.results.quests.length?r("div",{staticClass:"centered q-pa-md",nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[r("q-icon",{attrs:{name:"explore",size:"2rem"}}),e._v("\n        "+e._s(e.$t("label.NoQuestForThisSearch"))+"\n        "),r("div",[r("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1):e._e(),"designer"===e.type&&e.results.designers&&0===e.results.designers.length?r("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoDesignerForThisSearch"))+"\n      ")]):e._e(),"player"===e.type&&e.results.players&&0===e.results.players.length?r("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisSearch"))+"\n      ")]):e._e()]),r("q-scroll-observer",{on:{scroll:e.onScroll}}),r("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[r("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-4",class:{"box-unselected":"quest"!==e.type},on:{click:function(t){return e.selectType("quest")}}},[e.scrollInfo.position<20?r("div",{staticClass:"search-box-top search-quest-box-top"},[r("img",{attrs:{src:"statics/images/icon/key-big.svg"}})]):e._e(),r("div",{staticClass:"search-box-bottom search-quest-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.EscapeGame"))+"\n          ")])]),r("div",{staticClass:"col-4",class:{"box-unselected":"designer"!==e.type},on:{click:function(t){return e.selectType("designer")}}},[e.scrollInfo.position<20?r("div",{staticClass:"search-box-top search-creator-box-top"},[r("img",{attrs:{src:"statics/images/icon/puzzle-big.svg"}})]):e._e(),r("div",{staticClass:"search-box-bottom search-creator-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Designers"))+"\n          ")])]),r("div",{staticClass:"col-4",class:{"box-unselected":"player"!==e.type},on:{click:function(t){return e.selectType("player")}}},[e.scrollInfo.position<20?r("div",{staticClass:"search-box-top search-user-box-top"},[r("img",{attrs:{src:"statics/images/icon/user-big.svg"}})]):e._e(),r("div",{staticClass:"search-box-bottom search-user-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Players"))+"\n          ")])])]),"quest"===e.type?r("div",[r("div",{staticClass:"row q-pa-sm"},[r("div",{staticClass:"col-6",class:{"tab-unselected":"around"!==e.subtype},on:{click:function(t){return e.selectSubtype("around")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.AroundYou"))+"\n            ")])]),r("div",{staticClass:"col-6",class:{"tab-unselected":"friends"!==e.subtype},on:{click:function(t){return e.selectSubtype("friends")}}},[r("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.FriendsQuests"))+"\n            ")])])])]):e._e(),r("div",[r("q-input",{staticClass:"q-px-md arial",attrs:{dark:"",debounce:"500",placeholder:e.$t("label.Search")},on:{input:function(t){return e.find()}},scopedSlots:e._u([""!==e.search.text?{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"close"}})]},proxy:!0}:null],null,!0),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1)],1)],1),r("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},qs=[],Ts=(r("386d"),{components:{geolocation:ct,questsList:zt,usersList:or},data:function(){return{type:"quest",subtype:null,results:{quests:null,designers:null,players:null},search:{text:"",limit:10,skip:0},user:{position:null},scrollInfo:{},findQuestWhenLocationIsKnown:!0,serverUrl:"https://api.graaly.com"}},mounted:function(){this.$route.params.subtype&&(this.subtype=this.$route.params.subtype),this.$route.params.type&&(this.type=this.$route.params.type),"around"!==this.subtype&&this.find()},methods:{selectType:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.type=e,t.subtype="none",r.next=4,t.find();case 4:case"end":return r.stop()}}),r)})))()},selectSubtype:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.subtype=e,t.search.text="",t.search.skip=0,r.next=5,t.find();case 5:case"end":return r.stop()}}),r)})))()},find:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("quest"!==e.type){t.next=5;break}return t.next=3,e.findQuests();case 3:t.next=14;break;case 5:if("player"!==e.type){t.next=11;break}return e.search.skip=0,t.next=9,e.findUser("player");case 9:t.next=14;break;case 11:return e.search.skip=0,t.next=14,e.findUser("designer");case 14:case"end":return t.stop()}}),t)})))()},findUser:function(e){var t=this;return n()(i.a.mark((function r(){var a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!(t.search.text.length>3)){r.next=8;break}return t.subtype="keyword",t.$q.loading.show(),r.next=6,rt.find(e,t.search.text);case 6:a=r.sent,a&&a.data?"player"===e?t.results.players=a.data:t.results.designers=a.data:t.displayNetworkIssueMessage();case 8:t.$q.loading.hide(),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),t.$q.loading.hide();case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},loadOtherUsers:function(e,t){if(this.search.skip>=10){var r=this;rt.find(this.type,this.search.text,this.search.skip,(function(e,a){r.search.skip+=r.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&("player"===type?r.results.players=r.results.players.concat(a.data):r.results.designers=r.results.designers.concat(a.data),t())}))}},findQuests:function(){var e=this;return n()(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!("keyword"!==e.subtype||e.search.text.length>3)){t.next=22;break}if(e.search.text.length>3&&(e.subtype="keyword"),e.$q.loading.show(),r=e.user.position,"keyword"!==e.subtype){t.next=11;break}return t.next=8,tt.find(e.search.text,r,0,10);case 8:a=t.sent,t.next=21;break;case 11:if("around"!==e.subtype){t.next=17;break}return t.next=14,tt.listNearest(r,0);case 14:a=t.sent,t.next=21;break;case 17:if("friends"!==e.subtype){t.next=21;break}return t.next=20,tt.listFriendQuests();case 20:a=t.sent;case 21:a&&a.data?("friends"===e.subtype?e.results.quests=e.formatRunResults(a.data):e.results.quests=a.data,e.search.skip=a.data.length,e.user.position&&(e.results.quests=e.results.quests.map((function(e){var t=6378.137,a=e.location.coordinates[1]*Math.PI/180-r.latitude*Math.PI/180,i=e.location.coordinates[0]*Math.PI/180-r.longitude*Math.PI/180,s=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),n=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return e.distance=Math.floor(t*n),e})))):e.displayNetworkIssueMessage();case 22:e.$q.loading.hide(),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0),e.$q.loading.hide();case 29:case"end":return t.stop()}}),t,null,[[0,25]])})))()},loadOtherQuests:function(e,t){if(this.user.position&&this.search.skip>=10){var r=this;"around"===this.subtype?tt.listNearestSync(this.user.position,null,this.search.skip,(function(e,a){r.search.skip+=r.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(r.results.quests=r.results.quests.concat(a.data),t())})):"friends"===this.subtype?tt.listFriendQuestsync(null,this.search.skip,(function(e,a){r.search.skip+=r.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(r.results.quests=r.results.quests.concat(this.formatRunResults(a.data)),t())})):tt.findSync(this.search.text,this.user.position,null,this.search.skip,(function(e,a){r.search.skip+=r.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(r.results.quests=r.results.quests.concat(a.data),t())}))}},formatRunResults:function(e){for(var t=[],r=0;r<e.length;r++)t.push({questId:e[r].questId,picture:e[r].questData.picture,title:e[r].questData.title,location:{town:e[r].questData.town},playStatus:e[r].status?e[r].status:"succeeded",points:e[r].stars});return t},displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},onLocationSuccess:function(e){var t=this;return n()(i.a.mark((function r(){return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.$set(t.user,"position",e.coords),!t.findQuestWhenLocationIsKnown){r.next=5;break}return t.findQuestWhenLocationIsKnown=!1,r.next=5,t.find();case 5:case"end":return r.stop()}}),r)})))()},onLocationError:function(e){e&&(this.user.position=null)},onScroll:function(e){this.scrollInfo=e},backToTheMap:function(){this.$router.back()}}}),Es=Ts,Ps=Object(ye["a"])(Es,Cs,qs,!1,null,null,null),As=Ps.exports,Ms=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"page-content top-padding-middle"},[r("div",{staticClass:"background-dark q-pa-md"},[r("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){return e.$router.push("/home")}}},[r("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),r("div",{staticClass:"title2 centered"},[e._v("Administration")])]),r("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[r("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Validation",default:""}}),r("q-tab",{attrs:{name:"rejected",icon:"sentiment_very_dissatisfied",label:"Rejected"}}),r("q-tab",{attrs:{name:"earnings",icon:"price",label:"Earnings"}}),r("q-tab",{attrs:{name:"statistics",icon:"stats",label:"Statistics"}}),r("q-tab",{attrs:{name:"limitations",icon:"stats",label:"Limitations"}})],1),r("q-separator"),r("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[r("q-tab-panel",{attrs:{name:"validation"}},[r("q-list",{attrs:{highlight:""}},[e._l(e.questsToValidate.items,(function(t){return r("q-item",{key:t._id},[r("q-item-section",{attrs:{avatar:""},nativeOn:{click:function(r){return e.$router.push("/quest/play/"+t.questId)}}},[r("q-avatar",[t.thumb?r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():r("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),r("q-item-section",{nativeOn:{click:function(r){return e.$router.push("/quest/play/"+t.questId)}}},[r("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?r("q-item-label",{attrs:{caption:""}},[r("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"unpublished"==t.status?r("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e(),"tovalidate"===t.status?r("q-item-label",{attrs:{caption:""}},[e._v("\n                UserId : "+e._s(t.authorUserId)),r("br"),e._v("\n                access : "+e._s(t.access)),r("br"),e._v("\n                "+e._s(t.isPremium?"premium":"individual")+"\n              ")]):e._e()],1),r("q-item-section",{attrs:{side:""}},[r("q-btn",{attrs:{icon:"check"},on:{click:function(r){return e.validate(t.questId,t.version)}}})],1)],1)})),0===e.questsToValidate.items.length?r("q-item",[r("q-item-label",[e._v("No quest to validate")])],1):e._e()],2)],1),r("q-tab-panel",{attrs:{name:"rejected"}},[r("q-list",{attrs:{highlight:""}},[e._l(e.questsRejected.items,(function(t){return r("q-item",{key:t._id,nativeOn:{click:function(r){return e.$router.push("/quest/play/"+t.questId)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",[t.thumb?r("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():r("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),r("q-item-section",[r("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?r("q-item-label",{attrs:{caption:""}},[r("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"published"!==t.status?r("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)})),0===e.questsRejected.items.length?r("q-item",[r("q-item-label",[e._v("No quest rejected")])],1):e._e()],2)],1),r("q-tab-panel",{attrs:{name:"earnings"}},[e._v("\n        Eearnings of games:\n        "),r("q-list",{attrs:{highlight:""}},[e._l(e.earnings.items,(function(t){return r("q-item",{key:t.questId},[r("q-item-section",[t.title.fr?r("q-item-label",[e._v("\n                "+e._s(t.title.fr)+"\n              ")]):e._e(),!t.title.fr&&t.title.en?r("q-item-label",[e._v("\n                "+e._s(t.title.en)+"\n              ")]):e._e(),r("q-item-label",{attrs:{caption:""}},[e._v("\n                revenues:"+e._s(t.earnings)+" | QR codes used:"+e._s(t.tierEarnings)+" "),t.premiumPrice&&t.premiumPrice.manual?r("span",[e._v("(x"+e._s(t.premiumPrice.manual)+")")]):e._e()])],1)],1)})),0===e.games.items.length?r("q-item",[r("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1),r("q-tab-panel",{attrs:{name:"limitations"}},[e._v("\n        Published games with limitations:\n        "),r("q-list",{attrs:{highlight:""}},[e._l(e.limitations.items,(function(t){return r("q-item",{key:t.questId},[r("q-item-section",[t.title.fr?r("q-item-label",[e._v("\n                "+e._s(t.title.fr)+"\n              ")]):e._e(),!t.title.fr&&t.title.en?r("q-item-label",[e._v("\n                "+e._s(t.title.en)+"\n              ")]):e._e(),r("q-item-label",{attrs:{caption:""}},[r("span",{class:{"text-red":t.limitations.nbPlays<=t.nbPlayers}},[e._v("Crédits disponibles:"+e._s(t.limitations.nbPlays)+" | Parties jouées:"+e._s(t.nbPlayers))])])],1)],1)})),0===e.games.items.length?r("q-item",[r("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1),r("q-tab-panel",{attrs:{name:"statistics"}},[e._v("\n        Best games of the month:\n        "),r("q-list",{attrs:{highlight:""}},[e._l(e.games.items,(function(t){return r("q-item",{key:t._id.questId},[r("q-item-section",[t._id.questData.fr?r("q-item-label",[e._v(e._s(t._id.questData.fr))]):e._e(),!t._id.questData.fr&&t._id.questData.en?r("q-item-label",[e._v(e._s(t._id.questData.en))]):e._e(),r("q-item-label",{attrs:{caption:""}},[e._v("Monthly:"+e._s(t.monthNb)+" Weekly:"+e._s(t.weekNb)+" rating:\n                "+e._s(t.rating))])],1)],1)})),0===e.games.items.length?r("q-item",[r("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1)],1)],1)])},Is=[],Rs={ListQuestsToValidate:function(){return Re().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return Re().get("admin/quests/rejected")},ListTowns:function(){return Re().get("admin/towns")},ListBestGames:function(){return Re().get("admin/bestgames")},ListEarnings:function(){return Re().get("admin/earnings")},ListLimitations:function(){return Re().get("admin/limitations")},publish:function(e){return Re().get("admin/quests/publish/"+e)},CreateTown:function(e){return Re().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return Re().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return Re().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))}},Os={data:function(){return{questsToValidate:{items:[]},questsRejected:{items:[]},towns:{items:[]},games:{items:[]},earnings:{items:[]},limitations:{items:[]},adminTab:"validation",serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadQuestsToValidate(),this.loadQuestsRejected(),this.loadStatistics(),this.loadEarnings(),this.loadLimitations()},methods:{loadQuestsToValidate:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListQuestsToValidate();case 2:r=t.sent,e.questsToValidate.items=r.data.quests;case 4:case"end":return t.stop()}}),t)})))()},loadTowns:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListTowns();case 2:r=t.sent,e.towns.items=r.data.towns;case 4:case"end":return t.stop()}}),t)})))()},loadStatistics:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListBestGames();case 2:r=t.sent,e.games.items=r.data.games;case 4:case"end":return t.stop()}}),t)})))()},loadEarnings:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListEarnings();case 2:r=t.sent,e.earnings.items=r.data.earnings;case 4:case"end":return t.stop()}}),t)})))()},loadLimitations:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListLimitations();case 2:r=t.sent,e.limitations.items=r.data.limitations;case 4:case"end":return t.stop()}}),t)})))()},validate:function(e,t){var r=this;return n()(i.a.mark((function a(){return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$router.push("/admin/validate/"+e+"/version/"+t);case 1:case"end":return a.stop()}}),a)})))()},loadQuestsRejected:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.ListQuestsRejected();case 2:r=t.sent,e.questsRejected.items=r.data.quests;case 4:case"end":return t.stop()}}),t)})))()},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},$s=Os,Fs=Object(ye["a"])($s,Ms,Is,!1,null,null,null),Ds=Fs.exports,Ns=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[e.quest.title?r("div",{staticClass:"page-content top-padding-middle"},[r("p",[e._v("\n      Validation of the quest "),r("strong",[e._v(e._s(e.quest.title))])]),r("p",[r("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),r("p",[r("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),r("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the\n      quest is rejected\n    ")])]):e._e()])},Ls=[],js={data:function(){return{quest:{},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.questId,e.$route.params.version);case 2:case"end":return t.stop()}}),t)})))()},methods:{getQuest:function(e,t){var r=this;return n()(i.a.mark((function a(){var s;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,tt.getById(e,t);case 2:s=a.sent,r.quest=s.data;case 4:case"end":return a.stop()}}),a)})))()},publish:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.publish(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},reject:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.reject(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()}}},zs=js,Hs=Object(ye["a"])(zs,Ns,Ls,!1,null,null,null),Bs=Hs.exports,Us=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"page-content top-padding-middle"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[r("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),r("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),r("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),r("div",[r("q-icon",{attrs:{name:"explore"}}),r("p",[e._v("GPS location bottom left")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),r("div",{staticClass:"col"},[r("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),r("div",[r("q-icon",{attrs:{name:"explore"}}),r("p",[e._v("GPS location top right")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),r("div",{staticClass:"col"},[r("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,a){return r("div",{key:a},[r("q-icon",{attrs:{name:"place"}}),r("p",[e._v("Place")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-9"},[r("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"place.name"}})],1),r("div",{staticClass:"col"},[e.isIOs?e._e():r("div",[""===t.picture?r("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+a].click()}}}):e._e(),r("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1),e.isIOs?r("div",[r("q-icon",{attrs:{name:"cloud_upload"}}),r("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1):e._e(),""!==t.picture?r("div",[r("img",{staticStyle:{width:"50px"},attrs:{src:e.serverUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),r("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(r){e.$set(t,"type",r)},expression:"place.type"}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(r){e.$set(t.location,"lng",r)},expression:"place.location.lng"}})],1),r("div",{staticClass:"col"},[r("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(r){e.$set(t.location,"lat",r)},expression:"place.location.lat"}})],1)])],1)})),r("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),r("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},Qs=[],Ws={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:et.isIOS(),serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlace();case 1:case"end":return t.stop()}}),t)})))()},methods:{configureTown:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.CreateTown(e.form.fields);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(e,t){var r=this;return n()(i.a.mark((function a(){var s,n,o;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.$q.loading.show(),s=t.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Rs.uploadPlaceImage(n);case 8:o=a.sent,o&&o.hasOwnProperty("data")&&(r.form.fields.places[e].picture=o.data.file,r.$q.loading.hide());case 10:case"end":return a.stop()}}),a)})))()}},validations:{form:{fields:{name:{required:Wt["required"]},zipcode:{required:Wt["required"]}}}}},Ys=Ws,Vs=Object(ye["a"])(Ys,Us,Qs,!1,null,null,null),Gs=Vs.exports,Ks=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper background-map"},[r("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),r("div",{staticClass:"q-pa-md"},[r("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),r("form",{staticClass:"q-pa-lg",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},["generic"===e.step?r("q-input",{attrs:{outlined:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName"),"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),"generic"===e.step?r("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:function(t){e.$v.form.email.$touch,e.checkEmail()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):e._e(),"generic"===e.step?r("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.form.password.$error,"error-message":e.$v.form.password.checkPasswordComplexity?e.$v.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule"),"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"location"===e.step?r("q-select",{attrs:{outlined:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.sex.$error,"error-message":e.$t("label.PleaseSelectYourSex"),"test-id":"sex"},on:{blur:e.$v.form.sex.$touch},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}):e._e(),"location"===e.step?r("q-select",{attrs:{outlined:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge"),"test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}):e._e(),"location"===e.step?r("q-select",{attrs:{outlined:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry"),"test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}):e._e(),"location"===e.step?r("q-input",{attrs:{outlined:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",error:e.$v.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode"),"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}):e._e(),"location"===e.step?r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("q-checkbox",{attrs:{dark:"","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),r("div",{staticClass:"col secondary-font-small"},[r("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.form.terms.$error?r("div",{staticClass:"q-field-bottom"},[r("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),"location"===e.step?r("div",{staticClass:"row"},[r("div",{staticClass:"col-2"},[r("q-checkbox",{attrs:{dark:"","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),r("div",{staticClass:"col secondary-font-small"},[r("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.form.privacy.$error?r("div",{staticClass:"q-field-bottom"},[r("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),"validation"===e.step?r("div",[r("p",{attrs:{"test-id":"enter-code"}},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),r("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?r("p",{staticClass:"text-right q-mt-md q-mb-md"},[r("a",{on:{click:function(t){return e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?r("p",{staticClass:"text-center q-mt-md q-mb-md"},[r("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),r("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg"},[r("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:e.formDisabled,color:"primary",label:e.$t("label.Subscribe"),loading:e.submitting,type:"submit"}})],1),r("div",{staticClass:"centered q-mt-sm q-mb-lg"},[r("a",{on:{click:function(t){return e.goToSignIn()}}},[e._v(e._s(e.$t("label.IAlreadyHaveAnAccount")))])]),r("p")],1)])])])},Js=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"centered q-pt-lg q-pb-md"},[r("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],Xs={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,formDisabled:!0,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?Di:Ni,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){et.clearAllRunningProcesses()},methods:{formSubmit:function(){var e=this;return n()(i.a.mark((function t(){var r,a,s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?8:"validation"===t.t0?23:"firstusage"===t.t0?30:32;break;case 3:return e.$v.form.password.$touch(),e.$v.form.email.$touch(),e.$v.form.name.$touch(),e.$v.form.password.$error||e.$v.form.email.$error||e.$v.form.name.$error||(e.step="location"),t.abrupt("break",32);case 8:if(e.$v.form.country.$touch(),e.$v.form.zipCode.$touch(),e.$v.form.sex.$touch(),e.$v.form.age.$touch(),e.$v.form.terms.$touch(),e.$v.form.privacy.$touch(),e.$v.form.country.$error||e.$v.form.zipCode.$error||e.$v.form.sex.$error||e.$v.form.age.$error||e.$v.form.terms.$error||e.$v.form.privacy.$error){t.next=22;break}return r={name:e.form.name,email:e.form.email,sex:e.form.sex,age:e.form.age,password:e.form.password,zipcode:e.form.zipCode,country:e.form.country,language:e.$i18n.locale},e.submitting=!0,t.next=19,Oe.createAccount(r);case 19:a=t.sent,a.status&&200===a.status&&a.data&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Ee.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),e.openHome()):ft(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 22:return t.abrupt("break",32);case 23:return t.next=25,Oe.validateAccount(e.form.email,e.form.code);case 25:return s=t.sent,e.submitting=!0,s.status&&200===s.status?e.openHome():s.data&&"You have tries too much codes"===s.data.message?ft(e.$t("label.YourAccountIsBlocked"),"warning"):ft(e.$t("label.IncorrectCodePleaseRetry"),"warning"),e.submitting=!1,t.abrupt("break",32);case 30:return e.openHome(),t.abrupt("break",32);case 32:case"end":return t.stop()}}),t)})))()},openHome:function(){var e="/home";this.$route.query.hasOwnProperty("redirect")&&(e=this.$route.query.redirect),this.$router.push(e)},checkUserIsExisting:function(e){return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Oe.checkEmail(e);case 2:if(r=t.sent,!(r&&r.data&&r.data.hasOwnProperty("existing")&&!0===r.data.existing)){t.next=7;break}return t.abrupt("return",{status:r.data.status});case 7:if(!(r&&r.data&&r.data.hasOwnProperty("existing")&&!1===r.data.existing)){t.next=11;break}return t.abrupt("return",{status:"missing"});case 11:return t.abrupt("return",{error:"technical issue"});case 12:case"end":return t.stop()}}),t)})))()},checkEmail:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error){t.next=5;break}return t.next=3,e.checkUserIsExisting(e.form.email);case 3:r=t.sent,r&&r.status?"active"===r.status?ft(e.$t("label.EmailAlreadyUsed"),"error"):"new"===r.status?e.$router.push("/user/createAccount/validation"):"blocked"===r.status?ft(e.$t("label.YourAccountIsBlocked"),"warning"):e.formDisabled=!1:ft(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},backAction:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?5:"validation"===t.t0?7:10;break;case 3:return e.$router.push("/user/login"),t.abrupt("break",10);case 5:return e.step="generic",t.abrupt("break",10);case 7:return t.next=9,e.goToSignIn();case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})))()},goToSignIn:function(){var e=this;return n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/login");case 1:case"end":return t.stop()}}),t)})))()},generateANewCode:function(){var e=this;return n()(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Oe.generateANewValidationCode(e.form.email);case 3:r=t.sent,200===r.status?ft(e.$t("label.ANewCodeHasBeenSent"),"info"):ft(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()}},validations:{form:{email:{required:Wt["required"],email:Wt["email"]},name:{required:Wt["required"]},country:{required:Wt["required"]},zipCode:{required:Wt["required"]},age:{required:Wt["required"]},sex:{required:Wt["required"]},terms:{sameAs:Object(Wt["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(Wt["sameAs"])((function(){return!0}))},password:{required:Wt["required"],minLength:Object(Wt["minLength"])(8),checkPasswordComplexity:xi}}}},Zs=Xs,en=Object(ye["a"])(Zs,Ks,Js,!1,null,null,null),tn=en.exports,rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{staticStyle:{width:"100%"},attrs:{src:"/statics/icons/game/oops.png"}}),"upgraderequired"===e.errorType&&e.isHybrid?r("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.UpgradeRequired"))+"\n  ")]):e._e(),"upgraderequired"!==e.errorType||e.isHybrid?e._e():r("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.RefreshCacheRequired"))+"\n  ")]),null===e.errorType?r("h3",[e._v("\n    "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n  ")]):e._e(),null!==e.errorMessage?r("p",[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),null===e.errorType?r("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()])},an=[],sn={data:function(){return{errorMessage:null,errorType:null,isHybrid:window.cordova}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},nn=sn,on=(r("17eb"),Object(ye["a"])(nn,rn,an,!1,null,"6e5dc249",null)),ln=on.exports,cn=[{path:"/",component:We,children:[{path:"",name:"none",redirect:"/home",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",redirect:"/user/login",meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang",name:"teamplay",component:za,meta:{requiresAuth:!1}},{path:"home",name:"home",component:pr,meta:{requiresAuth:!0}},{path:"map",name:"map",component:wr,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:Hr,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:Ea,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:$a,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:Za,meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:Ya,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:yi,meta:{requiresAuth:!0}},{path:"user/createAccount/:step",name:"signup",component:tn,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:Ei,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:Oi,meta:{requiresAuth:!0}},{path:"user/:id/quests/:type",name:"quests",component:es,meta:{requiresAuth:!0}},{path:"user/:id/friends",name:"friends",component:ns,meta:{requiresAuth:!0}},{path:"user/:id/badges",name:"badges",component:vs,meta:{requiresAuth:!0}},{path:"search/:type/:subtype",name:"search",component:As,meta:{requiresAuth:!0}},{path:"user/ranking/:type/:subtype",name:"ranking",component:Vi,meta:{requiresAuth:!0}},{path:"profile/:id",name:"profile",component:xs,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"updateprofile",component:Hi,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:Ds,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:Bs,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:Gs,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:ln,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return r.e(2).then(r.bind(null,"ee5d"))}}];o["a"].use(je["a"]);var un=new je["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:cn}),dn=un,pn=function(){return fn.apply(this,arguments)};function fn(){return fn=n()(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Le){e.next=6;break}return e.next=3,Le({Vue:o["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Le;case 7:if(t=e.t0,"function"!==typeof dn){e.next=14;break}return e.next=11,dn({Vue:o["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=dn;case 15:return r=e.t1,t.$router=r,a={router:r,store:t,render:function(e){return e(Se)}},a.el="#q-app",e.abrupt("return",{app:a,store:t,router:r});case 20:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}var mn=r("9483");Object(mn["a"])("service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var hn=r("dc21"),bn=r("e594");hn["a"]({dsn:"https://1817b5e5250c40949ba1b2a25e0f2296@o426546.ingest.sentry.io/5368714",integrations:[new bn["a"]({Vue:o["a"],attachProps:!0})]});var gn,vn=r("c1df"),wn=r.n(vn),kn=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(wn.a.locale(t),e)return wn()(String(e)).fromNow()}))},yn=r("a925"),_n=r("3013"),Sn=r.n(_n),xn=function(e){var t=e.app,r=e.Vue;r.use(yn["a"]),t.i18n=new yn["a"]({locale:"fr",messages:Sn.a}),gn=t.i18n},Cn=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=n()(i.a.mark((function e(t,r,a){var s,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=13;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Le.state.user||(Le.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,points:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),a(),e.next=11;break;case 7:return e.next=9,Oe.getAccount();case 9:s=e.sent,s&&s.data&&s.data.name?s.data.clientSupportedVersion&&s.data.clientSupportedVersion>"2.1.9"?a({path:"/error/upgraderequired"}):(Le.state.user=s.data,a()):Le.state.user?s&&s.status&&200!==s.status?(401===s.status?ft(gn.t("label.SessionExpired"),"error"):ft(gn.t("label.AuthCheckError"),"error"),a({path:"/user/login",query:"/"===r.path?null:{redirect:t.fullPath}})):a():(n=qe["get"]("firstusage"),n&&"ok"===n?a({path:"/user/login",query:"/"===r.path?null:{redirect:t.fullPath}}):(qe["set"]("firstusage","ok",{expires:36500,secure:!0}),a({path:"/firstusage"})));case 11:e.next=14;break;case 13:a();case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("Error in RouterAuthentication:",e.t0),a();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,r,a){return e.apply(this,arguments)}}())},qn=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var r=e.hash.split("/");"quest"===r[1]&&"play"===r[2]&&t.push("/quest/play/"+r[3])}}))}}),!1)},Tn=function(e){var t=e.Vue;t.use(hr,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},En=r("1dce"),Pn=r.n(En),An=function(e){var t=e.Vue;t.use(Pn.a)};function Mn(){return In.apply(this,arguments)}function In(){return In=n()(i.a.mark((function e(){var t,r,a,s,n,l,c,u,d;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pn();case 2:t=e.sent,r=t.app,a=t.store,s=t.router,n=!0,l=function(e){n=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[void 0,kn,Cn,qn,Tn,xn,An],d=0;case 11:if(!(!0===n&&d<u.length)){e.next=29;break}if("function"===typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:r,router:s,store:a,Vue:o["a"],ssrContext:null,redirect:l,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==n){e.next=31;break}return e.abrupt("return");case 31:new o["a"](r);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),In.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&r.e(0).then(r.t.bind(null,"a0db",7)),Mn()},3:function(e,t){},3013:function(e,t){var r="https://graaly.com",a="sales@graaly.com",i={privacy:{en:r+"/privacy-policy/",fr:r+"/fr/confidentialite/"},terms:{en:r+"/terms/",fr:r+"/fr/cgu/"}};e.exports={en:{color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White",gray:"Gray",pink:"Pink",purple:"Purple",orange:"Orange",yellow:"Yellow",brown:"Brown"},news:{newQuestWon:"Has won the game <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the game <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your game <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on game <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the games you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in games during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video & text",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Geolocation",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",ImageOverFlow:"superimpose image and camera",ImageOverFlowDesc:"superimpose transparent image and camera flow",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Scan a QR Code",LocateMarkerDesc:"Player has to find a QR code.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"End of chapter",EndOfChapterDesc:"This transition send player to next chapter",TriggerEvent:"Graaly -> your material",TriggerEventDesc:"Graaly physical a physical action (using an electronic board)",WaitForEvent:"Your material -> Graaly",WaitForEventDesc:"A physical action activate a step (using an electronic card)",HelpStep:"Help page",HelpStepDesc:"How to use Graaly, presentation of the buttons for the players.",PortraitRobot:"Composite picture - BETA",PortraitRobotDesc:"Create suspect face based on face items",PhoneCall:"Pnone call - BETA",PhoneCallDesc:"Launch a phone call to a defined number",Binocular:"Binoculars - BETA",BinocularDesc:"Search in a picture using binoculars"},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected",new:"new"},story:{hint:"Hint: <br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!"},iotObjects:{keypad:"Keypad",joystick:"Joystick",distance:"Distance",pot:"Potentiometers",lcd:"LCD display",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Chest",button:"Button",relay:"Relay"},days:{day0:"Sunday",day1:"Monday",day2:"Tuesday",day3:"Wednesday",day4:"Thursday",day5:"Friday",day6:"Saturday"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",BackToMap:"Back",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the games near your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (It can takes up to 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error has occured, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again oin one hour",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be at least 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you are using Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful games",QuestsCreated:"Created games",CreateANewQuest:"Create a new game",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No game created",NoQuestPlayed:"No game played",NoQuestPlayedLong:"No game played. To play a game, return to the home page!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",MyProfile:"My profile",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to ?",ReachScoreOf:"Reach a score of {score} to unlock new games",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play",ContinueTheQuest:"Continue the game",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",km:"km",NoQuestForThisSearch:"No game for this search",NoPlayerForThisSearch:"No player for this search",NoDesignerForThisSearch:"No designer for this search",WhyDontYouCreateAQuest:"Why don't you create a game?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",InventoryZoom:"Touch an objet to zoom",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this game",YouAlreadyStartThisQuest:"You have already played this game, do you want to continue where you last left it?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",Hints:"Hints",CreateYourQuest:"New game",CreateYourPrivateQuest:"Create your private game!",CreateYourPublicQuest:"Create your public game!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</p><p>The story of your game must not undermine living or dead people</li><li>Your game must concern a location where no game has already be done, except if the content is different enough.</li><li>Your game must have more than 6 steps. We advise you to have less than 70 steps</li><li>Our moderation team will check if your game respects these rules, and if the quality level is enough. If not, you will be asked to improve your game, or your game will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 20 invitees (for more, please contact us)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 200 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny game to challenge players and win points!",BuilderProIntro:"Create your game on Graaly",BuilderChooseUserType:"Are you:",BuilderAddRoomMessage:"<p>By adding your room, you can benefit from services for free: <ul><li>Visibility in our directory</li><li>Statistics</li><li>Link to your reservation page</li><li>Suggestion of your room to our community</li></ul></p><p>Your customers can benefit also from free services: <ul><li>Find your rooms around them</li><li>Follow escape games played by their friends and challenge them on your rooms</li><li>Save their results and win points to challenge their friends</li></ul></p>",AProfessional:"professional",AProfessionalDesc1:"As a professional, you can use advanced Graaly features (statistics, advanced customization, monetization, easy start QR code ...)",AnIndividual:"individual",AnIndividualDesc1:"As an individual, you can also create public and private games, with all Graaly features you need",TryForFree:"Test for free",FromPrice:"From",PaymentOnUsage:"Pay as you go",NewQuest:"New game",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the game",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your game is published",YourQuestIsUnpublished:"Your game is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your game",PublishYourQuest:"Publish your game",UnpublishYourQuest:"Unpublish your game",SelectedLanguage:"Create game in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Game",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload an image",AddABackgroundImage:"Add a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of what should be found",UploadTheObjectToFind:"Upload the GLB file of the 3D object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step without testing",SaveAndTestThisStep:"Save and test this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Wrong answer. You have {nb} trial(s) more",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your game",AddYourChapters:"Create a first chapter and add first steps of your game inside",ActivateTheLanguageVisible:"Activate the languages playable for your game",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your game",LanguagesPublished:"Publish game in",LanguagesPublishedForPrivate:"Game is visible for invitees",PageLanguagesPublished:"Publish page in",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave the game",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you points. Are you sure to use it?",YouWin:"You have won",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review this game",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this game in the past",ResolveOtherQuestsToWinPoints:"Play new games to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have no friend yet",YourRanking:"Your ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this game?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",AddressToFind:"Address of the location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the games of a city to win all the rewards",NoRankingYet:"Your rank is not yet calculated, it id calculated once a day",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your game is now read only. Your game will be validated by our game master. This can take a few days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email explaning why",QuestPublicationRejected:"Your game has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"Find the object by looking around and touch it",ObjectSize:"Object size",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the game",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step",YourQuestMustContainAtLeast6Steps:"Your game is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your game is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Your battery is low, please consider charging it",WarningNoNetwork:"Waiting for network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the game element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this game",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this game? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type the email address of the editor you want to invite",InviteInviteesHelp:"Type the email address of the person you want to invite",UserIsNotAGraalyUser:"No more invitee allowed or this person need to create a Graaly account.",EditorIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text",NewHint:"Next hint","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a game",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",FriendsAdded:"You follow this person now",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove this friend ?",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"Create your profile!",WeNeedMoreInformationAboutYouDesc:"It's simple and it unlocks nice features",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",CreateMyAccount:"Create my account",IAlreadyHaveAnAccount:"I already have an account",Reviews:"Reviews",CommentThisQuest:"Comments for game author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the game before sending your review",QuestNotReviewed:"This game has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery game",contactUsPro:'You can find our professional services on <a href="'.concat(r,'" target="_blank">').concat(r,'</a> or contact us at <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again",BackToQuest:"Back to the game",min:"min",pts:"pts",SportQuest:"Nature game",DiscoveryQuest:"Discovery game",CulturalQuest:"Cultural game",ChildQuest:"Children's game",TransportQuest:"Game by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night game",ExtremQuest:"Extreme game",CulinarQuest:"Culinary game",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, it will still be avaible in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before the text appear above the background image (in seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this game (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your gender",PleaseSelectYourAge:"Please select your age range",RankingIntro:"Here are the best players for this game",CloseQuestRanking:"Back to the game",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to the end of the game",NoFriendsLong:"You do not follow people yet",IAgreeTheTermsAndConditions:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(i.terms.en,"', { openExternal: true })\">terms & conditions</a>"),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(i.privacy.en,"', { openExternal: true })\">privacy policy</a>"),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(i.terms.en,"', { openExternal: true })\">Terms & conditions</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(i.privacy.en,"', { openExternal: true })\">Privacy policy</a>"),YourPhoneIsNotCompliantWithThisStepType:"Your device is currently not compatible with this step type. Sorry for the inconvenience, please move to next step",DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have an 'End of chapter' step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the 'introduction step' of a chapter can have no triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe the folowwing stem has been removed, or you created circular conditions)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues in your game",IssuesInYourStep:"Issues in your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a mark, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occured.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this game. If your game is already published, players will play the published version, until you will publish this new game version.",ClickHereToCreateANewQuestVersion:"To edit your game, click here",YourUnderValidationQuests:"currently reviewed",YourRejectedQuests:"Your rejected",YourDraftQuests:"Your drafts",YourPublishedQuests:"Your published",QuestDraftVersion:"Non published game",PageDraftVersion:"Non published page",PrivateQuest:"Private game",PublicQuest:"Public game",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your game, do you want to add it?",Results:"Results",ClosePrivateQuest:"Close the game",ClosePrivateQuestDesc:"After clicking here, your game will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this game? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this game",NoPlayersYetForThisQuest:"No player yet for this game",PrivateQuestDesc1:"Your game is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a game to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your game will be visible and playable by every body",PublicProQuestDesc1:"Your game is playable by all users. You pay a small fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",PublicProQuestDesc2:"<p>If your game is not free, you can either use the in-app payment, or manage the payment your self</p><p>For the in-app payment, Google/Apple take 30% of the revenues</p><p>In all cases, Graaly takes 30% of the revenues</p><p>The rest is for you, so from 40% to 70% of the net revenues.</p><p>Graaly will send you money monthly</p><p>If your game is free for the end users, Graaly will charge you monthly 0,25 € (excl. taxes) per player</p><p>You can disable your game when you want</p><p>Please contact us at contact@graaly.com for more details</p>",PrivateProQuestDesc1:"Your game is dedicated to a list of people. You pay a fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",CreatePrivateQuest:"Create a private game",BuyPrivateQuest:"Buy a private game",OnlyBuyableOnMobile:"Only buyable on mobile",AcceptAndBuyAPrivateQuest:"Accept and buy a private game",CreatePublicQuest:"Create a public game",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this game",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your game is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Game type",helpQuestType:"A chain of clues game is a list of enigmas that follows each other. A game is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first game, we advise you to start with a chain of clues game. You can change a chain of clues game in a game, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Game files",YouDoNotUseAnyMediaYetInYourQuest:"You do not use any media yet in your game",Feedback:"Your feedback",Back:"Back",FeedbackTitle:"Send feedback",FeedbackIntroduction:"To send feedback to this game author, or rate this game, please wait for the end of the game. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your game builder",OrDownloadAFile:"Or download your own picture",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your game...",ErrorOfflineSaving:"Technical issue, you can not play this game without a network connection",QuestNeedNetwork:"You need network to launch this game. Activate your device network, and click on the button when you have network to launch the game",ReloadQuest:"Reload game",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Loading ...",Loading:"Loading ...",YouAreOfflineNoQuestsAvailable:"Sorry, we could not find any game playable offline.",ButtonsColor:"Buttons color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",AvailableTomorrow:"Available tomorrow",byteCharacter:"B",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You already follow this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not follow more than 150 people",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this game without a network connection.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro game",MovePremium:"Move this game to pro mode",PremiumDefinition1:"Give your game more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized game to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable game</u>: you can sell your game to players</li><li>You can access the statistics of your game</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, have a look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your game to premium mode (look at your game settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of game played",NumberOfPlayersYesterday:"Yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by gender",AverageScore:"Average score",AverageDuration:"Average duration (min)",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro games",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro game(s) more",YouCanNotCreateNewQuests:"Yon can not create new pro games. Subscribe to our professional offers on <a href=\"javascript:navigator.app.loadUrl('".concat(r,"', { openExternal: true })\">").concat(r,'</a> or by email at  <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Paying:"Paying",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of game on a mobile device",QuestPlayableOnMobile:"This game is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Game loading failed. You can play the game online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the game. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a game",SuggestANewQuest:"Suggest a new game",YouLikedThisQuest:"You liked this game?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested games to contact the responsible of this place. You will be warned if a game is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Game has been updated",PleaseRestartQuest:"Please restart the game from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code",ScanQRCode:"Scan a QR Code",MarkersToPrint:"Game's QR Codes",MarkersToStartQuest:"Players can start your game by scanning this QR code on the login page",SaveQuestResultsMarker:"Your player can scan a QR Code to save their score with Graaly (scan it on login page or home page). For the players who exited the room in time:<br /><img src='{url3}' /><br />For players who were close to exit the room in time:<br /><img src='{url2}' /><br />For players that did not exit the room<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other games around",UnknowUploadError:"An error occured. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screen. Depending on the screen sizes, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your game. This will motivate them to play your game. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",CreateYourAccountMsg:"Create your account to save your score and play with your friends!",MaybeLater:"Maybe later!",LetsPlay:"Play",NewAccount:"New account",PleaseAcceptDeviceMotionPermissionRequest:"Please allow Graaly to detect the motion of your device, in order to play this part of the game",PleaseAcceptDeviceOrientationPermissionRequest:"Please allow Graaly to detect the orientation of your device, in order to play this part of the game",DoYouWantToCreateAnAccount:"To build a game, you need to create an account. Do you agree to create your account?",UserWithSameEmailAlreadyExisting:"An account already exists with this email address",PasswordTooWeak:"Your password must be more complex (8 caracters and a capital leter and one digit)",AreYouSureYouWantToPublishThisQuest:"Are you sure you want to ask for publishing? You will not be allowed to make changes until Graaly team validate your request",YourCharacter:"Custom character",AddACustomCharacter:"Add a character",helpQuestCharacter:"This character will show up when a player ask for a hint or a Read More message",AvailableColors:"Available colors",TypeColorCode:"Type color code. Ex: #ff55cc",TypeColorCodeName:"Type the color name. Ex: Red",AddNewColor:"Add a new color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>You are far from this game</b>.<br />By solving this game afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this game</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are the owner of this game, you will not win any point",GeneralWarning:"<b>For your safety</b>, do not play Graaly driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",RemoveScoringAndRating:"Hide the score and the rating",TypeEndMessage:"Text replacing the scoring and rating final screen",ThanksForPlaying:"Thanks for playing this game. See you later with new games!",EnlargePictureToFullWidth:"Enlarge the picture to full screen",PlayerCanTakeSnapshot:"Player can take snapshots",SnapshotTaken:"Screenshot saved on your mobile",SnapshotTakenIssue:"Error with the screenshot",NbTrials:"Trials number",UserCanPass:"Player can pass this step",Welcome:"Welcome!",SignIn:"Sign-in",Subscribe:"Subscribe",EmailAlreadyUsed:"This email address is already used. Please sign-in or ask to modify your password",AroundYou:"Close to you",SeeMore:"See more",Designers:"Designers",Difficulty1:"Easy",Difficulty2:"Normal",Difficulty3:"Hard",ClosestQuestToYou:"The game closest to you",YouAreNearThisQuest:"You are close to this game",YouAreInvitedToThisQuest:"You are invited to this game",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Played by friends",ScoreAndBadges:"Score & badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"With this game, you can win:",ScoreRange:"Between {min} and {max} points",InProgressPreparation:"Preparation in progress",Warnings:"Warnings",Follow:"Follow",Followed:"Followed",SolvedQuests:"Solved games",Creations:"Creations",Badges:"Badges",FollowYourFriends:"Follow your friends",CreatedYourFirstQuest:"Create your first game",DoNotFollowAnymore:"Stop following",AllTheseDataAreOptional:"These informations are not mandatory:",DataCountry:"Your country: used to display the relevant games for you",DataZipcode:"Your zip code: used to display the relevant games for you",DataSex:"Your sex: used to display the relevant games for you",DataAge:"Your age: used to hide games not adapted to your age",DataPhone:"Your phone number: used to connect you with your friends",EscapeGame:"Game",EscapeGames:"Games",Players:"Players",YouHaveReachAScore:"You have reached {score} points",LevelReached:"Level reached!",PointsToReachLevel:"{score} points to reach",Friends:"Friends",World:"World",MyCountry:"My country",MyCity:"My city",NoRanking:"No ranking yet",Invitations:"Invitations",YouFollowThem:"You follow",AddYourRoomInTheDirectory:"Add your room in the directory",AddYourRoom:"Add your room",ProAddYourRoom:"You can add you rooms and benefit from many free services",YourRoom:"Your room",PriceFrom:"Price per player from",ReadMoreLink:"Link to the booking page",SmallPicture:"Small picture",SeeYourQuestPage:"Preview the page",FromPricePerPlayer:"From {price} per player",Book:"Book",YourBadges:"Your badges",YouDoNotHaveBadgesYet:"You do not have badges yet. To win badges, you need to play games with rewards.",FollowedPeople:"Followed people",WeNeedYourPositionForThisFeature:"We need your position for this feature",OtherCharacters:"Other characters",BackToTheMap:"Home",or:"or",RefreshCacheRequired:"The application cached on your browser is too old. Please use private navigation to update your cached files",FindFriendManually:"Find friends manually",NoQuestAroundYou:"We did not find games close to you",CachedQuests:"Already loaded",YourPresentation:"Introduce yourself",DuplicateThisQuest:"Clone this game",DoYouWantToOpenClonedQuest:"Do you want to edit the duplicated game now?",OpenTheMap:"games map",ReplacePictureByRedFilter:"Replace picture by red filter",TotalNumberOfPlaysNotFinished:"Number of games in progress",RoomDataWarning:"Some information can be obsolete, do not hesitate to look at the escape game web site for more information",AnonymousUser:"Anonymous user",NotWon:"To be won",OnTopGames:"Featured games",ThisStepOnlyWorkOnMobile:"The QR code scan only works on the mobile app",YourQuestHasNotBeenPublished:"Your game is not published",OnDesktopDisplayMessage:"On computer, you need to reduce your the size of your browser window.",EventCode:"Event code",BoardMacAddress:"Board Mac address",SuccessMessage:"Success message",YourTime:"Your time",LimitNumberOfPlayerInOneHour:"Limit the number of players by hour (0 = unlimited)",TooMuchUsersCurrently:"Too much users are playing currently",OrSelectAnImageInTheList:"Or pick a picture in the list",IotObject:"IoT object",Protocol:"Protocol",SuccessRange:"Success range",SuccessRanges:"Success ranges",WriteTextWarning:"Accents and capital letters are not necessary",DistanceToWin:"Player wins when he is closer to the GPS location than (m)",SplitMessageWithPipe:"Add pipes '|' if you want to split your text in several bubbles",ClickHere:"Click here",FollowTheCreator:"Follow the creator",PlayersNumber:"Minimum number of players",helpQuestMultiplayer:"This define the minimum number of players to play the game. Each player will have his phone, and should have specific missions in the game. For more information about multiplayer, please watch our Youtube tutorials",ThisIsAMultiplayerGame:"This game is multiplayer",JoinATeam:"Join a team",ScanTheLeaderQRCode:"Scan the leader QR Code",CreateATeam:"Create a new team",TeamName:"Team name",CreateTeam:"Create the team",OtherPlayersMustScanThisQRCode:"Other players must scan this QR Code to join your team",ThisIsNotATeamQRCodeValid:"This code is not valid! You must scan a code displayed on the mobile of the person who create the team",MyTeamIsCompleteLetsGo:"Team has scanned, let's go!",YouNeedMoreMembersToPlay:"You need {nb} members to start this game. Current member(s): {members}",Team:"Team",WaitingForOtherUsersActions:"Waiting for other players",WaitingForOtherUsersActionsDesc:"You can not go forward until other players solve their puzzles",CheckIfICanMoveFoward:"Check if I can move forward now!",Player:"Player",All:"All",YouNeedToBeXPlayers:"You need to be at least {nb} to play",YouNeedAtLeastXEditorsToTest:"You need at least {nb} éditors to test this multiplayer game (see Publish tab)",HereAreTheTesters:"This is a multiplayer game. It will be tester by: {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Display of your picture on diffent screen sizes",MyPictureIsNotDisplayedWell:"The display is not correct",MyPictureIsNotDisplayedWellDesc:"<b>If your picture is not correct for all sizes</b>: You need to have a picture with 900 pixels width and 1200 pixels height.<br /><b>If your picture is not correct with the smaller size</b>: You need to add a not useful border of 100px. You can add a black border of 100 pixels to your picture for example",RestartQuest:"Restart game",AreYouSureToRestartThisQuest:"Are you sure to restart this game? You will not gain any point by restarting.",PaymentOnMobile:"Payment on mobile",PaymentOnMobileHelp:"The payment is really simple for players, in one touch. Meanwhile, the Apple / Google stores will take 30% of the revenues.",PaymentOnYourSide:"Payment managed by you",PaymentOnYourSideHelp:"You can manage the payment in your store or with tiers like 4Escape",Payments:"Payments",CreateNewQRCodeForPlay:"Create a new unique QR Code for a player",Create10NewQRCodeForPlay:"Create 10 new unique QR Codes",Create50NewQRCodeForPlay:"Create 50 new unique QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Are you sure to remove this code? If you have sent this code to a player, he will not be able to play any more!",BuyThisQuest:"Buy this game",YouHaveReceivedAQrCodeFrom:"You have received a QR code from {author}",ScanTheUniqueQRCode:"Scan the single use QR code",BuyInOneClick:"Buy in one clic",TechnicalIssueOrCodeAlreadyUsed:"Code already used or technical issue",ChangeTheBackgroundImageOnceClicked:"Change background picture when player has clicked",Message:"Message",Frequency:"Frequency",TriggerTheEvent:"Trigger the event",SearchingBluetoothDevice:"Searching Bluetooth device...",KeypadInput:"Keypad input",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Open",ChestActions:"Chest actions",TriggerMode:"Triggering mode",TriggerModeAuto:"Auto (at step loading)",TriggerModeManual:"Manual (player must touch a button)",helpPlayer:"For each step of a multiplayer game, you need to select the player who will see the step. Other players will not see it, and will have a waiting message until the player solve the enigma. You can display a transition step for all player, but an enigma can only be display for one player. If you need an enigma to be solved by all users, you need to create a step for each player. For more information, please watch our Youtube tutos.",ErrorMessageForNewTeamMember:"Technical issue or number of players reached",YouNeedToUnpublishYourQuestToRemoveIt:"You need to unpublish your game to remove it",PleaseEnterYourTeamName:"Please enter your team name",Version:"Version",CountDownLabel:"Time limit for this step",CountDownIsActive:"Activate the time limit",CountDownWarning:"Are you sure you want to activate the timer ? Make sure that there are no risks for the player, like a road to cross!",CountDownPopupfail:"Time is up !",MaxScore:"Max score",YouMustTestThisStepOnMobile:"You must test this step on a mobile device",AreasNumber:"Number of areas to find",ItRemains:"It remains",s:"s",LetsPlayWithoutAccount:"Play without account",ErrorDownloadNeedsToRestart:"Error while downloading, do you want to restart?",StartCreation:"Start creation?",ErrorTakingSnapshot:"Snapshot has not been taken",YourAudioFile:"Your background music",AddAnAudioFile:"Add a background music",ObjectNeedToBeAppliedOnPicture:"The object is applied on a picture area",ReadNext:"Read more",AlreadyPaied:"Purchased",HelpStepMessageInventory:"Display Inventory button help",HelpStepMessageHint:"Display Hint button help",HelpStepMessagePrevious:"Display Previous button help",HelpStepMessageNext:"Display Next button help",HelpStepMessage:"Welcome in your game interface!\n\nTo play your game, just follow the indications on screen.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></span></span></button></div>With the suitcase, you can access and use the objects won during the game.",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></span></span></button></div>With the light bulb, you can access the hints.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></span></span></button></div>Press the back button to move back to the previous step.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></span></span></button></div>Press the next button to move to the next step.",HelpStepMessageEnd:"If any problem, do not hesitate to close the application, you will restart to the latest step you played.\n\nGood luck and have fun!",KenBurnsEffect:"Zoom out effect on picture",Show:"Show",Hide:"Hide",TotalSellings:"Game sells",RevenuesPayedFloor:"Revenues payed when over 50€",QRCodeMessage:"Message displayed when user needs to scan a QR code (escape game mode)",TeamID:"Team ID",PleaseFillThisForm:"Please fill this field",Zoom:"Zoom",ScheduleGame:"Schedule the game",GameSchedule:"Game schedule",Reset:"Reset",SchedulingDescription:"The game is playable :",From:"From",To:"To",QuestIsNotPlayableNow:"The game is not playable now",OpeningHours:"Opening hours",CreationStudioHelp:"<h3>Help</h3>We propose you several resources to help you using the creation studio:<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Builder guide (fr)</a></li><li>Some <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>video tutorials (fr)</a> to build steps of your game</li></ul>If you meet any issue or if you have questions, do not hesitate to contact us at support@graaly.com.<br /><br />To test your game, we advise you to:<ul><li>test on your phone with the Graaly app</li><li>test on your web browser <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>developer mode</a> (to make it short, click on f12 key, and on the tablet icon). Warning: some steps are not working on this mode (Augmented reality, geolocation, QR code flashing, superimpose image and camera)</li></ul>",TestWithSimulatorWarning:"You will test with the simulator. Some step types are not working on it. For a real test, please use the Graaly mobile application",FontFamily:"Font used for texts",ExportTexts:"Game's texts",Downloads:"Downloads",ForcePlayerToHaveAccount:"Force player to create a Graaly account",ForcePlayerToHaveAccountHelp:"If not activated, users can play your game without creating an account",ShareUserDataWithCreator:"Ask player to share his data with you",ShareUserDataWithCreatorHelp:"A user that plays Graaly accept to share his data with Graaly. You can ask players to share the data with you also. To motivate them, we advise you to make them win something (organize a draw, give a voucher, ...)",YouNeedToCreateYourAccountToPlay:"You need to create your account to play this game",ShareDataWithPartner:"Share your data with the game creator",PartnerAskForYouData:"The creator of this game want to access your data (email address, name). The reason can be to organize a draw, or a competition, or to give you a voucher. Please read the game description for more information",UseHtmlInDescription:"Use HTML tags in the question",DoNotDisplay:"Do not display",AddAnGPSLocation:"Add a GPS location",BuildThePortraitRobot:"Build the picture to find",Education:"Education",EducationDesc:"We do not have an education plan yet, but you can use the professional mode and contact us at contact@graaly.com.",Call:"Call"}},fr:{color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc",gray:"Gris",pink:"Rose",purple:"Violet",orange:"Orange",yellow:"Jaune",brown:"Marron"},news:{newQuestWon:"A réussi le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre jeu <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur le jeu <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos jeux durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est doublée durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"+100 d'énergie","100coinsDesc":"Vous gagnez +100 en énergie","10coins":"+10 énergie","10coinsDesc":"Vous gagnez +10 en énergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Géolocalisation",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",ImageOverFlow:"Superposer image et caméra",ImageOverFlowDesc:"Superposer une image transparente avec la caméra",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser un objet",UseAnItemDesc:"Utiliser un objet de l'inventaire sur une image",LocateItemAR:"Réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité.",LocateMarker:"Scanner un QR Code",LocateMarkerDesc:"Le joueur doit trouver un QR Code.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur au chapitre suivant",TriggerEvent:"Graaly -> Votre matériel",TriggerEventDesc:"Graaly déclenche une action sur votre matériel physique (utilisation d'une carte électronique)",WaitForEvent:"Votre matériel -> Graaly",WaitForEventDesc:"Votre matériel active une étape Graaly (utilisation d'une carte électronique)",HelpStep:"Page d'aide",HelpStepDesc:"Aide à l'utilisation de Graaly, présentation des boutons.",PortraitRobot:"Portrait robot - BETA",PortraitRobotDesc:"Reconstituez le visage des suspects",PhoneCall:"Appel téléphonique - BETA",PhoneCallDesc:"Lancez un appel téléphonique vers un numéro défini",Binocular:"Jumelles - BETA",BinocularDesc:"Rechercher dans une image en utilisant des jumelles"},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Français"},status:{published:"publié",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dépublié",rejected:"rejeté",new:"nouveau"},story:{hint:"Indice :<br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !"},iotObjects:{keypad:"Digicode",joystick:"Joystick",distance:"Distance",pot:"Potentiomètres",lcd:"Afficheur LCD",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Coffre",button:"Bouton",relay:"Relais"},days:{day0:"Dimanche",day1:"Lundi",day2:"Mardi",day3:"Mercredi",day4:"Jeudi",day5:"Vendredi",day6:"Samedi"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (nécessaire pour lister les jeux à proximité de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vérifier que vous avez du réseau et contacter le support si le problème persiste",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte présentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Jeux résolus",QuestsCreated:"Jeux créés",CreateANewQuest:"Créer un nouveau jeu",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucun jeu créé",NoQuestPlayed:"Aucun jeu résolu",NoQuestPlayedLong:"Aucun jeu résolu. Pour résoudre un jeu, retournez à l'accueil !",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Très difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position géographique, mais elle n'a pas pu être récupérée.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : déplacez vous vers une zone dégagée à l'extérieur",GeolocationDisabled:"Géolocalisation désactivée sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l'application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Jouer",ContinueTheQuest:"Continuer le jeu",Language:"Langue",StartingPoint:"Lieu de départ",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",km:"km",NoQuestForThisSearch:"Aucun jeu ne correspond à votre recherche",NoPlayerForThisSearch:"Aucun joueur ne correspond à votre recherche",NoDesignerForThisSearch:"Aucun créateur ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer ce jeu ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",InventoryZoom:"Touchez un objet pour zoomer",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer ce jeu",YouAlreadyStartThisQuest:"Vous avez déjà commencé ce jeu, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",Hints:"Indices",CreateYourQuest:"Nouveau jeu",CreateYourPrivateQuest:"Créez votre jeu privée !",CreateYourPublicQuest:"Créez votre jeu publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre jeu ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre jeu ne doit pas concerner un lieu pour lequel un jeu existe déjà, sauf si le thême est suffisamment différent</li><li>Votre jeu doit faire plus de 6 étapes. Nous vous conseillons d'en créer moins de 70.</li><li>Vous devez posséder les droits des images, vidéos et sons que vous utilisez.</li><li>Les visuels doivent être homogènes (photos réalistes, desssins, ...).</li><li>Notre équipe de modérateurs validera si votre jeu respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre jeu, ou il sera refusé</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 20 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 200 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de créer très simplement, et pas à pas, des jeux ludiques pour les autres joueurs. Ces jeux peuvent être des jeux de piste ou des escape games",BuilderProIntro:"Créez votre jeu avec Graaly",BuilderChooseUserType:"Etes-vous :",BuilderAddRoomMessage:"<p>En ajoutant votre salle, vous pouvez bénéficier gratuitement des services suivants :<ul><li>Visibilité dans notre annuaire</li><li>Statistiques</li><li>Lien vers votre page de réservation</li><li>Suggestion de votre salle à notre communauté</li></ul></p><p>Vos clients bénéficient aussi de services gratuits : <ul><li>Trouvez vos salles autour d'eux</li><li>Suivre les escape games joués par leurs amis et les défier sur vos salles</li><li>Sauver leurs succès pour gagner des points et défier leurs amis</li></ul></p>",AProfessional:"professionnel",AProfessionalDesc1:"En tant que professionnels, vous avez accès à des fonctionnalités avancées de Graaly (statistiques, personnalisation avancée, monétisation, QR code de démarrage rapide ...)",AnIndividual:"particulier",AnIndividualDesc1:"En tant que particulier, vous pouvez aussi créer des jeux, avec tous les types d'énigmes Graaly",TryForFree:"Tester gratuitement",FromPrice:"A partir de",PaymentOnUsage:"Paiement à l'usage",NewQuest:"Nouveau jeu",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ du jeu",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre jeu est publié",YourQuestIsUnpublished:"Votre jeu est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre jeu",PublishYourQuest:"Publier votre jeu",UnpublishYourQuest:"Dépublier votre jeu",SelectedLanguage:"Saisir le jeu en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image",AddABackgroundImage:"Ajouter une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne réponse",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadTheObjectToFind:"Téléchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadrée pour être carrée",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez vérifier que vous avez du réseau et ré-essayer plus tard",TechnicalProblem:"Problème technique",SaveThisStep:"Enregistrer cette étape sans tester",SaveAndTestThisStep:"Enregistrer et tester cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Mauvaise réponse. Il vous reste {nb} essai(s)",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par créer une étape pour votre jeu",AddYourChapters:"Commencez par créer un chapitre, et ajoutez y les premières pages de votre énigme",ActivateTheLanguageVisible:"Activez les langues pour que votre jeu soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invités puissent jouer",LanguagesPublished:"Publier le jeu en",LanguagesPublishedForPrivate:"Rendre visible pour les invités",PageLanguagesPublished:"Publier la fiche en",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter le jeu",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"En utilisant l'indice, vous gagnerez moins de points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous avez gagné",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Votre avis sur ce jeu",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de ce jeu",ResolveOtherQuestsToWinPoints:"Résolvez de nouveaux jeux pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Votre classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter de l'énergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté ce jeu",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OpenLocationSettings:"Ouvrir les paramètres de localisation",AddressToFind:"Adresse du lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",DefineGPSLocation:"Tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Réussissez tous les jeux d'une ville pour obtenir toutes les récompenses",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre jeu n'est plus modifiable. Votre jeu va être validé par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejetée. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre jeu n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Vous êtes proche de l'objet, regardez autour de vous et touchez le",ObjectSize:"Taille de l'objet",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ du jeu",ClickOnArrowToMoveToNextStep:"Appuyez sur la flèche en bas à droite pour passer à l'étape suivante",YourQuestMustContainAtLeast6Steps:"Votre jeu est trop court, vous devez créer au moins 3 étapes",YourQuestMustContainLessThan50Steps:"Votre jeu est trop long, vous devez créer moins de 100 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile pour jouer",WarningNoNetwork:"En attente du réseau ...",WarningLowNetwork:"Réseau faible, veuillez patienter ...",CouldNotDisplayObject:"Désolé, une erreur est survenue au chargement de l'objet à trouver, il ne peut donc pas être affiché. Veuillez redémarrez l'application. Si le problème persiste, passez cette étape.",CouldNotEnableAR:"Nous n'avons pas pu détecter l'orientation de votre téléphone. Pas de panique ! Vous pouvez quand même jouer en mode simple.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer ce jeu",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer ce jeu ? Il sera définivement supprimé.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un éditeur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'éditeur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",EditorIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Sélectionner l'objet dans la liste",HintText:"Texte de l'indice",NewHint:"Indice supplémentaire","2DPicture":"Image à plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Créer un jeu",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnées GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Télécharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complémentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",FriendsAdded:"Vous suivez cettte personne maintenant",InvitationSent:"Invitation envoyée",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numéro de téléphone",InvalidPhoneNumber:"Numéro invalide",AreYouSureYouWantToRemoveThisFriend:"Êtes-vous certain(e) de ne plus vouloir le/la suivre",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de télephone",YourPhoneNumber:"Votre numéro de téléphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous êtes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux caméra",GeolocationFailed:"Impossible de vous géolocaliser",GeolocationFailedDesc:"Nous n'avons pas réussi à vous géolocaliser, soit vous n'avez pas de réseau, soit vous avez bloqué la géolocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Créez votre profil !",WeNeedMoreInformationAboutYouDesc:"C'est simple et ça vous débloque des fonctionnalités utiles",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres données, et vous ne pourrez plus vous connecter à l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",AreYouSureYouWantToRemoveYourAccount:"Êtes-vous sûrs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprimé",CreateMyAccount:"Créer mon compte",IAlreadyHaveAnAccount:"J'ai déjà un compte",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoyé à l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note au jeu avant d'envoyer votre avis.",QuestNotReviewed:"Ce jeu n'a pas encore reçu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour démarrer le jeu de découverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(r,'" target="_blank">').concat(r,'</a> ou nous contacter à <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Désolé, votre appareil ne permet pas la géolocalisation.",TechnicalErrorReloadPage:"Problème technique, appuyez pour relancer",TechnicalProblemNetworkIssue:"Veuillez vérifier que vous avez du réseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Résoudre à nouveau",BackToQuest:"Retour au jeu",min:"min",pts:"pts",SportQuest:"jeu nature",DiscoveryQuest:"jeu découverte",CulturalQuest:"jeu culturel",ChildQuest:"jeu pour enfants",TransportQuest:"jeu en moyen de transport",ShopQuest:"Découverte de commerces",EnterpriseQuest:"Découverte d'entreprise",NightQuest:"jeu nocturne",ExtremQuest:"jeu extrême",CulinarQuest:"jeu culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la réactiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redémarrer l'aide",DurationBeforeTextAppearAbovePicture:"Durée avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s) à gagner",YouAlreadyPlayedThisQuest:"Vous avez déjà réussi ce jeu (aucun point à gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour ce jeu",CloseQuestRanking:"Retour au jeu",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour au jeu",NoFriendsLong:"Vous ne suivez encore personne",IAgreeTheTermsAndConditions:"Je suis d'accord avec les <a href=\"javascript:navigator.app.loadUrl('".concat(i.terms.fr,"', { openExternal: true })\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:"Je suis d'accord avec la <a href=\"javascript:navigator.app.loadUrl('".concat(i.privacy.fr,"', { openExternal: true })\">politique d'utilisation des données personnelles</a>"),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialité pour utiliser Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(i.terms.fr,"', { openExternal: true })\">Conditions d'utilisation</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(i.privacy.fr,"', { openExternal: true })\">Politique d'utilisation des données personnelles</a>"),YourPhoneIsNotCompliantWithThisStepType:"Votre appareil n'est pour le moment pas compatible avec ce type d'étape. Nous sommes désolé pour ce désagréement, veuillez passer à l'étape suivante",DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune étape ?",FollowStep:"Suit l'étape",StepSuccess:"Bonne réponse à",StepFail:"Mauvaise réponse à",NoCondition:"Aucune condition (démarre au début du chapitre)",Conditions:"Déclencheurs",AddACondition:"Ajouter un déclencheur",ConditionType:"Type de déclencheur",ConditionValue:"Valeur du déclencheur",YourStepCanOnlyFollowOneStep:"Votre étape ne peut suivre qu'une seule autre étape",ThisStepIsTriggeredWhen:"Cette étape est affichée quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des étapes. Veuillez supprimer les étapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette étape n'est pas visible par les joueurs. Vous pouvez passer à l'étape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez créer une étape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les étapes suivantes n'ont pas de déclencheur. Seul la première étape d'un chapitre peut ne pas avoir de déclencheur",FollowingStepsHaveInvalidCondition:"Des étapes ont des conditions invalides (dépendent probablement d'étapes manquantes, ou vous avez créé une chaîne impossible, comme une condition circulaire)",FollowingStepsHaveNoValidParent:"Les étapes suivantes ont un déclencheur incorrect",IssuesInYouQuest:"Problèmes de votre jeu",IssuesInYourStep:"Problèmes de votre étape",DisplayRightAnswer:"Afficher la bonne réponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une étape dans ce chapitre",ScanTheMarkersLikeThat:"La marque à trouver et à scanner avec votre téléphone a une forme similaire à",ScanTheMarkersLikeThat2:"Pour scanner une marque, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre à jour votre application Graaly pour continuer à l'utiliser",SorryAnErrorOccurs:"Désolé, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez créer un nouveau brouillon pour ce jeu. Si votre jeu est déjà publié, cette version restera accessible aux joueurs, jusqu'à ce que vous publiiez cette nouvelle version de votre jeu.",ClickHereToCreateANewQuestVersion:"Pour modifier votre jeu, cliquez ici",YourUnderValidationQuests:"Vos jeux en cours de validation",YourRejectedQuests:"Vos jeux rejetés",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos jeux publiés",QuestDraftVersion:"Jeu non publié",PageDraftVersion:"Page non publiée",PrivateQuest:"Jeu privé",PublicQuest:"Jeu public",Invitees:"Invités",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configurée pour votre jeu, voulez-vous l'ajouter ?",Results:"Résultats",ClosePrivateQuest:"Clore le jeu",ClosePrivateQuestDesc:"En cliquant ici, votre jeu ne sera plus jouable. Vous aurez alors accès aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sûr(e) de clore ce jeu ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a joué à ce jeu",NoPlayersYetForThisQuest:"Encore aucun joueur pour ce jeu",PrivateQuestDesc1:"Votre jeu est destiné à votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous créez un jeu pour faire découvrir un lieu, une activité, une entreprise.",PublicQuestDesc2:"Une fois validé par les games masters, ce jeu sera visible et jouable par tous",PublicProQuestDesc1:"Votre jeu est jouable par tous les joueurs Graaly. Vous payez un petit montant par joueur ou partagez les revenus avec nous.<p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PublicProQuestDesc2:"<p>Si votre jeu est payant pour les joueurs, vous pouvez soit utiliser le système de paiement intégré à Graaly soit gérer vous même le paiement</p><p>Concernant le système de paiement intégré, Google/Apple prennent 30% des revenus</p><p>Dans tous les cas Graaly conserve 30% des revenus</p><p>Le reste est pour vous, soit de 40% à 70% des revenus.</p><p>Graaly vous reverse votre part mensuellement</p><p>Si votre jeu est gratuit pour les joueurs, Graaly vous facture mensuellement 0,25 € HT par joueur, soit moins que le facicule papier que vous devrier acheter sans application mobile</p><p>Vous pouvez désactiver votre jeu à tout moment</p><p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PrivateProQuestDesc1:"Votre jeu est dédié à des joueurs définis. Vous payez un montant par joueur ou partagez les revenus avec nous. Contactez-nous à contact@graaly.com pour plus d'information",CreatePrivateQuest:"Créer un jeu privé",BuyPrivateQuest:"Acheter un jeu privé",OnlyBuyableOnMobile:"Seulement disponible sur mobile",AcceptAndBuyAPrivateQuest:"Accepter et acheter un jeu privé",CreatePublicQuest:"Créer un jeu public",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour ce jeu",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre jeu est clos, et ne peut plus être publiée",YourQuestContainsErrorsInSteps:"Votre jeu présente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type de jeu",helpQuestType:"Un jeu de piste comporte une liste d'énigme qui se suivent de façon linéaire. Un jeu propose des énigmes qui peuvent être résolue dans un ordre non défini, la résolution de plusieurs énigmes débloquent d'autres énigmes. Si vous êtes nouveau sur Graaly, nous vous conseillons de commencer par un jeu de type jeu de piste. Vous pouvez transformer un jeu de piste en escape game, mais pas le contraire.",basicEditor:"Jeu de piste (éditeur simple)",advancedEditor:"Escape game (éditeur avancé)",UsedOver:"{current} utilisés sur {limit}",QuestMedia:"Fichiers du jeu",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre jeu",Feedback:"Vos commentaires",Back:"Retour",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire à l'auteur du jeu, ou noter le jeu, attendez la page de fin du jeu. Si vous souhaitez contacter l'équipe Graaly, pour par exemple signaler un contenu inapproprié dans ce jeu, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a été envoyé",BackToBuilder:"Retour à la création du jeu",OrDownloadAFile:"Ou téléchargez votre image",UploadACharacter:"Télécharger un personnage",LoadingQuestDataForOfflineMode:"Préparation de votre jeu ...",ErrorOfflineSaving:"Problème technique, vous ne pourrez pas jouer ce jeu sans réseau",QuestNeedNetwork:"Il vous faut du réseau mobile pour lancer ce jeu. Recherchez du réseau, et cliquez sur le bouton ci-dessous pour relancer le chargement du jeu",ReloadQuest:"Recharger le jeu",ConnectToComputeScore:"Je suis connecté, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre réussite et votre score, vous devez vous reconnecter au réseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans réseau",Downloading:"Chargement ...",Loading:"Chargement ...",YouAreOfflineNoQuestsAvailable:"Désolé, il n'y a pas de jeu disponible pour être joué hors ligne.",ButtonsColor:"Couleur des boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible dès demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous suivez déjà cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas être ami avec vous même",TooMuchFriends:"Vous ne pouvez pas suivre plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagné !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avancé. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Téléchargement terminé. Vous pouvez désormais jouer ce jeu sans réseau.",GoToQuestValidation:"Aller à la validation",SessionExpired:"Votre session a expiré, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez réduire sa taille",PremiumQuest:"jeu Pro",MovePremium:"Passer ce jeu en mode pro",PremiumDefinition1:"Donnez plus de valeur à votre jeu !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Un jeu plus personnalisé à vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser le jeu avec votre logo et vos couleurs, ... </li><li><u>Un jeu rentable</u> : Vous pouvez gagner de l'argent en rendant votre jeu payante</li><li>Vous pouvez accéder aux statistiques de votre jeu</li><li>Vous bénéficiez du support de notre équipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos jeux en mode pro, contactez nous à sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalité, vous devez passer ce jeu en mode premium (voir dans les paramètres de votre jeu)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de parties jouées",NumberOfPlayersYesterday:"Hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",AverageDuration:"Durée moyenne (min)",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont créé des jeux pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore créer {nb} jeu(s) pro(s)",YouCanNotCreateNewQuests:'Vous ne pouvez plus créer des jeux pro. Souscrivez à nos offres professionnelles sur <a href="'.concat(r,'" target="_blank">').concat(r,'</a> ou contactez-nous à <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Paying:"Payant",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer ce jeu sur un appareil mobile",QuestPlayableOnMobile:"Ce jeu se joue sur mobile",PuzzleHelpText:"Déplacez les pièces pour les réordonner",ClickToEnlargePictures:"Appuyez sur les images pour les élargir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre téléphone pendant 3 secondes pour une meilleure précision GPS",TakeMobileVertically:"Tenez votre téléphone verticalement et recherchez",null:"Indéfini",TooMuchOfflineLoadingErrors:"Le chargement du jeu n'a pas fonctionné. Vous pouvez jouer le jeu si le réseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annulé le chargement du jeu, le jeu ne fonctionnera pas si vous perdez le réseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggérer un jeu",SuggestANewQuest:"Suggérer un nouveau jeu",YouLikedThisQuest:"Vous avez aimé ce jeu ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour découvrir un lieu en jouant, ou pour motiver vos enfants ou élèves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Musée du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou téléphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En complétant ce formulaire, vous nous aidez à identifier les jeux les plus demandées pour contacter les responsables des lieux concernés. Vous serez ensuite informé si un jeu est créée sur ce lieu.",InsertAStepAfter:"Insérer une étape après",QuestUpdated:"Le jeu a été modifié",PleaseRestartQuest:"Merci de rejouer le jeu depuis le début.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette étape n'est jouable qu'à partir de cette date",ThisStepIsAvailableIn:"Cette étape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pièce à bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scanner un QR Code",ScanQRCode:"Scanner un QR Code",MarkersToPrint:"QR Codes du jeu",MarkersToStartQuest:"Les joueurs peuvent jouer en scannant ce QR Code sur la page de login de Graaly",SaveQuestResultsMarker:"Vos joueurs peuvent scanner un QR Code pour enregistrer leur score dans Graaly (sur la page de login ou sur la page d'accueil). Pour les joueurs qui sont sortis de la salle dans les temps<br /><img src='{url3}' /><br />Pour les joueurs qui sont presque sortis dans les temps<br /><img src='{url2}' /><br />Pour les joueurs qui ne sont pas sortis<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Cette action ne peut être annulée",AddAReward:"Télécharger une récompense",Reward:"Récompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit être en rouge, sinon pensez à utiliser une image avec un fond transparent. Si une partie de votre image est coupée, téléchargez une image au format carré.",YouWonAReward:"Bravo, vous avez gagné un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres récompenses en jouant aux autres jeux dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut être trop gros ou n'a pas le bon format. Veuillez réessayer avec une image plus petite",helpQuestLogo:"Votre logo apparaîtra dans un bulle en bas de l'écran de jeu. Suivant les écrans, la bulle peut être assez petite, choisissez une image avec peu de détails.",helpQuestReward:"Les joueurs pourront gagner un badge à la fin du jeu. Cela les motive à jouer à votre jeu. Pour proposer un badge en récompense, téléchargez une image représentant le badge, avec un fond transparent (format .gif ou .png)",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouvé",CreateYourAccountMsg:"Créez votre compte pour sauvegarder votre score et jouer avec vos amis !",MaybeLater:"Peut-être plus tard !",LetsPlay:"Jouez",NewAccount:"Nouveau compte",PleaseAcceptDeviceMotionPermissionRequest:"Veuillez accepter que Graaly accède aux mesures des mouvements de votre appareil, afin de pouvoir jouer cette partie du jeu",PleaseAcceptDeviceOrientationPermissionRequest:"Veuillez accepter que Graaly accède aux mesures de l'orientation de votre appareil, afin de pouvoir jouer cette partie du jeu",DoYouWantToCreateAnAccount:"Pour créer un jeu, vous devez créer votre compte. Souhaitez-vous créer votre compte Graaly ?",UserWithSameEmailAlreadyExisting:"Un compte existe déjà avec cet email",PasswordTooWeak:"Votre mot de passe doit etre au 8 caractères, contenir une majuscule et un chiffre",AreYouSureYouWantToPublishThisQuest:"Etes-vous sûr de demander la publication de votre jeu ? Vous ne pourrez plus faire aucun changement jusqu'à ce que l'équipe Graaly confirme votre demande",YourCharacter:"Personnage personnalisé",AddACustomCharacter:"Ajouter un personnage",helpQuestCharacter:"Ce personnage s'affichera quand un joueur demandera un indice ou affichera un En savoir plus",AvailableColors:"Couleurs disponibles",TypeColorCode:"Entrez le code couleur. Ex: #ff55cc",TypeColorCodeName:"Entrez le nom de la couleur. Ex: Rouge",AddNewColor:"Ajoutez une nouvelle couleur",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Vous n'êtes pas sur le lieu du jeu</b>.<br />En résolvant ce jeu à distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez déjà réussi ce jeu</b>. Vous pouvez le résoudre à nouveau, mais il ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous êtes le créateur de ce jeu, il ne vous rapportera aucun point",GeneralWarning:"<b>Pour votre sécurité</b>, ne jouez pas à Graaly en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",RemoveScoringAndRating:"Cacher le score et la notation",TypeEndMessage:"Texte de fin qui remplace l'écran de score et de notation",ThanksForPlaying:"Merci d'avoir joué à ce jeu. A bientôt pour d'autres jeux !",EnlargePictureToFullWidth:"Elargir l'image en plein écran",PlayerCanTakeSnapshot:"Le joueur peut prendre des captures d'écran",SnapshotTaken:"Capture enregistrée dans vos photos",SnapshotTakenIssue:"Impossible de faire une capture",NbTrials:"Nombre d'essais",UserCanPass:"Le joueur peut passer l'étape",Welcome:"Bienvenue !",SignIn:"Connexion",Subscribe:"S'inscrire",EmailAlreadyUsed:"Cette adresse email est déjà utilisée. Connectez-vous ou demandez une modification de votre mot de passe",AroundYou:"Autour de vous",SeeMore:"Voir plus",Designers:"Créateurs",Difficulty1:"Simple",Difficulty2:"Normal",Difficulty3:"Difficile",ClosestQuestToYou:"Jeu proche de vous",YouAreNearThisQuest:"Jeu le plus proche de vous",YouAreInvitedToThisQuest:"Vous êtes invité à ce jeu",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Joué par amis",ScoreAndBadges:"Score et badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"Sur ce jeu, vous pouvez gagner :",ScoreRange:"Entre {min} et {max} points",InProgressPreparation:"Préparation en cours",Warnings:"Mises en garde",Follow:"Suivre",Followed:"Suivi(e)",SolvedQuests:"Jeux résolus",Creations:"Créations",Badges:"Badges",FollowYourFriends:"Suivre vos amis",CreatedYourFirstQuest:"Créez votre premier jeu",DoNotFollowAnymore:"Ne plus suivre",AllTheseDataAreOptional:"Toutes ces données sont optionnelles",DataCountry:"Votre pays : utilisé pour afficher les bons jeux pour vous",DataZipcode:"Votre code postal : utilisé pour afficher les bons jeux pour vous",DataSex:"Votre sexe : utilisé pour afficher les bons jeux pour vous",DataAge:"Votre age : utilisé pour éviter certains jeux non adaptés à votre age",DataPhone:"Votre numéro de téléphone : utilisé pour vous connecter avec vos amis",EscapeGame:"Escape game",EscapeGames:"Escape games",Players:"Joueurs",YouHaveReachAScore:"Vous avez un score de {score} points",LevelReached:"Niveau atteint !",PointsToReachLevel:"{score} points à atteindre",Friends:"Amis",World:"Mondial",MyCountry:"Mon pays",MyCity:"Ma ville",NoRanking:"Encore aucun classement",Invitations:"Invitations",YouFollowThem:"Vous suivez",AddYourRoomInTheDirectory:"Référencez votre salle dans l'annuaire",AddYourRoom:"Ajoutez votre salle",ProAddYourRoom:"Vous pouvez ajouter vos salles dans Graaly et bénéficier de nombreux services gratuits",YourRoom:"Votre salle",PriceFrom:"Prix par joueur à partir de",ReadMoreLink:"Lien vers la page de réservation",SmallPicture:"Petite image",SeeYourQuestPage:"Visualiser la page",FromPricePerPlayer:"A partir de {price} par joueur",Book:"Réserver",YourBadges:"Vos badges",YouDoNotHaveBadgesYet:"Vous n'avez pas encore de badges. Pour gagner des badges, il vous faut résoudre des jeux qui proposent des récompenses.",FollowedPeople:"Personnes suivies",WeNeedYourPositionForThisFeature:"Nous avons besoin de votre position pour cette fonctionnalité",OtherCharacters:"Autres personnages",BackToTheMap:"Accueil",or:"ou",RefreshCacheRequired:"L'application en cache sur votre navigateur est obsolète. Veuillez passez en navigation privée pour rafraichir votre cache",FindFriendManually:"Trouvez vos amis manuellement",NoQuestAroundYou:"Nous n'avons trouvé aucun jeu autour de vous",CachedQuests:"Déjà téléchargé(s)",YourPresentation:"Présentez-vous",DuplicateThisQuest:"Dupliquer ce jeu",DoYouWantToOpenClonedQuest:"Voulez-vous modifier le nouveau jeu maintenant ?",OpenTheMap:"Carte des jeux",ReplacePictureByRedFilter:"Remplacer l'image par un filtre rouge",TotalNumberOfPlaysNotFinished:"Nombre de parties en cours",RoomDataWarning:"Certaines informations peuvent être obsolètes, n'hésitez pas à aller sur le site de l'escape game pour plus d'informations",AnonymousUser:"Joueur anonyme",NotWon:"A gagner",OnTopGames:"Jeux du moment",ThisStepOnlyWorkOnMobile:"Le scan de QR code ne fonctionne que sur l'application mobile",YourQuestHasNotBeenPublished:"Votre escape n'a pas été publié",OnDesktopDisplayMessage:"Sur ordinateur, vous devez réduire la taille de votre écran. Vous pouvez taper sur la touche F12 pour cela.",EventCode:"Code de l'événement",BoardMacAddress:"Adresse Mac de la carte",SuccessMessage:"Message de réussite",YourTime:"Votre temps",LimitNumberOfPlayerInOneHour:"Limiter le nombre de joueurs par heure (0 = illimité)",TooMuchUsersCurrently:"Trop de joueurs actuellement",OrSelectAnImageInTheList:"Ou sélectionnez une image dans la liste",IotObject:"Objet connecté",Protocol:"Protocole",SuccessRange:"Plage de succès",SuccessRanges:"Plages de succès",WriteTextWarning:"Accents et majuscules ne sont pas nécessaires",DistanceToWin:"Le joueur gagne quand il est à la distance suivante du lieu (m)",SplitMessageWithPipe:"Ajouter le signe '|' pour séparer votre texte dans plusieurs bulles",ClickHere:"Cliquez ici",FollowTheCreator:"Suivez le créateur",PlayersNumber:"Nombre de joueurs mini",helpQuestMultiplayer:"Cela défini le nombre de joueur minimum pour que le jeu soit jouable. Chaque joueur devra avoir un téléphone, et aura un rôle différent dans le jeu. Pour plus d'informations sur le mode multijoueur, regardez nos tutos Youtube",ThisIsAMultiplayerGame:"Ce jeu se joue en équipe",JoinATeam:"Rejoindre une équipe",ScanTheLeaderQRCode:"Scanner le QR Code du leader",CreateATeam:"Créer une nouvelle équipe",TeamName:"Nom de l'équipe",CreateTeam:"Créer l'équipe",OtherPlayersMustScanThisQRCode:"Les autres joueurs doivent scanner ce QR Code pour rejoindre votre équipe",ThisIsNotATeamQRCodeValid:"Ce code n'est pas valide ! Vous devez scanner le code qui s'affiche sur le smartphone de la personne qui a créé l'équipe",MyTeamIsCompleteLetsGo:"L'équipe est au complet, allons-y !",YouNeedMoreMembersToPlay:"Votre équipe doit être composée au minimum de {nb} membres. Membre(s) actuel(s) : {members}",Team:"Equipe",WaitingForOtherUsersActions:"En attente des autres joueurs",WaitingForOtherUsersActionsDesc:"Vous ne pouvez pas avancer tant que les autres joueurs n'ont pas réussi leurs énigmes",CheckIfICanMoveFoward:"Vérifier si c'est ok maintenant !",Player:"Joueur",All:"Tous",YouNeedToBeXPlayers:"Vous devez être au moins {nb} pour jouer",YouNeedAtLeastXEditorsToTest:"Vous devez avoir {nb} éditeurs pour tester ce jeu multijoueur (voir onglet Mise en ligne)",HereAreTheTesters:"Ce jeu est multijoueur, il sera testé par : {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Affichage de mon image sur différents types de téléphones",MyPictureIsNotDisplayedWell:"Mon image s'affiche mal",MyPictureIsNotDisplayedWellDesc:"<b>Si votre image est mal cadrée sur toutes les tailles</b>: Il faut que votre image soit dans un format 900 pixels par 1200 pixels.<br /><b>Votre image n'est pas correcte sur la taille du centre</b>: Il faut que votre image présente une partie non utile sur 100 pixels à droite et à gauche de votre image. Vous pouvez ajouter une bordure noire de 100 pixels autour de votre image par exemple",RestartQuest:"Redémarrer le jeu",AreYouSureToRestartThisQuest:"Etes-vous sûr de redémarrer ce jeu ? Vous ne gagnerez aucun point en redémarrant le jeu.",PaymentOnMobile:"Paiement sur mobile",PaymentOnMobileHelp:"Le paiement est très simple pour les joueurs, juste en pressant un bouton. Cependant Google / Apple prennent 30% des revenus de votre jeu.",PaymentOnYourSide:"Paiement réalisé par vous",PaymentOnYourSideHelp:"Vous pouvez collecter le paiement dans votre boutique ou au travers de tiers (4Escape, ...)",Payments:"Paiements",CreateNewQRCodeForPlay:"Créer un nouveau QR Code pour un joueur qui a payé",Create10NewQRCodeForPlay:"Créer 10 nouveaux QR Codes",Create50NewQRCodeForPlay:"Créer 50 nouveaux QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Etes-vous sûr de supprimer ce code ? Si vous avez envoyé ce code à un joueur, il ne pourra plus jouer !",BuyThisQuest:"Acheter ce jeu",YouHaveReceivedAQrCodeFrom:"Vous avez reçu un QR code de {author}",ScanTheUniqueQRCode:"Scanner le QR code à usage unique",BuyInOneClick:"Achetez en un clic",TechnicalIssueOrCodeAlreadyUsed:"Code déjà utilisé ou problème technique",ChangeTheBackgroundImageOnceClicked:"Changez l'image de fond quand le joueur a cliqué",Message:"Message",Frequency:"Fréquence",TriggerTheEvent:"Déclencher l'action",SearchingBluetoothDevice:"Recherche de l'appareil Bluetooth...",KeypadInput:"Saisie digicode",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Ouvrir",ChestActions:"Actions sur le coffre",TriggerMode:"Mode de déclenchement",TriggerModeAuto:"Auto (au chargement de l'étape)",TriggerModeManual:"Manuel (le joueur doit toucher un bouton)",helpPlayer:"Pour chaque étape d'un jeu multijoueur, vous devez sélectionner le joueur qui verra cette étape. Les autres joueurs ne le verront pas, et auront un message d'attente jusqu'à que le joueur résolve l'énigme. Vous pouvez afficher une étape de type transition pour tous les joueurs, mais vous ne pouvez afficher une énigme que pour un joueur. Si vous souhaitez que tous les joueurs résolvent la même énigme, vous devez créer une étape pour chaque joueur. Pour plus d'information, regardez nos tutos Youtube.",ErrorMessageForNewTeamMember:"Problème technique ou nombre de joueurs atteint",YouNeedToUnpublishYourQuestToRemoveIt:"Vous devez dépublier vote jeu pour le supprimer",PleaseEnterYourTeamName:"Veuillez entrer le nom de votre équipe",Version:"Version",CountDownLabel:"Limite de temps de l’énigme",CountDownIsActive:"Entrez la limite de durée pour cette énigme",CountDownWarning:"Etes-vous certain(e) d'activer un compte à rebours ? Assurez-vous qu'il n'y a aucun risque pour le joueur, comme une route à traverser !",CountDownPopupfail:"Temps écoulé !",MaxScore:"Score maxi",YouMustTestThisStepOnMobile:"Vous devez tester ce type d'étape sur un appareil mobile",AreasNumber:"Nombre de zones à trouver",ItRemains:"Il reste",s:"s",LetsPlayWithoutAccount:"Jouer sans compte",ErrorDownloadNeedsToRestart:"Erreur lors du telechargement de l'enquete, voulez vous recommencer ?",StartCreation:"Devenir créateur ?",ErrorTakingSnapshot:"Impossible de faire la capture d'écran",YourAudioFile:"Votre musique de fond",AddAnAudioFile:"Ajouter une musique de fond",ObjectNeedToBeAppliedOnPicture:"L'objet est appliqué sur une partie de l'image",ReadNext:"Lire la suite",AlreadyPaied:"Acheté",HelpStepMessageInventory:"Afficher l'aide pour le bouton Inventaire",HelpStepMessageHint:"Afficher l'aide pour le bouton Indice",HelpStepMessagePrevious:"Afficher l'aide pour le bouton Retour",HelpStepMessageNext:"Afficher l'aide pour le bouton Suivant",HelpStepMessage:"Bienvenue dans votre interface de jeu !\n\nPour jouer, il vous suffira de suivre les indications à l'écran.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></span></span></button></div>La valise vous sert à utiliser des objets que vous avez récupérés durant le jeu",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></span></span></button></div>L'ampoule vous sert à obtenir des indices.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></span></span></button></div>Pour revenir à l'étape précédente, appuyez sur la flèche de gauche.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></span></span></button></div>Pour passer à l'étape suivante, appuyez sur la flèche de droite.",HelpStepMessageEnd:"En cas de problème, n'hésitez pas à fermer l'application et à la redémarrer, vous reviendrez à la dernière étape réussie.\n\nBon jeu, et bonne chance !",KenBurnsEffect:"Effet de zoom arrière sur l'image",Show:"Montrer",Hide:"Cacher",TotalSellings:"Ventes du jeu",RevenuesPayedFloor:"Paiement quand gains > 50€",QRCodeMessage:"Message affiché quand le joueur doit flasher un QR code (mode Escape game)",TeamID:"Identifiant équipe",PleaseFillThisForm:"Veuillez compléter ce champ",Zoom:"Zoom",ScheduleGame:"Planifier le jeu",GameSchedule:"Planification du jeu",Reset:"Réinitialiser",SchedulingDescription:"Le jeu est jouable sur les créneaux :",From:"De",To:"A",QuestIsNotPlayableNow:"Le jeu n'est pas disponible actuellement",OpeningHours:"Heures d'ouverture",CreationStudioHelp:"<h3>Aide</h3>Nous vous proposons plusieurs ressources pour vous aider à utiliser le studio de création :<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Guide d'utilisation du studio</a></li><li>Des <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>tutoriels vidéo</a> d'utilisation du studio de création</li></ul>Si vous rencontrez des problèmes ou si vous avez des questions complémentaires, n'hésitez pas à nous contacter à support@graaly.com.<br /><br />Pour tester votre jeu, nous vous conseillons de :<ul><li>tester sur votre téléphone avec l'application Graaly</li><li>tester dans votre navigateur en <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>mode développeur</a> (pour faire simple, cliquez sur la touche f12, puis sur l'icône en forme de tablette). Attention, certaines étapes ne fonctionnent pas dans ce mode (réalité augmentée, géolocalisation, scanne de QR code, superposition image et caméra)</li></ul>",TestWithSimulatorWarning:"Vous allez tester avec le simulateur. Certains types d'étapes ne sont pas fonctionnels. Pour un vrai test, utilisez l'application mobile Graaly",FontFamily:"Police de caractère pour les textes",ExportTexts:"Textes du jeu",Downloads:"Téléchargements",ForcePlayerToHaveAccount:"Forcer les joueurs à créer un compte Graaly",ForcePlayerToHaveAccountHelp:"Si cette option n'est pas activée, les utilisateurs peuvent jouer anonymement",ShareUserDataWithCreator:"Demander aux joueurs de partager leurs données avec vous",ShareUserDataWithCreatorHelp:"Un joueur accepte de partager ses données avec Graaly. Vous pouvez demander aux joueurs de partager leurs données avec vous, nous vous conseillons pour les motiver de faire gagner quelque chose (jeu concours, tirage au sort, bon de réduction, ...)",YouNeedToCreateYourAccountToPlay:"Vous devez créer votre compte pour joueur à ce jeu",ShareDataWithPartner:"Partager vos données avec le créateur du jeu",PartnerAskForYouData:"Le créateur du jeu souhaiterais accéder à vos données (adresse email, nom). Cela peut être pour vous permettre de participer à un tirage au sort, un jeu concours ou vous faire gagner un bon de réduction. Veuillez lire la description du jeu pour en savoir plus",UseHtmlInDescription:"Utiliser des balises HTML dans la question",DoNotDisplay:"Ne pas afficher",AddAnGPSLocation:"Ajouter un point GPS",BuildThePortraitRobot:"Construisez le portrait à trouver",Education:"Education",EducationDesc:"Nous ne proposons pas encore d'offre éducation, mais vous pouvez utiliser le mode professionnel, et nous contacter à contact@graaly.com pour plus d'information.",Call:"Appeler"}}}},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac à dos","en":"Backpack"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candélabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantôme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Clé","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe à pétrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine téléphonique","en":"Phone booth"},"author":"Dave Sutton","url":"https://www.cgtrader.com/free-3d-models/exterior/other/telephone-box"},"phone-rotary":{"name":{"fr":"Téléphone à cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=s,e.exports=i,i.id="4678"},"4c18":function(e){e.exports=JSON.parse('[{"label":"France","value":"FRA"},{"label":"Belgique","value":"BEL"},{"label":"Suisse","value":"CHE"},{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbaïdjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahreïn","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzégovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brésil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Bélarus","value":"BLR"},{"label":"Bénin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (République démocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Côte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythrée","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"Fédération Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grèce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinée Française","value":"GUF"},{"label":"Guinée Équatoriale","value":"GNQ"},{"label":"Guinée","value":"GIN"},{"label":"Guinée-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Géorgie du Sud et les îles Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et îles McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Caïmans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Féroé","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caïques","value":"TCA"},{"label":"Iles Vierges (États-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures éloignées des États-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaïque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'île de noël","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les Îles Cook","value":"COK"},{"label":"Les îles Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronésie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Nioué","value":"NIU"},{"label":"Norvège","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zélande","value":"NZL"},{"label":"Népal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbékistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (état de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guinée","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Française","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Pérou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"République Dominicaine","value":"DOM"},{"label":"République Tchèque","value":"CZE"},{"label":"République arabe syrienne","value":"SYR"},{"label":"République centrafricaine","value":"CAF"},{"label":"République de Corée","value":"KOR"},{"label":"République populaire démocratique de Corée","value":"PRK"},{"label":"Réunion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthélemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Niévès","value":"KNA"},{"label":"Saint-Siège","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hélène, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa américaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tomé et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovénie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suriname","value":"SUR"},{"label":"Suède","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sénégal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes françaises","value":"ATF"},{"label":"Territoire britannique de l\'océan Indien","value":"IOT"},{"label":"Thaïlande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinité-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkménistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},5:function(e,t){},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pièces","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Clé","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac à dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Bouée de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fusée","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Téléphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Télévision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle clé","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},"58dd":function(e,t,r){"use strict";var a=r("1530"),i=r.n(a);i.a},"5b1e":function(e,t,r){"use strict";var a=r("d630"),i=r.n(a);i.a},6:function(e,t){},"74f2":function(e,t,r){"use strict";var a=r("7da1"),i=r.n(a);i.a},"7da1":function(e,t,r){},"7e6d":function(e,t,r){},"8c64":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,__dirname,module,Buffer){__webpack_require__.d(__webpack_exports__,"a",(function(){return THREEx}));var core_js_modules_es6_object_assign_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("f751"),core_js_modules_es6_object_assign_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_object_assign_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_number_constructor_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_flags_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3846"),core_js_modules_es6_regexp_flags_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_flags_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_iterable_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_iterable_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_iterator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_iterator_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_object_keys_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("456d"),core_js_modules_es6_object_keys_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_object_keys_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_string_link_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b54a"),core_js_modules_es6_string_link_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_string_link_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_math_fround_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("042e"),core_js_modules_es6_math_fround_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_math_fround_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_math_clz32_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("32d7"),core_js_modules_es6_math_clz32_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_math_clz32_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_math_imul_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("f4ff"),core_js_modules_es6_math_imul_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_math_imul_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_typed_uint32_array_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("9c29"),core_js_modules_es6_typed_uint32_array_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_typed_uint32_array_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es6_typed_uint16_array_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("af56"),core_js_modules_es6_typed_uint16_array_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_typed_uint16_array_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es6_typed_int16_array_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("15ac"),core_js_modules_es6_typed_int16_array_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es6_typed_int16_array_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_typed_int8_array_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("b05c"),core_js_modules_es6_typed_int8_array_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_typed_int8_array_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es6_typed_int32_array_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("b6e4"),core_js_modules_es6_typed_int32_array_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es6_typed_int32_array_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es6_regexp_replace_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es6_regexp_replace_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es6_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es6_object_to_string_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("06db"),core_js_modules_es6_object_to_string_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es6_object_to_string_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es6_string_starts_with_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("f559"),core_js_modules_es6_string_starts_with_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es6_string_starts_with_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es6_regexp_split_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es6_regexp_split_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es6_regexp_match_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("4917"),core_js_modules_es6_regexp_match_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es6_regexp_match_js__WEBPACK_IMPORTED_MODULE_20__),E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("ff57"),E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es6_array_fill_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("6c7b"),core_js_modules_es6_array_fill_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es6_array_fill_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es6_typed_float64_array_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("4dda"),core_js_modules_es6_typed_float64_array_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es6_typed_float64_array_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es6_typed_uint8_array_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es6_typed_uint8_clamped_array_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("6aa2"),core_js_modules_es6_typed_uint8_clamped_array_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_clamped_array_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es6_function_name_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("7f7f"),core_js_modules_es6_function_name_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es6_function_name_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es6_typed_float32_array_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("63d9"),core_js_modules_es6_typed_float32_array_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es6_typed_float32_array_js__WEBPACK_IMPORTED_MODULE_27__),Module;(function(){var e=function(e,r,a){var i=e,s=r;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;a=r,i=n.videoWidth||n.width,s=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.videoWidth=i,this.videoHeight=s,"string"===typeof a){var o=this;this.cameraParam=new t(a,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=a,this._initialize()};e.prototype.dispose=function(){for(var e in r.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,a,i=this.getMarkerNum();for(t in this.patternMarkers)a=this.patternMarkers[t],a.inPrevious=a.inCurrent,a.inCurrent=!1;for(t in this.barcodeMarkers)a=this.barcodeMarkers[t],a.inPrevious=a.inCurrent,a.inCurrent=!1;for(var s=0;s<i;s++){var n=this.getMarker(s),o=r.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=r.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(s,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=r.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(s,n.dirMatrix)),o!==r.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(s,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(s,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:s,type:o,marker:n,matrix:this.transform_mat}})}var c=this.getMultiMarkerCount();for(s=0;s<c;s++){var u=this.getMultiMarkerPatternCount(s);l=!1;r.getTransMatMultiSquareRobust(this.id,s),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<u;d++){var p=this.getMultiEachMarker(s,d);if(p.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:s,matrix:this.transform_mat}});break}}if(l)for(d=0;d<u;d++){p=this.getMultiEachMarker(s,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:s,markerIndex:d,marker:p,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var r=this.patternMarkers[e];return r||(this.patternMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},e.prototype.trackBarcodeMarkerId=function(e,t){var r=this.barcodeMarkers[e];return r||(this.barcodeMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},e.prototype.getMultiMarkerCount=function(){return r.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return r.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var r=this.listeners[e].indexOf(t);r>-1&&this.listeners[e].splice(r,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var r=0;r<t.length;r++)t[r].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,a){return r.addMarker(this.id,e,t,a)},e.prototype.loadMultiMarker=function(e,t,a){return r.addMultiMarker(this.id,e,t,a)},e.prototype.getTransMatSquare=function(e,t,a){return r.getTransMatSquare(this.id,e,t),a.set(this.marker_transform_mat),a},e.prototype.getTransMatSquareCont=function(e,t,a,i){return this.marker_transform_mat.set(a),r.getTransMatSquareCont(this.id,e,t),i.set(this.marker_transform_mat),i},e.prototype.getTransMatMultiSquare=function(e,t){return r.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return r.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,r){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=r&&0!==r&&(t[12]*=r,t[13]*=r,t[14]*=r),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?r.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return r.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===r.getMarker(this.id,e))return r.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var a=0;a<t.length;a++)this.marker_transform_mat[2*a+0]=t[a][0],this.marker_transform_mat[2*a+1]=t[a][1];return r.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===r.getMultiEachMarker(this.id,e,t))return r.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return r.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return r.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return r.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return r.setLogLevel(e)},e.prototype.getLogLevel=function(){return r.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return r.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return r.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return r.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return r.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return r.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return r.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return r.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return r.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return r.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return r.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return r.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return r.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return r.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return r.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return r.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return r.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return r.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return r.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return r.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var r=this.getMarkerNum(),a=0;a<r;a++)this._debugMarker(this.getMarker(a))},e.prototype._initialize=function(){this.id=r.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=r.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){e||(e=this.image),this.ctx.save(),"portrait"===this.orientation?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),r=t.data;return!!this.dataHeap&&(this.dataHeap.set(r),!0)},e.prototype._debugMarker=function(e){var t,r;t=e.vertex;var a=this.ctx;a.strokeStyle="red",a.beginPath(),a.moveTo(t[0][0],t[0][1]),a.lineTo(t[1][0],t[1][1]),a.stroke(),a.beginPath(),a.moveTo(t[2][0],t[2][1]),a.lineTo(t[3][0],t[3][1]),a.stroke(),a.strokeStyle="green",a.beginPath(),a.lineTo(t[1][0],t[1][1]),a.lineTo(t[2][0],t[2][1]),a.stroke(),a.beginPath(),a.moveTo(t[3][0],t[3][1]),a.lineTo(t[0][0],t[0][1]),a.stroke(),r=e.pos,a.beginPath(),a.arc(r[0],r[1],8,0,2*Math.PI),a.fillStyle="red",a.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",r=e.onSuccess,a=e.onError||function(e){console.error("ARController.getUserMedia",e)},i=document.createElement("video"),s=function(){0!==this.videoWidth&&r(i)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function e(t){n&&(i.play(),i.paused||o.forEach((function(t){window.removeEventListener(t,e,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var c=function(e){i.addEventListener("loadedmetadata",s,!1),i.src=window.URL.createObjectURL(e),n=!0,l()},u={},d={};e.width&&(d.width=e.width,"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e.width)?(e.width.max&&(u.maxWidth=e.width.max),e.width.min&&(u.minWidth=e.width.max)):u.maxWidth=e.width),e.height&&(d.height=e.height,"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e.height)?(e.height.max&&(u.maxHeight=e.height.max),e.height.min&&(u.minHeight=e.height.max)):u.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var p={audio:!1,video:{mandatory:u}};return navigator.getUserMedia?navigator.getUserMedia(p,c,a):a("navigator.getUserMedia is not supported on your browser"),i},e.getUserMediaARController=function(r){var a={};for(var i in r)a[i]=r[i];var s=r.onSuccess,n=r.cameraParam;a.onSuccess=function(){new t(n,(function(){var t=this,a=r.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),i=a/Math.max(o.videoWidth,o.videoHeight),n=i*o.videoWidth,l=i*o.videoHeight;if(o.videoWidth<o.videoHeight){var c=n;n=l,l=c}var u=new e(n,l,t);u.image=o,o.videoWidth<o.videoHeight?(u.orientation="portrait",u.videoWidth=o.videoHeight,u.videoHeight=o.videoWidth):(u.orientation="landscape",u.videoWidth=o.videoWidth,u.videoHeight=o.videoHeight),s(u,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(a);return o};var t=function(e,t,r){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=r,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;r.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&r.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var r={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:p,addMarker:n,addMultiMarker:u},a=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function i(){for(var e in a.forEach((function(e){r[e]=Module[e]})),Module)e.match(/^AR/)&&(r[e]=Module[e])}var s=0;function n(e,t,r){var a="/marker_"+s++;h(t,a,(function(){var t=Module._addMarker(e,a);r&&r(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),r=t.split("\n"),a=[],i=0;return r.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(i){case 0:return+e,void(i=1);case 1:e.match(/^\d+$/)||a.push(e);case 2:case 3:case 4:return void i++;case 5:return void(i=1)}})),a}var c=0;function u(e,t,r){var a="/multi_marker_"+c++;h(t,a,(function(i){var s=l(i);function n(){var t=Module._addMultiMarker(e,a),i=Module.getMultiMarkerNum(e,t);r&&r(t,i)}if(!s.length)return n();var o=t.split("/").slice(0,-1).join("/");s=s.map((function(e){return[o+"/"+e,e]})),b(s,n)}))}var d=0;function p(e,t){var r="/camera_param_"+d++,a=function(){var e=Module._loadCamera(r);t&&t(e)};"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e)?m(r,e,a):e.indexOf("\n")>-1?f(r,e,a):h(e,r,a)}function f(e,t,r){for(var a=new Uint8Array(t.length),i=0;i<a.length;i++)a[i]=255&t.charCodeAt(i);m(e,a,r)}function m(e,t,r){FS.writeFile(e,t,{encoding:"binary"}),r(t)}function h(e,t,r){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(e){var i=a.response,s=new Uint8Array(i);m(t,s,r)},a.send()}function b(e,t){var r=e.pop();r?h(r[0],r[1],(function(){b(e,t)})):t()}window.artoolkit=r,window.ARController=e,window.ARCameraParam=t,window.Module?i():window.Module={onRuntimeInitialized:function(){i()}}})(),Module||(Module=("undefined"!==typeof Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB="object"===("undefined"===typeof window?"undefined":E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(window)),ENVIRONMENT_IS_WORKER="function"===typeof importScripts,ENVIRONMENT_IS_NODE="object"===("undefined"===typeof process?"undefined":E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(process))&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module["print"]||(Module["print"]=function(e){process["stdout"].write(e+"\n")}),Module["printErr"]||(Module["printErr"]=function(e){process["stderr"].write(e+"\n")});var nodeFS=__webpack_require__("ab21"),nodePath=__webpack_require__("7a44");Module["read"]=function(e,t){e=nodePath["normalize"](e);var r=nodeFS["readFileSync"](e);return r||e==nodePath["resolve"](e)||(e=path.join(__dirname,"..","src",e),r=nodeFS["readFileSync"](e)),r&&!t&&(r=r.toString()),r},Module["readBinary"]=function(e){var t=Module["read"](e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},Module["load"]=function(e){globalEval(read(e))},Module["thisProgram"]||(process["argv"].length>1?Module["thisProgram"]=process["argv"][1].replace(/\\/g,"/"):Module["thisProgram"]="unknown-program"),Module["arguments"]=process["argv"].slice(2),module["exports"]=Module,process["on"]("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module["print"]||(Module["print"]=print),"undefined"!=typeof printErr&&(Module["printErr"]=printErr),"undefined"!=typeof read?Module["read"]=read:Module["read"]=function(){throw"no read() available (jsc?)"},Module["readBinary"]=function(e){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(t)),t},"undefined"!=typeof scriptArgs?Module["arguments"]=scriptArgs:"undefined"!=typeof arguments&&(Module["arguments"]=arguments);else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw"Unknown runtime environment. Where are we?";if(Module["read"]=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(Module["arguments"]=arguments),"undefined"!==typeof console)Module["print"]||(Module["print"]=function(e){console.log(e)}),Module["printErr"]||(Module["printErr"]=function(e){console.log(e)});else{var TRY_USE_DUMP=!1;Module["print"]||(Module["print"]=TRY_USE_DUMP&&"undefined"!==typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module["load"]=importScripts),"undefined"===typeof Module["setWindowTitle"]&&(Module["setWindowTitle"]=function(e){document.title=e})}function globalEval(e){eval.call(null,e)}for(var key in!Module["load"]&&Module["read"]&&(Module["load"]=function(e){globalEval(Module["read"](e))}),Module["print"]||(Module["print"]=function(){}),Module["printErr"]||(Module["printErr"]=Module["print"]),Module["arguments"]||(Module["arguments"]=[]),Module["thisProgram"]||(Module["thisProgram"]="./this.program"),Module.print=Module["print"],Module.printErr=Module["printErr"],Module["preRun"]=[],Module["postRun"]=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(e){tempRet0=e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8===0),t/8}return 0}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4===(7&e)),e+=4):assert(0===(3&e)),e},getAlignSize:function(e,t,r){return r||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,r){return r&&r.length?(r.splice||(r=Array.prototype.slice.call(r)),r.splice(0,0,t),Module["dynCall_"+e].apply(null,r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(r[e]=function(){return Runtime.dynCall(t,e,arguments)}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+e|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var r=enlargeMemory();if(!r)return DYNAMICTOP=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var a=r?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t);return a},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module["Runtime"]=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9;function assert(e,t){e||abort("Assertion failed: "+t)}var globalScope=void 0,cwrap,ccall;function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,r,a){switch(r=r||"i8","*"===r.charAt(r.length-1)&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}function getValue(e,t,r){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}(function(){var JSfuncs={stackSave:function(){return Runtime.stackSave(),null},stackRestore:function(){return Runtime.stackRestore(),null},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;return null!==e&&void 0!==e&&0!==e&&(t=Runtime.stackAlloc(1+(e.length<<2)),writeStringToMemory(e,t)),t}},toC={string:JSfuncs["stringToC"],array:JSfuncs["arrayToC"]};ccall=function(e,t,r,a,i){var s=getCFunc(e),n=[],o=0;if(a)for(var l=0;l<a.length;l++){var c=toC[r[l]];c?(0===o&&(o=Runtime.stackSave()),n[l]=c(a[l])):n[l]=a[l]}var u=s.apply(null,n);if("string"===t&&(u=Pointer_stringify(u)),0!==o){if(i&&i.async)return void EmterpreterAsync.asyncFinalizers.push((function(){Runtime.stackRestore(o)}));Runtime.stackRestore(o)}return u};var sourceRegex=/^function[\w\s]*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/m;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every((function(e){return"number"===e})),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map((function(e,t){return"$"+t})),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource["stackSave"].body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc((function(){return cfunc})).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc((function(){return Pointer_stringify})).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource["stackRestore"].body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module["ccall"]=ccall,Module["cwrap"]=cwrap,Module["setValue"]=setValue,Module["getValue"]=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,r,a){var i,s;"number"===typeof e?(i=!0,s=e):(i=!1,s=e.length);var n,o="string"===typeof t?t:null;if(n=r==ALLOC_NONE?a:[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===r?ALLOC_STATIC:r](Math.max(s,o?1:t.length)),i){var l;a=n;for(assert(0==(3&n)),l=n+(-4&s);a<l;a+=4)HEAP32[a>>2]=0;l=n+s;while(a<l)HEAP8[a++>>0]=0;return n}if("i8"===o)return e.subarray||e.slice?HEAPU8.set(e,n):HEAPU8.set(new Uint8Array(e),n),n;var c,u,d,p=0;while(p<s){var f=e[p];"function"===typeof f&&(f=Runtime.getFunctionIndex(f)),c=o||t[p],0!==c?("i64"==c&&(c="i32"),setValue(n+p,f,c),d!==c&&(u=Runtime.getNativeTypeSize(c),d=c),p+=u):p++}return n}function getMemory(e){return staticSealed?"undefined"!==typeof _sbrk&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(e):_malloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";var r,a=0,i=0;while(1){if(r=HEAPU8[e+i>>0],a|=r,0==r&&!t)break;if(i++,t&&i==t)break}t||(t=i);var s="";if(a<128){var n,o=1024;while(t>0)n=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,o))),s=s?s+n:n,e+=o,t-=o;return s}return Module["UTF8ToString"](e)}function AsciiToString(e){var t="";while(1){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}function UTF8ArrayToString(e,t){var r,a,i,s,n,o,l="";while(1){if(r=e[t++],!r)return l;if(128&r)if(a=63&e[t++],192!=(224&r))if(i=63&e[t++],224==(240&r)?r=(15&r)<<12|a<<6|i:(s=63&e[t++],240==(248&r)?r=(7&r)<<18|a<<12|i<<6|s:(n=63&e[t++],248==(252&r)?r=(3&r)<<24|a<<18|i<<12|s<<6|n:(o=63&e[t++],r=(1&r)<<30|a<<24|i<<18|s<<12|n<<6|o))),r<65536)l+=String.fromCharCode(r);else{var c=r-65536;l+=String.fromCharCode(55296|c>>10,56320|1023&c)}else l+=String.fromCharCode((31&r)<<6|a);else l+=String.fromCharCode(r)}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,r,a){if(!(a>0))return 0;for(var i=r,s=r+a-1,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),o<=127){if(r>=s)break;t[r++]=o}else if(o<=2047){if(r+1>=s)break;t[r++]=192|o>>6,t[r++]=128|63&o}else if(o<=65535){if(r+2>=s)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o}else if(o<=2097151){if(r+3>=s)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}else if(o<=67108863){if(r+4>=s)break;t[r++]=248|o>>24,t[r++]=128|o>>18&63,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}else{if(r+5>=s)break;t[r++]=252|o>>30,t[r++]=128|o>>24&63,t[r++]=128|o>>18&63,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++r)),a<=127?++t:t+=a<=2047?2:a<=65535?3:a<=2097151?4:a<=67108863?5:6}return t}function UTF16ToString(e){var t=0,r="";while(1){var a=HEAP16[e+2*t>>1];if(0==a)return r;++t,r+=String.fromCharCode(a)}}function stringToUTF16(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;r-=2;for(var a=t,i=r<2*e.length?r/2:e.length,s=0;s<i;++s){var n=e.charCodeAt(s);HEAP16[t>>1]=n,t+=2}return HEAP16[t>>1]=0,t-a}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e){var t=0,r="";while(1){var a=HEAP32[e+4*t>>2];if(0==a)return r;if(++t,a>=65536){var i=a-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}else r+=String.fromCharCode(a)}}function stringToUTF32(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var a=t,i=a+r-4,s=0;s<e.length;++s){var n=e.charCodeAt(s);if(n>=55296&&n<=57343){var o=e.charCodeAt(++s);n=65536+((1023&n)<<10)|1023&o}if(HEAP32[t>>2]=n,t+=4,t+4>i)break}return HEAP32[t>>2]=0,t-a}function lengthBytesUTF32(e){for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&++r,t+=4}return t}function demangle(e){var t=!!Module["___cxa_demangle"];if(t)try{var r=_malloc(e.length);writeStringToMemory(e.substr(1),r);var a=_malloc(4),i=Module["___cxa_demangle"](r,0,0,a);if(0===getValue(a,"i32")&&i)return Pointer_stringify(i)}catch(p){}finally{r&&_free(r),a&&_free(a),i&&_free(i)}var s=3,n={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},o=[],l=!0;function c(){s++,"K"===e[s]&&s++;var t=[];while("E"!==e[s])if("S"!==e[s])if("C"!==e[s]){var r=parseInt(e.substr(s)),a=r.toString().length;if(!r||!a){s--;break}var i=e.substr(s+a,r);t.push(i),o.push(i),s+=a+r}else t.push(t[t.length-1]),s+=2;else{s++;var n=e.indexOf("_",s),l=e.substring(s,n)||0;t.push(o[l]||"?"),s=n+1}return s++,t}function u(t,r,a){r=r||1/0;var i,o="",d=[];function p(){return"("+d.join(", ")+")"}if("N"===e[s]){if(i=c().join("::"),r--,0===r)return t?[i]:i}else{("K"===e[s]||l&&"L"===e[s])&&s++;var f=parseInt(e.substr(s));if(f){var m=f.toString().length;i=e.substr(s+m,f),s+=m+f}}if(l=!1,"I"===e[s]){s++;var h=u(!0),b=u(!0,1,!0);o+=b[0]+" "+i+"<"+h.join(", ")+">"}else o=i;e:while(s<e.length&&r-- >0){var g=e[s++];if(g in n)d.push(n[g]);else switch(g){case"P":d.push(u(!0,1,!0)[0]+"*");break;case"R":d.push(u(!0,1,!0)[0]+"&");break;case"L":s++;var v=e.indexOf("E",s);f=v-s;d.push(e.substr(s,f)),s+=f+2;break;case"A":f=parseInt(e.substr(s));if(s+=f.toString().length,"_"!==e[s])throw"?";s++,d.push(u(!0,1,!0)[0]+" ["+f+"]");break;case"E":break e;default:o+="?"+g;break e}}return a||1!==d.length||"void"!==d[0]||(d=[]),t?(o&&d.push(o+"?"),d):o+p()}var d=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"===typeof e&&(e=Pointer_stringify(e)),"_"!==e[0])return e;if("_"!==e[1])return e;if("Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}d=u()}catch(p){d+="?"}return d.indexOf("?")>=0&&!t&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),d}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"}))}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module["ALLOC_NORMAL"]=ALLOC_NORMAL,Module["ALLOC_STACK"]=ALLOC_STACK,Module["ALLOC_STATIC"]=ALLOC_STATIC,Module["ALLOC_DYNAMIC"]=ALLOC_DYNAMIC,Module["ALLOC_NONE"]=ALLOC_NONE,Module["allocate"]=allocate,Module["getMemory"]=getMemory,Module["Pointer_stringify"]=Pointer_stringify,Module["AsciiToString"]=AsciiToString,Module["stringToAscii"]=stringToAscii,Module["UTF8ArrayToString"]=UTF8ArrayToString,Module["UTF8ToString"]=UTF8ToString,Module["stringToUTF8Array"]=stringToUTF8Array,Module["stringToUTF8"]=stringToUTF8,Module["lengthBytesUTF8"]=lengthBytesUTF8,Module["UTF16ToString"]=UTF16ToString,Module["stringToUTF16"]=stringToUTF16,Module["lengthBytesUTF16"]=lengthBytesUTF16,Module["UTF32ToString"]=UTF32ToString,Module["stringToUTF32"]=stringToUTF32,Module["lengthBytesUTF32"]=lengthBytesUTF32,Module["stackTrace"]=stackTrace;var PAGE_SIZE=4096,HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function alignMemoryPage(e){return e%4096>0&&(e+=4096-e%4096),e}var STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module["TOTAL_STACK"]||5242880,TOTAL_MEMORY=Module["TOTAL_MEMORY"]||268435456,totalMemory=65536,buffer;while(totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK)totalMemory<16777216?totalMemory*=2:totalMemory+=16777216;function callRuntimeCallbacks(e){while(e.length>0){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"===typeof r?void 0===t.arg?Runtime.dynCall("v",r):Runtime.dynCall("vi",r,[t.arg]):r(void 0===t.arg?null:t.arg)}else t()}}totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&!!new Int32Array(1)["subarray"]&&!!new Int32Array(1)["set"],"JS engine does not provide full typed array support"),buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(255===HEAPU8[0]&&0===HEAPU8[3],"Typed arrays 2 must be run on a little-endian system"),Module["HEAP"]=HEAP,Module["buffer"]=buffer,Module["HEAP8"]=HEAP8,Module["HEAP16"]=HEAP16,Module["HEAP32"]=HEAP32,Module["HEAPU8"]=HEAPU8,Module["HEAPU16"]=HEAPU16,Module["HEAPU32"]=HEAPU32,Module["HEAPF32"]=HEAPF32,Module["HEAPF64"]=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module["preRun"]){"function"==typeof Module["preRun"]&&(Module["preRun"]=[Module["preRun"]]);while(Module["preRun"].length)addOnPreRun(Module["preRun"].shift())}callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module["postRun"]){"function"==typeof Module["postRun"]&&(Module["postRun"]=[Module["postRun"]]);while(Module["postRun"].length)addOnPostRun(Module["postRun"].shift())}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,r){var a=r>0?r:lengthBytesUTF8(e)+1,i=new Array(a),s=stringToUTF8Array(e,i,0,i.length);return t&&(i.length=s),i}function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];a>255&&(a&=255),t.push(String.fromCharCode(a))}return t.join("")}function writeStringToMemory(e,t,r){var a=intArrayFromString(e,r),i=0;while(i<a.length){var s=a[i];HEAP8[t+i>>0]=s,i+=1}}function writeArrayToMemory(e,t){for(var r=0;r<e.length;r++)HEAP8[t++>>0]=e[r]}function writeAsciiToMemory(e,t,r){for(var a=0;a<e.length;++a)HEAP8[t++>>0]=e.charCodeAt(a);r||(HEAP8[t>>0]=0)}function unSign(e,t,r){return e>=0?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function reSign(e,t,r){if(e<=0)return e;var a=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=a&&(t<=32||e>a)&&(e=-2*a+e),e}Module["addOnPreRun"]=addOnPreRun,Module["addOnInit"]=addOnInit,Module["addOnPreMain"]=addOnPreMain,Module["addOnExit"]=addOnExit,Module["addOnPostRun"]=addOnPostRun,Module["intArrayFromString"]=intArrayFromString,Module["intArrayToString"]=intArrayToString,Module["writeStringToMemory"]=writeStringToMemory,Module["writeArrayToMemory"]=writeArrayToMemory,Module["writeAsciiToMemory"]=writeAsciiToMemory,Math["imul"]&&-5===Math["imul"](4294967295,5)||(Math["imul"]=function(e,t){var r=e>>>16,a=65535&e,i=t>>>16,s=65535&t;return a*s+(r*s+a*i<<16)|0}),Math.imul=Math["imul"],Math["clz32"]||(Math["clz32"]=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math["clz32"];var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,Math_clz32=Math.clz32,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies)}function removeRunDependency(e){if(runDependencies--,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module["addRunDependency"]=addRunDependency,Module["removeRunDependency"]=removeRunDependency,Module["preloadedImages"]={},Module["preloadedAudios"]={};var memoryInitializer=null,ASM_CONSTS=[function(e,t,r,a){artoolkit["multiEachMarkerInfo"]||(artoolkit["multiEachMarkerInfo"]={});var i=artoolkit["multiEachMarkerInfo"];i["visible"]=e,i["pattId"]=t,i["pattType"]=r,i["width"]=a},function(e,t,r,a,i,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T,E,P,A,M,I){var R=arguments,O=12;artoolkit["markerInfo"]||(artoolkit["markerInfo"]={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var $=artoolkit["markerInfo"];$["area"]=e,$["id"]=t,$["idPatt"]=r,$["idMatrix"]=a,$["dir"]=i,$["dirPatt"]=s,$["dirMatrix"]=n,$["cf"]=o,$["cfPatt"]=l,$["cfMatrix"]=c,$["pos"][0]=u,$["pos"][1]=d,$["line"][0][0]=R[O++],$["line"][0][1]=R[O++],$["line"][0][2]=R[O++],$["line"][1][0]=R[O++],$["line"][1][1]=R[O++],$["line"][1][2]=R[O++],$["line"][2][0]=R[O++],$["line"][2][1]=R[O++],$["line"][2][2]=R[O++],$["line"][3][0]=R[O++],$["line"][3][1]=R[O++],$["line"][3][2]=R[O++],$["vertex"][0][0]=R[O++],$["vertex"][0][1]=R[O++],$["vertex"][1][0]=R[O++],$["vertex"][1][1]=R[O++],$["vertex"][2][0]=R[O++],$["vertex"][2][1]=R[O++],$["vertex"][3][0]=R[O++],$["vertex"][3][1]=R[O++],$["errorCorrected"]=R[O++]},function(e,t,r,a,i){artoolkit["frameMalloc"]||(artoolkit["frameMalloc"]={});var s=artoolkit["frameMalloc"];s["framepointer"]=t,s["framesize"]=r,s["camera"]=a,s["transform"]=i}];function _emscripten_asm_const_33(e,t,r,a,i,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T,E,P,A,M,I,R){return ASM_CONSTS[e](t,r,a,i,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T,E,P,A,M,I,R)}function _emscripten_asm_const_4(e,t,r,a,i){return ASM_CONSTS[e](t,r,a,i)}function _emscripten_asm_const_5(e,t,r,a,i,s){return ASM_CONSTS[e](t,r,a,i,s)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);function copyTempFloat(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3]}function copyTempDouble(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3],HEAP8[tempDoublePtr+4]=HEAP8[e+4],HEAP8[tempDoublePtr+5]=HEAP8[e+5],HEAP8[tempDoublePtr+6]=HEAP8[e+6],HEAP8[tempDoublePtr+7]=HEAP8[e+7]}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}function ___assert_fail(e,t,r,a){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,a?Pointer_stringify(a):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}assert(tempDoublePtr%8==0),Module["_i64Subtract"]=_i64Subtract;var embind_charCodes=void 0;function readLatin1String(e){var t="",r=e;while(HEAPU8[r])t+=embind_charCodes[HEAPU8[r++]];return t}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var r=createNamedFunction(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var BindingError=void 0;function throwBindingError(e){throw new BindingError(e)}var InternalError=void 0;function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,r){function a(t){var a=r(t);a.length!==e.length&&throwInternalError("Mismatched type converter count");for(var i=0;i<e.length;++i)registerType(e[i],a[i])}e.forEach((function(e){typeDependencies[e]=t}));var i=new Array(t.length),s=[],n=0;t.forEach((function(e,t){registeredTypes.hasOwnProperty(e)?i[t]=registeredTypes[e]:(s.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){i[t]=registeredTypes[e],++n,n===s.length&&a(i)})))})),0===s.length&&a(i)}function registerType(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var a=t.name;if(e||throwBindingError('type "'+a+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+a+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var i=awaitingDependencies[e];delete awaitingDependencies[e],i.forEach((function(e){e()}))}}function __embind_register_void(e,t){t=readLatin1String(t),registerType(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,0===t.refcount&&(t.destructor&&Runtime.dynCall("vi",t.destructor,[e]),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(e)),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return 0|(asm["setTempRet0"](0),0);var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return 0|(asm["setTempRet0"](0),e);var a=Array.prototype.slice.call(arguments);Module["___cxa_is_pointer_type"](r);___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var i=0;i<a.length;i++)if(a[i]&&Module["___cxa_can_catch"](a[i],r,e))return e=HEAP32[e>>2],t.adjusted=e,0|(asm["setTempRet0"](a[i]),e);return e=HEAP32[e>>2],0|(asm["setTempRet0"](r),e)}function ___cxa_throw(e,t,r){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:r,refcount:0},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module["_memset"]=_memset;var _BDtoILow=!0;function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function __embind_register_bool(e,t,r,a,i){var s=getShiftFromSize(r);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?a:i},argPackAdvance:8,readValueFromPointer:function(e){var a;if(1===r)a=HEAP8;else if(2===r)a=HEAP16;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);a=HEAP32}return this["fromWireType"](a[e>>s])},destructorFunction:null})}function _abort(){Module["abort"]()}function _free(){}function _malloc(e){var t=Runtime.dynamicAlloc(e+8);return t+8&4294967288}function simpleReadValueFromPointer(e){return this["fromWireType"](HEAPU32[e>>2])}function __embind_register_std_string(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){for(var t=HEAPU32[e>>2],r=new Array(t),a=0;a<t;++a)r[a]=String.fromCharCode(HEAPU8[e+4+a]);return _free(e),r.join("")},toWireType:function(e,t){function r(e,t){return e[t]}function a(e,t){return e.charCodeAt(t)}var i;t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||t instanceof Int8Array?i=r:"string"===typeof t?i=a:throwBindingError("Cannot pass non-string to std::string");var s=t.length,n=_malloc(4+s);HEAPU32[n>>2]=s;for(var o=0;o<s;++o){var l=i(t,o);l>255&&(_free(n),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[n+4+o]=l}return null!==e&&e.push(_free,n),n},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,r){var a,i;r=readLatin1String(r),2===t?(a=function(){return HEAPU16},i=1):4===t&&(a=function(){return HEAPU32},i=2),registerType(e,{name:r,fromWireType:function(e){for(var t=a(),r=HEAPU32[e>>2],s=new Array(r),n=e+4>>i,o=0;o<r;++o)s[o]=String.fromCharCode(t[n+o]);return _free(e),s.join("")},toWireType:function(e,r){var s=a(),n=r.length,o=_malloc(4+n*t);HEAPU32[o>>2]=n;for(var l=o+4>>i,c=0;c<n;++c)s[l+c]=r.charCodeAt(c);return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}Module["_bitshift64Shl"]=_bitshift64Shl,Module["_free"]=_free,Module["_malloc"]=_malloc;var _emscripten_asm_const_int=!0;Module["_i64Add"]=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr(e){if(null===e)return"null";var t=E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e}function integerReadValueFromPointer(e,t,r){switch(t){case 0:return r?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return r?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return r?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,r,a,i){t=readLatin1String(t),-1===i&&(i=4294967295);var s=getShiftFromSize(r),n=function(e){return e};if(0===a){var o=32-8*r;n=function(e){return e<<o>>>o}}registerType(e,{name:t,fromWireType:n,toWireType:function(e,r){if("number"!==typeof r&&"boolean"!==typeof r)throw new TypeError('Cannot convert "'+_embind_repr(r)+'" to '+this.name);if(r<a||r>i)throw new TypeError('Passing a number "'+_embind_repr(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+a+", "+i+"]!");return 0|r},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,s,0!==a),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(e){e>4&&0===--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module["count_emval_handles"]=count_emval_handles,Module["get_first_emval"]=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function __embind_register_emval(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(e){return _malloc(e)}var _sin=Math_sin;function ___setErrNo(e){return Module["___errno_location"]&&(HEAP32[Module["___errno_location"]()>>2]=e),e}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(e){switch(e){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"===("undefined"===typeof navigator?"undefined":E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(navigator))&&navigator["hardwareConcurrency"]||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}function __exit(e){Module["exit"](e)}function _exit(e){__exit(e)}Module["_bitshift64Lshr"]=_bitshift64Lshr;var _llvm_ctlz_i32=!0;function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this["fromWireType"](HEAPF32[e>>2])};case 3:return function(e){return this["fromWireType"](HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,r){var a=getShiftFromSize(r);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,a),destructorFunction:null})}var _BDtoIHigh=!0;function _pthread_cleanup_push(e,t){__ATEXIT__.push((function(){Runtime.dynCall("vi",e,[t])})),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e)+" which is not a function");var r=createNamedFunction(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var a=new r,i=e.apply(a,t);return i instanceof Object?i:a}function runDestructors(e){while(e.length){var t=e.pop(),r=e.pop();r(t)}}function craftInvokerFunction(e,t,r,a,i){var s=t.length;s<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var n=null!==t[1]&&null!==r,o="",l="",c=0;c<s-2;++c)o+=(0!==c?", ":"")+"arg"+c,l+=(0!==c?", ":"")+"arg"+c+"Wired";var u="return function "+makeLegalFunctionName(e)+"("+o+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n",d=!1;for(c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){d=!0;break}d&&(u+="var destructors = [];\n");var p=d?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[throwBindingError,a,i,runDestructors,t[0],t[1]];n&&(u+="var thisWired = classParam.toWireType("+p+", this);\n");for(c=0;c<s-2;++c)u+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),m.push(t[c+2]);n&&(l="thisWired"+(l.length>0?", ":"")+l);var h="void"!==t[0].name;if(u+=(h?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",d)u+="runDestructors(destructors);\n";else for(c=n?1:2;c<t.length;++c){var b=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(u+=b+"_dtor("+b+"); // "+t[c].name+"\n",f.push(b+"_dtor"),m.push(t[c].destructorFunction))}h&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),u+="}\n",f.push(u);var g=new_(Function,f).apply(null,m);return g}function ensureOverloadTable(e,t,r){if(void 0===e[t].overloadTable){var a=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}}function exposePublicSymbol(e,t,r){Module.hasOwnProperty(e)?((void 0===r||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[r])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(r)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),Module[e].overloadTable[r]=t):(Module[e]=t,void 0!==r&&(Module[e].numArguments=r))}function heap32VectorToArray(e,t){for(var r=[],a=0;a<e;a++)r.push(HEAP32[(t>>2)+a]);return r}function replacePublicSymbol(e,t,r){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==r?Module[e].overloadTable[r]=t:Module[e]=t}function requireFunction(e,t){function r(r){for(var a=[],i=1;i<e.length;++i)a.push("a"+i);var s="dynCall_"+e+"_"+t,n="return function "+s+"("+a.join(", ")+") {\n";return n+="    return dynCall(rawFunction"+(a.length?", ":"")+a.join(", ")+");\n",n+="};\n",new Function("dynCall","rawFunction",n)(r,t)}var a;if(e=readLatin1String(e),void 0!==Module["FUNCTION_TABLE_"+e])a=Module["FUNCTION_TABLE_"+e][t];else if("undefined"!==typeof FUNCTION_TABLE)a=FUNCTION_TABLE[t];else{var i=asm["dynCall_"+e];void 0===i&&(i=asm["dynCall_"+e.replace(/f/g,"d")],void 0===i&&throwBindingError("No dynCall invoker for signature: "+e)),a=r(i)}return"function"!==typeof a&&throwBindingError("unknown function pointer with signature "+e+": "+t),a}var UnboundTypeError=void 0;function getTypeName(e){var t=___getTypeName(e),r=readLatin1String(t);return _free(t),r}function throwUnboundTypeError(e,t){var r=[],a={};function i(e){a[e]||registeredTypes[e]||(typeDependencies[e]?typeDependencies[e].forEach(i):(r.push(e),a[e]=!0))}throw t.forEach(i),new UnboundTypeError(e+": "+r.map(getTypeName).join([", "]))}function __embind_register_function(e,t,r,a,i,s){var n=heap32VectorToArray(t,r);e=readLatin1String(e),i=requireFunction(a,i),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",n)}),t-1),whenDependentTypesAreResolved([],n,(function(r){var a=[r[0],null].concat(r.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,a,null,i,s),t-1),[]}))}function __embind_register_constant(e,t,r){e=readLatin1String(e),whenDependentTypesAreResolved([],[t],(function(t){return t=t[0],Module[e]=t["fromWireType"](r),[]}))}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,a=e.length-1;a>=0;a--){var i=e[a];"."===i?e.splice(a,1):".."===i?(e.splice(a,1),r++):r&&(e.splice(a,1),r--)}if(t)for(;r--;r)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),r=t[0],a=t[1];return r||a?(a&&(a=a.substr(0,a.length-1)),r+a):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var a=r>=0?arguments[r]:FS.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";e=a+"/"+e,t="/"===a.charAt(0)}return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var r=e.length-1;r>=0;r--)if(""!==e[r])break;return t>r?[]:e.slice(t,r-t+1)}e=PATH.resolve(e).substr(1),t=PATH.resolve(t).substr(1);for(var a=r(e.split("/")),i=r(t.split("/")),s=Math.min(a.length,i.length),n=s,o=0;o<s;o++)if(a[o]!==i[o]){n=o;break}var l=[];for(o=n;o<a.length;o++)l.push("..");return l=l.concat(i.slice(n)),l.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,a,i){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var s=0,n=0;n<a;n++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(l){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===o&&0===s)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===o||void 0===o)break;s++,t[r+n]=o}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,a,i){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var s=0;s<a;s++)try{e.tty.ops.put_char(e.tty,t[r+s])}catch(n){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return a&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var r=256,a=new Buffer(r),i=0,s=process.stdin.fd,n=!1;try{s=fs.openSync("/dev/stdin","r"),n=!0}catch(o){}i=fs.readSync(s,a,0,r,null),n&&fs.closeSync(s),t=i>0?a.slice(0,i).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"));if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,r,a){if(FS.isBlkdev(r)||FS.isFIFO(r))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var i=FS.createNode(e,t,r,a);return FS.isDir(i.mode)?(i.node_ops=MEMFS.ops_table.dir.node,i.stream_ops=MEMFS.ops_table.dir.stream,i.contents={}):FS.isFile(i.mode)?(i.node_ops=MEMFS.ops_table.file.node,i.stream_ops=MEMFS.ops_table.file.stream,i.usedBytes=0,i.contents=null):FS.isLink(i.mode)?(i.node_ops=MEMFS.ops_table.link.node,i.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(i.mode)&&(i.node_ops=MEMFS.ops_table.chrdev.node,i.stream_ops=MEMFS.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){if(e.contents&&e.contents.subarray&&t>e.contents.length&&(e.contents=MEMFS.getFileDataAsRegularArray(e),e.usedBytes=e.contents.length),!e.contents||e.contents.subarray){var r=e.contents?e.contents.buffer.byteLength:0;if(r>=t)return;var a=1048576;t=Math.max(t,r*(r<a?2:1.125)|0),0!=r&&(t=Math.max(t,256));var i=e.contents;return e.contents=new Uint8Array(t),void(e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0))}!e.contents&&t>0&&(e.contents=[]);while(e.contents.length<t)e.contents.push(0)},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else while(e.contents.length<t)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(e,t,r,a){return MEMFS.createNode(e,t,r,a)},rename:function(e,t,r){if(FS.isDir(e.mode)){var a;try{a=FS.lookupNode(t,r)}catch(s){}if(a)for(var i in a.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=FS.lookupNode(e,t);for(var a in r.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var a=MEMFS.createNode(e,t,41471,0);return a.link=r,a},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return e.link}},stream_ops:{read:function(e,t,r,a,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-i,a);if(assert(n>=0),n>8&&s.subarray)t.set(s.subarray(i,i+n),r);else for(var o=0;o<n;o++)t[r+o]=s[i+o];return n},write:function(e,t,r,a,i,s){if(!a)return 0;var n=e.node;if(n.timestamp=Date.now(),t.subarray&&(!n.contents||n.contents.subarray)){if(s)return n.contents=t.subarray(r,r+a),n.usedBytes=a,a;if(0===n.usedBytes&&0===i)return n.contents=new Uint8Array(t.subarray(r,r+a)),n.usedBytes=a,a;if(i+a<=n.usedBytes)return n.contents.set(t.subarray(r,r+a),i),a}if(MEMFS.expandFileStorage(n,i+a),n.contents.subarray&&t.subarray)n.contents.set(t.subarray(r,r+a),i);else for(var o=0;o<a;o++)n.contents[i+o]=t[r+o];return n.usedBytes=Math.max(n.usedBytes,i+a),a},llseek:function(e,t,r){var a=t;if(1===r?a+=e.position:2===r&&FS.isFile(e.node.mode)&&(a+=e.node.usedBytes),a<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return a},allocate:function(e,t,r){MEMFS.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,a,i,s,n){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var o,l,c=e.node.contents;if(2&n||c.buffer!==t&&c.buffer!==t.buffer){if((i>0||i+a<e.node.usedBytes)&&(c=c.subarray?c.subarray(i,i+a):Array.prototype.slice.call(c,i,i+a)),l=!0,o=_malloc(a),!o)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);t.set(c,o)}else l=!1,o=c.byteOffset;return{ptr:o,allocated:l}},msync:function(e,t,r,a,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(2&i)return 0;MEMFS.stream_ops.write(e,t,0,a,r,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){if("undefined"!==typeof indexedDB)return indexedDB;var e=null;return"object"===("undefined"===typeof window?"undefined":E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(window))&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e})),DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,r){IDBFS.getLocalSet(e,(function(a,i){if(a)return r(a);IDBFS.getRemoteSet(e,(function(e,a){if(e)return r(e);var s=t?a:i,n=t?i:a;IDBFS.reconcile(s,n,r)}))}))},getDB:function(e,t){var r,a=IDBFS.dbs[e];if(a)return t(null,a);try{r=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(i){return t(i)}r.onupgradeneeded=function(e){var t,r=e.target.result,a=e.target.transaction;t=r.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?a.objectStore(IDBFS.DB_STORE_NAME):r.createObjectStore(IDBFS.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},r.onsuccess=function(){a=r.result,IDBFS.dbs[e]=a,t(null,a)},r.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var r={};function a(e){return"."!==e&&".."!==e}function i(e){return function(t){return PATH.join2(e,t)}}var s=FS.readdir(e.mountpoint).filter(a).map(i(e.mountpoint));while(s.length){var n,o=s.pop();try{n=FS.stat(o)}catch(l){return t(l)}FS.isDir(n.mode)&&s.push.apply(s,FS.readdir(o).filter(a).map(i(o))),r[o]={timestamp:n.mtime}}return t(null,{type:"local",entries:r})},getRemoteSet:function(e,t){var r={};IDBFS.getDB(e.mountpoint,(function(e,a){if(e)return t(e);var i=a.transaction([IDBFS.DB_STORE_NAME],"readonly");i.onerror=function(e){t(this.error),e.preventDefault()};var s=i.objectStore(IDBFS.DB_STORE_NAME),n=s.index("timestamp");n.openKeyCursor().onsuccess=function(e){var i=e.target.result;if(!i)return t(null,{type:"remote",db:a,entries:r});r[i.primaryKey]={timestamp:i.key},i.continue()}}))},loadLocalEntry:function(e,t){var r,a;try{var i=FS.lookupPath(e);a=i.node,r=FS.stat(e)}catch(s){return t(s)}return FS.isDir(r.mode)?t(null,{timestamp:r.mtime,mode:r.mode}):FS.isFile(r.mode)?(a.contents=MEMFS.getFileDataAsTypedArray(a),t(null,{timestamp:r.mtime,mode:r.mode,contents:a.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,r){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode);else{if(!FS.isFile(t.mode))return r(new Error("node type not supported"));FS.writeFile(e,t.contents,{encoding:"binary",canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(a){return r(a)}r(null)},removeLocalEntry:function(e,t){try{FS.lookupPath(e);var r=FS.stat(e);FS.isDir(r.mode)?FS.rmdir(e):FS.isFile(r.mode)&&FS.unlink(e)}catch(a){return t(a)}t(null)},loadRemoteEntry:function(e,t,r){var a=e.get(t);a.onsuccess=function(e){r(null,e.target.result)},a.onerror=function(e){r(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,r,a){var i=e.put(r,t);i.onsuccess=function(){a(null)},i.onerror=function(e){a(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,r){var a=e.delete(t);a.onsuccess=function(){r(null)},a.onerror=function(e){r(this.error),e.preventDefault()}},reconcile:function(e,t,r){var a=0,i=[];Object.keys(e.entries).forEach((function(r){var s=e.entries[r],n=t.entries[r];(!n||s.timestamp>n.timestamp)&&(i.push(r),a++)}));var s=[];if(Object.keys(t.entries).forEach((function(r){t.entries[r];var i=e.entries[r];i||(s.push(r),a++)})),!a)return r(null);var n=0,o="remote"===e.type?e.db:t.db,l=o.transaction([IDBFS.DB_STORE_NAME],"readwrite"),c=l.objectStore(IDBFS.DB_STORE_NAME);function u(e){return e?u.errored?void 0:(u.errored=!0,r(e)):++n>=a?r(null):void 0}l.onerror=function(e){u(this.error),e.preventDefault()},i.sort().forEach((function(e){"local"===t.type?IDBFS.loadRemoteEntry(c,e,(function(t,r){if(t)return u(t);IDBFS.storeLocalEntry(e,r,u)})):IDBFS.loadLocalEntry(e,(function(t,r){if(t)return u(t);IDBFS.storeRemoteEntry(c,e,r,u)}))})),s.sort().reverse().forEach((function(e){"local"===t.type?IDBFS.removeLocalEntry(e,u):IDBFS.removeRemoteEntry(c,e,u)}))}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(e){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,r,a){if(!FS.isDir(r)&&!FS.isFile(r)&&!FS.isLink(r))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i=FS.createNode(e,t,r);return i.node_ops=NODEFS.node_ops,i.stream_ops=NODEFS.stream_ops,i},getMode:function(e){var t;try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(146&t.mode)>>1)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}return t.mode},realPath:function(e){var t=[];while(e.parent!==e)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(e){if(e&=-32769,e in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[e];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(e){var t,r=NODEFS.realPath(e);try{t=fs.lstatSync(r)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var r=NODEFS.realPath(e);try{if(void 0!==t.mode&&(fs.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.timestamp){var a=new Date(t.timestamp);fs.utimesSync(r,a,a)}void 0!==t.size&&fs.truncateSync(r,t.size)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},lookup:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t),a=NODEFS.getMode(r);return NODEFS.createNode(e,t,a)},mknod:function(e,t,r,a){var i=NODEFS.createNode(e,t,r,a),s=NODEFS.realPath(i);try{FS.isDir(i.mode)?fs.mkdirSync(s,i.mode):fs.writeFileSync(s,"",{mode:i.mode})}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}return i},rename:function(e,t,r){var a=NODEFS.realPath(e),i=PATH.join2(NODEFS.realPath(t),r);try{fs.renameSync(a,i)}catch(s){if(!s.code)throw s;throw new FS.ErrnoError(ERRNO_CODES[s.code])}},unlink:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.unlinkSync(r)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}},rmdir:function(e,t){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.rmdirSync(r)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}},readdir:function(e){var t=NODEFS.realPath(e);try{return fs.readdirSync(t)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},symlink:function(e,t,r){var a=PATH.join2(NODEFS.realPath(e),t);try{fs.symlinkSync(r,a)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},readlink:function(e){var t=NODEFS.realPath(e);try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t),t}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node);try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsToPermissionString(e.flags)))}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(t){if(!t.code)throw t;throw new FS.ErrnoError(ERRNO_CODES[t.code])}},read:function(e,t,r,a,i){if(0===a)return 0;var s,n=new Buffer(a);try{s=fs.readSync(e.nfd,n,0,a,i)}catch(l){throw new FS.ErrnoError(ERRNO_CODES[l.code])}if(s>0)for(var o=0;o<s;o++)t[r+o]=n[o];return s},write:function(e,t,r,a,i){var s,n=new Buffer(t.subarray(r,r+a));try{s=fs.writeSync(e.nfd,n,0,a,i)}catch(o){throw new FS.ErrnoError(ERRNO_CODES[o.code])}return s},llseek:function(e,t,r){var a=t;if(1===r)a+=e.position;else if(2===r&&FS.isFile(e.node.mode))try{var i=fs.fstatSync(e.nfd);a+=i.size}catch(s){throw new FS.ErrnoError(ERRNO_CODES[s.code])}if(a<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return a}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var t=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),r={};function a(e){for(var a=e.split("/"),i=t,s=0;s<a.length-1;s++){var n=a.slice(0,s+1).join("/");r[n]||(r[n]=WORKERFS.createNode(i,n,WORKERFS.DIR_MODE,0)),i=r[n]}return i}function i(e){var t=e.split("/");return t[t.length-1]}return Array.prototype.forEach.call(e.opts["files"]||[],(function(e){WORKERFS.createNode(a(e.name),i(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)})),(e.opts["blobs"]||[]).forEach((function(e){WORKERFS.createNode(a(e["name"]),i(e["name"]),WORKERFS.FILE_MODE,0,e["data"])})),(e.opts["packages"]||[]).forEach((function(e){e["metadata"].files.forEach((function(t){var r=t.filename.substr(1);WORKERFS.createNode(a(r),i(r),WORKERFS.FILE_MODE,0,e["blob"].slice(t.start,t.end))}))})),t},createNode:function(e,t,r,a,i,s){var n=FS.createNode(e,t,r);return n.mode=r,n.node_ops=WORKERFS.node_ops,n.stream_ops=WORKERFS.stream_ops,n.timestamp=(s||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),r===WORKERFS.FILE_MODE?(n.size=i.size,n.contents=i):(n.size=4096,n.contents={}),e&&(e.contents[t]=n),n},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(e,t,r,a){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(e,t,r){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(e,t,r){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(e,t,r,a,i){if(i>=e.node.size)return 0;var s=e.node.contents.slice(i,i+a),n=WORKERFS.reader.readAsArrayBuffer(s);return t.set(new Uint8Array(n),r),s.size},write:function(e,t,r,a,i){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(e,t,r){var a=t;if(1===r?a+=e.position:2===r&&FS.isFile(e.node.mode)&&(a+=e.node.size),a<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return a}}},_stdin=allocate(1,"i32*",ALLOC_STATIC),_stdout=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC),FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(e=PATH.resolve(FS.cwd(),e),t=t||{},!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var a in r)void 0===t[a]&&(t[a]=r[a]);if(t.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var i=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),s=FS.root,n="/",o=0;o<i.length;o++){var l=o===i.length-1;if(l&&t.parent)break;if(s=FS.lookupNode(s,i[o]),n=PATH.join2(n,i[o]),FS.isMountpoint(s)&&(!l||l&&t.follow_mount)&&(s=s.mounted.root),!l||t.follow){var c=0;while(FS.isLink(s.mode)){var u=FS.readlink(n);n=PATH.resolve(PATH.dirname(n),u);var d=FS.lookupPath(n,{recurse_count:t.recurse_count});if(s=d.node,c++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}}return{path:n,node:s}},getPath:function(e){var t;while(1){if(FS.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,a=0;a<t.length;a++)r=(r<<5)-r+t.charCodeAt(a)|0;return(e+r>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else{var r=FS.nameTable[t];while(r){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}}},lookupNode:function(e,t){var r=FS.mayLookup(e);if(r)throw new FS.ErrnoError(r,e);for(var a=FS.hashName(e.id,t),i=FS.nameTable[a];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===t)return i}return FS.lookup(e,t)},createNode:function(e,t,r,a){if(!FS.FSNode){FS.FSNode=function(e,t,r,a){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=a},FS.FSNode.prototype={};var i=365,s=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&i)===i},set:function(e){e?this.mode|=i:this.mode&=~i}},write:{get:function(){return(this.mode&s)===s},set:function(e){e?this.mode|=s:this.mode&=~s}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var n=new FS.FSNode(e,t,r,a);return FS.hashAddNode(n),n},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:ERRNO_CODES.EACCES},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function(e,t){try{FS.lookupNode(e,t);return ERRNO_CODES.EEXIST}catch(r){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var a;try{a=FS.lookupNode(e,t)}catch(s){return s.errno}var i=FS.nodePermissions(e,"wx");if(i)return i;if(r){if(!FS.isDir(a.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(a)||FS.getPath(a)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(a.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?ERRNO_CODES.ELOOP:FS.isDir(e.mode)&&(0!==(2097155&t)||512&t)?ERRNO_CODES.EISDIR:FS.nodePermissions(e,FS.flagsToPermissionString(t)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!FS.streams[r])return r;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,r){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var a=new FS.FSStream;for(var i in e)a[i]=e[i];e=a;var s=FS.nextfd(t,r);return e.fd=s,FS.streams[s]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){var t=[],r=[e];while(r.length){var a=r.pop();t.push(a),r.push.apply(r,a.mounts)}return t},syncfs:function(e,t){"function"===typeof e&&(t=e,e=!1);var r=FS.getMounts(FS.root.mount),a=0;function i(e){if(e)return i.errored?void 0:(i.errored=!0,t(e));++a>=r.length&&t(null)}r.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,r){var a,i="/"===r,s=!r;if(i&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!i&&!s){var n=FS.lookupPath(r,{follow_mount:!1});if(r=n.path,a=n.node,FS.isMountpoint(a))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(a.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var o={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(o);return l.mount=o,o.root=l,i?FS.root=l:a&&(a.mounted=o,a.mount&&a.mount.mounts.push(o)),l},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=t.node,a=r.mounted,i=FS.getMounts(a);Object.keys(FS.nameTable).forEach((function(e){var t=FS.nameTable[e];while(t){var r=t.name_next;-1!==i.indexOf(t.mount)&&FS.destroyNode(t),t=r}})),r.mounted=null;var s=r.mount.mounts.indexOf(a);assert(-1!==s),r.mount.mounts.splice(s,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var a=FS.lookupPath(e,{parent:!0}),i=a.node,s=PATH.basename(e);if(!s||"."===s||".."===s)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var n=FS.mayCreate(i,s);if(n)throw new FS.ErrnoError(n);if(!i.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return i.node_ops.mknod(i,s,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdev:function(e,t,r){return"undefined"===typeof r&&(r=t,t=438),t|=8192,FS.mknod(e,t,r)},symlink:function(e,t){if(!PATH.resolve(e))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var r=FS.lookupPath(t,{parent:!0}),a=r.node;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var i=PATH.basename(t),s=FS.mayCreate(a,i);if(s)throw new FS.ErrnoError(s);if(!a.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return a.node_ops.symlink(a,i,e)},rename:function(e,t){var r,a,i,s=PATH.dirname(e),n=PATH.dirname(t),o=PATH.basename(e),l=PATH.basename(t);try{r=FS.lookupPath(e,{parent:!0}),a=r.node,r=FS.lookupPath(t,{parent:!0}),i=r.node}catch(m){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!a||!i)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(a.mount!==i.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var c,u=FS.lookupNode(a,o),d=PATH.relative(e,n);if("."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(d=PATH.relative(t,s),"."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);try{c=FS.lookupNode(i,l)}catch(m){}if(u!==c){var p=FS.isDir(u.mode),f=FS.mayDelete(a,o,p);if(f)throw new FS.ErrnoError(f);if(f=c?FS.mayDelete(i,l,p):FS.mayCreate(i,l),f)throw new FS.ErrnoError(f);if(!a.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(u)||c&&FS.isMountpoint(c))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(i!==a&&(f=FS.nodePermissions(a,"w"),f))throw new FS.ErrnoError(f);try{FS.trackingDelegate["willMovePath"]&&FS.trackingDelegate["willMovePath"](e,t)}catch(m){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+m.message)}FS.hashRemoveNode(u);try{a.node_ops.rename(u,i,l)}catch(m){throw m}finally{FS.hashAddNode(u)}try{FS.trackingDelegate["onMovePath"]&&FS.trackingDelegate["onMovePath"](e,t)}catch(m){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+m.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}),r=t.node,a=PATH.basename(e),i=FS.lookupNode(r,a),s=FS.mayDelete(r,a,!0);if(s)throw new FS.ErrnoError(s);if(!r.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(i))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}r.node_ops.rmdir(r,a),FS.destroyNode(i);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}),r=t.node;if(!r.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return r.node_ops.readdir(r)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}),r=t.node,a=PATH.basename(e),i=FS.lookupNode(r,a),s=FS.mayDelete(r,a,!1);if(s)throw s===ERRNO_CODES.EISDIR&&(s=ERRNO_CODES.EPERM),new FS.ErrnoError(s);if(!r.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(i))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}r.node_ops.unlink(r,a),FS.destroyNode(i);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readlink:function(e){var t=FS.lookupPath(e),r=t.node;if(!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!r.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(r.parent),r.node_ops.readlink(r))},stat:function(e,t){var r=FS.lookupPath(e,{follow:!t}),a=r.node;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!a.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return a.node_ops.getattr(a)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,r){var a;if("string"===typeof e){var i=FS.lookupPath(e,{follow:!r});a=i.node}else a=e;if(!a.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);a.node_ops.setattr(a,{mode:4095&t|-4096&a.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(r.node,t)},chown:function(e,t,r,a){var i;if("string"===typeof e){var s=FS.lookupPath(e,{follow:!a});i=s.node}else i=e;if(!i.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,r){FS.chown(e,t,r,!0)},fchown:function(e,t,r){var a=FS.getStream(e);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(a.node,t,r)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r;if("string"===typeof e){var a=FS.lookupPath(e,{follow:!0});r=a.node}else r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(r.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(r.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i=FS.nodePermissions(r,"w");if(i)throw new FS.ErrnoError(i);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(2097155&r.flags))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(r.node,t)},utime:function(e,t,r){var a=FS.lookupPath(e,{follow:!0}),i=a.node;i.node_ops.setattr(i,{timestamp:Math.max(t,r)})},open:function(e,t,r,a,i){if(""===e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var s;if(t="string"===typeof t?FS.modeStringToFlags(t):t,r="undefined"===typeof r?438:r,r=64&t?4095&r|32768:0,"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e))s=e;else{e=PATH.normalize(e);try{var n=FS.lookupPath(e,{follow:!(131072&t)});s=n.node}catch(d){}}var o=!1;if(64&t)if(s){if(128&t)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else s=FS.mknod(e,r,0),o=!0;if(!s)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(s.mode)&&(t&=-513),65536&t&&!FS.isDir(s.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!o){var l=FS.mayOpen(s,t);if(l)throw new FS.ErrnoError(l)}512&t&&FS.truncate(s,0),t&=-641;var c=FS.createStream({node:s,path:FS.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},a,i);c.stream_ops.open&&c.stream_ops.open(c),!Module["logReadFiles"]||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,Module["printErr"]("read file: "+e)));try{if(FS.trackingDelegate["onOpenFile"]){var u=0;1!==(2097155&t)&&(u|=FS.tracking.openFlags.READ),0!==(2097155&t)&&(u|=FS.tracking.openFlags.WRITE),FS.trackingDelegate["onOpenFile"](e,u)}}catch(d){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+d.message)}return c},close:function(e){e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{FS.closeStream(e.fd)}},llseek:function(e,t,r){if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,a,i){if(a<0||i<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var s=!0;if("undefined"===typeof i)i=e.position,s=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var n=e.stream_ops.read(e,t,r,a,i);return s||(e.position+=n),n},write:function(e,t,r,a,i,s){if(a<0||i<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);1024&e.flags&&FS.llseek(e,0,2);var n=!0;if("undefined"===typeof i)i=e.position,n=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var o=e.stream_ops.write(e,t,r,a,i,s);n||(e.position+=o);try{e.path&&FS.trackingDelegate["onWriteToFile"]&&FS.trackingDelegate["onWriteToFile"](e.path)}catch(l){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+l.message)}return o},allocate:function(e,t,r){if(t<0||r<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(e.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!e.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,a,i,s,n){if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!e.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return e.stream_ops.mmap(e,t,r,a,i,s,n)},msync:function(e,t,r,a,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,a,i):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,a=FS.open(e,t.flags),i=FS.stat(e),s=i.size,n=new Uint8Array(s);return FS.read(a,n,0,s,0),"utf8"===t.encoding?r=UTF8ArrayToString(n,0):"binary"===t.encoding&&(r=n),FS.close(a),r},writeFile:function(e,t,r){if(r=r||{},r.flags=r.flags||"w",r.encoding=r.encoding||"utf8","utf8"!==r.encoding&&"binary"!==r.encoding)throw new Error('Invalid encoding type "'+r.encoding+'"');var a=FS.open(e,r.flags,r.mode);if("utf8"===r.encoding){var i=new Uint8Array(lengthBytesUTF8(t)+1),s=stringToUTF8Array(t,i,0,i.length);FS.write(a,i,0,s,0,r.canOwn)}else"binary"===r.encoding&&FS.write(a,t,0,t.length,0,r.canOwn);FS.close(a)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var r=FS.nodePermissions(t.node,"x");if(r)throw new FS.ErrnoError(r);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,r,a,i){return a}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0)),"undefined"!==typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=ENVIRONMENT_IS_NODE?function(){return __webpack_require__("1c46").randomBytes(1)[0]}:function(){return 256*Math.random()|0};FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,a=FS.getStream(r);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return a.path}}};return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module["stdin"]?FS.createDevice("/dev","stdin",Module["stdin"]):FS.symlink("/dev/tty","/dev/stdin"),Module["stdout"]?FS.createDevice("/dev","stdout",null,Module["stdout"]):FS.symlink("/dev/tty","/dev/stdout"),Module["stderr"]?FS.createDevice("/dev","stderr",null,Module["stderr"]):FS.symlink("/dev/tty1","/dev/stderr");var e=FS.open("/dev/stdin","r");assert(0===e.fd,"invalid handle for stdin ("+e.fd+")");var t=FS.open("/dev/stdout","w");assert(1===t.fd,"invalid handle for stdout ("+t.fd+")");var r=FS.open("/dev/stderr","w");assert(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,ERRNO_CODES)if(ERRNO_CODES[t]===e){this.code=t;break}},this.setErrno(e),this.message=ERRNO_MESSAGES[e]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,r){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module["stdin"]=e||Module["stdin"],Module["stdout"]=t||Module["stdout"],Module["stderr"]=r||Module["stderr"],FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module["_fflush"];e&&e(0);for(var t=0;t<FS.streams.length;t++){var r=FS.streams[t];r&&FS.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=PATH.join.apply(null,e);return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return PATH.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var r=FS.analyzePath(e,t);return r.exists?r.object:(___setErrNo(r.error),null)},analyzePath:function(e,t){try{var r=FS.lookupPath(e,{follow:!t});e=r.path}catch(i){}var a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{r=FS.lookupPath(e,{parent:!0});a.parentExists=!0,a.parentPath=r.path,a.parentObject=r.node,a.name=PATH.basename(e),r=FS.lookupPath(e,{follow:!t}),a.exists=!0,a.path=r.path,a.object=r.node,a.name=r.node.name,a.isRoot="/"===r.path}catch(i){a.error=i.errno}return a},createFolder:function(e,t,r,a){var i=PATH.join2("string"===typeof e?e:FS.getPath(e),t),s=FS.getMode(r,a);return FS.mkdir(i,s)},createPath:function(e,t,r,a){e="string"===typeof e?e:FS.getPath(e);var i=t.split("/").reverse();while(i.length){var s=i.pop();if(s){var n=PATH.join2(e,s);try{FS.mkdir(n)}catch(o){}e=n}}return n},createFile:function(e,t,r,a,i){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t),n=FS.getMode(a,i);return FS.create(s,n)},createDataFile:function(e,t,r,a,i,s){var n=t?PATH.join2("string"===typeof e?e:FS.getPath(e),t):e,o=FS.getMode(a,i),l=FS.create(n,o);if(r){if("string"===typeof r){for(var c=new Array(r.length),u=0,d=r.length;u<d;++u)c[u]=r.charCodeAt(u);r=c}FS.chmod(l,146|o);var p=FS.open(l,"w");FS.write(p,r,0,r.length,0,s),FS.close(p),FS.chmod(l,o)}return l},createDevice:function(e,t,r,a){var i=PATH.join2("string"===typeof e?e:FS.getPath(e),t),s=FS.getMode(!!r,!!a);FS.createDevice.major||(FS.createDevice.major=64);var n=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(n,{open:function(e){e.seekable=!1},close:function(e){a&&a.buffer&&a.buffer.length&&a(10)},read:function(e,t,a,i,s){for(var n=0,o=0;o<i;o++){var l;try{l=r()}catch(c){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===l&&0===n)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===l||void 0===l)break;n++,t[a+o]=l}return n&&(e.node.timestamp=Date.now()),n},write:function(e,t,r,i,s){for(var n=0;n<i;n++)try{a(t[r+n])}catch(o){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return i&&(e.node.timestamp=Date.now()),n}}),FS.mkdev(i,s,n)},createLink:function(e,t,r,a,i){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t);return FS.symlink(r,s)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Module["read"])throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(Module["read"](e.url),!0),e.usedBytes=e.contents.length}catch(r){t=!1}return t||___setErrNo(ERRNO_CODES.EIO),t},createLazyFile:function(e,t,r,a,i){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,a=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,s=1048576;i||(s=a);var n=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>a-1)throw new Error("only "+a+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",r,!1),a!==s&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+r+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):intArrayFromString(i.responseText||"",!0)},o=this;o.setDataGetter((function(e){var t=e*s,r=(e+1)*s-1;if(r=Math.min(r,a-1),"undefined"===typeof o.chunks[e]&&(o.chunks[e]=n(t,r)),"undefined"===typeof o.chunks[e])throw new Error("doXHR failed!");return o.chunks[e]})),this._length=a,this._chunkSize=s,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var n=new s;Object.defineProperty(n,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(n,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var o={isDevice:!1,contents:n}}else o={isDevice:!1,url:r};var l=FS.createFile(e,t,o,a,i);o.contents?l.contents=o.contents:o.url&&(l.contents=null,l.url=o.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.contents.length}});var c={},u=Object.keys(l.stream_ops);return u.forEach((function(e){var t=l.stream_ops[e];c[e]=function(){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);return t.apply(null,arguments)}})),c.read=function(e,t,r,a,i){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);var s=e.node.contents;if(i>=s.length)return 0;var n=Math.min(s.length-i,a);if(assert(n>=0),s.slice)for(var o=0;o<n;o++)t[r+o]=s[i+o];else for(o=0;o<n;o++)t[r+o]=s.get(i+o);return n},l.stream_ops=c,l},createPreloadedFile:function(e,t,r,a,i,s,n,o,l,c){Browser.init();var u=t?PATH.resolve(PATH.join2(e,t)):e,d=getUniqueRunDependency("cp "+u);function p(r){function p(r){c&&c(),o||FS.createDataFile(e,t,r,a,i,l),s&&s(),removeRunDependency(d)}var f=!1;Module["preloadPlugins"].forEach((function(e){f||e["canHandle"](u)&&(e["handle"](r,u,p,(function(){n&&n(),removeRunDependency(d)})),f=!0)})),f||p(r)}addRunDependency(d),"string"==typeof r?Browser.asyncLoad(r,(function(e){p(e)}),n):p(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var a=FS.indexedDB();try{var i=a.open(FS.DB_NAME(),FS.DB_VERSION)}catch(s){return r(s)}i.onupgradeneeded=function(){console.log("creating db");var e=i.result;e.createObjectStore(FS.DB_STORE_NAME)},i.onsuccess=function(){var a=i.result,s=a.transaction([FS.DB_STORE_NAME],"readwrite"),n=s.objectStore(FS.DB_STORE_NAME),o=0,l=0,c=e.length;function u(){0==l?t():r()}e.forEach((function(e){var t=n.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){o++,o+l==c&&u()},t.onerror=function(){l++,o+l==c&&u()}})),s.onerror=r},i.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var a=FS.indexedDB();try{var i=a.open(FS.DB_NAME(),FS.DB_VERSION)}catch(s){return r(s)}i.onupgradeneeded=r,i.onsuccess=function(){var a=i.result;try{var n=a.transaction([FS.DB_STORE_NAME],"readonly")}catch(s){return void r(s)}var o=n.objectStore(FS.DB_STORE_NAME),l=0,c=0,u=e.length;function d(){0==c?t():r()}e.forEach((function(e){var t=o.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),l++,l+c==u&&d()},t.onerror=function(){c++,l+c==u&&d()}})),n.onerror=r},i.onerror=r}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=FS.cwd();else{var a=FS.getStream(e);if(!a)throw new FS.ErrnoError(ERRNO_CODES.EBADF);r=a.path}t=PATH.join2(r,t)}return t},doStat:function(e,t,r){try{var a=e(t)}catch(i){if(i&&i.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(i.node)))return-ERRNO_CODES.ENOTDIR;throw i}return HEAP32[r>>2]=a.dev,HEAP32[r+4>>2]=0,HEAP32[r+8>>2]=a.ino,HEAP32[r+12>>2]=a.mode,HEAP32[r+16>>2]=a.nlink,HEAP32[r+20>>2]=a.uid,HEAP32[r+24>>2]=a.gid,HEAP32[r+28>>2]=a.rdev,HEAP32[r+32>>2]=0,HEAP32[r+36>>2]=a.size,HEAP32[r+40>>2]=4096,HEAP32[r+44>>2]=a.blocks,HEAP32[r+48>>2]=a.atime.getTime()/1e3|0,HEAP32[r+52>>2]=0,HEAP32[r+56>>2]=a.mtime.getTime()/1e3|0,HEAP32[r+60>>2]=0,HEAP32[r+64>>2]=a.ctime.getTime()/1e3|0,HEAP32[r+68>>2]=0,HEAP32[r+72>>2]=a.ino,0},doMsync:function(e,t,r,a){var i=new Uint8Array(HEAPU8.subarray(e,e+r));FS.msync(t,i,0,r,a)},doMkdir:function(e,t){return e=PATH.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-ERRNO_CODES.EINVAL;var a=FS.readlink(e);return a=a.slice(0,Math.max(0,r)),writeStringToMemory(a,t,!0),a.length},doAccess:function(e,t){if(-8&t)return-ERRNO_CODES.EINVAL;var r,a=FS.lookupPath(e,{follow:!0});r=a.node;var i="";return 4&t&&(i+="r"),2&t&&(i+="w"),1&t&&(i+="x"),i&&FS.nodePermissions(r,i)?-ERRNO_CODES.EACCES:0},doDup:function(e,t,r){var a=FS.getStream(r);return a&&FS.close(a),FS.open(e,t,0,r,r).fd},doReadv:function(e,t,r,a){for(var i=0,s=0;s<r;s++){var n=HEAP32[t+8*s>>2],o=HEAP32[t+(8*s+4)>>2],l=FS.read(e,HEAP8,n,o,a);if(l<0)return-1;if(i+=l,l<o)break}return i},doWritev:function(e,t,r,a){for(var i=0,s=0;s<r;s++){var n=HEAP32[t+8*s>>2],o=HEAP32[t+(8*s+4)>>2],l=FS.write(e,HEAP8,n,o,a);if(l<0)return-1;i+=l}return i},varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},getStreamFromFD:function(){var e=FS.getStream(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketAddress:function(e){var t=SYSCALLS.get(),r=SYSCALLS.get();if(e&&0===t)return null;var a=__read_sockaddr(t,r);if(a.errno)throw new FS.ErrnoError(a.errno);return a.addr=DNS.lookup_addr(a.addr)||a.addr,a},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return assert(e>=0?0===t:-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}};function ___syscall5(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStr(),a=SYSCALLS.get(),i=SYSCALLS.get(),s=FS.open(r,a,i);return s.fd}catch(n){return"undefined"!==typeof FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(a){return"undefined"!==typeof FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}Module["_memcpy"]=_memcpy;var _cos=Math_cos;function _sbrk(e){var t=_sbrk;t.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),t.called=!0,assert(Runtime.dynamicAlloc),t.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var r=DYNAMICTOP;if(0!=e){var a=t.alloc(e);if(!a)return-1>>>0}return r}var _BItoD=!0;function ___syscall54(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),a=SYSCALLS.get();switch(a){case 21505:return r.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return r.tty?0:-ERRNO_CODES.ENOTTY;case 21519:if(!r.tty)return-ERRNO_CODES.ENOTTY;var i=SYSCALLS.get();return HEAP32[i>>2]=0,0;case 21520:return r.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:i=SYSCALLS.get();return FS.ioctl(r,a,i);default:abort("bad ioctl syscall "+a)}}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view(e,t,r){var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=a[t];function s(e){e>>=2;var t=HEAPU32,r=t[e],a=t[e+1];return new i(t["buffer"],a,r)}r=readLatin1String(r),registerType(e,{name:r,fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function _pthread_self(){return 0}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),a=SYSCALLS.get(),i=SYSCALLS.get(),s=SYSCALLS.get(),n=SYSCALLS.get(),o=i;return assert(0===a),FS.llseek(r,o,n),HEAP32[s>>2]=r.position,r.getdents&&0===o&&0===n&&(r.getdents=null),0}catch(l){return"undefined"!==typeof FS&&l instanceof FS.ErrnoError||abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),a=SYSCALLS.get(),i=SYSCALLS.get();return SYSCALLS.doWritev(r,a,i)}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}function ___syscall221(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),a=SYSCALLS.get();switch(a){case 0:var i,s=SYSCALLS.get();return s<0?-ERRNO_CODES.EINVAL:(i=FS.open(r.path,r.flags,0,s),i.fd);case 1:case 2:return 0;case 3:return r.flags;case 4:s=SYSCALLS.get();return r.flags|=s,0;case 12:case 12:s=SYSCALLS.get();var n=0;return HEAP16[s+n>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(o){return"undefined"!==typeof FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall145(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),a=SYSCALLS.get(),i=SYSCALLS.get();return SYSCALLS.doReadv(r,a,i)}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module["BindingError"]=extendError(Error,"BindingError"),InternalError=Module["InternalError"]=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module["UnboundTypeError"]=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift((function(){Module["noFSInit"]||FS.init.initialized||FS.init()})),__ATMAIN__.push((function(){FS.ignorePermissions=!1})),__ATEXIT__.push((function(){FS.quit()})),Module["FS_createFolder"]=FS.createFolder,Module["FS_createPath"]=FS.createPath,Module["FS_createDataFile"]=FS.createDataFile,Module["FS_createPreloadedFile"]=FS.createPreloadedFile,Module["FS_createLazyFile"]=FS.createLazyFile,Module["FS_createLink"]=FS.createLink,Module["FS_createDevice"]=FS.createDevice,Module["FS_unlink"]=FS.unlink,__ATINIT__.unshift((function(){TTY.init()})),__ATEXIT__.push((function(){TTY.shutdown()})),ENVIRONMENT_IS_NODE){var fs=__webpack_require__("ab21"),NODEJS_PATH=__webpack_require__("7a44");NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(e,t,r,a){try{return Module["dynCall_iiii"](e,t,r,a)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_viiiii(e,t,r,a,i,s){try{Module["dynCall_viiiii"](e,t,r,a,i,s)}catch(n){if("number"!==typeof n&&"longjmp"!==n)throw n;asm["setThrew"](1,0)}}function invoke_dii(e,t,r){try{return Module["dynCall_dii"](e,t,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_vid(e,t,r){try{Module["dynCall_vid"](e,t,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_di(e,t){try{return Module["dynCall_di"](e,t)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_i(e){try{return Module["dynCall_i"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_vi(e,t){try{Module["dynCall_vi"](e,t)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_vii(e,t,r){try{Module["dynCall_vii"](e,t,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_ii(e,t){try{return Module["dynCall_ii"](e,t)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_viii(e,t,r,a){try{Module["dynCall_viii"](e,t,r,a)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_v(e){try{Module["dynCall_v"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_viid(e,t,r,a){try{Module["dynCall_viid"](e,t,r,a)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_iiiii(e,t,r,a,i){try{return Module["dynCall_iiiii"](e,t,r,a,i)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}function invoke_viiiiii(e,t,r,a,i,s,n){try{Module["dynCall_viiiiii"](e,t,r,a,i,s,n)}catch(o){if("number"!==typeof o&&"longjmp"!==o)throw o;asm["setThrew"](1,0)}}function invoke_iii(e,t,r){try{return Module["dynCall_iii"](e,t,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_viiii(e,t,r,a,i){try{Module["dynCall_viiii"](e,t,r,a,i)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort:abort,assert:assert,invoke_iiii:invoke_iiii,invoke_viiiii:invoke_viiiii,invoke_dii:invoke_dii,invoke_vid:invoke_vid,invoke_di:invoke_di,invoke_i:invoke_i,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_ii:invoke_ii,invoke_viii:invoke_viii,invoke_v:invoke_v,invoke_viid:invoke_viid,invoke_iiiii:invoke_iiiii,invoke_viiiiii:invoke_viiiiii,invoke_iii:invoke_iii,invoke_viiii:invoke_viiii,_fabs:_fabs,___syscall221:___syscall221,_sin:_sin,floatReadValueFromPointer:floatReadValueFromPointer,simpleReadValueFromPointer:simpleReadValueFromPointer,integerReadValueFromPointer:integerReadValueFromPointer,__embind_register_memory_view:__embind_register_memory_view,throwInternalError:throwInternalError,get_first_emval:get_first_emval,_abort:_abort,count_emval_handles:count_emval_handles,_pthread_cleanup_push:_pthread_cleanup_push,__embind_register_integer:__embind_register_integer,extendError:extendError,___assert_fail:___assert_fail,init_emval:init_emval,__embind_register_void:__embind_register_void,___cxa_find_matching_catch:___cxa_find_matching_catch,_ceilf:_ceilf,getShiftFromSize:getShiftFromSize,__embind_register_function:__embind_register_function,embind_init_charCodes:embind_init_charCodes,_emscripten_asm_const_33:_emscripten_asm_const_33,throwBindingError:throwBindingError,___setErrNo:___setErrNo,__emval_register:__emval_register,_sbrk:_sbrk,readLatin1String:readLatin1String,___cxa_allocate_exception:___cxa_allocate_exception,_emscripten_memcpy_big:_emscripten_memcpy_big,__embind_register_bool:__embind_register_bool,___resumeException:___resumeException,__ZSt18uncaught_exceptionv:__ZSt18uncaught_exceptionv,_sysconf:_sysconf,_embind_repr:_embind_repr,__embind_register_std_wstring:__embind_register_std_wstring,createNamedFunction:createNamedFunction,__embind_register_emval:__embind_register_emval,_cos:_cos,throwUnboundTypeError:throwUnboundTypeError,_pthread_self:_pthread_self,craftInvokerFunction:craftInvokerFunction,__emval_decref:__emval_decref,_sqrt:_sqrt,__embind_register_float:__embind_register_float,makeLegalFunctionName:makeLegalFunctionName,___syscall54:___syscall54,___unlock:___unlock,heap32VectorToArray:heap32VectorToArray,_pthread_cleanup_pop:_pthread_cleanup_pop,whenDependentTypesAreResolved:whenDependentTypesAreResolved,_exit:_exit,__embind_register_std_string:__embind_register_std_string,new_:new_,___cxa_atexit:___cxa_atexit,registerType:registerType,___cxa_throw:___cxa_throw,__exit:__exit,___lock:___lock,___syscall6:___syscall6,___syscall5:___syscall5,ensureOverloadTable:ensureOverloadTable,__embind_register_constant:__embind_register_constant,_time:_time,requireFunction:requireFunction,runDestructors:runDestructors,getTypeName:getTypeName,_atexit:_atexit,___syscall140:___syscall140,exposePublicSymbol:exposePublicSymbol,_emscripten_asm_const_5:_emscripten_asm_const_5,_emscripten_asm_const_4:_emscripten_asm_const_4,replacePublicSymbol:replacePublicSymbol,___syscall145:___syscall145,___syscall146:___syscall146,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,tempDoublePtr:tempDoublePtr,ABORT:ABORT,cttz_i8:cttz_i8,___dso_handle:___dso_handle};var asm=function(e,t,r){"use asm";var a=new e.Int8Array(r);var i=new e.Int16Array(r);var s=new e.Int32Array(r);var n=new e.Uint8Array(r);var o=new e.Uint16Array(r);var l=new e.Uint32Array(r);var c=new e.Float32Array(r);var u=new e.Float64Array(r);var d=t.STACKTOP|0;var p=t.STACK_MAX|0;var f=t.tempDoublePtr|0;var m=t.ABORT|0;var h=t.cttz_i8|0;var b=t.___dso_handle|0;var g=0;var v=0;var w=0;var k=0;var y=e.NaN,_=e.Infinity;var S=0,x=0,C=0,q=0,T=0.0,E=0,P=0,A=0,M=0.0;var I=0;var R=0;var O=0;var $=0;var F=0;var D=0;var N=0;var L=0;var j=0;var z=0;var H=e.Math.floor;var B=e.Math.abs;var U=e.Math.sqrt;var Q=e.Math.pow;var W=e.Math.cos;var Y=e.Math.sin;var V=e.Math.tan;var G=e.Math.acos;var K=e.Math.asin;var J=e.Math.atan;var X=e.Math.atan2;var Z=e.Math.exp;var ee=e.Math.log;var te=e.Math.ceil;var re=e.Math.imul;var ae=e.Math.min;var ie=e.Math.clz32;var se=t.abort;var ne=t.assert;var oe=t.invoke_iiii;var le=t.invoke_viiiii;var ce=t.invoke_dii;var ue=t.invoke_vid;var de=t.invoke_di;var pe=t.invoke_i;var fe=t.invoke_vi;var me=t.invoke_vii;var he=t.invoke_ii;var be=t.invoke_viii;var ge=t.invoke_v;var ve=t.invoke_viid;var we=t.invoke_iiiii;var ke=t.invoke_viiiiii;var ye=t.invoke_iii;var _e=t.invoke_viiii;var Se=t._fabs;var xe=t.___syscall221;var Ce=t._sin;var qe=t.floatReadValueFromPointer;var Te=t.simpleReadValueFromPointer;var Ee=t.integerReadValueFromPointer;var Pe=t.__embind_register_memory_view;var Ae=t.throwInternalError;var Me=t.get_first_emval;var Ie=t._abort;var Re=t.count_emval_handles;var Oe=t._pthread_cleanup_push;var $e=t.__embind_register_integer;var Fe=t.extendError;var De=t.___assert_fail;var Ne=t.init_emval;var Le=t.__embind_register_void;var je=t.___cxa_find_matching_catch;var ze=t._ceilf;var He=t.getShiftFromSize;var Be=t.__embind_register_function;var Ue=t.embind_init_charCodes;var Qe=t._emscripten_asm_const_33;var We=t.throwBindingError;var Ye=t.___setErrNo;var Ve=t.__emval_register;var Ge=t._sbrk;var Ke=t.readLatin1String;var Je=t.___cxa_allocate_exception;var Xe=t._emscripten_memcpy_big;var Ze=t.__embind_register_bool;var et=t.___resumeException;var tt=t.__ZSt18uncaught_exceptionv;var rt=t._sysconf;var at=t._embind_repr;var it=t.__embind_register_std_wstring;var st=t.createNamedFunction;var nt=t.__embind_register_emval;var ot=t._cos;var lt=t.throwUnboundTypeError;var ct=t._pthread_self;var ut=t.craftInvokerFunction;var dt=t.__emval_decref;var pt=t._sqrt;var ft=t.__embind_register_float;var mt=t.makeLegalFunctionName;var ht=t.___syscall54;var bt=t.___unlock;var gt=t.heap32VectorToArray;var vt=t._pthread_cleanup_pop;var wt=t.whenDependentTypesAreResolved;var kt=t._exit;var yt=t.__embind_register_std_string;var _t=t.new_;var St=t.___cxa_atexit;var xt=t.registerType;var Ct=t.___cxa_throw;var qt=t.__exit;var Tt=t.___lock;var Et=t.___syscall6;var Pt=t.___syscall5;var At=t.ensureOverloadTable;var Mt=t.__embind_register_constant;var It=t._time;var Rt=t.requireFunction;var Ot=t.runDestructors;var $t=t.getTypeName;var Ft=t._atexit;var Dt=t.___syscall140;var Nt=t.exposePublicSymbol;var Lt=t._emscripten_asm_const_5;var jt=t._emscripten_asm_const_4;var zt=t.replacePublicSymbol;var Ht=t.___syscall145;var Bt=t.___syscall146;var Ut=0.0;function Qt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=t+4|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<1)+2)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){i[e>>1]=0;a[c>>0]=0;p=b}else{a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}}while(0);v=v+1|0;r=g+2|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Wt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<2)+4)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){i[e>>1]=0;a[c>>0]=0;p=b}else{a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}}while(0);v=v+1|0;r=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Yt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<2)+4)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){i[e>>1]=0;a[c>>0]=0;p=b}else{a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}}while(0);v=v+1|0;r=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Vt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c*3|0)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+3|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+6|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Gt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){h=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((h&248)+10+(h<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Kt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Jt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Xt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){h=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((h&248)+12+(h<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Zt(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(q|0)){i[e>>1]=0;a[c>>0]=0;o=g}else{a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function er(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+c|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){i[m>>1]=0;a[c>>0]=0;p=v}else{a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+1|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+2|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function tr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){i[m>>1]=0;a[c>>0]=0;p=v}else{a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+2|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+4|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function rr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){i[m>>1]=0;a[c>>0]=0;p=v}else{a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+2|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+4|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function ar(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;p=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;c=(s[l+4>>2]|0)+p|0;C=1;e=e+p|0;m=m+(p<<1)|0;o=o+p|0;p=0;t:while(1){if(x){k=1;w=e;v=p;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){i[m>>1]=0;a[c>>0]=0;p=v}else{a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}C=C+1|0;if((C|0)>=(T|0)){h=p;P=52;break e}else{c=c+2|0;e=e+2|0;m=m+4|0;o=o+2|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((h|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(h|0)){e=e+1|0;f=f+4|0}else break}}o=l+8|0;c=p+-1|0;s[o>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[o>>2]|0))}if((h|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(h|0))}if((s[o>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[o>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function ir(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t*3|0)+12|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t*6|0)+6)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+6|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function sr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){t=n[b>>0]|0;m=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function nr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+8|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function or(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){m=n[b>>0]|0;do{if(((m&240)+24+(m<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function lr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){t=n[b>>0]|0;m=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function cr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}else{i[r>>1]=0;a[c>>0]=0;o=h}}while(0);g=g+1|0;f=b+8|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ur(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=t+4|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<1)+2)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}else{i[e>>1]=0;a[c>>0]=0;p=b}}while(0);v=v+1|0;r=g+2|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function dr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<2)+4)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}else{i[e>>1]=0;a[c>>0]=0;p=b}}while(0);v=v+1|0;r=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function pr(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}C=P+-1|0;if((r|0)>1){c=0;p=m;f=m+(C<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+(P<<1)|0;f=f+(P<<1)|0}}}f=l+1179664|0;p=P+1|0;_=0-P|0;k=1-P|0;y=~P;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(s[l+4>>2]|0)+p|0;x=1;r=e+((t<<2)+4)|0;e=m+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=r;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[e+(_<<1)>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=i[e+(k<<1)>>1]|0;m=t<<16>>16;p=i[e+(y<<1)>>1]|0;h=p<<16>>16;r=p<<16>>16>0;if(t<<16>>16<=0){if(r){i[e>>1]=p;p=h*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-3<<2)|0;if((s[r>>2]|0)<(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=i[e+-2>>1]|0;if(p<<16>>16>0){i[e>>1]=p;p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(v|0)){p=b;break}s[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;i[e>>1]=p;s[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(r){p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(h+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=l+1310736+(p+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}r=i[e+-2>>1]|0;if(r<<16>>16<=0){i[e>>1]=t;p=m*7|0;r=l+1310736+(p+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=l+1310736+(p+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+v;r=l+1310736+(p+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+x;r=l+1310736+(p+-4<<2)|0;if((s[r>>2]|0)>(v|0))s[r>>2]=v;s[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((p|0)>(m|0)){i[e>>1]=m;if((b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=m;r=r+1|0;if((r|0)>=(b|0)){p=m;break}else t=t+4|0}}else p=m}else{i[e>>1]=p;if((p|0)<(m|0)&(b|0)>0){r=0;t=f;while(1){if((s[t>>2]|0)==(m|0))s[t>>2]=p;r=r+1|0;if((r|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;h=l+1310736+(p+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(p+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+x;p=b}else{i[e>>1]=0;a[c>>0]=0;p=b}}while(0);v=v+1|0;r=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=r;b=p}}}x=x+1|0;if((x|0)>=(q|0)){m=p;E=52;break e}else{c=c+2|0;r=r+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{m=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((m|0)<1)p=1;else{r=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(r|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((r|0)<(m|0)){r=r+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;s[t>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[t>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(r<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(r+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(r+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(r+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(r+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(r+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(r+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((s[t>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function fr(e){e=e|0;var t=0;t=d;d=d+e|0;d=d+15&-16;return t|0}function mr(){return d|0}function hr(e){e=e|0;d=e}function br(e,t){e=e|0;t=t|0;d=e;p=t}function gr(e,t){e=e|0;t=t|0;if(!g){g=e;v=t}}function vr(e){e=e|0;a[f>>0]=a[e>>0];a[f+1>>0]=a[e+1>>0];a[f+2>>0]=a[e+2>>0];a[f+3>>0]=a[e+3>>0]}function wr(e){e=e|0;a[f>>0]=a[e>>0];a[f+1>>0]=a[e+1>>0];a[f+2>>0]=a[e+2>>0];a[f+3>>0]=a[e+3>>0];a[f+4>>0]=a[e+4>>0];a[f+5>>0]=a[e+5>>0];a[f+6>>0]=a[e+6>>0];a[f+7>>0]=a[e+7>>0]}function kr(e){e=e|0;I=e}function yr(){return I|0}function _r(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t*6|0)+6)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+6|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Sr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){e=n[a>>0]|0;t=n[a+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function xr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+8|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Cr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){t=n[a>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[a+1>>0]|0)&240)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function qr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){e=n[a>>0]|0;t=n[a+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Tr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+2>>0]|0)+(n[a+1>>0]|0)+(n[a+3>>0]|0)|0)>(_|0)){i[m>>1]=0;l=f}else{l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}}while(0);h=h+1|0;a=a+8|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Er(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<1)+2)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){i[h>>1]=0;l=m}else{l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);b=b+1|0;c=c+2|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Pr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c+1>>0]|0|0)>(a|0)){i[h>>1]=0;l=m}else{l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);b=b+1|0;c=c+4|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Ar(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){i[h>>1]=0;l=m}else{l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);b=b+1|0;c=c+4|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Mr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l*3|0)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+3|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+6|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Ir(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){f=n[a>>0]|0;m=n[a+1>>0]|0;do{if(((f&248)+10+(f<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Rr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Or(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){m=n[a>>0]|0;do{if(((m&240)+24+(m<<4&240)+((n[a+1>>0]|0)&240)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function $r(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){f=n[a>>0]|0;m=n[a+1>>0]|0;do{if(((f&248)+12+(f<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Fr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+2>>0]|0)+(n[a+1>>0]|0)+(n[a+3>>0]|0)|0)>(x|0)){i[b>>1]=0;l=h}else{l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}}while(0);g=g+1|0;a=a+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Dr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){i[g>>1]=0;l=b}else{l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{i[g>>1]=m;if((m|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+2|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Nr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c+1>>0]|0|0)>(a|0)){i[g>>1]=0;l=b}else{l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=i[g+-2>>1]|0;if(e<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Lr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){i[g>>1]=0;l=b}else{l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{i[g>>1]=m;if((m|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function jr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;f=a+l|0;l=0;t:while(1){if(_){v=1;g=c;b=l;while(1){do{if((n[g>>0]|0)>(n[f>>0]|0)){i[e>>1]=0;l=b}else{l=i[e+(y<<1)>>1]|0;if(l<<16>>16>0){i[e>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}a=i[e+(w<<1)>>1]|0;m=a<<16>>16;l=i[e+(k<<1)>>1]|0;h=l<<16>>16;c=l<<16>>16>0;if(a<<16>>16<=0){if(c){i[e>>1]=l;l=h*7|0;c=o+1310736+(l+-7<<2)|0;s[c>>2]=(s[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;s[c>>2]=(s[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;s[c>>2]=(s[c>>2]|0)+S;c=o+1310736+(l+-3<<2)|0;if((s[c>>2]|0)<(v|0))s[c>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[e+-2>>1]|0;if(l<<16>>16>0){i[e>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[e>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(c){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[e>>1]=m;if((b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(l|0))s[a>>2]=m;c=c+1|0;if((c|0)>=(b|0)){l=m;break}else a=a+4|0}}else l=m}else{i[e>>1]=l;if((l|0)<(m|0)&(b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(m|0))s[a>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else a=a+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[e+-2>>1]|0;if(l<<16>>16<=0){i[e>>1]=a;l=m*7|0;c=o+1310736+(l+-7<<2)|0;s[c>>2]=(s[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;s[c>>2]=(s[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;s[c>>2]=(s[c>>2]|0)+S;c=o+1310736+(l+-4<<2)|0;if((s[c>>2]|0)>(v|0))s[c>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[e>>1]=l;if((b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(m|0))s[a>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else a=a+4|0}}}else{i[e>>1]=m;if((m|0)<(l|0)&(b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(l|0))s[a>>2]=m;c=c+1|0;if((c|0)>=(b|0)){l=m;break}else a=a+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=g+1|0;f=f+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=c;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+2|0;e=e+4|0;f=f+2|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}a=o+8|0;l=c+-1|0;s[a>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[a>>2]|0))}if((m|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((s[a>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[a>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function zr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t*6|0)+6)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+6|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Hr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){e=n[a>>0]|0;t=n[a+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Br(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+8|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Ur(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){t=n[a>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[a+1>>0]|0)&240)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Qr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){e=n[a>>0]|0;t=n[a+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+4|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Wr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=a*3|0;S=T+-1|0;if((r|0)>1){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{a=a+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;a=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){h=1;m=p;f=l;while(1){do{if(((n[a+2>>0]|0)+(n[a+1>>0]|0)+(n[a+3>>0]|0)|0)>(_|0)){l=i[m+(w<<1)>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}r=i[m+(g<<1)>>1]|0;e=r<<16>>16;l=i[m+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(r<<16>>16<=0){if(p){i[m>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=i[m+-2>>1]|0;if(l<<16>>16>0){i[m>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(h|0)){l=f;break}s[l>>2]=h;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;i[m>>1]=l;s[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;s[o+1310736+(f<<2)>>2]=1;s[o+1310736+(f+1<<2)>>2]=h;s[o+1310736+(f+2<<2)>>2]=y;s[o+1310736+(f+3<<2)>>2]=h;s[o+1310736+(f+4<<2)>>2]=h;s[o+1310736+(f+5<<2)>>2]=y;s[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=i[m+-2>>1]|0;if(p<<16>>16<=0){i[m>>1]=r;l=e*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+h;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(h|0))s[p>>2]=h;s[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){i[m>>1]=e;if((f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else r=r+4|0}}else l=e}else{i[m>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;r=c;while(1){if((s[r>>2]|0)==(e|0))s[r>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+h;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=f}else{i[m>>1]=0;l=f}}while(0);h=h+1|0;a=a+8|0;p=m+2|0;if((h|0)>=(S|0))break;else{m=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{a=a+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){r=o+12|0;if((t|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=a+-1|0;s[e>>2]=l;if(l){Wc(r|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{c=(s[o+1179664+(r<<2)>>2]|0)+-1|0;p=r*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Yr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<1)+2)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{i[h>>1]=0;l=m}}while(0);b=b+1|0;c=c+2|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Vr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c+1>>0]|0|0)>(a|0)){l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{i[h>>1]=0;l=m}}while(0);b=b+1|0;c=c+4|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Gr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0;P=d;d=d+16|0;C=P;T=(t|0)/2|0;E=(r|0)/2|0;f=s[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((re(x,T)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((r|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;r=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;h=r;m=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){l=i[h+(k<<1)>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=i[h+(v<<1)>>1]|0;t=e<<16>>16;l=i[h+(w<<1)>>1]|0;f=l<<16>>16;r=l<<16>>16>0;if(e<<16>>16<=0){if(r){i[h>>1]=l;l=f*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-3<<2)|0;if((s[r>>2]|0)<(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=i[h+-2>>1]|0;if(l<<16>>16>0){i[h>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=m;break}s[l>>2]=b;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;i[h>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=b;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=b;s[o+1310736+(m+4<<2)>>2]=b;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(r){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}r=i[h+-2>>1]|0;if(r<<16>>16<=0){i[h>>1]=e;l=t*7|0;r=o+1310736+(l+-7<<2)|0;s[r>>2]=(s[r>>2]|0)+1;r=o+1310736+(l+-6<<2)|0;s[r>>2]=(s[r>>2]|0)+b;r=o+1310736+(l+-5<<2)|0;s[r>>2]=(s[r>>2]|0)+_;r=o+1310736+(l+-4<<2)|0;if((s[r>>2]|0)>(b|0))s[r>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((r<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){i[h>>1]=t;if((m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;r=r+1|0;if((r|0)>=(m|0)){l=t;break}else e=e+4|0}}else l=t}else{i[h>>1]=l;if((l|0)<(t|0)&(m|0)>0){r=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;r=r+1|0;if((r|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{i[h>>1]=0;l=m}}while(0);b=b+1|0;c=c+4|0;r=h+2|0;if((b|0)>=(S|0))break;else{h=r;m=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;r=r+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{r=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(r|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((r|0)<(f|0)){r=r+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;s[t>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;s[o+131084+(q<<2)>>2]=T;s[o+131084+((q|1)<<2)>>2]=0;s[o+131084+((q|2)<<2)>>2]=E;s[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((f|0)>0){e=0;do{p=(s[o+1179664+(e<<2)>>2]|0)+-1|0;r=e*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(r<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(r+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(r+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(r+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(r+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(r+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(r+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((s[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(s[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(s[T>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=P;return l|0}function Kr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l*3|0)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+3|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+6|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Jr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){f=n[a>>0]|0;m=n[a+1>>0]|0;do{if(((f&248)+10+(f<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Xr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+1>>0]|0)+(n[a>>0]|0)+(n[a+2>>0]|0)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Zr(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){m=n[a>>0]|0;do{if(((m&240)+24+(m<<4&240)+((n[a+1>>0]|0)&240)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ea(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){f=n[a>>0]|0;m=n[a+1>>0]|0;do{if(((f&248)+12+(f<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ta(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=a*3|0;S=t+-1|0;if((r|0)>0){l=0;a=f;c=f+(S<<1)|0;while(1){i[c>>1]=0;i[a>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{a=a+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;a=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;h=l;while(1){do{if(((n[a+2>>0]|0)+(n[a+1>>0]|0)+(n[a+3>>0]|0)|0)>(x|0)){l=i[b+(k<<1)>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=i[b+(v<<1)>>1]|0;f=e<<16>>16;l=i[b+(w<<1)>>1]|0;m=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){i[b>>1]=l;l=m*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((s[p>>2]|0)<(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=i[b+-2>>1]|0;if(l<<16>>16>0){i[b>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=h;break}s[l>>2]=g;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;i[b>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=g;s[o+1310736+(h+2<<2)>>2]=_;s[o+1310736+(h+3<<2)>>2]=g;s[o+1310736+(h+4<<2)>>2]=g;s[o+1310736+(h+5<<2)>>2]=_;s[o+1310736+(h+6<<2)>>2]=_;break}}if(p){l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}p=i[b+-2>>1]|0;if(p<<16>>16<=0){i[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((s[p>>2]|0)>(g|0))s[p>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[o+1179664+(f+-1<<2)>>2]|0;f=s[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){i[b>>1]=f;if((h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=f;p=p+1|0;if((p|0)>=(h|0)){l=f;break}else e=e+4|0}}else l=f}else{i[b>>1]=l;if((l|0)<(f|0)&(h|0)>0){p=0;e=c;while(1){if((s[e>>2]|0)==(f|0))s[e>>2]=l;p=p+1|0;if((p|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=h}else{i[b>>1]=0;l=h}}while(0);g=g+1|0;a=a+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;h=l}}}_=_+1|0;if((_|0)>=(C|0)){m=l;T=52;break e}else{a=a+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((m|0)<1)a=1;else{p=1;a=1;while(1){l=s[c>>2]|0;if((l|0)==(p|0)){l=a;a=a+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[c>>2]=l;if((p|0)<(m|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=a+-1|0;s[f>>2]=l;if(l){Wc(e|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((a|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[f>>2]|0))}if((m|0)>0){e=0;do{c=(s[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(p<<2)>>2]|0);l=c<<1;a=o+655376+(l<<3)|0;u[a>>3]=+u[a>>3]+ +(s[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;a=s[o+1310736+(p+3<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;l=o+131084+((c|1)<<2)|0;a=s[o+1310736+(p+4<<2)>>2]|0;if((s[l>>2]|0)<(a|0))s[l>>2]=a;l=o+131084+((c|2)<<2)|0;a=s[o+1310736+(p+5<<2)>>2]|0;if((s[l>>2]|0)>(a|0))s[l>>2]=a;a=o+131084+((c|3)<<2)|0;l=s[o+1310736+(p+6<<2)>>2]|0;if((s[a>>2]|0)<(l|0))s[a>>2]=l;e=e+1|0}while((e|0)<(m|0))}if((s[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ra(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{i[g>>1]=m;if((m|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{i[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+2|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function aa(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c+1>>0]|0|0)>(a|0)){l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=i[g+-2>>1]|0;if(e<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{i[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ia(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(a|0)){l=i[g+(y<<1)>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=i[g+(w<<1)>>1]|0;m=f<<16>>16;l=i[g+(k<<1)>>1]|0;h=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){i[g>>1]=l;l=h*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16>0){i[g>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[g>>1]=m;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}else{i[g>>1]=l;if((l|0)<(m|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[g+-2>>1]|0;if(l<<16>>16<=0){i[g>>1]=f;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(m|0))s[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{i[g>>1]=m;if((m|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((s[f>>2]|0)==(l|0))s[f>>2]=m;e=e+1|0;if((e|0)>=(b|0)){l=m;break}else f=f+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{i[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}m=o+8|0;l=c+-1|0;s[m>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[m>>2]|0))}if((h|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((s[m>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[m>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function sa(e,t,r,a,o){e=e|0;t=t|0;r=r|0;a=a|0;o=o|0;var l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=s[o>>2]|0;C=r+-1|0;if((t|0)>0){l=0;c=f;p=f+((re(C,t)|0)<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((r|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){i[p>>1]=0;i[c>>1]=0;l=l+1|0;if((l|0)>=(r|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;f=a+l|0;l=0;t:while(1){if(_){v=1;g=c;b=l;while(1){do{if((n[g>>0]|0)>(n[f>>0]|0)){l=i[e+(y<<1)>>1]|0;if(l<<16>>16>0){i[e>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}a=i[e+(w<<1)>>1]|0;m=a<<16>>16;l=i[e+(k<<1)>>1]|0;h=l<<16>>16;c=l<<16>>16>0;if(a<<16>>16<=0){if(c){i[e>>1]=l;l=h*7|0;c=o+1310736+(l+-7<<2)|0;s[c>>2]=(s[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;s[c>>2]=(s[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;s[c>>2]=(s[c>>2]|0)+S;c=o+1310736+(l+-3<<2)|0;if((s[c>>2]|0)<(v|0))s[c>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[e+-2>>1]|0;if(l<<16>>16>0){i[e>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;i[e>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(c){l=s[o+1179664+(m+-1<<2)>>2]|0;m=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(m|0)){i[e>>1]=m;if((b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(l|0))s[a>>2]=m;c=c+1|0;if((c|0)>=(b|0)){l=m;break}else a=a+4|0}}else l=m}else{i[e>>1]=l;if((l|0)<(m|0)&(b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(m|0))s[a>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else a=a+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=i[e+-2>>1]|0;if(l<<16>>16<=0){i[e>>1]=a;l=m*7|0;c=o+1310736+(l+-7<<2)|0;s[c>>2]=(s[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;s[c>>2]=(s[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;s[c>>2]=(s[c>>2]|0)+S;c=o+1310736+(l+-4<<2)|0;if((s[c>>2]|0)>(v|0))s[c>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}m=s[o+1179664+(m+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((m|0)>(l|0)){i[e>>1]=l;if((b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(m|0))s[a>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else a=a+4|0}}}else{i[e>>1]=m;if((m|0)<(l|0)&(b|0)>0){c=0;a=p;while(1){if((s[a>>2]|0)==(l|0))s[a>>2]=m;c=c+1|0;if((c|0)>=(b|0)){l=m;break}else a=a+4|0}}else l=m}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{i[e>>1]=0;l=b}}while(0);v=v+1|0;c=g+1|0;f=f+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=c;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+2|0;e=e+4|0;f=f+2|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=s[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}a=o+8|0;l=c+-1|0;s[a>>2]=l;if(l){Wc(f|0,0,l<<2|0)|0;Wc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;s[o+131084+(T<<2)>>2]=t;s[o+131084+((T|1)<<2)>>2]=0;s[o+131084+((T|2)<<2)>>2]=r;s[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[a>>2]|0))}if((m|0)>0){f=0;do{p=(s[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(c|0))s[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(c|0))s[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[c>>2]|0)<(l|0))s[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((s[a>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;r=l<<1;T=o+655376+(r<<3)|0;u[T>>3]=+u[T>>3]/+(s[t>>2]|0);r=o+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[a>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function na(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t*3|0)+12|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t*6|0)+6)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+6|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function oa(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){t=n[b>>0]|0;m=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(m>>>3&28)+(m<<3&248)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function la(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+8|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ca(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){m=n[b>>0]|0;do{if(((m&240)+24+(m<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ua(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){t=n[b>>0]|0;m=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(m>>>3&24)+(m<<2&248)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+4|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function da(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;T=M;P=(t|0)/2|0;A=(r|0)/2|0;m=s[l>>2]|0;q=A+-1|0;if((t|0)>1){c=0;p=m;f=m+((re(q,P)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=P+-1|0;if((r|0)>1){c=0;o=m;p=m+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{o=o+(P<<1)|0;p=p+(P<<1)|0}}}p=l+1179664|0;o=P+1|0;y=0-P|0;w=1-P|0;k=~P;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(s[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;r=m+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;h=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){i[r>>1]=0;a[c>>0]=0;o=h}else{a[c>>0]=-1;o=i[r+(y<<1)>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}e=i[r+(w<<1)>>1]|0;t=e<<16>>16;o=i[r+(k<<1)>>1]|0;m=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){i[r>>1]=o;o=m*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=i[r+-2>>1]|0;if(o<<16>>16>0){i[r>>1]=o;o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=h;break}s[o>>2]=g;o=h;break}else{o=h+1|0;if((h|0)>32767)break t;i[r>>1]=o;s[l+1179664+(h<<2)>>2]=o<<16>>16;h=h*7|0;s[l+1310736+(h<<2)>>2]=1;s[l+1310736+(h+1<<2)>>2]=g;s[l+1310736+(h+2<<2)>>2]=S;s[l+1310736+(h+3<<2)>>2]=g;s[l+1310736+(h+4<<2)>>2]=g;s[l+1310736+(h+5<<2)>>2]=S;s[l+1310736+(h+6<<2)>>2]=S;break}}if(f){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(m+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;m=l+1310736+(o+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}f=i[r+-2>>1]|0;if(f<<16>>16<=0){i[r>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=h;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){i[r>>1]=t;if((h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;f=f+1|0;if((f|0)>=(h|0)){o=t;break}else e=e+4|0}}else o=t}else{i[r>>1]=o;if((o|0)<(t|0)&(h|0)>0){f=0;e=p;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;f=f+1|0;if((f|0)>=(h|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;m=l+1310736+(o+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(o+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=h}}while(0);g=g+1|0;f=b+8|0;r=r+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;h=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;r=r+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){r=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;s[e>>2]=c;if(c){Wc(r|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;s[l+131084+(E<<2)>>2]=P;s[l+131084+((E|1)<<2)>>2]=0;s[l+131084+((E|2)<<2)>>2]=A;s[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[e>>2]|0))}if((t|0)>0){r=0;do{p=(s[l+1179664+(r<<2)>>2]|0)+-1|0;f=r*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;r=r+1|0}while((r|0)<(t|0))}if((s[e>>2]|0)>0){c=0;do{P=l+12+(c<<2)|0;A=c<<1;E=l+655376+(A<<3)|0;u[E>>3]=+u[E>>3]/+(s[P>>2]|0);A=l+655376+((A|1)<<3)|0;u[A>>3]=+u[A>>3]/+(s[P>>2]|0);c=c+1|0}while((c|0)<(s[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function pa(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;if((t|0)!=1){if(t+-1&t)t=jc(t)|0}else t=2;i=s[e+4>>2]|0;if(t>>>0<=i>>>0){if(t>>>0<i>>>0){if(i>>>0>2)a=(i+-1&i|0)==0;else a=0;r=~~+te(+(+((s[e+12>>2]|0)>>>0)/+c[e+16>>2]))>>>0;if(a)r=1<<32-(ie(r+-1|0)|0);else r=jc(r)|0;t=t>>>0<r>>>0?r:t;if(t>>>0<i>>>0)fa(e,t)}}else fa(e,t);return}function fa(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0;a=e+4|0;e:do{if(t){p=Aa(t<<2)|0;r=s[e>>2]|0;s[e>>2]=p;if(r)Ma(r);s[a>>2]=t;if(t){r=0;do{s[(s[e>>2]|0)+(r<<2)>>2]=0;r=r+1|0}while((r|0)!=(t|0))}a=e+8|0;i=s[a>>2]|0;if(i){r=s[i+4>>2]|0;d=t+-1|0;p=(d&t|0)==0;if(p)o=r&d;else o=(r>>>0)%(t>>>0)|0;s[(s[e>>2]|0)+(o<<2)>>2]=a;r=s[i>>2]|0;if(r){n=i;a=i;while(1){u=a;t:while(1){while(1){a=s[r+4>>2]|0;if(p)c=a&d;else c=(a>>>0)%(t>>>0)|0;if((c|0)==(o|0)){a=r;break}a=(s[e>>2]|0)+(c<<2)|0;if(!(s[a>>2]|0)){o=c;i=r;break t}l=r+8|0;a=r;while(1){i=s[a>>2]|0;if(!i)break;if((s[l>>2]|0)==(s[i+8>>2]|0))a=i;else break}s[n>>2]=i;s[a>>2]=s[s[(s[e>>2]|0)+(c<<2)>>2]>>2];s[s[(s[e>>2]|0)+(c<<2)>>2]>>2]=r;r=s[u>>2]|0;if(!r)break e}r=s[a>>2]|0;if(!r)break e;else{n=a;u=a}}s[a>>2]=n;r=s[i>>2]|0;if(!r)break;else{n=i;a=i}}}}}else{r=s[e>>2]|0;s[e>>2]=0;if(r)Ma(r);s[a>>2]=0}}while(0);return}function ma(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0,l=0;n=d;d=d+32|0;o=n+16|0;i=n+4|0;l=n;t=s[t>>2]|0;r=s[t>>2]|0;s[l>>2]=t;s[o>>2]=s[l>>2];ha(i,e,o);t=s[i>>2]|0;s[i>>2]=0;if(t){if(a[i+8>>0]|0)Vo(t+264|0);Ma(t)}d=n;return r|0}function ha(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0;m=s[r>>2]|0;d=s[t+4>>2]|0;r=s[m+4>>2]|0;p=d+-1|0;f=(p&d|0)==0;if(f)u=p&r;else u=(r>>>0)%(d>>>0)|0;n=(s[t>>2]|0)+(u<<2)|0;i=s[n>>2]|0;while(1){r=s[i>>2]|0;if((r|0)==(m|0)){c=i;break}else i=r}l=t+8|0;if((c|0)!=(l|0)){r=s[c+4>>2]|0;if(f)r=r&p;else r=(r>>>0)%(d>>>0)|0;if((r|0)==(u|0))n=m;else o=12}else o=12;do{if((o|0)==12){r=s[m>>2]|0;if(r){r=s[r+4>>2]|0;if(f)r=r&p;else r=(r>>>0)%(d>>>0)|0;if((r|0)==(u|0)){n=m;break}}s[n>>2]=0;n=m}}while(0);i=s[n>>2]|0;r=i;if(i){i=s[i+4>>2]|0;if(f)i=i&p;else i=(i>>>0)%(d>>>0)|0;if((i|0)!=(u|0)){s[(s[t>>2]|0)+(i<<2)>>2]=c;r=s[m>>2]|0}}s[c>>2]=r;s[n>>2]=0;t=t+12|0;s[t>>2]=(s[t>>2]|0)+-1;s[e>>2]=m;s[e+4>>2]=l;a[e+8>>0]=1;return}function ba(e,t,r){e=e|0;t=t|0;r=r|0;var a=0;a=Aa(408)|0;s[a+8>>2]=s[r>>2];Wc(a+16|0,0,392)|0;u[a+248>>3]=.0001;u[a+256>>3]=1.0e3;r=a+264|0;s[r>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[e>>2]=a;e=e+4|0;s[e>>2]=t+8;s[e+4>>2]=257;return}function ga(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0.0,u=0.0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0;p=s[r+8>>2]|0;v=r+4|0;s[v>>2]=p;g=t+4|0;d=s[g>>2]|0;b=(d|0)==0;e:do{if(!b){f=d+-1|0;m=(f&d|0)==0;if(m)n=f&p;else n=(p>>>0)%(d>>>0)|0;i=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!i)h=12;else while(1){o=s[i>>2]|0;if(!o){h=12;break e}i=s[o+4>>2]|0;if(m)i=i&f;else i=(i>>>0)%(d>>>0)|0;if((i|0)!=(n|0)){h=12;break e}if((s[o+8>>2]|0)==(p|0)){i=0;r=o;break}else i=o}}else{n=0;h=12}}while(0);if((h|0)==12){p=t+12|0;l=+(((s[p>>2]|0)+1|0)>>>0);u=+c[t+16>>2];do{if(b|l>+(d>>>0)*u){if(d>>>0>2)i=(d+-1&d|0)==0;else i=0;o=(i&1|d<<1)^1;i=~~+te(+(l/u))>>>0;va(t,o>>>0<i>>>0?i:o);o=s[g>>2]|0;i=s[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&i;break}else{d=o;n=(i>>>0)%(o>>>0)|0;break}}}while(0);i=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!i){i=t+8|0;s[r>>2]=s[i>>2];s[i>>2]=r;s[(s[t>>2]|0)+(n<<2)>>2]=i;i=s[r>>2]|0;if(i){i=s[i+4>>2]|0;n=d+-1|0;if(!(n&d))i=i&n;else i=(i>>>0)%(d>>>0)|0;s[(s[t>>2]|0)+(i<<2)>>2]=r}}else{s[r>>2]=s[i>>2];s[i>>2]=r}s[p>>2]=(s[p>>2]|0)+1;i=1}s[e>>2]=r;a[e+4>>0]=i;return}function va(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;if((t|0)!=1){if(t+-1&t)t=jc(t)|0}else t=2;i=s[e+4>>2]|0;if(t>>>0<=i>>>0){if(t>>>0<i>>>0){if(i>>>0>2)a=(i+-1&i|0)==0;else a=0;r=~~+te(+(+((s[e+12>>2]|0)>>>0)/+c[e+16>>2]))>>>0;if(a)r=1<<32-(ie(r+-1|0)|0);else r=jc(r)|0;t=t>>>0<r>>>0?r:t;if(t>>>0<i>>>0)wa(e,t)}}else wa(e,t);return}function wa(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0;a=e+4|0;e:do{if(t){p=Aa(t<<2)|0;r=s[e>>2]|0;s[e>>2]=p;if(r)Ma(r);s[a>>2]=t;if(t){r=0;do{s[(s[e>>2]|0)+(r<<2)>>2]=0;r=r+1|0}while((r|0)!=(t|0))}a=e+8|0;i=s[a>>2]|0;if(i){r=s[i+4>>2]|0;d=t+-1|0;p=(d&t|0)==0;if(p)o=r&d;else o=(r>>>0)%(t>>>0)|0;s[(s[e>>2]|0)+(o<<2)>>2]=a;r=s[i>>2]|0;if(r){n=i;a=i;while(1){u=a;t:while(1){while(1){a=s[r+4>>2]|0;if(p)c=a&d;else c=(a>>>0)%(t>>>0)|0;if((c|0)==(o|0)){a=r;break}a=(s[e>>2]|0)+(c<<2)|0;if(!(s[a>>2]|0)){o=c;i=r;break t}l=r+8|0;a=r;while(1){i=s[a>>2]|0;if(!i)break;if((s[l>>2]|0)==(s[i+8>>2]|0))a=i;else break}s[n>>2]=i;s[a>>2]=s[s[(s[e>>2]|0)+(c<<2)>>2]>>2];s[s[(s[e>>2]|0)+(c<<2)>>2]>>2]=r;r=s[u>>2]|0;if(!r)break e}r=s[a>>2]|0;if(!r)break e;else{n=a;u=a}}s[a>>2]=n;r=s[i>>2]|0;if(!r)break;else{n=i;a=i}}}}}else{r=s[e>>2]|0;s[e>>2]=0;if(r)Ma(r);s[a>>2]=0}}while(0);return}function ka(e){e=e|0;return ks(s[e+4>>2]|0)|0}function ya(e){e=e|0;Le(624,10917);Ze(632,10922,1,1,0);$e(640,10927,1,-128,127);$e(656,10932,1,-128,127);$e(648,10944,1,0,255);$e(664,10958,2,-32768,32767);$e(672,10964,2,0,65535);$e(680,10979,4,-2147483648,2147483647);$e(688,10983,4,0,-1);$e(696,10996,4,-2147483648,2147483647);$e(704,11001,4,0,-1);ft(712,11015,4);ft(720,11021,8);yt(360,11028);yt(392,11040);it(416,4,11073);nt(440,11086);Pe(448,0,11102);Sa(11132);xa(11169);Ca(11208);qa(11239);Ta(11279);Ea(11308);Pe(456,4,11346);Pe(464,5,11376);Sa(11415);xa(11447);Ca(11480);qa(11513);Ta(11547);Ea(11580);Pe(472,6,11614);Pe(480,7,11645);Pe(488,7,11677);return}function _a(){ya(0);return}function Sa(e){e=e|0;Pe(536,0,e|0);return}function xa(e){e=e|0;Pe(528,1,e|0);return}function Ca(e){e=e|0;Pe(520,2,e|0);return}function qa(e){e=e|0;Pe(512,3,e|0);return}function Ta(e){e=e|0;Pe(504,4,e|0);return}function Ea(e){e=e|0;Pe(496,5,e|0);return}function Pa(e){e=e|0;De(12478,12501,303,12589)}function Aa(e){e=e|0;var t=0;t=(e|0)==0?1:e;e=js(t)|0;e:do{if(!e){while(1){e=$a()|0;if(!e)break;Vu[e&0]();e=js(t)|0;if(e)break e}t=Je(4)|0;s[t>>2]=2224;Ct(t|0,544,1)}}while(0);return e|0}function Ma(e){e=e|0;zs(e);return}function Ia(e){e=e|0;return}function Ra(e){e=e|0;Ma(e);return}function Oa(e){e=e|0;return 12610}function $a(){var e=0;e=s[559]|0;s[559]=e+0;return e|0}function Fa(e){e=e|0;return}function Da(e){e=e|0;return}function Na(e){e=e|0;return}function La(e){e=e|0;return}function ja(e){e=e|0;return}function za(e){e=e|0;Ma(e);return}function Ha(e){e=e|0;Ma(e);return}function Ba(e){e=e|0;Ma(e);return}function Ua(e){e=e|0;Ma(e);return}function Qa(e,t,r){e=e|0;t=t|0;r=r|0;return(e|0)==(t|0)|0}function Wa(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0;o=d;d=d+64|0;n=o;if((e|0)!=(t|0)){if((t|0)!=0?(i=Xa(t,576,592,0)|0,(i|0)!=0):0){t=n;a=t+56|0;do{s[t>>2]=0;t=t+4|0}while((t|0)<(a|0));s[n>>2]=i;s[n+8>>2]=e;s[n+12>>2]=-1;s[n+48>>2]=1;Zu[s[(s[i>>2]|0)+28>>2]&3](i,n,s[r>>2]|0,1);if((s[n+24>>2]|0)==1){s[r>>2]=s[n+16>>2];t=1}else t=0}else t=0}else t=1;d=o;return t|0}function Ya(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0;e=t+16|0;n=s[e>>2]|0;do{if(n){if((n|0)!=(r|0)){i=t+36|0;s[i>>2]=(s[i>>2]|0)+1;s[t+24>>2]=2;a[t+54>>0]=1;break}e=t+24|0;if((s[e>>2]|0)==2)s[e>>2]=i}else{s[e>>2]=r;s[t+24>>2]=i;s[t+36>>2]=1}}while(0);return}function Va(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;if((e|0)==(s[t+8>>2]|0))Ya(0,t,r,a);return}function Ga(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;if((e|0)==(s[t+8>>2]|0))Ya(0,t,r,a);else{e=s[e+8>>2]|0;Zu[s[(s[e>>2]|0)+28>>2]&3](e,t,r,a)}return}function Ka(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0;n=s[e+4>>2]|0;i=n>>8;if(n&1)i=s[(s[r>>2]|0)+i>>2]|0;e=s[e>>2]|0;Zu[s[(s[e>>2]|0)+28>>2]&3](e,t,r+i|0,(n&2|0)!=0?a:2);return}function Ja(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0,o=0;e:do{if((e|0)!=(s[t+8>>2]|0)){o=s[e+12>>2]|0;n=e+16+(o<<3)|0;Ka(e+16|0,t,r,i);if((o|0)>1){o=t+54|0;e=e+24|0;do{Ka(e,t,r,i);if(a[o>>0]|0)break e;e=e+8|0}while(e>>>0<n>>>0)}}else Ya(0,t,r,i)}while(0);return}function Xa(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0;g=d;d=d+64|0;b=g;h=s[e>>2]|0;m=e+(s[h+-8>>2]|0)|0;h=s[h+-4>>2]|0;s[b>>2]=r;s[b+4>>2]=e;s[b+8>>2]=t;s[b+12>>2]=n;n=b+16|0;e=b+20|0;t=b+24|0;o=b+28|0;l=b+32|0;c=b+40|0;u=(h|0)==(r|0);p=n;f=p+36|0;do{s[p>>2]=0;p=p+4|0}while((p|0)<(f|0));i[n+36>>1]=0;a[n+38>>0]=0;e:do{if(u){s[b+48>>2]=1;Ju[s[(s[r>>2]|0)+20>>2]&3](r,b,m,m,1,0);n=(s[t>>2]|0)==1?m:0}else{Lu[s[(s[h>>2]|0)+24>>2]&3](h,b,m,1,0);switch(s[b+36>>2]|0){case 0:{n=(s[c>>2]|0)==1&(s[o>>2]|0)==1&(s[l>>2]|0)==1?s[e>>2]|0:0;break e}case 1:break;default:{n=0;break e}}if((s[t>>2]|0)!=1?!((s[c>>2]|0)==0&(s[o>>2]|0)==1&(s[l>>2]|0)==1):0){n=0;break}n=s[n>>2]|0}}while(0);d=g;return n|0}function Za(e,t,r,i,n){e=e|0;t=t|0;r=r|0;i=i|0;n=n|0;a[t+53>>0]=1;do{if((s[t+4>>2]|0)==(i|0)){a[t+52>>0]=1;i=t+16|0;e=s[i>>2]|0;if(!e){s[i>>2]=r;s[t+24>>2]=n;s[t+36>>2]=1;if(!((n|0)==1?(s[t+48>>2]|0)==1:0))break;a[t+54>>0]=1;break}if((e|0)!=(r|0)){n=t+36|0;s[n>>2]=(s[n>>2]|0)+1;a[t+54>>0]=1;break}e=t+24|0;i=s[e>>2]|0;if((i|0)==2){s[e>>2]=n;i=n}if((i|0)==1?(s[t+48>>2]|0)==1:0)a[t+54>>0]=1}}while(0);return}function ei(e,t,r,i,n){e=e|0;t=t|0;r=r|0;i=i|0;n=n|0;var o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0;e:do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(r|0)?(o=t+28|0,(s[o>>2]|0)!=1):0)s[o>>2]=i}else{if((e|0)!=(s[t>>2]|0)){b=s[e+12>>2]|0;c=e+16+(b<<3)|0;ri(e+16|0,t,r,i,n);o=e+24|0;if((b|0)<=1)break;l=s[e+8>>2]|0;if((l&2|0)==0?(u=t+36|0,(s[u>>2]|0)!=1):0){if(!(l&1)){l=t+54|0;while(1){if(a[l>>0]|0)break e;if((s[u>>2]|0)==1)break e;ri(o,t,r,i,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}l=t+24|0;e=t+54|0;while(1){if(a[e>>0]|0)break e;if((s[u>>2]|0)==1?(s[l>>2]|0)==1:0)break e;ri(o,t,r,i,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}l=t+54|0;while(1){if(a[l>>0]|0)break e;ri(o,t,r,i,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}if((s[t+16>>2]|0)!=(r|0)?(h=t+20|0,(s[h>>2]|0)!=(r|0)):0){s[t+32>>2]=i;p=t+44|0;if((s[p>>2]|0)==4)break;l=s[e+12>>2]|0;c=e+16+(l<<3)|0;u=t+52|0;i=t+53|0;f=t+54|0;d=e+8|0;m=t+24|0;t:do{if((l|0)>0){l=0;o=0;e=e+16|0;while(1){a[u>>0]=0;a[i>>0]=0;ti(e,t,r,r,1,n);if(a[f>>0]|0){b=20;break t}do{if(a[i>>0]|0){if(!(a[u>>0]|0))if(!(s[d>>2]&1)){o=1;b=20;break t}else{o=1;break}if((s[m>>2]|0)==1)break t;if(!(s[d>>2]&2))break t;else{l=1;o=1}}}while(0);e=e+8|0;if(e>>>0>=c>>>0){b=20;break}}}else{l=0;o=0;b=20}}while(0);do{if((b|0)==20){if((!l?(s[h>>2]=r,r=t+40|0,s[r>>2]=(s[r>>2]|0)+1,(s[t+36>>2]|0)==1):0)?(s[m>>2]|0)==2:0){a[f>>0]=1;if(o)break}else b=24;if((b|0)==24?o:0)break;s[p>>2]=4;break e}}while(0);s[p>>2]=3;break}if((i|0)==1)s[t+32>>2]=1}}while(0);return}function ti(e,t,r,a,i,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;var o=0,l=0;l=s[e+4>>2]|0;o=l>>8;if(l&1)o=s[(s[a>>2]|0)+o>>2]|0;e=s[e>>2]|0;Ju[s[(s[e>>2]|0)+20>>2]&3](e,t,r,a+o|0,(l&2|0)!=0?i:2,n);return}function ri(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0;o=s[e+4>>2]|0;n=o>>8;if(o&1)n=s[(s[r>>2]|0)+n>>2]|0;e=s[e>>2]|0;Lu[s[(s[e>>2]|0)+24>>2]&3](e,t,r+n|0,(o&2|0)!=0?a:2,i);return}function ai(e,t,r,i,n){e=e|0;t=t|0;r=r|0;i=i|0;n=n|0;var o=0,l=0,c=0,u=0;e:do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(r|0)?(o=t+28|0,(s[o>>2]|0)!=1):0)s[o>>2]=i}else{if((e|0)!=(s[t>>2]|0)){c=s[e+8>>2]|0;Lu[s[(s[c>>2]|0)+24>>2]&3](c,t,r,i,n);break}if((s[t+16>>2]|0)!=(r|0)?(l=t+20|0,(s[l>>2]|0)!=(r|0)):0){s[t+32>>2]=i;i=t+44|0;if((s[i>>2]|0)==4)break;o=t+52|0;a[o>>0]=0;u=t+53|0;a[u>>0]=0;e=s[e+8>>2]|0;Ju[s[(s[e>>2]|0)+20>>2]&3](e,t,r,r,1,n);if(a[u>>0]|0){if(!(a[o>>0]|0)){o=1;c=13}}else{o=0;c=13}do{if((c|0)==13){s[l>>2]=r;u=t+40|0;s[u>>2]=(s[u>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0){a[t+54>>0]=1;if(o)break}else c=16;if((c|0)==16?o:0)break;s[i>>2]=4;break e}}while(0);s[i>>2]=3;break}if((i|0)==1)s[t+32>>2]=1}}while(0);return}function ii(e,t,r,i,n){e=e|0;t=t|0;r=r|0;i=i|0;n=n|0;var o=0,l=0;do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(r|0)?(l=t+28|0,(s[l>>2]|0)!=1):0)s[l>>2]=i}else if((e|0)==(s[t>>2]|0)){if((s[t+16>>2]|0)!=(r|0)?(o=t+20|0,(s[o>>2]|0)!=(r|0)):0){s[t+32>>2]=i;s[o>>2]=r;n=t+40|0;s[n>>2]=(s[n>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0)a[t+54>>0]=1;s[t+44>>2]=4;break}if((i|0)==1)s[t+32>>2]=1}}while(0);return}function si(e,t,r,i,n,o){e=e|0;t=t|0;r=r|0;i=i|0;n=n|0;o=o|0;var l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0;if((e|0)==(s[t+8>>2]|0))Za(0,t,r,i,n);else{p=t+52|0;f=a[p>>0]|0;m=t+53|0;h=a[m>>0]|0;d=s[e+12>>2]|0;l=e+16+(d<<3)|0;a[p>>0]=0;a[m>>0]=0;ti(e+16|0,t,r,i,n,o);e:do{if((d|0)>1){c=t+24|0;u=e+8|0;d=t+54|0;e=e+24|0;do{if(a[d>>0]|0)break e;if(!(a[p>>0]|0)){if((a[m>>0]|0)!=0?(s[u>>2]&1|0)==0:0)break e}else{if((s[c>>2]|0)==1)break e;if(!(s[u>>2]&2))break e}a[p>>0]=0;a[m>>0]=0;ti(e,t,r,i,n,o);e=e+8|0}while(e>>>0<l>>>0)}}while(0);a[p>>0]=f;a[m>>0]=h}return}function ni(e,t,r,a,i,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;if((e|0)==(s[t+8>>2]|0))Za(0,t,r,a,i);else{e=s[e+8>>2]|0;Ju[s[(s[e>>2]|0)+20>>2]&3](e,t,r,a,i,n)}return}function oi(e,t,r,a,i,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;if((e|0)==(s[t+8>>2]|0))Za(0,t,r,a,i);return}function li(e){e=e|0;De(12625,12654,1164,12589)}function ci(e){e=e|0;return((e|0)==32|(e+-9|0)>>>0<5)&1|0}function ui(){var e=0;if(!(s[597]|0))e=2644;else e=s[(ct()|0)+60>>2]|0;return e|0}function di(e){e=e|0;var t=0,r=0;t=0;while(1){if((n[12742+t>>0]|0)==(e|0)){r=2;break}t=t+1|0;if((t|0)==87){t=87;e=12830;r=5;break}}if((r|0)==2)if(!t)e=12830;else{e=12830;r=5}if((r|0)==5)while(1){r=e;while(1){e=r+1|0;if(!(a[r>>0]|0))break;else r=e}t=t+-1|0;if(!t)break;else r=5}return e|0}function pi(e,t,r){e=e|0;t=t|0;r=r|0;var i=0.0,o=0,l=0.0,c=0,u=0,p=0.0,f=0,m=0,h=0,b=0.0,g=0.0,v=0,w=0,k=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,R=0,O=0,$=0,F=0,D=0,N=0.0;D=d;d=d+512|0;R=D;switch(t|0){case 0:{F=24;$=-149;q=4;break}case 1:{F=53;$=-1074;q=4;break}case 2:{F=53;$=-1074;q=4;break}default:i=0.0}e:do{if((q|0)==4){P=e+4|0;E=e+100|0;do{t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0}while((ci(t)|0)!=0);t:do{switch(t|0){case 43:case 45:{o=1-(((t|0)==45&1)<<1)|0;t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0;O=o;break t}else{t=hi(e)|0;O=o;break t}}default:O=1}}while(0);o=t;t=0;do{if((o|32|0)!=(a[14634+t>>0]|0))break;do{if(t>>>0<7){o=s[P>>2]|0;if(o>>>0<(s[E>>2]|0)>>>0){s[P>>2]=o+1;o=n[o>>0]|0;break}else{o=hi(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<8);t:do{switch(t|0){case 8:break;case 3:{q=23;break}default:{c=(r|0)!=0;if(c&t>>>0>3)if((t|0)==8)break t;else{q=23;break t}r:do{if(!t){t=0;do{if((o|32|0)!=(a[16477+t>>0]|0))break r;do{if(t>>>0<2){o=s[P>>2]|0;if(o>>>0<(s[E>>2]|0)>>>0){s[P>>2]=o+1;o=n[o>>0]|0;break}else{o=hi(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<3)}}while(0);switch(t|0){case 3:{t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if((t|0)==40)t=1;else{if(!(s[E>>2]|0)){i=y;break e}s[P>>2]=(s[P>>2]|0)+-1;i=y;break e}while(1){o=s[P>>2]|0;if(o>>>0<(s[E>>2]|0)>>>0){s[P>>2]=o+1;o=n[o>>0]|0}else o=hi(e)|0;if(!((o+-48|0)>>>0<10|(o+-65|0)>>>0<26)?!((o|0)==95|(o+-97|0)>>>0<26):0)break;t=t+1|0}if((o|0)==41){i=y;break e}o=(s[E>>2]|0)==0;if(!o)s[P>>2]=(s[P>>2]|0)+-1;if(!c){s[(ui()|0)>>2]=22;mi(e,0);i=0.0;break e}if(!t){i=y;break e}while(1){t=t+-1|0;if(!o)s[P>>2]=(s[P>>2]|0)+-1;if(!t){i=y;break e}}}case 0:{do{if((o|0)==48){t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if((t|32|0)!=120){if(!(s[E>>2]|0)){t=48;break}s[P>>2]=(s[P>>2]|0)+-1;t=48;break}t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0;c=0}else{t=hi(e)|0;c=0}r:while(1){switch(t|0){case 46:{q=74;break r}case 48:break;default:{x=0;u=0;S=0;o=0;f=c;m=0;k=0;p=1.0;c=0;i=0.0;break r}}t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0;c=1;continue}else{t=hi(e)|0;c=1;continue}}if((q|0)==74){t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if((t|0)==48){c=0;o=0;do{t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;c=Vc(c|0,o|0,-1,-1)|0;o=I}while((t|0)==48);x=0;u=0;S=c;f=1;m=1;k=0;p=1.0;c=0;i=0.0}else{x=0;u=0;S=0;o=0;f=c;m=1;k=0;p=1.0;c=0;i=0.0}}while(1){v=t+-48|0;h=t|32;if(v>>>0>=10){w=(t|0)==46;if(!(w|(h+-97|0)>>>0<6)){h=S;v=x;break}if(w){if(!m){w=u;o=x;v=x;m=1;h=k;l=p}else{h=S;v=x;t=46;break}}else q=86}else q=86;if((q|0)==86){q=0;t=(t|0)>57?h+-87|0:v;do{if(!((x|0)<0|(x|0)==0&u>>>0<8)){if((x|0)<0|(x|0)==0&u>>>0<14){g=p*.0625;h=k;l=g;i=i+g*+(t|0);break}if((k|0)!=0|(t|0)==0){h=k;l=p}else{h=1;l=p;i=i+p*.5}}else{h=k;l=p;c=t+(c<<4)|0}}while(0);u=Vc(u|0,x|0,1,0)|0;w=S;v=I;f=1}t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;x=v;S=w;t=n[t>>0]|0;k=h;p=l;continue}else{x=v;S=w;t=hi(e)|0;k=h;p=l;continue}}if(!f){t=(s[E>>2]|0)==0;if(!t)s[P>>2]=(s[P>>2]|0)+-1;if(r){if(!t?(C=s[P>>2]|0,s[P>>2]=C+-1,(m|0)!=0):0)s[P>>2]=C+-2}else mi(e,0);i=+(O|0)*0.0;break e}f=(m|0)==0;m=f?u:h;f=f?v:o;if((v|0)<0|(v|0)==0&u>>>0<8){o=v;do{c=c<<4;u=Vc(u|0,o|0,1,0)|0;o=I}while((o|0)<0|(o|0)==0&u>>>0<8)}if((t|32|0)==112){o=Ts(e,r)|0;t=I;if((o|0)==0&(t|0)==-2147483648){if(!r){mi(e,0);i=0.0;break e}if(!(s[E>>2]|0)){o=0;t=0}else{s[P>>2]=(s[P>>2]|0)+-1;o=0;t=0}}}else if(!(s[E>>2]|0)){o=0;t=0}else{s[P>>2]=(s[P>>2]|0)+-1;o=0;t=0}R=Yc(m|0,f|0,2)|0;R=Vc(R|0,I|0,-32,-1)|0;t=Vc(R|0,I|0,o|0,t|0)|0;o=I;if(!c){i=+(O|0)*0.0;break e}if((o|0)>0|(o|0)==0&t>>>0>(0-$|0)>>>0){s[(ui()|0)>>2]=34;i=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break e}R=$+-106|0;M=((R|0)<0)<<31>>31;if((o|0)<(M|0)|(o|0)==(M|0)&t>>>0<R>>>0){s[(ui()|0)>>2]=34;i=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break e}if((c|0)>-1){do{M=!(i>=.5);R=M&1|c<<1;c=R^1;i=i+(M?i:i+-1.0);t=Vc(t|0,o|0,-1,-1)|0;o=I}while((R|0)>-1);u=t;p=i}else{u=t;p=i}t=Qc(32,0,$|0,(($|0)<0)<<31>>31|0)|0;t=Vc(u|0,o|0,t|0,I|0)|0;$=I;if(0>($|0)|0==($|0)&F>>>0>t>>>0){if((t|0)<0){t=0;q=127}else q=125}else{t=F;q=125}if((q|0)==125)if((t|0)<53)q=127;else{o=t;l=+(O|0);i=0.0}if((q|0)==127){i=+(O|0);o=t;l=i;i=+vi(+Si(1.0,84-t|0),i)}F=(c&1|0)==0&(p!=0.0&(o|0)<32);i=l*(F?0.0:p)+(i+l*+(((F&1)+c|0)>>>0))-i;if(!(i!=0.0))s[(ui()|0)>>2]=34;i=+xi(i,u);break e}else t=o}while(0);A=$+F|0;M=0-A|0;c=0;r:while(1){switch(t|0){case 46:{q=138;break r}case 48:break;default:{o=0;h=0;m=0;break r}}t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0;c=1;continue}else{t=hi(e)|0;c=1;continue}}if((q|0)==138){t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if((t|0)==48){o=0;t=0;while(1){o=Vc(o|0,t|0,-1,-1)|0;c=I;t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if((t|0)==48)t=c;else{h=c;c=1;m=1;break}}}else{o=0;h=0;m=1}}s[R>>2]=0;f=t+-48|0;u=(t|0)==46;r:do{if(u|f>>>0<10){T=R+496|0;x=0;w=0;k=u;q=h;v=c;C=m;c=0;u=0;m=0;a:while(1){do{if(k){if(!C){o=x;h=w;C=1}else{h=q;t=x;f=w;break a}}else{k=Vc(x|0,w|0,1,0)|0;w=I;S=(t|0)!=48;if((u|0)>=125){if(!S){h=q;x=k;break}s[T>>2]=s[T>>2]|1;h=q;x=k;break}h=R+(u<<2)|0;if(c)f=t+-48+((s[h>>2]|0)*10|0)|0;s[h>>2]=f;c=c+1|0;f=(c|0)==9;h=q;x=k;v=1;c=f?0:c;u=(f&1)+u|0;m=S?k:m}}while(0);t=s[P>>2]|0;if(t>>>0<(s[E>>2]|0)>>>0){s[P>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;f=t+-48|0;k=(t|0)==46;if(!(k|f>>>0<10)){f=C;q=161;break r}else q=h}v=(v|0)!=0;q=169}else{x=0;w=0;v=c;f=m;c=0;u=0;m=0;q=161}}while(0);do{if((q|0)==161){T=(f|0)==0;o=T?x:o;h=T?w:h;v=(v|0)!=0;if(!((t|32|0)==101&v))if((t|0)>-1){t=x;f=w;q=169;break}else{t=x;f=w;q=171;break}f=Ts(e,r)|0;t=I;if((f|0)==0&(t|0)==-2147483648){if(!r){mi(e,0);i=0.0;break}if(!(s[E>>2]|0)){f=0;t=0}else{s[P>>2]=(s[P>>2]|0)+-1;f=0;t=0}}o=Vc(f|0,t|0,o|0,h|0)|0;v=x;h=I;f=w;q=173}}while(0);if((q|0)==169)if(s[E>>2]|0){s[P>>2]=(s[P>>2]|0)+-1;if(v){v=t;q=173}else q=172}else q=171;if((q|0)==171)if(v){v=t;q=173}else q=172;do{if((q|0)==172){s[(ui()|0)>>2]=22;mi(e,0);i=0.0}else if((q|0)==173){t=s[R>>2]|0;if(!t){i=+(O|0)*0.0;break}if(((f|0)<0|(f|0)==0&v>>>0<10)&((o|0)==(v|0)&(h|0)==(f|0))?F>>>0>30|(t>>>F|0)==0:0){i=+(O|0)*+(t>>>0);break}e=($|0)/-2|0;P=((e|0)<0)<<31>>31;if((h|0)>(P|0)|(h|0)==(P|0)&o>>>0>e>>>0){s[(ui()|0)>>2]=34;i=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break}e=$+-106|0;P=((e|0)<0)<<31>>31;if((h|0)<(P|0)|(h|0)==(P|0)&o>>>0<e>>>0){s[(ui()|0)>>2]=34;i=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break}if(c){if((c|0)<9){f=R+(u<<2)|0;t=s[f>>2]|0;do{t=t*10|0;c=c+1|0}while((c|0)!=9);s[f>>2]=t}u=u+1|0}if((m|0)<9?(m|0)<=(o|0)&(o|0)<18:0){if((o|0)==9){i=+(O|0)*+((s[R>>2]|0)>>>0);break}if((o|0)<9){i=+(O|0)*+((s[R>>2]|0)>>>0)/+(s[2648+(8-o<<2)>>2]|0);break}e=F+27+(re(o,-3)|0)|0;t=s[R>>2]|0;if((e|0)>30|(t>>>e|0)==0){i=+(O|0)*+(t>>>0)*+(s[2648+(o+-10<<2)>>2]|0);break}}t=(o|0)%9|0;if(!t){c=0;t=0}else{v=(o|0)>-1?t:t+9|0;f=s[2648+(8-v<<2)>>2]|0;if(u){m=1e9/(f|0)|0;c=0;t=0;h=0;do{E=R+(h<<2)|0;P=s[E>>2]|0;e=((P>>>0)/(f>>>0)|0)+t|0;s[E>>2]=e;t=re((P>>>0)%(f>>>0)|0,m)|0;e=(h|0)==(c|0)&(e|0)==0;h=h+1|0;o=e?o+-9|0:o;c=e?h&127:c}while((h|0)!=(u|0));if(t){s[R+(u<<2)>>2]=t;u=u+1|0}}else{c=0;u=0}t=0;o=9-v+o|0}r:while(1){w=(o|0)<18;k=(o|0)==18;S=R+(c<<2)|0;do{if(!w){if(!k)break r;if((s[S>>2]|0)>>>0>=9007199){o=18;break r}}f=0;m=u+127|0;while(1){v=m&127;h=R+(v<<2)|0;m=Yc(s[h>>2]|0,0,29)|0;m=Vc(m|0,I|0,f|0,0)|0;f=I;if(f>>>0>0|(f|0)==0&m>>>0>1e9){e=au(m|0,f|0,1e9,0)|0;m=iu(m|0,f|0,1e9,0)|0;f=e}else f=0;s[h>>2]=m;e=(v|0)==(c|0);u=(v|0)!=(u+127&127|0)|e?u:(m|0)==0?v:u;if(e)break;else m=v+-1|0}t=t+-29|0}while((f|0)==0);c=c+127&127;if((c|0)==(u|0)){e=u+127&127;u=R+((u+126&127)<<2)|0;s[u>>2]=s[u>>2]|s[R+(e<<2)>>2];u=e}s[R+(c<<2)>>2]=f;o=o+9|0}r:while(1){x=u+1&127;S=R+((u+127&127)<<2)|0;while(1){w=(o|0)==18;k=(o|0)>27?9:1;v=w^1;while(1){m=c&127;h=(m|0)==(u|0);do{if(!h){f=s[R+(m<<2)>>2]|0;if(f>>>0<9007199){q=219;break}if(f>>>0>9007199)break;f=c+1&127;if((f|0)==(u|0)){q=219;break}f=s[R+(f<<2)>>2]|0;if(f>>>0<254740991){q=219;break}if(!(f>>>0>254740991|v)){o=m;break r}}else q=219}while(0);if((q|0)==219?(q=0,w):0){q=220;break r}t=t+k|0;if((c|0)==(u|0))c=u;else break}v=(1<<k)+-1|0;w=1e9>>>k;m=c;f=0;h=c;while(1){P=R+(h<<2)|0;e=s[P>>2]|0;c=(e>>>k)+f|0;s[P>>2]=c;f=re(e&v,w)|0;c=(h|0)==(m|0)&(c|0)==0;h=h+1&127;o=c?o+-9|0:o;c=c?h:m;if((h|0)==(u|0))break;else m=c}if(!f)continue;if((x|0)!=(c|0))break;s[S>>2]=s[S>>2]|1}s[R+(u<<2)>>2]=f;u=x}if((q|0)==220)if(h){s[R+(x+-1<<2)>>2]=0;o=u;u=x}else o=m;i=+((s[R+(o<<2)>>2]|0)>>>0);o=c+1&127;if((o|0)==(u|0)){u=c+2&127;s[R+(u+-1<<2)>>2]=0}g=+(O|0);l=g*(i*1.0e9+ +((s[R+(o<<2)>>2]|0)>>>0));w=t+53|0;h=w-$|0;v=(h|0)<(F|0);o=v&1;m=v?(h|0)<0?0:h:F;if((m|0)<53){N=+vi(+Si(1.0,105-m|0),l);p=+ki(l,+Si(1.0,53-m|0));b=N;i=p;p=N+(l-p)}else{b=0.0;i=0.0;p=l}f=c+2&127;do{if((f|0)==(u|0))l=i;else{f=s[R+(f<<2)>>2]|0;do{if(f>>>0>=5e8){if(f>>>0>5e8){i=g*.75+i;break}if((c+3&127|0)==(u|0)){i=g*.5+i;break}else{i=g*.75+i;break}}else{if((f|0)==0?(c+3&127|0)==(u|0):0)break;i=g*.25+i}}while(0);if((53-m|0)<=1){l=i;break}if(+ki(i,1.0)!=0.0){l=i;break}l=i+1.0}}while(0);i=p+l-b;do{if((w&2147483647|0)>(-2-A|0)){if(+B(+i)>=9007199254740992.0){o=v&(m|0)==(h|0)?0:o;t=t+1|0;i=i*.5}if((t+50|0)<=(M|0)?!(l!=0.0&(o|0)!=0):0)break;s[(ui()|0)>>2]=34}}while(0);i=+xi(i,t)}}while(0);break e}default:{if(s[E>>2]|0)s[P>>2]=(s[P>>2]|0)+-1;s[(ui()|0)>>2]=22;mi(e,0);i=0.0;break e}}}}}while(0);if((q|0)==23){o=(s[E>>2]|0)==0;if(!o)s[P>>2]=(s[P>>2]|0)+-1;if((r|0)!=0&t>>>0>3)do{if(!o)s[P>>2]=(s[P>>2]|0)+-1;t=t+-1|0}while(t>>>0>3)}i=+(O|0)*_}}while(0);d=D;return+i}function fi(e,t,r,i,o){e=e|0;t=t|0;r=r|0;i=i|0;o=o|0;var l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0;e:do{if(t>>>0>36){s[(ui()|0)>>2]=22;o=0;i=0}else{g=e+4|0;b=e+100|0;do{l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0}while((ci(l)|0)!=0);t:do{switch(l|0){case 43:case 45:{c=((l|0)==45)<<31>>31;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0;h=c;break t}else{l=hi(e)|0;h=c;break t}}default:h=0}}while(0);c=(t|0)==0;do{if((t&-17|0)==0&(l|0)==48){l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;if((l|32|0)!=120)if(c){t=8;f=46;break}else{f=32;break}t=s[g>>2]|0;if(t>>>0<(s[b>>2]|0)>>>0){s[g>>2]=t+1;l=n[t>>0]|0}else l=hi(e)|0;if((n[14643+(l+1)>>0]|0)>15){i=(s[b>>2]|0)==0;if(!i)s[g>>2]=(s[g>>2]|0)+-1;if(!r){mi(e,0);o=0;i=0;break e}if(i){o=0;i=0;break e}s[g>>2]=(s[g>>2]|0)+-1;o=0;i=0;break e}else{t=16;f=46}}else{t=c?10:t;if((n[14643+(l+1)>>0]|0)>>>0<t>>>0)f=32;else{if(s[b>>2]|0)s[g>>2]=(s[g>>2]|0)+-1;mi(e,0);s[(ui()|0)>>2]=22;o=0;i=0;break e}}}while(0);if((f|0)==32)if((t|0)==10){t=l+-48|0;if(t>>>0<10){l=0;while(1){c=(l*10|0)+t|0;t=s[g>>2]|0;if(t>>>0<(s[b>>2]|0)>>>0){s[g>>2]=t+1;l=n[t>>0]|0}else l=hi(e)|0;t=l+-48|0;if(!(t>>>0<10&c>>>0<429496729)){t=c;break}else l=c}c=0}else{t=0;c=0}r=l+-48|0;if(r>>>0<10){while(1){u=ru(t|0,c|0,10,0)|0;d=I;p=((r|0)<0)<<31>>31;m=~p;if(d>>>0>m>>>0|(d|0)==(m|0)&u>>>0>~r>>>0){u=t;break}t=Vc(u|0,d|0,r|0,p|0)|0;c=I;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;r=l+-48|0;if(!(r>>>0<10&(c>>>0<429496729|(c|0)==429496729&t>>>0<2576980378))){u=t;break}}if(r>>>0>9){l=u;t=h}else{t=10;f=72}}else{l=t;t=h}}else f=46;t:do{if((f|0)==46){if(!(t+-1&t)){f=a[14900+((t*23|0)>>>5&7)>>0]|0;c=a[14643+(l+1)>>0]|0;r=c&255;if(r>>>0<t>>>0){l=0;while(1){u=r|l<<f;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;c=a[14643+(l+1)>>0]|0;r=c&255;if(!(u>>>0<134217728&r>>>0<t>>>0))break;else l=u}r=0}else{r=0;u=0}d=Gc(-1,-1,f|0)|0;p=I;if((c&255)>>>0>=t>>>0|(r>>>0>p>>>0|(r|0)==(p|0)&u>>>0>d>>>0)){c=r;f=72;break}else l=r;while(1){u=Yc(u|0,l|0,f|0)|0;r=I;u=c&255|u;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;c=a[14643+(l+1)>>0]|0;if((c&255)>>>0>=t>>>0|(r>>>0>p>>>0|(r|0)==(p|0)&u>>>0>d>>>0)){c=r;f=72;break t}else l=r}}c=a[14643+(l+1)>>0]|0;r=c&255;if(r>>>0<t>>>0){l=0;while(1){u=r+(re(l,t)|0)|0;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;c=a[14643+(l+1)>>0]|0;r=c&255;if(!(u>>>0<119304647&r>>>0<t>>>0))break;else l=u}r=0}else{u=0;r=0}if((c&255)>>>0<t>>>0){f=au(-1,-1,t|0,0)|0;m=I;p=r;while(1){if(p>>>0>m>>>0|(p|0)==(m|0)&u>>>0>f>>>0){c=p;f=72;break t}r=ru(u|0,p|0,t|0,0)|0;d=I;c=c&255;if(d>>>0>4294967295|(d|0)==-1&r>>>0>~c>>>0){c=p;f=72;break t}u=Vc(c|0,0,r|0,d|0)|0;r=I;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0;c=a[14643+(l+1)>>0]|0;if((c&255)>>>0>=t>>>0){c=r;f=72;break}else p=r}}else{c=r;f=72}}}while(0);if((f|0)==72)if((n[14643+(l+1)>>0]|0)>>>0<t>>>0){do{l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=hi(e)|0}while((n[14643+(l+1)>>0]|0)>>>0<t>>>0);s[(ui()|0)>>2]=34;c=o;l=i;t=(i&1|0)==0&0==0?h:0}else{l=u;t=h}if(s[b>>2]|0)s[g>>2]=(s[g>>2]|0)+-1;if(!(c>>>0<o>>>0|(c|0)==(o|0)&l>>>0<i>>>0)){if(!((i&1|0)!=0|0!=0|(t|0)!=0)){s[(ui()|0)>>2]=34;i=Vc(i|0,o|0,-1,-1)|0;o=I;break}if(c>>>0>o>>>0|(c|0)==(o|0)&l>>>0>i>>>0){s[(ui()|0)>>2]=34;break}}i=((t|0)<0)<<31>>31;i=Qc(l^t|0,c^i|0,t|0,i|0)|0;o=I}}while(0);I=o;return i|0}function mi(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;s[e+104>>2]=t;r=s[e+4>>2]|0;a=s[e+8>>2]|0;i=a-r|0;s[e+108>>2]=i;if((t|0)!=0&(i|0)>(t|0))s[e+100>>2]=r+t;else s[e+100>>2]=a;return}function hi(e){e=e|0;var t=0,r=0,i=0,o=0,l=0,c=0;r=e+104|0;l=s[r>>2]|0;if((l|0)!=0?(s[e+108>>2]|0)>=(l|0):0)c=4;else{t=zi(e)|0;if((t|0)>=0){o=s[r>>2]|0;r=e+8|0;if(o){i=s[r>>2]|0;l=s[e+4>>2]|0;r=i;o=o-(s[e+108>>2]|0)+-1|0;if((r-l|0)>(o|0))s[e+100>>2]=l+o;else c=9}else{i=s[r>>2]|0;r=i;c=9}if((c|0)==9)s[e+100>>2]=r;r=s[e+4>>2]|0;if(i){e=e+108|0;s[e>>2]=i+1-r+(s[e>>2]|0)}r=r+-1|0;if((n[r>>0]|0|0)!=(t|0))a[r>>0]=t}else c=4}if((c|0)==4){s[e+100>>2]=0;t=-1}return t|0}function bi(e){e=e|0;if(e>>>0>4294963200){s[(ui()|0)>>2]=0-e;e=-1}return e|0}function gi(e,t){e=+e;t=+t;var r=0,a=0;u[f>>3]=e;a=s[f>>2]|0;r=s[f+4>>2]|0;u[f>>3]=t;r=s[f+4>>2]&-2147483648|r&2147483647;s[f>>2]=a;s[f+4>>2]=r;return+ +u[f>>3]}function vi(e,t){e=+e;t=+t;return+ +gi(e,t)}function wi(e,t){e=+e;t=+t;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,d=0,p=0,m=0,h=0,b=0;u[f>>3]=e;r=s[f>>2]|0;d=s[f+4>>2]|0;u[f>>3]=t;p=s[f>>2]|0;m=s[f+4>>2]|0;a=Gc(r|0,d|0,52)|0;a=a&2047;l=Gc(p|0,m|0,52)|0;l=l&2047;h=d&-2147483648;o=Yc(p|0,m|0,1)|0;c=I;e:do{if(!((o|0)==0&(c|0)==0)?(n=m&2147483647,!(n>>>0>2146435072|(n|0)==2146435072&p>>>0>0|(a|0)==2047)):0){i=Yc(r|0,d|0,1)|0;n=I;if(!(n>>>0>c>>>0|(n|0)==(c|0)&i>>>0>o>>>0))return+((i|0)==(o|0)&(n|0)==(c|0)?e*0.0:e);if(!a){a=Yc(r|0,d|0,12)|0;i=I;if((i|0)>-1|(i|0)==-1&a>>>0>4294967295){n=a;a=0;do{a=a+-1|0;n=Yc(n|0,i|0,1)|0;i=I}while((i|0)>-1|(i|0)==-1&n>>>0>4294967295)}else a=0;r=Yc(r|0,d|0,1-a|0)|0;i=I}else i=d&1048575|1048576;if(!l){n=Yc(p|0,m|0,12)|0;o=I;if((o|0)>-1|(o|0)==-1&n>>>0>4294967295){l=0;do{l=l+-1|0;n=Yc(n|0,o|0,1)|0;o=I}while((o|0)>-1|(o|0)==-1&n>>>0>4294967295)}else l=0;p=Yc(p|0,m|0,1-l|0)|0;d=I}else d=m&1048575|1048576;c=Qc(r|0,i|0,p|0,d|0)|0;o=I;n=(o|0)>-1|(o|0)==-1&c>>>0>4294967295;t:do{if((a|0)>(l|0)){while(1){if(n)if((r|0)==(p|0)&(i|0)==(d|0))break;else{r=c;i=o}r=Yc(r|0,i|0,1)|0;i=I;a=a+-1|0;c=Qc(r|0,i|0,p|0,d|0)|0;o=I;n=(o|0)>-1|(o|0)==-1&c>>>0>4294967295;if((a|0)<=(l|0))break t}t=e*0.0;break e}}while(0);if(n)if((r|0)==(p|0)&(i|0)==(d|0)){t=e*0.0;break}else{i=o;r=c}if(i>>>0<1048576|(i|0)==1048576&r>>>0<0)do{r=Yc(r|0,i|0,1)|0;i=I;a=a+-1|0}while(i>>>0<1048576|(i|0)==1048576&r>>>0<0);if((a|0)>0){m=Vc(r|0,i|0,0,-1048576)|0;r=I;a=Yc(a|0,0,52)|0;r=r|I;a=m|a}else{a=Gc(r|0,i|0,1-a|0)|0;r=I}s[f>>2]=a;s[f+4>>2]=r|h;t=+u[f>>3]}else b=3}while(0);if((b|0)==3){t=e*t;t=t/t}return+t}function ki(e,t){e=+e;t=+t;return+ +wi(e,t)}function yi(e,t){e=+e;t=t|0;var r=0,a=0,i=0;u[f>>3]=e;r=s[f>>2]|0;a=s[f+4>>2]|0;i=Gc(r|0,a|0,52)|0;i=i&2047;switch(i|0){case 0:{if(e!=0.0){e=+yi(e*18446744073709551616.0,t);r=(s[t>>2]|0)+-64|0}else r=0;s[t>>2]=r;break}case 2047:break;default:{s[t>>2]=i+-1022;s[f>>2]=r;s[f+4>>2]=a&-2146435073|1071644672;e=+u[f>>3]}}return+e}function _i(e,t){e=+e;t=t|0;return+ +yi(e,t)}function Si(e,t){e=+e;t=t|0;var r=0;if((t|0)>1023){e=e*8988465674311579538646525.0e283;r=t+-1023|0;if((r|0)>1023){r=t+-2046|0;r=(r|0)>1023?1023:r;e=e*8988465674311579538646525.0e283}}else if((t|0)<-1022){e=e*2.2250738585072014e-308;r=t+1022|0;if((r|0)<-1022){r=t+2044|0;r=(r|0)<-1022?-1022:r;e=e*2.2250738585072014e-308}}else r=t;r=Yc(r+1023|0,0,52)|0;t=I;s[f>>2]=r;s[f+4>>2]=t;return+(e*+u[f>>3])}function xi(e,t){e=+e;t=t|0;return+ +Si(e,t)}function Ci(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0,o=0,l=0,c=0,u=0,p=0;u=d;d=d+16|0;n=u;l=(i|0)==0?2680:i;i=s[l>>2]|0;e:do{if(!t){if(!i)i=0;else c=15}else{o=(e|0)==0?n:e;if(!r)i=-2;else{if(!i){i=a[t>>0]|0;n=i&255;if(i<<24>>24>-1){s[o>>2]=n;i=i<<24>>24!=0&1;break}i=n+-194|0;if(i>>>0>50){c=15;break}i=s[2432+(i<<2)>>2]|0;n=r+-1|0;if(n){t=t+1|0;c=9}}else{n=r;c=9}t:do{if((c|0)==9){e=a[t>>0]|0;p=(e&255)>>>3;if((p+-16|p+(i>>26))>>>0>7){c=15;break e}while(1){t=t+1|0;i=(e&255)+-128|i<<6;n=n+-1|0;if((i|0)>=0)break;if(!n)break t;e=a[t>>0]|0;if((e&-64)<<24>>24!=-128){c=15;break e}}s[l>>2]=0;s[o>>2]=i;i=r-n|0;break e}}while(0);s[l>>2]=i;i=-2}}}while(0);if((c|0)==15){s[l>>2]=0;s[(ui()|0)>>2]=84;i=-1}d=u;return i|0}function qi(e){e=e|0;if(!e)e=1;else e=(s[e>>2]|0)==0;return e&1|0}function Ti(e,t,r){e=e|0;t=t|0;r=r|0;do{if(e){if(t>>>0<128){a[e>>0]=t;e=1;break}if(t>>>0<2048){a[e>>0]=t>>>6|192;a[e+1>>0]=t&63|128;e=2;break}if(t>>>0<55296|(t&-8192|0)==57344){a[e>>0]=t>>>12|224;a[e+1>>0]=t>>>6&63|128;a[e+2>>0]=t&63|128;e=3;break}if((t+-65536|0)>>>0<1048576){a[e>>0]=t>>>18|240;a[e+1>>0]=t>>>12&63|128;a[e+2>>0]=t>>>6&63|128;a[e+3>>0]=t&63|128;e=4;break}else{s[(ui()|0)>>2]=84;e=-1;break}}else e=1}while(0);return e|0}function Ei(e,t){e=e|0;t=t|0;if(!e)e=0;else e=Ti(e,t,0)|0;return e|0}function Pi(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0;m=d;d=d+112|0;f=m+40|0;u=m+24|0;c=m+16|0;n=m;p=m+52|0;i=a[t>>0]|0;if(ps(14909,i<<24>>24,4)|0){r=js(1144)|0;if(!r)r=0;else{o=r;l=o+112|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(l|0));if(!(bs(t,43)|0))s[r>>2]=i<<24>>24==114?8:4;if(bs(t,101)|0){s[n>>2]=e;s[n+4>>2]=2;s[n+8>>2]=1;xe(221,n|0)|0;i=a[t>>0]|0}if(i<<24>>24==97){s[c>>2]=e;s[c+4>>2]=3;i=xe(221,c|0)|0;if(!(i&1024)){s[u>>2]=e;s[u+4>>2]=4;s[u+8>>2]=i|1024;xe(221,u|0)|0}t=s[r>>2]|128;s[r>>2]=t}else t=s[r>>2]|0;s[r+60>>2]=e;s[r+44>>2]=r+120;s[r+48>>2]=1024;i=r+75|0;a[i>>0]=-1;if((t&8|0)==0?(s[f>>2]=e,s[f+4>>2]=21505,s[f+8>>2]=p,(ht(54,f|0)|0)==0):0)a[i>>0]=10;s[r+32>>2]=14;s[r+36>>2]=4;s[r+40>>2]=5;s[r+12>>2]=2;if(!(s[598]|0))s[r+76>>2]=-1;Tt(2416);i=s[603]|0;s[r+56>>2]=i;if(i)s[i+52>>2]=r;s[603]=r;bt(2416)}}else{s[(ui()|0)>>2]=22;r=0}d=m;return r|0}function Ai(e){e=e|0;var t=0,r=0,i=0;r=(bs(e,43)|0)==0;t=a[e>>0]|0;r=r?t<<24>>24!=114&1:2;i=(bs(e,120)|0)==0;r=i?r:r|128;e=(bs(e,101)|0)==0;e=e?r:r|524288;e=t<<24>>24==114?e:e|64;e=t<<24>>24==119?e|512:e;return(t<<24>>24==97?e|1024:e)|0}function Mi(e){e=e|0;return 0}function Ii(e){e=e|0;return}function Ri(e){e=e|0;var t=0,r=0;t=d;d=d+16|0;r=t;s[r>>2]=s[e+60>>2];e=bi(Et(6,r|0)|0)|0;d=t;return e|0}function Oi(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0;p=d;d=d+48|0;o=p+16|0;n=p;i=p+32|0;s[i>>2]=t;l=i+4|0;u=e+48|0;f=s[u>>2]|0;s[l>>2]=r-((f|0)!=0&1);c=e+44|0;s[i+8>>2]=s[c>>2];s[i+12>>2]=f;if(!(s[597]|0)){s[o>>2]=s[e+60>>2];s[o+4>>2]=i;s[o+8>>2]=2;i=bi(Ht(145,o|0)|0)|0}else{Oe(13,e|0);s[n>>2]=s[e+60>>2];s[n+4>>2]=i;s[n+8>>2]=2;i=bi(Ht(145,n|0)|0)|0;vt(0)}if((i|0)>=1){l=s[l>>2]|0;if(i>>>0>l>>>0){o=s[c>>2]|0;n=e+4|0;s[n>>2]=o;s[e+8>>2]=o+(i-l);if(!(s[u>>2]|0))i=r;else{s[n>>2]=o+1;a[t+(r+-1)>>0]=a[o>>0]|0;i=r}}}else{s[e>>2]=s[e>>2]|i&48^16;s[e+8>>2]=0;s[e+4>>2]=0}d=p;return i|0}function $i(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0;i=d;d=d+32|0;n=i;a=i+20|0;s[n>>2]=s[e+60>>2];s[n+4>>2]=0;s[n+8>>2]=t;s[n+12>>2]=a;s[n+16>>2]=r;if((bi(Dt(140,n|0)|0)|0)<0){s[a>>2]=-1;e=-1}else e=s[a>>2]|0;d=i;return e|0}function Fi(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0;b=d;d=d+48|0;f=b+16|0;p=b;a=b+32|0;m=e+28|0;i=s[m>>2]|0;s[a>>2]=i;h=e+20|0;i=(s[h>>2]|0)-i|0;s[a+4>>2]=i;s[a+8>>2]=t;s[a+12>>2]=r;c=e+60|0;u=e+44|0;t=2;i=i+r|0;while(1){if(!(s[597]|0)){s[f>>2]=s[c>>2];s[f+4>>2]=a;s[f+8>>2]=t;o=bi(Bt(146,f|0)|0)|0}else{Oe(14,e|0);s[p>>2]=s[c>>2];s[p+4>>2]=a;s[p+8>>2]=t;o=bi(Bt(146,p|0)|0)|0;vt(0)}if((i|0)==(o|0)){i=6;break}if((o|0)<0){i=8;break}i=i-o|0;n=s[a+4>>2]|0;if(o>>>0<=n>>>0){if((t|0)==2){s[m>>2]=(s[m>>2]|0)+o;l=n;t=2}else l=n}else{l=s[u>>2]|0;s[m>>2]=l;s[h>>2]=l;l=s[a+12>>2]|0;o=o-n|0;a=a+8|0;t=t+-1|0}s[a>>2]=(s[a>>2]|0)+o;s[a+4>>2]=l-o}if((i|0)==6){f=s[u>>2]|0;s[e+16>>2]=f+(s[e+48>>2]|0);e=f;s[m>>2]=e;s[h>>2]=e}else if((i|0)==8){s[e+16>>2]=0;s[m>>2]=0;s[h>>2]=0;s[e>>2]=s[e>>2]|32;if((t|0)==2)r=0;else r=r-(s[a+4>>2]|0)|0}d=b;return r|0}function Di(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0;n=d;d=d+80|0;i=n;s[e+36>>2]=4;if((s[e>>2]&64|0)==0?(s[i>>2]=s[e+60>>2],s[i+4>>2]=21505,s[i+8>>2]=n+12,(ht(54,i|0)|0)!=0):0)a[e+75>>0]=-1;i=Fi(e,t,r)|0;d=n;return i|0}function Ni(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0;a=e+84|0;n=s[a>>2]|0;o=r+256|0;i=ps(n,0,o)|0;i=(i|0)==0?o:i-n|0;r=i>>>0<r>>>0?i:r;Kc(t|0,n|0,r|0)|0;s[e+4>>2]=n+r;t=n+i|0;s[e+8>>2]=t;s[a>>2]=t;return r|0}function Li(e){e=e|0;var t=0,r=0;t=e+74|0;r=a[t>>0]|0;a[t>>0]=r+255|r;t=e+20|0;r=e+44|0;if((s[t>>2]|0)>>>0>(s[r>>2]|0)>>>0)Nu[s[e+36>>2]&15](e,0,0)|0;s[e+16>>2]=0;s[e+28>>2]=0;s[t>>2]=0;t=s[e>>2]|0;if(t&20){if(!(t&4))t=-1;else{s[e>>2]=t|32;t=-1}}else{t=s[r>>2]|0;s[e+8>>2]=t;s[e+4>>2]=t;t=0}return t|0}function ji(e){e=e|0;var t=0,r=0;t=e+74|0;r=a[t>>0]|0;a[t>>0]=r+255|r;t=s[e>>2]|0;if(!(t&8)){s[e+8>>2]=0;s[e+4>>2]=0;t=s[e+44>>2]|0;s[e+28>>2]=t;s[e+20>>2]=t;s[e+16>>2]=t+(s[e+48>>2]|0);t=0}else{s[e>>2]=t|32;t=-1}return t|0}function zi(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=r;if((s[e+8>>2]|0)==0?(Li(e)|0)!=0:0)t=-1;else if((Nu[s[e+32>>2]&15](e,t,1)|0)==1)t=n[t>>0]|0;else t=-1;d=r;return t|0}function Hi(e){e=e|0;var t=0,r=0,a=0;a=(s[e>>2]&1|0)!=0;if(!a){Tt(2416);r=s[e+52>>2]|0;t=e+56|0;if(r)s[r+56>>2]=s[t>>2];t=s[t>>2]|0;if(t)s[t+52>>2]=r;if((s[603]|0)==(e|0))s[603]=t;bt(2416)}t=Ui(e)|0;t=Wu[s[e+12>>2]&31](e)|0|t;r=s[e+92>>2]|0;if(r)zs(r);if(!a)zs(e);return t|0}function Bi(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Mi(e)|0)==0;e=(s[e>>2]|0)>>>5&1}else e=(s[e>>2]|0)>>>5&1;return e|0}function Ui(e){e=e|0;var t=0,r=0;do{if(e){if((s[e+76>>2]|0)<=-1){t=As(e)|0;break}r=(Mi(e)|0)==0;t=As(e)|0;if(!r)Ii(e)}else{if(!(s[660]|0))t=0;else t=Ui(s[660]|0)|0;Tt(2416);e=s[603]|0;if(e)do{if((s[e+76>>2]|0)>-1)r=Mi(e)|0;else r=0;if((s[e+20>>2]|0)>>>0>(s[e+28>>2]|0)>>>0)t=As(e)|0|t;if(r)Ii(e);e=s[e+56>>2]|0}while((e|0)!=0);bt(2416)}}while(0);return t|0}function Qi(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0;if((s[r+76>>2]|0)>-1)m=Mi(r)|0;else m=0;i=t+-1|0;if((t|0)<2){h=r+74|0;f=a[h>>0]|0;a[h>>0]=f+255|f;if(m)Ii(r);if(!i)a[e>>0]=0;else e=0}else{e:do{if(i){p=r+4|0;f=r+8|0;o=e;while(1){l=s[p>>2]|0;b=l;u=(s[f>>2]|0)-b|0;c=ps(l,10,u)|0;g=(c|0)==0;c=g?u:1-b+c|0;b=c>>>0<i>>>0;c=b?c:i;Kc(o|0,l|0,c|0)|0;l=s[p>>2]|0;u=l+c|0;s[p>>2]=u;t=o+c|0;d=i-c|0;if(!(g&b)){h=18;break e}if(u>>>0<(s[f>>2]|0)>>>0){c=c+1|0;s[p>>2]=l+c;l=n[u>>0]|0}else{i=zi(r)|0;if((i|0)<0)break;c=c+1|0;l=i}i=d+-1|0;o=o+c|0;a[t>>0]=l;if(!((i|0)!=0&(l&255|0)!=10)){t=o;h=18;break e}}if((t|0)!=(e|0)?(s[r>>2]&16|0)!=0:0)h=18;else e=0}else{t=e;h=18}}while(0);if((h|0)==18)if(!e)e=0;else a[t>>0]=0;if(m)Ii(r)}return e|0}function Wi(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0;n=d;d=d+32|0;i=n+16|0;r=n;if(ps(14909,a[t>>0]|0,4)|0){o=Ai(t)|0|32768;s[r>>2]=e;s[r+4>>2]=o;s[r+8>>2]=438;r=bi(Pt(5,r|0)|0)|0;if((r|0)>=0){e=Pi(r,t)|0;if(!e){s[i>>2]=r;Et(6,i|0)|0;e=0}}else e=0}else{s[(ui()|0)>>2]=22;e=0}d=n;return e|0}function Yi(e,t){e=e|0;t=t|0;return(rs(e,ys(e)|0,1,t)|0)+-1|0}function Vi(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0,o=0,l=0,c=0,u=0,d=0;c=re(r,t)|0;if((s[i+76>>2]|0)>-1)u=Mi(i)|0;else u=0;n=i+74|0;o=a[n>>0]|0;a[n>>0]=o+255|o;n=i+4|0;o=s[n>>2]|0;l=(s[i+8>>2]|0)-o|0;if((l|0)>0){l=l>>>0<c>>>0?l:c;Kc(e|0,o|0,l|0)|0;s[n>>2]=o+l;e=e+l|0;n=c-l|0}else n=c;e:do{if(!n)d=13;else{l=i+32|0;o=n;while(1){if(Li(i)|0){r=o;break}n=Nu[s[l>>2]&15](i,e,o)|0;if((n+1|0)>>>0<2){r=o;break}if((o|0)==(n|0)){d=13;break e}else{e=e+n|0;o=o-n|0}}if(u)Ii(i);r=((c-r|0)>>>0)/(t>>>0)|0}}while(0);if((d|0)==13)if(u)Ii(i);return r|0}function Gi(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;if((r|0)==1)t=t-(s[e+8>>2]|0)+(s[e+4>>2]|0)|0;i=e+20|0;a=e+28|0;if((s[i>>2]|0)>>>0>(s[a>>2]|0)>>>0?(Nu[s[e+36>>2]&15](e,0,0)|0,(s[i>>2]|0)==0):0)t=-1;else{s[e+16>>2]=0;s[a>>2]=0;s[i>>2]=0;if((Nu[s[e+40>>2]&15](e,t,r)|0)<0)t=-1;else{s[e+8>>2]=0;s[e+4>>2]=0;s[e>>2]=s[e>>2]&-17;t=0}}return t|0}function Ki(e,t,r){e=e|0;t=t|0;r=r|0;var a=0;if((s[e+76>>2]|0)>-1){a=(Mi(e)|0)==0;t=Gi(e,t,r)|0;if(!a)Ii(e)}else t=Gi(e,t,r)|0;return t|0}function Ji(e,t,r){e=e|0;t=t|0;r=r|0;return Ki(e,t,r)|0}function Xi(e){e=e|0;var t=0;if(!(s[e>>2]&128))t=1;else t=(s[e+20>>2]|0)>>>0>(s[e+28>>2]|0)>>>0?2:1;t=Nu[s[e+40>>2]&15](e,0,t)|0;if((t|0)>=0)t=t-(s[e+8>>2]|0)+(s[e+4>>2]|0)+(s[e+20>>2]|0)-(s[e+28>>2]|0)|0;return t|0}function Zi(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Mi(e)|0)==0;e=Xi(e)|0}else e=Xi(e)|0;return e|0}function es(e){e=e|0;return Zi(e)|0}function ts(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0;i=r+16|0;n=s[i>>2]|0;if(!n){if(!(ji(r)|0)){n=s[i>>2]|0;o=4}else i=0}else o=4;e:do{if((o|0)==4){l=r+20|0;o=s[l>>2]|0;if((n-o|0)>>>0<t>>>0){i=Nu[s[r+36>>2]&15](r,e,t)|0;break}t:do{if((a[r+75>>0]|0)>-1){i=t;while(1){if(!i){n=o;i=0;break t}n=i+-1|0;if((a[e+n>>0]|0)==10)break;else i=n}if((Nu[s[r+36>>2]&15](r,e,i)|0)>>>0<i>>>0)break e;t=t-i|0;e=e+i|0;n=s[l>>2]|0}else{n=o;i=0}}while(0);Kc(n|0,e|0,t|0)|0;s[l>>2]=(s[l>>2]|0)+t;i=i+t|0}}while(0);return i|0}function rs(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0;i=re(r,t)|0;if((s[a+76>>2]|0)>-1){n=(Mi(a)|0)==0;e=ts(e,i,a)|0;if(!n)Ii(a)}else e=ts(e,i,a)|0;if((e|0)!=(i|0))r=(e>>>0)/(t>>>0)|0;return r|0}function as(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Mi(e)|0)==0;Gi(e,0,0)|0;s[e>>2]=s[e>>2]&-33;if(!t)Ii(e)}else{Gi(e,0,0)|0;s[e>>2]=s[e>>2]&-33}return}function is(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;a=d;d=d+16|0;i=a;s[i>>2]=r;r=cs(e,t,i)|0;d=a;return r|0}function ss(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0;l=d;d=d+16|0;a=l;i=js(240)|0;do{if(i){s[a>>2]=s[r>>2];a=ls(i,240,t,a)|0;if(a>>>0<240){t=Bs(i,a+1|0)|0;s[e>>2]=(t|0)!=0?t:i;break}zs(i);if((a|0)>=0?(o=a+1|0,n=js(o)|0,s[e>>2]=n,(n|0)!=0):0)a=ls(n,o,t,r)|0;else a=-1}else a=-1}while(0);d=l;return a|0}function ns(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0;v=d;d=d+224|0;m=v+80|0;g=v+96|0;b=v;h=v+136|0;i=g;n=i+40|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(n|0));s[m>>2]=s[r>>2];if((Ms(0,t,m,b,g)|0)<0)r=-1;else{if((s[e+76>>2]|0)>-1)p=Mi(e)|0;else p=0;r=s[e>>2]|0;f=r&32;if((a[e+74>>0]|0)<1)s[e>>2]=r&-33;r=e+48|0;if(!(s[r>>2]|0)){n=e+44|0;o=s[n>>2]|0;s[n>>2]=h;l=e+28|0;s[l>>2]=h;c=e+20|0;s[c>>2]=h;s[r>>2]=80;u=e+16|0;s[u>>2]=h+80;i=Ms(e,t,m,b,g)|0;if(o){Nu[s[e+36>>2]&15](e,0,0)|0;i=(s[c>>2]|0)==0?-1:i;s[n>>2]=o;s[r>>2]=0;s[u>>2]=0;s[l>>2]=0;s[c>>2]=0}}else i=Ms(e,t,m,b,g)|0;r=s[e>>2]|0;s[e>>2]=r|f;if(p)Ii(e);r=(r&32|0)==0?i:-1}d=v;return r|0}function os(e,t,r){e=e|0;t=t|0;r=r|0;var o=0,l=0,p=0,f=0,m=0,h=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,R=0,O=0,$=0,F=0,D=0,N=0,L=0,j=0,z=0,H=0;z=d;d=d+304|0;R=z+16|0;$=z+8|0;O=z+33|0;F=z;x=z+32|0;if((s[e+76>>2]|0)>-1)j=Mi(e)|0;else j=0;o=a[t>>0]|0;e:do{if(o<<24>>24){D=e+4|0;N=e+100|0;M=e+108|0;C=e+8|0;q=O+10|0;T=O+33|0;E=$+4|0;P=O+46|0;A=O+94|0;p=o;o=0;f=t;v=0;l=0;t=0;t:while(1){r:do{if(!(ci(p&255)|0)){p=(a[f>>0]|0)==37;a:do{if(p){b=f+1|0;m=a[b>>0]|0;i:do{switch(m<<24>>24){case 37:break a;case 42:{S=0;m=f+2|0;break}default:{m=(m&255)+-48|0;if(m>>>0<10?(a[f+2>>0]|0)==36:0){s[R>>2]=s[r>>2];while(1){S=(s[R>>2]|0)+(4-1)&~(4-1);p=s[S>>2]|0;s[R>>2]=S+4;if(m>>>0>1)m=m+-1|0;else break}S=p;m=f+3|0;break i}m=(s[r>>2]|0)+(4-1)&~(4-1);S=s[m>>2]|0;s[r>>2]=m+4;m=b}}}while(0);p=a[m>>0]|0;f=p&255;if((f+-48|0)>>>0<10){p=0;while(1){b=(p*10|0)+-48+f|0;m=m+1|0;p=a[m>>0]|0;f=p&255;if((f+-48|0)>>>0>=10)break;else p=b}}else b=0;if(p<<24>>24==109){m=m+1|0;g=a[m>>0]|0;p=(S|0)!=0&1;l=0;t=0}else{g=p;p=0}f=m+1|0;switch(g&255|0){case 104:{_=(a[f>>0]|0)==104;f=_?m+2|0:f;m=_?-2:-1;break}case 108:{_=(a[f>>0]|0)==108;f=_?m+2|0:f;m=_?3:1;break}case 106:{m=3;break}case 116:case 122:{m=1;break}case 76:{m=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{f=m;m=0;break}default:{L=152;break t}}g=n[f>>0]|0;w=(g&47|0)==3;g=w?g|32:g;w=w?1:m;switch(g|0){case 99:{_=v;y=(b|0)<1?1:b;break}case 91:{_=v;y=b;break}case 110:{if(!S){m=v;break r}switch(w|0){case-2:{a[S>>0]=v;m=v;break r}case-1:{i[S>>1]=v;m=v;break r}case 0:{s[S>>2]=v;m=v;break r}case 1:{s[S>>2]=v;m=v;break r}case 3:{m=S;s[m>>2]=v;s[m+4>>2]=((v|0)<0)<<31>>31;m=v;break r}default:{m=v;break r}}}default:{mi(e,0);do{m=s[D>>2]|0;if(m>>>0<(s[N>>2]|0)>>>0){s[D>>2]=m+1;m=n[m>>0]|0}else m=hi(e)|0}while((ci(m)|0)!=0);m=s[D>>2]|0;if(s[N>>2]|0){m=m+-1|0;s[D>>2]=m}_=(s[M>>2]|0)+v+m-(s[C>>2]|0)|0;y=b}}mi(e,y);m=s[D>>2]|0;b=s[N>>2]|0;if(m>>>0<b>>>0)s[D>>2]=m+1;else{if((hi(e)|0)<0){L=152;break t}b=s[N>>2]|0}if(b)s[D>>2]=(s[D>>2]|0)+-1;i:do{switch(g|0){case 91:case 99:case 115:{k=(g|0)==99;s:do{if((g&239|0)==99){Wc(O|0,-1,257)|0;a[O>>0]=0;if((g|0)==115){a[T>>0]=0;a[q>>0]=0;a[q+1>>0]=0;a[q+2>>0]=0;a[q+3>>0]=0;a[q+4>>0]=0}}else{H=f+1|0;v=(a[H>>0]|0)==94;m=v&1;g=v?H:f;f=v?f+2|0:H;Wc(O|0,v&1|0,257)|0;a[O>>0]=0;switch(a[f>>0]|0){case 45:{v=(m^1)&255;a[P>>0]=v;f=g+2|0;break}case 93:{v=(m^1)&255;a[A>>0]=v;f=g+2|0;break}default:v=(m^1)&255}while(1){m=a[f>>0]|0;n:do{switch(m<<24>>24){case 0:{L=152;break t}case 93:break s;case 45:{g=f+1|0;m=a[g>>0]|0;switch(m<<24>>24){case 93:case 0:{m=45;break n}default:{}}f=a[f+-1>>0]|0;if((f&255)<(m&255)){f=f&255;do{f=f+1|0;a[O+f>>0]=v;m=a[g>>0]|0}while((f|0)<(m&255|0));f=g}else f=g;break}default:{}}}while(0);a[O+((m&255)+1)>>0]=v;f=f+1|0}}}while(0);g=k?y+1|0:31;v=(w|0)==1;w=(p|0)!=0;s:do{if(v){if(w){t=js(g<<2)|0;if(!t){l=0;L=152;break t}}else t=S;s[$>>2]=0;s[E>>2]=0;l=0;n:while(1){b=(t|0)==0;do{o:while(1){m=s[D>>2]|0;if(m>>>0<(s[N>>2]|0)>>>0){s[D>>2]=m+1;m=n[m>>0]|0}else m=hi(e)|0;if(!(a[O+(m+1)>>0]|0))break n;a[x>>0]=m;switch(Ci(F,x,1,$)|0){case-1:{l=0;L=152;break t}case-2:break;default:break o}}if(!b){s[t+(l<<2)>>2]=s[F>>2];l=l+1|0}}while(!(w&(l|0)==(g|0)));l=g<<1|1;m=Bs(t,l<<2)|0;if(!m){l=0;L=152;break t}H=g;g=l;t=m;l=H}if(!(qi($)|0)){l=0;L=152;break t}else{b=l;l=0}}else{if(w){l=js(g)|0;if(!l){l=0;t=0;L=152;break t}else m=0;while(1){do{t=s[D>>2]|0;if(t>>>0<(s[N>>2]|0)>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if(!(a[O+(t+1)>>0]|0)){b=m;t=0;break s}a[l+m>>0]=t;m=m+1|0}while((m|0)!=(g|0));t=g<<1|1;m=Bs(l,t)|0;if(!m){t=0;L=152;break t}else{H=g;g=t;l=m;m=H}}}if(!S){l=b;while(1){t=s[D>>2]|0;if(t>>>0<l>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if(!(a[O+(t+1)>>0]|0)){b=0;l=0;t=0;break s}l=s[N>>2]|0}}else{l=0;while(1){t=s[D>>2]|0;if(t>>>0<b>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=hi(e)|0;if(!(a[O+(t+1)>>0]|0)){b=l;l=S;t=0;break s}a[S+l>>0]=t;b=s[N>>2]|0;l=l+1|0}}}}while(0);m=s[D>>2]|0;if(s[N>>2]|0){m=m+-1|0;s[D>>2]=m}m=m-(s[C>>2]|0)+(s[M>>2]|0)|0;if(!m)break t;if(!((m|0)==(y|0)|k^1))break t;do{if(w)if(v){s[S>>2]=t;break}else{s[S>>2]=l;break}}while(0);if(!k){if(t)s[t+(b<<2)>>2]=0;if(!l){l=0;break i}a[l+b>>0]=0}break}case 120:case 88:case 112:{m=16;L=134;break}case 111:{m=8;L=134;break}case 117:case 100:{m=10;L=134;break}case 105:{m=0;L=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{h=+pi(e,w,0);if((s[M>>2]|0)==((s[C>>2]|0)-(s[D>>2]|0)|0))break t;if(S)switch(w|0){case 0:{c[S>>2]=h;break i}case 1:{u[S>>3]=h;break i}case 2:{u[S>>3]=h;break i}default:break i}break}default:{}}}while(0);i:do{if((L|0)==134){L=0;m=fi(e,m,0,-1,-1)|0;if((s[M>>2]|0)==((s[C>>2]|0)-(s[D>>2]|0)|0))break t;if((S|0)!=0&(g|0)==112){s[S>>2]=m;break}if(S)switch(w|0){case-2:{a[S>>0]=m;break i}case-1:{i[S>>1]=m;break i}case 0:{s[S>>2]=m;break i}case 1:{s[S>>2]=m;break i}case 3:{H=S;s[H>>2]=m;s[H+4>>2]=I;break i}default:break i}}}while(0);o=((S|0)!=0&1)+o|0;m=(s[M>>2]|0)+_+(s[D>>2]|0)-(s[C>>2]|0)|0;break r}}while(0);f=f+(p&1)|0;mi(e,0);p=s[D>>2]|0;if(p>>>0<(s[N>>2]|0)>>>0){s[D>>2]=p+1;p=n[p>>0]|0}else p=hi(e)|0;if((p|0)!=(n[f>>0]|0)){L=21;break t}m=v+1|0}else{while(1){p=f+1|0;if(!(ci(n[p>>0]|0)|0))break;else f=p}mi(e,0);do{p=s[D>>2]|0;if(p>>>0<(s[N>>2]|0)>>>0){s[D>>2]=p+1;p=n[p>>0]|0}else p=hi(e)|0}while((ci(p)|0)!=0);p=s[D>>2]|0;if(s[N>>2]|0){p=p+-1|0;s[D>>2]=p}m=(s[M>>2]|0)+v+p-(s[C>>2]|0)|0}}while(0);f=f+1|0;p=a[f>>0]|0;if(!(p<<24>>24))break e;else v=m}if((L|0)==21){if(s[N>>2]|0)s[D>>2]=(s[D>>2]|0)+-1;if((o|0)!=0|(p|0)>-1)break;else{o=0;L=153}}else if((L|0)==152)if(!o){o=p;L=153}if((L|0)==153){p=o;o=-1}if(p){zs(l);zs(t)}}else o=0}while(0);if(j)Ii(e);d=z;return o|0}function ls(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0,o=0,l=0,c=0,u=0,p=0,f=0;f=d;d=d+128|0;n=f+112|0;p=f;o=p;l=2684;c=o+112|0;do{s[o>>2]=s[l>>2];o=o+4|0;l=l+4|0}while((o|0)<(c|0));if((t+-1|0)>>>0>2147483646){if(!t){t=1;u=4}else{s[(ui()|0)>>2]=75;t=-1}}else{n=e;u=4}if((u|0)==4){u=-2-n|0;u=t>>>0>u>>>0?u:t;s[p+48>>2]=u;e=p+20|0;s[e>>2]=n;s[p+44>>2]=n;t=n+u|0;n=p+16|0;s[n>>2]=t;s[p+28>>2]=t;t=ns(p,r,i)|0;if(u){r=s[e>>2]|0;a[r+(((r|0)==(s[n>>2]|0))<<31>>31)>>0]=0}}d=f;return t|0}function cs(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0;n=d;d=d+112|0;a=n;i=a;o=i+112|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(o|0));s[a+32>>2]=15;s[a+44>>2]=e;s[a+76>>2]=-1;s[a+84>>2]=e;o=os(a,t,r)|0;d=n;return o|0}function us(e){e=e|0;var t=0,r=0,i=0,s=0;while(1){t=e+1|0;if(!(ci(a[e>>0]|0)|0))break;else e=t}r=a[e>>0]|0;switch(r<<24>>24|0){case 45:{i=1;s=5;break}case 43:{i=0;s=5;break}default:i=0}if((s|0)==5){e=t;r=a[t>>0]|0}t=(r<<24>>24)+-48|0;if(t>>>0<10){r=e;e=0;do{r=r+1|0;e=(e*10|0)-t|0;t=(a[r>>0]|0)+-48|0}while(t>>>0<10)}else e=0;return((i|0)!=0?e:0-e|0)|0}function ds(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0;g=d;d=d+208|0;m=g+8|0;h=g;i=re(r,t)|0;f=h;s[f>>2]=1;s[f+4>>2]=0;if(i){l=i-r|0;s[m+4>>2]=r;s[m>>2]=r;n=r;t=r;o=2;while(1){t=t+r+n|0;s[m+(o<<2)>>2]=t;if(t>>>0<i>>>0){f=n;n=t;o=o+1|0;t=f}else break}f=0-r|0;c=e+l|0;p=h+4|0;if((l|0)>0){l=c;i=1;o=1;while(1){do{if((i&3|0)==3){Rs(e,r,a,o,m);u=s[p>>2]|0;t=u<<30|(s[h>>2]|0)>>>2;s[h>>2]=t;s[p>>2]=u>>>2;o=o+2|0}else{t=o+-1|0;if((s[m+(t<<2)>>2]|0)>>>0<(l-e|0)>>>0)Rs(e,r,a,o,m);else Os(e,r,a,h,o,0,m);if((o|0)==1){t=s[h>>2]|0;s[p>>2]=t>>>31|s[p>>2]<<1;t=t<<1;s[h>>2]=t;o=0;break}if(t>>>0>31){i=s[h>>2]|0;s[p>>2]=i;s[h>>2]=0;t=o+-33|0;n=0}else{i=s[p>>2]|0;n=s[h>>2]|0}s[p>>2]=n>>>(32-t|0)|i<<t;t=n<<t;s[h>>2]=t;o=1}}while(0);i=t|1;s[h>>2]=i;t=e+r|0;if(t>>>0>=c>>>0){i=t;break}else e=t}}else{i=e;o=1}Os(i,r,a,h,o,0,m);u=h+4|0;t=s[h>>2]|0;if(!((o|0)==1&(t|0)==1&(s[u>>2]|0)==0)){n=i;while(1){if((o|0)<2){i=t+-1|0;do{if(i){if(!(i&1)){l=i;i=0;do{i=i+1|0;l=l>>>1}while((l&1|0)==0);if(!i)b=24}else b=24;if((b|0)==24){b=0;c=s[p>>2]|0;if(!c){i=64;b=30;break}if(!(c&1)){l=c;i=0}else{e=0;l=c;i=0;break}while(1){e=i+1|0;l=l>>>1;if(l&1){l=e;break}else i=e}if(!l){e=0;l=c;i=0;break}else i=i+33|0}if(i>>>0>31)b=30;else{e=i;l=s[p>>2]|0}}else{i=32;b=30}}while(0);if((b|0)==30){b=0;t=s[p>>2]|0;s[h>>2]=t;s[p>>2]=0;e=i+-32|0;l=0}s[h>>2]=l<<32-e|t>>>e;s[p>>2]=l>>>e;n=n+f|0;i=i+o|0}else{e=t>>>30;c=e|s[p>>2]<<2;i=o+-2|0;s[h>>2]=(t<<1&2147483646|e<<31)^3;s[p>>2]=c>>>1;Os(n+(0-((s[m+(i<<2)>>2]|0)+r))|0,r,a,h,o+-1|0,1,m);c=s[h>>2]|0;s[p>>2]=c>>>31|s[p>>2]<<1;s[h>>2]=c<<1|1;n=n+f|0;Os(n,r,a,h,i,1,m)}t=s[h>>2]|0;if((i|0)==1&(t|0)==1&(s[u>>2]|0)==0)break;else o=i}}}d=g;return}function ps(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0;o=t&255;i=(r|0)!=0;e:do{if(i&(e&3|0)!=0){n=t&255;while(1){if((a[e>>0]|0)==n<<24>>24){l=6;break e}e=e+1|0;r=r+-1|0;i=(r|0)!=0;if(!(i&(e&3|0)!=0)){l=5;break}}}else l=5}while(0);if((l|0)==5)if(i)l=6;else r=0;e:do{if((l|0)==6){n=t&255;if((a[e>>0]|0)!=n<<24>>24){i=re(o,16843009)|0;t:do{if(r>>>0>3)while(1){o=s[e>>2]^i;if((o&-2139062144^-2139062144)&o+-16843009)break;e=e+4|0;r=r+-4|0;if(r>>>0<=3){l=11;break t}}else l=11}while(0);if((l|0)==11)if(!r){r=0;break}while(1){if((a[e>>0]|0)==n<<24>>24)break e;e=e+1|0;r=r+-1|0;if(!r){r=0;break}}}}}while(0);return((r|0)!=0?e:0)|0}function fs(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;i=t&255;do{if(!r){t=0;break}r=r+-1|0;t=e+r|0}while((a[t>>0]|0)!=i<<24>>24);return t|0}function ms(e,t){e=e|0;t=t|0;var r=0,i=0;r=t;e:do{if(!((r^e)&3)){if(r&3)do{r=a[t>>0]|0;a[e>>0]=r;if(!(r<<24>>24))break e;t=t+1|0;e=e+1|0}while((t&3|0)!=0);r=s[t>>2]|0;if(!((r&-2139062144^-2139062144)&r+-16843009)){i=e;while(1){t=t+4|0;e=i+4|0;s[i>>2]=r;r=s[t>>2]|0;if((r&-2139062144^-2139062144)&r+-16843009)break;else i=e}}i=8}else i=8}while(0);if((i|0)==8){i=a[t>>0]|0;a[e>>0]=i;if(i<<24>>24)do{t=t+1|0;e=e+1|0;i=a[t>>0]|0;a[e>>0]=i}while(i<<24>>24!=0)}return e|0}function hs(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0;n=t;do{if(!((n^e)&3)){i=(r|0)!=0;e:do{if(i&(n&3|0)!=0)while(1){n=a[t>>0]|0;a[e>>0]=n;if(!(n<<24>>24))break e;r=r+-1|0;t=t+1|0;e=e+1|0;i=(r|0)!=0;if(!(i&(t&3|0)!=0)){o=5;break}}else o=5}while(0);if((o|0)==5)if(!i){r=0;break}if(a[t>>0]|0){e:do{if(r>>>0>3)do{i=s[t>>2]|0;if((i&-2139062144^-2139062144)&i+-16843009)break e;s[e>>2]=i;r=r+-4|0;t=t+4|0;e=e+4|0}while(r>>>0>3)}while(0);o=11}}else o=11}while(0);e:do{if((o|0)==11)if(!r)r=0;else while(1){o=a[t>>0]|0;a[e>>0]=o;if(!(o<<24>>24))break e;r=r+-1|0;e=e+1|0;if(!r){r=0;break}else t=t+1|0}}while(0);Wc(e|0,0,r|0)|0;return e|0}function bs(e,t){e=e|0;t=t|0;e=gs(e,t)|0;return((a[e>>0]|0)==(t&255)<<24>>24?e:0)|0}function gs(e,t){e=e|0;t=t|0;var r=0,i=0,n=0;i=t&255;e:do{if(!i)e=e+(ys(e)|0)|0;else{if(e&3){r=t&255;do{n=a[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==r<<24>>24)break e;e=e+1|0}while((e&3|0)!=0)}i=re(i,16843009)|0;r=s[e>>2]|0;t:do{if(!((r&-2139062144^-2139062144)&r+-16843009))do{n=r^i;if((n&-2139062144^-2139062144)&n+-16843009)break t;e=e+4|0;r=s[e>>2]|0}while(((r&-2139062144^-2139062144)&r+-16843009|0)==0)}while(0);r=t&255;while(1){n=a[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==r<<24>>24)break;else e=e+1|0}}}while(0);return e|0}function vs(e,t){e=e|0;t=t|0;ms(e,t)|0;return e|0}function ws(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0;n=d;d=d+32|0;i=n;r=a[t>>0]|0;if(r<<24>>24!=0?(a[t+1>>0]|0)!=0:0){s[i>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;s[i+20>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;do{o=i+(((r&255)>>>5&255)<<2)|0;s[o>>2]=s[o>>2]|1<<(r&31);t=t+1|0;r=a[t>>0]|0}while(r<<24>>24!=0);t=a[e>>0]|0;e:do{if(!(t<<24>>24))r=e;else{r=e;do{if(s[i+(((t&255)>>>5&255)<<2)>>2]&1<<(t&31))break e;r=r+1|0;t=a[r>>0]|0}while(t<<24>>24!=0)}}while(0);r=r-e|0}else r=(gs(e,r<<24>>24)|0)-e|0;d=n;return r|0}function ks(e){e=e|0;var t=0,r=0;r=(ys(e)|0)+1|0;t=js(r)|0;if(!t)t=0;else Kc(t|0,e|0,r|0)|0;return t|0}function ys(e){e=e|0;var t=0,r=0,i=0;i=e;e:do{if(!(i&3))r=4;else{t=e;e=i;while(1){if(!(a[t>>0]|0))break e;t=t+1|0;e=t;if(!(e&3)){e=t;r=4;break}}}}while(0);if((r|0)==4){while(1){t=s[e>>2]|0;if(!((t&-2139062144^-2139062144)&t+-16843009))e=e+4|0;else break}if((t&255)<<24>>24)do{e=e+1|0}while((a[e>>0]|0)!=0)}return e-i|0}function _s(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,s=0,n=0;i=e+(ys(e)|0)|0;e:do{if(r)while(1){s=a[t>>0]|0;if(!(s<<24>>24))break e;r=r+-1|0;n=i+1|0;a[i>>0]=s;if(!r){i=n;break}else{t=t+1|0;i=n}}}while(0);a[i>>0]=0;return e|0}function Ss(e,t,r){e=e|0;t=t|0;r=r|0;hs(e,t,r)|0;return e|0}function xs(e,t){e=e|0;t=t|0;return fs(e,t,(ys(e)|0)+1|0)|0}function Cs(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0;o=d;d=d+32|0;n=o;s[n>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;i=a[t>>0]|0;do{if(!(i<<24>>24))t=0;else{if(!(a[t+1>>0]|0)){t=e;while(1){if((a[t>>0]|0)==i<<24>>24)t=t+1|0;else break}t=t-e|0;break}else{r=t;t=i}do{i=n+(((t&255)>>>5&255)<<2)|0;s[i>>2]=s[i>>2]|1<<(t&31);r=r+1|0;t=a[r>>0]|0}while(t<<24>>24!=0);r=a[e>>0]|0;e:do{if(!(r<<24>>24))t=e;else{t=e;do{if(!(s[n+(((r&255)>>>5&255)<<2)>>2]&1<<(r&31)))break e;t=t+1|0;r=a[t>>0]|0}while(r<<24>>24!=0)}}while(0);t=t-e|0}}while(0);d=o;return t|0}function qs(e,t){e=e|0;t=t|0;var r=0,i=0;if(!e){e=s[699]|0;if(!e)e=0;else{i=e;r=3}}else{i=e;r=3}do{if((r|0)==3){r=Cs(i,t)|0;e=i+r|0;if(!(a[e>>0]|0)){s[699]=0;e=0;break}r=(ws(e,t)|0)+r|0;t=i+r|0;s[699]=t;if(!(a[t>>0]|0)){s[699]=0;break}else{s[699]=i+(r+1);a[t>>0]=0;break}}}while(0);return e|0}function Ts(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,o=0,l=0,c=0;l=e+4|0;r=s[l>>2]|0;c=e+100|0;if(r>>>0<(s[c>>2]|0)>>>0){s[l>>2]=r+1;r=n[r>>0]|0}else r=hi(e)|0;switch(r|0){case 43:case 45:{a=(r|0)==45&1;r=s[l>>2]|0;if(r>>>0<(s[c>>2]|0)>>>0){s[l>>2]=r+1;r=n[r>>0]|0}else r=hi(e)|0;if((t|0)!=0&(r+-48|0)>>>0>9?(s[c>>2]|0)!=0:0){s[l>>2]=(s[l>>2]|0)+-1;o=a}else o=a;break}default:o=0}if((r+-48|0)>>>0>9){if(!(s[c>>2]|0)){a=-2147483648;r=0}else{s[l>>2]=(s[l>>2]|0)+-1;a=-2147483648;r=0}}else{a=0;do{a=r+-48+(a*10|0)|0;r=s[l>>2]|0;if(r>>>0<(s[c>>2]|0)>>>0){s[l>>2]=r+1;r=n[r>>0]|0}else r=hi(e)|0}while((r+-48|0)>>>0<10&(a|0)<214748364);t=((a|0)<0)<<31>>31;if((r+-48|0)>>>0<10){do{t=ru(a|0,t|0,10,0)|0;a=I;r=Vc(r|0,((r|0)<0)<<31>>31|0,-48,-1)|0;a=Vc(r|0,I|0,t|0,a|0)|0;t=I;r=s[l>>2]|0;if(r>>>0<(s[c>>2]|0)>>>0){s[l>>2]=r+1;r=n[r>>0]|0}else r=hi(e)|0}while((r+-48|0)>>>0<10&((t|0)<21474836|(t|0)==21474836&a>>>0<2061584302));i=a}else i=a;if((r+-48|0)>>>0<10)do{r=s[l>>2]|0;if(r>>>0<(s[c>>2]|0)>>>0){s[l>>2]=r+1;r=n[r>>0]|0}else r=hi(e)|0}while((r+-48|0)>>>0<10);if(s[c>>2]|0)s[l>>2]=(s[l>>2]|0)+-1;e=(o|0)!=0;r=Qc(0,0,i|0,t|0)|0;a=e?I:t;r=e?r:i}I=a;return r|0}function Es(e){e=e|0;if(!(s[e+68>>2]|0))Ii(e);return}function Ps(e){e=e|0;if(!(s[e+68>>2]|0))Ii(e);return}function As(e){e=e|0;var t=0,r=0,a=0,i=0,n=0,o=0;t=e+20|0;n=e+28|0;if((s[t>>2]|0)>>>0>(s[n>>2]|0)>>>0?(Nu[s[e+36>>2]&15](e,0,0)|0,(s[t>>2]|0)==0):0)t=-1;else{o=e+4|0;r=s[o>>2]|0;a=e+8|0;i=s[a>>2]|0;if(r>>>0<i>>>0)Nu[s[e+40>>2]&15](e,r-i|0,1)|0;s[e+16>>2]=0;s[n>>2]=0;s[t>>2]=0;s[a>>2]=0;s[o>>2]=0;t=0}return t|0}function Ms(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,m=0,h=0,b=0.0,g=0,v=0,w=0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,R=0,O=0,$=0,F=0,D=0,N=0,L=0,j=0,z=0,H=0,B=0,U=0,Q=0,W=0,Y=0,V=0,G=0,K=0,J=0,X=0,Z=0,ee=0,te=0,ae=0,ie=0,se=0,ne=0,oe=0;oe=d;d=d+624|0;te=oe+24|0;ie=oe+16|0;ae=oe+588|0;K=oe+576|0;ee=oe;Y=oe+536|0;ne=oe+8|0;se=oe+528|0;N=(e|0)!=0;L=Y+40|0;W=L;Y=Y+39|0;V=ne+4|0;G=K+12|0;K=K+11|0;J=ae;X=G;Z=X-J|0;j=-2-J|0;z=X+2|0;H=te+288|0;B=ae+9|0;U=B;Q=ae+8|0;c=0;_=t;p=0;t=0;e:while(1){do{if((c|0)>-1)if((p|0)>(2147483647-c|0)){s[(ui()|0)>>2]=75;c=-1;break}else{c=p+c|0;break}}while(0);p=a[_>>0]|0;if(!(p<<24>>24)){D=245;break}else m=_;t:while(1){switch(p<<24>>24){case 37:{p=m;D=9;break t}case 0:{p=m;break t}default:{}}F=m+1|0;p=a[F>>0]|0;m=F}t:do{if((D|0)==9)while(1){D=0;if((a[p+1>>0]|0)!=37)break t;m=m+1|0;p=p+2|0;if((a[p>>0]|0)==37)D=9;else break}}while(0);x=m-_|0;if(N?(s[e>>2]&32|0)==0:0)ts(_,x,e)|0;if((m|0)!=(_|0)){_=p;p=x;continue}g=p+1|0;m=a[g>>0]|0;h=(m<<24>>24)+-48|0;if(h>>>0<10){F=(a[p+2>>0]|0)==36;g=F?p+3|0:g;m=a[g>>0]|0;k=F?h:-1;t=F?1:t}else k=-1;p=m<<24>>24;t:do{if((p&-32|0)==32){h=0;while(1){if(!(1<<p+-32&75913)){v=h;p=g;break t}h=1<<(m<<24>>24)+-32|h;g=g+1|0;m=a[g>>0]|0;p=m<<24>>24;if((p&-32|0)!=32){v=h;p=g;break}}}else{v=0;p=g}}while(0);do{if(m<<24>>24==42){h=p+1|0;m=(a[h>>0]|0)+-48|0;if(m>>>0<10?(a[p+2>>0]|0)==36:0){s[l+(m<<2)>>2]=10;t=1;p=p+3|0;m=s[o+((a[h>>0]|0)+-48<<3)>>2]|0}else{if(t){c=-1;break e}if(!N){S=v;p=h;t=0;F=0;break}t=(s[r>>2]|0)+(4-1)&~(4-1);m=s[t>>2]|0;s[r>>2]=t+4;t=0;p=h}if((m|0)<0){S=v|8192;F=0-m|0}else{S=v;F=m}}else{h=(m<<24>>24)+-48|0;if(h>>>0<10){m=0;do{m=(m*10|0)+h|0;p=p+1|0;h=(a[p>>0]|0)+-48|0}while(h>>>0<10);if((m|0)<0){c=-1;break e}else{S=v;F=m}}else{S=v;F=0}}}while(0);t:do{if((a[p>>0]|0)==46){h=p+1|0;m=a[h>>0]|0;if(m<<24>>24!=42){g=(m<<24>>24)+-48|0;if(g>>>0<10){p=h;m=0}else{p=h;g=0;break}while(1){m=(m*10|0)+g|0;p=p+1|0;g=(a[p>>0]|0)+-48|0;if(g>>>0>=10){g=m;break t}}}h=p+2|0;m=(a[h>>0]|0)+-48|0;if(m>>>0<10?(a[p+3>>0]|0)==36:0){s[l+(m<<2)>>2]=10;p=p+4|0;g=s[o+((a[h>>0]|0)+-48<<3)>>2]|0;break}if(t){c=-1;break e}if(N){p=(s[r>>2]|0)+(4-1)&~(4-1);g=s[p>>2]|0;s[r>>2]=p+4;p=h}else{p=h;g=0}}else g=-1}while(0);w=0;while(1){m=(a[p>>0]|0)+-65|0;if(m>>>0>57){c=-1;break e}h=p+1|0;m=a[15953+(w*58|0)+m>>0]|0;v=m&255;if((v+-1|0)>>>0<8){p=h;w=v}else{$=h;break}}if(!(m<<24>>24)){c=-1;break}h=(k|0)>-1;do{if(m<<24>>24==19){if(h){c=-1;break e}else D=52}else{if(h){s[l+(k<<2)>>2]=v;R=o+(k<<3)|0;O=s[R+4>>2]|0;D=ee;s[D>>2]=s[R>>2];s[D+4>>2]=O;D=52;break}if(!N){c=0;break e}Ds(ee,v,r)}}while(0);if((D|0)==52?(D=0,!N):0){_=$;p=x;continue}k=a[p>>0]|0;k=(w|0)!=0&(k&15|0)==3?k&-33:k;h=S&-65537;O=(S&8192|0)==0?S:h;t:do{switch(k|0){case 110:switch(w|0){case 0:{s[s[ee>>2]>>2]=c;_=$;p=x;continue e}case 1:{s[s[ee>>2]>>2]=c;_=$;p=x;continue e}case 2:{_=s[ee>>2]|0;s[_>>2]=c;s[_+4>>2]=((c|0)<0)<<31>>31;_=$;p=x;continue e}case 3:{i[s[ee>>2]>>1]=c;_=$;p=x;continue e}case 4:{a[s[ee>>2]>>0]=c;_=$;p=x;continue e}case 6:{s[s[ee>>2]>>2]=c;_=$;p=x;continue e}case 7:{_=s[ee>>2]|0;s[_>>2]=c;s[_+4>>2]=((c|0)<0)<<31>>31;_=$;p=x;continue e}default:{_=$;p=x;continue e}}case 112:{w=O|8;g=g>>>0>8?g:8;k=120;D=64;break}case 88:case 120:{w=O;D=64;break}case 111:{h=ee;m=s[h>>2]|0;h=s[h+4>>2]|0;if((m|0)==0&(h|0)==0)p=L;else{p=L;do{p=p+-1|0;a[p>>0]=m&7|48;m=Gc(m|0,h|0,3)|0;h=I}while(!((m|0)==0&(h|0)==0))}if(!(O&8)){m=O;w=0;v=16433;D=77}else{w=W-p+1|0;m=O;g=(g|0)<(w|0)?w:g;w=0;v=16433;D=77}break}case 105:case 100:{m=ee;p=s[m>>2]|0;m=s[m+4>>2]|0;if((m|0)<0){p=Qc(0,0,p|0,m|0)|0;m=I;h=ee;s[h>>2]=p;s[h+4>>2]=m;h=1;v=16433;D=76;break t}if(!(O&2048)){v=O&1;h=v;v=(v|0)==0?16433:16435;D=76}else{h=1;v=16434;D=76}break}case 117:{m=ee;p=s[m>>2]|0;m=s[m+4>>2]|0;h=0;v=16433;D=76;break}case 99:{a[Y>>0]=s[ee>>2];_=Y;m=1;w=0;k=16433;p=L;break}case 109:{p=di(s[(ui()|0)>>2]|0)|0;D=82;break}case 115:{p=s[ee>>2]|0;p=(p|0)!=0?p:16443;D=82;break}case 67:{s[ne>>2]=s[ee>>2];s[V>>2]=0;s[ee>>2]=ne;g=-1;D=86;break}case 83:{if(!g){Ls(e,32,F,0,O);p=0;D=98}else D=86;break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{b=+u[ee>>3];s[ie>>2]=0;u[f>>3]=b;if((s[f+4>>2]|0)>=0){if(!(O&2048)){R=O&1;M=R;R=(R|0)==0?16451:16456}else{M=1;R=16453}}else{b=-b;M=1;R=16450}u[f>>3]=b;A=s[f+4>>2]&2146435072;do{if(A>>>0<2146435072|(A|0)==2146435072&0<0){y=+_i(b,ie)*2.0;m=y!=0.0;if(m)s[ie>>2]=(s[ie>>2]|0)+-1;E=k|32;if((E|0)==97){_=k&32;x=(_|0)==0?R:R+9|0;S=M|2;p=12-g|0;do{if(!(g>>>0>11|(p|0)==0)){b=8.0;do{p=p+-1|0;b=b*16.0}while((p|0)!=0);if((a[x>>0]|0)==45){b=-(b+(-y-b));break}else{b=y+b-b;break}}else b=y}while(0);m=s[ie>>2]|0;p=(m|0)<0?0-m|0:m;p=Ns(p,((p|0)<0)<<31>>31,G)|0;if((p|0)==(G|0)){a[K>>0]=48;p=K}a[p+-1>>0]=(m>>31&2)+43;w=p+-2|0;a[w>>0]=k+15;v=(g|0)<1;h=(O&8|0)==0;m=ae;while(1){R=~~b;p=m+1|0;a[m>>0]=n[16417+R>>0]|_;b=(b-+(R|0))*16.0;do{if((p-J|0)==1){if(h&(v&b==0.0))break;a[p>>0]=46;p=m+2|0}}while(0);if(!(b!=0.0))break;else m=p}g=(g|0)!=0&(j+p|0)<(g|0)?z+g-w|0:Z-w+p|0;h=g+S|0;Ls(e,32,F,h,O);if(!(s[e>>2]&32))ts(x,S,e)|0;Ls(e,48,F,h,O^65536);p=p-J|0;if(!(s[e>>2]&32))ts(ae,p,e)|0;m=X-w|0;Ls(e,48,g-(p+m)|0,0,0);if(!(s[e>>2]&32))ts(w,m,e)|0;Ls(e,32,F,h,O^8192);p=(h|0)<(F|0)?F:h;break}p=(g|0)<0?6:g;if(m){m=(s[ie>>2]|0)+-28|0;s[ie>>2]=m;b=y*268435456.0}else{b=y;m=s[ie>>2]|0}A=(m|0)<0?te:H;P=A;m=A;do{T=~~b>>>0;s[m>>2]=T;m=m+4|0;b=(b-+(T>>>0))*1.0e9}while(b!=0.0);h=m;m=s[ie>>2]|0;if((m|0)>0){v=A;while(1){w=(m|0)>29?29:m;g=h+-4|0;do{if(g>>>0<v>>>0)g=v;else{m=0;do{T=Yc(s[g>>2]|0,0,w|0)|0;T=Vc(T|0,I|0,m|0,0)|0;m=I;q=iu(T|0,m|0,1e9,0)|0;s[g>>2]=q;m=au(T|0,m|0,1e9,0)|0;g=g+-4|0}while(g>>>0>=v>>>0);if(!m){g=v;break}g=v+-4|0;s[g>>2]=m}}while(0);while(1){if(h>>>0<=g>>>0)break;m=h+-4|0;if(!(s[m>>2]|0))h=m;else break}m=(s[ie>>2]|0)-w|0;s[ie>>2]=m;if((m|0)>0)v=g;else break}}else g=A;if((m|0)<0){x=((p+25|0)/9|0)+1|0;C=(E|0)==102;_=g;while(1){S=0-m|0;S=(S|0)>9?9:S;do{if(_>>>0<h>>>0){m=(1<<S)+-1|0;v=1e9>>>S;g=0;w=_;do{T=s[w>>2]|0;s[w>>2]=(T>>>S)+g;g=re(T&m,v)|0;w=w+4|0}while(w>>>0<h>>>0);m=(s[_>>2]|0)==0?_+4|0:_;if(!g){g=m;break}s[h>>2]=g;g=m;h=h+4|0}else g=(s[_>>2]|0)==0?_+4|0:_}while(0);m=C?A:g;h=(h-m>>2|0)>(x|0)?m+(x<<2)|0:h;m=(s[ie>>2]|0)+S|0;s[ie>>2]=m;if((m|0)>=0){_=g;break}else _=g}}else _=g;do{if(_>>>0<h>>>0){m=(P-_>>2)*9|0;v=s[_>>2]|0;if(v>>>0<10)break;else g=10;do{g=g*10|0;m=m+1|0}while(v>>>0>=g>>>0)}else m=0}while(0);q=(E|0)==103;T=(p|0)!=0;g=p-((E|0)!=102?m:0)+((T&q)<<31>>31)|0;if((g|0)<(((h-P>>2)*9|0)+-9|0)){w=g+9216|0;C=(w|0)/9|0;g=A+(C+-1023<<2)|0;w=((w|0)%9|0)+1|0;if((w|0)<9){v=10;do{v=v*10|0;w=w+1|0}while((w|0)!=9)}else v=10;S=s[g>>2]|0;x=(S>>>0)%(v>>>0)|0;if((x|0)==0?(A+(C+-1022<<2)|0)==(h|0):0)v=_;else D=163;do{if((D|0)==163){D=0;y=(((S>>>0)/(v>>>0)|0)&1|0)==0?9007199254740992.0:9007199254740994.0;w=(v|0)/2|0;do{if(x>>>0<w>>>0)b=.5;else{if((x|0)==(w|0)?(A+(C+-1022<<2)|0)==(h|0):0){b=1.0;break}b=1.5}}while(0);do{if(M){if((a[R>>0]|0)!=45)break;y=-y;b=-b}}while(0);w=S-x|0;s[g>>2]=w;if(!(y+b!=y)){v=_;break}E=w+v|0;s[g>>2]=E;if(E>>>0>999999999){m=_;while(1){v=g+-4|0;s[g>>2]=0;if(v>>>0<m>>>0){m=m+-4|0;s[m>>2]=0}E=(s[v>>2]|0)+1|0;s[v>>2]=E;if(E>>>0>999999999)g=v;else{_=m;g=v;break}}}m=(P-_>>2)*9|0;w=s[_>>2]|0;if(w>>>0<10){v=_;break}else v=10;do{v=v*10|0;m=m+1|0}while(w>>>0>=v>>>0);v=_}}while(0);E=g+4|0;_=v;h=h>>>0>E>>>0?E:h}x=0-m|0;while(1){if(h>>>0<=_>>>0){C=0;E=h;break}g=h+-4|0;if(!(s[g>>2]|0))h=g;else{C=1;E=h;break}}do{if(q){p=(T&1^1)+p|0;if((p|0)>(m|0)&(m|0)>-5){k=k+-1|0;p=p+-1-m|0}else{k=k+-2|0;p=p+-1|0}h=O&8;if(h)break;do{if(C){h=s[E+-4>>2]|0;if(!h){g=9;break}if(!((h>>>0)%10|0)){v=10;g=0}else{g=0;break}do{v=v*10|0;g=g+1|0}while(((h>>>0)%(v>>>0)|0|0)==0)}else g=9}while(0);h=((E-P>>2)*9|0)+-9|0;if((k|32|0)==102){h=h-g|0;h=(h|0)<0?0:h;p=(p|0)<(h|0)?p:h;h=0;break}else{h=h+m-g|0;h=(h|0)<0?0:h;p=(p|0)<(h|0)?p:h;h=0;break}}else h=O&8}while(0);S=p|h;v=(S|0)!=0&1;w=(k|32|0)==102;if(w){m=(m|0)>0?m:0;k=0}else{g=(m|0)<0?x:m;g=Ns(g,((g|0)<0)<<31>>31,G)|0;if((X-g|0)<2)do{g=g+-1|0;a[g>>0]=48}while((X-g|0)<2);a[g+-1>>0]=(m>>31&2)+43;P=g+-2|0;a[P>>0]=k;m=X-P|0;k=P}x=M+1+p+v+m|0;Ls(e,32,F,x,O);if(!(s[e>>2]&32))ts(R,M,e)|0;Ls(e,48,F,x,O^65536);do{if(w){g=_>>>0>A>>>0?A:_;m=g;do{h=Ns(s[m>>2]|0,0,B)|0;do{if((m|0)==(g|0)){if((h|0)!=(B|0))break;a[Q>>0]=48;h=Q}else{if(h>>>0<=ae>>>0)break;do{h=h+-1|0;a[h>>0]=48}while(h>>>0>ae>>>0)}}while(0);if(!(s[e>>2]&32))ts(h,U-h|0,e)|0;m=m+4|0}while(m>>>0<=A>>>0);do{if(S){if(s[e>>2]&32)break;ts(16485,1,e)|0}}while(0);if((p|0)>0&m>>>0<E>>>0){h=m;while(1){m=Ns(s[h>>2]|0,0,B)|0;if(m>>>0>ae>>>0)do{m=m+-1|0;a[m>>0]=48}while(m>>>0>ae>>>0);if(!(s[e>>2]&32))ts(m,(p|0)>9?9:p,e)|0;h=h+4|0;m=p+-9|0;if(!((p|0)>9&h>>>0<E>>>0)){p=m;break}else p=m}}Ls(e,48,p+9|0,9,0)}else{w=C?E:_+4|0;if((p|0)>-1){v=(h|0)==0;g=_;do{m=Ns(s[g>>2]|0,0,B)|0;if((m|0)==(B|0)){a[Q>>0]=48;m=Q}do{if((g|0)==(_|0)){h=m+1|0;if(!(s[e>>2]&32))ts(m,1,e)|0;if(v&(p|0)<1){m=h;break}if(s[e>>2]&32){m=h;break}ts(16485,1,e)|0;m=h}else{if(m>>>0<=ae>>>0)break;do{m=m+-1|0;a[m>>0]=48}while(m>>>0>ae>>>0)}}while(0);h=U-m|0;if(!(s[e>>2]&32))ts(m,(p|0)>(h|0)?h:p,e)|0;p=p-h|0;g=g+4|0}while(g>>>0<w>>>0&(p|0)>-1)}Ls(e,48,p+18|0,18,0);if(s[e>>2]&32)break;ts(k,X-k|0,e)|0}}while(0);Ls(e,32,F,x,O^8192);p=(x|0)<(F|0)?F:x}else{w=(k&32|0)!=0;v=b!=b|0.0!=0.0;m=v?0:M;g=m+3|0;Ls(e,32,F,g,h);p=s[e>>2]|0;if(!(p&32)){ts(R,m,e)|0;p=s[e>>2]|0}if(!(p&32))ts(v?w?16477:16481:w?16469:16473,3,e)|0;Ls(e,32,F,g,O^8192);p=(g|0)<(F|0)?F:g}}while(0);_=$;continue e}default:{h=O;m=g;w=0;k=16433;p=L}}}while(0);t:do{if((D|0)==64){h=ee;m=s[h>>2]|0;h=s[h+4>>2]|0;v=k&32;if(!((m|0)==0&(h|0)==0)){p=L;do{p=p+-1|0;a[p>>0]=n[16417+(m&15)>>0]|v;m=Gc(m|0,h|0,4)|0;h=I}while(!((m|0)==0&(h|0)==0));D=ee;if((w&8|0)==0|(s[D>>2]|0)==0&(s[D+4>>2]|0)==0){m=w;w=0;v=16433;D=77}else{m=w;w=2;v=16433+(k>>4)|0;D=77}}else{p=L;m=w;w=0;v=16433;D=77}}else if((D|0)==76){p=Ns(p,m,L)|0;m=O;w=h;D=77}else if((D|0)==82){D=0;O=ps(p,0,g)|0;R=(O|0)==0;_=p;m=R?g:O-p|0;w=0;k=16433;p=R?p+g|0:O}else if((D|0)==86){D=0;m=0;p=0;v=s[ee>>2]|0;while(1){h=s[v>>2]|0;if(!h)break;p=Ei(se,h)|0;if((p|0)<0|p>>>0>(g-m|0)>>>0)break;m=p+m|0;if(g>>>0>m>>>0)v=v+4|0;else break}if((p|0)<0){c=-1;break e}Ls(e,32,F,m,O);if(!m){p=0;D=98}else{h=0;g=s[ee>>2]|0;while(1){p=s[g>>2]|0;if(!p){p=m;D=98;break t}p=Ei(se,p)|0;h=p+h|0;if((h|0)>(m|0)){p=m;D=98;break t}if(!(s[e>>2]&32))ts(se,p,e)|0;if(h>>>0>=m>>>0){p=m;D=98;break}else g=g+4|0}}}}while(0);if((D|0)==98){D=0;Ls(e,32,F,p,O^8192);_=$;p=(F|0)>(p|0)?F:p;continue}if((D|0)==77){D=0;h=(g|0)>-1?m&-65537:m;m=ee;m=(s[m>>2]|0)!=0|(s[m+4>>2]|0)!=0;if((g|0)!=0|m){m=(m&1^1)+(W-p)|0;_=p;m=(g|0)>(m|0)?g:m;k=v;p=L}else{_=L;m=0;k=v;p=L}}v=p-_|0;m=(m|0)<(v|0)?v:m;g=w+m|0;p=(F|0)<(g|0)?g:F;Ls(e,32,p,g,h);if(!(s[e>>2]&32))ts(k,w,e)|0;Ls(e,48,p,g,h^65536);Ls(e,48,m,v,0);if(!(s[e>>2]&32))ts(_,v,e)|0;Ls(e,32,p,g,h^8192);_=$}e:do{if((D|0)==245)if(!e)if(t){c=1;while(1){t=s[l+(c<<2)>>2]|0;if(!t)break;Ds(o+(c<<3)|0,t,r);c=c+1|0;if((c|0)>=10){c=1;break e}}if((c|0)<10)while(1){if(s[l+(c<<2)>>2]|0){c=-1;break e}c=c+1|0;if((c|0)>=10){c=1;break}}else c=1}else c=0}while(0);d=oe;return c|0}function Is(e,t,r){e=e|0;t=t|0;r=r|0;return Ni(e,t,r)|0}function Rs(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0;h=d;d=d+240|0;m=h;s[m>>2]=e;e:do{if((a|0)>1){f=0-t|0;n=a;o=e;c=e;u=1;while(1){e=o+f|0;p=n+-2|0;l=o+(0-((s[i+(p<<2)>>2]|0)+t))|0;if((Xu[r&15](c,l)|0)>-1?(Xu[r&15](c,e)|0)>-1:0){a=u;break e}a=u+1|0;o=m+(u<<2)|0;if((Xu[r&15](l,e)|0)>-1){s[o>>2]=l;e=l;n=n+-1|0}else{s[o>>2]=e;n=p}if((n|0)<=1)break e;o=e;c=s[m>>2]|0;u=a}}else a=1}while(0);$s(t,m,a);d=h;return}function Os(e,t,r,a,i,n,o){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;o=o|0;var l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0;g=d;d=d+240|0;h=g;c=s[a>>2]|0;a=s[a+4>>2]|0;s[h>>2]=e;m=0-t|0;e:do{if((a|0)!=0|(c|0)!=1?(l=e+(0-(s[o+(i<<2)>>2]|0))|0,(Xu[r&15](l,e)|0)>=1):0){n=(n|0)==0;f=l;u=c;p=a;l=1;while(1){if(n&(i|0)>1){a=s[o+(i+-2<<2)>>2]|0;if((Xu[r&15](e+m|0,f)|0)>-1){n=i;a=l;b=20;break e}if((Xu[r&15](e+(0-(a+t))|0,f)|0)>-1){n=i;a=l;b=20;break e}}a=l+1|0;s[h+(l<<2)>>2]=f;n=u+-1|0;do{if(n){if(!(n&1)){e=n;n=0;do{n=n+1|0;e=e>>>1}while((e&1|0)==0);if(!n)b=11}else b=11;if((b|0)==11){b=0;if(!p){n=64;b=16;break}if(!(p&1)){e=p;n=0}else{c=0;e=u;l=p;n=0;break}while(1){l=n+1|0;e=e>>>1;if(e&1){e=l;break}else n=l}if(!e){c=0;e=u;l=p;n=0;break}else n=n+33|0}if(n>>>0>31)b=16;else{c=n;e=u;l=p}}else{n=32;b=16}}while(0);if((b|0)==16){b=0;c=n+-32|0;e=p;l=0}u=l<<32-c|e>>>c;p=l>>>c;n=n+i|0;if(!((p|0)!=0|(u|0)!=1)){e=f;b=20;break e}e=f+(0-(s[o+(n<<2)>>2]|0))|0;if((Xu[r&15](e,s[h>>2]|0)|0)<1){e=f;i=n;n=0;b=19;break}else{c=f;i=n;n=1;f=e;l=a;e=c}}}else{a=1;b=19}}while(0);if((b|0)==19?(n|0)==0:0){n=i;b=20}if((b|0)==20){$s(t,h,a);Rs(e,t,r,n,o)}d=g;return}function $s(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0;o=d;d=d+256|0;a=o;e:do{if((r|0)>=2?(n=t+(r<<2)|0,s[n>>2]=a,(e|0)!=0):0)while(1){i=e>>>0>256?256:e;Kc(a|0,s[t>>2]|0,i|0)|0;a=0;do{l=t+(a<<2)|0;a=a+1|0;Kc(s[l>>2]|0,s[t+(a<<2)>>2]|0,i|0)|0;s[l>>2]=(s[l>>2]|0)+i}while((a|0)!=(r|0));if((e|0)==(i|0))break e;e=e-i|0;a=s[n>>2]|0}}while(0);d=o;return}function Fs(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;a=e+20|0;i=s[a>>2]|0;e=(s[e+16>>2]|0)-i|0;e=e>>>0>r>>>0?r:e;Kc(i|0,t|0,e|0)|0;s[a>>2]=(s[a>>2]|0)+e;return r|0}function Ds(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0.0;e:do{if(t>>>0<=20)do{switch(t|0){case 9:{a=(s[r>>2]|0)+(4-1)&~(4-1);t=s[a>>2]|0;s[r>>2]=a+4;s[e>>2]=t;break e}case 10:{a=(s[r>>2]|0)+(4-1)&~(4-1);t=s[a>>2]|0;s[r>>2]=a+4;a=e;s[a>>2]=t;s[a+4>>2]=((t|0)<0)<<31>>31;break e}case 11:{a=(s[r>>2]|0)+(4-1)&~(4-1);t=s[a>>2]|0;s[r>>2]=a+4;a=e;s[a>>2]=t;s[a+4>>2]=0;break e}case 12:{a=(s[r>>2]|0)+(8-1)&~(8-1);t=a;i=s[t>>2]|0;t=s[t+4>>2]|0;s[r>>2]=a+8;a=e;s[a>>2]=i;s[a+4>>2]=t;break e}case 13:{i=(s[r>>2]|0)+(4-1)&~(4-1);a=s[i>>2]|0;s[r>>2]=i+4;a=(a&65535)<<16>>16;i=e;s[i>>2]=a;s[i+4>>2]=((a|0)<0)<<31>>31;break e}case 14:{i=(s[r>>2]|0)+(4-1)&~(4-1);a=s[i>>2]|0;s[r>>2]=i+4;i=e;s[i>>2]=a&65535;s[i+4>>2]=0;break e}case 15:{i=(s[r>>2]|0)+(4-1)&~(4-1);a=s[i>>2]|0;s[r>>2]=i+4;a=(a&255)<<24>>24;i=e;s[i>>2]=a;s[i+4>>2]=((a|0)<0)<<31>>31;break e}case 16:{i=(s[r>>2]|0)+(4-1)&~(4-1);a=s[i>>2]|0;s[r>>2]=i+4;i=e;s[i>>2]=a&255;s[i+4>>2]=0;break e}case 17:{i=(s[r>>2]|0)+(8-1)&~(8-1);n=+u[i>>3];s[r>>2]=i+8;u[e>>3]=n;break e}case 18:{i=(s[r>>2]|0)+(8-1)&~(8-1);n=+u[i>>3];s[r>>2]=i+8;u[e>>3]=n;break e}default:break e}}while(0)}while(0);return}function Ns(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;if(t>>>0>0|(t|0)==0&e>>>0>4294967295)while(1){i=iu(e|0,t|0,10,0)|0;r=r+-1|0;a[r>>0]=i|48;i=au(e|0,t|0,10,0)|0;if(t>>>0>9|(t|0)==9&e>>>0>4294967295){e=i;t=I}else{e=i;break}}if(e)while(1){r=r+-1|0;a[r>>0]=(e>>>0)%10|0|48;if(e>>>0<10)break;else e=(e>>>0)/10|0}return r|0}function Ls(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0,l=0;l=d;d=d+256|0;o=l;do{if((r|0)>(a|0)&(i&73728|0)==0){i=r-a|0;Wc(o|0,t|0,(i>>>0>256?256:i)|0)|0;t=s[e>>2]|0;n=(t&32|0)==0;if(i>>>0>255){a=r-a|0;do{if(n){ts(o,256,e)|0;t=s[e>>2]|0}i=i+-256|0;n=(t&32|0)==0}while(i>>>0>255);if(n)i=a&255;else break}else if(!n)break;ts(o,i,e)|0}}while(0);d=l;return}function js(e){e=e|0;var t=0,r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0,N=0;do{if(e>>>0<245){m=e>>>0<11?16:e+11&-8;e=m>>>3;l=s[756]|0;r=l>>>e;if(r&3){e=(r&1^1)+e|0;a=e<<1;r=3064+(a<<2)|0;a=3064+(a+2<<2)|0;i=s[a>>2]|0;n=i+8|0;o=s[n>>2]|0;do{if((r|0)!=(o|0)){if(o>>>0<(s[760]|0)>>>0)Ie();t=o+12|0;if((s[t>>2]|0)==(i|0)){s[t>>2]=r;s[a>>2]=o;break}else Ie()}else s[756]=l&~(1<<e)}while(0);N=e<<3;s[i+4>>2]=N|3;N=i+(N|4)|0;s[N>>2]=s[N>>2]|1;N=n;return N|0}o=s[758]|0;if(m>>>0>o>>>0){if(r){a=2<<e;a=r<<e&(a|0-a);a=(a&0-a)+-1|0;c=a>>>12&16;a=a>>>c;i=a>>>5&8;a=a>>>i;n=a>>>2&4;a=a>>>n;r=a>>>1&2;a=a>>>r;e=a>>>1&1;e=(i|c|n|r|e)+(a>>>e)|0;a=e<<1;r=3064+(a<<2)|0;a=3064+(a+2<<2)|0;n=s[a>>2]|0;c=n+8|0;i=s[c>>2]|0;do{if((r|0)!=(i|0)){if(i>>>0<(s[760]|0)>>>0)Ie();t=i+12|0;if((s[t>>2]|0)==(n|0)){s[t>>2]=r;s[a>>2]=i;u=s[758]|0;break}else Ie()}else{s[756]=l&~(1<<e);u=o}}while(0);N=e<<3;o=N-m|0;s[n+4>>2]=m|3;l=n+m|0;s[n+(m|4)>>2]=o|1;s[n+N>>2]=o;if(u){i=s[761]|0;r=u>>>3;t=r<<1;a=3064+(t<<2)|0;e=s[756]|0;r=1<<r;if(e&r){e=3064+(t+2<<2)|0;t=s[e>>2]|0;if(t>>>0<(s[760]|0)>>>0)Ie();else{d=e;p=t}}else{s[756]=e|r;d=3064+(t+2<<2)|0;p=a}s[d>>2]=i;s[p+12>>2]=i;s[i+8>>2]=p;s[i+12>>2]=a}s[758]=o;s[761]=l;N=c;return N|0}e=s[757]|0;if(e){r=(e&0-e)+-1|0;D=r>>>12&16;r=r>>>D;F=r>>>5&8;r=r>>>F;N=r>>>2&4;r=r>>>N;e=r>>>1&2;r=r>>>e;a=r>>>1&1;a=s[3328+((F|D|N|e|a)+(r>>>a)<<2)>>2]|0;r=(s[a+4>>2]&-8)-m|0;e=a;while(1){t=s[e+16>>2]|0;if(!t){t=s[e+20>>2]|0;if(!t){c=r;break}}e=(s[t+4>>2]&-8)-m|0;N=e>>>0<r>>>0;r=N?e:r;e=t;a=N?t:a}n=s[760]|0;if(a>>>0<n>>>0)Ie();l=a+m|0;if(a>>>0>=l>>>0)Ie();o=s[a+24>>2]|0;r=s[a+12>>2]|0;do{if((r|0)==(a|0)){e=a+20|0;t=s[e>>2]|0;if(!t){e=a+16|0;t=s[e>>2]|0;if(!t){f=0;break}}while(1){r=t+20|0;i=s[r>>2]|0;if(i){t=i;e=r;continue}r=t+16|0;i=s[r>>2]|0;if(!i)break;else{t=i;e=r}}if(e>>>0<n>>>0)Ie();else{s[e>>2]=0;f=t;break}}else{i=s[a+8>>2]|0;if(i>>>0<n>>>0)Ie();t=i+12|0;if((s[t>>2]|0)!=(a|0))Ie();e=r+8|0;if((s[e>>2]|0)==(a|0)){s[t>>2]=r;s[e>>2]=i;f=r;break}else Ie()}}while(0);do{if(o){t=s[a+28>>2]|0;e=3328+(t<<2)|0;if((a|0)==(s[e>>2]|0)){s[e>>2]=f;if(!f){s[757]=s[757]&~(1<<t);break}}else{if(o>>>0<(s[760]|0)>>>0)Ie();t=o+16|0;if((s[t>>2]|0)==(a|0))s[t>>2]=f;else s[o+20>>2]=f;if(!f)break}e=s[760]|0;if(f>>>0<e>>>0)Ie();s[f+24>>2]=o;t=s[a+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Ie();else{s[f+16>>2]=t;s[t+24>>2]=f;break}}while(0);t=s[a+20>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Ie();else{s[f+20>>2]=t;s[t+24>>2]=f;break}}}while(0);if(c>>>0<16){N=c+m|0;s[a+4>>2]=N|3;N=a+(N+4)|0;s[N>>2]=s[N>>2]|1}else{s[a+4>>2]=m|3;s[a+(m|4)>>2]=c|1;s[a+(c+m)>>2]=c;t=s[758]|0;if(t){n=s[761]|0;r=t>>>3;t=r<<1;i=3064+(t<<2)|0;e=s[756]|0;r=1<<r;if(e&r){t=3064+(t+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Ie();else{h=t;b=e}}else{s[756]=e|r;h=3064+(t+2<<2)|0;b=i}s[h>>2]=n;s[b+12>>2]=n;s[n+8>>2]=b;s[n+12>>2]=i}s[758]=c;s[761]=l}N=a+8|0;return N|0}else b=m}else b=m}else if(e>>>0<=4294967231){e=e+11|0;p=e&-8;d=s[757]|0;if(d){r=0-p|0;e=e>>>8;if(e){if(p>>>0>16777215)u=31;else{b=(e+1048320|0)>>>16&8;y=e<<b;h=(y+520192|0)>>>16&4;y=y<<h;u=(y+245760|0)>>>16&2;u=14-(h|b|u)+(y<<u>>>15)|0;u=p>>>(u+7|0)&1|u<<1}}else u=0;e=s[3328+(u<<2)>>2]|0;e:do{if(!e){i=0;e=0;y=86}else{o=r;i=0;l=p<<((u|0)==31?0:25-(u>>>1)|0);c=e;e=0;while(1){n=s[c+4>>2]&-8;r=n-p|0;if(r>>>0<o>>>0){if((n|0)==(p|0)){n=c;e=c;y=90;break e}else e=c}else r=o;y=s[c+20>>2]|0;c=s[c+16+(l>>>31<<2)>>2]|0;i=(y|0)==0|(y|0)==(c|0)?i:y;if(!c){y=86;break}else{o=r;l=l<<1}}}}while(0);if((y|0)==86){if((i|0)==0&(e|0)==0){e=2<<u;e=d&(e|0-e);if(!e){b=p;break}e=(e&0-e)+-1|0;f=e>>>12&16;e=e>>>f;d=e>>>5&8;e=e>>>d;h=e>>>2&4;e=e>>>h;b=e>>>1&2;e=e>>>b;i=e>>>1&1;i=s[3328+((d|f|h|b|i)+(e>>>i)<<2)>>2]|0;e=0}if(!i){l=r;c=e}else{n=i;y=90}}if((y|0)==90)while(1){y=0;b=(s[n+4>>2]&-8)-p|0;i=b>>>0<r>>>0;r=i?b:r;e=i?n:e;i=s[n+16>>2]|0;if(i){n=i;y=90;continue}n=s[n+20>>2]|0;if(!n){l=r;c=e;break}else y=90}if((c|0)!=0?l>>>0<((s[758]|0)-p|0)>>>0:0){i=s[760]|0;if(c>>>0<i>>>0)Ie();o=c+p|0;if(c>>>0>=o>>>0)Ie();n=s[c+24>>2]|0;r=s[c+12>>2]|0;do{if((r|0)==(c|0)){e=c+20|0;t=s[e>>2]|0;if(!t){e=c+16|0;t=s[e>>2]|0;if(!t){m=0;break}}while(1){r=t+20|0;a=s[r>>2]|0;if(a){t=a;e=r;continue}r=t+16|0;a=s[r>>2]|0;if(!a)break;else{t=a;e=r}}if(e>>>0<i>>>0)Ie();else{s[e>>2]=0;m=t;break}}else{a=s[c+8>>2]|0;if(a>>>0<i>>>0)Ie();t=a+12|0;if((s[t>>2]|0)!=(c|0))Ie();e=r+8|0;if((s[e>>2]|0)==(c|0)){s[t>>2]=r;s[e>>2]=a;m=r;break}else Ie()}}while(0);do{if(n){t=s[c+28>>2]|0;e=3328+(t<<2)|0;if((c|0)==(s[e>>2]|0)){s[e>>2]=m;if(!m){s[757]=s[757]&~(1<<t);break}}else{if(n>>>0<(s[760]|0)>>>0)Ie();t=n+16|0;if((s[t>>2]|0)==(c|0))s[t>>2]=m;else s[n+20>>2]=m;if(!m)break}e=s[760]|0;if(m>>>0<e>>>0)Ie();s[m+24>>2]=n;t=s[c+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Ie();else{s[m+16>>2]=t;s[t+24>>2]=m;break}}while(0);t=s[c+20>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Ie();else{s[m+20>>2]=t;s[t+24>>2]=m;break}}}while(0);e:do{if(l>>>0>=16){s[c+4>>2]=p|3;s[c+(p|4)>>2]=l|1;s[c+(l+p)>>2]=l;t=l>>>3;if(l>>>0<256){e=t<<1;a=3064+(e<<2)|0;r=s[756]|0;t=1<<t;if(r&t){t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Ie();else{v=t;w=e}}else{s[756]=r|t;v=3064+(e+2<<2)|0;w=a}s[v>>2]=o;s[w+12>>2]=o;s[c+(p+8)>>2]=w;s[c+(p+12)>>2]=a;break}t=l>>>8;if(t){if(l>>>0>16777215)a=31;else{D=(t+1048320|0)>>>16&8;N=t<<D;F=(N+520192|0)>>>16&4;N=N<<F;a=(N+245760|0)>>>16&2;a=14-(F|D|a)+(N<<a>>>15)|0;a=l>>>(a+7|0)&1|a<<1}}else a=0;t=3328+(a<<2)|0;s[c+(p+28)>>2]=a;s[c+(p+20)>>2]=0;s[c+(p+16)>>2]=0;e=s[757]|0;r=1<<a;if(!(e&r)){s[757]=e|r;s[t>>2]=o;s[c+(p+24)>>2]=t;s[c+(p+12)>>2]=o;s[c+(p+8)>>2]=o;break}t=s[t>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(l|0)){a=l<<((a|0)==31?0:25-(a>>>1)|0);while(1){e=t+16+(a>>>31<<2)|0;r=s[e>>2]|0;if(!r)break;if((s[r+4>>2]&-8|0)==(l|0)){x=r;break t}else{a=a<<1;t=r}}if(e>>>0<(s[760]|0)>>>0)Ie();else{s[e>>2]=o;s[c+(p+24)>>2]=t;s[c+(p+12)>>2]=o;s[c+(p+8)>>2]=o;break e}}else x=t}while(0);t=x+8|0;e=s[t>>2]|0;N=s[760]|0;if(e>>>0>=N>>>0&x>>>0>=N>>>0){s[e+12>>2]=o;s[t>>2]=o;s[c+(p+8)>>2]=e;s[c+(p+12)>>2]=x;s[c+(p+24)>>2]=0;break}else Ie()}else{N=l+p|0;s[c+4>>2]=N|3;N=c+(N+4)|0;s[N>>2]=s[N>>2]|1}}while(0);N=c+8|0;return N|0}else b=p}else b=p}else b=-1}while(0);r=s[758]|0;if(r>>>0>=b>>>0){t=r-b|0;e=s[761]|0;if(t>>>0>15){s[761]=e+b;s[758]=t;s[e+(b+4)>>2]=t|1;s[e+r>>2]=t;s[e+4>>2]=b|3}else{s[758]=0;s[761]=0;s[e+4>>2]=r|3;N=e+(r+4)|0;s[N>>2]=s[N>>2]|1}N=e+8|0;return N|0}e=s[759]|0;if(e>>>0>b>>>0){D=e-b|0;s[759]=D;N=s[762]|0;s[762]=N+b;s[N+(b+4)>>2]=D|1;s[N+4>>2]=b|3;N=N+8|0;return N|0}do{if(!(s[874]|0)){e=rt(30)|0;if(!(e+-1&e)){s[876]=e;s[875]=e;s[877]=-1;s[878]=-1;s[879]=0;s[867]=0;s[874]=(It(0)|0)&-16^1431655768;break}else Ie()}}while(0);c=b+48|0;l=s[876]|0;u=b+47|0;o=l+u|0;l=0-l|0;d=o&l;if(d>>>0<=b>>>0){N=0;return N|0}e=s[866]|0;if((e|0)!=0?(w=s[864]|0,x=w+d|0,x>>>0<=w>>>0|x>>>0>e>>>0):0){N=0;return N|0}e:do{if(!(s[867]&4)){e=s[762]|0;t:do{if(e){i=3472;while(1){r=s[i>>2]|0;if(r>>>0<=e>>>0?(g=i+4|0,(r+(s[g>>2]|0)|0)>>>0>e>>>0):0){n=i;e=g;break}i=s[i+8>>2]|0;if(!i){y=174;break t}}r=o-(s[759]|0)&l;if(r>>>0<2147483647){i=Ge(r|0)|0;x=(i|0)==((s[n>>2]|0)+(s[e>>2]|0)|0);e=x?r:0;if(x){if((i|0)!=(-1|0)){_=i;h=e;y=194;break e}}else y=184}else e=0}else y=174}while(0);do{if((y|0)==174){n=Ge(0)|0;if((n|0)!=(-1|0)){e=n;r=s[875]|0;i=r+-1|0;if(!(i&e))r=d;else r=d-e+(i+e&0-r)|0;e=s[864]|0;i=e+r|0;if(r>>>0>b>>>0&r>>>0<2147483647){x=s[866]|0;if((x|0)!=0?i>>>0<=e>>>0|i>>>0>x>>>0:0){e=0;break}i=Ge(r|0)|0;x=(i|0)==(n|0);e=x?r:0;if(x){_=n;h=e;y=194;break e}else y=184}else e=0}else e=0}}while(0);t:do{if((y|0)==184){n=0-r|0;do{if(c>>>0>r>>>0&(r>>>0<2147483647&(i|0)!=(-1|0))?(k=s[876]|0,k=u-r+k&0-k,k>>>0<2147483647):0)if((Ge(k|0)|0)==(-1|0)){Ge(n|0)|0;break t}else{r=k+r|0;break}}while(0);if((i|0)!=(-1|0)){_=i;h=r;y=194;break e}}}while(0);s[867]=s[867]|4;y=191}else{e=0;y=191}}while(0);if((((y|0)==191?d>>>0<2147483647:0)?(_=Ge(d|0)|0,S=Ge(0)|0,_>>>0<S>>>0&((_|0)!=(-1|0)&(S|0)!=(-1|0))):0)?(C=S-_|0,q=C>>>0>(b+40|0)>>>0,q):0){h=q?C:e;y=194}if((y|0)==194){e=(s[864]|0)+h|0;s[864]=e;if(e>>>0>(s[865]|0)>>>0)s[865]=e;o=s[762]|0;e:do{if(o){n=3472;do{e=s[n>>2]|0;r=n+4|0;i=s[r>>2]|0;if((_|0)==(e+i|0)){T=e;E=r;P=i;A=n;y=204;break}n=s[n+8>>2]|0}while((n|0)!=0);if(((y|0)==204?(s[A+12>>2]&8|0)==0:0)?o>>>0<_>>>0&o>>>0>=T>>>0:0){s[E>>2]=P+h;N=(s[759]|0)+h|0;D=o+8|0;D=(D&7|0)==0?0:0-D&7;F=N-D|0;s[762]=o+D;s[759]=F;s[o+(D+4)>>2]=F|1;s[o+(N+4)>>2]=40;s[763]=s[878];break}e=s[760]|0;if(_>>>0<e>>>0){s[760]=_;e=_}r=_+h|0;n=3472;while(1){if((s[n>>2]|0)==(r|0)){i=n;r=n;y=212;break}n=s[n+8>>2]|0;if(!n){r=3472;break}}if((y|0)==212)if(!(s[r+12>>2]&8)){s[i>>2]=_;f=r+4|0;s[f>>2]=(s[f>>2]|0)+h;f=_+8|0;f=(f&7|0)==0?0:0-f&7;u=_+(h+8)|0;u=(u&7|0)==0?0:0-u&7;t=_+(u+h)|0;p=f+b|0;m=_+p|0;d=t-(_+f)-b|0;s[_+(f+4)>>2]=b|3;t:do{if((t|0)!=(o|0)){if((t|0)==(s[761]|0)){N=(s[758]|0)+d|0;s[758]=N;s[761]=m;s[_+(p+4)>>2]=N|1;s[_+(N+p)>>2]=N;break}l=h+4|0;r=s[_+(l+u)>>2]|0;if((r&3|0)==1){c=r&-8;n=r>>>3;r:do{if(r>>>0>=256){o=s[_+((u|24)+h)>>2]|0;a=s[_+(h+12+u)>>2]|0;do{if((a|0)==(t|0)){i=u|16;a=_+(l+i)|0;r=s[a>>2]|0;if(!r){a=_+(i+h)|0;r=s[a>>2]|0;if(!r){$=0;break}}while(1){i=r+20|0;n=s[i>>2]|0;if(n){r=n;a=i;continue}i=r+16|0;n=s[i>>2]|0;if(!n)break;else{r=n;a=i}}if(a>>>0<e>>>0)Ie();else{s[a>>2]=0;$=r;break}}else{i=s[_+((u|8)+h)>>2]|0;if(i>>>0<e>>>0)Ie();e=i+12|0;if((s[e>>2]|0)!=(t|0))Ie();r=a+8|0;if((s[r>>2]|0)==(t|0)){s[e>>2]=a;s[r>>2]=i;$=a;break}else Ie()}}while(0);if(!o)break;e=s[_+(h+28+u)>>2]|0;r=3328+(e<<2)|0;do{if((t|0)!=(s[r>>2]|0)){if(o>>>0<(s[760]|0)>>>0)Ie();e=o+16|0;if((s[e>>2]|0)==(t|0))s[e>>2]=$;else s[o+20>>2]=$;if(!$)break r}else{s[r>>2]=$;if($)break;s[757]=s[757]&~(1<<e);break r}}while(0);r=s[760]|0;if($>>>0<r>>>0)Ie();s[$+24>>2]=o;t=u|16;e=s[_+(t+h)>>2]|0;do{if(e)if(e>>>0<r>>>0)Ie();else{s[$+16>>2]=e;s[e+24>>2]=$;break}}while(0);t=s[_+(l+t)>>2]|0;if(!t)break;if(t>>>0<(s[760]|0)>>>0)Ie();else{s[$+20>>2]=t;s[t+24>>2]=$;break}}else{a=s[_+((u|8)+h)>>2]|0;i=s[_+(h+12+u)>>2]|0;r=3064+(n<<1<<2)|0;do{if((a|0)!=(r|0)){if(a>>>0<e>>>0)Ie();if((s[a+12>>2]|0)==(t|0))break;Ie()}}while(0);if((i|0)==(a|0)){s[756]=s[756]&~(1<<n);break}do{if((i|0)==(r|0))M=i+8|0;else{if(i>>>0<e>>>0)Ie();e=i+8|0;if((s[e>>2]|0)==(t|0)){M=e;break}Ie()}}while(0);s[a+12>>2]=i;s[M>>2]=a}}while(0);t=_+((c|u)+h)|0;i=c+d|0}else i=d;t=t+4|0;s[t>>2]=s[t>>2]&-2;s[_+(p+4)>>2]=i|1;s[_+(i+p)>>2]=i;t=i>>>3;if(i>>>0<256){e=t<<1;a=3064+(e<<2)|0;r=s[756]|0;t=1<<t;do{if(!(r&t)){s[756]=r|t;F=3064+(e+2<<2)|0;D=a}else{t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0>=(s[760]|0)>>>0){F=t;D=e;break}Ie()}}while(0);s[F>>2]=m;s[D+12>>2]=m;s[_+(p+8)>>2]=D;s[_+(p+12)>>2]=a;break}t=i>>>8;do{if(!t)a=0;else{if(i>>>0>16777215){a=31;break}F=(t+1048320|0)>>>16&8;D=t<<F;$=(D+520192|0)>>>16&4;D=D<<$;a=(D+245760|0)>>>16&2;a=14-($|F|a)+(D<<a>>>15)|0;a=i>>>(a+7|0)&1|a<<1}}while(0);t=3328+(a<<2)|0;s[_+(p+28)>>2]=a;s[_+(p+20)>>2]=0;s[_+(p+16)>>2]=0;e=s[757]|0;r=1<<a;if(!(e&r)){s[757]=e|r;s[t>>2]=m;s[_+(p+24)>>2]=t;s[_+(p+12)>>2]=m;s[_+(p+8)>>2]=m;break}t=s[t>>2]|0;r:do{if((s[t+4>>2]&-8|0)!=(i|0)){a=i<<((a|0)==31?0:25-(a>>>1)|0);while(1){e=t+16+(a>>>31<<2)|0;r=s[e>>2]|0;if(!r)break;if((s[r+4>>2]&-8|0)==(i|0)){N=r;break r}else{a=a<<1;t=r}}if(e>>>0<(s[760]|0)>>>0)Ie();else{s[e>>2]=m;s[_+(p+24)>>2]=t;s[_+(p+12)>>2]=m;s[_+(p+8)>>2]=m;break t}}else N=t}while(0);t=N+8|0;e=s[t>>2]|0;D=s[760]|0;if(e>>>0>=D>>>0&N>>>0>=D>>>0){s[e+12>>2]=m;s[t>>2]=m;s[_+(p+8)>>2]=e;s[_+(p+12)>>2]=N;s[_+(p+24)>>2]=0;break}else Ie()}else{N=(s[759]|0)+d|0;s[759]=N;s[762]=m;s[_+(p+4)>>2]=N|1}}while(0);N=_+(f|8)|0;return N|0}else r=3472;while(1){e=s[r>>2]|0;if(e>>>0<=o>>>0?(t=s[r+4>>2]|0,a=e+t|0,a>>>0>o>>>0):0)break;r=s[r+8>>2]|0}i=e+(t+-39)|0;e=e+(t+-47+((i&7|0)==0?0:0-i&7))|0;i=o+16|0;e=e>>>0<i>>>0?o:e;t=e+8|0;r=_+8|0;r=(r&7|0)==0?0:0-r&7;N=h+-40-r|0;s[762]=_+r;s[759]=N;s[_+(r+4)>>2]=N|1;s[_+(h+-36)>>2]=40;s[763]=s[878];r=e+4|0;s[r>>2]=27;s[t>>2]=s[868];s[t+4>>2]=s[869];s[t+8>>2]=s[870];s[t+12>>2]=s[871];s[868]=_;s[869]=h;s[871]=0;s[870]=t;t=e+28|0;s[t>>2]=7;if((e+32|0)>>>0<a>>>0)do{N=t;t=t+4|0;s[t>>2]=7}while((N+8|0)>>>0<a>>>0);if((e|0)!=(o|0)){n=e-o|0;s[r>>2]=s[r>>2]&-2;s[o+4>>2]=n|1;s[e>>2]=n;t=n>>>3;if(n>>>0<256){e=t<<1;a=3064+(e<<2)|0;r=s[756]|0;t=1<<t;if(r&t){t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Ie();else{I=t;R=e}}else{s[756]=r|t;I=3064+(e+2<<2)|0;R=a}s[I>>2]=o;s[R+12>>2]=o;s[o+8>>2]=R;s[o+12>>2]=a;break}t=n>>>8;if(t){if(n>>>0>16777215)a=31;else{D=(t+1048320|0)>>>16&8;N=t<<D;F=(N+520192|0)>>>16&4;N=N<<F;a=(N+245760|0)>>>16&2;a=14-(F|D|a)+(N<<a>>>15)|0;a=n>>>(a+7|0)&1|a<<1}}else a=0;r=3328+(a<<2)|0;s[o+28>>2]=a;s[o+20>>2]=0;s[i>>2]=0;t=s[757]|0;e=1<<a;if(!(t&e)){s[757]=t|e;s[r>>2]=o;s[o+24>>2]=r;s[o+12>>2]=o;s[o+8>>2]=o;break}t=s[r>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(n|0)){a=n<<((a|0)==31?0:25-(a>>>1)|0);while(1){e=t+16+(a>>>31<<2)|0;r=s[e>>2]|0;if(!r)break;if((s[r+4>>2]&-8|0)==(n|0)){O=r;break t}else{a=a<<1;t=r}}if(e>>>0<(s[760]|0)>>>0)Ie();else{s[e>>2]=o;s[o+24>>2]=t;s[o+12>>2]=o;s[o+8>>2]=o;break e}}else O=t}while(0);t=O+8|0;e=s[t>>2]|0;N=s[760]|0;if(e>>>0>=N>>>0&O>>>0>=N>>>0){s[e+12>>2]=o;s[t>>2]=o;s[o+8>>2]=e;s[o+12>>2]=O;s[o+24>>2]=0;break}else Ie()}}else{N=s[760]|0;if((N|0)==0|_>>>0<N>>>0)s[760]=_;s[868]=_;s[869]=h;s[871]=0;s[765]=s[874];s[764]=-1;t=0;do{N=t<<1;D=3064+(N<<2)|0;s[3064+(N+3<<2)>>2]=D;s[3064+(N+2<<2)>>2]=D;t=t+1|0}while((t|0)!=32);N=_+8|0;N=(N&7|0)==0?0:0-N&7;D=h+-40-N|0;s[762]=_+N;s[759]=D;s[_+(N+4)>>2]=D|1;s[_+(h+-36)>>2]=40;s[763]=s[878]}}while(0);t=s[759]|0;if(t>>>0>b>>>0){D=t-b|0;s[759]=D;N=s[762]|0;s[762]=N+b;s[N+(b+4)>>2]=D|1;s[N+4>>2]=b|3;N=N+8|0;return N|0}}s[(ui()|0)>>2]=12;N=0;return N|0}function zs(e){e=e|0;var t=0,r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0;if(!e)return;t=e+-8|0;l=s[760]|0;if(t>>>0<l>>>0)Ie();r=s[e+-4>>2]|0;a=r&3;if((a|0)==1)Ie();m=r&-8;b=e+(m+-8)|0;do{if(!(r&1)){t=s[t>>2]|0;if(!a)return;c=-8-t|0;d=e+c|0;p=t+m|0;if(d>>>0<l>>>0)Ie();if((d|0)==(s[761]|0)){t=e+(m+-4)|0;r=s[t>>2]|0;if((r&3|0)!=3){k=d;n=p;break}s[758]=p;s[t>>2]=r&-2;s[e+(c+4)>>2]=p|1;s[b>>2]=p;return}i=t>>>3;if(t>>>0<256){a=s[e+(c+8)>>2]|0;r=s[e+(c+12)>>2]|0;t=3064+(i<<1<<2)|0;if((a|0)!=(t|0)){if(a>>>0<l>>>0)Ie();if((s[a+12>>2]|0)!=(d|0))Ie()}if((r|0)==(a|0)){s[756]=s[756]&~(1<<i);k=d;n=p;break}if((r|0)!=(t|0)){if(r>>>0<l>>>0)Ie();t=r+8|0;if((s[t>>2]|0)==(d|0))o=t;else Ie()}else o=r+8|0;s[a+12>>2]=r;s[o>>2]=a;k=d;n=p;break}o=s[e+(c+24)>>2]|0;a=s[e+(c+12)>>2]|0;do{if((a|0)==(d|0)){r=e+(c+20)|0;t=s[r>>2]|0;if(!t){r=e+(c+16)|0;t=s[r>>2]|0;if(!t){u=0;break}}while(1){a=t+20|0;i=s[a>>2]|0;if(i){t=i;r=a;continue}a=t+16|0;i=s[a>>2]|0;if(!i)break;else{t=i;r=a}}if(r>>>0<l>>>0)Ie();else{s[r>>2]=0;u=t;break}}else{i=s[e+(c+8)>>2]|0;if(i>>>0<l>>>0)Ie();t=i+12|0;if((s[t>>2]|0)!=(d|0))Ie();r=a+8|0;if((s[r>>2]|0)==(d|0)){s[t>>2]=a;s[r>>2]=i;u=a;break}else Ie()}}while(0);if(o){t=s[e+(c+28)>>2]|0;r=3328+(t<<2)|0;if((d|0)==(s[r>>2]|0)){s[r>>2]=u;if(!u){s[757]=s[757]&~(1<<t);k=d;n=p;break}}else{if(o>>>0<(s[760]|0)>>>0)Ie();t=o+16|0;if((s[t>>2]|0)==(d|0))s[t>>2]=u;else s[o+20>>2]=u;if(!u){k=d;n=p;break}}r=s[760]|0;if(u>>>0<r>>>0)Ie();s[u+24>>2]=o;t=s[e+(c+16)>>2]|0;do{if(t)if(t>>>0<r>>>0)Ie();else{s[u+16>>2]=t;s[t+24>>2]=u;break}}while(0);t=s[e+(c+20)>>2]|0;if(t){if(t>>>0<(s[760]|0)>>>0)Ie();else{s[u+20>>2]=t;s[t+24>>2]=u;k=d;n=p;break}}else{k=d;n=p}}else{k=d;n=p}}else{k=t;n=m}}while(0);if(k>>>0>=b>>>0)Ie();t=e+(m+-4)|0;r=s[t>>2]|0;if(!(r&1))Ie();if(!(r&2)){if((b|0)==(s[762]|0)){w=(s[759]|0)+n|0;s[759]=w;s[762]=k;s[k+4>>2]=w|1;if((k|0)!=(s[761]|0))return;s[761]=0;s[758]=0;return}if((b|0)==(s[761]|0)){w=(s[758]|0)+n|0;s[758]=w;s[761]=k;s[k+4>>2]=w|1;s[k+w>>2]=w;return}n=(r&-8)+n|0;i=r>>>3;do{if(r>>>0>=256){o=s[e+(m+16)>>2]|0;t=s[e+(m|4)>>2]|0;do{if((t|0)==(b|0)){r=e+(m+12)|0;t=s[r>>2]|0;if(!t){r=e+(m+8)|0;t=s[r>>2]|0;if(!t){h=0;break}}while(1){a=t+20|0;i=s[a>>2]|0;if(i){t=i;r=a;continue}a=t+16|0;i=s[a>>2]|0;if(!i)break;else{t=i;r=a}}if(r>>>0<(s[760]|0)>>>0)Ie();else{s[r>>2]=0;h=t;break}}else{r=s[e+m>>2]|0;if(r>>>0<(s[760]|0)>>>0)Ie();a=r+12|0;if((s[a>>2]|0)!=(b|0))Ie();i=t+8|0;if((s[i>>2]|0)==(b|0)){s[a>>2]=t;s[i>>2]=r;h=t;break}else Ie()}}while(0);if(o){t=s[e+(m+20)>>2]|0;r=3328+(t<<2)|0;if((b|0)==(s[r>>2]|0)){s[r>>2]=h;if(!h){s[757]=s[757]&~(1<<t);break}}else{if(o>>>0<(s[760]|0)>>>0)Ie();t=o+16|0;if((s[t>>2]|0)==(b|0))s[t>>2]=h;else s[o+20>>2]=h;if(!h)break}r=s[760]|0;if(h>>>0<r>>>0)Ie();s[h+24>>2]=o;t=s[e+(m+8)>>2]|0;do{if(t)if(t>>>0<r>>>0)Ie();else{s[h+16>>2]=t;s[t+24>>2]=h;break}}while(0);t=s[e+(m+12)>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Ie();else{s[h+20>>2]=t;s[t+24>>2]=h;break}}}else{a=s[e+m>>2]|0;r=s[e+(m|4)>>2]|0;t=3064+(i<<1<<2)|0;if((a|0)!=(t|0)){if(a>>>0<(s[760]|0)>>>0)Ie();if((s[a+12>>2]|0)!=(b|0))Ie()}if((r|0)==(a|0)){s[756]=s[756]&~(1<<i);break}if((r|0)!=(t|0)){if(r>>>0<(s[760]|0)>>>0)Ie();t=r+8|0;if((s[t>>2]|0)==(b|0))f=t;else Ie()}else f=r+8|0;s[a+12>>2]=r;s[f>>2]=a}}while(0);s[k+4>>2]=n|1;s[k+n>>2]=n;if((k|0)==(s[761]|0)){s[758]=n;return}}else{s[t>>2]=r&-2;s[k+4>>2]=n|1;s[k+n>>2]=n}t=n>>>3;if(n>>>0<256){r=t<<1;i=3064+(r<<2)|0;a=s[756]|0;t=1<<t;if(a&t){t=3064+(r+2<<2)|0;r=s[t>>2]|0;if(r>>>0<(s[760]|0)>>>0)Ie();else{g=t;v=r}}else{s[756]=a|t;g=3064+(r+2<<2)|0;v=i}s[g>>2]=k;s[v+12>>2]=k;s[k+8>>2]=v;s[k+12>>2]=i;return}t=n>>>8;if(t){if(n>>>0>16777215)i=31;else{g=(t+1048320|0)>>>16&8;v=t<<g;b=(v+520192|0)>>>16&4;v=v<<b;i=(v+245760|0)>>>16&2;i=14-(b|g|i)+(v<<i>>>15)|0;i=n>>>(i+7|0)&1|i<<1}}else i=0;t=3328+(i<<2)|0;s[k+28>>2]=i;s[k+20>>2]=0;s[k+16>>2]=0;r=s[757]|0;a=1<<i;e:do{if(r&a){t=s[t>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(n|0)){i=n<<((i|0)==31?0:25-(i>>>1)|0);while(1){r=t+16+(i>>>31<<2)|0;a=s[r>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(n|0)){w=a;break t}else{i=i<<1;t=a}}if(r>>>0<(s[760]|0)>>>0)Ie();else{s[r>>2]=k;s[k+24>>2]=t;s[k+12>>2]=k;s[k+8>>2]=k;break e}}else w=t}while(0);t=w+8|0;r=s[t>>2]|0;v=s[760]|0;if(r>>>0>=v>>>0&w>>>0>=v>>>0){s[r+12>>2]=k;s[t>>2]=k;s[k+8>>2]=r;s[k+12>>2]=w;s[k+24>>2]=0;break}else Ie()}else{s[757]=r|a;s[t>>2]=k;s[k+24>>2]=t;s[k+12>>2]=k;s[k+8>>2]=k}}while(0);k=(s[764]|0)+-1|0;s[764]=k;if(!k)t=3480;else return;while(1){t=s[t>>2]|0;if(!t)break;else t=t+8|0}s[764]=-1;return}function Hs(e,t){e=e|0;t=t|0;var r=0;if(e){r=re(t,e)|0;if((t|e)>>>0>65535)r=((r>>>0)/(e>>>0)|0|0)==(t|0)?r:-1}else r=0;t=js(r)|0;if(!t)return t|0;if(!(s[t+-4>>2]&3))return t|0;Wc(t|0,0,r|0)|0;return t|0}function Bs(e,t){e=e|0;t=t|0;var r=0,a=0;if(!e){e=js(t)|0;return e|0}if(t>>>0>4294967231){s[(ui()|0)>>2]=12;e=0;return e|0}r=Us(e+-8|0,t>>>0<11?16:t+11&-8)|0;if(r){e=r+8|0;return e|0}r=js(t)|0;if(!r){e=0;return e|0}a=s[e+-4>>2]|0;a=(a&-8)-((a&3|0)==0?8:4)|0;Kc(r|0,e|0,(a>>>0<t>>>0?a:t)|0)|0;zs(e);e=r;return e|0}function Us(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0;m=e+4|0;h=s[m>>2]|0;c=h&-8;d=e+c|0;l=s[760]|0;r=h&3;if(!((r|0)!=1&e>>>0>=l>>>0&e>>>0<d>>>0))Ie();a=e+(c|4)|0;i=s[a>>2]|0;if(!(i&1))Ie();if(!r){if(t>>>0<256){e=0;return e|0}if(c>>>0>=(t+4|0)>>>0?(c-t|0)>>>0<=s[876]<<1>>>0:0)return e|0;e=0;return e|0}if(c>>>0>=t>>>0){r=c-t|0;if(r>>>0<=15)return e|0;s[m>>2]=h&1|t|2;s[e+(t+4)>>2]=r|3;s[a>>2]=s[a>>2]|1;Qs(e+t|0,r);return e|0}if((d|0)==(s[762]|0)){r=(s[759]|0)+c|0;if(r>>>0<=t>>>0){e=0;return e|0}f=r-t|0;s[m>>2]=h&1|t|2;s[e+(t+4)>>2]=f|1;s[762]=e+t;s[759]=f;return e|0}if((d|0)==(s[761]|0)){a=(s[758]|0)+c|0;if(a>>>0<t>>>0){e=0;return e|0}r=a-t|0;if(r>>>0>15){s[m>>2]=h&1|t|2;s[e+(t+4)>>2]=r|1;s[e+a>>2]=r;a=e+(a+4)|0;s[a>>2]=s[a>>2]&-2;a=e+t|0}else{s[m>>2]=h&1|a|2;a=e+(a+4)|0;s[a>>2]=s[a>>2]|1;a=0;r=0}s[758]=r;s[761]=a;return e|0}if(i&2){e=0;return e|0}p=(i&-8)+c|0;if(p>>>0<t>>>0){e=0;return e|0}f=p-t|0;n=i>>>3;do{if(i>>>0>=256){o=s[e+(c+24)>>2]|0;n=s[e+(c+12)>>2]|0;do{if((n|0)==(d|0)){a=e+(c+20)|0;r=s[a>>2]|0;if(!r){a=e+(c+16)|0;r=s[a>>2]|0;if(!r){u=0;break}}while(1){i=r+20|0;n=s[i>>2]|0;if(n){r=n;a=i;continue}i=r+16|0;n=s[i>>2]|0;if(!n)break;else{r=n;a=i}}if(a>>>0<l>>>0)Ie();else{s[a>>2]=0;u=r;break}}else{i=s[e+(c+8)>>2]|0;if(i>>>0<l>>>0)Ie();r=i+12|0;if((s[r>>2]|0)!=(d|0))Ie();a=n+8|0;if((s[a>>2]|0)==(d|0)){s[r>>2]=n;s[a>>2]=i;u=n;break}else Ie()}}while(0);if(o){r=s[e+(c+28)>>2]|0;a=3328+(r<<2)|0;if((d|0)==(s[a>>2]|0)){s[a>>2]=u;if(!u){s[757]=s[757]&~(1<<r);break}}else{if(o>>>0<(s[760]|0)>>>0)Ie();r=o+16|0;if((s[r>>2]|0)==(d|0))s[r>>2]=u;else s[o+20>>2]=u;if(!u)break}a=s[760]|0;if(u>>>0<a>>>0)Ie();s[u+24>>2]=o;r=s[e+(c+16)>>2]|0;do{if(r)if(r>>>0<a>>>0)Ie();else{s[u+16>>2]=r;s[r+24>>2]=u;break}}while(0);r=s[e+(c+20)>>2]|0;if(r)if(r>>>0<(s[760]|0)>>>0)Ie();else{s[u+20>>2]=r;s[r+24>>2]=u;break}}}else{i=s[e+(c+8)>>2]|0;a=s[e+(c+12)>>2]|0;r=3064+(n<<1<<2)|0;if((i|0)!=(r|0)){if(i>>>0<l>>>0)Ie();if((s[i+12>>2]|0)!=(d|0))Ie()}if((a|0)==(i|0)){s[756]=s[756]&~(1<<n);break}if((a|0)!=(r|0)){if(a>>>0<l>>>0)Ie();r=a+8|0;if((s[r>>2]|0)==(d|0))o=r;else Ie()}else o=a+8|0;s[i+12>>2]=a;s[o>>2]=i}}while(0);if(f>>>0<16){s[m>>2]=p|h&1|2;t=e+(p|4)|0;s[t>>2]=s[t>>2]|1;return e|0}else{s[m>>2]=h&1|t|2;s[e+(t+4)>>2]=f|3;h=e+(p|4)|0;s[h>>2]=s[h>>2]|1;Qs(e+t|0,f);return e|0}return 0}function Qs(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0;b=e+t|0;r=s[e+4>>2]|0;do{if(!(r&1)){u=s[e>>2]|0;if(!(r&3))return;f=e+(0-u)|0;p=u+t|0;c=s[760]|0;if(f>>>0<c>>>0)Ie();if((f|0)==(s[761]|0)){a=e+(t+4)|0;r=s[a>>2]|0;if((r&3|0)!=3){w=f;o=p;break}s[758]=p;s[a>>2]=r&-2;s[e+(4-u)>>2]=p|1;s[b>>2]=p;return}n=u>>>3;if(u>>>0<256){i=s[e+(8-u)>>2]|0;a=s[e+(12-u)>>2]|0;r=3064+(n<<1<<2)|0;if((i|0)!=(r|0)){if(i>>>0<c>>>0)Ie();if((s[i+12>>2]|0)!=(f|0))Ie()}if((a|0)==(i|0)){s[756]=s[756]&~(1<<n);w=f;o=p;break}if((a|0)!=(r|0)){if(a>>>0<c>>>0)Ie();r=a+8|0;if((s[r>>2]|0)==(f|0))l=r;else Ie()}else l=a+8|0;s[i+12>>2]=a;s[l>>2]=i;w=f;o=p;break}l=s[e+(24-u)>>2]|0;i=s[e+(12-u)>>2]|0;do{if((i|0)==(f|0)){i=16-u|0;a=e+(i+4)|0;r=s[a>>2]|0;if(!r){a=e+i|0;r=s[a>>2]|0;if(!r){d=0;break}}while(1){i=r+20|0;n=s[i>>2]|0;if(n){r=n;a=i;continue}i=r+16|0;n=s[i>>2]|0;if(!n)break;else{r=n;a=i}}if(a>>>0<c>>>0)Ie();else{s[a>>2]=0;d=r;break}}else{n=s[e+(8-u)>>2]|0;if(n>>>0<c>>>0)Ie();r=n+12|0;if((s[r>>2]|0)!=(f|0))Ie();a=i+8|0;if((s[a>>2]|0)==(f|0)){s[r>>2]=i;s[a>>2]=n;d=i;break}else Ie()}}while(0);if(l){r=s[e+(28-u)>>2]|0;a=3328+(r<<2)|0;if((f|0)==(s[a>>2]|0)){s[a>>2]=d;if(!d){s[757]=s[757]&~(1<<r);w=f;o=p;break}}else{if(l>>>0<(s[760]|0)>>>0)Ie();r=l+16|0;if((s[r>>2]|0)==(f|0))s[r>>2]=d;else s[l+20>>2]=d;if(!d){w=f;o=p;break}}i=s[760]|0;if(d>>>0<i>>>0)Ie();s[d+24>>2]=l;r=16-u|0;a=s[e+r>>2]|0;do{if(a)if(a>>>0<i>>>0)Ie();else{s[d+16>>2]=a;s[a+24>>2]=d;break}}while(0);r=s[e+(r+4)>>2]|0;if(r){if(r>>>0<(s[760]|0)>>>0)Ie();else{s[d+20>>2]=r;s[r+24>>2]=d;w=f;o=p;break}}else{w=f;o=p}}else{w=f;o=p}}else{w=e;o=t}}while(0);c=s[760]|0;if(b>>>0<c>>>0)Ie();r=e+(t+4)|0;a=s[r>>2]|0;if(!(a&2)){if((b|0)==(s[762]|0)){v=(s[759]|0)+o|0;s[759]=v;s[762]=w;s[w+4>>2]=v|1;if((w|0)!=(s[761]|0))return;s[761]=0;s[758]=0;return}if((b|0)==(s[761]|0)){v=(s[758]|0)+o|0;s[758]=v;s[761]=w;s[w+4>>2]=v|1;s[w+v>>2]=v;return}o=(a&-8)+o|0;n=a>>>3;do{if(a>>>0>=256){l=s[e+(t+24)>>2]|0;i=s[e+(t+12)>>2]|0;do{if((i|0)==(b|0)){a=e+(t+20)|0;r=s[a>>2]|0;if(!r){a=e+(t+16)|0;r=s[a>>2]|0;if(!r){h=0;break}}while(1){i=r+20|0;n=s[i>>2]|0;if(n){r=n;a=i;continue}i=r+16|0;n=s[i>>2]|0;if(!n)break;else{r=n;a=i}}if(a>>>0<c>>>0)Ie();else{s[a>>2]=0;h=r;break}}else{n=s[e+(t+8)>>2]|0;if(n>>>0<c>>>0)Ie();r=n+12|0;if((s[r>>2]|0)!=(b|0))Ie();a=i+8|0;if((s[a>>2]|0)==(b|0)){s[r>>2]=i;s[a>>2]=n;h=i;break}else Ie()}}while(0);if(l){r=s[e+(t+28)>>2]|0;a=3328+(r<<2)|0;if((b|0)==(s[a>>2]|0)){s[a>>2]=h;if(!h){s[757]=s[757]&~(1<<r);break}}else{if(l>>>0<(s[760]|0)>>>0)Ie();r=l+16|0;if((s[r>>2]|0)==(b|0))s[r>>2]=h;else s[l+20>>2]=h;if(!h)break}a=s[760]|0;if(h>>>0<a>>>0)Ie();s[h+24>>2]=l;r=s[e+(t+16)>>2]|0;do{if(r)if(r>>>0<a>>>0)Ie();else{s[h+16>>2]=r;s[r+24>>2]=h;break}}while(0);r=s[e+(t+20)>>2]|0;if(r)if(r>>>0<(s[760]|0)>>>0)Ie();else{s[h+20>>2]=r;s[r+24>>2]=h;break}}}else{i=s[e+(t+8)>>2]|0;a=s[e+(t+12)>>2]|0;r=3064+(n<<1<<2)|0;if((i|0)!=(r|0)){if(i>>>0<c>>>0)Ie();if((s[i+12>>2]|0)!=(b|0))Ie()}if((a|0)==(i|0)){s[756]=s[756]&~(1<<n);break}if((a|0)!=(r|0)){if(a>>>0<c>>>0)Ie();r=a+8|0;if((s[r>>2]|0)==(b|0))m=r;else Ie()}else m=a+8|0;s[i+12>>2]=a;s[m>>2]=i}}while(0);s[w+4>>2]=o|1;s[w+o>>2]=o;if((w|0)==(s[761]|0)){s[758]=o;return}}else{s[r>>2]=a&-2;s[w+4>>2]=o|1;s[w+o>>2]=o}r=o>>>3;if(o>>>0<256){a=r<<1;n=3064+(a<<2)|0;i=s[756]|0;r=1<<r;if(i&r){r=3064+(a+2<<2)|0;a=s[r>>2]|0;if(a>>>0<(s[760]|0)>>>0)Ie();else{g=r;v=a}}else{s[756]=i|r;g=3064+(a+2<<2)|0;v=n}s[g>>2]=w;s[v+12>>2]=w;s[w+8>>2]=v;s[w+12>>2]=n;return}r=o>>>8;if(r){if(o>>>0>16777215)n=31;else{g=(r+1048320|0)>>>16&8;v=r<<g;b=(v+520192|0)>>>16&4;v=v<<b;n=(v+245760|0)>>>16&2;n=14-(b|g|n)+(v<<n>>>15)|0;n=o>>>(n+7|0)&1|n<<1}}else n=0;r=3328+(n<<2)|0;s[w+28>>2]=n;s[w+20>>2]=0;s[w+16>>2]=0;a=s[757]|0;i=1<<n;if(!(a&i)){s[757]=a|i;s[r>>2]=w;s[w+24>>2]=r;s[w+12>>2]=w;s[w+8>>2]=w;return}r=s[r>>2]|0;e:do{if((s[r+4>>2]&-8|0)!=(o|0)){n=o<<((n|0)==31?0:25-(n>>>1)|0);while(1){a=r+16+(n>>>31<<2)|0;i=s[a>>2]|0;if(!i)break;if((s[i+4>>2]&-8|0)==(o|0)){r=i;break e}else{n=n<<1;r=i}}if(a>>>0<(s[760]|0)>>>0)Ie();s[a>>2]=w;s[w+24>>2]=r;s[w+12>>2]=w;s[w+8>>2]=w;return}}while(0);a=r+8|0;i=s[a>>2]|0;v=s[760]|0;if(!(i>>>0>=v>>>0&r>>>0>=v>>>0))Ie();s[i+12>>2]=w;s[a>>2]=w;s[w+8>>2]=i;s[w+12>>2]=r;s[w+24>>2]=0;return}function Ws(e,t,r,i,o,l,p,f,m,h,b,g){e=e|0;t=t|0;r=r|0;i=i|0;o=o|0;l=l|0;p=p|0;f=f|0;m=m|0;h=h|0;b=+b;g=g|0;var v=0,w=0,k=0.0,y=0.0,_=0,S=0,x=0.0,C=0.0,q=0.0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0.0,F=0,D=0,N=0,L=0,j=0,z=0,H=0,B=0,U=0,Q=0,W=0.0,Y=0.0,V=0.0,G=0.0,K=0,J=0;Q=d;d=d+240|0;S=Q+224|0;_=Q+216|0;E=Q+208|0;T=Q+200|0;v=Q+136|0;L=Q+72|0;z=Q;H=Q+232|0;B=Q+228|0;u[v>>3]=100.0;u[v+8>>3]=100.0;u[v+16>>3]=110.0;u[v+24>>3]=100.0;u[v+32>>3]=110.0;u[v+40>>3]=110.0;u[v+48>>3]=100.0;u[v+56>>3]=110.0;u[L>>3]=+u[h>>3];u[L+8>>3]=+u[h+8>>3];u[L+16>>3]=+u[h+16>>3];u[L+24>>3]=+u[h+24>>3];u[L+32>>3]=+u[h+32>>3];u[L+40>>3]=+u[h+40>>3];u[L+48>>3]=+u[h+48>>3];u[L+56>>3]=+u[h+56>>3];Gs(v,L,z);q=+u[L>>3];Y=+u[L+16>>3];x=q-Y;$=+u[L+8>>3];W=+u[L+24>>3];k=$-W;v=~~(x*x+k*k);k=+u[L+32>>3];x=+u[L+48>>3];G=k-x;y=+u[L+40>>3];C=+u[L+56>>3];V=y-C;L=~~(G*G+V*V);k=Y-k;y=W-y;w=~~(k*k+y*y);q=x-q;$=C-$;j=~~(q*q+$*$);v=~~(+(((L|0)>(v|0)?L:v)|0)*b*b);w=~~(+(((j|0)>(w|0)?j:w)|0)*b*b);if(!e){h=r;while(1){if((h|0)<(i|0)&(re(h,h)|0)<(v|0))h=h<<1;else break}v=r;while(1){if((v|0)<(i|0)&(re(v,v)|0)<(w|0))v=v<<1;else break}}else{h=r;while(1){if((h|0)<(i|0)&(re(h<<2,h)|0)<(v|0))h=h<<1;else break}v=r;while(1){if((v|0)<(i|0)&(re(v<<2,v)|0)<(w|0))v=v<<1;else break}}j=(h|0)>(i|0)?i:h;N=(v|0)>(i|0)?i:v;D=(j|0)/(r|0)|0;F=(N|0)/(r|0)|0;k=(1.0-b)*.5*10.0;$=b*10.0;L=re(r,r)|0;e:do{if(!t){O=L*3|0;h=Hs(O,4)|0;if(!h){en(3,5472,T);kt(1)}do{switch(f|0){case 0:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((re(w,l)|0)+v|0)*3|0;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+2)>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+1)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 1:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((re(w,l)|0)+v|0)*3|0;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+w>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+1)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w+2)>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 2:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(re(w,l)|0)+v<<2;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 3:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(re(w,l)|0)+v<<2;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+w>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|2)>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 4:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(re(w,l)|0)+v<<2;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|3)>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 5:case 12:case 13:case 14:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=n[o+((re(w,l)|0)+v)>>0]|0;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+w;v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+w;e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+w}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 6:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(re(w,l)|0)+v<<2;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|3)>>0]|0);v=h+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);e=h+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|1)>>0]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 7:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){J=re(w,l)|0;K=(v&65534)+J<<1;Y=+((n[o+K>>0]|0)+-128|0);G=+((n[o+(K+2)>>0]|0)+-128|0);V=+((n[o+(J+v<<1|1)>>0]|0)+-16|0)*298.0820007324219;J=~~(Y*516.4110107421875+V)>>8;K=~~(V-Y*100.29100036621094-G*208.1199951171875)>>8;w=~~(V+G*408.5830078125)>>8;J=(J|0)>0?J:0;e=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;v=h+(e<<2)|0;s[v>>2]=((J|0)<255?J:255)+(s[v>>2]|0);K=(K|0)>0?K:0;v=h+(e+1<<2)|0;s[v>>2]=((K|0)<255?K:255)+(s[v>>2]|0);w=(w|0)>0?w:0;e=h+(e+2<<2)|0;s[e>>2]=((w|0)<255?w:255)+(s[e>>2]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 8:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=re(w,l)|0;K=(v&65534)+w<<1;Y=+((n[o+(K|1)>>0]|0)+-128|0);G=+((n[o+(K+3)>>0]|0)+-128|0);V=+((n[o+(w+v<<1)>>0]|0)+-16|0)*298.0820007324219;v=~~(V+Y*516.4110107421875)>>8;w=~~(V-Y*100.29100036621094-G*208.1199951171875)>>8;K=~~(V+G*408.5830078125)>>8;v=(v|0)>0?v:0;J=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;e=h+(J<<2)|0;s[e>>2]=((v|0)<255?v:255)+(s[e>>2]|0);w=(w|0)>0?w:0;e=h+(J+1<<2)|0;s[e>>2]=((w|0)<255?w:255)+(s[e>>2]|0);K=(K|0)>0?K:0;J=h+(J+2<<2)|0;s[J>>2]=((K|0)<255?K:255)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 9:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;e=h+(J<<2)|0;s[e>>2]=(w<<3&248|4)+(s[e>>2]|0);K=n[o+K>>0]|0;e=h+(J+1<<2)|0;s[e>>2]=(K<<5&224|w>>>3&28|2)+(s[e>>2]|0);J=h+(J+2<<2)|0;s[J>>2]=(K&248|4)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 10:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;e=h+(J<<2)|0;s[e>>2]=(w<<2&248|4)+(s[e>>2]|0);K=n[o+K>>0]|0;e=h+(J+1<<2)|0;s[e>>2]=(K<<5&224|w>>>3&24|4)+(s[e>>2]|0);J=h+(J+2<<2)|0;s[J>>2]=(K&248|4)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}case 11:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;J=((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)|0)*3|0;e=h+(J<<2)|0;s[e>>2]=(s[e>>2]|0)+((n[o+(K|1)>>0]|0)&240|8);K=n[o+K>>0]|0;e=h+(J+1<<2)|0;s[e>>2]=(K<<4&240|8)+(s[e>>2]|0);J=h+(J+2<<2)|0;s[J>>2]=(K&240|8)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}break}default:{en(3,4615,E);U=278;break e}}}while(0);w=re(F,D)|0;if(L){v=0;do{a[g+v>>0]=((s[h+(v<<2)>>2]|0)>>>0)/(w>>>0)|0;v=v+1|0}while((v|0)<(O|0))}zs(h);h=0}else{h=Hs(L,4)|0;if(!h){en(3,5472,_);kt(1)}t:do{if(f>>>0<2){x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)>0){t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=((re(w,l)|0)+v|0)*3|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K+1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K+2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0))}}else{if((f&-2|0)==2){x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break;t=(j|0)>0;S=0;while(1){y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<2;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K|1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K|2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0;if((S|0)>=(N|0))break t}}if((f&-3|0)==4){x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break;t=(j|0)>0;S=0;while(1){y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<2;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K|2)>>0]|0)+(n[o+(K|1)>>0]|0)+(n[o+(K|3)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0;if((S|0)>=(N|0))break t}}switch(f|0){case 5:case 12:case 13:case 14:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((re(w,l)|0)+v)>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}case 7:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((re(w,l)|0)+v<<1|1)>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}case 8:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((re(w,l)|0)+v<<1)>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}case 9:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((K<<3&248|4)+(O&248|4)+(O<<5&224|K>>>3&28|2)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}case 10:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((K<<2&248|4)+(O&248|4)+(O<<5&224|K>>>3&24|4)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}case 11:{x=k+100.0;C=+(N|0);q=+(j|0);T=z+48|0;E=z+56|0;f=z+64|0;P=z+8|0;A=z+16|0;M=z+24|0;I=z+32|0;R=z+40|0;i=(e|0)==1;if((N|0)<=0)break t;t=(j|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[A>>3]+(k*+u[z>>3]+y*+u[P>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(m,G,k,H,B)|0;k=+c[H>>2];if(i){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(re(w,l)|0)+v<<1;O=n[o+K>>0]|0;J=h+((re((S|0)/(F|0)|0,r)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((O<<4&240|8)+(O&240|8)+((n[o+(K|1)>>0]|0)&240|8)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(j|0))}S=S+1|0}while((S|0)<(N|0));break}default:{en(3,4615,S);U=278;break e}}}}while(0);v=re(F,D)|0;if(L){w=0;do{a[g+w>>0]=((s[h+(w<<2)>>2]|0)>>>0)/(v>>>0)|0;w=w+1|0}while((w|0)<(L|0))}zs(h);h=0}}while(0);if((U|0)==278){zs(h);h=-1}d=Q;return h|0}function Ys(e,t,r,i,o,l,c){e=e|0;t=t|0;r=r|0;i=i|0;o=o|0;l=l|0;c=c|0;var p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0;y=d;d=d+32|0;h=y+24|0;m=y+8|0;k=y;e:do{if((t+-3|0)>>>0>5){s[r>>2]=-1;s[i>>2]=0;u[o>>3]=-1.0;p=-1}else{s[m>>2]=0;w=t+-1|0;s[m+4>>2]=re(w,t)|0;g=re(t,t)|0;s[m+8>>2]=g+-1;s[m+12>>2]=w;f=a[e+(s[m>>2]|0)>>0]|0;p=(f&255)>0?f:0;f=(f&255)<255?f:-1;v=a[e+(s[m+4>>2]|0)>>0]|0;p=(v&255)>(p&255)?v:p;f=(v&255)<(f&255)?v:f;v=a[e+(s[m+8>>2]|0)>>0]|0;p=(v&255)>(p&255)?v:p;f=(v&255)<(f&255)?v:f;v=a[e+(s[m+12>>2]|0)>>0]|0;p=((v&255)>(p&255)?v:p)&255;f=((v&255)<(f&255)?v:f)&255;if((p-f|0)<30){s[r>>2]=-1;s[i>>2]=0;u[o>>3]=-1.0;p=-2;break}b=(p+f|0)>>>1;a[h>>0]=(n[e+(s[m>>2]|0)>>0]|0)>>>0<b>>>0&1;a[h+1>>0]=(n[e+(s[m+4>>2]|0)>>0]|0)>>>0<b>>>0&1;a[h+2>>0]=(n[e+(s[m+8>>2]|0)>>0]|0)>>>0<b>>>0&1;a[h+3>>0]=(n[e+(s[m+12>>2]|0)>>0]|0)>>>0<b>>>0&1;f=0;while(1){p=f+1|0;if(((a[h+f>>0]|0)==1?(a[h+((p|0)%4|0)>>0]|0)==1:0)?(a[h+((f+2|0)%4|0)>>0]|0)==0:0){p=f;f=10;break}if((p|0)<4)f=p;else{f=12;break}}if((f|0)==10)s[i>>2]=p;else if((f|0)==12?(p|0)==4:0){s[r>>2]=-1;s[i>>2]=0;u[o>>3]=-1.0;p=-3;break}if(!g)v=255;else{p=255;f=0;do{v=e+f|0;h=n[v>>0]|0;m=h-b|0;m=(m|0)<0?0-m|0:m;p=(m|0)<(p|0)?m:p;a[v>>0]=h>>>0<b>>>0&1;f=f+1|0}while((f|0)<(g|0));v=p}switch(s[i>>2]|0){case 0:{if((t|0)>0){g=(t|0)==0;f=0;p=0;i=0;do{h=(i|0)==(w|0);b=re(i,t)|0;if(!g){m=0;do{if((m|i|0)!=0?!(h&((m|0)==0|(m|0)==(w|0))):0){f=Yc(f|0,p|0,1)|0;f=(a[e+(m+b)>>0]|0)!=0|f;p=I}m=m+1|0}while((m|0)!=(t|0))}i=i+1|0}while((i|0)<(t|0))}else{f=0;p=0}break}case 1:{if((t|0)>0){g=(t|0)>0;f=0;p=0;i=0;do{h=(i|0)==0;b=(i|0)==(w|0);if(g){m=w;while(1){_=(m|0)==(w|0);if(!(h&_)?!(b&(_|(m|0)==0)):0){f=Yc(f|0,p|0,1)|0;f=(a[e+((re(m,t)|0)+i)>>0]|0)!=0|f;p=I}if((m|0)>0)m=m+-1|0;else break}}i=i+1|0}while((i|0)<(t|0))}else{f=0;p=0}break}case 2:{if((t|0)>0){g=(t|0)>0;f=0;p=0;i=w;while(1){b=(i|0)==(w|0)|(i|0)==0;h=re(i,t)|0;if(g){m=w;while(1){if(!(b&(m|0)==(w|0)|(m|i|0)==0)){f=Yc(f|0,p|0,1)|0;f=(a[e+(m+h)>>0]|0)!=0|f;p=I}if((m|0)>0)m=m+-1|0;else break}}if((i|0)>0)i=i+-1|0;else break}}else{f=0;p=0}break}case 3:{if((t|0)>0){g=(t|0)>0;f=0;p=0;i=w;while(1){h=(i|0)==(w|0);b=(i|0)==0;if(g){m=0;do{if(!(h&(m|0)==0|(m|i|0)==0|b&(m|0)==(w|0))){f=Yc(f|0,p|0,1)|0;f=(a[e+((re(m,t)|0)+i)>>0]|0)!=0|f;p=I}m=m+1|0}while((m|0)<(t|0))}if((i|0)>0)i=i+-1|0;else break}}else{f=0;p=0}break}default:{f=0;p=0}}u[o>>3]=(v|0)>30?1.0:+(v|0)/30.0;switch(l|0){case 259:{_=a[4551+f>>0]|0;l=_<<24>>24;c=k;s[c>>2]=l;s[c+4>>2]=((l|0)<0)<<31>>31;if(_<<24>>24<0){s[r>>2]=-1;u[o>>3]=-1.0;p=-4;break e}break}case 515:{p=a[4423+f>>0]|0;l=p<<24>>24;_=k;s[_>>2]=l;s[_+4>>2]=((l|0)<0)<<31>>31;if(c)s[c>>2]=n[4487+f>>0];if(p<<24>>24<0){s[r>>2]=-1;u[o>>3]=-1.0;p=-4;break e}break}case 772:case 1028:{p=Ks(l,f,p,0,k)|0;if((p|0)<0){s[r>>2]=-1;u[o>>3]=-1.0;p=-4;break e}if((c|0)!=0&(p|0)>0)s[c>>2]=p;break}default:{_=k;s[_>>2]=f;s[_+4>>2]=p}}s[r>>2]=s[k>>2];p=0}}while(0);d=y;return p|0}function Vs(e,t,r,a,i,o,l){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;o=o|0;l=l|0;var c=0,p=0.0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0,C=0,q=0,T=0,E=0,P=0.0;E=d;d=d+16|0;c=E+8|0;f=E;e:do{if(!e){s[i>>2]=0;s[o>>2]=0;u[l>>3]=-1.0;t=-1}else switch(t|0){case 0:{m=re(a,a)|0;C=m*3|0;q=js(m*12|0)|0;if(!q){en(3,5472,f);kt(1)}if(!m)t=0;else{t=0;c=0;do{t=((n[r+c>>0]|0)^255)+t|0;c=c+1|0}while((c|0)<(C|0))}c=(t|0)/(C|0)|0;if(!m)p=0.0;else{f=0;t=0;do{S=((n[r+f>>0]|0)^255)-c|0;s[q+(f<<2)>>2]=S;t=(re(S,S)|0)+t|0;f=f+1|0}while((f|0)<(C|0));p=+(t|0)}x=+U(+p);if(x/(+(a|0)*1.7320508)<15.0){s[i>>2]=0;s[o>>2]=0;u[l>>3]=-1.0;zs(q);t=-2;break e}y=s[e>>2]|0;_=e+12|0;S=e+16|0;if((y|0)>0){k=s[e+8>>2]|0;v=(m|0)==0;f=-1;w=0;p=0.0;c=-1;t=-1;do{t:while(1){f=f+1|0;switch(s[k+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{T=17;break t}}}if((T|0)==17){T=0;h=f<<2;b=s[S>>2]|0;g=0;do{e=g+h|0;if(v)m=0;else{r=s[(s[_>>2]|0)+(e<<2)>>2]|0;a=0;m=0;do{m=(re(s[r+(a<<2)>>2]|0,s[q+(a<<2)>>2]|0)|0)+m|0;a=a+1|0}while((a|0)<(C|0))}P=+(m|0)/+u[b+(e<<3)>>3]/x;e=P>p;c=e?g:c;t=e?f:t;p=e?P:p;g=g+1|0}while((g|0)!=4)}w=w+1|0}while((w|0)<(y|0))}else{p=0.0;c=-1;t=-1}s[o>>2]=c;s[i>>2]=t;u[l>>3]=p;zs(q);t=0;break e}case 1:{C=re(a,a)|0;q=js(C<<2)|0;if(!q){en(3,5472,c);kt(1)}if(!C)t=0;else{t=0;c=0;do{t=((n[r+c>>0]|0)^255)+t|0;c=c+1|0}while((c|0)<(C|0))}c=(t|0)/(C|0)|0;if(!C)p=0.0;else{f=0;t=0;do{S=((n[r+f>>0]|0)^255)-c|0;s[q+(f<<2)>>2]=S;t=(re(S,S)|0)+t|0;f=f+1|0}while((f|0)<(C|0));p=+(t|0)}x=+U(+p);if(x/+(a|0)<15.0){s[i>>2]=0;s[o>>2]=0;u[l>>3]=-1.0;zs(q);t=-2;break e}y=s[e>>2]|0;_=e+20|0;S=e+24|0;if((y|0)>0){v=s[e+8>>2]|0;w=(C|0)==0;f=-1;k=0;p=0.0;c=-1;t=-1;do{t:while(1){f=f+1|0;switch(s[v+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{T=37;break t}}}if((T|0)==37){T=0;h=f<<2;b=s[S>>2]|0;g=0;do{e=g+h|0;if(w)m=0;else{r=s[(s[_>>2]|0)+(e<<2)>>2]|0;a=0;m=0;do{m=(re(s[r+(a<<2)>>2]|0,s[q+(a<<2)>>2]|0)|0)+m|0;a=a+1|0}while((a|0)<(C|0))}P=+(m|0)/+u[b+(e<<3)>>3]/x;e=P>p;c=e?g:c;t=e?f:t;p=e?P:p;g=g+1|0}while((g|0)!=4)}k=k+1|0}while((k|0)<(y|0))}else{p=0.0;c=-1;t=-1}s[o>>2]=c;s[i>>2]=t;u[l>>3]=p;zs(q);t=0;break e}default:{t=-1;break e}}}while(0);d=E;return t|0}function Gs(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0,c=0,d=0,p=0,f=0,m=0,h=0;a=nn(8,8)|0;i=nn(8,1)|0;n=nn(8,1)|0;o=s[a>>2]|0;l=s[i>>2]|0;c=0;do{h=e+(c<<4)|0;d=c<<4;u[o+(d<<3)>>3]=+u[h>>3];m=e+(c<<4)+8|0;u[o+((d|1)<<3)>>3]=+u[m>>3];u[o+((d|2)<<3)>>3]=1.0;u[o+((d|3)<<3)>>3]=0.0;u[o+((d|4)<<3)>>3]=0.0;u[o+((d|5)<<3)>>3]=0.0;f=t+(c<<4)|0;u[o+((d|6)<<3)>>3]=-(+u[h>>3]*+u[f>>3]);u[o+((d|7)<<3)>>3]=-(+u[m>>3]*+u[f>>3]);u[o+((d|8)<<3)>>3]=0.0;u[o+((d|9)<<3)>>3]=0.0;u[o+((d|10)<<3)>>3]=0.0;u[o+((d|11)<<3)>>3]=+u[h>>3];u[o+((d|12)<<3)>>3]=+u[m>>3];u[o+((d|13)<<3)>>3]=1.0;p=t+(c<<4)+8|0;u[o+((d|14)<<3)>>3]=-(+u[h>>3]*+u[p>>3]);u[o+((d|15)<<3)>>3]=-(+u[m>>3]*+u[p>>3]);d=c<<1;u[l+(d<<3)>>3]=+u[f>>3];u[l+((d|1)<<3)>>3]=+u[p>>3];c=c+1|0}while((c|0)!=4);hn(a)|0;pn(n,a,i)|0;h=s[n>>2]|0;u[r>>3]=+u[h>>3];u[r+8>>3]=+u[h+8>>3];u[r+16>>3]=+u[h+16>>3];h=s[n>>2]|0;u[r+24>>3]=+u[h+24>>3];u[r+32>>3]=+u[h+32>>3];u[r+40>>3]=+u[h+40>>3];h=s[n>>2]|0;u[r+48>>3]=+u[h+48>>3];u[r+56>>3]=+u[h+56>>3];u[r+64>>3]=1.0;dn(a)|0;dn(i)|0;dn(n)|0;return}function Ks(e,t,r,i,o){e=e|0;t=t|0;r=r|0;i=i|0;o=o|0;var l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,R=0,O=0;O=d;d=d+2320|0;c=O+2304|0;x=O+864|0;k=O+784|0;R=O+704|0;_=O+624|0;y=O+548|0;M=O+40|0;P=O;switch(e|0){case 772:{i=9;l=1;u=3;break}case 1028:{i=5;l=2;u=3;break}case 2830:{q=900;v=1472;E=64;A=120;C=127;T=i;l=9;u=6;break}default:r=-1}if((u|0)==3){e=0;while(1){a[c+e>>0]=t&1;t=Gc(t|0,r|0,1)|0;e=e+1|0;if((e|0)==13)break;else r=I}q=840;v=1408;E=i;A=13;C=15;T=c;u=6}do{if((u|0)==6){g=l<<1;c=1;r=0;while(1){i=y+(c<<2)|0;s[i>>2]=0;e=0;t=0;do{if(a[T+t>>0]|0){e=e^s[q+(((re(t,c)|0)%(C|0)|0)<<2)>>2];s[i>>2]=e}t=t+1|0}while((t|0)<(A|0));r=(e|0)==0?r:1;s[i>>2]=s[v+(e<<2)>>2];if((c|0)<(g|0))c=c+1|0;else break}S=(r|0)!=0;if(S){s[k>>2]=0;r=s[y+4>>2]|0;s[k+4>>2]=r;s[x>>2]=0;s[x+72>>2]=1;if((g|0)>1){e=1;do{s[x+(e<<2)>>2]=-1;s[x+72+(e<<2)>>2]=0;e=e+1|0}while((e|0)<(g|0))}s[R>>2]=0;s[R+4>>2]=0;s[_>>2]=-1;s[_+4>>2]=0;h=0;b=0;while(1){i=b;b=b+1|0;m=k+(b<<2)|0;if((r|0)==-1){c=i+2|0;s[R+(c<<2)>>2]=h;if((h|0)<0)f=h;else{r=0;while(1){m=x+(b*72|0)+(r<<2)|0;f=s[m>>2]|0;s[x+(c*72|0)+(r<<2)>>2]=f;s[m>>2]=s[v+(f<<2)>>2];if((r|0)<(h|0))r=r+1|0;else{f=h;break}}}}else{e=i;while(1){r=(e|0)>0;if(r&(s[k+(e<<2)>>2]|0)==-1)e=e+-1|0;else break}if(r){t=e;do{r=t;t=t+-1|0;if((s[k+(t<<2)>>2]|0)!=-1)e=(s[_+(e<<2)>>2]|0)<(s[_+(t<<2)>>2]|0)?t:e}while((r|0)>1)}t=R+(e<<2)|0;p=b-e|0;f=p+(s[t>>2]|0)|0;c=i+2|0;f=(h|0)>(f|0)?h:f;s[R+(c<<2)>>2]=f;r=0;do{s[x+(c*72|0)+(r<<2)>>2]=0;r=r+1|0}while((r|0)<(g|0));r=s[t>>2]|0;t=k+(e<<2)|0;if((r|0)>=0){u=0;while(1){i=s[x+(e*72|0)+(u<<2)>>2]|0;if((i|0)!=-1)s[x+(c*72|0)+(p+u<<2)>>2]=s[q+(((i+C+(s[m>>2]|0)-(s[t>>2]|0)|0)%(C|0)|0)<<2)>>2];if((u|0)<(r|0))u=u+1|0;else break}}if((h|0)>=0){r=0;while(1){m=x+(b*72|0)+(r<<2)|0;p=s[m>>2]|0;u=x+(c*72|0)+(r<<2)|0;s[u>>2]=s[u>>2]^p;s[m>>2]=s[v+(p<<2)>>2];if((r|0)<(h|0))r=r+1|0;else break}}}s[_+(c<<2)>>2]=b-f;if((b|0)>=(g|0))break;r=s[y+(c<<2)>>2]|0;if((r|0)==-1)r=0;else r=s[q+(r<<2)>>2]|0;i=k+(c<<2)|0;s[i>>2]=r;if((f|0)>=1){t=1;while(1){e=s[y+(c-t<<2)>>2]|0;if((e|0)!=-1?(w=s[x+(c*72|0)+(t<<2)>>2]|0,(w|0)!=0):0){r=r^s[q+((((s[v+(w<<2)>>2]|0)+e|0)%(C|0)|0)<<2)>>2];s[i>>2]=r}if((t|0)<(f|0))t=t+1|0;else break}}r=s[v+(r<<2)>>2]|0;s[i>>2]=r;if((f|0)>(l|0))break;else h=f}if((f|0)>(l|0)){r=-1;break}if((f|0)>=0){r=0;while(1){_=x+(c*72|0)+(r<<2)|0;s[_>>2]=s[v+(s[_>>2]<<2)>>2];if((r|0)<(f|0))r=r+1|0;else break}}if((f|0)>=1){r=1;while(1){s[P+(r<<2)>>2]=s[x+(c*72|0)+(r<<2)>>2];if((r|0)<(f|0))r=r+1|0;else break}}u=(f|0)<1;r=0;p=1;do{if(u)e=1;else{l=1;e=1;while(1){t=P+(l<<2)|0;i=s[t>>2]|0;if((i|0)!=-1){x=(i+l|0)%(C|0)|0;s[t>>2]=x;e=s[q+(x<<2)>>2]^e}if((l|0)<(f|0))l=l+1|0;else break}}if(!e){s[M+(r<<2)>>2]=C-p;r=r+1|0}p=p+1|0}while((C|0)>=(p|0));if((r|0)!=(f|0)){r=-1;break}if((f|0)>0){r=0;do{P=T+(s[M+(r<<2)>>2]|0)|0;a[P>>0]=n[P>>0]^1;r=r+1|0}while((r|0)<(f|0))}}else c=0;e=o;s[e>>2]=0;s[e+4>>2]=0;e=1;t=0;i=0;l=0;r=A-E|0;while(1){M=ru(n[T+r>>0]|0,0,e|0,t|0)|0;i=Vc(M|0,I|0,i|0,l|0)|0;l=I;M=o;s[M>>2]=i;s[M+4>>2]=l;e=Yc(e|0,t|0,1)|0;r=r+1|0;if((r|0)>=(A|0))break;else t=I}if(S)r=s[R+(c<<2)>>2]|0;else r=0}}while(0);d=O;return r|0}function Js(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0.0;q=d;d=d+32|0;C=q+24|0;n=q+16|0;r=q+8|0;do{if(e){if(!t){en(3,4674,r);r=-1;break}x=e+8|0;i=s[e+4>>2]|0;e:do{if((i|0)>0){a=s[x>>2]|0;r=0;do{if(!(s[a+(r<<2)>>2]|0))break e;r=r+1|0}while((r|0)<(i|0))}else r=0}while(0);if((r|0)!=(i|0)){S=ks(t)|0;if(!S){en(3,4719,n);r=-1;break}g=e+28|0;v=r<<2;w=e+12|0;k=e+20|0;y=e+16|0;_=e+24|0;i=qs(S,4742)|0;a=0;e:while(1){b=a+v|0;h=0;t=0;do{f=(h|0)==0;m=(h|0)==2;n=s[g>>2]|0;if((n|0)>0){p=0;do{if((n|0)>0){c=0;do{if(!i){a=17;break e}n=us(i)|0;i=qs(0,4742)|0;n=255-n|0;l=(((re(s[g>>2]|0,p)|0)+c|0)*3|0)+h|0;s[(s[(s[w>>2]|0)+(b<<2)>>2]|0)+(l<<2)>>2]=n;l=(re(s[g>>2]|0,p)|0)+c|0;o=s[(s[k>>2]|0)+(b<<2)>>2]|0;l=o+(l<<2)|0;if(!f){s[l>>2]=(s[l>>2]|0)+n;if(m){l=o+((re(s[g>>2]|0,p)|0)+c<<2)|0;s[l>>2]=(s[l>>2]|0)/3|0}}else s[l>>2]=n;t=n+t|0;c=c+1|0;n=s[g>>2]|0}while((c|0)<(n|0))}p=p+1|0}while((p|0)<(n|0))}h=h+1|0}while((h|0)<3);n=s[g>>2]|0;c=(t|0)/(re(n*3|0,n)|0)|0;if((re(n*3|0,n)|0)>0){o=s[(s[w>>2]|0)+(b<<2)>>2]|0;l=0;t=0;do{h=o+(l<<2)|0;n=(s[h>>2]|0)-c|0;s[h>>2]=n;t=(re(n,n)|0)+t|0;l=l+1|0;n=s[g>>2]|0}while((l|0)<(re(n*3|0,n)|0))}else t=0;T=+U(+ +(t|0));u[(s[y>>2]|0)+(b<<3)>>3]=T==0.0?1.0e-07:T;if(!(re(n,n)|0))t=0;else{n=s[(s[k>>2]|0)+(b<<2)>>2]|0;o=0;t=0;do{m=n+(o<<2)|0;h=(s[m>>2]|0)-c|0;s[m>>2]=h;t=(re(h,h)|0)+t|0;o=o+1|0;h=s[g>>2]|0}while((o|0)<(re(h,h)|0))}T=+U(+ +(t|0));u[(s[_>>2]|0)+(b<<3)>>3]=T==0.0?1.0e-07:T;a=a+1|0;if((a|0)>=4){a=32;break}}if((a|0)==17){en(3,4747,C);zs(S);r=-1;break}else if((a|0)==32){zs(S);s[(s[x>>2]|0)+(r<<2)>>2]=1;s[e>>2]=(s[e>>2]|0)+1;break}}else r=-1}else{en(3,4649,q);r=-1}}while(0);d=q;return r|0}function Xs(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0,l=0,c=0;c=d;d=d+32|0;l=c+16|0;o=c+8|0;r=c;n=Wi(t,4854)|0;do{if(n){Ji(n,0,2)|0;r=es(n)|0;Ji(n,0,0)|0;i=js(r+1|0)|0;if(!i){en(3,5472,o);Hi(n)|0;r=-1;break}o=Vi(i,r,1,n)|0;Hi(n)|0;if(!o){s[l>>2]=t;en(3,4820,l);zs(i);r=-1;break}else{a[i+r>>0]=0;r=Js(e,i)|0;zs(i);break}}else{s[r>>2]=t;en(3,4774,r);r=-1}}while(0);d=c;return r|0}function Zs(e,t){e=e|0;t=t|0;t=(s[e+8>>2]|0)+(t<<2)|0;if(!(s[t>>2]|0))t=-1;else{s[t>>2]=0;s[e>>2]=(s[e>>2]|0)+-1;t=1}return t|0}function en(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l+16|0;i=l;s[o>>2]=0;if(((t|0)!=0&(s[496]|0)<=(e|0)?(a[t>>0]|0)!=0:0)?(s[i>>2]=r,n=ss(o,t,i)|0,(n|0)>-1):0){i=s[497]|0;do{if(i){if(!(s[498]|0)){Uu[i&15](s[o>>2]|0);break}r=ct()|0;e=s[500]|0;if((r|0)==(s[499]|0)){if((e|0)>0){Uu[i&15](s[502]|0);s[500]=0;i=s[497]|0}Uu[i&15](s[o>>2]|0);break}i=s[501]|0;if((e|0)<(i|0)){t=(s[502]|0)+e|0;if((n|0)<(-3-e+i|0)){vs(t,s[o>>2]|0)|0;s[500]=(s[500]|0)+n;break}else{a[t>>0]=46;a[t+1>>0]=46;a[t+2>>0]=46;a[t+3>>0]=0;s[500]=s[501];break}}}else Yi(s[o>>2]|0,s[659]|0)|0}while(0);zs(s[o>>2]|0)}d=l;return}function tn(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,s=0,n=0,o=0;o=0;do{a=e+(o<<5)|0;i=e+(o<<5)+8|0;s=e+(o<<5)+16|0;n=0;do{u[r+(o<<5)+(n<<3)>>3]=+u[a>>3]*+u[t+(n<<3)>>3]+ +u[i>>3]*+u[t+32+(n<<3)>>3]+ +u[s>>3]*+u[t+64+(n<<3)>>3];n=n+1|0}while((n|0)!=4);n=r+(o<<5)+24|0;u[n>>3]=+u[e+(o<<5)+24>>3]+ +u[n>>3];o=o+1|0}while((o|0)!=3);return 0}function rn(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0;l=nn(4,4)|0;r=s[l>>2]|0;a=s[l>>2]|0;i=s[l>>2]|0;n=s[l>>2]|0;o=0;do{c=o<<2;u[r+(c<<3)>>3]=+u[e+(o<<5)>>3];u[a+(1+c<<3)>>3]=+u[e+(o<<5)+8>>3];u[i+(2+c<<3)>>3]=+u[e+(o<<5)+16>>3];u[n+(3+c<<3)>>3]=+u[e+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);r=s[l>>2]|0;a=r+96|0;s[a>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;s[a+20>>2]=0;u[r+120>>3]=1.0;hn(l)|0;r=s[l>>2]|0;a=s[l>>2]|0;i=s[l>>2]|0;n=s[l>>2]|0;o=0;do{c=o<<2;u[t+(o<<5)>>3]=+u[r+(c<<3)>>3];u[t+(o<<5)+8>>3]=+u[a+(1+c<<3)>>3];u[t+(o<<5)+16>>3]=+u[i+(2+c<<3)>>3];u[t+(o<<5)+24>>3]=+u[n+(3+c<<3)>>3];o=o+1|0}while((o|0)!=3);dn(l)|0;return 0}function an(e){e=e|0;switch(e|0){case 1:case 0:{e=3;break}case 6:case 4:case 3:case 2:{e=4;break}case 14:case 13:case 12:case 5:{e=1;break}case 11:case 10:case 9:case 8:case 7:{e=2;break}default:e=0}return e|0}function sn(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var s=0;do{if((e|0)!=0&(t|0)!=0&(r|0)!=0){s=xs(t,47)|0;if(!s){a[e>>0]=0;break}s=s+((i|0)!=0&1)-t|0;if((s+1|0)>>>0<=r>>>0){Ss(e,t,s)|0;a[e+s>>0]=0}else e=0}else e=0}while(0);return e|0}function nn(e,t){e=e|0;t=t|0;var r=0,a=0;r=js(12)|0;do{if(r){a=js(re(e<<3,t)|0)|0;s[r>>2]=a;if(!a){zs(r);r=0;break}else{s[r+4>>2]=e;s[r+8>>2]=t;break}}else r=0}while(0);return r|0}function on(e){e=e|0;var t=0;t=nn(s[e+4>>2]|0,s[e+8>>2]|0)|0;if(t){if((un(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function ln(e,t){e=e|0;t=t|0;var r=0;r=nn(s[e+4>>2]|0,s[t+8>>2]|0)|0;if(r){if((pn(r,e,t)|0)<0){dn(r)|0;r=0}}else r=0;return r|0}function cn(e){e=e|0;var t=0;t=nn(s[e+8>>2]|0,s[e+4>>2]|0)|0;if(t){if((bn(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function un(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,d=0,p=0;r=s[e+4>>2]|0;if((r|0)==(s[t+4>>2]|0)?(l=s[e+8>>2]|0,(l|0)==(s[t+8>>2]|0)):0){if((r|0)>0){a=(l|0)>0;d=0;do{i=re(l,d)|0;if(a){n=s[t>>2]|0;o=s[e>>2]|0;c=0;do{p=i+c|0;u[o+(p<<3)>>3]=+u[n+(p<<3)>>3];c=c+1|0}while((c|0)<(l|0))}d=d+1|0}while((d|0)<(r|0));r=0}else r=0}else r=-1;return r|0}function dn(e){e=e|0;if(e){zs(s[e>>2]|0);zs(e)}return 0}function pn(e,t,r){e=e|0;t=t|0;r=r|0;var a=0.0,i=0,n=0,o=0,l=0,c=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0;f=s[t+8>>2]|0;if(((f|0)==(s[r+4>>2]|0)?(g=s[e+4>>2]|0,(g|0)==(s[t+4>>2]|0)):0)?(m=s[e+8>>2]|0,(m|0)==(s[r+8>>2]|0)):0){v=(m|0)>0?m:0;if((g|0)>0){h=(m|0)>0;b=(f|0)>0;c=s[e>>2]|0;p=0;while(1){e=re(f,p)|0;if(h){i=0;d=c;while(1){u[d>>3]=0.0;if(b){a=0.0;n=0;o=(s[t>>2]|0)+(e<<3)|0;l=(s[r>>2]|0)+(i<<3)|0;while(1){a=a+ +u[o>>3]*+u[l>>3];u[d>>3]=a;n=n+1|0;if((n|0)>=(f|0))break;else{o=o+8|0;l=l+(m<<3)|0}}}i=i+1|0;if((i|0)>=(m|0))break;else d=d+8|0}}p=p+1|0;if((p|0)>=(g|0)){e=0;break}else c=c+(v<<3)|0}}else e=0}else e=-1;return e|0}function fn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0,o=0.0,l=0,c=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0.0,v=0,w=0,k=0;b=s[e+4>>2]|0;v=s[e+8>>2]|0;i=(b|0)<(v|0)?b:v;e:do{if(((((!((b|0)<2|(v|0)<2)?(s[t+8>>2]|0)==(v|0):0)?(s[t+4>>2]|0)==(i|0):0)?(w=r+4|0,(s[w>>2]|0)==(i|0)):0)?(n=a+4|0,(s[n>>2]|0)==(v|0)):0)?(k=on(e)|0,(k|0)!=0):0){g=+U(+ +(b|0));m=s[k+4>>2]|0;h=s[k+8>>2]|0;if(!((m|0)<1|(h|0)<1)?(s[n>>2]|0)==(h|0):0){if(h){i=s[a>>2]|0;e=0;do{u[i+(e<<3)>>3]=0.0;e=e+1|0}while((e|0)!=(h|0))}f=s[k>>2]|0;if(m){i=(h|0)==0;e=0;l=f;while(1){if(!i){n=0;c=l;d=s[a>>2]|0;while(1){u[d>>3]=+u[c>>3]+ +u[d>>3];n=n+1|0;if((n|0)==(h|0))break;else{c=c+8|0;d=d+8|0}}}e=e+1|0;if((e|0)==(m|0))break;else l=l+(h<<3)|0}}o=+(m|0);if(h){i=s[a>>2]|0;e=0;do{p=i+(e<<3)|0;u[p>>3]=+u[p>>3]/o;e=e+1|0}while((e|0)!=(h|0))}d=(h|0)>0?h:0;if((m|0)>0){i=(h|0)>0;e=0;l=f;while(1){if(i){n=0;c=l;p=s[a>>2]|0;while(1){u[c>>3]=+u[c>>3]-+u[p>>3];n=n+1|0;if((n|0)>=(h|0))break;else{c=c+8|0;p=p+8|0}}}e=e+1|0;if((e|0)>=(m|0))break;else l=l+(d<<3)|0}}i=re(v,b)|0;if((i|0)>0){e=0;do{a=f+(e<<3)|0;u[a>>3]=+u[a>>3]/g;e=e+1|0}while((e|0)<(i|0))}i=mn(k,t,r)|0;dn(k)|0;l=s[w>>2]|0;if((l|0)>0){e=s[r>>2]|0;n=0;o=0.0;do{o=o+ +u[e+(n<<3)>>3];n=n+1|0}while((n|0)<(l|0))}else o=0.0;if((l|0)<=0)break;e=s[r>>2]|0;n=0;while(1){r=e+(n<<3)|0;u[r>>3]=+u[r>>3]/o;n=n+1|0;if((n|0)>=(l|0))break e}}dn(k)|0;i=-1}else i=-1}while(0);return i|0}function mn(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0.0,c=0,p=0,f=0,m=0,h=0,b=0.0,g=0,v=0,w=0,k=0.0,y=0.0,_=0,S=0.0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0,N=0,L=0,j=0,z=0,H=0,Q=0,W=0,Y=0.0,V=0.0,G=0.0,K=0,J=0;W=d;d=d+16|0;_=W;M=e+4|0;O=s[M>>2]|0;$=e+8|0;F=s[$>>2]|0;H=(F|0)<(O|0)?F:O;e:do{if(((!((O|0)<2|(F|0)<2)?(z=t+8|0,(s[z>>2]|0)==(F|0)):0)?(D=t+4|0,(s[D>>2]|0)==(H|0)):0)?(N=r+4|0,(s[N>>2]|0)==(H|0)):0){Q=nn(H,H)|0;L=Q+4|0;if((s[L>>2]|0)==(H|0)?(j=Q+8|0,(s[j>>2]|0)==(H|0)):0){I=(O|0)<(F|0);v=s[M>>2]|0;w=s[$>>2]|0;if(I){if((H|0)!=(v|0)){dn(Q)|0;a=-1;break}n=s[Q>>2]|0;if((H|0)>0){p=(H|0)==0;o=(w|0)>0;f=0;g=n;while(1){c=re(f,w)|0;if(!p){h=0;v=g;while(1){if((h|0)>=(f|0)){a=s[e>>2]|0;u[v>>3]=0.0;if(o){l=0.0;m=a+(c<<3)|0;a=a+((re(h,w)|0)<<3)|0;i=0;while(1){l=l+ +u[m>>3]*+u[a>>3];u[v>>3]=l;i=i+1|0;if((i|0)>=(w|0))break;else{m=m+8|0;a=a+8|0}}}}else u[v>>3]=+u[n+((re(h,H)|0)+f<<3)>>3];h=h+1|0;if((h|0)==(H|0))break;else v=v+8|0}}f=f+1|0;if((f|0)>=(H|0))break;else g=g+(H<<3)|0}}}else{if((H|0)!=(w|0)){dn(Q)|0;a=-1;break}n=s[Q>>2]|0;if((H|0)>0){c=(H|0)==0;o=(v|0)>0;p=0;h=n;while(1){if(!c){m=0;g=h;while(1){if((m|0)>=(p|0)){a=s[e>>2]|0;u[g>>3]=0.0;if(o){l=0.0;f=a+(p<<3)|0;a=a+(m<<3)|0;i=0;while(1){l=l+ +u[f>>3]*+u[a>>3];u[g>>3]=l;i=i+1|0;if((i|0)>=(v|0))break;else{f=f+(H<<3)|0;a=a+(H<<3)|0}}}}else u[g>>3]=+u[n+((re(m,H)|0)+p<<3)>>3];m=m+1|0;if((m|0)==(H|0))break;else g=g+8|0}}p=p+1|0;if((p|0)>=(H|0))break;else h=h+(H<<3)|0}}}do{if(((H|0)>=2?(s[N>>2]|0)==(H|0):0)?(R=Pn(H)|0,(R|0)!=0):0){A=H+-1|0;s[_+4>>2]=A;s[_>>2]=(s[R>>2]|0)+8;if((Rn(Q,r,_)|0)<0){An(R)|0;break}T=s[R>>2]|0;u[T>>3]=0.0;if((A|0)>0){E=(H|0)==0;P=A;do{i=P;while(1){if((i|0)<=0)break;y=+B(+ +u[T+(i<<3)>>3]);a=i+-1|0;q=s[r>>2]|0;S=+B(+ +u[q+(a<<3)>>3]);if(y>(S+ +B(+ +u[q+(i<<3)>>3]))*1.0e-06)i=a;else break}x=P;P=P+-1|0;t:do{if((i|0)!=(x|0)){m=T+(x<<3)|0;h=T+(i+1<<3)|0;g=(i|0)<(x|0);C=0;do{if((C|0)>99)break t;C=C+1|0;v=s[r>>2]|0;w=v+(P<<3)|0;_=v+(x<<3)|0;l=+u[_>>3];b=(+u[w>>3]-l)*.5;k=+u[m>>3];k=k*k;y=+U(+(k+b*b));if(g){q=i;b=+u[v+(i<<3)>>3]-l+k/(b+(b<0.0?-y:y));k=+u[h>>3];while(1){l=+B(+b);do{if(!(l>=+B(+k))){y=-b/k;S=1.0/+U(+(y*y+1.0));y=y*S}else{if(!(l>1.0e-16)){y=1.0;S=0.0;break}l=-k/b;S=1.0/+U(+(l*l+1.0));y=S;S=l*S}}while(0);o=v+(q<<3)|0;G=+u[o>>3];f=q;q=q+1|0;c=v+(q<<3)|0;V=+u[c>>3];l=G-V;p=T+(q<<3)|0;Y=S*(S*l+y*2.0*+u[p>>3]);u[o>>3]=G-Y;u[c>>3]=V+Y;if((f|0)>(i|0)){c=T+(f<<3)|0;u[c>>3]=y*+u[c>>3]-k*S}G=+u[p>>3];u[p>>3]=G+S*(y*l-S*2.0*G);o=re(f,H)|0;c=re(q,H)|0;if(E)l=k;else{a=s[Q>>2]|0;n=0;do{J=a+(n+o<<3)|0;b=+u[J>>3];K=a+(n+c<<3)|0;l=+u[K>>3];u[J>>3]=y*b-S*l;u[K>>3]=S*b+y*l;n=n+1|0}while((n|0)!=(H|0))}if((f|0)<(P|0)){b=+u[p>>3];J=T+(f+2<<3)|0;l=+u[J>>3];u[J>>3]=y*l;l=-(S*l)}if((q|0)>=(x|0))break;else k=l}}V=+B(+ +u[m>>3]);G=+B(+ +u[w>>3])}while(V>(G+ +B(+ +u[_>>3]))*1.0e-06)}}while(0)}while((x|0)>1)}if(A){c=s[r>>2]|0;p=s[Q>>2]|0;f=(H|0)==0;m=0;do{n=c+(m<<3)|0;b=+u[n>>3];o=m;m=m+1|0;if((m|0)<(H|0)){a=o;i=m;l=b;do{G=+u[c+(i<<3)>>3];J=G>l;l=J?G:l;a=J?i:a;i=i+1|0}while((i|0)<(H|0))}else{a=o;l=b}u[c+(a<<3)>>3]=b;u[n>>3]=l;if(!f){n=0;i=p+((re(a,H)|0)<<3)|0;a=p+((re(o,H)|0)<<3)|0;while(1){G=+u[i>>3];u[i>>3]=+u[a>>3];u[a>>3]=G;n=n+1|0;if((n|0)==(H|0))break;else{i=i+8|0;a=a+8|0}}}}while((m|0)!=(A|0))}An(R)|0;t:do{if(!I){n=s[t>>2]|0;h=(O|0)>(F|0)?F:O;r:do{if((H|0)>0){p=s[r>>2]|0;f=(h|0)==0;a=0;m=s[Q>>2]|0;do{if(+u[p+(a<<3)>>3]<1.0e-16)break r;if(!f){i=0;o=m;c=n;while(1){u[c>>3]=+u[o>>3];i=i+1|0;if((i|0)==(h|0))break;else{o=o+8|0;c=c+8|0}}}m=m+(h<<3)|0;n=n+(h<<3)|0;a=a+1|0}while((a|0)<(H|0))}else a=0}while(0);f=(h|0)>0?h:0;if((a|0)<(H|0)){c=s[r>>2]|0;p=(H|0)>0;while(1){u[c+(a<<3)>>3]=0.0;if(p){i=0;o=n;while(1){u[o>>3]=0.0;i=i+1|0;if((i|0)>=(H|0))break;else o=o+8|0}}a=a+1|0;if((a|0)>=(H|0))break;else n=n+(f<<3)|0}}}else{_=s[M>>2]|0;w=s[$>>2]|0;do{if(!((_|0)<1|(w|0)<1)){if((s[L>>2]|0)!=(_|0))break;if((s[j>>2]|0)!=(_|0))break;if((s[D>>2]|0)!=(_|0))break;if((s[z>>2]|0)!=(w|0))break;if((s[N>>2]|0)!=(_|0))break;i=s[t>>2]|0;r:do{if((_|0)>0){h=s[r>>2]|0;v=(w|0)==0;g=(_|0)==0;a=0;do{l=+u[h+(a<<3)>>3];if(l<1.0e-16)break r;b=1.0/+U(+ +B(+l));p=re(a,_)|0;if(!v){f=0;m=i;while(1){if(g)l=0.0;else{n=0;o=(s[Q>>2]|0)+(p<<3)|0;c=(s[e>>2]|0)+(f<<3)|0;l=0.0;while(1){l=l+ +u[o>>3]*+u[c>>3];n=n+1|0;if((n|0)==(_|0))break;else{o=o+8|0;c=c+(w<<3)|0}}}u[m>>3]=b*l;f=f+1|0;if((f|0)==(w|0))break;else m=m+8|0}}i=i+(w<<3)|0;a=a+1|0}while((a|0)<(_|0))}else a=0}while(0);f=(w|0)>0?w:0;if((a|0)>=(_|0))break t;c=s[r>>2]|0;p=(w|0)>0;n=i;while(1){u[c+(a<<3)>>3]=0.0;if(p){i=0;o=n;while(1){u[o>>3]=0.0;i=i+1|0;if((i|0)>=(w|0))break;else o=o+8|0}}a=a+1|0;if((a|0)>=(_|0))break t;else n=n+(f<<3)|0}}}while(0);dn(Q)|0;a=-1;break e}}while(0);dn(Q)|0;a=0;break e}}while(0);dn(Q)|0;a=-1;break}dn(Q)|0;a=-1}else a=-1}while(0);d=W;return a|0}function hn(e){e=e|0;var t=0,r=0,a=0,i=0.0,n=0,o=0,l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0.0,S=0;y=d;d=d+2e3|0;k=y;t=s[e>>2]|0;w=s[e+4>>2]|0;e:do{if((w|0)<=500){switch(w|0){case 0:{t=0;break e}case 1:{u[t>>3]=1.0/+u[t>>3];break e}default:{}}if((w|0)>0){e=0;do{s[k+(e<<2)>>2]=e;e=e+1|0}while((e|0)<(w|0))}v=t+(w+-1<<3)|0;if((w|0)>0){p=(w|0)==0;h=(w|0)==1;m=(w|0)==0;f=(w|0)==1;b=v;e=0;g=0;while(1){c=t+((re(g,w)|0)<<3)|0;if((g|0)<(w|0)){a=g;i=0.0;r=c;while(1){_=+B(+ +u[r>>3]);l=i<_;e=l?a:e;i=l?_:i;a=a+1|0;if((a|0)>=(w|0))break;else r=r+(w<<3)|0}}else i=0.0;if(i<=1.0e-10){t=0;break e}n=k+(e<<2)|0;o=s[n>>2]|0;l=k+(g<<2)|0;s[n>>2]=s[l>>2];s[l>>2]=o;if(!p){r=0;a=t+((re(e,w)|0)<<3)|0;n=c;while(1){_=+u[a>>3];u[a>>3]=+u[n>>3];u[n>>3]=_;r=r+1|0;if((r|0)==(w|0))break;else{a=a+8|0;n=n+8|0}}}i=+u[c>>3];if(!h){r=1;a=c;do{l=a;a=a+8|0;u[l>>3]=+u[a>>3]/i;r=r+1|0}while((r|0)!=(w|0))}u[b>>3]=1.0/i;if(!m){n=0;o=v;while(1){if((n|0)!=(g|0)){r=t+((re(n,w)|0)<<3)|0;i=+u[r>>3];if(!f){l=1;a=c;while(1){S=r;r=r+8|0;u[S>>3]=+u[r>>3]-i*+u[a>>3];l=l+1|0;if((l|0)==(w|0))break;else a=a+8|0}}u[o>>3]=-(i*+u[b>>3])}n=n+1|0;if((n|0)==(w|0))break;else o=o+(w<<3)|0}}g=g+1|0;if((g|0)>=(w|0))break;else b=b+(w<<3)|0}}if((w|0)>0){n=(w|0)>0;o=0;do{e=k+(o<<2)|0;t:do{if((o|0)<(w|0)){r=o;do{if((s[e>>2]|0)==(o|0))break t;r=r+1|0;e=k+(r<<2)|0}while((r|0)<(w|0))}else r=o}while(0);s[e>>2]=s[k+(o<<2)>>2];if(n){a=0;e=t+(r<<3)|0;r=t+(o<<3)|0;while(1){_=+u[e>>3];u[e>>3]=+u[r>>3];u[r>>3]=_;a=a+1|0;if((a|0)>=(w|0))break;else{e=e+(w<<3)|0;r=r+(w<<3)|0}}}o=o+1|0}while((o|0)<(w|0))}}else t=0}while(0);d=y;return((t|0)==0)<<31>>31|0}function bn(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,d=0;o=s[e+4>>2]|0;if((o|0)==(s[t+8>>2]|0)?(c=s[e+8>>2]|0,(c|0)==(s[t+4>>2]|0)):0){d=(c|0)>0?c:0;if((o|0)>0){l=(c|0)>0;a=s[e>>2]|0;n=0;while(1){if(l){e=0;r=(s[t>>2]|0)+(n<<3)|0;i=a;while(1){u[i>>3]=+u[r>>3];e=e+1|0;if((e|0)>=(c|0))break;else{r=r+(o<<3)|0;i=i+8|0}}}n=n+1|0;if((n|0)>=(o|0)){e=0;break}else a=a+(d<<3)|0}}else e=0}else e=-1;return e|0}function gn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0.0,n=0.0,o=0;i=+(t|0)/+(s[e>>2]|0);n=+(r|0)/+(s[e+4>>2]|0);s[a>>2]=t;s[a+4>>2]=r;t=0;do{u[a+8+(t<<3)>>3]=i*+u[e+8+(t<<3)>>3];u[a+40+(t<<3)>>3]=n*+u[e+40+(t<<3)>>3];u[a+72+(t<<3)>>3]=+u[e+72+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=s[e+176>>2]|0;switch(t|0){case 4:{u[a+104>>3]=+u[e+104>>3];u[a+112>>3]=+u[e+112>>3];u[a+120>>3]=+u[e+120>>3];u[a+128>>3]=+u[e+128>>3];u[a+136>>3]=i*+u[e+136>>3];u[a+144>>3]=n*+u[e+144>>3];u[a+152>>3]=i*+u[e+152>>3];u[a+160>>3]=n*+u[e+160>>3];u[a+168>>3]=+u[e+168>>3];o=8;break}case 3:{u[a+104>>3]=i*+u[e+104>>3];u[a+112>>3]=n*+u[e+112>>3];u[a+120>>3]=+u[e+120>>3];u[a+128>>3]=+u[e+128>>3];u[a+136>>3]=+u[e+136>>3]/(i*n);u[a+144>>3]=+u[e+144>>3]/(n*(i*i*n));o=8;break}case 2:{u[a+104>>3]=i*+u[e+104>>3];u[a+112>>3]=n*+u[e+112>>3];u[a+120>>3]=+u[e+120>>3];u[a+128>>3]=+u[e+128>>3]/(i*n);u[a+136>>3]=+u[e+136>>3]/(n*(i*i*n));o=8;break}case 1:{u[a+104>>3]=i*+u[e+104>>3];u[a+112>>3]=n*+u[e+112>>3];u[a+120>>3]=+u[e+120>>3];u[a+128>>3]=+u[e+128>>3]/(i*n);o=8;break}default:t=-1}if((o|0)==8){s[a+176>>2]=t;t=0}return t|0}function vn(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,s=0,n=0.0,o=0,l=0.0,c=0,p=0,f=0,m=0.0,h=0.0,b=0,g=0,v=0.0,w=0,k=0,y=0,_=0,S=0.0;s=d;d=d+96|0;i=s;if(!(+u[e+88>>3]>=0.0)){a=0;do{u[i+(a<<5)>>3]=-+u[e+(a<<5)>>3];u[i+(a<<5)+8>>3]=-+u[e+(a<<5)+8>>3];u[i+(a<<5)+16>>3]=-+u[e+(a<<5)+16>>3];u[i+(a<<5)+24>>3]=-+u[e+(a<<5)+24>>3];a=a+1|0}while((a|0)!=3)}else{a=0;do{u[i+(a<<5)>>3]=+u[e+(a<<5)>>3];u[i+(a<<5)+8>>3]=+u[e+(a<<5)+8>>3];u[i+(a<<5)+16>>3]=+u[e+(a<<5)+16>>3];u[i+(a<<5)+24>>3]=+u[e+(a<<5)+24>>3];a=a+1|0}while((a|0)!=3)}u[t>>3]=0.0;u[t+8>>3]=0.0;u[t+16>>3]=0.0;u[t+24>>3]=0.0;u[t+32>>3]=0.0;u[t+40>>3]=0.0;u[t+48>>3]=0.0;u[t+56>>3]=0.0;u[t+64>>3]=0.0;u[t+72>>3]=0.0;u[t+80>>3]=0.0;u[t+88>>3]=0.0;n=+u[i+64>>3];m=+u[i+72>>3];h=+u[i+80>>3];S=+U(+(n*n+m*m+h*h));e=t+80|0;u[e>>3]=S;S=n/S;y=r+64|0;u[y>>3]=S;m=m/+u[e>>3];w=r+72|0;u[w>>3]=m;h=h/+u[e>>3];b=r+80|0;u[b>>3]=h;f=r+88|0;u[f>>3]=+u[i+88>>3]/+u[e>>3];n=+u[i+32>>3];l=+u[i+40>>3];v=+u[i+48>>3];h=S*n+m*l+h*v;p=t+48|0;u[p>>3]=h;n=n-h*+u[y>>3];l=l-h*+u[w>>3];h=v-h*+u[b>>3];v=+U(+(n*n+l*l+h*h));c=t+40|0;u[c>>3]=v;_=r+32|0;u[_>>3]=n/v;k=r+40|0;u[k>>3]=l/+u[c>>3];g=r+48|0;u[g>>3]=h/+u[c>>3];h=+u[i>>3];l=+u[i+8>>3];v=+u[i+16>>3];n=+u[y>>3]*h+ +u[w>>3]*l+ +u[b>>3]*v;a=t+16|0;u[a>>3]=n;m=+u[_>>3]*h+ +u[k>>3]*l+ +u[g>>3]*v;o=t+8|0;u[o>>3]=m;h=h-m*+u[_>>3]-n*+u[y>>3];l=l-m*+u[k>>3]-n*+u[w>>3];n=v-m*+u[g>>3]-n*+u[b>>3];m=+U(+(h*h+l*l+n*n));u[t>>3]=m;u[r>>3]=h/m;u[r+8>>3]=l/+u[t>>3];u[r+16>>3]=n/+u[t>>3];n=+u[f>>3];l=(+u[i+56>>3]-+u[p>>3]*n)/+u[c>>3];u[r+56>>3]=l;u[r+24>>3]=(+u[i+24>>3]-l*+u[o>>3]-+u[a>>3]*n)/+u[t>>3];a=0;do{_=t+(a<<5)|0;u[_>>3]=+u[_>>3]/+u[e>>3];_=t+(a<<5)+8|0;u[_>>3]=+u[_>>3]/+u[e>>3];_=t+(a<<5)+16|0;u[_>>3]=+u[_>>3]/+u[e>>3];a=a+1|0}while((a|0)!=3);d=s;return 0}function wn(e,t,r,a,i,s){e=e|0;t=+t;r=+r;a=a|0;i=i|0;s=s|0;var n=0.0,o=0.0,l=0.0,c=0.0,d=0.0,p=0.0,f=0.0,m=0,h=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0,y=0.0,_=0.0,S=0.0,x=0.0,C=0.0,q=0.0,T=0.0,E=0.0;switch(s|0){case 4:{b=+u[e>>3];g=+u[e+8>>3];v=+u[e+16>>3];w=+u[e+24>>3];x=+u[e+32>>3];y=+u[e+40>>3];_=+u[e+48>>3];S=+u[e+56>>3];k=+u[e+64>>3];h=(t-_)/x;l=(r-S)/y;r=h*h;o=l*l;c=v*2.0;d=w*6.0;p=w*2.0;f=v*6.0;e:do{if(o!=0.0|r!=0.0){s=1;n=h;t=l;while(1){E=o+r;T=b*E+1.0+E*(g*E);C=r*3.0;q=o*C;n=n-(w*(E+r*2.0)+(t*(c*n)+n*T)-h)/(d*n+(c*t+(b*(o+C)+1.0+g*(o*o+(r*(r*5.0)+q)))));C=p*n;t=t-(v*(o*2.0+E)+t*T+t*C-l)/(f*t+(b*(r+o*3.0)+1.0+g*(o*(o*5.0)+(r*r+q)))+C);if((s|0)==4)break e;r=n*n;o=t*t;if(!(o!=0.0|r!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);u[a>>3]=_+x*n/k;u[i>>3]=S+y*t/k;s=0;break}case 3:{h=+u[e>>3];n=(t-h)/+u[e+24>>3];m=e+8|0;t=r-+u[m>>3];l=+u[e+32>>3]/1.0e8;c=+u[e+40>>3]/1.0e8/1.0e5;r=n*n+t*t;d=+U(+r);p=l*3.0;f=c*5.0;e:do{if(d!=0.0){s=1;o=d;while(1){E=o-(o*(1.0-l*r-r*(c*r))-d)/(1.0-p*r-r*(f*r));n=n*E/o;t=t*E/o;if((s|0)==3)break e;r=n*n+t*t;o=+U(+r);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;u[a>>3]=n/+u[s>>3]+h;u[i>>3]=t/+u[s>>3]+ +u[m>>3];s=0;break}case 2:{h=+u[e>>3];n=t-h;m=e+8|0;t=r-+u[m>>3];l=+u[e+24>>3]/1.0e8;c=+u[e+32>>3]/1.0e8/1.0e5;r=n*n+t*t;d=+U(+r);p=l*3.0;f=c*5.0;e:do{if(d!=0.0){s=1;o=d;while(1){E=o-(o*(1.0-l*r-r*(c*r))-d)/(1.0-p*r-r*(f*r));n=n*E/o;t=t*E/o;if((s|0)==3)break e;r=n*n+t*t;o=+U(+r);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;u[a>>3]=n/+u[s>>3]+h;u[i>>3]=t/+u[s>>3]+ +u[m>>3];s=0;break}case 1:{p=+u[e>>3];n=t-p;m=e+8|0;t=r-+u[m>>3];l=+u[e+24>>3]/1.0e8;r=n*n+t*t;c=+U(+r);d=l*3.0;e:do{if(c!=0.0){s=1;o=c;while(1){E=o-(o*(1.0-l*r)-c)/(1.0-d*r);n=n*E/o;t=t*E/o;if((s|0)==3)break e;r=n*n+t*t;o=+U(+r);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;u[a>>3]=n/+u[s>>3]+p;u[i>>3]=t/+u[s>>3]+ +u[m>>3];s=0;break}default:s=-1}return s|0}function kn(e,t,r,a,i,s){e=e|0;t=+t;r=+r;a=a|0;i=i|0;s=s|0;var n=0.0,o=0.0,l=0.0,c=0.0,d=0.0,p=0.0,f=0.0,m=0.0;switch(s|0){case 4:{l=+u[e+16>>3];c=+u[e+24>>3];f=+u[e+32>>3];d=+u[e+40>>3];m=+u[e+48>>3];p=+u[e+56>>3];o=+u[e+64>>3];t=(t-m)*o/f;o=(r-p)*o/d;n=t*t+o*o;r=+u[e>>3]*n+1.0+n*(+u[e+8>>3]*n);u[a>>3]=m+f*(c*(t*(t*2.0)+n)+(l*2.0*t*o+t*r));u[i>>3]=p+d*(c*2.0*t*o+(l*(n+o*(o*2.0))+o*r));s=0;break}case 3:{o=+u[e>>3];m=+u[e+16>>3];n=(t-o)*m;s=e+8|0;t=m*(r-+u[s>>3]);if(n==0.0&t==0.0){u[a>>3]=o;t=+u[s>>3]}else{m=n*n+t*t;m=1.0-m*(+u[e+32>>3]/1.0e8)-m*(m*(+u[e+40>>3]/1.0e8/1.0e5));u[a>>3]=o+ +u[e+24>>3]*(n*m);t=+u[s>>3]+t*m}u[i>>3]=t;s=0;break}case 2:{o=+u[e>>3];m=+u[e+16>>3];n=(t-o)*m;s=e+8|0;t=m*(r-+u[s>>3]);if(n==0.0&t==0.0){u[a>>3]=o;t=+u[s>>3]}else{m=n*n+t*t;m=1.0-m*(+u[e+24>>3]/1.0e8)-m*(m*(+u[e+32>>3]/1.0e8/1.0e5));u[a>>3]=o+n*m;t=+u[s>>3]+t*m}u[i>>3]=t;s=0;break}case 1:{o=+u[e>>3];m=+u[e+16>>3];n=(t-o)*m;s=e+8|0;t=m*(r-+u[s>>3]);if(n==0.0&t==0.0){u[a>>3]=o;t=+u[s>>3]}else{m=1.0-(n*n+t*t)*(+u[e+24>>3]/1.0e8);u[a>>3]=o+n*m;t=+u[s>>3]+t*m}u[i>>3]=t;s=0;break}default:s=-1}return s|0}function yn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0,o=0,l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0.0;v=d;d=d+256|0;f=v+232|0;p=v+224|0;c=v+216|0;l=v+208|0;o=v+200|0;n=v+192|0;i=v+184|0;h=v+240|0;b=v;do{if((e|0)!=0&(t|0)>0&(r|0)!=0){g=Wi(e,4854)|0;if(!g){g=ui()|0;s[i>>2]=s[g>>2];s[i+4>>2]=e;en(3,4857,i);e=di(s[g>>2]|0)|0;s[n>>2]=5367;s[n+4>>2]=e;en(3,5361,n);e=-1;break}Ji(g,0,2)|0;e:do{if(!(Bi(g)|0)){n=es(g)|0;as(g);e=0;do{if((e|0)>=4){m=9;break}i=s[2012+(e<<3)+4>>2]|0;e=e+1|0}while(((n|0)%(i|0)|0|0)!=0);do{if((m|0)==9)if((e|0)==4){en(3,4971,c);e=-1;break e}else{i=s[2012+(0<<3)+4>>2]|0;e=0;break}}while(0);if((Vi(b,i,1,g)|0)!=1){e=ui()|0;s[p>>2]=s[e>>2];en(3,5051,p);e=di(s[e>>2]|0)|0;s[f>>2]=5367;s[f+4>>2]=e;en(3,5361,f);e=-1;break}c=b+176|0;s[c>>2]=e;_n(b);p=(e|0)==1;f=b+120|0;if(p){w=+u[f>>3];l=b+128|0;u[f>>3]=+u[l>>3];u[l>>3]=w}else l=b+128|0;Kc(r|0,b|0,184)|0;s[h>>2]=a;i=r+176|0;if((t|0)>1){o=1;while(1){a=(s[h>>2]|0)+(4-1)&~(4-1);n=s[a>>2]|0;s[h>>2]=a+4;s[n+176>>2]=s[i>>2];if((Vi(b,s[2012+((s[i>>2]|0)+-1<<3)+4>>2]|0,1,g)|0)!=1){e=-1;break e}s[c>>2]=e;_n(b);if(p){w=+u[f>>3];u[f>>3]=+u[l>>3];u[l>>3]=w}Kc(n|0,b|0,184)|0;o=o+1|0;if((o|0)>=(t|0)){e=0;break}}}else e=0}else{e=ui()|0;s[o>>2]=s[e>>2];en(3,4926,o);e=di(s[e>>2]|0)|0;s[l>>2]=5367;s[l+4>>2]=e;en(3,5361,l);e=-1}}while(0);Hi(g)|0}else e=-1}while(0);d=v;return e|0}function _n(e){e=e|0;var t=0,r=0,a=0,i=0,n=0;n=d;d=d+192|0;i=n;xn(e,i);xn(e+4|0,i+4|0);t=0;do{Sn(e+8+(t<<5)|0,i+8+(t<<5)|0);Sn(e+8+(t<<5)+8|0,i+8+(t<<5)+8|0);Sn(e+8+(t<<5)+16|0,i+8+(t<<5)+16|0);Sn(e+8+(t<<5)+24|0,i+8+(t<<5)+24|0);t=t+1|0}while((t|0)!=3);r=e+176|0;a=0;do{Sn(e+104+(a<<3)|0,i+104+(a<<3)|0);a=a+1|0;t=s[r>>2]|0}while((a|0)<(s[2012+(t+-1<<3)>>2]|0));s[i+176>>2]=t;Kc(e|0,i|0,184)|0;d=n;return}function Sn(e,t){e=e|0;t=t|0;a[t>>0]=a[e+7>>0]|0;a[t+1>>0]=a[e+6>>0]|0;a[t+2>>0]=a[e+5>>0]|0;a[t+3>>0]=a[e+4>>0]|0;a[t+4>>0]=a[e+3>>0]|0;a[t+5>>0]=a[e+2>>0]|0;a[t+6>>0]=a[e+1>>0]|0;a[t+7>>0]=a[e>>0]|0;return}function xn(e,t){e=e|0;t=t|0;a[t>>0]=a[e+3>>0]|0;a[t+1>>0]=a[e+2>>0]|0;a[t+2>>0]=a[e+1>>0]|0;a[t+3>>0]=a[e>>0]|0;return}function Cn(e,t){e=e|0;t=t|0;var r=0,a=0,i=0.0,n=0,o=0,l=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0;S=d;d=d+64|0;w=S+24|0;k=S+16|0;y=S+8|0;_=S;b=js(208)|0;if(!b){en(3,5472,S+32|0);kt(1)}Kc(b|0,e|0,184)|0;v=t<<1;g=(s[e>>2]|0)+v|0;s[b+192>>2]=g;v=(s[e+4>>2]|0)+v|0;s[b+196>>2]=v;s[b+200>>2]=t;s[b+204>>2]=t;r=re(g<<3,v)|0;a=js(r)|0;s[b+184>>2]=a;if(!a){en(3,5472,S+40|0);kt(1)}r=js(r)|0;s[b+188>>2]=r;if(!r){en(3,5472,S+48|0);kt(1)}h=e+104|0;p=s[e+176>>2]|0;f=(g|0)>0?g<<1:0;if((v|0)>0){m=(g|0)>0;l=0;while(1){i=+(l-t|0);if(m){e=0;n=a;o=r;while(1){x=+(e-t|0);kn(h,x,i,y,_,p)|0;c[n>>2]=+u[y>>3];c[n+4>>2]=+u[_>>3];wn(h,x,i,w,k,p)|0;c[o>>2]=+u[w>>3];c[o+4>>2]=+u[k>>3];e=e+1|0;if((e|0)>=(g|0))break;else{n=n+8|0;o=o+8|0}}}r=r+(f<<2)|0;l=l+1|0;if((l|0)>=(v|0))break;else a=a+(f<<2)|0}}d=S;return b|0}function qn(e){e=e|0;var t=0;if((e|0)!=0?(t=s[e>>2]|0,(t|0)!=0):0){zs(s[t+184>>2]|0);zs(s[(s[e>>2]|0)+188>>2]|0);zs(s[e>>2]|0);s[e>>2]=0;t=0}else t=-1;return t|0}function Tn(e,t,r,a,i){e=e|0;t=+t;r=+r;a=a|0;i=i|0;var n=0,o=0,l=0;o=(s[e+16>>2]|0)+~~(t+.5)|0;n=(s[e+20>>2]|0)+~~(r+.5)|0;if(((o|0)>=0?(l=s[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(s[e+12>>2]|0):0){e=s[e>>2]|0;n=(re(l,n)|0)+o<<1;s[a>>2]=s[e+(n<<2)>>2];s[i>>2]=s[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function En(e,t,r,a,i){e=e|0;t=+t;r=+r;a=a|0;i=i|0;var n=0,o=0,l=0;o=(s[e+16>>2]|0)+~~(t+.5)|0;n=(s[e+20>>2]|0)+~~(r+.5)|0;if(((o|0)>=0?(l=s[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(s[e+12>>2]|0):0){e=s[e+4>>2]|0;n=(re(l,n)|0)+o<<1;s[a>>2]=s[e+(n<<2)>>2];s[i>>2]=s[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function Pn(e){e=e|0;var t=0,r=0;t=js(8)|0;do{if(t){r=js(e<<3)|0;s[t>>2]=r;if(!r){zs(t);t=0;break}else{s[t+4>>2]=e;break}}else t=0}while(0);return t|0}function An(e){e=e|0;zs(s[e>>2]|0);zs(e);return 0}function Mn(e){e=e|0;var t=0.0,r=0,a=0.0,i=0,n=0;t=+U(+ +In(e,e));if(t!=0.0){i=s[e>>2]|0;a=+u[i>>3];t=a<0.0?-t:t;a=a+t;u[i>>3]=a;a=1.0/+U(+(a*t));e=s[e+4>>2]|0;if((e|0)>0){r=0;do{n=i+(r<<3)|0;u[n>>3]=a*+u[n>>3];r=r+1|0}while((r|0)<(e|0))}}return+-t}function In(e,t){e=e|0;t=t|0;var r=0.0,a=0,i=0;i=s[e+4>>2]|0;if((i|0)!=(s[t+4>>2]|0))kt(0);if((i|0)>0){a=s[e>>2]|0;e=s[t>>2]|0;t=0;r=0.0;do{r=r+ +u[a+(t<<3)>>3]*+u[e+(t<<3)>>3];t=t+1|0}while((t|0)<(i|0))}else r=0.0;return+r}function Rn(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0.0,l=0,c=0,p=0,f=0,m=0,h=0,b=0.0,g=0.0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A+8|0;P=A;_=s[e+8>>2]|0;if(((_|0)==(s[e+4>>2]|0)?(_|0)==(s[t+4>>2]|0):0)?(_|0)==((s[r+4>>2]|0)+1|0):0){C=_+-2|0;q=E+4|0;T=P+4|0;if((_|0)>2){v=_+-1|0;w=0;do{m=re(w,_)|0;h=s[e>>2]|0;u[(s[t>>2]|0)+(w<<3)>>3]=+u[h+(m+w<<3)>>3];l=_-w+-1|0;s[q>>2]=l;k=w;w=w+1|0;c=h+(m+w<<3)|0;s[E>>2]=c;g=+Mn(E);u[(s[r>>2]|0)+(k<<3)>>3]=g;if(!(g==0.0)){if((w|0)<(_|0)){p=s[t>>2]|0;f=w;do{if((w|0)<(f|0)){a=s[e>>2]|0;i=w;o=0.0;do{g=+u[a+((re(i,_)|0)+f<<3)>>3];o=o+g*+u[h+(i+m<<3)>>3];i=i+1|0}while((i|0)<(f|0))}else o=0.0;a=re(f,_)|0;if((f|0)<(_|0)){i=s[e>>2]|0;n=f;do{o=o+ +u[i+(n+a<<3)>>3]*+u[h+(n+m<<3)>>3];n=n+1|0}while((n|0)<(_|0))}u[p+(f<<3)>>3]=o;f=f+1|0}while((f|0)<(_|0))}s[T>>2]=l;s[q>>2]=l;s[E>>2]=c;s[P>>2]=(s[t>>2]|0)+(w<<3);o=+In(E,P)*.5;if((v|0)>(k|0)){a=s[t>>2]|0;l=v;do{b=+u[h+(l+m<<3)>>3];i=a+(l<<3)|0;g=+u[i>>3]-o*b;u[i>>3]=g;i=re(l,_)|0;if((l|0)<(_|0)){n=s[e>>2]|0;c=l;do{f=n+(c+i<<3)|0;u[f>>3]=+u[f>>3]-(b*+u[a+(c<<3)>>3]+g*+u[h+(c+m<<3)>>3]);c=c+1|0}while((c|0)<(_|0))}l=l+-1|0}while((l|0)>(k|0))}}}while((w|0)<(C|0))}if((_|0)<=1){if((_|0)>0){i=0;n=s[e>>2]|0;a=s[t>>2]|0;y=27}}else{y=re(C,_)|0;n=s[e>>2]|0;a=s[t>>2]|0;u[a+(C<<3)>>3]=+u[n+(y+C<<3)>>3];i=_+-1|0;u[(s[r>>2]|0)+(C<<3)>>3]=+u[n+(i+y<<3)>>3];y=27}if((y|0)==27)u[a+(i<<3)>>3]=+u[n+((re(i,_)|0)+i<<3)>>3];if((_|0)>0){p=(_|0)>0;h=_;do{r=h;h=h+-1|0;f=re(h,_)|0;m=s[e>>2]|0;if((r|0)<=(C|0)?(S=_-h+-1|0,x=m+(f+r<<3)|0,(r|0)<(_|0)):0){a=(r|0)<(_|0);l=r;do{s[T>>2]=S;s[q>>2]=S;s[E>>2]=x;i=re(l,_)|0;s[P>>2]=(s[e>>2]|0)+(i+r<<3);o=+In(E,P);if(a){n=s[e>>2]|0;c=r;do{y=n+(c+i<<3)|0;u[y>>3]=+u[y>>3]-o*+u[m+(c+f<<3)>>3];c=c+1|0}while((c|0)<(_|0))}l=l+1|0}while((l|0)<(_|0))}if(p){a=0;do{u[m+(a+f<<3)>>3]=0.0;a=a+1|0}while((a|0)<(_|0))}u[m+(f+h<<3)>>3]=1.0}while((r|0)>1);a=0}else a=0}else a=-1;d=A;return a|0}function On(e,t,r){e=e|0;t=t|0;r=r|0;var a=0.0,i=0.0,s=0.0,n=0.0,o=0.0;s=+u[r>>3];n=+u[r+8>>3];i=+u[r+16>>3];a=+u[t+88>>3]+(s*+u[t+64>>3]+n*+u[t+72>>3]+i*+u[t+80>>3]);if(a==0.0)r=-1;else{o=+u[t+56>>3]+(s*+u[t+32>>3]+n*+u[t+40>>3]+i*+u[t+48>>3]);u[e>>3]=(+u[t+24>>3]+(s*+u[t>>3]+n*+u[t+8>>3]+i*+u[t+16>>3]))/a;u[e+8>>3]=o/a;r=0}return r|0}function $n(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0.0,n=0.0,o=0.0,l=0.0,c=0.0,p=0.0,f=0.0,m=0.0,h=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0,T=0,E=0.0,P=0.0,A=0.0,M=0.0,I=0.0,R=0.0,O=0.0,$=0.0,F=0.0;T=d;d=d+1072|0;x=T+1056|0;S=T+768|0;_=T+192|0;q=T+48|0;C=T;F=+u[r>>3];M=+u[a>>3];v=F*M;$=+u[r+8>>3];w=a+8|0;A=+u[w>>3];y=$*A;o=+u[r+16>>3];I=+u[a+16>>3];c=o*I;p=+u[r+24>>3];O=+u[r+32>>3];R=+u[r+40>>3];f=A*R;l=+u[r+48>>3];m=I*l;h=+u[r+56>>3];P=+u[r+64>>3];E=+u[r+72>>3];b=A*E;i=+u[r+80>>3];g=I*i;n=+u[r+88>>3];u[S>>3]=v;u[S+8>>3]=F*A;u[S+16>>3]=F*I;u[S+24>>3]=M*$;u[S+32>>3]=y;u[S+40>>3]=I*$;u[S+48>>3]=M*o;u[S+56>>3]=A*o;u[S+64>>3]=c;u[S+72>>3]=F;u[S+80>>3]=$;u[S+88>>3]=o;o=M*O;u[S+96>>3]=o;u[S+104>>3]=A*O;u[S+112>>3]=I*O;u[S+120>>3]=M*R;u[S+128>>3]=f;u[S+136>>3]=I*R;u[S+144>>3]=M*l;u[S+152>>3]=A*l;u[S+160>>3]=m;u[S+168>>3]=O;u[S+176>>3]=R;u[S+184>>3]=l;l=P*M;u[S+192>>3]=l;u[S+200>>3]=A*P;u[S+208>>3]=I*P;u[S+216>>3]=M*E;A=+u[w>>3];u[S+224>>3]=E*A;u[S+232>>3]=I*E;u[S+240>>3]=M*i;u[S+248>>3]=A*i;u[S+256>>3]=g;u[S+264>>3]=P;u[S+272>>3]=E;u[S+280>>3]=i;a=_+64|0;r=_;w=r+64|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=-1.0;a=_+72|0;s[a>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;s[a+20>>2]=0;s[a+24>>2]=0;s[a+28>>2]=0;u[_+104>>3]=1.0;a=_+160|0;r=_+112|0;w=r+48|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=1.0;a=_+240|0;r=_+168|0;w=r+72|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=-1.0;a=_+296|0;r=_+248|0;w=r+48|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=-1.0;a=_+304|0;s[a>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;s[a+20>>2]=0;s[a+24>>2]=0;s[a+28>>2]=0;u[_+336>>3]=1.0;a=_+456|0;r=_+344|0;w=r+112|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=1.0;a=_+512|0;r=_+464|0;w=r+48|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=1.0;a=_+568|0;r=_+520|0;w=r+48|0;do{s[r>>2]=0;r=r+4|0}while((r|0)<(w|0));u[a>>3]=1.0;k=0;do{w=0;do{r=q+(k*48|0)+(w<<3)|0;u[r>>3]=0.0;i=0.0;a=0;do{i=i+ +u[S+(k*96|0)+(a<<3)>>3]*+u[_+(a*48|0)+(w<<3)>>3];a=a+1|0}while((a|0)!=12);u[r>>3]=i;w=w+1|0}while((w|0)!=6);k=k+1|0}while((k|0)!=3);$=p+(v+y+c);F=h+(o+f+m);i=n+(l+b+g);n=+u[t>>3];o=+u[t+8>>3];l=+u[t+16>>3];c=+u[t+24>>3]+($*n+F*o+i*l);p=+u[t+32>>3];f=+u[t+40>>3];m=+u[t+48>>3];h=+u[t+56>>3]+($*p+F*f+i*m);b=+u[t+64>>3];g=+u[t+72>>3];v=+u[t+80>>3];i=+u[t+88>>3]+($*b+F*g+i*v);if(i==0.0){en(3,5089,x);a=-1}else{F=i*i;u[C>>3]=(n*i-c*b)/F;u[C+8>>3]=(i*o-c*g)/F;u[C+16>>3]=(i*l-c*v)/F;u[C+24>>3]=(i*p-h*b)/F;u[C+32>>3]=(i*f-h*g)/F;u[C+40>>3]=(i*m-h*v)/F;r=0;do{i=+u[C+(r*24|0)>>3];n=+u[C+(r*24|0)+8>>3];o=+u[C+(r*24|0)+16>>3];a=0;do{x=e+(r*48|0)+(a<<3)|0;u[x>>3]=0.0;F=i*+u[q+(a<<3)>>3]+0.0;u[x>>3]=F;F=F+n*+u[q+48+(a<<3)>>3];u[x>>3]=F;u[x>>3]=F+o*+u[q+96+(a<<3)>>3];a=a+1|0}while((a|0)!=6);r=r+1|0}while((r|0)!=2);a=0}d=T;return a|0}function Fn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0,o=0,l=0;l=d;d=d+48|0;o=l+24|0;n=l+12|0;i=l;s[o+4>>2]=6;s[o+8>>2]=1;s[o>>2]=e;s[n+4>>2]=a;s[n+8>>2]=1;s[n>>2]=t;s[i+4>>2]=a;s[i+8>>2]=6;s[i>>2]=r;t=cn(i)|0;do{if(t){e=ln(t,i)|0;if(!e){dn(t)|0;r=-1;break}r=ln(t,n)|0;if(!r){dn(t)|0;dn(e)|0;r=-1;break}if((hn(e)|0)<0){dn(t)|0;dn(e)|0;dn(r)|0;r=-1;break}else{pn(o,e,r)|0;dn(t)|0;dn(e)|0;dn(r)|0;r=0;break}}else r=-1}while(0);d=l;return r|0}function Dn(e,t){e=e|0;t=t|0;var r=0.0,a=0.0,i=0.0,s=0,n=0.0,o=0.0,l=0.0,c=0,p=0,f=0,m=0.0,h=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0;f=d;d=d+192|0;c=f+96|0;p=f;n=+u[t>>3];l=+u[t+8>>3];a=+u[t+16>>3];r=n*n+l*l+a*a;if(r==0.0){o=0.0;i=0.0;a=1.0;r=0.0}else{r=+U(+r);o=r;i=a/r;a=n/r;r=l/r}k=+u[t+24>>3];g=+u[t+32>>3];l=+u[t+40>>3];m=+W(+o);n=1.0-m;o=+Y(+o);u[c>>3]=m+a*a*n;w=r*a*n;v=i*o;u[c+8>>3]=w-v;b=a*i*n;h=r*o;u[c+16>>3]=b+h;u[c+24>>3]=k;u[c+32>>3]=w+v;u[c+40>>3]=m+r*r*n;r=r*i*n;o=a*o;u[c+48>>3]=r-o;u[c+56>>3]=g;u[c+64>>3]=b-h;u[c+72>>3]=r+o;u[c+80>>3]=m+i*i*n;u[c+88>>3]=l;s=0;do{r=+u[e+(s<<5)>>3];a=+u[e+(s<<5)+8>>3];i=+u[e+(s<<5)+16>>3];t=0;do{u[p+(s<<5)+(t<<3)>>3]=r*+u[c+(t<<3)>>3]+a*+u[c+32+(t<<3)>>3]+i*+u[c+64+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=p+(s<<5)+24|0;u[t>>3]=+u[e+(s<<5)+24>>3]+ +u[t>>3];s=s+1|0}while((s|0)!=3);t=0;do{u[e+(t<<5)>>3]=+u[p+(t<<5)>>3];u[e+(t<<5)+8>>3]=+u[p+(t<<5)+8>>3];u[e+(t<<5)+16>>3]=+u[p+(t<<5)+16>>3];u[e+(t<<5)+24>>3]=+u[p+(t<<5)+24>>3];t=t+1|0}while((t|0)!=3);d=f;return 0}function Nn(e){e=e|0;var t=0,r=0;t=js(136)|0;if(!t)t=0;else{r=0;do{u[t+(r<<5)>>3]=+u[e+(r<<5)>>3];u[t+(r<<5)+8>>3]=+u[e+(r<<5)+8>>3];u[t+(r<<5)+16>>3]=+u[e+(r<<5)+16>>3];u[t+(r<<5)+24>>3]=+u[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3);s[t+96>>2]=10;u[t+104>>3]=.10000000149011612;u[t+112>>3]=.9900000095367432;u[t+120>>3]=4.0;u[t+128>>3]=.5}return t|0}function Ln(e){e=e|0;var t=0;t=s[e>>2]|0;if(!t)t=-1;else{zs(t);s[e>>2]=0;t=0}return t|0}function jn(e,t){e=e|0;t=+t;if(!e)e=-1;else{u[e+128>>3]=t;e=0}return e|0}function zn(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0.0,l=0,c=0,p=0.0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0.0,q=0.0;x=d;d=d+176|0;c=x+168|0;l=x+160|0;k=x+48|0;_=x+64|0;y=x;v=t+8|0;n=s[v>>2]|0;do{if((n|0)>=3){S=js(n*96|0)|0;if(!S){en(3,5109,l);n=-1;break}w=js(n<<4)|0;if(!w){en(3,5109,c);zs(S);n=-1;break}else n=0;do{u[a+(n<<5)>>3]=+u[r+(n<<5)>>3];u[a+(n<<5)+8>>3]=+u[r+(n<<5)+8>>3];u[a+(n<<5)+16>>3]=+u[r+(n<<5)+16>>3];u[a+(n<<5)+24>>3]=+u[r+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);b=t+4|0;c=k+8|0;r=e+104|0;f=e+120|0;m=e+112|0;h=e+96|0;p=0.0;g=0;e:while(1){tn(e,a,_)|0;n=s[v>>2]|0;if((n|0)>0){o=0.0;l=0;do{if((On(k,_,(s[b>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}n=s[t>>2]|0;q=+u[n+(l<<4)>>3]-+u[k>>3];C=+u[n+(l<<4)+8>>3]-+u[c>>3];o=o+(q*q+C*C);n=l<<1;u[w+(n<<3)>>3]=q;u[w+((n|1)<<3)>>3]=C;l=l+1|0;n=s[v>>2]|0}while((l|0)<(n|0))}else o=0.0;o=o/+(n|0);if(o<+u[r>>3]){l=24;break}if(((g|0)>0?o<+u[f>>3]:0)?o/p>+u[m>>3]:0){l=24;break}if((g|0)==(s[h>>2]|0)){l=24;break}if((n|0)>0){l=0;do{if(($n(S+(l*12<<3)|0,e,a,(s[b>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0;n=s[v>>2]|0}while((l|0)<(n|0))}if((Fn(y,w,S,n<<1)|0)<0){l=22;break}Dn(a,y)|0;p=o;g=g+1|0}if((l|0)==10){Hn(S,w);n=-1;break}else if((l|0)==20){Hn(S,w);n=-1;break}else if((l|0)==22){Hn(S,w);n=-1;break}else if((l|0)==24){u[i>>3]=o;zs(S);zs(w);n=0;break}}else n=-1}while(0);d=x;return n|0}function Hn(e,t){e=e|0;t=t|0;zs(e);zs(t);return}function Bn(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0.0,l=0,c=0,p=0,f=0,m=0,h=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0;I=d;d=d+192|0;f=I+184|0;p=I+176|0;c=I+168|0;n=I+160|0;T=I+48|0;P=I+64|0;E=I;q=t+8|0;l=s[q>>2]|0;do{if((l|0)>=4){m=~~(+(l|0)*+u[e+128>>3])+-1|0;m=(m|0)<3?3:m;M=js(l*96|0)|0;if(!M){en(3,5109,n);n=-1;break}A=js(l<<4)|0;if(!A){en(3,5109,c);zs(M);n=-1;break}n=l<<3;C=js(n)|0;if(!C){en(3,5109,p);zs(M);zs(A);n=-1;break}x=js(n)|0;if(!x){en(3,5109,f);zs(M);zs(A);zs(C);n=-1;break}else n=0;do{u[a+(n<<5)>>3]=+u[r+(n<<5)>>3];u[a+(n<<5)+8>>3]=+u[r+(n<<5)+8>>3];u[a+(n<<5)+16>>3]=+u[r+(n<<5)+16>>3];u[a+(n<<5)+24>>3]=+u[r+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);_=t+4|0;S=T+8|0;f=x+(m<<3)|0;r=e+104|0;m=e+120|0;w=e+112|0;k=e+96|0;g=0.0;y=0;e:while(1){tn(e,a,P)|0;n=s[q>>2]|0;if((n|0)>0){l=0;do{if((On(T,P,(s[_>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}n=s[t>>2]|0;b=+u[n+(l<<4)>>3]-+u[T>>3];v=+u[n+(l<<4)+8>>3]-+u[S>>3];n=l<<1;u[A+(n<<3)>>3]=b;u[A+((n|1)<<3)>>3]=v;v=b*b+v*v;u[x+(l<<3)>>3]=v;u[C+(l<<3)>>3]=v;l=l+1|0;n=s[q>>2]|0}while((l|0)<(n|0))}ds(x,n,8,1);v=+u[f>>3]*4.0;v=v<16.0?16.0:v;l=s[q>>2]|0;b=v/6.0;if((l|0)>0){o=0.0;n=0;do{h=+u[x+(n<<3)>>3];if(h>v)h=b;else{h=1.0-h/v;h=b*(1.0-h*(h*h))}o=o+h;n=n+1|0}while((n|0)<(l|0))}else o=0.0;o=o/+(l|0);if(o<+u[r>>3]){l=36;break}if(((y|0)>0?o<+u[m>>3]:0)?o/g>+u[w>>3]:0){l=36;break}if((y|0)==(s[k>>2]|0)){l=36;break}if((l|0)>0){p=0;n=0;do{h=+u[C+(p<<3)>>3];if(h<=v){l=n*6|0;c=M+(l<<3)|0;if(($n(c,e,a,(s[_>>2]|0)+(p*24|0)|0)|0)<0){l=28;break e}g=1.0-h/v;g=g*g;u[c>>3]=+u[c>>3]*g;c=M+((l|1)<<3)|0;u[c>>3]=+u[c>>3]*g;c=M+(l+2<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+3<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+4<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+5<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+6<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+7<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+8<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+9<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+10<<3)|0;u[c>>3]=g*+u[c>>3];l=M+(l+11<<3)|0;u[l>>3]=g*+u[l>>3];l=p<<1;u[A+(n<<3)>>3]=g*+u[A+(l<<3)>>3];u[A+(n+1<<3)>>3]=g*+u[A+((l|1)<<3)>>3];l=s[q>>2]|0;n=n+2|0}p=p+1|0}while((p|0)<(l|0))}else n=0;if((n|0)<6){l=32;break}if((Fn(E,A,M,n)|0)<0){l=34;break}Dn(a,E)|0;g=o;y=y+1|0}if((l|0)==14){Un(M,A,C,x);n=-1;break}else if((l|0)==28){Un(M,A,C,x);n=-1;break}else if((l|0)==32){Un(M,A,C,x);n=-1;break}else if((l|0)==34){Un(M,A,C,x);n=-1;break}else if((l|0)==36){u[i>>3]=o;zs(M);zs(A);zs(C);zs(x);n=0;break}}else n=-1}while(0);d=I;return n|0}function Un(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;zs(e);zs(t);zs(r);zs(a);return}function Qn(e,t){e=e|0;t=t|0;var r=0.0;r=+u[e>>3]-+u[t>>3];return(r<0.0?-1:r>0.0&1)|0}function Wn(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0.0,l=0.0,c=0,p=0.0,f=0.0,m=0,h=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0.0,T=0,E=0,P=0,A=0.0,M=0.0,I=0.0,R=0.0,O=0.0,$=0.0,F=0.0,D=0.0,N=0.0,L=0.0,j=0.0,z=0.0,H=0.0,B=0.0,Q=0.0,W=0,Y=0,V=0,G=0,K=0,J=0;W=d;d=d+64|0;P=W+48|0;C=W+40|0;x=W+32|0;S=W+24|0;k=W+16|0;m=W+8|0;c=W;e:do{if((a|0)>=4){n=0;while(1){if((n|0)>=(a|0))break;if(+u[r+(n*24|0)+16>>3]!=0.0){n=-1;break e}else n=n+1|0}if((((((((!(+u[e>>3]==0.0)?!(+u[e+32>>3]!=0.0):0)?(T=e+40|0,!(+u[T>>3]==0.0)):0)?!(+u[e+64>>3]!=0.0):0)?!(+u[e+72>>3]!=0.0):0)?!(+u[e+80>>3]!=1.0):0)?!(+u[e+24>>3]!=0.0):0)?!(+u[e+56>>3]!=0.0):0)?!(+u[e+88>>3]!=0.0):0){n=a<<1;E=nn(n,8)|0;if(!E){en(3,5124,c);n=-1;break}_=nn(n,1)|0;if(!_){dn(E)|0;en(3,5150,m);n=-1;break}if(a){n=s[E>>2]|0;c=s[_>>2]|0;m=0;do{J=r+(m*24|0)|0;Y=m<<4;u[n+(Y<<3)>>3]=+u[J>>3];K=r+(m*24|0)+8|0;u[n+((Y|1)<<3)>>3]=+u[K>>3];u[n+((Y|2)<<3)>>3]=1.0;u[n+((Y|3)<<3)>>3]=0.0;u[n+((Y|4)<<3)>>3]=0.0;u[n+((Y|5)<<3)>>3]=0.0;G=t+(m<<4)|0;u[n+((Y|6)<<3)>>3]=-(+u[J>>3]*+u[G>>3]);u[n+((Y|7)<<3)>>3]=-(+u[K>>3]*+u[G>>3]);u[n+((Y|8)<<3)>>3]=0.0;u[n+((Y|9)<<3)>>3]=0.0;u[n+((Y|10)<<3)>>3]=0.0;u[n+((Y|11)<<3)>>3]=+u[J>>3];u[n+((Y|12)<<3)>>3]=+u[K>>3];u[n+((Y|13)<<3)>>3]=1.0;V=t+(m<<4)+8|0;u[n+((Y|14)<<3)>>3]=-(+u[J>>3]*+u[V>>3]);u[n+((Y|15)<<3)>>3]=-(+u[K>>3]*+u[V>>3]);Y=m<<1;u[c+(Y<<3)>>3]=+u[G>>3];u[c+((Y|1)<<3)>>3]=+u[V>>3];m=m+1|0}while((m|0)!=(a|0))}a=cn(E)|0;if(!a){dn(E)|0;dn(_)|0;en(3,5176,k);n=-1;break}m=ln(a,E)|0;if(!m){dn(E)|0;dn(_)|0;dn(a)|0;en(3,5202,S);n=-1;break}c=ln(a,_)|0;if(!c){dn(E)|0;dn(_)|0;dn(a)|0;dn(m)|0;en(3,5228,x);n=-1;break}if((hn(m)|0)<0){dn(E)|0;dn(_)|0;dn(a)|0;dn(m)|0;dn(c)|0;en(3,5254,C);n=-1;break}n=ln(m,c)|0;if(!n){dn(E)|0;dn(_)|0;dn(a)|0;dn(m)|0;dn(c)|0;en(3,5280,P);n=-1;break}J=s[n>>2]|0;h=+u[J+48>>3];B=+u[e+48>>3];w=+u[T>>3];o=(+u[J+24>>3]-h*B)/w;v=+u[e+16>>3];Q=+u[e+8>>3];g=+u[e>>3];b=(+u[J>>3]-h*v-o*Q)/g;l=+u[J+56>>3];p=(+u[J+32>>3]-B*l)/w;f=(+u[J+8>>3]-v*l-Q*p)/g;w=(+u[J+40>>3]-B)/w;g=(+u[J+16>>3]-v-Q*w)/g;dn(E)|0;dn(_)|0;dn(a)|0;dn(m)|0;dn(c)|0;dn(n)|0;Q=+U(+(h*h+(o*o+b*b)));v=+U(+(l*l+(p*p+f*f)));b=b/Q;o=o/Q;h=h/Q;f=f/v;p=p/v;l=l/v;v=(Q+v)*.5;g=g/v;Q=1.0/v;if(Q<0.0){j=-o;l=-l;p=-p;h=-h;f=-f;z=-b;B=-g;H=-Q}else{j=o;z=b;B=g;H=w/v}o=l*j-p*h;b=f*h-l*z;g=p*z-f*j;v=+U(+(g*g+(o*o+b*b)));do{if(!(v==0.0)){w=o/v;b=b/v;o=g/v;L=l*h+(p*j+f*z);L=L<0.0?-L:L;L=(+U(+(L+1.0))+ +U(+(1.0-L)))*.5;if(z*b-j*w!=0.0){n=0;A=z;y=j;M=h;O=w;R=b}else{J=z*o-h*w!=0.0;n=J?1:2;A=J?z:h;y=J?h:j;M=J?j:z;O=J?w:o;R=J?o:b;o=J?b:w}g=A*R;v=y*O;b=g-v;if(b==0.0){b=j;o=z;break}I=(y*o-M*R)/b;q=L*R/b;g=v-g;b=(A*o-M*O)/g;g=L*O/g;v=I*I+b*b+1.0;w=I*q+b*g;y=w*w-v*(q*q+g*g+-1.0);if(y<0.0){b=j;o=z;break}N=+U(+y);D=(N-w)/v;M=q+I*D;F=g+b*D;N=(-w-N)/v;I=q+I*N;g=g+b*N;J=(n|0)==1;b=J?R:o;v=J?o:R;$=J?D:F;D=J?F:D;F=J?N:g;R=J?g:N;J=(n|0)==2&(J^1);g=J?O:b;b=J?b:O;N=J?D:M;D=J?M:D;o=J?R:I;O=J?I:R;if(f*v-p*b!=0.0){n=0;A=f;y=p;M=l;R=b;q=v}else{J=f*g-l*b!=0.0;n=J?1:2;A=J?f:l;y=J?l:p;M=J?p:f;R=J?b:g;q=J?g:v;g=J?v:b}v=A*q;w=y*R;b=v-w;if(b==0.0){b=j;o=z;break}I=(y*g-M*q)/b;q=L*q/b;b=w-v;y=(A*g-M*R)/b;b=L*R/b;g=I*I+y*y+1.0;v=I*q+y*b;w=v*v-g*(q*q+b*b+-1.0);if(w<0.0){b=j;o=z;break}w=+U(+w);l=(w-v)/g;z=q+I*l;j=b+y*l;w=(-v-w)/g;h=q+I*w;f=b+y*w;J=(n|0)==1;p=J?l:j;l=J?j:l;y=J?w:f;w=J?f:w;J=(n|0)==2&(J^1);f=J?l:z;l=J?z:l;q=J?w:h;w=J?h:w;h=D*l+($*p+N*f);h=h<0.0?-h:h;b=D*w+($*y+N*q);b=b<0.0?-b:b;g=O*l+(F*p+o*f);g=g<0.0?-g:g;v=O*w+(F*y+o*q);v=v<0.0?-v:v;if(h<b){if(h<g){if(h<v){b=$;h=D;o=N;break}b=F;l=w;p=y;h=O;f=q;break}else{if(g<v){b=F;h=O;break}b=F;l=w;p=y;h=O;f=q;break}}else if(b<g){if(b<v){b=$;l=w;p=y;h=D;f=q;o=N;break}b=F;l=w;p=y;h=O;f=q;break}else{if(g<v){b=F;h=O;break}b=F;l=w;p=y;h=O;f=q;break}}else{b=j;o=z}}while(0);N=l*b-p*h;L=f*h-l*o;j=p*o-f*b;z=+U(+(j*j+(N*N+L*L)));u[i>>3]=o;u[i+32>>3]=b;u[i+64>>3]=h;u[i+8>>3]=f;u[i+40>>3]=p;u[i+72>>3]=l;u[i+16>>3]=N/z;u[i+48>>3]=L/z;u[i+80>>3]=j/z;u[i+24>>3]=B;u[i+56>>3]=H;u[i+88>>3]=Q;n=0}else n=-1}else n=-1}while(0);d=W;return n|0}function Yn(e){e=e|0;zs(s[e>>2]|0);zs(e);return 0}function Vn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;return+ +Kn(e,t,r,a,0)}function Gn(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;return+ +Kn(e,t,r,a,1)}function Kn(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0.0,o=0,l=0,c=0,p=0,f=0.0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+208|0;C=M+200|0;x=M+192|0;q=M+96|0;T=M;E=a+4|0;h=s[E>>2]|0;b=a+112|0;g=a+120|0;if((h|0)>0){k=s[a>>2]|0;y=(r|0)>0;_=(r|0)>0;S=0;do{if(!(s[k+(S*320|0)+4>>2]|0)){if(y){l=s[k+(S*320|0)>>2]|0;c=0;o=-1;do{if((s[t+(c<<8)+8>>2]|0)==(l|0)?(f=+u[t+(c<<8)+40>>3],!(f<+u[b>>3])):0)if(!((o|0)!=-1?!(+u[t+(o<<8)+40>>3]<f):0))o=c;c=c+1|0}while((c|0)<(r|0))}else o=-1;s[k+(S*320|0)+304>>2]=o;if((o|0)>-1)s[t+(o<<8)+16>>2]=s[t+(o<<8)+20>>2]}else{c=k+(S*320|0)+312|0;p=k+(S*320|0)|0;if(_){m=0;o=-1;do{l=s[t+(m<<8)+12>>2]|0;if((l|0)==0?(w=t+(m<<8)+248|0,v=s[w>>2]|0,w=s[w+4>>2]|0,!((v|0)==0&(w|0)==0)):0){l=c;if((v|0)==(s[l>>2]|0)?(w|0)==(s[l+4>>2]|0):0)A=20}else if((l|0)==(s[p>>2]|0))A=20;if((A|0)==20){A=0;n=+u[t+(m<<8)+48>>3];if(!(n<+u[g>>3]))if(!((o|0)!=-1?!(+u[t+(o<<8)+48>>3]<n):0))o=m}m=m+1|0}while((m|0)<(r|0))}else o=-1;s[k+(S*320|0)+304>>2]=o;if((o|0)>-1)s[t+(o<<8)+16>>2]=s[t+(o<<8)+24>>2]}S=S+1|0}while((S|0)<(h|0))}if((h|0)>0){b=0;o=0;h=0;l=0;while(1){c=s[a>>2]|0;p=s[c+(b*320|0)+304>>2]|0;do{if((p|0)<0)c=h;else{m=t+(p<<8)|0;if(+kc(e,m,+u[c+(b*320|0)+8>>3],T)>4.0){s[(s[a>>2]|0)+(b*320|0)+304>>2]=-1;c=t+(p<<8)+236|0;if(s[c>>2]|0){c=h;break}s[c>>2]=7;c=h;break}c=s[m>>2]|0;if((l|0)==0|(h|0)<(c|0)){o=0;do{u[q+(o<<5)>>3]=+u[T+(o<<5)>>3];u[q+(o<<5)+8>>3]=+u[T+(o<<5)+8>>3];u[q+(o<<5)+16>>3]=+u[T+(o<<5)+16>>3];u[q+(o<<5)+24>>3]=+u[T+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);o=b}else c=h;l=l+1|0}}while(0);b=b+1|0;if((b|0)>=(s[E>>2]|0))break;else h=c}}else{o=0;l=0}do{if((l|0)!=0?(l|0)>=(s[a+128>>2]|0):0){tn(q,(s[a>>2]|0)+(o*320|0)+112|0,T)|0;h=l<<2;g=js(l<<6)|0;if(!g){en(3,5472,x);kt(1)}b=js(l*96|0)|0;if(!b){en(3,5472,C);kt(1)}c=s[E>>2]|0;if((c|0)>0){p=s[a>>2]|0;m=0;o=0;do{l=s[p+(m*320|0)+304>>2]|0;if((l|0)>=0){x=s[t+(l<<8)+16>>2]|0;r=(4-x|0)%4|0;C=o<<3;u[g+(C<<3)>>3]=+u[t+(l<<8)+168+(r<<4)>>3];u[g+((C|1)<<3)>>3]=+u[t+(l<<8)+168+(r<<4)+8>>3];r=(5-x|0)%4|0;u[g+((C|2)<<3)>>3]=+u[t+(l<<8)+168+(r<<4)>>3];u[g+((C|3)<<3)>>3]=+u[t+(l<<8)+168+(r<<4)+8>>3];r=(6-x|0)%4|0;u[g+((C|4)<<3)>>3]=+u[t+(l<<8)+168+(r<<4)>>3];u[g+((C|5)<<3)>>3]=+u[t+(l<<8)+168+(r<<4)+8>>3];x=(7-x|0)%4|0;u[g+((C|6)<<3)>>3]=+u[t+(l<<8)+168+(x<<4)>>3];u[g+((C|7)<<3)>>3]=+u[t+(l<<8)+168+(x<<4)+8>>3];C=o*12|0;u[b+(C<<3)>>3]=+u[p+(m*320|0)+208>>3];u[b+((C|1)<<3)>>3]=+u[p+(m*320|0)+216>>3];u[b+((C|2)<<3)>>3]=+u[p+(m*320|0)+224>>3];u[b+((C|3)<<3)>>3]=+u[p+(m*320|0)+232>>3];u[b+(C+4<<3)>>3]=+u[p+(m*320|0)+240>>3];u[b+(C+5<<3)>>3]=+u[p+(m*320|0)+248>>3];u[b+(C+6<<3)>>3]=+u[p+(m*320|0)+256>>3];u[b+(C+7<<3)>>3]=+u[p+(m*320|0)+264>>3];u[b+(C+8<<3)>>3]=+u[p+(m*320|0)+272>>3];u[b+(C+9<<3)>>3]=+u[p+(m*320|0)+280>>3];x=s[a>>2]|0;u[b+(C+10<<3)>>3]=+u[x+(m*320|0)+288>>3];u[b+(C+11<<3)>>3]=+u[x+(m*320|0)+296>>3];o=o+1|0}m=m+1|0}while((m|0)<(c|0))}p=a+104|0;l=(i|0)!=0;if(!(s[p>>2]|0)){o=a+8|0;n=+_c(e,T,g,b,h,o);if(l&n>=20.0){jn(s[e>>2]|0,.8)|0;n=+Sc(e,T,g,b,h,o);if(n>=20.0){jn(s[e>>2]|0,.6)|0;n=+Sc(e,T,g,b,h,o);if(n>=20.0){jn(s[e>>2]|0,.4)|0;n=+Sc(e,T,g,b,h,o);if(n>=20.0){jn(s[e>>2]|0,0.0)|0;n=+Sc(e,T,g,b,h,o)}}}}zs(b);zs(g)}else{n=+_c(e,T,g,b,h,q);c=a+8|0;f=+_c(e,c,g,b,h,c);o=n<f;do{if(l){if(o){o=0;do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){jn(s[e>>2]|0,.8)|0;n=+Sc(e,T,g,b,h,q);f=+Sc(e,c,g,b,h,c);if(n<f){o=0;do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){jn(s[e>>2]|0,.6)|0;n=+Sc(e,T,g,b,h,q);f=+Sc(e,c,g,b,h,c);if(n<f){o=0;do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){jn(s[e>>2]|0,.4)|0;n=+Sc(e,T,g,b,h,q);f=+Sc(e,c,g,b,h,c);if(n<f){o=0;do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){jn(s[e>>2]|0,0.0)|0;n=+Sc(e,T,g,b,h,q);f=+Sc(e,c,g,b,h,c);if(n<f)o=0;else{n=f;break}do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}}}}}else if(o){o=0;do{u[a+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[a+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[a+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[a+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f}while(0);zs(b);zs(g)}if(n<20.0){s[p>>2]=1;break}s[p>>2]=0;p=s[E>>2]|0;if((p|0)>0){o=s[a>>2]|0;c=0;do{l=s[o+(c*320|0)+304>>2]|0;if((l|0)>=0?(P=t+(l<<8)+236|0,(s[P>>2]|0)==0):0)s[P>>2]=8;c=c+1|0}while((c|0)<(p|0))}}else A=38}while(0);if((A|0)==38){s[a+104>>2]=0;n=-1.0}d=M;return+n}function Jn(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0,N=0,L=0,j=0,z=0,H=0,B=0,U=0,Q=0,W=0,Y=0.0,V=0.0;W=d;d=d+2544|0;U=W+208|0;B=W+200|0;I=W+184|0;H=W+176|0;M=W+168|0;A=W+152|0;z=W+144|0;P=W+136|0;N=W+128|0;D=W+120|0;F=W+112|0;E=W+104|0;o=W+96|0;n=W+88|0;i=W+80|0;a=W+72|0;r=W+64|0;R=W;O=W+2280|0;$=W+232|0;C=W+224|0;j=W+220|0;q=W+216|0;T=W+212|0;Q=Wi(e,5306)|0;e:do{if(!Q){s[r>>2]=e;en(3,5308,r);r=di(s[(ui()|0)>>2]|0)|0;s[a>>2]=5367;s[a+4>>2]=r;en(3,5361,a);r=0}else{Xn(O,Q);s[i>>2]=j;if((is(O,5368,i)|0)!=1){s[n>>2]=e;en(3,5371,n);Hi(Q)|0;r=0;break}r=s[j>>2]|0;L=js(r*320|0)|0;if(!L){en(3,5472,o);kt(1)}g=R+8|0;v=R+16|0;w=R+24|0;k=R+32|0;y=R+40|0;_=R+48|0;S=R+56|0;x=(t|0)==0;t:do{if((r|0)>0){r=0;i=0;r:while(1){Xn(O,Q);a=L+(r*320|0)|0;n=L+(r*320|0)+312|0;s[E>>2]=n;s[E+4>>2]=C;if((is(O,5489,E)|0)==1){b=s[n>>2]|0;s[a>>2]=(b&-32768|0)==0&0==0?b&32767:0;s[L+(r*320|0)+4>>2]=1;i=i|2}else{if(x){a=10;break}if(!(sn($,e,2048,1)|0)){a=12;break}_s($,O,2047-(ys($)|0)|0)|0;b=Xs(t,$)|0;s[a>>2]=b;if((b|0)<0){a=14;break}s[L+(r*320|0)+4>>2]=0;i=i|1}Xn(O,Q);a=L+(r*320|0)+8|0;s[P>>2]=a;if((is(O,5785,P)|0)!=1){a=18;break}Xn(O,Q);m=L+(r*320|0)+16|0;h=L+(r*320|0)+24|0;b=L+(r*320|0)+40|0;s[A>>2]=m;s[A+4>>2]=h;s[A+8>>2]=L+(r*320|0)+32;s[A+12>>2]=b;if((is(O,5894,A)|0)!=4){s[M>>2]=q;s[M+4>>2]=T;if((is(O,5910,M)|0)==2)n=0;else{a=21;break}}else n=1;do{Xn(O,Q);s[I>>2]=L+(r*320|0)+16+(n<<5);s[I+4>>2]=L+(r*320|0)+16+(n<<5)+8;s[I+8>>2]=L+(r*320|0)+16+(n<<5)+16;s[I+12>>2]=L+(r*320|0)+16+(n<<5)+24;if((is(O,5894,I)|0)!=4){a=23;break r}n=n+1|0}while((n|0)<3);rn(m,L+(r*320|0)+112|0)|0;V=+u[a>>3];Y=V*-.5;u[R>>3]=Y;V=V*.5;u[g>>3]=V;u[v>>3]=V;u[w>>3]=V;u[k>>3]=V;u[y>>3]=Y;u[_>>3]=Y;u[S>>3]=Y;a=L+(r*320|0)+48|0;n=L+(r*320|0)+56|0;o=L+(r*320|0)+72|0;l=L+(r*320|0)+80|0;c=L+(r*320|0)+88|0;p=L+(r*320|0)+104|0;f=0;do{Y=+u[R+(f<<4)>>3];V=+u[R+(f<<4)+8>>3];u[L+(r*320|0)+208+(f*24|0)>>3]=+u[b>>3]+(+u[m>>3]*Y+ +u[h>>3]*V);u[L+(r*320|0)+208+(f*24|0)+8>>3]=+u[o>>3]+(+u[a>>3]*Y+ +u[n>>3]*V);u[L+(r*320|0)+208+(f*24|0)+16>>3]=+u[p>>3]+(+u[l>>3]*Y+ +u[c>>3]*V);f=f+1|0}while((f|0)!=4);r=r+1|0;if((r|0)>=(s[j>>2]|0))break t}if((a|0)==10){s[F>>2]=e;s[F+4>>2]=O;en(3,5496,F)}else if((a|0)==12){s[D>>2]=e;en(3,5624,D)}else if((a|0)==14){s[N>>2]=e;s[N+4>>2]=$;en(3,5708,N)}else if((a|0)==18){s[z>>2]=e;s[z+4>>2]=r+1;en(3,5789,z)}else if((a|0)==21){s[H>>2]=e;s[H+4>>2]=r+1;en(3,5916,H)}else if((a|0)==23){s[B>>2]=e;s[B+4>>2]=r+1;en(3,5916,B)}Hi(Q)|0;zs(L);r=0;break e}else i=0}while(0);Hi(Q)|0;r=js(136)|0;if(!r){en(3,5472,U);kt(1)}s[r>>2]=L;s[r+4>>2]=s[j>>2];s[r+104>>2]=0;do{if((i&3|0)!=3){a=r+108|0;if(!(i&1)){s[a>>2]=1;break}else{s[a>>2]=0;break}}else s[r+108>>2]=2}while(0);u[r+112>>3]=.5;u[r+120>>3]=.5}}while(0);d=W;return r|0}function Xn(e,t){e=e|0;t=t|0;var r=0,i=0;e:do{if(Qi(e,256,t)|0)while(1){r=ys(e)|0;t:do{if(r)while(1){r=r+-1|0;i=e+r|0;switch(a[i>>0]|0){case 13:case 10:break;default:break t}a[i>>0]=0;if(!r)break t}}while(0);switch(a[e>>0]|0){case 0:case 35:break;default:break e}if(!(Qi(e,256,t)|0))break e}}while(0);return}function Zn(e,t,r,a){e=e|0;t=+t;r=+r;a=a|0;var i=0,n=0.0,o=0.0,l=0,c=0.0,p=0.0,f=0,m=0,h=0,b=0,g=0;g=d;d=d+400|0;f=g+296|0;b=g+200|0;m=g+128|0;h=g;l=s[e>>2]|0;i=s[e+4>>2]|0;if((vn(e+8|0,f,b)|0)<0)en(3,6025,g+392|0);else{o=+(i+-1|0);i=f+32|0;u[i>>3]=o*+u[f+64>>3]-+u[i>>3];i=f+40|0;u[i>>3]=o*+u[f+72>>3]-+u[i>>3];i=f+48|0;u[i>>3]=o*+u[f+80>>3]-+u[i>>3];i=f+56|0;u[i>>3]=o*+u[f+88>>3]-+u[i>>3];n=+u[f+80>>3];i=0;do{u[m+(i*24|0)>>3]=+u[f+(i<<5)>>3]/n;u[m+(i*24|0)+8>>3]=+u[f+(i<<5)+8>>3]/n;u[m+(i*24|0)+16>>3]=+u[f+(i<<5)+16>>3]/n;i=i+1|0}while((i|0)!=3);n=+(l+-1|0);u[h>>3]=+u[m>>3]*2.0/n;u[h+8>>3]=+u[m+8>>3]*2.0/n;u[h+16>>3]=+u[m+16>>3]*2.0/n+-1.0;l=h+24|0;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;u[h+40>>3]=+u[m+32>>3]*2.0/o;u[h+48>>3]=+u[m+40>>3]*2.0/o+-1.0;l=h+56|0;n=r-t;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;s[l+16>>2]=0;s[l+20>>2]=0;u[h+80>>3]=(t+r)/n;u[h+88>>3]=r*-2.0*t/n;l=h+96|0;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;u[h+112>>3]=1.0;u[h+120>>3]=0.0;n=+u[b+24>>3];o=+u[b+56>>3];r=+u[b+88>>3];l=0;do{t=+u[h+(l<<5)>>3];i=h+(l<<5)+8|0;e=h+(l<<5)+16|0;c=+u[i>>3];p=+u[e>>3];f=0;do{u[a+((f<<2)+l<<3)>>3]=t*+u[b+(f<<3)>>3]+c*+u[b+32+(f<<3)>>3]+p*+u[b+64+(f<<3)>>3];f=f+1|0}while((f|0)!=3);u[a+(l+12<<3)>>3]=+u[h+(l<<5)+24>>3]+(t*n+ +u[i>>3]*o+ +u[e>>3]*r);l=l+1|0}while((l|0)!=4)}d=g;return}function eo(e){e=e|0;s[496]=e;return}function to(){return s[496]|0}function ro(e){e=e|0;var t=0,r=0;t=e+212|0;r=s[t>>2]|0;if(r){$c(r)|0;Xl(s[t>>2]|0)|0;s[t>>2]=0}t=e+224|0;if(s[t>>2]|0){Yl(t)|0;s[t>>2]=0}t=e+192|0;if(s[t>>2]|0){qn(t)|0;s[t>>2]=0}return}function ao(e){e=e|0;var t=0,r=0,a=0,i=0,n=0;n=d;d=d+16|0;r=n;s[r>>2]=e;if(!(Qo(2044,r)|0))e=-1;else{i=Wo(2044,r)|0;e=i+196|0;t=s[e>>2]|0;if(t){zs(t);s[e>>2]=0;s[i+200>>2]=0}ro(i);Nc(s[i+216>>2]|0)|0;Yo(2044,r)|0;r=i+248|0;a=i+252|0;e=s[r>>2]|0;if((s[a>>2]|0)!=(e|0)){t=0;do{Yn(s[e+(t<<3)+4>>2]|0)|0;t=t+1|0;e=s[r>>2]|0}while(t>>>0<(s[a>>2]|0)-e>>3>>>0)}Vo(r);Ma(r);Vo(i+248|0);Ma(i);e=0}d=n;return e|0}function io(e){e=e|0;var t=0,r=0,i=0,n=0,o=0;o=d;d=d+208|0;n=o+192|0;i=o;r=o+196|0;if(!(a[e>>0]&1))t=e+1|0;else t=s[e+8>>2]|0;if((yn(t,1,i,o+184|0)|0)<0){if(!(a[e>>0]&1))t=e+1|0;else t=s[e+8>>2]|0;s[n>>2]=t;en(3,6093,n);t=-1}else{t=s[521]|0;s[521]=t+1;s[r>>2]=t;Kc(Go(2064,r)|0,i|0,184)|0}d=o;return t|0}function so(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,p=0,f=0;f=d;d=d+48|0;p=f+24|0;c=f+16|0;o=f+8|0;i=f;r=f+32|0;a=f+28|0;s[r>>2]=e;s[a>>2]=t;do{if((Qo(2044,r)|0)!=0?(l=Wo(2044,r)|0,(Ko(2064,a)|0)!=0):0){n=l+8|0;Kc(n|0,Go(2064,a)|0,184)|0;a=s[n>>2]|0;r=l+204|0;t=s[l+12>>2]|0;e=l+208|0;if(!((a|0)==(s[r>>2]|0)?(t|0)==(s[e>>2]|0):0)){s[i>>2]=a;s[i+4>>2]=t;en(2,6152,i);gn(n,s[r>>2]|0,s[e>>2]|0,n)|0}ro(l);r=Cn(n,15)|0;e=l+192|0;s[e>>2]=r;if(!r){en(3,6199,o);r=-1;break}r=Vl(r)|0;t=l+212|0;s[t>>2]=r;if(!r){en(3,6237,c);r=-1;break}Gl(r,2)|0;c=Ql(n)|0;s[l+224>>2]=c;if(!c){en(3,6274,p);r=-1;break}else{Oc(s[t>>2]|0,s[l+216>>2]|0)|0;Zn(s[e>>2]|0,+u[l+232>>3],+u[l+240>>3],l+264|0);r=0;break}}else r=-1}while(0);d=f;return r|0}function no(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;n=l;r=l+12|0;s[r>>2]=e;if(Qo(2044,r)|0){i=Wo(2044,r)|0;if(!(a[t>>0]&1))t=t+1|0;else t=s[t+8>>2]|0;e=i+216|0;r=Xs(s[e>>2]|0,t)|0;s[i+260>>2]=r;if((r|0)<0){s[n>>2]=t;en(3,6312,n);Nc(s[e>>2]|0)|0;en(3,6358,o);r=-1}}else r=-1;d=l;return r|0}function oo(e,t){e=e|0;t=t|0;var r=0,i=0,n=0,o=0,l=0,c=0,u=0;u=d;d=d+32|0;n=u+16|0;i=u+8|0;r=u+20|0;c=u;s[r>>2]=e;do{if(Qo(2044,r)|0){l=Wo(2044,r)|0;if(!(a[t>>0]&1))r=t+1|0;else r=s[t+8>>2]|0;e=s[l+212>>2]|0;t=l+216|0;o=l+220|0;r=Jn(r,s[t>>2]|0)|0;s[o>>2]=r;if(!r){en(3,6402,i);Nc(s[t>>2]|0)|0;en(3,6429,n);r=-1;break}switch(s[r+108>>2]|0){case 0:{oc(e,0)|0;break}case 1:{oc(e,2)|0;break}default:oc(e,3)|0}e=l+248|0;t=l+252|0;i=s[t>>2]|0;r=i-(s[e>>2]|0)>>3;n=c;s[n>>2]=0;s[n+4>>2]=0;s[c>>2]=r;s[c+4>>2]=s[o>>2];if((i|0)==(s[l+256>>2]|0)){Jo(e,c);break}else{l=c;r=s[l>>2]|0;l=s[l+4>>2]|0;c=i;s[c>>2]=r;s[c+4>>2]=l;s[t>>2]=(s[t>>2]|0)+8;break}}else r=-1}while(0);d=u;return r|0}function lo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0;n=d;d=d+16|0;r=n;s[r>>2]=e;if(((Qo(2044,r)|0)!=0?(a=Wo(2044,r)|0,(t|0)>=0):0)?(i=s[a+248>>2]|0,(s[a+252>>2]|0)-i>>3>>>0>t>>>0):0)r=s[(s[i+(t<<3)+4>>2]|0)+4>>2]|0;else r=-1;d=n;return r|0}function co(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{t=Wo(2044,t)|0;t=(s[t+252>>2]|0)-(s[t+248>>2]|0)>>3}d=r;return t|0}function uo(e,t){e=e|0;t=+t;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;if(Qo(2044,r)|0)u[(Wo(2044,r)|0)+232>>3]=t;d=a;return}function po(e){e=e|0;var t=0.0,r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;if(!(Qo(2044,r)|0))t=-1.0;else t=+u[(Wo(2044,r)|0)+232>>3];d=a;return+t}function fo(e,t){e=e|0;t=+t;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;if(Qo(2044,r)|0)u[(Wo(2044,r)|0)+240>>3]=t;d=a;return}function mo(e){e=e|0;var t=0.0,r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;if(!(Qo(2044,r)|0))t=-1.0;else t=+u[(Wo(2044,r)|0)+240>>3];d=a;return+t}function ho(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;r=i+4|0;s[r>>2]=e;if((Qo(2044,r)|0)!=0?(oc(s[(Wo(2044,r)|0)+212>>2]|0,t)|0)==0:0){s[a>>2]=t;en(1,6478,a)}d=i;return}function bo(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=a;return-1}else{e=(uc(s[(Wo(2044,t)|0)+212>>2]|0,r)|0)==0;d=a;return(e?s[r>>2]|0:-1)|0}return 0}function go(e,t){e=e|0;t=+t;var r=0,a=0,i=0.0,n=0,o=0,l=0;l=d;d=d+16|0;o=l;r=l+8|0;s[r>>2]=e;if((((Qo(2044,r)|0)!=0?(a=Wo(2044,r)|0,!(t<=0.0|t>=1.0)):0)?(i=t,n=s[a+212>>2]|0,(n|0)!=0):0)?(dc(n,i)|0)==0:0){u[o>>3]=i;en(1,6513,o)}d=l;return}function vo(e){e=e|0;var t=0,r=0,a=0,i=0;i=d;d=d+16|0;t=i+8|0;a=i;s[t>>2]=e;if((Qo(2044,t)|0)!=0?(r=s[(Wo(2044,t)|0)+212>>2]|0,(r|0)!=0):0){e=(pc(r,a)|0)==0;d=i;return+(e?+u[a>>3]:-1.0)}d=i;return-1.0}function wo(e,t){e=e|0;t=t|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;if(Qo(2044,r)|0)lc(s[(Wo(2044,r)|0)+212>>2]|0,t)|0;d=a;return}function ko(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{cc(s[(Wo(2044,t)|0)+212>>2]|0,r)|0;t=s[r>>2]|0}d=a;return t|0}function yo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;r=i+4|0;s[r>>2]=e;if((Qo(2044,r)|0)!=0?(ec(s[(Wo(2044,r)|0)+212>>2]|0,t)|0)==0:0){s[a>>2]=t;en(1,6544,a)}d=i;return}function _o(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=a;return-1}else{e=(tc(s[(Wo(2044,t)|0)+212>>2]|0,r)|0)==0;d=a;return(e?s[r>>2]|0:-1)|0}return 0}function So(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0;n=d;d=d+16|0;i=n;r=n+4|0;s[r>>2]=e;if(((Qo(2044,r)|0)!=0?(a=Wo(2044,r)|0,t>>>0<=255):0)?(rc(s[a+212>>2]|0,t)|0)==0:0){s[i>>2]=t;en(1,6569,i)}d=n;return}function xo(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=a;return-1}else{e=(ac(s[(Wo(2044,t)|0)+212>>2]|0,r)|0)==0;d=a;return(e?s[r>>2]|0:-1)|0}return 0}function Co(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;r=i+4|0;s[r>>2]=e;if((Qo(2044,r)|0)!=0?(Jl(s[(Wo(2044,r)|0)+212>>2]|0,t)|0)==0:0){s[a>>2]=t;en(1,6590,a)}d=i;return}function qo(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=a;return-1}else{e=(ic(s[(Wo(2044,t)|0)+212>>2]|0,r)|0)==0;d=a;return(e?s[r>>2]|0:-1)|0}return 0}function To(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;r=i+4|0;s[r>>2]=e;if(!(Qo(2044,r)|0))t=0;else{e=(t|0)!=0;Kl(s[(Wo(2044,r)|0)+212>>2]|0,e&1)|0;s[a>>2]=e?6616:6620;en(1,6625,a)}d=i;return t|0}function Eo(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else t=s[(s[(Wo(2044,t)|0)+212>>2]|0)+4834148>>2]|0;d=r;return t|0}function Po(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else{Zl(s[(Wo(2044,t)|0)+212>>2]|0,r)|0;t=s[r>>2]|0}d=a;return t|0}function Ao(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;r=i+4|0;s[r>>2]=e;if((Qo(2044,r)|0)!=0?(sc(s[(Wo(2044,r)|0)+212>>2]|0,t)|0)==0:0){s[a>>2]=t;en(1,6647,a)}d=i;return}function Mo(e){e=e|0;var t=0,r=0,a=0;a=d;d=d+16|0;t=a+4|0;r=a;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=a;return-1}else{e=(nc(s[(Wo(2044,t)|0)+212>>2]|0,r)|0)==0;d=a;return(e?s[r>>2]|0:-1)|0}return 0}function Io(e,t){e=e|0;t=t|0;var r=0;r=0;do{u[t+(r<<5)>>3]=+u[e+(r<<5)>>3];u[t+(r<<5)+8>>3]=+u[e+(r<<5)+8>>3];u[t+(r<<5)+16>>3]=+u[e+(r<<5)+16>>3];u[t+(r<<5)+24>>3]=+u[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3);return}function Ro(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;i=d;d=d+16|0;a=i;s[a>>2]=e;do{if(Qo(2044,a)|0){a=Wo(2044,a)|0;e=s[a+212>>2]|0;if((s[e+44>>2]|0)>(t|0)){+kc(s[a+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,+(r|0),264);a=0;break}else{a=s[523]|0;break}}else a=s[522]|0}while(0);d=i;return a|0}function Oo(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;i=d;d=d+16|0;a=i;s[a>>2]=e;do{if(Qo(2044,a)|0){a=Wo(2044,a)|0;e=s[a+212>>2]|0;if((s[e+44>>2]|0)>(t|0)){+yc(s[a+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,264,+(r|0),264);a=0;break}else{a=s[523]|0;break}}else a=s[522]|0}while(0);d=i;return a|0}function $o(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;i=d;d=d+16|0;a=i;s[a>>2]=e;do{if(Qo(2044,a)|0){a=s[(Wo(2044,a)|0)+212>>2]|0;if((s[a+44>>2]|0)>(t|0)){s[((t|0)<0?8:a+48+(t<<8)|0)+16>>2]=r;a=0;break}else{a=s[523]|0;break}}else a=s[522]|0}while(0);d=i;return a|0}function Fo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0.0,n=0.0,o=0.0,l=0.0,c=0.0,p=0.0,f=0.0,m=0.0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=s[(Wo(2044,r)|0)+212>>2]|0;if((s[r+44>>2]|0)>(t|0)){r=(t|0)<0?8:r+48+(t<<8)|0;m=+u[33];u[r+168>>3]=m;l=+u[34];u[r+176>>3]=l;f=+u[35];u[r+184>>3]=f;o=+u[36];u[r+192>>3]=o;p=+u[37];u[r+200>>3]=p;n=+u[38];u[r+208>>3]=n;c=+u[39];u[r+216>>3]=c;i=+u[40];u[r+224>>3]=i;u[r+56>>3]=(m+f+p+c)*.25;u[r+64>>3]=(l+o+n+i)*.25;r=0;break}else{r=s[523]|0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Do(e,t){e=e|0;t=t|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=Wo(2044,r)|0;e=s[r+248>>2]|0;if((t|0)<0?1:(s[r+252>>2]|0)-e>>3>>>0<=t>>>0){r=s[524]|0;break}else{t=s[e+(t<<3)+4>>2]|0;e=s[r+212>>2]|0;+Gn(s[r+224>>2]|0,e+48|0,s[e+44>>2]|0,t);Io(t+8|0,264);r=0;break}}else r=s[522]|0}while(0);d=a;return r|0}function No(e,t){e=e|0;t=t|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=Wo(2044,r)|0;e=s[r+248>>2]|0;if((t|0)<0?1:(s[r+252>>2]|0)-e>>3>>>0<=t>>>0){r=s[524]|0;break}else{t=s[e+(t<<3)+4>>2]|0;e=s[r+212>>2]|0;+Vn(s[r+224>>2]|0,e+48|0,s[e+44>>2]|0,t);Io(t+8|0,264);r=0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Lo(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=s[522]|0;else{t=Wo(2044,t)|0;t=fc(s[t+212>>2]|0,s[t+196>>2]|0)|0}d=r;return t|0}function jo(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=2088;else t=(s[(Wo(2044,t)|0)+212>>2]|0)+44|0;d=r;return s[t>>2]|0}function zo(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;i=d;d=d+16|0;a=i;s[a>>2]=e;do{if(Qo(2044,a)|0){e=Wo(2044,a)|0;a=s[e+248>>2]|0;if((t|0)<0?1:(s[e+252>>2]|0)-a>>3>>>0<=t>>>0){a=s[524]|0;break}a=s[a+(t<<3)+4>>2]|0;if((r|0)<0?1:(s[a+4>>2]|0)<=(r|0)){a=s[523]|0;break}else{a=s[a>>2]|0;Io(a+(r*320|0)+16|0,264);jt(0,s[a+(r*320|0)+304>>2]|0,s[a+(r*320|0)>>2]|0,s[a+(r*320|0)+4>>2]|0,+ +u[a+(r*320|0)+8>>3])|0;a=0;break}}else a=s[522]|0}while(0);d=i;return a|0}function Ho(e,t){e=e|0;t=t|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=s[(Wo(2044,r)|0)+212>>2]|0;if((s[r+44>>2]|0)>(t|0)){r=(t|0)<0?8:r+48+(t<<8)|0;Qe(1,s[r>>2]|0,s[r+4>>2]|0,s[r+8>>2]|0,s[r+12>>2]|0,s[r+16>>2]|0,s[r+20>>2]|0,s[r+24>>2]|0,+ +u[r+32>>3],+ +u[r+40>>3],+ +u[r+48>>3],+ +u[r+56>>3],+ +u[r+64>>3],+ +u[r+72>>3],+ +u[r+80>>3],+ +u[r+88>>3],+ +u[r+96>>3],+ +u[r+104>>3],+ +u[r+112>>3],+ +u[r+120>>3],+ +u[r+128>>3],+ +u[r+136>>3],+ +u[r+144>>3],+ +u[r+152>>3],+ +u[r+160>>3],+ +u[r+168>>3],+ +u[r+176>>3],+ +u[r+184>>3],+ +u[r+192>>3],+ +u[r+200>>3],+ +u[r+208>>3],+ +u[r+216>>3],+ +u[r+224>>3],s[r+240>>2]|0)|0;r=0;break}else{r=s[523]|0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Bo(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0,n=0,o=0,l=0;o=d;d=d+16|0;n=o+8|0;i=o+12|0;a=s[525]|0;s[525]=a+1;s[i>>2]=a;i=Wo(2044,i)|0;s[i>>2]=a;s[i+204>>2]=e;s[i+208>>2]=t;l=re(e<<2,t)|0;t=i+200|0;s[t>>2]=l;e=i+196|0;s[e>>2]=js(l)|0;l=Fc()|0;s[i+216>>2]=l;if(!l)en(3,8285,o);so(a,r)|0;s[n>>2]=s[t>>2];en(1,8322,n);Lt(2,s[i>>2]|0,s[e>>2]|0,s[t>>2]|0,i+264|0,264)|0;d=o;return s[i>>2]|0}function Uo(e){e=e|0;var t=0;e=d;d=d+16|0;t=e;Xo(8591,7);Zo(8597,3);el(8606,2);el(8617,3);tl(8633,4);Zo(8651,4);rl(8671,5);Xo(8683,8);tl(8700,5);Xo(8720,9);Xo(8738,10);tl(8760,6);tl(8783,7);Zo(8812,6);Zo(8825,7);Xo(8838,11);tl(8857,8);tl(8867,9);Zo(8880,8);Zo(8893,9);al(8912,10);il(8924,1);sl(8936,1);nl(8959,1);sl(8982,2);nl(9004,2);ol(9026,1);Zo(9043,10);ol(9060,2);Zo(9073,11);ol(9086,3);Zo(9110,12);ll(9134,3);nl(9147,3);ol(9160,4);Zo(9178,13);ol(9196,5);Zo(9212,14);ol(9228,6);Zo(9245,15);cl(9262,2088);cl(9291,2096);cl(9319,2092);Mt(9352,680,0);Mt(9369,680,1);Mt(9385,680,0);Mt(9407,680,0);Mt(9432,680,1);Mt(9457,680,1);Mt(9482,680,100);Mt(9509,680,0);Mt(9535,680,1);Mt(9561,680,0);Mt(9588,680,0);Mt(9615,680,1);Mt(9641,680,2);Mt(9666,680,3);Mt(9704,680,4);Mt(9741,680,0);Mt(9775,680,0);Mt(9799,680,1);Mt(9825,680,2);Mt(9852,680,2);Mt(9886,680,5);u[t>>3]=.5;ul(9904,t);Mt(9925,680,0);Mt(9944,680,1);Mt(9962,680,2);Mt(9980,680,3);Mt(9999,680,4);Mt(10021,680,3);Mt(10040,680,515);Mt(10069,680,259);Mt(10097,680,4);Mt(10116,680,772);Mt(10146,680,1028);Mt(10176,680,0);Mt(10207,680,1);Mt(10243,680,2);Mt(10277,680,3);Mt(10315,680,0);Mt(10348,680,1);Mt(10395,680,2);Mt(10437,680,3);Mt(10480,680,4);Mt(10532,680,5);Mt(10583,680,6);Mt(10628,680,7);Mt(10667,680,8);Mt(10712,680,9);d=e;return}function Qo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0;r=s[t>>2]|0;i=s[e+4>>2]|0;e:do{if(i){n=i+-1|0;o=(n&i|0)==0;if(o)a=n&r;else a=(r>>>0)%(i>>>0)|0;t=s[(s[e>>2]|0)+(a<<2)>>2]|0;if(t)do{t=s[t>>2]|0;if(!t){t=0;break e}e=s[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(i>>>0)|0;if((e|0)!=(a|0)){t=0;break e}}while((s[t+8>>2]|0)!=(r|0));else t=0}else t=0}while(0);return t|0}function Wo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0;n=d;d=d+32|0;i=n+8|0;a=n;r=Qo(e,t)|0;if(!r){ba(i,e,t);ga(a,e,s[i>>2]|0);r=s[a>>2]|0;s[i>>2]=0}d=n;return r+16|0}function Yo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;r=i+4|0;a=i;t=Qo(e,t)|0;if(!t)t=0;else{s[a>>2]=t;s[r>>2]=s[a>>2];ma(e,r)|0;t=1}d=i;return t|0}function Vo(e){e=e|0;var t=0,r=0;r=s[e>>2]|0;if(r){t=e+4|0;e=s[t>>2]|0;if((e|0)!=(r|0)){do{e=e+-8|0}while((e|0)!=(r|0));s[t>>2]=e}Ma(r)}return}function Go(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0;n=d;d=d+32|0;i=n+8|0;a=n;r=Ko(e,t)|0;if(!r){Rl(i,e,t);Ol(a,e,s[i>>2]|0);r=s[a>>2]|0;s[i>>2]=0}d=n;return r+16|0}function Ko(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0;r=s[t>>2]|0;i=s[e+4>>2]|0;e:do{if(i){n=i+-1|0;o=(n&i|0)==0;if(o)a=n&r;else a=(r>>>0)%(i>>>0)|0;t=s[(s[e>>2]|0)+(a<<2)>>2]|0;if(t)do{t=s[t>>2]|0;if(!t){t=0;break e}e=s[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(i>>>0)|0;if((e|0)!=(a|0)){t=0;break e}}while((s[t+8>>2]|0)!=(r|0));else t=0}else t=0}while(0);return t|0}function Jo(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l;n=e+4|0;r=s[e>>2]|0;i=((s[n>>2]|0)-r>>3)+1|0;if(i>>>0>536870911)Pa(e);a=r;r=(s[e+8>>2]|0)-a|0;if(r>>3>>>0<268435455){r=r>>2;r=r>>>0<i>>>0?i:r}else r=536870911;Al(o,r,(s[n>>2]|0)-a>>3,e+8|0);n=o+8|0;i=s[n>>2]|0;r=t;a=s[r+4>>2]|0;t=i;s[t>>2]=s[r>>2];s[t+4>>2]=a;s[n>>2]=i+8;Ml(e,o);Il(o);d=l;return}function Xo(e,t){e=e|0;t=t|0;Be(e|0,4,2200,10911,1,t|0);return}function Zo(e,t){e=e|0;t=t|0;Be(e|0,2,2192,10801,10,t|0);return}function el(e,t){e=e|0;t=t|0;Be(e|0,3,2180,10906,12,t|0);return}function tl(e,t){e=e|0;t=t|0;Be(e|0,3,2168,10906,13,t|0);return}function rl(e,t){e=e|0;t=t|0;Be(e|0,2,2160,10801,11,t|0);return}function al(e,t){e=e|0;t=t|0;Be(e|0,2,2152,10797,7,t|0);return}function il(e,t){e=e|0;t=t|0;Be(e|0,1,2148,10794,16,t|0);return}function sl(e,t){e=e|0;t=t|0;Be(e|0,3,2136,10789,1,t|0);return}function nl(e,t){e=e|0;t=t|0;Be(e|0,2,2128,10785,1,t|0);return}function ol(e,t){e=e|0;t=t|0;Be(e|0,3,2116,10780,1,t|0);return}function ll(e,t){e=e|0;t=t|0;Be(e|0,3,2104,10775,2,t|0);return}function cl(e,t){e=e|0;t=t|0;Mt(e|0,680,s[t>>2]|0);return}function ul(e,t){e=e|0;t=t|0;Mt(e|0,720,~~+u[t>>3]>>>0|0);return}function dl(){s[511]=0;s[512]=0;s[513]=0;s[514]=0;c[515]=1.0;St(11,2044,b|0)|0;s[516]=0;s[517]=0;s[518]=0;s[519]=0;c[520]=1.0;St(12,2064,b|0)|0;Uo(0);return}function pl(e){e=e|0;bl(e);return}function fl(e){e=e|0;ml(e);return}function ml(e){e=e|0;var t=0;hl(e,s[e+8>>2]|0);t=s[e>>2]|0;s[e>>2]=0;if(t)Ma(t);return}function hl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=s[t>>2]|0;Ma(e)}while((t|0)!=0);return}function bl(e){e=e|0;var t=0;gl(e,s[e+8>>2]|0);t=s[e>>2]|0;s[e>>2]=0;if(t)Ma(t);return}function gl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=s[t>>2]|0;Vo(e+264|0);Ma(e)}while((t|0)!=0);return}function vl(e,t,r){e=e|0;t=t|0;r=+r;zu[e&3](t,r);return}function wl(e,t,r){e=e|0;t=t|0;r=r|0;Qu[e&7](t,r);return}function kl(e,t){e=e|0;t=t|0;return+ +Hu[e&3](t)}function yl(e,t,r){e=e|0;t=t|0;r=+r;zu[e&3](t,r);return}function _l(e){e=e|0;return Bu[e&1]()|0}function Sl(e,t){e=e|0;t=t|0;Uu[e&15](t);return}function xl(e,t){e=e|0;t=t|0;var r=0,a=0;r=d;d=d+16|0;a=r;Cl(a,t);e=Wu[e&31](a)|0;Bc(a);d=r;return e|0}function Cl(e,t){e=e|0;t=t|0;Hc(e,t+4|0,s[t>>2]|0);return}function ql(e,t,r){e=e|0;t=t|0;r=r|0;return Xu[e&15](t,r)|0}function Tl(e,t,r){e=e|0;t=t|0;r=r|0;var a=0,i=0;a=d;d=d+16|0;i=a;Cl(i,r);e=Xu[e&15](t,i)|0;Bc(i);d=a;return e|0}function El(e,t){e=e|0;t=t|0;return Wu[e&31](t)|0}function Pl(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;return Nu[e&15](t,r,a)|0}function Al(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;s[e+12>>2]=0;s[e+16>>2]=a;if(!t)a=0;else a=Aa(t<<3)|0;s[e>>2]=a;r=a+(r<<3)|0;s[e+8>>2]=r;s[e+4>>2]=r;s[e+12>>2]=a+(t<<3);return}function Ml(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0;a=s[e>>2]|0;n=e+4|0;r=t+4|0;i=(s[n>>2]|0)-a|0;o=(s[r>>2]|0)+(0-(i>>3)<<3)|0;s[r>>2]=o;Kc(o|0,a|0,i|0)|0;i=s[e>>2]|0;s[e>>2]=s[r>>2];s[r>>2]=i;i=t+8|0;a=s[n>>2]|0;s[n>>2]=s[i>>2];s[i>>2]=a;i=e+8|0;e=t+12|0;a=s[i>>2]|0;s[i>>2]=s[e>>2];s[e>>2]=a;s[t>>2]=s[r>>2];return}function Il(e){e=e|0;var t=0,r=0,a=0;r=s[e+4>>2]|0;a=e+8|0;t=s[a>>2]|0;if((t|0)!=(r|0)){do{t=t+-8|0}while((t|0)!=(r|0));s[a>>2]=t}t=s[e>>2]|0;if(t)Ma(t);return}function Rl(e,t,r){e=e|0;t=t|0;r=r|0;var a=0;a=Aa(200)|0;s[a+8>>2]=s[r>>2];Wc(a+16|0,0,184)|0;s[e>>2]=a;e=e+4|0;s[e>>2]=t+8;s[e+4>>2]=257;return}function Ol(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0.0,u=0.0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0;p=s[r+8>>2]|0;v=r+4|0;s[v>>2]=p;g=t+4|0;d=s[g>>2]|0;b=(d|0)==0;e:do{if(!b){f=d+-1|0;m=(f&d|0)==0;if(m)n=f&p;else n=(p>>>0)%(d>>>0)|0;i=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!i)h=12;else while(1){o=s[i>>2]|0;if(!o){h=12;break e}i=s[o+4>>2]|0;if(m)i=i&f;else i=(i>>>0)%(d>>>0)|0;if((i|0)!=(n|0)){h=12;break e}if((s[o+8>>2]|0)==(p|0)){i=0;r=o;break}else i=o}}else{n=0;h=12}}while(0);if((h|0)==12){p=t+12|0;l=+(((s[p>>2]|0)+1|0)>>>0);u=+c[t+16>>2];do{if(b|l>+(d>>>0)*u){if(d>>>0>2)i=(d+-1&d|0)==0;else i=0;o=(i&1|d<<1)^1;i=~~+te(+(l/u))>>>0;pa(t,o>>>0<i>>>0?i:o);o=s[g>>2]|0;i=s[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&i;break}else{d=o;n=(i>>>0)%(o>>>0)|0;break}}}while(0);i=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!i){i=t+8|0;s[r>>2]=s[i>>2];s[i>>2]=r;s[(s[t>>2]|0)+(n<<2)>>2]=i;i=s[r>>2]|0;if(i){i=s[i+4>>2]|0;n=d+-1|0;if(!(n&d))i=i&n;else i=(i>>>0)%(d>>>0)|0;s[(s[t>>2]|0)+(i<<2)>>2]=r}}else{s[r>>2]=s[i>>2];s[i>>2]=r}s[p>>2]=(s[p>>2]|0)+1;i=1}s[e>>2]=r;a[e+4>>0]=i;return}function $l(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c*3|0)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+3|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+6|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Fl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){h=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((h&248)+10+(h<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Dl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Nl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Ll(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){h=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((h&248)+12+(h<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function jl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;h=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=h;f=h+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((r|0)>0){c=0;o=h;p=h+(C<<1)|0;while(1){i[p>>1]=0;i[o>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;m=(s[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=h+(c<<1)|0;o=0;t:while(1){if(S){c=m;w=1;v=f;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(q|0)){a[c>>0]=-1;o=i[e+(_<<1)>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}m=i[e+(k<<1)>>1]|0;h=m<<16>>16;o=i[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(m<<16>>16<=0){if(f){i[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((s[f>>2]|0)<(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=i[e+-2>>1]|0;if(o<<16>>16>0){i[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;i[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=i[e+-2>>1]|0;if(f<<16>>16<=0){i[e>>1]=m;o=h*7|0;f=l+1310736+(o+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((s[f>>2]|0)>(w|0))s[f>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(h+-1<<2)>>2]|0;h=s[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(h|0)){i[e>>1]=h;if((g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(o|0))s[m>>2]=h;f=f+1|0;if((f|0)>=(g|0)){o=h;break}else m=m+4|0}}else o=h}else{i[e>>1]=o;if((o|0)<(h|0)&(g|0)>0){f=0;m=p;while(1){if((s[m>>2]|0)==(h|0))s[m>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else m=m+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{i[e>>1]=0;a[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=m;x=x+1|0;if((x|0)>=(T|0)){h=o;P=52;break e}else{m=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){e=l+12|0;if((h|0)<1)o=1;else{f=1;o=1;while(1){c=s[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[p>>2]=c;if((f|0)<(h|0)){f=f+1|0;p=p+4|0}else break}}m=l+8|0;c=o+-1|0;s[m>>2]=c;if(c){Wc(e|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[m>>2]|0))}if((h|0)>0){e=0;do{p=(s[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(s[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=s[l+1310736+(f+3<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=s[l+1310736+(f+4<<2)>>2]|0;if((s[c>>2]|0)<(o|0))s[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=s[l+1310736+(f+5<<2)>>2]|0;if((s[c>>2]|0)>(o|0))s[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=s[l+1310736+(f+6<<2)>>2]|0;if((s[o>>2]|0)<(c|0))s[o>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((s[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[m>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function zl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+c|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}else{i[m>>1]=0;a[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+1|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+2|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Hl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}else{i[m>>1]=0;a[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+2|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+4|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Bl(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;h=(s[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;m=m+(c<<1)|0;p=0;t:while(1){if(x){c=h;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}else{i[m>>1]=0;a[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+2|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=h;C=C+1|0;if((C|0)>=(T|0)){b=p;P=52;break e}else{h=c+2|0;e=e+4|0;m=m+4|0}}en(3,3904,E);c=-1}else{b=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}h=l+8|0;c=p+-1|0;s[h>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[h>>2]|0))}if((b|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(b|0))}if((s[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[h>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Ul(e,t,r,o,l){e=e|0;t=t|0;r=r|0;o=o|0;l=l|0;var c=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0;A=d;d=d+16|0;E=A;m=s[l>>2]|0;T=r+-1|0;if((t|0)>0){c=0;p=m;f=m+((re(T,t)|0)<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((r|0)>0){c=0;p=m;f=m+(q<<1)|0;while(1){i[f>>1]=0;i[p>>1]=0;c=c+1|0;if((c|0)>=(r|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;p=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;c=(s[l+4>>2]|0)+p|0;C=1;e=e+p|0;m=m+(p<<1)|0;o=o+p|0;p=0;t:while(1){if(x){k=1;w=e;v=p;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){a[c>>0]=-1;p=i[m+(S<<1)>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}h=i[m+(y<<1)>>1]|0;b=h<<16>>16;p=i[m+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(h<<16>>16<=0){if(e){i[m>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=i[m+-2>>1]|0;if(p<<16>>16>0){i[m>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((s[p>>2]|0)>=(k|0)){p=v;break}s[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;i[m>>1]=p;s[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=C;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=C;s[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+C;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=i[m+-2>>1]|0;if(e<<16>>16<=0){i[m>>1]=h;p=b*7|0;e=l+1310736+(p+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){i[m>>1]=b;if((v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else h=h+4|0}}else p=b}else{i[m>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(b|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else h=h+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+C;p=v}else{i[m>>1]=0;a[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;m=m+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}C=C+1|0;if((C|0)>=(T|0)){h=p;P=52;break e}else{c=c+2|0;e=e+2|0;m=m+4|0;o=o+2|0}}en(3,3904,E);c=-1}else{h=0;P=52}}while(0);if((P|0)==52){m=l+12|0;if((h|0)<1)p=1;else{e=1;p=1;while(1){c=s[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=s[l+1179664+(c+-1<<2)>>2]|0;s[f>>2]=c;if((e|0)<(h|0)){e=e+1|0;f=f+4|0}else break}}o=l+8|0;c=p+-1|0;s[o>>2]=c;if(c){Wc(m|0,0,c<<2|0)|0;Wc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{P=c<<2;s[l+131084+(P<<2)>>2]=t;s[l+131084+((P|1)<<2)>>2]=0;s[l+131084+((P|2)<<2)>>2]=r;s[l+131084+((P|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(s[o>>2]|0))}if((h|0)>0){m=0;do{f=(s[l+1179664+(m<<2)>>2]|0)+-1|0;e=m*7|0;c=l+12+(f<<2)|0;s[c>>2]=(s[c>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=s[l+1310736+(e+3<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=s[l+1310736+(e+4<<2)>>2]|0;if((s[c>>2]|0)<(p|0))s[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=s[l+1310736+(e+5<<2)>>2]|0;if((s[c>>2]|0)>(p|0))s[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=s[l+1310736+(e+6<<2)>>2]|0;if((s[p>>2]|0)<(c|0))s[p>>2]=c;m=m+1|0}while((m|0)<(h|0))}if((s[o>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;r=c<<1;P=l+655376+(r<<3)|0;u[P>>3]=+u[P>>3]/+(s[t>>2]|0);r=l+655376+((r|1)<<3)|0;u[r>>3]=+u[r>>3]/+(s[t>>2]|0);c=c+1|0}while((c|0)<(s[o>>2]|0));c=0}else c=0}else c=0}d=A;return c|0}function Ql(e){e=e|0;return Wl(e+8|0)|0}function Wl(e){e=e|0;var t=0,r=0;r=d;d=d+16|0;t=js(4)|0;if(!t){en(3,5472,r);kt(1)}e=Nn(e)|0;s[t>>2]=e;if(!e){zs(t);t=0}d=r;return t|0}function Yl(e){e=e|0;var t=0;t=s[e>>2]|0;if(!t)t=-1;else{Ln(t)|0;zs(s[e>>2]|0);s[e>>2]=0;t=0}return t|0}function Vl(e){e=e|0;var t=0,r=0,a=0;r=d;d=d+16|0;t=js(7062432)|0;if(!t){en(3,5472,r);kt(1)}s[t>>2]=0;s[t+4834148>>2]=0;s[t+7062408>>2]=0;s[t+4>>2]=-1;s[t+8>>2]=0;s[t+12>>2]=1;s[t+16>>2]=100;s[t+20>>2]=0;s[t+24>>2]=0;s[t+28>>2]=2;u[t+7062416>>3]=.5;s[t+7062424>>2]=3;s[t+32>>2]=e;a=s[e>>2]|0;s[t+36>>2]=a;e=s[e+4>>2]|0;s[t+40>>2]=e;s[t+44>>2]=0;s[t+15408>>2]=0;s[t+4834152>>2]=0;s[t+4818296>>2]=0;e=js(re(a<<1,e)|0)|0;s[t+4834144>>2]=e;if(!e){en(3,5472,r+8|0);kt(1)}else{s[t+7062384>>2]=0;Gl(t,2)|0;Kl(t,0)|0;s[t+7062388>>2]=-1;Jl(t,0)|0;s[t+7062392>>2]=7;s[t+7062396>>2]=0;d=r;return t|0}return 0}function Gl(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0;n=d;d=d+16|0;r=n;e:do{if(e){a=e+4|0;if((s[a>>2]|0)!=(t|0)){switch(t|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{i=0;break}case 14:case 13:case 12:case 5:{i=1;break}default:{s[r>>2]=t;en(3,3936,r);r=-1;break e}}s[a>>2]=t;s[e+8>>2]=an(t)|0;r=e+7062408|0;t=s[r>>2]|0;if(t){Cc(t);s[r>>2]=xc(s[e+36>>2]|0,s[e+40>>2]|0,s[a>>2]|0,0)|0}r=e+24|0;t=s[r>>2]|0;if(!i)switch(t|0){case 1:{s[r>>2]=4;r=0;break e}case 4:{s[r>>2]=3;r=0;break e}default:{r=0;break e}}else switch(t|0){case 0:{s[r>>2]=1;r=0;break e}case 3:{s[r>>2]=4;r=0;break e}default:{r=0;break e}}}else r=0}else r=-1}while(0);d=n;return r|0}function Kl(e,t){e=e|0;t=t|0;var r=0,a=0,i=0;i=d;d=d+16|0;a=i;do{if(e){if((s[e>>2]|0)!=(t|0)){s[e>>2]=t;if(!t){r=e+4834148|0;zs(s[r>>2]|0);s[r>>2]=0;r=0;break}t=js(re(s[e+40>>2]|0,s[e+36>>2]|0)|0)|0;s[e+4834148>>2]=t;if(!t){en(3,5472,a);kt(1)}else r=0}else r=0}else r=-1}while(0);d=i;return r|0}function Jl(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;i=l;if(e){n=e+7062388|0;if((s[n>>2]|0)!=(t|0)){r=e+7062408|0;a=s[r>>2]|0;if(a){Cc(a);s[r>>2]=0}switch(t|0){case 3:case 2:case 1:{s[r>>2]=xc(s[e+36>>2]|0,s[e+40>>2]|0,s[e+4>>2]|0,0)|0;break}case 4:{s[e+7062404>>2]=1;s[e+7062400>>2]=1;t=4;break}case 0:{t=0;break}default:{en(3,3985,i);t=0}}s[n>>2]=t;if((s[e>>2]|0)==1){s[o>>2]=s[760+(t<<2)>>2];en(3,4059,o);t=0}else t=0}else t=0}else t=-1;d=l;return t|0}function Xl(e){e=e|0;var t=0,r=0;if(!e)t=-1;else{t=e+7062408|0;r=s[t>>2]|0;if(r){Cc(r);s[t>>2]=0}zs(s[e+4834144>>2]|0);zs(s[e+4834148>>2]|0);zs(e);t=0}return t|0}function Zl(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e>>2];e=0}else e=-1;return e|0}function ec(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){s[e+12>>2]=t;e=0}else e=-1;return e|0}function tc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+12>>2];e=0}else e=-1;return e|0}function rc(e,t){e=e|0;t=t|0;if((e|0)==0|t>>>0>255)e=-1;else{s[e+16>>2]=t;e=0}return e|0}function ac(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+16>>2];e=0}else e=-1;return e|0}function ic(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+7062388>>2];e=0}else e=-1;return e|0}function sc(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){s[e+20>>2]=t;e=0}else e=-1;return e|0}function nc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[t>>2]=s[e+20>>2];e=0}return e|0}function oc(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<5){s[e+24>>2]=t;e=0}else e=-1;return e|0}function lc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[e+7062424>>2]=t;e=0}return e|0}function cc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+7062424>>2];e=0}else e=-1;return e|0}function uc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[t>>2]=s[e+24>>2];e=0}return e|0}function dc(e,t){e=e|0;t=+t;if((e|0)!=0?!(t<=0.0|t>=1.0):0){u[e+7062416>>3]=t;e=0}else e=-1;return e|0}function pc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{u[t>>3]=+u[e+7062416>>3];e=0}return e|0}function fc(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,o=0.0,l=0,c=0,p=0,f=0.0,m=0.0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0,N=0,L=0,j=0.0,z=0,H=0,B=0.0,U=0.0;H=d;d=d+80|0;N=H+32|0;I=H+24|0;C=H;x=H+52|0;P=H+40|0;D=H+64|0;z=e+44|0;s[z>>2]=0;$=e+7062388|0;a=s[$>>2]|0;e:do{if((a|0)==4){O=e+7062396|0;r=s[O>>2]|0;do{if((r|0)>0){a=4;r=r+-1|0}else{E=e+16|0;M=s[E>>2]|0;A=e+7062400|0;q=(s[A>>2]|0)+M|0;q=(q|0)>255?255:q;s[x>>2]=q;R=e+7062404|0;T=M-(s[R>>2]|0)|0;T=(T|0)<0?0:T;s[x+4>>2]=T;s[x+8>>2]=M;r=e+36|0;a=e+40|0;i=e+4|0;l=e+12|0;c=e+20|0;p=e+4834144|0;h=e+15416|0;b=e+15408|0;g=e+7062384|0;v=e+24|0;w=e+32|0;k=e+7062416|0;y=e+48|0;_=e+7062424|0;S=0;do{if((Rc(t,s[r>>2]|0,s[a>>2]|0,s[i>>2]|0,s[e>>2]|0,s[l>>2]|0,s[x+(S<<2)>>2]|0,s[c>>2]|0,p,0)|0)<0){r=-1;break e}if((hc(s[r>>2]|0,s[a>>2]|0,p,s[c>>2]|0,1e6,70,1.0,h,b)|0)<0){r=-1;break e}if((wc(t,s[r>>2]|0,s[a>>2]|0,s[i>>2]|0,h,s[b>>2]|0,s[g>>2]|0,s[c>>2]|0,s[v>>2]|0,(s[w>>2]|0)+184|0,+u[k>>3],y,z,s[_>>2]|0)|0)<0){r=-1;break e}s[P+(S<<2)>>2]=s[z>>2];S=S+1|0}while((S|0)<3);if((s[e>>2]|0)==1){L=s[P+4>>2]|0;i=s[P+8>>2]|0;a=s[P>>2]|0;s[C>>2]=T;s[C+4>>2]=L;s[C+8>>2]=M;s[C+12>>2]=i;s[C+16>>2]=q;s[C+20>>2]=a;en(3,4153,C)}else{a=s[P>>2]|0;i=s[P+8>>2]|0}r=s[P+4>>2]|0;if((a|0)>(i|0)|(r|0)>(i|0)){a=(a|0)>=(r|0)?q:T;s[E>>2]=a;r=a-M|0;if((r|0)>0){s[A>>2]=r;r=1}else{s[A>>2]=1;r=0-r|0}s[R>>2]=r;if((s[e>>2]|0)==1){s[I>>2]=a;en(3,4229,I)}a=s[$>>2]|0;r=s[e+7062392>>2]|0;break}r=s[A>>2]|0;a=s[R>>2]|0;do{if((r|0)>=(a|0)){if((r|0)>(a|0)){s[R>>2]=a+1;break}else{r=r+1|0;s[A>>2]=r;s[R>>2]=a+1;break}}else{r=r+1|0;s[A>>2]=r}}while(0);if((r+M|0)>254){s[A>>2]=1;r=1}if((M|0)<=(r|0))s[R>>2]=1;s[O>>2]=s[e+7062392>>2];L=47;break e}}while(0);s[O>>2]=r;L=30}else L=30}while(0);e:do{if((L|0)==30){t:do{switch(a|0){case 3:{a=e+7062408|0;r=Ic(s[a>>2]|0,t,9,-7)|0;if((r|0)<0)break e;r=s[a>>2]|0;a=e+4834144|0;r=Rc(s[r>>2]|0,s[r+8>>2]|0,s[r+12>>2]|0,5,s[e>>2]|0,s[e+12>>2]|0,0,0,a,s[r+4>>2]|0)|0;if((r|0)<0)break e;r=e+36|0;i=e+40|0;l=e+20|0;break}case 2:case 1:{i=e+7062396|0;r=s[i>>2]|0;if((r|0)>0){s[i>>2]=r+-1;L=44;break t}r=s[e+7062408>>2]|0;if((a|0)==1)r=Ac(r,t,D)|0;else r=Mc(r,t,D)|0;if((r|0)<0)break e;r=e+16|0;if((s[e>>2]|0)==1?(F=n[D>>0]|0,(s[r>>2]|0)!=(F|0)):0){s[N>>2]=(s[$>>2]|0)==1?4281:4288;s[N+4>>2]=F;en(3,4293,N)}s[r>>2]=n[D>>0];s[i>>2]=s[e+7062392>>2];L=44;break}default:L=44}}while(0);if((L|0)==44){r=e+36|0;i=e+40|0;l=e+20|0;a=e+4834144|0;if((Rc(t,s[r>>2]|0,s[i>>2]|0,s[e+4>>2]|0,s[e>>2]|0,s[e+12>>2]|0,s[e+16>>2]|0,s[l>>2]|0,a,0)|0)<0){r=-1;break}}c=e+15416|0;p=e+15408|0;if((hc(s[r>>2]|0,s[i>>2]|0,a,s[l>>2]|0,1e6,70,1.0,c,p)|0)>=0?(wc(t,s[r>>2]|0,s[i>>2]|0,s[e+4>>2]|0,c,s[p>>2]|0,s[e+7062384>>2]|0,s[l>>2]|0,s[e+24>>2]|0,(s[e+32>>2]|0)+184|0,+u[e+7062416>>3],e+48|0,z,s[e+7062424>>2]|0)|0)>=0:0)L=47;else r=-1}}while(0);e:do{if((L|0)==47){w=e+28|0;if((s[w>>2]|0)==1){mc(e);r=0;break}k=e+4818296|0;g=e+24|0;b=s[k>>2]|0;if((b|0)>0){v=0;do{a=s[z>>2]|0;i=e+4818304+(v*264|0)+56|0;l=e+4818304+(v*264|0)+64|0;if((a|0)>0){m=+(s[e+4818304+(v*264|0)>>2]|0);r=-1;c=0;f=.5;while(1){o=+(s[e+48+(c<<8)>>2]|0);B=m/o;if(!(B<.7|B>1.43)?(B=+u[e+48+(c<<8)+56>>3]-+u[i>>3],j=+u[e+48+(c<<8)+64>>3]-+u[l>>3],j=(B*B+j*j)/o,j<f):0){r=c;o=j}else o=f;c=c+1|0;if((c|0)>=(a|0)){h=r;break}else f=o}}else h=-1;t:do{if((h|0)>-1){p=s[g>>2]|0;switch(p|0){case 2:case 1:case 0:break;case 4:case 3:{i=e+48+(h<<8)+40|0;o=+u[e+4818304+(v*264|0)+40>>3];if(!(+u[i>>3]<o)){r=e+48+(h<<8)+48|0;a=e+4818304+(v*264|0)+48|0;if(!(+u[r>>3]<+u[a>>3]))break t}else{a=e+4818304+(v*264|0)+48|0;r=e+48+(h<<8)+48|0}u[i>>3]=o;s[e+48+(h<<8)+8>>2]=s[e+4818304+(v*264|0)+8>>2];u[r>>3]=+u[a>>3];s[e+48+(h<<8)+12>>2]=s[e+4818304+(v*264|0)+12>>2];r=-1;f=1.0e8;i=0;while(1){o=0.0;a=0;do{t=(a+i|0)%4|0;m=+u[e+4818304+(v*264|0)+168+(a<<4)>>3]-+u[e+48+(h<<8)+168+(t<<4)>>3];B=+u[e+4818304+(v*264|0)+168+(a<<4)+8>>3]-+u[e+48+(h<<8)+168+(t<<4)+8>>3];o=o+(m*m+B*B);a=a+1|0}while((a|0)!=4);a=o<f;r=a?i:r;i=i+1|0;if((i|0)==4)break;else f=a?o:f}t=4-r|0;s[e+48+(h<<8)+20>>2]=(t+(s[e+4818304+(v*264|0)+20>>2]|0)|0)%4|0;s[e+48+(h<<8)+24>>2]=(t+(s[e+4818304+(v*264|0)+24>>2]|0)|0)%4|0;break t}default:{r=-1;break e}}r=e+48+(h<<8)+32|0;m=+u[e+4818304+(v*264|0)+32>>3];if(+u[r>>3]<m){u[r>>3]=m;c=s[e+4818304+(v*264|0)+4>>2]|0;s[e+48+(h<<8)+4>>2]=c;i=e+4818304+(v*264|0)+16|0;r=-1;f=1.0e8;l=0;while(1){o=0.0;a=0;do{t=(a+l|0)%4|0;U=+u[e+4818304+(v*264|0)+168+(a<<4)>>3]-+u[e+48+(h<<8)+168+(t<<4)>>3];B=+u[e+4818304+(v*264|0)+168+(a<<4)+8>>3]-+u[e+48+(h<<8)+168+(t<<4)+8>>3];o=o+(U*U+B*B);a=a+1|0}while((a|0)!=4);if(o<f)r=(4-l+(s[i>>2]|0)|0)%4|0;else o=f;l=l+1|0;if((l|0)==4)break;else f=o}s[e+48+(h<<8)+16>>2]=r;if(p>>>0<2){s[e+48+(h<<8)+8>>2]=c;u[e+48+(h<<8)+40>>3]=m;s[e+48+(h<<8)+20>>2]=r;break}else{s[e+48+(h<<8)+12>>2]=c;u[e+48+(h<<8)+48>>3]=m;s[e+48+(h<<8)+24>>2]=r;break}}}}while(0);v=v+1|0}while((v|0)<(b|0))}mc(e);if((s[k>>2]|0)>0){i=0;r=0;do{a=e+4818304+(i*264|0)|0;L=e+4818304+(i*264|0)+256|0;t=(s[L>>2]|0)+1|0;s[L>>2]=t;if((t|0)<4){if((i|0)!=(r|0))Kc(e+4818304+(r*264|0)|0,a|0,264)|0;r=r+1|0}i=i+1|0}while((i|0)<(s[k>>2]|0))}else r=0;s[k>>2]=r;r=s[z>>2]|0;t:do{if((r|0)>0){p=0;do{l=e+48+(p<<8)|0;i=s[e+48+(p<<8)+4>>2]|0;if((i|0)>=0){c=s[k>>2]|0;r:do{if((c|0)>0){a=0;do{if((s[e+4818304+(a*264|0)+4>>2]|0)==(i|0))break r;a=a+1|0}while((a|0)<(c|0))}else a=0}while(0);if((a|0)==(c|0)){if((c|0)==60)break t;s[k>>2]=c+1}Kc(e+4818304+(a*264|0)|0,l|0,256)|0;s[e+4818304+(a*264|0)+256>>2]=1}p=p+1|0;r=s[z>>2]|0}while((p|0)<(r|0))}}while(0);if((s[w>>2]|0)!=2?(s[k>>2]|0)>0:0){c=0;while(1){i=e+4818304+(c*264|0)+56|0;l=e+4818304+(c*264|0)+64|0;t:do{if((r|0)>0){f=+(s[e+4818304+(c*264|0)>>2]|0);a=0;do{o=+(s[e+48+(a<<8)>>2]|0);U=f/o;if(!(U<.7|U>1.43)?(B=+u[e+48+(a<<8)+56>>3]-+u[i>>3],U=+u[e+48+(a<<8)+64>>3]-+u[l>>3],(B*B+U*U)/o<.5):0)break t;a=a+1|0}while((a|0)<(r|0))}else a=0}while(0);if((a|0)==(r|0)){Kc(e+48+(r<<8)|0,e+4818304+(c*264|0)|0,256)|0;r=(s[z>>2]|0)+1|0;s[z>>2]=r}c=c+1|0;if((c|0)>=(s[k>>2]|0)){r=0;break}}}else r=0}}while(0);d=H;return r|0}function mc(e){e=e|0;var t=0,r=0,a=0,i=0;switch(s[e+24>>2]|0){case 1:case 0:{r=s[e+44>>2]|0;if((r|0)>0){a=0;do{t=e+48+(a<<8)+4|0;if((s[t>>2]|0)>-1?+u[e+48+(a<<8)+32>>3]<.5:0){s[e+48+(a<<8)+8>>2]=-1;s[t>>2]=-1;s[e+48+(a<<8)+236>>2]=6}a=a+1|0}while((a|0)<(r|0))}break}case 2:{r=s[e+44>>2]|0;if((r|0)>0){a=0;do{t=e+48+(a<<8)+4|0;if((s[t>>2]|0)>-1?+u[e+48+(a<<8)+32>>3]<.5:0){s[e+48+(a<<8)+12>>2]=-1;s[t>>2]=-1;s[e+48+(a<<8)+236>>2]=6}a=a+1|0}while((a|0)<(r|0))}break}default:{a=s[e+44>>2]|0;if((a|0)>0){i=0;do{t=e+48+(i<<8)+8|0;if((s[t>>2]|0)>-1?+u[e+48+(i<<8)+40>>3]<.5:0){s[t>>2]=-1;r=0}else r=1;t=e+48+(i<<8)+12|0;if(((s[t>>2]|0)>-1?+u[e+48+(i<<8)+48>>3]<.5:0)?(s[t>>2]=-1,(r|0)==0):0)s[e+48+(i<<8)+236>>2]=6;i=i+1|0}while((i|0)<(a|0))}}}return}function hc(e,t,r,a,i,n,o,l,c){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;o=+o;l=l|0;c=c|0;var p=0.0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0,N=0.0;D=d;d=d+96|0;M=D+56|0;R=D+48|0;I=D+8|0;O=D;F=(a|0)==1;if(F){e=(e|0)/2|0;t=(t|0)/2|0;i=(i|0)/4|0;n=(n|0)/4|0}s[c>>2]=0;E=r+8|0;P=e+-2|0;C=t+-2|0;q=r+1179664|0;e:do{if((s[E>>2]|0)>0){T=0;while(1){_=r+12+(T<<2)|0;x=s[_>>2]|0;t:do{if(((((!((x|0)<(n|0)|(x|0)>(i|0))?(A=r+131084+(T<<4)|0,(s[A>>2]|0)!=1):0)?(s[r+131084+(T<<4)+4>>2]|0)!=(P|0):0)?(s[r+131084+(T<<4)+8>>2]|0)!=1:0)?(s[r+131084+(T<<4)+12>>2]|0)!=(C|0):0)?(bc(s[r>>2]|0,e,0,q,T+1|0,A,l+((s[c>>2]|0)*80048|0)|0)|0)>=0:0){w=s[_>>2]|0;S=s[c>>2]|0;k=l+(S*80048|0)+28|0;t=s[k>>2]|0;y=l+(S*80048|0)+40028|0;f=s[y>>2]|0;x=l+(S*80048|0)+24|0;m=(s[x>>2]|0)+-1|0;if((m|0)>1){g=0;v=1;a=0;while(1){h=(s[l+(S*80048|0)+28+(v<<2)>>2]|0)-t|0;h=re(h,h)|0;b=(s[l+(S*80048|0)+40028+(v<<2)>>2]|0)-f|0;h=(re(b,b)|0)+h|0;b=(h|0)>(g|0);a=b?v:a;v=v+1|0;if((v|0)>=(m|0))break;else g=b?h:g}}else a=0;p=+(w|0)/.75*.01*o;s[R>>2]=0;s[O>>2]=0;r:do{if((gc(k,y,0,a,p,M,R)|0)>=0?(gc(k,y,a,(s[x>>2]|0)+-1|0,p,I,O)|0)>=0:0){t=s[R>>2]|0;f=s[O>>2]|0;do{if((t|0)==1&(f|0)==1){t=s[I>>2]|0;f=s[M>>2]|0}else{if((t|0)>1&(f|0)==0){t=(a|0)/2|0;s[O>>2]=0;s[R>>2]=0;if((gc(k,y,0,t,p,M,R)|0)<0)break r;if((gc(k,y,t,a,p,I,O)|0)<0)break r;if(!((s[R>>2]|0)==1&(s[O>>2]|0)==1))break r;t=a;f=s[M>>2]|0;a=s[I>>2]|0;break}if(!((t|0)==0&(f|0)>1))break r;t=(a+-1+(s[x>>2]|0)|0)/2|0;s[O>>2]=0;s[R>>2]=0;if((gc(k,y,a,t,p,M,R)|0)<0)break r;if((gc(k,y,t,(s[x>>2]|0)+-1|0,p,I,O)|0)<0)break r;if(!((s[R>>2]|0)==1&(s[O>>2]|0)==1))break r;t=s[I>>2]|0;f=a;a=s[M>>2]|0}}while(0);s[l+(S*80048|0)+80028>>2]=0;s[l+(S*80048|0)+80032>>2]=f;s[l+(S*80048|0)+80036>>2]=a;s[l+(S*80048|0)+80040>>2]=t;s[l+(S*80048|0)+80044>>2]=(s[x>>2]|0)+-1;s[l+((s[c>>2]|0)*80048|0)>>2]=s[_>>2];x=s[c>>2]|0;u[l+(x*80048|0)+8>>3]=+u[r+655376+(T<<4)>>3];u[l+(x*80048|0)+16>>3]=+u[r+655376+(T<<4)+8>>3];x=x+1|0;s[c>>2]=x;if((x|0)==60){a=60;break e}else break t}}while(0)}}while(0);T=T+1|0;if((T|0)>=(s[E>>2]|0)){$=4;break}}}else $=4}while(0);if(($|0)==4)a=s[c>>2]|0;if((a|0)>0){m=0;do{e=m;m=m+1|0;n=l+(e*80048|0)+16|0;f=l+(e*80048|0)|0;if((m|0)<(a|0)){o=+u[l+(e*80048|0)+8>>3];i=m;do{N=o-+u[l+(i*80048|0)+8>>3];p=+u[n>>3]-+u[l+(i*80048|0)+16>>3];p=N*N+p*p;a=s[f>>2]|0;e=l+(i*80048|0)|0;t=s[e>>2]|0;if((a|0)>(t|0)){if(p<+((a|0)/4|0|0))s[e>>2]=0}else if(p<+((t|0)/4|0|0))s[f>>2]=0;i=i+1|0;a=s[c>>2]|0}while((i|0)<(a|0))}}while((m|0)<(a|0))}if((a|0)>0){i=0;do{if(!(s[l+(i*80048|0)>>2]|0)){e=i+1|0;if((e|0)<(a|0)){a=i;t=e;while(1){Kc(l+(a*80048|0)|0,l+(t*80048|0)|0,80048)|0;a=s[c>>2]|0;e=t+1|0;if((e|0)<(a|0)){a=t;t=e}else break}}a=a+-1|0;s[c>>2]=a}i=i+1|0}while((i|0)<(a|0))}if(F&(a|0)>0){t=0;while(1){s[l>>2]=s[l>>2]<<2;a=l+8|0;u[a>>3]=+u[a>>3]*2.0;a=l+16|0;u[a>>3]=+u[a>>3]*2.0;a=l+24|0;if((s[a>>2]|0)>0){e=0;do{F=l+28+(e<<2)|0;s[F>>2]=s[F>>2]<<1;F=l+40028+(e<<2)|0;s[F>>2]=s[F>>2]<<1;e=e+1|0}while((e|0)<(s[a>>2]|0))}t=t+1|0;if((t|0)>=(s[c>>2]|0))break;else l=l+80048|0}}d=D;return 0}function bc(e,t,r,a,n,o,l){e=e|0;t=t|0;r=r|0;a=a|0;n=n|0;o=o|0;l=l|0;var c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0;_=d;d=d+80032|0;h=_+16|0;m=_+8|0;u=_;k=_+40024|0;y=_+24|0;w=s[o+8>>2]|0;r=s[o>>2]|0;o=s[o+4>>2]|0;e:do{if((r|0)<=(o|0)){c=r;r=e+((re(w,t)|0)+r<<1)|0;while(1){v=i[r>>1]|0;if(v<<16>>16>0?(s[a+((v<<16>>16)+-1<<2)>>2]|0)==(n|0):0){f=c;break}if((c|0)<(o|0)){c=c+1|0;r=r+2|0}else{S=6;break e}}b=l+24|0;s[b>>2]=1;g=l+28|0;s[g>>2]=f;v=l+40028|0;s[v>>2]=w;a=w;p=f;c=1;r=5;while(1){o=(r+5|0)%8|0;r=0;while(1){n=s[776+(o<<2)>>2]|0;u=s[808+(o<<2)>>2]|0;if((i[e+(u+p+(re(n+a|0,t)|0)<<1)>>1]|0)>0){r=n;n=o;break}r=r+1|0;o=(o+1|0)%8|0;if((r|0)>=8){S=11;break}}if((S|0)==11){S=0;if((r|0)==8){S=13;break}u=s[808+(o<<2)>>2]|0;r=s[776+(o<<2)>>2]|0;n=o}s[l+28+(c<<2)>>2]=u+p;o=s[b>>2]|0;s[l+40028+(o<<2)>>2]=r+(s[l+40028+(o+-1<<2)>>2]|0);r=s[b>>2]|0;o=l+28+(r<<2)|0;if((s[o>>2]|0)==(f|0)?(s[l+40028+(r<<2)>>2]|0)==(w|0):0){a=r;S=16;break}c=r+1|0;s[b>>2]=c;if((c|0)==9999){S=19;break}a=s[l+40028+(r<<2)>>2]|0;p=s[o>>2]|0;r=n}if((S|0)==13){en(3,4347,m);r=-1;break}else if((S|0)==16){if((a|0)>1){u=0;n=1;o=0;while(1){r=(s[l+28+(n<<2)>>2]|0)-f|0;r=re(r,r)|0;c=(s[l+40028+(n<<2)>>2]|0)-w|0;r=(re(c,c)|0)+r|0;c=(r|0)>(u|0);o=c?n:o;n=n+1|0;if((n|0)>=(a|0))break;else u=c?r:u}}else o=0;if((o|0)>0){r=0;do{s[k+(r<<2)>>2]=s[l+28+(r<<2)>>2];s[y+(r<<2)>>2]=s[l+40028+(r<<2)>>2];r=r+1|0}while((r|0)<(o|0))}if((o|0)<(a|0)){r=o;do{w=r-o|0;s[l+28+(w<<2)>>2]=s[l+28+(r<<2)>>2];s[l+40028+(w<<2)>>2]=s[l+40028+(r<<2)>>2];r=r+1|0}while((r|0)<(s[b>>2]|0))}if((o|0)>0){r=0;do{w=r-o|0;s[l+28+((s[b>>2]|0)+w<<2)>>2]=s[k+(r<<2)>>2];s[l+40028+((s[b>>2]|0)+w<<2)>>2]=s[y+(r<<2)>>2];r=r+1|0}while((r|0)<(o|0))}s[l+28+(s[b>>2]<<2)>>2]=s[g>>2];s[l+40028+(s[b>>2]<<2)>>2]=s[v>>2];s[b>>2]=(s[b>>2]|0)+1;r=0;break}else if((S|0)==19){en(3,4354,h);r=-1;break}}else S=6}while(0);if((S|0)==6){en(3,4340,u);r=-1}d=_;return r|0}function gc(e,t,r,a,i,n,o){e=e|0;t=t|0;r=r|0;a=a|0;i=+i;n=n|0;o=o|0;var l=0,c=0.0,u=0.0,d=0,p=0.0,f=0,m=0.0,h=0,b=0,g=0,v=0.0;l=s[t+(a<<2)>>2]|0;b=s[t+(r<<2)>>2]|0;m=+(l-b|0);d=s[e+(r<<2)>>2]|0;g=s[e+(a<<2)>>2]|0;p=+(d-g|0);u=+((re(g,b)|0)-(re(d,l)|0)|0);l=r+1|0;if((l|0)<(a|0)){c=0.0;d=l;do{v=u+(m*+(s[e+(d<<2)>>2]|0)+p*+(s[t+(d<<2)>>2]|0));v=v*v;g=v>c;c=g?v:c;l=g?d:l;d=d+1|0}while((d|0)<(a|0))}else c=0.0;if(c/(m*m+p*p)>i){if(((gc(e,t,r,l,i,n,o)|0)>=0?(f=s[o>>2]|0,(f|0)<=5):0)?(s[n+(f<<2)>>2]=l,s[o>>2]=(s[o>>2]|0)+1,(gc(e,t,l,a,i,n,o)|0)>=0):0)h=7;else l=-1}else h=7;if((h|0)==7)l=0;return l|0}function vc(e,t,r,a,i,n,o){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;o=o|0;var l=0,p=0.0,f=0,m=0.0,h=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0;x=d;d=d+16|0;w=x+4|0;k=x;y=Pn(2)|0;_=Pn(2)|0;S=nn(2,2)|0;b=0;e:while(1){g=b;b=b+1|0;v=s[a+(b<<2)>>2]|0;l=s[a+(g<<2)>>2]|0;h=+(v+1-l|0)*.05+.5;l=~~(+(l|0)+h);v=~~(+(v|0)-h)-l|0;f=v+1|0;r=nn(f,2)|0;if((v|0)>-1){v=0;do{C=v+l|0;if((En(i,+(s[e+(C<<2)>>2]|0),+(s[t+(C<<2)>>2]|0),w,k)|0)<0){l=10;break e}C=v<<1;q=s[r>>2]|0;u[q+(C<<3)>>3]=+c[w>>2];u[q+((C|1)<<3)>>3]=+c[k>>2];v=v+1|0}while((v|0)<(f|0))}if((fn(r,S,y,_)|0)<0){l=10;break}q=s[S>>2]|0;m=+u[q+8>>3];u[n+(g*24|0)>>3]=m;h=-+u[q>>3];u[n+(g*24|0)+8>>3]=h;q=s[_>>2]|0;u[n+(g*24|0)+16>>3]=-(m*+u[q>>3]+ +u[q+8>>3]*h);dn(r)|0;if((b|0)>=4){l=7;break}}e:do{if((l|0)==7){dn(S)|0;An(_)|0;An(y)|0;b=0;while(1){r=(b+3|0)%4|0;l=n+(r*24|0)|0;p=+u[n+(b*24|0)+8>>3];f=n+(b*24|0)|0;m=+u[n+(r*24|0)+8>>3];h=+u[l>>3]*p-+u[f>>3]*m;if(+B(+h)<.0001){r=-1;break e}q=n+(b*24|0)+16|0;C=n+(r*24|0)+16|0;u[o+(b<<4)>>3]=(m*+u[q>>3]-p*+u[C>>3])/h;u[o+(b<<4)+8>>3]=(+u[f>>3]*+u[C>>3]-+u[l>>3]*+u[q>>3])/h;b=b+1|0;if((b|0)>=4){r=0;break}}}else if((l|0)==10){dn(r)|0;dn(S)|0;An(_)|0;An(y)|0;r=-1}}while(0);d=x;return r|0}function wc(e,t,r,a,i,n,o,l,p,f,m,h,b,g){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;o=o|0;l=l|0;p=p|0;f=f|0;m=+m;h=h|0;b=b|0;g=g|0;var v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0;M=d;d=d+16|0;P=M+4|0;A=M;C=p>>>0<2;q=(p|0)==2;if((n|0)>0){E=0;v=0;do{s[h+(v<<8)>>2]=s[i+(E*80048|0)>>2];if((En(f,+u[i+(E*80048|0)+8>>3],+u[i+(E*80048|0)+16>>3],P,A)|0)>=0?(u[h+(v<<8)+56>>3]=+c[P>>2],u[h+(v<<8)+64>>3]=+c[A>>2],T=h+(v<<8)+168|0,(vc(i+(E*80048|0)+28|0,i+(E*80048|0)+40028|0,s[i+(E*80048|0)+24>>2]|0,i+(E*80048|0)+80028|0,f,h+(v<<8)+72|0,T)|0)>=0):0){w=h+(v<<8)+8|0;k=h+(v<<8)+20|0;y=h+(v<<8)+40|0;_=h+(v<<8)+12|0;S=h+(v<<8)+24|0;x=h+(v<<8)+48|0;switch(Lc(o,l,p,e,t,r,a,f,T,m,w,k,y,_,S,x,g,h+(v<<8)+240|0,h+(v<<8)+248|0)|0){case 0:{s[h+(v<<8)+236>>2]=0;break}case-1:{s[h+(v<<8)+236>>2]=2;break}case-2:{s[h+(v<<8)+236>>2]=3;break}case-3:{s[h+(v<<8)+236>>2]=4;break}case-4:{s[h+(v<<8)+236>>2]=5;break}case-5:{s[h+(v<<8)+236>>2]=9;break}case-6:{s[h+(v<<8)+236>>2]=1;break}default:{}}if(!C){if(q){s[h+(v<<8)+4>>2]=s[_>>2];s[h+(v<<8)+16>>2]=s[S>>2];u[h+(v<<8)+32>>3]=+u[x>>3]}}else{s[h+(v<<8)+4>>2]=s[w>>2];s[h+(v<<8)+16>>2]=s[k>>2];u[h+(v<<8)+32>>3]=+u[y>>3]}v=v+1|0}E=E+1|0}while((E|0)<(n|0))}else v=0;s[b>>2]=v;d=M;return 0}function kc(e,t,r,a){e=e|0;t=t|0;r=+r;a=a|0;var i=0,n=0,o=0,l=0,c=0,p=0,f=0.0,m=0,h=0;l=d;d=d+288|0;p=l+200|0;c=l+104|0;i=l+264|0;o=l+8|0;n=l;m=s[t+16>>2]|0;h=(4-m|0)%4|0;u[p>>3]=+u[t+168+(h<<4)>>3];u[p+8>>3]=+u[t+168+(h<<4)+8>>3];h=(5-m|0)%4|0;u[p+16>>3]=+u[t+168+(h<<4)>>3];u[p+24>>3]=+u[t+168+(h<<4)+8>>3];h=(6-m|0)%4|0;u[p+32>>3]=+u[t+168+(h<<4)>>3];u[p+40>>3]=+u[t+168+(h<<4)+8>>3];m=(7-m|0)%4|0;u[p+48>>3]=+u[t+168+(m<<4)>>3];u[p+56>>3]=+u[t+168+(m<<4)+8>>3];f=r*-.5;u[c>>3]=f;r=r*.5;u[c+8>>3]=r;u[c+16>>3]=0.0;u[c+24>>3]=r;u[c+32>>3]=r;u[c+40>>3]=0.0;u[c+48>>3]=r;u[c+56>>3]=f;u[c+64>>3]=0.0;u[c+72>>3]=f;u[c+80>>3]=f;u[c+88>>3]=0.0;s[i>>2]=p;s[i+4>>2]=c;s[i+8>>2]=4;if((Wn(s[e>>2]|0,p,c,4,o)|0)<0)r=1.0e8;else{h=(zn(s[e>>2]|0,i,o,a,n)|0)<0;r=h?1.0e8:+u[n>>3]}d=l;return+r}function yc(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=+a;i=i|0;var n=0,o=0,l=0,c=0,p=0,f=0.0,m=0,h=0;o=d;d=d+192|0;p=o+104|0;c=o+8|0;l=o+168|0;n=o;m=s[t+16>>2]|0;h=(4-m|0)%4|0;u[p>>3]=+u[t+168+(h<<4)>>3];u[p+8>>3]=+u[t+168+(h<<4)+8>>3];h=(5-m|0)%4|0;u[p+16>>3]=+u[t+168+(h<<4)>>3];u[p+24>>3]=+u[t+168+(h<<4)+8>>3];h=(6-m|0)%4|0;u[p+32>>3]=+u[t+168+(h<<4)>>3];u[p+40>>3]=+u[t+168+(h<<4)+8>>3];m=(7-m|0)%4|0;u[p+48>>3]=+u[t+168+(m<<4)>>3];u[p+56>>3]=+u[t+168+(m<<4)+8>>3];f=a*-.5;u[c>>3]=f;a=a*.5;u[c+8>>3]=a;u[c+16>>3]=0.0;u[c+24>>3]=a;u[c+32>>3]=a;u[c+40>>3]=0.0;u[c+48>>3]=a;u[c+56>>3]=f;u[c+64>>3]=0.0;u[c+72>>3]=f;u[c+80>>3]=f;u[c+88>>3]=0.0;s[l>>2]=p;s[l+4>>2]=c;s[l+8>>2]=4;t=(zn(s[e>>2]|0,l,r,i,n)|0)<0;d=o;return+(t?1.0e8:+u[n>>3])}function _c(e,t,r,a,i,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;var o=0,l=0,c=0,p=0,f=0,m=0,h=0;h=d;d=d+32|0;p=h+20|0;f=h;o=js(i<<4)|0;s[p>>2]=o;if(!o){en(3,5472,h+8|0);kt(1)}l=js(i*24|0)|0;c=p+4|0;s[c>>2]=l;if(!l){en(3,5472,h+16|0);kt(1)}if((i|0)>0){m=0;do{u[o+(m<<4)>>3]=+u[r+(m<<4)>>3];u[o+(m<<4)+8>>3]=+u[r+(m<<4)+8>>3];u[l+(m*24|0)>>3]=+u[a+(m*24|0)>>3];u[l+(m*24|0)+8>>3]=+u[a+(m*24|0)+8>>3];u[l+(m*24|0)+16>>3]=+u[a+(m*24|0)+16>>3];m=m+1|0}while((m|0)<(i|0))}s[p+8>>2]=i;if((zn(s[e>>2]|0,p,t,n,f)|0)<0)u[f>>3]=1.0e8;zs(s[p>>2]|0);zs(s[c>>2]|0);d=h;return+ +u[f>>3]}function Sc(e,t,r,a,i,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;n=n|0;var o=0,l=0,c=0,p=0,f=0,m=0,h=0;h=d;d=d+32|0;p=h+20|0;f=h;o=js(i<<4)|0;s[p>>2]=o;if(!o){en(3,5472,h+8|0);kt(1)}l=js(i*24|0)|0;c=p+4|0;s[c>>2]=l;if(!l){en(3,5472,h+16|0);kt(1)}if((i|0)>0){m=0;do{u[o+(m<<4)>>3]=+u[r+(m<<4)>>3];u[o+(m<<4)+8>>3]=+u[r+(m<<4)+8>>3];u[l+(m*24|0)>>3]=+u[a+(m*24|0)>>3];u[l+(m*24|0)+8>>3]=+u[a+(m*24|0)+8>>3];u[l+(m*24|0)+16>>3]=+u[a+(m*24|0)+16>>3];m=m+1|0}while((m|0)<(i|0))}s[p+8>>2]=i;if((Bn(s[e>>2]|0,p,t,n,f)|0)<0)u[f>>3]=1.0e8;zs(s[p>>2]|0);zs(s[c>>2]|0);d=h;return+ +u[f>>3]}function xc(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0;i=js(2080)|0;e:do{if(i){s[i+2068>>2]=r;t:do{if(!a){switch(r|0){case 5:case 12:case 13:case 14:break;default:{n=4;break t}}s[i+2076>>2]=0}else n=4}while(0);do{if((n|0)==4){n=js(re(t,e)|0)|0;s[i>>2]=n;if(!n){zs(i);i=0;break e}else{s[i+2076>>2]=1;break}}}while(0);s[i+2072>>2]=a;s[i+4>>2]=0;s[i+8>>2]=e;s[i+12>>2]=t}}while(0);return i|0}function Cc(e){e=e|0;if(e){if(s[e+2076>>2]|0)zs(s[e>>2]|0);zs(s[e+4>>2]|0);zs(e)}return}function qc(e,t){e=e|0;t=t|0;var r=0,i=0,o=0,l=0,c=0,u=0,p=0;c=d;d=d+16|0;i=c;r=s[e+2068>>2]|0;e:do{switch(r|0){case 5:case 12:case 13:case 14:if(!(s[e+2072>>2]|0)){s[e>>2]=t;r=0;break e}else{Kc(s[e>>2]|0,t|0,re(s[e+12>>2]|0,s[e+8>>2]|0)|0)|0;r=0;break e}default:{if((r&-2|0)==2){r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){a[(s[e>>2]|0)+o>>0]=(((n[t+(l|1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l|2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break e}else l=l+4|0}}if((r&-3|0)==4){r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){a[(s[e>>2]|0)+o>>0]=(((n[t+(l|2)>>0]|0)+(n[t+(l|1)>>0]|0)+(n[t+(l|3)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break e}else l=l+4|0}}if(r>>>0<2){r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){a[(s[e>>2]|0)+o>>0]=(((n[t+(l+1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l+2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break e}else l=l+3|0}}switch(r|0){case 8:{r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){a[(s[e>>2]|0)+o>>0]=a[t+l>>0]|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break}else l=l+2|0}break}case 7:{r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){a[(s[e>>2]|0)+o>>0]=a[t+(l|1)>>0]|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break}else l=l+2|0}break}case 9:{r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){p=n[t+l>>0]|0;u=n[t+(l|1)>>0]|0;a[(s[e>>2]|0)+o>>0]=(((p&248)+10+(p<<5&224)+(u>>>3&28)+(u<<3&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break}else l=l+2|0}break}case 10:{r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){u=n[t+l>>0]|0;p=n[t+(l|1)>>0]|0;a[(s[e>>2]|0)+o>>0]=(((u&248)+12+(u<<5&224)+(p>>>3&24)+(p<<2&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break}else l=l+2|0}break}case 11:{r=e+8|0;i=e+12|0;if(!(re(s[i>>2]|0,s[r>>2]|0)|0)){r=0;break e}else{o=0;l=0}while(1){p=n[t+l>>0]|0;a[(s[e>>2]|0)+o>>0]=(((p&240)+24+(p<<4&240)+((n[t+(l|1)>>0]|0)&240)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(re(s[i>>2]|0,s[r>>2]|0)|0)>>>0){r=0;break}else l=l+2|0}break}default:{en(3,4361,i);r=-1;break e}}}}}while(0);d=c;return r|0}function Tc(e,t){e=e|0;t=t|0;var r=0,a=0;if((e|0)!=0&(t|0)!=0?(qc(e,t)|0)>=0:0){Wc(e+16|0,0,1024)|0;t=s[e>>2]|0;a=re(s[e+12>>2]|0,s[e+8>>2]|0)|0;r=t+a|0;if((a|0)>0){do{a=e+16+((n[t>>0]|0)<<2)|0;s[a>>2]=(s[a>>2]|0)+1;t=t+1|0}while(t>>>0<r>>>0);t=0}else t=0}else t=-1;return t|0}function Ec(e,t){e=e|0;t=t|0;var r=0;t=Tc(e,t)|0;if((t|0)>=0){t=0;r=0;do{t=(s[e+16+(r<<2)>>2]|0)+t|0;s[e+1040+(r<<2)>>2]=t;r=r+1|0}while((r|0)!=256);t=0}return t|0}function Pc(e,t,r,i){e=e|0;t=t|0;r=+r;i=i|0;var n=0,o=0,l=0;if(!(r<0.0|r>1.0)){t=Ec(e,t)|0;if((t|0)>=0){l=~~(+(re(s[e+12>>2]|0,s[e+8>>2]|0)|0)*r)>>>0;t=0;while(1){o=t&255;n=s[e+1040+(o<<2)>>2]|0;if(n>>>0<l>>>0)t=t+1<<24>>24;else break}if((n|0)==(l|0))do{t=t+1<<24>>24}while((s[e+1040+((t&255)<<2)>>2]|0)==(l|0));a[i>>0]=((t&255)+o|0)>>>1;t=0}}else t=-1;return t|0}function Ac(e,t,r){e=e|0;t=t|0;r=r|0;return Pc(e,t,.5,r)|0}function Mc(e,t,r){e=e|0;t=t|0;r=r|0;var i=0.0,n=0,o=0.0,l=0.0,c=0.0,u=0.0,d=0,p=0.0,f=0.0;t=Tc(e,t)|0;if((t|0)>=0){t=1;i=0.0;do{i=i+ +((re(s[e+16+(t<<2)>>2]|0,t)|0)>>>0);t=t+1|0}while((t|0)!=256);u=+(re(s[e+12>>2]|0,s[e+8>>2]|0)|0);d=0;o=0.0;t=0;c=0.0;p=0.0;while(1){n=s[e+16+(d<<2)>>2]|0;p=p+ +(n>>>0);if(p!=0.0){l=u-p;if(l==0.0)break;o=o+ +((re(d,n)|0)>>>0);f=o/p-(i-o)/l;l=f*(p*l*f);if(l>c)t=d&255;else l=c}else l=c;if((d&255)<<24>>24==-1)break;else{d=d+1|0;c=l}}a[r>>0]=t;t=0}return t|0}function Ic(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0,b=0,g=0,v=0,w=0,k=0;t=Tc(e,t)|0;do{if((t|0)>=0){w=e+4|0;if(!(s[w>>2]|0)){t=e+8|0;o=e+12|0;v=js(re(s[o>>2]|0,s[t>>2]|0)|0)|0;s[w>>2]=v;if(!v){t=-1;break}else v=t}else{v=e+8|0;o=e+12|0}b=r>>1;g=0-b|0;t=s[o>>2]|0;if((t|0)>0){f=(b|0)<(g|0);m=(b|0)<(g|0);h=0;do{t=s[v>>2]|0;if((t|0)>0){p=0;do{if(f){l=0;r=0}else{l=0;d=g;r=0;while(1){c=d+h|0;if(((c|0)>=0?(c|0)<(s[o>>2]|0):0)?(k=re(t,c)|0,!m):0){u=g;while(1){c=u+p|0;if((c|0)>-1&(c|0)<(t|0)){l=l+1|0;r=(n[(s[e>>2]|0)+(k+c)>>0]|0)+r|0}if((u|0)<(b|0))u=u+1|0;else break}}if((d|0)<(b|0))d=d+1|0;else break}}d=(re(t,h)|0)+p|0;a[(s[w>>2]|0)+d>>0]=(r|0)/(l|0)|0;p=p+1|0;t=s[v>>2]|0}while((p|0)<(t|0))}h=h+1|0;t=s[o>>2]|0}while((h|0)<(t|0))}if((i|0)!=0?(re(t,s[v>>2]|0)|0)>0:0){t=0;do{e=(s[w>>2]|0)+t|0;a[e>>0]=(n[e>>0]|0)+i;t=t+1|0}while((t|0)<(re(s[o>>2]|0,s[v>>2]|0)|0));t=0}else t=0}}while(0);return t|0}function Rc(e,t,r,a,i,s,n,o,l,c){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;s=s|0;n=n|0;o=o|0;l=l|0;c=c|0;var u=0;e:do{switch(i|0){case 0:{switch(s|0){case 1:{if(c){u=jr(e,t,r,c,l)|0;break e}switch(o|0){case 0:{if(a>>>0<2){u=Mr(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=Rr(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=Fr(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=Dr(e,t,r,n,l)|0;break e}case 8:{u=Lr(e,t,r,n,l)|0;break e}case 7:{u=Nr(e,t,r,n,l)|0;break e}case 9:{u=Ir(e,t,r,n,l)|0;break e}case 10:{u=$r(e,t,r,n,l)|0;break e}case 11:{u=Or(e,t,r,n,l)|0;break e}default:kt(0)}break}case 1:{if(a>>>0<2){u=_r(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=xr(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=Tr(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=Er(e,t,r,n,l)|0;break e}case 8:{u=Ar(e,t,r,n,l)|0;break e}case 7:{u=Pr(e,t,r,n,l)|0;break e}case 9:{u=Sr(e,t,r,n,l)|0;break e}case 10:{u=qr(e,t,r,n,l)|0;break e}case 11:{u=Cr(e,t,r,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(c){u=sa(e,t,r,c,l)|0;break e}switch(o|0){case 0:{if(a>>>0<2){u=Kr(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=Xr(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=ta(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=ra(e,t,r,n,l)|0;break e}case 8:{u=ia(e,t,r,n,l)|0;break e}case 7:{u=aa(e,t,r,n,l)|0;break e}case 9:{u=Jr(e,t,r,n,l)|0;break e}case 10:{u=ea(e,t,r,n,l)|0;break e}case 11:{u=Zr(e,t,r,n,l)|0;break e}default:kt(0)}break}case 1:{if(a>>>0<2){u=zr(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=Br(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=Wr(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=Yr(e,t,r,n,l)|0;break e}case 8:{u=Gr(e,t,r,n,l)|0;break e}case 7:{u=Vr(e,t,r,n,l)|0;break e}case 9:{u=Hr(e,t,r,n,l)|0;break e}case 10:{u=Qr(e,t,r,n,l)|0;break e}case 11:{u=Ur(e,t,r,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}case 1:{switch(s|0){case 1:{if(c){u=ar(e,t,r,c,l)|0;break e}switch(o|0){case 0:{if(a>>>0<2){u=Vt(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=Kt(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=Zt(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=er(e,t,r,n,l)|0;break e}case 8:{u=rr(e,t,r,n,l)|0;break e}case 7:{u=tr(e,t,r,n,l)|0;break e}case 9:{u=Gt(e,t,r,n,l)|0;break e}case 10:{u=Xt(e,t,r,n,l)|0;break e}case 11:{u=Jt(e,t,r,n,l)|0;break e}default:kt(0)}break}case 1:{if(a>>>0<2){u=na(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=la(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=da(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=Qt(e,t,r,n,l)|0;break e}case 8:{u=Yt(e,t,r,n,l)|0;break e}case 7:{u=Wt(e,t,r,n,l)|0;break e}case 9:{u=oa(e,t,r,n,l)|0;break e}case 10:{u=ua(e,t,r,n,l)|0;break e}case 11:{u=ca(e,t,r,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(c){u=Ul(e,t,r,c,l)|0;break e}switch(o|0){case 0:{if(a>>>0<2){u=$l(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=Dl(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=jl(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=zl(e,t,r,n,l)|0;break e}case 8:{u=Bl(e,t,r,n,l)|0;break e}case 7:{u=Hl(e,t,r,n,l)|0;break e}case 9:{u=Fl(e,t,r,n,l)|0;break e}case 10:{u=Ll(e,t,r,n,l)|0;break e}case 11:{u=Nl(e,t,r,n,l)|0;break e}default:kt(0)}break}case 1:{if(a>>>0<2){u=ir(e,t,r,n,l)|0;break e}if((a&-2|0)==2){u=nr(e,t,r,n,l)|0;break e}if((a&-3|0)==4){u=cr(e,t,r,n,l)|0;break e}switch(a|0){case 5:case 12:case 13:case 14:{u=ur(e,t,r,n,l)|0;break e}case 8:{u=pr(e,t,r,n,l)|0;break e}case 7:{u=dr(e,t,r,n,l)|0;break e}case 9:{u=sr(e,t,r,n,l)|0;break e}case 10:{u=lr(e,t,r,n,l)|0;break e}case 11:{u=or(e,t,r,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}default:kt(0)}}while(0);return u|0}function Oc(e,t){e=e|0;t=t|0;var r=0;if((e|0)!=0?(r=e+7062384|0,(s[r>>2]|0)==0):0){s[r>>2]=t;r=0}else r=-1;return r|0}function $c(e){e=e|0;var t=0;if((e|0)!=0?(t=e+7062384|0,(s[t>>2]|0)!=0):0){s[t>>2]=0;t=0}else t=-1;return t|0}function Fc(){return Dc(16,50)|0}function Dc(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,m=0,h=0,b=0,g=0;g=d;d=d+64|0;b=g+56|0;h=g+48|0;l=g+40|0;o=g+32|0;n=g+24|0;i=g+16|0;a=g+8|0;r=g;e:do{if(!((e+-16|0)>>>0>48|(t|0)<1)){f=js(32)|0;if(!f){en(3,5472,r);kt(1)}s[f>>2]=0;s[f+4>>2]=t;s[f+28>>2]=e;p=js(t<<2)|0;s[f+8>>2]=p;if(!p){en(3,5472,a);kt(1)}r=t<<4;u=js(r)|0;s[f+12>>2]=u;if(!u){en(3,5472,i);kt(1)}i=js(r)|0;c=f+20|0;s[c>>2]=i;if(!i){en(3,5472,n);kt(1)}r=t<<5;n=js(r)|0;s[f+16>>2]=n;if(!n){en(3,5472,o);kt(1)}o=js(r)|0;s[f+24>>2]=o;if(!o){en(3,5472,l);kt(1)}a=re(e,e)|0;r=a*12|0;a=a<<2;if((t|0)>0){e=0;t:while(1){s[p+(e<<2)>>2]=0;i=e<<2;o=0;while(1){if((o|0)>=4)break;l=js(r)|0;n=o+i|0;s[u+(n<<2)>>2]=l;if(!l){r=18;break t}l=js(a)|0;s[(s[c>>2]|0)+(n<<2)>>2]=l;if(!l){r=20;break t}else o=o+1|0}e=e+1|0;if((e|0)>=(t|0)){m=f;break e}}if((r|0)==18){en(3,5472,h);kt(1)}else if((r|0)==20){en(3,5472,b);kt(1)}}else m=f}else m=0}while(0);d=g;return m|0}function Nc(e){e=e|0;var t=0,r=0,a=0,i=0,n=0,o=0,l=0;if(!e)t=-1;else{t=e+4|0;r=e+8|0;a=e+12|0;i=e+20|0;if((s[t>>2]|0)>0){n=0;do{if(s[(s[r>>2]|0)+(n<<2)>>2]|0)Zs(e,n)|0;o=n<<2;zs(s[(s[a>>2]|0)+(o<<2)>>2]|0);zs(s[(s[i>>2]|0)+(o<<2)>>2]|0);l=1+o|0;zs(s[(s[a>>2]|0)+(l<<2)>>2]|0);zs(s[(s[i>>2]|0)+(l<<2)>>2]|0);l=2+o|0;zs(s[(s[a>>2]|0)+(l<<2)>>2]|0);zs(s[(s[i>>2]|0)+(l<<2)>>2]|0);o=3+o|0;zs(s[(s[a>>2]|0)+(o<<2)>>2]|0);zs(s[(s[i>>2]|0)+(o<<2)>>2]|0);n=n+1|0}while((n|0)<(s[t>>2]|0))}zs(e);t=0}return t|0}function Lc(e,t,r,i,o,l,c,p,f,m,h,b,g,v,w,k,y,_,S){e=e|0;t=t|0;r=r|0;i=i|0;o=o|0;l=l|0;c=c|0;p=p|0;f=f|0;m=+m;h=h|0;b=b|0;g=g|0;v=v|0;w=w|0;k=k|0;y=y|0;_=_|0;S=S|0;var x=0,C=0,q=0,T=0,E=0,P=0,A=0,M=0,I=0,R=0,O=0,$=0,F=0,D=0;D=d;d=d+12448|0;q=D+12440|0;C=D+8|0;$=D;O=D+12312|0;F=D+24|0;do{if((r+-2|0)>>>0<3){if((y|0)!=2830){x=y&255;if((Ws(t,2,x,x*3|0,i,o,l,c,p,f,m,F)|0)<0){s[v>>2]=-1;x=-6;break}x=Ys(F,x,v,w,k,y,_)|0;if(!S)break;s[S>>2]=0;s[S+4>>2]=0;break}if((Ws(t,2,14,42,i,o,l,c,p,f,.875,F)|0)<0){s[v>>2]=-1;x=-6;break}s[C>>2]=0;s[C+4>>2]=182;s[C+8>>2]=195;s[C+12>>2]=13;y=a[F+(s[C>>2]|0)>>0]|0;x=(y&255)>0?y:0;y=(y&255)<255?y:-1;R=a[F+(s[C+4>>2]|0)>>0]|0;x=(R&255)>(x&255)?R:x;y=(R&255)<(y&255)?R:y;R=a[F+(s[C+8>>2]|0)>>0]|0;x=(R&255)>(x&255)?R:x;y=(R&255)<(y&255)?R:y;R=a[F+(s[C+12>>2]|0)>>0]|0;x=((R&255)>(x&255)?R:x)&255;y=((R&255)<(y&255)?R:y)&255;e:do{if((x-y|0)>=30){R=(x+y|0)>>>1;a[q>>0]=(n[F+(s[C>>2]|0)>>0]|0)>>>0<R>>>0&1;a[q+1>>0]=(n[F+(s[C+4>>2]|0)>>0]|0)>>>0<R>>>0&1;a[q+2>>0]=(n[F+(s[C+8>>2]|0)>>0]|0)>>>0<R>>>0&1;a[q+3>>0]=(n[F+(s[C+12>>2]|0)>>0]|0)>>>0<R>>>0&1;y=0;while(1){x=y+1|0;if(((a[q+y>>0]|0)==1?(a[q+((x|0)%4|0)>>0]|0)==1:0)?(a[q+((y+2|0)%4|0)>>0]|0)==0:0){I=y;break}if((x|0)<4)y=x;else{I=x;break}}switch(I|0){case 4:{s[w>>2]=0;u[k>>3]=-1.0;x=-3;y=0;C=0;break e}case 0:{C=119;x=255;y=0;do{P=y+-3|0;T=(y&-2|0)==12;E=y*14|0;q=0;do{if(((q+-3|P)>>>0>=8?(M=q&-2,(q|y)>>>0>=2):0)?!(T&((M|0)==0|(M|0)==12)):0){A=(n[F+(q+E)>>0]|0)-R|0;a[O+C>>0]=A>>>31;A=(A|0)>-1?A:0-A|0;C=C+-1|0;x=(A|0)<(x|0)?A:x}q=q+1|0}while((q|0)!=14);y=y+1|0}while((y|0)!=14);break}case 1:{C=119;x=255;y=0;do{P=y+-3|0;E=y&-2;T=(E|0)==0;E=(E|0)==12;q=13;while(1){if(((q+-3|P)>>>0>=8?(A=(q&-2|0)==12,!(T&A)):0)?!(E&(q>>>0<2|A)):0){M=(n[F+((q*14|0)+y)>>0]|0)-R|0;a[O+C>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;C=C+-1|0;x=(M|0)<(x|0)?M:x}if((q|0)>0)q=q+-1|0;else break}y=y+1|0}while((y|0)!=14);break}case 2:{y=119;x=255;P=13;while(1){T=P+-3|0;E=P>>>0<2|(P&-2|0)==12;q=P*14|0;C=13;while(1){if((C+-3|T)>>>0>=8?!((C|P)>>>0<2|E&(C&-2|0)==12):0){M=(n[F+(C+q)>>0]|0)-R|0;a[O+y>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;y=y+-1|0;x=(M|0)<(x|0)?M:x}if((C|0)>0)C=C+-1|0;else break}if((P|0)>0)P=P+-1|0;else break}break}case 3:{y=119;x=255;P=13;while(1){E=P+-3|0;T=P&-2;q=(T|0)==12;T=(T|0)==0;C=0;do{if(((C+-3|E)>>>0>=8?!(q&C>>>0<2|(C|P)>>>0<2):0)?!(T&(C&-2|0)==12):0){M=(n[F+((C*14|0)+P)>>0]|0)-R|0;a[O+y>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;y=y+-1|0;x=(M|0)<(x|0)?M:x}C=C+1|0}while((C|0)!=14);if((P|0)>0)P=P+-1|0;else break}break}default:x=255}s[w>>2]=I;u[k>>3]=(x|0)>30?1.0:+(x|0)/30.0;x=Ks(2830,0,0,O,$)|0;if((x|0)<0){x=-4;y=0;C=0}else{if(_)s[_>>2]=x;C=$;x=0;y=s[C>>2]|0;C=s[C+4>>2]|0}}else{s[w>>2]=0;u[k>>3]=-1.0;x=-2;y=0;C=0}}while(0);if((x|0)<0){s[v>>2]=-1;break}if((y|0)==-1&(C|0)==-1){s[v>>2]=-1;x=-5;break}s[v>>2]=(y&-32768|0)==0&0==0?y&32767:0;if(!S)x=0;else{x=S;s[x>>2]=y;s[x+4>>2]=C;x=0}}else x=1}while(0);e:do{switch(r|0){case 0:case 1:case 3:case 4:{if(!e){s[h>>2]=-1;y=-1;break e}y=e+28|0;C=s[y>>2]|0;q=C<<2;switch(r|0){case 0:case 3:if((Ws(t,0,C,q,i,o,l,c,p,f,m,F)|0)<0){s[h>>2]=-1;y=-6;break e}else{y=Vs(e,0,F,s[y>>2]|0,h,b,g)|0;break e}default:if((Ws(t,1,C,q,i,o,l,c,p,f,m,F)|0)<0){s[h>>2]=-1;y=-6;break e}else{y=Vs(e,1,F,s[y>>2]|0,h,b,g)|0;break e}}}default:y=1}}while(0);if((x|0)!=1){if((y|0)!=1)x=(y&x|0)<0?y:0}else x=y;d=D;return x|0}function jc(e){e=e|0;var t=0,r=0,a=0,i=0,n=0,o=0,l=0,c=0;c=d;d=d+16|0;t=c+8|0;o=c+4|0;r=c;s[o>>2]=e;do{if(e>>>0>=212){n=(e>>>0)/210|0;a=n*210|0;s[r>>2]=e-a;t=(zc(3712,3904,r,t)|0)-3712>>2;i=t;t=(s[3712+(t<<2)>>2]|0)+a|0;e:while(1){a=5;while(1){if(a>>>0>=47){a=211;l=8;break}r=s[3520+(a<<2)>>2]|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=106;break e}if((t|0)==(re(e,r)|0))break;else a=a+1|0}t:do{if((l|0)==8)while(1){l=0;r=(t>>>0)/(a>>>0)|0;if(r>>>0<a>>>0){l=105;break e}if((t|0)==(re(r,a)|0))break t;r=a+10|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+12|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+16|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+18|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+22|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+28|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+30|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+36|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+40|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+42|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+46|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+52|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+58|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+60|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+66|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+70|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+72|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+78|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+82|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+88|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+96|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+100|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+102|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+106|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+108|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+112|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+120|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+126|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+130|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+136|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+138|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+142|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+148|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+150|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+156|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+162|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+166|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+168|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+172|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+178|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+180|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+186|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+190|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+192|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+196|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+198|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break t;r=a+208|0;e=(t>>>0)/(r>>>0)|0;if(e>>>0<r>>>0){l=105;break e}if((t|0)==(re(e,r)|0))break;else{a=a+210|0;l=8}}}while(0);a=i+1|0;t=(a|0)==48;a=t?0:a;t=(t&1)+n|0;i=a;n=t;t=(s[3712+(a<<2)>>2]|0)+(t*210|0)|0}if((l|0)==105){s[o>>2]=t;break}else if((l|0)==106){s[o>>2]=t;break}}else t=s[(zc(3520,3712,o,t)|0)>>2]|0}while(0);d=c;return t|0}function zc(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0;i=s[r>>2]|0;a=e;r=t-e>>2;e:while(1){while(1){if(!r)break e;e=(r|0)/2|0;if((s[a+(e<<2)>>2]|0)>>>0<i>>>0)break;else r=e}a=a+(e+1<<2)|0;r=r+-1-e|0}return a|0}function Hc(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0;if(r>>>0>4294967279)li(e);if(r>>>0<11){a[e>>0]=r<<1;e=e+1|0}else{n=r+16&-16;i=Aa(n)|0;s[e+8>>2]=i;s[e>>2]=n|1;s[e+4>>2]=r;e=i}Kc(e|0,t|0,r|0)|0;a[e+r>>0]=0;return}function Bc(e){e=e|0;if(a[e>>0]&1)Ma(s[e+8>>2]|0);return}function Uc(){}function Qc(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;a=t-a-(r>>>0>e>>>0|0)>>>0;return(I=a,e-r>>>0|0)|0}function Wc(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0,o=0,l=0;i=e+r|0;if((r|0)>=20){t=t&255;o=e&3;l=t|t<<8|t<<16|t<<24;n=i&~3;if(o){o=e+4-o|0;while((e|0)<(o|0)){a[e>>0]=t;e=e+1|0}}while((e|0)<(n|0)){s[e>>2]=l;e=e+4|0}}while((e|0)<(i|0)){a[e>>0]=t;e=e+1|0}return e-r|0}function Yc(e,t,r){e=e|0;t=t|0;r=r|0;if((r|0)<32){I=t<<r|(e&(1<<r)-1<<32-r)>>>32-r;return e<<r}I=e<<r-32;return 0}function Vc(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;r=e+r>>>0;return(I=t+a+(r>>>0<e>>>0|0)>>>0,r|0)|0}function Gc(e,t,r){e=e|0;t=t|0;r=r|0;if((r|0)<32){I=t>>>r;return e>>>r|(t&(1<<r)-1)<<32-r}I=0;return t>>>r-32|0}function Kc(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;if((r|0)>=4096)return Xe(e|0,t|0,r|0)|0;i=e|0;if((e&3)==(t&3)){while(e&3){if(!r)return i|0;a[e>>0]=a[t>>0]|0;e=e+1|0;t=t+1|0;r=r-1|0}while((r|0)>=4){s[e>>2]=s[t>>2];e=e+4|0;t=t+4|0;r=r-4|0}}while((r|0)>0){a[e>>0]=a[t>>0]|0;e=e+1|0;t=t+1|0;r=r-1|0}return i|0}function Jc(e,t,r){e=e|0;t=t|0;r=r|0;if((r|0)<32){I=t>>r;return e>>>r|(t&(1<<r)-1)<<32-r}I=(t|0)<0?-1:0;return t>>r-32|0}function Xc(e){e=e|0;var t=0;t=a[h+(e&255)>>0]|0;if((t|0)<8)return t|0;t=a[h+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=a[h+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(a[h+(e>>>24)>>0]|0)+24|0}function Zc(e,t){e=e|0;t=t|0;var r=0,a=0,i=0,s=0;s=e&65535;i=t&65535;r=re(i,s)|0;a=e>>>16;e=(r>>>16)+(re(i,a)|0)|0;i=t>>>16;t=re(i,s)|0;return(I=(e>>>16)+(re(i,a)|0)+(((e&65535)+t|0)>>>16)|0,e+t<<16|r&65535|0)|0}function eu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,s=0,n=0,o=0,l=0,c=0;c=t>>31|((t|0)<0?-1:0)<<1;l=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;s=a>>31|((a|0)<0?-1:0)<<1;i=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1;o=Qc(c^e,l^t,c,l)|0;n=I;e=s^c;t=i^l;return Qc((su(o,n,Qc(s^r,i^a,s,i)|0,I,0)|0)^e,I^t,e,t)|0}function tu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0,o=0,l=0,c=0,u=0;i=d;d=d+16|0;l=i|0;o=t>>31|((t|0)<0?-1:0)<<1;n=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;u=a>>31|((a|0)<0?-1:0)<<1;c=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1;e=Qc(o^e,n^t,o,n)|0;t=I;su(e,t,Qc(u^r,c^a,u,c)|0,I,l)|0;a=Qc(s[l>>2]^o,s[l+4>>2]^n,o,n)|0;r=I;d=i;return(I=r,a)|0}function ru(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,s=0;i=e;s=r;r=Zc(i,s)|0;e=I;return(I=(re(t,s)|0)+(re(a,i)|0)+e|e&0,r|0|0)|0}function au(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;return su(e,t,r,a,0)|0}function iu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;var i=0,n=0;n=d;d=d+16|0;i=n|0;su(e,t,r,a,i)|0;d=n;return(I=s[i+4>>2]|0,s[i>>2]|0)|0}function su(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;var n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,h=0;d=e;c=t;u=c;o=r;f=a;l=f;if(!u){n=(i|0)!=0;if(!l){if(n){s[i>>2]=(d>>>0)%(o>>>0);s[i+4>>2]=0}f=0;i=(d>>>0)/(o>>>0)>>>0;return(I=f,i)|0}else{if(!n){f=0;i=0;return(I=f,i)|0}s[i>>2]=e|0;s[i+4>>2]=t&0;f=0;i=0;return(I=f,i)|0}}n=(l|0)==0;do{if(o){if(!n){n=(ie(l|0)|0)-(ie(u|0)|0)|0;if(n>>>0<=31){p=n+1|0;l=31-n|0;t=n-31>>31;o=p;e=d>>>(p>>>0)&t|u<<l;t=u>>>(p>>>0)&t;n=0;l=d<<l;break}if(!i){f=0;i=0;return(I=f,i)|0}s[i>>2]=e|0;s[i+4>>2]=c|t&0;f=0;i=0;return(I=f,i)|0}n=o-1|0;if(n&o){l=(ie(o|0)|0)+33-(ie(u|0)|0)|0;h=64-l|0;p=32-l|0;c=p>>31;m=l-32|0;t=m>>31;o=l;e=p-1>>31&u>>>(m>>>0)|(u<<p|d>>>(l>>>0))&t;t=t&u>>>(l>>>0);n=d<<h&c;l=(u<<h|d>>>(m>>>0))&c|d<<p&l-33>>31;break}if(i){s[i>>2]=n&d;s[i+4>>2]=0}if((o|0)==1){m=c|t&0;h=e|0|0;return(I=m,h)|0}else{h=Xc(o|0)|0;m=u>>>(h>>>0)|0;h=u<<32-h|d>>>(h>>>0)|0;return(I=m,h)|0}}else{if(n){if(i){s[i>>2]=(u>>>0)%(o>>>0);s[i+4>>2]=0}m=0;h=(u>>>0)/(o>>>0)>>>0;return(I=m,h)|0}if(!d){if(i){s[i>>2]=0;s[i+4>>2]=(u>>>0)%(l>>>0)}m=0;h=(u>>>0)/(l>>>0)>>>0;return(I=m,h)|0}n=l-1|0;if(!(n&l)){if(i){s[i>>2]=e|0;s[i+4>>2]=n&u|t&0}m=0;h=u>>>((Xc(l|0)|0)>>>0);return(I=m,h)|0}n=(ie(l|0)|0)-(ie(u|0)|0)|0;if(n>>>0<=30){t=n+1|0;l=31-n|0;o=t;e=u<<l|d>>>(t>>>0);t=u>>>(t>>>0);n=0;l=d<<l;break}if(!i){m=0;h=0;return(I=m,h)|0}s[i>>2]=e|0;s[i+4>>2]=c|t&0;m=0;h=0;return(I=m,h)|0}}while(0);if(!o){u=l;c=0;l=0}else{p=r|0|0;d=f|a&0;u=Vc(p|0,d|0,-1,-1)|0;r=I;c=l;l=0;do{a=c;c=n>>>31|c<<1;n=l|n<<1;a=e<<1|a>>>31|0;f=e>>>31|t<<1|0;Qc(u,r,a,f)|0;h=I;m=h>>31|((h|0)<0?-1:0)<<1;l=m&1;e=Qc(a,f,m&p,(((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1)&d)|0;t=I;o=o-1|0}while((o|0)!=0);u=c;c=0}o=0;if(i){s[i>>2]=e;s[i+4>>2]=t}m=(n|0)>>>31|(u|o)<<1|(o<<1|n>>>31)&0|c;h=(n<<1|0>>>31)&-2|l;return(I=m,h)|0}function nu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;return Nu[e&15](t|0,r|0,a|0)|0}function ou(e,t,r,a,i,s){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;s=s|0;Lu[e&3](t|0,r|0,a|0,i|0,s|0)}function lu(e,t,r){e=e|0;t=t|0;r=r|0;return+ju[e&1](t|0,r|0)}function cu(e,t,r){e=e|0;t=t|0;r=+r;zu[e&3](t|0,+r)}function uu(e,t){e=e|0;t=t|0;return+Hu[e&3](t|0)}function du(e){e=e|0;return Bu[e&1]()|0}function pu(e,t){e=e|0;t=t|0;Uu[e&15](t|0)}function fu(e,t,r){e=e|0;t=t|0;r=r|0;Qu[e&7](t|0,r|0)}function mu(e,t){e=e|0;t=t|0;return Wu[e&31](t|0)|0}function hu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;Yu[e&1](t|0,r|0,a|0)}function bu(e){e=e|0;Vu[e&0]()}function gu(e,t,r,a){e=e|0;t=t|0;r=r|0;a=+a;Gu[e&3](t|0,r|0,+a)}function vu(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;return Ku[e&1](t|0,r|0,a|0,i|0)|0}function wu(e,t,r,a,i,s,n){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;s=s|0;n=n|0;Ju[e&3](t|0,r|0,a|0,i|0,s|0,n|0)}function ku(e,t,r){e=e|0;t=t|0;r=r|0;return Xu[e&15](t|0,r|0)|0}function yu(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;Zu[e&3](t|0,r|0,a|0,i|0)}function _u(e,t,r){e=e|0;t=t|0;r=r|0;se(0);return 0}function Su(e,t,r,a,i){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;se(1)}function xu(e,t){e=e|0;t=t|0;se(2);return 0.0}function Cu(e,t){e=e|0;t=+t;se(3)}function qu(e){e=e|0;se(4);return 0.0}function Tu(){se(5);return 0}function Eu(e){e=e|0;se(6)}function Pu(e,t){e=e|0;t=t|0;se(7)}function Au(e){e=e|0;se(8);return 0}function Mu(e,t,r){e=e|0;t=t|0;r=r|0;se(9)}function Iu(){se(10)}function Ru(e,t,r){e=e|0;t=t|0;r=+r;se(11)}function Ou(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;se(12);return 0}function $u(e,t,r,a,i,s){e=e|0;t=t|0;r=r|0;a=a|0;i=i|0;s=s|0;se(13)}function Fu(e,t){e=e|0;t=t|0;se(14);return 0}function Du(e,t,r,a){e=e|0;t=t|0;r=r|0;a=a|0;se(15)}var Nu=[_u,Qa,Wa,Fs,Fi,$i,Di,Bo,$o,Ro,Oo,zo,Tl,ql,Oi,Is];var Lu=[Su,ii,ai,ei];var ju=[xu,kl];var zu=[Cu,uo,fo,go];var Hu=[qu,po,mo,vo];var Bu=[Tu,to];var Uu=[Eu,Ia,Ra,Na,za,La,ja,Ha,Ba,Ua,eo,pl,fl,Es,Ps,Eu];var Qu=[Pu,Co,So,ho,wo,yo,Ao,Sl];var Wu=[Au,Oa,Ri,ao,co,io,Lo,jo,Po,Eo,qo,xo,bo,ko,_o,Mo,_l,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au,Au];var Yu=[Mu,wl];var Vu=[Iu];var Gu=[Ru,yl,vl,Ru];var Ku=[Ou,Pl];var Ju=[$u,oi,ni,si];var Xu=[Fu,Qn,no,oo,lo,Fo,No,Do,Ho,To,El,xl,Fu,Fu,Fu,Fu];var Zu=[Du,Va,Ga,Ja];return{_i64Subtract:Qc,_fflush:Ui,_i64Add:Vc,_memset:Wc,_malloc:js,_memcpy:Kc,___getTypeName:ka,_bitshift64Lshr:Gc,_free:zs,___errno_location:ui,_bitshift64Shl:Yc,__GLOBAL__sub_I_ARToolKitJS_cpp:dl,__GLOBAL__sub_I_bind_cpp:_a,runPostSets:Uc,stackAlloc:fr,stackSave:mr,stackRestore:hr,establishStackSpace:br,setThrew:gr,setTempRet0:kr,getTempRet0:yr,dynCall_iiii:nu,dynCall_viiiii:ou,dynCall_dii:lu,dynCall_vid:cu,dynCall_di:uu,dynCall_i:du,dynCall_vi:pu,dynCall_vii:fu,dynCall_ii:mu,dynCall_viii:hu,dynCall_v:bu,dynCall_viid:gu,dynCall_iiiii:vu,dynCall_viiiiii:wu,dynCall_iii:ku,dynCall_viiii:yu}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module["_i64Subtract"]=asm["_i64Subtract"],__GLOBAL__sub_I_bind_cpp=Module["__GLOBAL__sub_I_bind_cpp"]=asm["__GLOBAL__sub_I_bind_cpp"],_fflush=Module["_fflush"]=asm["_fflush"],__GLOBAL__sub_I_ARToolKitJS_cpp=Module["__GLOBAL__sub_I_ARToolKitJS_cpp"]=asm["__GLOBAL__sub_I_ARToolKitJS_cpp"],_i64Add=Module["_i64Add"]=asm["_i64Add"],_memset=Module["_memset"]=asm["_memset"],runPostSets=Module["runPostSets"]=asm["runPostSets"];Module["_malloc"]=asm["_malloc"];var _memcpy=Module["_memcpy"]=asm["_memcpy"],___getTypeName=Module["___getTypeName"]=asm["___getTypeName"],_bitshift64Lshr=Module["_bitshift64Lshr"]=asm["_bitshift64Lshr"];Module["_free"]=asm["_free"];var ___errno_location=Module["___errno_location"]=asm["___errno_location"],_bitshift64Shl=Module["_bitshift64Shl"]=asm["_bitshift64Shl"],dynCall_iiii=Module["dynCall_iiii"]=asm["dynCall_iiii"],dynCall_viiiii=Module["dynCall_viiiii"]=asm["dynCall_viiiii"],dynCall_dii=Module["dynCall_dii"]=asm["dynCall_dii"],dynCall_vid=Module["dynCall_vid"]=asm["dynCall_vid"],dynCall_di=Module["dynCall_di"]=asm["dynCall_di"],dynCall_i=Module["dynCall_i"]=asm["dynCall_i"],dynCall_vi=Module["dynCall_vi"]=asm["dynCall_vi"],dynCall_vii=Module["dynCall_vii"]=asm["dynCall_vii"],dynCall_ii=Module["dynCall_ii"]=asm["dynCall_ii"],dynCall_viii=Module["dynCall_viii"]=asm["dynCall_viii"],dynCall_v=Module["dynCall_v"]=asm["dynCall_v"],dynCall_viid=Module["dynCall_viid"]=asm["dynCall_viid"],dynCall_iiiii=Module["dynCall_iiiii"]=asm["dynCall_iiiii"],dynCall_viiiiii=Module["dynCall_viiiiii"]=asm["dynCall_viiiiii"],dynCall_iii=Module["dynCall_iii"]=asm["dynCall_iii"],dynCall_viiii=Module["dynCall_viiii"]=asm["dynCall_viiii"],initialStackTop;function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Runtime.stackAlloc=asm["stackAlloc"],Runtime.stackSave=asm["stackSave"],Runtime.stackRestore=asm["stackRestore"],Runtime.establishStackSpace=asm["establishStackSpace"],Runtime.setTempRet0=asm["setTempRet0"],Runtime.getTempRet0=asm["getTempRet0"],ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var preloadStartTime=null,calledMain=!1;function run(e){function t(){Module["calledRun"]||(Module["calledRun"]=!0,ABORT||(ensureInitRuntime(),preMain(),Module["onRuntimeInitialized"]&&Module["onRuntimeInitialized"](),Module["_main"]&&shouldRunNow&&Module["callMain"](e),postRun()))}e=e||Module["arguments"],null===preloadStartTime&&(preloadStartTime=Date.now()),runDependencies>0||(preRun(),runDependencies>0||Module["calledRun"]||(Module["setStatus"]?(Module["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){Module["setStatus"]("")}),1),t()}),1)):t()))}function exit(e,t){if(!t||!Module["noExitRuntime"])throw Module["noExitRuntime"]||(ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),Module["onExit"]&&Module["onExit"](e)),ENVIRONMENT_IS_NODE?(process["stdout"]["once"]("drain",(function(){process["exit"](e)})),console.log(" "),setTimeout((function(){process["exit"](e)}),500)):ENVIRONMENT_IS_SHELL&&"function"===typeof quit&&quit(e),new ExitStatus(e)}dependenciesFulfilled=function e(){Module["calledRun"]||run(),Module["calledRun"]||(dependenciesFulfilled=e)},Module["callMain"]=Module.callMain=function(e){assert(0==runDependencies,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called"),e=e||[],ensureInitRuntime();var t=e.length+1;function r(){for(var e=0;e<3;e++)a.push(0)}var a=[allocate(intArrayFromString(Module["thisProgram"]),"i8",ALLOC_NORMAL)];r();for(var i=0;i<t-1;i+=1)a.push(allocate(intArrayFromString(e[i]),"i8",ALLOC_NORMAL)),r();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var s=Module["_main"](t,a,0);exit(s,!0)}catch(n){if(n instanceof ExitStatus)return;if("SimulateInfiniteLoop"==n)return void(Module["noExitRuntime"]=!0);throw n&&"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(n)&&n.stack&&Module.printErr("exception thrown: "+[n,n.stack]),n}finally{calledMain=!0}},Module["run"]=Module.run=run,Module["exit"]=Module.exit=exit;var abortDecorators=[];function abort(e){void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.",r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach((function(t){r=t(r,e)})),r}if(Module["abort"]=Module.abort=abort,Module["preInit"]){"function"==typeof Module["preInit"]&&(Module["preInit"]=[Module["preInit"]]);while(Module["preInit"].length>0)Module["preInit"].pop()()}var shouldRunNow=!0;Module["noInitialRun"]&&(shouldRunNow=!1),run(),function(){var e=function(e,r,a){var i=e,s=r;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;a=r,i=n.videoWidth||n.width,s=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.videoWidth=i,this.videoHeight=s,"string"===typeof a){var o=this;this.cameraParam=new t(a,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=a,this._initialize()};e.prototype.dispose=function(){for(var e in r.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,a,i=this.getMarkerNum();for(t in this.patternMarkers)a=this.patternMarkers[t],a.inPrevious=a.inCurrent,a.inCurrent=!1;for(t in this.barcodeMarkers)a=this.barcodeMarkers[t],a.inPrevious=a.inCurrent,a.inCurrent=!1;for(var s=0;s<i;s++){var n=this.getMarker(s),o=r.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=r.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(s,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=r.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(s,n.dirMatrix)),o!==r.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(s,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(s,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:s,type:o,marker:n,matrix:this.transform_mat}})}var c=this.getMultiMarkerCount();for(s=0;s<c;s++){var u=this.getMultiMarkerPatternCount(s);l=!1;r.getTransMatMultiSquareRobust(this.id,s),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<u;d++){var p=this.getMultiEachMarker(s,d);if(p.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:s,matrix:this.transform_mat}});break}}if(l)for(d=0;d<u;d++){p=this.getMultiEachMarker(s,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:s,markerIndex:d,marker:p,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var r=this.patternMarkers[e];return r||(this.patternMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},e.prototype.trackBarcodeMarkerId=function(e,t){var r=this.barcodeMarkers[e];return r||(this.barcodeMarkers[e]=r={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(r.markerWidth=t),r},e.prototype.getMultiMarkerCount=function(){return r.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return r.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var r=this.listeners[e].indexOf(t);r>-1&&this.listeners[e].splice(r,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var r=0;r<t.length;r++)t[r].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,a){return r.addMarker(this.id,e,t,a)},e.prototype.loadMultiMarker=function(e,t,a){return r.addMultiMarker(this.id,e,t,a)},e.prototype.getTransMatSquare=function(e,t,a){return r.getTransMatSquare(this.id,e,t),a.set(this.marker_transform_mat),a},e.prototype.getTransMatSquareCont=function(e,t,a,i){return this.marker_transform_mat.set(a),r.getTransMatSquareCont(this.id,e,t),i.set(this.marker_transform_mat),i},e.prototype.getTransMatMultiSquare=function(e,t){return r.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return r.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,r){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=r&&0!==r&&(t[12]*=r,t[13]*=r,t[14]*=r),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?r.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return r.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===r.getMarker(this.id,e))return r.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var a=0;a<t.length;a++)this.marker_transform_mat[2*a+0]=t[a][0],this.marker_transform_mat[2*a+1]=t[a][1];return r.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===r.getMultiEachMarker(this.id,e,t))return r.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return r.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return r.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return r.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return r.setLogLevel(e)},e.prototype.getLogLevel=function(){return r.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return r.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return r.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return r.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return r.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return r.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return r.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return r.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return r.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return r.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return r.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return r.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return r.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return r.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return r.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return r.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return r.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return r.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return r.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return r.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var r=this.getMarkerNum(),a=0;a<r;a++)this._debugMarker(this.getMarker(a))},e.prototype._initialize=function(){this.id=r.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=r.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){if(!e||"undefined"===typeof e)return!1;if("IMG"===e.nodeName&&e.width>e.height||"VIDEO"===e.nodeName&&e.videoWidth>e.videoHeight)this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.canvas.height/this.canvas.width,r=this.canvas.width*t,a=this.canvas.height*t,i=(this.canvas.width-a)/2;this.ctx.drawImage(e,i,0,a,r)}if(0===this.canvas.width||0===this.canvas.height)return!1;var s=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=s.data;return!!this.dataHeap&&(this.dataHeap.set(n),!0)},e.prototype._debugMarker=function(e){var t,r;t=e.vertex;var a=this.ctx;a.strokeStyle="red",a.beginPath(),a.moveTo(t[0][0],t[0][1]),a.lineTo(t[1][0],t[1][1]),a.stroke(),a.beginPath(),a.moveTo(t[2][0],t[2][1]),a.lineTo(t[3][0],t[3][1]),a.stroke(),a.strokeStyle="green",a.beginPath(),a.lineTo(t[1][0],t[1][1]),a.lineTo(t[2][0],t[2][1]),a.stroke(),a.beginPath(),a.moveTo(t[3][0],t[3][1]),a.lineTo(t[0][0],t[0][1]),a.stroke(),r=e.pos,a.beginPath(),a.arc(r[0],r[1],8,0,2*Math.PI),a.fillStyle="red",a.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",r=e.onSuccess,a=e.onError||function(e){console.error("ARController.getUserMedia",e)},i=document.createElement("video"),s=function(){0!==this.videoWidth&&r(i)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function e(t){n&&(i.play(),i.paused||o.forEach((function(t){window.removeEventListener(t,e,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var c=function(e){i.addEventListener("loadedmetadata",s,!1),i.src=window.URL.createObjectURL(e),n=!0,l()},u={},d={};e.width&&(d.width=e.width,"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e.width)?(e.width.max&&(u.maxWidth=e.width.max),e.width.min&&(u.minWidth=e.width.max)):u.maxWidth=e.width),e.height&&(d.height=e.height,"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e.height)?(e.height.max&&(u.maxHeight=e.height.max),e.height.min&&(u.minHeight=e.height.max)):u.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var p={audio:!1,video:{mandatory:u}};return navigator.getUserMedia?navigator.getUserMedia(p,c,a):a("navigator.getUserMedia is not supported on your browser"),i},e.getUserMediaARController=function(r){var a={};for(var i in r)a[i]=r[i];var s=r.onSuccess,n=r.cameraParam;a.onSuccess=function(){new t(n,(function(){var t=this,a=r.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),i=a/Math.max(o.videoWidth,o.videoHeight),n=i*o.videoWidth,l=i*o.videoHeight;if(o.videoWidth<o.videoHeight){var c=n;n=l,l=c}var u=new e(n,l,t);u.image=o,o.videoWidth<o.videoHeight?(u.orientation="portrait",u.videoWidth=o.videoHeight,u.videoHeight=o.videoWidth):(u.orientation="landscape",u.videoWidth=o.videoWidth,u.videoHeight=o.videoHeight),s(u,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(a);return o};var t=function(e,t,r){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=r,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;r.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&r.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var r={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:p,addMarker:n,addMultiMarker:u},a=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function i(){for(var e in a.forEach((function(e){r[e]=Module[e]})),Module)e.match(/^AR/)&&(r[e]=Module[e])}var s=0;function n(e,t,r){var a="/marker_"+s++;h(t,a,(function(){var t=Module._addMarker(e,a);r&&r(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),r=t.split("\n"),a=[],i=0;return r.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(i){case 0:return+e,void(i=1);case 1:e.match(/^\d+$/)||a.push(e);case 2:case 3:case 4:return void i++;case 5:return void(i=1)}})),a}var c=0;function u(e,t,r){var a="/multi_marker_"+c++;h(t,a,(function(i){var s=l(i);function n(){var t=Module._addMultiMarker(e,a),i=Module.getMultiMarkerNum(e,t);r&&r(t,i)}if(!s.length)return n();var o=t.split("/").slice(0,-1).join("/");s=s.map((function(e){return"patt.hiro"===e||"patt.kanji"===e||"patt2.hiro"===e||"patt2.kanji"===e?["http://127.0.0.1:8080/data/data/"+e,e]:[o+"/"+e,e]})),b(s,n)}))}var d=0;function p(e,t){var r="/camera_param_"+d++,a=function(){var e=Module._loadCamera(r);t&&t(e)};"object"===E_graaly_dev_sources_webapp_node_modules_quasar_babel_preset_app_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_21___default()(e)?m(r,e,a):e.indexOf("\n")>-1?f(r,e,a):h(e,r,a)}function f(e,t,r){for(var a=new Uint8Array(t.length),i=0;i<a.length;i++)a[i]=255&t.charCodeAt(i);m(e,a,r)}function m(e,t,r){FS.writeFile(e,t,{encoding:"binary"}),r(t)}function h(e,t,r){var a=new XMLHttpRequest;a.open("GET",e,!0),console.log(e),a.responseType="arraybuffer",a.onload=function(e){console.log("before buffer");var i=a.response,s=new Uint8Array(i);m(t,s,r)},a.send()}function b(e,t){var r=e.pop();r?h(r[0],r[1],(function(){b(e,t)})):t()}window.artoolkit=r,window.ARController=e,window.ARCameraParam=t,window.Module?i():window.Module={onRuntimeInitialized:function(){i()}}}();var AR=AR||{};AR.Marker=function(e,t){this.id=e,this.corners=t},AR.Detector=function(){this.grey=new CV.Image,this.thres=new CV.Image,this.homography=new CV.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},AR.Detector.prototype.detect=function(e){return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,.2*e.width,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)},AR.Detector.prototype.findCandidates=function(e,t,r,a){var i,s,n,o=[],l=e.length;for(this.polys=[],n=0;n<l;++n)i=e[n],i.length>=t&&(s=CV.approxPolyDP(i,i.length*r),this.polys.push(s),4===s.length&&CV.isContourConvex(s)&&CV.minEdgeLength(s)>=a&&o.push(s));return o},AR.Detector.prototype.clockwiseCorners=function(e){var t,r,a,i,s,n,o=e.length;for(n=0;n<o;++n)t=e[n][1].x-e[n][0].x,a=e[n][1].y-e[n][0].y,r=e[n][2].x-e[n][0].x,i=e[n][2].y-e[n][0].y,t*i-a*r<0&&(s=e[n][1],e[n][1]=e[n][3],e[n][3]=s);return e},AR.Detector.prototype.notTooNear=function(e,t){var r,a,i,s,n,o,l=[],c=e.length;for(s=0;s<c;++s)for(n=s+1;n<c;++n){for(r=0,o=0;o<4;++o)a=e[s][o].x-e[n][o].x,i=e[s][o].y-e[n][o].y,r+=a*a+i*i;r/4<t*t&&(CV.perimeter(e[s])<CV.perimeter(e[n])?e[s].tooNear=!0:e[n].tooNear=!0)}for(s=0;s<c;++s)e[s].tooNear||l.push(e[s]);return l},AR.Detector.prototype.findMarkers=function(e,t,r){var a,i,s,n=[],o=t.length;for(s=0;s<o;++s)a=t[s],CV.warp(e,this.homography,a,r),CV.threshold(this.homography,this.homography,CV.otsu(this.homography)),i=this.getMarker(this.homography,a),i&&n.push(i);return n},AR.Detector.prototype.getMarker=function(e,t){var r,a,i,s,n,o=e.width/7>>>0,l=o*o>>1,c=[],u=[],d=[];for(s=0;s<7;++s)for(i=0===s||6===s?1:6,n=0;n<7;n+=i)if(r={x:n*o,y:s*o,width:o,height:o},CV.countNonZero(e,r)>l)return null;for(s=0;s<5;++s)for(c[s]=[],n=0;n<5;++n)r={x:(n+1)*o,y:(s+1)*o,width:o,height:o},c[s][n]=CV.countNonZero(e,r)>l?1:0;for(u[0]=c,d[0]=this.hammingDistance(u[0]),a={first:d[0],second:0},s=1;s<4;++s)u[s]=this.rotate(u[s-1]),d[s]=this.hammingDistance(u[s]),d[s]<a.first&&(a.first=d[s],a.second=s);return 0!==a.first?null:new AR.Marker(this.mat2id(u[a.second]),this.rotate2(t,4-a.second))},AR.Detector.prototype.hammingDistance=function(e){var t,r,a,i,s,n=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],o=0;for(a=0;a<5;++a){for(r=1/0,i=0;i<4;++i){for(t=0,s=0;s<5;++s)t+=e[a][s]===n[i][s]?0:1;t<r&&(r=t)}o+=r}return o},AR.Detector.prototype.mat2id=function(e){var t,r=0;for(t=0;t<5;++t)r<<=1,r|=e[t][1],r<<=1,r|=e[t][3];return r},AR.Detector.prototype.rotate=function(e){var t,r,a=[],i=e.length;for(t=0;t<i;++t)for(a[t]=[],r=0;r<e[t].length;++r)a[t][r]=e[e[t].length-r-1][t];return a},AR.Detector.prototype.rotate2=function(e,t){var r,a=[],i=e.length;for(r=0;r<i;++r)a[r]=e[(t+r)%i];return a};var CV=CV||{};CV.Image=function(e,t,r){this.width=e||0,this.height=t||0,this.data=r||[]},CV.grayscale=function(e,t){for(var r=e.data,a=t.data,i=r.length,s=0,n=0;s<i;s+=4)a[n++]=.299*r[s]+.587*r[s+1]+.114*r[s+2]+.5&255;return t.width=e.width,t.height=e.height,t},CV.threshold=function(e,t,r){var a,i=e.data,s=t.data,n=i.length,o=[];for(a=0;a<256;++a)o[a]=a<=r?0:255;for(a=0;a<n;++a)s[a]=o[i[a]];return t.width=e.width,t.height=e.height,t},CV.adaptiveThreshold=function(e,t,r,a){var i,s=e.data,n=t.data,o=s.length,l=[];for(CV.stackBoxBlur(e,t,r),i=0;i<768;++i)l[i]=i-255<=-a?255:0;for(i=0;i<o;++i)n[i]=l[s[i]-n[i]+255];return t.width=e.width,t.height=e.height,t},CV.otsu=function(e){var t,r,a,i=e.data,s=i.length,n=[],o=0,l=0,c=0,u=0,d=0,p=0;for(a=0;a<256;++a)n[a]=0;for(a=0;a<s;++a)n[i[a]]++;for(a=0;a<256;++a)l+=n[a]*a;for(a=0;a<256;++a)if(u+=n[a],0!==u){if(d=s-u,0===d)break;c+=n[a]*a,t=c/u-(l-c)/d,r=u*d*t*t,r>p&&(p=r,o=a)}return o},CV.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],CV.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],CV.BlurStack=function(){this.color=0,this.next=null},CV.stackBoxBlur=function(e,t,r){var a,i,s,n,o,l,c,u,d,p,f=e.data,m=t.data,h=e.height,b=e.width,g=h-1,v=b-1,w=r+r+1,k=r+1,y=CV.stackBoxBlurMult[r],_=CV.stackBoxBlurShift[r];for(a=i=new CV.BlurStack,p=1;p<w;++p)a=a.next=new CV.BlurStack;for(a.next=i,o=0,d=0;d<h;++d){for(l=o,s=f[o],n=k*s,a=i,p=0;p<k;++p)a.color=s,a=a.next;for(p=1;p<k;++p)a.color=f[o+p],n+=a.color,a=a.next;for(a=i,u=0;u<b;++u)m[o++]=n*y>>>_,c=u+k,c=l+(c<v?c:v),n-=a.color-f[c],a.color=f[c],a=a.next}for(u=0;u<b;++u){for(o=u,l=o+b,s=m[o],n=k*s,a=i,p=0;p<k;++p)a.color=s,a=a.next;for(p=1;p<k;++p)a.color=m[l],n+=a.color,a=a.next,l+=b;for(a=i,d=0;d<h;++d)m[o]=n*y>>>_,c=d+k,c=u+(c<g?c:g)*b,n-=a.color-m[c],a.color=m[c],a=a.next,o+=b}return t},CV.gaussianBlur=function(e,t,r,a){var i=CV.gaussianKernel(a);return t.width=e.width,t.height=e.height,r.width=e.width,r.height=e.height,CV.gaussianBlurFilter(e,r,i,!0),CV.gaussianBlurFilter(r,t,i,!1),t},CV.gaussianBlurFilter=function(e,t,r,a){var i,s,n,o,l,c=e.data,u=t.data,d=e.height,p=e.width,f=0,m=r.length>>1;for(n=0;n<d;++n)for(o=0;o<p;++o){for(s=0,l=-m;l<=m;++l)a?(i=f+l,(o+l<0||o+l>=p)&&(i=f)):(i=f+l*p,(n+l<0||n+l>=d)&&(i=f)),s+=r[m+l]*c[i];u[f++]=a?s:s+.5&255}return t},CV.gaussianKernel=function(e){var t,r,a,i,s,n,o=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]],l=[];if(e<=7&&e%2===1)l=o[e>>1];else{for(t=.5*(e-1),r=.8+.3*(t-1),a=-.5/(r*r),i=0,n=0;n<e;++n)s=n-t,i+=l[n]=Math.exp(a*s*s);for(i=1/i,n=0;n<e;++n)l[n]*=i}return l},CV.findContours=function(e,t){var r,a,i,s,n,o,l,c,u,d=e.width,p=e.height,f=[];for(r=CV.binaryBorder(e,t),a=CV.neighborhoodDeltas(d+2),i=d+3,n=1,c=0;c<p;++c,i+=2)for(u=0;u<d;++u,++i)s=r[i],0!==s&&(o=l=!1,1===s&&0===r[i-1]?o=!0:s>=1&&0===r[i+1]&&(l=!0),(o||l)&&(++n,f.push(CV.borderFollowing(r,i,n,{x:u,y:c},l,a))));return f},CV.borderFollowing=function(e,t,r,a,i,s){var n,o,l,c,u,d=[];d.hole=i,c=u=i?0:4;do{if(c=c-1&7,n=t+s[c],0!==e[n])break}while(c!==u);if(c===u)e[t]=-r,d.push({x:a.x,y:a.y});else{o=t,4^c;while(1){u=c;do{l=o+s[++c]}while(0===e[l]);if(c&=7,c-1>>>0<u>>>0?e[o]=-r:1===e[o]&&(e[o]=r),d.push({x:a.x,y:a.y}),c,a.x+=CV.neighborhood[c][0],a.y+=CV.neighborhood[c][1],l===t&&o===n)break;o=l,c=c+4&7}}return d},CV.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],CV.neighborhoodDeltas=function(e){for(var t=[],r=CV.neighborhood.length,a=0;a<r;++a)t[a]=CV.neighborhood[a][0]+CV.neighborhood[a][1]*e;return t.concat(t)},CV.approxPolyDP=function(e,t){var r,a,i,s,n,o,l,c,u,d,p,f={start_index:0,end_index:0},m={start_index:0,end_index:0},h=[],b=[],g=e.length;for(t*=t,p=0,u=0;u<3;++u)for(n=0,p=(p+m.start_index)%g,a=e[p],++p===g&&(p=0),d=1;d<g;++d)r=e[p],++p===g&&(p=0),l=r.x-a.x,c=r.y-a.y,s=l*l+c*c,s>n&&(n=s,m.start_index=d);n<=t?h.push({x:a.x,y:a.y}):(f.start_index=p,f.end_index=m.start_index+=f.start_index,m.start_index-=m.start_index>=g?g:0,m.end_index=f.start_index,m.end_index<m.start_index&&(m.end_index+=g),b.push({start_index:m.start_index,end_index:m.end_index}),b.push({start_index:f.start_index,end_index:f.end_index}));while(0!==b.length){if(f=b.pop(),i=e[f.end_index%g],a=e[p=f.start_index%g],++p===g&&(p=0),f.end_index<=f.start_index+1)o=!0;else{for(n=0,l=i.x-a.x,c=i.y-a.y,u=f.start_index+1;u<f.end_index;++u)r=e[p],++p===g&&(p=0),s=Math.abs((r.y-a.y)*l-(r.x-a.x)*c),s>n&&(n=s,m.start_index=u);o=n*n<=t*(l*l+c*c)}o?h.push({x:a.x,y:a.y}):(m.end_index=f.end_index,f.end_index=m.start_index,b.push({start_index:m.start_index,end_index:m.end_index}),b.push({start_index:f.start_index,end_index:f.end_index}))}return h},CV.warp=function(e,t,r,a){var i,s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k,y,_,S,x,C,q,T=e.data,E=t.data,P=e.width,A=e.height,M=0;for(b=CV.getPerspectiveTransform(r,a-1),g=b[8],v=b[2],w=b[5],C=0;C<a;++C)for(g+=b[7],v+=b[1],w+=b[4],k=g,y=v,_=w,q=0;q<a;++q)k+=b[6],y+=b[0],_+=b[3],S=y/k,x=_/k,i=S>>>0,s=i===P-1?i:i+1,n=S-i,o=1-n,l=x>>>0,c=l===A-1?l:l+1,u=x-l,d=1-u,p=f=l*P,m=h=c*P,E[M++]=d*(o*T[p+i]+n*T[f+s])+u*(o*T[m+i]+n*T[h+s])&255;return t.width=a,t.height=a,t},CV.getPerspectiveTransform=function(e,t){var r=CV.square2quad(e);return r[0]/=t,r[1]/=t,r[3]/=t,r[4]/=t,r[6]/=t,r[7]/=t,r},CV.square2quad=function(e){var t,r,a,i,s,n,o,l=[];return t=e[0].x-e[1].x+e[2].x-e[3].x,r=e[0].y-e[1].y+e[2].y-e[3].y,0===t&&0===r?(l[0]=e[1].x-e[0].x,l[1]=e[2].x-e[1].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y,l[4]=e[2].y-e[1].y,l[5]=e[0].y,l[6]=0,l[7]=0,l[8]=1):(a=e[1].x-e[2].x,i=e[3].x-e[2].x,s=e[1].y-e[2].y,n=e[3].y-e[2].y,o=a*n-i*s,l[6]=(t*n-i*r)/o,l[7]=(a*r-t*s)/o,l[8]=1,l[0]=e[1].x-e[0].x+l[6]*e[1].x,l[1]=e[3].x-e[0].x+l[7]*e[3].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y+l[6]*e[1].y,l[4]=e[3].y-e[0].y+l[7]*e[3].y,l[5]=e[0].y),l},CV.isContourConvex=function(e){var t,r,a,i,s,n,o,l,c=0,u=!0,d=e.length,p=0,f=0;for(r=e[d-1],t=e[0],s=t.x-r.x,n=t.y-r.y;p<d;++p){if(++f===d&&(f=0),r=t,t=e[f],o=t.x-r.x,l=t.y-r.y,a=o*n,i=l*s,c|=i>a?1:i<a?2:3,3===c){u=!1;break}s=o,n=l}return u},CV.perimeter=function(e){for(var t,r,a=e.length,i=0,s=a-1,n=0;i<a;s=i++)t=e[i].x-e[s].x,r=e[i].y-e[s].y,n+=Math.sqrt(t*t+r*r);return n},CV.minEdgeLength=function(e){for(var t,r,a,i=e.length,s=0,n=i-1,o=1/0;s<i;n=s++)r=e[s].x-e[n].x,a=e[s].y-e[n].y,t=r*r+a*a,t<o&&(o=t);return Math.sqrt(o)},CV.countNonZero=function(e,t){var r,a,i=e.data,s=t.height,n=t.width,o=t.x+t.y*e.width,l=e.width-n,c=0;for(r=0;r<s;++r){for(a=0;a<n;++a)0!==i[o++]&&++c;o+=l}return c},CV.binaryBorder=function(e,t){var r,a,i=e.data,s=e.height,n=e.width,o=0,l=0;for(a=-2;a<n;++a)t[l++]=0;for(r=0;r<s;++r){for(t[l++]=0,a=0;a<n;++a)t[l++]=0===i[o++]?0:1;t[l++]=0}for(a=-2;a<n;++a)t[l++]=0;return t};var POS=POS||{};POS.Posit=function(e,t){this.objectPoints=this.buildModel(e),this.focalLength=t,this.objectVectors=[],this.objectNormal=[],this.objectMatrix=[[],[],[]],this.init()},POS.Posit.prototype.buildModel=function(e){var t=e/2;return[[-t,t,0],[t,t,0],[t,-t,0],[-t,-t,0]]},POS.Posit.prototype.init=function(){var e,t=this.objectPoints.length,r=[],a=[],i=0,s=2;for(e=0;e<t;++e)this.objectVectors[e]=[this.objectPoints[e][0]-this.objectPoints[0][0],this.objectPoints[e][1]-this.objectPoints[0][1],this.objectPoints[e][2]-this.objectPoints[0][2]],r[e]=[this.objectVectors[e][0],this.objectVectors[e][1],this.objectVectors[e][2]];while(0===i)a[0]=this.objectVectors[1][1]*this.objectVectors[s][2]-this.objectVectors[1][2]*this.objectVectors[s][1],a[1]=this.objectVectors[1][2]*this.objectVectors[s][0]-this.objectVectors[1][0]*this.objectVectors[s][2],a[2]=this.objectVectors[1][0]*this.objectVectors[s][1]-this.objectVectors[1][1]*this.objectVectors[s][0],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),++s;for(e=0;e<3;++e)this.objectNormal[e]=a[e]/i;POS.pseudoInverse(r,t,this.objectMatrix)},POS.Posit.prototype.pose=function(e){var t,r,a,i,s,n,o=[[],[],[]],l=[[],[],[]],c=[],u=[[],[],[]],d=[[],[],[]],p=[],f=[];for(this.pos(e,o,l,c),a=this.isValid(o,c),t=a?this.iterate(e,o,c,u,p):{euclidean:-1,pixels:-1,maximum:-1},i=this.isValid(l,c),r=i?this.iterate(e,l,c,d,f):{euclidean:-1,pixels:-1,maximum:-1},s=0;s<3;++s)for(n=0;n<3;++n)a&&(p[s]-=u[s][n]*this.objectPoints[0][n]),i&&(f[s]-=d[s][n]*this.objectPoints[0][n]);return t.euclidean<r.euclidean?new POS.Pose(t.pixels,u,p,r.pixels,d,f):new POS.Pose(r.pixels,d,f,t.pixels,u,p)},POS.Posit.prototype.pos=function(e,t,r,a){var i,s,n,o,l,c,u,d,p,f,m=this.objectPoints.length,h=[],b=[],g=[],v=[],w=[],k=[],y=[],_=[];for(p=0;p<m;++p)h[p]=[e[p].x-e[0].x,e[p].y-e[0].y];for(p=0;p<3;++p)for(b[p]=0,g[p]=0,f=0;f<m;++f)b[p]+=this.objectMatrix[p][f]*h[f][0],g[p]+=this.objectMatrix[p][f]*h[f][1];for(i=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],s=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],n=b[0]*g[0]+b[1]*g[1]+b[2]*g[2],o=(s-i)*(s-i)+n*n*4,l=s-i>=0?(s-i+Math.sqrt(o))/2:(s-i-Math.sqrt(o))/2,l>=0?(c=Math.sqrt(l),u=0===c?0:-n/c):(c=Math.sqrt(-n*n/l),u=0===c?Math.sqrt(i-s):-n/c),p=0;p<3;++p)v[p]=b[p]+c*this.objectNormal[p],w[p]=g[p]+u*this.objectNormal[p];for(d=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]),p=0;p<3;++p)k[p]=v[p]/d,y[p]=w[p]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],p=0;p<3;++p)t[0][p]=k[p],t[1][p]=y[p],t[2][p]=_[p];for(p=0;p<3;++p)v[p]=b[p]-c*this.objectNormal[p],w[p]=g[p]-u*this.objectNormal[p];for(p=0;p<3;++p)k[p]=v[p]/d,y[p]=w[p]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],p=0;p<3;++p)r[0][p]=k[p],r[1][p]=y[p],r[2][p]=_[p];a[0]=e[0].x/d,a[1]=e[0].y/d,a[2]=this.focalLength/d},POS.Posit.prototype.isValid=function(e,t){for(var r,a=this.objectPoints.length,i=1/0,s=0;s<a;++s)r=t[2]+(e[2][0]*this.objectVectors[s][0]+e[2][1]*this.objectVectors[s][1]+e[2][2]*this.objectVectors[s][2]),r<i&&(i=r);return i>=0},POS.Posit.prototype.iterate=function(e,t,r,a,i){var s,n,o,l,c,u,d,p,f,m=this.objectPoints.length,h=[],b=[],g=[[],[],[]],v=[[],[],[]],w=[],k=[],y=!1,_=0;for(p=0;p<m;++p)h[p]={x:e[p].x,y:e[p].y};for(p=0;p<3;++p){for(f=0;f<3;++f)a[p][f]=t[p][f];i[p]=r[p]}for(p=0;p<m;++p){for(o=0,f=0;f<3;++f)o+=this.objectVectors[p][f]*a[2][f]/i[2];b[p]={x:(1+o)*e[p].x,y:(1+o)*e[p].y}}for(n=0,p=0;p<m;++p)n+=Math.abs(b[p].x-h[p].x),n+=Math.abs(b[p].y-h[p].y);for(p=0;p<3;++p)w[p]=i[p]-(a[p][0]*this.objectPoints[0][0]+a[p][1]*this.objectPoints[0][1]+a[p][2]*this.objectPoints[0][2]);l=c=this.error(e,a,w),y=0===c.pixels||n<.01;while(_++<100&&!y){for(p=0;p<m;++p)h[p].x=b[p].x,h[p].y=b[p].y;for(this.pos(b,g,v,i),p=0;p<3;++p)w[p]=i[p]-(g[p][0]*this.objectPoints[0][0]+g[p][1]*this.objectPoints[0][1]+g[p][2]*this.objectPoints[0][2]),k[p]=i[p]-(v[p][0]*this.objectPoints[0][0]+v[p][1]*this.objectPoints[0][1]+v[p][2]*this.objectPoints[0][2]);if(c=this.error(e,g,w),u=this.error(e,v,k),c.euclidean>=0&&u.euclidean>=0)if(u.euclidean<c.euclidean)for(l=u,p=0;p<3;++p)for(f=0;f<3;++f)a[p][f]=v[p][f];else for(l=c,p=0;p<3;++p)for(f=0;f<3;++f)a[p][f]=g[p][f];if(c.euclidean<0&&u.euclidean>=0)for(l=u,p=0;p<3;++p)for(f=0;f<3;++f)a[p][f]=v[p][f];if(u.euclidean<0&&c.euclidean>=0)for(l=c,p=0;p<3;++p)for(f=0;f<3;++f)a[p][f]=g[p][f];for(p=0;p<m;++p){for(o=0,f=0;f<3;++f)o+=this.objectVectors[p][f]*a[2][f]/i[2];b[p].x=(1+o)*e[p].x,b[p].y=(1+o)*e[p].y}for(s=n,n=0,p=0;p<m;++p)n+=Math.abs(b[p].x-h[p].x),n+=Math.abs(b[p].y-h[p].y);d=Math.abs(n-s),y=0===l.pixels||d<.01}return l},POS.Posit.prototype.error=function(e,t,r){var a,i,s,n=this.objectPoints.length,o=[],l=[],c=[],u=0,d=0,p=0;if(!this.isValid(t,r))return{euclidean:-1,pixels:-1,maximum:-1};for(a=0;a<n;++a)for(o[a]=[],i=0;i<3;++i)o[a][i]=r[i];for(a=0;a<n;++a)for(i=0;i<3;++i)for(s=0;s<3;++s)o[a][i]+=t[i][s]*this.objectPoints[a][s];for(a=0;a<n;++a)for(l[a]=[],i=0;i<2;++i)l[a][i]=this.focalLength*o[a][i]/o[a][2];for(a=0;a<n;++a)c[a]=[l[a][0]-e[a].x,l[a][1]-e[a].y];for(a=0;a<n;++a)u+=Math.sqrt(c[a][0]*c[a][0]+c[a][1]*c[a][1]),d+=Math.abs(Math.round(l[a][0])-Math.round(e[a].x))+Math.abs(Math.round(l[a][1])-Math.round(e[a].y)),Math.abs(c[a][0])>p&&(p=Math.abs(c[a][0])),Math.abs(c[a][1])>p&&(p=Math.abs(c[a][1]));return{euclidean:u/n,pixels:d,maximum:p}},POS.pseudoInverse=function(e,t,r){var a,i,s,n=[],o=[[],[],[]],l=[[],[],[]],c=0,u=0;for(SVD.svdcmp(e,t,3,n,o),a=0;a<3;++a)n[a]>c&&(c=n[a]);for(c*=.01,a=0;a<3;++a)n[a]<c&&(n[a]=0);for(i=0;i<3;++i)if(0===n[i])for(++u,s=i;s<2;++s){for(a=0;a<t;++a)e[a][s]=e[a][s+1];for(a=0;a<3;++a)o[a][s]=o[a][s+1]}for(i=0;i<2;++i)0===n[i]&&(n[i]=n[i+1]);for(a=0;a<3;++a)for(i=0;i<3-u;++i)l[a][i]=o[a][i]/n[i];for(a=0;a<3;++a)for(i=0;i<t;++i)for(r[a][i]=0,s=0;s<3-u;++s)r[a][i]+=l[a][s]*e[i][s]},POS.Pose=function(e,t,r,a,i,s){this.bestError=e,this.bestRotation=t,this.bestTranslation=r,this.alternativeError=a,this.alternativeRotation=i,this.alternativeTranslation=s};var SVD=SVD||{};SVD.svdcmp=function(e,t,r,a,i){var s,n,o,l,c,u,d,p,f,m,h,b,g,v,w,k=0,y=0,_=0,S=[];for(n=0;n<r;++n){if(d=n+1,S[n]=_*y,y=b=_=0,n<t){for(u=n;u<t;++u)_+=Math.abs(e[u][n]);if(0!==_){for(u=n;u<t;++u)e[u][n]/=_,b+=e[u][n]*e[u][n];for(m=e[n][n],y=-SVD.sign(Math.sqrt(b),m),h=m*y-b,e[n][n]=m-y,l=d;l<r;++l){for(b=0,u=n;u<t;++u)b+=e[u][n]*e[u][l];for(m=b/h,u=n;u<t;++u)e[u][l]+=m*e[u][n]}for(u=n;u<t;++u)e[u][n]*=_}}if(a[n]=_*y,y=b=_=0,n<t&&n!==r-1){for(u=d;u<r;++u)_+=Math.abs(e[n][u]);if(0!==_){for(u=d;u<r;++u)e[n][u]/=_,b+=e[n][u]*e[n][u];for(m=e[n][d],y=-SVD.sign(Math.sqrt(b),m),h=m*y-b,e[n][d]=m-y,u=d;u<r;++u)S[u]=e[n][u]/h;for(l=d;l<t;++l){for(b=0,u=d;u<r;++u)b+=e[l][u]*e[n][u];for(u=d;u<r;++u)e[l][u]+=b*S[u]}for(u=d;u<r;++u)e[n][u]*=_}}k=Math.max(k,Math.abs(a[n])+Math.abs(S[n]))}for(n=r-1;n>=0;--n){if(n<r-1){if(0!==y){for(l=d;l<r;++l)i[l][n]=e[n][l]/e[n][d]/y;for(l=d;l<r;++l){for(b=0,u=d;u<r;++u)b+=e[n][u]*i[u][l];for(u=d;u<r;++u)i[u][l]+=b*i[u][n]}}for(l=d;l<r;++l)i[n][l]=i[l][n]=0}i[n][n]=1,y=S[n],d=n}for(n=Math.min(r,t)-1;n>=0;--n){for(d=n+1,y=a[n],l=d;l<r;++l)e[n][l]=0;if(0!==y){for(y=1/y,l=d;l<r;++l){for(b=0,u=d;u<t;++u)b+=e[u][n]*e[u][l];for(m=b/e[n][n]*y,u=n;u<t;++u)e[u][l]+=m*e[u][n]}for(l=n;l<t;++l)e[l][n]*=y}else for(l=n;l<t;++l)e[l][n]=0;++e[n][n]}for(u=r-1;u>=0;--u)for(o=1;o<=30;++o){for(s=!0,d=u;d>=0;--d){if(p=d-1,Math.abs(S[d])+k===k){s=!1;break}if(Math.abs(a[p])+k===k)break}if(s)for(f=0,b=1,n=d;n<=u;++n){if(m=b*S[n],Math.abs(m)+k===k)break;for(y=a[n],h=SVD.pythag(m,y),a[n]=h,h=1/h,f=y*h,b=-m*h,l=1;l<=t;++l)v=e[l][p],w=e[l][n],e[l][p]=v*f+w*b,e[l][n]=w*f-v*b}if(w=a[u],d===u){if(w<0)for(a[u]=-w,l=0;l<r;++l)i[l][u]=-i[l][u];break}if(30===o)return!1;for(g=a[d],p=u-1,v=a[p],y=S[p],h=S[u],m=((v-w)*(v+w)+(y-h)*(y+h))/(2*h*v),y=SVD.pythag(m,1),m=((g-w)*(g+w)+h*(v/(m+SVD.sign(y,m))-h))/g,f=b=1,l=d;l<=p;++l){for(n=l+1,y=S[n],v=a[n],h=b*y,y*=f,w=SVD.pythag(m,h),S[l]=w,f=m/w,b=h/w,m=g*f+y*b,y=y*f-g*b,h=v*b,v*=f,c=0;c<r;++c)g=i[c][l],w=i[c][n],i[c][l]=g*f+w*b,i[c][n]=w*f-g*b;for(w=SVD.pythag(m,h),a[l]=w,0!==w&&(w=1/w,f=m*w,b=h*w),m=f*y+b*v,g=f*v-b*y,c=0;c<t;++c)v=e[c][l],w=e[c][n],e[c][l]=v*f+w*b,e[c][n]=w*f-v*b}S[d]=0,S[u]=m,a[u]=g}return!0},SVD.pythag=function(e,t){var r,a=Math.abs(e),i=Math.abs(t);return a>i?(r=i/a,a*Math.sqrt(1+r*r)):0===i?0:(r=a/i,i*Math.sqrt(1+r*r))},SVD.sign=function(e,t){return t>=0?Math.abs(e):-Math.abs(e)};var THREEx=THREEx||{};THREEx.ArucoContext=function(e){e=e||{},this.parameters={debug:void 0!==e.debug&&e.debug,canvasWidth:void 0!==e.canvasWidth?e.canvasWidth:640,canvasHeight:void 0!==e.canvasHeight?e.canvasHeight:480},this.canvas=document.createElement("canvas"),this.detector=new AR.Detector,this.debug=null,1==e.debug&&(this.debug=new THREEx.ArucoDebug(this)),this.setSize(this.parameters.canvasWidth,this.parameters.canvasHeight)},THREEx.ArucoContext.prototype.setSize=function(e,t){this.canvas.width=e,this.canvas.height=t,null!==this.debug&&this.debug.setSize(e,t)},THREEx.ArucoContext.prototype.detect=function(e){var t=this.canvas,r=t.getContext("2d");r.drawImage(e,0,0,t.width,t.height);var a=r.getImageData(0,0,t.width,t.height),i=this.detector.detect(a);return i},THREEx.ArucoContext.prototype.updateObject3D=function(e,t,r,a){for(var i=a.corners,s=this.canvas,n=new Array(i.length),o=0;o<i.length;++o){var l=i[o];n[o]={x:l.x-s.width/2,y:-l.y+s.height/2}}var c=t.pose(n),u=c.bestRotation,d=c.bestTranslation;e.position.x=d[0],e.position.y=d[1],e.position.z=-d[2],e.rotation.x=-Math.asin(-u[1][2]),e.rotation.y=-Math.atan2(u[0][2],u[2][2]),e.rotation.z=Math.atan2(u[1][0],u[1][1]),e.scale.x=r,e.scale.y=r,e.scale.z=r};var THREEx=THREEx||{};AR.Detector.prototype.detect=function(e){var t=this.datGUIOptions;return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,t.adaptativeThreshold.kernelSize,t.adaptativeThreshold.threshold),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,e.width*t.candidates.minSize,t.candidates.epsilon,t.candidates.minLength),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,t.notTooNear.minDist),this.findMarkers(this.grey,this.candidates,t.findMarkers.warpSize)},AR.Detector.prototype.datGUIOptions={adaptativeThreshold:{kernelSize:2,threshold:7},candidates:{minSize:.2,epsilon:.05,minLength:10},notTooNear:{minDist:10},findMarkers:{warpSize:49}},THREEx.addArucoDatGui=function(e,t){e.detector.datGUIOptions;var r={resolution:"640x480"},a=function(){var t=r.resolution.match(/(\d+)x(\d+)/),a=parseInt(t[1]),i=parseInt(t[2]);e.setSize(a,i)};a(),t.add(r,"resolution",["320x240","640x480"]).onChange(a);var i=t.addFolder("Adaptative Threshold");i.open(),i.add(e.detector.datGUIOptions.adaptativeThreshold,"kernelSize").min(0).step(1).onChange(a),i.add(e.detector.datGUIOptions.adaptativeThreshold,"threshold").min(0).step(1).onChange(a);i=t.addFolder("Candidates");i.open(),i.add(e.detector.datGUIOptions.candidates,"minSize").min(0).max(1).onChange(a),i.add(e.detector.datGUIOptions.candidates,"epsilon").min(0).onChange(a),i.add(e.detector.datGUIOptions.candidates,"minLength").min(0).step(1).onChange(a);i=t.addFolder("notTooNear");i.open(),i.add(e.detector.datGUIOptions.notTooNear,"minDist").min(0).step(1).onChange(a);i=t.addFolder("findMarkers");i.open(),i.add(e.detector.datGUIOptions.findMarkers,"warpSize").min(0).step(1).onChange(a)};var THREEx=THREEx||{};THREEx.ArucoDebug=function(e){this.arucoContext=e,this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.arucoContext.canvas.width,this.canvasElement.height=this.arucoContext.canvas.height},THREEx.ArucoDebug.prototype.setSize=function(e,t){this.canvasElement.width!==e&&(this.canvasElement.width=e),this.canvasElement.height!==t&&(this.canvasElement.height=t)},THREEx.ArucoDebug.prototype.clear=function(){var e=this.canvasElement,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},THREEx.ArucoDebug.prototype.drawContoursContours=function(){var e=this.arucoContext.detector.contours,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(e){return e?"magenta":"blue"}))},THREEx.ArucoDebug.prototype.drawContoursPolys=function(){var e=this.arucoContext.detector.polys,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"green"}))},THREEx.ArucoDebug.prototype.drawContoursCandidates=function(){var e=this.arucoContext.detector.candidates,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"red"}))},THREEx.ArucoDebug.prototype.drawContours=function(e,t,r,a,i,s){var n,o,l,c=e.length,u=this.canvasElement,d=u.getContext("2d");d.save();while(c--){for(o=e[c],d.strokeStyle=s(o.hole),d.beginPath(),n=0;n<o.length;++n)l=o[n],d.moveTo(t+l.x,r+l.y),l=o[(n+1)%o.length],d.lineTo(t+l.x,r+l.y);d.stroke(),d.closePath()}d.restore()},THREEx.ArucoDebug.prototype.drawDetectorGrey=function(){var e=arucoContext.detector.grey;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawDetectorThreshold=function(){var e=arucoContext.detector.thres;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawCVImage=function(e){this.arucoContext.detector;var t=this.canvasElement,r=t.getContext("2d"),a=r.createImageData(t.width,t.height);this.copyCVImage2ImageData(e,a),r.putImageData(a,0,0)},THREEx.ArucoDebug.prototype.copyCVImage2ImageData=function(e,t){var r=e.data.length,a=4*r+3;while(r--)t.data[a-=4]=255,t.data[a-1]=t.data[a-2]=t.data[a-3]=e.data[r];return t},THREEx.ArucoDebug.prototype.drawVideo=function(e){var t=this.canvasElement,r=t.getContext("2d");r.drawImage(e,0,0,t.width,t.height)},THREEx.ArucoDebug.prototype.drawMarkerIDs=function(e){var t,r,a,i,s,n,o=this.canvasElement,l=o.getContext("2d");for(l.save(),l.strokeStyle="blue",l.lineWidth=1,s=0;s!==e.length;++s){for(t=e[s].corners,a=1/0,i=1/0,n=0;n!==t.length;++n)r=t[n],a=Math.min(a,r.x),i=Math.min(i,r.y);l.strokeText(e[s].id,a,i)}l.restore()},THREEx.ArucoDebug.prototype.drawMarkerCorners=function(e){var t,r,a,i,s=this.canvasElement,n=s.getContext("2d");for(n.save(),n.lineWidth=3,a=0;a<e.length;++a){for(t=e[a].corners,n.strokeStyle="red",n.beginPath(),i=0;i<t.length;++i)r=t[i],n.moveTo(r.x,r.y),r=t[(i+1)%t.length],n.lineTo(r.x,r.y);n.stroke(),n.closePath(),n.strokeStyle="green",n.strokeRect(t[0].x-2,t[0].y-2,4,4)}n.restore()};var THREEx=THREEx||{};THREEx.ArucoMarkerGenerator=function(){},THREEx.ArucoMarkerGenerator.createSVG=function(e,t){var r=document.createElement("div");return r.innerHTML=new ArucoMarker(e).toSVG(t),r},THREEx.ArucoMarkerGenerator.createImage=function(e,t){var r=this.createCanvas(e,t),a=r.toDataURL(),i=document.createElement("img");return i.src=a,i},THREEx.ArucoMarkerGenerator.createCanvas=function(e,t){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=t,r.height=t;var i=new ArucoMarker(e),s=i.markerMatrix(),n=.1*r.width,o=t-2*n,l=o/7;a.fillStyle="white",a.fillRect(0,0,r.width,r.height),a.fillStyle="black",a.fillRect(n,n,r.width-2*n,r.height-2*n);for(var c=0;c<5;c++)for(var u=0;u<5;u++)1===s[u][c]&&(a.fillStyle="white",a.fillRect(n+(u+1)*l,n+(c+1)*l,l+1,l+1));return r};var THREE=THREE||__webpack_require__("5a89");THREE.WebAR={},THREE.WebAR.MAX_FLOAT32_VALUE=34028e34,THREE.WebAR.VRPointCloud=function(e){this._vrDisplay=e,this._numberOfPointsInLastPointCloud=0,this._bufferGeometry=new THREE.BufferGeometry,this._bufferGeometry.frustumCulled=!1;var t=null;e?(this._pointCloud=new VRPointCloud,e.getPointCloud(this._pointCloud,!1,0,!1),t=this._pointCloud.points):t=new Float32Array([-1,1,-2,1,1,-2,1,-1,-2,-1,-1,-2]);for(var r=new Float32Array(t.length),a=new THREE.Color,i=0;i<r.length;i+=3)e&&(t[i]=THREE.WebAR.MAX_FLOAT32_VALUE,t[i+1]=THREE.WebAR.MAX_FLOAT32_VALUE,t[i+2]=THREE.WebAR.MAX_FLOAT32_VALUE),a.setRGB(1,1,1),r[i]=a.r,r[i+1]=a.g,r[i+2]=a.b;return this._positions=new THREE.BufferAttribute(t,3),this._bufferGeometry.addAttribute("position",this._positions),this._colors=new THREE.BufferAttribute(r,3),this._bufferGeometry.addAttribute("color",this._colors),this._bufferGeometry.computeBoundingSphere(),this},THREE.WebAR.VRPointCloud.prototype.getBufferGeometry=function(){return this._bufferGeometry},THREE.WebAR.VRPointCloud.prototype.update=function(e,t,r){this._vrDisplay&&(this._vrDisplay.getPointCloud(this._pointCloud,!e,"number"===typeof t?t:0,!!r),e&&this._pointCloud.numberOfPoints>0&&(this._positions.needsUpdate=!0))},THREE.WebAR.getIndexFromOrientation=function(e){var t=0;switch(e){case 90:t=1;break;case 180:t=2;break;case 270:t=3;break;default:t=0;break}return t},THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations=function(e){var t=screen.orientation.angle,r=e?e.getSeeThroughCamera():null,a=r?r.orientation:0,i=THREE.WebAR.getIndexFromOrientation(a),s=THREE.WebAR.getIndexFromOrientation(t);return ret=s-i,ret<0&&(ret+=4),ret%4},THREE.WebAR.createVRSeeThroughCameraMesh=function(e,t){var r=new THREE.BufferGeometry;if(e){var a=e.getSeeThroughCamera();if(!a)throw"ERROR: Could not get the see through camera!";n=a,n.readyState=2,n.HAVE_CURRENT_DATA=2;var i=a.width/a.textureWidth,s=a.height/a.textureHeight;r.WebAR_textureCoords=[new Float32Array([0,0,0,s,i,0,i,s]),new Float32Array([i,0,0,0,i,s,0,s]),new Float32Array([i,s,i,0,0,s,0,0]),new Float32Array([0,s,i,s,0,0,i,0])]}else{var n=document.createElement("video");n.src="string"===typeof t?t:"../../resources/videos/sintel.webm",n.play(),r.WebAR_textureCoords=[new Float32Array([0,0,0,1,1,0,1,1]),new Float32Array([1,0,0,0,1,1,0,1]),new Float32Array([1,1,1,0,0,1,0,0]),new Float32Array([0,1,1,1,0,0,1,0])]}r.addAttribute("position",new THREE.BufferAttribute(new Float32Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]),3)),r.setIndex(new THREE.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),r.WebAR_textureCoordIndex=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);var o=r.WebAR_textureCoords[r.WebAR_textureCoordIndex];r.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(o),2)),r.computeBoundingSphere();var l,c=new THREE.VideoTexture(n);if(c.minFilter=THREE.NearestFilter,c.magFilter=THREE.NearestFilter,c.format=THREE.RGBFormat,c.flipY=!1,e){var u=["attribute vec3 position;","attribute vec2 uv;","","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","","varying vec2 vUV;","","void main(void) {","    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","    vUV = uv;","}"],d=["#extension GL_OES_EGL_image_external : require","precision mediump float;","","varying vec2 vUV;","","uniform samplerExternalOES map;","","void main(void) {","   gl_FragColor = texture2D(map, vUV);","}"];l=new THREE.RawShaderMaterial({uniforms:{map:{type:"t",value:c}},vertexShader:u.join("\r\n"),fragmentShader:d.join("\r\n"),side:THREE.DoubleSide})}else l=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:c});var p=new THREE.Mesh(r,l);return p},THREE.WebAR.updateCameraMeshOrientation=function(e,t){var r=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);if(r!=t.geometry.WebAR_textureCoordIndex){var a=t.geometry.getAttribute("uv"),i=t.geometry.WebAR_textureCoords[r];t.geometry.WebAR_textureCoordIndex=r;for(var s=0;s<a.length;s++)a.array[s]=i[s];a.needsUpdate=!0}},THREE.WebAR.createVRSeeThroughCamera=function(e,t,r){var a=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,t,r);return e&&THREE.WebAR.resizeVRSeeThroughCamera(e,a),a},THREE.WebAR.resizeVRSeeThroughCamera=function(e,t){if(t.aspect=window.innerWidth/window.innerHeight,e){var r=window.innerWidth>window.innerHeight,a=e.getSeeThroughCamera();if(a){var i=a.width>a.height,s=!(r&&i),n=s?a.height:a.width,o=s?a.width:a.height,l=s?a.focalLengthY:a.focalLengthX,c=s?a.focalLengthX:a.focalLengthY,u=s?a.pointY:a.pointX,d=s?a.pointX:a.pointY,p=t.near/l,f=t.near/c,m=(u-n/2)*p,h=-(d-o/2)*f,b=p*-n/2-m,g=p*n/2-m,v=f*-o/2-h,w=f*o/2-h;t.projectionMatrix.makePerspective(b,g,w,v,t.near,t.far),t.fov=2*THREE.Math.radToDeg(Math.atan(w*t.zoom/t.near))}}else t.updateProjectionMatrix()},THREE.WebAR._worldUp=new THREE.Vector3(0,1,0),THREE.WebAR._normalY=new THREE.Vector3,THREE.WebAR._normalZ=new THREE.Vector3,THREE.WebAR._rotationMatrix=new THREE.Matrix4,THREE.WebAR._planeNormal=new THREE.Vector3,THREE.WebAR.rotateObject3D=function(e,t,r){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown normal1 type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}if(t instanceof THREE.Vector3||t instanceof THREE.Vector4)THREE.WebAR._normalZ.set(t.x,t.y,t.z);else{if(!(e instanceof Float32Array))throw"Unknown normal2 type.";THREE.WebAR._normalZ.set(t[0],t[1],t[2])}THREE.WebAR._normalY.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalZ).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalZ.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalY.z,r.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.rotateObject3DWithPickingPlane=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown plane type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}THREE.WebAR._normalY.set(0,1,0);var r=.5;Math.abs(THREE.WebAR._planeNormal.dot(THREE.WebAR._worldUp))>r&&THREE.WebAR._normalY.set(0,0,1),THREE.WebAR._normalZ.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalY).normalize(),THREE.WebAR._normalY.crossVectors(THREE.WebAR._normalZ,THREE.WebAR._planeNormal).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalY.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalZ.z,t.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.positionObject3DWithPickingPoint=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)t.position.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown point type.";t.position.set(e[0],e[1],e[2])}},THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud=function(e,t,r){THREE.WebAR.rotateObject3DWithPickingPlane(e.plane,t),THREE.WebAR.positionObject3DWithPickingPoint(e.point,t),t.position.add(THREE.WebAR._planeNormal.multiplyScalar(r))},THREE.WebAR.positionAndRotateObject3D=function(e,t,r,a,i){THREE.WebAR.rotateObject3D(t,r,a),THREE.WebAR.positionObject3DWithPickingPoint(e,a),a.position.add(THREE.WebAR._planeNormal.multiplyScalar(i))},function(e){function t(e,t,r,a,i){this._listener=t,this._isOnce=r,this.context=a,this._signal=e,this._priority=i||0}function r(e,t){if("function"!==typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}var a={VERSION:"0.7.4"};t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},a.Signal=function(){this._bindings=[],this._prevParams=null},a.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,r,a,i){var s=this._indexOfListener(e,a);if(-1!==s){if(e=this._bindings[s],e.isOnce()!==r)throw Error("You cannot add"+(r?"":"Once")+"() then add"+(r?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,r,a,i),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var r,a=this._bindings.length;a--;)if(r=this._bindings[a],r._listener===e&&r.context===t)return a;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,a){return r(e,"add"),this._registerListener(e,!1,t,a)},addOnce:function(e,t,a){return r(e,"addOnce"),this._registerListener(e,!0,t,a)},remove:function(e,t){r(e,"remove");var a=this._indexOfListener(e,t);return-1!==a&&(this._bindings[a]._destroy(),this._bindings.splice(a,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,r=Array.prototype.slice.call(arguments),a=this._bindings.length;if(this.memorize&&(this._prevParams=r),a){t=this._bindings.slice(),this._shouldPropagate=!0;do{a--}while(t[a]&&this._shouldPropagate&&!1!==t[a].execute(r))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function(e){this.id=THREEx.ArBaseControls.id++,this.object3d=e,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(e){this._sourceElement=e;var t=parseInt(e.style.width),r=parseInt(e.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,t/r,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var e=this._sourceElement,t=this._cameraPicking,r=parseInt(e.style.width),a=parseInt(e.style.height);t.aspect=r/a,t.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(e,t){var r=this._sourceElement,a=this._cameraPicking,i=new THREE.Vector3;i.x=e.layerX/parseInt(r.style.width)*2-1,i.y=-e.layerY/parseInt(r.style.height)*2+1;var s=new THREE.Raycaster;s.setFromCamera(i,a);var n=s.intersectObjects(t);return n},THREEx.ARClickability.prototype.update=function(){},THREEx.ARClickability.tangoPickingPointCloud=function(e,t,r){var a=e._tangoContext.vrDisplay;if(null===a)return null;var i=a.getPickingPointAndPlaneInPointCloud(t,r);if(null==i)return console.warn("Could not retrieve the correct point and plane."),null;var s=.01,n=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(i,n,s),n.rotateZ(-Math.PI/2);var o={};return o.position=n.position,o.quaternion=n.quaternion,o};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(e){var t=!0,r=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),a=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:e},opacity:{value:.5}},defines:{updateInShaderEnabled:t?1:0}}),i=new THREE.Mesh(r,a);i.rotation.x=-Math.PI/2,this.object3d=i;for(var s=-.65,n=.65,o=.75,l=1.05,c=[[]],u=0;u<i.geometry.faces.length;u++)c[0][u]=[],c[0][u][0]=new THREE.Vector2,c[0][u][1]=new THREE.Vector2,c[0][u][2]=new THREE.Vector2;for(var d=0;d<i.geometry.parameters.heightSegments/2;d++)c[0][4*d+0][0].set(s/2+.5,l/2+.5),c[0][4*d+0][1].set(s/2+.5,o/2+.5),c[0][4*d+0][2].set(n/2+.5,l/2+.5),c[0][4*d+1][0].set(s/2+.5,o/2+.5),c[0][4*d+1][1].set(n/2+.5,o/2+.5),c[0][4*d+1][2].set(n/2+.5,l/2+.5),c[0][4*d+2][0].set(s/2+.5,o/2+.5),c[0][4*d+2][1].set(s/2+.5,l/2+.5),c[0][4*d+2][2].set(n/2+.5,o/2+.5),c[0][4*d+3][0].set(s/2+.5,l/2+.5),c[0][4*d+3][1].set(n/2+.5,l/2+.5),c[0][4*d+3][2].set(n/2+.5,o/2+.5);!0===t&&(i.geometry.faceVertexUvs=c,i.geometry.uvsNeedUpdate=!0);var p=[];p.push(new THREE.Vector3(s,l,0)),p.push(new THREE.Vector3(n,l,0)),p.push(new THREE.Vector3(s,o,0)),p.push(new THREE.Vector3(n,o,0));a=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),r=new THREE.PlaneGeometry(1,1);var f=new THREE.Mesh(r,a);return this.orthoMesh=f,void(this.update=function(e,r){h(e,r),!1===t&&m(e,r)});function m(e,t){var r=new THREE.Vector3;c[0].forEach((function(a,s){a.forEach((function(a,n){r.x=2*a.x-1,r.y=2*a.y-1,r.z=0,r.applyMatrix4(e),r.applyMatrix4(t),r.x/=r.z,r.y/=r.z,r.x=r.x/2+.5,r.y=r.y/2+.5,i.geometry.faceVertexUvs[0][s][n].set(r.x,r.y)}))})),i.geometry.uvsNeedUpdate=!0}function h(e,t){var r=[];p.forEach((function(a,i){var s=a.clone();s.applyMatrix4(e),s.applyMatrix4(t),s.x/=s.z,s.y/=s.z,r.push(s)}));for(var a=0;a<r.length;a++)f.geometry.vertices[a].copy(r[a]);f.geometry.computeBoundingSphere(),f.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction="\n        vec2 transformUvToMarkerSpace(vec2 originalUv){\n                vec3 transformedUv;\n                // set transformedUv - from UV coord to clip coord\n                transformedUv.x = originalUv.x * 2.0 - 1.0;\n                transformedUv.y = originalUv.y * 2.0 - 1.0;\n                transformedUv.z = 0.0;\n\n\t\t// apply modelViewMatrix and projectionMatrix\n                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;\n\n\t\t// apply perspective\n\t\ttransformedUv.x /= transformedUv.z;\n\t\ttransformedUv.y /= transformedUv.z;\n\n                // set back from clip coord to Uv coord\n                transformedUv.x = transformedUv.x / 2.0 + 0.5;\n                transformedUv.y = transformedUv.y / 2.0 + 0.5;\n\n                // return the result\n                return transformedUv.xy;\n        }",THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+"\tvarying vec2 vUv;\n\n\tvoid main(){\n                // pass the UV to the fragment\n                #if (updateInShaderEnabled == 1)\n\t\t        vUv = transformUvToMarkerSpace(uv);\n                #else\n\t\t        vUv = uv;\n                #endif\n\n                // compute gl_Position\n\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}",THREEx.ArMarkerCloak.fragmentShader="\n\tvarying vec2 vUv;\n\tuniform sampler2D texture;\n\tuniform float opacity;\n\n\tvoid main(void){\n\t\tvec3 color = texture2D( texture, vUv ).rgb;\n\n\t\tgl_FragColor = vec4( color, opacity);\n\t}";var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function(e,t,r){var a=this;THREEx.ArBaseControls.call(this,t),this.context=e,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6};var i=["pattern","barcode","unknown"];console.assert(-1!==i.indexOf(this.parameters.type),"illegal value",this.parameters.type);i=["modelViewMatrix","cameraTransformMatrix"];function s(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var i=a.parameters[t];void 0!==i?a.parameters[t]=r:console.warn("THREEx.ArMarkerControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArMarkerControls: '"+t+"' parameter is undefined.")}}console.assert(-1!==i.indexOf(this.parameters.changeMatrixMode),"illegal value",this.parameters.changeMatrixMode),this.object3d=t,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,s(r),e.addMarker(this),"artoolkit"===a.context.parameters.trackingBackend?this._initArtoolkit():"aruco"===a.context.parameters.trackingBackend?this._arucoPosit=new POS.Posit(this.parameters.size,a.context.arucoContext.canvas.width):"tango"===a.context.parameters.trackingBackend?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function(e){var t=this.object3d;if(t.visible=!0,"artoolkit"===this.context.parameters.trackingBackend){var r=(new THREE.Matrix4).copy(this.context._artoolkitProjectionAxisTransformMatrix);r.multiply(e),e.copy(r)}else"aruco"===this.context.parameters.trackingBackend||"tango"===this.context.parameters.trackingBackend||console.assert(!1);if("tango"!==this.context.parameters.trackingBackend){var a=(new THREE.Matrix4).makeRotationX(Math.PI/2);e.multiply(a)}"modelViewMatrix"===this.parameters.changeMatrixMode?t.matrix.copy(e):"cameraTransformMatrix"===this.parameters.changeMatrixMode?t.matrix.getInverse(e):console.assert(!1),t.matrix.decompose(t.position,t.quaternion,t.scale),this.dispatchEvent({type:"markerFound"})},ARjs.MarkerControls.prototype.name=function(){var e="";if(e+=this.parameters.type,"pattern"===this.parameters.type){var t=this.parameters.patternUrl,r=t.replace(/^.*\//g,"");e+=" - "+r}else"barcode"===this.parameters.type?e+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return e},ARjs.MarkerControls.prototype._initArtoolkit=function(){var e=this,t=null,r=setInterval((function(){var t=e.context.arController;null!==t&&(clearInterval(r),r=null,a())}),20);return;function a(){var r=e.context.arController;console.assert(null!==r),"pattern"===e.parameters.type?r.loadMarker(e.parameters.patternUrl,(function(a){t=a,r.trackPatternMarkerId(t,e.parameters.size)})):"barcode"===e.parameters.type?(t=e.parameters.barcodeValue,r.trackBarcodeMarkerId(t,e.parameters.size)):"unknown"===e.parameters.type?t=null:console.log(!1,"invalid marker type",e.parameters.type),r.addEventListener("getMarker",(function(r){if(r.data.type===artoolkit.PATTERN_MARKER&&"pattern"===e.parameters.type){if(null===t)return;r.data.marker.idPatt===t&&i(r)}else if(r.data.type===artoolkit.BARCODE_MARKER&&"barcode"===e.parameters.type){if(null===t)return;r.data.marker.idMatrix===t&&i(r)}else r.data.type===artoolkit.UNKNOWN_MARKER&&"unknown"===e.parameters.type&&i(r)}))}function i(t){if(!(t.data.type===artoolkit.PATTERN_MARKER&&t.data.marker.cfPatt<e.parameters.minConfidence)&&!(t.data.type===artoolkit.BARCODE_MARKER&&t.data.marker.cfMatt<e.parameters.minConfidence)){var r=(new THREE.Matrix4).fromArray(t.data.matrix);e.updateWithModelViewMatrix(r)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(e){this.object3d=new THREE.Group;var t=new THREE.AxisHelper;this.object3d.add(t);var r=e.id,a=document.createElement("canvas");a.width=64,a.height=64;var i=a.getContext("2d"),s=new THREE.CanvasTexture(a);i.font="48px monospace",i.fillStyle="rgba(192,192,255, 0.5)",i.fillRect(0,0,a.width,a.height),i.fillStyle="darkblue",i.fillText(r,a.width/4,3*a.height/4),s.needsUpdate=!0;var n=new THREE.PlaneGeometry(1,1),o=new THREE.MeshBasicMaterial({map:s,transparent:!0});t=new THREE.Mesh(n,o);t.rotation.x=-Math.PI/2,this.object3d.add(t)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(e,t){var r=this;function a(e){if(void 0!==e)for(var t in e){var a=e[t];if(void 0!==a){var i=r.parameters[t];void 0!==i?r.parameters[t]=a:console.warn("THREEx.ArSmoothedControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArSmoothedControls: '"+t+"' parameter is undefined.")}}THREEx.ArBaseControls.call(this,e),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,t=t||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},a(t)},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(e){var t=this.object3d,r=this.parameters,a=t.visible,i=performance.now()/1e3;if(!1===e.visible&&(this._visibleStartedAt=null),!0===e.visible&&(this._unvisibleStartedAt=null),!0===e.visible&&null===this._visibleStartedAt&&(this._visibleStartedAt=i),!1===e.visible&&null===this._unvisibleStartedAt&&(this._unvisibleStartedAt=i),!1===a&&!0===e.visible){var s=i-this._visibleStartedAt;s>=this.parameters.minVisibleDelay&&(t.visible=!0,c())}if(!0===a&&!1===e.visible){var n=i-this._unvisibleStartedAt;n>=this.parameters.minUnvisibleDelay&&(t.visible=!1)}if(null===this._lastLerpStepAt)u(),this._lastLerpStepAt=i;else for(var o=Math.floor((i-this._lastLerpStepAt)/this.parameters.lerpStepDelay),l=0;l<o;l++)u(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;return this.object3d.updateMatrix(),!1===a&&!0===t.visible&&this.dispatchEvent({type:"becameVisible"}),void(!0===a&&!1===t.visible&&this.dispatchEvent({type:"becameUnVisible"}));function c(){t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale)}function u(){t.position.lerp(e.position,r.lerpPosition),t.quaternion.slerp(e.quaternion,r.lerpQuaternion),t.scale.lerp(e.scale,r.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(e){var t=this;function r(e){if(void 0!==e)for(var r in e){var a=e[r];if(void 0!==a){var i=t.parameters[r];void 0!==i?t.parameters[r]=a:console.warn("THREEx.ArToolkitContext: '"+r+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitContext: '"+r+"' parameter is undefined.")}}t._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,imageSmoothingEnabled:!1},console.assert(-1!==["artoolkit","aruco","tango"].indexOf(this.parameters.trackingBackend),"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(-1!==["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode),"invalid parameter detectionMode",this.parameters.detectionMode),this.arController=null,this.arucoContext=null,t.initialized=!1,this._arMarkersControls=[],r(e)},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="1.6.2",ARjs.Context.createDefaultCamera=function(e){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),"artoolkit"===e)var t=new THREE.Camera;else if("aruco"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else if("tango"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return t},ARjs.Context.prototype.init=function(e){var t=this;return void("artoolkit"===this.parameters.trackingBackend?this._initArtoolkit(r):"aruco"===this.parameters.trackingBackend?this._initAruco(r):"tango"===this.parameters.trackingBackend?this._initTango(r):console.assert(!1));function r(){t.dispatchEvent({type:"initialized"}),t.initialized=!0,e&&e()}},ARjs.Context.prototype.update=function(e){if("artoolkit"===this.parameters.trackingBackend&&null===this.arController)return!1;var t=performance.now();return!(null!==this._updatedAt&&t-this._updatedAt<1e3/this.parameters.maxDetectionRate)&&(this._updatedAt=t,this._arMarkersControls.forEach((function(e){e.object3d.visible=!1})),"artoolkit"===this.parameters.trackingBackend?this._updateArtoolkit(e):"aruco"===this.parameters.trackingBackend?this._updateAruco(e):"tango"===this.parameters.trackingBackend?this._updateTango(e):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(e)},ARjs.Context.prototype.removeMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls);var t=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(t!==t),this._arMarkersControls.splice(t,1)},ARjs.Context.prototype._initArtoolkit=function(e){var t=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationZ(Math.PI));var r=new ARCameraParam(t.parameters.cameraParametersUrl,(function(){var a=new ARController(t.parameters.canvasWidth,t.parameters.canvasHeight,r);t.arController=a,a.ctx.mozImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,a.ctx.webkitImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,a.ctx.msImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,a.ctx.imageSmoothingEnabled=t.parameters.imageSmoothingEnabled,!0===t.parameters.debug&&(a.debugSetup(),a.canvas.style.position="absolute",a.canvas.style.top="0px",a.canvas.style.opacity="0.6",a.canvas.style.pointerEvents="none",a.canvas.style.zIndex="-1");var i={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},s=i[t.parameters.detectionMode];console.assert(void 0!==s),a.setPatternDetectionMode(s);var n={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},o=n[t.parameters.matrixCodeType];console.assert(void 0!==o),a.setMatrixCodeType(o),a.setPattRatio(t.parameters.patternRatio),e()}));return this},ARjs.Context.prototype.getProjectionMatrix=function(e){console.assert("artoolkit"===this.parameters.trackingBackend),console.assert(this.arController,"arController MUST be initialized to call this function");var t=this.arController.getCameraMatrix(),r=(new THREE.Matrix4).fromArray(t);return r.multiply(this._artoolkitProjectionAxisTransformMatrix),r},ARjs.Context.prototype._updateArtoolkit=function(e){this.arController.process(e)},ARjs.Context.prototype._initAruco=function(e){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var t=this.arucoContext.canvas.getContext("2d");t.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout((function(){e()}),0)},ARjs.Context.prototype._updateAruco=function(e){var t=this,r=this._arMarkersControls,a=this.arucoContext.detect(e);a.forEach((function(e){for(var a=null,i=0;i<r.length;i++)if(console.assert("barcode"===r[i].parameters.type),r[i].parameters.barcodeValue===e.id){a=r[i];break}if(null!==a){var s=new THREE.Object3D;t.arucoContext.updateObject3D(s,a._arucoPosit,a.parameters.size,e),s.updateMatrix(),a.updateWithModelViewMatrix(s.matrix)}}))},ARjs.Context.prototype._initTango=function(e){var t=this;navigator.getVRDisplays||(navigator.getVRDevices?alert("Your browser supports WebVR but not the latest version. See <a href='http://webvr.info'>webvr.info</a> for more info."):alert("Your browser does not support WebVR. See <a href='http://webvr.info'>webvr.info</a> for assistance.")),this._tangoContext={vrDisplay:null,vrPointCloud:null,frameData:new VRFrameData},navigator.getVRDisplays().then((function(r){0===r.length&&alert("no vrDisplays available");var a=t._tangoContext.vrDisplay=r[0];console.log("vrDisplays.displayName :",a.displayName),"Tango VR Device"===a.displayName&&(t._tangoContext.vrPointCloud=new THREE.WebAR.VRPointCloud(a,!0)),e()}))},ARjs.Context.prototype._updateTango=function(e){var t=this,r=(this._arMarkersControls,this._tangoContext,this._tangoContext.vrDisplay);if(null!==r){if("Tango VR Device"===r.displayName){var a=!0,i=0;t._tangoContext.vrPointCloud.update(a,i,!0)}if(0!==this._arMarkersControls.length){var s=this._arMarkersControls[0],n=this._tangoContext.frameData;if(r.getFrameData(n),null!==n.pose.position&&null!==n.pose.orientation){var o=(new THREE.Vector3).fromArray(n.pose.position),l=(new THREE.Quaternion).fromArray(n.pose.orientation),c=new THREE.Vector3(1,1,1),u=(new THREE.Matrix4).compose(o,l,c),d=new THREE.Matrix4;d.getInverse(u),s.updateWithModelViewMatrix(d)}}}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var e=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return!0===e?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(e){return"default"===e&&(e=this._guessPerformanceLabel()),"desktop-fast"===e?(this.contextParameters.canvasWidth=1920,this.contextParameters.canvasHeight=1440,this.contextParameters.maxDetectionRate=30):"desktop-normal"===e?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):"phone-normal"===e?(this.contextParameters.canvasWidth=320,this.contextParameters.canvasHeight=240,this.contextParameters.maxDetectionRate=30):"phone-slow"===e?(this.contextParameters.canvasWidth=240,this.contextParameters.canvasHeight=180,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+e),this},ARjs.Profile.prototype.defaultMarker=function(e){return e=e||this.contextParameters.trackingBackend,"artoolkit"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro"):"aruco"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):"tango"===e?(this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(e){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.sourceImage=function(e){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.trackingBackend=function(e){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=e,this},ARjs.Profile.prototype.changeMatrixMode=function(e){return this.defaultMarkerParameters.changeMatrixMode=e,this},ARjs.Profile.prototype.trackingMethod=function(e){var t=ARjs.Utils.parseTrackingMethod(e);return this.defaultMarkerParameters.markersAreaEnabled=t.markersAreaEnabled,this.contextParameters.trackingBackend=t.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return"tango"===this.contextParameters.trackingBackend&&this.sourceImage(THREEx.ArToolkitContext.baseURL+"../data/images/img.jpg"),this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(e){var t=this;function r(e){if(void 0!==e)for(var r in e){var a=e[r];if(void 0!==a){var i=t.parameters[r];void 0!==i?t.parameters[r]=a:console.warn("THREEx.ArToolkitSource: '"+r+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitSource: '"+r+"' parameter is undefined.")}}this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},r(e)},ARjs.Source.prototype.init=function(e,t){var r=this;if("image"===this.parameters.sourceType)var a=this._initSourceImage(i,t);else if("video"===this.parameters.sourceType)a=this._initSourceVideo(i,t);else if("webcam"===this.parameters.sourceType)a=this._initSourceWebcam(i,t);else console.assert(!1);return this.domElement=a,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this;function i(){document.body.appendChild(r.domElement),r.ready=!0,e&&e()}},ARjs.Source.prototype._initSourceImage=function(e){var t=document.createElement("img");t.src=this.parameters.sourceUrl,t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var r=setInterval((function(){t.naturalWidth&&(e(),clearInterval(r))}),20);return t},ARjs.Source.prototype._initSourceVideo=function(e){var t=document.createElement("video");t.src=this.parameters.sourceUrl,t.style.objectFit="initial",t.autoplay=!0,t.webkitPlaysinline=!0,t.controls=!1,t.loop=!0,t.muted=!0,document.body.addEventListener("click",(function e(){document.body.removeEventListener("click",e),t.play()})),t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var r=setInterval((function(){t.videoWidth&&(e(),clearInterval(r))}),20);return t},ARjs.Source.prototype._initSourceWebcam=function(e,t){var r=this;t=t||function(e){alert("Webcam Error\nName: "+e.name+"\nMessage: "+e.message)};var a=document.createElement("video");if(a.setAttribute("autoplay",""),a.setAttribute("muted",""),a.setAttribute("playsinline",""),a.style.width=this.parameters.displayWidth+"px",a.style.height=this.parameters.displayHeight+"px",void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.enumerateDevices||void 0===navigator.mediaDevices.getUserMedia){if(void 0===navigator.mediaDevices)var i="navigator.mediaDevices";else if(void 0===navigator.mediaDevices.enumerateDevices)i="navigator.mediaDevices.enumerateDevices";else if(void 0===navigator.mediaDevices.getUserMedia)i="navigator.mediaDevices.getUserMedia";else console.assert(!1);return t({name:"",message:"WebRTC issue-! "+i+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then((function(i){var s={audio:!1,video:{facingMode:"environment",width:{ideal:r.parameters.sourceWidth},height:{ideal:r.parameters.sourceHeight}}};null!==r.parameters.deviceId&&(s.video.deviceId={exact:r.parameters.deviceId}),navigator.mediaDevices.getUserMedia(s).then((function(t){a.srcObject=t,document.body.addEventListener("click",(function(){a.play()}));var r=setInterval((function(){a.videoWidth&&(e(),clearInterval(r))}),20)})).catch((function(e){t({name:e.name,message:e.message})}))})).catch((function(e){t({message:e.message})})),a},ARjs.Source.prototype.hasMobileTorch=function(){var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream===!1)return!1;void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0];if(void 0===t.getCapabilities)return!1;var r=t.getCapabilities();return!!r.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(!0===this.hasMobileTorch());var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream!==!1){void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0],r=t.getCapabilities();r.torch?(this._currentTorchStatus=!1===this._currentTorchStatus,t.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch((function(e){console.log(e)}))):alert("no mobile torch is available on your camera")}else alert("enabling mobile torch is available only on webcam")},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var e=window.innerWidth,t=window.innerHeight;if(console.assert(0===arguments.length),"IMG"===this.domElement.nodeName)var r=this.domElement.naturalWidth,a=this.domElement.naturalHeight;else if("VIDEO"===this.domElement.nodeName)r=this.domElement.videoWidth,a=this.domElement.videoHeight;else console.assert(!1);var i=r/a,s=e/t;if(s<i){var n=i*t;this.domElement.style.width=n+"px",this.domElement.style.marginLeft=-(n-e)/2+"px",this.domElement.style.height=t+"px",this.domElement.style.marginTop="0px"}else{var o=1/(i/e);this.domElement.style.height=o+"px",this.domElement.style.marginTop=-(o-t)/2+"px",this.domElement.style.width=e+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function(e){window.innerWidth>window.innerHeight?(e.style.width=this.domElement.style.width,e.style.height=this.domElement.style.height,e.style.marginLeft=this.domElement.style.marginLeft,e.style.marginTop=this.domElement.style.marginTop):(e.style.height=this.domElement.style.height,e.style.width=4*parseInt(e.style.height)/3+"px",e.style.marginLeft=(window.innerWidth-parseInt(e.style.width))/2+"px",e.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(e,t,r){if(3!==arguments.length)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var a=e.parameters.trackingBackend;if("artoolkit"===a){this.onResizeElement();var i=!!t.domElement.dataset.aframeCanvas;!1===i&&this.copyElementSizeTo(t.domElement),null!==e.arController&&this.copyElementSizeTo(e.arController.canvas)}else"aruco"===a?(this.onResizeElement(),this.copyElementSizeTo(t.domElement),this.copyElementSizeTo(e.arucoContext.canvas)):"tango"===a?t.setSize(window.innerWidth,window.innerHeight):console.assert(!1,"unhandled trackingBackend "+a);if("artoolkit"===a)null!==e.arController&&r.projectionMatrix.copy(e.getProjectionMatrix());else if("aruco"===a)r.aspect=t.domElement.width/t.domElement.height,r.updateProjectionMatrix();else if("tango"===a){var s=e._tangoContext.vrDisplay;s&&"Tango VR Device"===s.displayName&&THREE.WebAR.resizeVRSeeThroughCamera(s,r)}else console.assert(!1,"unhandled trackingBackend "+a)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(e){var t=new THREE.PlaneGeometry(2,2),r=new THREE.MeshBasicMaterial({map:e}),a=new THREE.Mesh(t,r);this.object3d=a,this.update=function(e){e.updateMatrixWorld(!0);var t=new THREE.Vector3(-0,0,-20);t=new THREE.Vector3(-0,0,-20);a.position.copy(t),e.localToWorld(a.position),e.matrixWorld.decompose(e.position,e.quaternion,e.scale),a.quaternion.copy(e.quaternion);var r=2*THREE.Math.radToDeg(Math.atan(1/e.projectionMatrix.elements[5])),i=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),s=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),n=i/s;a.scale.y=Math.tan(THREE.Math.DEG2RAD*r/2)*t.length(),a.scale.x=a.scale.y*n}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(e){this._sourceElement=e,this._pickingScene=new THREE.Scene;var t=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),r=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(t,r),this._pickingScene.add(this._pickingPlane);var a=parseInt(e.style.width),i=parseInt(e.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,a/i,.1,30)},THREEx.HitTestingPlane.prototype.update=function(e,t,r){if(this.onResize(),"modelViewMatrix"===r){var a=this._pickingPlane;t.parent.updateMatrixWorld(),a.matrix.copy(t.parent.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}else if("cameraTransformMatrix"===r){var i=this._pickingCamera;e.updateMatrixWorld(),i.matrix.copy(e.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var e=this._sourceElement,t=this._pickingCamera,r=parseInt(e.style.width),a=parseInt(e.style.height);t.aspect=r/a,t.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(e,t){e=2*(e-.5),t=2*-(t-.5),this._pickingScene.updateMatrixWorld(!0);var r=new THREE.Raycaster,a=new THREE.Vector3(e,t,1);r.setFromCamera(a,this._pickingCamera);var i=r.intersectObjects([this._pickingPlane]);if(0===i.length)return null;var s=this._pickingPlane.worldToLocal(i[0].point.clone()),n=new THREE.Quaternion,o=new THREE.Vector3(1,1,1);return{position:s,quaternion:n,scale:o}},THREEx.HitTestingPlane.prototype.renderDebug=function(e){e.render(this._pickingScene,this._pickingCamera)};var THREEx=THREEx||{};THREEx.HitTestingTango=function(e){this._arContext=e,this.boundingSphereRadius=.01,this.resultScale=new THREE.Vector3(1,1,1).multiplyScalar(1)},THREEx.HitTestingTango.prototype.update=function(){},THREEx.HitTestingTango.prototype.test=function(e,t){var r=this._arContext._tangoContext.vrDisplay;if(null===r)return null;if("Tango VR Device"!==r.displayName)return null;var a=r.getPickingPointAndPlaneInPointCloud(e,t);if(null==a)return console.warn("Could not retrieve the correct point and plane."),null;var i=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(a,i,this.boundingSphereRadius),i.rotateZ(-Math.PI/2);var s={position:i.position,quaternion:i.quaternion,scale:this.resultScale};return s};var ARjs=ARjs||{};ARjs.Anchor=function(e,t){var r=this,a=e.arContext,i=e.parameters.scene,s=e.parameters.camera;this.arSession=e,this.parameters=t,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",t.markersAreaEnabled);var n=new THREE.Group;if(i.add(n),"modelViewMatrix"===t.changeMatrixMode)var o=n;else if("cameraTransformMatrix"===t.changeMatrixMode)o=s;else console.assert(!1);if(!1===t.markersAreaEnabled){var l=new THREEx.ArMarkerControls(a,o,t);this.controls=l}else{if(console.assert("artoolkit"===a.parameters.trackingBackend||"aruco"===a.parameters.trackingBackend),!0===location.hash.substring(1).startsWith("markers-page-resolution=")){var c=location.hash.substring(1),u=c.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(3===u.length);var d=parseInt(u[1]),p=parseInt(u[2]);a=e.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(a.parameters.trackingBackend,d,p)}null===localStorage.getItem("ARjsMultiMarkerFile")&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(a.parameters.trackingBackend),console.assert(null!==localStorage.getItem("ARjsMultiMarkerFile"));var f=localStorage.getItem("ARjsMultiMarkerFile");if("modelViewMatrix"===t.changeMatrixMode)var m=i;else if("cameraTransformMatrix"===t.changeMatrixMode)m=s;else console.assert(!1);var h=ARjs.MarkersAreaControls.fromJSON(a,m,o,f);this.controls=h,h.parameters.changeMatrixMode=t.changeMatrixMode;var b=[];h.subMarkersControls.forEach((function(e){var t=new THREEx.ArMarkerHelper(e);t.object3d.visible=!1,e.object3d.add(t.object3d),b.push(t)})),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(e){b.forEach((function(t){t.object3d.visible=e}))}}this.object3d=new THREE.Group;var g=!0;if("tango"===a.parameters.trackingBackend&&(g=!1),!0===g){var v=new THREE.Group;i.add(v);var w=new THREEx.ArSmoothedControls(v);v.add(this.object3d)}else n.add(this.object3d);this.update=function(){r.object3d.visible=r.object3d.parent.visible,void 0!==w&&(void 0!==h&&h.updateSmoothedControls(w),w.update(n))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(e,t){var r=e.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var a=document.createElement("span");if(a.style.display="block",this.domElement.appendChild(a),a.innerHTML="<b>trackingBackend</b> : "+r,ARjs.SessionDebugUI.AugmentedWebsiteURL){a=document.createElement("a");a.innerHTML="Share on augmented-websites",a.style.display="block",a.href=ARjs.SessionDebugUI.AugmentedWebsiteURL+"?"+location.href,this.domElement.appendChild(a)}if("tango"===r&&t){a=document.createElement("button");this.domElement.appendChild(a),a.id="buttonTangoTogglePointCloud",a.innerHTML="toggle-point-cloud",a.href="javascript:void(0)",a.addEventListener("click",(function(){var r=e.parameters.scene;t.object3d.parent?r.remove(t.object3d):r.add(t.object3d)}))}},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function(e){var t=e.arSession,r=t.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var a=document.createElement("span");if(a.style.display="block",this.domElement.appendChild(a),a.innerHTML="<b>markersAreaEnabled</b> :"+e.parameters.markersAreaEnabled,e.parameters.markersAreaEnabled){a=document.createElement("button");a.style.display="block",this.domElement.appendChild(a),a.id="buttonToggleMarkerHelpers",a.innerHTML="toggle-marker-helper",a.href="javascript:void(0)";var i=!1;a.addEventListener("click",(function(){i=!i,e.markersArea.setSubMarkersVisibility(i)}))}if(e.parameters.markersAreaEnabled){a=document.createElement("button");a.style.display="block",this.domElement.appendChild(a),a.id="buttonMarkersAreaLearner",a.innerHTML="Learn-new-marker-area",a.href="javascript:void(0)",a.addEventListener("click",(function(){if(null!==ARjs.AnchorDebugUI.MarkersAreaLearnerURL)var e=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else e=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(e,r)}))}if(e.parameters.markersAreaEnabled){a=document.createElement("button");a.style.display="block",this.domElement.appendChild(a),a.id="buttonMarkersAreaReset",a.innerHTML="Reset-marker-area",a.href="javascript:void(0)",a.addEventListener("click",(function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(r),location.reload()}))}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function(e){var t=this,r=e.arContext,a=r.parameters.trackingBackend;this.enabled=!0,this._arSession=e,this._hitTestingPlane=null,this._hitTestingTango=null,"tango"===a?t._hitTestingTango=new THREEx.HitTestingTango(r):t._hitTestingPlane=new THREEx.HitTestingPlane(e.arSource.domElement)},ARjs.HitTesting.prototype.update=function(e,t,r){!1!==this.enabled&&(null!==this._hitTestingTango?this._hitTestingTango.update():null!==this._hitTestingPlane?this._hitTestingPlane.update(e,t,r):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(e){var t=this._arSession.arContext.parameters.trackingBackend,r=this._arSession.arSource;if(!1===this.enabled)return[];if("tango"===t)var a=e.pageX/window.innerWidth,i=e.pageY/window.innerHeight;else a=e.clientX/r.domElementWidth(),i=e.clientY/r.domElementHeight();return this.test(a,i)},ARjs.HitTesting.prototype.test=function(e,t){var r=this._arSession.arContext,a=r.parameters.trackingBackend,i=[];if(!1===this.enabled)return[];var s=null;if("tango"===a)s=this._hitTestingTango.test(e,t);else s=this._hitTestingPlane.test(e,t);if(null===s)return i;var n=new ARjs.HitTesting.Result(s.position,s.quaternion,s.scale);return i.push(n),i},ARjs.HitTesting.Result=function(e,t,r){this.position=e,this.quaternion=t,this.scale=r},ARjs.HitTesting.Result.prototype.apply=function(e){e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function(e){return e.position.copy(this.position),e.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function(e){return e.quaternion.copy(this.quaternion),e.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function(e){var t=this;function r(e){if(void 0!==e)for(var r in e){var a=e[r];if(void 0!==a){var i=t.parameters[r];void 0!==i?t.parameters[r]=a:console.warn("THREEx.Session: '"+r+"' is not a property of this material.")}else console.warn("THREEx.Session: '"+r+"' parameter is undefined.")}}this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},this.signals={sourceReady:new signals.Signal,contextInitialized:new signals.Signal},r(e),console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",e.contextParameters.trackingBackend);var a=t.arSource=new ARjs.Source(e.sourceParameters);a.init((function(){a.onResize(i,t.parameters.renderer,t.parameters.camera),t.signals.sourceReady.dispatch()})),window.addEventListener("resize",(function(){a.onResize(i,t.parameters.renderer,t.parameters.camera)}));var i=t.arContext=new ARjs.Context(e.contextParameters);t.arContext.init(),i.addEventListener("initialized",(function(e){a.onResize(i,t.parameters.renderer,t.parameters.camera),t.signals.contextInitialized.dispatch()})),this.update=function(){!1!==a.ready&&i.update(a.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.TangoPointCloud=function(e){var t=this,r=e.arContext;this.object3d=new THREE.Group,console.warn("Work only on cameraTransformMatrix - fix me - useless limitation"),r.addEventListener("initialized",(function(e){var a=r._tangoContext.vrPointCloud,i=a.getBufferGeometry(),s=new THREE.PointsMaterial({size:.01,depthWrite:!1}),n=new THREE.Points(i,s);n.frustumCulled=!1,n.renderDepth=0,t.object3d.add(n)}))};var ARjs=ARjs||{};ARjs.TangoVideoMesh=function(e){var t=e.arContext,r=e.renderer,a=null,i=null,s=new THREE.Scene,n=new THREE.OrthographicCamera(-1,1,1,-1,0,100);this._sceneOrtho=s,this._cameraOrtho=n,t.addEventListener("initialized",(function(e){console.assert("tango"===t.parameters.trackingBackend),i=t._tangoContext.vrDisplay,console.assert(i,"vrDisplay MUST be defined"),"Tango VR Device"===i.displayName&&(a=THREE.WebAR.createVRSeeThroughCameraMesh(i),s.add(a))})),this.update=function(){console.assert("tango"===t.parameters.trackingBackend),null!==a&&THREE.WebAR.updateCameraMeshOrientation(i,a)},this.render=function(){console.assert("tango"===t.parameters.trackingBackend),r.render(s,n),r.clearDepth()}};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(e){var t=this.parseTrackingMethod(e).trackingBackend;if("artoolkit"===t)var r=new THREE.Camera;else if("aruco"===t)r=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else if("tango"===t)r=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+t);return r},ARjs.Utils.isTango=function(){var e=null!==navigator.userAgent.match("Chrome/57.0.2987.5");return e},ARjs.Utils.parseTrackingMethod=function(e){return"best"===e&&(e=ARjs.Utils.isTango()?"tango":"area-artoolkit"),e.startsWith("area-")?{trackingBackend:e.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:e,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(e,t,r){var a=this;THREEx.ArBaseControls.call(this,t),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:r.subMarkersControls,subMarkerPoses:r.subMarkerPoses,changeMatrixMode:void 0!==r.changeMatrixMode?r.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,e.addEventListener("sourceProcessed",(function(){a._onSourceProcessed()}))},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var e=this,t={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},r=e.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach((function(a,i){var s=a.object3d;if(!1!==s.visible){var n=s.matrix.clone(),o=e.parameters.subMarkerPoses[i];n.multiply((new THREE.Matrix4).getInverse(o));var l=new THREE.Vector3,c=new THREE.Quaternion,u=new THREE.Vector3;n.decompose(l,c,u),t.count++,ARjs.MarkersAreaControls.averageVector3(t.position.sum,l,t.count,t.position.average),ARjs.MarkersAreaControls.averageQuaternion(t.quaternion.sum,c,r,t.count,t.quaternion.average),ARjs.MarkersAreaControls.averageVector3(t.scale.sum,u,t.count,t.scale.average)}})),t.count>0?e.object3d.visible=!0:e.object3d.visible=!1,t.count>0){var a=new THREE.Matrix4;a.compose(t.position.average,t.quaternion.average,t.scale.average),"modelViewMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.copy(a):"cameraTransformMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.getInverse(a):console.assert(!1),e.object3d.matrix.decompose(e.object3d.position,e.object3d.quaternion,e.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(e,t,r,a,i){return i=i||new THREE.Quaternion,console.assert(r instanceof THREE.Quaternion===!0),t.dot(r)>0&&(t=new THREE.Quaternion(-t.x,-t.y,-t.z,-t.w)),e.x+=t.x,e.y+=t.y,e.z+=t.z,e.w+=t.w,i.x=e.x/a,i.y=e.y/a,i.z=e.z/a,i.w=e.w/a,i.normalize(),i},ARjs.MarkersAreaControls.averageVector3=function(e,t,r,a){return a=a||new THREE.Vector3,e.x+=t.x,e.y+=t.y,e.z+=t.z,a.x=e.x/r,a.y=e.y/r,a.z=e.z/r,a},ARjs.MarkersAreaControls.computeCenter=function(e){var t=JSON.parse(e),r={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},a=new THREE.Quaternion;t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),i=new THREE.Vector3,s=new THREE.Quaternion,n=new THREE.Vector3;t.decompose(i,s,n),r.count++,ARjs.MarkersAreaControls.averageVector3(r.position.sum,i,r.count,r.position.average),ARjs.MarkersAreaControls.averageQuaternion(r.quaternion.sum,s,a,r.count,r.quaternion.average),ARjs.MarkersAreaControls.averageVector3(r.scale.sum,n,r.count,r.scale.average)}));var i=new THREE.Matrix4;return i.compose(r.position.average,r.quaternion.average,r.scale.average),i},ARjs.MarkersAreaControls.computeBoundingBox=function(e){var t=JSON.parse(e),r=new THREE.Box3;return t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),a=new THREE.Vector3,i=new THREE.Quaternion,s=new THREE.Vector3;t.decompose(a,i,s),r.expandByPoint(a)})),r},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(e,t){void 0===t&&(t=[[.4,.1,.3],[.5,.1,.4],[.5,.2,.5],[.6,.2,.7],[.6,.2,.7]]);var r=0;if(this.parameters.subMarkersControls.forEach((function(e,t){var a=e.object3d;!0===a.visible&&r++})),void 0!==t[r-1])var a=t[r-1];else a=t[t.length-1];e.parameters.lerpPosition=a[0],e.parameters.lerpQuaternion=a[1],e.parameters.lerpScale=a[2]},ARjs.MarkersAreaControls.fromJSON=function(e,t,r,a,i){var s=JSON.parse(a),n=[],o=[];i=i||{},s.subMarkersControls.forEach((function(r){var a=new THREE.Object3D;t.add(a);var i=new THREEx.ArMarkerControls(e,a,r.parameters);n.push(i),o.push((new THREE.Matrix4).fromArray(r.poseMatrix))})),i.subMarkersControls=n,i.subMarkerPoses=o;var l=new THREEx.ArMultiMarkerControls(e,r,i);return l};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(e,t){var r=this;this._arToolkitContext=e,this.subMarkersControls=t,this.enabled=!0,e.addEventListener("sourceProcessed",(function(){r._onSourceProcessed()}))},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var e=this.subMarkersControls[0].object3d.quaternion;if(!1!==this.enabled)for(var t=this.subMarkersControls.filter((function(e){return!0===e.object3d.visible})),r=Object.keys(t).length,a=new THREE.Vector3,i=new THREE.Quaternion,s=new THREE.Vector3,n=new THREE.Matrix4,o=0;o<r;o++)for(var l=t[o],c=0;c<r;c++){var u=t[c];if(o!==c){void 0===l.object3d.userData.seenCouples&&(l.object3d.userData.seenCouples={});var d=l.object3d.userData.seenCouples;void 0===d[u.id]&&(d[u.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),n.getInverse(l.object3d.matrix),n.multiply(u.object3d.matrix),n.decompose(a,i,s);var p=d[u.id];p.count++,THREEx.ArMultiMarkerControls.averageVector3(p.position.sum,a,p.count,p.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(p.quaternion.sum,i,e,p.count,p.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(p.scale.sum,s,p.count,p.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var e=this,t=this.subMarkersControls[0];this.deleteResult(),t.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var r=!1;this.subMarkersControls.forEach((function(t){var a=t.object3d.userData.result,i=void 0!==a&&a.confidenceFactor>=1;if(!0!==i){var s=e._getLearnedCoupleStats(t);if(null!==s){var n=e._getSubMarkerControlsByID(s),o=t.object3d.userData.seenCouples[s],l=new THREE.Matrix4;l.compose(o.position.average,o.quaternion.average,o.scale.average);var c=n.object3d.userData.result.averageMatrix,u=(new THREE.Matrix4).getInverse(c).multiply(l);u=(new THREE.Matrix4).getInverse(u),console.assert(void 0===t.object3d.userData.result),t.object3d.userData.result={averageMatrix:u,confidenceFactor:1},r=!0}}}))}while(!0===r)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(e){if(void 0===e.object3d.userData.seenCouples)return null;for(var t=e.object3d.userData.seenCouples,r=Object.keys(t).map(Number),a=0;a<r.length;a++){var i=r[a],s=this._getSubMarkerControlsByID(i),n=s.object3d.userData.result,o=void 0!==n&&n.confidenceFactor>=1;if(!1!==o)return i}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(e){for(var t=0;t<this.subMarkersControls.length;t++){var r=this.subMarkersControls[t];if(r.id===e)return r}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var e={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:(new Date).toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},t=this.subMarkersControls[0];(new THREE.Matrix4).getInverse(t.object3d.matrix);this.subMarkersControls.forEach((function(t,r){if(void 0!==t.object3d.userData.result){var a=t.object3d.userData.result.averageMatrix;console.assert(a instanceof THREE.Matrix4);var i={parameters:{},poseMatrix:a.toArray()};"pattern"===t.parameters.type?(i.parameters.type=t.parameters.type,i.parameters.patternUrl=t.parameters.patternUrl):"barcode"===t.parameters.type?(i.parameters.type=t.parameters.type,i.parameters.barcodeValue=t.parameters.barcodeValue):console.assert(!1),e.subMarkersControls.push(i)}}));var r=JSON.stringify(e,null,"\t"),a=!1;if(!0===a){var i=JSON.parse(r);i.subMarkersControls.forEach((function(e){e.poseMatrix=e.poseMatrix.map((function(e){var t=100;return Math.round(e*t)/t}))})),r=JSON.stringify(i,null,"\t")}return r},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach((function(e){delete e.object3d.userData.seenCouples}))},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach((function(e){delete e.object3d.userData.result}))};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(e,t){var r={backURL:location.href,trackingBackend:t,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(t)};location.href=e+"?"+encodeURIComponent(JSON.stringify(r))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(e){var t=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(e);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(t))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(e){console.assert(e);var t=document.createElement("a");t.href=ARjs.Context.baseURL;var r=t.href,a={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]};return a.subMarkersControls[0]={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(0,0,0).toArray()},"artoolkit"===e?(a.subMarkersControls[0].parameters.type="pattern",a.subMarkersControls[0].parameters.patternUrl=r+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):"aruco"===e?(a.subMarkersControls[0].parameters.type="barcode",a.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),a},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(e){var t=document.createElement("a");t.href=ARjs.Context.baseURL;var r=t.href;if("artoolkit"===e)var a=[{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:r+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if("aruco"===e)a=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return a},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function(e,t,r){var a=this.buildMarkersAreaFileFromResolution(e,t,r);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(a))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function(e,t,r){var a={meta:{createdBy:"AR.js - Augmented Website",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]},i=.1;if(t>r)var s=.4*r;else if(t<r)s=.4*t;else if(t===r)s=.33*t;else console.assert(!1);var n=s*(1-2*i),o=(t-s)/2/n,l=(r-s)/2/n,c=u("center",0,0);a.subMarkersControls.push(c);c=u("topleft",-o,-l);a.subMarkersControls.push(c);c=u("topright",+o,-l);a.subMarkersControls.push(c);c=u("bottomleft",-o,+l);a.subMarkersControls.push(c);c=u("bottomright",+o,+l);return a.subMarkersControls.push(c),a;function u(t,r,a){console.log("buildSubMarkerControls",t,r,a);var i={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(r,0,a).toArray()};return"artoolkit"===e?d(i.parameters,t):"aruco"===e?p(i.parameters,t):console.assert(!1),i}function d(e,t){var r=document.createElement("a");r.href=ARjs.Context.baseURL;var a=r.href,i={center:s(a+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:s(a+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:s(a+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:s(a+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:s(a+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};return console.assert(void 0!==i[t]),e.type="pattern",void(e.patternUrl=i[t]);function s(e){var t=document.createElement("a");return t.href=e,t.href}}function p(e,t){var r={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(r[t]),e.type="barcode",e.barcodeValue=r[t]}}}).call(this,__webpack_require__("227d"),"/",__webpack_require__("d763")(module),__webpack_require__("b639").Buffer)},"93e3":function(e,t,r){},9593:function(e,t,r){},a2e6:function(e,t,r){"use strict";var a=r("a553"),i=r.n(a);i.a},a553:function(e,t,r){},ac85:function(e,t,r){"use strict";var a=r("1686"),i=r.n(a);i.a},ae4c:function(e,t,r){},b650:function(e,t,r){"use strict";var a=r("ae4c"),i=r.n(a);i.a},cf83:function(e){e.exports=JSON.parse('[{"label":"United States of America","value":"USA"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"Afghanistan","value":"AFG"},{"label":"Åland Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaçao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},d630:function(e,t,r){},e030:function(e){e.exports=JSON.parse('[{"code":"magnifier","label":"Magnifier","animationShow":"slideInUp","animationHide":"slideOutDown"},{"code":"code-scanner","label":"CodeScanner","animationShow":"FadeIn","animationHide":"FadeOut"}]')},e08c:function(e){e.exports=JSON.parse('{"baseServiceID":"4fafc201-1fb5-459e-8fcc-c5c9c331914b","baseCara":"beb5483e-36e1-4688-b7f5-"}')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"}]')},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')}});