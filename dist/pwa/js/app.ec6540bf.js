(function(e){function t(t){for(var r,n,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],r=!0,n=1;n<i.length;n++){var l=i[n];0!==s[l]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},s={app:0},a=[];function n(e){return o.p+"js/"+({}[e]||e)+"."+{"2d230c65":"f2c84fb9"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],i=s[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,r){i=s[e]=[t,r]}));t.push(i[2]=r);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=n(e);var c=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(u);var i=s[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",c.name="ChunkLoadError",c.type=r,c.request=a,i[1](c)}s[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;a.push([0,"vendor"]),i()})({0:function(e,t,i){e.exports=i("2f39")},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false,"nbTrials":0,"passOption":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"help","icon":"question","title":"HelpStep","description":"HelpStepDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false,"nbTrials":0,"passOption":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":false},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":90,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-over-flow","icon":"layer-group","title":"ImageOverFlow","description":"ImageOverFlowDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-recognition","icon":"camera","title":"PhotographAnObject","description":"PhotographAnObjectDesc","showTrick":"yes","enabled":false,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":true},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"no","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"no","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"trigger-event","icon":"bolt","title":"TriggerEvent","description":"TriggerEventDesc","showTrick":"no","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"wait-for-event","icon":"bolt","title":"WaitForEvent","description":"WaitForEventDesc","showTrick":"yes","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true}]')},1:function(e,t){},1686:function(e,t,i){},"17eb":function(e,t,i){"use strict";var r=i("9593"),s=i.n(r);s.a},2:function(e,t){},"22ae":function(e){e.exports=JSON.parse('[{"label":"red","value":"#FF0000"},{"label":"pink","value":"#FFC0CB"},{"label":"purple","value":"#800080"},{"label":"green","value":"#008000"},{"label":"blue","value":"#0000FF"},{"label":"yellow","value":"#FFFF00"},{"label":"orange","value":"#FFA500"},{"label":"black","value":"#000000"},{"label":"white","value":"#FFFFFF"},{"label":"gray","value":"#808080"}]')},"2f04":function(e){e.exports=JSON.parse('[{"code":"keypad","step":"wait-for-event"},{"code":"joystick","step":"wait-for-event"},{"code":"distance","step":"wait-for-event"},{"code":"pot","step":"wait-for-event"},{"code":"escapebox","step":"wait-for-event"},{"code":"button","step":"wait-for-event"},{"code":"lcd","step":"trigger-event"},{"code":"buzzer","step":"trigger-event"},{"code":"chest","step":"trigger-event"},{"code":"relay","step":"trigger-event"}]')},"2f39":function(e,t,r){"use strict";r.r(t);var s=r("967e"),a=r.n(s),n=(r("a481"),r("96cf"),r("fa84")),o=r.n(n),l=(r("7d6e"),r("e54f"),r("573e"),r("4848"),r("c382"),r("4a8e"),r("58af"),r("b828"),r("7713"),r("3c1c"),r("e046"),r("62f2"),r("7e6d"),r("2b0e")),c=r("b3f7"),u=r("b05d"),d=r("cb32"),p=r("54e1"),f=r("58a8"),h=r("9c40"),m=r("156b"),b=r("8c8f"),g=r("f09f"),v=r("4b7e"),w=r("a370"),k=r("880c"),y=r("32a7"),_=r("62cd"),S=r("8f8e"),x=r("b047"),C=r("b498"),q=r("c859"),T=r("24e8"),E=r("f2cc"),A=r("54b4"),P=r("0016"),M=r("068f"),I=r("ef35"),R=r("27f9"),O=r("6ab5"),$=r("e208"),F=r("033f"),N=r("4d5a"),D=r("497d"),L=r("9f0a"),z=r("c7a0"),j=r("2ea3"),H=r("639d"),B=r("7cbe"),U=r("6b1d"),Q=r("3786"),Y=r("7bbf"),V=r("daf4"),W=r("edca"),G=r("ddd8"),K=r("eb85"),J=r("c1d0"),X=r("2c91"),Z=r("0d59"),ee=r("8380"),te=r("06d5"),ie=r("9569"),re=r("7460"),se=r("429b"),ae=r("823b"),ne=r("adad"),oe=r("9564"),le=r("65c6"),ce=r("6ac5"),ue=r("7f67"),de=r("714f"),pe=r("4396"),fe=r("75c3"),he=r("12c5"),me=r("436b"),be=r("f5084"),ge=r("2a19");l["a"].use(u["a"],{config:{cordova:{backButtonExit:!1},loading:{delay:500}},iconSet:c["a"],components:{QAvatar:d["a"],QBanner:p["a"],QBadge:f["a"],QBtn:h["a"],QBtnDropdown:m["a"],QBtnGroup:b["a"],QCard:g["a"],QCardActions:v["a"],QCardSection:w["a"],QCarousel:k["a"],QCarouselControl:y["a"],QCarouselSlide:_["a"],QCheckbox:S["a"],QChip:x["a"],QColor:C["a"],QDate:q["a"],QDialog:T["a"],QDrawer:E["a"],QExpansionItem:A["a"],QIcon:P["a"],QImg:M["a"],QInfiniteScroll:I["a"],QInput:R["a"],QItem:O["a"],QItemLabel:$["a"],QItemSection:F["a"],QLayout:N["a"],QList:D["a"],QOptionGroup:L["a"],QPageContainer:z["a"],QPage:j["a"],QParallax:H["a"],QPopupProxy:B["a"],QLinearProgress:U["a"],QRadio:Q["a"],QRange:Y["a"],QRating:V["a"],QScrollObserver:W["a"],QSelect:G["a"],QSeparator:K["a"],QSlider:J["a"],QSpace:X["a"],QSpinner:Z["a"],QSpinnerDots:ee["a"],QSpinnerPuff:te["a"],QSpinnerRadio:ie["a"],QTab:re["a"],QTabs:se["a"],QTabPanel:ae["a"],QTabPanels:ne["a"],QToggle:oe["a"],QToolbar:le["a"],QToolbarTitle:ce["a"]},directives:{ClosePopup:ue["a"],Ripple:de["a"],Scroll:pe["a"],TouchPan:fe["a"],TouchSwipe:he["a"]},plugins:{Dialog:me["a"],Loading:be["a"],Notify:ge["a"]}});var ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"q-app"}},[i("router-view")],1)},we=[],ke={name:"App"},ye=ke,_e=r("2877"),Se=Object(_e["a"])(ye,ve,we,!1,null,null,null),xe=Se.exports,Ce=(r("ac4d"),r("8a81"),r("ac6a"),r("2f62")),qe=r("0e44"),Te=r("a78e"),Ee=r("bc3a"),Ae=r.n(Ee);Ae.a.defaults.withCredentials=!0,Ae.a.defaults.timeout=15e3,Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(localStorage["jwt"]);var Pe=function(){var e="https://api.graaly.com";return Ae.a.create({baseURL:e,validateStatus:function(e){return!0}})},Me={checkEmail:function(e){return Pe().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return Pe().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,i){return Pe().post("login/facebook",{id:e,token:t}).then((function(e){i(!1,e)}))},playAnonymous:function(e){return Pe().post("user/create/anonymous/"+e).catch((function(e){return console.log(e.request)}))},logout:function(){return Pe().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return Pe().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?Pe().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):Pe().get("account").catch((function(e){return console.log(e.request)}))},createAccount:function(e){return Pe().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return Pe().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return Pe().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return Pe().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,i){return Pe().post("user/forgottenpassword/code/validate",{email:e,password:t,code:i}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e){return Pe().post("user/forgottenpassword/code/generate",{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return Pe().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};l["a"].use(Ce["a"]);var Ie={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[],mediaStreams:[]},Re={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]},addMediaStream:function(e,t){e.mediaStreams.push(t)},clearMediaStreams:function(e){var t=!0,i=!1,r=void 0;try{for(var s,a=e.mediaStreams[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var n=s.value;n&&n.getTracks&&n.getTracks().forEach((function(e){return e.stop()}))}}catch(o){i=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}e.mediaStreams=[]}},Oe={login:function(){var e=o()(a.a.mark((function e(t,i){var r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("loginStart"),e.next=4,Me.login(i.email,i.password);case 4:return s=e.sent,200===s.status&&(r("loginSuccess",s.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),logout:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,Me.logout();case 3:return r=e.sent,i("logout"),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var i=e.commit;return i("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var i=e.commit,r=e.state;if(null===t){var s=r.questSteps.geolocation.drawDirectionInterval;null!==s&&window.clearInterval(s)}i("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var i=e.commit;return i("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var i=e.commit;return i("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var i=e.commit;return i("setErrorMessage",t)},setCurrentRun:function(e,t){var i=e.commit;return i("setCurrentRun",t)},addTimeoutId:function(e,t){var i=e.commit;return i("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var i=e.commit;return i("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")},addMediaStream:function(e,t){var i=e.commit;return i("addMediaStream",t)},clearMediaStreams:function(e){var t=e.commit;return t("clearMediaStreams")}},$e={},Fe=new Ce["a"].Store({state:Ie,getters:$e,actions:Oe,mutations:Re,plugins:[Object(qe["a"])({getState:function(e){return Te["getJSON"](e)},setState:function(e,t){Te["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),Ne=r("8c4f"),De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[i("q-page-container",[i("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),i("div",{attrs:{id:"screen-too-large"}},[i("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},Le=[],ze={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:this.$i18n.locale="fr"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:this.$i18n.locale="fr"}},methods:{}},je=ze,He=Object(_e["a"])(je,De,Le,!1,null,null,null),Be=He.exports,Ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{staticClass:"teaser"},[e.offline.active?e._e():i("mainQuest",{attrs:{quest:e.bestQuest}}),e.offline.active?i("div",{staticClass:"q-pt-lg"},[i("div",{staticClass:"q-pa-md no-internet-connection"},[i("q-icon",{attrs:{name:"cloud_off"}}),i("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():i("div",{staticClass:"q-pa-md"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?i("div",[i("mainQuest",{attrs:{quest:e.questList[0]}}),e.warnings.noNetwork?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n        ")],1):e._e(),i("titleBar",{attrs:{title:{text:e.$t("label.CachedQuests"),type:"key"}}}),i("questsList",{attrs:{format:"small",quests:e.questList}})],1):e._e()]):e._e(),e.warnings.noNetwork?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n      ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?i("div",[!e.warnings.noNetwork&&e.warnings.noServerReponse?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]):e._e(),!e.offline.active&&e.invitationQuests&&e.invitationQuests.length>0?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.Invitations"),type:"key"}}}),i("questsList",{attrs:{format:"small",quests:e.invitationQuests}})],1):e._e(),!e.offline.active&&e.onTopQuests&&e.onTopQuests.length>0?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.OnTopGames"),type:"key"}}}),i("questsList",{attrs:{format:"small",quests:e.onTopQuests}})],1):e._e(),e.isHybrid&&!e.offline.active?i("div",{staticClass:"q-px-md q-pt-lg"},[i("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/scan-button.png)"},on:{click:e.startScanQRCode}},[e._v("\n        "+e._s(e.$t("label.ScanQRCode"))+"\n      ")])]):e._e(),e.offline.active?e._e():i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.AroundYou"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAroundYou}}),!e.nearestQuests||e.nearestQuests.length>0?i("div",[i("questsList",{attrs:{format:"small",quests:e.nearestQuests}})],1):e._e(),e.nearestQuests&&0===e.nearestQuests.length?i("div",[i("div",{staticClass:"centered q-pa-md"},[e._v("\n          "+e._s(e.$t("label.NoQuestAroundYou"))+"\n          "),i("div",[i("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])])])]):e._e()],1),e.offline.active||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country?e._e():i("div",{staticClass:"q-px-md q-pt-lg"},[i("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/profile-button.png)"},on:{click:e.openUpdateProfilePage}},[e._v("\n        "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n      ")])]),e.offline.active||e.friendQuests&&!(e.friendQuests.length>0)?e._e():i("div",[i("titleBar",{attrs:{format:"small",title:{text:e.$t("label.FriendsQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreFriendsGames}}),i("questsList",{attrs:{format:"small",quests:e.friendQuests}})],1),e.offline.active||e.users&&!(e.users.length>0)?e._e():i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.Designers"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllCreators}}),i("usersList",{attrs:{format:"scroll",users:e.users}})],1),e.offline.active?e._e():i("div",{staticClass:"q-ma-md relative-position creator-button",on:{click:e.buildQuest}},[i("img",{staticClass:"full-width",attrs:{src:"statics/images/other/creator.jpg"}}),i("div",{staticClass:"bg-accent subtitle2 q-pa-md full-width",staticStyle:{bottom:"0px",position:"absolute","line-height":"0.8em"}},[e._m(0),i("span",[e._v(e._s(e.$t("label.StartCreation")))])])]),e.offline.active?e._e():i("div",{staticClass:"q-px-md q-py-lg"},[i("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/locator-button.png)"},on:{click:e.openMap}},[e._v("\n        "+e._s(e.$t("label.OpenTheMap"))+"\n      ")])]),i("div",{staticClass:"fixed-top"},[i("div",{staticClass:"home-header row no-wrap",class:{disabled:e.offline.active}},[i("img",{staticClass:"logo",attrs:{src:"statics/images/logo/logo-header-color.png"}}),i("q-space"),e.$store.state.user.isAdmin?i("img",{staticClass:"header-button q-mr-md",attrs:{src:"statics/images/icon/tools.png"},on:{click:e.openAdminPage}}):e._e(),i("img",{staticClass:"header-button q-mr-md",attrs:{src:"statics/images/icon/search.svg"},on:{click:e.openSearch}}),i("img",{staticClass:"header-button q-mr-md",attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"},on:{click:e.openRanking}}),i("q-avatar",{on:{click:function(t){return e.openProfile()}}},[i("img",{attrs:{src:e.getProfileImage()}})])],1)]),e.offline.active?e._e():i("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}}),i("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.ranking.show,callback:function(t){e.$set(e.ranking,"show",t)},expression:"ranking.show"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YourRanking")))]),i("q-space"),i("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e.warnings.rankingMissing?i("q-card-section",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.getRanking}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),i("q-card-section",[i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Level")))]),i("q-item",{attrs:{multiline:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"trending_up",color:"primary"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.MyLevel"))+": "+e._s(e.$store.state.user.level)+" ("+e._s(e.$store.state.user.score)+" "+e._s(e.$t("label.points"))+")")]),i("q-linear-progress",{staticClass:"q-my-sm",staticStyle:{height:"18px"},attrs:{rounded:"",value:e.profile.level.progress,color:"primary"}}),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max})))])],1)],1)],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Rankings")))]),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"public",color:"primary"}})],1),i("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourWorldRanking"))+" : \n                "),e.$store.state.user.statistics.rankings.world?i("span",[e._v(e._s(e.$store.state.user.statistics.rankings.world))]):e._e(),e.$store.state.user.statistics.rankings.world?e._e():i("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"home",color:"primary"}})],1),i("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourCityRanking"))+" :\n                "),e.$store.state.user.statistics.rankings.town?i("span",[e._v(e._s(e.$store.state.user.statistics.rankings.town))]):e._e(),e.$store.state.user.statistics.rankings.town?e._e():i("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1)],1):e._e(),e.success.ranking&&e.success.ranking.length>0?i("div",[i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Rewards")))]),e._l(e.success.ranking,(function(t,r){return i("q-list",{key:r},[i("q-item-label",{attrs:{header:""}},[e._v(e._s(t.city))]),i("q-item",{staticStyle:{"flex-wrap":"wrap"}},e._l(t.rewards,(function(t,r){return i("img",{key:r,class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}})})),0)],1)})),e._v("\n            "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n          ")],2):e._e()],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():i("q-card-section",[e._v("\n          "+e._s(e.$t("label.NoRankingYet"))+"\n        ")])],1)],1),e.offline.active?e._e():i("div",{staticClass:"fixed-bottom over-map"},[e.offline.show?i("div",[i("offlineLoader",{attrs:{quest:e.offline.quest,design:"download",lang:e.$t("label.shortLang")},on:{end:function(t){return e.questLoadedInCache()}}})],1):e._e()]),i("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[i("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1)])},Qe=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"float-right"},[i("img",{staticStyle:{width:"32px"},attrs:{src:"statics/images/icon/puzzle-big.svg"}})])}],Ye=(r("7f7f"),r("28a5"),r("34ef"),r("551c"),r("8993")),Ve=r.n(Ye),We=(r("6b54"),r("06db"),r("3b2b"),r("5a89")),Ge=r("3452"),Ke={notificationsArr:[],handleError:function(e){Fe.dispatch("setErrorMessage",e),tn.push("/error")},buildOptionsForSelect:function(e,t,i){var r=[];return e.forEach((function(e){r.push({value:e[t.valueField],label:i("label."+e[t.labelField])})})),r},getById:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e[i];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,i,r){var s=6371,a=Ke.degreesToRadians(i-e),n=Ke.degreesToRadians(r-t);e=Ke.degreesToRadians(e),i=Ke.degreesToRadians(i);var o=Math.sin(a/2)*Math.sin(a/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(e)*Math.cos(i),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return s*l},bearingBetweenEarthCoordinates:function(e,t,i,r){var s=Ke.degreesToRadians(r-t),a=Ke.degreesToRadians(e),n=Ke.degreesToRadians(i),o=Math.sin(s)*Math.cos(n),l=Math.cos(a)*Math.sin(n)-Math.sin(a)*Math.cos(n)*Math.cos(s),c=Ke.radiansToDegrees(Math.atan2(o,l));return(c+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),i={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var r in i)t=t.replace(new RegExp(i[r],"g"),r);return t},shuffle:function(e){var t,i,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),i=e[r],e[r]=e[t],e[t]=i;return e},buildIncrementalArray:function(e){for(var t=[],i=1;i<=e;i++)t.push(i);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var i=setTimeout(e,t);return Fe.dispatch("addTimeoutId",i),i})),clearAllTimeouts:function(){var e=!0,t=!1,i=void 0;try{for(var r,s=Fe.state.runningTimeoutsIds[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var a=r.value;clearTimeout(a)}}catch(n){t=!0,i=n}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}Fe.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var i=setInterval(e,t);Fe.dispatch("addIntervalId",i)})),clearAllIntervals:function(){var e=!0,t=!1,i=void 0;try{for(var r,s=Fe.state.runningIntervalIds[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var a=r.value;clearInterval(a)}}catch(n){t=!0,i=n}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}Fe.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},getDurationFromNow:function(e){var t=new Date(e),i=new Date,r=i.getTime()-t.getTime();return{h:parseInt(r/36e5%24),m:parseInt(r/6e4%60)}},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==Ve()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e["isActiveClone"]=null,t[i]=this.clone(e[i]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,i){var r=t?1e3:1024,s=i("label.byteCharacter");if(Math.abs(e)<r)return e+" "+s;var a=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],n=-1;a=a.map((function(e){return e+s}));do{e/=r,++n}while(Math.abs(e)>=r&&n<a.length-1);return e.toFixed(1)+" "+a[n]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<16;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},detachObject3D:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attachObject3D:function(e,t,i){e.applyMatrix((new We["Matrix4"]).getInverse(t.matrixWorld)),i.remove(e),t.add(e)},initFileStorage:function(e,t,i){return new Promise((function(r,s){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(s){e&&""!==e?s.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:i,exclusive:!1},(function(e){r(e)}),(function(){r(!1)}))}),(function(){r(!1)})):s.root.getFile(t,{create:i,exclusive:!1},(function(e){r(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}))},checkIfFileExists:function(e,t,i){return new Promise((function(r,s){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(s){e&&""!==e?s.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:i,exclusive:!1},(function(e){r(!0)}),(function(){r(!1)}))}),(function(){r(!1)})):s.root.getFile(t,{create:i,exclusive:!1},(function(e){r(!0)}),(function(){r(!1)}))}),(function(){r(!1)}))}))},writeInFile:function(e,t,i,r){var s=this;return new Promise((function(a,n){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(n){e&&""!==e?n.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:r,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),a(!1)},i||(i=new Blob(["some file data"],{type:"text/plain"}));var t=s.gcrypt(i,"Gr44lyCryp7");e.write(t)}))}),(function(){a(!1)}))}),(function(){a(!1)})):n.root.getFile(t,{create:r,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),a(!1)},i||(i=new Blob(["some file data"],{type:"text/plain"}));var t=s.gcrypt(i,"Gr44lyCryp7");e.write(t)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},readFile:function(e,t){var i=this;return new Promise((function(r,s){t||r(!1),window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(s){s||r(!1),e&&""!==e?s.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var t=new FileReader;t.onloadend=function(){var e=i.gcrypt(this.result,"Gr44lyCryp7",!0);r(e)},t.readAsText(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)})):s.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var t=new FileReader;t.onloadend=function(){var e=i.gcrypt(this.result,"Gr44lyCryp7",!0);r(e)},t.readAsText(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)}))}))},saveBinaryFile:function(e,t,i){return new Promise((function(r,s){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(s){var a=new XMLHttpRequest;a.open("GET",t+i,!0),a.responseType="blob",a.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?s.root.getDirectory(e,{create:!0},(function(e){e.getFile(i,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){r(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),r(!1)},e.write(t)}))}),(function(){r(!1)}))}),(function(){r(!1)})):s.root.getFile(i,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){r(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),r(!1)},e.write(t)}))}),(function(){r(!1)}))}else r(!1)},a.send()}),(function(){r(!1)}))}))},readBinaryFile:function(e,t){var i=this;return new Promise((function(r,s){t||r(!1),window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(s){s||r(!1),e&&""!==e?s.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var s=new FileReader;s.onloadend=function(){var e=i.getMimeType(t),s=new Blob([new Uint8Array(this.result)],{type:e});r(window.URL.createObjectURL(s))},s.readAsArrayBuffer(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)})):s.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var s=new FileReader;s.onloadend=function(){var e=i.getMimeType(t),s=new Blob([new Uint8Array(this.result)],{type:e});r(window.URL.createObjectURL(s))},s.readAsArrayBuffer(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,i){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(i){i||t(!1),i.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",i=e.substr(-4);switch(i){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,i){return i?Ge["AES"].decrypt(e,t).toString(Ge["enc"].Utf8):Ge["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},openExternalLink:function(e){window.cordova?navigator.app.loadUrl(e,{openExternal:!0}):window.open(e,"_blank")},removeUnusedUrl:function(e){if(-1!==e.indexOf("gc=")){var t=e.indexOf("gc=");return e.substring(t+3)}return e},loadImage:function(e){return new Promise((function(t,i){var r=new Image;r.onload=function(){t(r)},r.onerror=i,r.src=e}))},isIOS:function(){return window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId},requestDeviceMotionPermission:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceMotionEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),requestDeviceOrientationPermission:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceOrientationEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stringToBytes:function(e){for(var t=new Uint8Array(e.length),i=0,r=e.length;i<r;i++)t[i]=e.charCodeAt(i);return t.buffer},bytesToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},replaceStringAt:function(e,t,i){return e.substr(0,t)+i+e.substr(t+i.length)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},timeStringToSeconds:function(e){var t=e.split("h"),i=t[1].split("m"),r=i[1].split("s"),s=3600*t[0],a=60*i[0],n=1*r[0],o=s+a+n;return o},secondsToTimeString:function(e){var t=Math.floor(e/3600);e%=3600;var i=Math.floor(e/60),r=e%60;return t+"h"+i+"m"+r+"s"},map:function(e,t,i,r,s){return(e-t)*(s-r)/(i-t)+r}},Je=Ke,Xe={listNearest:function(e,t){return t||(t="default"),Pe().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/0/lang/"+t).catch((function(e){return console.log(e.request)}))},listNearestSync:function(e,t,i,r){return t||(t="default"),Pe().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/"+i+"/lang/"+t).then((function(e){r(!1,e)}))},listHomeQuests:function(e,t){return t||(t="default"),Pe().get("quests/home/"+e.lng+"-"+e.lat+"/lang/"+t).catch((function(e){return console.log(e.request)}))},listAllForCountry:function(){return Pe().get("quests/country/FR").catch((function(e){return console.log(e.request)}))},listFriendQuests:function(e){return e||(e="default"),Pe().get("quests/friends/played/0/lang/"+e).catch((function(e){return console.log(e.request)}))},listFriendQuestsync:function(e,t,i){return e||(e="default"),Pe().get("quests/friends/played/"+t+"/lang/"+e).then((function(e){i(!1,e)}))},getById:function(e,t,i){return i||(i="default"),Pe().get("quest/"+e+"/version/"+t+"/lang/"+i).catch((function(e){return console.log(e.request)}))},getSize:function(e,t){return Pe().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e,t){return t||(t="default"),Pe().get("quest/"+e+"/version/999/lang/"+t).catch((function(e){return console.log("getLastById(): could not retrieve quest data",e)}))},find:function(e,t,i){return i||(i="default"),Pe().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/0/lang/"+i)},findSync:function(e,t,i,r,s){return i||(i="default"),Pe().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/"+r+"/lang/"+i).then((function(e){s(!1,e)}))},create:function(e,t,i,r){return Pe().post("quest/create/"+r+"/"+t+"/"+i,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return Pe().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return Pe().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return Pe().delete("quest/"+e+"/version/"+t+"/remove")},clone:function(e,t){return Pe().post("quest/"+e+"/version/"+t+"/clone")},closePrivate:function(e,t){return Pe().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return Pe().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return Pe().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return Pe().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return Pe().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e,t){return t||(t="default"),Pe().get("user/"+e+"/quests/created/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e,t){return t||(t="default"),Pe().get("user/"+e+"/quests/played/0/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUserSync:function(e,t,i,r){return t||(t="default"),Pe().get("user/"+e+"/quests/played/"+i+"/lang/"+t).then((function(e){r(!1,e)}))},listMedia:function(e,t,i){return i||(i="all"),Pe().get("quest/"+e+"/version/"+t+"/media/"+i+"/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,i){return Pe().delete("quest/"+e+"/version/"+t+"/media/"+i+"/remove")},listObjectFiles:function(e,t){return Pe().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,i){return Pe().get("quest/"+e+"/version/"+t+"/statistics/"+i).catch((function(e){return console.log(e.request)}))},getInvitations:function(){return Pe().get("user/quests/invitations/list").catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return Pe().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return Pe().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAudio:function(e){return Pe().post("/quest/audio/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacter:function(e){return Pe().post("/quest/character/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return Pe().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return Pe().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return Pe().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return Pe().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},checkTierPayment:function(e){return Pe().get("quest/"+e+"/payment/tier/check").catch((function(e){return console.log(e.request)}))},createTierPayment:function(e,t){return Pe().post("quest/"+e+"/payment/tier/add",{price:t}).catch((function(e){return console.log(e.request)}))},removeTierPayment:function(e,t){return Pe().delete("quest/"+e+"/payment/tier/remove/"+t).catch((function(e){return console.log(e.request)}))},listTierPayments:function(e){return Pe().get("quest/"+e+"/payment/tier/list").catch((function(e){return console.log(e.request)}))},useTierPaymentCode:function(e,t){return Pe().post("quest/"+e+"/payment/tier/use",{code:t}).catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return Pe().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return Pe().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return Pe().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Pe().get("quest/"+e+"/connectandplay/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},checkQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Pe().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return Pe().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return Pe().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,i){return Pe().put("quest/"+e+"/version/"+t+"/editor/add/"+i).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,i){return Pe().delete("quest/"+e+"/version/"+t+"/editor/remove/"+i)},listInvitees:function(e,t){return Pe().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,i){return Pe().put("quest/"+e+"/version/"+t+"/invitee/add/"+i).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,i){return Pe().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+i)},isCached:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Je.checkIfFileExists(t,"quest_"+t+".json");case 4:if(i=e.sent,i){e.next=7;break}return e.abrupt("return",!1);case 7:if(Je.isNetworkAvailable()){e.next=9;break}return e.abrupt("return",!0);case 9:return e.t0=JSON,e.next=12,Je.readFile(t,"quest_"+t+".json");case 12:return e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=16,this.getLastById(t);case 16:if(s=e.sent,s){e.next=19;break}return e.abrupt("return",!1);case 19:return s=s.data,e.abrupt("return",s.version===r.version);case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeFromCache:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.removeDirectory(t);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://api.graaly.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.png"}},Ze={listFriends:function(e,t,i){return Pe().get("user/"+e+"/friends/list/"+t+"/"+i).catch((function(e){return console.log(e.request)}))},listFriendsSync:function(e,t,i,r){return Pe().get("user/"+e+"/friends/list/"+t+"/"+i).then((function(e){r(!1,e)}))},listSuggestions:function(e,t){return Pe().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/0").catch((function(e){return console.log(e.request)}))},listSuggestionsSync:function(e,t,i,r){return Pe().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/"+i).then((function(e){r(!1,e)}))},listFollowersSync:function(e,t,i){return Pe().get("user/followers/"+e+"/"+t).then((function(e){i(!1,e)}))},find:function(e,t){return Pe().get("user/type/"+e+"/filter/"+t+"/0").catch((function(e){return console.log(e.request)}))},findSync:function(e,t,i,r){return Pe().get("user/type/"+e+"/filter/"+t+"/"+i).then((function(e){r(!1,e)}))},listNews:function(e,t,i){return Pe().get("user/friends/news/list/"+e+"/"+t).then((function(e){i(!1,e)}))},likeNews:function(e){return Pe().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return Pe().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return Pe().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRangeRanking:function(e){return Pe().get("ranking/"+e).catch((function(e){return console.log(e.request)}))},getRewards:function(e,t){return Pe().get("user/"+e+"/reward/list/"+t).catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return Pe().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return Pe().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return Pe().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return Pe().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return Pe().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?Pe().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?Pe().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):Pe().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return Pe().delete("user/friend/remove/"+e)},checkContacts:function(e){return Pe().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return Pe().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},et={launchpopup:function(){var e=this;AppRate.preferences.useLanguage="fr",AppRate.preferences.storeAppURL={ios:"id1448284225",android:"market://details?id=graaly.app"},AppRate.preferences.reviewType={ios:"InAppReview",android:"InAppReview"},AppRate.preferences.simpleMode=!0,AppRate.preferences.callbacks.onButtonClicked=function(t){switch(console.log("onButtonClicked -> "+t),t){case 1:e.addAlreadyAskedForRating();break;case 2:e.addLater(7);break;case 3:break;default:break}},AppRate.promptForRating()},initLocalStorage:function(){null===window.localStorage.getItem("alreadyAsked")&&window.localStorage.setItem("alreadyAsked","false"),null===window.localStorage.getItem("futuredate")&&window.localStorage.setItem("futuredate","")},addAlreadyAskedForRating:function(){window.localStorage.setItem("alreadyAsked","true")},addLater:function(e){var t=new Date,i=new Date;i.setDate(t.getDate()+e),window.localStorage.setItem("alreadyAsked","later"),window.localStorage.setItem("futuredate",i.toString())},hasAlreadyHavePopup:function(){var e=window.localStorage.getItem("alreadyAsked");if("true"===e||"false"===e)return console.log("has already awensered"),e;if("later"===e){var t=window.localStorage.getItem("futuredate");return new Date(t)<new Date?"false":"true"}},resetAlreadyAsked:function(){window.localStorage.setItem("alreadyAsked","false"),window.localStorage.setItem("futuredate","")}},tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isSupported&&e.isActive?e._e():i("div",{staticClass:"geolocation-layer"},[e.isActive?e._e():i("div",{staticClass:"search-geolocation fixed-bottom"},[i("div",{staticClass:"centered q-pa-md"},[i("q-spinner-puff",{attrs:{color:"primary",size:"25px"}}),e._v("  "+e._s(e.$t("label.LocationSearching"))+"\n    ")],1),e.askUserToEnableGeolocation?i("div",[i("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n        "+e._s(e.$t("label.CouldNotRetrieveYourPosition"))+"\n      ")]),i("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.ReadMore")}},[i("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n          "+e._s(e.$t("label.PossibleReasons"))+"\n          "),i("ul",[i("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),i("li",[e._v("\n              "+e._s(e.$t("label.GeolocationDisabled"))+"\n              "),e.nativeSettingsIsEnabled?i("span",[i("br"),i("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():i("div",[e.isChrome?i("div",[i("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():i("div",[i("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])])])],1):e._e()]),e.isSupported?e._e():i("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n    "+e._s(e.$t("label.GeolocationNotSupported"))+"\n  ")])])},it=[],rt=(r("4917"),r("c5f6"),{props:{maximumAge:{type:Number,default:0},withNavBar:{type:Boolean,default:!1}},data:function(){return{isSupported:!0,isActive:!1,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:1e4,nbFails:0,disabled:!1,alreadyWorked:!1,method:Je.isIOS()?"getCurrentPosition":"watchPosition",geolocationWatchId:null,timeoutIds:[],positionHistory:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,i=t.vendor,r=t.userAgent.indexOf("Edge")>-1,s=t.userAgent.match("CriOS");return!!s||null!==e&&"undefined"!==typeof e&&"Google Inc."===i&&!1===r},askUserToEnableGeolocation:function(){return this.nbFails>=1&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||("watchPosition"===this.method?this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(console.log("*** locationError",e),!this.disabled){console.warn("Could not get location"),console.log(e),this.isSupported=!0,this.isActive=!1,this.nbFails++,this.userDeniedGeolocation=1===e.code,this.$emit("error",!this.alreadyWorked),"watchPosition"===this.method&&this.stopTracking();var t=Je.setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);"getCurrentPosition"===this.method&&this.timeoutIds.push(t)}},locationSuccess:function(e){if(!this.disabled){this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1;var t=this.computeRelevantPosition(e);if(this.$emit("success",{coords:{accuracy:e.coords&&e.coords.accuracy?e.coords.accuracy:10,altitude:e.coords?e.coords.altitude:null,speed:e.coords?e.coords.speed:null,latitude:t.latitude,longitude:t.longitude}}),"getCurrentPosition"===this.method){var i=Je.setTimeout(this.startTracking,1e3);this.timeoutIds.push(i)}}},stopTracking:function(){if("watchPosition"===this.method)null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null);else if(this.timeoutIds.length>0){var e=!0,t=!1,i=void 0;try{for(var r,s=this.timeoutIds[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var a=r.value;clearTimeout(a)}}catch(n){t=!0,i=n}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}this.timeoutIds=[]}},computeRelevantPosition:function(e){if(e&&e.coords){this.positionHistory.length>=5&&this.positionHistory.splice(0,1),this.positionHistory.push({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy});for(var t=this.positionHistory.length,i=0,r=0,s=0,a=0,n=0,o=0,l=0;l<t;l++)n=1/(this.positionHistory[l].latitude*(t-l)),o=1/(this.positionHistory[l].longitude*(t-l)),s+=this.positionHistory[l].latitude*n,a+=this.positionHistory[l].longitude*o,i+=n,r+=o;return{latitude:s/i,longitude:a/r}}return e},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),st=rt,at=(r("ac85"),Object(_e["a"])(st,tt,it,!1,null,"5026aeaf",null)),nt=at.exports,ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'énergie est gratuite !")]),i("q-list",{attrs:{highlight:""}},[i("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),i("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),i("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),i("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?i("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},lt=[],ct=(r("f751"),{position:"top",actions:[{icon:"close"}]}),ut=function(e,t,i){var r;switch(t){case"positive":r={icon:"check_circle",color:"positive"};break;case"warning":r={icon:"warning",color:"orange"};break;case"error":r={icon:"report_problem",color:"negative"};break;case"rightAnswer":r={color:"positive",timeout:4e3};break;case"wrongAnswer":r={color:"orange",timeout:4e3};break;case"readMore":r={icon:"info",color:"positive",timeout:0,position:"bottom"};break;default:r={icon:"info",color:"info"};break}i&&(r.actions=i);var s=ge["a"].create(Object.assign({message:e},ct,r));return Je.notificationsArr.push(s),s},dt={data:function(){return{coinsWon:0}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.coinsWon=0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{buy:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.coinsWon=0,e.next=3,Ze.buy(t);case 3:i=e.sent,i&&i.data&&i.data.coins?(this.coinsWon=i.data.coins,this.$store.state.user.coins+=this.coinsWon):ut(this.$t("label.ErrorStandardMessage"),"error"),setTimeout(this.resetCoinsWon,2e3);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},pt=dt,ft=Object(_e["a"])(pt,ot,lt,!1,null,null,null),ht=ft.exports,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pt-lg"},[i("div",{staticClass:"q-pa-md bg-grey-8"},[i("div",{staticClass:"subtitle4 centered"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),i("div",{staticClass:"subtitle6 q-py-md"},[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[i("q-input",{attrs:{dark:"",label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))])],1),i("div",{staticClass:"centered q-pt-md"},[i("a",{on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),i("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)])])},bt=[],gt={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.submitSuggestion(this.place);case 2:t=e.sent,t&&t.data&&"ok"===t.data.status?(ut(this.$t("label.ThankYouForYourProposal"),"positive"),this.emitClose()):ut(this.$t("label.TechnicalIssue"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},vt=gt,wt=Object(_e["a"])(vt,mt,bt,!1,null,null,null),kt=wt.exports,yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-px-md"},[i("div",{staticClass:"float-right bar-link"},[e.link?i("a",{on:{click:e.clickLink}},[e._v(e._s(e.link.text))]):e._e()]),i("div",{class:"title-bar "+e.title.type+"-bar"},[e._v("\n    "+e._s(e.title.text)+"\n  ")])])},_t=[],St={props:["title","link"],methods:{clickLink:function(){this.$emit("click")}}},xt=St,Ct=Object(_e["a"])(xt,yt,_t,!1,null,null,null),qt=Ct.exports,Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-quest relative-position",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[e.quest?e._e():i("div",{staticClass:"absolute-center"},[i("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1),e.quest?i("div",[i("div",{staticClass:"centered main-quest-banner q-pa-md",staticStyle:{background:"linear-gradient(to bottom, transparent, #323232)"}},[i("div",{staticClass:"title2"},[e._v("\n        "+e._s(e.quest.title)+"\n      ")]),i("div",{staticClass:"q-pt-md q-pb-md subtitle6"},[e._v("\n        "+e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        "),i("img",{attrs:{src:"statics/images/icon/separator.png"}}),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?i("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Paying")))]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?e._e():i("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Free")))]),e.quest.availablePoints&&e.quest.availablePoints.maxPts?i("span",[i("img",{attrs:{src:"statics/images/icon/separator.png"}}),e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+" "+e._s(e.$t("label.points"))+"\n        ")]):e._e()]),i("div",[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Play"),loading:e.submitting},on:{click:e.playQuest}})],1),i("div",{staticClass:"white-overliner q-mt-md subtitle6"},[e._v("\n        "+e._s(e.$t("label."+e.quest.description))+"\n      ")])])]):e._e()])},Et=[],At={props:["quest"],data:function(){return{serverUrl:"https://api.graaly.com",submitting:!1}},methods:{playQuest:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.submitting=!0,this.$router.push("/quest/play/"+this.quest.questId);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBackgroundImage:function(){return this.quest?this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png":""}}},Pt=At,Mt=Object(_e["a"])(Pt,Tt,Et,!1,null,null,null),It=Mt.exports,Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pl-md"},[e.quests?e._e():i("div",{staticClass:"quest-small relative-position"},[i("div",{staticClass:"absolute-center"},[i("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.quests&&(e.quests.length>0||e.add)&&"small"===e.format?i("div",{staticClass:"horizontal-scroll-wrapper quests-horizontal-scroll-wrapper",class:{"quest-red":"red"===e.color}},[e.add?i("div",{staticClass:"quest-add-button relative-position q-mr-md",on:{click:function(t){return e.buildQuest()}}},[i("div",[i("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.quests,(function(t){return i("div",{key:t._id,staticClass:"quest-small relative-position q-mr-md",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[t.status&&"published"!==t.status?i("div",[i("q-chip",{attrs:{color:"status-"+t.status}},[e._v("\n          "+e._s(e.$t("status."+t.status))+"\n        ")])],1):e._e(),t.userName?i("div",[i("q-chip",{attrs:{color:"graaly-blue-dark"}},[i("q-avatar",[i("img",{attrs:{src:e.getUserBackgroundImage(t.userPicture)}})]),e._v("\n          "+e._s(t.userName)+"\n        ")],1)],1):e._e(),i("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?i("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?i("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?i("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():i("div",[i("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?i("div",[e._v("\n          €"),i("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?i("div",[e._v("\n          €€"),i("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?i("div",[e._v("\n          €€€\n        ")]):e._e(),t.rating&&t.rating.nbVoters?i("div",[i("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),i("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),i("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?i("div",["in-progress"===t.playStatus?i("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?i("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),i("div",{staticClass:"title-banner q-pl-sm"},[i("div",[t.location&&t.location.town?i("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():i("span",[e._v(" ")])]),t.title?i("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?i("div",[e._m(0,!0),i("div",{staticClass:"point-banner with-plus"},[i("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?i("div",[e._m(1,!0),i("div",{staticClass:"point-banner point-won"},[i("div",[e._v(e._s(t.points))])])]):e._e()])}))],2):e._e(),e.quests&&e.quests.length>0&&"big"===e.format?i("div",{class:{"quest-red":"red"===e.color}},e._l(e.quests,(function(t){return i("div",{key:t._id,staticClass:"quest-big relative-position q-mr-md",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?i("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?i("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?i("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():i("div",[i("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?i("div",[e._v("\n          €"),i("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?i("div",[e._v("\n          €€"),i("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?i("div",[e._v("\n          €€€\n        ")]):e._e(),t.distance?i("div",[e._v("\n          "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n        ")]):e._e(),t.rating&&t.rating.nbVoters?i("div",[i("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),i("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),i("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?i("div",["in-progress"===t.playStatus?i("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?i("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),i("div",{staticClass:"title-banner q-pl-sm"},[i("div",[t.location&&t.location.town?i("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():i("span",[e._v(" ")])]),t.title?i("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?i("div",[e._m(2,!0),i("div",{staticClass:"point-banner with-plus"},[i("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?i("div",[e._m(3,!0),i("div",{staticClass:"point-banner point-won"},[i("div",[e._v(e._s(t.points))])])]):e._e()])})),0):e._e()])},Ot=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"point-banner"},[i("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"point-banner point-won"},[i("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"point-banner"},[i("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"point-banner point-won"},[i("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])}],$t={props:["quests","format","color","add"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.png"},getUserBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")}}},Ft=$t,Nt=Object(_e["a"])(Ft,Rt,Ot,!1,null,null,null),Dt=Nt.exports,Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pl-md"},[e.users?e._e():i("div",{staticClass:"user-card-small relative-position"},[i("div",{staticClass:"centered q-pt-lg"},[i("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),"scroll"===e.format&&(e.users&&e.users.length>0||e.add)?i("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},[e.add?i("div",{staticClass:"user-card-small relative-position q-mr-md",on:{click:function(t){return e.openFriendAddPopup()}}},[i("div",{staticClass:"user-add-button"},[i("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return i("div",{key:t._id},[i("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),"list"===e.format&&(e.users&&e.users.length>0||e.add)?i("div",{staticClass:"row justify-around q-pt-sm"},[e.add?i("div",{staticClass:"user-card-small relative-position q-mr-md",on:{click:function(t){return e.openFriendAddPopup()}}},[i("div",{staticClass:"user-add-button"},[i("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return i("div",{key:t._id},[i("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),i("q-dialog",{model:{value:e.addFriend.show,callback:function(t){e.$set(e.addFriend,"show",t)},expression:"addFriend.show"}},[i("q-card",[i("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.FollowYourFriends"))+"\n        "),i("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),i("q-separator"),i("q-card-section",{staticClass:"subtitle5"},[i("newfriend",{on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},zt=[],jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",["suggestions"===e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?i("div",[e.loadingContacts?i("div",{staticClass:"centered"},[i("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n          "+e._s(e.$t("label.LoadingContacts"))+"\n        ")],1):e._e(),null===e.loadingContacts?i("div",{staticClass:"centered"},[i("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?i("div",[i("q-list",{attrs:{highlight:""}},[e._l(e.validatedContacts,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(i){return e.addFriend(t._id)}}})],1)],1)})),i("q-item",[i("q-item-section",{attrs:{avatar:""}}),i("q-item-section",[i("q-item-label",[i("a",{on:{click:function(t){e.newFriendMode="addFriend"}}},[e._v(e._s(e.$t("label.AddFriendManually")))])])],1)],1)],2)],1):e._e()]):e._e(),"addFriend"!==e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?e._e():i("div",[i("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n        \n          "+e._s(e.$t("label.FindWithEmail"))+"\n          "),i("div",{staticClass:"row q-pb-md"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{dark:"",color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n          "+e._s(e.$t("label.FindWithPhone"))+"\n          "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{dark:"",color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])])])},Ht=[],Bt=(r("7514"),r("b5ae")),Ut=function(e){var t=e.match(/\d/g);return 10===t.length},Qt={data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,serverUrl:"https://api.graaly.com",submitting:!1,loadingContacts:null,console:"",newFriendMode:"suggestions",isHybrid:window.cordova}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isHybrid||(this.newFriendMode="addFriend");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formSubmit:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.email.$error&&this.$v.form.phone.$error){e.next=5;break}return e.next=3,Ze.addFriend({email:this.form.email,phone:this.form.phone});case 3:t=e.sent,t?200===t.status?(t.data&&t.data.hasOwnProperty("status")&&"invitationsent"===t.data.status?ut(this.$t("label.InvitationSent"),"success"):(ut(this.$t("label.FriendsAdded"),"success"),this.$emit("friendadded")),this.form.email="",this.form.phone=""):t.data&&"Friend not found"===t.data.message?ut(this.$t("label.FriendNotFound"),"error"):t.data&&"Too much friends"===t.data.message?ut(this.$t("label.TooMuchFriends"),"error"):t.data&&"User can not be friend with him"===t.data.message?ut(this.$t("label.UserCanNotBeFriendWithHim"),"error"):t.data&&"Already friends"===t.data.message?ut(this.$t("label.AlreadyFriends"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return r=new FormData,r.append("image",i[0]),e.next=7,AuthService.uploadAccountPicture(r);case 7:s=e.sent,s&&s.data&&(s.data.file?this.$store.state.user.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error"));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getContacts:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.cordova?(this.loadingContacts=!0,t=new ContactFindOptions,t.filter="",t.multiple=!0,i=["displayName","emails","phoneNumbers"],navigator.contacts.find(i,this.checkContacts,this.onError,t),this.loadingContacts=!1):this.newFriendMode="addFriend";case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkContacts:function(e){for(var t=[],i=0;i<e.length;i++)if(e[i].emails&&e[i].emails.length>0){var r=e[i].emails[0].value;r=r.toLowerCase(),t.push({name:e[i].displayName,email:r})}else if(e[i].phoneNumbers&&e[i].phoneNumbers.length>0){var s=e[i].phoneNumbers[0].value,a=s.match(/\d/g);t.push({name:e[i].displayName,phone:a.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.checkContacts(t);case 2:return i=e.sent,i&&i.data&&i.data.contacts&&(this.validatedContacts=i.data.contacts),e.next=6,this.hideContactsAlreadyfriends();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideContactsAlreadyfriends:function(){var e=o()(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.listFriends();case 2:for(t=e.sent,i=t.data,r=this.validatedContacts.length-1;r>=0;r--)for(s=0;s<i.length;s++)this.validatedContacts.length>r&&this.validatedContacts[r]._id===i[s].friendId&&this.validatedContacts.splice(r,1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.addFriend(t);case 2:i=e.sent,i?(i.data&&i.data.hasOwnProperty("status")&&"invitationsent"===i.data.status?ut(this.$t("label.InvitationSent"),"success"):(ut(this.$t("label.FriendsAdded"),"success"),this.$emit("friendadded")),this.hideUserFromValidatedContacts(t)):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onError:function(e){ut(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:Bt["email"]},phone:{checkPhone:Ut}}}},Yt=Qt,Vt=Object(_e["a"])(Yt,jt,Ht,!1,null,null,null),Wt=Vt.exports,Gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative-position q-mr-md user-card",class:"user-card-"+e.size+(e.showName?" user-"+e.size+"-with-title":""),on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[i("div",{style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "}),e.showName?i("div",{staticClass:"centered subtitle6 user-card-name"},[e._v("\n    "+e._s(e.user.name)+"\n  ")]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?i("div",{staticClass:"profile-item-creator"},[i("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?i("div",{staticClass:"profile-item-level"},[i("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()])},Kt=[],Jt={props:["user","size","showName"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},Xt=Jt,Zt=Object(_e["a"])(Xt,Gt,Kt,!1,null,null,null),ei=Zt.exports,ti={components:{newfriend:Wt,userCard:ei},props:["users","add","format"],data:function(){return{addFriend:{show:!1}}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriend.show=!0},closeAddFriends:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addFriend.show=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateFriendsActivity:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("refresh");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ii=ti,ri=Object(_e["a"])(ii,Lt,zt,!1,null,null,null),si=ri.exports,ai=function(e){return e>=3e3?{level:9,next:9,max:15e3,progress:(e-3e3)/12e3}:e>=1500?{level:8,next:9,max:3e3,progress:(e-1500)/1500}:e>=800?{level:7,next:8,max:1500,progress:(e-800)/700}:e>=400?{level:6,next:7,max:800,progress:(e-400)/400}:e>=200?{level:5,next:6,max:400,progress:(e-200)/200}:e>=100?{level:4,next:5,max:200,progress:(e-100)/100}:e>=30?{level:3,next:4,max:100,progress:(e-30)/70}:e>=15?{level:2,next:3,max:30,progress:(e-15)/15}:{level:1,next:2,max:15,progress:e/15}},ni={components:{QInfiniteScroll:I["a"],QSpinnerDots:ee["a"],geolocation:nt,shop:ht,suggest:kt,mainQuest:It,titleBar:qt,questsList:Dt,usersList:si},data:function(){return{bestQuest:null,nearestQuests:null,invitationQuests:null,onTopQuests:null,friendQuests:null,users:null,search:{quests:[],text:""},user:{position:null,positionType:null,proposeAQuest:!0},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://api.graaly.com",showSearch:!1,warnings:{noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{ranking:[]},profile:{level:{},organization:{},progress:.1,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},isMounted:!1,isHybrid:window.cordova,isQuestsLoaded:!1,suggestQuest:{show:!1},innerWidth:window.innerWidth,QuestService:Xe}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;if(this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name){if(window.cordova){et.initLocalStorage();var t=this.$store.state.user.statistics.nbQuestsSuccessful;t>=1&&"false"===et.hasAlreadyHavePopup()&&(console.log("the user has done at least one quest"),et.launchpopup())}this.initPage(),this.$nextTick((function(){e.isMounted=!0}))}else this.backToLogin();this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide()},methods:{initPage:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.checkIfProfileIsComplete(),Je.clearAllRunningProcesses(),e.next=4,this.checkNetwork();case 4:return this.profile.level=ai(this.$store.state.user.score),e.next=7,this.getFriendQuests();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfProfileIsComplete:function(){18!==this.$store.state.user.story.step||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.openUpdateProfilePage()},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},onLocationSuccess:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$set(this.user,"position",t.coords),!1!==this.isQuestsLoaded&&"defaultProfilePosition"!==this.user.positionType||this.offline.active){e.next=4;break}return e.next=4,this.loadQuests();case 4:if(null!==this.users){e.next=7;break}return e.next=7,this.getCreators();case 7:this.user.positionType="userCurrentLocation";case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),startScanQRCode:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(e){if(e&&e.text){var i=Je.removeUnusedUrl(e.text);t.checkCode(i)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkCode:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.checkQRCode(t,this.$t("label.shortLang"));case 2:i=e.sent,i&&i.data&&"ok"===i.data.status?-1===t.indexOf("_score")?i.data.questId?this.playQuest(i.data.questId):this.playQuest(t):this.$router.push("/quest/"+t.substring(0,24)+"/end"):ut(this.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkNetwork:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.offline.active,i=Je.isNetworkAvailable(),this.warnings.noNetwork=!i,this.offline.active=!i,t===this.offline.active){e.next=9;break}return this.questList=[],e.next=8,this.loadQuests();case 8:this.questList[0].description="CachedQuests";case 9:Je.setTimeout(this.checkNetwork,5e3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadQuests:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.noServerReponse=!1,e.next=3,this.getQuests();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuests:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isQuestsLoaded=null,this.showBottomMenu=!1,this.offline.active){e.next=18;break}if(null!==this.user.position){e.next=7;break}return ut(this.$t("label.LocationSearching"),"warning"),this.isQuestsLoaded=!1,e.abrupt("return");case 7:return e.next=9,Xe.listHomeQuests({lng:this.user.position.longitude,lat:this.user.position.latitude});case 9:if(t=e.sent,t&&t.data){e.next=14;break}return ut(this.$t("label.TechnicalIssue"),"error"),this.isQuestsLoaded=!1,e.abrupt("return");case 14:this.isQuestsLoaded=!0,t.data.message&&"No quest"===t.data.message||(t.data.best&&(this.bestQuest=t.data.best),t.data.nearests?this.nearestQuests=t.data.nearests:this.nearestQuests=[],t.data.topQuests?this.onTopQuests=t.data.topQuests:this.onTopQuests=[],t.data.invitations&&(this.invitationQuests=t.data.invitations)),e.next=45;break;case 18:return e.next=20,Je.readFile("","quests.json");case 20:if(i=e.sent,!i){e.next=43;break}if(r=JSON.parse(i),!r||!r.list){e.next=41;break}if(s=r.list,!(s.length>0)){e.next=39;break}n=0;case 27:if(!(n<s.length)){e.next=35;break}return e.next=30,Je.readBinaryFile(s[n].questId,s[n].picture);case 30:o=e.sent,s[n].picture=o||"_default-quest-picture.png";case 32:n++,e.next=27;break;case 35:this.questList=s,this.offline.active=!0,e.next=41;break;case 39:this.warnings.noServerReponse=!0,this.isQuestsLoaded=!1;case 41:e.next=45;break;case 43:this.warnings.noServerReponse=!0,this.isQuestsLoaded=!1;case 45:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFriendQuests:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.listFriendQuests();case 2:if(t=e.sent,this.friendQuests=[],t&&t.data)for(i=0;i<t.data.length;i++)this.friendQuests.push({questId:t.data[i].questId,picture:t.data[i].questData.picture,title:t.data[i].questData.title,location:{town:t.data[i].questData.town},userPicture:t.data[i].userData.picture,userName:t.data[i].userData.name,playStatus:t.data[i].status?t.data[i].status:"succeeded",points:t.data[i].stars});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCreators:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.listSuggestions({lng:this.user.position.longitude,lat:this.user.position.latitude},10);case 2:if(t=e.sent,t&&t.data){e.next=6;break}return ut(this.$t("label.TechnicalIssue"),"error"),e.abrupt("return");case 6:t.data.message&&"No users"===t.data.message||(this.users=t.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRanking:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.rankingMissing=!1,this.$q.loading.show(),e.next=4,Ze.getRanking();case 4:t=e.sent,this.$q.loading.hide(),t&&t.data?this.success.ranking=t.data:this.warnings.rankingMissing=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},openAdminPage:function(){this.offline.active||this.$router.push("/admin")},openHowTo:function(){this.$q.dialog({message:"to complete",position:"top"})},getQuestTitle:function(e,t){return e&&e.title?e.title:this.$t("label.NoTitle")},backToLogin:function(){this.$router.push("/user/login")},buyCoins:function(){this.shop.show=!0},closeShop:function(){this.shop.show=!1},openAddFriendsModal:function(){this.friends.new.show=!0},closeAddFriends:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.friends.new.show=!1,e.next=3,this.loadFriends();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateFriendsActivity:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.friends.news.skip=0,this.friends.news.items=[],this.friends.news.items.length=0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackCallBackFunction:function(){return!1},onLocationError:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.$store.state.user.location&&this.$store.state.user.location.geometry&&this.$store.state.user.location.geometry.coordinates&&0!==this.$store.state.user.location.geometry.coordinates[0]&&null===this.user.position)){e.next=11;break}if(this.$set(this.user,"position",{longitude:this.$store.state.user.location.geometry.coordinates[0],latitude:this.$store.state.user.location.geometry.coordinates[1]}),!1!==this.isQuestsLoaded||this.offline.active){e.next=5;break}return e.next=5,this.loadQuests();case 5:if(null!==this.users){e.next=8;break}return e.next=8,this.getCreators();case 8:this.user.positionType="defaultProfilePosition",e.next=12;break;case 11:this.user.position=null;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){if(this.userIsConnected())this.$router.push("/quest/create/welcome");else{var e=this;this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToCreateAnAccount"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.openUpdateProfilePage();case 1:case"end":return t.stop()}}),t)}))))}},userIsConnected:function(){return"-"!==this.$store.state.user.name},modifyQuest:function(e){this.$router.push("/quest/builder/"+e)},readMore:function(){ut(this.$t("label.QuestDownloadFinished"),"positive")},readMoreAroundYou:function(){this.$router.push("/search/quest/around")},readMoreFriendsGames:function(){this.$router.push("/search/quest/friends")},readMoreAllCreators:function(){this.$router.push("/user/"+this.$store.state.user.id+"/friends")},openProfile:function(e){this.offline.active||(e||(e=this.$store.state.user.id),this.$router.push("/profile/"+e))},openSearch:function(){this.offline.active||this.$router.push("/search/quest/around")},openRanking:function(){this.offline.active||this.$router.push("/user/ranking/level/all")},openMap:function(){this.offline.active||this.$router.push("/map")},getProfileImage:function(){var e=this.$store.state.user;return e.picture&&-1!==e.picture.indexOf("http")?e.picture:e.picture?this.serverUrl+"/upload/profile/"+e.picture:"statics/images/icon/profile-small.png"}}},oi=ni,li=(r("a2e6"),Object(_e["a"])(oi,Ue,Qe,!1,null,null,null)),ci=li.exports,ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"div-column",staticClass:"column"},[null!==e.user.position?i("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?i("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,r){return i("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(i){return e.openQuestSummary(t,r)}}})})),e.map.loaded?i("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}):e._e(),i("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[i("div",{staticClass:"infoWindow"},[i("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),i("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?i("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?i("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?i("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?i("p",[e._v("\n            "+e._s(e.currentQuest.displayPrice)+"\n          ")]):e._e(),i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Play")))])],1)])],2):e._e()],1):e._e(),i("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}}),i("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top over-map"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:e.backToHome}})],1)],1)},di=[],pi=(r("cadf"),r("456d"),r("755e")),fi={components:{geolocation:nt},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},user:{position:null},currentQuestIndex:null,currentQuest:null,questList:[],serverUrl:"https://api.graaly.com",isMounted:!1,isHybrid:window.cordova,loadingMap:!0}},computed:{google:pi["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.initPage(),this.$nextTick((function(){e.isMounted=!0}))},methods:{initPage:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Je.clearAllRunningProcesses();case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onNewUserPosition:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$set(this.user,"position",t.coords),!1!==this.map.loaded){e.next=4;break}return e.next=4,this.reloadMap();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),centerOnUserPosition:function(){this.showBottomMenu=!1,null!==this.user.position?(this.CenterMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):Notification(this.$t("label.LocationSearching"),"warning")},CenterMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var i=this.map.infoWindow,r={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=r,this.currentQuestIndex!==t||!i.isOpen){var s=this.$refs.questMarkers[t].$markerObject;s.setAnimation(google.maps.Animation.BOUNCE),Je.setTimeout((function(){s.setAnimation(null)}),700)}if(this.currentQuestIndex===t?i.isOpen=!i.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",i.isOpen=!0,this.panTo(r)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){var a={premiumprice1:"0,99 €",premiumprice2:"1,99 €",premiumprice3:"2,99 €",premiumprice5:"4,99 €",premiumprice10:"9,99 €",premiumprice20:"19,99 €"};this.currentQuest.displayPrice=a[e.premiumPrice.androidId]}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},reloadMap:function(){var e=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.map.loaded=null,this.$q.loading.show(),e.next=4,this.getQuests();case 4:this.closeInfoWindows(),this.$refs.mapRef?(this.questList.length>0?this.$refs.mapRef.$mapPromise.then((function(e){var i=new google.maps.LatLngBounds,r=!0,s=!1,a=void 0;try{for(var n,o=t.questList[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var l=n.value;i.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(c){s=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}i.extend({lng:t.user.position.longitude,lat:t.user.position.latitude}),e.fitBounds(i)})):this.centerOnUserPosition(),this.map.loaded=!0):(this.centerOnUserPosition(),this.map.loaded=!0),this.loadingMap=!1,this.$q.loading.hide();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuests:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.showBottomMenu=!1,null!==this.user.position){e.next=4;break}return Notification(this.$t("label.LocationSearching"),"warning"),e.abrupt("return");case 4:return this.map.filter=t||"all",this.$q.loading.show(),e.next=8,Xe.listAllForCountry();case 8:if(i=e.sent,this.$q.loading.hide(),i&&i.data){e.next=13;break}return Notification(this.$t("label.TechnicalIssue"),"error"),e.abrupt("return");case 13:if(i.data.message&&"No quest"===i.data.message||(this.questList=i.data),0!==this.questList.length||"world"===this.map.filter){e.next=16;break}return e.abrupt("return",this.getQuests("world"));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getQuestLevelName:function(e){var t=Je.getById(questLevels,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),i=e.lng();this.map.center.lat===t&&this.map.center.lng===i||(this.map.centerTmp={lng:i,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},setMapIcon:function(e){return{url:"statics/images/icon/place.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},trackCallBackFunction:function(){return!1},onUserPositionError:function(e){e&&(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},backToHome:function(){this.$router.push("/home")}}},hi=fi,mi=Object(_e["a"])(hi,ui,di,!1,null,null,null),bi=mi.exports,gi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{class:{loaded:e.pageReady},attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():i("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.Loading"))+"\n      "),i("div",{staticClass:"q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?i("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.QuestNeedNetwork"))+"\n      "),i("div",[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),e.quest&&e.quest.status?i("div",{staticClass:"relative-position image-banner"},[i("div",{staticClass:"effect-kenburns",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat ;"}),i("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1),i("div",{staticClass:"q-py-sm dark-banner absolute-bottom"},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.openProfile(e.quest.authorUserId)}}},[i("q-item-section",{attrs:{side:""}},[i("q-avatar",{attrs:{size:"50px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+e.quest.author.picture}}):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",{staticStyle:{"padding-right":"84px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.name?i("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(e.quest.author.name))]):e._e()],1)],1)],1)]):e._e(),e.quest&&e.quest.status?i("div",{staticClass:"q-pa-md quest-description text-white",staticStyle:{"padding-bottom":"-50px"}},[!e.quest.availablePoints||!e.quest.availablePoints.maxPts||e.quest.customization&&e.quest.customization.removeScoring?e._e():i("div",{staticClass:"float-right quest-score",on:{click:e.showRewards}},[i("img",{attrs:{src:"statics/images/icon/point.png"}}),i("div",{staticClass:"absolute"},[e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+"\n        ")])]),e.warning.lowBattery?i("div",{staticClass:"bg-warning q-pa-sm"},[i("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n      ")],1):e._e(),e.warning.tooMuchUsers?i("div",{staticClass:"bg-warning q-pa-sm"},[i("q-icon",{attrs:{name:"warning"}}),e._v(" "+e._s(e.$t("label.TooMuchUsersCurrently"))+"\n      ")],1):e._e(),"published"!==e.quest.status?i("div",{staticClass:"bg-primary centered q-pa-sm q-mb-md"},[e._v("\n        "+e._s(e.$t("label."+("quest"===e.quest.type?"QuestDraftVersion":"PageDraftVersion")))+"\n      ")]):e._e(),i("div",{staticClass:"text-h5"},[e._v("\n        "+e._s(""===e.quest.title?e.$t("label.NoTitle"):e.quest.title)+" \n         "),e.getLanguage()!==e.$store.state.user.language?i("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()]),i("div",{staticClass:"row q-pt-md text-subtitle1 properties-bar"},[i("div",{staticClass:"q-mr-lg"},[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/difficulty.svg"}}),e._v(e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        ")]),i("div",{staticClass:"q-mr-lg"},[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/duration.svg"}}),e.quest.duration&&e.quest.duration<60?i("span",[e._v(e._s(e.quest.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),e.quest.duration&&e.quest.duration>=60?i("span",[e._v(e._s(e.quest.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e()]),"quest"!==e.quest.type||e.quest.customization&&e.quest.customization.removeScoring?e._e():i("div",{staticClass:"q-mr-lg"},[e.quest.premiumPrice.tier||"free"!==e.shop.premiumQuest.priceCode||"quest"!==e.quest.type?e._e():i("span",[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),e.shop.premiumQuest.alreadyPayed?e._e():i("span",[e._v(e._s(e.$t("label.Free")))]),e.shop.premiumQuest.alreadyPayed?i("span",[e._v(e._s(e.$t("label.AlreadyPaied")))]):e._e()]),"free"!==e.shop.premiumQuest.priceCode&&"quest"===e.quest.type?i("span",[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),i("span",[e._v(e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue))])]):e._e()]),e.quest.customization&&e.quest.customization.removeScoring?e._e():i("div",[e.quest.rating&&e.quest.rating.rounded?i("q-rating",{attrs:{readonly:"",color:"yellow-8",max:5,size:"0.8em"},model:{value:e.quest.rating.rounded,callback:function(t){e.$set(e.quest.rating,"rounded",t)},expression:"quest.rating.rounded"}}):e._e()],1)]),"room"===e.quest.type&&e.quest.premiumPrice.manual?i("div",[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),i("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.premiumPrice.tier&&"quest"===e.quest.type&&e.quest.premiumPrice.manual&&"free"===e.shop.premiumQuest.priceCode?i("div",[i("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),i("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.location&&e.quest.location.address?i("div",{staticClass:"text-subtitle1 q-mt-sm quest-location",on:{click:function(t){return e.goToLocationWithMaps(e.quest.location.coordinates[0],e.quest.location.coordinates[1])}}},[i("u",[e._v(" "+e._s(e.quest.location.address))])]):e._e(),e.quest.warning?i("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning",on:{click:function(t){return e.openWarningLink()}}},[i("q-icon",{attrs:{color:"secondary",name:"warning"}}),i("u",[e._v(e._s(e.getTranslatedData(e.quest.warning)))])],1):e._e(),e.quest.playersNumber&&e.quest.playersNumber>1?i("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning"},[i("q-icon",{attrs:{color:"secondary",name:"group"}}),e._v(" "+e._s(e.$t("label.YouNeedToBeXPlayers",{nb:e.quest.playersNumber}))+"\n      ")],1):e._e(),i("div",{staticClass:"text-subtitle1 q-mt-sm quest-ranking"},[i("a",{staticClass:"concertone",on:{click:function(t){return e.$router.push("/user/ranking/ranking/"+e.quest.questId)}}},[e._v(e._s(e.$t("label.Ranking")))])])]):e._e(),i("div",{staticClass:"quest-home-button"},[i("div",{staticClass:"text-center q-pt-md"},[i("p",["quest"!==e.quest.type||e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)||this.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||!e.getAllLanguages()?e._e():i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[e.continueQuest?i("span",[e._v(e._s(e.$t("label.ContinueTheQuest")))]):e._e(),!e.continueQuest&&e.isRunFinished?i("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))]):e._e(),e.continueQuest||e.isRunFinished?e._e():i("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]),"room"===e.quest.type&&e.quest.readMoreLink&&""!==e.quest.readMoreLink?i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:e.openReadMoreLink}},[i("span",[e._v(e._s(e.$t("label.Book")))])]):e._e(),e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyCoins()}}},[i("span",[e._v(e._s(e.$t("label.BuyCoinsToPlay")))])]),this.isUserTooFar&&!e.quest.allowRemotePlay?i("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[i("span",[e._v(e._s(e.$t("label.GetCloserToStartingPoint"))+" ("+e._s(e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m")+")")])]):e._e(),!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[i("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]),"notplayableonweb"!==e.shop.premiumQuest.priceCode||e.isAdmin||e.isOwner?e._e():i("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[i("span",[e._v(e._s(e.$t("label.QuestPlayableOnMobile")))])]),"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[i("span",[e._v(e._s(e.$t("label.TestYourQuest")))])]):e._e()],1)])]),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"text-subtitle2",domProps:{innerHTML:e._s(this.quest.description)}}),e.isUserTooFar&&!e.quest.allowRemotePlay?i("div",{staticClass:"q-pt-md"},[i("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),i("span",{domProps:{innerHTML:e._s(e.$t("label.QuestIsFarFromUser"))}})],1):e._e()]),e.isOwner||e.isAdmin?i("div",{staticClass:"q-pa-md subtitle5 centered"},[i("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),i("span",{domProps:{innerHTML:e._s(e.$t("label.YouAreQuestOwnerDesc"))}}),e._v("\n       "),i("q-btn",{attrs:{flat:"",color:"secondary",label:e.$t("label.Modify")},on:{click:function(t){return e.modifyQuest()}}})],1):e._e(),"room"===e.quest.type?i("div",{staticClass:"q-pa-md subtitle5"},[e._v("\n      "+e._s(e.$t("label.RoomDataWarning"))+"\n    ")]):e._e()]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreloaderPopup,expression:"showPreloaderPopup"}],staticClass:"panel-bottom background-dark"},[i("div",{staticClass:"centered q-pa-lg title2 text-primary background-lighter"},[i("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.InProgressPreparation")))]),i("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),i("div",[i("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n          "+e._s(e.$t("label.Warnings"))+"\n        ")]),i("div",{staticClass:"q-pa-md subtitle5"},[i("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),i("span",{domProps:{innerHTML:e._s(e.$t("label.GeneralWarning"))}})],1),e.isRunFinished?i("div",{staticClass:"q-pa-md subtitle5"},[i("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),i("span",{domProps:{innerHTML:e._s(e.$t("label.YouAlreadyDidThisQuest"))}})],1):e._e()]),e.offline.show?i("div",{staticClass:"centered"},[i("offlineLoader",{attrs:{quest:this.quest,design:"prepare",lang:e.getLanguage()},on:{end:function(t){return e.showCalibrationAndStartQuest()}}})],1):e._e(),i("gpscalibration",{ref:"gpscal",on:{end:function(t){e.startQuest(e.quest.questId,e.getLanguage())}}})],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.multiplayer.show,expression:"multiplayer.show"}],staticClass:"panel-bottom background-dark"},[i("div",{staticClass:"bottom-margin-for-keypad"},[i("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n          "+e._s(e.$t("label.ThisIsAMultiplayerGame"))+"\n        ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.JoinATeam")))])]),i("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[i("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanMultiplayerQRCode}},[i("span",[e._v(e._s(e.$t("label.ScanTheLeaderQRCode")))])])],1)],1)],1),i("div",{staticClass:"centered"},[e._v("\n          -\n          "),i("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n          -\n        ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.CreateATeam")))])]),i("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[""===e.multiplayer.qrcode?i("div",{staticClass:"centered"},[i("q-input",{attrs:{dark:"",type:"text",label:e.$t("label.TeamName"),"bottom-slots":"",counter:"",maxlength:"20"},model:{value:e.multiplayer.team,callback:function(t){e.$set(e.multiplayer,"team",t)},expression:"multiplayer.team"}}),i("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.createTeam}},[i("span",[e._v(e._s(e.$t("label.CreateTeam")))])])],1):e._e(),""!==e.multiplayer.qrcode?i("div",{staticClass:"centered"},[i("div",[e._v(e._s(e.$t("label.OtherPlayersMustScanThisQRCode")))]),i("div",{staticClass:"q-pa-md"},[i("img",{attrs:{src:e.serverUrl+"/upload/teams/"+e.multiplayer.qrcode+".png"}})]),i("div",[i("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.checkTeamAndStart}},[i("span",[e._v(e._s(e.$t("label.MyTeamIsCompleteLetsGo")))])])],1)]):e._e()])],1)],1)])])]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.shop.show,expression:"shop.show"}],staticClass:"panel-bottom background-dark"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[i("q-icon",{attrs:{name:"close"}})],1),i("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n        "+e._s(e.$t("label.BuyThisQuest"))+"\n      ")]),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&!e.isIOs?i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.YouHaveReceivedAQrCodeFrom",{author:e.quest.author.name})))])]),i("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[i("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanTierPaymentQRCode}},[i("span",[e._v(e._s(e.$t("label.ScanTheUniqueQRCode")))])])],1)],1)],1):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&e.quest.premiumPrice.active&&!e.isIOs?i("div",{staticClass:"centered"},[e._v("\n        -\n        "),i("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n        -\n      ")]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.active?i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.BuyInOneClick")))])]),i("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():i("q-btn",{staticClass:"glossy large-button text-primary bg-white",attrs:{disabled:!e.shop.premiumQuest.buyable},on:{click:function(t){return e.buyQuest()}}},[i("span",[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue)+")")])])],1)],1)],1):e._e(),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{flat:"",color:"primary"},on:{click:e.closeShop}},[e._v(e._s(e.$t("label.Cancel")))])],1)])]),i("q-dialog",{model:{value:e.showRewardsPopup,callback:function(t){e.showRewardsPopup=t},expression:"showRewardsPopup"}},[i("q-card",[i("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.ScoreAndBadges"))+"\n        "),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-separator"),i("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.OnThisEscapeGameYouCanWin"))+"\n        "),i("ul",[e.quest.availablePoints&&e.quest.availablePoints.minPts&&e.quest.availablePoints.maxPts?i("li",[e._v(e._s(e.$t("label.ScoreRange",{min:e.quest.availablePoints.minPts,max:e.quest.availablePoints.maxPts})))]):e._e(),e.quest.rewardPicture&&""!==e.quest.rewardPicture?i("li",[e._v(e._s(e.$t("label.OneBadge")))]):e._e()])])],1)],1),e.geolocationIsSupported?e._e():i("div",{staticClass:"fixed-bottom over-map"},[i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1)])],1)},vi=[],wi=(r("b54a"),{getById:function(e){return Pe().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){return Pe().get("run/quest/"+e).catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return Pe().get("run/quest/"+e+"/ranking/friends").catch((function(e){return console.log(e.request)}))},checkNumberOfPlayers:function(e){return Pe().get("run/quest/"+e+"/players/number").catch((function(e){return console.log(e.request)}))},getRankingForAQuest:function(e){return Pe().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return Pe().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e,t){return Pe().get("run/"+e+"/step/next/player/"+t).catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t,i){return Pe().get("run/"+e+"/marker/"+t+"/next/player/"+i).catch((function(e){return console.log(e.request)}))},listWonObjects:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().get("quest/"+t+"/runs/"+i+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),getHint:function(){var e=o()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s||(s="default"),e.next=3,Pe().get("run/"+t+"/step/"+i+"/version/"+r+"/hint/lang/"+s);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));function t(t,i,r,s){return e.apply(this,arguments)}return t}(),init:function(e,t,i,r,s){return s||(s="noteamnamedefined"),Pe().post("run/quest/"+e+"/version/"+t+"/init/"+i+"/remote/"+r+"/team/"+s).catch((function(e){return console.log(e.request)}))},addTeamPlayer:function(e){return Pe().post("run/join/"+e).catch((function(e){return console.log(e.request)}))},createATeam:function(e,t){return Pe().post("run/quest/"+questId+"/version/"+version+"/init/"+lang+"/remote/"+remotePlay).catch((function(e){return console.log(e.request)}))},checkTeamIsReady:function(e){return Pe().get("run/"+e+"/check/team/ready").catch((function(e){return console.log(e.request)}))},endRun:function(e,t,i,r,s){return Pe().put("run/"+e+"/quest/"+i+"/version/"+r+"/lang/"+s+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t,i){return Pe().put("run/"+e+"/passstep/"+t+"/player/"+i).catch((function(e){return console.log(e.request)}))},closeInProgressRuns:function(e){return Pe().post("run/quest/"+e+"/close").catch((function(e){return console.log(e.request)}))},createMultiplayerRunForTesters:function(e){return Pe().post("run/quest/"+e+"/test/create").catch((function(e){return console.log(e.request)}))}}),ki=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.offline.progress>0&&e.offline.progress<1?i("div",{staticClass:"centered q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():i("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():i("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.Downloading")))]),e.error.raised?e._e():i("div",{staticClass:"q-pa-md"},[i("q-linear-progress",{staticStyle:{height:"5px"},attrs:{color:"primary","track-color":"grey-1",value:e.offline.progress}}),e.isIOs?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(parseInt(100*e.offline.progress,10))+" %\n      ")]):e._e()],1),e.error.raised&&e.error.nb<2?i("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+" \n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?i("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+" \n    ")]):e._e()]):e._e()])},yi=[],_i={listForAQuest:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r||(r="default"),e.next=3,Pe().get("quest/"+t+"/version/"+i+"/steps/lang/"+r).catch((function(e){return console.log(e.request)}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listForAChapter:function(){var e=o()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s||(s="default"),e.next=3,Pe().get("quest/"+t+"/version/"+r+"/chapter/"+i+"/steps/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function t(t,i,r,s){return e.apply(this,arguments)}return t}(),listWonObjects:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().get("quest/"+t+"/version/"+r+"/steps/"+i+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),getById:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r||(r="default"),e.next=3,Pe().get("step/"+t+"/version/"+i+"/lang/"+r).catch((function(e){return console.log(e.request)}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),checkAnswer:function(){var e=o()(a.a.mark((function e(t,i,r,s,n,o){var l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("quest/"+t+"/version/"+r+"/step/"+i+"/check/"+s+"/player/"+o,n).catch((function(e){return console.log(e.request)}));case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r,s,a,n){return e.apply(this,arguments)}return t}(),countForAQuest:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().get("quest/"+t+"/version/"+i+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),save:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().put("quest/"+t.questId+"/version/"+t.version+"/step/"+t.stepId+"/update",t).catch((function(e){return console.log(e.request)}));case 2:return i=e.sent,e.next=5,Xe.removeFromCache(t.questId);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),modifyChapter:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().put("quest/"+t.questId+"/version/"+t.version+"/chapter/"+t.chapterId+"/update",t).catch((function(e){return console.log(e.request)}));case 2:return i=e.sent,e.next=5,Xe.removeFromCache(t.questId);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),remove:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().delete("quest/"+t+"/version/"+r+"/step/"+i+"/remove");case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),removeChapter:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().delete("quest/"+t+"/version/"+r+"/chapter/"+i+"/remove");case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),move:function(){var e=o()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().put("quest/"+t+"/version/"+i+"/step/"+r+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return n=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r,s){return e.apply(this,arguments)}return t}(),moveChapter:function(){var e=o()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().put("quest/"+t+"/version/"+i+"/chapter/"+r+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return n=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r,s){return e.apply(this,arguments)}return t}(),uploadBackgroundImage:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/background/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadAnswerImage:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/choose-image/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadMemoryImage:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/memory/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadCodeAnswerImage:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/code-image/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadVideo:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/video/upload",i,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadPuzzleImage:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/jigsaw-puzzle/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadItemImage:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/"+i+"/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadItemObject:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/3dobject/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadCharacterImage:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/character/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadAlternativeImage:function(){var e=o()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().post("/quest/"+t+"/step/"+i+"/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Xe.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadSnapshot:function(){var e=o()(a.a.mark((function e(t,i,r){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Pe().post("/quest/"+t+"/snapshot/upload",i,{timeout:6e5,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r(!1,e)})));case 1:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}()},Si={props:["quest","design","lang"],components:[],watch:{quest:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.saveOfflineQuest(this.quest);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{saveOfflineQuest:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.error.raised=!1,e.next=3,Xe.isCached(t.questId);case 3:if(i=e.sent,this.offline.progress=.1,console.log("is already loaded: "+i),i){e.next=12;break}return e.next=9,this.saveQuestData(t);case 9:if(r=e.sent,r){e.next=12;break}return e.abrupt("return");case 12:this.offline.progress=1,s=this,setTimeout((function(){s.$emit("end")}),3e3);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addQuestInOfflineList:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=10;break}return e.next=6,Je.readFile("","quests.json");case 6:s=e.sent,r=JSON.parse(s),e.next=11;break;case 10:r={list:[]};case 11:for(n=!1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=!0);return n||r.list.push(this.quest),e.next=16,Je.writeInFile("","quests.json",JSON.stringify(r),!0);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveQuestData:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this,Je.setTimeout(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.cancelSavingTooLong(i.quest.questId);case 2:case"end":return e.stop()}}),e)}))),42e4),e.next=4,_i.listForAQuest(t.questId,t.version,this.lang);case 4:for(r=e.sent,s=r.data.steps,n=r.data.chapters,this.quest.steps=[],l=0;l<s.length;l++)this.quest.steps.push(s[l].stepId);for(this.quest.chapters=[],l=0;l<n.length;l++)this.quest.chapters.push(n[l].chapterId);if(this.error.raised){e.next=194;break}return e.next=14,Je.writeInFile(t.questId,"quest_"+t.questId+".json",JSON.stringify(t),!0);case 14:if(c=e.sent,c){e.next=18;break}return this.throwSaveError(),e.abrupt("return",!1);case 18:return e.next=20,this.addQuestInOfflineList(t.questId);case 20:if(this.error.raised){e.next=191;break}if(this.offline.progress=.2,!t.picture||""===t.picture){e.next=29;break}return e.next=25,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.picture);case 25:if(u=e.sent,u){e.next=29;break}return this.throwSaveError(),e.abrupt("return",!1);case 29:if(this.offline.progress+=.1,!t.customization||!t.customization.character||""===t.customization.character){e.next=33;break}return e.next=33,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.customization.character);case 33:if(!t.customization||!t.customization.logo||""===t.customization.logo){e.next=36;break}return e.next=36,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.customization.logo);case 36:if(!t.customization||!t.customization.audio||""===t.customization.audio){e.next=39;break}return e.next=39,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.customization.audio);case 39:if(!r||!r.data){e.next=188;break}d=Math.ceil(70/s.length)/100,l=0;case 42:if(!(l<s.length)){e.next=175;break}if(!this.error.raised){e.next=45;break}return e.abrupt("return",!1);case 45:return p=s[l],e.next=48,Je.writeInFile(t.questId,"step_"+p.stepId+".json",JSON.stringify(p),!0);case 48:if(f=e.sent,f){e.next=52;break}return this.throwSaveError(),e.abrupt("return",!1);case 52:if(!p.backgroundImage||""===p.backgroundImage){e.next=59;break}return e.next=55,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/background/",p.backgroundImage);case 55:if(h=e.sent,h){e.next=59;break}return this.throwSaveError(),e.abrupt("return",!1);case 59:if(!p.videoStream||""===p.videoStream){e.next=66;break}return e.next=62,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/video/",p.videoStream);case 62:if(m=e.sent,m){e.next=66;break}return this.throwSaveError(),e.abrupt("return",!1);case 66:if("choose"!==p.type||!p.options||!p.options.items){e.next=80;break}b=!0,g=0;case 69:if(!(g<p.options.items.length)){e.next=80;break}if(!p.options.items[g].imagePath){e.next=77;break}return e.next=73,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/choose-image/",p.options.items[g].imagePath);case 73:if(b=e.sent,b){e.next=77;break}return this.throwSaveError(),e.abrupt("return",!1);case 77:g++,e.next=69;break;case 80:if("memory"!==p.type||!p.options||!p.options.items){e.next=94;break}v=!0,g=0;case 83:if(!(g<p.options.items.length)){e.next=94;break}if(!p.options.items[g].imagePath){e.next=91;break}return e.next=87,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/memory/",p.options.items[g].imagePath);case 87:if(v=e.sent,v){e.next=91;break}return this.throwSaveError(),e.abrupt("return",!1);case 91:g++,e.next=83;break;case 94:if("code-image"!==p.type||!p.options||!p.options.images){e.next=108;break}w=!0,g=0;case 97:if(!(g<p.options.images.length)){e.next=108;break}if(!p.options.images[g].imagePath){e.next=105;break}return e.next=101,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/code-image/",p.options.images[g].imagePath);case 101:if(w=e.sent,w){e.next=105;break}return this.throwSaveError(),e.abrupt("return",!1);case 105:g++,e.next=97;break;case 108:if("jigsaw-puzzle"!==p.type||!p.options||!p.options.picture||""===p.options.picture){e.next=115;break}return e.next=111,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/jigsaw-puzzle/",p.options.picture);case 111:if(k=e.sent,k){e.next=115;break}return this.throwSaveError(),e.abrupt("return",!1);case 115:if("new-item"!==p.type||!p.options||!p.options.picture||""===p.options.picture){e.next=129;break}if(-1!==p.options.picture.indexOf("statics")){e.next=129;break}if(!p.options.pictures||!p.options.pictures[this.lang]||""===p.options.pictures[this.lang]){e.next=123;break}return e.next=120,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/new-item/",p.options.pictures[this.lang]);case 120:y=e.sent,e.next=126;break;case 123:return e.next=125,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/new-item/",p.options.picture);case 125:y=e.sent;case 126:if(y){e.next=129;break}return this.throwSaveError(),e.abrupt("return",!1);case 129:if("character"!==p.type||!p.options||!p.options.character||""===p.options.character||"usequestcharacter"===p.options.character){e.next=137;break}if(!(p.options.character.length>3)){e.next=137;break}return e.next=133,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/character/",p.options.character);case 133:if(_=e.sent,_){e.next=137;break}return this.throwSaveError(),e.abrupt("return",!1);case 137:if("find-item"!==p.type&&"use-item"!==p.type||!p.options||!p.options.altFile||""===p.options.altFile){e.next=145;break}if(!(p.options.altFile.length>3)){e.next=145;break}return e.next=141,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/background/",p.options.altFile);case 141:if(S=e.sent,S){e.next=145;break}return this.throwSaveError(),e.abrupt("return",!1);case 145:if("locate-item-ar"!==p.type||!p.options){e.next=169;break}if(!p.options.picture||""===p.options.picture){e.next=153;break}return e.next=149,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/locate-item-ar/",p.options.picture);case 149:if(x=e.sent,x){e.next=153;break}return this.throwSaveError(),e.abrupt("return",!1);case 153:if(!p.options.is3D){e.next=169;break}if(!p.options.customModel){e.next=163;break}return e.next=157,Je.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/3dobject/",p.options.customModel+".glb");case 157:if(C=e.sent,C){e.next=161;break}return this.throwSaveError(),e.abrupt("return",!1);case 161:e.next=169;break;case 163:return e.next=165,Je.saveBinaryFile(t.questId,this.serverUrl+"/statics/3d-models/",p.options.model+".glb");case 165:if(q=e.sent,q){e.next=169;break}return this.throwSaveError(),e.abrupt("return",!1);case 169:if(!this.error.raised){e.next=171;break}return e.abrupt("return",!1);case 171:this.offline.progress+=d;case 172:l++,e.next=42;break;case 175:l=0;case 176:if(!(l<n.length)){e.next=188;break}if(!this.error.raised){e.next=179;break}return e.abrupt("return",!1);case 179:return e.next=181,Je.writeInFile(t.questId,"chapter_"+n[l].chapterId+".json",JSON.stringify(n[l]),!0);case 181:if(T=e.sent,T){e.next=185;break}return this.throwSaveError(),e.abrupt("return",!1);case 185:l++,e.next=176;break;case 188:return e.abrupt("return",!0);case 191:return e.abrupt("return",!1);case 192:e.next=195;break;case 194:return e.abrupt("return",!1);case 195:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),throwSaveError:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ut(this.$t("label.ErrorOfflineSaving"),"error"),this.error.raised=!0,this.error.nb++,t=this,this.$q.dialog({dark:!0,message:t.$t("label.ErrorDownloadNeedsToRestart"),ok:!0,cancel:!0}).onCancel(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$router.push("/home");case 1:case"end":return e.stop()}}),e)})))).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.cancelOfflineLoading(),t.removeOfflineData(),t.saveOfflineQuest(quest);case 3:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelSavingTooLong:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===this.offline.progress||1===this.offline.progress||this.error.raised||(ut(this.$t("label.ErrorOfflineSaving"),"error"),this.error.raised=!0,this.error.nb++);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelOfflineLoading:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,Je.setTimeout(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.removeOfflineData(t.quest.questId);case 2:case"end":return e.stop()}}),e)}))),7e3),ut(this.$t("label.CancelOfflineWarning"),"warning"),this.offline.progress=0,this.$emit("end");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeOfflineData:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.removeDirectory(t);case 2:return i=e.sent,e.next=5,this.removeQuestFromOfflineList(t);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeQuestFromOfflineList:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=13;break}return e.next=6,Je.readFile("","quests.json");case 6:for(s=e.sent,r=JSON.parse(s),n=-1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=o);return-1!==n&&r.list.splice(n,1),e.next=13,Je.writeInFile("","quests.json",JSON.stringify(r),!0);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},xi=Si,Ci=Object(_e["a"])(xi,ki,yi,!1,null,null,null),qi=Ci.exports,Ti=r("b06b"),Ei=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{model:{value:e.geolocationshowCalibration,callback:function(t){e.geolocationshowCalibration=t},expression:"geolocationshowCalibration"}},[i("div",{staticClass:"bg-black centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),i("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.WaveThePhoneForGPSPrecision")))])])])},Ai=[],Pi={data:function(){return{geolocationshowCalibration:!1}},methods:{askUserToCalibrateGPS:function(e){var t=this;this.geolocationshowCalibration=!0,setTimeout((function(){t.closeGPSCalibration(e)}),5500)},closeGPSCalibration:function(e){this.geolocationshowCalibration=!1,null!==e&&void 0!==e&&"locate-item-ar"===e?this.$emit("endvertical"):this.$emit("end")}}},Mi=Pi,Ii=Object(_e["a"])(Mi,Ei,Ai,!1,null,null,null),Ri=Ii.exports,Oi=r("b047c"),$i=r.n(Oi),Fi={components:{shop:ht,offlineLoader:qi,gpscalibration:Ri},data:function(){return{quest:{},ranking:{show:!1,items:[]},playStep:0,shop:{show:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1,alreadyPayed:!1}},offline:{active:!1,show:!1},warning:{questNotLoaded:!1,lowBattery:!1,tooMuchUsers:!1},serverUrl:"https://api.graaly.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isOwner:!1,isAdmin:!1,showRewardsPopup:!1,showPreloaderPopup:!1,multiplayer:{show:!1,team:"",qrcode:""},geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,distanceFromStart:0,pageReady:!1,isHybrid:window.cordova,isIOs:Je.isIOS()}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Je.clearAllRunningProcesses(),window.addEventListener("batterystatus",this.checkBattery,!1),e.next=4,this.initQuest();case 4:this.$store.state.history={items:[],index:0};case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updated:$i()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*Je.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),Je.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0}),(function(){e.geolocationIsSupported=!1,Je.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3)}),{timeout:1e4,maximumAge:1e4}):(this.geolocationIsSupported=!1,Je.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3))},initQuest:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.id);case 2:if(window.cordova&&this.quest.premiumPrice&&this.quest.premiumPrice.androidId&&store.products.length>0&&this.$router.go(0),this.checkUserIsCloseFromStartingPoint(),this.$store.state.user.isAdmin&&(this.isAdmin=!0),this.quest.editorsUserId)for(t=0;t<this.quest.editorsUserId.length;t++)this.quest.editorsUserId[t]===this.$store.state.user._id&&(this.isOwner=!0);else this.$store.state.user._id===this.quest.authorUserId&&(this.isOwner=!0);if(!this.offline.active||!this.isOwner&&!this.isAdmin){e.next=9;break}return e.next=9,this.getQuest(this.quest.questId,!0);case 9:return e.next=11,this.getRun();case 11:return e.next=13,this.checkUserCanPlay();case 13:return e.next=15,this.initPay();case 15:return e.next=17,this.checkSimultaneousPlayers();case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuest:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o,l,c=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.isCached(t);case 2:if(r=e.sent,r&&!i){e.next=22;break}return this.offline.active=!1,e.next=7,Xe.getLastById(t);case 7:if(s=e.sent,!s||!s.data||200!==s.status){e.next=18;break}if(this.quest=s.data,"undefined"===typeof this.quest.authorUserId){e.next=16;break}return e.next=13,Me.getAccount(this.quest.authorUserId);case 13:s=e.sent,s&&s.data&&this.$set(this.quest,"author",s.data),this.quest.description=Je.replaceBreakByBR(this.quest.description);case 16:e.next=20;break;case 18:throw this.$q.dialog({dark:!0,title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue"),ok:this.$t("label.BackToMap")}).onOk((function(){c.backToTheMap()})),new Error("Could not load quest with questId = '"+t+"'");case 20:e.next=42;break;case 22:return this.offline.active=!0,e.next=25,Je.readFile(t,"quest_"+t+".json");case 25:if(n=e.sent,n){e.next=37;break}if(!i){e.next=31;break}this.warning.questNotLoaded=!0,e.next=35;break;case 31:return e.next=33,this.getQuest(t,!0);case 33:return o=e.sent,e.abrupt("return",o);case 35:e.next=42;break;case 37:return this.quest=JSON.parse(n),e.next=40,Je.readBinaryFile(t,this.quest.picture);case 40:l=e.sent,this.quest.picture=l||"_default-quest-picture.png";case 42:return e.abrupt("return",!0);case 43:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),showCalibrationAndStartQuest:function(){this.quest.hasGeolocationSteps?this.$refs.gpscal.askUserToCalibrateGPS():this.startQuest(this.quest.questId,this.getLanguage())},getRun:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.listForAQuest(this.quest.questId);case 2:if(t=e.sent,!(t&&t.data&&t.data.length>0)){e.next=8;break}for(i=0;i<t.data.length;i++)"finished"===t.data[i].status&&(this.isRunFinished=!0),"in-progress"===t.data[i].status&&t.data[i].currentStep&&(this.isRunStarted=!0);this.isRunStarted&&(this.continueQuest=!0,this.isOwner||this.startQuest(this.quest.questId,this.$route.params.lang)),e.next=12;break;case 8:return e.next=10,Xe.isCached(this.quest.questId);case 10:r=e.sent,r&&(this.continueQuest=!0);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkSimultaneousPlayers:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.quest.limitNumberOfPlayer){e.next=5;break}return e.next=3,wi.checkNumberOfPlayers(this.quest.questId);case 3:t=e.sent,t&&t.data&&parseInt(t.data,10)>=this.quest.limitNumberOfPlayer&&(this.warning.tooMuchUsers=!0);case 5:return e.next=7,Je.writeInFile(this.quest.questId,"run_"+this.quest.questId+".json",JSON.stringify({}),!1);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkBattery:function(e){e.level<50?this.warning.lowBattery=!0:this.warning.lowBattery=!1},checkUserCanPlay:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isRunStarted&&!this.isRunFinished){e.next=2;break}return e.abrupt("return",!0);case 2:if(!(this.quest.price>this.$store.state.user.coins)||this.isAdmin||this.isOwner){e.next=5;break}return this.isRunPlayable=!1,e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initPay:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.premiumPrice&&this.quest.premiumPrice.androidId){e.next=2;break}return e.abrupt("return","free");case 2:if(this.quest.premiumPrice.active){e.next=4;break}return e.abrupt("return","free");case 4:if(!this.isRunStarted&&!this.isRunFinished){e.next=6;break}return e.abrupt("return","free");case 6:if(window.cordova){e.next=10;break}return this.isAdmin||this.isOwner||ut(this.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),this.shop.premiumQuest.priceCode="notplayableonweb",e.abrupt("return");case 10:if(this.quest.premiumPrice&&this.quest.premiumPrice.androidId){e.next=13;break}return ut(this.$t("label.ErrorStandardMessage"),"error"),e.abrupt("return");case 13:return e.next=15,Xe.hasPayed(this.quest.questId);case 15:if(t=e.sent,!(t&&t.data&&t.data.status&&"paied"===t.data.status)){e.next=20;break}return this.shop.premiumQuest.priceCode="free",this.shop.premiumQuest.alreadyPayed=!0,e.abrupt("return","free");case 20:this.shop.premiumQuest.priceCode=this.quest.premiumPrice.androidId,store.register({id:this.quest.premiumPrice.androidId,alias:this.quest.premiumPrice.androidId,type:store.CONSUMABLE}),store.error((function(e){ut(e.message+"(code: "+e.code+")","error")})),store.when(this.quest.premiumPrice.androidId).updated(this.displayPrice),store.when(this.quest.premiumPrice.androidId).approved((function(e){e.verify()})),store.when(this.quest.premiumPrice.androidId).verified(function(){var e=o()(a.a.mark((function e(t){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.savePurchase(t);case 2:r=e.sent,r?t.finish():ut(i.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),store.refresh();case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),displayPrice:function(e){this.shop.premiumQuest.priceValue=e.price,e.canPurchase&&(this.shop.premiumQuest.buyable=!0)},savePurchase:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.purchasePremium(this.quest.questId,t);case 2:if(i=e.sent,!(i&&i.data&&i.data.status&&"ok"===i.data.status)){e.next=7;break}return this.playStep=1,this.playQuest(this.quest.questId,this.$route.params.lang),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),buyQuest:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order(this.quest.premiumPrice.androidId);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addFriend:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Ze.addFriend(t);case 3:if(i=e.sent,this.$q.loading.hide(),i)for(r=0;r<this.ranking.items.length;r++)this.ranking.items[r].id===t&&(this.ranking.items[r].isFriend=!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t;if(t=this.isOwner||this.isAdmin?e.languages:e.languages.filter((function(e){return e.published})),t&&t.length>0){for(var i="",r=0;r<t.length;r++)t[r].lang===this.$store.state.user.language&&(i=this.$store.state.user.language);""===i&&t.length>0&&(i=t[0].lang)}else e.languages.length>0&&(i=e.languages[0].lang);return i},getTranslatedData:function(e){var t=this.getLanguage();return e[t]?e[t]:(this.quest.warning=null,"")},openWarningLink:function(){this.quest&&this.quest.warning&&this.quest.warning.link&&Je.openExternalLink(this.quest.warning.link)},goToLocationWithMaps:function(e,t){Object(Ti["a"])("https://maps.google.com/?daddr=".concat(t,",").concat(e))},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},playQuest:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.playStep||!this.quest.premiumPrice||!this.quest.premiumPrice.tier&&!this.quest.premiumPrice.active||this.isAdmin||this.isOwner||this.isRunFinished||this.isRunStarted){e.next=11;break}if(!this.quest.premiumPrice.tier){e.next=8;break}return e.next=4,Xe.checkTierPayment(t);case 4:r=e.sent,200===r.status?this.startPreloader():this.shop.show=!0,e.next=9;break;case 8:this.shop.show=!0;case 9:e.next=12;break;case 11:this.playStep<=1&&this.quest.playersNumber>1&&!this.continueQuest?(this.shop.show=!1,this.multiplayer.show=!0):this.startPreloader();case 12:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),startPreloader:function(){if(this.shop.show=!1,this.multiplayer.show=!1,this.showPreloaderPopup=!0,this.isHybrid)this.offline.show=!0;else{var e=this;setTimeout((function(){e.showCalibrationAndStartQuest()}),3e3)}},openProfile:function(e){this.$router.push("/profile/"+e)},scanMultiplayerQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&(-1===t.text.indexOf("team_")?ut(e.$t("label.ThisIsNotATeamQRCodeValid"),"error"):e.checkTeamCode(t.text))}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},scanTierPaymentQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkTierPaymentCode(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},checkTeamCode:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.addTeamPlayer(t);case 2:i=e.sent,200===i.status?(this.playStep=2,this.playQuest(this.quest.questId,this.$route.params.lang)):ut(this.$t("label.ErrorMessageForNewTeamMember"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkTierPaymentCode:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.useTierPaymentCode(this.quest.questId,t);case 2:i=e.sent,200===i.status?(this.playStep=1,this.playQuest(this.quest.questId,this.$route.params.lang)):ut(this.$t("label.TechnicalIssueOrCodeAlreadyUsed"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createTeam:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.multiplayer.team||""===this.multiplayer.team){e.next=7;break}return e.next=3,wi.init(this.quest.questId,this.quest.version,this.$route.params.lang,this.isUserTooFar,this.multiplayer.team);case 3:t=e.sent,200===t.status&&t.data&&t.data._id?(this.multiplayer.runId=t.data._id,this.multiplayer.qrcode=t.data._id):ut(this.$t("label.ErrorStandardMessage"),"error"),e.next=8;break;case 7:ut(this.$t("label.PleaseEnterYourTeamName"),"error");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkTeamAndStart:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.checkTeamIsReady(this.multiplayer.runId);case 2:t=e.sent,200===t.status?(this.playStep=2,this.playQuest(this.quest.questId,this.$route.params.lang)):t.data&&t.data.members&&t.data.members.length>0?(i=t.data.members.join(", "),ut(this.$t("label.YouNeedMoreMembersToPlay",{nb:this.quest.playersNumber,members:i}),"warning")):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openReadMoreLink:function(){Je.openExternalLink(this.quest.readMoreLink)},startQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar)},showRewards:function(){this.showRewardsPopup=!0},backToTheMap:function(){this.$router.back()},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){return this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png"}}},Ni=Fi,Di=Object(_e["a"])(Ni,gi,vi,!1,null,null,null),Li=Di.exports,zi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.warnings.stepDataMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n  ")],1):e._e(),e.warnings.isNetworkLow?i("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?i("div",{staticClass:"centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?i("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():i("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),i("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),e.info&&""!==e.info.audio?i("audio",{attrs:{id:"background-music",autoplay:"",loop:"",src:e.info.audio}}):e._e(),i("stepPlay",{attrs:{step:e.step,runId:e.run._id,inventory:e.inventory,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,customization:e.info.quest.customization?e.info.quest.customization:{color:"primary"},answer:e.offline.answer,player:e.player},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.nextStep(!0)},hideButtons:e.hideFooterButtons,showButtons:e.showFooterButtons,msg:e.trackMessage}}),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[i("div",{staticClass:"q-pa-md"},[i("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[i("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),i("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"===this.step.type?i("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"!==this.step.type?i("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryZoom")))]):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():i("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),i("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,r){return i("div",{key:r,on:{click:function(i){return e.selectItem(t)}}},[i("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?i("p",[e._v(e._s(t.titles[e.lang]))]):e._e(),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?e._e():i("p",[e._v(e._s(t.title))])])})),0)])])]),i("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[i("div",{staticClass:"bg-white centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}),i("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),i("div",{staticClass:"q-pa-md text-grey"},[e._v(e._s(e.$t("label.YouCanNotUseAnItemInThisStep")))]),i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[i("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}]},[e.warnings.questDataMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.getQuest(e.questId)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():i("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[e.info&&""!==e.info.audio?i("div",{staticClass:"fixed-top align-right full-width q-pa-lg"},["play"===e.sound.status?i("q-btn",{attrs:{flat:"",color:"white",icon:"volume_off"},on:{click:e.cutSound}}):e._e(),"pause"===e.sound.status?i("q-btn",{attrs:{flat:"",color:"white",icon:"volume_up"},on:{click:e.cutSound}}):e._e()],1):e._e(),i("div",{staticClass:"text-center dark-banner q-pb-xl q-pt-md fixed-bottom"},[i("p",{staticClass:"title"},[e._v("\n            "+e._s(e.info.quest&&e.info.quest.title?e.info.quest.title:e.$t("label.NoTitle"))+"\n          ")]),e.run&&e.run.team&&e.run.team.name?i("p",[e._v("\n            "+e._s(e.$t("label.Team"))+" : "+e._s(e.run.team.name)+"\n          ")]):e._e(),i("p",[e.info.quest&&e.info.quest.customization&&e.info.quest.customization.removeScoring?e._e():i("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[i("span",[e._v("\n                "+e._s(e.$t("label.LeaveQuest"))+"\n              ")])])],1),i("p",[e.info.quest&&e.info.quest.playersNumber&&e.info.quest.playersNumber<2?i("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.restartGame}},[i("span",[e._v("\n                "+e._s(e.$t("label.RestartQuest"))+"\n              ")])]):e._e()],1),i("p",[e.offline.active?e._e():i("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[i("span",[e._v("\n                "+e._s(e.$t("label.Feedback"))+"\n              ")])])],1),i("p",{staticClass:"q-pb-xl"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"secondary"},on:{click:e.openInfo}},[i("span",[e._v("\n                "+e._s(e.$t("label.BackToQuest"))+"\n              ")])])],1),i("p",{staticClass:"q-pb-lg"})])])])]),e.hint.isOpened?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:"hint",data:{hint:e.hint.label,character:e.info.quest.customization&&e.info.quest.customization.character&&""!==e.info.quest.customization.character?-1===e.info.quest.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.info.quest.customization.character:e.info.quest.customization.character:"3"}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),i("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[i("div",{staticClass:"bg-white q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),i("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[i("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),i("div",{staticClass:"q-pa-md q-gutter-sm centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),i("div",{staticClass:"q-pt-md"},[i("a",{staticClass:"dark",on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Cancel")))])])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu fixed-bottom"},[i("div",{staticClass:"row white-buttons"},[i("div",{staticClass:"col centered q-pb-md"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():i("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}}),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?i("q-btn",{staticClass:"bg-white",staticStyle:{"padding-top":"0 !important"},attrs:{round:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[i("q-avatar",{attrs:{size:"60px"}},[i("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}},[this.step&&this.step.hint?i("q-badge",{attrs:{color:"secondary",floating:""}},[e._v(e._s(this.hint.remainingNumber))]):e._e()],1)],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",disable:0===e.$store.state.history.index,icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.next.enabled||e.next.canPass,expression:"next.enabled || next.canPass"}],class:{flashing:e.next.suggest,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])])],1)},ji=[],Hi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fit",class:{"bg-black":"locate-marker"===e.step.type||"sensor"===e.step.id,loaded:e.pageReady},attrs:{id:"play-view"}},[i("div",{class:{"effect-kenburns":e.step.options&&e.step.options.kenBurnsEffect},staticStyle:{width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},attrs:{id:"background-image"}}),i("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden"},[null!==e.step.countDownTime&&void 0!==e.step.countDownTime&&!0===e.step.countDownTime.enabled?i("q-linear-progress",{staticClass:"timer-progress-bar",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{value:e.map(this.countdowntimeleft,0,this.step.countDownTime.time,0,1),color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"white":"primary","instant-feedback":!0}}):e._e(),e.isNetworkLow?i("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type||"help"==e.step.type?i("div",{staticClass:"info"},[e.showTools&&""!=e.getTranslatedText()?i("div",{class:{grow:!e.step.videoStream},attrs:{id:"info-clickable"}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"help"!==e.step.type?i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1):e._e()]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1),e.step.videoStream?i("div",{staticClass:"video"},[i("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[i("source",{attrs:{src:-1!==e.step.videoStream.indexOf("blob:")?e.step.videoStream:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream,type:"video/mp4"}})])]):e._e()]):e._e(),"help"==e.step.type?i("div",{staticStyle:{overflow:"auto","margin-bottom":"80px"}},[i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessage"))}}),e.step.options&&e.step.options.helpNext?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageNextMessage"))}}):e._e(),e.step.options&&e.step.options.helpPrevious?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessagePreviousMessage"))}}):e._e(),e.step.options&&e.step.options.helpInventory?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageInventoryMessage"))}}):e._e(),e.step.options&&e.step.options.helpHint?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageHintMessage"))}}):e._e(),i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageEnd"))}})]):e._e(),"new-item"==e.step.type?i("div",{staticClass:"new-item"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{staticClass:"item"},[i("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture}}),i("p",[e._v(e._s(e.step.options.title))])])]):e._e(),"end-chapter"==e.step.type?i("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"character"==e.step.type?i("div",{staticClass:"character"},[i("div",{staticClass:"fixed-bottom story",on:{click:function(t){return e.nextCharacterBubbleText()}}},[e._m(0),i("div",{staticClass:"bubble-middle",staticStyle:{"font-size":"0.9em",background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[e.character.needToScroll?i("div",{staticClass:"scroll-indicator"},[i("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),!(e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber])||e.step.options&&e.step.options.html?e._e():i("p",{ref:"bubbleText",staticClass:"carrier-return"},[e._v(e._s(e.character.bubbleText[e.character.bubbleNumber]))]),e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber]&&e.step.options&&e.step.options.html?i("p",{ref:"bubbleTextHtml",staticClass:"text",domProps:{innerHTML:e._s(e.character.bubbleText[e.character.bubbleNumber])}}):e._e(),e.character.bubbleNumber<e.character.numberOfBubble-1?i("p",{staticClass:"text text-grey"},[e._v(e._s(e.$t("label.ReadNext")))]):e._e()]),e._m(1),i("div",{staticClass:"character"},[e.step.options.character.length<3?i("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.step.options.character+"_attitude1.png"}}):e._e(),e.step.options.character.length>2&&"usequestcharacter"!==e.step.options.character?i("img",{staticStyle:{"max-width":"100%","max-height":"200px","vertical-align":"bottom"},attrs:{src:-1!==e.step.options.character.indexOf("blob:")?e.step.options.character:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.step.options.character}}):e._e(),"usequestcharacter"===e.step.options.character?i("img",{staticStyle:{"max-width":"100%","max-height":"200px","vertical-align":"bottom"},attrs:{src:-1===e.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]),i("div",{staticClass:"full-width bg-black",staticStyle:{height:"70px"}})])]):e._e(),"choose"==e.step.type?i("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?i("div",[i("div",{on:{click:e.hideControlsTemporaly}},[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),"text"===e.answerType?i("div",{staticClass:"answers-text"},e._l(e.step.options.items,(function(t,r){return i("q-btn",{key:r,staticClass:"full-width shadowed",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+r},on:{click:function(t){return e.checkAnswer(r)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():i("span",[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?i("span",[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?i("div",{staticClass:"answers-images"},[i("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,r){return i("div",{key:r,class:t.class,attrs:{"test-id":"answer-image-"+r},on:{click:function(t){return e.checkAnswer(r)}}},[i("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?i("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e(),i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-keypad"==e.step.type?i("div",{staticClass:"code"},[e.showTools?i("div",[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{staticClass:"typed-code"},[i("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)])]),i("div",{staticClass:"keypad"},[i("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,r){return i("div",{key:r},e._l(t,(function(t,r){return i("q-btn",{key:r,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(i){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mb-md q-px-md"},[i("div",[i("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[i("div",[e._v("\n                  "+e._s(e.$t("label.Clear"))+"\n                ")])]),i("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[i("div",[e._v("\n                  "+e._s(e.$t("label.Confirm"))+"\n                ")])])],1)]),i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-color"==e.step.type?i("div",{staticClass:"code code-color"},[e.showTools?i("div",[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{staticClass:"color-bubbles"},e._l(e.playerCode,(function(t,r){return i("div",{key:r,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[r],attrs:{"test-id":"color-code-"+r},on:{click:function(t){return e.changeColorForCode(r)}}},[e._v(" ")])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[i("div",[i("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[i("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-image"==e.step.type?i("div",{staticClass:"code code-image"},[e.showTools?i("div",[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("table",[i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,staticClass:"text-center"},[i("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+r},on:{click:function(t){return e.previousCodeAnswer(r)}}})],1)})),0),i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r},[i("img",{attrs:{id:"image-code-"+r,src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(r)}}})])})),0),i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,staticClass:"text-center"},[i("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+r},on:{click:function(t){return e.nextCodeAnswer(r)}}})],1)})),0)]),i("div",{staticClass:"centered text-grey q-py-md"},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[i("div",[i("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[i("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"geolocation"==e.step.type?i("div",{staticClass:"geolocation"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e(),e.step.showDistanceToTarget&&e.geolocation.active?i("p",{staticClass:"text"},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e()])]):e._e(),"write-text"==e.step.type?i("div",{staticClass:"write-text"},[e.showTools?i("div",[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{staticClass:"answer-text q-pa-md"},[i("input",{staticClass:"subtitle6",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),i("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer"},on:{click:function(t){return e.checkAnswer()}}},[i("div",[e._v(e._s(e.$t("label.ConfirmTheAnswer")))])])],1),i("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"no-box-shadow hide-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"color: "+e.customization.color:"",attrs:{flat:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"jigsaw-puzzle"===e.step.type?i("div",{staticClass:"puzzle"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return i("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(i){return e.movePieceWithClick(t.pos)}}},[i("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),i("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),i("div",{staticClass:"q-mt-lg background-lighter4 q-pa-md"},["drag"===e.puzzle.mode?i("div",{staticClass:"centered arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpText"))+"\n          ")]):e._e(),"click"===e.puzzle.mode?i("div",{staticClass:"centered text-primary q-pt-lg arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n          ")]):e._e(),"drag"===e.puzzle.mode?i("div",{staticClass:"centeredq-pt-sm"},[i("a",{staticClass:"text-black",on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()])]):e._e(),"memory"===e.step.type?i("div",{staticClass:"puzzle"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("ul",{staticClass:"memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,r){return i("li",{key:r,staticClass:"card",class:{open:t.isClicked,show:t.isClicked,disabled:t.isFound||e.stepPlayed,match:t.isFound},on:{click:function(t){return e.selectMemoryCard(r)}}},[t.imagePath?i("img",{attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}}):e._e()])})),0)]):e._e(),"use-item"==e.step.type?i("div",{staticClass:"use-item"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.useItem(t)}}},[i("img",{staticStyle:{position:"relative","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?i("p",{staticClass:"inventory-btn"},[i("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"}},[e.itemUsed&&e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?i("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e(),!e.itemUsed||e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?e._e():i("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}})]),e._v("\n        "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n      ")],1):e._e(),"find-item"==e.step.type?i("div",{staticClass:"find-item"},[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),i("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.findItem(t)}}},[i("img",{staticStyle:{position:"absolute","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play0",src:"statics/icons/game/find-item-locator.png"}}),i("img",{staticStyle:{position:"absolute","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play1",src:"statics/icons/game/find-item-locator.png"}}),i("img",{staticStyle:{position:"absolute","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play2",src:"statics/icons/game/find-item-locator.png"}}),i("img",{staticStyle:{position:"absolute","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play3",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"==e.step.type?i("div",{staticClass:"locate-item-ar"},[i("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult&&e.geolocation.active,expression:"cameraStreamEnabled && playerResult === null && geolocation.active"}],ref:"camera-stream-for-locate-item-ar"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&this.geolocation.active,expression:"playerResult === null && this.geolocation.active"}]},[i("div",{staticClass:"text"},[i("p",[e._v(e._s(e.getTranslatedText()))]),e.step.showDistanceToTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e(),!e.geolocation.canSeeTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]):e._e(),e.geolocation.canTouchTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||null!==e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult !== null && step.options && step.options.is3D)"}],staticClass:"target-view"},[i("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),i("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})],1):e._e(),"image-over-flow"==e.step.type?i("div",{staticClass:"image-over-flow"},[i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-image-over-flow"}),i("div",[e.isHybrid&&!e.takingSnapshot?i("div",{staticStyle:{position:"absolute",top:"8px",right:"8px","z-index":"1990"}},[i("q-btn",{staticClass:"text-white q-mr-md",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"flip_camera_ios"},on:{click:function(t){return e.switchCamera()}}}),e.step.options&&e.step.options.snapshotAllowed?i("q-btn",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"photo_camera"},on:{click:function(t){return e.prepareSnapshot()}}}):e._e()],1):e._e(),!e.isIOs&&e.takingSnapshot?i("img",{staticStyle:{position:"absolute",top:"0",left:"0",height:"100%",width:"auto","z-index":"1980"},attrs:{id:"snapshotImage"}}):e._e(),e.isIOs&&e.takingSnapshot?i("img",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"1980"},attrs:{id:"snapshotImageIos"}}):e._e(),i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e()]),e.step.options&&(e.step.options.fullWidthPicture||e.step.options.redFilter)?e._e():i("div",{ref:"ImageOverFlowPicture",staticClass:"image",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw; z-index: 1985;"}),e.step.options&&e.step.options.fullWidthPicture&&!e.step.options.redFilter?i("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985"},attrs:{src:e.getBackgroundImage()}}):e._e(),e.step.options&&e.step.options.redFilter?i("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985","mix-blend-mode":"multiply",opacity:"0.8"},attrs:{src:"statics/images/background/red.png"}}):e._e()])]):e._e(),"locate-marker"==e.step.type||"sensor"==e.step.id?i("div",{staticClass:"locate-marker"},[i("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text"},[i("p",[e._v(e._s(e.getTranslatedText()))]),e.isHybrid?e._e():i("p",[e._v(e._s(e.$t("label.ThisStepOnlyWorkOnMobile")))])])]),e.locateMarker.compliant&&null===e.playerResult&&!e.isHybrid?i("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){e.locateMarker.showHelp=!0}}},[i("span",[e._v("?")])]):e._e(),e.locateMarker.compliant&&null===e.playerResult&&e.isHybrid?i("div",{staticClass:"text-white centered q-mt-md"},[e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?i("div",[e._v(e._s(e.customization.qrCodeMessage[e.lang]))]):e._e(),e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?e._e():i("div",[e._v(e._s(e.$t("label.ScanTheMarkersLikeThat")))]),e._m(2),e._v("\n          "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n          "),i("div",[i("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.startScanQRCode()}}},[i("div",[e._v(e._s(e.$t("label.LaunchTheScanner")))])])],1)]):e._e(),i("div",{staticClass:"text-center"},[e.locateMarker.compliant?e._e():i("div",[e._v("\n            "+e._s(e.$t("label.YourPhoneIsNotCompliantWithThisStepType"))+"\n          ")]),e.playerResult&&e.locateMarker.compliant&&"scan"==e.step.options.mode?i("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.locateMarker.compliant,expression:"locateMarker.compliant"}],staticClass:"marker-view"},[i("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"marker-canvas"},on:{click:e.onTargetCanvasClick}})])]),e.locateMarker.showHelp?i("div",{staticClass:"fixed-bottom over-map",staticStyle:{height:"100%"}},[i("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&"scan"===e.step.options.mode?"FindMarkerHelp":"TouchObjectOnMarkerHelp"}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e(),"wait-for-event"==e.step.type?i("div",[i("div",[""!=e.getTranslatedText()?i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]):e._e(),"distance"===e.step.options.object&&null!==e.iot.distance?i("h2",{staticClass:"centered big q-pb-lg",class:{right:!0===e.playerResult}},[e._v("\n            "+e._s(e.iot.distance)+" cm\n          ")]):e._e(),"pot"===e.step.options.object&&null!==e.iot["pot1"]?i("div",e._l([1,2,3],(function(t){return i("q-linear-progress",{key:t,staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["pot"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})})),1):e._e(),"keypad"===e.step.options.object?i("div",[i("p",[e._v(e._s(e.$t("label.KeypadInput")))]),i("p",{ref:"iot-keypad",staticClass:"iot-keypad",class:{right:!0===e.playerResult,wrong:!1===e.playerResult,shake:!1===e.playerResult}},[e._v(e._s(e.iot.keypadAnswer))])]):e._e(),"joystick"===e.step.options.object&&null!==e.iot["axisX"]?i("div",e._l(["X","Y"],(function(t){return i("div",{key:t},[i("p",[e._v(e._s("X"===t?e.$t("label.Horizontal"):e.$t("label.Vertical")))]),i("q-linear-progress",{staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["axis"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})],1)})),0):e._e(),"button"===e.step.options.object&&!0===e.playerResult?i("div",[i("p",{staticClass:"right q-pb-md q-px-md q-my-md"},[e._v(e._s(this.step.options.message))])]):e._e()])]):e._e(),"trigger-event"==e.step.type?i("div",{staticClass:"trigger-event"},[""!=e.getTranslatedText()?i("p",{staticClass:"text",staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.getTranslatedText()))]):e._e(),"chest"!==e.step.options.object||"relay"===e.step.options.object?i("div",[e.step.options.triggerMode&&"manual"===e.step.options.triggerMode?i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.TriggerTheEvent"),size:"xl",disable:null===e.bluetooth.deviceId},on:{click:function(t){return e.triggerIotEvent()}}}):e._e()],1):e._e(),"chest"===e.step.options.object||"relay"===e.step.options.object?i("div",[i("p",[e._v(e._s(e.$t("label.ChestActions")))]),i("div",{staticStyle:{display:"flex"}},[i("q-btn",{staticStyle:{"flex-grow":"1","margin-right":"1rem"},attrs:{color:"primary",label:e.$t("label.Open"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("open")}}}),i("q-btn",{staticStyle:{"flex-grow":"1"},attrs:{color:"primary",label:e.$t("label.Close"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("close")}}})],1)]):e._e(),"bluetooth"===e.step.options.protocol&&null===e.bluetooth.deviceId?i("p",[e._v(e._s(e.$t("label.SearchingBluetoothDevice")))]):e._e()]):e._e(),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"waiting"==e.step.id,expression:"step.id == 'waiting'"}],staticClass:"panel-bottom background-dark"},[i("div",{staticClass:"centered q-pa-lg title4 text-primary"},[i("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.WaitingForOtherUsersActions")))]),i("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),i("div",[i("div",{staticClass:"q-pa-lg centered"},[e._v("\n              "+e._s(e.$t("label.WaitingForOtherUsersActionsDesc"))+"\n            ")])])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type||"locate-item-ar"==e.step.type)&&e.step.showDirectionToTarget&&null===e.playerResult&&e.geolocation.active,expression:"(step.type == 'geolocation' || step.type == 'locate-item-ar') && step.showDirectionToTarget && playerResult === null && geolocation.active"}],staticClass:"direction-helper"},[i("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),"geolocation"==e.step.type||"locate-item-ar"==e.step.type?i("geolocation",{ref:"geolocation-component",attrs:{withNavBar:!0},on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.displaySuccessIcon,expression:"playerResult === true && displaySuccessIcon"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[i("q-icon",{attrs:{color:"white",name:"thumb_up"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:60===this.countdowntimeleft||30===this.countdowntimeleft||15===this.countdowntimeleft||10===this.countdowntimeleft||5===this.countdowntimeleft,expression:"\n        this.countdowntimeleft === 60 ||\n        this.countdowntimeleft === 30 || \n        this.countdowntimeleft === 15 || \n        this.countdowntimeleft === 10 || \n        this.countdowntimeleft === 5 \n        "}],staticClass:"fadein-message text-center"},[i("div",{staticStyle:{"font-size":"0.6em"}},[e._v(e._s(e.$t("label.ItRemains")))]),e._v("\n        "+e._s(this.countdowntimeleft)+" "+e._s(e.$t("label.s"))+"\n    ")]),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),i("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[i("div",{staticClass:"bg-white centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[i("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),i("gpscalibration",{ref:"gpscal",on:{endvertical:function(t){return e.$refs.phonevertical.askUserToHandleMobileVertically()}}}),i("holdphonevertically",{ref:"phonevertical",attrs:{geolocation:e.geolocation}})],1)},Bi=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-top"},[i("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-bottom"},[i("img",{attrs:{src:"statics/icons/story/sticker-bottom.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-mt-md"},[i("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],Ui=(r("6c7b"),r("5df3"),r("1c4c"),r("f5766"),r("14b9"),r("6762"),r("2fdb"),r("bc78")),Qi={storeTimeLeft:function(e,t,i){var r={runid:e,stepid:t,timeleft:i};r=JSON.stringify(r),localStorage.setItem("timer-"+e+"-"+t,r)},allStorage:function(){for(var e=[],t=0,i=localStorage.length;t<i;t++){var r=localStorage.key(t),s=localStorage[r];if(r.includes("timer-")){var a={key:r,value:s};e.push(a)}}return e},getTimeLeft:function(e,t){var i=this.allStorage(),r=!0,s=!1,a=void 0;try{for(var n,o=i[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var l=n.value,c=JSON.parse(l.value);if(c.runid===e&&c.stepid===t)return c.timeleft<0&&(c.timeleft=0),c.timeleft}}catch(u){s=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return null},clearStoredTimers:function(){var e=this.allStorage();e.forEach((function(e){localStorage.removeItem(e.key)}))}},Yi=r("22ae"),Vi=r("3ba6"),Wi=r("57e4"),Gi=r("2f04"),Ki=r("e08c"),Ji=r("025e"),Xi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{model:{value:e.geolocation.takeMobileVertically,callback:function(t){e.$set(e.geolocation,"takeMobileVertically",t)},expression:"geolocation.takeMobileVertically"}},[i("div",{staticClass:"bg-black centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),i("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])},Zi=[],er={props:["geolocation"],methods:{askUserToHandleMobileVertically:function(){this.geolocation.takeMobileVertically=!0,Je.setTimeout(this.closeHandleMobileVertically,5e3)},closeHandleMobileVertically:function(){this.geolocation.takeMobileVertically=!1}}},tr=er,ir=Object(_e["a"])(tr,Xi,Zi,!1,null,null,null),rr=ir.exports,sr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?i("div",{staticClass:"story fit",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"}},[i("div",{style:"position: fixed; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),i("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?i("div",{staticClass:"scroll-indicator"},[i("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),i("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),i("div",{staticClass:"text-right"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?i("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v("  \n        "),e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button2")?i("q-btn",{on:{click:e.buttonAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.label))+"\n        ")]):e._e(),e._v("  \n        "),i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.next}},[i("div",[e._v(e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>"))])])],1)]),e._m(1),i("div",{staticClass:"character"},[-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")&&-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?i("img",{staticStyle:{"min-height":"30vh"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}}):e._e(),-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")||-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?i("img",{staticStyle:{"min-height":"20vh","max-height":"30vh"},attrs:{src:e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character}}):e._e()]),e.steps[e.currentStep.id].allowSkip?i("div",{staticClass:"fixed-bottom-left q-pa-md"},[i("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},ar=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-top"},[i("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-bottom"},[i("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],nr={props:["step","data"],data:function(){return{steps:{hint:{discussions:[{character:this.data&&this.data.character?this.data.character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:this.data.help,button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null,button:{label:"Yes"},button2:{label:"No",action:"closeall"}},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:this.data&&this.data.character?this.data.character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks",action:"close"}}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentStep.id=this.step,this.steps[this.currentStep.id]){e.next=4;break}return this.hideStory(),e.abrupt("return");case 4:return this.currentStep.discussionId=0,this.nextStep=this.step,this.hide=!1,this.moreToValidStep(),e.next=10,this.saveStepPassed();case 10:Je.setTimeout(this.checkIfTextIsHidden,500);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{next:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.needToScroll=!1,!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].hasOwnProperty("button")||!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button.hasOwnProperty("action")){e.next=6;break}this.$router.push(this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button.action),Je.setTimeout(this.checkIfTextIsHidden,500),e.next=8;break;case 6:return e.next=8,this.closeStory();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfTextIsHidden:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.bubbleText){e.next=2;break}return e.abrupt("return");case 2:t=this.$refs.bubbleText.clientHeight,t>"140"&&(this.needToScroll=!0);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].hasOwnProperty("nextStep")){e.next=5;break}return this.nextStep=this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].nextStep,this.$store.state.user.story.step=this.nextStep,e.next=5,Ze.nextStoryStep(this.nextStep);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),skipTutorial:function(){var e=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hide=!0,this.$q.dialog({title:this.$t("label.SkipTutorial"),message:this.$t("label.SkipTutorialDesc"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk((function(){t.nextStep=17,Ze.nextStoryStep(t.nextStep),t.$store.state.user.story.step=t.nextStep,t.hideStory()})).onCancel((function(){console.log("cancel"),t.hide=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeStory:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveStepPassed();case 2:this.steps[this.currentStep.id].discussions.length-1>this.currentStep.discussionId?(this.currentStep.discussionId++,this.moreToValidStep()):this.hideStory();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideStory:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hide=!0,setTimeout(this.emitNext,500);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),emitNext:function(){this.$emit("next",this.nextStep)},linkAction:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.hasOwnProperty("action")){e.next=4;break}"close"===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.action?this.hideStory():this.$router.push(this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.action),e.next=6;break;case 4:return e.next=6,this.closeStory();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),buttonAction:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button2.hasOwnProperty("action")){e.next=4;break}"close"===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button2.action?this.hideStory():"closeall"===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button2.action?this.skipTutorial():this.$router.push(this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button2.action),e.next=6;break;case 4:return e.next=6,this.closeStory();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}},or=nr,lr=Object(_e["a"])(or,sr,ar,!1,null,null,null),cr=lr.exports,ur=r("22b5"),dr=r("bd2e"),pr=r.n(dr),fr=r("8c64"),hr=r("0321"),mr=r("e7fc"),br={props:["step","runId","reload","itemUsed","lang","answer","customization","player","inventory"],components:{holdphonevertically:rr,gpscalibration:Ri,geolocation:nt,story:cr},watch:{reload:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=4;break}return this.clearAllCameraStreams(),e.next=4,this.initData();case 4:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 5:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),itemUsed:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.step&&"use-item"===this.step.type&&this.step.options&&this.step.options.hasOwnProperty("touchLocation")&&!1===this.step.options.touchLocation&&this.useItem();case 1:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){},updated:$i()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),beforeDestroy:function(){if(this.clearAllCameraStreams(),this.stopLatestAnimation(),this.geolocation.target=null,this.locateMarker.scene=null,this.locateMarker.renderer=null,this.locateMarker.camera=null,this.locateMarker.mixers=[],this.locateMarker.clock=null,this.locateMarker.arToolkitContext=null,this.locateMarker.arSmoothedControls=null,this.locateMarker.markerRoots={},this.locateMarker.markerControls={},null!==this.geolocation.absoluteOrientationSensor&&this.geolocation.absoluteOrientationSensor.stop(),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),Je.clearAllRunningProcesses(),ur["a"].removeAll(),null!==this.mqttClient){var e=this;this.mqttClient.end(!1,{},(function(){e.mqttClient=null}))}if(this.bluetooth.enabled&&this.bluetoothDisconnect(this.bluetooth.deviceId),this.stopcountdown(),["geolocation","locate-item-ar"].includes(this.step.type))try{cordova.plugins.headingcalibration.stopWatchCalibration()}catch(t){}},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,imageCapture:null,takingSnapshot:!1,cameraUsed:"environment",serverUrl:"https://api.graaly.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,isIOs:Je.isIOS(),isNetworkLow:!1,isTimeUp:!1,displaySuccessIcon:!1,character:{bubbleText:[],numberOfBubble:1,bubbleNumber:0,needToScroll:!1},answerType:"text",playerCode:[],keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],showTools:!0,codeColors:{},geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},absoluteOrientationSensor:null,initialBearingAngle:null,target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:Ui["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1,gyroscopeDetectionCounter:0,lowCompassAccuracy:!1,compassAccuracyTimeout:null},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:4},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationCounter:1},minDistanceForGPS:20,deviceHasGyroscope:null,locateMarker:{renderer:null,scene:null,camera:null,mixers:[],clock:null,arToolkitContext:null,arSmoothedControls:null,markerRoots:{},markerControls:{},playerAnswer:"",layer:null,flash:!1,showHelp:!1,compliant:!0},writetext:{playerAnswer:""},puzzle:{pieces:[],picture:"statics/icons/game/medal.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},nbItemsFound:0,readMoreNotif:null,itemUsedComputed:null,mqttClient:null,bluetooth:{enabled:!1,deviceId:null},iotObject:null,iot:{distance:null,pot1:null,pot2:null,pot3:null,keypadAnswer:null,axisX:null,axisY:null,chest:{disableActionButtons:!1},relay:{disableActionButtons:!1}},story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null,pageReady:!1,countdowntimeleft:0}},resetData:function(){var e=this.initialState();this.playerResult=e.playerResult,this.stepPlayed=e.stepPlayed,this.cameraStreamEnabled=e.cameraStreamEnabled,this.imageCapture=e.imageCapture,this.takingSnapshot=e.takingSnapshot,this.nbTry=e.nbTry,this.score=e.score,this.reward=e.reward,this.controlsAreDisplayed=e.controlsAreDisplayed,this.isNetworkLow=e.isNetworkLow,this.isTimeUp=e.isTimeUp,this.displaySuccessIcon=e.displaySuccessIcon,this.character=e.character,this.playerCode=e.playerCode,this.geolocation=e.geolocation,this.deviceMotion=e.deviceMotion,this.locateMarker=e.locateMarker,this.writetext=e.writetext,this.puzzle=e.puzzle,this.memory=e.memory,this.nbItemsFound=e.nbItemsFound,this.readMoreNotif=e.readMoreNotif,this.itemUsedComputed=e.itemUsedComputed,this.mqttClient=e.mqttClient,this.bluetooth=e.bluetooth,this.iotObject=e.iotObject,this.iot=e.iot,this.story=e.story,this.enlargePicture=e.enlargePicture,this.latestRequestAnimationId=e.latestRequestAnimationId,this.countdowntimeleft=e.countdowntimeleft,this.pageReady=e.pageReady,this.showTools=e.showTools},getBackgroundImage:function(){return this.step.backgroundImage&&"_"===this.step.backgroundImage[0]?"statics/images/quest/"+this.step.backgroundImage:this.step.backgroundImage&&-1!==this.step.backgroundImage.indexOf("blob:")?this.step.backgroundImage:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/background/"+this.step.backgroundImage},resetBackgroundImage:function(){var e=document.getElementById("play-view");e.style.background="none",e.style.backgroundColor="transparent";var t=document.getElementById("background-image");t.style.background="none",t.style.backgroundColor="transparent"},initData:function(){var e=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.resetData(),this.resetBackgroundImage(),ur["a"].removeAll(),this.$nextTick(o()(a.a.mark((function e(){var i,r,s,n,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T,E;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=document.getElementById("play-view"),t.step.backgroundImage?"find-item"===t.step.type||"use-item"===t.step.type?(i.style.background="none",i.style.backgroundColor="#000",t.showControls()):"image-over-flow"===t.step.type?(t.showControls(),i.style.background="none",i.style.backgroundColor="transparent"):"jigsaw-puzzle"===t.step.type?(r=t.getBackgroundImage(),i.style.background='#fff url("'+r+'") center/cover no-repeat',t.showControls()):(s=t.getBackgroundImage(),n=document.getElementById("background-image"),n.style.background='#fff url("'+s+'") center/cover no-repeat',t.step.options&&t.step.options.hasOwnProperty("initDuration")?Je.setTimeout(t.showControls,1e3*parseInt(t.step.options.initDuration,10)):Je.setTimeout(t.showControls,1e3)):(t.step.type&&"locate-item-ar"!==t.step.type&&"locate-marker"!==t.step.type&&"sensor"!==t.step.id?(i.style.background="none",i.style.backgroundColor="#fff"):(i.style.background="none",i.style.backgroundColor="transparent"),t.showControls()),t.resetDrawDirectionInterval(),t.isIOs&&(t.deviceHasGyroscope=!0),"end-chapter"===t.step.type&&t.checkAnswer(),"choose"===t.step.type&&(t.answerType=Array.isArray(t.step.options.items)&&t.step.options.items[0].hasOwnProperty("imagePath")&&null!==t.step.options.items[0].imagePath?"image":"text"),"character"===t.step.type&&(t.step.text&&""!==t.step.text?(t.character.bubbleText=t.step.text.split("|"),t.character.numberOfBubble=t.character.bubbleText.length,1===t.character.numberOfBubble&&t.checkAnswer(),Je.setTimeout(t.checkIfTextIsHidden,1500)):t.checkAnswer()),"code-keypad"===t.step.type&&t.resetKeypadCode(),"code-color"===t.step.type){if(t.step.options.colors)for(t.codeColors=[],l=0;l<t.step.options.colors.length;l++)t.codeColors.push(t.step.options.colors[l].value);else t.codeColors=Yi;t.resetColorCode()}if("code-image"===t.step.type&&t.resetImageCode(),"new-item"===t.step.type&&(t.step.options.hasOwnProperty("pictures")&&t.step.options.pictures[t.lang]&&(t.step.options.picture=t.step.options.pictures[t.lang]),t.step.options.hasOwnProperty("titles")&&t.step.options.titles[t.lang]&&(t.step.options.title=t.step.options.titles[t.lang])),"jigsaw-puzzle"!==t.step.type){e.next=15;break}return e.next=14,t.initPuzzle();case 14:t.$emit("pass");case 15:if("memory"===t.step.type&&(t.initMemory(),t.$emit("pass")),"geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type){e.next=57;break}if(!(t.$q&&t.$q.platform&&t.$q.platform.is&&t.$q.platform.is.desktop)){e.next=21;break}"0"===t.runId?ut(t.$t("label.YouMustTestThisStepOnMobile"),"error"):(t.$emit("pass"),t.$emit("forceMoveNext")),e.next=55;break;case 21:if(t.$emit("pass"),e.prev=22,!("AbsoluteOrientationSensor"in window)){e.next=31;break}u=new AbsoluteOrientationSensor({frequency:30}),u.onerror=function(e){return console.error(e.error.name,e.error.message)},u.onreading=t.onAbsoluteOrientationSensorReading,u.start(),t.geolocation.absoluteOrientationSensor=u,e.next=39;break;case 31:return t.geolocation.absoluteOrientationSensor={stop:t.stopAlternateAbsoluteOrientationSensor},e.next=34,Je.requestDeviceOrientationPermission();case 34:if(c=e.sent,"granted"===c){e.next=38;break}return ut(t.$t("label.PleaseAcceptDeviceOrientationPermissionRequest"),"error"),e.abrupt("return");case 38:window.addEventListener("deviceorientation",t.eventAlternateAbsoluteOrientationSensor,!1);case 39:e.next=44;break;case 41:e.prev=41,e.t0=e["catch"](22),console.error(e.t0);case 44:if("locate-item-ar"!==t.step.type){e.next=55;break}return e.next=47,Je.requestDeviceMotionPermission();case 47:if(c=e.sent,"granted"===c){e.next=51;break}return ut(t.$t("label.PleaseAcceptDeviceMotionPermissionRequest"),"error"),e.abrupt("return");case 51:return window.addEventListener("devicemotion",t.handleMotionEvent,!0),e.next=54,t.waitForGyroscopeDetection();case 54:t.deviceHasGyroscope||ut(t.$t("label.CouldNotEnableAR"),"warning");case 55:t.$store.dispatch("setDrawDirectionInterval",window.setInterval(t.drawDirectionArrow,100)),t.isHybrid&&!t.isIOS&&cordova.plugins.headingcalibration.watchCalibration((function(e){e<=1?(t.geolocation.lowCompassAccuracy=!0,null!==t.geolocation.compassAccuracyTimeout||t.geolocation.showCalibration||(t.geolocation.compassAccuracyTimeout=Je.setTimeout((function(){t.$refs.gpscal.askUserToCalibrateGPS(),null!==t.geolocation.compassAccuracyTimeout&&(clearTimeout(t.geolocation.compassAccuracyTimeout),t.geolocation.compassAccuracyTimeout=null)}),1e4))):(t.geolocation.lowCompassAccuracy=!1,null!==t.geolocation.compassAccuracyTimeout&&(clearTimeout(t.geolocation.compassAccuracyTimeout),t.geolocation.compassAccuracyTimeout=null))}),(function(e){console.error("watch calibration: failure",e)}));case 57:if("locate-item-ar"!==t.step.type||t.playerResult){e.next=108;break}if(!t.deviceHasGyroscope&&t.step.backgroundImage||(t.isIOs&&CameraPreview?(d={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(d),CameraPreview.show()):t.launchVideoStreamForAndroid("camera-stream-for-locate-item-ar")),p=document.getElementById("target-canvas"),t.geolocation.target={scene:new We["Scene"],camera:new We["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new We["WebGLRenderer"]({canvas:p,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new We["Clock"]},t.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),f=t.geolocation.target,h=f.scene,t.addDefaultLightTo3DScene(h),!t.step.options.is3D){e.next=79;break}return e.next=68,t.loadAndPrepare3DModel(t.step.options.customModel?t.step.options.customModel:t.step.options.model,t.step.questId,t.step.options.customModel||!1);case 68:g=e.sent,m=g.object,b=g.animations,v=(new We["Box3"]).setFromObject(m),w=(v.max.z-v.min.z)/2,m.applyMatrix((new We["Matrix4"]).makeTranslation(0,0,w)),f.size=Math.max(v.max.x-v.min.x,v.max.y-v.min.y,v.max.z-v.min.z),b.length>0&&(k=new We["AnimationMixer"](m),k.clipAction(b[0]).play(),t.geolocation.target.mixers.push(k)),t.geolocation.target.renderer.gammaOutput=!0,e.next=100;break;case 79:y="",y=t.step.options.picture&&-1!==t.step.options.picture.indexOf("blob:")?t.step.options.picture:t.serverUrl+"/upload/quest/"+t.step.questId+"/step/locate-item-ar/"+t.step.options.picture,t.$refs["item-image"].src=y,f.size=t.step.options.objectSize||1,_=new We["PlaneGeometry"](f.size,f.size),e.prev=84,S=(new We["TextureLoader"]).load(y),S.anisotropy=0,S.magFilter=We["NearestFilter"],S.minFilter=We["NearestFilter"],e.next=96;break;case 91:return e.prev=91,e.t1=e["catch"](84),console.error("Error while loading image:",e.t1),ut(t.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 96:x=new We["MeshBasicMaterial"]({map:S}),x.transparent=!0,m=new We["Mesh"](_,x),m.position.y=0;case 100:m.name="targetObject",m.up=new We["Vector3"](0,0,1),m.visible=!1,h.add(m),t.geolocation.target.camera.up=new We["Vector3"](0,0,1),t.geolocation.target.camera.lookAt(new We["Vector3"](0,1,0)),t.geolocation.target.camera.position.z=1.5,t.animateTargetCanvas();case 108:if("image-over-flow"===t.step.type&&(t.$emit("pass"),t.isIOs&&CameraPreview?(C={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(C),CameraPreview.show()):t.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0)),"geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type||(t.$refs["geolocation-component"].disabled=!1),"locate-marker"!==t.step.type&&"sensor"!==t.step.id||t.playerResult||("sensor"===t.step.id?t.step.options={mode:"scan",layerCode:"magnifier"}:t.$emit("pass"),t.isHybrid?t.initQRCodes():(q=t.$refs["camera-stream-for-locate-marker"],navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then((function(e){q.srcObject=e,q.play(),q.onloadeddata=function(){var e=o()(a.a.mark((function e(i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cameraStreamEnabled=!0,r=document.getElementById("marker-canvas"),r.height=window.screen.height,r.width=window.screen.width,e.next=6,t.displayMarkers(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.$store.dispatch("addMediaStream",e)})).catch((function(e){console.warn("No camera stream available"),console.log(e)})))),"wait-for-event"!==t.step.type&&"trigger-event"!==t.step.type){e.next=130;break}if(t.iotObject=t.getIotObjectFromCode(t.step.options.object),"keypad"===t.step.options.object&&(t.iot.keypadAnswer="_".repeat(t.step.options.answer.length)),"mqtt"!==t.step.options.protocol){e.next=122;break}T=t,t.mqttClient=mr["connect"]("wss://api.graaly.com:9001"),t.mqttClient.on("connect",(function(){console.log("Successfully connected to MQTT server wss://api.graaly.com:9001"),"wait-for-event"===T.step.type&&T.mqttClient.subscribe("Graaly",(function(e){e?console.error("Error when subscribing to topic Graaly:",e):console.log("Successfully subscribed to MQTT topic Graaly")}))})),t.mqttClient.on("error",(function(e){console.error("Error connecting to MQTT server wss://api.graaly.com:9001","connack=",e)})),"wait-for-event"===T.step.type&&t.mqttClient.on("message",(function(e,t){console.log("Received MQTT message (topic "+e+"): ",t.toString());try{t=JSON.parse(t)}catch(i){console.error("Could not read MQTT message. Error:",i)}t.macAddress===T.step.options.boardMacAddress&&(console.log("*** MAC ADDRESSES MATCHED ***",T.step.stepId),console.log("matching codes?",t.code,T.step.options.code),t.code===T.step.options.code&&(console.log("*** CODES MATCHED, CHECK ANSWER ***"),ut(T.step.options.successMessage,"positive"),T.checkAnswer()))})),e.next=127;break;case 122:if("bluetooth"!==t.step.options.protocol){e.next=126;break}t.isHybrid?ble.enable(t.bluetoothEnableSuccess,t.bluetoothEnableFailure):console.warn("Webapp mode => no bluetooth support."),e.next=127;break;case 126:throw new Error("Unsupported IoT step protocol: "+t.step.options.protocol);case 127:t.$emit("pass"),e.next=132;break;case 130:null!==t.mqttClient&&(E=t,t.mqttClient.end(!1,{},(function(){E.mqttClient=null}))),t.bluetooth.enabled&&t.bluetoothDisconnect(t.bluetooth.deviceId);case 132:if(!t.isTimerAvailable()){e.next=135;break}return e.next=135,t.startCountdown();case 135:case"end":return e.stop()}}),e,null,[[22,41],[84,91]])}))));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),eventAlternateAbsoluteOrientationSensor:function(e){null===this.geolocation.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.geolocation.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.geolocation.initialBearingAngle+e.alpha)%360:e.alpha,i=e.beta,r=e.gamma,s=Math.PI/180,a=i?i*s:0,n=r?r*s:0,o=t?t*s:0,l=Math.cos(a/2),c=Math.cos(n/2),u=Math.cos(o/2),d=Math.sin(a/2),p=Math.sin(n/2),f=Math.sin(o/2),h=l*c*u-d*p*f,m=d*c*u-l*p*f,b=l*p*u+d*c*f,g=l*c*f+d*p*u;this.geolocation.absoluteOrientationSensor.quaternion=[m,b,g,h],this.onAbsoluteOrientationSensorReading()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},initQRCodes:function(){for(var e=1;e<=60;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkAnswer(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},createMarkerControl:function(e){var t,i=this,r=this.locateMarker.arToolkitContext;t="scan"===this.step.options.mode?this.locateMarker.markerRoots["commonRoot"]:this.locateMarker.markerRoots[e];var s=new fr["THREEx"].ArMarkerControls(r,t,{type:"pattern",patternUrl:"statics/markers/"+e+"/pattern-marker.patt"});return s.code=e,s.addEventListener("markerFound",(function(e){"scan"===i.step.options.mode&&i.checkAnswer(e.target.code)})),s.detected=!1,s},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"help"!==this.step.type&&"image-over-flow"!==this.step.type&&"new-item"!==this.step.type&&"trigger-event"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},hideControlsTemporaly:function(){this.controlsAreDisplayed=!1,Je.setTimeout(this.showControls,4e3)},displayMarkers:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,l,c,u,d,p,f,h,m,b,g,v,w=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.locateMarker.markerRoots={},i=new We["WebGLRenderer"]({canvas:t,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),r=new We["Scene"],s=new We["PerspectiveCamera"](45,window.innerWidth/window.innerHeight,.001,1e3),r.add(s),this.addDefaultLightTo3DScene(r),n=new fr["THREEx"].ArToolkitContext({cameraParametersUrl:"statics/markers/camera_para.dat",detectionMode:"mono",maxDetectionRate:30,canvasWidth:640,canvasHeight:480,patternRatio:.8}),n.initAsync=Object(hr["promisify"])(n.init),e.next=10,n.initAsync();case 10:if(o=new We["Group"],r.add(o),l=new fr["THREEx"].ArSmoothedControls(o,{lerpPosition:.4,lerpQuaternion:.3,lerpScale:1}),this.locateMarker.arToolkitContext=n,this.locateMarker.arSmoothedControls=l,this.locateMarker.renderer=i,this.locateMarker.scene=r,this.locateMarker.camera=s,this.locateMarker.markerCodeAnswer=this.step.answers,"scan"===this.step.options.mode&&(c=new We["Group"],r.add(c),this.locateMarker.markerRoots["commonRoot"]=c,u=new We["PlaneGeometry"](1,1),d=new We["MeshNormalMaterial"]({transparent:!0,opacity:0,side:We["DoubleSide"]}),p=new We["Mesh"](u,d),p.rotateX(Math.PI/2),o.add(p),o.name="markerObject"),Wi.forEach((function(e){if("touch"===w.step.options.mode){var t=new We["Group"];r.add(t),w.locateMarker.markerRoots[e]=t}w.locateMarker.markerControls[e]=w.createMarkerControl(e)})),"touch"!==this.step.options.mode){e.next=35;break}return e.next=24,this.loadAndPrepare3DModel(this.step.options.customModel?this.step.options.customModel:this.step.options.model,this.step.questId,this.step.options.customModel||!1);case 24:m=e.sent,f=m.object,h=m.animations,f.rotateX(-Math.PI/2),b=(new We["Box3"]).setFromObject(f),g=(b.max.y-b.min.y)/2,f.applyMatrix((new We["Matrix4"]).makeTranslation(0,g,0)),f.name="targetObject",h.length>0&&(v=new We["AnimationMixer"](f),v.clipAction(h[0]).play(),this.locateMarker.mixers.push(v)),this.locateMarker.clock=new We["Clock"],o.add(f);case 35:this.animateMarkerCanvas();case 36:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendAnswer:function(){var e=o()(a.a.mark((function e(t,i,r,s,n){var o,l,c,u,d;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n&&this.$q.loading.show(),o=this,l=setTimeout((function(){o.isNetworkLow=!0}),8e3),e.next=5,_i.checkAnswer(t,i,this.step.version,r,s,this.player);case 5:if(c=e.sent,clearTimeout(l),this.isNetworkLow=!1,!c||!c.data){e.next=15;break}return n&&this.$q.loading.hide(),u=c.data,"0"===this.runId&&(u.remainingTrial=this.step.nbTrial-this.nbTry-1),e.abrupt("return",u);case 15:return n&&this.$q.loading.hide(),e.next=18,this.checkOfflineAnswer(s.answer);case 18:return d=e.sent,e.abrupt("return",d);case 20:case"end":return e.stop()}}),e,this)})));function t(t,i,r,s,a){return e.apply(this,arguments)}return t}(),checkOfflineAnswer:function(){var e=o()(a.a.mark((function e(t){var r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.step.type,"info-text"!==r&&"info-video"!==r&&"new-item"!==r&&"character"!==r&&"help"!==r&&"image-over-flow"!==r){e.next=5;break}return e.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("geolocation"!==r&&"locate-item-ar"!==r&&"jigsaw-puzzle"!==r){e.next=9;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 9:if("use-item"!==r){e.next=24;break}if(!0!==this.isTimeUp){e.next=12;break}return e.abrupt("return",{result:!1,answer:this.answer,score:0,reward:0,offline:!0});case 12:if(!this.step.options||!this.step.options.hasOwnProperty("touchLocation")||!1!==this.step.options.touchLocation){e.next=17;break}if(this.answer.item!==t.item){e.next=15;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 15:e.next=22;break;case 17:if(s={left:Math.round(this.answer.coordinates.left/100*100*t.windowWidth),top:Math.round(this.answer.coordinates.top/100*133*t.windowWidth)},n=Math.round(8*t.windowWidth),o=Math.sqrt(Math.pow(s.left-t.posX,2)+Math.pow(s.top-t.posY,2)),!(o<=n&&this.answer.item===t.item)){e.next=22;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 22:e.next=46;break;case 24:if("find-item"!==r){e.next=30;break}if(!0!==this.isTimeUp){e.next=27;break}return e.abrupt("return",{result:!1,answer:this.answer,score:0,reward:0,offline:!0});case 27:return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 30:if("write-text"!==r){e.next=40;break}i=0;case 32:if(!(i<this.answer.length)){e.next=38;break}if(Je.removeAccents(t)!==Je.removeAccents(this.answer[i])){e.next=35;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 35:i++,e.next=32;break;case 38:e.next=46;break;case 40:if("memory"!==r){e.next=44;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 44:if(t!==this.answer){e.next=46;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 46:if(!(!this.isTimeUp&&this.step.nbTrial&&this.step.nbTrial>0&&this.nbTry+1<this.step.nbTrial)){e.next=50;break}return e.abrupt("return",{result:!1,remainingTrial:this.step.nbTrial-this.nbTry-1,offline:!0});case 50:return e.abrupt("return",{result:!1,answer:this.answer,score:0,reward:0,offline:!0});case 51:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkAnswer:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.playerResult){e.next=2;break}return e.abrupt("return");case 2:if("sensor"!==this.step.id){e.next=5;break}return this.locateMarker.markerControls[t].detected||(this.locateMarker.flash=!1,this.locateMarker.flash=!0,this.locateMarker.markerControls[t].detected=!0,this.$emit("played",t)),e.abrupt("return");case 5:e.t0=this.step.type,e.next="info-text"===e.t0?8:"info-video"===e.t0?8:"new-item"===e.t0?8:"help"===e.t0?8:"end-chapter"===e.t0?8:"character"===e.t0?8:"image-over-flow"===e.t0?8:"trigger-event"===e.t0?8:"choose"===e.t0?13:"geolocation"===e.t0?18:"code-keypad"===e.t0?23:"code-color"===e.t0?28:"code-image"===e.t0?33:"jigsaw-puzzle"===e.t0?38:"memory"===e.t0?43:"write-text"===e.t0?48:"use-item"===e.t0?54:"find-item"===e.t0?63:"locate-item-ar"===e.t0?84:"locate-marker"===e.t0?84:"wait-for-event"===e.t0?99:116;break;case 8:return e.next=10,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{},!1);case 10:return i=e.sent,this.submitGoodAnswer(0,i.offline,!1),e.abrupt("break",117);case 13:return e.next=15,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!0);case 15:return i=e.sent,!0===i.result?(r=this.step.options.items[t],!1===this.step.displayRightAnswer?r.class="rightorwrong":(r.icon="done",r.class="right"),l["a"].set(this.step.options.items,t,r),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer)):(this.isTimeUp||(s=this.step.options.items[t],!1===this.step.displayRightAnswer?s.class="rightorwrong":(s.icon="clear",s.class="wrong"),l["a"].set(this.step.options.items,t,s)),this.isTimeUp&&(i.remainingTrial=0),!0===this.step.displayRightAnswer&&(!i.answer&&0!==i.answer||i.remainingTrial||(n=this.step.options.items[i.answer],n.icon="done",n.class="right",l["a"].set(this.step.options.items,i.answer,n))),this.nbTry++,i.remainingTrial>0?this.submitRetry(i.remainingTrial):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",117);case 18:return e.next=20,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!1);case 20:return i=e.sent,this.isTimeUp?this.submitWrongAnswer(i.offline,!0):!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",117);case 23:return e.next=25,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join(""),isTimeUp:this.isTimeUp},!0);case 25:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.isTimeUp&&(i.remainingTrial=0),this.nbTry++,i.remainingTrial>0?(this.resetKeypadCode(),this.submitRetry(i.remainingTrial)):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",117);case 28:return e.next=30,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join("|"),isTimeUp:this.isTimeUp},!0);case 30:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.isTimeUp&&(i.remainingTrial=0),this.nbTry++,i.remainingTrial>0?this.submitRetry(i.remainingTrial):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",117);case 33:return e.next=35,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join("|"),isTimeUp:this.isTimeUp},!0);case 35:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.isTimeUp&&(i.remainingTrial=0),this.nbTry++,i.remainingTrial>0?this.submitRetry(i.remainingTrial):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",117);case 38:return e.next=40,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:"",isTimeUp:this.isTimeUp},!0);case 40:return i=e.sent,!0===this.isTimeUp?this.submitWrongAnswer(i.offline,!0):!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",117);case 43:return e.next=45,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{isTimeUp:this.isTimeUp},!1);case 45:return i=e.sent,!0===this.isTimeUp?this.submitWrongAnswer(i.offline,!0):!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",117);case 48:return this.writetext.playerAnswer=this.writetext.playerAnswer.trim(),e.next=51,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.writetext.playerAnswer,isTimeUp:this.isTimeUp},!0);case 51:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.isTimeUp&&(i.remainingTrial=0),this.nbTry++,i.remainingTrial>0?(this.writetext.playerAnswer="",this.submitRetry(i.remainingTrial)):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",117);case 54:return e.next=56,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!0);case 56:if(i=e.sent,!this.isTimeUp){e.next=61;break}if(this.inventory&&this.inventory.items&&Array.isArray(this.inventory.items)){e.next=60;break}throw new Error("Could not retrieve inventory items. Inventory content: ",this.inventory);case 60:Array.from(this.inventory.items).forEach((function(e){var t=e.originalPicture?e.originalPicture:e.picture;t===i.answer.item&&(C.itemUsedComputed=e)}));case 61:return!0===i.result?(this.step.displayRightAnswer&&this.showItemLocation(i.answer.coordinates.left,i.answer.coordinates.top),this.step.options&&this.step.options.altFile&&(this.step.backgroundImage=this.step.options.altFile),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer)):(this.isTimeUp&&(i.remainingTrial=0),this.nbTry++,i.remainingTrial>0?ut(this.$t("label.UseItemNothingHappens"),"error"):(this.step.displayRightAnswer&&this.showItemLocation(i.answer.coordinates.left,i.answer.coordinates.top),this.submitWrongAnswer(i.offline,this.step.displayRightAnswer))),e.abrupt("break",117);case 63:if(o=this.findItemIsFound(t),!o.all){e.next=72;break}return e.next=67,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!0);case 67:i=e.sent,this.step.options&&this.step.options.altFile&&(this.step.backgroundImage=this.step.options.altFile),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer),e.next=83;break;case 72:if(c=this.isTimeUp?0:this.step.nbTrial-this.nbTry-1,o.one){e.next=83;break}if(this.nbTry++,!(c>0)){e.next=79;break}ut(this.$t("label.FindItemNothingHappens"),"error"),e.next=83;break;case 79:return e.next=81,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!0);case 81:i=e.sent,this.submitWrongAnswer(!1,this.step.displayRightAnswer);case 83:return e.abrupt("break",117);case 84:if("locate-item-ar"!==this.step.type&&("locate-marker"!==this.step.type||"touch"!==this.step.options.mode)){e.next=91;break}return e.next=87,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!1);case 87:i=e.sent,i&&i.hasOwnProperty("result")&&("locate-item-ar"===this.step.type&&(window.removeEventListener("devicemotion",this.handleMotionEvent,!0),this.geolocation.absoluteOrientationSensor.stop()),this.isIOs&&CameraPreview&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),ur["a"].removeAll(),"locate-item-ar"===this.step.type&&this.step.options&&this.step.options.is3D||"locate-marker"===this.step.type?("locate-item-ar"===this.step.type?u=this.geolocation.target:(u=this.locateMarker,u.arToolkitContext=null),d=u.camera,p=u.scene.getObjectByName("targetObject"),p.visible=!0,f=(new We["Box3"]).setFromObject(p),h=new We["Vector3"],f.getSize(h),m=2*Math.max(h.x,h.y,h.z),b=Object.assign({},p.scale),g=new ur["a"].Tween(p.scale).to({x:0,y:0,z:0},1e3).easing(ur["a"].Easing.Back.In).onComplete((function(){"locate-marker"===C.step.type&&(Je.detachObject3D(p,p.parent,u.scene),Je.attachObject3D(p,u.scene,u.scene)),d.position.set(0,0,2*m/3),d.lookAt(new We["Vector3"](0,m,h.z/2)),p.scale.set(0,0,0),p.position.set(0,m,h.z/2),p.rotation.set(0,0,0),!0===i.result?C.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0):C.submitWrongAnswer(i.offline,!0)})),v=new ur["a"].Tween(p.scale).to({x:b.x,y:b.y,z:b.z},1e3).easing(ur["a"].Easing.Back.Out),w=new ur["a"].Tween(p.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),g.chain(v,w).start()):!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0):this.submitWrongAnswer(i.offline,!0)),e.next=98;break;case 91:if(k=!1,this.isHybrid?this.locateMarker.markerControls[t]&&!this.locateMarker.markerControls[t].detected&&(this.locateMarker.markerControls[t].detected=!0,k=!0):this.locateMarker.markerControls[t].detected||(y=this.locateMarker.scene.getObjectByName("markerObject"),_=new We["Raycaster"],_.setFromCamera(new We["Vector2"](0,0),this.locateMarker.camera),S=_.intersectObject(y,!0),S.length,this.locateMarker.markerControls[t].detected=!0,k=!0),!k){e.next=98;break}return e.next=96,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t,isTimeUp:this.isTimeUp},!0);case 96:i=e.sent,!0===i.result?(this.submitGoodAnswer(i.score,i.offline,!0),this.stopMarkersSensors(),this.locateMarker.playerAnswer=t):(this.nbTry++,2===this.nbTry||this.isTimeUp?(this.submitWrongAnswer(i.offline,!0),this.stopMarkersSensors()):this.submitRetry(1));case 98:return e.abrupt("break",117);case 99:return e.next=101,this.stopBluetoothNotification();case 101:return e.next=103,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:"",isTimeUp:this.isTimeUp},!0);case 103:if(i=e.sent,this.isTimeUp?this.submitWrongAnswer(i.offline,!0):!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0):ut(this.$t("label.TechnicalIssue"),"error"),"mqtt"!==this.step.options.protocol){e.next=110;break}x=this,this.mqttClient.end(!1,{},(function(){x.mqttClient=null})),e.next=115;break;case 110:if("bluetooth"!==this.step.options.protocol){e.next=114;break}this.bluetoothDisconnect(this.bluetooth.deviceId),e.next=115;break;case 114:throw new Error("Unknown IoT protocol '"+this.step.options.protocol+"'");case 115:return e.abrupt("break",117);case 116:console.log("checkAnswer(): Step type "+this.step.type+" not supported.");case 117:this.score=i&&i.score?i.score:0,this.reward=i&&i.reward?i.reward:0;case 119:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),Je.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,i){if(this.playerResult=!!i||null,void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled){var r=this.getStepType(this.step.type);"enigma"===r.category&&(this.step.countDownTime.enabled=!1,this.stopcountdown())}if(this.stepPlayed=!0,this.$emit("success",e,t,i),this.$emit("played"),this.displayReadMoreAlert(),i)switch(this.step.type){case"character":case"new-item":case"info-text":case"help":case"end-chapter":case"info-video":case"image-over-flow":break;case"choose":break;case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"));break;case"write-text":case"jigsaw-puzzle":case"memory":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"));break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem")):this.displaySuccessMessage(!0,this.$t("label.WellDone"));break;case"wait-for-event":this.displaySuccessMessage(!0,this.$t("label.WellDone"));break}},stopMarkersSensors:function(){this.isHybrid||(this.stopVideoTracks("camera-stream-for-locate-marker"),this.locateMarker.scene=new We["Scene"],this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera))},submitWrongAnswer:function(e,t){null!==this.step.countDownTime&&(this.step.countDownTime.enabled=!1,this.stopcountdown()),this.playerResult=!t&&null,this.stepPlayed=!0,this.$emit("fail",e,t),this.$emit("played"),this.displayReadMoreAlert(),!0===this.isTimeUp?this.displaySuccessMessage(!1,this.$t("label.CountDownPopupfail")):t&&this.displaySuccessMessage(!1,this.$t("label.WrongAnswer")),Je.setTimeout(this.alertToPassToNextStep,15e3)},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"))},displayReadMoreAlert:function(){var e=this;if(this.step.extraText){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=ut("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(e){this.displaySuccessMessage(!1,this.$t("label.SecondTry",{nb:e}))},nextCharacterBubbleText:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.character.bubbleNumber<this.character.numberOfBubble-1&&(this.character.bubbleNumber++,this.character.needToScroll=!1,Je.setTimeout(this.checkIfTextIsHidden,500)),!(this.character.bubbleNumber>=this.character.numberOfBubble-1)){e.next=8;break}if(this.stepPlayed){e.next=7;break}return e.next=5,this.checkAnswer();case 5:e.next=8;break;case 7:this.$emit("forceMoveNext");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfTextIsHidden:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.bubbleText){e.next=2;break}return e.abrupt("return");case 2:t=this.$refs.bubbleText?this.$refs.bubbleText.clientHeight:0,i=this.$refs.bubbleTextHtml?this.$refs.bubbleTextHtml.clientHeight:0,r=Math.max(t,i),r>"177"&&(this.character.needToScroll=!0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(this.codeColors[0])},resetImageCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(0)},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e)},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e)},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options.images[this.playerCode[e]].imagePath&&-1!==this.step.options.images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options.images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){var t=this.playerCode.indexOf("");-1!==t&&l["a"].set(this.playerCode,t,e)},clearLastCodeChar:function(){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||l["a"].set(this.playerCode,e,"")},changeColorForCode:function(e){if(null===this.playerResult){var t=this.codeColors.indexOf(this.playerCode[e]),i=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[i])}},changeImageForCode:function(e){if(null===this.playerResult){var t=this.codeColors.indexOf(this.playerCode[e]),i=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[i])}},toggleCameraStream:function(){var e=this;if(this.cameraStreamEnabled)this.stopVideoTracks("camera-stream-for-recognition");else{var t=this.$refs["photo-buffer"],i=this.$refs["player-photo"],r=this.launchVideoStreamForAndroid("camera-stream-for-recognition");r.addEventListener("canplay",(function(s){if(!e.cameraStreamEnabled){var a=s.target.parentElement,n=getComputedStyle(a),o=a.clientWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)),l=Math.floor(r.videoHeight/(r.videoWidth/o));r.setAttribute("width",o),r.setAttribute("height",l),t.setAttribute("width",o),t.setAttribute("height",l),i.setAttribute("width",o),i.setAttribute("height",l),e.cameraStreamEnabled=!0}}),!1)}},launchVideoStreamForAndroid:function(e,t,i){var r=this;i||(i=this.cameraUsed);var s=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:i},audio:!1}).then((function(e){if(s.setAttribute("muted",!0),s.setAttribute("playsinline",!0),s.srcObject=e,s.play(),r.cameraStreamEnabled=!0,r.$store.dispatch("addMediaStream",e),t){var i=e.getVideoTracks()[0];r.imageCapture=new ImageCapture(i)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),s},stopVideoTracks:function(e){this.$refs[e]&&this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),i=e.width,r=e.height,s=Math.round(i/2),a=Math.round(r/2);t.save(),t.clearRect(0,0,i,r),t.translate(s,a),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor,t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),r>25&&t.arc(0,0,Math.round(r/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(Je.degreesToRadians(this.geolocation.direction));var n=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(r/2.5)),t.lineTo(-20,45-Math.round(r/2.5)),t.lineTo(-n,45-Math.round(r/2.5)),t.lineTo(-n,Math.round(r/2.5)-25),t.lineTo(n,Math.round(r/2.5)-25),t.lineTo(n,45-Math.round(r/2.5)),t.lineTo(20,45-Math.round(r/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,l,c,u,d;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.geolocation.active=!0,i=t.coords,0===this.step.options.lat&&parseInt(this.step.options.lng,10)===this.step.options.lng&&(0===this.step.options.lng?"locate-item-ar"===this.step.type?(this.step.options.lat=i.latitude+5e-5,this.step.options.lng=i.longitude):(this.step.options.lat=i.latitude+5e-4,this.step.options.lng=i.longitude+5e-4):"locate-item-ar"===this.step.type?(this.step.options.lat=i.latitude+1e-5*this.step.options.lng,this.step.options.lng=i.longitude):(this.step.options.lat=i.latitude+1e-4*this.step.options.lng,this.step.options.lng=i.longitude+1e-4*this.step.options.lng)),r=this.step.options,"undefined"!==typeof r){e.next=7;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),e.abrupt("return");case 7:if(s=this.geolocation.GPSdistance,this.geolocation.GPSdistance=1e3*Je.distanceInKmBetweenEarthCoordinates(r.lat,r.lng,i.latitude,i.longitude),n=Je.bearingBetweenEarthCoordinates(i.latitude,i.longitude,r.lat,r.lng),(null===this.geolocation.distance||"locate-item-ar"===this.step.type&&(null!==s&&s>this.minDistanceForGPS||!this.deviceHasGyroscope)||"locate-item-ar"!==this.step.type)&&((!this.geolocation.distance||this.geolocation.GPSdistance<this.geolocation.distance||this.geolocation.GPSdistance>this.geolocation.distance+4)&&(this.geolocation.distance=this.geolocation.GPSdistance),this.geolocation.rawDirection=n),o=Je.degreesToRadians(n),this.deviceHasGyroscope||(o=0,l=2+(null!==this.geolocation.target?this.geolocation.target.size:0),this.geolocation.GPSdistance=Math.max(l,this.geolocation.GPSdistance)),this.geolocation.position.x=Math.sin(o)*this.geolocation.GPSdistance,this.geolocation.position.y=Math.cos(o)*this.geolocation.GPSdistance,"locate-item-ar"!==this.step.type||null===this.geolocation.target||null===this.geolocation.target.scene){e.next=25;break}if(c=this.geolocation.target,u=c.scene,d=u.getObjectByName("targetObject"),this.geolocation.canSeeTarget=null===c.size||this.geolocation.GPSdistance<40*c.size,"undefined"!==typeof d){e.next=22;break}return e.abrupt("return");case 22:d.visible||(d.position.x=this.geolocation.position.x,d.position.y=this.geolocation.position.y,d.visible=!0),(null!==s&&s>this.minDistanceForGPS||!1===this.deviceHasGyroscope)&&new ur["a"].Tween(d.position).to({x:this.geolocation.position.x,y:this.geolocation.position.y},1e3).easing(ur["a"].Easing.Quadratic.InOut).start(),this.updatePlayerCanTouchTarget();case 25:if("geolocation"!==this.step.type||!(r.distance&&this.geolocation.distance<=parseInt(r.distance,10)||this.geolocation.distance<=20)){e.next=31;break}return this.$refs["geolocation-component"].disabled=!0,this.geolocation.active=!1,this.resetDrawDirectionInterval(),e.next=31,this.checkAnswer(i);case 31:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onUserPositionError:function(e){console.error("UserPositionError",e)},useItem:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.playerResult){e.next=2;break}return e.abrupt("return");case 2:if(null!==this.itemUsed){e.next=6;break}return ut(this.$t("label.PleaseSelectAnItemFirst"),"error"),this.$emit("msg","suggestInventory"),e.abrupt("return");case 6:return i=this.getScreenWidth()/100,r={windowWidth:i,item:this.itemUsed.originalPicture?this.itemUsed.originalPicture:this.itemUsed.picture},t&&(r.posX=t.offsetX,r.posY=t.offsetY),e.next=11,this.checkAnswer(r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showItemLocation:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o,l,c,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this.getScreenWidth()/100,s={left:Math.round(t/100*100*r),top:Math.round(i/100*133*r)},n=Math.round(8*r),o=document.getElementById("cross-play"),o.style.top=s.top-n+"px",o.style.left=s.left-n+"px",o.style.display="block",l=o.src,c=null!==this.itemUsedComputed?this.itemUsedComputed:this.itemUsed,u=this,Je.setInterval((function(){o.src===l?(c.pictures&&c.pictures[u.lang]&&""!==c.pictures[u.lang]?o.src=u.step.answers.item.indexOf("statics/")>-1||-1!==u.step.answers.item.indexOf("blob:")?c.picture:u.serverUrl+"/upload/quest/"+u.step.questId+"/step/new-item/"+c.picture:o.src=u.step.answers.item.indexOf("statics/")>-1||-1!==u.step.answers.item.indexOf("blob:")?u.step.answers.item:u.serverUrl+"/upload/quest/"+u.step.questId+"/step/new-item/"+u.step.answers.item,o.style.borderRadius="50%"):(o.src=l,o.style.borderRadius="0")}),1e3);case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),findItem:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.playerResult){e.next=2;break}return e.abrupt("return");case 2:return i=this.getScreenWidth()/100,r={windowWidth:i,posX:t.offsetX,posY:t.offsetY},e.next=6,this.checkAnswer(r);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),prepareSnapshot:function(){this.takingSnapshot=!0,this.$q.loading.show(),this.$emit("hideButtons");var e=this;this.isIOs&&CameraPreview?CameraPreview.takePicture({quality:85},(function(t){var i="data:image/jpeg;base64,"+t,r=document.getElementById("snapshotImageIos");r.src=i,setTimeout((function(){e.takeSnapshot()}),2e3)})):this.imageCapture.takePhoto().then((function(t){var i=document.getElementById("snapshotImage");i.src=URL.createObjectURL(t),i.onload=function(){var t=i.width,r=i.height;t>r&&(i.style.transform="rotate(90deg)");var s=e.getScreenWidth(),a=e.getScreenHeight();i.style.height=a+"px",i.style.width=r/a*t+"px",i.style.left=(s-parseInt(i.style.width,10))/2+"px",setTimeout((function(){e.takeSnapshot()}),2e3)}})).catch((function(t){ut(e.$t("label.SnapshotTakenIssue"),"info"),console.log(t),e.$q.loading.hide(),e.$emit("showButtons")}))},switchCamera:function(){"environment"===this.cameraUsed?this.cameraUsed="user":this.cameraUsed="environment",this.isIOs&&CameraPreview?CameraPreview.switchCamera():(this.clearAllCameraStreams(),this.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0))},takeSnapshot:function(){var e=this;this.$q.loading.hide(),navigator.screenshot.save((function(t,i){if(t)console.error(t),ut(e.$t("label.ErrorTakingSnapshot"),"info");else{var r=cordova.plugins.permissions;r.requestPermission(r.READ_EXTERNAL_STORAGE,(function(t){t.hasPermission?e.saveSnapshot(i):ut(e.$t("label.ErrorTakingSnapshot"),"info")}),alert)}e.takingSnapshot=!1,e.$emit("showButtons")}))},saveSnapshot:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){return window.resolveLocalFileSystemURL("file://"+t.filePath,e,(function(e){console.log("Error "+e)}))}));case 3:return i=e.sent,e.next=6,new Promise((function(e,t){return i.file((function(t){var i=new FileReader;i.onloadend=function(t){e(i.result)},i.readAsArrayBuffer(t)}))}));case 6:r=e.sent,s=new Blob([new Uint8Array(r)],{type:"image/jpg"}),n=new FormData,n.append("image",s),o=this,_i.uploadSnapshot(this.step.questId,n,(function(e,t){e?ut(this.$t("label.ErrorTakingSnapshot"),"error"):ut(o.$t("label.SnapshotTaken"),"info")})),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),ut(this.$t("label.ErrorTakingSnapshot"),"error"),console.log("Error: "+e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}(),getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,i=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",i.getMonth()+1+"."+i.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return!this.isHybrid&&e>500&&(e=500),e},getScreenHeight:function(){var e=window.innerHeight;return e},showFoundLocation:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this.getScreenWidth()/100,s={left:Math.round(t/100*100*r),top:Math.round(i/100*133*r)},n=Math.round(8*r),o=document.getElementById("cross-play"),o.style.top=s.top-n+"px",o.style.left=s.left-n+"px",o.style.display="block";case 7:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),checkPuzzle:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.comparePuzzlePiecePositions(),t&&this.checkAnswer(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o,l,c,u,d,p,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=-1!==this.step.options.picture.indexOf("blob:")?this.step.options.picture:-1===this.step.options.picture.indexOf("upload/")?this.serverUrl+"/upload/quest/"+this.step.questId+"/step/jigsaw-puzzle/"+this.step.options.picture:this.serverUrl+this.step.options.picture,e.next=3,Je.loadImage(t);case 3:for(this.puzzle.picture=t,i=parseInt(this.step.options.level||2,10),r=this.puzzle.colsByLevel[i],s=Math.pow(r,2),n=document.getElementById("pieces").clientWidth,o=n,l=Math.floor(o/r),c=Math.floor(n/r),u=0;u<s;u++)d=c*(u%r)+"px",p=l*Math.floor(u/r)+"px",this.puzzle.pieces[u]={pos:u,backSize:100*r,backXPos:d,backYPos:p,width:c,height:l,classes:"piece"};f=!0;while(f)this.puzzle.pieces=this.shuffle(this.puzzle.pieces),f=this.comparePuzzlePiecePositions();return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),shuffle:function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e},handleDragStart:function(e){if("drag"===this.puzzle.mode)return-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0;this.puzzle.dragSrcEl=null,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},handleDragOver:function(e){"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if("drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if("drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),i=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(i,t)}return!0}},switchPieces:function(e,t){var i=0,r=0;if(t!==e){for(var s=0;s<this.puzzle.pieces.length;s++)this.puzzle.pieces[s].pos===t&&(i=s),this.puzzle.pieces[s].pos===e&&(r=s);var a=this.puzzle.pieces[i];l["a"].set(this.puzzle.pieces,i,this.puzzle.pieces[r]),l["a"].set(this.puzzle.pieces,r,a),this.checkPuzzle()}},changePuzzleMode:function(){"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if(this.puzzle.dragSrcEl=null,"click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var i=this.puzzle.pieces[t];l["a"].set(this.puzzle.pieces,t,i)}}else{if(this.puzzle.clickModeSelected===e)return;for(var r=0;r<this.puzzle.pieces.length;r++)this.puzzle.pieces[r].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var i=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!i.single||t<this.step.options.items.length)&&(e[t]={imagePath:i.imagePath,isClicked:!1,isFound:!1})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,l["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){for(var i=0;i<this.memory.items.length;i++)this.memory.items[i].isFound||(this.memory.items[i].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(this.memory.items,i,this.memory.items[i]));this.checkAnswer(!0)}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,Je.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,i=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&i.lookAt(e.camera.position),t.length>0)for(var r=0;r<t.length;r++)t[r].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(i.position),e.renderer.render(e.scene,e.camera),ur["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},animateMarkerCanvas:function(){if("undefined"===typeof this.step||"sensor"!==this.step.id&&"undefined"===typeof this.step.type)this.stopLatestAnimation();else{var e=this.locateMarker.mixers;if(null!==this.locateMarker.arToolkitContext)if(this.locateMarker.arToolkitContext.update(this.$refs["camera-stream-for-locate-marker"]),"locate-marker"===this.step.type&&"scan"===this.step.options.mode||"sensor"===this.step.id)for(var t in this.locateMarker.markerRoots)this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[t]);else this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[this.step.answers]);if(null!==this.locateMarker.renderer&&this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera),e.length>0)for(var i=0;i<e.length;i++)e[i].update(this.locateMarker.clock.getDelta());ur["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateMarkerCanvas)}},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onAbsoluteOrientationSensorReading:function(){var e=this;if(!1!==this.geolocation.absoluteOrientationSensor.activated){var t=(new We["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&(this.geolocation.target.camera.quaternion=t),!this.geolocation.waitForNextQuaternionRead){var i=(new We["Euler"]).setFromQuaternion(t,"ZXY"),r=(new We["Euler"]).setFromQuaternion(t,"XZY"),s=i.x<Math.PI/4?i.z:r.y,a=JSON.stringify((360-Je.radiansToDegrees(s))%360);this.geolocation.direction=(this.geolocation.rawDirection-a+360)%360,this.geolocation.waitForNextQuaternionRead=!0,Je.setTimeout((function(){e.geolocation.waitForNextQuaternionRead=!1}),100)}}else console.warn("sensor is not activated")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var i=t.scene.getObjectByName("targetObject"),r=new We["Vector2"];r.x=e.clientX/t.renderer.domElement.clientWidth*2-1,r.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var s=new We["Raycaster"];s.setFromCamera(r,t.camera);var a=s.intersectObject(i,!0),n="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(a.length>0&&n){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.$refs["geolocation-component"].disabled=!0,this.geolocation.active=!1);var o="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(o),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n,o,l,c,u,d,p;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=4,n=Vi[t],e.prev=2,e.next=5,this.ModelLoaderAsync(t,i,r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](2),console.error("Error while loading 3D model:",e.t0),ut(this.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 13:return l=o.scene,n&&(n.rotation=n.rotation||{},n.rotation.hasOwnProperty("x")&&l.rotateX(Je.degreesToRadians(n.rotation.x)),n.rotation.hasOwnProperty("y")&&l.rotateY(Je.degreesToRadians(n.rotation.y)),n.rotation.hasOwnProperty("z")&&l.rotateZ(Je.degreesToRadians(n.rotation.z)),c=(n.scale||1)*s,l.scale.set(c,c,c)),u=(new We["Box3"]).setFromObject(l),d=u.getCenter(new We["Vector3"]),d.multiplyScalar(-1),p=new We["Object3D"],l.applyMatrix((new We["Matrix4"]).makeTranslation(d.x,d.y,d.z)),p.add(l),p.up=new We["Vector3"](0,0,1),l=p,n&&n.translation&&"locate-item-ar"===this.step.type&&(n.translation.hasOwnProperty("x")&&(l.position.x+=n.translation.x*s),n.translation.hasOwnProperty("y")&&(l.position.y+=n.translation.y*s),n.translation.hasOwnProperty("z")&&(l.position.z+=n.translation.z*s)),e.abrupt("return",{object:l,animations:o.animations});case 25:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t,i,r){return e.apply(this,arguments)}return t}(),ModelLoaderAsync:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n,o=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=console.log,e.next=3,Je.readBinaryFile(i,t+".glb");case 3:return n=e.sent,e.abrupt("return",new Promise((function(e,a){var l=new pr.a;-1!==t.indexOf("blob:")?l.load(t,e,s,a):n?l.load(n,e,s,a):r?l.load(o.serverUrl+"/upload/quest/"+i+"/step/3dobject/"+t+".glb",e,s,a):l.load(o.serverUrl+"/statics/3d-models/"+t+".glb",e,s,a)})));case 5:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),addDefaultLightTo3DScene:function(e){var t=new We["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new We["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,i){this.displaySuccessIcon=!0,ut(t,e?"rightAnswer":"wrongAnswer",i)},readMore:function(){this.step.extraText&&(this.story.step=6,this.story.data={readMore:Je.replaceBreakByBR(this.step.extraText),character:this.customization&&this.customization.character&&""!==this.customization.character?-1===this.customization.character.indexOf("blob:")?this.serverUrl+"/upload/quest/"+this.customization.character:this.customization.character:"2"})},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera():this.$store.dispatch("clearMediaStreams")},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t,i=this.deviceMotion,r=!0;if(null!==this.deviceHasGyroscope||this.isIOs||(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha),(!this.deviceHasGyroscope||null===this.geolocation.distance||null===this.geolocation.GPSdistance||this.geolocation.GPSdistance>this.minDistanceForGPS||null===this.geolocation.absoluteOrientationSensor||!this.geolocation.absoluteOrientationSensor.quaternion||isNaN(this.geolocation.position.x)||isNaN(this.geolocation.position.y))&&(r=!1),this.geolocation.target&&this.geolocation.target.scene?(t=this.geolocation.target.scene.getObjectByName("targetObject"),r=r&&"undefined"!==typeof t&&0===ur["a"].getAll().length):r=!1,!r)return i.acceleration.avgData={x:[],y:[],z:[]},i.velocity={x:0,y:0},void(i.dateLatestEvent=null);var s=e.acceleration,a=new We["Vector3"](s.x,s.y,s.z),n=(new We["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);a.applyQuaternion(n),i.acceleration.raw=a;var o=new Date;if(null!==i.dateLatestEvent){var l=(o.getTime()-i.dateLatestEvent.getTime())/1e3;i.acceleration.avgData.x.push(i.acceleration.raw.x),i.acceleration.avgData.y.push(i.acceleration.raw.y),i.acceleration.avgData.z.push(i.acceleration.raw.z),i.acceleration.avgData.x.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.x.shift(),i.acceleration.avgData.y.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.y.shift(),i.acceleration.avgData.z.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.z.shift(),i.acceleration.filtered.x=Je.arrayAverage(i.acceleration.avgData.x),i.acceleration.filtered.y=Je.arrayAverage(i.acceleration.avgData.y),i.acceleration.filtered.z=Je.arrayAverage(i.acceleration.avgData.z),i.isAccelerationIdle=Math.pow(i.acceleration.filtered.x,2)+Math.pow(i.acceleration.filtered.y,2)+Math.pow(i.acceleration.filtered.z,2)<.08;var c=1.4,u=.3;i.velocity.x*i.acceleration.filtered.x<0?i.acceleration.filtered.x*=u:i.isAccelerationIdle||(i.acceleration.filtered.x*=c),i.velocity.y*i.acceleration.filtered.y<0?i.acceleration.filtered.y*=u:i.isAccelerationIdle||(i.acceleration.filtered.y*=c),i.velocity.x+=i.acceleration.filtered.x*l,i.velocity.y+=i.acceleration.filtered.y*l,i.isAccelerationIdle?(i.velocity.x*=.99/Math.pow(i.idleAccelerationCounter,2),i.velocity.y*=.99/Math.pow(i.idleAccelerationCounter,2),i.idleAccelerationCounter=Math.max(100,i.idleAccelerationCounter+1)):i.idleAccelerationCounter=1;var d=5e3/3600,p=Math.sqrt(Math.pow(i.velocity.x,2)+Math.pow(i.velocity.y,2));p>d&&(i.velocity.x=i.velocity.x*d/p,i.velocity.y=i.velocity.y*d/p);var f,h={x:t.position.x,y:t.position.y},m={x:-i.velocity.x*l,y:-i.velocity.y*l};f=i.isAccelerationIdle?{x:0,y:0}:{x:(this.geolocation.position.x-h.x)/600,y:(this.geolocation.position.y-h.y)/600},this.geolocation.GPSdistance<=this.minDistanceForGPS&&(t.position.x=h.x+m.x+f.x,t.position.y=h.y+m.y+f.y,this.geolocation.distance=Math.sqrt(Math.pow(t.position.x,2)+Math.pow(t.position.y,2)),this.geolocation.rawDirection=(Je.radiansToDegrees(-Math.atan2(t.position.y,t.position.x))+90)%360,this.updatePlayerCanTouchTarget())}i.dateLatestEvent=o},updatePlayerCanTouchTarget:function(){!this.geolocation.canTouchTarget&&this.geolocation.distance<=10&&(this.geolocation.canTouchTarget=!0)},waitForGyroscopeDetection:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.abrupt("return",new Promise((function(e,r){null!==i.deviceHasGyroscope?e():i.geolocation.gyroscopeDetectionCounter>100?e():(i.geolocation.gyroscopeDetectionCounter++,Je.setTimeout(o()(a.a.mark((function i(){return a.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.waitForGyroscopeDetection();case 2:e();case 3:case"end":return i.stop()}}),i)}))),250))})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),enlargeThePicture:function(e){this.enlargePicture.show=!0;var t=this.step.options.images[this.playerCode[e]].imagePath;this.enlargePicture.url=-1!==t.indexOf("blob:")?t:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t},triggerIotEvent:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("mqtt"!==this.step.options.protocol){e.next=4;break}this.mqttClient.publish("Graaly",JSON.stringify({macAddress:this.step.options.boardMacAddress,code:this.step.options.code})),e.next=31;break;case 4:if("bluetooth"!==this.step.options.protocol){e.next=30;break}e.t0=this.step.options.object,e.next="lcd"===e.t0?8:"buzzer"===e.t0?10:"chest"===e.t0?12:"relay"===e.t0?15:18;break;case 8:return i=this.step.options.message,e.abrupt("break",19);case 10:return i=this.step.options.duration+","+this.step.options.frequency,e.abrupt("break",19);case 12:return this.iot.chest.disableActionButtons=!0,i=t,e.abrupt("break",19);case 15:return this.iot.relay.disableActionButtons=!0,i=t,e.abrupt("break",19);case 18:throw new Error("Object '"+this.step.options.object+"' not supported");case 19:if(this.sendMessageToBluetoothServer(this.step.options.object+":"+i),"chest"!==this.step.options.object){e.next=24;break}return e.next=23,Je.sleep(2e3);case 23:this.iot.chest.disableActionButtons=!1;case 24:if("relay"!==this.step.options.object){e.next=28;break}return e.next=27,Je.sleep(2e3);case 27:this.iot.relay.disableActionButtons=!1;case 28:e.next=31;break;case 30:throw new Error("IoT protocol not supported: "+this.step.options.protocol);case 31:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothEnableSuccess:function(){console.log("Bluetooth is enabled"),this.bluetooth.enabled=!0,this.searchForBluetoothPeripheral()},bluetoothDisconnect:function(e){if(this.isHybrid){console.log("Disconnecting BLE");var t=this;ble.disconnect(e,(function(){t.bluetooth.enabled=!1,t.bluetooth.deviceId=null}))}},bluetoothEnableFailure:function(){console.log("The user did *not* enable Bluetooth"),ut("Bluetooth could not be enabled","error")},searchForBluetoothPeripheral:function(){console.log("Searching for BT peripherals..."),ble.startScan([],this.bluetoothScanResult)},bluetoothScanResult:function(e){console.log("Device discovered",e),console.log(this.step.options.deviceid),e.name===this.step.options.deviceid&&(this.stopBluetoothScan(),console.log("Graaly IoT BT device discovered"),this.bluetooth.deviceId=e.id,ble.connect(e.id,this.bluetoothDeviceConnected,this.bluetoothDeviceDisonnected))},bluetoothDeviceConnected:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("BT device connected",t),e.next=3,this.sendMessageToBluetoothServer("cm:"+this.step.options.object);case 3:"wait-for-event"===this.step.type&&(console.log("Start notification listening"),ble.startNotification(t.id,this.iotObject.bleServiceId,this.iotObject.bleCharacteristicId,this.onBluetoothNotification,(function(e){return console.error(e)}))),"trigger-event"!==this.step.type||this.step.options.triggerMode&&"auto"!==this.step.options.triggerMode||("chest"===this.step.options.object||"relay"===this.step.options.object?this.triggerIotEvent("open"):this.triggerIotEvent(""));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceDisonnected:function(e){console.log("BT device disconnected",e)},onBluetoothNotification:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,l,c,u,d,p,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Je.bytesToString(t),console.log("Received BT notification: "+i),this.lastReceivedValue=i,null===this.playerResult){e.next=5;break}return e.abrupt("return");case 5:e.t0=this.step.options.object,e.next="keypad"===e.t0?8:"joystick"===e.t0?22:"distance"===e.t0?30:"pot"===e.t0?33:"button"===e.t0?40:"escapebox"===e.t0?45:46;break;case 8:if(!(i.length<8)){e.next=10;break}throw new Error("Invalid data retrieved from IoT device (keypad mode): "+i);case 10:if(this.iot.keypadAnswer=Je.replaceStringAt(this.iot.keypadAnswer,this.iot.keypadAnswer.indexOf("_"),i.charAt(7)),-1!==this.iot.keypadAnswer.indexOf("_")){e.next=21;break}if(this.iot.keypadAnswer!==this.step.options.answer){e.next=16;break}this.checkAnswer(),e.next=21;break;case 16:return this.playerResult=!1,e.next=19,Je.sleep(1e3);case 19:this.iot.keypadAnswer="_".repeat(this.step.options.answer.length),this.playerResult=null;case 21:return e.abrupt("break",47);case 22:if(s=i.match(new RegExp("(\\d+)","g")),r=!0,2===s.length){e.next=26;break}throw new Error("Invalid length for array 'axisValues'");case 26:for(s={X:s[1],Y:s[0]},n=0,o=["X","Y"];n<o.length;n++)l=o[n],c=parseInt(s[l],10),this.iot["axis"+l]=c/255,(c<this.step.options["range"+l].min||c>this.step.options["range"+l].max)&&(r=!1);return r&&this.checkAnswer(),e.abrupt("break",47);case 30:return this.iot.distance=parseInt(i.substring(9),10),this.iot.distance>=this.step.options.range.min&&this.iot.distance<=this.step.options.range.max&&this.checkAnswer(),e.abrupt("break",47);case 33:if(u=i.match(new RegExp("(\\d+)","g")),r=!0,3===u.length){e.next=37;break}throw new Error("Invalid length for array 'potValues'");case 37:for(d=0;d<3;d++)p=parseInt(u[d],10),this.iot["pot"+(d+1)]=p/255,(p<this.step.options["range"+(d+1)].min||p>this.step.options["range"+(d+1)].max)&&(r=!1);return r&&this.checkAnswer(),e.abrupt("break",47);case 40:if(!(i.length<8)){e.next=42;break}throw new Error("Invalid data retrieved from IoT device (button mode): "+i);case 42:return f=i.substring(7),"pressed"===f&&this.checkAnswer(),e.abrupt("break",47);case 45:return e.abrupt("break",47);case 46:throw new Error("Unknown IoT object code '"+this.step.options.object+"'");case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendMessageToBluetoothServer:function(e){var t=this;return new Promise((function(i,r){t.bluetooth.enabled&&null!==t.bluetooth.deviceId?(console.log("sendMessageToBluetoothServer: "+e),ble.writeWithoutResponse(t.bluetooth.deviceId,Ki.baseServiceID,t.createIotCara(t.bluetooth.deviceId),Je.stringToBytes(e),(function(e){console.log("BLE write success",e),i()}),(function(e){console.log("BLE write failure",e),r(e)}))):r(new Error("Bluetooth device not connected"))}))},stopBluetoothScan:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ble.stopScan((function(){console.log("BT Scan stopped")}),(function(e){console.log("Could not stop BT scan",e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stopBluetoothNotification:function(){if(this.isHybrid){var e=this;return new Promise((function(t,i){ble.stopNotification(e.bluetooth.deviceId,Ki.baseServiceID,e.createIotCara(e.bluetooth.deviceId),(function(){t()}),(function(e){i(new Error("Could not stop bluetooth notifications. error: "+e))}))}))}},getIotObjectFromCode:function(e){var t=!0,i=!1,r=void 0;try{for(var s,a=Gi[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var n=s.value;if(n.code===e)return n}}catch(o){i=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}throw new Error("Unknown object code '"+e+"'")},createIotCara:function(e){var t=Ki.baseCara+e.toLowerCase().replaceAll(":","");return t},isTimerAvailable:function(){return!!(this.step&&void 0!==this.step.countDownTime&&!0===this.step.countDownTime.enabled&&Je.timeStringToSeconds(this.step.countDownTime.time)>0)},startCountdown:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!0!==this.isTimerAvailable()){e.next=11;break}if(t=0,i=Qi.getTimeLeft(this.runId,this.step._id),t=null===i?Je.timeStringToSeconds(this.step.countDownTime.time):i,!(t<0)){e.next=9;break}this.step.countDownTime.enabled=!1,e.next=11;break;case 9:return e.next=11,this.manageCountDown(t,this.step._id);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.error("error in countdown()",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}(),manageCountDown:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this,this.step.countDownTime.enabled&&i===this.step._id&&setTimeout(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t<=0)){e.next=5;break}return e.next=3,r.handleTimeUp();case 3:e.next=10;break;case 5:return t--,r.countdowntimeleft=t,t%2===0&&"0"!==r.runId&&Qi.storeTimeLeft(r.runId,r.step._id,t),e.next=10,r.manageCountDown(t,i);case 10:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),handleTimeUp:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isTimeUp=!0,this.stopcountdown(),this.step.countDownTime.enabled=!1,t=this.getStepType(this.step.type),this.$emit("closeAllPanels"),"enigma"!==t.category){e.next=8;break}return e.next=8,this.checkAnswer();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),stopcountdown:function(){this.step.countDownTime.enabled=!1},map:function(e,t,i,r,s){var a=Je.map(e,t,Je.timeStringToSeconds(i),r,s);return a},getStepType:function(e){var t=!0,i=!1,r=void 0;try{for(var s,a=Ji[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var n=s.value;if(n.code===e)return n}}catch(o){i=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},findItemIsFound:function(e){for(var t=!1,i=!1,r=e&&e.windowWidth?e.windowWidth:this.getScreenWidth()/100,s=0;s<this.step.options.coordinates.length;s++)if(!this.step.options.coordinates[s].found){var a={left:Math.round(this.step.options.coordinates[s].left/100*100*r),top:Math.round(this.step.options.coordinates[s].top/100*133*r)},n=Math.round(8*r),o=e?Math.sqrt(Math.pow(a.left-e.posX,2)+Math.pow(a.top-e.posY,2)):100;o<=n?(this.step.options.coordinates[s].found=!0,i=!0,document.getElementById("cross-play"+s).style.left=a.left-n+"px",document.getElementById("cross-play"+s).style.top=a.top-n+"px",document.getElementById("cross-play"+s).style.display="block"):t=!0}return{all:!t,one:i}}}},gr=br,vr=(r("f9ff"),Object(_e["a"])(gr,Hi,Bi,!1,null,"7da48062",null)),wr=vr.exports,kr=r("53fe"),yr=r.n(kr);l["a"].directive("sortable",{inserted:function(e,t){return new yr.a(e,t.value||{})}});var _r={components:{stepPlay:wr,story:cr},data:function(){return this.initialState()},mounted:function(){Je.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake(),this.isHybrid&&"android"===cordova.platformId&&StatusBar.show()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:""}},hint:{isOpened:!1,label:"",suggest:!1,show:!1,used:!1,number:0,remainingNumber:0},info:{isOpened:!1,score:0,quest:{},audio:""},next:{suggest:!1,enabled:!1,canPass:!1},sound:{status:"play"},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},story:{step:null,data:null},loadStepData:!1,run:{},player:"P1",isRunFinished:!1,remotePlay:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!0,answer:null},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:Je.isIOS(),selectedItem:null}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.next=e.next,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectedItem,this.loadStepData=e.loadStepData,this.startDate=e.startDate,this.footer=e.footer},initData:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,this.getQuest(this.questId);case 3:return this.getAudioSound(),this.loadStepData=!1,e.next=7,this.getRun();case 7:return e.next=9,this.getPlayer();case 9:return this.player=e.sent,e.next=12,this.getStep();case 12:if(this.updateHistory(),"use-item"!==this.step.type){e.next=16;break}return e.next=16,this.fillInventory();case 16:this.$q.loading.hide(),this.isHintAvailable()&&(Je.setTimeout(this.alertOnHint,12e3),this.hint.show=!0),Je.setTimeout(this.alertOnNext,18e4),this.loadStepData=!0;case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moveToStep:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Je.clearAllRunningProcesses(),this.resetData(),this.$q.loading.show(),this.loadStepData=!1,e.next=6,this.getRun();case 6:return e.next=8,this.getPlayer();case 8:return this.player=e.sent,e.next=11,this.getStep(!1,t);case 11:if(this.updateHistory(),"use-item"!==this.step.type){e.next=15;break}return e.next=15,this.fillInventory();case 15:this.$q.loading.hide(),this.isHintAvailable()&&(Je.setTimeout(this.alertOnHint,12e3),this.hint.show=!0),Je.setTimeout(this.alertOnNext,18e4),this.loadStepData=!0;case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getRun:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o,l,c,u=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.listForAQuest(this.questId,null,this.lang);case 2:return t=e.sent,i=0,r=!!this.$route.query.hasOwnProperty("remoteplay")&&this.$route.query.remoteplay,e.next=7,this.checkIfRunIsAlreadyLoaded(this.questId);case 7:if(s=e.sent,!s){e.next=12;break}return e.next=11,this.loadOfflineRun(this.questId);case 11:n=e.sent;case 12:if(!t||!t.data){e.next=59;break}this.offline.active=!1,o=0;case 15:if(!(o<t.data.length)){e.next=36;break}if("finished"===t.data[o].status&&(this.isRunFinished=!0),"in-progress"!==t.data[o].status){e.next=33;break}if(this.run=t.data[o],i=t.data[o].currentChapter,!s){e.next=33;break}if(!(n.dateUpdated>this.run.dateUpdated)){e.next=30;break}return l=this.run._id,this.run=n,this.run._id||(this.run._id=l),this.run.questId||(this.run.questId=this.questId,this.run.version=this.questVersion),e.next=28,wi.updateFromOffline(this.run);case 28:e.next=33;break;case 30:return this.run.answers=n.answers,e.next=33,this.updateOfflineRun(this.questId);case 33:o++,e.next=15;break;case 36:if(0!==i){e.next=56;break}return e.next=39,wi.init(this.questId,this.questVersion,this.$route.params.lang,r);case 39:if(c=e.sent,200!==c.status||!c.data||!c.data._id){e.next=52;break}if(!s){e.next=49;break}return this.run=n,this.run._id=c.data._id,this.run.questId||(this.run.questId=this.questId,this.run.version=this.questVersion),e.next=47,wi.updateFromOffline(this.run);case 47:e.next=50;break;case 49:this.run=c.data;case 50:e.next=53;break;case 52:this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")}).onOk((function(){u.$router.push("/quest/play/"+u.questId)}));case 53:this.info.score=0,e.next=57;break;case 56:this.info.score=this.run.tempScore;case 57:e.next=66;break;case 59:if(this.offline.active=!0,!s){e.next=64;break}n&&(this.run=n,this.info.score=this.run.tempScore,i=this.run.currentChapter),e.next=66;break;case 64:return e.next=66,this.updateOfflineRun(this.questId);case 66:if(0!==i){e.next=69;break}return e.next=69,this.updateOfflineRun(this.questId);case 69:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPlayer:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.run.team||!this.run.team.members){e.next=8;break}t=0;case 2:if(!(t<this.run.team.members.length)){e.next=8;break}if(this.run.team.members[t]._id!==this.$store.state.user._id){e.next=5;break}return e.abrupt("return",this.run.team.members[t].player);case 5:t++,e.next=2;break;case 8:return e.abrupt("return","P1");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStep:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.warnings.stepDataMissing=!1,!i){e.next=5;break}r=i,e.next=34;break;case 5:if(this.offline.active){e.next=12;break}return e.next=8,wi.getNextStep(this.questId,this.player);case 8:if(s=e.sent,!s||200===s.status){e.next=12;break}return"app_quest_data_is_obsolete"===s.data.message?this.$q.dialog({title:this.$t("label.QuestUpdated"),message:this.$t("label.PleaseRestartQuest")}).onOk((function(){_.$router.push("/quest/play/"+_.questId)})):this.$q.dialog({title:this.$t("label.TechnicalProblem")}).onOk((function(){_.$router.push("/quest/play/"+_.questId)})),e.abrupt("return",!1);case 12:if(!s||!s.data||200!==s.status){e.next=27;break}if(!s.data.next){e.next=22;break}if("locationMarker"!==s.data.next){e.next=19;break}return this.step={id:"sensor"},e.abrupt("return",!1);case 19:r=s.data.next;case 20:e.next=25;break;case 22:return this.info.quest.playersNumber&&this.info.quest.playersNumber>1&&this.showWaitingPage(),this.getPreviousStep(),e.abrupt("return",!1);case 25:e.next=34;break;case 27:return e.next=29,this.getNextOfflineStep(this.questId,null,this.player);case 29:if(r=e.sent,r){e.next=34;break}return this.info.quest.playersNumber&&this.info.quest.playersNumber>1&&this.showWaitingPage(),this.getPreviousStep(),e.abrupt("return",!1);case 34:if("locationMarker"!==r){e.next=37;break}return this.step={id:"sensor"},e.abrupt("return",!1);case 37:if("end"!==r){e.next=39;break}return e.abrupt("return",this.$router.push("/quest/"+this.questId+"/end"));case 39:return e.next=41,this.checkIfStepIsAlreadyLoaded(r);case 41:if(n=e.sent,n&&!t){e.next=54;break}return e.next=45,_i.getById(r,this.questVersion,this.lang);case 45:if(o=e.sent,!o||!o.data||200!==o.status){e.next=50;break}o.data&&o.data.message?"Step not yet available"===o.data.message&&this.showStepBlockedMessage(o.data.startDate):(this.step=o.data,this.step.id=this.step.stepId,this.getPreviousStep(),this.step.hint&&(this.hint.remainingNumber=this.step.hint.length)),e.next=52;break;case 50:return this.warnings.stepDataMissing=!0,e.abrupt("return",!1);case 52:e.next=140;break;case 54:return e.next=56,Je.readFile(this.questId,"step_"+r+".json");case 56:if(l=e.sent,l){e.next=68;break}if(!t){e.next=62;break}this.warnings.questDataMissing=!0,e.next=66;break;case 62:return e.next=64,this.getStep(!0,i);case 64:return c=e.sent,e.abrupt("return",c);case 66:e.next=140;break;case 68:if(u=JSON.parse(l),u.hint&&(this.hint.remainingNumber=u.hint.length),d=this.offlineCheckAccess(u),d&&d.message&&"Step not yet available"===stepAccessMessage&&this.showStepBlockedMessage(d.startDate),!u.backgroundImage){e.next=77;break}return e.next=75,Je.readBinaryFile(this.questId,u.backgroundImage);case 75:p=e.sent,p?u.backgroundImage=p:this.warnings.stepDataMissing=!0;case 77:if(!u.videoStream||""===u.videoStream){e.next=82;break}return e.next=80,Je.readBinaryFile(this.questId,u.videoStream);case 80:f=e.sent,f?u.videoStream=f:this.warnings.stepDataMissing=!0;case 82:if("choose"!==u.type||!u.options){e.next=93;break}h=0;case 84:if(!(h<u.options.length)){e.next=93;break}if(!u.options[h].imagePath){e.next=90;break}return e.next=88,Je.readBinaryFile(this.questId,u.options[h].imagePath);case 88:m=e.sent,m?u.options[h].imagePath=m:this.warnings.stepDataMissing=!0;case 90:h++,e.next=84;break;case 93:if("memory"!==u.type||!u.options||!u.options.items){e.next=104;break}h=0;case 95:if(!(h<u.options.items.length)){e.next=104;break}if(!u.options.items[h].imagePath){e.next=101;break}return e.next=99,Je.readBinaryFile(this.questId,u.options.items[h].imagePath);case 99:b=e.sent,b?u.options.items[h].imagePath=b:this.warnings.stepDataMissing=!0;case 101:h++,e.next=95;break;case 104:if("code-image"!==u.type||!u.options||!u.options.images){e.next=115;break}h=0;case 106:if(!(h<u.options.images.length)){e.next=115;break}if(!u.options.images[h].imagePath){e.next=112;break}return e.next=110,Je.readBinaryFile(this.questId,u.options.images[h].imagePath);case 110:g=e.sent,g?u.options.images[h].imagePath=g:this.warnings.stepDataMissing=!0;case 112:h++,e.next=106;break;case 115:if("jigsaw-puzzle"!==u.type||!u.options||!u.options.picture||""===u.options.picture){e.next=120;break}return e.next=118,Je.readBinaryFile(this.questId,u.options.picture);case 118:v=e.sent,v?u.options.picture=v:this.warnings.stepDataMissing=!0;case 120:if("new-item"!==u.type||!u.options||!u.options.picture||""===u.options.picture){e.next=125;break}return e.next=123,Je.readBinaryFile(this.questId,u.options.picture);case 123:w=e.sent,w&&(u.options.picture=w,u.options.hasOwnProperty("pictures")&&u.options.pictures[this.lang]&&(u.options.pictures[this.lang]=w));case 125:if("character"!==u.type||!u.options||!u.options.character||""===u.options.character||"usequestcharacter"===u.options.character){e.next=130;break}return e.next=128,Je.readBinaryFile(this.questId,u.options.character);case 128:k=e.sent,k&&(u.options.character=k);case 130:if("find-item"!==u.type&&"use-item"!==u.type||!u.options||!u.options.altFile||""===u.options.altFile){e.next=135;break}return e.next=133,Je.readBinaryFile(this.questId,u.options.altFile);case 133:y=e.sent,y&&(u.options.altFile=y);case 135:return this.step=u,this.step.id=this.step.stepId,this.getPreviousStep(),this.offline.answer=this.step.answers,e.abrupt("return",!0);case 140:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),showWaitingPage:function(){var e=this;this.step={id:"waiting"},this.next.enabled=!1,this.next.canPass=!1,setTimeout(o()(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.moveToStep();case 1:case"end":return t.stop()}}),t)}))),15e3)},updateHistory:function(){this.$store.state.history&&this.$store.state.history.items||(this.$store.state.history={items:[],index:0}),-1===this.$store.state.history.items.indexOf(this.step.stepId)&&this.step.stepId&&this.$store.state.history.items.push(this.step.stepId)},getPreviousStep:function(){(this.step.conditions&&this.step.conditions.length>0||"waiting"===this.step.id)&&(this.previousStepId="ok")},trackStepSuccess:function(){var e=o()(a.a.mark((function e(t,i,r){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r&&(this.info.score+=t),"image-over-flow"!==this.step.type&&this.hideHint(),e.next=4,this.saveOfflineAnswer(!0);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),trackStepPlayed:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("sensor"!==this.step.id){e.next=5;break}return e.next=3,this.getMarkerStep(t);case 3:e.next=14;break;case 5:if("waiting"!==this.step.id){e.next=10;break}return e.next=8,this.getMarkerStep(t);case 8:e.next=14;break;case 10:this.next.enabled=!0,"image-over-flow"!==this.step.type&&(this.next.suggest=!0,this.hint.show=!1,this.hint.suggest=!1),this.inventory.show=!1,this.footer.tabSelected="next";case 14:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),trackStepPass:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:(!this.step.canPass&&!1!==this.step.canPass||!0===this.step.canPass)&&(this.next.canPass=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackStepFail:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.hideHint(),e.next=3,this.saveOfflineAnswer(!1);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),trackMessage:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"suggestInventory"===t&&(this.inventory.suggest=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMarkerStep:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offline.active){e.next=4;break}return e.next=3,wi.getMarkerNextStep(this.questId,t,this.player);case 3:r=e.sent;case 4:if(!r||!r.data){e.next=8;break}r.data.next?i=r.data.next:ut(this.$t("label.NothingOccurs"),"info"),e.next=11;break;case 8:return e.next=10,this.getNextOfflineStep(this.questId,t,this.player);case 10:i=e.sent;case 11:if(!i){e.next=25;break}if("end"!==i){e.next=24;break}if(!this.$store.state.user.isAdmin){e.next=17;break}return e.abrupt("return",this.$router.push("/admin/validate/"+this.questId));case 17:if(this.$store.state.user._id!==this.info.quest.authorUserId){e.next=21;break}return e.abrupt("return",this.$router.push("/quest/builder/"+this.questId));case 21:return e.abrupt("return",this.$router.push("/quest/"+this.questId+"/end"));case 22:e.next=25;break;case 24:this.moveToStep(i);case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideHint:function(){this.step.hint={}},getBackgroundImage:function(){return this.info.quest.picture&&"_"===this.info.quest.picture[0]?"statics/images/quest/"+this.info.quest.picture:this.info.quest.picture&&-1!==this.info.quest.picture.indexOf("blob:")?this.info.quest.picture:this.info.quest.picture?this.serverUrl+"/upload/quest/"+this.info.quest.picture:"statics/images/quest/default-quest-picture.png"},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.serverUrl+"/upload/quest/"+this.info.quest.customization.logo},getAudioSound:function(){this.info.quest.customization&&this.info.quest.customization.audio&&-1!==this.info.quest.customization.audio.indexOf("blob:")?this.info.audio=this.info.quest.customization.audio:this.info.audio=this.serverUrl+"/upload/quest/"+this.info.quest.customization.audio},nextStep:function(){var e=o()(a.a.mark((function e(t){var i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.state.history.index++,!(this.$store.state.history.items&&this.$store.state.history.index<this.$store.state.history.items.length)){e.next=4;break}return this.moveToStep(this.$store.state.history.items[this.$store.state.history.index]),e.abrupt("return");case 4:if(this.loadStepData=!1,!this.next.enabled){e.next=10;break}return e.next=8,this.moveToNextStep("success");case 8:e.next=17;break;case 10:if(!this.next.canPass){e.next=17;break}if(!t){e.next=16;break}return e.next=14,this.passStep();case 14:e.next=17;break;case 16:this.$q.dialog({dark:!0,message:this.$t("label.ConfirmPass"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.passStep();case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){}));case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),passStep:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offline.active){e.next=3;break}return e.next=3,wi.passStep(this.run._id,this.step.id,this.player);case 3:return e.next=5,this.passOfflineStep(this.step.id);case 5:return e.next=7,this.moveToNextStep("pass");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moveToNextStep:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveOfflineRun(this.questId,this.run);case 2:this.next.enabled=!1,this.next.suggest=!1,this.next.canPass=!1,"locate-item-ar"!==this.step.type&&"image-over-flow"!==this.step.type||this.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),this.moveToStep();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),previousStep:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=!0,this.$store.state.history.index--,this.$store.state.history.index<0?(this.$store.state.history.index=0,t=!1):this.$store.state.history.items&&this.$store.state.history.index>this.$store.state.history.items.length&&(this.$store.state.history.index=this.$store.state.history.items.length),t&&this.moveToStep(this.$store.state.history.items[this.$store.state.history.index]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),askForHint:function(){var e=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(this.hint.suggest=!1,!this.hint.isOpened){e.next=7;break}this.closeAllPanels(),e.next=13;break;case 7:if(!this.$store.state.user.bonus||!this.$store.state.user.bonus.name||"infinitehint"!==this.$store.state.user.bonus.name){e.next=12;break}return e.next=10,this.getHint();case 10:e.next=13;break;case 12:this.$q.dialog({dark:!0,message:this.$t("label.ConfirmHint"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHint();case 2:case"end":return e.stop()}}),e)}))));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getHint:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offline.active){e.next=4;break}return e.next=3,wi.getHint(this.run._id,this.step.stepId,this.run.version);case 3:t=e.sent;case 4:t&&t.hint?this.hint.label=t.hint:this.hint.label=this.step.hint[this.hint.number],this.step.hint&&this.hint.number<this.step.hint.length-1?this.hint.number++:this.hint.number=0,this.hint.used=!0,this.closeAllPanels(),this.hint.isOpened=!0,this.footer.tabSelected="hint",this.hint.remainingNumber>0&&this.hint.remainingNumber--;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},hideFooterButtons:function(){this.footer.show=!1},showFooterButtons:function(){this.footer.show=!0},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.warnings.inventoryMissing=!1,this.offline.active){e.next=5;break}return e.next=4,wi.listWonObjects(this.questId,this.run._id);case 4:t=e.sent;case 5:if(!t||!t.data){e.next=10;break}for(this.inventory.items.length=0,i=0;i<t.data.length;i++)this.inventory.items.push({picture:t.data[i].pictures&&t.data[i].pictures[this.lang]?t.data[i].pictures[this.lang]:t.data[i].picture,title:t.data[i].title}),t.data[i].titles&&(this.inventory.items[i].titles=t.data[i].titles);e.next=14;break;case 10:return e.next=12,this.listWonObjects();case 12:r=e.sent,r?this.inventory.items=r:this.warnings.inventoryMissing=!0;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInventory:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.inventory.items||0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.footer.tabSelected="inventory");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInfo:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.info.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.info.isOpened=!0,this.footer.tabSelected="info");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToMap:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$router.push("/home"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),restartGame:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureToRestartThisQuest"),ok:this.$t("label.Restart"),cancel:this.$t("label.Cancel")}).onOk((function(){t.cancelRun()})).onCancel((function(){}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelRun:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.endRun(this.run._id,null,this.questId,this.questVersion,this.info.quest.mainLanguage);case 2:return e.next=4,Je.writeInFile(this.questId,"run_"+this.questId+".json",JSON.stringify({}),!1);case 4:this.$router.push("/quest/play/"+this.questId);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showStepBlockedMessage:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.startDate.enabled=!0,this.startDate.date=t,Je.setTimeout(this.computeRemainingTime,1e3);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),computeRemainingTime:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=new Date,i=new Date(this.startDate.date.substr(0,4),this.startDate.date.substr(5,2)-1,this.startDate.date.substr(8,2),0,0,0),r=(i-t.getTime())/1e3,!(r<0)){e.next=7;break}return e.next=6,this.initData();case 6:return e.abrupt("return");case 7:this.startDate.remainingDays=Math.floor(r/86400),this.startDate.remainingHours=Math.floor((r-86400*this.startDate.remainingDays)/3600),this.startDate.remainingMinutes=Math.floor((r-86400*this.startDate.remainingDays-3600*this.startDate.remainingHours)/60),this.startDate.remainingSeconds=Math.floor(r%60),Je.setTimeout(this.computeRemainingTime,1e3);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuest:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o,l,c,u,d;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.questDataMissing=!1,e.next=3,Xe.isCached(t);case 3:if(r=e.sent,r&&!i){e.next=11;break}return e.next=7,Xe.getLastById(t);case 7:s=e.sent,s&&s.data?this.info.quest=s.data:this.warnings.questDataMissing=!0,e.next=45;break;case 11:return e.next=13,Je.readFile(t,"quest_"+t+".json");case 13:if(n=e.sent,n){e.next=25;break}if(!i){e.next=19;break}this.warnings.questDataMissing=!0,e.next=23;break;case 19:return e.next=21,this.getQuest(t,!0);case 21:return o=e.sent,e.abrupt("return",o);case 23:e.next=45;break;case 25:return this.info.quest=JSON.parse(n),e.next=28,Je.readBinaryFile(t,this.info.quest.picture);case 28:if(l=e.sent,this.info.quest.picture=l||"_default-quest-picture.png",!this.info.quest.customization||!this.info.quest.customization.logo||""===this.info.quest.customization.logo){e.next=35;break}return e.next=33,Je.readBinaryFile(t,this.info.quest.customization.logo);case 33:c=e.sent,c&&(this.info.quest.customization.logo=c);case 35:if(!this.info.quest.customization||!this.info.quest.customization.audio||""===this.info.quest.customization.audio||this.isIOs){e.next=40;break}return e.next=38,Je.readBinaryFile(t,this.info.quest.customization.audio);case 38:u=e.sent,u&&(this.info.quest.customization.audio=u);case 40:if(!this.info.quest.customization||!this.info.quest.customization.character||""===this.info.quest.customization.character){e.next=45;break}return e.next=43,Je.readBinaryFile(t,this.info.quest.customization.character);case 43:d=e.sent,d&&(this.info.quest.customization.character=d);case 45:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),selectItem:function(e){"use-item"!==this.step.type?(this.inventory.detail.isOpened=!0,e.pictures&&e.pictures[this.lang]&&""!==e.pictures[this.lang]?this.inventory.detail.url=e.picture.indexOf("statics/")>-1||-1!==e.picture.indexOf("blob:")?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture:this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.lang]&&""!==e.titles[this.lang]?this.inventory.detail.title=e.titles[this.lang]:this.inventory.detail.title=e.title):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.sendFeedback(this.feedback.message,{questId:this.questId,stepId:this.step.stepId});case 2:t=e.sent,t?(ut(this.$t("label.YourMessageHasBeenSent"),"info"),this.feedback.isOpened=!1):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isHintAvailable:function(){return!!(this.step&&this.step.hint&&""!==this.step.hint&&this.step.hint.length>0)},alertOnHint:function(){this.hint.suggest=!0},alertOnNext:function(){this.next.suggest=!0},checkIfStepIsAlreadyLoaded:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Je.checkIfFileExists(this.questId,"step_"+t+".json");case 4:if(i=e.sent,!i){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkIfRunIsAlreadyLoaded:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Je.checkIfFileExists(this.questId,"run_"+t+".json");case 4:if(i=e.sent,!i){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadOfflineRun:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Je.readFile(this.questId,"run_"+t+".json");case 4:if(i=e.sent,i){e.next=9;break}return e.abrupt("return",!1);case 9:return e.abrupt("return",JSON.parse(i));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateOfflineRun:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:return this.run&&this.run.questId||(this.run={userId:this.$store.state.user._id,questId:t,version:this.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:this.remotePlay,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:this.info.quest.picture,thumb:this.info.quest.thumb||"default-quest-thumb.png",title:this.info.quest.title,type:this.info.quest.type,zipcode:this.info.quest.location.zipcode,town:this.info.quest.location.town,country:this.info.quest.location.country},language:this.lang,userData:{name:this.$store.state.user.name,picture:this.$store.state.user.picture,location:this.$store.state.user.location},history:[],historyIndex:0}),e.next=5,this.saveOfflineRun(t,this.run);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveOfflineAnswer:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,l,c,u,d,p;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.checkIfStepIsAlreadyPlayedInRun(this.step.stepId,this.player);case 4:if(i=e.sent,r=this.run.conditionsDone,s=!1,n=0,!t){e.next=22;break}if(!1!==this.step.displayRightAnswer){e.next=16;break}return e.next=12,this.removeConditionsUntilLastMarker(r,this.step.stepId,this.run.version);case 12:l=e.sent,r=l.found?this.updateConditions(r,this.step.stepId,!0,this.step.type,!1,this.player):this.updateConditions(r,this.step.stepId,!0,this.step.type,!0,this.player),e.next=17;break;case 16:r=this.updateConditions(r,this.step.stepId,!0,this.step.type,!0,this.player);case 17:s=!0,n=this.hint.used||this.nbTry>1?this.step.points/2:this.step.points,o="success",e.next=32;break;case 22:if(s=!0,o="fail",!1!==this.step.displayRightAnswer){e.next=31;break}return e.next=27,this.removeConditionsUntilLastMarker(r,this.step.stepId,this.run.version);case 27:l=e.sent,r=l.found?this.updateConditions(r,this.step.stepId,!1,this.step.type,!1,this.player):this.updateConditions(r,this.step.stepId,!1,this.step.type,!0,this.player),e.next=32;break;case 31:r=this.updateConditions(r,this.step.stepId,!1,this.step.type,!0,this.player);case 32:if(c={stepId:this.step.stepId,stepNumber:this.step.number,nbTry:1,ended:s,score:n,reward:0,status:o,useHint:!1,date:new Date,online:!1},"new-item"===this.step.type&&(this.run.inventory?this.run.inventory.push(this.step.answers):this.run.inventory=[this.step.answers],-1===r.indexOf("objectWon_"+this.step.stepId)&&r.push("objectWon_"+this.step.stepId)),!i){if(u=!1,this.run.answers&&this.run.answers.length>1)for(d=0;d<this.run.answers.length;d++)this.run.answers[d]&&this.run.answers[d].stepId&&null!==this.run.answers[d].stepId&&this.run.answers[d].stepId===this.step.stepId&&(u=!0,c.nbTry=this.run.answers[d].nbTry+1,c.useHint=this.run.answers[d].useHint,this.run.answers[d]=c);u||(this.run.answers||(this.run.answers=[]),this.run.answers.push(c))}return this.run.conditionsDone=r,e.next=38,this.saveOfflineRun(this.questId,this.run);case 38:if(p=e.sent,!p){e.next=41;break}return e.abrupt("return",!0);case 41:return e.abrupt("return",!1);case 42:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),passOfflineStep:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:return this.run.conditionsDone=this.updateConditions(this.run.conditionsDone,t,!1,this.step.type,!0,this.player),e.next=5,this.saveOfflineRun(this.questId,this.run);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),offlineCheckAccess:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!(t&&t.startDate&&t.startDate.enabled&&t.startDate.date)){e.next=7;break}if(i=new Date,r=Date.UTC(t.startDate.date.substr(0,4),t.startDate.date.substr(5,2),t.startDate.date.substr(8,2),0,0,0),!(i<r)){e.next=7;break}return e.abrupt("return",{message:"Step not yet available",date:t.startDate.date});case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveOfflineRun:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.info.quest.playersNumber&&this.info.quest.playersNumber>1)){e.next=2;break}return e.abrupt("return",!1);case 2:return i.dateUpdated=new Date,e.next=5,Je.writeInFile(this.questId,"run_"+t+".json",JSON.stringify(i),!0);case 5:if(r=e.sent,!r){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),getNextOfflineStep:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n,o,l,c,u,d,p,f,h,m,b,g,v,w;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=[],e.next=3,this.updateOfflineRun(t);case 3:if(!(this.run.history&&this.run.historyIndex<this.run.history.length)){e.next=8;break}return this.run.historyIndex++,e.next=7,this.saveOfflineRun(t,this.run);case 7:return e.abrupt("return",this.run.history[this.run.historyIndex-1]);case 8:if(!this.info.quest.steps){e.next=18;break}n=0;case 10:if(!(n<this.info.quest.steps.length)){e.next=18;break}return e.next=13,Je.readFile(t,"step_"+this.info.quest.steps[n]+".json");case 13:o=e.sent,s.push(JSON.parse(o));case 15:n++,e.next=10;break;case 18:if(l=this.run.currentChapter,l){e.next=25;break}if(!(this.info.quest.chapters&&this.info.quest.chapters.length>0)){e.next=24;break}l=this.info.quest.chapters[0],e.next=25;break;case 24:return e.abrupt("return",!1);case 25:if(!i){e.next=65;break}return e.next=28,this.listSpecificTypeForAChapter(s,l,"locate-marker");case 28:if(c=e.sent,u=[],!(c&&c.length>0)){e.next=51;break}n=0;case 32:if(!(n<c.length)){e.next=51;break}if(!i||c[n].answers===i){e.next=35;break}return e.abrupt("continue",48);case 35:if(!this.run.conditionsDone||-1!==this.run.conditionsDone.indexOf("stepDone_"+c[n].stepId)){e.next=48;break}if(!(c[n].conditions&&c[n].conditions.length>0)){e.next=47;break}d=0;case 38:if(!(d<c[n].conditions.length)){e.next=44;break}if(-1!==this.run.conditionsDone.indexOf(c[n].conditions[d])){e.next=41;break}return e.abrupt("continue",48);case 41:d++,e.next=38;break;case 44:u.push({id:c[n].stepId,nbConditions:c[n].conditions.length}),e.next=48;break;case 47:u.push({id:c[n].stepId,nbConditions:0});case 48:n++,e.next=32;break;case 51:if(0!==u.length){e.next=53;break}return e.abrupt("return",!1);case 53:for(p=0,n=0;n<u.length;n++)u[n].nbConditions>=p&&(f=u[n].id,p=u[n].nbConditions);if("simple"!==this.info.quest.editorMode){e.next=60;break}return e.next=58,this.saveOfflineAnswer("success");case 58:e.next=65;break;case 60:h=this.run.conditionsDone,h.push("stepDone_"+f.toString()),h.push("stepDone"+this.player+"_"+f.toString()),this.run.conditionDone=h,this.run.currentStep=f;case 65:return e.next=67,this.listForAChapter(s,l,r);case 67:if(m=e.sent,b=!1,!(m&&m.length>0)){e.next=101;break}n=0;case 71:if(!(n<m.length)){e.next=101;break}if(!this.run.conditionsDone||-1!==this.run.conditionsDone.indexOf("stepDone"+r+"_"+m[n].stepId)){e.next=98;break}if(!(m[n].conditions&&m[n].conditions.length>0)){e.next=81;break}d=0;case 75:if(!(d<m[n].conditions.length)){e.next=81;break}if(-1!==this.run.conditionsDone.indexOf(m[n].conditions[d])){e.next=78;break}return e.abrupt("continue",98);case 78:d++,e.next=75;break;case 81:if("locate-marker"!==m[n].type){e.next=85;break}if(!this.info.quest||"advanced"!==this.info.quest.editorMode){e.next=85;break}return b=!0,e.abrupt("continue",98);case 85:if("end-chapter"!==m[n].type){e.next=96;break}return e.next=88,this.moveToNextChapter();case 88:if(g=e.sent,"end"===g){e.next=93;break}return e.next=92,this.getNextOfflineStep(t,i,r);case 92:g=e.sent;case 93:return e.abrupt("return",g);case 96:return v=m[n].stepId,e.abrupt("return",v);case 98:n++,e.next=71;break;case 101:if(!this.info.quest||"simple"!==this.info.quest.editorMode||b){e.next=110;break}return e.next=104,this.moveToNextChapter();case 104:if(w=e.sent,"end"===w){e.next=109;break}return e.next=108,this.getNextOfflineStep(t,i,r);case 108:w=e.sent;case 109:return e.abrupt("return",w);case 110:if(!b||!this.info.quest||"advanced"!==this.info.quest.editorMode){e.next=112;break}return e.abrupt("return","locationMarker");case 112:return e.abrupt("return",!1);case 113:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listSpecificTypeForAChapter:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=[],t)for(n=0;n<t.length;n++)t[n].chapterId.toString()===i.toString()&&t[n].type.toString()===r.toString()&&s.push(t[n]);return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listForAChapter:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=[],t)for(n=0;n<t.length;n++)t[n].chapterId!==i||"All"!==t[n].player&&t[n].player!==r||s.push(t[n]);return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listWonObjects:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],!(this.run.conditionsDone&&this.run.conditionsDone.length>0)){e.next=29;break}i=0;case 3:if(!(i<this.run.conditionsDone.length)){e.next=29;break}if(-1===this.run.conditionsDone[i].indexOf("objectWon_")){e.next=26;break}return r=this.run.conditionsDone[i].replace("objectWon_",""),e.next=8,Je.readFile(this.questId,"step_"+r+".json");case 8:if(s=e.sent,!s){e.next=26;break}if(n=JSON.parse(s),!(n.options&&n.options.picture&&n.options.title)){e.next=26;break}if(-1!==n.options.picture.indexOf("statics")){e.next=24;break}if(!n.options.pictures||!n.options.pictures[this.lang]||""===n.options.pictures[this.lang]){e.next=19;break}return e.next=16,Je.readBinaryFile(this.questId,n.options.pictures[this.lang]);case 16:o=e.sent,e.next=22;break;case 19:return e.next=21,Je.readBinaryFile(this.questId,n.options.picture);case 21:o=e.sent;case 22:e.next=25;break;case 24:o=n.options.picture;case 25:t.push({step:r,picture:o,originalPicture:n.options.picture,title:n.options.title,pictures:n.options.pictures,titles:n.options.titles});case 26:i++,e.next=3;break;case 29:return e.abrupt("return",t);case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfStepIsAlreadyPlayedInRun:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.run&&this.run.conditionsDone&&this.run.conditionsDone.length>0)){e.next=3;break}if(-1===this.run.conditionsDone.indexOf("stepDone"+i+"_"+t)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),updateConditions:function(e,t,i,r,s,a){if("undefined"===typeof e&&(e=[]),-1===e.indexOf("stepDone_"+t)&&s&&e.push("stepDone_"+t),-1===e.indexOf("stepDone"+a+"_"+t)&&s&&e.push("stepDone"+a+"_"+t),-1!==e.indexOf("stepSuccess_"+t)){var n=e.indexOf("stepSuccess_"+t);e.splice(n,1),-1!==e.indexOf("stepSuccess"+a+"_"+t)&&(n=e.indexOf("stepSuccess"+a+"_"+t),e.splice(n,1))}if(-1!==e.indexOf("stepFail_"+t)){var o=e.indexOf("stepFail_"+t);e.splice(o,1),-1!==e.indexOf("stepFail"+a+"_"+t)&&(o=e.indexOf("stepFail"+a+"_"+t),e.splice(o,1))}var l=["info-text","info-video","new-item","character","end-chapter"];return-1===l.indexOf(r)&&(i?(e.push("stepSuccess_"+t),e.push("stepSuccess"+a+"_"+t)):(e.push("stepFail_"+t),e.push("stepFail"+a+"_"+t))),e},removeStepFromConditions:function(e,t){if(!e)return e;for(var i=[],r=0;r<e.length;r++)-1!==e[r].indexOf("_"+t)&&i.push(r);for(r=i.length-1;r>=0;r--)e.splice(i[r],1);return e},removeConditionsUntilLastMarker:function(){var e=o()(a.a.mark((function e(t,i,r){var s,n,o,l,c,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[i],n=0;case 2:if(!(n<7)){e.next=18;break}return e.next=5,Je.readFile(this.questId,"step_"+i+".json");case 5:if(l=e.sent,l&&(o=JSON.parse(l)),"locate-marker"!==o.type){e.next=9;break}return e.abrupt("break",18);case 9:if(c=!1,o.conditions&&o.conditions.length>0)for(u=0;u<o.conditions.length;u++)-1!==o.conditions[u].indexOf("stepDone_")&&(i=o.conditions[u].replace("stepDone_",""),s.push(i),c=!0);if(c){e.next=13;break}return e.abrupt("return",{found:!1,updatedCondition:t});case 13:if(6!==n){e.next=15;break}return e.abrupt("return",{found:!1,updatedCondition:t});case 15:n++,e.next=2;break;case 18:for(u=0;u<s.length;u++)t=this.removeStepFromConditions(t,s[u]);return e.abrupt("return",{found:!0,updatedCondition:t});case 20:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),moveToNextChapter:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=0,this.info.quest.chapters&&this.info.quest.chapters.length>0)if(this.run.currentChapter&&0!==this.run.currentChapter)for(i=0;i<this.info.quest.chapters.length;i++)this.info.quest.chapters[i]===this.run.currentChapter&&(t=i<this.info.quest.chapters.length-1?this.info.quest.chapters[i+1]:"end");else t=this.info.quest.chapters[0];return this.run.currentChapter=t,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cutSound:function(){var e=document.getElementById("background-music");e&&("play"===this.sound.status?(e.pause(),this.sound.status="pause"):(e.play(),this.sound.status="play"))}}},Sr=_r,xr=(r("84ff"),Object(_e["a"])(Sr,zi,ji,!1,null,"3484237c",null)),Cr=xr.exports,qr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[e.warnings.noNetwork?i("div",[i("div",{staticClass:"bg-primary"},[i("div",{staticClass:"centered q-pa-lg"},[i("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),i("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),!e.warnings.noNetwork&&e.quest&&e.quest.customization&&e.quest.customization.removeScoring?i("div",{staticClass:"q-ma-md rounded background-lighter2"},[i("div",[e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?i("h4",{domProps:{innerHTML:e._s(e.quest.customization.endMessage)}}):e._e(),e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?e._e():i("h4",[e._v(e._s(e.$t("label.ThanksForPlaying")))])]),e.isUserAuthor?i("div",{staticClass:"back centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?i("div",{staticClass:"back centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.openValidation(e.questId,e.quest.version)}}})],1):e._e()]):e._e(),e.isUserAuthor?i("div",{staticClass:"back centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():i("div",{staticClass:"q-pa-md",staticStyle:{"margin-top":"50px"}},[e.run&&e.run._id?i("div",[i("div",{staticClass:"relative-position header-point-box"},[i("div",{staticClass:"rounded background-lighter2 centered absolute full-width"},[i("h2",{staticClass:"text-center title2 q-mt-xl q-mb-sm q-mx-xl text-uppercase"},[e._v(e._s(e.$t("label.YouWin")))]),i("div",{staticClass:"relative-position progress-box"},[i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),i("div",{staticClass:"value"},[e._v("\n                "+e._s(Math.floor(100*e.level.progress))+"%\n              ")])]),i("div",{staticClass:"rank-level"},[i("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])]),e.run&&e.run.duration?i("div",{staticClass:"centered q-mb-md"},[e._v("\n            "+e._s(e.$t("label.YourTime"))+": "+e._s(e.run.duration.h)+"h "+e._s(e.run.duration.m)+"m \n          ")]):e._e()]),i("div",{staticClass:"full-width centered header-point absolute"},[i("img",{attrs:{src:"statics/images/icon/wonpoint.png"}}),i("div",[e._v("+"+e._s(e.run.stars))])])]),i("div",{staticClass:"centered q-mt-md subtitle5"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),i("div",{staticClass:"centered q-px-md"},[i("span",{directives:[{name:"show",rawName:"v-show",value:"discovery"!==e.quest.type&&e.run.score>0&&e.quest&&"public"===e.quest.access,expression:"quest.type !== 'discovery' && run.score > 0 && quest && quest.access === 'public'"}]},[i("a",{staticClass:"small",on:{click:e.openChallengeBox}},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),i("span",{staticClass:"secondary-font-very-small"},[e._v(" "+e._s(e.$t("label.or"))+" ")])]),i("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])]),e.author?i("div",{staticClass:"centered q-mt-lg"},[i("div",{staticClass:"user-card user-card-small relative-position",staticStyle:{margin:"0px"}},[i("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.author.statistics&&e.author.statistics.nbQuestsCreated&&e.author.statistics.nbQuestsCreated>0?i("div",{staticClass:"profile-item-creator"},[i("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.author.statistics&&e.author.statistics.nbQuestsSuccessful&&e.author.statistics.nbQuestsSuccessful>0?i("div",{staticClass:"profile-item-level"},[i("img",{attrs:{src:"statics/images/icon/level"+e.author.level+".svg"}})]):e._e()])]),i("div",{staticClass:"centered subtitle3"},[e._v("\n          "+e._s(e.author.name)+"\n        ")]),e.$store.state.user.id!==e.author._id?i("div",{staticClass:"centered q-pt-sm"},[e.author.status&&"friend"===e.author.status?e._e():i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.author.status&&"friend"===e.author.status?i("div",{staticClass:"centered"},[i("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n              "+e._s(e.$t("label.Followed"))+"\n            ")])],1):e._e()],1):e._e()]):e._e(),i("q-dialog",{attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[i("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1),"discovery"!==e.quest.type&&e.showAddReview&&e.quest&&"public"===e.quest.access?i("div",{staticClass:"q-mx-md q-mt-xl q-pa-sm centered"},[i("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),i("div",{staticClass:"q-py-sm"},[i("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"white",disable:e.reviewSent},on:{click:function(t){e.showReviewText=!0}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1)]):e._e(),i("q-dialog",{staticClass:"over-map",model:{value:e.showReviewText,callback:function(t){e.showReviewText=t},expression:"showReviewText"}},[i("div",{staticClass:"q-pa-md q-pt-lg centered bg-grey"},[i("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),i("div",{staticClass:"q-py-sm"},[i("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"secondary",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),i("div",{staticClass:"subtitle6 q-pt-lg"},[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width q-my-sm",attrs:{placeholder:e.$t("label.Feedback"),rows:"4",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}}),i("div",{staticClass:"q-pa-md"},[i("a",{on:{click:function(t){e.showReviewText=!1}}},[e._v(e._s(e.$t("label.Cancel")))])])],1)]),e.showReward&&e.run&&e.run.questData?i("div",{staticClass:"q-pa-md q-mt-lg centered rounded background-lighter2"},[i("div",{staticClass:"subtitle4 q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),i("div",{staticClass:"q-pt-md"},[i("img",{staticClass:"badge-alone",attrs:{src:e.serverUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),i("div",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}]},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),i("div",[e._v(e._s(e.$t("label.RankingEndIntro")))]),e._l(e.ranking.items,(function(t){return i("div",{key:t.id,staticClass:"q-py-md rank-box"},[i("div",[i("userCard",{attrs:{user:t,size:"medium"}})],1),i("div",{staticClass:"full-width"},["-"!==t.name?i("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?i("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?i("div",{staticClass:"subtitle6"},[t.location.postalCode?i("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?i("span",[e._v(", ")]):e._e(),t.location.country?i("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),i("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                "+e._s(t.stars)+"\n              ")]),i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                "+e._s(t.position)+"\n              ")])])])])}))],2),i("div",{staticClass:"back centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/home")}}})],1),e.isUserAdmin?i("div",{staticClass:"back centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.version)}}})],1):e._e()],1):e._e(),e.warnings.noNetwork?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md bg-graaly-blue-dark"},[i("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[i("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),i("div",{staticClass:"subtitle3 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?i("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?i("div",[i("div",{staticClass:"q-pa-md centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),i("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?i("div",[i("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return i("q-item",{key:t.friendId},[i("q-item-section",[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-label",[e._v(e._s(t.name))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],staticClass:"normal-button glossy",attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(i){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),i("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?i("div",{staticClass:"panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg centered"},[e._v(e._s(e.$t("label.YouWonABonus")))]),i("div",{staticClass:"q-pa-md text-primary"},[i("q-card",{staticClass:"q-ma-sm"},[i("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),i("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")]),i("q-card-section",[i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.closeBonus}},[i("div",[e._v(e._s(e.$t("label.Close")))])])],1)],1)],1)]):e._e()])],1)},Tr=[],Er=(r("55dd"),{add:function(e,t,i,r,s){return Pe().put("review/add",{questId:e,version:t,runId:i,text:r,rating:s}).catch((function(e){return console.log(e.request)}))},list:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe().get("review/list",{params:{filter:JSON.stringify(t),options:JSON.stringify(i)}});case 2:if(r=e.sent,200===r.status){e.next=5;break}throw new Error("Request "+r.config.url+" failed with code "+r.status+"/"+r.statusText+". Data returned: "+r.data);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}()}),Ar={components:{suggest:kt,userCard:ei},data:function(){return{title:"Enquête réussie",rating:0,comment:"",ranking:{show:!1,items:[]},score:{},level:{color:"white",upgraded:!1},run:{score:0,stars:1},quest:null,friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},author:null,questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,showReviewText:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},isHybrid:window.cordova,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Je.clearAllRunningProcesses(),e.next=3,this.loadData();case 3:this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadData:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o,l,c,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.noNetwork=!1,t=!1,this.$q.loading.show(),e.next=5,wi.listForAQuest(this.questId);case 5:if(i=e.sent,!i){e.next=54;break}if(i&&i.data&&i.data.length>0)for(r=0;r<i.data.length;r++)"finished"===i.data[r].status&&(this.run=i.data[r]),"in-progress"===i.data[r].status&&(this.run=i.data[r],t=!0);return e.next=10,this.getRanking();case 10:if(!this.run||!this.run.version){e.next=16;break}return e.next=13,Xe.getById(this.questId,this.run.version);case 13:s=e.sent,e.next=19;break;case 16:return e.next=18,Xe.getLastById(this.questId);case 18:s=e.sent;case 19:if(s&&s.data&&(this.quest=s.data),!s||!s.data){e.next=27;break}return this.isUserAuthor=this.$store.state.user._id===this.quest.authorUserId,e.next=24,Er.list({questId:this.questId,userId:this.$store.state.user._id,version:this.run.version},{limit:1});case 24:n=e.sent,o=n.data&&n.data.length>=1,this.showAddReview=!this.isUserAdmin&&!this.isUserAuthor&&!o;case 27:return this.score.old=this.$store.state.user.points,this.score.old||(this.score.old=0),this.initProgression(),e.next=32,this.getOfflineRunData();case 32:return l=e.sent,e.next=35,wi.endRun(this.run._id,l,this.questId,this.quest.version,this.quest.mainLanguage);case 35:if(c=e.sent,!c||!c.data){e.next=42;break}return this.quest.customization&&this.quest.customization.removeScoring||(this.run.score=c.data.score,this.run.reward=c.data.reward,this.run.stars=c.data.stars,c.data.newBonus&&""!==c.data.newBonus&&(this.run.bonus=c.data.newBonus,this.showBonus=!0),this.run.questData&&this.run.questData.rewardPicture&&""!==this.run.questData.rewardPicture&&(this.showReward=!0)),e.next=40,this.removeOfflineData();case 40:e.next=43;break;case 42:this.warnings.noNetwork=!0;case 43:if(this.run._id){e.next=48;break}return e.next=46,wi.listForAQuest(this.questId);case 46:i=e.sent,i&&i.data&&i.data.length>0&&(this.run=i.data[0]);case 48:this.quest.customization&&this.quest.customization.removeScoring||(this.score.new=t?this.score.old+this.run.stars:this.score.old,this.$store.state.user.points=this.score.new,Je.setTimeout(this.updateProgression,3e3)),u=Je.getDurationFromNow(this.run.dateCreated),this.run.duration={h:u.h,m:u.m},this.getAuthorProfile(),e.next=55;break;case 54:this.warnings.noNetwork=!0;case 55:this.$q.loading.hide();case 56:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initProgression:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.level=ai(this.score.old);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateProgression:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showChallenge||this.showBonus?Je.setTimeout(this.updateProgression,2e3):(t=ai(this.score.new),t.level>this.level.level?(this.level.progress=1,this.$store.state.user.level=t.level,this.level=t,this.level.progress=.1,this.level.upgraded=!0):this.level=t);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRanking:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===this.questId){e.next=5;break}return e.next=3,wi.listPlayersForThisQuest(this.questId);case 3:t=e.sent,t&&t.data&&t.data.length>1&&(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),this.refreshPosition(),Je.setTimeout(this.showRanking,5e3));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showRanking:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.ranking.show=!0,t=!1,i=0;i<this.ranking.items.length;i++)this.ranking.items[i].id===this.$store.state.user._id&&(t=!0);t||(this.ranking.items.push({id:this.$store.state.user._id,score:this.run.score,name:this.$store.state.user.name,picture:this.$store.state.user.picture,position:this.ranking.items.length+1,isFriend:!0,className:"selected"}),Je.setTimeout(this.updateRanking,3e3));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],i=this.ranking.items[e-1];this.$set(this.ranking.items,e,i),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),Je.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("-"!==this.$store.state.user.name){e.next=4;break}this.$router.push("/user/updateprofile"),e.next=9;break;case 4:return this.showChallenge=!0,e.next=7,Ze.listFriends(this.$store.state.user._id,0,100);case 7:t=e.sent,t&&t.data&&t.data.length>0&&(this.friends=t.data,this.filteredFriends=this.friends);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeChallenge:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showChallenge=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),challenge:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.challengeFriend(t.friendId,this.run._id);case 2:for(i=0;i<this.filteredFriends.length;i++)this.filteredFriends[i].friendId===t.friendId&&(this.filteredFriends[i].isChallenged=!0,l["a"].set(this.filteredFriends,i,this.filteredFriends[i]));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),challengeAll:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.challengeFriend("all",this.run._id);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeBonus:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showBonus=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeReward:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showReward=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAuthorProfile:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.getFriend(this.quest.authorUserId);case 2:t=e.sent,t&&t.data&&"friend"!==t.data.status&&(this.author=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getProfileImage:function(){return this.author.picture&&-1!==this.author.picture.indexOf("http")?this.author.picture:this.author.picture?this.serverUrl+"/upload/profile/"+this.author.picture:"statics/images/icon/profile-small.png"},follow:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("-"===this.$store.state.user.name){e.next=5;break}return e.next=3,Ze.addFriend(this.quest.authorUserId);case 3:t=e.sent,t?(t.data&&t.data.hasOwnProperty("status")&&"invitationsent"===t.data.status?ut(this.$t("label.InvitationSent"),"success"):ut(this.$t("label.FriendsAdded"),"success"),l["a"].set(this.author,"status","friend")):ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openValidation:function(e,t){this.$router.push("/admin/validate/"+e+"/version/"+t)},addReview:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.rating){e.next=3;break}return ut(this.$t("label.PleaseRateTheQuest"),"warning"),e.abrupt("return",!1);case 3:return this.$q.loading.show(),e.next=6,Er.add(this.questId,this.run.version,this.run._id,this.comment,this.rating);case 6:this.$q.loading.hide(),this.reviewSent=!0,this.showReviewText=!1,ut(this.$t("label.ReviewSent"),"positive");case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getOfflineRunData:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.readFile(this.questId,"run_"+this.questId+".json");case 2:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",JSON.parse(t));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeOfflineData:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.removeDirectory(this.questId);case 2:return t=e.sent,e.next=5,this.removeQuestFromOfflineList(this.questId);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeQuestFromOfflineList:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=13;break}return e.next=6,Je.readFile("","quests.json");case 6:for(s=e.sent,r=JSON.parse(s),n=-1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=o);return-1!==n&&r.list.splice(n,1),e.next=13,Je.writeInFile("","quests.json",JSON.stringify(r),!0);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},Pr=Ar,Mr=Object(_e["a"])(Pr,qr,Tr,!1,null,null,null),Ir=Mr.exports,Rr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},Or=[],$r={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},Fr=$r,Nr=Object(_e["a"])(Fr,Rr,Or,!1,null,null,null),Dr=Nr.exports,Lr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser"}},[e.userType?e._e():i("div",[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderChooseUserType"))+"\n      ")]),i("div",{staticClass:"q-pa-md",attrs:{"test-id":"btn-create-public-quest"},on:{click:function(t){return e.changeUserType("pro")}}},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AProfessional")))])]),i("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AProfessionalDesc1"))+"\n          ")])],1)],1),i("div",{staticClass:"q-pa-md",on:{click:function(t){return e.changeUserType("individual")}}},[i("q-card",{staticClass:"my-card"},[i("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AnIndividual")))])]),i("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AnIndividualDesc1"))+"\n          ")])],1)],1),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.Cancel")))])],1)]),"pro"!==e.userType||e.access?e._e():i("div",[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.AddYourRoomInTheDirectory"))+"\n      ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-primary text-white"},[i("q-card-section",{staticClass:"centered"},[i("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.AddYourRoom")))]),i("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.Free")))])]),i("q-card-section",{staticClass:"subtitle5"},[i("div",{domProps:{innerHTML:e._s(e.$t("label.ProAddYourRoom"))}})]),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){e.changeAccess("public"),e.changeQuestType("room")}}},[e._v(e._s(e.$t("label.Add")))])],1)],1)],1),i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderProIntro"))+"\n      ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-primary text-white"},[i("q-card-section",{staticClass:"centered"},[i("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PublicQuest")))]),i("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),i("q-card-section",{staticClass:"subtitle5"},[i("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc1"))}})]),e.readMorePublicProQuest?i("q-card-section",[i("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc2"))}})]):e._e(),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("public")}}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-primary text-white"},[i("q-card-section",{staticClass:"centered"},[i("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),i("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.FromPrice"))+" 499 €")])]),i("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateProQuestDesc1"))+"\n          ")]),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"individual"!==e.userType||e.access?e._e():i("div",[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderIntro"))+"\n      ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-primary text-white"},[i("q-card-section",{staticClass:"centered"},[i("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),e.privateQuest.buyable?i("div",{staticClass:"subtitle4"},[e._v(e._s(e.privateQuest.price))]):e._e()]),i("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateQuestDesc1"))+"\n          ")]),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[e.privateQuest.buyable?i("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.BuyPrivateQuest")))]):e._e(),e.privateQuest.buyable?e._e():i("q-btn",{attrs:{flat:"",disabled:""}},[e._v(e._s(e.$t("label.OnlyBuyableOnMobile")))])],1)],1)],1),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"public"===e.access&&"room"===e.questType?i("div",{staticClass:"grow"},[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.AddYourRoom")))]),i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderAddRoomMessage"))}}),i("div",{staticClass:"q-px-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[i("div",[e._v(e._s(e.$t("label.Add")))])]),i("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"public"===e.access&&"quest"===e.questType?i("div",{staticClass:"grow"},[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPublicQuest")))]),i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),i("div",{staticClass:"q-px-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[i("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]),i("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"private"===e.access?i("div",{staticClass:"grow"},[i("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPrivateQuest")))]),"individual"===e.userType?i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}):e._e(),"pro"===e.userType?i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateProWelcomeMessage"))}}):e._e(),i("div",{staticClass:"q-px-md centered"},["individual"===e.userType?i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyPrivateQuest()}}},[i("div",[e._v(e._s(e.$t("label.AcceptAndBuyAPrivateQuest"))+" ("+e._s(e.privateQuest.price)+")")])]):e._e(),"pro"===e.userType?i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.createNewQuest()}}},[i("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]):e._e(),i("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.cancel()}}})],1)])])},zr=[],jr={data:function(){return{userType:null,access:null,questType:"quest",readMorePublicProQuest:!1,privateQuest:{price:"-",buyable:!1,computed:!1}}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},changeUserType:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.userType=t,this.moveToTop(),"individual"!==t){e.next=5;break}return e.next=5,this.initPay();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeAccess:function(e){this.access=e,this.moveToTop()},changeQuestType:function(e){this.questType=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order("privatequestprice");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),createNewQuest:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={title:{}},e.next=3,Xe.create(t,this.access,this.userType,this.questType);case 3:i=e.sent,i&&i.data&&i.data.questId?this.$router.push("/quest/builder/"+i.data.questId):ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initPay:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return");case 2:if(!this.privateQuest.computed){e.next=4;break}return e.abrupt("return");case 4:this.privateQuest.computed=!0,store.products.byId["privatequestprice"]?(t=store.get("privatequestprice"),this.displayPrice(t)):store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){ut(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(this.displayPrice),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var e=o()(a.a.mark((function e(t){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.savePurchase(t);case 2:r=e.sent,r?t.finish():ut(i.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),store.refresh();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),displayPrice:function(e){this.privateQuest.price=e.price,e.canPurchase&&(this.privateQuest.buyable=!0)},savePurchase:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.purchasePrivateQuest(null,t);case 2:if(i=e.sent,!(i&&i.data&&i.data.status&&"ok"===i.data.status)){e.next=7;break}return e.next=6,this.createNewQuest();case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancel:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/profile/me");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToUserType:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.userType=null,this.access=null;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Hr=jr,Br=Object(_e["a"])(Hr,Lr,zr,!1,null,null,null),Ur=Br.exports,Qr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll",class:{"bg-white":!e.chapters.showNewStepOverview}},[e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"settings-bar background-dark"},[i("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn q-pa-sm",attrs:{to:{path:"/profile/me"}}},[i("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e.readOnly&&"rejected"===e.quest.status?i("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n      "+e._s(e.$t("label.YourQuestHasNotBeenPublished"))+"\n    ")]):e._e(),!e.readOnly||"published"!==e.quest.status&&"unpublished"!==e.quest.status&&"rejected"!==e.quest.status?e._e():i("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n      "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n    ")]),i("div",{staticClass:"q-pa-md full-width"},[e.tabs.progress>0?i("span",[e.form.fields.title[e.languages.current]?i("span",[e.form.fields.title[e.languages.current].length<=30?i("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?i("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():i("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?i("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?i("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):i("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),e.chapters.showNewStepOverview?e._e():i("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[i("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:"quest"===e.quest.type?e.$t("label.Intro")+" ("+e.languages.current+")":e.$t("label.YourRoom"),default:""}}),"quest"===e.quest.type?i("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}):e._e(),i("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier?i("q-tab",{attrs:{name:"payments",icon:e.getTabIcon(5),label:e.$t("label.Payments")},on:{click:e.listPayments}}):e._e(),e.isEdition?i("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(6),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?i("q-tab",{attrs:{name:"results",icon:e.getTabIcon(7),label:e.$t("label.Results")}}):e._e()],1),i("q-separator"),"settings"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md arial"},[this.quest.languages&&0!==this.quest.languages.length?e._e():i("div",[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"language"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),i("q-option-group",{attrs:{type:"radio",color:"primary",options:e.form.languages,disable:e.readOnly},model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}})],1)],1),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{big:"",disabled:e.readOnly,color:"primary","test-id":"btn-save-language"},on:{click:function(t){return e.selectLanguage()}}},[e._v(e._s(e.$t("label.Save")))])],1)],1),this.quest.languages.length>0?i("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?i("div",[i("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")])],1):e._e(),"public"===this.quest.access?i("div",[i("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")])],1):e._e(),this.quest.isPremium?i("div",[i("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")])],1):e._e(),i("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),i("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}}),"quest"===e.quest.type?i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}):e._e(),"quest"===e.quest.type?i("div",[e._v("\n        "+e._s(e.$t("label.QuestType"))+" \n        "),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),i("div",{staticClass:"q-gutter-sm"},[i("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),i("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1)],1):e._e(),i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}}),i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),i("div",{staticClass:"description"},[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),e.isIOs?e._e():i("div",[i("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest"),value:e.form.fields.startingPlace},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}}):e._e()],1),i("a",{on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?i("div",[i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),i("table",[i("tr",[i("td",[i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}})],1),i("td",[i("q-btn",{staticClass:"q-ma-md",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])],1)])])],1):e._e(),null!==e.form.fields.picture?i("div",[i("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.picture}})]):e._e(),e.isIOs?e._e():i("div",[e.readOnly?e._e():i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["picturefile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),i("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.ModifyThePicture"))+":\n        "),i("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),null!==e.form.fields.thumb?i("div",[i("p",[e._v(e._s(e.$t("label.SmallPicture"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.thumb}})]):e._e(),e.isIOs?e._e():i("div",[e.readOnly?e._e():i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["thumbfile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),i("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadThumb}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.ModifyThePicture"))+":\n        "),i("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadThumb}})]):e._e(),this.quest.isPremium&&e.form.fields.customization&&e.form.fields.customization.audio&&""!==e.form.fields.customization.audio?i("div",[i("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.form.fields.customization.audio))]),i("div",{staticClass:"centered"},[i("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!this.quest.isPremium||e.isIOs||e.readOnly?e._e():i("div",[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["audiofile"].click()}}},[e._v(e._s(e.$t("label.AddAnAudioFile")))])],1),i("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3",hidden:""},on:{change:e.uploadAudio}})],1),this.quest.isPremium&&e.isIOs&&!e.readOnly?i("div",[e._v("\n        "+e._s(e.$t("label.AddAnAudioFile"))+":\n        "),i("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]):e._e(),"room"===this.quest.type?i("div",[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ReadMoreLink")},model:{value:e.form.fields.readMoreLink,callback:function(t){e.$set(e.form.fields,"readMoreLink",t)},expression:"form.fields.readMoreLink"}})],1):e._e(),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?i("div",[i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PlayersNumber"),options:e.form.players,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestMultiplayer")}}})]},proxy:!0}],null,!1,3064096794),model:{value:e.form.fields.playersNumber,callback:function(t){e.$set(e.form.fields,"playersNumber",t)},expression:"form.fields.playersNumber"}})],1):e._e(),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?i("div",[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.QRCodeMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.qrCodeMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.qrCodeMessage,e.languages.current,t)},expression:"form.fields.customization.qrCodeMessage[languages.current]"}})],1):e._e(),this.quest.isPremium&&"quest"===this.quest.type?i("div",[i("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnMobile")},model:{value:e.showPaymentBox,callback:function(t){e.showPaymentBox=t},expression:"showPaymentBox"}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnMobileHelp")}}}),e.showPaymentBox?i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}):e._e(),i("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnYourSide")},model:{value:e.showTierPaymentBox,callback:function(t){e.showTierPaymentBox=t},expression:"showTierPaymentBox"}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnYourSideHelp")}}}),e.showTierPaymentBox?i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.tierPriceForPlayer,callback:function(t){e.$set(e.form.fields,"tierPriceForPlayer",t)},expression:"form.fields.tierPriceForPlayer"}}):e._e(),i("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.RemoveScoringAndRating")},model:{value:e.form.fields.customization.removeScoring,callback:function(t){e.$set(e.form.fields.customization,"removeScoring",t)},expression:"form.fields.customization.removeScoring"}}),i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.LimitNumberOfPlayerInOneHour")},model:{value:e.form.fields.limitNumberOfPlayer,callback:function(t){e.$set(e.form.fields,"limitNumberOfPlayer",t)},expression:"form.fields.limitNumberOfPlayer"}}),e.form.fields.customization.removeScoring?i("div",[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessage"),type:"textarea"},model:{value:e.form.fields.customization.endMessage,callback:function(t){e.$set(e.form.fields.customization,"endMessage",t)},expression:"form.fields.customization.endMessage"}})],1):e._e(),e.form.fields.customization?i("div",[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?i("div",[i("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.logo}}),i("div",{staticClass:"centered"},[i("a",{staticClass:"dark",on:{click:e.removeLogo}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():i("div",[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["logofile"].click()}}},[e._v(e._s(e.$t("label.AddALogo")))]),i("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),i("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?i("div",[e._v("\n          "+e._s(e.$t("label.AddALogo"))+":\n          "),i("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e(),e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture?i("div",[i("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),i("img",{staticClass:"full-width",staticStyle:{"background-color":"#f00"},attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),i("div",[e._v(e._s(e.$t("label.RewardPictureWarning")))]),i("div",{staticClass:"centered"},[i("a",{staticClass:"dark",on:{click:e.removeReward}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():i("div",{staticClass:"q-mt-md"},[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["rewardfile"].click()}}},[e._v(e._s(e.$t("label.AddAReward")))]),i("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),i("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),e.isIOs&&!e.readOnly?i("div",{staticClass:"q-mt-md"},[e._v("\n          "+e._s(e.$t("label.AddAReward"))+":\n          "),i("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.character&&""!==e.form.fields.customization.character?i("div",[i("p",[e._v(e._s(e.$t("label.YourCharacter"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.character}}),i("div",{staticClass:"centered"},[i("a",{staticClass:"dark",on:{click:e.removeCharacter}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():i("div",[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacter")))]),i("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacter}})],1),e.isIOs&&!e.readOnly?i("div",[e._v("\n          "+e._s(e.$t("label.AddACustomCharacter"))+":\n          "),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacter}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1):e._e()],1):e._e(),i("div",[e._v("\n        "+e._s(e.$t("label.Version"))+": "+e._s(e.quest.version)+"\n      ")]),i("div",{staticClass:"centered"},[e.readOnly?e._e():i("q-btn",{staticClass:"glossy large-button q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),"published"!==e.quest.status?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{attrs:{flat:"",color:"negative",size:"md",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]),"steps"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md arial"},[e.warnings.stepsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?i("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?i("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),i("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return i("li",{key:t._id,staticClass:"list-group-item"},[e.readOnly?e._e():i("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),i("div",[i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),i("span",{staticStyle:{"margin-top":"4px"},on:{click:function(i){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():i("q-btn",{staticClass:"float-right",on:{click:function(i){return e.removeStep(t.stepId)}}},[i("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():i("q-btn",{staticClass:"float-right",on:{click:function(i){return e.modifyStep(t)}}},[i("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():i("p",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}},[e._v(e._s(e.$t("label.AddAStep")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?i("p",{staticClass:"smaller"}):e._e(),i("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),i("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}}),i("p")],1):e._e(),"advanced"===e.form.fields.editorMode?i("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():i("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),i("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t){return i("li",{key:t._id,staticClass:"step-list list-group-item"},[e.readOnly?e._e():i("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),i("div",[i("p",{staticClass:"bigger"},[e._v("\n              "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n              "),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md size-1",attrs:{name:"add_box"},nativeOn:{click:function(i){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(i){return e.removeChapter(t.chapterId)}}}),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(i){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?i("q-icon",{staticClass:"float-right a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(i){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():i("div",[e._v("\n              "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n            ")]),e._l(t.steps,(function(r){return i("div",{key:r._id,staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[i("div",{staticClass:"step-text"},[i("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===r.level},attrs:{color:"grey",name:e.getIconFromStepType(r.type)}}),e.readOnly||r.error?e._e():i("span",{on:{click:function(t){return e.playStep(r)}}},["All"!==r.player?i("q-badge",{attrs:{color:"primary",align:"top"}},[e._v(e._s(r.player))]):e._e(),e._v(" "+e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage]))],1),!e.readOnly&&r.error?i("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(r.error)}}},[i("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                  "+e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage])+"\n                ")],1):e._e(),e.readOnly?i("span",[e._v(e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage]))]):e._e()],1),i("div",{staticClass:"step-button"},[e.readOnly?e._e():i("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(r)}}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return e.insertStep(t.chapterId,r.stepId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(r.stepId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"delete"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():i("p",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"fas fa-plus-circle"},on:{click:function(t){return e.addChapter()}}},[e._v(e._s(e.$t("label.AddASChapter")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?i("p",{staticClass:"smaller"}):e._e(),i("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),i("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}}),i("p")],1):e._e()]),"publish"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md arial"},["old"===e.quest.status?i("div",[i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n      ")])],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?i("div",["tovalidate"===e.quest.status?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.QuestUnderValidation"))+"\n      ")]):e._e(),"rejected"===e.quest.status?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.QuestPublicationRejected"))+"\n      ")]):e._e(),e.chapters.items.length>100?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n      ")]):e._e(),"quest"===e.quest.type?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),"room"===e.quest.type?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.SeeYourQuestPage")))])],1):e._e(),"private"===e.quest.access?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"people"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Invitees"))+" "),e.quest.limitations&&e.quest.limitations.nbInvitees?i("span",[e._v("("+e._s(e.invitee.items.length)+"/"+e._s(e.quest.limitations.nbInvitees)+")")]):e._e()]),e._l(e.invitee.items,(function(t){return i("p",{key:t.id},[i("q-toggle",{attrs:{label:t.name},on:{input:function(i){return e.removeInvitee(t.id)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})],1)})),e.warnings.inviteeMissing?i("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),i("q-input",{attrs:{type:"text",label:e.$t("label.InvitePeople"),"bottom-slots":"",error:!e.invitee.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addInvitee()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n              "+e._s(e.$t("label.InviteInviteesHelp"))+"\n            ")]},proxy:!0}],null,!1,3442983076),model:{value:e.invitee.new.email,callback:function(t){e.$set(e.invitee.new,"email",t)},expression:"invitee.new.email"}})],2)],1):e._e(),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label."+("quest"===e.quest.type?"public"===e.quest.access?"LanguagesPublished":"LanguagesPublishedForPrivate":"PageLanguagesPublished"))))]),e._l(e.form.fields.languages,(function(t){return i("p",{key:t.lang},[i("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(i){return e.publish(t.lang)}},model:{value:t.published,callback:function(i){e.$set(t,"published",i)},expression:"lang.published"}})],1)})),"public"===e.quest.access&&"quest"===e.quest.type?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?i("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return i("p",{key:t.id},[i("q-toggle",{attrs:{label:t.name},on:{input:function(i){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?i("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),i("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.EditorIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n              "+e._s(e.$t("label.InviteEditorsHelp"))+"\n            ")]},proxy:!0}],null,!1,3177067428),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),"quest"===e.quest.type?i("div",[e._v("\n            "+e._s(e.$t("label.MarkersToPrint"))+"\n            "),e.isHybrid?e._e():i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"fa fa-download",type:"a",href:"statics/markers/all.pdf",download:""}},[e._v(e._s(e.$t("label.Download")))]),e.isHybrid?i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"fa fa-download"},on:{click:function(t){return e.downloadMarkers()}}},[e._v(e._s(e.$t("label.Download")))]):e._e()],1):e._e(),"quest"===e.quest.type?i("div",{staticClass:"q-pt-md"},[i("div",{domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest"))}}),i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"_qrcode.png"}})]):e._e(),"room"===e.quest.type?i("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.SaveQuestResultsMarker",{url1:e.serverUrl+"/upload/quest/"+e.questId+"_score1_qrcode.png",url2:e.serverUrl+"/upload/quest/"+e.questId+"_score2_qrcode.png",url3:e.serverUrl+"/upload/quest/"+e.questId+"_score3_qrcode.png"}))}}):e._e()],1)],1),"room"!==e.quest.type?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),i("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e(),"published"!==e.quest.status?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),i("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"negative"},on:{click:function(t){return e.removeQuest()}}},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),e._v("\n          "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n        ")],1)],1):e._e(),"published"===e.quest.status?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),i("q-item-section",[e._v("\n          "+e._s(e.$t("label.YouNeedToUnpublishYourQuestToRemoveIt"))+"\n        ")])],1):e._e()],1):e._e()]),"payments"===e.tabs.selected&&!e.chapters.showNewStepOverview&&e.isEdition?i("div",{staticClass:"q-pa-md arial"},[i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.payments,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{rounded:""}},[i("img",{attrs:{src:e.serverUrl+"/upload/tiers/"+t.qrCode+".png"}})])],1),i("q-item-section",[i("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.qrCode.replace("tierplay_","")))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("status."+t.status))+" - "+e._s(e._f("formatDate")(t.dateUpdate,e.$store.state.user.language)))])],1),i("q-item-section",{attrs:{side:""}},[i("q-btn-dropdown",{attrs:{icon:"cloud_upload",split:"",dense:""},on:{click:function(i){return e.downloadQRCode(t.qrCode)}}},[i("q-list",["new"===t.status?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return e.removeCode(t._id)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"delete"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1):e._e()],1)],1)],1)],1)})),1),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.createNewPaymentQRCode}},[i("span",[e._v(e._s(e.$t("label.CreateNewQRCodeForPlay")))])])],1)],1):e._e(),"reviews"===e.tabs.selected&&!e.chapters.showNewStepOverview&&e.isEdition&&"public"===e.quest.access?i("div",{staticClass:"q-pa-md arial"},[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))])],1):e._e()],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sellings?i("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[i("q-card-section",[i("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalSellings")))])]),i("q-separator",{attrs:{inset:""}}),i("q-card-section",[i("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(parseInt(70*e.statistics.statistics.sellings)/100)+" €")]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.YourRevenues"))+e._s(e.$t("label.colons"))+e._s(parseInt(40*e.statistics.statistics.sellings)/100)+"€ TTC")]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RevenuesPayedFloor")))])])],1):e._e(),i("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[i("q-card-section",[i("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalNumberOfPlayers")))])]),i("q-separator",{attrs:{inset:""}}),i("q-card-section",[i("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished))]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers)+" ")])])],1),i("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[i("q-card-section",[i("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageScore")))])]),i("q-separator",{attrs:{inset:""}}),i("q-card-section",[i("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageScore)))]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MaxScore"))+e._s(e.$t("label.colons"))+e._s(e.quest.availablePoints.score)+" ")])])],1),i("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[i("q-card-section",[i("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageDuration")))])]),i("q-separator",{attrs:{inset:""}}),i("q-card-section",[i("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageDuration)))])])],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?i("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersByAge")}},[i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return i("q-item",{key:t._id},[t&&!t._id?i("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?i("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?i("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersBySex")}},[i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return i("q-item",{key:t._id},[i("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),e.reviews.length>0?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1)],1):e._e(),i("q-item",[i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),i("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:e.getAvatar(t.userId.picture)}})])],1),i("q-item-section",[i("q-item-label",[e._v("\n                  "+e._s(t.userId.name)+"\n                ")]),i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(i){e.$set(t,"rating",i)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                ")],1),i("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1)],1):e._e(),"results"===e.tabs.selected&&!e.chapters.showNewStepOverview&&e.isEdition&&"private"===e.quest.access?i("div",{staticClass:"q-pa-md arial"},["published"===e.quest.status?i("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?i("div",[i("q-list",e._l(e.ranking.items,(function(t,r){return i("q-item",{key:r},[i("q-item-section",{attrs:{top:"",avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),"finished"===t.status?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n      ")]):e._e(),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),i("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?i("div",[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?i("div",[e._v("\n        "+e._s(e.$t("label.FinalRankingIntro"))+"\n        "),i("q-list",e._l(e.ranking.items,(function(t,r){return i("q-item",{key:r},[i("q-item-section",{attrs:{avatar:""}},[t.position<=10?i("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}}):e._e()]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),i("q-item-section",{attrs:{side:"",top:"",avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n      ")]):e._e()]):e._e()]):e._e(),e.chapters.showNewStepPage?i("div",{staticClass:"bg-white arial full-page-div"},[i("div",{staticClass:"scroll"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),i("div",[i("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),i("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return i("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[i("div",{staticClass:"centered q-pa-sm"},[i("div",[e._v(e._s(e.$t("stepType."+t.description)))]),i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(i){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),i("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),i("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return i("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[i("div",{staticClass:"centered q-pa-sm"},[i("div",[e._v(e._s(e.$t("stepType."+t.description)))]),i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(i){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),i("div",{staticClass:"q-pa-md centered"},[i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]):e._e(),e.chapters.showNewStepPageSettings?i("div",{staticClass:"bg-white arial full-page-div"},[i("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1):e._e(),e.chapters.showNewStepOverview?i("div",{staticClass:"fullscreen"},[i("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",customization:e.quest.customization?e.quest.customization:{color:"primary"},inventory:e.inventory,itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage,closeAllPanels:e.closeAllPanels}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu fixed-bottom"},[i("div",{staticClass:"row white-buttons"},[i("div",{staticClass:"col centered q-pb-md"},[e.quest.customization.logo&&""!==e.quest.customization.logo?i("q-btn",{staticClass:"bg-white",attrs:{round:"",size:"lg"}},[i("q-avatar",{attrs:{size:"60px"}},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])])],1):e._e(),i("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[i("div",{staticClass:"inventory panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.inventory.items.length>0&&!e.warnings.inventoryMissing?i("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?i("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),i("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,r){return i("div",{key:r,on:{click:function(i){return e.selectItem(t)}}},[t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?i("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.pictures[e.languages.current]:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.pictures[e.languages.current]}}):e._e(),t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?e._e():i("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?i("p",[e._v(e._s(t.titles[e.languages.current]))]):e._e(),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?e._e():i("p",[e._v(e._s(t.title))])])})),0)])]),i("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[i("div",{staticClass:"hint panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?i("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?i("p",[e._v(e._s(e.hint.label[e.hint.number]))]):e._e(),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"q-mb-xl glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[i("div",[e._v(e._s(e.$t("label.Close")))])])],1)])]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white hint panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,r){return i("q-list",{key:t.id},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[i("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(r)}}},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),i("q-item-section",[e._v(e._s(t.size)+" Ko")]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"delete"},on:{click:function(i){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?i("div",[e._v("\n        "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n      ")]):e._e(),i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),i("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),i("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[i("div",{staticClass:"q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),i("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),i("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():i("div",{staticClass:"centered"},[i("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"q-mb-sm glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map fit"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1)},Yr=[],Vr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg-white arial step-setting"},[i("div",{staticClass:"q-pa-md q-pt-xl q-mt-lg bottom-margin-for-keypad"},[i("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code?i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"",maxlength:e.mainTextMaxLength,error:e.$v.selectedStep.form.text[e.lang].$error,"error-message":e.$t("label.KeepEnigmaQuestionsShort"),"test-id":"step-text"},on:{blur:e.$v.selectedStep.form.text[e.lang].$touch,input:e.$v.selectedStep.form.text[e.lang].$touch},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[i("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n        "+e._s(e.$t("label.AddABackgroundImage"))+"\n      ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?i("div",[i("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),i("br"),i("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.type.code?i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),i("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.UploadAVideo"))+":\n        "),i("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:null===e.selectedStep.form.videoStream,expression:"selectedStep.form.videoStream === null"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),null!==e.selectedStep.form.videoStream?i("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[i("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream,type:"video/mp4"}})]):e._e()])]):e._e(),"new-item"==e.options.type.code?i("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():i("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,r){return i("div",{key:r,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(r)}}},[i("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[r].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():i("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),i("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.UploadTheItemPicture"))+":\n          "),i("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),i("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),i("a",{staticClass:"dark",on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),i("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?i("div",[i("div",[e._v(e._s(e.$t("label.SplitMessageWithPipe")))]),i("h2",[e._v(e._s(e.$t("label.Character")))]),e.quest.customization.character&&""!==e.quest.customization.character?i("div",[i("q-radio",{attrs:{val:"usequestcharacter"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),i("p",[i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.character}})])],1):e._e(),e._l(6,(function(t){return i("div",{key:t,staticClass:"answer"},[i("q-radio",{attrs:{val:t.toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),i("p",[i("img",{attrs:{src:"statics/icons/story/character"+t+"_attitude1.png"}})])],1)})),i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{label:e.$t("label.OtherCharacters")}},e._l(34,(function(t){return i("div",{key:t,staticClass:"answer"},[i("q-radio",{attrs:{val:(t+6).toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),i("p",[i("img",{attrs:{src:"statics/icons/story/character"+(t+6)+"_attitude1.png"}})])],1)})),0)],1),i("div",[i("div",{staticClass:"q-mb-sm"},[e._v("\n          "+e._s(e.$t("label.OrDownloadAFile"))+"\n          "),e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?i("div",[e._v("\n            "+e._s(e.$t("label.UploadACharacter"))+":\n            "),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.character.$error,expression:"$v.selectedStep.form.options.character.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.character&&e.selectedStep.form.options.character.length>2&&"usequestcharacter"!==e.selectedStep.form.options.character?i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/character/"+e.selectedStep.form.options.character}})]):e._e()])])],2):e._e(),"geolocation"==e.options.type.code?i("div",{staticClass:"location-gps"},[i("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),i("div",{staticClass:"fields-group"},[e.isIOs?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address"),value:e.selectedStep.form.options.destination},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}})],1),i("a",{staticClass:"dark",on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs?e._e():i("q-list",[i("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)]):e._e(),"choose"==e.options.type.code?i("div",[i("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),i("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),i("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),i("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),i("p",[e._v(e._s(e.$t("label.SelectTheGoodAnswer")))]),e._l(e.selectedStep.form.options.items,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("q-radio",{attrs:{val:r,"test-id":"radio-answer-"+r},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}}),i("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+r},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[r].text.$touch}},model:{value:t.text,callback:function(i){e.$set(t,"text",i)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[r].text.required?i("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[r].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",["image"===e.config.choose.answerType&&null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+r},on:{change:function(t){return e.uploadAnswerImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+r},on:{change:function(t){return e.uploadAnswerImage(r,t)}}})]):e._e(),i("q-btn",{attrs:{"test-id":"delete-answer-"+r},on:{click:function(t){return e.deleteAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnAnswer"))+"\n      ")])],2):e._e(),"write-text"==e.options.type.code?i("div",[e._l(e.selectedStep.form.answers,(function(t,r){return i("div",{key:r},[i("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.answers[r],callback:function(t){e.$set(e.selectedStep.form.answers,r,t)},expression:"selectedStep.form.answers[index]"}})],1)})),i("q-btn",{staticClass:"full-width",on:{click:function(t){return e.addWriteTextAnswer()}}},[e._v(e._s(e.$t("label.AddAnAnswer")))]),i("div",[e._v(e._s(e.$t("label.WriteTextWarning")))])],2):e._e(),"code-keypad"==e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"6","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?i("div",{staticClass:"code-color"},[i("h2",[e._v(e._s(e.$t("label.AvailableColors")))]),i("q-list",e._l(e.config.colorCode.colorsForCode,(function(t,r){return i("q-item",{key:r,style:"background-color: "+t.value},[i("q-item-section",[i("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.label))])],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{staticClass:"bg-white",on:{click:function(t){return e.deleteColor(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)],1)})),1),i("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[i("q-expansion-item",{staticClass:"q-pa-md",attrs:{dense:"",icon:"playlist_add",label:e.$t("label.AddNewColor")}},[i("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCodeName"),maxlength:"15"},model:{value:e.config.colorCode.newColor.label,callback:function(t){e.$set(e.config.colorCode.newColor,"label",t)},expression:"config.colorCode.newColor.label"}}),i("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCode"),maxlength:"7"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[i("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-color",{model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}})],1)],1)]},proxy:!0}],null,!1,2730844002),model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}}),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"secondary"},on:{click:function(t){return e.addColor()}}},[e._v("\n              "+e._s(e.$t("label.Add"))+"\n            ")])],1)],1)],1),i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),i("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),i("table",[i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("q-select",{ref:"colorSelect"+r,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+r},model:{value:e.unformatedAnswer[r],callback:function(t){e.$set(e.unformatedAnswer,r,t)},expression:"unformatedAnswer[index]"}})],1)})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[r],on:{click:function(t){return e.triggerClickOnColorSelect(r)}}},[e._v(" ")])])})),0)])],1):e._e(),"code-image"==e.options.type.code?i("div",{staticClass:"code-image"},[i("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[r].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",[null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+r},on:{change:function(t){return e.uploadCodeAnswerImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+r},on:{change:function(t){return e.uploadCodeAnswerImage(r,t)}}})]):e._e(),i("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnImage"))+"\n      ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?i("div",[i("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),i("table",[i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r,staticClass:"text-center",attrs:{"test-id":"previous-image-"+r},on:{click:function(t){return e.previousCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("img",{attrs:{id:"image-code-setting-"+r,src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r,staticClass:"text-center",attrs:{"test-id":"next-image-"+r},on:{click:function(t){return e.nextCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"jigsaw-puzzle"===e.options.type.code?i("div",[i("div",{staticClass:"background-upload"},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),i("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.UploadThePuzzlePicture"))+":\n          "),i("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?e._e():i("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture}})]):e._e()]),i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?i("div",[i("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",[null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+r},on:{change:function(t){return e.uploadMemoryImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+r},on:{change:function(t){return e.uploadMemoryImage(r,t)}}})]):e._e(),i("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddACardPair"))+"\n      ")])],2):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage?i("div",{staticClass:"find-item"},[i("p",[i("q-toggle",{attrs:{label:e.$t("label.ObjectNeedToBeAppliedOnPicture")},model:{value:e.selectedStep.form.options.touchLocation,callback:function(t){e.$set(e.selectedStep.form.options,"touchLocation",t)},expression:"selectedStep.form.options.touchLocation"}})],1),e.selectedStep.form.options.touchLocation?i("div",[i("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),i("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[i("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: 16vw; height: 16vw;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}})])]):e._e()]):e._e(),"use-item"==e.options.type.code?i("div",{staticClass:"inventory"},[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:e.$v.selectedStep.form.answerItem.$touch},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?i("div",[e._v("\n        "+e._s(e.$t("label.SelectedObject"))+" :\n        "),i("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e(),i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),i("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),i("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"find-item"===e.options.type.code&&null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage?i("div",{staticClass:"find-item"},[i("q-select",{attrs:{label:e.$t("label.AreasNumber"),options:e.config.findItem.numberOfAreas,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},on:{input:e.changeNbAreas},model:{value:e.selectedStep.form.options.nbAreas,callback:function(t){e.$set(e.selectedStep.form.options,"nbAreas",t)},expression:"selectedStep.form.options.nbAreas"}}),i("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),e.selectedStep&&e.selectedStep.form&&e.selectedStep.form.answers?i("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden;background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinatesFindItem(t)}}},[i("img",{staticStyle:{position:"absolute","z-index":"500",top:"10vw",left:"10vw",width:"16vw",height:"16vw",opacity:"0.5"},attrs:{id:"cross0",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(0)}}}),i("img",{staticStyle:{display:"none",position:"absolute","z-index":"500",top:"30vw",left:"10vw",width:"16vw",height:"16vw",opacity:"0.5"},attrs:{id:"cross1",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(1)}}}),i("img",{staticStyle:{display:"none",position:"absolute","z-index":"500",top:"30vw",left:"10vw",width:"16vw",height:"16vw",opacity:"0.5"},attrs:{id:"cross2",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(2)}}}),i("img",{staticStyle:{display:"none",position:"absolute","z-index":"500",top:"30vw",left:"30vw",width:"16vw",height:"16vw",opacity:"0.5"},attrs:{id:"cross3",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(3)}}})]):e._e(),i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),i("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),i("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"locate-item-ar"===e.options.type.code?i("div",{staticClass:"locate-item-ar"},[i("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),i("div",{staticClass:"fields-group"},[i("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),i("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),i("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?i("div",[e._v("\n            "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n            "),i("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),i("div",[i("p",[e._v(e._s(e.$t("label.ObjectSize")))]),"undefined"!==typeof e.selectedStep.form.options.objectSize?i("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),i("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?i("div",[e._v("\n              "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n              "),i("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),i("div",{attrs:{id:"target-canvas"}}),i("div",[e._v("\n            "+e._s(e.$t("label.TouchAndDragObject"))+"\n          ")])],1):e._e()],1),i("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),i("div",{staticClass:"fields-group"},[e.isIOs?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address"),value:e.selectedStep.form.options.destination},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}})],1),i("a",{staticClass:"dark",on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs?e._e():i("q-list",[i("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{staticClass:"dark",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?i("div",{staticClass:"locate-marker"},[i("h2",[e._v(e._s(e.$t("label.Marker")))]),i("p",[i("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),i("span",[e._v(e._s(e.selectedStep.form.answers))]),i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary","test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}},[e._v("\n          "+e._s(e.$t("label.Choose"))+"\n        ")])],1),i("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),i("q-card-section",e._l(e.markersList,(function(t,r){return i("q-btn",{key:r,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(i){return e.selectMarker(t)}}},[i("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),i("span",[e._v(e._s(t))])])})),1),i("q-card-actions",[i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Protocol"),options:e.config.iot.protocols},model:{value:e.selectedStep.form.options.protocol,callback:function(t){e.$set(e.selectedStep.form.options,"protocol",t)},expression:"selectedStep.form.options.protocol"}}),i("q-input",{attrs:{"emit-value":"","map-options":"",label:"DeviceID (plug the device in)",options:e.config.iot.triggerEvent.modes,mask:"NN:NN:NN:NN:NN:NN","fill-mask":"",value:"00:00:00:00:00:00"},model:{value:e.selectedStep.form.options.deviceid,callback:function(t){e.$set(e.selectedStep.form.options,"deviceid",t)},expression:"selectedStep.form.options.deviceid"}}),"wait-for-event"===e.options.type.code?i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.waitForEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.triggerEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.TriggerMode"),options:e.config.iot.triggerEvent.modes},model:{value:e.selectedStep.form.options.triggerMode,callback:function(t){e.$set(e.selectedStep.form.options,"triggerMode",t)},expression:"selectedStep.form.options.triggerMode"}}):e._e(),"distance"===e.selectedStep.form.options.object?i("div",[i("h2",[e._v(e._s(e.$t("label.SuccessRange")))]),i("q-range",{attrs:{min:0,max:200,"left-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.min+"cm":"","right-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.max+"cm":"","label-always":""},model:{value:e.selectedStep.form.options.range,callback:function(t){e.$set(e.selectedStep.form.options,"range",t)},expression:"selectedStep.form.options.range"}})],1):e._e(),"pot"===e.selectedStep.form.options.object?i("div",[i("h2",[e._v(e._s(e.$t("label.SuccessRanges")))]),e._l([1,2,3],(function(t){return i("q-range",{key:t,staticClass:"q-my-md",attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].min:"","right-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].max:"","label-always":""},model:{value:e.selectedStep.form.options["range"+t],callback:function(i){e.$set(e.selectedStep.form.options,"range"+t,i)},expression:"selectedStep.form.options['range' + index]"}})}))],2):e._e(),"keypad"===e.selectedStep.form.options.object?i("div",[i("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.selectedStep.form.options.answer,callback:function(t){e.$set(e.selectedStep.form.options,"answer",t)},expression:"selectedStep.form.options.answer"}})],1):e._e(),"joystick"===e.selectedStep.form.options.object?i("div",[i("h2",{staticStyle:{"line-height":"1.5rem"}},[e._v(e._s(e.$t("label.SuccessRanges")))]),i("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Horizontal")))]),i("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.min:"","right-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.max:"","label-always":""},model:{value:e.selectedStep.form.options.rangeX,callback:function(t){e.$set(e.selectedStep.form.options,"rangeX",t)},expression:"selectedStep.form.options.rangeX"}}),i("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Vertical")))]),i("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.min+"":"","right-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.max+"":"","label-always":""},model:{value:e.selectedStep.form.options.rangeY,callback:function(t){e.$set(e.selectedStep.form.options,"rangeY",t)},expression:"selectedStep.form.options.rangeY"}})],1):e._e(),"button"===e.selectedStep.form.options.object?i("div",[i("q-input",{attrs:{type:"textarea",label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:300},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"lcd"===e.selectedStep.form.options.object?i("div",[i("q-input",{attrs:{label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:16},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"buzzer"===e.selectedStep.form.options.object?i("div",[i("h2",[e._v(e._s(e.$t("label.Duration")))]),i("q-slider",{attrs:{min:0,max:3e3,"label-value":e.selectedStep.form.options.duration?e.selectedStep.form.options.duration+"ms":"","label-always":""},model:{value:e.selectedStep.form.options.duration,callback:function(t){e.$set(e.selectedStep.form.options,"duration",t)},expression:"selectedStep.form.options.duration"}}),i("h2",[e._v(e._s(e.$t("label.Frequency")))]),i("q-slider",{attrs:{min:100,max:1e4,"label-value":e.selectedStep.form.options.frequency?e.selectedStep.form.options.frequency+"Hz":"","label-always":""},model:{value:e.selectedStep.form.options.frequency,callback:function(t){e.$set(e.selectedStep.form.options,"frequency",t)},expression:"selectedStep.form.options.frequency"}})],1):e._e()],1):e._e(),e.quest.playersNumber>1?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Player"),options:e.players},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpPlayer")}}})]},proxy:!0}],null,!1,3443813941),model:{value:e.selectedStep.form.player,callback:function(t){e.$set(e.selectedStep.form,"player",t)},expression:"selectedStep.form.player"}})],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[i("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?i("q-list",{attrs:{highlight:""}},[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,r){return i("q-item",{key:r},[i("q-item-section",[i("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),i("q-item-section",{attrs:{side:""}},[i("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(r)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?i("div",[e._v("\n            "+e._s(e.$t("label.NoCondition"))+"\n          ")]):e._e(),e.selectedStep.newConditionForm?e._e():i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}),i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),i("q-btn",{staticClass:"q-mx-md",attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),i("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[i("div",{staticClass:"q-pa-sm"},[e.options&&e.options.mode&&"advanced"===e.options.mode&&("use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code)?i("div",{staticClass:"q-pb-md"},[i("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}})],1):e._e(),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?i("div",{staticClass:"location-gps"},[i("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),i("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}})],1):e._e(),"geolocation"==e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.DistanceToWin")},model:{value:e.selectedStep.form.options.distance,callback:function(t){e.$set(e.selectedStep.form.options,"distance",t)},expression:"selectedStep.form.options.distance"}})],1):e._e(),"memory"===e.options.type.code?i("div",[i("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}})],1):e._e(),"help"===e.options.type.code?i("div",[i("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageInventory")},model:{value:e.selectedStep.form.options.helpInventory,callback:function(t){e.$set(e.selectedStep.form.options,"helpInventory",t)},expression:"selectedStep.form.options.helpInventory"}}),i("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageHint")},model:{value:e.selectedStep.form.options.helpHint,callback:function(t){e.$set(e.selectedStep.form.options,"helpHint",t)},expression:"selectedStep.form.options.helpHint"}}),i("q-toggle",{attrs:{label:e.$t("label.HelpStepMessagePrevious")},model:{value:e.selectedStep.form.options.helpPrevious,callback:function(t){e.$set(e.selectedStep.form.options,"helpPrevious",t)},expression:"selectedStep.form.options.helpPrevious"}}),i("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageNext")},model:{value:e.selectedStep.form.options.helpNext,callback:function(t){e.$set(e.selectedStep.form.options,"helpNext",t)},expression:"selectedStep.form.options.helpNext"}})],1):e._e(),e.options.type.nbTrials>0?i("div",[i("q-input",{attrs:{label:e.$t("label.NbTrials")},model:{value:e.selectedStep.form.nbTrial,callback:function(t){e.$set(e.selectedStep.form,"nbTrial",t)},expression:"selectedStep.form.nbTrial"}})],1):e._e(),e.options.type.passOption>0?i("div",[i("q-toggle",{attrs:{label:e.$t("label.UserCanPass")},model:{value:e.selectedStep.form.canPass,callback:function(t){e.$set(e.selectedStep.form,"canPass",t)},expression:"selectedStep.form.canPass"}})],1):e._e(),"image-over-flow"===e.options.type.code?i("div",[i("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullWidth")},model:{value:e.selectedStep.form.options.fullWidthPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullWidthPicture",t)},expression:"selectedStep.form.options.fullWidthPicture"}}),i("q-toggle",{attrs:{label:e.$t("label.PlayerCanTakeSnapshot")},model:{value:e.selectedStep.form.options.snapshotAllowed,callback:function(t){e.$set(e.selectedStep.form.options,"snapshotAllowed",t)},expression:"selectedStep.form.options.snapshotAllowed"}}),i("q-toggle",{attrs:{label:e.$t("label.ReplacePictureByRedFilter")},model:{value:e.selectedStep.form.options.redFilter,callback:function(t){e.$set(e.selectedStep.form.options,"redFilter",t)},expression:"selectedStep.form.options.redFilter"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[i("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n              "+e._s(e.$t("label.AddABackgroundImage"))+"\n            ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?i("div",[i("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),i("br"),i("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?i("div",[i("q-toggle",{attrs:{label:e.$t("label.KenBurnsEffect")},model:{value:e.selectedStep.form.options.kenBurnsEffect,callback:function(t){e.$set(e.selectedStep.form.options,"kenBurnsEffect",t)},expression:"selectedStep.form.options.kenBurnsEffect"}})],1):e._e(),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel"),type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}})],1)])],1),i("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hints")}},[i("div",{staticClass:"q-pa-sm"},[e._l(e.selectedStep.form.hint[e.lang],(function(t,r){return e.selectedStep.form.hint&&e.selectedStep.form.hint[e.lang]&&e.selectedStep.form.hint[e.lang].length>0?i("div",{key:r},[i("q-btn",{staticClass:"float-right",on:{click:function(t){return e.removeHint(r)}}},[i("q-icon",{attrs:{name:"delete"}})],1),i("div",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("label.Hint")+" "+(r+1)))]),e._v("\n            "+e._s(t)+"\n          ")],1):e._e()})),i("div",[i("q-input",{attrs:{label:e.$t("label.NewHint")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"check"},on:{click:function(t){return e.addHint()}}})]},proxy:!0}]),model:{value:e.newHint,callback:function(t){e.newHint=t},expression:"newHint"}})],1)],2)])],1),i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[i("div",{staticClass:"q-pa-sm"},[i("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),i("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),i("q-list",{directives:[{name:"show",rawName:"v-show",value:"enigma"===e.options.type.category&&"image-over-flow"!==e.options.type.code&&!["image-over-flow","trigger-event"].includes(e.options.type.code),expression:"options.type.category === 'enigma' && options.type.code !== 'image-over-flow' && !['image-over-flow', 'trigger-event'].includes(options.type.code)"}],attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.CountDownLabel")}},[i("div",{staticClass:"q-pa-sm"},[i("q-toggle",{attrs:{label:e.$t("label.CountDownLabel")},on:{input:e.activateCountDown},model:{value:e.selectedStep.form.countDownTime.enabled,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"enabled",t)},expression:"selectedStep.form.countDownTime.enabled"}}),i("q-input",{attrs:{filled:"",label:e.$t("label.CountDownIsActive"),mask:"##h##m##s","fill-mask":"",value:"00h00m00s"},model:{value:e.selectedStep.form.countDownTime.time,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"time",t)},expression:"selectedStep.form.countDownTime.time"}})],1)])],1),i("div",{staticClass:"centered q-pa-md q-pt-lg q-pb-sm"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:function(t){return e.submitStep(!0)}}},[e._v(e._s(e.$t("label.SaveAndTestThisStep")))])],1),i("div",{staticClass:"centered q-px-md q-pb-xl"},[i("a",{staticClass:"text-primary",attrs:{"test-id":"btn-save-step-no-test"},on:{click:function(t){return e.submitStep(!1)}}},[e._v(e._s(e.$t("label.SaveThisStep")))])])],1),i("div",{staticClass:"q-pa-md background-dark fixed-top"},[i("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.close}},[i("q-icon",{staticClass:"subtitle4",attrs:{name:"close"}})],1),null!==e.selectedStep.type?i("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e()]),i("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[i("q-card",[i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),i("q-card-actions",[i("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.submitStep(!1)}}}),i("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),i("q-dialog",{model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[i("div",{staticClass:"q-pa-md centered"},[i("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),i("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.AddABackgroundImage")))]),e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return e.$refs["backgroundfile"].click()}}},[i("q-icon",{attrs:{name:"cloud_upload"}}),i("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),i("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.UploadABackgroundImage"))+":\n        "),i("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),e.media.isSimulated?i("div",{staticClass:"centered"},[i("div",{style:"width: 105px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),i("div",{style:"width: 84px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),i("div",{style:"width: 135px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block;"})]):e._e(),e.media.isSimulated?i("div",[i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyBackgroundPictureImageDisplaysOnMobiles")))]),i("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[i("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.MyPictureIsNotDisplayedWell")}},[i("q-card",[i("q-card-section",[i("span",{domProps:{innerHTML:e._s(e.$t("label.MyPictureIsNotDisplayedWellDesc"))}})])],1)],1)],1)],1):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage||e.media.isSimulated?e._e():i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.WarningImageResize")))]),e.media&&e.media.items&&e.media.items.length>0&&!e.media.isSimulated?i("div",[i("div",{staticClass:"centered q-pa-md"},[e._v(e._s(e.$t("label.OrSelectAnImageInTheList")))]),e._l(e.media.items,(function(t,r){return i("img",{key:t.id,staticStyle:{width:"30vw",height:"40vw"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file},on:{click:function(t){return e.selectMedia(r)}}})}))],2):e._e(),i("div",{staticClass:"centered q-ma-md"},[i("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1)])])],1)},Wr=[],Gr=r("d442"),Kr=r.n(Gr),Jr=r("547f"),Xr=r("e030"),Zr=r("6397"),es=r.n(Zr),ts="demoObject",is={props:["quest","stepId","lang","options"],watch:{stepId:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},extraText:{},player:"All",options:{},hint:{},nbTrial:0,canPass:!0,chapterId:"0",conditions:[],startDate:{enabled:!1},countDownTime:{enabled:!1}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"}],selectedValue:"",values:[]}},media:{isOpened:!1,isSimulated:!1,simulationPicture:"",items:[],detail:{isOpened:!1,index:0}},players:[],stepTypes:Ji,objectsList:Jr,markersList:Wi,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],colorsForCode:this.getColorsForCodeOptions(),newColor:{label:"",value:""}},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions(),maxNbAnswers:10},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[]},findItem:{numberOfAreas:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],currentArea:0},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1,layersForMarkersOptions:[]},iot:{triggerEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("trigger-event"),modes:[{label:this.$t("label.TriggerModeAuto"),value:"auto"},{label:this.$t("label.TriggerModeManual"),value:"manual"}]},waitForEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("wait-for-event")},DeviceID:"0000000000",protocols:[{label:"MQTT",value:"mqtt"},{label:"Bluetooth",value:"bluetooth"}]}},newHint:"",questItems:[],isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==this.stepId){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getStepId:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.stepId&&"0"!==this.stepId?(this.selectedStep.id=this.stepId,this.selectedStep.isNew=!1):(this.selectedStep.id=0,this.selectedStep.isNew=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetStep:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:null,videoStream:null,answerPointerCoordinates:{top:50,left:50},answerItem:null,player:"All",nbTrial:0,canPass:!0,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},countDownTime:{enabled:!1},number:null},this.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="")}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o,c,u,d,p,f,h,m,b,g,v,w;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.questId=this.quest.questId,this.resetStep(),!this.stepId||-1!==this.stepId){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getStepId();case 6:if(this.selectedStep.isNew){e.next=15;break}return e.next=9,_i.getById(this.stepId,this.quest.version,"all");case 9:t=e.sent,t&&t.data?Object.assign(this.selectedStep.form,t.data):ut(this.$t("label.ErrorStandardMessage"),"error"),this.options.chapterId=t.data&&t.data.chapterId?t.data.chapterId:0,this.getUnderstandableConditions(),e.next=18;break;case 15:this.selectedStep.form.type=this.options.type.code,this.selectedStep.form.chapterId=this.options.chapterId,0!==this.options.previousStepId&&(this.selectedStep.form.conditions.push("stepDone_"+this.options.previousStepId),this.getUnderstandableConditions());case 18:if(this.selectedStep.type=this.getStepType(this.selectedStep.form.type),this.selectedStep.form.nbTrial&&0!==this.selectedStep.form.nbTrial||(this.selectedStep.form.nbTrial=this.selectedStep.type.nbTrials),null!==this.selectedStep.form.number){e.next=25;break}return e.next=23,_i.countForAQuest(this.questId,this.quest.version);case 23:i=e.sent,this.selectedStep.form.number=i&&i.data&&i.data.count?i.data.count+1:1;case 25:for(this.selectedStep.form.title[this.lang]&&""!==this.selectedStep.form.title[this.lang]||(r=this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.title[this.quest.mainLanguage]?this.selectedStep.form.title[this.quest.mainLanguage]:this.$t("label.Step")+" "+this.selectedStep.form.number,this.$set(this.selectedStep.form.title,this.lang,r)),this.selectedStep.form.text[this.lang]&&""!==this.selectedStep.form.text[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.text[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.text,this.lang,this.selectedStep.form.text[this.quest.mainLanguage]),this.selectedStep.form.extraText[this.lang]&&""!==this.selectedStep.form.extraText[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.extraText[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.extraText,this.lang,this.selectedStep.form.extraText[this.quest.mainLanguage]),this.selectedStep.form.hint[this.lang]&&""!==this.selectedStep.form.hint[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.hint[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.hint,this.lang,this.selectedStep.form.hint[this.quest.mainLanguage]),"info-text"!==this.options.type.code&&"info-video"!==this.options.type.code&&"new-item"!==this.options.type.code&&"character"!==this.options.type.code&&"help"!==this.options.type.code&&"end-chapter"!==this.options.type.code||this.players.push({label:this.$t("label.All"),value:"All"}),s=0;s<this.quest.playersNumber;s++)this.players.push({label:this.$t("label.Player")+" "+(s+1),value:"P"+(s+1)});if("choose"!==this.options.type.code){e.next=35;break}if(this.selectedStep.form.options&&this.selectedStep.form.options.items&&Array.isArray(this.selectedStep.form.options.items)){if(this.config.choose.answerType=this.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==this.selectedStep.form.options.items[0].imagePath?"image":"text","text"===this.config.choose.answerType)for(o=0;o<this.selectedStep.form.options.items.length;o++)this.selectedStep.form.options.items[o].textLanguage&&this.selectedStep.form.options.items[o].textLanguage[this.lang]&&(this.selectedStep.form.options.items[o].text=this.selectedStep.form.options.items[o].textLanguage[this.lang])}else for(this.config.choose.answerType="text",this.selectedStep.form.options={items:[]},this.selectedStep.form.answers=0,n=0;n<this.config.choose.defaultNbAnswers;n++)this.selectedStep.form.options.items.push({text:this.$t("label.AnswerNb",{nb:n+1}),imagePath:null});e.next=140;break;case 35:if("help"!==this.options.type.code){e.next=39;break}this.selectedStep.form.options&&this.selectedStep.form.options.hasOwnProperty("helpInventory")||(this.selectedStep.form.options.helpHint=!0,this.selectedStep.form.options.helpInventory=!0,this.selectedStep.form.options.helpNext=!0,this.selectedStep.form.options.helpPrevious=!0),e.next=140;break;case 39:if("code-color"!==this.options.type.code){e.next=45;break}this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=Array(4).fill("#FF0000"),this.selectedStep.form.options.colors&&(this.config.colorCode.colorsForCode=this.selectedStep.form.options.colors),this.selectedStep.form.options.codeLength||(this.selectedStep.form.options.codeLength=4),e.next=140;break;case 45:if("code-image"!==this.options.type.code){e.next=51;break}if(!this.selectedStep.form.options||!this.selectedStep.form.options.images)for(this.selectedStep.form.options={images:[]},c=0;c<this.config.imageCode.defaultNbAnswers;c++)this.selectedStep.form.options.images.push({imagePath:null});this.selectedStep.form.options.codeLength||(this.selectedStep.form.options.codeLength=4),this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=[0,0,0,0],e.next=140;break;case 51:if("code-keypad"!==this.options.type.code){e.next=55;break}"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers=""),e.next=140;break;case 55:if("write-text"!==this.options.type.code){e.next=59;break}"object"===Ve()(this.selectedStep.form.answers)&&this.selectedStep.form.answers.length||(this.selectedStep.form.answers=[],this.selectedStep.form.answers.push("")),e.next=140;break;case 59:if("info-text"!==this.options.type.code&&"character"!==this.options.type.code&&"choose"!==this.options.type.code&&"write-text"!==this.options.type.code&&"code-keypad"!==this.options.type.code){e.next=64;break}this.selectedStep.form.options.hasOwnProperty("initDuration")||(this.selectedStep.form.options.initDuration=1),"character"!==this.options.type.code||this.selectedStep.form.options.character||l["a"].set(this.selectedStep.form.options,"character","1"),e.next=140;break;case 64:if("find-item"!==this.options.type.code){e.next=69;break}this.selectedStep.form.options.hasOwnProperty("nbAreas")?this.$nextTick((function(){this.positionFindItemPointer()})):(this.selectedStep.form.options.nbAreas=1,this.selectedStep.form.options.coordinates=[{top:50,left:50}]),this.selectedStep.form.options||(this.selectedStep.form.options={}),e.next=140;break;case 69:if("use-item"!==this.options.type.code){e.next=76;break}this.selectedStep.form.answers.hasOwnProperty("coordinates")&&(this.selectedStep.form.answerPointerCoordinates=this.selectedStep.form.answers.coordinates,this.$nextTick((function(){this.positionUseItemPointer()}))),this.selectedStep.form.answers&&this.selectedStep.form.answers.item&&(this.selectedStep.form.answerItem=this.selectedStep.form.answers.item),this.getQuestItemsAsOptions(),this.selectedStep.form.options&&this.selectedStep.form.options.hasOwnProperty("touchLocation")||(this.selectedStep.form.options={touchLocation:!0}),e.next=140;break;case 76:if("new-item"!==this.options.type.code){e.next=80;break}this.selectedStep.form.options.hasOwnProperty("picture")?(this.selectedStep.form.options.hasOwnProperty("pictures")&&this.selectedStep.form.options.pictures[this.lang]&&(this.selectedStep.form.options.picture=this.selectedStep.form.options.pictures[this.lang]),this.selectedStep.form.options.hasOwnProperty("titles")&&this.selectedStep.form.options.titles[this.lang]&&(this.selectedStep.form.options.title=this.selectedStep.form.options.titles[this.lang])):this.selectedStep.form.options={picture:null,title:"",pictures:{fr:"",en:""},titles:{fr:"",en:""}},e.next=140;break;case 80:if("jigsaw-puzzle"!==this.options.type.code){e.next=84;break}this.selectedStep.form.options.hasOwnProperty("picture")||(this.selectedStep.form.options={picture:null,level:2}),e.next=140;break;case 84:if("memory"!==this.options.type.code){e.next=88;break}if(!this.selectedStep.form.options.hasOwnProperty("items")){for(u=[],d=0;d<8;d++)u.push({imagePath:null,single:!1});this.$set(this.selectedStep.form.options,"items",u)}e.next=140;break;case 88:if("geolocation"!==this.options.type.code){e.next=93;break}this.selectedStep.form.options.hasOwnProperty("distance")||this.$set(this.selectedStep.form.options,"distance","20"),this.selectedStep.form.options.hasOwnProperty("showHelp")||this.$set(this.selectedStep.form.options,"showHelp",!0),e.next=140;break;case 93:if("locate-item-ar"!==this.options.type.code){e.next=110;break}for(p in this.selectedStep.form.options.hasOwnProperty("picture")||this.$set(this.selectedStep.form.options,"picture",null),this.selectedStep.form.options.hasOwnProperty("objectSize")||this.$set(this.selectedStep.form.options,"objectSize",1),this.selectedStep.form.options.hasOwnProperty("is3D")||this.$set(this.selectedStep.form.options,"is3D",!1),Vi)this.config.locateItem.selectModel3DOptions.push({label:Vi[p].name[this.$store.state.user.language],value:p});if(this.config.locateItem.selectModel3DOptions=this.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("model")||this.$set(this.selectedStep.form.options,"model",this.config.locateItem.selectModel3DOptions[0].value),!this.selectedStep.form.options.is3D){e.next=108;break}if(!this.selectedStep.form.options.customModel){e.next=106;break}return e.next=104,this.displayARObject(this.selectedStep.form.options.customModel,this.questId);case 104:e.next=108;break;case 106:return e.next=108,this.displayARObject(this.selectedStep.form.options.model);case 108:e.next=140;break;case 110:if("locate-marker"!==this.options.type.code){e.next=139;break}for("string"!==typeof this.selectedStep.form.answers&&this.$set(this.selectedStep.form,"answers",Wi[0]),f=!0,h=!1,m=void 0,e.prev=115,b=Xr[Symbol.iterator]();!(f=(g=b.next()).done);f=!0)v=g.value,this.config.locateMarker.layersForMarkersOptions.push({label:this.$t("layersForMarkers."+v.label),value:v.code});e.next=123;break;case 119:e.prev=119,e.t0=e["catch"](115),h=!0,m=e.t0;case 123:e.prev=123,e.prev=124,f||null==b.return||b.return();case 126:if(e.prev=126,!h){e.next=129;break}throw m;case 129:return e.finish(126);case 130:return e.finish(123);case 131:for(w in this.config.locateMarker.layersForMarkersOptions=this.config.locateMarker.layersForMarkersOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("layerCode")||this.$set(this.selectedStep.form.options,"layerCode",Xr[0].code),Vi)this.config.locateItem.selectModel3DOptions.push({label:Vi[w].name[this.$store.state.user.language],value:w});this.config.locateItem.selectModel3DOptions=this.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("model")||this.$set(this.selectedStep.form.options,"model",this.config.locateItem.selectModel3DOptions[0].value),this.selectedStep.form.options.hasOwnProperty("mode")||this.$set(this.selectedStep.form.options,"mode","scan"),e.next=140;break;case 139:"wait-for-event"!==this.options.type.code&&"trigger-event"!==this.options.type.code||(this.selectedStep.form.options.hasOwnProperty("protocol")||this.$set(this.selectedStep.form.options,"protocol","bluetooth"),this.selectedStep.form.options.hasOwnProperty("object")||("wait-for-event"===this.options.type.code?this.$set(this.selectedStep.form.options,"object","distance"):this.$set(this.selectedStep.form.options,"object","lcd"),this.updateIotStepOptions()),"trigger-event"!==this.options.type.code||this.selectedStep.form.options.hasOwnProperty("triggerMode")||this.$set(this.selectedStep.form.options,"triggerMode","auto"));case 140:return this.originalStepData=Je.clone(this.selectedStep.form),e.next=143,this.changeNewConditionType();case 143:case"end":return e.stop()}}),e,this,[[115,119,123,131],[124,,126,130]])})));function t(){return e.apply(this,arguments)}return t}(),submitStep:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n,o,l,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.selectedStep.form.$touch(),!this.$v.selectedStep.form.$error){e.next=4;break}return ut(this.$t("label.StepSettingsFormError"),"error"),e.abrupt("return");case 4:if("choose"===this.options.type.code&&"text"===this.config.choose.answerType){for(i=0;i<this.selectedStep.form.options.items.length;i++)this.selectedStep.form.options&&this.selectedStep.form.options.items&&this.selectedStep.form.options.items[i]&&this.selectedStep.form.options.items[i].textLanguage?this.selectedStep.form.options.items[i].textLanguage[this.lang]=this.selectedStep.form.options.items[i].text:(r={},r[this.lang]=this.selectedStep.form.options.items[i].text,this.selectedStep.form.options.items[i].textLanguage=r);this.selectedStep.form.options.items=this.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}return"character"===this.options.type.code&&(this.selectedStep.form.options.character||(this.selectedStep.form.options.character="1")),"code-keypad"===this.options.type.code&&(this.selectedStep.form.options.codeLength=this.selectedStep.form.answers.length),"code-color"===this.options.type.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|"),this.selectedStep.form.options.colors=this.config.colorCode.colorsForCode),"code-image"===this.options.type.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|")),"jigsaw-puzzle"===this.options.type.code&&(s=parseInt(this.selectedStep.form.options.level,10),n=this.config.jigsaw.nbPiecesByLevel[s],o=Je.buildIncrementalArray(Math.pow(n,2)),o=Je.shuffle(o),this.selectedStep.form.answers=o.join("|")),"memory"===this.options.type.code&&Array.isArray(this.selectedStep.form.options.items)&&this.selectedStep.form.options.items.length>0&&(this.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),this.selectedStep.form.options.lastIsSingle&&(this.selectedStep.form.options.items[this.selectedStep.form.options.items.length-1].single=!0)),this.options.type.code,"use-item"===this.options.type.code&&(this.selectedStep.form.answers={coordinates:this.selectedStep.form.answerPointerCoordinates,item:this.selectedStep.form.answerItem}),"new-item"===this.options.type.code&&(this.selectedStep.form.options.titles||(this.selectedStep.form.options.titles={}),this.selectedStep.form.options.titles[this.lang]=this.selectedStep.form.options.title,this.selectedStep.form.options.pictures||(this.selectedStep.form.options.pictures={}),this.selectedStep.form.options.pictures[this.lang]||(this.selectedStep.form.options.pictures[this.lang]=this.selectedStep.form.options.picture)),l=Object.assign(this.selectedStep.form,{questId:this.questId,version:this.quest.version,chapterId:this.options.chapterId,type:this.options.type.code}),this.$q.loading.show(),e.next=18,_i.save(l);case 18:c=e.sent,this.$q.loading.hide(),!0===t?c&&c.data&&c.data.stepId?(l.id=c.data.stepId,l.stepId=c.data.stepId,this.$emit("change",l)):ut(this.$t("label.TechnicalIssue"),"error"):!1===t&&(ut(this.$t("label.StepSaved"),"success"),this.$emit("close"));case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.config.imageCode.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.imageCode.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},deleteCodeAnswer:function(e){if(this.selectedStep.form.options.images.length<=this.config.choose.minNbAnswers)ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options.images.splice(e,1)}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("#FF0000")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.formatedConditions.length=0,t=0;case 2:if(!(t<this.selectedStep.form.conditions.length)){e.next=13;break}if(i=this.selectedStep.form.conditions[t],r=i.split("_"),"stepDone"!==r[0]&&"stepSuccess"!==r[0]&&"stepFail"!==r[0]){e.next=10;break}return e.next=8,_i.getById(r[1],this.quest.version,"all");case 8:s=e.sent,s&&s.data&&s.data.hasOwnProperty("title")&&(n=s.data.title[this.lang]?s.data.title[this.lang]:s.data.title[Object.keys(s.data.title)[0]],"stepDone"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.FollowStep")+" <i>"+n+"</i>"),"stepSuccess"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.StepSuccess")+" <i>"+n+"</i>"),"stepFail"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.StepFail")+" <i>"+n+"</i>"));case 10:t++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteCondition:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.conditions.splice(t,1),this.selectedStep.formatedConditions.splice(t,1);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeNewConditionType:function(){var e=o()(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedStep.newCondition.values.length=0,t=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","jigsaw-puzzle","memory"],"stepDone"!==this.selectedStep.newCondition.selectedType&&"stepSuccess"!==this.selectedStep.newCondition.selectedType&&"stepFail"!==this.selectedStep.newCondition.selectedType){e.next=7;break}return e.next=5,_i.listForAChapter(this.questId,this.selectedStep.form.chapterId,this.quest.version,"all");case 5:if(i=e.sent,i&&i.data&&i.data.length>0)for(r=0;r<i.data.length;r++)i.data[r].stepId.toString()!==this.stepId.toString()&&("stepDone"!==this.selectedStep.newCondition.selectedType&&-1===t.indexOf(i.data[r].type)||(s=i.data[r].title[this.lang]?i.data[r].title[this.lang]:i.data[r].title[Object.keys(i.data[r].title)[0]],this.selectedStep.newCondition.values.push({label:s,value:i.data[r].stepId})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveNewCondition:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""!==this.selectedStep.newCondition.selectedType&&""!==this.selectedStep.newCondition.selectedValue&&("stepDone"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepDone_"+this.selectedStep.newCondition.selectedValue),"stepSuccess"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepSuccess_"+this.selectedStep.newCondition.selectedValue),"stepFail"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepFail_"+this.selectedStep.newCondition.selectedValue)),this.getUnderstandableConditions(),e.next=4,this.resetNewConditionForm();case 4:this.selectedStep.newConditionForm=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetNewConditionForm:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedStep.newCondition.selectedType="stepDone",e.next=3,this.changeNewConditionType();case 3:this.selectedStep.newCondition.selectedValue="";case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},uploadBackgroundImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadBackgroundImage(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.selectedStep.form.backgroundImage=s.data.file,this.displayBackgroundImageSize(this.selectedStep.form.backgroundImage)):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),displayBackgroundImageSize:function(e){this.media.isSimulated=!0,this.media.simulationPicture=this.serverUrl+"/upload/quest/"+this.questId+"/step/background/"+e},resetBackgroundImage:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.backgroundImage=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadVideo:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("video",i[0]),e.next=8,_i.uploadVideo(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.videoStream=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadImageToRecognize:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadImageToRecognize(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.answers=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadAnswerImage:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.target.files,r[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),s=new FormData,s.append("image",r[0]),e.next=8,_i.uploadAnswerImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.items[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadMemoryImage:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.target.files,r[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),s=new FormData,s.append("image",r[0]),e.next=8,_i.uploadMemoryImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.items[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.target.files,r[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),s=new FormData,s.append("image",r[0]),e.next=8,_i.uploadCodeAnswerImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.images[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadPuzzleImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadPuzzleImage(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.options.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadItemImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadItemImage(this.questId,this.options.type.code,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.selectedStep.form.options.picture=s.data.file,this.selectedStep.form.options.pictures&&(this.selectedStep.form.options.pictures[this.lang]=s.data.file)):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadItemObject:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadItemObject(this.questId,this.options.type.code,r);case 8:if(s=e.sent,!s||!s.hasOwnProperty("data")){e.next=19;break}if(!s.data.file){e.next=16;break}return this.selectedStep.form.options.customModel=s.data.file,e.next=14,this.displayARObject(this.selectedStep.form.options.customModel,this.questId);case 14:e.next=17;break;case 16:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error");case 17:e.next=20;break;case 19:ut(this.$t("label.ErrorStandardMessage"),"error");case 20:this.$q.loading.hide();case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeObjectInList:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedStep.form.options.customModel=null,e.next=3,this.displayARObject(this.selectedStep.form.options.model);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadCharacterImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadCharacterImage(this.questId,this.options.type.code,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?l["a"].set(this.selectedStep.form.options,"character",s.data.file):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadAlternativeImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return this.$q.loading.show(),r=new FormData,r.append("image",i[0]),e.next=8,_i.uploadAlternativeImage(this.questId,this.options.type.code,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?l["a"].set(this.selectedStep.form.options,"altFile",s.data.file):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadAndPrepare3DModel:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$q.loading.show(),e.next=4,this.ModelLoaderAsync(t,i);case 4:r=e.sent,this.$q.loading.hide(),e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](0),console.error("Error while loading 3D model:",e.t0),ut(this.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 13:return s=r.scene,n=(new We["Box3"]).setFromObject(s),o=n.getCenter(new We["Vector3"]),o.multiplyScalar(-1),l=new We["Object3D"],s.applyMatrix((new We["Matrix4"]).makeTranslation(o.x,o.y,o.z)),l.add(s),l.up=new We["Vector3"](0,0,1),s=l,s.rotation.z=Math.PI/4,e.abrupt("return",{object:s,animations:r.animations});case 24:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,i){return e.apply(this,arguments)}return t}(),ModelLoaderAsync:function(){var e=o()(a.a.mark((function e(t,i){var r,s=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=console.log,e.abrupt("return",new Promise((function(e,a){var n=new pr.a;-1!==t.indexOf("blob:")?n.load(t,e,r,a):i?n.load(s.serverUrl+"/upload/quest/"+i+"/step/3dobject/"+t+".glb",e,r,a):n.load(s.serverUrl+"/statics/3d-models/"+t+".glb",e,r,a)})));case 2:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),displayARObject:function(){var e=o()(a.a.mark((function e(t,i){var r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.config.locateItem.object){e.next=5;break}r=this,this.$nextTick(o()(a.a.mark((function e(){var s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=document.getElementById("target-canvas"),s){e.next=3;break}throw new Error("missing 3D canvas");case 3:return r.config.locateItem.scene=new We["Scene"],n=new We["PerspectiveCamera"](70,1.333,.001,1e3),n.up=new We["Vector3"](0,0,1),n.rotation.x=Math.PI/2,n.lookAt(new We["Vector3"](0,0,0)),r.config.locateItem.camera=n,o=new We["WebGLRenderer"]({alpha:!0,antialias:!0}),s.appendChild(o.domElement),r.config.locateItem.renderer=o,r.config.locateItem.renderer.setSize(Math.round(.8*window.innerWidth),Math.round(.6*window.innerWidth)),r.config.locateItem.renderer.gammaOutput=!0,r.config.locateItem.controls=new es.a(n,o.domElement),l=new We["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),r.config.locateItem.scene.add(l),r.config.locateItem.scene.add(new We["AmbientLight"](11579568)),e.next=21,r.displayARObjectEnd(t,i);case 21:r.animateModelPreview();case 22:case"end":return e.stop()}}),e)})))),e.next=9;break;case 5:return s=this.config.locateItem.scene.getObjectByName(ts),this.config.locateItem.scene.remove(s),e.next=9,this.displayARObjectEnd(t,i);case 9:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),displayARObjectEnd:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadAndPrepare3DModel(t,i);case 2:r=e.sent,s=r.object,s.up=new We["Vector3"](0,0,1),s.visible=!0,s.name=ts,this.config.locateItem.scene.add(s),n=(new We["Box3"]).setFromObject(s),o=new We["Vector3"],n.getSize(o),this.config.locateItem.zoom=1.5*Math.max(o.x,o.y,o.z),this.config.locateItem.camera.position.set(0,-this.config.locateItem.zoom,0),this.config.locateItem.controls.update(),this.config.locateItem.object=s;case 15:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.changeObjectInList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectObject:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.title=this.objectsList[t].name[this.lang],this.selectedStep.form.options.picture="statics/images/object/"+this.objectsList[t].file,this.selectedStep.form.options.titles[this.lang]=this.selectedStep.form.options.title,this.selectedStep.form.options.pictures[this.lang]=this.selectedStep.form.options.picture;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getColorsForCodeOptions:function(){var e=this,t=[];return Yi.forEach((function(i){t.push({value:i.value,label:e.$t("color."+i.label)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},deleteColor:function(e){this.config.colorCode.colorsForCode.splice(e,1)},addColor:function(){this.config.colorCode.colorsForCode.push({value:this.config.colorCode.newColor.value,label:this.config.colorCode.newColor.label}),this.config.colorCode.newColor={label:"",value:""}},removeHint:function(e){this.selectedStep.form.hint[this.lang].splice(e,1)},addHint:function(){this.selectedStep.form.hint&&this.selectedStep.form.hint[this.lang]?this.selectedStep.form.hint[this.lang].push(this.newHint):(this.selectedStep.form.hint={},this.selectedStep.form.hint[this.lang]=[],this.selectedStep.form.hint[this.lang].push(this.newHint)),this.newHint=""},getQuestItemsAsOptions:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_i.listWonObjects(this.questId,this.stepId,this.quest.version);case 2:t=e.sent,t&&t.data?(this.questItems=t.data,i=[],this.questItems.forEach((function(e){i.push({value:e.picture,label:e.title})})),i.sort((function(e,t){return e.label>t.label?1:-1})),this.config.useItem.questItemsAsOptions=i):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,s=this.$refs["useItemPicture"];this.selectedStep.form.answerPointerCoordinates.left=Math.round(i/s.clientWidth*100),this.selectedStep.form.answerPointerCoordinates.top=Math.round(r/s.clientHeight*100),this.positionUseItemPointer()},getClickCoordinatesFindItem:function(e){var t=e.currentTarget.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,s=this.$refs["findItemPicture"];this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].left=Math.round(i/s.clientWidth*100),this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].top=Math.round(r/s.clientHeight*100),this.positionFindItemPointer()},positionFindItemPointer:function(){for(var e=window.innerWidth/100,t=Math.round(8*e),i=0;i<4;i++)document.getElementById("cross"+i)&&(i<this.selectedStep.form.options.nbAreas?(document.getElementById("cross"+i).style.display="block",document.getElementById("cross"+i).style.left=Math.round(90*this.selectedStep.form.options.coordinates[i].left*e/100-t)+"px",document.getElementById("cross"+i).style.top=Math.round(120*this.selectedStep.form.options.coordinates[i].top*e/100-t)+"px"):document.getElementById("cross"+i).style.display="none")},positionUseItemPointer:function(){var e=window.innerWidth/100,t=Math.round(8*e);document.getElementById("cross").style.left=Math.round(90*this.selectedStep.form.answerPointerCoordinates.left*e/100-t)+"px",document.getElementById("cross").style.top=Math.round(120*this.selectedStep.form.answerPointerCoordinates.top*e/100-t)+"px"},setLocation:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.lat=parseFloat(t.geometry.location.lat()),this.selectedStep.form.options.lng=parseFloat(t.geometry.location.lng()),this.selectedStep.form.options.destination=t.formatted_address||"",this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCurrentLocation:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation,this.getLocationError,{timeout:5e3,maximumAge:1e4});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLocationError:function(e){this.$q.loading.hide(),console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")})},fillLocation:function(e){var t=this;this.selectedStep.form.options.lat=e.coords.latitude,this.selectedStep.form.options.lng=e.coords.longitude,this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch();var i=new google.maps.Geocoder;i.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,i){t.$q.loading.hide(),"OK"===i&&e[0].formatted_address?(t.selectedStep.form.options.destination=e[0].formatted_address,document.getElementById("destination").value=t.selectedStep.form.options.destination):ut(t.$t("label.ErrorStandardMessage"),"error")}))},getMyGPSLocation:function(){this.$q.loading.show();var e=this;navigator.geolocation.getCurrentPosition((function(t){e.$set(e.selectedStep.form.options,"lat",t.coords.latitude),e.$set(e.selectedStep.form.options,"lng",t.coords.longitude),e.$v.selectedStep.form.options.lat.$touch(),e.$v.selectedStep.form.options.lng.$touch(),e.$q.loading.hide()}),this.getLocationError,{timeout:5e3,maximumAge:1e4})},checkMainTextLength:function(e){var t=11,i=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=i&&(e.match(/\n/g)||[]).length<=t},addWriteTextAnswer:function(){this.selectedStep.form.answers.push("")},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){Kr()(this.originalStepData)!==Kr()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,i=!1,r=void 0;try{for(var s,a=Ji[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var n=s.value;if(n.code===e)return n}}catch(o){i=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},showMedia:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMedia("background");case 2:this.media.isOpened=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectMedia:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.backgroundImage=this.media.items[t].file,this.hideMedia();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadMedia:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.listMedia(this.quest.questId,this.quest.version,t);case 2:i=e.sent,i&&i.data&&(this.media.items=i.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideMedia:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.media.isOpened=!1,this.media.isSimulated=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getIotObjectsAsOptions:function(e){var t=this;if(!["wait-for-event","trigger-event"].includes(e))throw new Error("Unsupported step type: "+e);var i=[];return Gi.forEach((function(r){r.step===e&&i.push({value:r.code,label:t.$t("iotObjects."+r.code)})})),i.sort((function(e,t){return e.label>t.label?1:-1})),i},updateIotStepOptions:function(){for(var e=["range","rangeX","rangeY","message","answer"],t=1;t<=3;t++)e.push("range"+t);for(var i=0,r=e;i<r.length;i++){var s=r[i];delete this.selectedStep.form.options[s]}switch(this.selectedStep.form.options.object){case"keypad":this.$set(this.selectedStep.form.options,"answer","");break;case"joystick":this.$set(this.selectedStep.form.options,"rangeX",{min:100,max:200}),this.$set(this.selectedStep.form.options,"rangeY",{min:100,max:200});break;case"distance":this.$set(this.selectedStep.form.options,"range",{min:50,max:150});break;case"pot":for(var a=1;a<=3;a++)this.$set(this.selectedStep.form.options,"range"+a,{min:100,max:200});break;case"escapebox":break;case"lcd":this.$set(this.selectedStep.form.options,"message","");break;case"buzzer":this.$set(this.selectedStep.form.options,"duration",1e3),this.$set(this.selectedStep.form.options,"frequency",440);break;case"chest":break;case"relay":break;default:throw new Error("unknown IoT object code '"+this.selectedStep.form.options.object+"'")}},activateCountDown:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,!0===t&&this.$q.dialog({dark:!0,message:this.$t("label.CountDownWarning"),ok:!0,cancel:!0}).onCancel(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.selectedStep.form.countDownTime.enabled=!1;case 1:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),selectFindItemArea:function(e){for(var t=0;t<this.selectedStep.form.options.nbAreas;t++)document.getElementById("cross"+t)&&(document.getElementById("cross"+t).style.opacity=.5);document.getElementById("cross"+e)&&(document.getElementById("cross"+e).style.opacity=1),this.config.findItem.currentArea=e},changeNbAreas:function(){if(this.selectedStep.form.options&&this.selectedStep.form.options.coordinates)if(this.selectedStep.form.options.coordinates.length<this.selectedStep.form.options.nbAreas){for(var e=this.selectedStep.form.options.coordinates.length;e<this.selectedStep.form.options.nbAreas;e++)this.selectedStep.form.options.coordinates.push({top:50,left:50});this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1,this.selectFindItemArea(this.config.findItem.currentArea-1)}else this.selectedStep.form.options.coordinates.length=this.selectedStep.form.options.nbAreas,this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1;return this.positionFindItemPointer(),!0}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:Bt["required"]},e.text[this.lang]={function:function(e){return this.checkMainTextLength(e)}},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:Bt["required"]},imagePath:{}}:{text:{},imagePath:{required:Bt["required"]}}}};break;case"code-keypad":e.answers={required:Bt["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:Bt["required"]};break;case"geolocation":e.options={lat:{required:Bt["required"]},lng:{required:Bt["required"]}};break;case"info-video":e.videoStream={required:Bt["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:Bt["required"]}};break;case"new-item":e.options={picture:{required:Bt["required"]},title:{required:Bt["required"]}};break;case"character":e.options={character:{required:Bt["required"]}};break;case"use-item":e.backgroundImage={required:Bt["required"]},e.answerItem={required:Bt["required"]};break;case"write-text":e.answers={required:Bt["required"]};break;case"locate-item-ar":e.options={lat:{required:Bt["required"]},lng:{required:Bt["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:Bt["required"]}:e.options.picture={required:Bt["required"]};break;case"touch-object-on-marker":e.options={model:{required:Bt["required"]}};break;case"wait-for-event":e.options={protocol:{required:Bt["required"]},object:{required:Bt["required"]}};break}return{selectedStep:{form:e}}}},rs=is,ss=(r("bc32"),r("b650"),Object(_e["a"])(rs,Vr,Wr,!1,null,"717b6194",null)),as=ss.exports,ns=r("fb4c"),os=r("534a"),ls=r("e18e");l["a"].directive("sortable",{inserted:function(e,t){return new yr.a(e,t.value||{})}});var cs={components:{stepSettings:as,stepPlay:wr,story:cr},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},form:{fields:{title:{},category:"",priceForPlayer:"",tierPriceForPlayer:"",premiumPrice:{},playersNumber:1,description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,town:"",country:"",zipcode:"",editorMode:"simple",customization:{audio:"",color:"",logo:"",character:"",removeScoring:!1,endMessage:"",qrCodeMessage:{fr:"",en:""}},rewardPicture:"",readMoreLink:"",limitNumberOfPlayer:0,countDownTime:{enabled:!1,time:0}},categories:Je.buildOptionsForSelect(ns,{valueField:"id",labelField:"name"},this.$t),languages:Je.buildOptionsForSelect(ls,{valueField:"code",labelField:"name"},this.$t),levels:Je.buildOptionsForSelect(os,{valueField:"id",labelField:"name"},this.$t),prices:[{label:"0,99 €",value:"premiumprice1"},{label:"1,99 €",value:"premiumprice2"},{label:"2,99 €",value:"premiumprice3"},{label:"4,99 €",value:"premiumprice5"},{label:"9,99 €",value:"premiumprice10"},{label:"14,99 €",value:"premiumprice15"},{label:"19,99 €",value:"premiumprice20"}],players:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[]},selectedItem:null,hint:{isOpened:!1,label:"",number:0},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],payments:[],statistics:[],canMoveNextStep:!1,canPass:!1,showPaymentBox:!1,showTierPaymentBox:!1,storage:"",itemUsed:null,isIOs:Je.isIOS(),serverUrl:"https://api.graaly.com",pictureUploadURL:this.serverUrl+"/quest/picture/upload",titleMaxLength:50,isHybrid:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Je.clearAllRunningProcesses(),this.$route.params.questId&&""!==this.$route.params.questId?("undefined"!==typeof window.cordova&&(this.isHybrid=!0),this.loadQuestData()):this.$router.push("/quest/create/welcome");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadQuestData:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.questId=this.$route.params.questId,e.next=3,Xe.getLastById(this.questId,"all");case 3:if(t=e.sent,!t||!t.data){e.next=50;break}if(this.quest=t.data,"draft"!==this.quest.status&&(this.readOnly=!0),this.editor.initMode=this.quest.editorMode,this.quest.languages&&this.quest.languages.length>0&&"fr"===this.languages.current)for(this.languages.current=this.quest.languages[0].lang,i=0;i<this.quest.languages.length;i++)this.languages.available.push({label:this.$t("language."+this.quest.languages[i].lang),value:this.quest.languages[i].lang});return this.quest.description[this.languages.current]&&""!==this.quest.description[this.languages.current]||(this.quest.description[this.languages.current]=this.quest.description[this.quest.mainLanguage]),this.form.fields.questId=this.quest.questId,this.quest.title&&Object.keys(this.quest.title).length>0?this.form.fields.title=this.quest.title:(this.form.fields.title={},this.form.fields.title[this.languages.current]="-"),this.form.fields.description=this.quest.description,this.form.fields.category=this.quest.category,this.form.fields.location=this.quest.location,this.form.fields.languages=this.quest.languages,this.form.fields.mainLanguage=this.quest.mainLanguage,this.form.fields.level=this.quest.level,this.form.fields.duration=this.quest.duration,this.form.fields.picture=this.quest.picture,this.form.fields.thumb=this.quest.thumb,this.form.fields.editorMode=this.quest.editorMode,this.form.fields.customization=this.quest.customization,this.form.fields.rewardPicture=this.quest.rewardPicture,this.form.fields.readMoreLink=this.quest.readMoreLink,this.form.fields.limitNumberOfPlayer=this.quest.limitNumberOfPlayer,this.form.fields.playersNumber=this.quest.playersNumber,this.form.fields.startingPlace=this.form.fields.location.address||"",this.form.fields.zipcode=this.form.fields.location&&this.form.fields.location.zipcode?this.form.fields.location.zipcode:"",this.form.fields.town=this.form.fields.location&&this.form.fields.location.town?this.form.fields.location.town:"",this.form.fields.country=this.form.fields.location&&this.form.fields.location.country?this.form.fields.location.country:"",this.form.fields.countDownTime=this.form.fields.countDownTime,"room"===this.quest.type?this.form.fields.priceForPlayer=this.quest.premiumPrice.manual:"quest"===this.quest.type&&(this.quest.premiumPrice||(this.form.fields.premiumPrice={}),this.quest.premiumPrice.androidId&&(this.form.fields.priceForPlayer=this.quest.premiumPrice.androidId),this.quest.premiumPrice.active?this.showPaymentBox=!0:this.showPaymentBox=!1,this.quest.premiumPrice.tier?(this.form.fields.tierPriceForPlayer=this.quest.premiumPrice.manual,this.showTierPaymentBox=!0):this.showTierPaymentBox=!1),this.form.fields.location.hasOwnProperty("coordinates")&&2===this.form.fields.location.coordinates.length&&(r=this.form.fields.location.coordinates,this.form.fields.location={lng:r[0],lat:r[1]}),this.tabs.progress=this.quest.creationStep,this.tabs.progress<=3&&(this.tabs.selected=this.tabs.list[Math.min(this.tabs.progress,2)]),e.next=38,this.refreshStepsList();case 38:return e.next=40,this.listEditors();case 40:return e.next=42,this.listInvitees();case 42:return e.next=44,this.listReviews();case 44:return e.next=46,this.getStatistics();case 46:this.quest.access&&"private"===this.quest.access&&this.getPrivateRanking(),this.getReadableStorageUsage(),e.next=51;break;case 50:ut(this.$t("label.ErrorStandardMessage"),"error");case 51:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),movePremium:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.isPremium){e.next=11;break}if(!this.$store.state.user||!this.$store.state.user.organizationId){e.next=11;break}return e.next=4,Xe.CheckIfCanBeMovedPremium(this.questId);case 4:if(t=e.sent,!(t&&t.data&&t.data.canBePremium)){e.next=10;break}return e.next=8,Xe.MoveToPremium(this.questId);case 8:i=e.sent,i&&i.data&&i.data.status&&"ok"===i.data.status?(this.quest.isPremium=!0,this.quest.size.limit=6e8):ut(this.$t("label.ErrorStandardMessage"),"error");case 10:this.premium.isOpened=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openPremiumBox:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.isPremium){e.next=7;break}if(!this.$store.state.user||!this.$store.state.user.organizationId){e.next=6;break}return e.next=4,Xe.CheckIfCanBeMovedPremium(this.questId);case 4:t=e.sent,t&&t.data&&t.data.canBePremium&&(this.premium.canMovePremium=!0);case 6:this.premium.isOpened=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadReward:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Xe.uploadReward(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.form.fields.rewardPicture=s.data.file,this.$forceUpdate()):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeReward:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.rewardPicture=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeEditorMode:function(){var e=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("advanced"!==this.form.fields.editorMode){e.next=4;break}this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.refreshStepsList();case 2:case"end":return e.stop()}}),e)})))).onCancel(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form.fields.editorMode="simple";case 1:case"end":return e.stop()}}),e)})))),e.next=6;break;case 4:return e.next=6,this.refreshStepsList();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshStepsList:function(){var e=o()(a.a.mark((function e(){var t,i,r,s,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.stepsMissing=!1,this.$q.loading.show(),e.next=4,_i.listForAQuest(this.questId,this.quest.version,"all");case 4:if(t=e.sent,!t||!t.data){e.next=80;break}if(this.chapters.items=t.data.chapters,i=t.data.steps,"simple"!==this.form.fields.editorMode){e.next=12;break}this.chapters.items&&this.chapters.items.length>0&&(this.chapters.items[0].steps=i),e.next=66;break;case 12:r=0;case 13:if(!(r<this.chapters.items.length)){e.next=66;break}for(s=!1,n=[],o=[],l=[],c=[],u=0;u<i.length;u++)i[u].chapterId.toString()===this.chapters.items[r].chapterId.toString()&&(this.chapters.items[r].steps||(this.chapters.items[r].steps=[]),"end-chapter"===i[u].type&&(s=!0),l.push(i[u]));for(d=[],u=0;u<l.length;u++)d.push(l[u].stepId.toString());p=[],f=0;case 24:if(!(d.length>0&&f<1e3)){e.next=55;break}f++,u=0;case 27:if(!(u<l.length)){e.next=53;break}if(h=l[u].stepId.toString(),-1!==p.indexOf(h)){e.next=50;break}if(l[u].conditions&&0===l[u].conditions.length&&(p.unshift(h),d.splice(d.indexOf(h),1),n.push(l[u].title[this.languages.current])),!(l[u].conditions&&l[u].conditions.length>0)){e.next=50;break}m=0,b=0;case 34:if(!(b<l[u].conditions.length)){e.next=48;break}if(g=l[u].conditions[b].replace("stepDone_",""),g=g.replace("stepSuccess_",""),g=g.replace("stepFail_",""),-1!==p.indexOf(g)){e.next=43;break}return-1===d.indexOf(g)&&(o.push(h),d.splice(d.indexOf(h),1),p.push(h)),e.abrupt("continue",50);case 43:v=p.indexOf(g),v>m&&(m=v);case 45:b++,e.next=34;break;case 48:p.length>=m?p.splice(m+1,0,h):p.push(h),d.splice(d.indexOf(h),1);case 50:u++,e.next=27;break;case 53:e.next=24;break;case 55:for(u=0;u<p.length;u++)for(b=0;b<l.length;b++)p[u]===l[b].stepId.toString()&&(-1!==o.indexOf(l[b].stepId.toString())&&(l[b].error="FollowingStepsHaveInvalidCondition"),0===u||0===l[b].conditions.length||l[b].conditions.length>1||"locate-marker"===l[b].type?l[b].level=1:l[b].level=2,this.chapters.items[r].steps.push(l[b]));for(w=!1,b=0;b<l.length;b++){for(w=!1,u=0;u<p.length;u++)p[u]===l[b].stepId.toString()&&(w=!0);w||(l[b].error="FollowingStepsHaveInvalidCondition",l[b].level=1,this.chapters.items[r].steps.push(l[b]))}this.chapters.items[r].warnings=[],s||this.chapters.items[r].warnings.push({noEndOfChapter:!0}),n.length>1&&this.chapters.items[r].warnings.push({moreThan1StepWithNoCondition:n}),c.length>0&&this.chapters.items[r].warnings.push({stepsWithMissingParent:c}),o.length>0&&this.chapters.items[r].warnings.push({stepWithNoParent:o});case 63:r++,e.next=13;break;case 66:i&&i.length>0&&this.tabs.progress<2&&(this.tabs.progress=2),k=!1,y=0;case 69:if(!(y<i.length)){e.next=77;break}if(_=i[y],"locate-marker"!==_.type){e.next=74;break}return k=!0,e.abrupt("break",77);case 74:y++,e.next=69;break;case 77:this.quest.hasLocateMarkerSteps=k,e.next=81;break;case 80:this.warnings.stepsMissing=!0;case 81:this.$q.loading.hide();case 82:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",i=0;i<e.length;i++)if(e[i].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[i].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[i].moreThan1StepWithNoCondition.join(", ")+". "),e[i].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[i].hasOwnProperty("stepsWithMissingParent")){for(var r in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[i].stepsWithMissingParent)for(var s=0;s<this.chapters.items.length;s++)for(var a=0;a<this.chapters.items[s].steps.length;a++)this.chapters.items[s].steps[a].stepId.toString()===r&&(t+=this.chapters.items[s].steps[a].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("public"!==this.quest.access||0!==this.form.fields.location.lat&&0!==this.form.fields.location.lng){e.next=3;break}return ut(this.$t("label.YouMustDefineStartLocation"),"warning"),e.abrupt("return");case 3:if(this.$v.form.fields.$touch(),this.$v.form.fields.$error){e.next=18;break}return t={languages:[this.form.fields.mainLanguage],version:this.quest.version,type:this.quest.type,location:{type:"Point",coordinates:[this.form.fields.location.lng,this.form.fields.location.lat],town:this.form.fields.town,country:this.form.fields.country,zipcode:this.form.fields.zipcode,address:this.form.fields.startingPlace}},this.form.fields.premiumPrice||(this.form.fields.premiumPrice={}),this.showPaymentBox&&(this.form.fields.premiumPrice.active=!0),this.showTierPaymentBox&&(this.form.fields.premiumPrice.tier=!0),i=Object.assign({},this.form.fields,t),i.questId||(i.questId=this.questId),console.log(i),this.$q.loading.show(),e.next=15,Xe.save(i);case 15:r=e.sent,this.$q.loading.hide(),r&&r.data?(this.quest.playersNumber=this.form.fields.playersNumber,this.tabs.progress<1&&("quest"===this.quest.type?(this.tabs.progress=1,this.tabs.selected="steps"):(this.tabs.progress=2,this.tabs.selected="publish")),ut(this.$t("label.QuestSaved"),"info")):ut(this.$t("label.ErrorStandardMessage"),"error");case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Xe.uploadPicture(r);case 8:return s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.form.fields.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),e.next=12,Xe.uploadThumb(r);case 12:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.form.fields.thumb=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadThumb:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Xe.uploadThumb(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.form.fields.thumb=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadLogo:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Xe.uploadLogo(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.form.fields.customization.logo=s.data.file,this.$forceUpdate()):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeLogo:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.customization.logo=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadAudio:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("audio",i[0]),e.next=8,Xe.uploadAudio(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.form.fields.customization.audio=s.data.file,this.$forceUpdate()):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeAudio:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.customization.audio=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadCharacter:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Xe.uploadCharacter(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.form.fields.customization.character=s.data.file,this.$forceUpdate()):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeCharacter:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.customization.character=null;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startStory:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.countForUser(this.$store.state.user._id);case 2:t=e.sent,t.data&&t.data<2&&(this.story.active=!0,null===this.story.step&&"settings"===this.tabs.selected&&(this.story.step=17));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCurrentLocation:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation,this.getLocationError,{timeout:5e3,maximumAge:1e4});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var i=new google.maps.Geocoder;i.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,i){t.$q.loading.hide(),"OK"===i&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),ut(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.location={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},this.form.fields.town=this.getCity(t),this.form.fields.country=this.getCountry(t),this.form.fields.zipcode=this.getZipcode(t),this.form.fields.startingPlace=t.formatted_address||"";case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("postal_code"===e.address_components[t].types[i])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("locality"===e.address_components[t].types[i])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("country"===e.address_components[t].types[i])return e.address_components[t].short_name;return""},onChapterListUpdate:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_i.moveChapter(this.questId,this.quest.version,t.oldIndex+1,t.newIndex+1);case 2:i=e.sent,i&&this.chapters.items.splice(t.newIndex,0,this.chapters.items.splice(t.oldIndex,1)[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onStepListUpdate:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_i.move(this.questId,this.quest.version,t.oldIndex+1,t.newIndex+1);case 2:i=e.sent,i&&this.chapters.items[0].steps.splice(t.newIndex,0,this.chapters.items[0].steps.splice(t.oldIndex,1)[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),publish:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkIfTestable();case 2:if(i=e.sent,!i){e.next=36;break}for(r="unpublish",s=0;s<this.form.fields.languages.length;s++)this.form.fields.languages[s].lang&&this.form.fields.languages[s].lang===t&&this.form.fields.languages[s].published&&(r="publish");if("publish"!==r){e.next=28;break}if("unpublished"!==this.quest.status&&"draft"!==this.quest.status){e.next=21;break}if("private"!==this.quest.access||this.quest.isPremium){e.next=16;break}return this.$q.loading.show(),e.next=12,Xe.publish(this.questId,t);case 12:this.$q.loading.hide(),this.quest.status="published",e.next=18;break;case 16:n=this,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.$q.loading.show(),e.next=3,Xe.publish(n.questId,t);case 3:n.$q.loading.hide(),n.quest.status="tovalidate";case 5:case"end":return e.stop()}}),e)})))).onCancel(o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=0;t<n.form.fields.languages.length;t++)n.form.fields.languages[t].published=!1;case 1:case"end":return e.stop()}}),e)}))));case 18:this.readOnly=!0,e.next=25;break;case 21:return this.$q.loading.show(),e.next=24,Xe.publish(this.questId,t);case 24:this.$q.loading.hide();case 25:this.tabs.progress=3,e.next=34;break;case 28:return this.$q.loading.show(),e.next=31,Xe.unpublish(this.questId,t);case 31:this.$q.loading.hide(),this.quest.status="unpublished",this.tabs.progress=2;case 34:e.next=38;break;case 36:for(ut(this.$t("label.YourQuestContainsErrorsInSteps"),"error"),s=0;s<this.form.fields.languages.length;s++)this.form.fields.languages[s].published=!1;case 38:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isReadOnly:function(){return"disabled"===this.quest.status||"tovalidate"===this.quest.status},unpublish:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.quest.status="unpublished",this.$q.loading.show(),e.next=4,Xe.unpublish(this.questId);case 4:this.$q.loading.hide(),ut(this.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),testQuest:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkIfTestable();case 2:t=e.sent,t&&this.$router.push("/quest/play/"+this.questId);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfTestable:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.chapters.items.length)){e.next=8;break}if(!(this.chapters.items[t].warnings&&this.chapters.items[t].warnings.length>0)){e.next=5;break}return ut(this.$t("label.YourQuestContainsErrorsInSteps"),"error"),e.abrupt("return",!1);case 5:t++,e.next=1;break;case 8:if(!(this.editor.items&&this.quest.playersNumber&&this.editor.items.length>=this.quest.playersNumber)){e.next=18;break}return e.next=11,wi.closeInProgressRuns(this.questId);case 11:if(!(this.quest.playersNumber>1)){e.next=16;break}return e.next=14,wi.createMultiplayerRunForTesters(this.questId);case 14:if(i=e.sent,i){for(r=[],t=0;t<this.editor.items.length;t++)r.push(this.editor.items[t].name);ut(this.$t("label.HereAreTheTesters",{nameList:r.join(", ")}),"info")}case 16:e.next=20;break;case 18:return ut(this.$t("label.YouNeedAtLeastXEditorsToTest",{nb:this.quest.playersNumber}),"error"),e.abrupt("return",!1);case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeQuest:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.remove(t.questId,t.quest.version);case 2:i.$router.push("/home");case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),duplicateQuest:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.clone(this.questId,this.quest.version);case 2:t=e.sent,t&&t.data&&t.data.newId&&(i=t.data.newId,r=this,this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToOpenClonedQuest"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.$router.push("/quest/settings/"+i);case 1:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeStep:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_i.remove(i.questId,t,i.quest.version);case 2:return e.next=4,i.refreshStepsList();case 4:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createNewVersion:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.createNewVersion(t.questId);case 2:i.$router.push("/quest/builder/"+t.questId);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeChapter:function(){var e=o()(a.a.mark((function e(t){var i,r,s=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,r=0;case 2:if(!(r<this.chapters.items.length)){e.next=10;break}if(this.chapters.items[r].chapterId.toString()!==t){e.next=7;break}if(!(this.chapters.items[r].steps&&this.chapters.items[r].steps.length>0)){e.next=7;break}return ut(this.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),e.abrupt("return",!1);case 7:r++,e.next=2;break;case 10:this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_i.removeChapter(i.questId,t,i.quest.version);case 2:return r=i.chapters.items.map((function(e){return e.chapterId})).indexOf(t),i.chapters.items.splice(r,1),e.next=6,s.refreshStepsList();case 6:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),modifyChapter:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=this,r={name:"",position:0},s=0;s<this.chapters.items.length;s++)this.chapters.items[s].chapterId.toString()===t&&(r.name=this.chapters.items[s].title[this.languages.current]?this.chapters.items[s].title[this.languages.current]:"",r.position=s);this.$q.dialog({dark:!0,message:this.$t("label.ModifyTheChapter"),prompt:{model:r.name,type:"text"},cancel:!0}).onOk(function(){var e=o()(a.a.mark((function e(s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n[i.languages.current]=s,e.next=4,_i.modifyChapter({questId:i.questId,version:i.quest.version,chapterId:t,title:n});case 4:i.chapters.items[r.position].title[i.languages.current]=s;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addChapter:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var e=o()(a.a.mark((function e(r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={},s[t.languages.current]=r,e.next=4,_i.modifyChapter({questId:t.questId,version:t.quest.version,chapterId:"0",title:s});case 4:return e.next=6,i.refreshStepsList();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),modifyStep:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chapters.showNewStepPageSettings=!0,t&&t.stepId&&(i=this,setTimeout((function(){i.stepId=t.stepId,i.chapters.newStep.type=i.getStepTypeInformations(t.type),i.chapters.newStep.chapterId=t.chapterId,i.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),this.closeAllPanels(),this.chapters.showNewStepOverview=!1,this.chapters.reloadStepPlay=!1,this.moveToTop();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),playStep:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.chapters.reloadStepPlay=!1,t&&t.stepId&&(this.stepId=t.stepId,t.id=t.stepId,this.chapters.newStep.type=this.getStepTypeInformations(t.type),this.chapters.newStep.chapterId=t.chapterId,this.chapters.newStep.scrollPosition=document.documentElement.scrollTop),this.closeAllPanels(),e.next=5,_i.getById(this.stepId,this.quest.version,this.languages.current);case 5:i=e.sent,i&&i.data?(this.chapters.newStep.overviewData=i.data,this.chapters.showNewStepPageSettings=!1,this.chapters.showNewStepOverview=!0,this.hint.number=0,this.moveToTop(),r=this,setTimeout((function(){r.chapters.reloadStepPlay=!0}),300)):ut(this.$t("label.ErrorStandardMessage"),"error");case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),moveToPosition:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.scrollTo(0,t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeOverview:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.resetStepData(),this.closeAllPanels(),e.next=4,this.refreshStepsList();case 4:this.moveToPosition(this.chapters.newStep.scrollPosition),this.chapters.showNewStepOverview=!1,this.tabs.selected="steps",Je.clearAllNotifications(),this.story.active&&7===this.countSteps()&&(this.story.step=22);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1,this.hint.number=0},closeStepSettingsPage:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshStepsList();case 2:return this.moveToPosition(this.chapters.newStep.scrollPosition),this.chapters.newStep.type={},this.stepId=-1,this.chapters.showNewStepPageSettings=!1,this.tabs.selected="steps",e.next=9,this.refreshMediaSize();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addStep:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(t=this.chapters.items[0].chapterId),this.chapters.showNewStepPage=!0,this.chapters.newStep.chapterId=t,this.chapters.newStep.scrollPosition=document.documentElement.scrollTop,i=0,r=0;case 6:if(!(r<this.chapters.items.length)){e.next=14;break}if(this.chapters.items[r].chapterId.toString()!==t||!this.chapters.items[r].steps){e.next=11;break}return s=this.chapters.items[r].steps.length,s>0&&(i=this.chapters.items[r].steps[s-1].stepId),e.abrupt("break",14);case 11:r++,e.next=6;break;case 14:this.chapters.newStep.previousStepId=i;case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),insertStep:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(t=this.chapters.items[0].chapterId),this.chapters.showNewStepPage=!0,this.chapters.newStep.chapterId=t,this.chapters.newStep.previousStepId=i;case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),selectLanguage:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.languages.current,i=!1,this.quest.languages)for(r=0;r<this.quest.languages.length;r++)this.quest.languages[r].lang===t&&(i=!0);if(i){e.next=6;break}return e.next=6,Xe.addLanguage(this.questId,t);case 6:return e.next=8,this.loadQuestData();case 8:this.quest.title[t]&&""!==this.quest.title[t]||(t===this.quest.mainLanguage?this.quest.title[t]=this.$t("label.NewQuest",t):this.quest.title[t]=this.quest.title[this.quest.mainLanguage]),this.story.active&&(this.story.step=18);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeLanguage:function(){var e=o()(a.a.mark((function e(t){var i,r,s,n=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!1,this.quest.languages)for(r=0;r<this.quest.languages.length;r++)this.quest.languages[r].lang===t&&(i=!0);if(i){e.next=7;break}s=this,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.addLanguage(s.questId,t);case 2:n.quest.title[t]&&""!==n.quest.title[t]||(t===n.quest.mainLanguage?n.quest.title[t]=n.$t("label.NewQuest",t):n.quest.title[t]=n.quest.title[n.quest.mainLanguage]);case 3:case"end":return e.stop()}}),e)})))).onCancel(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.languages.current=s.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),e.next=10;break;case 7:return e.next=9,this.loadQuestData();case 9:this.quest.title[t]&&""!==this.quest.title[t]||(t===this.quest.mainLanguage?this.quest.title[t]=this.$t("label.NewQuest",t):this.quest.title[t]=this.quest.title[this.quest.mainLanguage]);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closePrivateQuest:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.closePrivate(t.questId,t.quest.version);case 2:return t.quest.status="old",e.next=5,t.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPrivateRanking:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wi.listPlayersForThisQuest(this.questId);case 2:t=e.sent,t&&t.data&&(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),this.refreshPosition());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return Ji.filter((function(i){return i.category===e&&i.enabled&&!("end-chapter"===i.code&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chapters.newStep.type=t,this.chapters.showNewStepPage=!1,this.stepId="0",this.chapters.showNewStepPageSettings=!0,this.moveToTop(),0===this.countSteps()&&this.story.active&&(this.story.step=20);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(){var e=o()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.chapters.showNewStepPageSettings=!1,"end-chapter"!==t.type){e.next=5;break}return e.next=4,this.closeOverview();case 4:return e.abrupt("return",!1);case 5:return this.chapters.showNewStepOverview=!0,this.stepId=t.id,e.next=9,_i.getById(this.stepId,this.quest.version,this.languages.current);case 9:if(i=e.sent,!i||!i.data){e.next=23;break}return this.chapters.newStep.overviewData=i.data,this.moveToTop(),r=this,setTimeout((function(){r.chapters.reloadStepPlay=!0}),300),this.story.active&&0===this.countSteps()&&(this.story.step=21),e.next=18,this.refreshMediaSize();case 18:if("use-item"!==this.chapters.newStep.overviewData.type){e.next=21;break}return e.next=21,this.fillInventory();case 21:e.next=24;break;case 23:ut(this.$t("label.ErrorStandardMessage"),"error");case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepPlayed:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepSuccess:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.canMoveNextStep=!0,this.hideHint();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepPass:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.canPass=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackStepFail:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hideHint();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackMessage:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"suggestInventory"===t&&(this.inventory.suggest=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addEditor:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xe.addEditor(this.questId,this.quest.version,this.editor.new.email);case 3:if(t=e.sent,this.$q.loading.hide(),!t||403===t.status){e.next=12;break}return e.next=8,this.listEditors();case 8:this.editor.new.email="",this.editor.new.isExisting=!0,e.next=13;break;case 12:this.editor.new.isExisting=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listEditors:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.editorsMissing=!1,e.next=3,Xe.listEditors(this.questId,this.quest.version);case 3:if(t=e.sent,t&&t.data)for(this.editor.items=t.data,i=0;i<this.editor.items.length;i++)this.editor.items[i].checked=!0;else this.warnings.editorsMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeEditor:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xe.removeEditor(this.questId,this.quest.version,t);case 3:return this.$q.loading.hide(),e.next=6,this.listEditors();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addInvitee:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xe.addInvitee(this.questId,this.quest.version,this.invitee.new.email);case 3:if(t=e.sent,this.$q.loading.hide(),!t||403===t.status){e.next=12;break}return e.next=8,this.listInvitees();case 8:this.invitee.new.email="",this.invitee.new.isExisting=!0,e.next=13;break;case 12:this.invitee.new.isExisting=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listInvitees:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.inviteeMissing=!1,e.next=3,Xe.listInvitees(this.questId,this.quest.version);case 3:if(t=e.sent,t&&t.data)for(this.invitee.items=t.data,i=0;i<this.invitee.items.length;i++)this.invitee.items[i].checked=!0;else this.warnings.inviteeMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeInvitee:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xe.removeInvitee(this.questId,this.quest.version,t);case 3:return this.$q.loading.hide(),e.next=6,this.listInvitees();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<Ji.length;t++)if(Ji[t].code===e)return"fas fa-"+Ji[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<Ji.length;t++)if(Ji[t].code===e)return Ji[t];return""},fillInventory:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.inventoryMissing=!1,this.$q.loading.show(),e.next=4,_i.listWonObjects(this.questId,this.stepId,this.quest.version);case 4:t=e.sent,t&&t.data?this.inventory.items=t.data:this.warnings.inventoryMissing=!0,this.$q.loading.hide();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInventory:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.overview.tabSelected="inventory");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectItem:function(e){"use-item"===this.chapters.newStep.overviewData.type?(this.selectedItem=e,this.closeAllPanels()):ut(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},askForHint:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(!this.hint.isOpened){e.next=8;break}this.closeAllPanels(),this.hint.number++,this.hint.number>=this.hint.label.length&&(this.hint.number=0),e.next=12;break;case 8:return e.next=10,wi.getHint(0,this.stepId,this.quest.version,this.languages.current);case 10:t=e.sent,t&&t.hint?(this.hint.label=t.hint,this.closeAllPanels(),this.hint.isOpened=!0,this.overview.tabSelected="hint"):ut(this.$t("label.ErrorStandardMessage"),"error");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&""!==this.chapters.newStep.overviewData.hint&&this.chapters.newStep.overviewData.hint.length>0},getMyGPSLocation:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),t=this,navigator.geolocation.getCurrentPosition((function(e){t.$q.loading.hide(),t.form.fields.location.lat=e.coords.latitude,t.form.fields.location.lng=e.coords.longitude}),this.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=Je.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=Je.humanReadableFileSize(this.quest.size.limit,!0,this.$t);this.storage=this.$t("label.UsedOver",{current:e,limit:t})}},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMedia();case 2:this.media.isOpened=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadMedia:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.listMedia(this.questId,this.quest.version);case 2:t=e.sent,t&&t.data&&(this.media.items=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshMediaSize:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.getSize(this.questId,this.quest.version);case 2:t=e.sent,t&&t.data&&(this.quest.size=t.data.size);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeMedia:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.removeMedia(this.questId,this.quest.version,t);case 2:if(i=e.sent,i){e.next=7;break}this.$q.dialog({message:this.$t("label.TechnicalIssue")}),e.next=9;break;case 7:return e.next=9,this.loadMedia();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshMediaSize();case 2:this.media.isOpened=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var i=new XMLHttpRequest;i.open("GET","statics/markers/all.pdf",!0),i.responseType="blob",i.onload=function(i){if(200!==this.status)return ut(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var r=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(r)}))}),(function(t){ut(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},i.send()}),(function(t){ut(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},createNewPaymentQRCode:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.createTierPayment(this.questId,this.quest.premiumPrice.manual);case 2:return e.next=4,this.listPayments();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listPayments:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.quest&&this.quest.premiumPrice&&this.quest.premiumPrice.tier)){e.next=5;break}return e.next=3,Xe.listTierPayments(this.questId);case 3:t=e.sent,this.payments=t.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadQRCode:function(e){Je.openExternalLink(this.serverUrl+"/upload/tiers/"+e+".png")},removeCode:function(){var e=o()(a.a.mark((function e(t){var i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToRemoveThisTierCode"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.removeTierPayment(i.questId,t);case 2:return e.next=4,i.listPayments();case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listReviews:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Er.list({questId:this.questId,version:this.quest.version});case 2:t=e.sent,this.reviews=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStatistics:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,Xe.getStatistics(this.questId,this.quest.version,t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate());case 3:i=e.sent,this.statistics=i.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.serverUrl+"/upload/profile/"+e:"statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],i="check_circle";return this.isEdition||"quest"!==this.quest.type?"img:":e<=this.tabs.progress?i:t},trackCallBackFunction:function(){return!1}},validations:{form:{fields:{title:{required:Bt["required"]},category:{required:Bt["required"]}}}}},us=cs,ds=(r("74f2"),Object(_e["a"])(us,Qr,Yr,!1,null,null,null)),ps=ds.exports,fs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper background-map"},[i("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[i("div",{staticClass:"desktop-only centered q-pa-md warning bg-warning"},[e._v("\n      "+e._s(e.$t("label.OnDesktopDisplayMessage"))+"\n    ")]),e._m(0),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[i("div",[i("q-input",{attrs:{id:"loginemail",outlined:"",type:"email",label:e.$t("label.YourEmail"),error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),"forgottenpassword"!==e.step?i("q-input",{attrs:{id:"loginPass",outlined:"",type:"password",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"forgottenpassword"!==e.step?i("p",{staticClass:"centered q-mt-sm q-mb-lg"},[i("a",{on:{click:function(t){return e.openPasswordForgottenPopup()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?i("div",[i("p",[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),i("q-input",{attrs:{outlined:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?i("div",[i("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),i("div",{staticClass:"text-center"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.SignIn"),loading:e.submitting}})],1),i("div",{staticClass:"centered q-mt-sm q-mb-xl"},[i("q-btn",{attrs:{flat:""},on:{click:function(t){return e.goToSubscribe()}}},[e._v(e._s(e.$t("label.Subscribe")))])],1)]),e.isHybrid?i("div",{staticClass:"q-py-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.ScanQRCodeToStartQuest")},on:{click:function(t){return e.startScanQRCode()}}})],1):e._e(),i("div",{staticClass:"q-py-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.LetsPlayWithoutAccount")},on:{click:function(t){return e.validateTerms()}}})],1),i("div",{staticClass:"centered smaller version secondary-font"},[e._v("Version "+e._s(e.version))])])]),i("q-dialog",{model:{value:e.passwordForgottenPopup,callback:function(t){e.passwordForgottenPopup=t},expression:"passwordForgottenPopup"}},[i("q-card",[i("q-card-section",{staticClass:"popup-header row items-center"},[e._v("\n        "+e._s(e.$t("label.ForgottenPassword"))+"\n        "),i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-separator"),i("q-card-section",[i("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),i("q-btn",{staticClass:"glossy full-width",attrs:{color:"primary",label:e.$t("label.Ok")},on:{click:function(t){return e.sendForgottenPasswordCode()}}})],1)],1)],1),i("q-dialog",{model:{value:e.terms.show,callback:function(t){e.$set(e.terms,"show",t)},expression:"terms.show"}},[i("div",{staticClass:"q-pa-md"},[i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-checkbox",{attrs:{dark:""},model:{value:e.terms.usage,callback:function(t){e.$set(e.terms,"usage",t)},expression:"terms.usage"}})],1),i("q-item-section",[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.terms.usageError?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])],1),i("q-item",{attrs:{dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-checkbox",{attrs:{dark:""},model:{value:e.terms.privacy,callback:function(t){e.$set(e.terms,"privacy",t)},expression:"terms.privacy"}})],1),i("q-item-section",[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.terms.privacyError?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])],1),i("div",{staticClass:"centered q-pa-md"},[i("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.playAnonymous()}}},[i("span",[e._v(e._s(e.$t("label.Confirm")))])])],1)],1)])],1)},hs=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"centered q-pt-lg q-pb-md"},[i("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],ms=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},bs={data:function(){return{step:"password",form:{email:"",password:"",newPassword:"",code:""},terms:{show:!1,usage:!1,usageError:!1,privacy:!1,privacyError:!1},showSocialLogin:{facebook:!1,google:!1},passwordForgottenPopup:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1,version:"2.1.5"}},mounted:function(){Je.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),window.cordova&&(this.showSocialLogin.facebook=!0)},methods:{formSubmit:function(){var e=o()(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$v.$touch(),this.submitting=!0,e.t0=this.step,e.next="password"===e.t0?5:"forgottenpassword"===e.t0?10:16;break;case 5:return e.next=7,this.signIn(this.form.email,this.form.password);case 7:return t=e.sent,t.status?("success"===t.status&&(window.localStorage.setItem("jwt",t.user.jwt),Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.user.jwt),i="/home",this.$route.query.hasOwnProperty("redirect")&&(i=this.$route.query.redirect),this.$router.push(i)),"failed"===t.status&&ut(this.$t("label.IncorrectLoginPleaseRetry"),"warning")):ut(this.$t("label.ErrorStandardMessage"),"error"),e.abrupt("break",16);case 10:if(this.$v.form.newPassword.$error){e.next=15;break}return e.next=13,Me.changePassword(this.form.email,this.form.newPassword,this.form.code);case 13:r=e.sent,r.status&&200===r.status?r.data&&r.data.user?(window.localStorage.setItem("jwt",r.data.user.jwt),Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.data.user.jwt),s="/home",this.$route.query.hasOwnProperty("redirect")&&(s=this.$route.query.redirect),this.$router.push(s)):ut(this.$t("label.ErrorStandardMessage"),"error"):r.data&&"You have tries too much codes"===r.data.message?ut(this.$t("label.YourAccountIsBlocked"),"warning"):ut(this.$t("label.IncorrectCodePleaseRetry"),"warning");case 15:return e.abrupt("break",16);case 16:this.submitting=!1;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),signIn:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.login(t,i);case 2:if(r=e.sent,200!==r.status){e.next=7;break}return e.abrupt("return",{status:"success",user:r.data.user});case 7:if(401!==r.status){e.next=11;break}return e.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),validateAccount:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.validateAccount(t,i);case 2:r=e.sent,r.status>=300&&r.data&&r.data.message?ut(r.data.message,"warning"):ut(this.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},fbLoginSuccess:function(e){var t=this;facebookConnectPlugin.getAccessToken((function(i){Me.checkFacebookToken(e.authResponse.userID,i,(function(e,i){if(e&&ut(t.$t("label.TechnicalIssue"),"error"),i&&("login successful"===i.message||i.data&&"login successful"===i.data.message))return t.$router.push("/home");ut(t.$t("label.TechnicalIssue"),"error")}))}))},facebookLogin:function(){var e=this;window.cordova&&facebookConnectPlugin?facebookConnectPlugin.login(["public_profile"],this.fbLoginSuccess,(function(t){console.log(t),ut(e.$t("label.TechnicalIssue"),"error")})):(window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0))},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){if(t&&t.text){var i=Je.removeUnusedUrl(t.text);e.checkCode(i)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},validateTerms:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.terms.show=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),playAnonymous:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.terms.usageError=!1,this.terms.privacyError=!1,!1!==this.terms.usage){e.next=6;break}this.terms.usageError=!0,e.next=14;break;case 6:if(!1!==this.terms.privacy){e.next=10;break}this.terms.privacyError=!0,e.next=14;break;case 10:return e.next=12,Me.playAnonymous(this.$t("label.shortLang"));case 12:t=e.sent,t&&t.data&&"ok"===t.data.status&&t.data.user?(window.localStorage.setItem("jwt",t.data.user.jwt),Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.data.user.jwt),this.$router.push("/home")):ut(this.$t("label.ErrorStandardMessage"),"error");case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkCode:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.checkLoginQRCode(t,this.$t("label.shortLang"));case 2:i=e.sent,i&&i.data&&"ok"===i.data.status&&i.data.user?(window.localStorage.setItem("jwt",i.data.user.jwt),Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(i.data.user.jwt),-1===t.indexOf("_score")?i.data.questId?this.$router.push("/quest/play/"+i.data.questId):this.$router.push("/quest/play/"+t):this.$router.push("/quest/"+t.substring(0,24)+"/end")):ut(this.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),goToSubscribe:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/user/createAccount/generic");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openPasswordForgottenPopup:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.passwordForgottenPopup=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendForgottenPasswordCode:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,Me.sendForgottenPasswordCode(this.form.email);case 3:t=e.sent,200===t.status?(this.step="forgottenpassword",this.passwordForgottenPopup=!1):ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},validations:{form:{email:{required:Bt["required"],email:Bt["email"]},newPassword:{required:Bt["required"],minLength:Object(Bt["minLength"])(8),checkPasswordComplexity:ms}}}},gs=bs,vs=Object(_e["a"])(gs,fs,hs,!1,null,null,null),ws=vs.exports,ks=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},ys=[],_s={mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("logout");case 2:window.localStorage.removeItem("jwt"),delete Ae.a.defaults.headers.common["Authorization"],this.$router.push("/user/login");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ss=_s,xs=Object(_e["a"])(Ss,ks,ys,!1,null,null,null),Cs=xs.exports,qs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg"}},[i("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToProfile()}}})],1),i("div",{staticClass:"centered"},[i("div",{staticClass:"user-card user-card-big main-profile centered relative-position"},[i("div",{staticClass:"relative-position no-overflow",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[i("div",{staticClass:"edit-bar centered"},[i("label",{on:{click:function(t){return e.$refs["uploadfile"].click()}}},[i("q-icon",{attrs:{name:"camera_alt"}})],1),i("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),""!==e.profile.form.name?i("div",[i("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n            "+e._s(e.profile.form.name)+"\n          ")]),e.profile.form.location&&(e.profile.form.location.postalCode||e.profile.form.location.country)?i("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.profile.form.location.postalCode?i("span",[e._v(e._s(e.profile.form.location.postalCode))]):e._e(),e.profile.form.location.postalCode&&e.profile.form.location.country?i("span",[e._v(", ")]):e._e(),e.profile.form.location.country?i("span",[e._v(e._s(e.profile.form.location.country))]):e._e()]):e._e()]):e._e()])]),i("div",[""===e.profile.form.name?i("div",[i("div",{staticClass:"centered subtitle5 q-mt-lg"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n        ")]),i("div",{staticClass:"centered subtitle6"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYouDesc"))+"\n        ")])]):e._e()]),i("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[i("q-input",{attrs:{dark:"",label:e.$t("label.YourName"),placeholder:"John Doe","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.YourEmail"),placeholder:"john.doe@gmail.com","bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?i("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.profile.form.password.$error,"error-message":e.$v.profile.form.password.checkPasswordComplexity?e.$v.profile.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),i("q-input",{attrs:{dark:"",label:e.$t("label.YourPresentation"),"bottom-slots":"",type:"textarea","min-rows":3},model:{value:e.profile.form.description,callback:function(t){e.$set(e.profile.form,"description",t)},expression:"profile.form.description"}}),i("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),i("q-select",{attrs:{dark:"",label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),i("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":""},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),i("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge")},on:{blur:e.$v.profile.form.age.$touch},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),i("q-input",{attrs:{dark:"",label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}),i("div",{staticClass:"q-pt-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitProfileChanges()}}}),""===e.$store.state.user.name?i("q-btn",{staticClass:"q-pt-md",attrs:{color:"primary",flat:"",label:e.$t("label.MaybeLater")},on:{click:function(t){return e.backToMap()}}}):e._e()],1)],1),e.displayPassword?e._e():i("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.ChangeYourPassword")))]),i("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.CurrentPassword"),"bottom-slots":"",error:e.$v.profile.form.oldPassword.$error,"error-message":e.$v.profile.form.oldPassword.checkPasswordComplexity?e.$v.profile.form.oldPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.oldPassword.$touch},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),i("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.NewPassword"),"bottom-slots":"",error:e.$v.profile.form.newPassword.$error,"error-message":e.$v.profile.form.newPassword.checkPasswordComplexity?e.$v.profile.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.newPassword.$touch},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),i("div",{staticClass:"q-pt-md centered"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitChangePassword()}}})],1)],1),i("div",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded"},[i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RemoveYourAccount")))]),i("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),i("q-btn",{staticClass:"q-my-md glossy",attrs:{color:"negative",label:e.$t("label.IConfirmIWantToRemoveMyAccount")},on:{click:function(t){return e.removeAccount()}}})],1),i("div",[i("div",{staticClass:"centered q-mt-xl q-mb-sm"},[i("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),i("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),i("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})])]),i("q-dialog",{model:{value:e.showHelpPopup,callback:function(t){e.showHelpPopup=t},expression:"showHelpPopup"}},[i("q-card",[i("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.HowWeUseYourData"))+"\n        "),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-separator"),i("q-card-section",{staticClass:"subtitle5"},[i("ul",[i("li",[e._v(e._s(e.$t("label.DataCountry")))]),i("li",[e._v(e._s(e.$t("label.DataZipcode")))]),i("li",[e._v(e._s(e.$t("label.DataSex")))]),i("li",[e._v(e._s(e.$t("label.DataAge")))]),i("li",[e._v(e._s(e.$t("label.DataPhone")))])])])],1)],1)],1)},Ts=[],Es=r("4c18"),As=r("cf83"),Ps={data:function(){return{profile:{form:{name:"--",description:"",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:"",oldPassword:"",newPassword:""}},position:null,countries:"fr"===this.$i18n.locale?Es:As,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:Je.buildOptionsForSelect(ls,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,showHelpPopup:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){this.profile.form={name:this.$store.state.user.name?"-"===this.$store.state.user.name?"":this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email&&-1===this.$store.state.user.email.indexOf("dummyuser")?this.$store.state.user.email:"",password:"",description:this.$store.state.user.description?this.$store.state.user.description:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language},this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{getProfileImage:function(){return this.profile.form.picture&&-1!==this.profile.form.picture.indexOf("http")?this.profile.form.picture:this.profile.form.picture?this.serverUrl+"/upload/profile/"+this.profile.form.picture:"statics/images/icon/profile-small.png"},submitProfileChanges:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.profile.form.name.$error||this.$v.profile.form.email.$error||this.$v.profile.form.password.$error&&this.displayPassword){e.next=9;break}return t={name:this.profile.form.name,email:this.profile.form.email,description:this.profile.form.description,password:this.profile.form.password,phone:this.profile.form.phone?this.profile.form.phone:"",zipCode:this.profile.form.zipCode,country:this.profile.form.country,language:this.profile.form.language,age:this.profile.form.age,sex:this.profile.form.sex},this.position&&(t.position=this.position),this.$q.loading.show(),e.next=6,Me.modifyAccount(t);case 6:i=e.sent,this.$q.loading.hide(),i.status>=300&&i.data&&i.data.message?ut(this.$t("label."+i.data.message),"warning"):this.backToProfile();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLocation:function(){var e=this;if(this.profile.form.zipCode&&""!==this.profile.form.zipCode&&this.profile.form.country&&""!==this.profile.form.country){var t=new google.maps.Geocoder;t.geocode({address:this.profile.form.zipCode+" "+this.profile.form.country},(function(t,i){e.$q.loading.hide(),"OK"===i&&t[0].geometry&&(e.position={},e.position.lat=t[0].geometry.location.lat(),e.position.lng=t[0].geometry.location.lng())}))}},submitChangePassword:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.profile.form.oldPassword.$error||this.$v.profile.form.newPassword.$error){e.next=8;break}return t={oldPassword:this.profile.form.oldPassword,newPassword:this.profile.form.newPassword},this.$q.loading.show(),e.next=5,Me.modifyAccount(t);case 5:i=e.sent,this.$q.loading.hide(),i.status>=300&&i.data&&i.data.message?ut(this.$t("label."+i.data.message),"warning"):this.backToProfile();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToProfile:function(){""===this.profile.form.name?this.$router.push("/home"):this.$router.push("/profile/"+this.$store.state.user.id)},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},helpFields:function(){this.showHelpPopup=!0},uploadImage:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return r=new FormData,r.append("image",i[0]),this.$q.loading.show(),e.next=8,Me.uploadAccountPicture(r);case 8:s=e.sent,s&&s.data&&(s.data.file?this.profile.form.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error")),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),disconnect:function(){this.$router.push("/user/logout")},removeAccount:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToRemoveYourAccount"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.removeAccount();case 2:if(i=e.sent,!i){e.next=9;break}return ut(t.$t("label.YourAccountIsRemoved"),"info"),e.next=7,t.disconnect();case 7:e.next=10;break;case 9:ut(t.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},validations:{profile:{form:{email:{required:Bt["required"],email:Bt["email"]},name:{required:Bt["required"],minLength:Object(Bt["minLength"])(2)},country:{required:Bt["required"]},zipCode:{required:Bt["required"]},password:{required:Bt["required"],minLength:Object(Bt["minLength"])(8),checkPasswordComplexity:ms},oldPassword:{required:Bt["required"],minLength:Object(Bt["minLength"])(8),checkPasswordComplexity:ms},newPassword:{required:Bt["required"],minLength:Object(Bt["minLength"])(8),checkPasswordComplexity:ms},age:{required:Bt["required"]}}}}},Ms=Ps,Is=Object(_e["a"])(Ms,qs,Ts,!1,null,null,null),Rs=Is.exports,Os=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg"}},[i("div",{style:"padding-top: "+("level"===e.tab?200:"ranking"===e.tab?160:110)+"px;"},[i("transition",{attrs:{name:"slideInTop"}},["level"===e.tab?i("div",e._l(e.levels,(function(t){return i("div",{key:t.number,staticClass:"q-ma-md level-to-reach",class:{"level-not-reached":e.$store.state.user.points<t.minPoints},style:"background-image: url(statics/images/icon/level"+t.number+".svg)"},[e.$store.state.user.points<t.minPoints?i("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.PointsToReachLevel",{score:t.minPoints})))]):e._e(),e.$store.state.user.points>=t.minPoints?i("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.LevelReached")))]):e._e()])})),0):e._e()]),i("transition",{attrs:{name:"slideInTop"}},["ranking"===e.tab?i("div",[e._l(e.ranking,(function(t,r){return"quest"!==e.range&&e.ranking&&e.ranking.length>0?i("div",{key:r,staticClass:"q-pa-md rank-box"},[i("div",[i("userCard",{attrs:{user:t,size:"medium"},on:{click:e.openProfile}})],1),i("div",{staticClass:"full-width"},["-"!==t.name?i("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?i("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?i("div",{staticClass:"subtitle6"},[t.location.postalCode?i("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?i("span",[e._v(", ")]):e._e(),t.location.country?i("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),i("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.points)+"\n                ")]),i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(r+1)+"\n                ")])])])]):e._e()})),"quest"===e.range&&e.ranking&&e.ranking.length>0?i("div",{staticClass:"subtitle3 q-pa-md"},[e._v("\n            "+e._s(e.ranking[0].questData.title.fr)+"\n          ")]):e._e(),e._l(e.ranking,(function(t,r){return"quest"===e.range&&e.ranking&&e.ranking.length>0?i("div",{key:r,staticClass:"q-pa-md rank-box"},[i("div",[i("userCard",{attrs:{user:t.userData,size:"medium"},on:{click:e.openProfile}})],1),i("div",{staticClass:"full-width"},[i("div",{staticClass:"subtitle5"},[e._v(e._s(t.userData.name))]),t.userData.location&&(t.userData.location.country||t.userData.location.postalCode)?i("div",{staticClass:"subtitle6"},[t.userData.location.postalCode?i("span",[e._v(e._s(t.userData.location.postalCode))]):e._e(),t.userData.location.postalCode&&t.userData.location.country?i("span",[e._v(", ")]):e._e(),t.userData.location.country?i("span",[e._v(e._s(t.userData.location.country))]):e._e()]):e._e(),i("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.stars)+"\n                ")]),i("div",{staticClass:"col-6 centered"},[i("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(r+1)+"\n                ")])])])]):e._e()})),e.ranking&&0===e.ranking.length?i("div",{staticClass:"centered"},[e._v("\n            "+e._s(e.$t("label.NoRanking"))+"\n          ")]):e._e()],2):e._e()]),i("transition",{attrs:{name:"slideInTop"}},["news"===e.tab?i("div",[i("q-infinite-scroll",{on:{load:e.loadNews}},[i("q-list",[e._l(e.news.items,(function(t,r){return i("q-item",{key:t._id},[i("q-item-section",{staticClass:"q-pl-md",attrs:{avatar:""}},[i("userCard",{attrs:{user:t.data,size:"medium"},on:{click:e.openProfile}})],1),i("q-item-section",{staticClass:"force-justify-start"},[t.data&&t.data.userId?i("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(t.data.name))]):e._e(),i("q-item-label",{staticClass:"grey-round-box subtitle6 q-pa-sm"},["standard"===t.type?i("div",[e._v("\n                      "+e._s(t.title)+"\n                    ")]):e._e(),"standard"!==t.type?i("div",[i("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?i("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),i("div",{staticClass:"q-pt-sm"},[e._v("\n                      "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                      "),"friends"===t.destination?i("span",[e._v("\n                        - \n                        "),e.isLiked(t)?e._e():i("a",{on:{click:function(t){return e.like(r)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?i("a",{on:{click:function(t){return e.unlike(r)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?i("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])])],1)],1)})),0===e.news.items.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),i("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[i("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e()])],1),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-4",class:{"tab-unselected":"level"!==e.tab},on:{click:function(t){return e.selectTab("level")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Level"))+"\n          ")])]),i("div",{staticClass:"col-4",class:{"tab-unselected":"ranking"!==e.tab},on:{click:function(t){return e.selectTab("ranking")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Ranking"))+"\n          ")])]),i("div",{staticClass:"col-4",class:{"tab-unselected":"news"!==e.tab},on:{click:function(t){return e.selectTab("news")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.News"))+"\n          ")])])]),"level"===e.tab?i("div",[i("div",{staticClass:"relative-position progress-box"},[i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),i("div",{staticClass:"value"},[e._v("\n              "+e._s(Math.floor(100*e.level.progress))+"%\n            ")])]),i("div",{staticClass:"score subtitle6"},[e._v("\n            "+e._s(e.$t("label.YouHaveReachAScore",{score:e.$store.state.user.points}))+"\n          ")]),i("div",{staticClass:"rank-level"},[i("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])])]):e._e(),"ranking"===e.tab?i("div",[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-3",class:{"tab-unselected":"world"!==e.range},on:{click:function(t){return e.selectRange("world")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.World"))+"\n            ")])]),i("div",{staticClass:"col-3",class:{"tab-unselected":"country"!==e.range},on:{click:function(t){return e.selectRange("country")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCountry"))+"\n            ")])]),i("div",{staticClass:"col-3",class:{"tab-unselected":"city"!==e.range},on:{click:function(t){return e.selectRange("city")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCity"))+"\n            ")])]),i("div",{staticClass:"col-3",class:{"tab-unselected":"friends"!==e.range},on:{click:function(t){return e.selectRange("friends")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.Friends"))+"\n            ")])])])]):e._e()],1)])])},$s=[],Fs={components:{userCard:ei},data:function(){return{tab:"level",range:"world",news:{limit:20,skip:0,items:[]},levels:[{number:9,minPoints:3e3,maxPoints:15e3},{number:8,minPoints:1500,maxPoints:3e3},{number:7,minPoints:800,maxPoints:1500},{number:6,minPoints:400,maxPoints:800},{number:5,minPoints:200,maxPoints:400},{number:4,minPoints:100,maxPoints:200},{number:3,minPoints:30,maxPoints:100},{number:2,minPoints:15,maxPoints:30},{number:1,minPoints:0,maxPoints:15}],ranking:null,level:{progress:.04},serverUrl:"https://api.graaly.com"}},mounted:function(){this.$store.state.user.points||(this.$store.state.user.points=0),this.selectTab(this.$route.params.type)},methods:{selectTab:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.tab=t,"level"===this.tab&&(this.range=null,this.computeProgression()),"ranking"!==this.tab){e.next=10;break}if(24!==this.$route.params.subtype.length){e.next=8;break}return e.next=6,this.selectRange(this.$route.params.subtype);case 6:e.next=10;break;case 8:return e.next=10,this.selectRange();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),selectRange:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t||(t="world"),this.range=t,e.next=4,this.getRanking(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openProfile:function(e){this.$router.push("/profile/"+e)},backToTheMap:function(){this.$router.back()},computeProgression:function(){this.level=ai(this.$store.state.user.points)},loadNews:function(e,t){var i=this;Ze.listNews(this.news.limit,this.news.skip,(function(e,r){i.news.skip+=i.news.limit,e&&t(e),r&&r.data&&r.data.length>0&&(i.news.items=i.news.items.concat(r.data),t())}))},like:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),this.news.items[t].likes.push({userId:this.$store.state.user._id,date:new Date}),e.next=4,Ze.likeNews(this.news.items[t]._id);case 4:this.$q.loading.hide();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),unlike:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.$q.loading.show(),i=0;i<this.news.items[t].likes.length;i++)this.news.items[t].likes[i].userId===this.$store.state.user._id&&this.news.items[t].likes.splice(i,1);return e.next=4,Ze.unlikeNews(this.news.items[t]._id);case 4:this.$q.loading.hide();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},getRanking:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),"world"!==t&&"country"!==t&&"city"!==t&&"friends"!==t){e.next=7;break}return e.next=4,Ze.getRangeRanking(t);case 4:i=e.sent,e.next=11;break;case 7:return e.next=9,wi.getRankingForAQuest(t);case 9:i=e.sent,this.range="quest";case 11:i&&i.data?i.data.users?this.ranking=i.data.users:this.ranking=i.data:this.ranking=[],this.$q.loading.hide();case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Ns=Fs,Ds=Object(_e["a"])(Ns,Os,$s,!1,null,null,null),Ls=Ds.exports,zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[i("div",{staticStyle:{"margin-top":"120px"}},["played"===e.tab?i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadPlayed}},[i("questsList",{attrs:{format:"big",quests:e.quests.played}})],1):e._e(),"created"===e.tab&&e.$route.params.id!==e.$store.state.user.id?i("div",[i("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),"created"===e.tab&&e.$route.params.id===e.$store.state.user.id?i("div",[e.quests.built&&e.quests.built.rejected&&e.quests.built.rejected.length>0?i("div",[i("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourRejectedQuests")))]),i("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.rejected}})],1):e._e(),e.quests.built&&e.quests.built.tovalidate&&e.quests.built.tovalidate.length>0?i("div",[i("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourUnderValidationQuests")))]),i("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.tovalidate}})],1):e._e(),e.quests.built&&e.quests.built.draft?i("div",[i("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourDraftQuests")))]),i("questsList",{attrs:{format:"big",color:"red",add:!0,quests:e.quests.built.draft}})],1):e._e(),e.quests.built&&e.quests.built.published&&e.quests.built.published.length>0?i("div",[i("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourPublishedQuests")))]),i("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.published}})],1):e._e()]):e._e(),"played"===e.tab&&e.quests.played&&0===e.quests.played.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestPlayed"))+"\n      ")]):e._e(),"created"===e.tab&&e.quests.built&&0===e.quests.built.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e()],1),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6",class:{"tab-unselected":"played"!==e.tab},on:{click:function(t){return e.selectTab("played")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsSuccessful"))+"\n          ")])]),i("div",{staticClass:"col-6",class:{"tab-unselected":"created"!==e.tab},on:{click:function(t){return e.selectTab("created")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsCreated"))+"\n          ")])])])],1)])])},js=[],Hs={components:{questsList:Dt},data:function(){return{quests:{played:null,built:null},skip:0,limit:12,tab:"played",serverUrl:"https://api.graaly.com"}},mounted:function(){this.selectTab(this.$route.params.type)},methods:{loadPlayed:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this,Xe.ListPlayedByAUserSync(this.$route.params.id,null,this.skip,(function(e,t){if(r.skip+=r.limit,e&&i(e),t&&t.data&&t.data.length>0){r.quests.played=[];for(var s=0;s<t.data.length;s++)r.quests.played.push({questId:t.data[s].questId,picture:t.data[s].questData.picture,title:t.data[s].questData.title,location:{town:t.data[s].questData.town},playStatus:t.data[s].status&&""!==t.data[s].status?t.data[s].status:"finished",points:t.data[s].stars});i()}}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),loadCreated:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t||(t=this.$store.state.user.id),e.next=3,Xe.ListCreatedByAUser(t);case 3:if(i=e.sent,t===this.$store.state.user.id&&(this.quests.built={rejected:[],tovalidate:[],draft:[],published:[]}),i&&i.data){if(i.data.length>0)if(this.quests.createdNb=i.data.length,t===this.$store.state.user.id)for(r=0;r<i.data.length;r++)s=i.data[r],"published"===s.status?this.quests.built["published"].push(s):"rejected"===s.status?this.quests.built["rejected"].push(s):"tovalidate"===s.status?this.quests.built["tovalidate"].push(s):this.quests.built["draft"].push(s);else this.quests.built=i.data}else this.quests.built=[];case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),selectTab:function(e){this.tab=e,this.skip=0,"created"===e&&this.loadCreated(this.$route.params.id)},backToTheMap:function(){this.$router.back()}}},Bs=Hs,Us=Object(_e["a"])(Bs,zs,js,!1,null,null,null),Qs=Us.exports,Ys=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[i("div",{staticStyle:{"margin-top":"120px"}},["follow"===e.tab?i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadFriends}},[i("usersList",{attrs:{format:"list",add:e.$store.state.user.id===e.$route.params.id,users:e.users},on:{refresh:e.reloadFriends}})],1):e._e(),"suggestion"===e.tab&&null!==e.user.position?i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadSuggestions}},[i("usersList",{attrs:{format:"list",add:!1,users:e.suggestions}})],1):e._e(),"suggestion"===e.tab&&null===e.user.position?i("div",[e._v("\n        "+e._s(e.$t("label.WeNeedYourPositionForThisFeature"))+"\n      ")]):e._e()],1),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.$route.params.id?i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6",class:{"tab-unselected":"follow"!==e.tab},on:{click:function(t){return e.selectTab("follow")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.YouFollowThem"))+"\n          ")])]),i("div",{staticClass:"col-6",class:{"tab-unselected":"suggestion"!==e.tab},on:{click:function(t){return e.selectTab("suggestion")}}},[i("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Suggestions"))+"\n          ")])])]):e._e(),e.$store.state.user.id!==e.$route.params.id?i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n          "+e._s(e.$t("label.FollowedPeople"))+"\n        ")])]):e._e()],1)]),i("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},Vs=[],Ws={components:{usersList:si,geolocation:nt},data:function(){return{users:null,user:{position:null},suggestions:null,suggestionType:"followers",skip:0,limit:12,tab:"follow",serverUrl:"https://api.graaly.com"}},mounted:function(){},methods:{reloadFriends:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.skip=0,e.next=3,this.loadFriends(0,(function(){}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadFriends:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this,Ze.listFriendsSync(0,this.skip,this.limit,(function(e,t){null===r.users&&(r.users=[]),e&&i(e),t&&t.data&&t.data.length>0&&(r.skip+=r.limit,r.users=r.users.concat(t.data),i())}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),loadSuggestions:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this,"near"===this.suggestionType?Ze.listSuggestionsSync({lng:this.user.position.longitude,lat:this.user.position.latitude},this.limit,this.skip,(function(e,t){r.skip+=r.limit,null===r.suggestions&&(r.suggestions=[]),e&&i(e),t&&t.data&&t.data.length>0&&(r.suggestions=r.suggestions.concat(t.data),i())})):Ze.listFollowersSync(this.limit,this.skip,(function(e,s){null===r.suggestions&&(r.suggestions=[]),e&&i(e),s&&s.data&&s.data.length>0&&(r.skip+=s.data.length,r.suggestions=r.suggestions.concat(s.data),i()),s&&s.data&&s.data.length>0&&!(s.data.length<r.limit)||(r.suggestionType="near",r.loadSuggestions(t,i))}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),onLocationSuccess:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$set(this.user,"position",t.coords);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onLocationError:function(e){e&&(this.user.position=null)},selectTab:function(e){this.tab=e,this.skip=0,"suggestion"===e&&null===this.suggestions&&this.loadSuggestions(0,(function(){}))},backToTheMap:function(){this.$router.back()}}},Gs=Ws,Ks=Object(_e["a"])(Gs,Ys,Vs,!1,null,null,null),Js=Ks.exports,Xs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg"}},[i("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n      "+e._s(e.$t("label."+(e.$store.state.user.id===e.$route.params.id?"YourBadges":"Badges")))+"\n    ")]),i("badgesList",{attrs:{format:e.$store.state.user.id===e.$route.params.id?"bytown":"list",badges:e.badges}}),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1)],1)])},Zs=[],ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pl-md"},[e.badges?e._e():i("div",{staticClass:"badge relative-position"},[i("div",{staticClass:"centered q-pt-lg"},[i("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.badges&&0===e.badges.length?i("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):e._e(),"scroll"===e.format&&e.badges&&e.badges.length>0?i("div",{staticClass:"horizontal-scroll-wrapper badges-horizontal-scroll-wrapper"},e._l(e.badges,(function(t){return i("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),i("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"list"===e.format&&e.badges&&e.badges.length>0?i("div",{staticClass:"row justify-around"},e._l(e.badges,(function(t){return i("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),i("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"bytown"===e.format&&e.badges&&e.badges.length>0?i("div",[e._l(e.badges,(function(t,r){return i("div",{key:r},[i("div",{staticClass:"subtitle4 q-pb-md"},[e._v(e._s(t.city))]),i("div",{staticClass:"row justify-around"},e._l(t.rewards,(function(t,r){return i("div",{key:r,staticClass:"badge relative-position q-mr-md",on:{click:function(i){return e.openQuest(t.questId)}}},[i("img",{class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}}),t.won?i("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(t.title)+"\n          ")]):e._e(),t.won?e._e():i("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(e.$t("label.NotWon"))+"\n          ")])])})),0)])})),e._v("\n    "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n  ")],2):e._e()])},ta=[],ia={props:["badges","format"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{openQuest:function(e){this.$router.push("/quest/play/"+e)}}},ra=ia,sa=Object(_e["a"])(ra,ea,ta,!1,null,null,null),aa=sa.exports,na={components:{badgesList:aa},data:function(){return{badges:null,serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadBadges()},methods:{loadBadges:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.getRewards(this.$route.params.id,"all");case 2:t=e.sent,t&&t.data&&(this.badges=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToTheMap:function(){this.$router.back()}}},oa=na,la=Object(_e["a"])(oa,Xs,Zs,!1,null,null,null),ca=la.exports,ua=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg"}},[i("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.userId?i("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"settings"},on:{click:function(t){return e.updateProfile()}}}):e._e()],1),i("div",{staticClass:"centered"},[i("div",{staticClass:"user-card user-card-big main-profile relative-position"},[i("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?i("div",{staticClass:"profile-item-creator"},[i("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?i("div",{staticClass:"profile-item-level"},[i("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()]),i("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e.user.location&&(e.user.location.postalCode||e.user.location.country)?i("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.user.location.postalCode?i("span",[e._v(e._s(e.user.location.postalCode))]):e._e(),e.user.location.postalCode&&e.user.location.country?i("span",[e._v(", ")]):e._e(),e.user.location.country?i("span",[e._v(e._s(e.user.location.country))]):e._e()]):e._e()])]),e.user.description?i("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n      "+e._s(e.user.description)+"\n    ")]):e._e(),e.$store.state.user.id!==e.userId?i("div",{staticClass:"centered q-pa-md"},[e.user.status&&"friend"===e.user.status?e._e():i("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.user.status&&"friend"===e.user.status?i("div",{staticClass:"centered"},[i("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n          "+e._s(e.$t("label.Followed"))+"\n        ")]),i("div",{staticClass:"q-pt-sm"},[i("a",{on:{click:e.removeFriend}},[e._v(e._s(e.$t("label.DoNotFollowAnymore")))])])],1):e._e()],1):e._e(),i("div",[e.warnings.listCreatedQuestsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]),e.$store.state.user.id===e.userId?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),i("questsList",{attrs:{format:"small",color:"red",add:!0,quests:e.quests.built}})],1):e._e(),e.$store.state.user.id!==e.userId&&e.quests&&e.quests.built&&e.quests.built.length>0?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),i("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),null===e.badges||e.badges.length>0?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.Badges"),type:"badge"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreBadges}}),i("badgesList",{attrs:{format:"scroll",badges:e.badges}})],1):e._e(),null===e.quests.played||e.quests.played.length>0?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.SolvedQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPlayed}}),i("questsList",{attrs:{format:"small",quests:e.quests.played}})],1):e._e(),null===e.friends.list||e.friends.list.length>0||e.$store.state.user.id===e.userId?i("div",[i("titleBar",{attrs:{title:{text:e.$t("label.YouFollowThem"),type:"friend"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllFriends}}),i("usersList",{attrs:{format:"scroll",add:e.$store.state.user.id===e.userId,users:e.friends.list},on:{refresh:e.loadFriends}})],1):e._e(),e.$store.state.user.id===e.userId?i("div",[i("div",{staticClass:"centered q-mt-xl q-mb-sm"},[i("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),i("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),i("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})]):e._e()])])},da=[],pa={components:{titleBar:qt,questsList:Dt,usersList:si,badgesList:aa},data:function(){return{user:{position:null,proposeAQuest:!0},userId:null,friends:{list:null,show:!1},quests:{played:null,built:null,createdNb:0},badges:null,warnings:{listCreatedQuestsMissing:!1,listFriendsMissing:!1},serverUrl:"https://api.graaly.com"}},mounted:function(){"me"===this.$route.params.id?this.userId=this.$store.state.user.id:this.userId=this.$route.params.id,this.getProfile(),this.listCreatedQuests(),this.listPlayedQuests(),this.loadFriends(),this.loadBadges()},methods:{getProfile:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.userId!==this.$store.state.user.id){e.next=5;break}this.user={name:this.$store.state.user.name,email:this.$store.state.user.email,description:this.$store.state.user.description,phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture,zipCode:this.$store.state.user.location.postalCode,country:this.$store.state.user.location.country,language:this.$store.state.user.language,statistics:this.$store.state.user.statistics,level:this.$store.state.user.level},"-"===this.user.name&&this.updateProfile(),e.next=9;break;case 5:return e.next=7,Ze.getFriend(this.userId);case 7:t=e.sent,t&&t.data&&(this.user=t.data);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listCreatedQuests:function(){var e=o()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.listCreatedQuestsMissing=!1,e.next=3,Xe.ListCreatedByAUser(this.userId);case 3:if(i=e.sent,this.quests.built=[],i&&i.data){if(i.data.length>0)for(this.quests.createdNb=i.data.length,r=[],this.quests.built=[],s=0;s<i.data.length;s++)-1===r.indexOf(i.data[s].questId)&&(this.quests.built.push(i.data[s]),r.push(i.data[s].questId))}else this.warnings.listCreatedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listPlayedQuests:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.ListPlayedByAUser(this.userId);case 2:t=e.sent,t&&t.data&&(this.quests.played=this.formatRunResults(t.data));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatRunResults:function(e){for(var t=[],i=0;i<e.length;i++)t.push({questId:e[i].questId,picture:e[i].questData.picture,title:e[i].questData.title,location:{town:e[i].questData.town},playStatus:e[i].status?e[i].status:"succeeded",points:e[i].stars});return t},loadFriends:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.listFriendsMissing=!1,e.next=3,Ze.listFriends(this.userId,0,10);case 3:t=e.sent,t&&t.data?this.friends.list=t.data:this.warnings.listFriendsMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadBadges:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.getRewards(this.userId,"won");case 2:t=e.sent,t&&t.data&&(this.badges=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadOrganization:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$store.state.user.organizationId){e.next=5;break}return e.next=3,Ze.getOrganization();case 3:t=e.sent,t&&(this.user.organization=t.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),follow:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("-"!==this.$store.state.user.name){e.next=4;break}this.updateProfile(),e.next=8;break;case 4:return e.next=6,Ze.addFriend(this.userId);case 6:t=e.sent,t?(t.data&&t.data.hasOwnProperty("status")&&"invitationsent"===t.data.status?ut(this.$t("label.InvitationSent"),"success"):ut(this.$t("label.FriendsAdded"),"success"),l["a"].set(this.user,"status","friend")):ut(this.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),readMoreQuestPublished:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/user/"+this.userId+"/quests/created");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),readMoreQuestPlayed:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/user/"+this.userId+"/quests/played");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),readMoreBadges:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/user/"+this.userId+"/badges");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToTheMap:function(){this.userId===this.$store.state.user.id?this.$router.push("/home"):this.$router.back()},readMoreAllFriends:function(){this.$router.push("/user/"+this.userId+"/friends")},getProfileImage:function(){return this.user.picture&&-1!==this.user.picture.indexOf("http")?this.user.picture:this.user.picture?this.serverUrl+"/upload/profile/"+this.user.picture:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")},updateProfile:function(){this.$router.push("/user/updateprofile")},disconnect:function(){this.$router.push("/user/logout")},removeFriend:function(){var e=o()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.userId,this.$q.dialog({dark:!0,message:this.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.removeFriend(t);case 2:l["a"].set(i.user,"status","normal");case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},fa=pa,ha=Object(_e["a"])(fa,ua,da,!1,null,null,null),ma=ha.exports,ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scroll background-dark"},[i("div",{attrs:{id:"teaser q-mb-lg"}},[i("div",{style:"padding-top: "+("quest"===e.type?"302":"258")+"px;"},["quest"===e.type&&e.results.quests&&e.results.quests.length>0?i("div",[i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherQuests}},[i("questsList",{attrs:{format:"big",quests:e.results.quests}})],1)],1):e._e(),"designer"===e.type&&e.results.designers&&e.results.designers.length>0?i("div",[i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[i("usersList",{attrs:{format:"list",users:e.results.designers}})],1)],1):e._e(),"player"===e.type&&e.results.players&&e.results.players.length>0?i("div",[i("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[i("usersList",{attrs:{format:"list",users:e.results.players}})],1)],1):e._e(),"quest"===e.type&&e.results.quests&&0===e.results.quests.length?i("div",{staticClass:"centered q-pa-md",nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[i("q-icon",{attrs:{name:"explore",size:"2rem"}}),e._v("\n        "+e._s(e.$t("label.NoQuestForThisSearch"))+"\n        "),i("div",[i("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1):e._e(),"designer"===e.type&&e.results.designers&&0===e.results.designers.length?i("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoDesignerForThisSearch"))+"\n      ")]):e._e(),"player"===e.type&&e.results.players&&0===e.results.players.length?i("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisSearch"))+"\n      ")]):e._e()]),i("q-scroll-observer",{on:{scroll:e.onScroll}}),i("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[i("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-4",class:{"box-unselected":"quest"!==e.type},on:{click:function(t){return e.selectType("quest")}}},[e.scrollInfo.position<20?i("div",{staticClass:"search-box-top search-quest-box-top"},[i("img",{attrs:{src:"statics/images/icon/key-big.svg"}})]):e._e(),i("div",{staticClass:"search-box-bottom search-quest-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.EscapeGame"))+"\n          ")])]),i("div",{staticClass:"col-4",class:{"box-unselected":"designer"!==e.type},on:{click:function(t){return e.selectType("designer")}}},[e.scrollInfo.position<20?i("div",{staticClass:"search-box-top search-creator-box-top"},[i("img",{attrs:{src:"statics/images/icon/puzzle-big.svg"}})]):e._e(),i("div",{staticClass:"search-box-bottom search-creator-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Designers"))+"\n          ")])]),i("div",{staticClass:"col-4",class:{"box-unselected":"player"!==e.type},on:{click:function(t){return e.selectType("player")}}},[e.scrollInfo.position<20?i("div",{staticClass:"search-box-top search-user-box-top"},[i("img",{attrs:{src:"statics/images/icon/user-big.svg"}})]):e._e(),i("div",{staticClass:"search-box-bottom search-user-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Players"))+"\n          ")])])]),"quest"===e.type?i("div",[i("div",{staticClass:"row q-pa-sm"},[i("div",{staticClass:"col-6",class:{"tab-unselected":"around"!==e.subtype},on:{click:function(t){return e.selectSubtype("around")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.AroundYou"))+"\n            ")])]),i("div",{staticClass:"col-6",class:{"tab-unselected":"friends"!==e.subtype},on:{click:function(t){return e.selectSubtype("friends")}}},[i("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.FriendsQuests"))+"\n            ")])])])]):e._e(),i("div",[i("q-input",{staticClass:"q-px-md arial",attrs:{dark:"",debounce:"500",placeholder:e.$t("label.Search")},on:{input:function(t){return e.find()}},scopedSlots:e._u([""!==e.search.text?{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"close"}})]},proxy:!0}:null],null,!0),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1)],1)],1),i("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},ga=[],va=(r("386d"),{components:{geolocation:nt,questsList:Dt,usersList:si},data:function(){return{type:"quest",subtype:null,results:{quests:null,designers:null,players:null},search:{text:"",limit:10,skip:0},user:{position:null},scrollInfo:{},findQuestWhenLocationIsKnown:!0,serverUrl:"https://api.graaly.com"}},mounted:function(){this.$route.params.subtype&&(this.subtype=this.$route.params.subtype),this.$route.params.type&&(this.type=this.$route.params.type),"around"!==this.subtype&&this.find()},methods:{selectType:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.type=t,this.subtype="none",e.next=4,this.find();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),selectSubtype:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.subtype=t,this.search.text="",this.search.skip=0,e.next=5,this.find();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),find:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("quest"!==this.type){e.next=5;break}return e.next=3,this.findQuests();case 3:e.next=14;break;case 5:if("player"!==this.type){e.next=11;break}return this.search.skip=0,e.next=9,this.findUser("player");case 9:e.next=14;break;case 11:return this.search.skip=0,e.next=14,this.findUser("designer");case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),findUser:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.search.text.length>3)){e.next=8;break}return this.subtype="keyword",this.$q.loading.show(),e.next=6,Ze.find(t,this.search.text);case 6:i=e.sent,i&&i.data?"player"===t?this.results.players=i.data:this.results.designers=i.data:this.displayNetworkIssueMessage();case 8:this.$q.loading.hide(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),this.$q.loading.hide();case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}(),loadOtherUsers:function(e,t){if(this.search.skip>=10){var i=this;Ze.find(this.type,this.search.text,this.search.skip,(function(e,r){i.search.skip+=i.search.limit,e&&t(e),r&&r.data&&r.data.length>0&&("player"===type?i.results.players=i.results.players.concat(r.data):i.results.designers=i.results.designers.concat(r.data),t())}))}},findQuests:function(){var e=o()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!("keyword"!==this.subtype||this.search.text.length>3)){e.next=22;break}if(this.search.text.length>3&&(this.subtype="keyword"),this.$q.loading.show(),t=this.user.position,"keyword"!==this.subtype){e.next=11;break}return e.next=8,Xe.find(this.search.text,t,0,10);case 8:i=e.sent,e.next=21;break;case 11:if("around"!==this.subtype){e.next=17;break}return e.next=14,Xe.listNearest(t,0);case 14:i=e.sent,e.next=21;break;case 17:if("friends"!==this.subtype){e.next=21;break}return e.next=20,Xe.listFriendQuests();case 20:i=e.sent;case 21:i&&i.data?("friends"===this.subtype?this.results.quests=this.formatRunResults(i.data):this.results.quests=i.data,this.search.skip=i.data.length,this.user.position&&(this.results.quests=this.results.quests.map((function(e){var i=6378.137,r=e.location.coordinates[1]*Math.PI/180-t.latitude*Math.PI/180,s=e.location.coordinates[0]*Math.PI/180-t.longitude*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return e.distance=Math.floor(i*n),e})))):this.displayNetworkIssueMessage();case 22:this.$q.loading.hide(),e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](0),console.log(e.t0),this.$q.loading.hide();case 29:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(){return e.apply(this,arguments)}return t}(),loadOtherQuests:function(e,t){if(this.user.position&&this.search.skip>=10){var i=this;"around"===this.subtype?Xe.listNearestSync(this.user.position,null,this.search.skip,(function(e,r){i.search.skip+=i.search.limit,e&&t(e),r&&r.data&&r.data.length>0&&(i.results.quests=i.results.quests.concat(r.data),t())})):"friends"===this.subtype?Xe.listFriendQuestsync(null,this.search.skip,(function(e,r){i.search.skip+=i.search.limit,e&&t(e),r&&r.data&&r.data.length>0&&(i.results.quests=i.results.quests.concat(this.formatRunResults(r.data)),t())})):Xe.findSync(this.search.text,this.user.position,null,this.search.skip,(function(e,r){i.search.skip+=i.search.limit,e&&t(e),r&&r.data&&r.data.length>0&&(i.results.quests=i.results.quests.concat(r.data),t())}))}},formatRunResults:function(e){for(var t=[],i=0;i<e.length;i++)t.push({questId:e[i].questId,picture:e[i].questData.picture,title:e[i].questData.title,location:{town:e[i].questData.town},playStatus:e[i].status?e[i].status:"succeeded",points:e[i].stars});return t},displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},onLocationSuccess:function(){var e=o()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$set(this.user,"position",t.coords),!this.findQuestWhenLocationIsKnown){e.next=5;break}return this.findQuestWhenLocationIsKnown=!1,e.next=5,this.find();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onLocationError:function(e){e&&(this.user.position=null)},onScroll:function(e){this.scrollInfo=e},backToTheMap:function(){this.$router.back()}}}),wa=va,ka=Object(_e["a"])(wa,ba,ga,!1,null,null,null),ya=ka.exports,_a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"page-content top-padding-middle"},[i("div",{staticClass:"background-dark q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){return e.$router.push("/home")}}},[i("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),i("div",{staticClass:"title2 centered"},[e._v("Administration")])]),i("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[i("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Validation",default:""}}),i("q-tab",{attrs:{name:"rejected",icon:"sentiment_very_dissatisfied",label:"Rejected"}}),i("q-tab",{attrs:{name:"earnings",icon:"price",label:"Earnings"}}),i("q-tab",{attrs:{name:"statistics",icon:"stats",label:"Statistics"}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[i("q-tab-panel",{attrs:{name:"validation"}},[i("q-list",{attrs:{highlight:""}},[e._l(e.questsToValidate.items,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""},nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-avatar",[t.thumb?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",{nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"unpublished"==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e(),"tovalidate"===t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                UserId : "+e._s(t.authorUserId)),i("br"),e._v("\n                access : "+e._s(t.access)),i("br"),e._v("\n                "+e._s(t.isPremium?"premium":"individual")+"\n              ")]):e._e()],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"check"},on:{click:function(i){return e.validate(t.questId,t.version)}}})],1)],1)})),0===e.questsToValidate.items.length?i("q-item",[i("q-item-label",[e._v("No quest to validate")])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"rejected"}},[i("q-list",{attrs:{highlight:""}},[e._l(e.questsRejected.items,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.thumb?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"published"!==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)})),0===e.questsRejected.items.length?i("q-item",[i("q-item-label",[e._v("No quest rejected")])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"earnings"}},[e._v("\n        Eearnings of games:\n        "),i("q-list",{attrs:{highlight:""}},[e._l(e.earnings.items,(function(t){return i("q-item",{key:t.questId},[i("q-item-section",[t.title.fr?i("q-item-label",[e._v("\n                "+e._s(t.title.fr)+"\n              ")]):e._e(),!t.title.fr&&t.title.en?i("q-item-label",[e._v("\n                "+e._s(t.title.en)+"\n              ")]):e._e(),i("q-item-label",{attrs:{caption:""}},[e._v("\n                revenues:"+e._s(t.earnings)+" | QR codes used:"+e._s(t.tierEarnings)+" "),t.premiumPrice&&t.premiumPrice.manual?i("span",[e._v("(x"+e._s(t.premiumPrice.manual)+")")]):e._e()])],1)],1)})),0===e.games.items.length?i("q-item",[i("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"statistics"}},[e._v("\n        Best games of the month:\n        "),i("q-list",{attrs:{highlight:""}},[e._l(e.games.items,(function(t){return i("q-item",{key:t._id.questId},[i("q-item-section",[t._id.questData.fr?i("q-item-label",[e._v(e._s(t._id.questData.fr))]):e._e(),!t._id.questData.fr&&t._id.questData.en?i("q-item-label",[e._v(e._s(t._id.questData.en))]):e._e(),i("q-item-label",{attrs:{caption:""}},[e._v("Monthly:"+e._s(t.monthNb)+" Weekly:"+e._s(t.weekNb)+" rating:\n                "+e._s(t.rating))])],1)],1)})),0===e.games.items.length?i("q-item",[i("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1)],1)],1)])},Sa=[],xa={ListQuestsToValidate:function(){return Pe().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return Pe().get("admin/quests/rejected")},ListTowns:function(){return Pe().get("admin/towns")},ListBestGames:function(){return Pe().get("admin/bestgames")},ListEarnings:function(){return Pe().get("admin/earnings")},publish:function(e){return Pe().get("admin/quests/publish/"+e)},CreateTown:function(e){return Pe().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return Pe().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return Pe().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))}},Ca={data:function(){return{questsToValidate:{items:[]},questsRejected:{items:[]},towns:{items:[]},games:{items:[]},earnings:{items:[]},adminTab:"validation",serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadQuestsToValidate(),this.loadQuestsRejected(),this.loadStatistics(),this.loadEarnings()},methods:{loadQuestsToValidate:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.ListQuestsToValidate();case 2:t=e.sent,this.questsToValidate.items=t.data.quests;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadTowns:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.ListTowns();case 2:t=e.sent,this.towns.items=t.data.towns;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadStatistics:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.ListBestGames();case 2:t=e.sent,this.games.items=t.data.games;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadEarnings:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.ListEarnings();case 2:t=e.sent,this.earnings.items=t.data.earnings;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(){var e=o()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/admin/validate/"+t+"/version/"+i);case 1:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),loadQuestsRejected:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.ListQuestsRejected();case 2:t=e.sent,this.questsRejected.items=t.data.quests;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},qa=Ca,Ta=Object(_e["a"])(qa,_a,Sa,!1,null,null,null),Ea=Ta.exports,Aa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[e.quest.title?i("div",{staticClass:"page-content top-padding-middle"},[i("p",[e._v("\n      Validation of the quest "),i("strong",[e._v(e._s(e.quest.title))])]),i("p",[i("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),i("p",[i("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),i("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the\n      quest is rejected\n    ")])]):e._e()])},Pa=[],Ma={data:function(){return{quest:{},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.questId,this.$route.params.version);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getQuest:function(){var e=o()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.getById(t,i);case 2:r=e.sent,this.quest=r.data;case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),publish:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.publish(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reject:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.reject(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Ia=Ma,Ra=Object(_e["a"])(Ia,Aa,Pa,!1,null,null,null),Oa=Ra.exports,$a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"page-content top-padding-middle"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[i("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),i("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),i("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),i("div",[i("q-icon",{attrs:{name:"explore"}}),i("p",[e._v("GPS location bottom left")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),i("div",[i("q-icon",{attrs:{name:"explore"}}),i("p",[e._v("GPS location top right")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,r){return i("div",{key:r},[i("q-icon",{attrs:{name:"place"}}),i("p",[e._v("Place")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-9"},[i("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"place.name"}})],1),i("div",{staticClass:"col"},[e.isIOs?e._e():i("div",[""===t.picture?i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+r].click()}}}):e._e(),i("input",{ref:"placepicture"+r,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(r,t)}}})],1),e.isIOs?i("div",[i("q-icon",{attrs:{name:"cloud_upload"}}),i("input",{ref:"placepicture"+r,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(r,t)}}})],1):e._e(),""!==t.picture?i("div",[i("img",{staticStyle:{width:"50px"},attrs:{src:e.serverUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),i("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"place.type"}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(i){e.$set(t.location,"lng",i)},expression:"place.location.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(i){e.$set(t.location,"lat",i)},expression:"place.location.lat"}})],1)])],1)})),i("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},Fa=[],Na={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:Je.isIOS(),serverUrl:"https://api.graaly.com"}},mounted:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlace();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{configureTown:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xa.CreateTown(this.form.fields);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(){var e=o()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),r=i.target.files,r[0]){e.next=4;break}return e.abrupt("return");case 4:return s=new FormData,s.append("image",r[0]),e.next=8,xa.uploadPlaceImage(s);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.form.fields.places[t].picture=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},validations:{form:{fields:{name:{required:Bt["required"]},zipcode:{required:Bt["required"]}}}}},Da=Na,La=Object(_e["a"])(Da,$a,Fa,!1,null,null,null),za=La.exports,ja=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper background-map"},[i("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),i("form",{staticClass:"q-pa-lg",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},["generic"===e.step?i("q-input",{attrs:{outlined:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName"),"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),"generic"===e.step?i("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:function(t){e.$v.form.email.$touch,e.checkEmail()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):e._e(),"generic"===e.step?i("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.form.password.$error,"error-message":e.$v.form.password.checkPasswordComplexity?e.$v.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule"),"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"location"===e.step?i("q-select",{attrs:{outlined:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.sex.$error,"error-message":e.$t("label.PleaseSelectYourSex"),"test-id":"sex"},on:{blur:e.$v.form.sex.$touch},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}):e._e(),"location"===e.step?i("q-select",{attrs:{outlined:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge"),"test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}):e._e(),"location"===e.step?i("q-select",{attrs:{outlined:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry"),"test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}):e._e(),"location"===e.step?i("q-input",{attrs:{outlined:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",error:e.$v.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode"),"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}):e._e(),"location"===e.step?i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("q-checkbox",{attrs:{dark:"","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),i("div",{staticClass:"col secondary-font-small"},[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.form.terms.$error?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),"location"===e.step?i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("q-checkbox",{attrs:{dark:"","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),i("div",{staticClass:"col secondary-font-small"},[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.form.privacy.$error?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),"validation"===e.step?i("div",[i("p",{attrs:{"test-id":"enter-code"}},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),i("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?i("p",{staticClass:"text-right q-mt-md q-mb-md"},[i("a",{on:{click:function(t){return e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?i("p",{staticClass:"text-center q-mt-md q-mb-md"},[i("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),i("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg"},[i("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:e.formDisabled,color:"primary",label:e.$t("label.Subscribe"),loading:e.submitting,type:"submit"}})],1),i("div",{staticClass:"centered q-mt-sm q-mb-lg"},[i("a",{on:{click:function(t){return e.goToSignIn()}}},[e._v(e._s(e.$t("label.IAlreadyHaveAnAccount")))])]),i("p")],1)])])])},Ha=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"centered q-pt-lg q-pb-md"},[i("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],Ba={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,formDisabled:!0,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?Es:As,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){Je.clearAllRunningProcesses()},methods:{formSubmit:function(){var e=o()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?8:"validation"===e.t0?23:"firstusage"===e.t0?30:32;break;case 3:return this.$v.form.password.$touch(),this.$v.form.email.$touch(),this.$v.form.name.$touch(),this.$v.form.password.$error||this.$v.form.email.$error||this.$v.form.name.$error||(this.step="location"),e.abrupt("break",32);case 8:if(this.$v.form.country.$touch(),this.$v.form.zipCode.$touch(),this.$v.form.sex.$touch(),this.$v.form.age.$touch(),this.$v.form.terms.$touch(),this.$v.form.privacy.$touch(),this.$v.form.country.$error||this.$v.form.zipCode.$error||this.$v.form.sex.$error||this.$v.form.age.$error||this.$v.form.terms.$error||this.$v.form.privacy.$error){e.next=22;break}return t={name:this.form.name,email:this.form.email,sex:this.form.sex,age:this.form.age,password:this.form.password,zipcode:this.form.zipCode,country:this.form.country,language:this.$i18n.locale},this.submitting=!0,e.next=19,Me.createAccount(t);case 19:i=e.sent,i.status&&200===i.status&&i.data&&i.data.user?(window.localStorage.setItem("jwt",i.data.user.jwt),Ae.a.defaults.headers.common["Authorization"]="Bearer ".concat(i.data.user.jwt),this.openHome()):ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 22:return e.abrupt("break",32);case 23:return e.next=25,Me.validateAccount(this.form.email,this.form.code);case 25:return r=e.sent,this.submitting=!0,r.status&&200===r.status?this.openHome():r.data&&"You have tries too much codes"===r.data.message?ut(this.$t("label.YourAccountIsBlocked"),"warning"):ut(this.$t("label.IncorrectCodePleaseRetry"),"warning"),this.submitting=!1,e.abrupt("break",32);case 30:return this.openHome(),e.abrupt("break",32);case 32:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openHome:function(){var e="/home";this.$route.query.hasOwnProperty("redirect")&&(e=this.$route.query.redirect),this.$router.push(e)},checkUserIsExisting:function(){var e=o()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.checkEmail(t);case 2:if(i=e.sent,!(i&&i.data&&i.data.hasOwnProperty("existing")&&!0===i.data.existing)){e.next=7;break}return e.abrupt("return",{status:i.data.status});case 7:if(!(i&&i.data&&i.data.hasOwnProperty("existing")&&!1===i.data.existing)){e.next=11;break}return e.abrupt("return",{status:"missing"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),checkEmail:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.email.$error){e.next=5;break}return e.next=3,this.checkUserIsExisting(this.form.email);case 3:t=e.sent,t&&t.status?"active"===t.status?ut(this.$t("label.EmailAlreadyUsed"),"error"):"new"===t.status?this.$router.push("/user/createAccount/validation"):"blocked"===t.status?ut(this.$t("label.YourAccountIsBlocked"),"warning"):this.formDisabled=!1:ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backAction:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?5:"validation"===e.t0?7:10;break;case 3:return this.$router.push("/user/login"),e.abrupt("break",10);case 5:return this.step="generic",e.abrupt("break",10);case 7:return e.next=9,this.goToSignIn();case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goToSignIn:function(){var e=o()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/user/login");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateANewCode:function(){var e=o()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,Me.generateANewValidationCode(this.form.email);case 3:t=e.sent,200===t.status?ut(this.$t("label.ANewCodeHasBeenSent"),"info"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},validations:{form:{email:{required:Bt["required"],email:Bt["email"]},name:{required:Bt["required"]},country:{required:Bt["required"]},zipCode:{required:Bt["required"]},age:{required:Bt["required"]},sex:{required:Bt["required"]},terms:{sameAs:Object(Bt["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(Bt["sameAs"])((function(){return!0}))},password:{required:Bt["required"],minLength:Object(Bt["minLength"])(8),checkPasswordComplexity:ms}}}},Ua=Ba,Qa=Object(_e["a"])(Ua,ja,Ha,!1,null,null,null),Ya=Qa.exports,Va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{staticStyle:{width:"100%"},attrs:{src:"/statics/icons/game/oops.png"}}),"upgraderequired"===e.errorType&&e.isHybrid?i("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.UpgradeRequired"))+"\n  ")]):e._e(),"upgraderequired"!==e.errorType||e.isHybrid?e._e():i("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.RefreshCacheRequired"))+"\n  ")]),null===e.errorType?i("h3",[e._v("\n    "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n  ")]):e._e(),null!==e.errorMessage?i("p",[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),null===e.errorType?i("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()])},Wa=[],Ga={data:function(){return{errorMessage:null,errorType:null,isHybrid:window.cordova}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},Ka=Ga,Ja=(r("17eb"),Object(_e["a"])(Ka,Va,Wa,!1,null,"6e5dc249",null)),Xa=Ja.exports,Za=[{path:"/",component:Be,children:[{path:"",name:"none",redirect:"/home",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",redirect:"/user/login",meta:{requiresAuth:!1}},{path:"home",name:"home",component:ci,meta:{requiresAuth:!0}},{path:"map",name:"map",component:bi,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:Li,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:Cr,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:Ir,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:Ur,meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:Dr,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:ps,meta:{requiresAuth:!0}},{path:"user/createAccount/:step",name:"signup",component:Ya,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:ws,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:Cs,meta:{requiresAuth:!0}},{path:"user/:id/quests/:type",name:"quests",component:Qs,meta:{requiresAuth:!0}},{path:"user/:id/friends",name:"friends",component:Js,meta:{requiresAuth:!0}},{path:"user/:id/badges",name:"badges",component:ca,meta:{requiresAuth:!0}},{path:"search/:type/:subtype",name:"search",component:ya,meta:{requiresAuth:!0}},{path:"user/ranking/:type/:subtype",name:"ranking",component:Ls,meta:{requiresAuth:!0}},{path:"profile/:id",name:"profile",component:ma,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"updateprofile",component:Rs,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:Ea,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:Oa,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:za,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:Xa,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return r.e("2d230c65").then(r.bind(null,"ee5d"))}}];l["a"].use(Ne["a"]);var en=new Ne["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:Za}),tn=en,rn=function(){var e="function"===typeof Fe?Fe({Vue:l["a"]}):Fe,t="function"===typeof tn?tn({Vue:l["a"],store:e}):tn;e.$router=t;var i={el:"#q-app",router:t,store:e,render:function(e){return e(xe)}};return{app:i,store:e,router:t}},sn=r("9483");Object(sn["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.")},cached(e){console.log("Content has been cached for offline use.")},updated(e){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var an=r("dc21"),nn=r("e594");an["a"]({dsn:"https://1817b5e5250c40949ba1b2a25e0f2296@o426546.ingest.sentry.io/5368714",integrations:[new nn["a"]({Vue:l["a"],attachProps:!0})]});var on,ln=function(e){e.Vue},cn=r("c1df"),un=r.n(cn),dn=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(un.a.locale(t),e)return un()(String(e)).fromNow()}))},pn=r("a925"),fn=r("3013"),hn=r.n(fn),mn=function(e){var t=e.app,i=e.Vue;i.use(pn["a"]),t.i18n=new pn["a"]({locale:"fr",messages:hn.a}),on=t.i18n},bn=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=o()(a.a.mark((function e(t,i,r){var s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=13;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Fe.state.user||(Fe.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,points:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),r(),e.next=11;break;case 7:return e.next=9,Me.getAccount();case 9:s=e.sent,s&&s.data&&s.data.name?s.data.clientSupportedVersion&&s.data.clientSupportedVersion>"2.1.1"?r({path:"/error/upgraderequired"}):(Fe.state.user=s.data,r()):Fe.state.user?s&&s.status&&200!==s.status?(401===s.status?ut(on.t("label.SessionExpired"),"error"):ut(on.t("label.AuthCheckError"),"error"),r({path:"/user/login",query:"/"===i.path?null:{redirect:t.fullPath}})):r():(n=Te["get"]("firstusage"),n&&"ok"===n?r({path:"/user/login",query:"/"===i.path?null:{redirect:t.fullPath}}):(Te["set"]("firstusage","ok",{expires:36500,secure:!0}),r({path:"/firstusage"})));case 11:e.next=14;break;case 13:r();case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("Error in RouterAuthentication:",e.t0),r();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,i,r){return e.apply(this,arguments)}}())},gn=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var i=e.hash.split("/");"quest"===i[1]&&"play"===i[2]&&t.push("/quest/play/"+i[3])}}))}}),!1)},vn=function(e){var t=e.Vue;t.use(pi,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},wn=r("1dce"),kn=r.n(wn),yn=function(e){var t=e.Vue;t.use(kn.a)},_n=r("a0db"),Sn=r.n(_n),xn=rn(),Cn=xn.app,qn=xn.store,Tn=xn.router;function En(){return An.apply(this,arguments)}function An(){return An=o()(a.a.mark((function e(){var t,i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=!0,i=function(e){t=!1,window.location.href=e},r=window.location.href.replace(window.location.origin,""),s=[void 0,ln,dn,bn,gn,vn,mn,yn],n=0;case 5:if(!(!0===t&&n<s.length)){e.next=23;break}if("function"===typeof s[n]){e.next=8;break}return e.abrupt("continue",20);case 8:return e.prev=8,e.next=11,s[n]({app:Cn,router:Tn,store:qn,Vue:l["a"],ssrContext:null,redirect:i,urlPath:r});case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e["catch"](8),!e.t0||!e.t0.url){e.next=18;break}return window.location.href=e.t0.url,e.abrupt("return");case 18:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 20:n++,e.next=5;break;case 23:if(!1!==t){e.next=25;break}return e.abrupt("return");case 25:new l["a"](Cn);case 26:case"end":return e.stop()}}),e,null,[[8,13]])}))),An.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&Sn()(),En()},3:function(e,t){},3013:function(e,t){var i="https://graaly.com",r="sales@graaly.com",s={privacy:{en:i+"/privacy-policy/",fr:i+"/fr/confidentialite/"},terms:{en:i+"/terms/",fr:i+"/fr/cgu/"}};e.exports={en:{color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White",gray:"Gray",pink:"Pink",purple:"Purple",orange:"Orange",yellow:"Yellow",brown:"Brown"},news:{newQuestWon:"Has won the game <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the game <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your game <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on game <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the games you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in games during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video & text",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Geolocation",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",ImageOverFlow:"superimpose image and camera",ImageOverFlowDesc:"superimpose transparent image and camera flow",PhotographAnObject:"Photograph an item",PhotographAnObjectDesc:"Compare your picture with a play camera picture",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Scan a QR Code",LocateMarkerDesc:"Player has to find a QR code.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"End of chapter",EndOfChapterDesc:"This transition send player to next chapter",TriggerEvent:"Graaly -> your material",TriggerEventDesc:"Graaly physical a physical action (using an electronic board)",WaitForEvent:"Your material -> Graaly",WaitForEventDesc:"A physical action activate a step (using an electronic card)",HelpStep:"Help page",HelpStepDesc:"How to use Graaly, presentation of the buttons for the players."},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected",new:"new"},story:{hint:"Hello, here is a hint: <br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!"},iotObjects:{keypad:"Keypad",joystick:"Joystick",distance:"Distance",pot:"Potentiometers",lcd:"LCD display",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Chest",button:"Button",relay:"Relay"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",BackToMap:"Back",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the games near your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (It can takes up to 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error has occured, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again oin one hour",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be at least 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you are using Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful games",QuestsCreated:"Created games",CreateANewQuest:"Create a new game",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No game created",NoQuestPlayed:"No game played",NoQuestPlayedLong:"No game played. To play a game, return to the home page!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",MyProfile:"My profile",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to ?",ReachScoreOf:"Reach a score of {score} to unlock new games",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play",ContinueTheQuest:"Continue the game",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",km:"km",NoQuestForThisSearch:"No game for this search",NoPlayerForThisSearch:"No player for this search",NoDesignerForThisSearch:"No designer for this search",WhyDontYouCreateAQuest:"Why don't you create a game?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",InventoryZoom:"Touch an objet to zoom",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this game",YouAlreadyStartThisQuest:"You have already played this game, do you want to continue where you last left it?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",Hints:"Hints",CreateYourQuest:"New game",CreateYourPrivateQuest:"Create your private game!",CreateYourPublicQuest:"Create your public game!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</p><p>The story of your game must not undermine living or dead people</li><li>Your game must concern a location where no game has already be done, except if the content is different enough.</li><li>Your game must have more than 6 steps. We advise you to have less than 70 steps</li><li>Our moderation team will check if your game respects these rules, and if the quality level is enough. If not, you will be asked to improve your game, or your game will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 20 invitees (for more, please contact us)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 200 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny game to challenge players and win points!",BuilderProIntro:"Create your game on Graaly",BuilderChooseUserType:"Are you:",BuilderAddRoomMessage:"<p>By adding your room, you can benefit from services for free: <ul><li>Visibility in our directory</li><li>Statistics</li><li>Link to your reservation page</li><li>Suggestion of your room to our community</li></ul></p><p>Your customers can benefit also from free services: <ul><li>Find your rooms around them</li><li>Follow escape games played by their friends and challenge them on your rooms</li><li>Save their results and win points to challenge their friends</li></ul></p>",AProfessional:"professional",AProfessionalDesc1:"As a professional, you can use advanced Graaly features (statistics, advanced customization, monetization, easy start QR code ...)",AnIndividual:"individual",AnIndividualDesc1:"As an individual, you can also create public and private games, with all Graaly features you need",TryForFree:"Test for free",FromPrice:"From",PaymentOnUsage:"Pay as you go",NewQuest:"New game",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the game",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your game is published",YourQuestIsUnpublished:"Your game is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your game",PublishYourQuest:"Publish your game",UnpublishYourQuest:"Unpublish your game",SelectedLanguage:"Create game in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Game",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload an image",AddABackgroundImage:"Add a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of what should be found",UploadTheObjectToFind:"Upload the GLB file of the 3D object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step without testing",SaveAndTestThisStep:"Save and test this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Wrong answer. You have {nb} trial(s) more",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your game",AddYourChapters:"Create a first chapter and add first steps of your game inside",ActivateTheLanguageVisible:"Activate the languages playable for your game",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your game",LanguagesPublished:"Publish game in",LanguagesPublishedForPrivate:"Game is visible for invitees",PageLanguagesPublished:"Publish page in",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave the game",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you points. Are you sure to use it?",YouWin:"You have won",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review this game",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this game in the past",ResolveOtherQuestsToWinPoints:"Play new games to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have no friend yet",YourRanking:"My ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this game?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",AddressToFind:"Address of the location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the games of a city to win all the rewards",NoRankingYet:"Your rank is not yet calculated, it id calculated once a day",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your game is now read only. Your game will be validated by our game master. This can take a few days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email explaning why",QuestPublicationRejected:"Your game has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"Find the object by looking around and touch it",ObjectSize:"Object size",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the game",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step",YourQuestMustContainAtLeast6Steps:"Your game is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your game is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Your battery is low, please consider charging it",WarningNoNetwork:"Waiting for network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the game element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this game",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this game? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type the email address of the editor you want to invite",InviteInviteesHelp:"Type the email address of the person you want to invite",UserIsNotAGraalyUser:"No more invitee allowed or this person need to create a Graaly account.",EditorIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text",NewHint:"Next hint","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a game",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",FriendsAdded:"You follow this person now",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove this friend ?",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"Create your profile!",WeNeedMoreInformationAboutYouDesc:"It's simple and it unlocks nice features",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",CreateMyAccount:"Create my account",IAlreadyHaveAnAccount:"I already have an account",Reviews:"Reviews",CommentThisQuest:"Comments for game author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the game before sending your review",QuestNotReviewed:"This game has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery game",contactUsPro:'You can find our professional services on <a href="'.concat(i,'" target="_blank">').concat(i,'</a> or contact us at <a href="mailto:').concat(r,'">').concat(r,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again",BackToQuest:"Back to the game",min:"min",pts:"pts",SportQuest:"Nature game",DiscoveryQuest:"Discovery game",CulturalQuest:"Cultural game",ChildQuest:"Children's game",TransportQuest:"Game by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night game",ExtremQuest:"Extreme game",CulinarQuest:"Culinary game",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, it will still be avaible in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before the text appear above the background image (in seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this game (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your gender",PleaseSelectYourAge:"Please select your age range",RankingIntro:"Here are the best players for this game",CloseQuestRanking:"Back to the game",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to the end of the game",NoFriendsLong:"You do not follow people yet",IAgreeTheTermsAndConditions:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(s.terms.en,"', { openExternal: true })\">terms & conditions</a>"),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(s.privacy.en,"', { openExternal: true })\">privacy policy</a>"),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(s.terms.en,"', { openExternal: true })\">Terms & conditions</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(s.privacy.en,"', { openExternal: true })\">Privacy policy</a>"),YourPhoneIsNotCompliantWithThisStepType:"Your device is currently not compatible with this step type. Sorry for the inconvenience, please move to next step",DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have an 'End of chapter' step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the 'introduction step' of a chapter can have no triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe the folowwing stem has been removed, or you created circular conditions)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues in your game",IssuesInYourStep:"Issues in your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a mark, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occured.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this game. If your game is already published, players will play the published version, until you will publish this new game version.",ClickHereToCreateANewQuestVersion:"To edit your game, click here",YourUnderValidationQuests:"currently reviewed",YourRejectedQuests:"Your rejected",YourDraftQuests:"Your drafts",YourPublishedQuests:"Your published",QuestDraftVersion:"Non published game",PageDraftVersion:"Non published page",PrivateQuest:"Private game",PublicQuest:"Public game",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your game, do you want to add it?",Results:"Results",ClosePrivateQuest:"Close the game",ClosePrivateQuestDesc:"After clicking here, your game will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this game? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this game",NoPlayersYetForThisQuest:"No player yet for this game",PrivateQuestDesc1:"Your game is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a game to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your game will be visible and playable by every body",PublicProQuestDesc1:"Your game is playable by all users. You pay a small fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",PublicProQuestDesc2:"<p>If your game is not free, you can either use the in-app payment, or manage the payment your self</p><p>For the in-app payment, Google/Apple take 30% of the revenues</p><p>In all cases, Graaly takes 30% of the revenues</p><p>The rest is for you, so from 40% to 70% of the net revenues.</p><p>Graaly will send you money monthly</p><p>If your game is free for the end users, Graaly will charge you monthly 0,25 € (excl. taxes) per player</p><p>You can disable your game when you want</p><p>Please contact us at contact@graaly.com for more details</p>",PrivateProQuestDesc1:"Your game is dedicated to a list of people. You are only charged for the number of players",CreatePrivateQuest:"Create a private game",BuyPrivateQuest:"Buy a private game",OnlyBuyableOnMobile:"Only buyable on mobile",AcceptAndBuyAPrivateQuest:"Accept and buy a private game",CreatePublicQuest:"Create a public game",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this game",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your game is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Game type",helpQuestType:"A chain of clues game is a list of enigmas that follows each other. A game is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first game, we advise you to start with a chain of clues game. You can change a chain of clues game in a game, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Game files",YouDoNotUseAnyMediaYetInYourQuest:"You do not use any media yet in your game",Feedback:"Your feedback",Back:"Back",FeedbackTitle:"Send feedback",FeedbackIntroduction:"To send feedback to this game author, or rate this game, please wait for the end of the game. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your game builder",OrDownloadAFile:"Or download your own picture",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your game...",ErrorOfflineSaving:"Technical issue, you can not play this game without a network connection",QuestNeedNetwork:"You need network to launch this game. Activate your device network, and click on the button when you have network to launch the game",ReloadQuest:"Reload game",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Loading ...",Loading:"Loading ...",YouAreOfflineNoQuestsAvailable:"Sorry, we could not find any game playable offline.",ButtonsColor:"Buttons color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",AvailableTomorrow:"Available tomorrow",byteCharacter:"B",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You already follow this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not follow more than 150 people",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this game without a network connection.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro game",MovePremium:"Move this game to pro mode",PremiumDefinition1:"Give your game more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized game to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable game</u>: you can sell your game to players</li><li>You can access the statistics of your game</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, have a look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your game to premium mode (look at your game settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of players",NumberOfPlayersYesterday:"Yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by gender",AverageScore:"Average score",AverageDuration:"Average duration (min)",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro games",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro game(s) more",YouCanNotCreateNewQuests:"Yon can not create new pro games. Subscribe to our professional offers on <a href=\"javascript:navigator.app.loadUrl('".concat(i,"', { openExternal: true })\">").concat(i,'</a> or by email at  <a href="mailto:').concat(r,'">').concat(r,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Paying:"Paying",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of game on a mobile device",QuestPlayableOnMobile:"This game is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Game loading failed. You can play the game online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the game. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a game",SuggestANewQuest:"Suggest a new game",YouLikedThisQuest:"You liked this game?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested games to contact the responsible of this place. You will be warned if a game is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Game has been updated",PleaseRestartQuest:"Please restart the game from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code",ScanQRCode:"Scan a QR Code",MarkersToPrint:"Print the game's QR Codes, and place them where you want to",MarkersToStartQuest:"Players can start your game by scanning this QR code on the login page",SaveQuestResultsMarker:"Your player can scan a QR Code to save their score with Graaly (scan it on login page or home page). For the players who exited the room in time:<br /><img src='{url3}' /><br />For players who were close to exit the room in time:<br /><img src='{url2}' /><br />For players that did not exit the room<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other games around",UnknowUploadError:"An error occured. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screen. Depending on the screen sizes, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your game. This will motivate them to play your game. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",CreateYourAccountMsg:"Create your account to save your score and play with your friends!",MaybeLater:"Maybe later!",LetsPlay:"Play",NewAccount:"New account",PleaseAcceptDeviceMotionPermissionRequest:"Please allow Graaly to detect the motion of your device, in order to play this part of the game",PleaseAcceptDeviceOrientationPermissionRequest:"Please allow Graaly to detect the orientation of your device, in order to play this part of the game",DoYouWantToCreateAnAccount:"To build a game, you need to create an account. Do you agree to create your account?",UserWithSameEmailAlreadyExisting:"An account already exists with this email address",PasswordTooWeak:"Your password must be more complex (8 caracters and a capital leter and one digit)",AreYouSureYouWantToPublishThisQuest:"Are you sure you want to ask for publishing? You will not be allowed to make changes until Graaly team validate your request",YourCharacter:"Custom character",AddACustomCharacter:"Add a character",helpQuestCharacter:"This character will show up when a player ask for a hint or a Read More message",AvailableColors:"Available colors",TypeColorCode:"Type color code. Ex: #ff55cc",TypeColorCodeName:"Type the color name. Ex: Red",AddNewColor:"Add a new color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>You are far from this game</b>.<br />By solving this game afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this game</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are the owner of this game, you will not win any point",GeneralWarning:"<b>For your safety</b>, do not play Graaly driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",RemoveScoringAndRating:"Hide the score and the rating",TypeEndMessage:"Text replacing the scoring and rating final screen",ThanksForPlaying:"Thanks for playing this game. See you later with new games!",EnlargePictureToFullWidth:"Enlarge the picture to full screen",PlayerCanTakeSnapshot:"Player can take snapshots",SnapshotTaken:"Screenshot saved on your mobile",SnapshotTakenIssue:"Error with the screenshot",NbTrials:"Trials number",UserCanPass:"Player can pass this step",Welcome:"Welcome!",SignIn:"Sign-in",Subscribe:"Subscribe",EmailAlreadyUsed:"This email address is already used. Please sign-in or ask to modify your password",AroundYou:"Close to you",SeeMore:"See more",Designers:"Designers",Difficulty1:"Easy",Difficulty2:"Normal",Difficulty3:"Hard",ClosestQuestToYou:"The game closest to you",YouAreNearThisQuest:"You are close to this game",YouAreInvitedToThisQuest:"You are invited to this game",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Played by friends",ScoreAndBadges:"Score & badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"With this game, you can win:",ScoreRange:"Between {min} and {max} points",InProgressPreparation:"Preparation in progress",Warnings:"Warnings",Follow:"Follow",Followed:"Followed",SolvedQuests:"Solved games",Creations:"Creations",Badges:"Badges",FollowYourFriends:"Follow your friends",CreatedYourFirstQuest:"Create your first game",DoNotFollowAnymore:"Stop following",AllTheseDataAreOptional:"These informations are not mandatory:",DataCountry:"Your country: used to display the relevant games for you",DataZipcode:"Your zip code: used to display the relevant games for you",DataSex:"Your sex: used to display the relevant games for you",DataAge:"Your age: used to hide games not adapted to your age",DataPhone:"Your phone number: used to connect you with your friends",EscapeGame:"Game",EscapeGames:"Games",Players:"Players",YouHaveReachAScore:"You have reached {score} points",LevelReached:"Level reached!",PointsToReachLevel:"{score} points to reach",Friends:"Friends",World:"World",MyCountry:"My country",MyCity:"My city",NoRanking:"No ranking yet",Invitations:"Invitations",YouFollowThem:"You follow",AddYourRoomInTheDirectory:"Add your room in the directory",AddYourRoom:"Add your room",ProAddYourRoom:"You can add you rooms and benefit from many free services",YourRoom:"Your room",PriceFrom:"Price per player from",ReadMoreLink:"Link to the booking page",SmallPicture:"Small picture",SeeYourQuestPage:"Preview the page",FromPricePerPlayer:"From {price} per player",Book:"Book",YourBadges:"Your badges",YouDoNotHaveBadgesYet:"You do not have badges yet. To win badges, you need to play games with rewards.",FollowedPeople:"Followed people",WeNeedYourPositionForThisFeature:"We need your position for this feature",OtherCharacters:"Other characters",BackToTheMap:"Home",or:"or",RefreshCacheRequired:"The application cached on your browser is too old. Please use private navigation to update your cached files",FindFriendManually:"Find friends manually",NoQuestAroundYou:"We did not find games close to you",CachedQuests:"Already loaded",YourPresentation:"Introduce yourself",DuplicateThisQuest:"Clone this game",DoYouWantToOpenClonedQuest:"Do you want to edit the duplicated game now?",OpenTheMap:"games map",ReplacePictureByRedFilter:"Replace picture by red filter",TotalNumberOfPlaysNotFinished:"Number of games in progress",RoomDataWarning:"Some information can be obsolete, do not hesitate to look at the escape game web site for more information",AnonymousUser:"Anonymous user",NotWon:"To be won",OnTopGames:"Featured games",ThisStepOnlyWorkOnMobile:"The QR code scan only works on the mobile app",YourQuestHasNotBeenPublished:"Your game is not published",OnDesktopDisplayMessage:"On computer, you need to reduce your the size of your browser window.",EventCode:"Event code",BoardMacAddress:"Board Mac address",SuccessMessage:"Success message",YourTime:"Your time",LimitNumberOfPlayerInOneHour:"Limit the number of players by hour (0 = unlimited)",TooMuchUsersCurrently:"Too much users are playing currently",OrSelectAnImageInTheList:"Or pick a picture in the list",IotObject:"IoT object",Protocol:"Protocol",SuccessRange:"Success range",SuccessRanges:"Success ranges",WriteTextWarning:"Accents and capital letters are not necessary",DistanceToWin:"Player wins when he is closer to the GPS location than (m)",SplitMessageWithPipe:"Add pipes '|' if you want to split your text in several bubbles",ClickHere:"Click here",FollowTheCreator:"Follow the creator",PlayersNumber:"Minimum number of players",helpQuestMultiplayer:"This define the minimum number of players to play the game. Each player will have his phone, and should have specific missions in the game. For more information about multiplayer, please watch our Youtube tutorials",ThisIsAMultiplayerGame:"This game is multiplayer",JoinATeam:"Join a team",ScanTheLeaderQRCode:"Scan the leader QR Code",CreateATeam:"Create a new team",TeamName:"Team name",CreateTeam:"Create the team",OtherPlayersMustScanThisQRCode:"Other players must scan this QR Code to join your team",ThisIsNotATeamQRCodeValid:"This code is not valid! You must scan a code displayed on the mobile of the person who create the team",MyTeamIsCompleteLetsGo:"Team has scanned, let's go!",YouNeedMoreMembersToPlay:"You need {nb} members to start this game. Current member(s): {members}",Team:"Team",WaitingForOtherUsersActions:"Waiting for other players",WaitingForOtherUsersActionsDesc:"You can not go forward until other players solve their puzzles",CheckIfICanMoveFoward:"Check if I can move forward now!",Player:"Player",All:"All",YouNeedToBeXPlayers:"You need to be at least {nb} to play",YouNeedAtLeastXEditorsToTest:"You need at least {nb} éditors to test this multiplayer game (see Publish tab)",HereAreTheTesters:"This is a multiplayer game. It will be tester by: {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Display of your picture on diffent screen sizes",MyPictureIsNotDisplayedWell:"The display is not correct",MyPictureIsNotDisplayedWellDesc:"<b>If your picture is not correct for all sizes</b>: You need to have a picture with 900 pixels width and 1200 pixels height.<br /><b>If your picture is not correct with the smaller size</b>: You need to add a not useful border of 100px. You can add a black border of 100 pixels to your picture for example",RestartQuest:"Restart game",AreYouSureToRestartThisQuest:"Are you sure to restart this game? You will not gain any point by restarting.",PaymentOnMobile:"Payment on mobile",PaymentOnMobileHelp:"The payment is really simple for players, in one touch. Meanwhile, the Apple / Google stores will take 30% of the revenues.",PaymentOnYourSide:"Payment managed by you",PaymentOnYourSideHelp:"You can manage the payment in your store or with tiers like 4Escape",Payments:"Payments",CreateNewQRCodeForPlay:"Create a new unique QR Code for a player",AreYouSureYouWantToRemoveThisTierCode:"Are you sure to remove this code? If you have sent this code to a player, he will not be able to play any more!",BuyThisQuest:"Buy this game",YouHaveReceivedAQrCodeFrom:"You have received a QR code from {author}",ScanTheUniqueQRCode:"Scan the single use QR code",BuyInOneClick:"Buy in one clic",TechnicalIssueOrCodeAlreadyUsed:"Code already used or technical issue",ChangeTheBackgroundImageOnceClicked:"Change background picture when player has clicked",Message:"Message",Frequency:"Frequency",TriggerTheEvent:"Trigger the event",SearchingBluetoothDevice:"Searching Bluetooth device...",KeypadInput:"Keypad input",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Open",ChestActions:"Chest actions",TriggerMode:"Triggering mode",TriggerModeAuto:"Auto (at step loading)",TriggerModeManual:"Manual (player must touch a button)",helpPlayer:"For each step of a multiplayer game, you need to select the player who will see the step. Other players will not see it, and will have a waiting message until the player solve the enigma. You can display a transition step for all player, but an enigma can only be display for one player. If you need an enigma to be solved by all users, you need to create a step for each player. For more information, please watch our Youtube tutos.",ErrorMessageForNewTeamMember:"Technical issue or number of players reached",YouNeedToUnpublishYourQuestToRemoveIt:"You need to unpublish your game to remove it",PleaseEnterYourTeamName:"Please enter your team name",Version:"Version",CountDownLabel:"Time limit for this step",CountDownIsActive:"Activate the time limit",CountDownWarning:"Are you sure you want to activate the timer ? Make sure that there are no risks for the player, like a road to cross!",CountDownPopupfail:"Time is up !",MaxScore:"Max score",YouMustTestThisStepOnMobile:"You must test this step on a mobile device",AreasNumber:"Number of areas to find",ItRemains:"It remains",s:"s",LetsPlayWithoutAccount:"Play without account",ErrorDownloadNeedsToRestart:"Error while downloading, do you want to restart?",StartCreation:"Start creation?",ErrorTakingSnapshot:"Snapshot has not been taken",YourAudioFile:"Your background music",AddAnAudioFile:"Add a background music",ObjectNeedToBeAppliedOnPicture:"The object is applied on a picture area",ReadNext:"Read more",AlreadyPaied:"Purchased",HelpStepMessageInventory:"Display Inventory button help",HelpStepMessageHint:"Display Hint button help",HelpStepMessagePrevious:"Display Previous button help",HelpStepMessageNext:"Display Next button help",HelpStepMessage:"Welcome in your game interface!\n\nTo play your game, just follow the indications on screen.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></div></button></div>With the suitcase, you can access and use the objects won during the game.",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></div></button></div>With the light bulb, you can access the hints.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></div></button></div>Press the back button to move back to the previous step.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></div></button></div>Press the next button to move to the next step.",HelpStepMessageEnd:"If any problem, do not hesitate to close the application, you will restart to the latest step you played.\n\nGood luck and have fun!",KenBurnsEffect:"Ken Burns effect on picture",Show:"Show",Hide:"Hide",TotalSellings:"Game sells",RevenuesPayedFloor:"Revenues payed when over 50€",QRCodeMessage:"Message displayed when user needs to scan a QR code (escape game mode)"}},fr:{color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc",gray:"Gris",pink:"Rose",purple:"Violet",orange:"Orange",yellow:"Jaune",brown:"Marron"},news:{newQuestWon:"A réussi le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre jeu <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur le jeu <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos jeux durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est doublée durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"+100 d'énergie","100coinsDesc":"Vous gagnez +100 en énergie","10coins":"+10 énergie","10coinsDesc":"Vous gagnez +10 en énergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Géolocalisation",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",ImageOverFlow:"Superposer image et caméra",ImageOverFlowDesc:"Superposer une image transparente avec la caméra",PhotographAnObject:"Photographier un objet",PhotographAnObjectDesc:"Retrouver et photographier un objet",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser un objet",UseAnItemDesc:"Utiliser un objet de l'inventaire sur une image",LocateItemAR:"Réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité.",LocateMarker:"Scanner un QR Code",LocateMarkerDesc:"Le joueur doit trouver un QR Code.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur au chapitre suivant",TriggerEvent:"Graaly -> Votre matériel",TriggerEventDesc:"Graaly déclenche une action sur votre matériel physique (utilisation d'une carte électronique)",WaitForEvent:"Votre matériel -> Graaly",WaitForEventDesc:"Votre matériel active une étape Graaly (utilisation d'une carte électronique)",HelpStep:"Page d'aide",HelpStepDesc:"Aide à l'utilisation de Graaly, présentation des boutons."},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Français"},status:{published:"publié",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dépublié",rejected:"rejeté",new:"nouveau"},story:{hint:"Salut, voici un indice :<br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !"},iotObjects:{keypad:"Digicode",joystick:"Joystick",distance:"Distance",pot:"Potentiomètres",lcd:"Afficheur LCD",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Coffre",button:"Bouton",relay:"Relais"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (nécessaire pour lister les jeux à proximité de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vérifier que vous avez du réseau et contacter le support si le problème persiste",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte présentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Jeux résolus",QuestsCreated:"Jeux créés",CreateANewQuest:"Créer un nouveau jeu",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucun jeu créé",NoQuestPlayed:"Aucun jeu résolu",NoQuestPlayedLong:"Aucun jeu résolu. Pour résoudre un jeu, retournez à l'accueil !",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Très difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position géographique, mais elle n'a pas pu être récupérée.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : déplacez vous vers une zone dégagée à l'extérieur",GeolocationDisabled:"Géolocalisation désactivée sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l'application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Jouer",ContinueTheQuest:"Continuer le jeu",Language:"Langue",StartingPoint:"Lieu de départ",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",km:"km",NoQuestForThisSearch:"Aucun jeu ne correspond à votre recherche",NoPlayerForThisSearch:"Aucun joueur ne correspond à votre recherche",NoDesignerForThisSearch:"Aucun créateur ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer ce jeu ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",InventoryZoom:"Touchez un objet pour zoomer",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer ce jeu",YouAlreadyStartThisQuest:"Vous avez déjà commencé ce jeu, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",Hints:"Indices",CreateYourQuest:"Nouveau jeu",CreateYourPrivateQuest:"Créez votre jeu privée !",CreateYourPublicQuest:"Créez votre jeu publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre jeu ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre jeu ne doit pas concerner un lieu pour lequel un jeu existe déjà, sauf si le thême est suffisamment différent</li><li>Votre jeu doit faire plus de 6 étapes. Nous vous conseillons d'en créer moins de 70.</li><li>Notre équipe de modérateurs validera si votre jeu respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre jeu, ou il sera refusé</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 20 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 200 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de créer très simplement, et pas à pas, des jeux ludiques pour les autres joueurs. Ces jeux peuvent être des jeux de piste ou des escape games",BuilderProIntro:"Créer votre jeu avec Graaly",BuilderChooseUserType:"Etes-vous :",BuilderAddRoomMessage:"<p>En ajoutant votre salle, vous pouvez bénéficier gratuitement des services suivants :<ul><li>Visibilité dans notre annuaire</li><li>Statistiques</li><li>Lien vers votre page de réservation</li><li>Suggestion de votre salle à notre communauté</li></ul></p><p>Vos clients bénéficient aussi de services gratuits : <ul><li>Trouvez vos salles autour d'eux</li><li>Suivre les escape games joués par leurs amis et les défier sur vos salles</li><li>Sauver leurs succès pour gagner des points et défier leurs amis</li></ul></p>",AProfessional:"professionnel",AProfessionalDesc1:"En tant que professionnels, vous avez accès à des fonctionnalités avancées de Graaly (statistiques, personnalisation avancée, monétisation, QR code de démarrage rapide ...)",AnIndividual:"particulier",AnIndividualDesc1:"En tant que particulier, vous pouvez aussi créer des jeux publics et privés, avec tous les types d'énigmes Graaly",TryForFree:"Tester gratuitement",FromPrice:"A partir de",PaymentOnUsage:"Paiement à l'usage",NewQuest:"Nouveau jeu",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ du jeu",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre jeu est publié",YourQuestIsUnpublished:"Votre jeu est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre jeu",PublishYourQuest:"Publier votre jeu",UnpublishYourQuest:"Dépublier votre jeu",SelectedLanguage:"Saisir le jeu en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image",AddABackgroundImage:"Ajouter une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne réponse",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadTheObjectToFind:"Téléchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadrée pour être carrée",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez vérifier que vous avez du réseau et ré-essayer plus tard",TechnicalProblem:"Problème technique",SaveThisStep:"Enregistrer cette étape sans tester",SaveAndTestThisStep:"Enregistrer et tester cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Mauvaise réponse. Il vous reste {nb} essai(s)",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par créer une étape pour votre jeu",AddYourChapters:"Commencez par créer un chapitre, et ajoutez y les premières pages de votre énigme",ActivateTheLanguageVisible:"Activez les langues pour que votre jeu soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invités puissent jouer",LanguagesPublished:"Publier le jeu en",LanguagesPublishedForPrivate:"Rendre visible pour les invités",PageLanguagesPublished:"Publier la fiche en",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter le jeu",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"En utilisant l'indice, vous gagnerez moins de points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous avez gagné",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Votre avis sur ce jeu",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de ce jeu",ResolveOtherQuestsToWinPoints:"Résolvez de nouveaux jeux pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Mon classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter de l'énergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté ce jeu",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OpenLocationSettings:"Ouvrir les paramètres de localisation",AddressToFind:"Adresse du lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",DefineGPSLocation:"Tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Réussissez tous les jeux d'une ville pour obtenir toutes les récompenses",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre jeu n'est plus modifiable. Votre jeu va être validé par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejetée. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre jeu n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Vous êtes proche de l'objet, regardez autour de vous et touchez le",ObjectSize:"Taille de l'objet",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ du jeu",ClickOnArrowToMoveToNextStep:"Appuyez sur la flèche en bas à droite pour passer à l'étape suivante",YourQuestMustContainAtLeast6Steps:"Votre jeu est trop court, vous devez créer au moins 3 étapes",YourQuestMustContainLessThan50Steps:"Votre jeu est trop long, vous devez créer moins de 100 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile pour jouer",WarningNoNetwork:"En attente du réseau ...",WarningLowNetwork:"Réseau faible, veuillez patienter ...",CouldNotDisplayObject:"Désolé, une erreur est survenue au chargement de l'objet à trouver, il ne peut donc pas être affiché. Veuillez redémarrez l'application. Si le problème persiste, passez cette étape.",CouldNotEnableAR:"Nous n'avons pas pu détecter l'orientation de votre téléphone. Pas de panique ! Vous pouvez quand même jouer en mode simple.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer ce jeu",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer ce jeu ? Il sera définivement supprimé.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un éditeur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'éditeur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",EditorIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Sélectionner l'objet dans la liste",HintText:"Texte de l'indice",NewHint:"Indice supplémentaire","2DPicture":"Image à plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Créer un jeu",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnées GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Télécharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complémentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",FriendsAdded:"Vous suivez cettte personne maintenant",InvitationSent:"Invitation envoyée",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numéro de téléphone",InvalidPhoneNumber:"Numéro invalide",AreYouSureYouWantToRemoveThisFriend:"Êtes-vous certain(e) de ne plus vouloir le/la suivre",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de télephone",YourPhoneNumber:"Votre numéro de téléphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous êtes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux caméra",GeolocationFailed:"Impossible de vous géolocaliser",GeolocationFailedDesc:"Nous n'avons pas réussi à vous géolocaliser, soit vous n'avez pas de réseau, soit vous avez bloqué la géolocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Créez votre profil !",WeNeedMoreInformationAboutYouDesc:"C'est simple et ça vous débloque des fonctionnalités utiles",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres données, et vous ne pourrez plus vous connecter à l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",AreYouSureYouWantToRemoveYourAccount:"Êtes-vous sûrs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprimé",CreateMyAccount:"Créer mon compte",IAlreadyHaveAnAccount:"J'ai déjà un compte",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoyé à l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note au jeu avant d'envoyer votre avis.",QuestNotReviewed:"Ce jeu n'a pas encore reçu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour démarrer le jeu de découverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(i,'" target="_blank">').concat(i,'</a> ou nous contacter à <a href="mailto:').concat(r,'">').concat(r,"</a>."),GeolocationNotSupported:"Désolé, votre appareil ne permet pas la géolocalisation.",TechnicalErrorReloadPage:"Problème technique, appuyez pour relancer",TechnicalProblemNetworkIssue:"Veuillez vérifier que vous avez du réseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Résoudre à nouveau",BackToQuest:"Retour au jeu",min:"min",pts:"pts",SportQuest:"jeu nature",DiscoveryQuest:"jeu découverte",CulturalQuest:"jeu culturel",ChildQuest:"jeu pour enfants",TransportQuest:"jeu en moyen de transport",ShopQuest:"Découverte de commerces",EnterpriseQuest:"Découverte d'entreprise",NightQuest:"jeu nocturne",ExtremQuest:"jeu extrême",CulinarQuest:"jeu culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la réactiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redémarrer l'aide",DurationBeforeTextAppearAbovePicture:"Durée avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s) à gagner",YouAlreadyPlayedThisQuest:"Vous avez déjà réussi ce jeu (aucun point à gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour ce jeu",CloseQuestRanking:"Retour au jeu",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour au jeu",NoFriendsLong:"Vous ne suivez encore personne",IAgreeTheTermsAndConditions:"Je suis d'accord avec les <a href=\"javascript:navigator.app.loadUrl('".concat(s.terms.fr,"', { openExternal: true })\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:"Je suis d'accord avec la <a href=\"javascript:navigator.app.loadUrl('".concat(s.privacy.fr,"', { openExternal: true })\">politique d'utilisation des données personnelles</a>"),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialité pour utiliser Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(s.terms.fr,"', { openExternal: true })\">Conditions d'utilisation</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(s.privacy.fr,"', { openExternal: true })\">Politique d'utilisation des données personnelles</a>"),YourPhoneIsNotCompliantWithThisStepType:"Votre appareil n'est pour le moment pas compatible avec ce type d'étape. Nous sommes désolé pour ce désagréement, veuillez passer à l'étape suivante",DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune étape ?",FollowStep:"Suit l'étape",StepSuccess:"Bonne réponse à",StepFail:"Mauvaise réponse à",NoCondition:"Aucune condition (démarre au début du chapitre)",Conditions:"Déclencheurs",AddACondition:"Ajouter un déclencheur",ConditionType:"Type de déclencheur",ConditionValue:"Valeur du déclencheur",YourStepCanOnlyFollowOneStep:"Votre étape ne peut suivre qu'une seule autre étape",ThisStepIsTriggeredWhen:"Cette étape est affichée quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des étapes. Veuillez supprimer les étapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette étape n'est pas visible par les joueurs. Vous pouvez passer à l'étape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez créer une étape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les étapes suivantes n'ont pas de déclencheur. Seul la première étape d'un chapitre peut ne pas avoir de déclencheur",FollowingStepsHaveInvalidCondition:"Des étapes ont des conditions invalides (dépendent probablement d'étapes manquantes, ou vous avez créé une chaîne impossible, comme une condition circulaire)",FollowingStepsHaveNoValidParent:"Les étapes suivantes ont un déclencheur incorrect",IssuesInYouQuest:"Problèmes de votre jeu",IssuesInYourStep:"Problèmes de votre étape",DisplayRightAnswer:"Afficher la bonne réponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une étape dans ce chapitre",ScanTheMarkersLikeThat:"La marque à trouver et à scanner avec votre téléphone a une forme similaire à",ScanTheMarkersLikeThat2:"Pour scanner une marque, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre à jour votre application Graaly pour continuer à l'utiliser",SorryAnErrorOccurs:"Désolé, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez créer un nouveau brouillon pour ce jeu. Si votre jeu est déjà publié, cette version restera accessible aux joueurs, jusqu'à ce que vous publiiez cette nouvelle version de votre jeu.",ClickHereToCreateANewQuestVersion:"Pour modifier votre jeu, cliquez ici",YourUnderValidationQuests:"Vos jeux en cours de validation",YourRejectedQuests:"Vos jeux rejetés",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos jeux publiés",QuestDraftVersion:"Jeu non publié",PageDraftVersion:"Page non publiée",PrivateQuest:"Jeu privé",PublicQuest:"Jeu public",Invitees:"Invités",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configurée pour votre jeu, voulez-vous l'ajouter ?",Results:"Résultats",ClosePrivateQuest:"Clore le jeu",ClosePrivateQuestDesc:"En cliquant ici, votre jeu ne sera plus jouable. Vous aurez alors accès aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sûr(e) de clore ce jeu ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a joué à ce jeu",NoPlayersYetForThisQuest:"Encore aucun joueur pour ce jeu",PrivateQuestDesc1:"Votre jeu est destiné à votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous créez un jeu pour faire découvrir un lieu, une activité, une entreprise.",PublicQuestDesc2:"Une fois validé par les games masters, ce jeu sera visible et jouable par tous",PublicProQuestDesc1:"Votre jeu est jouable par tous les joueurs Graaly. Vous payez un petit montant par joueur ou partagez les revenus avec nous.<p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PublicProQuestDesc2:"<p>Si votre jeu est payant pour les joueurs, vous pouvez soit utiliser le système de paiement intégré à Graaly soit gérer vous même le paiement</p><p>Concernant le système de paiement intégré, Google/Apple prennent 30% des revenus</p><p>Dans tous les cas Graaly conserve 30% des revenus</p><p>Le reste est pour vous, soit de 40% à 70% des revenus.</p><p>Graaly vous reverse votre part mensuellement</p><p>Si votre jeu est gratuit pour les joueurs, Graaly vous facture mensuellement 0,25 € HT par joueur, soit moins que le facicule papier que vous devrier acheter sans application mobile</p><p>Vous pouvez désactiver votre jeu à tout moment</p><p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PrivateProQuestDesc1:"Votre jeu est dédié à des joueurs définis. Le prix est lié au nombre de joueurs. Contactez-nous à contact@graaly.com pour plus d'information",CreatePrivateQuest:"Créer un jeu privé",BuyPrivateQuest:"Acheter un jeu privé",OnlyBuyableOnMobile:"Seulement disponible sur mobile",AcceptAndBuyAPrivateQuest:"Accepter et acheter un jeu privé",CreatePublicQuest:"Créer un jeu public",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour ce jeu",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre jeu est clos, et ne peut plus être publiée",YourQuestContainsErrorsInSteps:"Votre jeu présente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type de jeu",helpQuestType:"Un jeu de piste comporte une liste d'énigme qui se suivent de façon linéaire. Un jeu propose des énigmes qui peuvent être résolue dans un ordre non défini, la résolution de plusieurs énigmes débloquent d'autres énigmes. Si vous êtes nouveau sur Graaly, nous vous conseillons de commencer par un jeu de type jeu de piste. Vous pouvez transformer un jeu de piste en escape game, mais pas le contraire.",basicEditor:"Jeu de piste (éditeur simple)",advancedEditor:"Escape game (éditeur avancé)",UsedOver:"{current} utilisés sur {limit}",QuestMedia:"Fichiers du jeu",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre jeu",Feedback:"Vos commentaires",Back:"Retour",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire à l'auteur du jeu, ou noter le jeu, attendez la page de fin du jeu. Si vous souhaitez contacter l'équipe Graaly, pour par exemple signaler un contenu inapproprié dans ce jeu, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a été envoyé",BackToBuilder:"Retour à la création du jeu",OrDownloadAFile:"Ou téléchargez votre image",UploadACharacter:"Télécharger un personnage",LoadingQuestDataForOfflineMode:"Préparation de votre jeu ...",ErrorOfflineSaving:"Problème technique, vous ne pourrez pas jouer ce jeu sans réseau",QuestNeedNetwork:"Il vous faut du réseau mobile pour lancer ce jeu. Recherchez du réseau, et cliquez sur le bouton ci-dessous pour relancer le chargement du jeu",ReloadQuest:"Recharger le jeu",ConnectToComputeScore:"Je suis connecté, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre réussite et votre score, vous devez vous reconnecter au réseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans réseau",Downloading:"Chargement ...",Loading:"Chargement ...",YouAreOfflineNoQuestsAvailable:"Désolé, il n'y a pas de jeu disponible pour être joué hors ligne.",ButtonsColor:"Couleur des boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible dès demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous suivez déjà cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas être ami avec vous même",TooMuchFriends:"Vous ne pouvez pas suivre plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagné !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avancé. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Téléchargement terminé. Vous pouvez désormais jouer ce jeu sans réseau.",GoToQuestValidation:"Aller à la validation",SessionExpired:"Votre session a expiré, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez réduire sa taille",PremiumQuest:"jeu Pro",MovePremium:"Passer ce jeu en mode pro",PremiumDefinition1:"Donnez plus de valeur à votre jeu !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Un jeu plus personnalisé à vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser le jeu avec votre logo et vos couleurs, ... </li><li><u>Un jeu rentable</u> : Vous pouvez gagner de l'argent en rendant votre jeu payante</li><li>Vous pouvez accéder aux statistiques de votre jeu</li><li>Vous bénéficiez du support de notre équipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos jeux en mode pro, contactez nous à sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalité, vous devez passer ce jeu en mode premium (voir dans les paramètres de votre jeu)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de joueurs",NumberOfPlayersYesterday:"Hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",AverageDuration:"Durée moyenne (min)",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont créé des jeux pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore créer {nb} jeu(s) pro(s)",YouCanNotCreateNewQuests:'Vous ne pouvez plus créer des jeux pro. Souscrivez à nos offres professionnelles sur <a href="'.concat(i,'" target="_blank">').concat(i,'</a> ou contactez-nous à <a href="mailto:').concat(r,'">').concat(r,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Paying:"Payant",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer ce jeu sur un appareil mobile",QuestPlayableOnMobile:"Ce jeu se joue sur mobile",PuzzleHelpText:"Déplacez les pièces pour les réordonner",ClickToEnlargePictures:"Appuyez sur les images pour les élargir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre téléphone pendant 3 secondes pour une meilleure précision GPS",TakeMobileVertically:"Tenez votre téléphone verticalement et recherchez",null:"Indéfini",TooMuchOfflineLoadingErrors:"Le chargement du jeu n'a pas fonctionné. Vous pouvez jouer le jeu si le réseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annulé le chargement du jeu, le jeu ne fonctionnera pas si vous perdez le réseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggérer un jeu",SuggestANewQuest:"Suggérer un nouveau jeu",YouLikedThisQuest:"Vous avez aimé ce jeu ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour découvrir un lieu en jouant, ou pour motiver vos enfants ou élèves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Musée du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou téléphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En complétant ce formulaire, vous nous aidez à identifier les jeux les plus demandées pour contacter les responsables des lieux concernés. Vous serez ensuite informé si un jeu est créée sur ce lieu.",InsertAStepAfter:"Insérer une étape après",QuestUpdated:"Le jeu a été modifié",PleaseRestartQuest:"Merci de rejouer le jeu depuis le début.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette étape n'est jouable qu'à partir de cette date",ThisStepIsAvailableIn:"Cette étape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pièce à bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scanner un QR Code",ScanQRCode:"Scanner un QR Code",MarkersToPrint:"Imprimez les QR Codes du jeu, à placer aux endroits que vous avez prévu",MarkersToStartQuest:"Les joueurs peuvent jouer en scannant ce QR Code sur la page de login de Graaly",SaveQuestResultsMarker:"Vos joueurs peuvent scanner un QR Code pour enregistrer leur score dans Graaly (sur la page de login ou sur la page d'accueil). Pour les joueurs qui sont sortis de la salle dans les temps<br /><img src='{url3}' /><br />Pour les joueurs qui sont presque sortis dans les temps<br /><img src='{url2}' /><br />Pour les joueurs qui ne sont pas sortis<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Cette action ne peut être annulée",AddAReward:"Télécharger une récompense",Reward:"Récompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit être en rouge, sinon pensez à utiliser une image avec un fond transparent. Si une partie de votre image est coupée, téléchargez une image au format carré.",YouWonAReward:"Bravo, vous avez gagné un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres récompenses en jouant aux autres jeux dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut être trop gros ou n'a pas le bon format. Veuillez réessayer avec une image plus petite",helpQuestLogo:"Votre logo apparaîtra dans un bulle en bas de l'écran de jeu. Suivant les écrans, la bulle peut être assez petite, choisissez une image avec peu de détails.",helpQuestReward:"Les joueurs pourront gagner un badge à la fin du jeu. Cela les motive à jouer à votre jeu. Pour proposer un badge en récompense, téléchargez une image représentant le badge, avec un fond transparent (format .gif ou .png)",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouvé",CreateYourAccountMsg:"Créez votre compte pour sauvegarder votre score et jouer avec vos amis !",MaybeLater:"Peut-être plus tard !",LetsPlay:"Jouez",NewAccount:"Nouveau compte",PleaseAcceptDeviceMotionPermissionRequest:"Veuillez accepter que Graaly accède aux mesures des mouvements de votre appareil, afin de pouvoir jouer cette partie du jeu",PleaseAcceptDeviceOrientationPermissionRequest:"Veuillez accepter que Graaly accède aux mesures de l'orientation de votre appareil, afin de pouvoir jouer cette partie du jeu",DoYouWantToCreateAnAccount:"Pour créer un jeu, vous devez créer votre compte. Souhaitez-vous créer votre compte Graaly ?",UserWithSameEmailAlreadyExisting:"Un compte existe déjà avec cet email",PasswordTooWeak:"Votre mot de passe doit etre au 8 caractères, contenir une majuscule et un chiffre",AreYouSureYouWantToPublishThisQuest:"Etes-vous sûr de demander la publication de votre jeu ? Vous ne pourrez plus faire aucun changement jusqu'à ce que l'équipe Graaly confirme votre demande",YourCharacter:"Personnage personnalisé",AddACustomCharacter:"Ajouter un personnage",helpQuestCharacter:"Ce personnage s'affichera quand un joueur demandera un indice ou affichera un En savoir plus",AvailableColors:"Couleurs disponibles",TypeColorCode:"Entrez le code couleur. Ex: #ff55cc",TypeColorCodeName:"Entrez le nom de la couleur. Ex: Rouge",AddNewColor:"Ajoutez une nouvelle couleur",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Vous n'êtes pas sur le lieu du jeu</b>.<br />En résolvant ce jeu à distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez déjà réussi ce jeu</b>. Vous pouvez le résoudre à nouveau, mais il ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous êtes le créateur de ce jeu, il ne vous rapportera aucun point",GeneralWarning:"<b>Pour votre sécurité</b>, ne jouez pas à Graaly en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",RemoveScoringAndRating:"Cacher le score et la notation",TypeEndMessage:"Texte de fin qui remplace l'écran de score et de notation",ThanksForPlaying:"Merci d'avoir joué à ce jeu. A bientôt pour d'autres jeux !",EnlargePictureToFullWidth:"Elargir l'image en plein écran",PlayerCanTakeSnapshot:"Le joueur peut prendre des captures d'écran",SnapshotTaken:"Capture enregistrée dans vos photos",SnapshotTakenIssue:"Impossible de faire une capture",NbTrials:"Nombre d'essais",UserCanPass:"Le joueur peut passer l'étape",Welcome:"Bienvenue !",SignIn:"Connexion",Subscribe:"S'inscrire",EmailAlreadyUsed:"Cette adresse email est déjà utilisée. Connectez-vous ou demandez une modification de votre mot de passe",AroundYou:"Autour de vous",SeeMore:"Voir plus",Designers:"Créateurs",Difficulty1:"Simple",Difficulty2:"Normal",Difficulty3:"Difficile",ClosestQuestToYou:"Jeu proche de vous",YouAreNearThisQuest:"Jeu le plus proche de vous",YouAreInvitedToThisQuest:"Vous êtes invité à ce jeu",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Joué par amis",ScoreAndBadges:"Score et badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"Sur ce jeu, vous pouvez gagner :",ScoreRange:"Entre {min} et {max} points",InProgressPreparation:"Préparation en cours",Warnings:"Mises en garde",Follow:"Suivre",Followed:"Suivi(e)",SolvedQuests:"Jeux résolus",Creations:"Créations",Badges:"Badges",FollowYourFriends:"Suivre vos amis",CreatedYourFirstQuest:"Créez votre premier jeu",DoNotFollowAnymore:"Ne plus suivre",AllTheseDataAreOptional:"Toutes ces données sont optionnelles",DataCountry:"Votre pays : utilisé pour afficher les bons jeux pour vous",DataZipcode:"Votre code postal : utilisé pour afficher les bons jeux pour vous",DataSex:"Votre sexe : utilisé pour afficher les bons jeux pour vous",DataAge:"Votre age : utilisé pour éviter certains jeux non adaptés à votre age",DataPhone:"Votre numéro de téléphone : utilisé pour vous connecter avec vos amis",EscapeGame:"Escape game",EscapeGames:"Escape games",Players:"Joueurs",YouHaveReachAScore:"Vous avez un score de {score} points",LevelReached:"Niveau atteint !",PointsToReachLevel:"{score} points à atteindre",Friends:"Amis",World:"Mondial",MyCountry:"Mon pays",MyCity:"Ma ville",NoRanking:"Encore aucun classement",Invitations:"Invitations",YouFollowThem:"Vous suivez",AddYourRoomInTheDirectory:"Référencez votre salle dans l'annuaire",AddYourRoom:"Ajoutez votre salle",ProAddYourRoom:"Vous pouvez ajouter vos salles dans Graaly et bénéficier de nombreux services gratuits",YourRoom:"Votre salle",PriceFrom:"Prix par joueur à partir de",ReadMoreLink:"Lien vers la page de réservation",SmallPicture:"Petite image",SeeYourQuestPage:"Visualiser la page",FromPricePerPlayer:"A partir de {price} par joueur",Book:"Réserver",YourBadges:"Vos badges",YouDoNotHaveBadgesYet:"Vous n'avez pas encore de badges. Pour gagner des badges, il vous faut résoudre des jeux qui proposent des récompenses.",FollowedPeople:"Personnes suivies",WeNeedYourPositionForThisFeature:"Nous avons besoin de votre position pour cette fonctionnalité",OtherCharacters:"Autres personnages",BackToTheMap:"Accueil",or:"ou",RefreshCacheRequired:"L'application en cache sur votre navigateur est obsolète. Veuillez passez en navigation privée pour rafraichir votre cache",FindFriendManually:"Trouvez vos amis manuellement",NoQuestAroundYou:"Nous n'avons trouvé aucun jeu autour de vous",CachedQuests:"Déjà téléchargé(s)",YourPresentation:"Présentez-vous",DuplicateThisQuest:"Dupliquer ce jeu",DoYouWantToOpenClonedQuest:"Voulez-vous modifier le nouveau jeu maintenant ?",OpenTheMap:"Carte des jeux",ReplacePictureByRedFilter:"Remplacer l'image par un filtre rouge",TotalNumberOfPlaysNotFinished:"Nombre de parties en cours",RoomDataWarning:"Certaines informations peuvent être obsolètes, n'hésitez pas à aller sur le site de l'escape game pour plus d'informations",AnonymousUser:"Joueur anonyme",NotWon:"A gagner",OnTopGames:"Jeux du moment",ThisStepOnlyWorkOnMobile:"Le scan de QR code ne fonctionne que sur l'application mobile",YourQuestHasNotBeenPublished:"Votre escape n'a pas été publié",OnDesktopDisplayMessage:"Sur ordinateur, vous devez réduire la taille de votre écran. Vous pouvez taper sur la touche F12 pour cela.",EventCode:"Code de l'événement",BoardMacAddress:"Adresse Mac de la carte",SuccessMessage:"Message de réussite",YourTime:"Votre temps",LimitNumberOfPlayerInOneHour:"Limiter le nombre de joueurs par heure (0 = illimité)",TooMuchUsersCurrently:"Trop de joueurs actuellement",OrSelectAnImageInTheList:"Ou sélectionnez une image dans la liste",IotObject:"Objet connecté",Protocol:"Protocole",SuccessRange:"Plage de succès",SuccessRanges:"Plages de succès",WriteTextWarning:"Accents et majuscules ne sont pas nécessaires",DistanceToWin:"Le joueur gagne quand il est à la distance suivante du lieu (m)",SplitMessageWithPipe:"Ajouter le signe '|' pour séparer votre texte dans plusieurs bulles",ClickHere:"Cliquez ici",FollowTheCreator:"Suivez le créateur",PlayersNumber:"Nombre de joueurs mini",helpQuestMultiplayer:"Cela défini le nombre de joueur minimum pour que le jeu soit jouable. Chaque joueur devra avoir un téléphone, et aura un rôle différent dans le jeu. Pour plus d'informations sur le mode multijoueur, regardez nos tutos Youtube",ThisIsAMultiplayerGame:"Ce jeu se joue en équipe",JoinATeam:"Rejoindre une équipe",ScanTheLeaderQRCode:"Scanner le QR Code du leader",CreateATeam:"Créer une nouvelle équipe",TeamName:"Nom de l'équipe",CreateTeam:"Créer l'équipe",OtherPlayersMustScanThisQRCode:"Les autres joueurs doivent scanner ce QR Code pour rejoindre votre équipe",ThisIsNotATeamQRCodeValid:"Ce code n'est pas valide ! Vous devez scanner le code qui s'affiche sur le smartphone de la personne qui a créé l'équipe",MyTeamIsCompleteLetsGo:"L'équipe est au complet, allons-y !",YouNeedMoreMembersToPlay:"Votre équipe doit être composée au minimum de {nb} membres. Membre(s) actuel(s) : {members}",Team:"Equipe",WaitingForOtherUsersActions:"En attente des autres joueurs",WaitingForOtherUsersActionsDesc:"Vous ne pouvez pas avancer tant que les autres joueurs n'ont pas réussi leurs énigmes",CheckIfICanMoveFoward:"Vérifier si c'est ok maintenant !",Player:"Joueur",All:"Tous",YouNeedToBeXPlayers:"Vous devez être au moins {nb} pour jouer",YouNeedAtLeastXEditorsToTest:"Vous devez avoir {nb} éditeurs pour tester ce jeu multijoueur (voir onglet Mise en ligne)",HereAreTheTesters:"Ce jeu est multijoueur, il sera testé par : {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Affichage de mon image sur différents types de téléphones",MyPictureIsNotDisplayedWell:"Mon image s'affiche mal",MyPictureIsNotDisplayedWellDesc:"<b>Si votre image est mal cadrée sur toutes les tailles</b>: Il faut que votre image soit dans un format 900 pixels par 1200 pixels.<br /><b>Votre image n'est pas correcte sur la taille du centre</b>: Il faut que votre image présente une partie non utile sur 100 pixels à droite et à gauche de votre image. Vous pouvez ajouter une bordure noire de 100 pixels autour de votre image par exemple",RestartQuest:"Redémarrer le jeu",AreYouSureToRestartThisQuest:"Etes-vous sûr de redémarrer ce jeu ? Vous ne gagnerez aucun point en redémarrant le jeu.",PaymentOnMobile:"Paiement sur mobile",PaymentOnMobileHelp:"Le paiement est très simple pour les joueurs, juste en pressant un bouton. Cependant Google / Apple prennent 30% des revenus de votre jeu.",PaymentOnYourSide:"Paiement réalisé par vous",PaymentOnYourSideHelp:"Vous pouvez collecter le paiement dans votre boutique ou au travers de tiers (4Escape, ...)",Payments:"Paiements",CreateNewQRCodeForPlay:"Créer un nouveau QR Code pour un joueur qui a payé",AreYouSureYouWantToRemoveThisTierCode:"Etes-vous sûr de supprimer ce code ? Si vous avez envoyé ce code à un joueur, il ne pourra plus jouer !",BuyThisQuest:"Acheter ce jeu",YouHaveReceivedAQrCodeFrom:"Vous avez reçu un QR code de {author}",ScanTheUniqueQRCode:"Scanner le QR code à usage unique",BuyInOneClick:"Achetez en un clic",TechnicalIssueOrCodeAlreadyUsed:"Code déjà utilisé ou problème technique",ChangeTheBackgroundImageOnceClicked:"Changez l'image de fond quand le joueur a cliqué",Message:"Message",Frequency:"Fréquence",TriggerTheEvent:"Déclencher l'action",SearchingBluetoothDevice:"Recherche de l'appareil Bluetooth...",KeypadInput:"Saisie digicode",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Ouvrir",ChestActions:"Actions sur le coffre",TriggerMode:"Mode de déclenchement",TriggerModeAuto:"Auto (au chargement de l'étape)",TriggerModeManual:"Manuel (le joueur doit toucher un bouton)",helpPlayer:"Pour chaque étape d'un jeu multijoueur, vous devez sélectionner le joueur qui verra cette étape. Les autres joueurs ne le verront pas, et auront un message d'attente jusqu'à que le joueur résolve l'énigme. Vous pouvez afficher une étape de type transition pour tous les joueurs, mais vous ne pouvez afficher une énigme que pour un joueur. Si vous souhaitez que tous les joueurs résolvent la même énigme, vous devez créer une étape pour chaque joueur. Pour plus d'information, regardez nos tutos Youtube.",ErrorMessageForNewTeamMember:"Problème technique ou nombre de joueurs atteint",YouNeedToUnpublishYourQuestToRemoveIt:"Vous devez dépublier vote jeu pour le supprimer",PleaseEnterYourTeamName:"Veuillez entrer le nom de votre équipe",Version:"Version",CountDownLabel:"Limite de temps de l’énigme",CountDownIsActive:"Entrez la limite de durée pour cette énigme",CountDownWarning:"Etes-vous certain(e) d'activer un compte à rebours ? Assurez-vous qu'il n'y a aucun risque pour le joueur, comme une route à traverser !",CountDownPopupfail:"Temps écoulé !",MaxScore:"Score maxi",YouMustTestThisStepOnMobile:"Vous devez tester ce type d'étape sur un appareil mobile",AreasNumber:"Nombre de zones à trouver",ItRemains:"Il reste",s:"s",LetsPlayWithoutAccount:"Jouer sans compte",ErrorDownloadNeedsToRestart:"Erreur lors du telechargement de l'enquete, voulez vous recommencer ?",StartCreation:"Devenir créateur ?",ErrorTakingSnapshot:"Impossible de faire la capture d'écran",YourAudioFile:"Votre musique de fond",AddAnAudioFile:"Ajouter une musique de fond",ObjectNeedToBeAppliedOnPicture:"L'objet est appliqué sur une partie de l'image",ReadNext:"Lire la suite",AlreadyPaied:"Acheté",HelpStepMessageInventory:"Afficher l'aide pour le bouton Inventaire",HelpStepMessageHint:"Afficher l'aide pour le bouton Indice",HelpStepMessagePrevious:"Afficher l'aide pour le bouton Retour",HelpStepMessageNext:"Afficher l'aide pour le bouton Suivant",HelpStepMessage:"Bienvenue dans votre interface de jeu !\n\nPour jouer, il vous suffira de suivre les indications à l'écran.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></div></button></div>La valise vous sert à utiliser des objets que vous avez récupérés durant le jeu",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></div></button></div>L'ampoule vous sert à obtenir des indices.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></div></button></div>Pour revenir à l'étape précédente, appuyez sur la flèche de gauche.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><div class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></div></button></div>Pour passer à l'étape suivante, appuyez sur la flèche de droite.",HelpStepMessageEnd:"En cas de problème, n'hésitez pas à fermer l'application et à la redémarrer, vous reviendrez à la dernière étape réussie.\n\nBon jeu, et bonne chance !",KenBurnsEffect:"Effet Ken Burns sur l'image",Show:"Montrer",Hide:"Cacher",TotalSellings:"Ventes du jeu",RevenuesPayedFloor:"Paiement quand gains > 50€",QRCodeMessage:"Message affiché quand le joueur doit flasher un QR code (mode Escape game)"}}}},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac à dos","en":"Backpack"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candélabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantôme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Clé","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe à pétrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine téléphonique","en":"Phone booth"},"author":"Dave Sutton","url":"https://www.cgtrader.com/free-3d-models/exterior/other/telephone-box"},"phone-rotary":{"name":{"fr":"Téléphone à cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},4678:function(e,t,i){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return i(t)}function a(e){if(!i.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id="4678"},"4c18":function(e){e.exports=JSON.parse('[{"label":"France","value":"FRA"},{"label":"Belgique","value":"BEL"},{"label":"Suisse","value":"CHE"},{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbaïdjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahreïn","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzégovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brésil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Bélarus","value":"BLR"},{"label":"Bénin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (République démocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Côte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythrée","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"Fédération Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grèce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinée Française","value":"GUF"},{"label":"Guinée Équatoriale","value":"GNQ"},{"label":"Guinée","value":"GIN"},{"label":"Guinée-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Géorgie du Sud et les îles Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et îles McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Caïmans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Féroé","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caïques","value":"TCA"},{"label":"Iles Vierges (États-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures éloignées des États-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaïque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'île de noël","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les Îles Cook","value":"COK"},{"label":"Les îles Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronésie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Nioué","value":"NIU"},{"label":"Norvège","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zélande","value":"NZL"},{"label":"Népal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbékistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (état de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guinée","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Française","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Pérou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"République Dominicaine","value":"DOM"},{"label":"République Tchèque","value":"CZE"},{"label":"République arabe syrienne","value":"SYR"},{"label":"République centrafricaine","value":"CAF"},{"label":"République de Corée","value":"KOR"},{"label":"République populaire démocratique de Corée","value":"PRK"},{"label":"Réunion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthélemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Niévès","value":"KNA"},{"label":"Saint-Siège","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hélène, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa américaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tomé et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovénie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suriname","value":"SUR"},{"label":"Suède","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sénégal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes françaises","value":"ATF"},{"label":"Territoire britannique de l\'océan Indien","value":"IOT"},{"label":"Thaïlande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinité-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkménistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},5:function(e,t){},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pièces","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Clé","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac à dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Bouée de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fusée","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Téléphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Télévision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle clé","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},6:function(e,t){},"74f2":function(e,t,i){"use strict";var r=i("7da1"),s=i.n(r);s.a},"7da1":function(e,t,i){},"7e6d":function(e,t,i){},"84ff":function(e,t,i){"use strict";var r=i("9785"),s=i.n(r);s.a},"8c64":function(module,exports,__webpack_require__){(function(process,__dirname,Buffer){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,Module;(function(){"use strict";var e=function(e,i,r){var s=e,a=i;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;r=i,s=n.videoWidth||n.width,a=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=s,this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.videoWidth=s,this.videoHeight=a,"string"===typeof r){var o=this;this.cameraParam=new t(r,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=r,this._initialize()};e.prototype.dispose=function(){for(var e in i.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,r,s=this.getMarkerNum();for(t in this.patternMarkers)r=this.patternMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(t in this.barcodeMarkers)r=this.barcodeMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(var a=0;a<s;a++){var n=this.getMarker(a),o=i.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=i.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(a,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=i.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(a,n.dirMatrix)),o!==i.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(a,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(a,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:a,type:o,marker:n,matrix:this.transform_mat}})}var c=this.getMultiMarkerCount();for(a=0;a<c;a++){var u=this.getMultiMarkerPatternCount(a);l=!1;i.getTransMatMultiSquareRobust(this.id,a),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<u;d++){var p=this.getMultiEachMarker(a,d);if(p.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:a,matrix:this.transform_mat}});break}}if(l)for(d=0;d<u;d++){p=this.getMultiEachMarker(a,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:a,markerIndex:d,marker:p,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var i=this.patternMarkers[e];return i||(this.patternMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.trackBarcodeMarkerId=function(e,t){var i=this.barcodeMarkers[e];return i||(this.barcodeMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.getMultiMarkerCount=function(){return i.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return i.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var i=this.listeners[e].indexOf(t);i>-1&&this.listeners[e].splice(i,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var i=0;i<t.length;i++)t[i].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,r){return i.addMarker(this.id,e,t,r)},e.prototype.loadMultiMarker=function(e,t,r){return i.addMultiMarker(this.id,e,t,r)},e.prototype.getTransMatSquare=function(e,t,r){return i.getTransMatSquare(this.id,e,t),r.set(this.marker_transform_mat),r},e.prototype.getTransMatSquareCont=function(e,t,r,s){return this.marker_transform_mat.set(r),i.getTransMatSquareCont(this.id,e,t),s.set(this.marker_transform_mat),s},e.prototype.getTransMatMultiSquare=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,i){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=i&&0!==i&&(t[12]*=i,t[13]*=i,t[14]*=i),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?i.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return i.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===i.getMarker(this.id,e))return i.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var r=0;r<t.length;r++)this.marker_transform_mat[2*r+0]=t[r][0],this.marker_transform_mat[2*r+1]=t[r][1];return i.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===i.getMultiEachMarker(this.id,e,t))return i.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return i.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return i.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return i.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return i.setLogLevel(e)},e.prototype.getLogLevel=function(){return i.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return i.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return i.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return i.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return i.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return i.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return i.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return i.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return i.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return i.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return i.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return i.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return i.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return i.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return i.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return i.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return i.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return i.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return i.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return i.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var i=this.getMarkerNum(),r=0;r<i;r++)this._debugMarker(this.getMarker(r))},e.prototype._initialize=function(){this.id=i.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=i.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){e||(e=this.image),this.ctx.save(),"portrait"===this.orientation?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),i=t.data;return!!this.dataHeap&&(this.dataHeap.set(i),!0)},e.prototype._debugMarker=function(e){var t,i;t=e.vertex;var r=this.ctx;r.strokeStyle="red",r.beginPath(),r.moveTo(t[0][0],t[0][1]),r.lineTo(t[1][0],t[1][1]),r.stroke(),r.beginPath(),r.moveTo(t[2][0],t[2][1]),r.lineTo(t[3][0],t[3][1]),r.stroke(),r.strokeStyle="green",r.beginPath(),r.lineTo(t[1][0],t[1][1]),r.lineTo(t[2][0],t[2][1]),r.stroke(),r.beginPath(),r.moveTo(t[3][0],t[3][1]),r.lineTo(t[0][0],t[0][1]),r.stroke(),i=e.pos,r.beginPath(),r.arc(i[0],i[1],8,0,2*Math.PI),r.fillStyle="red",r.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",i=e.onSuccess,r=e.onError||function(e){console.error("ARController.getUserMedia",e)},s=document.createElement("video"),a=function(){0!==this.videoWidth&&i(s)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){n&&(s.play(),s.paused||o.forEach((function(e){window.removeEventListener(e,l,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var c=function(e){s.addEventListener("loadedmetadata",a,!1),s.src=window.URL.createObjectURL(e),n=!0,l()},u={},d={};e.width&&(d.width=e.width,"object"===typeof e.width?(e.width.max&&(u.maxWidth=e.width.max),e.width.min&&(u.minWidth=e.width.max)):u.maxWidth=e.width),e.height&&(d.height=e.height,"object"===typeof e.height?(e.height.max&&(u.maxHeight=e.height.max),e.height.min&&(u.minHeight=e.height.max)):u.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var p={audio:!1,video:{mandatory:u}};return navigator.getUserMedia?navigator.getUserMedia(p,c,r):r("navigator.getUserMedia is not supported on your browser"),s},e.getUserMediaARController=function(i){var r={};for(var s in i)r[s]=i[s];var a=i.onSuccess,n=i.cameraParam;r.onSuccess=function(){new t(n,(function(){var t=this,r=i.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),s=r/Math.max(o.videoWidth,o.videoHeight),n=s*o.videoWidth,l=s*o.videoHeight;if(o.videoWidth<o.videoHeight){var c=n;n=l,l=c}var u=new e(n,l,t);u.image=o,o.videoWidth<o.videoHeight?(u.orientation="portrait",u.videoWidth=o.videoHeight,u.videoHeight=o.videoWidth):(u.orientation="landscape",u.videoWidth=o.videoWidth,u.videoHeight=o.videoHeight),a(u,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(r);return o};var t=function(e,t,i){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=i,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;i.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&i.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var i={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:p,addMarker:n,addMultiMarker:u},r=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function s(){for(var e in r.forEach((function(e){i[e]=Module[e]})),Module)e.match(/^AR/)&&(i[e]=Module[e])}var a=0;function n(e,t,i){var r="/marker_"+a++;m(t,r,(function(){var t=Module._addMarker(e,r);i&&i(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),i=t.split("\n"),r=[],s=0;return i.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(s){case 0:return+e,void(s=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void s++;case 5:return void(s=1)}})),r}var c=0;function u(e,t,i){var r="/multi_marker_"+c++;m(t,r,(function(s){var a=l(s);function n(){var t=Module._addMultiMarker(e,r),s=Module.getMultiMarkerNum(e,t);i&&i(t,s)}if(!a.length)return n();var o=t.split("/").slice(0,-1).join("/");a=a.map((function(e){return[o+"/"+e,e]})),b(a,n)}))}var d=0;function p(e,t){var i="/camera_param_"+d++,r=function(){var e=Module._loadCamera(i);t&&t(e)};"object"===typeof e?h(i,e,r):e.indexOf("\n")>-1?f(i,e,r):m(e,i,r)}function f(e,t,i){for(var r=new Uint8Array(t.length),s=0;s<r.length;s++)r[s]=255&t.charCodeAt(s);h(e,r,i)}function h(e,t,i){FS.writeFile(e,t,{encoding:"binary"}),i(t)}function m(e,t,i){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(e){var s=r.response,a=new Uint8Array(s);h(t,a,i)},r.send()}function b(e,t){var i=e.pop();i?m(i[0],i[1],(function(){b(e,t)})):t()}window.artoolkit=i,window.ARController=e,window.ARCameraParam=t,window.Module?s():window.Module={onRuntimeInitialized:function(){s()}}})(),Module||(Module=("undefined"!==typeof Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB="object"===typeof window,ENVIRONMENT_IS_WORKER="function"===typeof importScripts,ENVIRONMENT_IS_NODE="object"===typeof process&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module["print"]||(Module["print"]=function(e){process["stdout"].write(e+"\n")}),Module["printErr"]||(Module["printErr"]=function(e){process["stderr"].write(e+"\n")});var nodeFS=__webpack_require__("ab21"),nodePath=__webpack_require__("7a44");Module["read"]=function(e,t){e=nodePath["normalize"](e);var i=nodeFS["readFileSync"](e);return i||e==nodePath["resolve"](e)||(e=path.join(__dirname,"..","src",e),i=nodeFS["readFileSync"](e)),i&&!t&&(i=i.toString()),i},Module["readBinary"]=function(e){var t=Module["read"](e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},Module["load"]=function(e){globalEval(read(e))},Module["thisProgram"]||(process["argv"].length>1?Module["thisProgram"]=process["argv"][1].replace(/\\/g,"/"):Module["thisProgram"]="unknown-program"),Module["arguments"]=process["argv"].slice(2),module["exports"]=Module,process["on"]("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module["print"]||(Module["print"]=print),"undefined"!=typeof printErr&&(Module["printErr"]=printErr),"undefined"!=typeof read?Module["read"]=read:Module["read"]=function(){throw"no read() available (jsc?)"},Module["readBinary"]=function(e){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"===typeof t),t},"undefined"!=typeof scriptArgs?Module["arguments"]=scriptArgs:"undefined"!=typeof arguments&&(Module["arguments"]=arguments);else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw"Unknown runtime environment. Where are we?";if(Module["read"]=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(Module["arguments"]=arguments),"undefined"!==typeof console)Module["print"]||(Module["print"]=function(e){console.log(e)}),Module["printErr"]||(Module["printErr"]=function(e){console.log(e)});else{var TRY_USE_DUMP=!1;Module["print"]||(Module["print"]=TRY_USE_DUMP&&"undefined"!==typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module["load"]=importScripts),"undefined"===typeof Module["setWindowTitle"]&&(Module["setWindowTitle"]=function(e){document.title=e})}function globalEval(e){eval.call(null,e)}for(var key in!Module["load"]&&Module["read"]&&(Module["load"]=function(e){globalEval(Module["read"](e))}),Module["print"]||(Module["print"]=function(){}),Module["printErr"]||(Module["printErr"]=Module["print"]),Module["arguments"]||(Module["arguments"]=[]),Module["thisProgram"]||(Module["thisProgram"]="./this.program"),Module.print=Module["print"],Module.printErr=Module["printErr"],Module["preRun"]=[],Module["postRun"]=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(e){tempRet0=e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8===0),t/8}return 0}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4===(7&e)),e+=4):assert(0===(3&e)),e},getAlignSize:function(e,t,i){return i||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,i){return i&&i.length?(i.splice||(i=Array.prototype.slice.call(i)),i.splice(0,0,t),Module["dynCall_"+e].apply(null,i)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var i=Runtime.funcWrappers[t];return i[e]||(i[e]=function(){return Runtime.dynCall(t,e,arguments)}),i[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+e|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var i=enlargeMemory();if(!i)return DYNAMICTOP=t,0}return t},alignMemory:function(e,t){var i=e=Math.ceil(e/(t||16))*(t||16);return i},makeBigInt:function(e,t,i){var r=i?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t);return r},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module["Runtime"]=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9;function assert(e,t){e||abort("Assertion failed: "+t)}var globalScope=this,cwrap,ccall;function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,i,r){switch(i=i||"i8","*"===i.charAt(i.length-1)&&(i="i32"),i){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+i)}}function getValue(e,t,i){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;return null!==e&&void 0!==e&&0!==e&&(t=Runtime.stackAlloc(1+(e.length<<2)),writeStringToMemory(e,t)),t}},toC={string:JSfuncs["stringToC"],array:JSfuncs["arrayToC"]};ccall=function(e,t,i,r,s){var a=getCFunc(e),n=[],o=0;if(r)for(var l=0;l<r.length;l++){var c=toC[i[l]];c?(0===o&&(o=Runtime.stackSave()),n[l]=c(r[l])):n[l]=r[l]}var u=a.apply(null,n);if("string"===t&&(u=Pointer_stringify(u)),0!==o){if(s&&s.async)return void EmterpreterAsync.asyncFinalizers.push((function(){Runtime.stackRestore(o)}));Runtime.stackRestore(o)}return u};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every((function(e){return"number"===e})),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map((function(e,t){return"$"+t})),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource["stackSave"].body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc((function(){return cfunc})).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc((function(){return Pointer_stringify})).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource["stackRestore"].body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module["ccall"]=ccall,Module["cwrap"]=cwrap,Module["setValue"]=setValue,Module["getValue"]=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,i,r){var s,a;"number"===typeof e?(s=!0,a=e):(s=!1,a=e.length);var n,o="string"===typeof t?t:null;if(n=i==ALLOC_NONE?r:[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===i?ALLOC_STATIC:i](Math.max(a,o?1:t.length)),s){var l;r=n;for(assert(0==(3&n)),l=n+(-4&a);r<l;r+=4)HEAP32[r>>2]=0;l=n+a;while(r<l)HEAP8[r++>>0]=0;return n}if("i8"===o)return e.subarray||e.slice?HEAPU8.set(e,n):HEAPU8.set(new Uint8Array(e),n),n;var c,u,d,p=0;while(p<a){var f=e[p];"function"===typeof f&&(f=Runtime.getFunctionIndex(f)),c=o||t[p],0!==c?("i64"==c&&(c="i32"),setValue(n+p,f,c),d!==c&&(u=Runtime.getNativeTypeSize(c),d=c),p+=u):p++}return n}function getMemory(e){return staticSealed?"undefined"!==typeof _sbrk&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(e):_malloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";var i,r=0,s=0;while(1){if(i=HEAPU8[e+s>>0],r|=i,0==i&&!t)break;if(s++,t&&s==t)break}t||(t=s);var a="";if(r<128){var n,o=1024;while(t>0)n=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,o))),a=a?a+n:n,e+=o,t-=o;return a}return Module["UTF8ToString"](e)}function AsciiToString(e){var t="";while(1){var i=HEAP8[e++>>0];if(!i)return t;t+=String.fromCharCode(i)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}function UTF8ArrayToString(e,t){var i,r,s,a,n,o,l="";while(1){if(i=e[t++],!i)return l;if(128&i)if(r=63&e[t++],192!=(224&i))if(s=63&e[t++],224==(240&i)?i=(15&i)<<12|r<<6|s:(a=63&e[t++],240==(248&i)?i=(7&i)<<18|r<<12|s<<6|a:(n=63&e[t++],248==(252&i)?i=(3&i)<<24|r<<18|s<<12|a<<6|n:(o=63&e[t++],i=(1&i)<<30|r<<24|s<<18|a<<12|n<<6|o))),i<65536)l+=String.fromCharCode(i);else{var c=i-65536;l+=String.fromCharCode(55296|c>>10,56320|1023&c)}else l+=String.fromCharCode((31&i)<<6|r);else l+=String.fromCharCode(i)}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,i,r){if(!(r>0))return 0;for(var s=i,a=i+r-1,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),o<=127){if(i>=a)break;t[i++]=o}else if(o<=2047){if(i+1>=a)break;t[i++]=192|o>>6,t[i++]=128|63&o}else if(o<=65535){if(i+2>=a)break;t[i++]=224|o>>12,t[i++]=128|o>>6&63,t[i++]=128|63&o}else if(o<=2097151){if(i+3>=a)break;t[i++]=240|o>>18,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}else if(o<=67108863){if(i+4>=a)break;t[i++]=248|o>>24,t[i++]=128|o>>18&63,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}else{if(i+5>=a)break;t[i++]=252|o>>30,t[i++]=128|o>>24&63,t[i++]=128|o>>18&63,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}}return t[i]=0,i-s}function stringToUTF8(e,t,i){return stringToUTF8Array(e,HEAPU8,t,i)}function lengthBytesUTF8(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),r<=127?++t:t+=r<=2047?2:r<=65535?3:r<=2097151?4:r<=67108863?5:6}return t}function UTF16ToString(e){var t=0,i="";while(1){var r=HEAP16[e+2*t>>1];if(0==r)return i;++t,i+=String.fromCharCode(r)}}function stringToUTF16(e,t,i){if(void 0===i&&(i=2147483647),i<2)return 0;i-=2;for(var r=t,s=i<2*e.length?i/2:e.length,a=0;a<s;++a){var n=e.charCodeAt(a);HEAP16[t>>1]=n,t+=2}return HEAP16[t>>1]=0,t-r}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e){var t=0,i="";while(1){var r=HEAP32[e+4*t>>2];if(0==r)return i;if(++t,r>=65536){var s=r-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}else i+=String.fromCharCode(r)}}function stringToUTF32(e,t,i){if(void 0===i&&(i=2147483647),i<4)return 0;for(var r=t,s=r+i-4,a=0;a<e.length;++a){var n=e.charCodeAt(a);if(n>=55296&&n<=57343){var o=e.charCodeAt(++a);n=65536+((1023&n)<<10)|1023&o}if(HEAP32[t>>2]=n,t+=4,t+4>s)break}return HEAP32[t>>2]=0,t-r}function lengthBytesUTF32(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&++i,t+=4}return t}function demangle(e){var t=!!Module["___cxa_demangle"];if(t)try{var i=_malloc(e.length);writeStringToMemory(e.substr(1),i);var r=_malloc(4),s=Module["___cxa_demangle"](i,0,0,r);if(0===getValue(r,"i32")&&s)return Pointer_stringify(s)}catch(p){}finally{i&&_free(i),r&&_free(r),s&&_free(s)}var a=3,n={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},o=[],l=!0;function c(){a++,"K"===e[a]&&a++;var t=[];while("E"!==e[a])if("S"!==e[a])if("C"!==e[a]){var i=parseInt(e.substr(a)),r=i.toString().length;if(!i||!r){a--;break}var s=e.substr(a+r,i);t.push(s),o.push(s),a+=r+i}else t.push(t[t.length-1]),a+=2;else{a++;var n=e.indexOf("_",a),l=e.substring(a,n)||0;t.push(o[l]||"?"),a=n+1}return a++,t}function u(t,i,r){i=i||1/0;var s,o="",d=[];function p(){return"("+d.join(", ")+")"}if("N"===e[a]){if(s=c().join("::"),i--,0===i)return t?[s]:s}else{("K"===e[a]||l&&"L"===e[a])&&a++;var f=parseInt(e.substr(a));if(f){var h=f.toString().length;s=e.substr(a+h,f),a+=h+f}}if(l=!1,"I"===e[a]){a++;var m=u(!0),b=u(!0,1,!0);o+=b[0]+" "+s+"<"+m.join(", ")+">"}else o=s;e:while(a<e.length&&i-- >0){var g=e[a++];if(g in n)d.push(n[g]);else switch(g){case"P":d.push(u(!0,1,!0)[0]+"*");break;case"R":d.push(u(!0,1,!0)[0]+"&");break;case"L":a++;var v=e.indexOf("E",a);f=v-a;d.push(e.substr(a,f)),a+=f+2;break;case"A":f=parseInt(e.substr(a));if(a+=f.toString().length,"_"!==e[a])throw"?";a++,d.push(u(!0,1,!0)[0]+" ["+f+"]");break;case"E":break e;default:o+="?"+g;break e}}return r||1!==d.length||"void"!==d[0]||(d=[]),t?(o&&d.push(o+"?"),d):o+p()}var d=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"===typeof e&&(e=Pointer_stringify(e)),"_"!==e[0])return e;if("_"!==e[1])return e;if("Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}d=u()}catch(p){d+="?"}return d.indexOf("?")>=0&&!t&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),d}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"}))}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module["ALLOC_NORMAL"]=ALLOC_NORMAL,Module["ALLOC_STACK"]=ALLOC_STACK,Module["ALLOC_STATIC"]=ALLOC_STATIC,Module["ALLOC_DYNAMIC"]=ALLOC_DYNAMIC,Module["ALLOC_NONE"]=ALLOC_NONE,Module["allocate"]=allocate,Module["getMemory"]=getMemory,Module["Pointer_stringify"]=Pointer_stringify,Module["AsciiToString"]=AsciiToString,Module["stringToAscii"]=stringToAscii,Module["UTF8ArrayToString"]=UTF8ArrayToString,Module["UTF8ToString"]=UTF8ToString,Module["stringToUTF8Array"]=stringToUTF8Array,Module["stringToUTF8"]=stringToUTF8,Module["lengthBytesUTF8"]=lengthBytesUTF8,Module["UTF16ToString"]=UTF16ToString,Module["stringToUTF16"]=stringToUTF16,Module["lengthBytesUTF16"]=lengthBytesUTF16,Module["UTF32ToString"]=UTF32ToString,Module["stringToUTF32"]=stringToUTF32,Module["lengthBytesUTF32"]=lengthBytesUTF32,Module["stackTrace"]=stackTrace;var PAGE_SIZE=4096,HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function alignMemoryPage(e){return e%4096>0&&(e+=4096-e%4096),e}var STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module["TOTAL_STACK"]||5242880,TOTAL_MEMORY=Module["TOTAL_MEMORY"]||268435456,totalMemory=65536,buffer;while(totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK)totalMemory<16777216?totalMemory*=2:totalMemory+=16777216;function callRuntimeCallbacks(e){while(e.length>0){var t=e.shift();if("function"!=typeof t){var i=t.func;"number"===typeof i?void 0===t.arg?Runtime.dynCall("v",i):Runtime.dynCall("vi",i,[t.arg]):i(void 0===t.arg?null:t.arg)}else t()}}totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&!!new Int32Array(1)["subarray"]&&!!new Int32Array(1)["set"],"JS engine does not provide full typed array support"),buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(255===HEAPU8[0]&&0===HEAPU8[3],"Typed arrays 2 must be run on a little-endian system"),Module["HEAP"]=HEAP,Module["buffer"]=buffer,Module["HEAP8"]=HEAP8,Module["HEAP16"]=HEAP16,Module["HEAP32"]=HEAP32,Module["HEAPU8"]=HEAPU8,Module["HEAPU16"]=HEAPU16,Module["HEAPU32"]=HEAPU32,Module["HEAPF32"]=HEAPF32,Module["HEAPF64"]=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module["preRun"]){"function"==typeof Module["preRun"]&&(Module["preRun"]=[Module["preRun"]]);while(Module["preRun"].length)addOnPreRun(Module["preRun"].shift())}callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module["postRun"]){"function"==typeof Module["postRun"]&&(Module["postRun"]=[Module["postRun"]]);while(Module["postRun"].length)addOnPostRun(Module["postRun"].shift())}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,i){var r=i>0?i:lengthBytesUTF8(e)+1,s=new Array(r),a=stringToUTF8Array(e,s,0,s.length);return t&&(s.length=a),s}function intArrayToString(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}function writeStringToMemory(e,t,i){var r=intArrayFromString(e,i),s=0;while(s<r.length){var a=r[s];HEAP8[t+s>>0]=a,s+=1}}function writeArrayToMemory(e,t){for(var i=0;i<e.length;i++)HEAP8[t++>>0]=e[i]}function writeAsciiToMemory(e,t,i){for(var r=0;r<e.length;++r)HEAP8[t++>>0]=e.charCodeAt(r);i||(HEAP8[t>>0]=0)}function unSign(e,t,i){return e>=0?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function reSign(e,t,i){if(e<=0)return e;var r=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=r&&(t<=32||e>r)&&(e=-2*r+e),e}Module["addOnPreRun"]=addOnPreRun,Module["addOnInit"]=addOnInit,Module["addOnPreMain"]=addOnPreMain,Module["addOnExit"]=addOnExit,Module["addOnPostRun"]=addOnPostRun,Module["intArrayFromString"]=intArrayFromString,Module["intArrayToString"]=intArrayToString,Module["writeStringToMemory"]=writeStringToMemory,Module["writeArrayToMemory"]=writeArrayToMemory,Module["writeAsciiToMemory"]=writeAsciiToMemory,Math["imul"]&&-5===Math["imul"](4294967295,5)||(Math["imul"]=function(e,t){var i=e>>>16,r=65535&e,s=t>>>16,a=65535&t;return r*a+(i*a+r*s<<16)|0}),Math.imul=Math["imul"],Math["clz32"]||(Math["clz32"]=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math["clz32"];var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,Math_clz32=Math.clz32,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies)}function removeRunDependency(e){if(runDependencies--,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module["addRunDependency"]=addRunDependency,Module["removeRunDependency"]=removeRunDependency,Module["preloadedImages"]={},Module["preloadedAudios"]={};var memoryInitializer=null,ASM_CONSTS=[function(e,t,i,r){artoolkit["multiEachMarkerInfo"]||(artoolkit["multiEachMarkerInfo"]={});var s=artoolkit["multiEachMarkerInfo"];s["visible"]=e,s["pattId"]=t,s["pattType"]=i,s["width"]=r},function(e,t,i,r,s,a,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T,E,A,P,M,I){var R=arguments,O=12;artoolkit["markerInfo"]||(artoolkit["markerInfo"]={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var $=artoolkit["markerInfo"];$["area"]=e,$["id"]=t,$["idPatt"]=i,$["idMatrix"]=r,$["dir"]=s,$["dirPatt"]=a,$["dirMatrix"]=n,$["cf"]=o,$["cfPatt"]=l,$["cfMatrix"]=c,$["pos"][0]=u,$["pos"][1]=d,$["line"][0][0]=R[O++],$["line"][0][1]=R[O++],$["line"][0][2]=R[O++],$["line"][1][0]=R[O++],$["line"][1][1]=R[O++],$["line"][1][2]=R[O++],$["line"][2][0]=R[O++],$["line"][2][1]=R[O++],$["line"][2][2]=R[O++],$["line"][3][0]=R[O++],$["line"][3][1]=R[O++],$["line"][3][2]=R[O++],$["vertex"][0][0]=R[O++],$["vertex"][0][1]=R[O++],$["vertex"][1][0]=R[O++],$["vertex"][1][1]=R[O++],$["vertex"][2][0]=R[O++],$["vertex"][2][1]=R[O++],$["vertex"][3][0]=R[O++],$["vertex"][3][1]=R[O++],$["errorCorrected"]=R[O++]},function(e,t,i,r,s){artoolkit["frameMalloc"]||(artoolkit["frameMalloc"]={});var a=artoolkit["frameMalloc"];a["framepointer"]=t,a["framesize"]=i,a["camera"]=r,a["transform"]=s}];function _emscripten_asm_const_33(e,t,i,r,s,a,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T,E,A,P,M,I,R){return ASM_CONSTS[e](t,i,r,s,a,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T,E,A,P,M,I,R)}function _emscripten_asm_const_4(e,t,i,r,s){return ASM_CONSTS[e](t,i,r,s)}function _emscripten_asm_const_5(e,t,i,r,s,a){return ASM_CONSTS[e](t,i,r,s,a)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);function copyTempFloat(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3]}function copyTempDouble(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3],HEAP8[tempDoublePtr+4]=HEAP8[e+4],HEAP8[tempDoublePtr+5]=HEAP8[e+5],HEAP8[tempDoublePtr+6]=HEAP8[e+6],HEAP8[tempDoublePtr+7]=HEAP8[e+7]}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}function ___assert_fail(e,t,i,r){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",i,r?Pointer_stringify(r):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}assert(tempDoublePtr%8==0),Module["_i64Subtract"]=_i64Subtract;var embind_charCodes=void 0;function readLatin1String(e){var t="",i=e;while(HEAPU8[i])t+=embind_charCodes[HEAPU8[i++]];return t}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var i=createNamedFunction(t,(function(e){this.name=t,this.message=e;var i=new Error(e).stack;void 0!==i&&(this.stack=this.toString()+"\n"+i.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},i}var BindingError=void 0;function throwBindingError(e){throw new BindingError(e)}var InternalError=void 0;function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,i){function r(t){var r=i(t);r.length!==e.length&&throwInternalError("Mismatched type converter count");for(var s=0;s<e.length;++s)registerType(e[s],r[s])}e.forEach((function(e){typeDependencies[e]=t}));var s=new Array(t.length),a=[],n=0;t.forEach((function(e,t){registeredTypes.hasOwnProperty(e)?s[t]=registeredTypes[e]:(a.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){s[t]=registeredTypes[e],++n,n===a.length&&r(s)})))})),0===a.length&&r(s)}function registerType(e,t,i){if(i=i||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||throwBindingError('type "'+r+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+r+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var s=awaitingDependencies[e];delete awaitingDependencies[e],s.forEach((function(e){e()}))}}function __embind_register_void(e,t){t=readLatin1String(t),registerType(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var i=EXCEPTIONS.infos[t];if(i.adjusted===e)return t}return e},addRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,0===t.refcount&&(t.destructor&&Runtime.dynCall("vi",t.destructor,[e]),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(e)),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return 0|(asm["setTempRet0"](0),0);var t=EXCEPTIONS.infos[e],i=t.type;if(!i)return 0|(asm["setTempRet0"](0),e);var r=Array.prototype.slice.call(arguments);Module["___cxa_is_pointer_type"](i);___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var s=0;s<r.length;s++)if(r[s]&&Module["___cxa_can_catch"](r[s],i,e))return e=HEAP32[e>>2],t.adjusted=e,0|(asm["setTempRet0"](r[s]),e);return e=HEAP32[e>>2],0|(asm["setTempRet0"](i),e)}function ___cxa_throw(e,t,i){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:i,refcount:0},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module["_memset"]=_memset;var _BDtoILow=!0;function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function __embind_register_bool(e,t,i,r,s){var a=getShiftFromSize(i);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:s},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===i)r=HEAP8;else if(2===i)r=HEAP16;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+t);r=HEAP32}return this["fromWireType"](r[e>>a])},destructorFunction:null})}function _abort(){Module["abort"]()}function _free(){}function _malloc(e){var t=Runtime.dynamicAlloc(e+8);return t+8&4294967288}function simpleReadValueFromPointer(e){return this["fromWireType"](HEAPU32[e>>2])}function __embind_register_std_string(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){for(var t=HEAPU32[e>>2],i=new Array(t),r=0;r<t;++r)i[r]=String.fromCharCode(HEAPU8[e+4+r]);return _free(e),i.join("")},toWireType:function(e,t){function i(e,t){return e[t]}function r(e,t){return e.charCodeAt(t)}var s;t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array?s=i:t instanceof Int8Array?s=i:"string"===typeof t?s=r:throwBindingError("Cannot pass non-string to std::string");var a=t.length,n=_malloc(4+a);HEAPU32[n>>2]=a;for(var o=0;o<a;++o){var l=s(t,o);l>255&&(_free(n),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[n+4+o]=l}return null!==e&&e.push(_free,n),n},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,i){var r,s;i=readLatin1String(i),2===t?(r=function(){return HEAPU16},s=1):4===t&&(r=function(){return HEAPU32},s=2),registerType(e,{name:i,fromWireType:function(e){for(var t=r(),i=HEAPU32[e>>2],a=new Array(i),n=e+4>>s,o=0;o<i;++o)a[o]=String.fromCharCode(t[n+o]);return _free(e),a.join("")},toWireType:function(e,i){var a=r(),n=i.length,o=_malloc(4+n*t);HEAPU32[o>>2]=n;for(var l=o+4>>s,c=0;c<n;++c)a[l+c]=i.charCodeAt(c);return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}Module["_bitshift64Shl"]=_bitshift64Shl,Module["_free"]=_free,Module["_malloc"]=_malloc;var _emscripten_asm_const_int=!0;Module["_i64Add"]=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function integerReadValueFromPointer(e,t,i){switch(t){case 0:return i?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return i?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return i?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,i,r,s){t=readLatin1String(t),-1===s&&(s=4294967295);var a=getShiftFromSize(i),n=function(e){return e};if(0===r){var o=32-8*i;n=function(e){return e<<o>>>o}}registerType(e,{name:t,fromWireType:n,toWireType:function(e,i){if("number"!==typeof i&&"boolean"!==typeof i)throw new TypeError('Cannot convert "'+_embind_repr(i)+'" to '+this.name);if(i<r||i>s)throw new TypeError('Passing a number "'+_embind_repr(i)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+s+"]!");return 0|i},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,a,0!==r),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(e){e>4&&0===--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module["count_emval_handles"]=count_emval_handles,Module["get_first_emval"]=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function __embind_register_emval(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(e){return _malloc(e)}var _sin=Math_sin;function ___setErrNo(e){return Module["___errno_location"]&&(HEAP32[Module["___errno_location"]()>>2]=e),e}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(e){switch(e){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"===typeof navigator&&navigator["hardwareConcurrency"]||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}function __exit(e){Module["exit"](e)}function _exit(e){__exit(e)}Module["_bitshift64Lshr"]=_bitshift64Lshr;var _llvm_ctlz_i32=!0;function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this["fromWireType"](HEAPF32[e>>2])};case 3:return function(e){return this["fromWireType"](HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,i){var r=getShiftFromSize(i);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,r),destructorFunction:null})}var _BDtoIHigh=!0;function _pthread_cleanup_push(e,t){__ATEXIT__.push((function(){Runtime.dynCall("vi",e,[t])})),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var i=createNamedFunction(e.name||"unknownFunctionName",(function(){}));i.prototype=e.prototype;var r=new i,s=e.apply(r,t);return s instanceof Object?s:r}function runDestructors(e){while(e.length){var t=e.pop(),i=e.pop();i(t)}}function craftInvokerFunction(e,t,i,r,s){var a=t.length;a<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var n=null!==t[1]&&null!==i,o="",l="",c=0;c<a-2;++c)o+=(0!==c?", ":"")+"arg"+c,l+=(0!==c?", ":"")+"arg"+c+"Wired";var u="return function "+makeLegalFunctionName(e)+"("+o+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n",d=!1;for(c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){d=!0;break}d&&(u+="var destructors = [];\n");var p=d?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[throwBindingError,r,s,runDestructors,t[0],t[1]];n&&(u+="var thisWired = classParam.toWireType("+p+", this);\n");for(c=0;c<a-2;++c)u+="var arg"+c+"Wired = argType"+c+".toWireType("+p+", arg"+c+"); // "+t[c+2].name+"\n",f.push("argType"+c),h.push(t[c+2]);n&&(l="thisWired"+(l.length>0?", ":"")+l);var m="void"!==t[0].name;if(u+=(m?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",d)u+="runDestructors(destructors);\n";else for(c=n?1:2;c<t.length;++c){var b=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(u+=b+"_dtor("+b+"); // "+t[c].name+"\n",f.push(b+"_dtor"),h.push(t[c].destructorFunction))}m&&(u+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),u+="}\n",f.push(u);var g=new_(Function,f).apply(null,h);return g}function ensureOverloadTable(e,t,i){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+i+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function exposePublicSymbol(e,t,i){Module.hasOwnProperty(e)?((void 0===i||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[i])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(i)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+i+")!"),Module[e].overloadTable[i]=t):(Module[e]=t,void 0!==i&&(Module[e].numArguments=i))}function heap32VectorToArray(e,t){for(var i=[],r=0;r<e;r++)i.push(HEAP32[(t>>2)+r]);return i}function replacePublicSymbol(e,t,i){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==i?Module[e].overloadTable[i]=t:Module[e]=t}function requireFunction(e,t){function i(i){for(var r=[],s=1;s<e.length;++s)r.push("a"+s);var a="dynCall_"+e+"_"+t,n="return function "+a+"("+r.join(", ")+") {\n";return n+="    return dynCall(rawFunction"+(r.length?", ":"")+r.join(", ")+");\n",n+="};\n",new Function("dynCall","rawFunction",n)(i,t)}var r;if(e=readLatin1String(e),void 0!==Module["FUNCTION_TABLE_"+e])r=Module["FUNCTION_TABLE_"+e][t];else if("undefined"!==typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var s=asm["dynCall_"+e];void 0===s&&(s=asm["dynCall_"+e.replace(/f/g,"d")],void 0===s&&throwBindingError("No dynCall invoker for signature: "+e)),r=i(s)}return"function"!==typeof r&&throwBindingError("unknown function pointer with signature "+e+": "+t),r}var UnboundTypeError=void 0;function getTypeName(e){var t=___getTypeName(e),i=readLatin1String(t);return _free(t),i}function throwUnboundTypeError(e,t){var i=[],r={};function s(e){r[e]||registeredTypes[e]||(typeDependencies[e]?typeDependencies[e].forEach(s):(i.push(e),r[e]=!0))}throw t.forEach(s),new UnboundTypeError(e+": "+i.map(getTypeName).join([", "]))}function __embind_register_function(e,t,i,r,s,a){var n=heap32VectorToArray(t,i);e=readLatin1String(e),s=requireFunction(r,s),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",n)}),t-1),whenDependentTypesAreResolved([],n,(function(i){var r=[i[0],null].concat(i.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,r,null,s,a),t-1),[]}))}function __embind_register_constant(e,t,i){e=readLatin1String(e),whenDependentTypesAreResolved([],[t],(function(t){return t=t[0],Module[e]=t["fromWireType"](i),[]}))}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var i=0,r=e.length-1;r>=0;r--){var s=e[r];"."===s?e.splice(r,1):".."===s?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i--;i)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),i="/"===e.substr(-1);return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),i=t[0],r=t[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,i=arguments.length-1;i>=-1&&!t;i--){var r=i>=0?arguments[i]:FS.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var i=e.length-1;i>=0;i--)if(""!==e[i])break;return t>i?[]:e.slice(t,i-t+1)}e=PATH.resolve(e).substr(1),t=PATH.resolve(t).substr(1);for(var r=i(e.split("/")),s=i(t.split("/")),a=Math.min(r.length,s.length),n=a,o=0;o<a;o++)if(r[o]!==s[o]){n=o;break}var l=[];for(o=n;o<r.length;o++)l.push("..");return l=l.concat(s.slice(n)),l.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,i,r,s){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var a=0,n=0;n<r;n++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(l){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===o&&0===a)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===o||void 0===o)break;a++,t[i+n]=o}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,i,r,s){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var a=0;a<r;a++)try{e.tty.ops.put_char(e.tty,t[i+a])}catch(n){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var i=256,r=new Buffer(i),s=0,a=process.stdin.fd,n=!1;try{a=fs.openSync("/dev/stdin","r"),n=!0}catch(o){}s=fs.readSync(a,r,0,i,null),n&&fs.closeSync(a),t=s>0?r.slice(0,s).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"));if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,i,r){if(FS.isBlkdev(i)||FS.isFIFO(i))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var s=FS.createNode(e,t,i,r);return FS.isDir(s.mode)?(s.node_ops=MEMFS.ops_table.dir.node,s.stream_ops=MEMFS.ops_table.dir.stream,s.contents={}):FS.isFile(s.mode)?(s.node_ops=MEMFS.ops_table.file.node,s.stream_ops=MEMFS.ops_table.file.stream,s.usedBytes=0,s.contents=null):FS.isLink(s.mode)?(s.node_ops=MEMFS.ops_table.link.node,s.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(s.mode)&&(s.node_ops=MEMFS.ops_table.chrdev.node,s.stream_ops=MEMFS.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s),s},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],i=0;i<e.usedBytes;++i)t.push(e.contents[i]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){if(e.contents&&e.contents.subarray&&t>e.contents.length&&(e.contents=MEMFS.getFileDataAsRegularArray(e),e.usedBytes=e.contents.length),!e.contents||e.contents.subarray){var i=e.contents?e.contents.buffer.byteLength:0;if(i>=t)return;var r=1048576;t=Math.max(t,i*(i<r?2:1.125)|0),0!=i&&(t=Math.max(t,256));var s=e.contents;return e.contents=new Uint8Array(t),void(e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0))}!e.contents&&t>0&&(e.contents=[]);while(e.contents.length<t)e.contents.push(0)},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var i=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),i&&e.contents.set(i.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else while(e.contents.length<t)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(e,t,i,r){return MEMFS.createNode(e,t,i,r)},rename:function(e,t,i){if(FS.isDir(e.mode)){var r;try{r=FS.lookupNode(t,i)}catch(a){}if(r)for(var s in r.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=i,t.contents[i]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var i=FS.lookupNode(e,t);for(var r in i.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var i in e.contents)e.contents.hasOwnProperty(i)&&t.push(i);return t},symlink:function(e,t,i){var r=MEMFS.createNode(e,t,41471,0);return r.link=i,r},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return e.link}},stream_ops:{read:function(e,t,i,r,s){var a=e.node.contents;if(s>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-s,r);if(assert(n>=0),n>8&&a.subarray)t.set(a.subarray(s,s+n),i);else for(var o=0;o<n;o++)t[i+o]=a[s+o];return n},write:function(e,t,i,r,s,a){if(!r)return 0;var n=e.node;if(n.timestamp=Date.now(),t.subarray&&(!n.contents||n.contents.subarray)){if(a)return n.contents=t.subarray(i,i+r),n.usedBytes=r,r;if(0===n.usedBytes&&0===s)return n.contents=new Uint8Array(t.subarray(i,i+r)),n.usedBytes=r,r;if(s+r<=n.usedBytes)return n.contents.set(t.subarray(i,i+r),s),r}if(MEMFS.expandFileStorage(n,s+r),n.contents.subarray&&t.subarray)n.contents.set(t.subarray(i,i+r),s);else for(var o=0;o<r;o++)n.contents[s+o]=t[i+o];return n.usedBytes=Math.max(n.usedBytes,s+r),r},llseek:function(e,t,i){var r=t;if(1===i?r+=e.position:2===i&&FS.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r},allocate:function(e,t,i){MEMFS.expandFileStorage(e.node,t+i),e.node.usedBytes=Math.max(e.node.usedBytes,t+i)},mmap:function(e,t,i,r,s,a,n){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var o,l,c=e.node.contents;if(2&n||c.buffer!==t&&c.buffer!==t.buffer){if((s>0||s+r<e.node.usedBytes)&&(c=c.subarray?c.subarray(s,s+r):Array.prototype.slice.call(c,s,s+r)),l=!0,o=_malloc(r),!o)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);t.set(c,o)}else l=!1,o=c.byteOffset;return{ptr:o,allocated:l}},msync:function(e,t,i,r,s){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(2&s)return 0;MEMFS.stream_ops.write(e,t,0,r,i,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!==typeof indexedDB)return indexedDB;var e=null;return"object"===typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,i){IDBFS.getLocalSet(e,(function(r,s){if(r)return i(r);IDBFS.getRemoteSet(e,(function(e,r){if(e)return i(e);var a=t?r:s,n=t?s:r;IDBFS.reconcile(a,n,i)}))}))},getDB:function(e,t){var i,r=IDBFS.dbs[e];if(r)return t(null,r);try{i=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(s){return t(s)}i.onupgradeneeded=function(e){var t,i=e.target.result,r=e.target.transaction;t=i.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?r.objectStore(IDBFS.DB_STORE_NAME):i.createObjectStore(IDBFS.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},i.onsuccess=function(){r=i.result,IDBFS.dbs[e]=r,t(null,r)},i.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var i={};function r(e){return"."!==e&&".."!==e}function s(e){return function(t){return PATH.join2(e,t)}}var a=FS.readdir(e.mountpoint).filter(r).map(s(e.mountpoint));while(a.length){var n,o=a.pop();try{n=FS.stat(o)}catch(l){return t(l)}FS.isDir(n.mode)&&a.push.apply(a,FS.readdir(o).filter(r).map(s(o))),i[o]={timestamp:n.mtime}}return t(null,{type:"local",entries:i})},getRemoteSet:function(e,t){var i={};IDBFS.getDB(e.mountpoint,(function(e,r){if(e)return t(e);var s=r.transaction([IDBFS.DB_STORE_NAME],"readonly");s.onerror=function(e){t(this.error),e.preventDefault()};var a=s.objectStore(IDBFS.DB_STORE_NAME),n=a.index("timestamp");n.openKeyCursor().onsuccess=function(e){var s=e.target.result;if(!s)return t(null,{type:"remote",db:r,entries:i});i[s.primaryKey]={timestamp:s.key},s.continue()}}))},loadLocalEntry:function(e,t){var i,r;try{var s=FS.lookupPath(e);r=s.node,i=FS.stat(e)}catch(a){return t(a)}return FS.isDir(i.mode)?t(null,{timestamp:i.mtime,mode:i.mode}):FS.isFile(i.mode)?(r.contents=MEMFS.getFileDataAsTypedArray(r),t(null,{timestamp:i.mtime,mode:i.mode,contents:r.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,i){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode);else{if(!FS.isFile(t.mode))return i(new Error("node type not supported"));FS.writeFile(e,t.contents,{encoding:"binary",canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(r){return i(r)}i(null)},removeLocalEntry:function(e,t){try{FS.lookupPath(e);var i=FS.stat(e);FS.isDir(i.mode)?FS.rmdir(e):FS.isFile(i.mode)&&FS.unlink(e)}catch(r){return t(r)}t(null)},loadRemoteEntry:function(e,t,i){var r=e.get(t);r.onsuccess=function(e){i(null,e.target.result)},r.onerror=function(e){i(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,i,r){var s=e.put(i,t);s.onsuccess=function(){r(null)},s.onerror=function(e){r(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,i){var r=e.delete(t);r.onsuccess=function(){i(null)},r.onerror=function(e){i(this.error),e.preventDefault()}},reconcile:function(e,t,i){var r=0,s=[];Object.keys(e.entries).forEach((function(i){var a=e.entries[i],n=t.entries[i];(!n||a.timestamp>n.timestamp)&&(s.push(i),r++)}));var a=[];if(Object.keys(t.entries).forEach((function(i){t.entries[i];var s=e.entries[i];s||(a.push(i),r++)})),!r)return i(null);var n=0,o="remote"===e.type?e.db:t.db,l=o.transaction([IDBFS.DB_STORE_NAME],"readwrite"),c=l.objectStore(IDBFS.DB_STORE_NAME);function u(e){return e?u.errored?void 0:(u.errored=!0,i(e)):++n>=r?i(null):void 0}l.onerror=function(e){u(this.error),e.preventDefault()},s.sort().forEach((function(e){"local"===t.type?IDBFS.loadRemoteEntry(c,e,(function(t,i){if(t)return u(t);IDBFS.storeLocalEntry(e,i,u)})):IDBFS.loadLocalEntry(e,(function(t,i){if(t)return u(t);IDBFS.storeRemoteEntry(c,e,i,u)}))})),a.sort().reverse().forEach((function(e){"local"===t.type?IDBFS.removeLocalEntry(e,u):IDBFS.removeRemoteEntry(c,e,u)}))}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(e){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,i,r){if(!FS.isDir(i)&&!FS.isFile(i)&&!FS.isLink(i))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var s=FS.createNode(e,t,i);return s.node_ops=NODEFS.node_ops,s.stream_ops=NODEFS.stream_ops,s},getMode:function(e){var t;try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(146&t.mode)>>1)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}return t.mode},realPath:function(e){var t=[];while(e.parent!==e)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(e){if(e&=-32769,e in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[e];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(e){var t,i=NODEFS.realPath(e);try{t=fs.lstatSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var i=NODEFS.realPath(e);try{if(void 0!==t.mode&&(fs.chmodSync(i,t.mode),e.mode=t.mode),void 0!==t.timestamp){var r=new Date(t.timestamp);fs.utimesSync(i,r,r)}void 0!==t.size&&fs.truncateSync(i,t.size)}catch(s){if(!s.code)throw s;throw new FS.ErrnoError(ERRNO_CODES[s.code])}},lookup:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t),r=NODEFS.getMode(i);return NODEFS.createNode(e,t,r)},mknod:function(e,t,i,r){var s=NODEFS.createNode(e,t,i,r),a=NODEFS.realPath(s);try{FS.isDir(s.mode)?fs.mkdirSync(a,s.mode):fs.writeFileSync(a,"",{mode:s.mode})}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}return s},rename:function(e,t,i){var r=NODEFS.realPath(e),s=PATH.join2(NODEFS.realPath(t),i);try{fs.renameSync(r,s)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}},unlink:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t);try{fs.unlinkSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},rmdir:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t);try{fs.rmdirSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},readdir:function(e){var t=NODEFS.realPath(e);try{return fs.readdirSync(t)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},symlink:function(e,t,i){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.symlinkSync(i,r)}catch(s){if(!s.code)throw s;throw new FS.ErrnoError(ERRNO_CODES[s.code])}},readlink:function(e){var t=NODEFS.realPath(e);try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t),t}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node);try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsToPermissionString(e.flags)))}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(t){if(!t.code)throw t;throw new FS.ErrnoError(ERRNO_CODES[t.code])}},read:function(e,t,i,r,s){if(0===r)return 0;var a,n=new Buffer(r);try{a=fs.readSync(e.nfd,n,0,r,s)}catch(l){throw new FS.ErrnoError(ERRNO_CODES[l.code])}if(a>0)for(var o=0;o<a;o++)t[i+o]=n[o];return a},write:function(e,t,i,r,s){var a,n=new Buffer(t.subarray(i,i+r));try{a=fs.writeSync(e.nfd,n,0,r,s)}catch(o){throw new FS.ErrnoError(ERRNO_CODES[o.code])}return a},llseek:function(e,t,i){var r=t;if(1===i)r+=e.position;else if(2===i&&FS.isFile(e.node.mode))try{var s=fs.fstatSync(e.nfd);r+=s.size}catch(a){throw new FS.ErrnoError(ERRNO_CODES[a.code])}if(r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var t=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),i={};function r(e){for(var r=e.split("/"),s=t,a=0;a<r.length-1;a++){var n=r.slice(0,a+1).join("/");i[n]||(i[n]=WORKERFS.createNode(s,n,WORKERFS.DIR_MODE,0)),s=i[n]}return s}function s(e){var t=e.split("/");return t[t.length-1]}return Array.prototype.forEach.call(e.opts["files"]||[],(function(e){WORKERFS.createNode(r(e.name),s(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)})),(e.opts["blobs"]||[]).forEach((function(e){WORKERFS.createNode(r(e["name"]),s(e["name"]),WORKERFS.FILE_MODE,0,e["data"])})),(e.opts["packages"]||[]).forEach((function(e){e["metadata"].files.forEach((function(t){var i=t.filename.substr(1);WORKERFS.createNode(r(i),s(i),WORKERFS.FILE_MODE,0,e["blob"].slice(t.start,t.end))}))})),t},createNode:function(e,t,i,r,s,a){var n=FS.createNode(e,t,i);return n.mode=i,n.node_ops=WORKERFS.node_ops,n.stream_ops=WORKERFS.stream_ops,n.timestamp=(a||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),i===WORKERFS.FILE_MODE?(n.size=s.size,n.contents=s):(n.size=4096,n.contents={}),e&&(e.contents[t]=n),n},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(e,t,i,r){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(e,t,i){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(e,t,i){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(e,t,i,r,s){if(s>=e.node.size)return 0;var a=e.node.contents.slice(s,s+r),n=WORKERFS.reader.readAsArrayBuffer(a);return t.set(new Uint8Array(n),i),a.size},write:function(e,t,i,r,s){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(e,t,i){var r=t;if(1===i?r+=e.position:2===i&&FS.isFile(e.node.mode)&&(r+=e.node.size),r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r}}},_stdin=allocate(1,"i32*",ALLOC_STATIC),_stdout=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC),FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(e=PATH.resolve(FS.cwd(),e),t=t||{},!e)return{path:"",node:null};var i={follow_mount:!0,recurse_count:0};for(var r in i)void 0===t[r]&&(t[r]=i[r]);if(t.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var s=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),a=FS.root,n="/",o=0;o<s.length;o++){var l=o===s.length-1;if(l&&t.parent)break;if(a=FS.lookupNode(a,s[o]),n=PATH.join2(n,s[o]),FS.isMountpoint(a)&&(!l||l&&t.follow_mount)&&(a=a.mounted.root),!l||t.follow){var c=0;while(FS.isLink(a.mode)){var u=FS.readlink(n);n=PATH.resolve(PATH.dirname(n),u);var d=FS.lookupPath(n,{recurse_count:t.recurse_count});if(a=d.node,c++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}}return{path:n,node:a}},getPath:function(e){var t;while(1){if(FS.isRoot(e)){var i=e.mount.mountpoint;return t?"/"!==i[i.length-1]?i+"/"+t:i+t:i}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var i=0,r=0;r<t.length;r++)i=(i<<5)-i+t.charCodeAt(r)|0;return(e+i>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else{var i=FS.nameTable[t];while(i){if(i.name_next===e){i.name_next=e.name_next;break}i=i.name_next}}},lookupNode:function(e,t){var i=FS.mayLookup(e);if(i)throw new FS.ErrnoError(i,e);for(var r=FS.hashName(e.id,t),s=FS.nameTable[r];s;s=s.name_next){var a=s.name;if(s.parent.id===e.id&&a===t)return s}return FS.lookup(e,t)},createNode:function(e,t,i,r){if(!FS.FSNode){FS.FSNode=function(e,t,i,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=i,this.node_ops={},this.stream_ops={},this.rdev=r},FS.FSNode.prototype={};var s=365,a=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&s)===s},set:function(e){e?this.mode|=s:this.mode&=~s}},write:{get:function(){return(this.mode&a)===a},set:function(e){e?this.mode|=a:this.mode&=~a}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var n=new FS.FSNode(e,t,i,r);return FS.hashAddNode(n),n},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:ERRNO_CODES.EACCES},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function(e,t){try{FS.lookupNode(e,t);return ERRNO_CODES.EEXIST}catch(i){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,i){var r;try{r=FS.lookupNode(e,t)}catch(a){return a.errno}var s=FS.nodePermissions(e,"wx");if(s)return s;if(i){if(!FS.isDir(r.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(r)||FS.getPath(r)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(r.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?ERRNO_CODES.ELOOP:FS.isDir(e.mode)&&(0!==(2097155&t)||512&t)?ERRNO_CODES.EISDIR:FS.nodePermissions(e,FS.flagsToPermissionString(t)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var i=e;i<=t;i++)if(!FS.streams[i])return i;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,i){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var r=new FS.FSStream;for(var s in e)r[s]=e[s];e=r;var a=FS.nextfd(t,i);return e.fd=a,FS.streams[a]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){var t=[],i=[e];while(i.length){var r=i.pop();t.push(r),i.push.apply(i,r.mounts)}return t},syncfs:function(e,t){"function"===typeof e&&(t=e,e=!1);var i=FS.getMounts(FS.root.mount),r=0;function s(e){if(e)return s.errored?void 0:(s.errored=!0,t(e));++r>=i.length&&t(null)}i.forEach((function(t){if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)}))},mount:function(e,t,i){var r,s="/"===i,a=!i;if(s&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!s&&!a){var n=FS.lookupPath(i,{follow_mount:!1});if(i=n.path,r=n.node,FS.isMountpoint(r))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(r.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var o={type:e,opts:t,mountpoint:i,mounts:[]},l=e.mount(o);return l.mount=o,o.root=l,s?FS.root=l:r&&(r.mounted=o,r.mount&&r.mount.mounts.push(o)),l},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i=t.node,r=i.mounted,s=FS.getMounts(r);Object.keys(FS.nameTable).forEach((function(e){var t=FS.nameTable[e];while(t){var i=t.name_next;-1!==s.indexOf(t.mount)&&FS.destroyNode(t),t=i}})),i.mounted=null;var a=i.mount.mounts.indexOf(r);assert(-1!==a),i.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,i){var r=FS.lookupPath(e,{parent:!0}),s=r.node,a=PATH.basename(e);if(!a||"."===a||".."===a)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var n=FS.mayCreate(s,a);if(n)throw new FS.ErrnoError(n);if(!s.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return s.node_ops.mknod(s,a,t,i)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdev:function(e,t,i){return"undefined"===typeof i&&(i=t,t=438),t|=8192,FS.mknod(e,t,i)},symlink:function(e,t){if(!PATH.resolve(e))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var i=FS.lookupPath(t,{parent:!0}),r=i.node;if(!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var s=PATH.basename(t),a=FS.mayCreate(r,s);if(a)throw new FS.ErrnoError(a);if(!r.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return r.node_ops.symlink(r,s,e)},rename:function(e,t){var i,r,s,a=PATH.dirname(e),n=PATH.dirname(t),o=PATH.basename(e),l=PATH.basename(t);try{i=FS.lookupPath(e,{parent:!0}),r=i.node,i=FS.lookupPath(t,{parent:!0}),s=i.node}catch(h){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!r||!s)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(r.mount!==s.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var c,u=FS.lookupNode(r,o),d=PATH.relative(e,n);if("."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(d=PATH.relative(t,a),"."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);try{c=FS.lookupNode(s,l)}catch(h){}if(u!==c){var p=FS.isDir(u.mode),f=FS.mayDelete(r,o,p);if(f)throw new FS.ErrnoError(f);if(f=c?FS.mayDelete(s,l,p):FS.mayCreate(s,l),f)throw new FS.ErrnoError(f);if(!r.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(u)||c&&FS.isMountpoint(c))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(s!==r&&(f=FS.nodePermissions(r,"w"),f))throw new FS.ErrnoError(f);try{FS.trackingDelegate["willMovePath"]&&FS.trackingDelegate["willMovePath"](e,t)}catch(h){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+h.message)}FS.hashRemoveNode(u);try{r.node_ops.rename(u,s,l)}catch(h){throw h}finally{FS.hashAddNode(u)}try{FS.trackingDelegate["onMovePath"]&&FS.trackingDelegate["onMovePath"](e,t)}catch(h){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+h.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}),i=t.node,r=PATH.basename(e),s=FS.lookupNode(i,r),a=FS.mayDelete(i,r,!0);if(a)throw new FS.ErrnoError(a);if(!i.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(s))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}i.node_ops.rmdir(i,r),FS.destroyNode(s);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}),i=t.node;if(!i.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return i.node_ops.readdir(i)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}),i=t.node,r=PATH.basename(e),s=FS.lookupNode(i,r),a=FS.mayDelete(i,r,!1);if(a)throw a===ERRNO_CODES.EISDIR&&(a=ERRNO_CODES.EPERM),new FS.ErrnoError(a);if(!i.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(s))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}i.node_ops.unlink(i,r),FS.destroyNode(s);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readlink:function(e){var t=FS.lookupPath(e),i=t.node;if(!i)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!i.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(i.parent),i.node_ops.readlink(i))},stat:function(e,t){var i=FS.lookupPath(e,{follow:!t}),r=i.node;if(!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!r.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return r.node_ops.getattr(r)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,i){var r;if("string"===typeof e){var s=FS.lookupPath(e,{follow:!i});r=s.node}else r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(i.node,t)},chown:function(e,t,i,r){var s;if("string"===typeof e){var a=FS.lookupPath(e,{follow:!r});s=a.node}else s=e;if(!s.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:function(e,t,i){FS.chown(e,t,i,!0)},fchown:function(e,t,i){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(r.node,t,i)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i;if("string"===typeof e){var r=FS.lookupPath(e,{follow:!0});i=r.node}else i=e;if(!i.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(i.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(i.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var s=FS.nodePermissions(i,"w");if(s)throw new FS.ErrnoError(s);i.node_ops.setattr(i,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(2097155&i.flags))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(i.node,t)},utime:function(e,t,i){var r=FS.lookupPath(e,{follow:!0}),s=r.node;s.node_ops.setattr(s,{timestamp:Math.max(t,i)})},open:function(e,t,i,r,s){if(""===e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var a;if(t="string"===typeof t?FS.modeStringToFlags(t):t,i="undefined"===typeof i?438:i,i=64&t?4095&i|32768:0,"object"===typeof e)a=e;else{e=PATH.normalize(e);try{var n=FS.lookupPath(e,{follow:!(131072&t)});a=n.node}catch(d){}}var o=!1;if(64&t)if(a){if(128&t)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else a=FS.mknod(e,i,0),o=!0;if(!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(a.mode)&&(t&=-513),65536&t&&!FS.isDir(a.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!o){var l=FS.mayOpen(a,t);if(l)throw new FS.ErrnoError(l)}512&t&&FS.truncate(a,0),t&=-641;var c=FS.createStream({node:a,path:FS.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},r,s);c.stream_ops.open&&c.stream_ops.open(c),!Module["logReadFiles"]||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,Module["printErr"]("read file: "+e)));try{if(FS.trackingDelegate["onOpenFile"]){var u=0;1!==(2097155&t)&&(u|=FS.tracking.openFlags.READ),0!==(2097155&t)&&(u|=FS.tracking.openFlags.WRITE),FS.trackingDelegate["onOpenFile"](e,u)}}catch(d){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+d.message)}return c},close:function(e){e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{FS.closeStream(e.fd)}},llseek:function(e,t,i){if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return e.position=e.stream_ops.llseek(e,t,i),e.ungotten=[],e.position},read:function(e,t,i,r,s){if(r<0||s<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var a=!0;if("undefined"===typeof s)s=e.position,a=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var n=e.stream_ops.read(e,t,i,r,s);return a||(e.position+=n),n},write:function(e,t,i,r,s,a){if(r<0||s<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);1024&e.flags&&FS.llseek(e,0,2);var n=!0;if("undefined"===typeof s)s=e.position,n=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var o=e.stream_ops.write(e,t,i,r,s,a);n||(e.position+=o);try{e.path&&FS.trackingDelegate["onWriteToFile"]&&FS.trackingDelegate["onWriteToFile"](e.path)}catch(l){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+l.message)}return o},allocate:function(e,t,i){if(t<0||i<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(e.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!e.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);e.stream_ops.allocate(e,t,i)},mmap:function(e,t,i,r,s,a,n){if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!e.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return e.stream_ops.mmap(e,t,i,r,s,a,n)},msync:function(e,t,i,r,s){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,i,r,s):0},munmap:function(e){return 0},ioctl:function(e,t,i){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return e.stream_ops.ioctl(e,t,i)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var i,r=FS.open(e,t.flags),s=FS.stat(e),a=s.size,n=new Uint8Array(a);return FS.read(r,n,0,a,0),"utf8"===t.encoding?i=UTF8ArrayToString(n,0):"binary"===t.encoding&&(i=n),FS.close(r),i},writeFile:function(e,t,i){if(i=i||{},i.flags=i.flags||"w",i.encoding=i.encoding||"utf8","utf8"!==i.encoding&&"binary"!==i.encoding)throw new Error('Invalid encoding type "'+i.encoding+'"');var r=FS.open(e,i.flags,i.mode);if("utf8"===i.encoding){var s=new Uint8Array(lengthBytesUTF8(t)+1),a=stringToUTF8Array(t,s,0,s.length);FS.write(r,s,0,a,0,i.canOwn)}else"binary"===i.encoding&&FS.write(r,t,0,t.length,0,i.canOwn);FS.close(r)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var i=FS.nodePermissions(t.node,"x");if(i)throw new FS.ErrnoError(i);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,i,r,s){return r}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0)),"undefined"!==typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=ENVIRONMENT_IS_NODE?function(){return __webpack_require__("1c46").randomBytes(1)[0]}:function(){return 256*Math.random()|0};FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var i=+t,r=FS.getStream(i);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return s.parent=s,s}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module["stdin"]?FS.createDevice("/dev","stdin",Module["stdin"]):FS.symlink("/dev/tty","/dev/stdin"),Module["stdout"]?FS.createDevice("/dev","stdout",null,Module["stdout"]):FS.symlink("/dev/tty","/dev/stdout"),Module["stderr"]?FS.createDevice("/dev","stderr",null,Module["stderr"]):FS.symlink("/dev/tty1","/dev/stderr");var e=FS.open("/dev/stdin","r");assert(0===e.fd,"invalid handle for stdin ("+e.fd+")");var t=FS.open("/dev/stdout","w");assert(1===t.fd,"invalid handle for stdout ("+t.fd+")");var i=FS.open("/dev/stderr","w");assert(2===i.fd,"invalid handle for stderr ("+i.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,ERRNO_CODES)if(ERRNO_CODES[t]===e){this.code=t;break}},this.setErrno(e),this.message=ERRNO_MESSAGES[e]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,i){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module["stdin"]=e||Module["stdin"],Module["stdout"]=t||Module["stdout"],Module["stderr"]=i||Module["stderr"],FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module["_fflush"];e&&e(0);for(var t=0;t<FS.streams.length;t++){var i=FS.streams[t];i&&FS.close(i)}},getMode:function(e,t){var i=0;return e&&(i|=365),t&&(i|=146),i},joinPath:function(e,t){var i=PATH.join.apply(null,e);return t&&"/"==i[0]&&(i=i.substr(1)),i},absolutePath:function(e,t){return PATH.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var i=FS.analyzePath(e,t);return i.exists?i.object:(___setErrNo(i.error),null)},analyzePath:function(e,t){try{var i=FS.lookupPath(e,{follow:!t});e=i.path}catch(s){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{i=FS.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=PATH.basename(e),i=FS.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(s){r.error=s.errno}return r},createFolder:function(e,t,i,r){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t),a=FS.getMode(i,r);return FS.mkdir(s,a)},createPath:function(e,t,i,r){e="string"===typeof e?e:FS.getPath(e);var s=t.split("/").reverse();while(s.length){var a=s.pop();if(a){var n=PATH.join2(e,a);try{FS.mkdir(n)}catch(o){}e=n}}return n},createFile:function(e,t,i,r,s){var a=PATH.join2("string"===typeof e?e:FS.getPath(e),t),n=FS.getMode(r,s);return FS.create(a,n)},createDataFile:function(e,t,i,r,s,a){var n=t?PATH.join2("string"===typeof e?e:FS.getPath(e),t):e,o=FS.getMode(r,s),l=FS.create(n,o);if(i){if("string"===typeof i){for(var c=new Array(i.length),u=0,d=i.length;u<d;++u)c[u]=i.charCodeAt(u);i=c}FS.chmod(l,146|o);var p=FS.open(l,"w");FS.write(p,i,0,i.length,0,a),FS.close(p),FS.chmod(l,o)}return l},createDevice:function(e,t,i,r){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t),a=FS.getMode(!!i,!!r);FS.createDevice.major||(FS.createDevice.major=64);var n=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(n,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,s,a){for(var n=0,o=0;o<s;o++){var l;try{l=i()}catch(c){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===l&&0===n)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===l||void 0===l)break;n++,t[r+o]=l}return n&&(e.node.timestamp=Date.now()),n},write:function(e,t,i,s,a){for(var n=0;n<s;n++)try{r(t[i+n])}catch(o){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return s&&(e.node.timestamp=Date.now()),n}}),FS.mkdev(s,a,n)},createLink:function(e,t,i,r,s){var a=PATH.join2("string"===typeof e?e:FS.getPath(e),t);return FS.symlink(i,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Module["read"])throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(Module["read"](e.url),!0),e.usedBytes=e.contents.length}catch(i){t=!1}return t||___setErrNo(ERRNO_CODES.EIO),t},createLazyFile:function(e,t,i,r,s){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,i=e/this.chunkSize|0;return this.getter(i)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",i,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+i+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),s=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=1048576;s||(a=r);var n=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var s=new XMLHttpRequest;if(s.open("GET",i,!1),r!==a&&s.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(s.responseType="arraybuffer"),s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.send(null),!(s.status>=200&&s.status<300||304===s.status))throw new Error("Couldn't load "+i+". Status: "+s.status);return void 0!==s.response?new Uint8Array(s.response||[]):intArrayFromString(s.responseText||"",!0)},o=this;o.setDataGetter((function(e){var t=e*a,i=(e+1)*a-1;if(i=Math.min(i,r-1),"undefined"===typeof o.chunks[e]&&(o.chunks[e]=n(t,i)),"undefined"===typeof o.chunks[e])throw new Error("doXHR failed!");return o.chunks[e]})),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var n=new a;Object.defineProperty(n,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(n,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var o={isDevice:!1,contents:n}}else o={isDevice:!1,url:i};var l=FS.createFile(e,t,o,r,s);o.contents?l.contents=o.contents:o.url&&(l.contents=null,l.url=o.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.contents.length}});var c={},u=Object.keys(l.stream_ops);return u.forEach((function(e){var t=l.stream_ops[e];c[e]=function(){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);return t.apply(null,arguments)}})),c.read=function(e,t,i,r,s){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);var a=e.node.contents;if(s>=a.length)return 0;var n=Math.min(a.length-s,r);if(assert(n>=0),a.slice)for(var o=0;o<n;o++)t[i+o]=a[s+o];else for(o=0;o<n;o++)t[i+o]=a.get(s+o);return n},l.stream_ops=c,l},createPreloadedFile:function(e,t,i,r,s,a,n,o,l,c){Browser.init();var u=t?PATH.resolve(PATH.join2(e,t)):e,d=getUniqueRunDependency("cp "+u);function p(i){function p(i){c&&c(),o||FS.createDataFile(e,t,i,r,s,l),a&&a(),removeRunDependency(d)}var f=!1;Module["preloadPlugins"].forEach((function(e){f||e["canHandle"](u)&&(e["handle"](i,u,p,(function(){n&&n(),removeRunDependency(d)})),f=!0)})),f||p(i)}addRunDependency(d),"string"==typeof i?Browser.asyncLoad(i,(function(e){p(e)}),n):p(i)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,i){t=t||function(){},i=i||function(){};var r=FS.indexedDB();try{var s=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(a){return i(a)}s.onupgradeneeded=function(){console.log("creating db");var e=s.result;e.createObjectStore(FS.DB_STORE_NAME)},s.onsuccess=function(){var r=s.result,a=r.transaction([FS.DB_STORE_NAME],"readwrite"),n=a.objectStore(FS.DB_STORE_NAME),o=0,l=0,c=e.length;function u(){0==l?t():i()}e.forEach((function(e){var t=n.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){o++,o+l==c&&u()},t.onerror=function(){l++,o+l==c&&u()}})),a.onerror=i},s.onerror=i},loadFilesFromDB:function(e,t,i){t=t||function(){},i=i||function(){};var r=FS.indexedDB();try{var s=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(a){return i(a)}s.onupgradeneeded=i,s.onsuccess=function(){var r=s.result;try{var n=r.transaction([FS.DB_STORE_NAME],"readonly")}catch(a){return void i(a)}var o=n.objectStore(FS.DB_STORE_NAME),l=0,c=0,u=e.length;function d(){0==c?t():i()}e.forEach((function(e){var t=o.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),l++,l+c==u&&d()},t.onerror=function(){c++,l+c==u&&d()}})),n.onerror=i},s.onerror=i}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var i;if(-100===e)i=FS.cwd();else{var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);i=r.path}t=PATH.join2(i,t)}return t},doStat:function(e,t,i){try{var r=e(t)}catch(s){if(s&&s.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(s.node)))return-ERRNO_CODES.ENOTDIR;throw s}return HEAP32[i>>2]=r.dev,HEAP32[i+4>>2]=0,HEAP32[i+8>>2]=r.ino,HEAP32[i+12>>2]=r.mode,HEAP32[i+16>>2]=r.nlink,HEAP32[i+20>>2]=r.uid,HEAP32[i+24>>2]=r.gid,HEAP32[i+28>>2]=r.rdev,HEAP32[i+32>>2]=0,HEAP32[i+36>>2]=r.size,HEAP32[i+40>>2]=4096,HEAP32[i+44>>2]=r.blocks,HEAP32[i+48>>2]=r.atime.getTime()/1e3|0,HEAP32[i+52>>2]=0,HEAP32[i+56>>2]=r.mtime.getTime()/1e3|0,HEAP32[i+60>>2]=0,HEAP32[i+64>>2]=r.ctime.getTime()/1e3|0,HEAP32[i+68>>2]=0,HEAP32[i+72>>2]=r.ino,0},doMsync:function(e,t,i,r){var s=new Uint8Array(HEAPU8.subarray(e,e+i));FS.msync(t,s,0,i,r)},doMkdir:function(e,t){return e=PATH.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,i){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod(e,t,i),0},doReadlink:function(e,t,i){if(i<=0)return-ERRNO_CODES.EINVAL;var r=FS.readlink(e);return r=r.slice(0,Math.max(0,i)),writeStringToMemory(r,t,!0),r.length},doAccess:function(e,t){if(-8&t)return-ERRNO_CODES.EINVAL;var i,r=FS.lookupPath(e,{follow:!0});i=r.node;var s="";return 4&t&&(s+="r"),2&t&&(s+="w"),1&t&&(s+="x"),s&&FS.nodePermissions(i,s)?-ERRNO_CODES.EACCES:0},doDup:function(e,t,i){var r=FS.getStream(i);return r&&FS.close(r),FS.open(e,t,0,i,i).fd},doReadv:function(e,t,i,r){for(var s=0,a=0;a<i;a++){var n=HEAP32[t+8*a>>2],o=HEAP32[t+(8*a+4)>>2],l=FS.read(e,HEAP8,n,o,r);if(l<0)return-1;if(s+=l,l<o)break}return s},doWritev:function(e,t,i,r){for(var s=0,a=0;a<i;a++){var n=HEAP32[t+8*a>>2],o=HEAP32[t+(8*a+4)>>2],l=FS.write(e,HEAP8,n,o,r);if(l<0)return-1;s+=l}return s},varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},getStreamFromFD:function(){var e=FS.getStream(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketAddress:function(e){var t=SYSCALLS.get(),i=SYSCALLS.get();if(e&&0===t)return null;var r=__read_sockaddr(t,i);if(r.errno)throw new FS.ErrnoError(r.errno);return r.addr=DNS.lookup_addr(r.addr)||r.addr,r},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return assert(e>=0?0===t:-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}};function ___syscall5(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStr(),r=SYSCALLS.get(),s=SYSCALLS.get(),a=FS.open(i,r,s);return a.fd}catch(n){return"undefined"!==typeof FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function _emscripten_memcpy_big(e,t,i){return HEAPU8.set(HEAPU8.subarray(t,t+i),e),e}function ___syscall6(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD();return FS.close(i),0}catch(r){return"undefined"!==typeof FS&&r instanceof FS.ErrnoError||abort(r),-r.errno}}Module["_memcpy"]=_memcpy;var _cos=Math_cos;function _sbrk(e){var t=_sbrk;t.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),t.called=!0,assert(Runtime.dynamicAlloc),t.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var i=DYNAMICTOP;if(0!=e){var r=t.alloc(e);if(!r)return-1>>>0}return i}var _BItoD=!0;function ___syscall54(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get();switch(r){case 21505:return i.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return i.tty?0:-ERRNO_CODES.ENOTTY;case 21519:if(!i.tty)return-ERRNO_CODES.ENOTTY;var s=SYSCALLS.get();return HEAP32[s>>2]=0,0;case 21520:return i.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:s=SYSCALLS.get();return FS.ioctl(i,r,s);default:abort("bad ioctl syscall "+r)}}catch(a){return"undefined"!==typeof FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view(e,t,i){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=r[t];function a(e){e>>=2;var t=HEAPU32,i=t[e],r=t[e+1];return new s(t["buffer"],r,i)}i=readLatin1String(i),registerType(e,{name:i,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function _pthread_self(){return 0}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),s=SYSCALLS.get(),a=SYSCALLS.get(),n=SYSCALLS.get(),o=s;return assert(0===r),FS.llseek(i,o,n),HEAP32[a>>2]=i.position,i.getdents&&0===o&&0===n&&(i.getdents=null),0}catch(l){return"undefined"!==typeof FS&&l instanceof FS.ErrnoError||abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),s=SYSCALLS.get();return SYSCALLS.doWritev(i,r,s)}catch(a){return"undefined"!==typeof FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}function ___syscall221(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get();switch(r){case 0:var s,a=SYSCALLS.get();return a<0?-ERRNO_CODES.EINVAL:(s=FS.open(i.path,i.flags,0,a),s.fd);case 1:case 2:return 0;case 3:return i.flags;case 4:a=SYSCALLS.get();return i.flags|=a,0;case 12:case 12:a=SYSCALLS.get();var n=0;return HEAP16[a+n>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(o){return"undefined"!==typeof FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall145(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),s=SYSCALLS.get();return SYSCALLS.doReadv(i,r,s)}catch(a){return"undefined"!==typeof FS&&a instanceof FS.ErrnoError||abort(a),-a.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module["BindingError"]=extendError(Error,"BindingError"),InternalError=Module["InternalError"]=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module["UnboundTypeError"]=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift((function(){Module["noFSInit"]||FS.init.initialized||FS.init()})),__ATMAIN__.push((function(){FS.ignorePermissions=!1})),__ATEXIT__.push((function(){FS.quit()})),Module["FS_createFolder"]=FS.createFolder,Module["FS_createPath"]=FS.createPath,Module["FS_createDataFile"]=FS.createDataFile,Module["FS_createPreloadedFile"]=FS.createPreloadedFile,Module["FS_createLazyFile"]=FS.createLazyFile,Module["FS_createLink"]=FS.createLink,Module["FS_createDevice"]=FS.createDevice,Module["FS_unlink"]=FS.unlink,__ATINIT__.unshift((function(){TTY.init()})),__ATEXIT__.push((function(){TTY.shutdown()})),ENVIRONMENT_IS_NODE){var fs=__webpack_require__("ab21"),NODEJS_PATH=__webpack_require__("7a44");NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(e,t,i,r){try{return Module["dynCall_iiii"](e,t,i,r)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}function invoke_viiiii(e,t,i,r,s,a){try{Module["dynCall_viiiii"](e,t,i,r,s,a)}catch(n){if("number"!==typeof n&&"longjmp"!==n)throw n;asm["setThrew"](1,0)}}function invoke_dii(e,t,i){try{return Module["dynCall_dii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_vid(e,t,i){try{Module["dynCall_vid"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_di(e,t){try{return Module["dynCall_di"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_i(e){try{return Module["dynCall_i"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_vi(e,t){try{Module["dynCall_vi"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_vii(e,t,i){try{Module["dynCall_vii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_ii(e,t){try{return Module["dynCall_ii"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_viii(e,t,i,r){try{Module["dynCall_viii"](e,t,i,r)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}function invoke_v(e){try{Module["dynCall_v"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_viid(e,t,i,r){try{Module["dynCall_viid"](e,t,i,r)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}function invoke_iiiii(e,t,i,r,s){try{return Module["dynCall_iiiii"](e,t,i,r,s)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_viiiiii(e,t,i,r,s,a,n){try{Module["dynCall_viiiiii"](e,t,i,r,s,a,n)}catch(o){if("number"!==typeof o&&"longjmp"!==o)throw o;asm["setThrew"](1,0)}}function invoke_iii(e,t,i){try{return Module["dynCall_iii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_viiii(e,t,i,r,s){try{Module["dynCall_viiii"](e,t,i,r,s)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort:abort,assert:assert,invoke_iiii:invoke_iiii,invoke_viiiii:invoke_viiiii,invoke_dii:invoke_dii,invoke_vid:invoke_vid,invoke_di:invoke_di,invoke_i:invoke_i,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_ii:invoke_ii,invoke_viii:invoke_viii,invoke_v:invoke_v,invoke_viid:invoke_viid,invoke_iiiii:invoke_iiiii,invoke_viiiiii:invoke_viiiiii,invoke_iii:invoke_iii,invoke_viiii:invoke_viiii,_fabs:_fabs,___syscall221:___syscall221,_sin:_sin,floatReadValueFromPointer:floatReadValueFromPointer,simpleReadValueFromPointer:simpleReadValueFromPointer,integerReadValueFromPointer:integerReadValueFromPointer,__embind_register_memory_view:__embind_register_memory_view,throwInternalError:throwInternalError,get_first_emval:get_first_emval,_abort:_abort,count_emval_handles:count_emval_handles,_pthread_cleanup_push:_pthread_cleanup_push,__embind_register_integer:__embind_register_integer,extendError:extendError,___assert_fail:___assert_fail,init_emval:init_emval,__embind_register_void:__embind_register_void,___cxa_find_matching_catch:___cxa_find_matching_catch,_ceilf:_ceilf,getShiftFromSize:getShiftFromSize,__embind_register_function:__embind_register_function,embind_init_charCodes:embind_init_charCodes,_emscripten_asm_const_33:_emscripten_asm_const_33,throwBindingError:throwBindingError,___setErrNo:___setErrNo,__emval_register:__emval_register,_sbrk:_sbrk,readLatin1String:readLatin1String,___cxa_allocate_exception:___cxa_allocate_exception,_emscripten_memcpy_big:_emscripten_memcpy_big,__embind_register_bool:__embind_register_bool,___resumeException:___resumeException,__ZSt18uncaught_exceptionv:__ZSt18uncaught_exceptionv,_sysconf:_sysconf,_embind_repr:_embind_repr,__embind_register_std_wstring:__embind_register_std_wstring,createNamedFunction:createNamedFunction,__embind_register_emval:__embind_register_emval,_cos:_cos,throwUnboundTypeError:throwUnboundTypeError,_pthread_self:_pthread_self,craftInvokerFunction:craftInvokerFunction,__emval_decref:__emval_decref,_sqrt:_sqrt,__embind_register_float:__embind_register_float,makeLegalFunctionName:makeLegalFunctionName,___syscall54:___syscall54,___unlock:___unlock,heap32VectorToArray:heap32VectorToArray,_pthread_cleanup_pop:_pthread_cleanup_pop,whenDependentTypesAreResolved:whenDependentTypesAreResolved,_exit:_exit,__embind_register_std_string:__embind_register_std_string,new_:new_,___cxa_atexit:___cxa_atexit,registerType:registerType,___cxa_throw:___cxa_throw,__exit:__exit,___lock:___lock,___syscall6:___syscall6,___syscall5:___syscall5,ensureOverloadTable:ensureOverloadTable,__embind_register_constant:__embind_register_constant,_time:_time,requireFunction:requireFunction,runDestructors:runDestructors,getTypeName:getTypeName,_atexit:_atexit,___syscall140:___syscall140,exposePublicSymbol:exposePublicSymbol,_emscripten_asm_const_5:_emscripten_asm_const_5,_emscripten_asm_const_4:_emscripten_asm_const_4,replacePublicSymbol:replacePublicSymbol,___syscall145:___syscall145,___syscall146:___syscall146,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,tempDoublePtr:tempDoublePtr,ABORT:ABORT,cttz_i8:cttz_i8,___dso_handle:___dso_handle};var asm=function(e,t,i){"use asm";var r=new e.Int8Array(i);var s=new e.Int16Array(i);var a=new e.Int32Array(i);var n=new e.Uint8Array(i);var o=new e.Uint16Array(i);var l=new e.Uint32Array(i);var c=new e.Float32Array(i);var u=new e.Float64Array(i);var d=t.STACKTOP|0;var p=t.STACK_MAX|0;var f=t.tempDoublePtr|0;var h=t.ABORT|0;var m=t.cttz_i8|0;var b=t.___dso_handle|0;var g=0;var v=0;var w=0;var k=0;var y=e.NaN,_=e.Infinity;var S=0,x=0,C=0,q=0,T=0.0,E=0,A=0,P=0,M=0.0;var I=0;var R=0;var O=0;var $=0;var F=0;var N=0;var D=0;var L=0;var z=0;var j=0;var H=e.Math.floor;var B=e.Math.abs;var U=e.Math.sqrt;var Q=e.Math.pow;var Y=e.Math.cos;var V=e.Math.sin;var W=e.Math.tan;var G=e.Math.acos;var K=e.Math.asin;var J=e.Math.atan;var X=e.Math.atan2;var Z=e.Math.exp;var ee=e.Math.log;var te=e.Math.ceil;var ie=e.Math.imul;var re=e.Math.min;var se=e.Math.clz32;var ae=t.abort;var ne=t.assert;var oe=t.invoke_iiii;var le=t.invoke_viiiii;var ce=t.invoke_dii;var ue=t.invoke_vid;var de=t.invoke_di;var pe=t.invoke_i;var fe=t.invoke_vi;var he=t.invoke_vii;var me=t.invoke_ii;var be=t.invoke_viii;var ge=t.invoke_v;var ve=t.invoke_viid;var we=t.invoke_iiiii;var ke=t.invoke_viiiiii;var ye=t.invoke_iii;var _e=t.invoke_viiii;var Se=t._fabs;var xe=t.___syscall221;var Ce=t._sin;var qe=t.floatReadValueFromPointer;var Te=t.simpleReadValueFromPointer;var Ee=t.integerReadValueFromPointer;var Ae=t.__embind_register_memory_view;var Pe=t.throwInternalError;var Me=t.get_first_emval;var Ie=t._abort;var Re=t.count_emval_handles;var Oe=t._pthread_cleanup_push;var $e=t.__embind_register_integer;var Fe=t.extendError;var Ne=t.___assert_fail;var De=t.init_emval;var Le=t.__embind_register_void;var ze=t.___cxa_find_matching_catch;var je=t._ceilf;var He=t.getShiftFromSize;var Be=t.__embind_register_function;var Ue=t.embind_init_charCodes;var Qe=t._emscripten_asm_const_33;var Ye=t.throwBindingError;var Ve=t.___setErrNo;var We=t.__emval_register;var Ge=t._sbrk;var Ke=t.readLatin1String;var Je=t.___cxa_allocate_exception;var Xe=t._emscripten_memcpy_big;var Ze=t.__embind_register_bool;var et=t.___resumeException;var tt=t.__ZSt18uncaught_exceptionv;var it=t._sysconf;var rt=t._embind_repr;var st=t.__embind_register_std_wstring;var at=t.createNamedFunction;var nt=t.__embind_register_emval;var ot=t._cos;var lt=t.throwUnboundTypeError;var ct=t._pthread_self;var ut=t.craftInvokerFunction;var dt=t.__emval_decref;var pt=t._sqrt;var ft=t.__embind_register_float;var ht=t.makeLegalFunctionName;var mt=t.___syscall54;var bt=t.___unlock;var gt=t.heap32VectorToArray;var vt=t._pthread_cleanup_pop;var wt=t.whenDependentTypesAreResolved;var kt=t._exit;var yt=t.__embind_register_std_string;var _t=t.new_;var St=t.___cxa_atexit;var xt=t.registerType;var Ct=t.___cxa_throw;var qt=t.__exit;var Tt=t.___lock;var Et=t.___syscall6;var At=t.___syscall5;var Pt=t.ensureOverloadTable;var Mt=t.__embind_register_constant;var It=t._time;var Rt=t.requireFunction;var Ot=t.runDestructors;var $t=t.getTypeName;var Ft=t._atexit;var Nt=t.___syscall140;var Dt=t.exposePublicSymbol;var Lt=t._emscripten_asm_const_5;var zt=t._emscripten_asm_const_4;var jt=t.replacePublicSymbol;var Ht=t.___syscall145;var Bt=t.___syscall146;var Ut=0.0;function Qt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=t+4|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<1)+2)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){s[e>>1]=0;r[c>>0]=0;p=b}else{r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}}while(0);v=v+1|0;i=g+2|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Yt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<2)+4)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){s[e>>1]=0;r[c>>0]=0;p=b}else{r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Vt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<2)+4)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){s[e>>1]=0;r[c>>0]=0;p=b}else{r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function Wt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c*3|0)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+3|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+6|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Gt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+10+(m<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Kt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Jt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Xt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+12+(m<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Zt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(q|0)){s[e>>1]=0;r[c>>0]=0;o=g}else{r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function ei(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+c|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){s[h>>1]=0;r[c>>0]=0;p=v}else{r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+1|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+2|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function ti(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){s[h>>1]=0;r[c>>0]=0;p=v}else{r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+2|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+4|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function ii(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){s[h>>1]=0;r[c>>0]=0;p=v}else{r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+2|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+4|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function ri(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;p=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;c=(a[l+4>>2]|0)+p|0;C=1;e=e+p|0;h=h+(p<<1)|0;o=o+p|0;p=0;t:while(1){if(x){k=1;w=e;v=p;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){s[h>>1]=0;r[c>>0]=0;p=v}else{r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}C=C+1|0;if((C|0)>=(T|0)){m=p;A=52;break e}else{c=c+2|0;e=e+2|0;h=h+4|0;o=o+2|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((m|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}o=l+8|0;c=p+-1|0;a[o>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[o>>2]|0))}if((m|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(m|0))}if((a[o>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[o>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function si(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t*3|0)+12|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t*6|0)+6)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+6|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ai(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){t=n[b>>0]|0;h=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(h>>>3&28)+(h<<3&248)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ni(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+8|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function oi(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){h=n[b>>0]|0;do{if(((h&240)+24+(h<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function li(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){t=n[b>>0]|0;h=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(h>>>3&24)+(h<<2&248)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ci(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}else{s[i>>1]=0;r[c>>0]=0;o=m}}while(0);g=g+1|0;f=b+8|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ui(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=t+4|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<1)+2)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}else{s[e>>1]=0;r[c>>0]=0;p=b}}while(0);v=v+1|0;i=g+2|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function di(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<2)+4)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}else{s[e>>1]=0;r[c>>0]=0;p=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function pi(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}C=A+-1|0;if((i|0)>1){c=0;p=h;f=h+(C<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{p=p+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;p=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((q|0)>1){S=(C|0)>1;c=(a[l+4>>2]|0)+p|0;x=1;i=e+((t<<2)+4)|0;e=h+(p<<1)|0;p=0;t:while(1){if(S){v=1;g=i;b=p;while(1){do{if((n[g>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[e+(_<<1)>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}t=s[e+(k<<1)>>1]|0;h=t<<16>>16;p=s[e+(y<<1)>>1]|0;m=p<<16>>16;i=p<<16>>16>0;if(t<<16>>16<=0){if(i){s[e>>1]=p;p=m*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-3<<2)|0;if((a[i>>2]|0)<(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=s[e+-2>>1]|0;if(p<<16>>16>0){s[e>>1]=p;p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(v|0)){p=b;break}a[p>>2]=v;p=b;break}else{p=b+1|0;if((b|0)>32767)break t;s[e>>1]=p;a[l+1179664+(b<<2)>>2]=p<<16>>16;b=b*7|0;a[l+1310736+(b<<2)>>2]=1;a[l+1310736+(b+1<<2)>>2]=v;a[l+1310736+(b+2<<2)>>2]=x;a[l+1310736+(b+3<<2)>>2]=v;a[l+1310736+(b+4<<2)>>2]=v;a[l+1310736+(b+5<<2)>>2]=x;a[l+1310736+(b+6<<2)>>2]=x;break}}if(i){p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+(m+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=l+1310736+(p+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+x;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}i=s[e+-2>>1]|0;if(i<<16>>16<=0){s[e>>1]=t;p=h*7|0;i=l+1310736+(p+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=l+1310736+(p+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+v;i=l+1310736+(p+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+x;i=l+1310736+(p+-4<<2)|0;if((a[i>>2]|0)>(v|0))a[i>>2]=v;a[l+1310736+(p+-1<<2)>>2]=x;p=b;break}p=a[l+1179664+(h+-1<<2)>>2]|0;h=a[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((p|0)>(h|0)){s[e>>1]=h;if((b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(p|0))a[t>>2]=h;i=i+1|0;if((i|0)>=(b|0)){p=h;break}else t=t+4|0}}else p=h}else{s[e>>1]=p;if((p|0)<(h|0)&(b|0)>0){i=0;t=f;while(1){if((a[t>>2]|0)==(h|0))a[t>>2]=p;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}p=(p<<16>>16)*7|0;m=l+1310736+(p+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=l+1310736+(p+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+x;p=b}else{s[e>>1]=0;r[c>>0]=0;p=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;c=c+1|0;if((v|0)>=(C|0))break;else{g=i;b=p}}}x=x+1|0;if((x|0)>=(q|0)){h=p;E=52;break e}else{c=c+2|0;i=i+w|0;e=e+4|0}}en(3,3904,T);c=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=l+12|0;if((h|0)<1)p=1;else{i=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(i|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=l+8|0;c=p+-1|0;a[t>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[t>>2]|0))}if((h|0)>0){e=0;do{f=(a[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(i<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(i+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(i+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(i+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(i+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(i+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(i+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;e=e+1|0}while((e|0)<(h|0))}if((a[t>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[t>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function fi(e){e=e|0;var t=0;t=d;d=d+e|0;d=d+15&-16;return t|0}function hi(){return d|0}function mi(e){e=e|0;d=e}function bi(e,t){e=e|0;t=t|0;d=e;p=t}function gi(e,t){e=e|0;t=t|0;if(!g){g=e;v=t}}function vi(e){e=e|0;r[f>>0]=r[e>>0];r[f+1>>0]=r[e+1>>0];r[f+2>>0]=r[e+2>>0];r[f+3>>0]=r[e+3>>0]}function wi(e){e=e|0;r[f>>0]=r[e>>0];r[f+1>>0]=r[e+1>>0];r[f+2>>0]=r[e+2>>0];r[f+3>>0]=r[e+3>>0];r[f+4>>0]=r[e+4>>0];r[f+5>>0]=r[e+5>>0];r[f+6>>0]=r[e+6>>0];r[f+7>>0]=r[e+7>>0]}function ki(e){e=e|0;I=e}function yi(){return I|0}function _i(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t*6|0)+6)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+6|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Si(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function xi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+8|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ci(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){t=n[r>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[r+1>>0]|0)&240)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function qi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ti(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(_|0)){s[h>>1]=0;l=f}else{l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}}while(0);m=m+1|0;r=r+8|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ei(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<1)+2)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){s[m>>1]=0;l=h}else{l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}}while(0);b=b+1|0;c=c+2|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ai(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c+1>>0]|0|0)>(r|0)){s[m>>1]=0;l=h}else{l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}}while(0);b=b+1|0;c=c+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Pi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){s[m>>1]=0;l=h}else{l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}}while(0);b=b+1|0;c=c+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Mi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l*3|0)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+3|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+6|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Ii(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){f=n[r>>0]|0;h=n[r+1>>0]|0;do{if(((f&248)+10+(f<<5&224)+(h>>>3&28)+(h<<3&248)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Ri(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Oi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){h=n[r>>0]|0;do{if(((h&240)+24+(h<<4&240)+((n[r+1>>0]|0)&240)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function $i(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){f=n[r>>0]|0;h=n[r+1>>0]|0;do{if(((f&248)+12+(f<<5&224)+(h>>>3&24)+(h<<2&248)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Fi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(x|0)){s[b>>1]=0;l=m}else{l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Ni(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){s[g>>1]=0;l=b}else{l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{s[g>>1]=h;if((h|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+2|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Di(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c+1>>0]|0|0)>(r|0)){s[g>>1]=0;l=b}else{l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=s[g+-2>>1]|0;if(e<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Li(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){s[g>>1]=0;l=b}else{l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{s[g>>1]=h;if((h|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function zi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;f=r+l|0;l=0;t:while(1){if(_){v=1;g=c;b=l;while(1){do{if((n[g>>0]|0)>(n[f>>0]|0)){s[e>>1]=0;l=b}else{l=s[e+(y<<1)>>1]|0;if(l<<16>>16>0){s[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}r=s[e+(w<<1)>>1]|0;h=r<<16>>16;l=s[e+(k<<1)>>1]|0;m=l<<16>>16;c=l<<16>>16>0;if(r<<16>>16<=0){if(c){s[e>>1]=l;l=m*7|0;c=o+1310736+(l+-7<<2)|0;a[c>>2]=(a[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;a[c>>2]=(a[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;a[c>>2]=(a[c>>2]|0)+S;c=o+1310736+(l+-3<<2)|0;if((a[c>>2]|0)<(v|0))a[c>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[e+-2>>1]|0;if(l<<16>>16>0){s[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[e>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(c){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[e>>1]=h;if((b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(l|0))a[r>>2]=h;c=c+1|0;if((c|0)>=(b|0)){l=h;break}else r=r+4|0}}else l=h}else{s[e>>1]=l;if((l|0)<(h|0)&(b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(h|0))a[r>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[e+-2>>1]|0;if(l<<16>>16<=0){s[e>>1]=r;l=h*7|0;c=o+1310736+(l+-7<<2)|0;a[c>>2]=(a[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;a[c>>2]=(a[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;a[c>>2]=(a[c>>2]|0)+S;c=o+1310736+(l+-4<<2)|0;if((a[c>>2]|0)>(v|0))a[c>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[e>>1]=l;if((b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(h|0))a[r>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else r=r+4|0}}}else{s[e>>1]=h;if((h|0)<(l|0)&(b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(l|0))a[r>>2]=h;c=c+1|0;if((c|0)>=(b|0)){l=h;break}else r=r+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}}while(0);v=v+1|0;c=g+1|0;f=f+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=c;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+2|0;e=e+4|0;f=f+2|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}r=o+8|0;l=c+-1|0;a[r>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[r>>2]|0))}if((h|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((a[r>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[r>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ji(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t*6|0)+6)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+6|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Hi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Bi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+8|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ui(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){t=n[r>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[r+1>>0]|0)&240)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Qi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+4|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Yi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}_=r*3|0;S=T+-1|0;if((i|0)>1){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{r=r+(T<<1)|0;c=c+(T<<1)|0}}}c=o+1179664|0;w=0-T|0;g=1-T|0;v=~T;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;p=f+(T+1<<1)|0;l=0;t:while(1){if(k){m=1;h=p;f=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(_|0)){l=s[h+(w<<1)>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}i=s[h+(g<<1)>>1]|0;e=i<<16>>16;l=s[h+(v<<1)>>1]|0;t=l<<16>>16;p=l<<16>>16>0;if(i<<16>>16<=0){if(p){s[h>>1]=l;l=t*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=s[h+-2>>1]|0;if(l<<16>>16>0){s[h>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(m|0)){l=f;break}a[l>>2]=m;l=f;break}else{l=f+1|0;if((f|0)>32767)break t;s[h>>1]=l;a[o+1179664+(f<<2)>>2]=l<<16>>16;f=f*7|0;a[o+1310736+(f<<2)>>2]=1;a[o+1310736+(f+1<<2)>>2]=m;a[o+1310736+(f+2<<2)>>2]=y;a[o+1310736+(f+3<<2)>>2]=m;a[o+1310736+(f+4<<2)>>2]=m;a[o+1310736+(f+5<<2)>>2]=y;a[o+1310736+(f+6<<2)>>2]=y;break}}if(p){l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;a[t>>2]=(a[t>>2]|0)+y;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}p=s[h+-2>>1]|0;if(p<<16>>16<=0){s[h>>1]=i;l=e*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+m;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+y;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(m|0))a[p>>2]=m;a[o+1310736+(l+-1<<2)>>2]=y;l=f;break}l=a[o+1179664+(e+-1<<2)>>2]|0;e=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){s[h>>1]=e;if((f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(l|0))a[i>>2]=e;p=p+1|0;if((p|0)>=(f|0)){l=e;break}else i=i+4|0}}else l=e}else{s[h>>1]=l;if((l|0)<(e|0)&(f|0)>0){p=0;i=c;while(1){if((a[i>>2]|0)==(e|0))a[i>>2]=l;p=p+1|0;if((p|0)>=(f|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;a[t>>2]=(a[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;a[t>>2]=(a[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+y;l=f}else{s[h>>1]=0;l=f}}while(0);m=m+1|0;r=r+8|0;p=h+2|0;if((m|0)>=(S|0))break;else{h=p;f=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;q=52;break e}else{r=r+b|0;p=p+4|0}}en(3,3904,C);l=-1}else{t=0;q=52}}while(0);if((q|0)==52){i=o+12|0;if((t|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(t|0)){p=p+1|0;c=c+4|0}else break}}e=o+8|0;l=r+-1|0;a[e>>2]=l;if(l){Yc(i|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{c=(a[o+1179664+(i<<2)>>2]|0)+-1|0;p=i*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Vi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<1)+2)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}else{s[m>>1]=0;l=h}}while(0);b=b+1|0;c=c+2|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Wi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c+1>>0]|0|0)>(r|0)){l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}else{s[m>>1]=0;l=h}}while(0);b=b+1|0;c=c+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Gi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0;A=d;d=d+16|0;C=A;T=(t|0)/2|0;E=(i|0)/2|0;f=a[o>>2]|0;x=E+-1|0;if((t|0)>1){l=0;c=f;p=f+((ie(x,T)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{c=c+2|0;p=p+2|0}}}S=T+-1|0;if((i|0)>1){l=0;c=f;p=f+(S<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(E|0))break;else{c=c+(T<<1)|0;p=p+(T<<1)|0}}}p=o+1179664|0;k=0-T|0;v=1-T|0;w=~T;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;c=e+((t<<2)+4)|0;i=f+(T+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;h=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){l=s[m+(k<<1)>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}e=s[m+(v<<1)>>1]|0;t=e<<16>>16;l=s[m+(w<<1)>>1]|0;f=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){s[m>>1]=l;l=f*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((a[i>>2]|0)<(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=s[m+-2>>1]|0;if(l<<16>>16>0){s[m>>1]=l;l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(b|0)){l=h;break}a[l>>2]=b;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;s[m>>1]=l;a[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;a[o+1310736+(h<<2)>>2]=1;a[o+1310736+(h+1<<2)>>2]=b;a[o+1310736+(h+2<<2)>>2]=_;a[o+1310736+(h+3<<2)>>2]=b;a[o+1310736+(h+4<<2)>>2]=b;a[o+1310736+(h+5<<2)>>2]=_;a[o+1310736+(h+6<<2)>>2]=_;break}}if(i){l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+(f+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;f=o+1310736+(l+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}i=s[m+-2>>1]|0;if(i<<16>>16<=0){s[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;a[i>>2]=(a[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;a[i>>2]=(a[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;a[i>>2]=(a[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((a[i>>2]|0)>(b|0))a[i>>2]=b;a[o+1310736+(l+-1<<2)>>2]=_;l=h;break}l=a[o+1179664+(t+-1<<2)>>2]|0;t=a[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){s[m>>1]=t;if((h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=t;i=i+1|0;if((i|0)>=(h|0)){l=t;break}else e=e+4|0}}else l=t}else{s[m>>1]=l;if((l|0)<(t|0)&(h|0)>0){i=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=l;i=i+1|0;if((i|0)>=(h|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;f=o+1310736+(l+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=h}else{s[m>>1]=0;l=h}}while(0);b=b+1|0;c=c+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;h=l}}}_=_+1|0;if((_|0)>=(x|0)){f=l;q=52;break e}else{c=c+g|0;i=i+4|0}}en(3,3904,C);l=-1}else{f=0;q=52}}while(0);if((q|0)==52){e=o+12|0;if((f|0)<1)c=1;else{i=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(i|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((i|0)<(f|0)){i=i+1|0;p=p+4|0}else break}}t=o+8|0;l=c+-1|0;a[t>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{q=l<<2;a[o+131084+(q<<2)>>2]=T;a[o+131084+((q|1)<<2)>>2]=0;a[o+131084+((q|2)<<2)>>2]=E;a[o+131084+((q|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[t>>2]|0))}if((f|0)>0){e=0;do{p=(a[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(i<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(i+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(i+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(i+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(i+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(i+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;e=e+1|0}while((e|0)<(f|0))}if((a[t>>2]|0)>0){l=0;do{T=o+12+(l<<2)|0;E=l<<1;q=o+655376+(E<<3)|0;u[q>>3]=+u[q>>3]/+(a[T>>2]|0);E=o+655376+((E|1)<<3)|0;u[E>>3]=+u[E>>3]/+(a[T>>2]|0);l=l+1|0}while((l|0)<(a[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ki(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l*3|0)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+3|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+6|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Ji(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){f=n[r>>0]|0;h=n[r+1>>0]|0;do{if(((f&248)+10+(f<<5&224)+(h>>>3&28)+(h<<3&248)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Xi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function Zi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){h=n[r>>0]|0;do{if(((h&240)+24+(h<<4&240)+((n[r+1>>0]|0)&240)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function er(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){f=n[r>>0]|0;h=n[r+1>>0]|0;do{if(((f&248)+12+(f<<5&224)+(h>>>3&24)+(h<<2&248)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+4|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function tr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=f;c=f+(S<<1)|0;while(1){s[c>>1]=0;s[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;c=c+(t<<1)|0}}}c=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((C|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;p=f+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=p;m=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(x|0)){l=s[b+(k<<1)>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=s[b+(v<<1)>>1]|0;f=e<<16>>16;l=s[b+(w<<1)>>1]|0;h=l<<16>>16;p=l<<16>>16>0;if(e<<16>>16<=0){if(p){s[b>>1]=l;l=h*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-3<<2)|0;if((a[p>>2]|0)<(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[b+-2>>1]|0;if(l<<16>>16>0){s[b>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(g|0)){l=m;break}a[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;s[b>>1]=l;a[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;a[o+1310736+(m<<2)>>2]=1;a[o+1310736+(m+1<<2)>>2]=g;a[o+1310736+(m+2<<2)>>2]=_;a[o+1310736+(m+3<<2)>>2]=g;a[o+1310736+(m+4<<2)>>2]=g;a[o+1310736+(m+5<<2)>>2]=_;a[o+1310736+(m+6<<2)>>2]=_;break}}if(p){l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=o+1310736+(l+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+_;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}p=s[b+-2>>1]|0;if(p<<16>>16<=0){s[b>>1]=e;l=f*7|0;p=o+1310736+(l+-7<<2)|0;a[p>>2]=(a[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;a[p>>2]=(a[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+_;p=o+1310736+(l+-4<<2)|0;if((a[p>>2]|0)>(g|0))a[p>>2]=g;a[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[o+1179664+(f+-1<<2)>>2]|0;f=a[o+1179664+((p<<16>>16)+-1<<2)>>2]|0;if((l|0)>(f|0)){s[b>>1]=f;if((m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(l|0))a[e>>2]=f;p=p+1|0;if((p|0)>=(m|0)){l=f;break}else e=e+4|0}}else l=f}else{s[b>>1]=l;if((l|0)<(f|0)&(m|0)>0){p=0;e=c;while(1){if((a[e>>2]|0)==(f|0))a[e>>2]=l;p=p+1|0;if((p|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+_;l=m}else{s[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+4|0;p=b+2|0;if((g|0)>=(S|0))break;else{b=p;m=l}}}_=_+1|0;if((_|0)>=(C|0)){h=l;T=52;break e}else{r=r+8|0;p=p+4|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){e=o+12|0;if((h|0)<1)r=1;else{p=1;r=1;while(1){l=a[c>>2]|0;if((l|0)==(p|0)){l=r;r=r+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[c>>2]=l;if((p|0)<(h|0)){p=p+1|0;c=c+4|0}else break}}f=o+8|0;l=r+-1|0;a[f>>2]=l;if(l){Yc(e|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[f>>2]|0))}if((h|0)>0){e=0;do{c=(a[o+1179664+(e<<2)>>2]|0)+-1|0;p=e*7|0;l=o+12+(c<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(p<<2)>>2]|0);l=c<<1;r=o+655376+(l<<3)|0;u[r>>3]=+u[r>>3]+ +(a[o+1310736+(p+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(p+2<<2)>>2]|0);c=c<<2;l=o+131084+(c<<2)|0;r=a[o+1310736+(p+3<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;l=o+131084+((c|1)<<2)|0;r=a[o+1310736+(p+4<<2)>>2]|0;if((a[l>>2]|0)<(r|0))a[l>>2]=r;l=o+131084+((c|2)<<2)|0;r=a[o+1310736+(p+5<<2)>>2]|0;if((a[l>>2]|0)>(r|0))a[l>>2]=r;r=o+131084+((c|3)<<2)|0;l=a[o+1310736+(p+6<<2)>>2]|0;if((a[r>>2]|0)<(l|0))a[r>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((a[f>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[f>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ir(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{s[g>>1]=h;if((h|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}else{s[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+2|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function rr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c+1>>0]|0|0)>(r|0)){l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=s[g+-2>>1]|0;if(e<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}else{s[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function sr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+(l<<1)|0;e=f+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[c>>0]|0|0)>(r|0)){l=s[g+(y<<1)>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}f=s[g+(w<<1)>>1]|0;h=f<<16>>16;l=s[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(f<<16>>16<=0){if(e){s[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((a[e>>2]|0)<(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16>0){s[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[g>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[g>>1]=h;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}else{s[g>>1]=l;if((l|0)<(h|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[g+-2>>1]|0;if(l<<16>>16<=0){s[g>>1]=f;l=h*7|0;e=o+1310736+(l+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((a[e>>2]|0)>(v|0))a[e>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[g>>1]=l;if((b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(h|0))a[f>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else f=f+4|0}}}else{s[g>>1]=h;if((h|0)<(l|0)&(b|0)>0){e=0;f=p;while(1){if((a[f>>2]|0)==(l|0))a[f>>2]=h;e=e+1|0;if((e|0)>=(b|0)){l=h;break}else f=f+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}else{s[g>>1]=0;l=b}}while(0);v=v+1|0;c=c+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(C|0)){m=l;T=52;break e}else{c=c+4|0;e=e+4|0}}en(3,3904,q);l=-1}else{m=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((m|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(m|0)){e=e+1|0;p=p+4|0}else break}}h=o+8|0;l=c+-1|0;a[h>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[h>>2]|0))}if((m|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(m|0))}if((a[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[h>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function ar(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0;E=d;d=d+16|0;q=E;f=a[o>>2]|0;C=i+-1|0;if((t|0)>0){l=0;c=f;p=f+((ie(C,t)|0)<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{c=c+2|0;p=p+2|0}}}x=t+-1|0;if((i|0)>0){l=0;c=f;p=f+(x<<1)|0;while(1){s[p>>1]=0;s[c>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{c=c+(t<<1)|0;p=p+(t<<1)|0}}}p=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((C|0)>1){_=(x|0)>1;S=1;c=e+l|0;e=f+(l<<1)|0;f=r+l|0;l=0;t:while(1){if(_){v=1;g=c;b=l;while(1){do{if((n[g>>0]|0)>(n[f>>0]|0)){l=s[e+(y<<1)>>1]|0;if(l<<16>>16>0){s[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}r=s[e+(w<<1)>>1]|0;h=r<<16>>16;l=s[e+(k<<1)>>1]|0;m=l<<16>>16;c=l<<16>>16>0;if(r<<16>>16<=0){if(c){s[e>>1]=l;l=m*7|0;c=o+1310736+(l+-7<<2)|0;a[c>>2]=(a[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;a[c>>2]=(a[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;a[c>>2]=(a[c>>2]|0)+S;c=o+1310736+(l+-3<<2)|0;if((a[c>>2]|0)<(v|0))a[c>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[e+-2>>1]|0;if(l<<16>>16>0){s[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((a[l>>2]|0)>=(v|0)){l=b;break}a[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;s[e>>1]=l;a[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;a[o+1310736+(b<<2)>>2]=1;a[o+1310736+(b+1<<2)>>2]=v;a[o+1310736+(b+2<<2)>>2]=S;a[o+1310736+(b+3<<2)>>2]=v;a[o+1310736+(b+4<<2)>>2]=v;a[o+1310736+(b+5<<2)>>2]=S;a[o+1310736+(b+6<<2)>>2]=S;break}}if(c){l=a[o+1179664+(h+-1<<2)>>2]|0;h=a[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(h|0)){s[e>>1]=h;if((b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(l|0))a[r>>2]=h;c=c+1|0;if((c|0)>=(b|0)){l=h;break}else r=r+4|0}}else l=h}else{s[e>>1]=l;if((l|0)<(h|0)&(b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(h|0))a[r>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;a[m>>2]=(a[m>>2]|0)+S;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[e+-2>>1]|0;if(l<<16>>16<=0){s[e>>1]=r;l=h*7|0;c=o+1310736+(l+-7<<2)|0;a[c>>2]=(a[c>>2]|0)+1;c=o+1310736+(l+-6<<2)|0;a[c>>2]=(a[c>>2]|0)+v;c=o+1310736+(l+-5<<2)|0;a[c>>2]=(a[c>>2]|0)+S;c=o+1310736+(l+-4<<2)|0;if((a[c>>2]|0)>(v|0))a[c>>2]=v;a[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[o+1179664+(h+-1<<2)>>2]|0;l=a[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((h|0)>(l|0)){s[e>>1]=l;if((b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(h|0))a[r>>2]=l;c=c+1|0;if((c|0)>=(b|0))break;else r=r+4|0}}}else{s[e>>1]=h;if((h|0)<(l|0)&(b|0)>0){c=0;r=p;while(1){if((a[r>>2]|0)==(l|0))a[r>>2]=h;c=c+1|0;if((c|0)>=(b|0)){l=h;break}else r=r+4|0}}else l=h}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;a[m>>2]=(a[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;a[m>>2]=(a[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;a[l>>2]=(a[l>>2]|0)+S;l=b}else{s[e>>1]=0;l=b}}while(0);v=v+1|0;c=g+1|0;f=f+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=c;b=l}}}S=S+1|0;if((S|0)>=(C|0)){h=l;T=52;break e}else{c=c+2|0;e=e+4|0;f=f+2|0}}en(3,3904,q);l=-1}else{h=0;T=52}}while(0);if((T|0)==52){f=o+12|0;if((h|0)<1)c=1;else{e=1;c=1;while(1){l=a[p>>2]|0;if((l|0)==(e|0)){l=c;c=c+1|0}else l=a[o+1179664+(l+-1<<2)>>2]|0;a[p>>2]=l;if((e|0)<(h|0)){e=e+1|0;p=p+4|0}else break}}r=o+8|0;l=c+-1|0;a[r>>2]=l;if(l){Yc(f|0,0,l<<2|0)|0;Yc(o+655376|0,0,l<<4|0)|0;if((c|0)>1){l=0;do{T=l<<2;a[o+131084+(T<<2)>>2]=t;a[o+131084+((T|1)<<2)>>2]=0;a[o+131084+((T|2)<<2)>>2]=i;a[o+131084+((T|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(a[r>>2]|0))}if((h|0)>0){f=0;do{p=(a[o+1179664+(f<<2)>>2]|0)+-1|0;e=f*7|0;l=o+12+(p<<2)|0;a[l>>2]=(a[l>>2]|0)+(a[o+1310736+(e<<2)>>2]|0);l=p<<1;c=o+655376+(l<<3)|0;u[c>>3]=+u[c>>3]+ +(a[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;u[l>>3]=+u[l>>3]+ +(a[o+1310736+(e+2<<2)>>2]|0);p=p<<2;l=o+131084+(p<<2)|0;c=a[o+1310736+(e+3<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;l=o+131084+((p|1)<<2)|0;c=a[o+1310736+(e+4<<2)>>2]|0;if((a[l>>2]|0)<(c|0))a[l>>2]=c;l=o+131084+((p|2)<<2)|0;c=a[o+1310736+(e+5<<2)>>2]|0;if((a[l>>2]|0)>(c|0))a[l>>2]=c;c=o+131084+((p|3)<<2)|0;l=a[o+1310736+(e+6<<2)>>2]|0;if((a[c>>2]|0)<(l|0))a[c>>2]=l;f=f+1|0}while((f|0)<(h|0))}if((a[r>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;T=o+655376+(i<<3)|0;u[T>>3]=+u[T>>3]/+(a[t>>2]|0);i=o+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);l=l+1|0}while((l|0)<(a[r>>2]|0));l=0}else l=0}else l=0}d=E;return l|0}function nr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t*3|0)+12|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t*6|0)+6)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+6|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function or(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){t=n[b>>0]|0;h=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(h>>>3&28)+(h<<3&248)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function lr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+8|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function cr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){h=n[b>>0]|0;do{if(((h&240)+24+(h<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function ur(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<2)+4)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){t=n[b>>0]|0;h=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(h>>>3&24)+(h<<2&248)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+4|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function dr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;T=M;A=(t|0)/2|0;P=(i|0)/2|0;h=a[l>>2]|0;q=P+-1|0;if((t|0)>1){c=0;p=h;f=h+((ie(q,A)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(A|0))break;else{p=p+2|0;f=f+2|0}}}x=o*3|0;C=A+-1|0;if((i|0)>1){c=0;o=h;p=h+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(P|0))break;else{o=o+(A<<1)|0;p=p+(A<<1)|0}}}p=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((q|0)>1){_=(C|0)>1;c=(a[l+4>>2]|0)+o|0;S=1;f=e+((t<<3)+8)|0;i=h+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=f;m=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){s[i>>1]=0;r[c>>0]=0;o=m}else{r[c>>0]=-1;o=s[i+(y<<1)>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=s[i+(w<<1)>>1]|0;t=e<<16>>16;o=s[i+(k<<1)>>1]|0;h=o<<16>>16;f=o<<16>>16>0;if(e<<16>>16<=0){if(f){s[i>>1]=o;o=h*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[i+-2>>1]|0;if(o<<16>>16>0){s[i>>1]=o;o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(g|0)){o=m;break}a[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;s[i>>1]=o;a[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;a[l+1310736+(m<<2)>>2]=1;a[l+1310736+(m+1<<2)>>2]=g;a[l+1310736+(m+2<<2)>>2]=S;a[l+1310736+(m+3<<2)>>2]=g;a[l+1310736+(m+4<<2)>>2]=g;a[l+1310736+(m+5<<2)>>2]=S;a[l+1310736+(m+6<<2)>>2]=S;break}}if(f){o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+(h+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;a[h>>2]=(a[h>>2]|0)+S;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}f=s[i+-2>>1]|0;if(f<<16>>16<=0){s[i>>1]=e;o=t*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+g;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+S;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(g|0))a[f>>2]=g;a[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[l+1179664+(t+-1<<2)>>2]|0;t=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){s[i>>1]=t;if((m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(o|0))a[e>>2]=t;f=f+1|0;if((f|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{s[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){f=0;e=p;while(1){if((a[e>>2]|0)==(t|0))a[e>>2]=o;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;h=l+1310736+(o+-7<<2)|0;a[h>>2]=(a[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;a[h>>2]=(a[h>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+S;o=m}}while(0);g=g+1|0;f=b+8|0;i=i+2|0;c=c+1|0;if((g|0)>=(C|0))break;else{b=f;m=o}}}S=S+1|0;if((S|0)>=(q|0)){t=o;E=52;break e}else{c=c+2|0;f=f+v|0;i=i+4|0}}en(3,3904,T);c=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=l+12|0;if((t|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(t|0)){f=f+1|0;p=p+4|0}else break}}e=l+8|0;c=o+-1|0;a[e>>2]=c;if(c){Yc(i|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{E=c<<2;a[l+131084+(E<<2)>>2]=A;a[l+131084+((E|1)<<2)>>2]=0;a[l+131084+((E|2)<<2)>>2]=P;a[l+131084+((E|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[e>>2]|0))}if((t|0)>0){i=0;do{p=(a[l+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;i=i+1|0}while((i|0)<(t|0))}if((a[e>>2]|0)>0){c=0;do{A=l+12+(c<<2)|0;P=c<<1;E=l+655376+(P<<3)|0;u[E>>3]=+u[E>>3]/+(a[A>>2]|0);P=l+655376+((P|1)<<3)|0;u[P>>3]=+u[P>>3]/+(a[A>>2]|0);c=c+1|0}while((c|0)<(a[e>>2]|0));c=0}else c=0}else c=0}d=M;return c|0}function pr(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;if((t|0)!=1){if(t+-1&t)t=zc(t)|0}else t=2;s=a[e+4>>2]|0;if(t>>>0<=s>>>0){if(t>>>0<s>>>0){if(s>>>0>2)r=(s+-1&s|0)==0;else r=0;i=~~+te(+(+((a[e+12>>2]|0)>>>0)/+c[e+16>>2]))>>>0;if(r)i=1<<32-(se(i+-1|0)|0);else i=zc(i)|0;t=t>>>0<i>>>0?i:t;if(t>>>0<s>>>0)fr(e,t)}}else fr(e,t);return}function fr(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0;r=e+4|0;e:do{if(t){p=Pr(t<<2)|0;i=a[e>>2]|0;a[e>>2]=p;if(i)Mr(i);a[r>>2]=t;if(t){i=0;do{a[(a[e>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=(t|0))}r=e+8|0;s=a[r>>2]|0;if(s){i=a[s+4>>2]|0;d=t+-1|0;p=(d&t|0)==0;if(p)o=i&d;else o=(i>>>0)%(t>>>0)|0;a[(a[e>>2]|0)+(o<<2)>>2]=r;i=a[s>>2]|0;if(i){n=s;r=s;while(1){u=r;t:while(1){while(1){r=a[i+4>>2]|0;if(p)c=r&d;else c=(r>>>0)%(t>>>0)|0;if((c|0)==(o|0)){r=i;break}r=(a[e>>2]|0)+(c<<2)|0;if(!(a[r>>2]|0)){o=c;s=i;break t}l=i+8|0;r=i;while(1){s=a[r>>2]|0;if(!s)break;if((a[l>>2]|0)==(a[s+8>>2]|0))r=s;else break}a[n>>2]=s;a[r>>2]=a[a[(a[e>>2]|0)+(c<<2)>>2]>>2];a[a[(a[e>>2]|0)+(c<<2)>>2]>>2]=i;i=a[u>>2]|0;if(!i)break e}i=a[r>>2]|0;if(!i)break e;else{n=r;u=r}}a[r>>2]=n;i=a[s>>2]|0;if(!i)break;else{n=s;r=s}}}}}else{i=a[e>>2]|0;a[e>>2]=0;if(i)Mr(i);a[r>>2]=0}}while(0);return}function hr(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0,l=0;n=d;d=d+32|0;o=n+16|0;s=n+4|0;l=n;t=a[t>>2]|0;i=a[t>>2]|0;a[l>>2]=t;a[o>>2]=a[l>>2];mr(s,e,o);t=a[s>>2]|0;a[s>>2]=0;if(t){if(r[s+8>>0]|0)Wo(t+264|0);Mr(t)}d=n;return i|0}function mr(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0;h=a[i>>2]|0;d=a[t+4>>2]|0;i=a[h+4>>2]|0;p=d+-1|0;f=(p&d|0)==0;if(f)u=p&i;else u=(i>>>0)%(d>>>0)|0;n=(a[t>>2]|0)+(u<<2)|0;s=a[n>>2]|0;while(1){i=a[s>>2]|0;if((i|0)==(h|0)){c=s;break}else s=i}l=t+8|0;if((c|0)!=(l|0)){i=a[c+4>>2]|0;if(f)i=i&p;else i=(i>>>0)%(d>>>0)|0;if((i|0)==(u|0))n=h;else o=12}else o=12;do{if((o|0)==12){i=a[h>>2]|0;if(i){i=a[i+4>>2]|0;if(f)i=i&p;else i=(i>>>0)%(d>>>0)|0;if((i|0)==(u|0)){n=h;break}}a[n>>2]=0;n=h}}while(0);s=a[n>>2]|0;i=s;if(s){s=a[s+4>>2]|0;if(f)s=s&p;else s=(s>>>0)%(d>>>0)|0;if((s|0)!=(u|0)){a[(a[t>>2]|0)+(s<<2)>>2]=c;i=a[h>>2]|0}}a[c>>2]=i;a[n>>2]=0;t=t+12|0;a[t>>2]=(a[t>>2]|0)+-1;a[e>>2]=h;a[e+4>>2]=l;r[e+8>>0]=1;return}function br(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;r=Pr(408)|0;a[r+8>>2]=a[i>>2];Yc(r+16|0,0,392)|0;u[r+248>>3]=.0001;u[r+256>>3]=1.0e3;i=r+264|0;a[i>>2]=0;a[i+4>>2]=0;a[i+8>>2]=0;a[i+12>>2]=0;a[e>>2]=r;e=e+4|0;a[e>>2]=t+8;a[e+4>>2]=257;return}function gr(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0.0,u=0.0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0;p=a[i+8>>2]|0;v=i+4|0;a[v>>2]=p;g=t+4|0;d=a[g>>2]|0;b=(d|0)==0;e:do{if(!b){f=d+-1|0;h=(f&d|0)==0;if(h)n=f&p;else n=(p>>>0)%(d>>>0)|0;s=a[(a[t>>2]|0)+(n<<2)>>2]|0;if(!s)m=12;else while(1){o=a[s>>2]|0;if(!o){m=12;break e}s=a[o+4>>2]|0;if(h)s=s&f;else s=(s>>>0)%(d>>>0)|0;if((s|0)!=(n|0)){m=12;break e}if((a[o+8>>2]|0)==(p|0)){s=0;i=o;break}else s=o}}else{n=0;m=12}}while(0);if((m|0)==12){p=t+12|0;l=+(((a[p>>2]|0)+1|0)>>>0);u=+c[t+16>>2];do{if(b|l>+(d>>>0)*u){if(d>>>0>2)s=(d+-1&d|0)==0;else s=0;o=(s&1|d<<1)^1;s=~~+te(+(l/u))>>>0;vr(t,o>>>0<s>>>0?s:o);o=a[g>>2]|0;s=a[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&s;break}else{d=o;n=(s>>>0)%(o>>>0)|0;break}}}while(0);s=a[(a[t>>2]|0)+(n<<2)>>2]|0;if(!s){s=t+8|0;a[i>>2]=a[s>>2];a[s>>2]=i;a[(a[t>>2]|0)+(n<<2)>>2]=s;s=a[i>>2]|0;if(s){s=a[s+4>>2]|0;n=d+-1|0;if(!(n&d))s=s&n;else s=(s>>>0)%(d>>>0)|0;a[(a[t>>2]|0)+(s<<2)>>2]=i}}else{a[i>>2]=a[s>>2];a[s>>2]=i}a[p>>2]=(a[p>>2]|0)+1;s=1}a[e>>2]=i;r[e+4>>0]=s;return}function vr(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;if((t|0)!=1){if(t+-1&t)t=zc(t)|0}else t=2;s=a[e+4>>2]|0;if(t>>>0<=s>>>0){if(t>>>0<s>>>0){if(s>>>0>2)r=(s+-1&s|0)==0;else r=0;i=~~+te(+(+((a[e+12>>2]|0)>>>0)/+c[e+16>>2]))>>>0;if(r)i=1<<32-(se(i+-1|0)|0);else i=zc(i)|0;t=t>>>0<i>>>0?i:t;if(t>>>0<s>>>0)wr(e,t)}}else wr(e,t);return}function wr(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0;r=e+4|0;e:do{if(t){p=Pr(t<<2)|0;i=a[e>>2]|0;a[e>>2]=p;if(i)Mr(i);a[r>>2]=t;if(t){i=0;do{a[(a[e>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=(t|0))}r=e+8|0;s=a[r>>2]|0;if(s){i=a[s+4>>2]|0;d=t+-1|0;p=(d&t|0)==0;if(p)o=i&d;else o=(i>>>0)%(t>>>0)|0;a[(a[e>>2]|0)+(o<<2)>>2]=r;i=a[s>>2]|0;if(i){n=s;r=s;while(1){u=r;t:while(1){while(1){r=a[i+4>>2]|0;if(p)c=r&d;else c=(r>>>0)%(t>>>0)|0;if((c|0)==(o|0)){r=i;break}r=(a[e>>2]|0)+(c<<2)|0;if(!(a[r>>2]|0)){o=c;s=i;break t}l=i+8|0;r=i;while(1){s=a[r>>2]|0;if(!s)break;if((a[l>>2]|0)==(a[s+8>>2]|0))r=s;else break}a[n>>2]=s;a[r>>2]=a[a[(a[e>>2]|0)+(c<<2)>>2]>>2];a[a[(a[e>>2]|0)+(c<<2)>>2]>>2]=i;i=a[u>>2]|0;if(!i)break e}i=a[r>>2]|0;if(!i)break e;else{n=r;u=r}}a[r>>2]=n;i=a[s>>2]|0;if(!i)break;else{n=s;r=s}}}}}else{i=a[e>>2]|0;a[e>>2]=0;if(i)Mr(i);a[r>>2]=0}}while(0);return}function kr(e){e=e|0;return ka(a[e+4>>2]|0)|0}function yr(e){e=e|0;Le(624,10917);Ze(632,10922,1,1,0);$e(640,10927,1,-128,127);$e(656,10932,1,-128,127);$e(648,10944,1,0,255);$e(664,10958,2,-32768,32767);$e(672,10964,2,0,65535);$e(680,10979,4,-2147483648,2147483647);$e(688,10983,4,0,-1);$e(696,10996,4,-2147483648,2147483647);$e(704,11001,4,0,-1);ft(712,11015,4);ft(720,11021,8);yt(360,11028);yt(392,11040);st(416,4,11073);nt(440,11086);Ae(448,0,11102);Sr(11132);xr(11169);Cr(11208);qr(11239);Tr(11279);Er(11308);Ae(456,4,11346);Ae(464,5,11376);Sr(11415);xr(11447);Cr(11480);qr(11513);Tr(11547);Er(11580);Ae(472,6,11614);Ae(480,7,11645);Ae(488,7,11677);return}function _r(){yr(0);return}function Sr(e){e=e|0;Ae(536,0,e|0);return}function xr(e){e=e|0;Ae(528,1,e|0);return}function Cr(e){e=e|0;Ae(520,2,e|0);return}function qr(e){e=e|0;Ae(512,3,e|0);return}function Tr(e){e=e|0;Ae(504,4,e|0);return}function Er(e){e=e|0;Ae(496,5,e|0);return}function Ar(e){e=e|0;Ne(12478,12501,303,12589)}function Pr(e){e=e|0;var t=0;t=(e|0)==0?1:e;e=za(t)|0;e:do{if(!e){while(1){e=$r()|0;if(!e)break;Wu[e&0]();e=za(t)|0;if(e)break e}t=Je(4)|0;a[t>>2]=2224;Ct(t|0,544,1)}}while(0);return e|0}function Mr(e){e=e|0;ja(e);return}function Ir(e){e=e|0;return}function Rr(e){e=e|0;Mr(e);return}function Or(e){e=e|0;return 12610}function $r(){var e=0;e=a[559]|0;a[559]=e+0;return e|0}function Fr(e){e=e|0;return}function Nr(e){e=e|0;return}function Dr(e){e=e|0;return}function Lr(e){e=e|0;return}function zr(e){e=e|0;return}function jr(e){e=e|0;Mr(e);return}function Hr(e){e=e|0;Mr(e);return}function Br(e){e=e|0;Mr(e);return}function Ur(e){e=e|0;Mr(e);return}function Qr(e,t,i){e=e|0;t=t|0;i=i|0;return(e|0)==(t|0)|0}function Yr(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0;o=d;d=d+64|0;n=o;if((e|0)!=(t|0))if((t|0)!=0?(s=Xr(t,576,592,0)|0,(s|0)!=0):0){t=n;r=t+56|0;do{a[t>>2]=0;t=t+4|0}while((t|0)<(r|0));a[n>>2]=s;a[n+8>>2]=e;a[n+12>>2]=-1;a[n+48>>2]=1;Zu[a[(a[s>>2]|0)+28>>2]&3](s,n,a[i>>2]|0,1);if((a[n+24>>2]|0)==1){a[i>>2]=a[n+16>>2];t=1}else t=0}else t=0;else t=1;d=o;return t|0}function Vr(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var n=0;e=t+16|0;n=a[e>>2]|0;do{if(n){if((n|0)!=(i|0)){s=t+36|0;a[s>>2]=(a[s>>2]|0)+1;a[t+24>>2]=2;r[t+54>>0]=1;break}e=t+24|0;if((a[e>>2]|0)==2)a[e>>2]=s}else{a[e>>2]=i;a[t+24>>2]=s;a[t+36>>2]=1}}while(0);return}function Wr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;if((e|0)==(a[t+8>>2]|0))Vr(0,t,i,r);return}function Gr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;if((e|0)==(a[t+8>>2]|0))Vr(0,t,i,r);else{e=a[e+8>>2]|0;Zu[a[(a[e>>2]|0)+28>>2]&3](e,t,i,r)}return}function Kr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0;n=a[e+4>>2]|0;s=n>>8;if(n&1)s=a[(a[i>>2]|0)+s>>2]|0;e=a[e>>2]|0;Zu[a[(a[e>>2]|0)+28>>2]&3](e,t,i+s|0,(n&2|0)!=0?r:2);return}function Jr(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var n=0,o=0;e:do{if((e|0)!=(a[t+8>>2]|0)){o=a[e+12>>2]|0;n=e+16+(o<<3)|0;Kr(e+16|0,t,i,s);if((o|0)>1){o=t+54|0;e=e+24|0;do{Kr(e,t,i,s);if(r[o>>0]|0)break e;e=e+8|0}while(e>>>0<n>>>0)}}else Vr(0,t,i,s)}while(0);return}function Xr(e,t,i,n){e=e|0;t=t|0;i=i|0;n=n|0;var o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0;g=d;d=d+64|0;b=g;m=a[e>>2]|0;h=e+(a[m+-8>>2]|0)|0;m=a[m+-4>>2]|0;a[b>>2]=i;a[b+4>>2]=e;a[b+8>>2]=t;a[b+12>>2]=n;n=b+16|0;e=b+20|0;t=b+24|0;o=b+28|0;l=b+32|0;c=b+40|0;u=(m|0)==(i|0);p=n;f=p+36|0;do{a[p>>2]=0;p=p+4|0}while((p|0)<(f|0));s[n+36>>1]=0;r[n+38>>0]=0;e:do{if(u){a[b+48>>2]=1;Ju[a[(a[i>>2]|0)+20>>2]&3](i,b,h,h,1,0);n=(a[t>>2]|0)==1?h:0}else{Lu[a[(a[m>>2]|0)+24>>2]&3](m,b,h,1,0);switch(a[b+36>>2]|0){case 0:{n=(a[c>>2]|0)==1&(a[o>>2]|0)==1&(a[l>>2]|0)==1?a[e>>2]|0:0;break e}case 1:break;default:{n=0;break e}}if((a[t>>2]|0)!=1?!((a[c>>2]|0)==0&(a[o>>2]|0)==1&(a[l>>2]|0)==1):0){n=0;break}n=a[n>>2]|0}}while(0);d=g;return n|0}function Zr(e,t,i,s,n){e=e|0;t=t|0;i=i|0;s=s|0;n=n|0;r[t+53>>0]=1;do{if((a[t+4>>2]|0)==(s|0)){r[t+52>>0]=1;s=t+16|0;e=a[s>>2]|0;if(!e){a[s>>2]=i;a[t+24>>2]=n;a[t+36>>2]=1;if(!((n|0)==1?(a[t+48>>2]|0)==1:0))break;r[t+54>>0]=1;break}if((e|0)!=(i|0)){n=t+36|0;a[n>>2]=(a[n>>2]|0)+1;r[t+54>>0]=1;break}e=t+24|0;s=a[e>>2]|0;if((s|0)==2){a[e>>2]=n;s=n}if((s|0)==1?(a[t+48>>2]|0)==1:0)r[t+54>>0]=1}}while(0);return}function es(e,t,i,s,n){e=e|0;t=t|0;i=i|0;s=s|0;n=n|0;var o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0;e:do{if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(i|0)?(o=t+28|0,(a[o>>2]|0)!=1):0)a[o>>2]=s}else{if((e|0)!=(a[t>>2]|0)){b=a[e+12>>2]|0;c=e+16+(b<<3)|0;is(e+16|0,t,i,s,n);o=e+24|0;if((b|0)<=1)break;l=a[e+8>>2]|0;if((l&2|0)==0?(u=t+36|0,(a[u>>2]|0)!=1):0){if(!(l&1)){l=t+54|0;while(1){if(r[l>>0]|0)break e;if((a[u>>2]|0)==1)break e;is(o,t,i,s,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}l=t+24|0;e=t+54|0;while(1){if(r[e>>0]|0)break e;if((a[u>>2]|0)==1?(a[l>>2]|0)==1:0)break e;is(o,t,i,s,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}l=t+54|0;while(1){if(r[l>>0]|0)break e;is(o,t,i,s,n);o=o+8|0;if(o>>>0>=c>>>0)break e}}if((a[t+16>>2]|0)!=(i|0)?(m=t+20|0,(a[m>>2]|0)!=(i|0)):0){a[t+32>>2]=s;p=t+44|0;if((a[p>>2]|0)==4)break;l=a[e+12>>2]|0;c=e+16+(l<<3)|0;u=t+52|0;s=t+53|0;f=t+54|0;d=e+8|0;h=t+24|0;t:do{if((l|0)>0){l=0;o=0;e=e+16|0;while(1){r[u>>0]=0;r[s>>0]=0;ts(e,t,i,i,1,n);if(r[f>>0]|0){b=20;break t}do{if(r[s>>0]|0){if(!(r[u>>0]|0))if(!(a[d>>2]&1)){o=1;b=20;break t}else{o=1;break}if((a[h>>2]|0)==1)break t;if(!(a[d>>2]&2))break t;else{l=1;o=1}}}while(0);e=e+8|0;if(e>>>0>=c>>>0){b=20;break}}}else{l=0;o=0;b=20}}while(0);do{if((b|0)==20){if((!l?(a[m>>2]=i,i=t+40|0,a[i>>2]=(a[i>>2]|0)+1,(a[t+36>>2]|0)==1):0)?(a[h>>2]|0)==2:0){r[f>>0]=1;if(o)break}else b=24;if((b|0)==24?o:0)break;a[p>>2]=4;break e}}while(0);a[p>>2]=3;break}if((s|0)==1)a[t+32>>2]=1}}while(0);return}function ts(e,t,i,r,s,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;var o=0,l=0;l=a[e+4>>2]|0;o=l>>8;if(l&1)o=a[(a[r>>2]|0)+o>>2]|0;e=a[e>>2]|0;Ju[a[(a[e>>2]|0)+20>>2]&3](e,t,i,r+o|0,(l&2|0)!=0?s:2,n);return}function is(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0;o=a[e+4>>2]|0;n=o>>8;if(o&1)n=a[(a[i>>2]|0)+n>>2]|0;e=a[e>>2]|0;Lu[a[(a[e>>2]|0)+24>>2]&3](e,t,i+n|0,(o&2|0)!=0?r:2,s);return}function rs(e,t,i,s,n){e=e|0;t=t|0;i=i|0;s=s|0;n=n|0;var o=0,l=0,c=0,u=0;e:do{if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(i|0)?(o=t+28|0,(a[o>>2]|0)!=1):0)a[o>>2]=s}else{if((e|0)!=(a[t>>2]|0)){c=a[e+8>>2]|0;Lu[a[(a[c>>2]|0)+24>>2]&3](c,t,i,s,n);break}if((a[t+16>>2]|0)!=(i|0)?(l=t+20|0,(a[l>>2]|0)!=(i|0)):0){a[t+32>>2]=s;s=t+44|0;if((a[s>>2]|0)==4)break;o=t+52|0;r[o>>0]=0;u=t+53|0;r[u>>0]=0;e=a[e+8>>2]|0;Ju[a[(a[e>>2]|0)+20>>2]&3](e,t,i,i,1,n);if(r[u>>0]|0){if(!(r[o>>0]|0)){o=1;c=13}}else{o=0;c=13}do{if((c|0)==13){a[l>>2]=i;u=t+40|0;a[u>>2]=(a[u>>2]|0)+1;if((a[t+36>>2]|0)==1?(a[t+24>>2]|0)==2:0){r[t+54>>0]=1;if(o)break}else c=16;if((c|0)==16?o:0)break;a[s>>2]=4;break e}}while(0);a[s>>2]=3;break}if((s|0)==1)a[t+32>>2]=1}}while(0);return}function ss(e,t,i,s,n){e=e|0;t=t|0;i=i|0;s=s|0;n=n|0;var o=0,l=0;do{if((e|0)==(a[t+8>>2]|0)){if((a[t+4>>2]|0)==(i|0)?(l=t+28|0,(a[l>>2]|0)!=1):0)a[l>>2]=s}else if((e|0)==(a[t>>2]|0)){if((a[t+16>>2]|0)!=(i|0)?(o=t+20|0,(a[o>>2]|0)!=(i|0)):0){a[t+32>>2]=s;a[o>>2]=i;n=t+40|0;a[n>>2]=(a[n>>2]|0)+1;if((a[t+36>>2]|0)==1?(a[t+24>>2]|0)==2:0)r[t+54>>0]=1;a[t+44>>2]=4;break}if((s|0)==1)a[t+32>>2]=1}}while(0);return}function as(e,t,i,s,n,o){e=e|0;t=t|0;i=i|0;s=s|0;n=n|0;o=o|0;var l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0;if((e|0)==(a[t+8>>2]|0))Zr(0,t,i,s,n);else{p=t+52|0;f=r[p>>0]|0;h=t+53|0;m=r[h>>0]|0;d=a[e+12>>2]|0;l=e+16+(d<<3)|0;r[p>>0]=0;r[h>>0]=0;ts(e+16|0,t,i,s,n,o);e:do{if((d|0)>1){c=t+24|0;u=e+8|0;d=t+54|0;e=e+24|0;do{if(r[d>>0]|0)break e;if(!(r[p>>0]|0)){if((r[h>>0]|0)!=0?(a[u>>2]&1|0)==0:0)break e}else{if((a[c>>2]|0)==1)break e;if(!(a[u>>2]&2))break e}r[p>>0]=0;r[h>>0]=0;ts(e,t,i,s,n,o);e=e+8|0}while(e>>>0<l>>>0)}}while(0);r[p>>0]=f;r[h>>0]=m}return}function ns(e,t,i,r,s,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;if((e|0)==(a[t+8>>2]|0))Zr(0,t,i,r,s);else{e=a[e+8>>2]|0;Ju[a[(a[e>>2]|0)+20>>2]&3](e,t,i,r,s,n)}return}function os(e,t,i,r,s,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;if((e|0)==(a[t+8>>2]|0))Zr(0,t,i,r,s);return}function ls(e){e=e|0;Ne(12625,12654,1164,12589)}function cs(e){e=e|0;return((e|0)==32|(e+-9|0)>>>0<5)&1|0}function us(){var e=0;if(!(a[597]|0))e=2644;else e=a[(ct()|0)+60>>2]|0;return e|0}function ds(e){e=e|0;var t=0,i=0;t=0;while(1){if((n[12742+t>>0]|0)==(e|0)){i=2;break}t=t+1|0;if((t|0)==87){t=87;e=12830;i=5;break}}if((i|0)==2)if(!t)e=12830;else{e=12830;i=5}if((i|0)==5)while(1){i=e;while(1){e=i+1|0;if(!(r[i>>0]|0))break;else i=e}t=t+-1|0;if(!t)break;else i=5}return e|0}function ps(e,t,i){e=e|0;t=t|0;i=i|0;var s=0.0,o=0,l=0.0,c=0,u=0,p=0.0,f=0,h=0,m=0,b=0.0,g=0.0,v=0,w=0,k=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,R=0,O=0,$=0,F=0,N=0,D=0.0;N=d;d=d+512|0;R=N;switch(t|0){case 0:{F=24;$=-149;q=4;break}case 1:{F=53;$=-1074;q=4;break}case 2:{F=53;$=-1074;q=4;break}default:s=0.0}e:do{if((q|0)==4){A=e+4|0;E=e+100|0;do{t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0}while((cs(t)|0)!=0);t:do{switch(t|0){case 43:case 45:{o=1-(((t|0)==45&1)<<1)|0;t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0;O=o;break t}else{t=ms(e)|0;O=o;break t}}default:O=1}}while(0);o=t;t=0;do{if((o|32|0)!=(r[14634+t>>0]|0))break;do{if(t>>>0<7){o=a[A>>2]|0;if(o>>>0<(a[E>>2]|0)>>>0){a[A>>2]=o+1;o=n[o>>0]|0;break}else{o=ms(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<8);t:do{switch(t|0){case 8:break;case 3:{q=23;break}default:{c=(i|0)!=0;if(c&t>>>0>3)if((t|0)==8)break t;else{q=23;break t}i:do{if(!t){t=0;do{if((o|32|0)!=(r[16477+t>>0]|0))break i;do{if(t>>>0<2){o=a[A>>2]|0;if(o>>>0<(a[E>>2]|0)>>>0){a[A>>2]=o+1;o=n[o>>0]|0;break}else{o=ms(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<3)}}while(0);switch(t|0){case 3:{t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if((t|0)==40)t=1;else{if(!(a[E>>2]|0)){s=y;break e}a[A>>2]=(a[A>>2]|0)+-1;s=y;break e}while(1){o=a[A>>2]|0;if(o>>>0<(a[E>>2]|0)>>>0){a[A>>2]=o+1;o=n[o>>0]|0}else o=ms(e)|0;if(!((o+-48|0)>>>0<10|(o+-65|0)>>>0<26)?!((o|0)==95|(o+-97|0)>>>0<26):0)break;t=t+1|0}if((o|0)==41){s=y;break e}o=(a[E>>2]|0)==0;if(!o)a[A>>2]=(a[A>>2]|0)+-1;if(!c){a[(us()|0)>>2]=22;hs(e,0);s=0.0;break e}if(!t){s=y;break e}while(1){t=t+-1|0;if(!o)a[A>>2]=(a[A>>2]|0)+-1;if(!t){s=y;break e}}}case 0:{do{if((o|0)==48){t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if((t|32|0)!=120){if(!(a[E>>2]|0)){t=48;break}a[A>>2]=(a[A>>2]|0)+-1;t=48;break}t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0;c=0}else{t=ms(e)|0;c=0}i:while(1){switch(t|0){case 46:{q=74;break i}case 48:break;default:{x=0;u=0;S=0;o=0;f=c;h=0;k=0;p=1.0;c=0;s=0.0;break i}}t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0;c=1;continue}else{t=ms(e)|0;c=1;continue}}if((q|0)==74){t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if((t|0)==48){c=0;o=0;do{t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;c=Wc(c|0,o|0,-1,-1)|0;o=I}while((t|0)==48);x=0;u=0;S=c;f=1;h=1;k=0;p=1.0;c=0;s=0.0}else{x=0;u=0;S=0;o=0;f=c;h=1;k=0;p=1.0;c=0;s=0.0}}while(1){v=t+-48|0;m=t|32;if(v>>>0>=10){w=(t|0)==46;if(!(w|(m+-97|0)>>>0<6)){m=S;v=x;break}if(w)if(!h){w=u;o=x;v=x;h=1;m=k;l=p}else{m=S;v=x;t=46;break}else q=86}else q=86;if((q|0)==86){q=0;t=(t|0)>57?m+-87|0:v;do{if(!((x|0)<0|(x|0)==0&u>>>0<8)){if((x|0)<0|(x|0)==0&u>>>0<14){g=p*.0625;m=k;l=g;s=s+g*+(t|0);break}if((k|0)!=0|(t|0)==0){m=k;l=p}else{m=1;l=p;s=s+p*.5}}else{m=k;l=p;c=t+(c<<4)|0}}while(0);u=Wc(u|0,x|0,1,0)|0;w=S;v=I;f=1}t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;x=v;S=w;t=n[t>>0]|0;k=m;p=l;continue}else{x=v;S=w;t=ms(e)|0;k=m;p=l;continue}}if(!f){t=(a[E>>2]|0)==0;if(!t)a[A>>2]=(a[A>>2]|0)+-1;if(i){if(!t?(C=a[A>>2]|0,a[A>>2]=C+-1,(h|0)!=0):0)a[A>>2]=C+-2}else hs(e,0);s=+(O|0)*0.0;break e}f=(h|0)==0;h=f?u:m;f=f?v:o;if((v|0)<0|(v|0)==0&u>>>0<8){o=v;do{c=c<<4;u=Wc(u|0,o|0,1,0)|0;o=I}while((o|0)<0|(o|0)==0&u>>>0<8)}if((t|32|0)==112){o=Ta(e,i)|0;t=I;if((o|0)==0&(t|0)==-2147483648){if(!i){hs(e,0);s=0.0;break e}if(!(a[E>>2]|0)){o=0;t=0}else{a[A>>2]=(a[A>>2]|0)+-1;o=0;t=0}}}else if(!(a[E>>2]|0)){o=0;t=0}else{a[A>>2]=(a[A>>2]|0)+-1;o=0;t=0}R=Vc(h|0,f|0,2)|0;R=Wc(R|0,I|0,-32,-1)|0;t=Wc(R|0,I|0,o|0,t|0)|0;o=I;if(!c){s=+(O|0)*0.0;break e}if((o|0)>0|(o|0)==0&t>>>0>(0-$|0)>>>0){a[(us()|0)>>2]=34;s=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break e}R=$+-106|0;M=((R|0)<0)<<31>>31;if((o|0)<(M|0)|(o|0)==(M|0)&t>>>0<R>>>0){a[(us()|0)>>2]=34;s=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break e}if((c|0)>-1){do{M=!(s>=.5);R=M&1|c<<1;c=R^1;s=s+(M?s:s+-1.0);t=Wc(t|0,o|0,-1,-1)|0;o=I}while((R|0)>-1);u=t;p=s}else{u=t;p=s}t=Qc(32,0,$|0,(($|0)<0)<<31>>31|0)|0;t=Wc(u|0,o|0,t|0,I|0)|0;$=I;if(0>($|0)|0==($|0)&F>>>0>t>>>0)if((t|0)<0){t=0;q=127}else q=125;else{t=F;q=125}if((q|0)==125)if((t|0)<53)q=127;else{o=t;l=+(O|0);s=0.0}if((q|0)==127){s=+(O|0);o=t;l=s;s=+vs(+Ss(1.0,84-t|0),s)}F=(c&1|0)==0&(p!=0.0&(o|0)<32);s=l*(F?0.0:p)+(s+l*+(((F&1)+c|0)>>>0))-s;if(!(s!=0.0))a[(us()|0)>>2]=34;s=+xs(s,u);break e}else t=o}while(0);P=$+F|0;M=0-P|0;c=0;i:while(1){switch(t|0){case 46:{q=138;break i}case 48:break;default:{o=0;m=0;h=0;break i}}t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0;c=1;continue}else{t=ms(e)|0;c=1;continue}}if((q|0)==138){t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if((t|0)==48){o=0;t=0;while(1){o=Wc(o|0,t|0,-1,-1)|0;c=I;t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if((t|0)==48)t=c;else{m=c;c=1;h=1;break}}}else{o=0;m=0;h=1}}a[R>>2]=0;f=t+-48|0;u=(t|0)==46;i:do{if(u|f>>>0<10){T=R+496|0;x=0;w=0;k=u;q=m;v=c;C=h;c=0;u=0;h=0;r:while(1){do{if(k)if(!C){o=x;m=w;C=1}else{m=q;t=x;f=w;break r}else{k=Wc(x|0,w|0,1,0)|0;w=I;S=(t|0)!=48;if((u|0)>=125){if(!S){m=q;x=k;break}a[T>>2]=a[T>>2]|1;m=q;x=k;break}m=R+(u<<2)|0;if(c)f=t+-48+((a[m>>2]|0)*10|0)|0;a[m>>2]=f;c=c+1|0;f=(c|0)==9;m=q;x=k;v=1;c=f?0:c;u=(f&1)+u|0;h=S?k:h}}while(0);t=a[A>>2]|0;if(t>>>0<(a[E>>2]|0)>>>0){a[A>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;f=t+-48|0;k=(t|0)==46;if(!(k|f>>>0<10)){f=C;q=161;break i}else q=m}v=(v|0)!=0;q=169}else{x=0;w=0;v=c;f=h;c=0;u=0;h=0;q=161}}while(0);do{if((q|0)==161){T=(f|0)==0;o=T?x:o;m=T?w:m;v=(v|0)!=0;if(!((t|32|0)==101&v))if((t|0)>-1){t=x;f=w;q=169;break}else{t=x;f=w;q=171;break}f=Ta(e,i)|0;t=I;if((f|0)==0&(t|0)==-2147483648){if(!i){hs(e,0);s=0.0;break}if(!(a[E>>2]|0)){f=0;t=0}else{a[A>>2]=(a[A>>2]|0)+-1;f=0;t=0}}o=Wc(f|0,t|0,o|0,m|0)|0;v=x;m=I;f=w;q=173}}while(0);if((q|0)==169)if(a[E>>2]|0){a[A>>2]=(a[A>>2]|0)+-1;if(v){v=t;q=173}else q=172}else q=171;if((q|0)==171)if(v){v=t;q=173}else q=172;do{if((q|0)==172){a[(us()|0)>>2]=22;hs(e,0);s=0.0}else if((q|0)==173){t=a[R>>2]|0;if(!t){s=+(O|0)*0.0;break}if(((f|0)<0|(f|0)==0&v>>>0<10)&((o|0)==(v|0)&(m|0)==(f|0))?F>>>0>30|(t>>>F|0)==0:0){s=+(O|0)*+(t>>>0);break}e=($|0)/-2|0;A=((e|0)<0)<<31>>31;if((m|0)>(A|0)|(m|0)==(A|0)&o>>>0>e>>>0){a[(us()|0)>>2]=34;s=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break}e=$+-106|0;A=((e|0)<0)<<31>>31;if((m|0)<(A|0)|(m|0)==(A|0)&o>>>0<e>>>0){a[(us()|0)>>2]=34;s=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break}if(c){if((c|0)<9){f=R+(u<<2)|0;t=a[f>>2]|0;do{t=t*10|0;c=c+1|0}while((c|0)!=9);a[f>>2]=t}u=u+1|0}if((h|0)<9?(h|0)<=(o|0)&(o|0)<18:0){if((o|0)==9){s=+(O|0)*+((a[R>>2]|0)>>>0);break}if((o|0)<9){s=+(O|0)*+((a[R>>2]|0)>>>0)/+(a[2648+(8-o<<2)>>2]|0);break}e=F+27+(ie(o,-3)|0)|0;t=a[R>>2]|0;if((e|0)>30|(t>>>e|0)==0){s=+(O|0)*+(t>>>0)*+(a[2648+(o+-10<<2)>>2]|0);break}}t=(o|0)%9|0;if(!t){c=0;t=0}else{v=(o|0)>-1?t:t+9|0;f=a[2648+(8-v<<2)>>2]|0;if(u){h=1e9/(f|0)|0;c=0;t=0;m=0;do{E=R+(m<<2)|0;A=a[E>>2]|0;e=((A>>>0)/(f>>>0)|0)+t|0;a[E>>2]=e;t=ie((A>>>0)%(f>>>0)|0,h)|0;e=(m|0)==(c|0)&(e|0)==0;m=m+1|0;o=e?o+-9|0:o;c=e?m&127:c}while((m|0)!=(u|0));if(t){a[R+(u<<2)>>2]=t;u=u+1|0}}else{c=0;u=0}t=0;o=9-v+o|0}i:while(1){w=(o|0)<18;k=(o|0)==18;S=R+(c<<2)|0;do{if(!w){if(!k)break i;if((a[S>>2]|0)>>>0>=9007199){o=18;break i}}f=0;h=u+127|0;while(1){v=h&127;m=R+(v<<2)|0;h=Vc(a[m>>2]|0,0,29)|0;h=Wc(h|0,I|0,f|0,0)|0;f=I;if(f>>>0>0|(f|0)==0&h>>>0>1e9){e=ru(h|0,f|0,1e9,0)|0;h=su(h|0,f|0,1e9,0)|0;f=e}else f=0;a[m>>2]=h;e=(v|0)==(c|0);u=(v|0)!=(u+127&127|0)|e?u:(h|0)==0?v:u;if(e)break;else h=v+-1|0}t=t+-29|0}while((f|0)==0);c=c+127&127;if((c|0)==(u|0)){e=u+127&127;u=R+((u+126&127)<<2)|0;a[u>>2]=a[u>>2]|a[R+(e<<2)>>2];u=e}a[R+(c<<2)>>2]=f;o=o+9|0}i:while(1){x=u+1&127;S=R+((u+127&127)<<2)|0;while(1){w=(o|0)==18;k=(o|0)>27?9:1;v=w^1;while(1){h=c&127;m=(h|0)==(u|0);do{if(!m){f=a[R+(h<<2)>>2]|0;if(f>>>0<9007199){q=219;break}if(f>>>0>9007199)break;f=c+1&127;if((f|0)==(u|0)){q=219;break}f=a[R+(f<<2)>>2]|0;if(f>>>0<254740991){q=219;break}if(!(f>>>0>254740991|v)){o=h;break i}}else q=219}while(0);if((q|0)==219?(q=0,w):0){q=220;break i}t=t+k|0;if((c|0)==(u|0))c=u;else break}v=(1<<k)+-1|0;w=1e9>>>k;h=c;f=0;m=c;while(1){A=R+(m<<2)|0;e=a[A>>2]|0;c=(e>>>k)+f|0;a[A>>2]=c;f=ie(e&v,w)|0;c=(m|0)==(h|0)&(c|0)==0;m=m+1&127;o=c?o+-9|0:o;c=c?m:h;if((m|0)==(u|0))break;else h=c}if(!f)continue;if((x|0)!=(c|0))break;a[S>>2]=a[S>>2]|1}a[R+(u<<2)>>2]=f;u=x}if((q|0)==220)if(m){a[R+(x+-1<<2)>>2]=0;o=u;u=x}else o=h;s=+((a[R+(o<<2)>>2]|0)>>>0);o=c+1&127;if((o|0)==(u|0)){u=c+2&127;a[R+(u+-1<<2)>>2]=0}g=+(O|0);l=g*(s*1.0e9+ +((a[R+(o<<2)>>2]|0)>>>0));w=t+53|0;m=w-$|0;v=(m|0)<(F|0);o=v&1;h=v?(m|0)<0?0:m:F;if((h|0)<53){D=+vs(+Ss(1.0,105-h|0),l);p=+ks(l,+Ss(1.0,53-h|0));b=D;s=p;p=D+(l-p)}else{b=0.0;s=0.0;p=l}f=c+2&127;do{if((f|0)==(u|0))l=s;else{f=a[R+(f<<2)>>2]|0;do{if(f>>>0>=5e8){if(f>>>0>5e8){s=g*.75+s;break}if((c+3&127|0)==(u|0)){s=g*.5+s;break}else{s=g*.75+s;break}}else{if((f|0)==0?(c+3&127|0)==(u|0):0)break;s=g*.25+s}}while(0);if((53-h|0)<=1){l=s;break}if(+ks(s,1.0)!=0.0){l=s;break}l=s+1.0}}while(0);s=p+l-b;do{if((w&2147483647|0)>(-2-P|0)){if(+B(+s)>=9007199254740992.0){o=v&(h|0)==(m|0)?0:o;t=t+1|0;s=s*.5}if((t+50|0)<=(M|0)?!(l!=0.0&(o|0)!=0):0)break;a[(us()|0)>>2]=34}}while(0);s=+xs(s,t)}}while(0);break e}default:{if(a[E>>2]|0)a[A>>2]=(a[A>>2]|0)+-1;a[(us()|0)>>2]=22;hs(e,0);s=0.0;break e}}}}}while(0);if((q|0)==23){o=(a[E>>2]|0)==0;if(!o)a[A>>2]=(a[A>>2]|0)+-1;if((i|0)!=0&t>>>0>3)do{if(!o)a[A>>2]=(a[A>>2]|0)+-1;t=t+-1|0}while(t>>>0>3)}s=+(O|0)*_}}while(0);d=N;return+s}function fs(e,t,i,s,o){e=e|0;t=t|0;i=i|0;s=s|0;o=o|0;var l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0;e:do{if(t>>>0>36){a[(us()|0)>>2]=22;o=0;s=0}else{g=e+4|0;b=e+100|0;do{l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0}while((cs(l)|0)!=0);t:do{switch(l|0){case 43:case 45:{c=((l|0)==45)<<31>>31;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0;m=c;break t}else{l=ms(e)|0;m=c;break t}}default:m=0}}while(0);c=(t|0)==0;do{if((t&-17|0)==0&(l|0)==48){l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;if((l|32|0)!=120)if(c){t=8;f=46;break}else{f=32;break}t=a[g>>2]|0;if(t>>>0<(a[b>>2]|0)>>>0){a[g>>2]=t+1;l=n[t>>0]|0}else l=ms(e)|0;if((n[14643+(l+1)>>0]|0)>15){s=(a[b>>2]|0)==0;if(!s)a[g>>2]=(a[g>>2]|0)+-1;if(!i){hs(e,0);o=0;s=0;break e}if(s){o=0;s=0;break e}a[g>>2]=(a[g>>2]|0)+-1;o=0;s=0;break e}else{t=16;f=46}}else{t=c?10:t;if((n[14643+(l+1)>>0]|0)>>>0<t>>>0)f=32;else{if(a[b>>2]|0)a[g>>2]=(a[g>>2]|0)+-1;hs(e,0);a[(us()|0)>>2]=22;o=0;s=0;break e}}}while(0);if((f|0)==32)if((t|0)==10){t=l+-48|0;if(t>>>0<10){l=0;while(1){c=(l*10|0)+t|0;t=a[g>>2]|0;if(t>>>0<(a[b>>2]|0)>>>0){a[g>>2]=t+1;l=n[t>>0]|0}else l=ms(e)|0;t=l+-48|0;if(!(t>>>0<10&c>>>0<429496729)){t=c;break}else l=c}c=0}else{t=0;c=0}i=l+-48|0;if(i>>>0<10){while(1){u=iu(t|0,c|0,10,0)|0;d=I;p=((i|0)<0)<<31>>31;h=~p;if(d>>>0>h>>>0|(d|0)==(h|0)&u>>>0>~i>>>0){u=t;break}t=Wc(u|0,d|0,i|0,p|0)|0;c=I;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;i=l+-48|0;if(!(i>>>0<10&(c>>>0<429496729|(c|0)==429496729&t>>>0<2576980378))){u=t;break}}if(i>>>0>9){l=u;t=m}else{t=10;f=72}}else{l=t;t=m}}else f=46;t:do{if((f|0)==46){if(!(t+-1&t)){f=r[14900+((t*23|0)>>>5&7)>>0]|0;c=r[14643+(l+1)>>0]|0;i=c&255;if(i>>>0<t>>>0){l=0;while(1){u=i|l<<f;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;c=r[14643+(l+1)>>0]|0;i=c&255;if(!(u>>>0<134217728&i>>>0<t>>>0))break;else l=u}i=0}else{i=0;u=0}d=Gc(-1,-1,f|0)|0;p=I;if((c&255)>>>0>=t>>>0|(i>>>0>p>>>0|(i|0)==(p|0)&u>>>0>d>>>0)){c=i;f=72;break}else l=i;while(1){u=Vc(u|0,l|0,f|0)|0;i=I;u=c&255|u;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;c=r[14643+(l+1)>>0]|0;if((c&255)>>>0>=t>>>0|(i>>>0>p>>>0|(i|0)==(p|0)&u>>>0>d>>>0)){c=i;f=72;break t}else l=i}}c=r[14643+(l+1)>>0]|0;i=c&255;if(i>>>0<t>>>0){l=0;while(1){u=i+(ie(l,t)|0)|0;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;c=r[14643+(l+1)>>0]|0;i=c&255;if(!(u>>>0<119304647&i>>>0<t>>>0))break;else l=u}i=0}else{u=0;i=0}if((c&255)>>>0<t>>>0){f=ru(-1,-1,t|0,0)|0;h=I;p=i;while(1){if(p>>>0>h>>>0|(p|0)==(h|0)&u>>>0>f>>>0){c=p;f=72;break t}i=iu(u|0,p|0,t|0,0)|0;d=I;c=c&255;if(d>>>0>4294967295|(d|0)==-1&i>>>0>~c>>>0){c=p;f=72;break t}u=Wc(c|0,0,i|0,d|0)|0;i=I;l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0;c=r[14643+(l+1)>>0]|0;if((c&255)>>>0>=t>>>0){c=i;f=72;break}else p=i}}else{c=i;f=72}}}while(0);if((f|0)==72)if((n[14643+(l+1)>>0]|0)>>>0<t>>>0){do{l=a[g>>2]|0;if(l>>>0<(a[b>>2]|0)>>>0){a[g>>2]=l+1;l=n[l>>0]|0}else l=ms(e)|0}while((n[14643+(l+1)>>0]|0)>>>0<t>>>0);a[(us()|0)>>2]=34;c=o;l=s;t=(s&1|0)==0&0==0?m:0}else{l=u;t=m}if(a[b>>2]|0)a[g>>2]=(a[g>>2]|0)+-1;if(!(c>>>0<o>>>0|(c|0)==(o|0)&l>>>0<s>>>0)){if(!((s&1|0)!=0|0!=0|(t|0)!=0)){a[(us()|0)>>2]=34;s=Wc(s|0,o|0,-1,-1)|0;o=I;break}if(c>>>0>o>>>0|(c|0)==(o|0)&l>>>0>s>>>0){a[(us()|0)>>2]=34;break}}s=((t|0)<0)<<31>>31;s=Qc(l^t|0,c^s|0,t|0,s|0)|0;o=I}}while(0);I=o;return s|0}function hs(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;a[e+104>>2]=t;i=a[e+4>>2]|0;r=a[e+8>>2]|0;s=r-i|0;a[e+108>>2]=s;if((t|0)!=0&(s|0)>(t|0))a[e+100>>2]=i+t;else a[e+100>>2]=r;return}function ms(e){e=e|0;var t=0,i=0,s=0,o=0,l=0,c=0;i=e+104|0;l=a[i>>2]|0;if((l|0)!=0?(a[e+108>>2]|0)>=(l|0):0)c=4;else{t=js(e)|0;if((t|0)>=0){o=a[i>>2]|0;i=e+8|0;if(o){s=a[i>>2]|0;l=a[e+4>>2]|0;i=s;o=o-(a[e+108>>2]|0)+-1|0;if((i-l|0)>(o|0))a[e+100>>2]=l+o;else c=9}else{s=a[i>>2]|0;i=s;c=9}if((c|0)==9)a[e+100>>2]=i;i=a[e+4>>2]|0;if(s){e=e+108|0;a[e>>2]=s+1-i+(a[e>>2]|0)}i=i+-1|0;if((n[i>>0]|0|0)!=(t|0))r[i>>0]=t}else c=4}if((c|0)==4){a[e+100>>2]=0;t=-1}return t|0}function bs(e){e=e|0;if(e>>>0>4294963200){a[(us()|0)>>2]=0-e;e=-1}return e|0}function gs(e,t){e=+e;t=+t;var i=0,r=0;u[f>>3]=e;r=a[f>>2]|0;i=a[f+4>>2]|0;u[f>>3]=t;i=a[f+4>>2]&-2147483648|i&2147483647;a[f>>2]=r;a[f+4>>2]=i;return+ +u[f>>3]}function vs(e,t){e=+e;t=+t;return+ +gs(e,t)}function ws(e,t){e=+e;t=+t;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,d=0,p=0,h=0,m=0,b=0;u[f>>3]=e;i=a[f>>2]|0;d=a[f+4>>2]|0;u[f>>3]=t;p=a[f>>2]|0;h=a[f+4>>2]|0;r=Gc(i|0,d|0,52)|0;r=r&2047;l=Gc(p|0,h|0,52)|0;l=l&2047;m=d&-2147483648;o=Vc(p|0,h|0,1)|0;c=I;e:do{if(!((o|0)==0&(c|0)==0)?(n=h&2147483647,!(n>>>0>2146435072|(n|0)==2146435072&p>>>0>0|(r|0)==2047)):0){s=Vc(i|0,d|0,1)|0;n=I;if(!(n>>>0>c>>>0|(n|0)==(c|0)&s>>>0>o>>>0))return+((s|0)==(o|0)&(n|0)==(c|0)?e*0.0:e);if(!r){r=Vc(i|0,d|0,12)|0;s=I;if((s|0)>-1|(s|0)==-1&r>>>0>4294967295){n=r;r=0;do{r=r+-1|0;n=Vc(n|0,s|0,1)|0;s=I}while((s|0)>-1|(s|0)==-1&n>>>0>4294967295)}else r=0;i=Vc(i|0,d|0,1-r|0)|0;s=I}else s=d&1048575|1048576;if(!l){n=Vc(p|0,h|0,12)|0;o=I;if((o|0)>-1|(o|0)==-1&n>>>0>4294967295){l=0;do{l=l+-1|0;n=Vc(n|0,o|0,1)|0;o=I}while((o|0)>-1|(o|0)==-1&n>>>0>4294967295)}else l=0;p=Vc(p|0,h|0,1-l|0)|0;d=I}else d=h&1048575|1048576;c=Qc(i|0,s|0,p|0,d|0)|0;o=I;n=(o|0)>-1|(o|0)==-1&c>>>0>4294967295;t:do{if((r|0)>(l|0)){while(1){if(n)if((i|0)==(p|0)&(s|0)==(d|0))break;else{i=c;s=o}i=Vc(i|0,s|0,1)|0;s=I;r=r+-1|0;c=Qc(i|0,s|0,p|0,d|0)|0;o=I;n=(o|0)>-1|(o|0)==-1&c>>>0>4294967295;if((r|0)<=(l|0))break t}t=e*0.0;break e}}while(0);if(n)if((i|0)==(p|0)&(s|0)==(d|0)){t=e*0.0;break}else{s=o;i=c}if(s>>>0<1048576|(s|0)==1048576&i>>>0<0)do{i=Vc(i|0,s|0,1)|0;s=I;r=r+-1|0}while(s>>>0<1048576|(s|0)==1048576&i>>>0<0);if((r|0)>0){h=Wc(i|0,s|0,0,-1048576)|0;i=I;r=Vc(r|0,0,52)|0;i=i|I;r=h|r}else{r=Gc(i|0,s|0,1-r|0)|0;i=I}a[f>>2]=r;a[f+4>>2]=i|m;t=+u[f>>3]}else b=3}while(0);if((b|0)==3){t=e*t;t=t/t}return+t}function ks(e,t){e=+e;t=+t;return+ +ws(e,t)}function ys(e,t){e=+e;t=t|0;var i=0,r=0,s=0;u[f>>3]=e;i=a[f>>2]|0;r=a[f+4>>2]|0;s=Gc(i|0,r|0,52)|0;s=s&2047;switch(s|0){case 0:{if(e!=0.0){e=+ys(e*18446744073709551616.0,t);i=(a[t>>2]|0)+-64|0}else i=0;a[t>>2]=i;break}case 2047:break;default:{a[t>>2]=s+-1022;a[f>>2]=i;a[f+4>>2]=r&-2146435073|1071644672;e=+u[f>>3]}}return+e}function _s(e,t){e=+e;t=t|0;return+ +ys(e,t)}function Ss(e,t){e=+e;t=t|0;var i=0;if((t|0)>1023){e=e*8988465674311579538646525.0e283;i=t+-1023|0;if((i|0)>1023){i=t+-2046|0;i=(i|0)>1023?1023:i;e=e*8988465674311579538646525.0e283}}else if((t|0)<-1022){e=e*2.2250738585072014e-308;i=t+1022|0;if((i|0)<-1022){i=t+2044|0;i=(i|0)<-1022?-1022:i;e=e*2.2250738585072014e-308}}else i=t;i=Vc(i+1023|0,0,52)|0;t=I;a[f>>2]=i;a[f+4>>2]=t;return+(e*+u[f>>3])}function xs(e,t){e=+e;t=t|0;return+ +Ss(e,t)}function Cs(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var n=0,o=0,l=0,c=0,u=0,p=0;u=d;d=d+16|0;n=u;l=(s|0)==0?2680:s;s=a[l>>2]|0;e:do{if(!t)if(!s)s=0;else c=15;else{o=(e|0)==0?n:e;if(!i)s=-2;else{if(!s){s=r[t>>0]|0;n=s&255;if(s<<24>>24>-1){a[o>>2]=n;s=s<<24>>24!=0&1;break}s=n+-194|0;if(s>>>0>50){c=15;break}s=a[2432+(s<<2)>>2]|0;n=i+-1|0;if(n){t=t+1|0;c=9}}else{n=i;c=9}t:do{if((c|0)==9){e=r[t>>0]|0;p=(e&255)>>>3;if((p+-16|p+(s>>26))>>>0>7){c=15;break e}while(1){t=t+1|0;s=(e&255)+-128|s<<6;n=n+-1|0;if((s|0)>=0)break;if(!n)break t;e=r[t>>0]|0;if((e&-64)<<24>>24!=-128){c=15;break e}}a[l>>2]=0;a[o>>2]=s;s=i-n|0;break e}}while(0);a[l>>2]=s;s=-2}}}while(0);if((c|0)==15){a[l>>2]=0;a[(us()|0)>>2]=84;s=-1}d=u;return s|0}function qs(e){e=e|0;if(!e)e=1;else e=(a[e>>2]|0)==0;return e&1|0}function Ts(e,t,i){e=e|0;t=t|0;i=i|0;do{if(e){if(t>>>0<128){r[e>>0]=t;e=1;break}if(t>>>0<2048){r[e>>0]=t>>>6|192;r[e+1>>0]=t&63|128;e=2;break}if(t>>>0<55296|(t&-8192|0)==57344){r[e>>0]=t>>>12|224;r[e+1>>0]=t>>>6&63|128;r[e+2>>0]=t&63|128;e=3;break}if((t+-65536|0)>>>0<1048576){r[e>>0]=t>>>18|240;r[e+1>>0]=t>>>12&63|128;r[e+2>>0]=t>>>6&63|128;r[e+3>>0]=t&63|128;e=4;break}else{a[(us()|0)>>2]=84;e=-1;break}}else e=1}while(0);return e|0}function Es(e,t){e=e|0;t=t|0;if(!e)e=0;else e=Ts(e,t,0)|0;return e|0}function As(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0;h=d;d=d+112|0;f=h+40|0;u=h+24|0;c=h+16|0;n=h;p=h+52|0;s=r[t>>0]|0;if(pa(14909,s<<24>>24,4)|0){i=za(1144)|0;if(!i)i=0;else{o=i;l=o+112|0;do{a[o>>2]=0;o=o+4|0}while((o|0)<(l|0));if(!(ba(t,43)|0))a[i>>2]=s<<24>>24==114?8:4;if(ba(t,101)|0){a[n>>2]=e;a[n+4>>2]=2;a[n+8>>2]=1;xe(221,n|0)|0;s=r[t>>0]|0}if(s<<24>>24==97){a[c>>2]=e;a[c+4>>2]=3;s=xe(221,c|0)|0;if(!(s&1024)){a[u>>2]=e;a[u+4>>2]=4;a[u+8>>2]=s|1024;xe(221,u|0)|0}t=a[i>>2]|128;a[i>>2]=t}else t=a[i>>2]|0;a[i+60>>2]=e;a[i+44>>2]=i+120;a[i+48>>2]=1024;s=i+75|0;r[s>>0]=-1;if((t&8|0)==0?(a[f>>2]=e,a[f+4>>2]=21505,a[f+8>>2]=p,(mt(54,f|0)|0)==0):0)r[s>>0]=10;a[i+32>>2]=14;a[i+36>>2]=4;a[i+40>>2]=5;a[i+12>>2]=2;if(!(a[598]|0))a[i+76>>2]=-1;Tt(2416);s=a[603]|0;a[i+56>>2]=s;if(s)a[s+52>>2]=i;a[603]=i;bt(2416)}}else{a[(us()|0)>>2]=22;i=0}d=h;return i|0}function Ps(e){e=e|0;var t=0,i=0,s=0;i=(ba(e,43)|0)==0;t=r[e>>0]|0;i=i?t<<24>>24!=114&1:2;s=(ba(e,120)|0)==0;i=s?i:i|128;e=(ba(e,101)|0)==0;e=e?i:i|524288;e=t<<24>>24==114?e:e|64;e=t<<24>>24==119?e|512:e;return(t<<24>>24==97?e|1024:e)|0}function Ms(e){e=e|0;return 0}function Is(e){e=e|0;return}function Rs(e){e=e|0;var t=0,i=0;t=d;d=d+16|0;i=t;a[i>>2]=a[e+60>>2];e=bs(Et(6,i|0)|0)|0;d=t;return e|0}function Os(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0;p=d;d=d+48|0;o=p+16|0;n=p;s=p+32|0;a[s>>2]=t;l=s+4|0;u=e+48|0;f=a[u>>2]|0;a[l>>2]=i-((f|0)!=0&1);c=e+44|0;a[s+8>>2]=a[c>>2];a[s+12>>2]=f;if(!(a[597]|0)){a[o>>2]=a[e+60>>2];a[o+4>>2]=s;a[o+8>>2]=2;s=bs(Ht(145,o|0)|0)|0}else{Oe(13,e|0);a[n>>2]=a[e+60>>2];a[n+4>>2]=s;a[n+8>>2]=2;s=bs(Ht(145,n|0)|0)|0;vt(0)}if((s|0)>=1){l=a[l>>2]|0;if(s>>>0>l>>>0){o=a[c>>2]|0;n=e+4|0;a[n>>2]=o;a[e+8>>2]=o+(s-l);if(!(a[u>>2]|0))s=i;else{a[n>>2]=o+1;r[t+(i+-1)>>0]=r[o>>0]|0;s=i}}}else{a[e>>2]=a[e>>2]|s&48^16;a[e+8>>2]=0;a[e+4>>2]=0}d=p;return s|0}function $s(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0;s=d;d=d+32|0;n=s;r=s+20|0;a[n>>2]=a[e+60>>2];a[n+4>>2]=0;a[n+8>>2]=t;a[n+12>>2]=r;a[n+16>>2]=i;if((bs(Nt(140,n|0)|0)|0)<0){a[r>>2]=-1;e=-1}else e=a[r>>2]|0;d=s;return e|0}function Fs(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0;b=d;d=d+48|0;f=b+16|0;p=b;r=b+32|0;h=e+28|0;s=a[h>>2]|0;a[r>>2]=s;m=e+20|0;s=(a[m>>2]|0)-s|0;a[r+4>>2]=s;a[r+8>>2]=t;a[r+12>>2]=i;c=e+60|0;u=e+44|0;t=2;s=s+i|0;while(1){if(!(a[597]|0)){a[f>>2]=a[c>>2];a[f+4>>2]=r;a[f+8>>2]=t;o=bs(Bt(146,f|0)|0)|0}else{Oe(14,e|0);a[p>>2]=a[c>>2];a[p+4>>2]=r;a[p+8>>2]=t;o=bs(Bt(146,p|0)|0)|0;vt(0)}if((s|0)==(o|0)){s=6;break}if((o|0)<0){s=8;break}s=s-o|0;n=a[r+4>>2]|0;if(o>>>0<=n>>>0)if((t|0)==2){a[h>>2]=(a[h>>2]|0)+o;l=n;t=2}else l=n;else{l=a[u>>2]|0;a[h>>2]=l;a[m>>2]=l;l=a[r+12>>2]|0;o=o-n|0;r=r+8|0;t=t+-1|0}a[r>>2]=(a[r>>2]|0)+o;a[r+4>>2]=l-o}if((s|0)==6){f=a[u>>2]|0;a[e+16>>2]=f+(a[e+48>>2]|0);e=f;a[h>>2]=e;a[m>>2]=e}else if((s|0)==8){a[e+16>>2]=0;a[h>>2]=0;a[m>>2]=0;a[e>>2]=a[e>>2]|32;if((t|0)==2)i=0;else i=i-(a[r+4>>2]|0)|0}d=b;return i|0}function Ns(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0;n=d;d=d+80|0;s=n;a[e+36>>2]=4;if((a[e>>2]&64|0)==0?(a[s>>2]=a[e+60>>2],a[s+4>>2]=21505,a[s+8>>2]=n+12,(mt(54,s|0)|0)!=0):0)r[e+75>>0]=-1;s=Fs(e,t,i)|0;d=n;return s|0}function Ds(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0;r=e+84|0;n=a[r>>2]|0;o=i+256|0;s=pa(n,0,o)|0;s=(s|0)==0?o:s-n|0;i=s>>>0<i>>>0?s:i;Kc(t|0,n|0,i|0)|0;a[e+4>>2]=n+i;t=n+s|0;a[e+8>>2]=t;a[r>>2]=t;return i|0}function Ls(e){e=e|0;var t=0,i=0;t=e+74|0;i=r[t>>0]|0;r[t>>0]=i+255|i;t=e+20|0;i=e+44|0;if((a[t>>2]|0)>>>0>(a[i>>2]|0)>>>0)Du[a[e+36>>2]&15](e,0,0)|0;a[e+16>>2]=0;a[e+28>>2]=0;a[t>>2]=0;t=a[e>>2]|0;if(t&20)if(!(t&4))t=-1;else{a[e>>2]=t|32;t=-1}else{t=a[i>>2]|0;a[e+8>>2]=t;a[e+4>>2]=t;t=0}return t|0}function zs(e){e=e|0;var t=0,i=0;t=e+74|0;i=r[t>>0]|0;r[t>>0]=i+255|i;t=a[e>>2]|0;if(!(t&8)){a[e+8>>2]=0;a[e+4>>2]=0;t=a[e+44>>2]|0;a[e+28>>2]=t;a[e+20>>2]=t;a[e+16>>2]=t+(a[e+48>>2]|0);t=0}else{a[e>>2]=t|32;t=-1}return t|0}function js(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;if((a[e+8>>2]|0)==0?(Ls(e)|0)!=0:0)t=-1;else if((Du[a[e+32>>2]&15](e,t,1)|0)==1)t=n[t>>0]|0;else t=-1;d=i;return t|0}function Hs(e){e=e|0;var t=0,i=0,r=0;r=(a[e>>2]&1|0)!=0;if(!r){Tt(2416);i=a[e+52>>2]|0;t=e+56|0;if(i)a[i+56>>2]=a[t>>2];t=a[t>>2]|0;if(t)a[t+52>>2]=i;if((a[603]|0)==(e|0))a[603]=t;bt(2416)}t=Us(e)|0;t=Yu[a[e+12>>2]&31](e)|0|t;i=a[e+92>>2]|0;if(i)ja(i);if(!r)ja(e);return t|0}function Bs(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Ms(e)|0)==0;e=(a[e>>2]|0)>>>5&1}else e=(a[e>>2]|0)>>>5&1;return e|0}function Us(e){e=e|0;var t=0,i=0;do{if(e){if((a[e+76>>2]|0)<=-1){t=Pa(e)|0;break}i=(Ms(e)|0)==0;t=Pa(e)|0;if(!i)Is(e)}else{if(!(a[660]|0))t=0;else t=Us(a[660]|0)|0;Tt(2416);e=a[603]|0;if(e)do{if((a[e+76>>2]|0)>-1)i=Ms(e)|0;else i=0;if((a[e+20>>2]|0)>>>0>(a[e+28>>2]|0)>>>0)t=Pa(e)|0|t;if(i)Is(e);e=a[e+56>>2]|0}while((e|0)!=0);bt(2416)}}while(0);return t|0}function Qs(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0;if((a[i+76>>2]|0)>-1)h=Ms(i)|0;else h=0;s=t+-1|0;if((t|0)<2){m=i+74|0;f=r[m>>0]|0;r[m>>0]=f+255|f;if(h)Is(i);if(!s)r[e>>0]=0;else e=0}else{e:do{if(s){p=i+4|0;f=i+8|0;o=e;while(1){l=a[p>>2]|0;b=l;u=(a[f>>2]|0)-b|0;c=pa(l,10,u)|0;g=(c|0)==0;c=g?u:1-b+c|0;b=c>>>0<s>>>0;c=b?c:s;Kc(o|0,l|0,c|0)|0;l=a[p>>2]|0;u=l+c|0;a[p>>2]=u;t=o+c|0;d=s-c|0;if(!(g&b)){m=18;break e}if(u>>>0<(a[f>>2]|0)>>>0){c=c+1|0;a[p>>2]=l+c;l=n[u>>0]|0}else{s=js(i)|0;if((s|0)<0)break;c=c+1|0;l=s}s=d+-1|0;o=o+c|0;r[t>>0]=l;if(!((s|0)!=0&(l&255|0)!=10)){t=o;m=18;break e}}if((t|0)!=(e|0)?(a[i>>2]&16|0)!=0:0)m=18;else e=0}else{t=e;m=18}}while(0);if((m|0)==18)if(!e)e=0;else r[t>>0]=0;if(h)Is(i)}return e|0}function Ys(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0;n=d;d=d+32|0;s=n+16|0;i=n;if(pa(14909,r[t>>0]|0,4)|0){o=Ps(t)|0|32768;a[i>>2]=e;a[i+4>>2]=o;a[i+8>>2]=438;i=bs(At(5,i|0)|0)|0;if((i|0)>=0){e=As(i,t)|0;if(!e){a[s>>2]=i;Et(6,s|0)|0;e=0}}else e=0}else{a[(us()|0)>>2]=22;e=0}d=n;return e|0}function Vs(e,t){e=e|0;t=t|0;return(ia(e,ya(e)|0,1,t)|0)+-1|0}function Ws(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var n=0,o=0,l=0,c=0,u=0,d=0;c=ie(i,t)|0;if((a[s+76>>2]|0)>-1)u=Ms(s)|0;else u=0;n=s+74|0;o=r[n>>0]|0;r[n>>0]=o+255|o;n=s+4|0;o=a[n>>2]|0;l=(a[s+8>>2]|0)-o|0;if((l|0)>0){l=l>>>0<c>>>0?l:c;Kc(e|0,o|0,l|0)|0;a[n>>2]=o+l;e=e+l|0;n=c-l|0}else n=c;e:do{if(!n)d=13;else{l=s+32|0;o=n;while(1){if(Ls(s)|0){i=o;break}n=Du[a[l>>2]&15](s,e,o)|0;if((n+1|0)>>>0<2){i=o;break}if((o|0)==(n|0)){d=13;break e}else{e=e+n|0;o=o-n|0}}if(u)Is(s);i=((c-i|0)>>>0)/(t>>>0)|0}}while(0);if((d|0)==13)if(u)Is(s);return i|0}function Gs(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;if((i|0)==1)t=t-(a[e+8>>2]|0)+(a[e+4>>2]|0)|0;s=e+20|0;r=e+28|0;if((a[s>>2]|0)>>>0>(a[r>>2]|0)>>>0?(Du[a[e+36>>2]&15](e,0,0)|0,(a[s>>2]|0)==0):0)t=-1;else{a[e+16>>2]=0;a[r>>2]=0;a[s>>2]=0;if((Du[a[e+40>>2]&15](e,t,i)|0)<0)t=-1;else{a[e+8>>2]=0;a[e+4>>2]=0;a[e>>2]=a[e>>2]&-17;t=0}}return t|0}function Ks(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;if((a[e+76>>2]|0)>-1){r=(Ms(e)|0)==0;t=Gs(e,t,i)|0;if(!r)Is(e)}else t=Gs(e,t,i)|0;return t|0}function Js(e,t,i){e=e|0;t=t|0;i=i|0;return Ks(e,t,i)|0}function Xs(e){e=e|0;var t=0;if(!(a[e>>2]&128))t=1;else t=(a[e+20>>2]|0)>>>0>(a[e+28>>2]|0)>>>0?2:1;t=Du[a[e+40>>2]&15](e,0,t)|0;if((t|0)>=0)t=t-(a[e+8>>2]|0)+(a[e+4>>2]|0)+(a[e+20>>2]|0)-(a[e+28>>2]|0)|0;return t|0}function Zs(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Ms(e)|0)==0;e=Xs(e)|0}else e=Xs(e)|0;return e|0}function ea(e){e=e|0;return Zs(e)|0}function ta(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0;s=i+16|0;n=a[s>>2]|0;if(!n)if(!(zs(i)|0)){n=a[s>>2]|0;o=4}else s=0;else o=4;e:do{if((o|0)==4){l=i+20|0;o=a[l>>2]|0;if((n-o|0)>>>0<t>>>0){s=Du[a[i+36>>2]&15](i,e,t)|0;break}t:do{if((r[i+75>>0]|0)>-1){s=t;while(1){if(!s){n=o;s=0;break t}n=s+-1|0;if((r[e+n>>0]|0)==10)break;else s=n}if((Du[a[i+36>>2]&15](i,e,s)|0)>>>0<s>>>0)break e;t=t-s|0;e=e+s|0;n=a[l>>2]|0}else{n=o;s=0}}while(0);Kc(n|0,e|0,t|0)|0;a[l>>2]=(a[l>>2]|0)+t;s=s+t|0}}while(0);return s|0}function ia(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0;s=ie(i,t)|0;if((a[r+76>>2]|0)>-1){n=(Ms(r)|0)==0;e=ta(e,s,r)|0;if(!n)Is(r)}else e=ta(e,s,r)|0;if((e|0)!=(s|0))i=(e>>>0)/(t>>>0)|0;return i|0}function ra(e){e=e|0;var t=0;if((a[e+76>>2]|0)>-1){t=(Ms(e)|0)==0;Gs(e,0,0)|0;a[e>>2]=a[e>>2]&-33;if(!t)Is(e)}else{Gs(e,0,0)|0;a[e>>2]=a[e>>2]&-33}return}function sa(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;r=d;d=d+16|0;s=r;a[s>>2]=i;i=ca(e,t,s)|0;d=r;return i|0}function aa(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0;l=d;d=d+16|0;r=l;s=za(240)|0;do{if(s){a[r>>2]=a[i>>2];r=la(s,240,t,r)|0;if(r>>>0<240){t=Ba(s,r+1|0)|0;a[e>>2]=(t|0)!=0?t:s;break}ja(s);if((r|0)>=0?(o=r+1|0,n=za(o)|0,a[e>>2]=n,(n|0)!=0):0)r=la(n,o,t,i)|0;else r=-1}else r=-1}while(0);d=l;return r|0}function na(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0;v=d;d=d+224|0;h=v+80|0;g=v+96|0;b=v;m=v+136|0;s=g;n=s+40|0;do{a[s>>2]=0;s=s+4|0}while((s|0)<(n|0));a[h>>2]=a[i>>2];if((Ma(0,t,h,b,g)|0)<0)i=-1;else{if((a[e+76>>2]|0)>-1)p=Ms(e)|0;else p=0;i=a[e>>2]|0;f=i&32;if((r[e+74>>0]|0)<1)a[e>>2]=i&-33;i=e+48|0;if(!(a[i>>2]|0)){n=e+44|0;o=a[n>>2]|0;a[n>>2]=m;l=e+28|0;a[l>>2]=m;c=e+20|0;a[c>>2]=m;a[i>>2]=80;u=e+16|0;a[u>>2]=m+80;s=Ma(e,t,h,b,g)|0;if(o){Du[a[e+36>>2]&15](e,0,0)|0;s=(a[c>>2]|0)==0?-1:s;a[n>>2]=o;a[i>>2]=0;a[u>>2]=0;a[l>>2]=0;a[c>>2]=0}}else s=Ma(e,t,h,b,g)|0;i=a[e>>2]|0;a[e>>2]=i|f;if(p)Is(e);i=(i&32|0)==0?s:-1}d=v;return i|0}function oa(e,t,i){e=e|0;t=t|0;i=i|0;var o=0,l=0,p=0,f=0,h=0,m=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,R=0,O=0,$=0,F=0,N=0,D=0,L=0,z=0,j=0,H=0;j=d;d=d+304|0;R=j+16|0;$=j+8|0;O=j+33|0;F=j;x=j+32|0;if((a[e+76>>2]|0)>-1)z=Ms(e)|0;else z=0;o=r[t>>0]|0;e:do{if(o<<24>>24){N=e+4|0;D=e+100|0;M=e+108|0;C=e+8|0;q=O+10|0;T=O+33|0;E=$+4|0;A=O+46|0;P=O+94|0;p=o;o=0;f=t;v=0;l=0;t=0;t:while(1){i:do{if(!(cs(p&255)|0)){p=(r[f>>0]|0)==37;r:do{if(p){b=f+1|0;h=r[b>>0]|0;s:do{switch(h<<24>>24){case 37:break r;case 42:{S=0;h=f+2|0;break}default:{h=(h&255)+-48|0;if(h>>>0<10?(r[f+2>>0]|0)==36:0){a[R>>2]=a[i>>2];while(1){S=(a[R>>2]|0)+(4-1)&~(4-1);p=a[S>>2]|0;a[R>>2]=S+4;if(h>>>0>1)h=h+-1|0;else break}S=p;h=f+3|0;break s}h=(a[i>>2]|0)+(4-1)&~(4-1);S=a[h>>2]|0;a[i>>2]=h+4;h=b}}}while(0);p=r[h>>0]|0;f=p&255;if((f+-48|0)>>>0<10){p=0;while(1){b=(p*10|0)+-48+f|0;h=h+1|0;p=r[h>>0]|0;f=p&255;if((f+-48|0)>>>0>=10)break;else p=b}}else b=0;if(p<<24>>24==109){h=h+1|0;g=r[h>>0]|0;p=(S|0)!=0&1;l=0;t=0}else{g=p;p=0}f=h+1|0;switch(g&255|0){case 104:{_=(r[f>>0]|0)==104;f=_?h+2|0:f;h=_?-2:-1;break}case 108:{_=(r[f>>0]|0)==108;f=_?h+2|0:f;h=_?3:1;break}case 106:{h=3;break}case 116:case 122:{h=1;break}case 76:{h=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{f=h;h=0;break}default:{L=152;break t}}g=n[f>>0]|0;w=(g&47|0)==3;g=w?g|32:g;w=w?1:h;switch(g|0){case 99:{_=v;y=(b|0)<1?1:b;break}case 91:{_=v;y=b;break}case 110:{if(!S){h=v;break i}switch(w|0){case-2:{r[S>>0]=v;h=v;break i}case-1:{s[S>>1]=v;h=v;break i}case 0:{a[S>>2]=v;h=v;break i}case 1:{a[S>>2]=v;h=v;break i}case 3:{h=S;a[h>>2]=v;a[h+4>>2]=((v|0)<0)<<31>>31;h=v;break i}default:{h=v;break i}}}default:{hs(e,0);do{h=a[N>>2]|0;if(h>>>0<(a[D>>2]|0)>>>0){a[N>>2]=h+1;h=n[h>>0]|0}else h=ms(e)|0}while((cs(h)|0)!=0);h=a[N>>2]|0;if(a[D>>2]|0){h=h+-1|0;a[N>>2]=h}_=(a[M>>2]|0)+v+h-(a[C>>2]|0)|0;y=b}}hs(e,y);h=a[N>>2]|0;b=a[D>>2]|0;if(h>>>0<b>>>0)a[N>>2]=h+1;else{if((ms(e)|0)<0){L=152;break t}b=a[D>>2]|0}if(b)a[N>>2]=(a[N>>2]|0)+-1;s:do{switch(g|0){case 91:case 99:case 115:{k=(g|0)==99;a:do{if((g&239|0)==99){Yc(O|0,-1,257)|0;r[O>>0]=0;if((g|0)==115){r[T>>0]=0;r[q>>0]=0;r[q+1>>0]=0;r[q+2>>0]=0;r[q+3>>0]=0;r[q+4>>0]=0}}else{H=f+1|0;v=(r[H>>0]|0)==94;h=v&1;g=v?H:f;f=v?f+2|0:H;Yc(O|0,v&1|0,257)|0;r[O>>0]=0;switch(r[f>>0]|0){case 45:{v=(h^1)&255;r[A>>0]=v;f=g+2|0;break}case 93:{v=(h^1)&255;r[P>>0]=v;f=g+2|0;break}default:v=(h^1)&255}while(1){h=r[f>>0]|0;n:do{switch(h<<24>>24){case 0:{L=152;break t}case 93:break a;case 45:{g=f+1|0;h=r[g>>0]|0;switch(h<<24>>24){case 93:case 0:{h=45;break n}default:{}}f=r[f+-1>>0]|0;if((f&255)<(h&255)){f=f&255;do{f=f+1|0;r[O+f>>0]=v;h=r[g>>0]|0}while((f|0)<(h&255|0));f=g}else f=g;break}default:{}}}while(0);r[O+((h&255)+1)>>0]=v;f=f+1|0}}}while(0);g=k?y+1|0:31;v=(w|0)==1;w=(p|0)!=0;a:do{if(v){if(w){t=za(g<<2)|0;if(!t){l=0;L=152;break t}}else t=S;a[$>>2]=0;a[E>>2]=0;l=0;n:while(1){b=(t|0)==0;do{o:while(1){h=a[N>>2]|0;if(h>>>0<(a[D>>2]|0)>>>0){a[N>>2]=h+1;h=n[h>>0]|0}else h=ms(e)|0;if(!(r[O+(h+1)>>0]|0))break n;r[x>>0]=h;switch(Cs(F,x,1,$)|0){case-1:{l=0;L=152;break t}case-2:break;default:break o}}if(!b){a[t+(l<<2)>>2]=a[F>>2];l=l+1|0}}while(!(w&(l|0)==(g|0)));l=g<<1|1;h=Ba(t,l<<2)|0;if(!h){l=0;L=152;break t}H=g;g=l;t=h;l=H}if(!(qs($)|0)){l=0;L=152;break t}else{b=l;l=0}}else{if(w){l=za(g)|0;if(!l){l=0;t=0;L=152;break t}else h=0;while(1){do{t=a[N>>2]|0;if(t>>>0<(a[D>>2]|0)>>>0){a[N>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if(!(r[O+(t+1)>>0]|0)){b=h;t=0;break a}r[l+h>>0]=t;h=h+1|0}while((h|0)!=(g|0));t=g<<1|1;h=Ba(l,t)|0;if(!h){t=0;L=152;break t}else{H=g;g=t;l=h;h=H}}}if(!S){l=b;while(1){t=a[N>>2]|0;if(t>>>0<l>>>0){a[N>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if(!(r[O+(t+1)>>0]|0)){b=0;l=0;t=0;break a}l=a[D>>2]|0}}else{l=0;while(1){t=a[N>>2]|0;if(t>>>0<b>>>0){a[N>>2]=t+1;t=n[t>>0]|0}else t=ms(e)|0;if(!(r[O+(t+1)>>0]|0)){b=l;l=S;t=0;break a}r[S+l>>0]=t;b=a[D>>2]|0;l=l+1|0}}}}while(0);h=a[N>>2]|0;if(a[D>>2]|0){h=h+-1|0;a[N>>2]=h}h=h-(a[C>>2]|0)+(a[M>>2]|0)|0;if(!h)break t;if(!((h|0)==(y|0)|k^1))break t;do{if(w)if(v){a[S>>2]=t;break}else{a[S>>2]=l;break}}while(0);if(!k){if(t)a[t+(b<<2)>>2]=0;if(!l){l=0;break s}r[l+b>>0]=0}break}case 120:case 88:case 112:{h=16;L=134;break}case 111:{h=8;L=134;break}case 117:case 100:{h=10;L=134;break}case 105:{h=0;L=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{m=+ps(e,w,0);if((a[M>>2]|0)==((a[C>>2]|0)-(a[N>>2]|0)|0))break t;if(S)switch(w|0){case 0:{c[S>>2]=m;break s}case 1:{u[S>>3]=m;break s}case 2:{u[S>>3]=m;break s}default:break s}break}default:{}}}while(0);s:do{if((L|0)==134){L=0;h=fs(e,h,0,-1,-1)|0;if((a[M>>2]|0)==((a[C>>2]|0)-(a[N>>2]|0)|0))break t;if((S|0)!=0&(g|0)==112){a[S>>2]=h;break}if(S)switch(w|0){case-2:{r[S>>0]=h;break s}case-1:{s[S>>1]=h;break s}case 0:{a[S>>2]=h;break s}case 1:{a[S>>2]=h;break s}case 3:{H=S;a[H>>2]=h;a[H+4>>2]=I;break s}default:break s}}}while(0);o=((S|0)!=0&1)+o|0;h=(a[M>>2]|0)+_+(a[N>>2]|0)-(a[C>>2]|0)|0;break i}}while(0);f=f+(p&1)|0;hs(e,0);p=a[N>>2]|0;if(p>>>0<(a[D>>2]|0)>>>0){a[N>>2]=p+1;p=n[p>>0]|0}else p=ms(e)|0;if((p|0)!=(n[f>>0]|0)){L=21;break t}h=v+1|0}else{while(1){p=f+1|0;if(!(cs(n[p>>0]|0)|0))break;else f=p}hs(e,0);do{p=a[N>>2]|0;if(p>>>0<(a[D>>2]|0)>>>0){a[N>>2]=p+1;p=n[p>>0]|0}else p=ms(e)|0}while((cs(p)|0)!=0);p=a[N>>2]|0;if(a[D>>2]|0){p=p+-1|0;a[N>>2]=p}h=(a[M>>2]|0)+v+p-(a[C>>2]|0)|0}}while(0);f=f+1|0;p=r[f>>0]|0;if(!(p<<24>>24))break e;else v=h}if((L|0)==21){if(a[D>>2]|0)a[N>>2]=(a[N>>2]|0)+-1;if((o|0)!=0|(p|0)>-1)break;else{o=0;L=153}}else if((L|0)==152)if(!o){o=p;L=153}if((L|0)==153){p=o;o=-1}if(p){ja(l);ja(t)}}else o=0}while(0);if(z)Is(e);d=j;return o|0}function la(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var n=0,o=0,l=0,c=0,u=0,p=0,f=0;f=d;d=d+128|0;n=f+112|0;p=f;o=p;l=2684;c=o+112|0;do{a[o>>2]=a[l>>2];o=o+4|0;l=l+4|0}while((o|0)<(c|0));if((t+-1|0)>>>0>2147483646)if(!t){t=1;u=4}else{a[(us()|0)>>2]=75;t=-1}else{n=e;u=4}if((u|0)==4){u=-2-n|0;u=t>>>0>u>>>0?u:t;a[p+48>>2]=u;e=p+20|0;a[e>>2]=n;a[p+44>>2]=n;t=n+u|0;n=p+16|0;a[n>>2]=t;a[p+28>>2]=t;t=na(p,i,s)|0;if(u){i=a[e>>2]|0;r[i+(((i|0)==(a[n>>2]|0))<<31>>31)>>0]=0}}d=f;return t|0}function ca(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0;n=d;d=d+112|0;r=n;s=r;o=s+112|0;do{a[s>>2]=0;s=s+4|0}while((s|0)<(o|0));a[r+32>>2]=15;a[r+44>>2]=e;a[r+76>>2]=-1;a[r+84>>2]=e;o=oa(r,t,i)|0;d=n;return o|0}function ua(e){e=e|0;var t=0,i=0,s=0,a=0;while(1){t=e+1|0;if(!(cs(r[e>>0]|0)|0))break;else e=t}i=r[e>>0]|0;switch(i<<24>>24|0){case 45:{s=1;a=5;break}case 43:{s=0;a=5;break}default:s=0}if((a|0)==5){e=t;i=r[t>>0]|0}t=(i<<24>>24)+-48|0;if(t>>>0<10){i=e;e=0;do{i=i+1|0;e=(e*10|0)-t|0;t=(r[i>>0]|0)+-48|0}while(t>>>0<10)}else e=0;return((s|0)!=0?e:0-e|0)|0}function da(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0;g=d;d=d+208|0;h=g+8|0;m=g;s=ie(i,t)|0;f=m;a[f>>2]=1;a[f+4>>2]=0;if(s){l=s-i|0;a[h+4>>2]=i;a[h>>2]=i;n=i;t=i;o=2;while(1){t=t+i+n|0;a[h+(o<<2)>>2]=t;if(t>>>0<s>>>0){f=n;n=t;o=o+1|0;t=f}else break}f=0-i|0;c=e+l|0;p=m+4|0;if((l|0)>0){l=c;s=1;o=1;while(1){do{if((s&3|0)==3){Ra(e,i,r,o,h);u=a[p>>2]|0;t=u<<30|(a[m>>2]|0)>>>2;a[m>>2]=t;a[p>>2]=u>>>2;o=o+2|0}else{t=o+-1|0;if((a[h+(t<<2)>>2]|0)>>>0<(l-e|0)>>>0)Ra(e,i,r,o,h);else Oa(e,i,r,m,o,0,h);if((o|0)==1){t=a[m>>2]|0;a[p>>2]=t>>>31|a[p>>2]<<1;t=t<<1;a[m>>2]=t;o=0;break}if(t>>>0>31){s=a[m>>2]|0;a[p>>2]=s;a[m>>2]=0;t=o+-33|0;n=0}else{s=a[p>>2]|0;n=a[m>>2]|0}a[p>>2]=n>>>(32-t|0)|s<<t;t=n<<t;a[m>>2]=t;o=1}}while(0);s=t|1;a[m>>2]=s;t=e+i|0;if(t>>>0>=c>>>0){s=t;break}else e=t}}else{s=e;o=1}Oa(s,i,r,m,o,0,h);u=m+4|0;t=a[m>>2]|0;if(!((o|0)==1&(t|0)==1&(a[u>>2]|0)==0)){n=s;while(1){if((o|0)<2){s=t+-1|0;do{if(s){if(!(s&1)){l=s;s=0;do{s=s+1|0;l=l>>>1}while((l&1|0)==0);if(!s)b=24}else b=24;if((b|0)==24){b=0;c=a[p>>2]|0;if(!c){s=64;b=30;break}if(!(c&1)){l=c;s=0}else{e=0;l=c;s=0;break}while(1){e=s+1|0;l=l>>>1;if(l&1){l=e;break}else s=e}if(!l){e=0;l=c;s=0;break}else s=s+33|0}if(s>>>0>31)b=30;else{e=s;l=a[p>>2]|0}}else{s=32;b=30}}while(0);if((b|0)==30){b=0;t=a[p>>2]|0;a[m>>2]=t;a[p>>2]=0;e=s+-32|0;l=0}a[m>>2]=l<<32-e|t>>>e;a[p>>2]=l>>>e;n=n+f|0;s=s+o|0}else{e=t>>>30;c=e|a[p>>2]<<2;s=o+-2|0;a[m>>2]=(t<<1&2147483646|e<<31)^3;a[p>>2]=c>>>1;Oa(n+(0-((a[h+(s<<2)>>2]|0)+i))|0,i,r,m,o+-1|0,1,h);c=a[m>>2]|0;a[p>>2]=c>>>31|a[p>>2]<<1;a[m>>2]=c<<1|1;n=n+f|0;Oa(n,i,r,m,s,1,h)}t=a[m>>2]|0;if((s|0)==1&(t|0)==1&(a[u>>2]|0)==0)break;else o=s}}}d=g;return}function pa(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0;o=t&255;s=(i|0)!=0;e:do{if(s&(e&3|0)!=0){n=t&255;while(1){if((r[e>>0]|0)==n<<24>>24){l=6;break e}e=e+1|0;i=i+-1|0;s=(i|0)!=0;if(!(s&(e&3|0)!=0)){l=5;break}}}else l=5}while(0);if((l|0)==5)if(s)l=6;else i=0;e:do{if((l|0)==6){n=t&255;if((r[e>>0]|0)!=n<<24>>24){s=ie(o,16843009)|0;t:do{if(i>>>0>3)while(1){o=a[e>>2]^s;if((o&-2139062144^-2139062144)&o+-16843009)break;e=e+4|0;i=i+-4|0;if(i>>>0<=3){l=11;break t}}else l=11}while(0);if((l|0)==11)if(!i){i=0;break}while(1){if((r[e>>0]|0)==n<<24>>24)break e;e=e+1|0;i=i+-1|0;if(!i){i=0;break}}}}}while(0);return((i|0)!=0?e:0)|0}function fa(e,t,i){e=e|0;t=t|0;i=i|0;var s=0;s=t&255;do{if(!i){t=0;break}i=i+-1|0;t=e+i|0}while((r[t>>0]|0)!=s<<24>>24);return t|0}function ha(e,t){e=e|0;t=t|0;var i=0,s=0;i=t;e:do{if(!((i^e)&3)){if(i&3)do{i=r[t>>0]|0;r[e>>0]=i;if(!(i<<24>>24))break e;t=t+1|0;e=e+1|0}while((t&3|0)!=0);i=a[t>>2]|0;if(!((i&-2139062144^-2139062144)&i+-16843009)){s=e;while(1){t=t+4|0;e=s+4|0;a[s>>2]=i;i=a[t>>2]|0;if((i&-2139062144^-2139062144)&i+-16843009)break;else s=e}}s=8}else s=8}while(0);if((s|0)==8){s=r[t>>0]|0;r[e>>0]=s;if(s<<24>>24)do{t=t+1|0;e=e+1|0;s=r[t>>0]|0;r[e>>0]=s}while(s<<24>>24!=0)}return e|0}function ma(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0;n=t;do{if(!((n^e)&3)){s=(i|0)!=0;e:do{if(s&(n&3|0)!=0)while(1){n=r[t>>0]|0;r[e>>0]=n;if(!(n<<24>>24))break e;i=i+-1|0;t=t+1|0;e=e+1|0;s=(i|0)!=0;if(!(s&(t&3|0)!=0)){o=5;break}}else o=5}while(0);if((o|0)==5)if(!s){i=0;break}if(r[t>>0]|0){e:do{if(i>>>0>3)do{s=a[t>>2]|0;if((s&-2139062144^-2139062144)&s+-16843009)break e;a[e>>2]=s;i=i+-4|0;t=t+4|0;e=e+4|0}while(i>>>0>3)}while(0);o=11}}else o=11}while(0);e:do{if((o|0)==11)if(!i)i=0;else while(1){o=r[t>>0]|0;r[e>>0]=o;if(!(o<<24>>24))break e;i=i+-1|0;e=e+1|0;if(!i){i=0;break}else t=t+1|0}}while(0);Yc(e|0,0,i|0)|0;return e|0}function ba(e,t){e=e|0;t=t|0;e=ga(e,t)|0;return((r[e>>0]|0)==(t&255)<<24>>24?e:0)|0}function ga(e,t){e=e|0;t=t|0;var i=0,s=0,n=0;s=t&255;e:do{if(!s)e=e+(ya(e)|0)|0;else{if(e&3){i=t&255;do{n=r[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==i<<24>>24)break e;e=e+1|0}while((e&3|0)!=0)}s=ie(s,16843009)|0;i=a[e>>2]|0;t:do{if(!((i&-2139062144^-2139062144)&i+-16843009))do{n=i^s;if((n&-2139062144^-2139062144)&n+-16843009)break t;e=e+4|0;i=a[e>>2]|0}while(((i&-2139062144^-2139062144)&i+-16843009|0)==0)}while(0);i=t&255;while(1){n=r[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==i<<24>>24)break;else e=e+1|0}}}while(0);return e|0}function va(e,t){e=e|0;t=t|0;ha(e,t)|0;return e|0}function wa(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0;n=d;d=d+32|0;s=n;i=r[t>>0]|0;if(i<<24>>24!=0?(r[t+1>>0]|0)!=0:0){a[s>>2]=0;a[s+4>>2]=0;a[s+8>>2]=0;a[s+12>>2]=0;a[s+16>>2]=0;a[s+20>>2]=0;a[s+24>>2]=0;a[s+28>>2]=0;do{o=s+(((i&255)>>>5&255)<<2)|0;a[o>>2]=a[o>>2]|1<<(i&31);t=t+1|0;i=r[t>>0]|0}while(i<<24>>24!=0);t=r[e>>0]|0;e:do{if(!(t<<24>>24))i=e;else{i=e;do{if(a[s+(((t&255)>>>5&255)<<2)>>2]&1<<(t&31))break e;i=i+1|0;t=r[i>>0]|0}while(t<<24>>24!=0)}}while(0);i=i-e|0}else i=(ga(e,i<<24>>24)|0)-e|0;d=n;return i|0}function ka(e){e=e|0;var t=0,i=0;i=(ya(e)|0)+1|0;t=za(i)|0;if(!t)t=0;else Kc(t|0,e|0,i|0)|0;return t|0}function ya(e){e=e|0;var t=0,i=0,s=0;s=e;e:do{if(!(s&3))i=4;else{t=e;e=s;while(1){if(!(r[t>>0]|0))break e;t=t+1|0;e=t;if(!(e&3)){e=t;i=4;break}}}}while(0);if((i|0)==4){while(1){t=a[e>>2]|0;if(!((t&-2139062144^-2139062144)&t+-16843009))e=e+4|0;else break}if((t&255)<<24>>24)do{e=e+1|0}while((r[e>>0]|0)!=0)}return e-s|0}function _a(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,a=0,n=0;s=e+(ya(e)|0)|0;e:do{if(i)while(1){a=r[t>>0]|0;if(!(a<<24>>24))break e;i=i+-1|0;n=s+1|0;r[s>>0]=a;if(!i){s=n;break}else{t=t+1|0;s=n}}}while(0);r[s>>0]=0;return e|0}function Sa(e,t,i){e=e|0;t=t|0;i=i|0;ma(e,t,i)|0;return e|0}function xa(e,t){e=e|0;t=t|0;return fa(e,t,(ya(e)|0)+1|0)|0}function Ca(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0;o=d;d=d+32|0;n=o;a[n>>2]=0;a[n+4>>2]=0;a[n+8>>2]=0;a[n+12>>2]=0;a[n+16>>2]=0;a[n+20>>2]=0;a[n+24>>2]=0;a[n+28>>2]=0;s=r[t>>0]|0;do{if(!(s<<24>>24))t=0;else{if(!(r[t+1>>0]|0)){t=e;while(1)if((r[t>>0]|0)==s<<24>>24)t=t+1|0;else break;t=t-e|0;break}else{i=t;t=s}do{s=n+(((t&255)>>>5&255)<<2)|0;a[s>>2]=a[s>>2]|1<<(t&31);i=i+1|0;t=r[i>>0]|0}while(t<<24>>24!=0);i=r[e>>0]|0;e:do{if(!(i<<24>>24))t=e;else{t=e;do{if(!(a[n+(((i&255)>>>5&255)<<2)>>2]&1<<(i&31)))break e;t=t+1|0;i=r[t>>0]|0}while(i<<24>>24!=0)}}while(0);t=t-e|0}}while(0);d=o;return t|0}function qa(e,t){e=e|0;t=t|0;var i=0,s=0;if(!e){e=a[699]|0;if(!e)e=0;else{s=e;i=3}}else{s=e;i=3}do{if((i|0)==3){i=Ca(s,t)|0;e=s+i|0;if(!(r[e>>0]|0)){a[699]=0;e=0;break}i=(wa(e,t)|0)+i|0;t=s+i|0;a[699]=t;if(!(r[t>>0]|0)){a[699]=0;break}else{a[699]=s+(i+1);r[t>>0]=0;break}}}while(0);return e|0}function Ta(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,o=0,l=0,c=0;l=e+4|0;i=a[l>>2]|0;c=e+100|0;if(i>>>0<(a[c>>2]|0)>>>0){a[l>>2]=i+1;i=n[i>>0]|0}else i=ms(e)|0;switch(i|0){case 43:case 45:{r=(i|0)==45&1;i=a[l>>2]|0;if(i>>>0<(a[c>>2]|0)>>>0){a[l>>2]=i+1;i=n[i>>0]|0}else i=ms(e)|0;if((t|0)!=0&(i+-48|0)>>>0>9?(a[c>>2]|0)!=0:0){a[l>>2]=(a[l>>2]|0)+-1;o=r}else o=r;break}default:o=0}if((i+-48|0)>>>0>9)if(!(a[c>>2]|0)){r=-2147483648;i=0}else{a[l>>2]=(a[l>>2]|0)+-1;r=-2147483648;i=0}else{r=0;do{r=i+-48+(r*10|0)|0;i=a[l>>2]|0;if(i>>>0<(a[c>>2]|0)>>>0){a[l>>2]=i+1;i=n[i>>0]|0}else i=ms(e)|0}while((i+-48|0)>>>0<10&(r|0)<214748364);t=((r|0)<0)<<31>>31;if((i+-48|0)>>>0<10){do{t=iu(r|0,t|0,10,0)|0;r=I;i=Wc(i|0,((i|0)<0)<<31>>31|0,-48,-1)|0;r=Wc(i|0,I|0,t|0,r|0)|0;t=I;i=a[l>>2]|0;if(i>>>0<(a[c>>2]|0)>>>0){a[l>>2]=i+1;i=n[i>>0]|0}else i=ms(e)|0}while((i+-48|0)>>>0<10&((t|0)<21474836|(t|0)==21474836&r>>>0<2061584302));s=r}else s=r;if((i+-48|0)>>>0<10)do{i=a[l>>2]|0;if(i>>>0<(a[c>>2]|0)>>>0){a[l>>2]=i+1;i=n[i>>0]|0}else i=ms(e)|0}while((i+-48|0)>>>0<10);if(a[c>>2]|0)a[l>>2]=(a[l>>2]|0)+-1;e=(o|0)!=0;i=Qc(0,0,s|0,t|0)|0;r=e?I:t;i=e?i:s}I=r;return i|0}function Ea(e){e=e|0;if(!(a[e+68>>2]|0))Is(e);return}function Aa(e){e=e|0;if(!(a[e+68>>2]|0))Is(e);return}function Pa(e){e=e|0;var t=0,i=0,r=0,s=0,n=0,o=0;t=e+20|0;n=e+28|0;if((a[t>>2]|0)>>>0>(a[n>>2]|0)>>>0?(Du[a[e+36>>2]&15](e,0,0)|0,(a[t>>2]|0)==0):0)t=-1;else{o=e+4|0;i=a[o>>2]|0;r=e+8|0;s=a[r>>2]|0;if(i>>>0<s>>>0)Du[a[e+40>>2]&15](e,i-s|0,1)|0;a[e+16>>2]=0;a[n>>2]=0;a[t>>2]=0;a[r>>2]=0;a[o>>2]=0;t=0}return t|0}function Ma(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,h=0,m=0,b=0.0,g=0,v=0,w=0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,R=0,O=0,$=0,F=0,N=0,D=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,Y=0,V=0,W=0,G=0,K=0,J=0,X=0,Z=0,ee=0,te=0,re=0,se=0,ae=0,ne=0,oe=0;oe=d;d=d+624|0;te=oe+24|0;se=oe+16|0;re=oe+588|0;K=oe+576|0;ee=oe;V=oe+536|0;ne=oe+8|0;ae=oe+528|0;D=(e|0)!=0;L=V+40|0;Y=L;V=V+39|0;W=ne+4|0;G=K+12|0;K=K+11|0;J=re;X=G;Z=X-J|0;z=-2-J|0;j=X+2|0;H=te+288|0;B=re+9|0;U=B;Q=re+8|0;c=0;_=t;p=0;t=0;e:while(1){do{if((c|0)>-1)if((p|0)>(2147483647-c|0)){a[(us()|0)>>2]=75;c=-1;break}else{c=p+c|0;break}}while(0);p=r[_>>0]|0;if(!(p<<24>>24)){N=245;break}else h=_;t:while(1){switch(p<<24>>24){case 37:{p=h;N=9;break t}case 0:{p=h;break t}default:{}}F=h+1|0;p=r[F>>0]|0;h=F}t:do{if((N|0)==9)while(1){N=0;if((r[p+1>>0]|0)!=37)break t;h=h+1|0;p=p+2|0;if((r[p>>0]|0)==37)N=9;else break}}while(0);x=h-_|0;if(D?(a[e>>2]&32|0)==0:0)ta(_,x,e)|0;if((h|0)!=(_|0)){_=p;p=x;continue}g=p+1|0;h=r[g>>0]|0;m=(h<<24>>24)+-48|0;if(m>>>0<10){F=(r[p+2>>0]|0)==36;g=F?p+3|0:g;h=r[g>>0]|0;k=F?m:-1;t=F?1:t}else k=-1;p=h<<24>>24;t:do{if((p&-32|0)==32){m=0;while(1){if(!(1<<p+-32&75913)){v=m;p=g;break t}m=1<<(h<<24>>24)+-32|m;g=g+1|0;h=r[g>>0]|0;p=h<<24>>24;if((p&-32|0)!=32){v=m;p=g;break}}}else{v=0;p=g}}while(0);do{if(h<<24>>24==42){m=p+1|0;h=(r[m>>0]|0)+-48|0;if(h>>>0<10?(r[p+2>>0]|0)==36:0){a[l+(h<<2)>>2]=10;t=1;p=p+3|0;h=a[o+((r[m>>0]|0)+-48<<3)>>2]|0}else{if(t){c=-1;break e}if(!D){S=v;p=m;t=0;F=0;break}t=(a[i>>2]|0)+(4-1)&~(4-1);h=a[t>>2]|0;a[i>>2]=t+4;t=0;p=m}if((h|0)<0){S=v|8192;F=0-h|0}else{S=v;F=h}}else{m=(h<<24>>24)+-48|0;if(m>>>0<10){h=0;do{h=(h*10|0)+m|0;p=p+1|0;m=(r[p>>0]|0)+-48|0}while(m>>>0<10);if((h|0)<0){c=-1;break e}else{S=v;F=h}}else{S=v;F=0}}}while(0);t:do{if((r[p>>0]|0)==46){m=p+1|0;h=r[m>>0]|0;if(h<<24>>24!=42){g=(h<<24>>24)+-48|0;if(g>>>0<10){p=m;h=0}else{p=m;g=0;break}while(1){h=(h*10|0)+g|0;p=p+1|0;g=(r[p>>0]|0)+-48|0;if(g>>>0>=10){g=h;break t}}}m=p+2|0;h=(r[m>>0]|0)+-48|0;if(h>>>0<10?(r[p+3>>0]|0)==36:0){a[l+(h<<2)>>2]=10;p=p+4|0;g=a[o+((r[m>>0]|0)+-48<<3)>>2]|0;break}if(t){c=-1;break e}if(D){p=(a[i>>2]|0)+(4-1)&~(4-1);g=a[p>>2]|0;a[i>>2]=p+4;p=m}else{p=m;g=0}}else g=-1}while(0);w=0;while(1){h=(r[p>>0]|0)+-65|0;if(h>>>0>57){c=-1;break e}m=p+1|0;h=r[15953+(w*58|0)+h>>0]|0;v=h&255;if((v+-1|0)>>>0<8){p=m;w=v}else{$=m;break}}if(!(h<<24>>24)){c=-1;break}m=(k|0)>-1;do{if(h<<24>>24==19)if(m){c=-1;break e}else N=52;else{if(m){a[l+(k<<2)>>2]=v;R=o+(k<<3)|0;O=a[R+4>>2]|0;N=ee;a[N>>2]=a[R>>2];a[N+4>>2]=O;N=52;break}if(!D){c=0;break e}Na(ee,v,i)}}while(0);if((N|0)==52?(N=0,!D):0){_=$;p=x;continue}k=r[p>>0]|0;k=(w|0)!=0&(k&15|0)==3?k&-33:k;m=S&-65537;O=(S&8192|0)==0?S:m;t:do{switch(k|0){case 110:switch(w|0){case 0:{a[a[ee>>2]>>2]=c;_=$;p=x;continue e}case 1:{a[a[ee>>2]>>2]=c;_=$;p=x;continue e}case 2:{_=a[ee>>2]|0;a[_>>2]=c;a[_+4>>2]=((c|0)<0)<<31>>31;_=$;p=x;continue e}case 3:{s[a[ee>>2]>>1]=c;_=$;p=x;continue e}case 4:{r[a[ee>>2]>>0]=c;_=$;p=x;continue e}case 6:{a[a[ee>>2]>>2]=c;_=$;p=x;continue e}case 7:{_=a[ee>>2]|0;a[_>>2]=c;a[_+4>>2]=((c|0)<0)<<31>>31;_=$;p=x;continue e}default:{_=$;p=x;continue e}}case 112:{w=O|8;g=g>>>0>8?g:8;k=120;N=64;break}case 88:case 120:{w=O;N=64;break}case 111:{m=ee;h=a[m>>2]|0;m=a[m+4>>2]|0;if((h|0)==0&(m|0)==0)p=L;else{p=L;do{p=p+-1|0;r[p>>0]=h&7|48;h=Gc(h|0,m|0,3)|0;m=I}while(!((h|0)==0&(m|0)==0))}if(!(O&8)){h=O;w=0;v=16433;N=77}else{w=Y-p+1|0;h=O;g=(g|0)<(w|0)?w:g;w=0;v=16433;N=77}break}case 105:case 100:{h=ee;p=a[h>>2]|0;h=a[h+4>>2]|0;if((h|0)<0){p=Qc(0,0,p|0,h|0)|0;h=I;m=ee;a[m>>2]=p;a[m+4>>2]=h;m=1;v=16433;N=76;break t}if(!(O&2048)){v=O&1;m=v;v=(v|0)==0?16433:16435;N=76}else{m=1;v=16434;N=76}break}case 117:{h=ee;p=a[h>>2]|0;h=a[h+4>>2]|0;m=0;v=16433;N=76;break}case 99:{r[V>>0]=a[ee>>2];_=V;h=1;w=0;k=16433;p=L;break}case 109:{p=ds(a[(us()|0)>>2]|0)|0;N=82;break}case 115:{p=a[ee>>2]|0;p=(p|0)!=0?p:16443;N=82;break}case 67:{a[ne>>2]=a[ee>>2];a[W>>2]=0;a[ee>>2]=ne;g=-1;N=86;break}case 83:{if(!g){La(e,32,F,0,O);p=0;N=98}else N=86;break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{b=+u[ee>>3];a[se>>2]=0;u[f>>3]=b;if((a[f+4>>2]|0)>=0)if(!(O&2048)){R=O&1;M=R;R=(R|0)==0?16451:16456}else{M=1;R=16453}else{b=-b;M=1;R=16450}u[f>>3]=b;P=a[f+4>>2]&2146435072;do{if(P>>>0<2146435072|(P|0)==2146435072&0<0){y=+_s(b,se)*2.0;h=y!=0.0;if(h)a[se>>2]=(a[se>>2]|0)+-1;E=k|32;if((E|0)==97){_=k&32;x=(_|0)==0?R:R+9|0;S=M|2;p=12-g|0;do{if(!(g>>>0>11|(p|0)==0)){b=8.0;do{p=p+-1|0;b=b*16.0}while((p|0)!=0);if((r[x>>0]|0)==45){b=-(b+(-y-b));break}else{b=y+b-b;break}}else b=y}while(0);h=a[se>>2]|0;p=(h|0)<0?0-h|0:h;p=Da(p,((p|0)<0)<<31>>31,G)|0;if((p|0)==(G|0)){r[K>>0]=48;p=K}r[p+-1>>0]=(h>>31&2)+43;w=p+-2|0;r[w>>0]=k+15;v=(g|0)<1;m=(O&8|0)==0;h=re;while(1){R=~~b;p=h+1|0;r[h>>0]=n[16417+R>>0]|_;b=(b-+(R|0))*16.0;do{if((p-J|0)==1){if(m&(v&b==0.0))break;r[p>>0]=46;p=h+2|0}}while(0);if(!(b!=0.0))break;else h=p}g=(g|0)!=0&(z+p|0)<(g|0)?j+g-w|0:Z-w+p|0;m=g+S|0;La(e,32,F,m,O);if(!(a[e>>2]&32))ta(x,S,e)|0;La(e,48,F,m,O^65536);p=p-J|0;if(!(a[e>>2]&32))ta(re,p,e)|0;h=X-w|0;La(e,48,g-(p+h)|0,0,0);if(!(a[e>>2]&32))ta(w,h,e)|0;La(e,32,F,m,O^8192);p=(m|0)<(F|0)?F:m;break}p=(g|0)<0?6:g;if(h){h=(a[se>>2]|0)+-28|0;a[se>>2]=h;b=y*268435456.0}else{b=y;h=a[se>>2]|0}P=(h|0)<0?te:H;A=P;h=P;do{T=~~b>>>0;a[h>>2]=T;h=h+4|0;b=(b-+(T>>>0))*1.0e9}while(b!=0.0);m=h;h=a[se>>2]|0;if((h|0)>0){v=P;while(1){w=(h|0)>29?29:h;g=m+-4|0;do{if(g>>>0<v>>>0)g=v;else{h=0;do{T=Vc(a[g>>2]|0,0,w|0)|0;T=Wc(T|0,I|0,h|0,0)|0;h=I;q=su(T|0,h|0,1e9,0)|0;a[g>>2]=q;h=ru(T|0,h|0,1e9,0)|0;g=g+-4|0}while(g>>>0>=v>>>0);if(!h){g=v;break}g=v+-4|0;a[g>>2]=h}}while(0);while(1){if(m>>>0<=g>>>0)break;h=m+-4|0;if(!(a[h>>2]|0))m=h;else break}h=(a[se>>2]|0)-w|0;a[se>>2]=h;if((h|0)>0)v=g;else break}}else g=P;if((h|0)<0){x=((p+25|0)/9|0)+1|0;C=(E|0)==102;_=g;while(1){S=0-h|0;S=(S|0)>9?9:S;do{if(_>>>0<m>>>0){h=(1<<S)+-1|0;v=1e9>>>S;g=0;w=_;do{T=a[w>>2]|0;a[w>>2]=(T>>>S)+g;g=ie(T&h,v)|0;w=w+4|0}while(w>>>0<m>>>0);h=(a[_>>2]|0)==0?_+4|0:_;if(!g){g=h;break}a[m>>2]=g;g=h;m=m+4|0}else g=(a[_>>2]|0)==0?_+4|0:_}while(0);h=C?P:g;m=(m-h>>2|0)>(x|0)?h+(x<<2)|0:m;h=(a[se>>2]|0)+S|0;a[se>>2]=h;if((h|0)>=0){_=g;break}else _=g}}else _=g;do{if(_>>>0<m>>>0){h=(A-_>>2)*9|0;v=a[_>>2]|0;if(v>>>0<10)break;else g=10;do{g=g*10|0;h=h+1|0}while(v>>>0>=g>>>0)}else h=0}while(0);q=(E|0)==103;T=(p|0)!=0;g=p-((E|0)!=102?h:0)+((T&q)<<31>>31)|0;if((g|0)<(((m-A>>2)*9|0)+-9|0)){w=g+9216|0;C=(w|0)/9|0;g=P+(C+-1023<<2)|0;w=((w|0)%9|0)+1|0;if((w|0)<9){v=10;do{v=v*10|0;w=w+1|0}while((w|0)!=9)}else v=10;S=a[g>>2]|0;x=(S>>>0)%(v>>>0)|0;if((x|0)==0?(P+(C+-1022<<2)|0)==(m|0):0)v=_;else N=163;do{if((N|0)==163){N=0;y=(((S>>>0)/(v>>>0)|0)&1|0)==0?9007199254740992.0:9007199254740994.0;w=(v|0)/2|0;do{if(x>>>0<w>>>0)b=.5;else{if((x|0)==(w|0)?(P+(C+-1022<<2)|0)==(m|0):0){b=1.0;break}b=1.5}}while(0);do{if(M){if((r[R>>0]|0)!=45)break;y=-y;b=-b}}while(0);w=S-x|0;a[g>>2]=w;if(!(y+b!=y)){v=_;break}E=w+v|0;a[g>>2]=E;if(E>>>0>999999999){h=_;while(1){v=g+-4|0;a[g>>2]=0;if(v>>>0<h>>>0){h=h+-4|0;a[h>>2]=0}E=(a[v>>2]|0)+1|0;a[v>>2]=E;if(E>>>0>999999999)g=v;else{_=h;g=v;break}}}h=(A-_>>2)*9|0;w=a[_>>2]|0;if(w>>>0<10){v=_;break}else v=10;do{v=v*10|0;h=h+1|0}while(w>>>0>=v>>>0);v=_}}while(0);E=g+4|0;_=v;m=m>>>0>E>>>0?E:m}x=0-h|0;while(1){if(m>>>0<=_>>>0){C=0;E=m;break}g=m+-4|0;if(!(a[g>>2]|0))m=g;else{C=1;E=m;break}}do{if(q){p=(T&1^1)+p|0;if((p|0)>(h|0)&(h|0)>-5){k=k+-1|0;p=p+-1-h|0}else{k=k+-2|0;p=p+-1|0}m=O&8;if(m)break;do{if(C){m=a[E+-4>>2]|0;if(!m){g=9;break}if(!((m>>>0)%10|0)){v=10;g=0}else{g=0;break}do{v=v*10|0;g=g+1|0}while(((m>>>0)%(v>>>0)|0|0)==0)}else g=9}while(0);m=((E-A>>2)*9|0)+-9|0;if((k|32|0)==102){m=m-g|0;m=(m|0)<0?0:m;p=(p|0)<(m|0)?p:m;m=0;break}else{m=m+h-g|0;m=(m|0)<0?0:m;p=(p|0)<(m|0)?p:m;m=0;break}}else m=O&8}while(0);S=p|m;v=(S|0)!=0&1;w=(k|32|0)==102;if(w){h=(h|0)>0?h:0;k=0}else{g=(h|0)<0?x:h;g=Da(g,((g|0)<0)<<31>>31,G)|0;if((X-g|0)<2)do{g=g+-1|0;r[g>>0]=48}while((X-g|0)<2);r[g+-1>>0]=(h>>31&2)+43;A=g+-2|0;r[A>>0]=k;h=X-A|0;k=A}x=M+1+p+v+h|0;La(e,32,F,x,O);if(!(a[e>>2]&32))ta(R,M,e)|0;La(e,48,F,x,O^65536);do{if(w){g=_>>>0>P>>>0?P:_;h=g;do{m=Da(a[h>>2]|0,0,B)|0;do{if((h|0)==(g|0)){if((m|0)!=(B|0))break;r[Q>>0]=48;m=Q}else{if(m>>>0<=re>>>0)break;do{m=m+-1|0;r[m>>0]=48}while(m>>>0>re>>>0)}}while(0);if(!(a[e>>2]&32))ta(m,U-m|0,e)|0;h=h+4|0}while(h>>>0<=P>>>0);do{if(S){if(a[e>>2]&32)break;ta(16485,1,e)|0}}while(0);if((p|0)>0&h>>>0<E>>>0){m=h;while(1){h=Da(a[m>>2]|0,0,B)|0;if(h>>>0>re>>>0)do{h=h+-1|0;r[h>>0]=48}while(h>>>0>re>>>0);if(!(a[e>>2]&32))ta(h,(p|0)>9?9:p,e)|0;m=m+4|0;h=p+-9|0;if(!((p|0)>9&m>>>0<E>>>0)){p=h;break}else p=h}}La(e,48,p+9|0,9,0)}else{w=C?E:_+4|0;if((p|0)>-1){v=(m|0)==0;g=_;do{h=Da(a[g>>2]|0,0,B)|0;if((h|0)==(B|0)){r[Q>>0]=48;h=Q}do{if((g|0)==(_|0)){m=h+1|0;if(!(a[e>>2]&32))ta(h,1,e)|0;if(v&(p|0)<1){h=m;break}if(a[e>>2]&32){h=m;break}ta(16485,1,e)|0;h=m}else{if(h>>>0<=re>>>0)break;do{h=h+-1|0;r[h>>0]=48}while(h>>>0>re>>>0)}}while(0);m=U-h|0;if(!(a[e>>2]&32))ta(h,(p|0)>(m|0)?m:p,e)|0;p=p-m|0;g=g+4|0}while(g>>>0<w>>>0&(p|0)>-1)}La(e,48,p+18|0,18,0);if(a[e>>2]&32)break;ta(k,X-k|0,e)|0}}while(0);La(e,32,F,x,O^8192);p=(x|0)<(F|0)?F:x}else{w=(k&32|0)!=0;v=b!=b|0.0!=0.0;h=v?0:M;g=h+3|0;La(e,32,F,g,m);p=a[e>>2]|0;if(!(p&32)){ta(R,h,e)|0;p=a[e>>2]|0}if(!(p&32))ta(v?w?16477:16481:w?16469:16473,3,e)|0;La(e,32,F,g,O^8192);p=(g|0)<(F|0)?F:g}}while(0);_=$;continue e}default:{m=O;h=g;w=0;k=16433;p=L}}}while(0);t:do{if((N|0)==64){m=ee;h=a[m>>2]|0;m=a[m+4>>2]|0;v=k&32;if(!((h|0)==0&(m|0)==0)){p=L;do{p=p+-1|0;r[p>>0]=n[16417+(h&15)>>0]|v;h=Gc(h|0,m|0,4)|0;m=I}while(!((h|0)==0&(m|0)==0));N=ee;if((w&8|0)==0|(a[N>>2]|0)==0&(a[N+4>>2]|0)==0){h=w;w=0;v=16433;N=77}else{h=w;w=2;v=16433+(k>>4)|0;N=77}}else{p=L;h=w;w=0;v=16433;N=77}}else if((N|0)==76){p=Da(p,h,L)|0;h=O;w=m;N=77}else if((N|0)==82){N=0;O=pa(p,0,g)|0;R=(O|0)==0;_=p;h=R?g:O-p|0;w=0;k=16433;p=R?p+g|0:O}else if((N|0)==86){N=0;h=0;p=0;v=a[ee>>2]|0;while(1){m=a[v>>2]|0;if(!m)break;p=Es(ae,m)|0;if((p|0)<0|p>>>0>(g-h|0)>>>0)break;h=p+h|0;if(g>>>0>h>>>0)v=v+4|0;else break}if((p|0)<0){c=-1;break e}La(e,32,F,h,O);if(!h){p=0;N=98}else{m=0;g=a[ee>>2]|0;while(1){p=a[g>>2]|0;if(!p){p=h;N=98;break t}p=Es(ae,p)|0;m=p+m|0;if((m|0)>(h|0)){p=h;N=98;break t}if(!(a[e>>2]&32))ta(ae,p,e)|0;if(m>>>0>=h>>>0){p=h;N=98;break}else g=g+4|0}}}}while(0);if((N|0)==98){N=0;La(e,32,F,p,O^8192);_=$;p=(F|0)>(p|0)?F:p;continue}if((N|0)==77){N=0;m=(g|0)>-1?h&-65537:h;h=ee;h=(a[h>>2]|0)!=0|(a[h+4>>2]|0)!=0;if((g|0)!=0|h){h=(h&1^1)+(Y-p)|0;_=p;h=(g|0)>(h|0)?g:h;k=v;p=L}else{_=L;h=0;k=v;p=L}}v=p-_|0;h=(h|0)<(v|0)?v:h;g=w+h|0;p=(F|0)<(g|0)?g:F;La(e,32,p,g,m);if(!(a[e>>2]&32))ta(k,w,e)|0;La(e,48,p,g,m^65536);La(e,48,h,v,0);if(!(a[e>>2]&32))ta(_,v,e)|0;La(e,32,p,g,m^8192);_=$}e:do{if((N|0)==245)if(!e)if(t){c=1;while(1){t=a[l+(c<<2)>>2]|0;if(!t)break;Na(o+(c<<3)|0,t,i);c=c+1|0;if((c|0)>=10){c=1;break e}}if((c|0)<10)while(1){if(a[l+(c<<2)>>2]|0){c=-1;break e}c=c+1|0;if((c|0)>=10){c=1;break}}else c=1}else c=0}while(0);d=oe;return c|0}function Ia(e,t,i){e=e|0;t=t|0;i=i|0;return Ds(e,t,i)|0}function Ra(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0;m=d;d=d+240|0;h=m;a[h>>2]=e;e:do{if((r|0)>1){f=0-t|0;n=r;o=e;c=e;u=1;while(1){e=o+f|0;p=n+-2|0;l=o+(0-((a[s+(p<<2)>>2]|0)+t))|0;if((Xu[i&15](c,l)|0)>-1?(Xu[i&15](c,e)|0)>-1:0){r=u;break e}r=u+1|0;o=h+(u<<2)|0;if((Xu[i&15](l,e)|0)>-1){a[o>>2]=l;e=l;n=n+-1|0}else{a[o>>2]=e;n=p}if((n|0)<=1)break e;o=e;c=a[h>>2]|0;u=r}}else r=1}while(0);$a(t,h,r);d=m;return}function Oa(e,t,i,r,s,n,o){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;o=o|0;var l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0;g=d;d=d+240|0;m=g;c=a[r>>2]|0;r=a[r+4>>2]|0;a[m>>2]=e;h=0-t|0;e:do{if((r|0)!=0|(c|0)!=1?(l=e+(0-(a[o+(s<<2)>>2]|0))|0,(Xu[i&15](l,e)|0)>=1):0){n=(n|0)==0;f=l;u=c;p=r;l=1;while(1){if(n&(s|0)>1){r=a[o+(s+-2<<2)>>2]|0;if((Xu[i&15](e+h|0,f)|0)>-1){n=s;r=l;b=20;break e}if((Xu[i&15](e+(0-(r+t))|0,f)|0)>-1){n=s;r=l;b=20;break e}}r=l+1|0;a[m+(l<<2)>>2]=f;n=u+-1|0;do{if(n){if(!(n&1)){e=n;n=0;do{n=n+1|0;e=e>>>1}while((e&1|0)==0);if(!n)b=11}else b=11;if((b|0)==11){b=0;if(!p){n=64;b=16;break}if(!(p&1)){e=p;n=0}else{c=0;e=u;l=p;n=0;break}while(1){l=n+1|0;e=e>>>1;if(e&1){e=l;break}else n=l}if(!e){c=0;e=u;l=p;n=0;break}else n=n+33|0}if(n>>>0>31)b=16;else{c=n;e=u;l=p}}else{n=32;b=16}}while(0);if((b|0)==16){b=0;c=n+-32|0;e=p;l=0}u=l<<32-c|e>>>c;p=l>>>c;n=n+s|0;if(!((p|0)!=0|(u|0)!=1)){e=f;b=20;break e}e=f+(0-(a[o+(n<<2)>>2]|0))|0;if((Xu[i&15](e,a[m>>2]|0)|0)<1){e=f;s=n;n=0;b=19;break}else{c=f;s=n;n=1;f=e;l=r;e=c}}}else{r=1;b=19}}while(0);if((b|0)==19?(n|0)==0:0){n=s;b=20}if((b|0)==20){$a(t,m,r);Ra(e,t,i,n,o)}d=g;return}function $a(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0;o=d;d=d+256|0;r=o;e:do{if((i|0)>=2?(n=t+(i<<2)|0,a[n>>2]=r,(e|0)!=0):0)while(1){s=e>>>0>256?256:e;Kc(r|0,a[t>>2]|0,s|0)|0;r=0;do{l=t+(r<<2)|0;r=r+1|0;Kc(a[l>>2]|0,a[t+(r<<2)>>2]|0,s|0)|0;a[l>>2]=(a[l>>2]|0)+s}while((r|0)!=(i|0));if((e|0)==(s|0))break e;e=e-s|0;r=a[n>>2]|0}}while(0);d=o;return}function Fa(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;r=e+20|0;s=a[r>>2]|0;e=(a[e+16>>2]|0)-s|0;e=e>>>0>i>>>0?i:e;Kc(s|0,t|0,e|0)|0;a[r>>2]=(a[r>>2]|0)+e;return i|0}function Na(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0.0;e:do{if(t>>>0<=20)do{switch(t|0){case 9:{r=(a[i>>2]|0)+(4-1)&~(4-1);t=a[r>>2]|0;a[i>>2]=r+4;a[e>>2]=t;break e}case 10:{r=(a[i>>2]|0)+(4-1)&~(4-1);t=a[r>>2]|0;a[i>>2]=r+4;r=e;a[r>>2]=t;a[r+4>>2]=((t|0)<0)<<31>>31;break e}case 11:{r=(a[i>>2]|0)+(4-1)&~(4-1);t=a[r>>2]|0;a[i>>2]=r+4;r=e;a[r>>2]=t;a[r+4>>2]=0;break e}case 12:{r=(a[i>>2]|0)+(8-1)&~(8-1);t=r;s=a[t>>2]|0;t=a[t+4>>2]|0;a[i>>2]=r+8;r=e;a[r>>2]=s;a[r+4>>2]=t;break e}case 13:{s=(a[i>>2]|0)+(4-1)&~(4-1);r=a[s>>2]|0;a[i>>2]=s+4;r=(r&65535)<<16>>16;s=e;a[s>>2]=r;a[s+4>>2]=((r|0)<0)<<31>>31;break e}case 14:{s=(a[i>>2]|0)+(4-1)&~(4-1);r=a[s>>2]|0;a[i>>2]=s+4;s=e;a[s>>2]=r&65535;a[s+4>>2]=0;break e}case 15:{s=(a[i>>2]|0)+(4-1)&~(4-1);r=a[s>>2]|0;a[i>>2]=s+4;r=(r&255)<<24>>24;s=e;a[s>>2]=r;a[s+4>>2]=((r|0)<0)<<31>>31;break e}case 16:{s=(a[i>>2]|0)+(4-1)&~(4-1);r=a[s>>2]|0;a[i>>2]=s+4;s=e;a[s>>2]=r&255;a[s+4>>2]=0;break e}case 17:{s=(a[i>>2]|0)+(8-1)&~(8-1);n=+u[s>>3];a[i>>2]=s+8;u[e>>3]=n;break e}case 18:{s=(a[i>>2]|0)+(8-1)&~(8-1);n=+u[s>>3];a[i>>2]=s+8;u[e>>3]=n;break e}default:break e}}while(0)}while(0);return}function Da(e,t,i){e=e|0;t=t|0;i=i|0;var s=0;if(t>>>0>0|(t|0)==0&e>>>0>4294967295)while(1){s=su(e|0,t|0,10,0)|0;i=i+-1|0;r[i>>0]=s|48;s=ru(e|0,t|0,10,0)|0;if(t>>>0>9|(t|0)==9&e>>>0>4294967295){e=s;t=I}else{e=s;break}}if(e)while(1){i=i+-1|0;r[i>>0]=(e>>>0)%10|0|48;if(e>>>0<10)break;else e=(e>>>0)/10|0}return i|0}function La(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0,l=0;l=d;d=d+256|0;o=l;do{if((i|0)>(r|0)&(s&73728|0)==0){s=i-r|0;Yc(o|0,t|0,(s>>>0>256?256:s)|0)|0;t=a[e>>2]|0;n=(t&32|0)==0;if(s>>>0>255){r=i-r|0;do{if(n){ta(o,256,e)|0;t=a[e>>2]|0}s=s+-256|0;n=(t&32|0)==0}while(s>>>0>255);if(n)s=r&255;else break}else if(!n)break;ta(o,s,e)|0}}while(0);d=l;return}function za(e){e=e|0;var t=0,i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0,D=0;do{if(e>>>0<245){h=e>>>0<11?16:e+11&-8;e=h>>>3;l=a[756]|0;i=l>>>e;if(i&3){e=(i&1^1)+e|0;r=e<<1;i=3064+(r<<2)|0;r=3064+(r+2<<2)|0;s=a[r>>2]|0;n=s+8|0;o=a[n>>2]|0;do{if((i|0)!=(o|0)){if(o>>>0<(a[760]|0)>>>0)Ie();t=o+12|0;if((a[t>>2]|0)==(s|0)){a[t>>2]=i;a[r>>2]=o;break}else Ie()}else a[756]=l&~(1<<e)}while(0);D=e<<3;a[s+4>>2]=D|3;D=s+(D|4)|0;a[D>>2]=a[D>>2]|1;D=n;return D|0}o=a[758]|0;if(h>>>0>o>>>0){if(i){r=2<<e;r=i<<e&(r|0-r);r=(r&0-r)+-1|0;c=r>>>12&16;r=r>>>c;s=r>>>5&8;r=r>>>s;n=r>>>2&4;r=r>>>n;i=r>>>1&2;r=r>>>i;e=r>>>1&1;e=(s|c|n|i|e)+(r>>>e)|0;r=e<<1;i=3064+(r<<2)|0;r=3064+(r+2<<2)|0;n=a[r>>2]|0;c=n+8|0;s=a[c>>2]|0;do{if((i|0)!=(s|0)){if(s>>>0<(a[760]|0)>>>0)Ie();t=s+12|0;if((a[t>>2]|0)==(n|0)){a[t>>2]=i;a[r>>2]=s;u=a[758]|0;break}else Ie()}else{a[756]=l&~(1<<e);u=o}}while(0);D=e<<3;o=D-h|0;a[n+4>>2]=h|3;l=n+h|0;a[n+(h|4)>>2]=o|1;a[n+D>>2]=o;if(u){s=a[761]|0;i=u>>>3;t=i<<1;r=3064+(t<<2)|0;e=a[756]|0;i=1<<i;if(e&i){e=3064+(t+2<<2)|0;t=a[e>>2]|0;if(t>>>0<(a[760]|0)>>>0)Ie();else{d=e;p=t}}else{a[756]=e|i;d=3064+(t+2<<2)|0;p=r}a[d>>2]=s;a[p+12>>2]=s;a[s+8>>2]=p;a[s+12>>2]=r}a[758]=o;a[761]=l;D=c;return D|0}e=a[757]|0;if(e){i=(e&0-e)+-1|0;N=i>>>12&16;i=i>>>N;F=i>>>5&8;i=i>>>F;D=i>>>2&4;i=i>>>D;e=i>>>1&2;i=i>>>e;r=i>>>1&1;r=a[3328+((F|N|D|e|r)+(i>>>r)<<2)>>2]|0;i=(a[r+4>>2]&-8)-h|0;e=r;while(1){t=a[e+16>>2]|0;if(!t){t=a[e+20>>2]|0;if(!t){c=i;break}}e=(a[t+4>>2]&-8)-h|0;D=e>>>0<i>>>0;i=D?e:i;e=t;r=D?t:r}n=a[760]|0;if(r>>>0<n>>>0)Ie();l=r+h|0;if(r>>>0>=l>>>0)Ie();o=a[r+24>>2]|0;i=a[r+12>>2]|0;do{if((i|0)==(r|0)){e=r+20|0;t=a[e>>2]|0;if(!t){e=r+16|0;t=a[e>>2]|0;if(!t){f=0;break}}while(1){i=t+20|0;s=a[i>>2]|0;if(s){t=s;e=i;continue}i=t+16|0;s=a[i>>2]|0;if(!s)break;else{t=s;e=i}}if(e>>>0<n>>>0)Ie();else{a[e>>2]=0;f=t;break}}else{s=a[r+8>>2]|0;if(s>>>0<n>>>0)Ie();t=s+12|0;if((a[t>>2]|0)!=(r|0))Ie();e=i+8|0;if((a[e>>2]|0)==(r|0)){a[t>>2]=i;a[e>>2]=s;f=i;break}else Ie()}}while(0);do{if(o){t=a[r+28>>2]|0;e=3328+(t<<2)|0;if((r|0)==(a[e>>2]|0)){a[e>>2]=f;if(!f){a[757]=a[757]&~(1<<t);break}}else{if(o>>>0<(a[760]|0)>>>0)Ie();t=o+16|0;if((a[t>>2]|0)==(r|0))a[t>>2]=f;else a[o+20>>2]=f;if(!f)break}e=a[760]|0;if(f>>>0<e>>>0)Ie();a[f+24>>2]=o;t=a[r+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Ie();else{a[f+16>>2]=t;a[t+24>>2]=f;break}}while(0);t=a[r+20>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Ie();else{a[f+20>>2]=t;a[t+24>>2]=f;break}}}while(0);if(c>>>0<16){D=c+h|0;a[r+4>>2]=D|3;D=r+(D+4)|0;a[D>>2]=a[D>>2]|1}else{a[r+4>>2]=h|3;a[r+(h|4)>>2]=c|1;a[r+(c+h)>>2]=c;t=a[758]|0;if(t){n=a[761]|0;i=t>>>3;t=i<<1;s=3064+(t<<2)|0;e=a[756]|0;i=1<<i;if(e&i){t=3064+(t+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Ie();else{m=t;b=e}}else{a[756]=e|i;m=3064+(t+2<<2)|0;b=s}a[m>>2]=n;a[b+12>>2]=n;a[n+8>>2]=b;a[n+12>>2]=s}a[758]=c;a[761]=l}D=r+8|0;return D|0}else b=h}else b=h}else if(e>>>0<=4294967231){e=e+11|0;p=e&-8;d=a[757]|0;if(d){i=0-p|0;e=e>>>8;if(e)if(p>>>0>16777215)u=31;else{b=(e+1048320|0)>>>16&8;y=e<<b;m=(y+520192|0)>>>16&4;y=y<<m;u=(y+245760|0)>>>16&2;u=14-(m|b|u)+(y<<u>>>15)|0;u=p>>>(u+7|0)&1|u<<1}else u=0;e=a[3328+(u<<2)>>2]|0;e:do{if(!e){s=0;e=0;y=86}else{o=i;s=0;l=p<<((u|0)==31?0:25-(u>>>1)|0);c=e;e=0;while(1){n=a[c+4>>2]&-8;i=n-p|0;if(i>>>0<o>>>0)if((n|0)==(p|0)){n=c;e=c;y=90;break e}else e=c;else i=o;y=a[c+20>>2]|0;c=a[c+16+(l>>>31<<2)>>2]|0;s=(y|0)==0|(y|0)==(c|0)?s:y;if(!c){y=86;break}else{o=i;l=l<<1}}}}while(0);if((y|0)==86){if((s|0)==0&(e|0)==0){e=2<<u;e=d&(e|0-e);if(!e){b=p;break}e=(e&0-e)+-1|0;f=e>>>12&16;e=e>>>f;d=e>>>5&8;e=e>>>d;m=e>>>2&4;e=e>>>m;b=e>>>1&2;e=e>>>b;s=e>>>1&1;s=a[3328+((d|f|m|b|s)+(e>>>s)<<2)>>2]|0;e=0}if(!s){l=i;c=e}else{n=s;y=90}}if((y|0)==90)while(1){y=0;b=(a[n+4>>2]&-8)-p|0;s=b>>>0<i>>>0;i=s?b:i;e=s?n:e;s=a[n+16>>2]|0;if(s){n=s;y=90;continue}n=a[n+20>>2]|0;if(!n){l=i;c=e;break}else y=90}if((c|0)!=0?l>>>0<((a[758]|0)-p|0)>>>0:0){s=a[760]|0;if(c>>>0<s>>>0)Ie();o=c+p|0;if(c>>>0>=o>>>0)Ie();n=a[c+24>>2]|0;i=a[c+12>>2]|0;do{if((i|0)==(c|0)){e=c+20|0;t=a[e>>2]|0;if(!t){e=c+16|0;t=a[e>>2]|0;if(!t){h=0;break}}while(1){i=t+20|0;r=a[i>>2]|0;if(r){t=r;e=i;continue}i=t+16|0;r=a[i>>2]|0;if(!r)break;else{t=r;e=i}}if(e>>>0<s>>>0)Ie();else{a[e>>2]=0;h=t;break}}else{r=a[c+8>>2]|0;if(r>>>0<s>>>0)Ie();t=r+12|0;if((a[t>>2]|0)!=(c|0))Ie();e=i+8|0;if((a[e>>2]|0)==(c|0)){a[t>>2]=i;a[e>>2]=r;h=i;break}else Ie()}}while(0);do{if(n){t=a[c+28>>2]|0;e=3328+(t<<2)|0;if((c|0)==(a[e>>2]|0)){a[e>>2]=h;if(!h){a[757]=a[757]&~(1<<t);break}}else{if(n>>>0<(a[760]|0)>>>0)Ie();t=n+16|0;if((a[t>>2]|0)==(c|0))a[t>>2]=h;else a[n+20>>2]=h;if(!h)break}e=a[760]|0;if(h>>>0<e>>>0)Ie();a[h+24>>2]=n;t=a[c+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Ie();else{a[h+16>>2]=t;a[t+24>>2]=h;break}}while(0);t=a[c+20>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Ie();else{a[h+20>>2]=t;a[t+24>>2]=h;break}}}while(0);e:do{if(l>>>0>=16){a[c+4>>2]=p|3;a[c+(p|4)>>2]=l|1;a[c+(l+p)>>2]=l;t=l>>>3;if(l>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=a[756]|0;t=1<<t;if(i&t){t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Ie();else{v=t;w=e}}else{a[756]=i|t;v=3064+(e+2<<2)|0;w=r}a[v>>2]=o;a[w+12>>2]=o;a[c+(p+8)>>2]=w;a[c+(p+12)>>2]=r;break}t=l>>>8;if(t)if(l>>>0>16777215)r=31;else{N=(t+1048320|0)>>>16&8;D=t<<N;F=(D+520192|0)>>>16&4;D=D<<F;r=(D+245760|0)>>>16&2;r=14-(F|N|r)+(D<<r>>>15)|0;r=l>>>(r+7|0)&1|r<<1}else r=0;t=3328+(r<<2)|0;a[c+(p+28)>>2]=r;a[c+(p+20)>>2]=0;a[c+(p+16)>>2]=0;e=a[757]|0;i=1<<r;if(!(e&i)){a[757]=e|i;a[t>>2]=o;a[c+(p+24)>>2]=t;a[c+(p+12)>>2]=o;a[c+(p+8)>>2]=o;break}t=a[t>>2]|0;t:do{if((a[t+4>>2]&-8|0)!=(l|0)){r=l<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=a[e>>2]|0;if(!i)break;if((a[i+4>>2]&-8|0)==(l|0)){x=i;break t}else{r=r<<1;t=i}}if(e>>>0<(a[760]|0)>>>0)Ie();else{a[e>>2]=o;a[c+(p+24)>>2]=t;a[c+(p+12)>>2]=o;a[c+(p+8)>>2]=o;break e}}else x=t}while(0);t=x+8|0;e=a[t>>2]|0;D=a[760]|0;if(e>>>0>=D>>>0&x>>>0>=D>>>0){a[e+12>>2]=o;a[t>>2]=o;a[c+(p+8)>>2]=e;a[c+(p+12)>>2]=x;a[c+(p+24)>>2]=0;break}else Ie()}else{D=l+p|0;a[c+4>>2]=D|3;D=c+(D+4)|0;a[D>>2]=a[D>>2]|1}}while(0);D=c+8|0;return D|0}else b=p}else b=p}else b=-1}while(0);i=a[758]|0;if(i>>>0>=b>>>0){t=i-b|0;e=a[761]|0;if(t>>>0>15){a[761]=e+b;a[758]=t;a[e+(b+4)>>2]=t|1;a[e+i>>2]=t;a[e+4>>2]=b|3}else{a[758]=0;a[761]=0;a[e+4>>2]=i|3;D=e+(i+4)|0;a[D>>2]=a[D>>2]|1}D=e+8|0;return D|0}e=a[759]|0;if(e>>>0>b>>>0){N=e-b|0;a[759]=N;D=a[762]|0;a[762]=D+b;a[D+(b+4)>>2]=N|1;a[D+4>>2]=b|3;D=D+8|0;return D|0}do{if(!(a[874]|0)){e=it(30)|0;if(!(e+-1&e)){a[876]=e;a[875]=e;a[877]=-1;a[878]=-1;a[879]=0;a[867]=0;a[874]=(It(0)|0)&-16^1431655768;break}else Ie()}}while(0);c=b+48|0;l=a[876]|0;u=b+47|0;o=l+u|0;l=0-l|0;d=o&l;if(d>>>0<=b>>>0){D=0;return D|0}e=a[866]|0;if((e|0)!=0?(w=a[864]|0,x=w+d|0,x>>>0<=w>>>0|x>>>0>e>>>0):0){D=0;return D|0}e:do{if(!(a[867]&4)){e=a[762]|0;t:do{if(e){s=3472;while(1){i=a[s>>2]|0;if(i>>>0<=e>>>0?(g=s+4|0,(i+(a[g>>2]|0)|0)>>>0>e>>>0):0){n=s;e=g;break}s=a[s+8>>2]|0;if(!s){y=174;break t}}i=o-(a[759]|0)&l;if(i>>>0<2147483647){s=Ge(i|0)|0;x=(s|0)==((a[n>>2]|0)+(a[e>>2]|0)|0);e=x?i:0;if(x){if((s|0)!=(-1|0)){_=s;m=e;y=194;break e}}else y=184}else e=0}else y=174}while(0);do{if((y|0)==174){n=Ge(0)|0;if((n|0)!=(-1|0)){e=n;i=a[875]|0;s=i+-1|0;if(!(s&e))i=d;else i=d-e+(s+e&0-i)|0;e=a[864]|0;s=e+i|0;if(i>>>0>b>>>0&i>>>0<2147483647){x=a[866]|0;if((x|0)!=0?s>>>0<=e>>>0|s>>>0>x>>>0:0){e=0;break}s=Ge(i|0)|0;x=(s|0)==(n|0);e=x?i:0;if(x){_=n;m=e;y=194;break e}else y=184}else e=0}else e=0}}while(0);t:do{if((y|0)==184){n=0-i|0;do{if(c>>>0>i>>>0&(i>>>0<2147483647&(s|0)!=(-1|0))?(k=a[876]|0,k=u-i+k&0-k,k>>>0<2147483647):0)if((Ge(k|0)|0)==(-1|0)){Ge(n|0)|0;break t}else{i=k+i|0;break}}while(0);if((s|0)!=(-1|0)){_=s;m=i;y=194;break e}}}while(0);a[867]=a[867]|4;y=191}else{e=0;y=191}}while(0);if((((y|0)==191?d>>>0<2147483647:0)?(_=Ge(d|0)|0,S=Ge(0)|0,_>>>0<S>>>0&((_|0)!=(-1|0)&(S|0)!=(-1|0))):0)?(C=S-_|0,q=C>>>0>(b+40|0)>>>0,q):0){m=q?C:e;y=194}if((y|0)==194){e=(a[864]|0)+m|0;a[864]=e;if(e>>>0>(a[865]|0)>>>0)a[865]=e;o=a[762]|0;e:do{if(o){n=3472;do{e=a[n>>2]|0;i=n+4|0;s=a[i>>2]|0;if((_|0)==(e+s|0)){T=e;E=i;A=s;P=n;y=204;break}n=a[n+8>>2]|0}while((n|0)!=0);if(((y|0)==204?(a[P+12>>2]&8|0)==0:0)?o>>>0<_>>>0&o>>>0>=T>>>0:0){a[E>>2]=A+m;D=(a[759]|0)+m|0;N=o+8|0;N=(N&7|0)==0?0:0-N&7;F=D-N|0;a[762]=o+N;a[759]=F;a[o+(N+4)>>2]=F|1;a[o+(D+4)>>2]=40;a[763]=a[878];break}e=a[760]|0;if(_>>>0<e>>>0){a[760]=_;e=_}i=_+m|0;n=3472;while(1){if((a[n>>2]|0)==(i|0)){s=n;i=n;y=212;break}n=a[n+8>>2]|0;if(!n){i=3472;break}}if((y|0)==212)if(!(a[i+12>>2]&8)){a[s>>2]=_;f=i+4|0;a[f>>2]=(a[f>>2]|0)+m;f=_+8|0;f=(f&7|0)==0?0:0-f&7;u=_+(m+8)|0;u=(u&7|0)==0?0:0-u&7;t=_+(u+m)|0;p=f+b|0;h=_+p|0;d=t-(_+f)-b|0;a[_+(f+4)>>2]=b|3;t:do{if((t|0)!=(o|0)){if((t|0)==(a[761]|0)){D=(a[758]|0)+d|0;a[758]=D;a[761]=h;a[_+(p+4)>>2]=D|1;a[_+(D+p)>>2]=D;break}l=m+4|0;i=a[_+(l+u)>>2]|0;if((i&3|0)==1){c=i&-8;n=i>>>3;i:do{if(i>>>0>=256){o=a[_+((u|24)+m)>>2]|0;r=a[_+(m+12+u)>>2]|0;do{if((r|0)==(t|0)){s=u|16;r=_+(l+s)|0;i=a[r>>2]|0;if(!i){r=_+(s+m)|0;i=a[r>>2]|0;if(!i){$=0;break}}while(1){s=i+20|0;n=a[s>>2]|0;if(n){i=n;r=s;continue}s=i+16|0;n=a[s>>2]|0;if(!n)break;else{i=n;r=s}}if(r>>>0<e>>>0)Ie();else{a[r>>2]=0;$=i;break}}else{s=a[_+((u|8)+m)>>2]|0;if(s>>>0<e>>>0)Ie();e=s+12|0;if((a[e>>2]|0)!=(t|0))Ie();i=r+8|0;if((a[i>>2]|0)==(t|0)){a[e>>2]=r;a[i>>2]=s;$=r;break}else Ie()}}while(0);if(!o)break;e=a[_+(m+28+u)>>2]|0;i=3328+(e<<2)|0;do{if((t|0)!=(a[i>>2]|0)){if(o>>>0<(a[760]|0)>>>0)Ie();e=o+16|0;if((a[e>>2]|0)==(t|0))a[e>>2]=$;else a[o+20>>2]=$;if(!$)break i}else{a[i>>2]=$;if($)break;a[757]=a[757]&~(1<<e);break i}}while(0);i=a[760]|0;if($>>>0<i>>>0)Ie();a[$+24>>2]=o;t=u|16;e=a[_+(t+m)>>2]|0;do{if(e)if(e>>>0<i>>>0)Ie();else{a[$+16>>2]=e;a[e+24>>2]=$;break}}while(0);t=a[_+(l+t)>>2]|0;if(!t)break;if(t>>>0<(a[760]|0)>>>0)Ie();else{a[$+20>>2]=t;a[t+24>>2]=$;break}}else{r=a[_+((u|8)+m)>>2]|0;s=a[_+(m+12+u)>>2]|0;i=3064+(n<<1<<2)|0;do{if((r|0)!=(i|0)){if(r>>>0<e>>>0)Ie();if((a[r+12>>2]|0)==(t|0))break;Ie()}}while(0);if((s|0)==(r|0)){a[756]=a[756]&~(1<<n);break}do{if((s|0)==(i|0))M=s+8|0;else{if(s>>>0<e>>>0)Ie();e=s+8|0;if((a[e>>2]|0)==(t|0)){M=e;break}Ie()}}while(0);a[r+12>>2]=s;a[M>>2]=r}}while(0);t=_+((c|u)+m)|0;s=c+d|0}else s=d;t=t+4|0;a[t>>2]=a[t>>2]&-2;a[_+(p+4)>>2]=s|1;a[_+(s+p)>>2]=s;t=s>>>3;if(s>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=a[756]|0;t=1<<t;do{if(!(i&t)){a[756]=i|t;F=3064+(e+2<<2)|0;N=r}else{t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0>=(a[760]|0)>>>0){F=t;N=e;break}Ie()}}while(0);a[F>>2]=h;a[N+12>>2]=h;a[_+(p+8)>>2]=N;a[_+(p+12)>>2]=r;break}t=s>>>8;do{if(!t)r=0;else{if(s>>>0>16777215){r=31;break}F=(t+1048320|0)>>>16&8;N=t<<F;$=(N+520192|0)>>>16&4;N=N<<$;r=(N+245760|0)>>>16&2;r=14-($|F|r)+(N<<r>>>15)|0;r=s>>>(r+7|0)&1|r<<1}}while(0);t=3328+(r<<2)|0;a[_+(p+28)>>2]=r;a[_+(p+20)>>2]=0;a[_+(p+16)>>2]=0;e=a[757]|0;i=1<<r;if(!(e&i)){a[757]=e|i;a[t>>2]=h;a[_+(p+24)>>2]=t;a[_+(p+12)>>2]=h;a[_+(p+8)>>2]=h;break}t=a[t>>2]|0;i:do{if((a[t+4>>2]&-8|0)!=(s|0)){r=s<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=a[e>>2]|0;if(!i)break;if((a[i+4>>2]&-8|0)==(s|0)){D=i;break i}else{r=r<<1;t=i}}if(e>>>0<(a[760]|0)>>>0)Ie();else{a[e>>2]=h;a[_+(p+24)>>2]=t;a[_+(p+12)>>2]=h;a[_+(p+8)>>2]=h;break t}}else D=t}while(0);t=D+8|0;e=a[t>>2]|0;N=a[760]|0;if(e>>>0>=N>>>0&D>>>0>=N>>>0){a[e+12>>2]=h;a[t>>2]=h;a[_+(p+8)>>2]=e;a[_+(p+12)>>2]=D;a[_+(p+24)>>2]=0;break}else Ie()}else{D=(a[759]|0)+d|0;a[759]=D;a[762]=h;a[_+(p+4)>>2]=D|1}}while(0);D=_+(f|8)|0;return D|0}else i=3472;while(1){e=a[i>>2]|0;if(e>>>0<=o>>>0?(t=a[i+4>>2]|0,r=e+t|0,r>>>0>o>>>0):0)break;i=a[i+8>>2]|0}s=e+(t+-39)|0;e=e+(t+-47+((s&7|0)==0?0:0-s&7))|0;s=o+16|0;e=e>>>0<s>>>0?o:e;t=e+8|0;i=_+8|0;i=(i&7|0)==0?0:0-i&7;D=m+-40-i|0;a[762]=_+i;a[759]=D;a[_+(i+4)>>2]=D|1;a[_+(m+-36)>>2]=40;a[763]=a[878];i=e+4|0;a[i>>2]=27;a[t>>2]=a[868];a[t+4>>2]=a[869];a[t+8>>2]=a[870];a[t+12>>2]=a[871];a[868]=_;a[869]=m;a[871]=0;a[870]=t;t=e+28|0;a[t>>2]=7;if((e+32|0)>>>0<r>>>0)do{D=t;t=t+4|0;a[t>>2]=7}while((D+8|0)>>>0<r>>>0);if((e|0)!=(o|0)){n=e-o|0;a[i>>2]=a[i>>2]&-2;a[o+4>>2]=n|1;a[e>>2]=n;t=n>>>3;if(n>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=a[756]|0;t=1<<t;if(i&t){t=3064+(e+2<<2)|0;e=a[t>>2]|0;if(e>>>0<(a[760]|0)>>>0)Ie();else{I=t;R=e}}else{a[756]=i|t;I=3064+(e+2<<2)|0;R=r}a[I>>2]=o;a[R+12>>2]=o;a[o+8>>2]=R;a[o+12>>2]=r;break}t=n>>>8;if(t)if(n>>>0>16777215)r=31;else{N=(t+1048320|0)>>>16&8;D=t<<N;F=(D+520192|0)>>>16&4;D=D<<F;r=(D+245760|0)>>>16&2;r=14-(F|N|r)+(D<<r>>>15)|0;r=n>>>(r+7|0)&1|r<<1}else r=0;i=3328+(r<<2)|0;a[o+28>>2]=r;a[o+20>>2]=0;a[s>>2]=0;t=a[757]|0;e=1<<r;if(!(t&e)){a[757]=t|e;a[i>>2]=o;a[o+24>>2]=i;a[o+12>>2]=o;a[o+8>>2]=o;break}t=a[i>>2]|0;t:do{if((a[t+4>>2]&-8|0)!=(n|0)){r=n<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=a[e>>2]|0;if(!i)break;if((a[i+4>>2]&-8|0)==(n|0)){O=i;break t}else{r=r<<1;t=i}}if(e>>>0<(a[760]|0)>>>0)Ie();else{a[e>>2]=o;a[o+24>>2]=t;a[o+12>>2]=o;a[o+8>>2]=o;break e}}else O=t}while(0);t=O+8|0;e=a[t>>2]|0;D=a[760]|0;if(e>>>0>=D>>>0&O>>>0>=D>>>0){a[e+12>>2]=o;a[t>>2]=o;a[o+8>>2]=e;a[o+12>>2]=O;a[o+24>>2]=0;break}else Ie()}}else{D=a[760]|0;if((D|0)==0|_>>>0<D>>>0)a[760]=_;a[868]=_;a[869]=m;a[871]=0;a[765]=a[874];a[764]=-1;t=0;do{D=t<<1;N=3064+(D<<2)|0;a[3064+(D+3<<2)>>2]=N;a[3064+(D+2<<2)>>2]=N;t=t+1|0}while((t|0)!=32);D=_+8|0;D=(D&7|0)==0?0:0-D&7;N=m+-40-D|0;a[762]=_+D;a[759]=N;a[_+(D+4)>>2]=N|1;a[_+(m+-36)>>2]=40;a[763]=a[878]}}while(0);t=a[759]|0;if(t>>>0>b>>>0){N=t-b|0;a[759]=N;D=a[762]|0;a[762]=D+b;a[D+(b+4)>>2]=N|1;a[D+4>>2]=b|3;D=D+8|0;return D|0}}a[(us()|0)>>2]=12;D=0;return D|0}function ja(e){e=e|0;var t=0,i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0;if(!e)return;t=e+-8|0;l=a[760]|0;if(t>>>0<l>>>0)Ie();i=a[e+-4>>2]|0;r=i&3;if((r|0)==1)Ie();h=i&-8;b=e+(h+-8)|0;do{if(!(i&1)){t=a[t>>2]|0;if(!r)return;c=-8-t|0;d=e+c|0;p=t+h|0;if(d>>>0<l>>>0)Ie();if((d|0)==(a[761]|0)){t=e+(h+-4)|0;i=a[t>>2]|0;if((i&3|0)!=3){k=d;n=p;break}a[758]=p;a[t>>2]=i&-2;a[e+(c+4)>>2]=p|1;a[b>>2]=p;return}s=t>>>3;if(t>>>0<256){r=a[e+(c+8)>>2]|0;i=a[e+(c+12)>>2]|0;t=3064+(s<<1<<2)|0;if((r|0)!=(t|0)){if(r>>>0<l>>>0)Ie();if((a[r+12>>2]|0)!=(d|0))Ie()}if((i|0)==(r|0)){a[756]=a[756]&~(1<<s);k=d;n=p;break}if((i|0)!=(t|0)){if(i>>>0<l>>>0)Ie();t=i+8|0;if((a[t>>2]|0)==(d|0))o=t;else Ie()}else o=i+8|0;a[r+12>>2]=i;a[o>>2]=r;k=d;n=p;break}o=a[e+(c+24)>>2]|0;r=a[e+(c+12)>>2]|0;do{if((r|0)==(d|0)){i=e+(c+20)|0;t=a[i>>2]|0;if(!t){i=e+(c+16)|0;t=a[i>>2]|0;if(!t){u=0;break}}while(1){r=t+20|0;s=a[r>>2]|0;if(s){t=s;i=r;continue}r=t+16|0;s=a[r>>2]|0;if(!s)break;else{t=s;i=r}}if(i>>>0<l>>>0)Ie();else{a[i>>2]=0;u=t;break}}else{s=a[e+(c+8)>>2]|0;if(s>>>0<l>>>0)Ie();t=s+12|0;if((a[t>>2]|0)!=(d|0))Ie();i=r+8|0;if((a[i>>2]|0)==(d|0)){a[t>>2]=r;a[i>>2]=s;u=r;break}else Ie()}}while(0);if(o){t=a[e+(c+28)>>2]|0;i=3328+(t<<2)|0;if((d|0)==(a[i>>2]|0)){a[i>>2]=u;if(!u){a[757]=a[757]&~(1<<t);k=d;n=p;break}}else{if(o>>>0<(a[760]|0)>>>0)Ie();t=o+16|0;if((a[t>>2]|0)==(d|0))a[t>>2]=u;else a[o+20>>2]=u;if(!u){k=d;n=p;break}}i=a[760]|0;if(u>>>0<i>>>0)Ie();a[u+24>>2]=o;t=a[e+(c+16)>>2]|0;do{if(t)if(t>>>0<i>>>0)Ie();else{a[u+16>>2]=t;a[t+24>>2]=u;break}}while(0);t=a[e+(c+20)>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Ie();else{a[u+20>>2]=t;a[t+24>>2]=u;k=d;n=p;break}else{k=d;n=p}}else{k=d;n=p}}else{k=t;n=h}}while(0);if(k>>>0>=b>>>0)Ie();t=e+(h+-4)|0;i=a[t>>2]|0;if(!(i&1))Ie();if(!(i&2)){if((b|0)==(a[762]|0)){w=(a[759]|0)+n|0;a[759]=w;a[762]=k;a[k+4>>2]=w|1;if((k|0)!=(a[761]|0))return;a[761]=0;a[758]=0;return}if((b|0)==(a[761]|0)){w=(a[758]|0)+n|0;a[758]=w;a[761]=k;a[k+4>>2]=w|1;a[k+w>>2]=w;return}n=(i&-8)+n|0;s=i>>>3;do{if(i>>>0>=256){o=a[e+(h+16)>>2]|0;t=a[e+(h|4)>>2]|0;do{if((t|0)==(b|0)){i=e+(h+12)|0;t=a[i>>2]|0;if(!t){i=e+(h+8)|0;t=a[i>>2]|0;if(!t){m=0;break}}while(1){r=t+20|0;s=a[r>>2]|0;if(s){t=s;i=r;continue}r=t+16|0;s=a[r>>2]|0;if(!s)break;else{t=s;i=r}}if(i>>>0<(a[760]|0)>>>0)Ie();else{a[i>>2]=0;m=t;break}}else{i=a[e+h>>2]|0;if(i>>>0<(a[760]|0)>>>0)Ie();r=i+12|0;if((a[r>>2]|0)!=(b|0))Ie();s=t+8|0;if((a[s>>2]|0)==(b|0)){a[r>>2]=t;a[s>>2]=i;m=t;break}else Ie()}}while(0);if(o){t=a[e+(h+20)>>2]|0;i=3328+(t<<2)|0;if((b|0)==(a[i>>2]|0)){a[i>>2]=m;if(!m){a[757]=a[757]&~(1<<t);break}}else{if(o>>>0<(a[760]|0)>>>0)Ie();t=o+16|0;if((a[t>>2]|0)==(b|0))a[t>>2]=m;else a[o+20>>2]=m;if(!m)break}i=a[760]|0;if(m>>>0<i>>>0)Ie();a[m+24>>2]=o;t=a[e+(h+8)>>2]|0;do{if(t)if(t>>>0<i>>>0)Ie();else{a[m+16>>2]=t;a[t+24>>2]=m;break}}while(0);t=a[e+(h+12)>>2]|0;if(t)if(t>>>0<(a[760]|0)>>>0)Ie();else{a[m+20>>2]=t;a[t+24>>2]=m;break}}}else{r=a[e+h>>2]|0;i=a[e+(h|4)>>2]|0;t=3064+(s<<1<<2)|0;if((r|0)!=(t|0)){if(r>>>0<(a[760]|0)>>>0)Ie();if((a[r+12>>2]|0)!=(b|0))Ie()}if((i|0)==(r|0)){a[756]=a[756]&~(1<<s);break}if((i|0)!=(t|0)){if(i>>>0<(a[760]|0)>>>0)Ie();t=i+8|0;if((a[t>>2]|0)==(b|0))f=t;else Ie()}else f=i+8|0;a[r+12>>2]=i;a[f>>2]=r}}while(0);a[k+4>>2]=n|1;a[k+n>>2]=n;if((k|0)==(a[761]|0)){a[758]=n;return}}else{a[t>>2]=i&-2;a[k+4>>2]=n|1;a[k+n>>2]=n}t=n>>>3;if(n>>>0<256){i=t<<1;s=3064+(i<<2)|0;r=a[756]|0;t=1<<t;if(r&t){t=3064+(i+2<<2)|0;i=a[t>>2]|0;if(i>>>0<(a[760]|0)>>>0)Ie();else{g=t;v=i}}else{a[756]=r|t;g=3064+(i+2<<2)|0;v=s}a[g>>2]=k;a[v+12>>2]=k;a[k+8>>2]=v;a[k+12>>2]=s;return}t=n>>>8;if(t)if(n>>>0>16777215)s=31;else{g=(t+1048320|0)>>>16&8;v=t<<g;b=(v+520192|0)>>>16&4;v=v<<b;s=(v+245760|0)>>>16&2;s=14-(b|g|s)+(v<<s>>>15)|0;s=n>>>(s+7|0)&1|s<<1}else s=0;t=3328+(s<<2)|0;a[k+28>>2]=s;a[k+20>>2]=0;a[k+16>>2]=0;i=a[757]|0;r=1<<s;e:do{if(i&r){t=a[t>>2]|0;t:do{if((a[t+4>>2]&-8|0)!=(n|0)){s=n<<((s|0)==31?0:25-(s>>>1)|0);while(1){i=t+16+(s>>>31<<2)|0;r=a[i>>2]|0;if(!r)break;if((a[r+4>>2]&-8|0)==(n|0)){w=r;break t}else{s=s<<1;t=r}}if(i>>>0<(a[760]|0)>>>0)Ie();else{a[i>>2]=k;a[k+24>>2]=t;a[k+12>>2]=k;a[k+8>>2]=k;break e}}else w=t}while(0);t=w+8|0;i=a[t>>2]|0;v=a[760]|0;if(i>>>0>=v>>>0&w>>>0>=v>>>0){a[i+12>>2]=k;a[t>>2]=k;a[k+8>>2]=i;a[k+12>>2]=w;a[k+24>>2]=0;break}else Ie()}else{a[757]=i|r;a[t>>2]=k;a[k+24>>2]=t;a[k+12>>2]=k;a[k+8>>2]=k}}while(0);k=(a[764]|0)+-1|0;a[764]=k;if(!k)t=3480;else return;while(1){t=a[t>>2]|0;if(!t)break;else t=t+8|0}a[764]=-1;return}function Ha(e,t){e=e|0;t=t|0;var i=0;if(e){i=ie(t,e)|0;if((t|e)>>>0>65535)i=((i>>>0)/(e>>>0)|0|0)==(t|0)?i:-1}else i=0;t=za(i)|0;if(!t)return t|0;if(!(a[t+-4>>2]&3))return t|0;Yc(t|0,0,i|0)|0;return t|0}function Ba(e,t){e=e|0;t=t|0;var i=0,r=0;if(!e){e=za(t)|0;return e|0}if(t>>>0>4294967231){a[(us()|0)>>2]=12;e=0;return e|0}i=Ua(e+-8|0,t>>>0<11?16:t+11&-8)|0;if(i){e=i+8|0;return e|0}i=za(t)|0;if(!i){e=0;return e|0}r=a[e+-4>>2]|0;r=(r&-8)-((r&3|0)==0?8:4)|0;Kc(i|0,e|0,(r>>>0<t>>>0?r:t)|0)|0;ja(e);e=i;return e|0}function Ua(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0;h=e+4|0;m=a[h>>2]|0;c=m&-8;d=e+c|0;l=a[760]|0;i=m&3;if(!((i|0)!=1&e>>>0>=l>>>0&e>>>0<d>>>0))Ie();r=e+(c|4)|0;s=a[r>>2]|0;if(!(s&1))Ie();if(!i){if(t>>>0<256){e=0;return e|0}if(c>>>0>=(t+4|0)>>>0?(c-t|0)>>>0<=a[876]<<1>>>0:0)return e|0;e=0;return e|0}if(c>>>0>=t>>>0){i=c-t|0;if(i>>>0<=15)return e|0;a[h>>2]=m&1|t|2;a[e+(t+4)>>2]=i|3;a[r>>2]=a[r>>2]|1;Qa(e+t|0,i);return e|0}if((d|0)==(a[762]|0)){i=(a[759]|0)+c|0;if(i>>>0<=t>>>0){e=0;return e|0}f=i-t|0;a[h>>2]=m&1|t|2;a[e+(t+4)>>2]=f|1;a[762]=e+t;a[759]=f;return e|0}if((d|0)==(a[761]|0)){r=(a[758]|0)+c|0;if(r>>>0<t>>>0){e=0;return e|0}i=r-t|0;if(i>>>0>15){a[h>>2]=m&1|t|2;a[e+(t+4)>>2]=i|1;a[e+r>>2]=i;r=e+(r+4)|0;a[r>>2]=a[r>>2]&-2;r=e+t|0}else{a[h>>2]=m&1|r|2;r=e+(r+4)|0;a[r>>2]=a[r>>2]|1;r=0;i=0}a[758]=i;a[761]=r;return e|0}if(s&2){e=0;return e|0}p=(s&-8)+c|0;if(p>>>0<t>>>0){e=0;return e|0}f=p-t|0;n=s>>>3;do{if(s>>>0>=256){o=a[e+(c+24)>>2]|0;n=a[e+(c+12)>>2]|0;do{if((n|0)==(d|0)){r=e+(c+20)|0;i=a[r>>2]|0;if(!i){r=e+(c+16)|0;i=a[r>>2]|0;if(!i){u=0;break}}while(1){s=i+20|0;n=a[s>>2]|0;if(n){i=n;r=s;continue}s=i+16|0;n=a[s>>2]|0;if(!n)break;else{i=n;r=s}}if(r>>>0<l>>>0)Ie();else{a[r>>2]=0;u=i;break}}else{s=a[e+(c+8)>>2]|0;if(s>>>0<l>>>0)Ie();i=s+12|0;if((a[i>>2]|0)!=(d|0))Ie();r=n+8|0;if((a[r>>2]|0)==(d|0)){a[i>>2]=n;a[r>>2]=s;u=n;break}else Ie()}}while(0);if(o){i=a[e+(c+28)>>2]|0;r=3328+(i<<2)|0;if((d|0)==(a[r>>2]|0)){a[r>>2]=u;if(!u){a[757]=a[757]&~(1<<i);break}}else{if(o>>>0<(a[760]|0)>>>0)Ie();i=o+16|0;if((a[i>>2]|0)==(d|0))a[i>>2]=u;else a[o+20>>2]=u;if(!u)break}r=a[760]|0;if(u>>>0<r>>>0)Ie();a[u+24>>2]=o;i=a[e+(c+16)>>2]|0;do{if(i)if(i>>>0<r>>>0)Ie();else{a[u+16>>2]=i;a[i+24>>2]=u;break}}while(0);i=a[e+(c+20)>>2]|0;if(i)if(i>>>0<(a[760]|0)>>>0)Ie();else{a[u+20>>2]=i;a[i+24>>2]=u;break}}}else{s=a[e+(c+8)>>2]|0;r=a[e+(c+12)>>2]|0;i=3064+(n<<1<<2)|0;if((s|0)!=(i|0)){if(s>>>0<l>>>0)Ie();if((a[s+12>>2]|0)!=(d|0))Ie()}if((r|0)==(s|0)){a[756]=a[756]&~(1<<n);break}if((r|0)!=(i|0)){if(r>>>0<l>>>0)Ie();i=r+8|0;if((a[i>>2]|0)==(d|0))o=i;else Ie()}else o=r+8|0;a[s+12>>2]=r;a[o>>2]=s}}while(0);if(f>>>0<16){a[h>>2]=p|m&1|2;t=e+(p|4)|0;a[t>>2]=a[t>>2]|1;return e|0}else{a[h>>2]=m&1|t|2;a[e+(t+4)>>2]=f|3;m=e+(p|4)|0;a[m>>2]=a[m>>2]|1;Qa(e+t|0,f);return e|0}return 0}function Qa(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0;b=e+t|0;i=a[e+4>>2]|0;do{if(!(i&1)){u=a[e>>2]|0;if(!(i&3))return;f=e+(0-u)|0;p=u+t|0;c=a[760]|0;if(f>>>0<c>>>0)Ie();if((f|0)==(a[761]|0)){r=e+(t+4)|0;i=a[r>>2]|0;if((i&3|0)!=3){w=f;o=p;break}a[758]=p;a[r>>2]=i&-2;a[e+(4-u)>>2]=p|1;a[b>>2]=p;return}n=u>>>3;if(u>>>0<256){s=a[e+(8-u)>>2]|0;r=a[e+(12-u)>>2]|0;i=3064+(n<<1<<2)|0;if((s|0)!=(i|0)){if(s>>>0<c>>>0)Ie();if((a[s+12>>2]|0)!=(f|0))Ie()}if((r|0)==(s|0)){a[756]=a[756]&~(1<<n);w=f;o=p;break}if((r|0)!=(i|0)){if(r>>>0<c>>>0)Ie();i=r+8|0;if((a[i>>2]|0)==(f|0))l=i;else Ie()}else l=r+8|0;a[s+12>>2]=r;a[l>>2]=s;w=f;o=p;break}l=a[e+(24-u)>>2]|0;s=a[e+(12-u)>>2]|0;do{if((s|0)==(f|0)){s=16-u|0;r=e+(s+4)|0;i=a[r>>2]|0;if(!i){r=e+s|0;i=a[r>>2]|0;if(!i){d=0;break}}while(1){s=i+20|0;n=a[s>>2]|0;if(n){i=n;r=s;continue}s=i+16|0;n=a[s>>2]|0;if(!n)break;else{i=n;r=s}}if(r>>>0<c>>>0)Ie();else{a[r>>2]=0;d=i;break}}else{n=a[e+(8-u)>>2]|0;if(n>>>0<c>>>0)Ie();i=n+12|0;if((a[i>>2]|0)!=(f|0))Ie();r=s+8|0;if((a[r>>2]|0)==(f|0)){a[i>>2]=s;a[r>>2]=n;d=s;break}else Ie()}}while(0);if(l){i=a[e+(28-u)>>2]|0;r=3328+(i<<2)|0;if((f|0)==(a[r>>2]|0)){a[r>>2]=d;if(!d){a[757]=a[757]&~(1<<i);w=f;o=p;break}}else{if(l>>>0<(a[760]|0)>>>0)Ie();i=l+16|0;if((a[i>>2]|0)==(f|0))a[i>>2]=d;else a[l+20>>2]=d;if(!d){w=f;o=p;break}}s=a[760]|0;if(d>>>0<s>>>0)Ie();a[d+24>>2]=l;i=16-u|0;r=a[e+i>>2]|0;do{if(r)if(r>>>0<s>>>0)Ie();else{a[d+16>>2]=r;a[r+24>>2]=d;break}}while(0);i=a[e+(i+4)>>2]|0;if(i)if(i>>>0<(a[760]|0)>>>0)Ie();else{a[d+20>>2]=i;a[i+24>>2]=d;w=f;o=p;break}else{w=f;o=p}}else{w=f;o=p}}else{w=e;o=t}}while(0);c=a[760]|0;if(b>>>0<c>>>0)Ie();i=e+(t+4)|0;r=a[i>>2]|0;if(!(r&2)){if((b|0)==(a[762]|0)){v=(a[759]|0)+o|0;a[759]=v;a[762]=w;a[w+4>>2]=v|1;if((w|0)!=(a[761]|0))return;a[761]=0;a[758]=0;return}if((b|0)==(a[761]|0)){v=(a[758]|0)+o|0;a[758]=v;a[761]=w;a[w+4>>2]=v|1;a[w+v>>2]=v;return}o=(r&-8)+o|0;n=r>>>3;do{if(r>>>0>=256){l=a[e+(t+24)>>2]|0;s=a[e+(t+12)>>2]|0;do{if((s|0)==(b|0)){r=e+(t+20)|0;i=a[r>>2]|0;if(!i){r=e+(t+16)|0;i=a[r>>2]|0;if(!i){m=0;break}}while(1){s=i+20|0;n=a[s>>2]|0;if(n){i=n;r=s;continue}s=i+16|0;n=a[s>>2]|0;if(!n)break;else{i=n;r=s}}if(r>>>0<c>>>0)Ie();else{a[r>>2]=0;m=i;break}}else{n=a[e+(t+8)>>2]|0;if(n>>>0<c>>>0)Ie();i=n+12|0;if((a[i>>2]|0)!=(b|0))Ie();r=s+8|0;if((a[r>>2]|0)==(b|0)){a[i>>2]=s;a[r>>2]=n;m=s;break}else Ie()}}while(0);if(l){i=a[e+(t+28)>>2]|0;r=3328+(i<<2)|0;if((b|0)==(a[r>>2]|0)){a[r>>2]=m;if(!m){a[757]=a[757]&~(1<<i);break}}else{if(l>>>0<(a[760]|0)>>>0)Ie();i=l+16|0;if((a[i>>2]|0)==(b|0))a[i>>2]=m;else a[l+20>>2]=m;if(!m)break}r=a[760]|0;if(m>>>0<r>>>0)Ie();a[m+24>>2]=l;i=a[e+(t+16)>>2]|0;do{if(i)if(i>>>0<r>>>0)Ie();else{a[m+16>>2]=i;a[i+24>>2]=m;break}}while(0);i=a[e+(t+20)>>2]|0;if(i)if(i>>>0<(a[760]|0)>>>0)Ie();else{a[m+20>>2]=i;a[i+24>>2]=m;break}}}else{s=a[e+(t+8)>>2]|0;r=a[e+(t+12)>>2]|0;i=3064+(n<<1<<2)|0;if((s|0)!=(i|0)){if(s>>>0<c>>>0)Ie();if((a[s+12>>2]|0)!=(b|0))Ie()}if((r|0)==(s|0)){a[756]=a[756]&~(1<<n);break}if((r|0)!=(i|0)){if(r>>>0<c>>>0)Ie();i=r+8|0;if((a[i>>2]|0)==(b|0))h=i;else Ie()}else h=r+8|0;a[s+12>>2]=r;a[h>>2]=s}}while(0);a[w+4>>2]=o|1;a[w+o>>2]=o;if((w|0)==(a[761]|0)){a[758]=o;return}}else{a[i>>2]=r&-2;a[w+4>>2]=o|1;a[w+o>>2]=o}i=o>>>3;if(o>>>0<256){r=i<<1;n=3064+(r<<2)|0;s=a[756]|0;i=1<<i;if(s&i){i=3064+(r+2<<2)|0;r=a[i>>2]|0;if(r>>>0<(a[760]|0)>>>0)Ie();else{g=i;v=r}}else{a[756]=s|i;g=3064+(r+2<<2)|0;v=n}a[g>>2]=w;a[v+12>>2]=w;a[w+8>>2]=v;a[w+12>>2]=n;return}i=o>>>8;if(i)if(o>>>0>16777215)n=31;else{g=(i+1048320|0)>>>16&8;v=i<<g;b=(v+520192|0)>>>16&4;v=v<<b;n=(v+245760|0)>>>16&2;n=14-(b|g|n)+(v<<n>>>15)|0;n=o>>>(n+7|0)&1|n<<1}else n=0;i=3328+(n<<2)|0;a[w+28>>2]=n;a[w+20>>2]=0;a[w+16>>2]=0;r=a[757]|0;s=1<<n;if(!(r&s)){a[757]=r|s;a[i>>2]=w;a[w+24>>2]=i;a[w+12>>2]=w;a[w+8>>2]=w;return}i=a[i>>2]|0;e:do{if((a[i+4>>2]&-8|0)!=(o|0)){n=o<<((n|0)==31?0:25-(n>>>1)|0);while(1){r=i+16+(n>>>31<<2)|0;s=a[r>>2]|0;if(!s)break;if((a[s+4>>2]&-8|0)==(o|0)){i=s;break e}else{n=n<<1;i=s}}if(r>>>0<(a[760]|0)>>>0)Ie();a[r>>2]=w;a[w+24>>2]=i;a[w+12>>2]=w;a[w+8>>2]=w;return}}while(0);r=i+8|0;s=a[r>>2]|0;v=a[760]|0;if(!(s>>>0>=v>>>0&i>>>0>=v>>>0))Ie();a[s+12>>2]=w;a[r>>2]=w;a[w+8>>2]=s;a[w+12>>2]=i;a[w+24>>2]=0;return}function Ya(e,t,i,s,o,l,p,f,h,m,b,g){e=e|0;t=t|0;i=i|0;s=s|0;o=o|0;l=l|0;p=p|0;f=f|0;h=h|0;m=m|0;b=+b;g=g|0;var v=0,w=0,k=0.0,y=0.0,_=0,S=0,x=0.0,C=0.0,q=0.0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0.0,F=0,N=0,D=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,Y=0.0,V=0.0,W=0.0,G=0.0,K=0,J=0;Q=d;d=d+240|0;S=Q+224|0;_=Q+216|0;E=Q+208|0;T=Q+200|0;v=Q+136|0;L=Q+72|0;j=Q;H=Q+232|0;B=Q+228|0;u[v>>3]=100.0;u[v+8>>3]=100.0;u[v+16>>3]=110.0;u[v+24>>3]=100.0;u[v+32>>3]=110.0;u[v+40>>3]=110.0;u[v+48>>3]=100.0;u[v+56>>3]=110.0;u[L>>3]=+u[m>>3];u[L+8>>3]=+u[m+8>>3];u[L+16>>3]=+u[m+16>>3];u[L+24>>3]=+u[m+24>>3];u[L+32>>3]=+u[m+32>>3];u[L+40>>3]=+u[m+40>>3];u[L+48>>3]=+u[m+48>>3];u[L+56>>3]=+u[m+56>>3];Ga(v,L,j);q=+u[L>>3];V=+u[L+16>>3];x=q-V;$=+u[L+8>>3];Y=+u[L+24>>3];k=$-Y;v=~~(x*x+k*k);k=+u[L+32>>3];x=+u[L+48>>3];G=k-x;y=+u[L+40>>3];C=+u[L+56>>3];W=y-C;L=~~(G*G+W*W);k=V-k;y=Y-y;w=~~(k*k+y*y);q=x-q;$=C-$;z=~~(q*q+$*$);v=~~(+(((L|0)>(v|0)?L:v)|0)*b*b);w=~~(+(((z|0)>(w|0)?z:w)|0)*b*b);if(!e){m=i;while(1)if((m|0)<(s|0)&(ie(m,m)|0)<(v|0))m=m<<1;else break;v=i;while(1)if((v|0)<(s|0)&(ie(v,v)|0)<(w|0))v=v<<1;else break}else{m=i;while(1)if((m|0)<(s|0)&(ie(m<<2,m)|0)<(v|0))m=m<<1;else break;v=i;while(1)if((v|0)<(s|0)&(ie(v<<2,v)|0)<(w|0))v=v<<1;else break}z=(m|0)>(s|0)?s:m;D=(v|0)>(s|0)?s:v;N=(z|0)/(i|0)|0;F=(D|0)/(i|0)|0;k=(1.0-b)*.5*10.0;$=b*10.0;L=ie(i,i)|0;e:do{if(!t){O=L*3|0;m=Ha(O,4)|0;if(!m){en(3,5472,T);kt(1)}do{switch(f|0){case 0:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((ie(w,l)|0)+v|0)*3|0;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w+2)>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w+1)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 1:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((ie(w,l)|0)+v|0)*3|0;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+w>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w+1)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+(w+2)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 2:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|2)>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|1)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 3:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+w>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|1)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+(w|2)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 4:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|1)>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|2)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+(w|3)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 5:case 12:case 13:case 14:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=n[o+((ie(w,l)|0)+v)>>0]|0;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+w;v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+w;e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+w}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 6:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|3)>>0]|0);v=m+(e+1<<2)|0;a[v>>2]=(a[v>>2]|0)+(n[o+(w|2)>>0]|0);e=m+(e+2<<2)|0;a[e>>2]=(a[e>>2]|0)+(n[o+(w|1)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 7:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){J=ie(w,l)|0;K=(v&65534)+J<<1;V=+((n[o+K>>0]|0)+-128|0);G=+((n[o+(K+2)>>0]|0)+-128|0);W=+((n[o+(J+v<<1|1)>>0]|0)+-16|0)*298.0820007324219;J=~~(V*516.4110107421875+W)>>8;K=~~(W-V*100.29100036621094-G*208.1199951171875)>>8;w=~~(W+G*408.5830078125)>>8;J=(J|0)>0?J:0;e=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;v=m+(e<<2)|0;a[v>>2]=((J|0)<255?J:255)+(a[v>>2]|0);K=(K|0)>0?K:0;v=m+(e+1<<2)|0;a[v>>2]=((K|0)<255?K:255)+(a[v>>2]|0);w=(w|0)>0?w:0;e=m+(e+2<<2)|0;a[e>>2]=((w|0)<255?w:255)+(a[e>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 8:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){w=ie(w,l)|0;K=(v&65534)+w<<1;V=+((n[o+(K|1)>>0]|0)+-128|0);G=+((n[o+(K+3)>>0]|0)+-128|0);W=+((n[o+(w+v<<1)>>0]|0)+-16|0)*298.0820007324219;v=~~(W+V*516.4110107421875)>>8;w=~~(W-V*100.29100036621094-G*208.1199951171875)>>8;K=~~(W+G*408.5830078125)>>8;v=(v|0)>0?v:0;J=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;e=m+(J<<2)|0;a[e>>2]=((v|0)<255?v:255)+(a[e>>2]|0);w=(w|0)>0?w:0;e=m+(J+1<<2)|0;a[e>>2]=((w|0)<255?w:255)+(a[e>>2]|0);K=(K|0)>0?K:0;J=m+(J+2<<2)|0;a[J>>2]=((K|0)<255?K:255)+(a[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 9:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;e=m+(J<<2)|0;a[e>>2]=(w<<3&248|4)+(a[e>>2]|0);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;a[e>>2]=(K<<5&224|w>>>3&28|2)+(a[e>>2]|0);J=m+(J+2<<2)|0;a[J>>2]=(K&248|4)+(a[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 10:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;e=m+(J<<2)|0;a[e>>2]=(w<<2&248|4)+(a[e>>2]|0);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;a[e>>2]=(K<<5&224|w>>>3&24|4)+(a[e>>2]|0);J=m+(J+2<<2)|0;a[J>>2]=(K&248|4)+(a[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}case 11:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;J=((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)|0)*3|0;e=m+(J<<2)|0;a[e>>2]=(a[e>>2]|0)+((n[o+(K|1)>>0]|0)&240|8);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;a[e>>2]=(K<<4&240|8)+(a[e>>2]|0);J=m+(J+2<<2)|0;a[J>>2]=(K&240|8)+(a[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}break}default:{en(3,4615,E);U=278;break e}}}while(0);w=ie(F,N)|0;if(L){v=0;do{r[g+v>>0]=((a[m+(v<<2)>>2]|0)>>>0)/(w>>>0)|0;v=v+1|0}while((v|0)<(O|0))}ja(m);m=0}else{m=Ha(L,4)|0;if(!m){en(3,5472,_);kt(1)}t:do{if(f>>>0<2){x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)>0){t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=((ie(w,l)|0)+v|0)*3|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((n[o+(K+1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K+2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0))}}else{if((f&-2|0)==2){x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break;t=(z|0)>0;S=0;while(1){y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<2;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((n[o+(K|1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K|2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0;if((S|0)>=(D|0))break t}}if((f&-3|0)==4){x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break;t=(z|0)>0;S=0;while(1){y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<2;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((n[o+(K|2)>>0]|0)+(n[o+(K|1)>>0]|0)+(n[o+(K|3)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0;if((S|0)>=(D|0))break t}}switch(f|0){case 5:case 12:case 13:case 14:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v)>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}case 7:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v<<1|1)>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}case 8:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v<<1)>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}case 9:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((K<<3&248|4)+(O&248|4)+(O<<5&224|K>>>3&28|2)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}case 10:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((K<<2&248|4)+(O&248|4)+(O<<5&224|K>>>3&24|4)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}case 11:{x=k+100.0;C=+(D|0);q=+(z|0);T=j+48|0;E=j+56|0;f=j+64|0;A=j+8|0;P=j+16|0;M=j+24|0;I=j+32|0;R=j+40|0;s=(e|0)==1;if((D|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+$*(+(S|0)+.5)/C;if(t){_=0;do{k=x+$*(+(_|0)+.5)/q;b=+u[f>>3]+(+u[T>>3]*k+y*+u[E>>3]);if(b==0.0){U=278;break e}G=(+u[P>>3]+(k*+u[j>>3]+y*+u[A>>3]))/b;c[H>>2]=G;k=(+u[R>>3]+(k*+u[M>>3]+y*+u[I>>3]))/b;c[B>>2]=k;Tn(h,G,k,H,B)|0;k=+c[H>>2];if(s){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+c[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+c[B>>2]+.5)}if((v|0)>-1?(w|0)<(p|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;J=m+((ie((S|0)/(F|0)|0,i)|0)+((_|0)/(N|0)|0)<<2)|0;a[J>>2]=(a[J>>2]|0)+((((O<<4&240|8)+(O&240|8)+((n[o+(K|1)>>0]|0)&240|8)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(D|0));break}default:{en(3,4615,S);U=278;break e}}}}while(0);v=ie(F,N)|0;if(L){w=0;do{r[g+w>>0]=((a[m+(w<<2)>>2]|0)>>>0)/(v>>>0)|0;w=w+1|0}while((w|0)<(L|0))}ja(m);m=0}}while(0);if((U|0)==278){ja(m);m=-1}d=Q;return m|0}function Va(e,t,i,s,o,l,c){e=e|0;t=t|0;i=i|0;s=s|0;o=o|0;l=l|0;c=c|0;var p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0;y=d;d=d+32|0;m=y+24|0;h=y+8|0;k=y;e:do{if((t+-3|0)>>>0>5){a[i>>2]=-1;a[s>>2]=0;u[o>>3]=-1.0;p=-1}else{a[h>>2]=0;w=t+-1|0;a[h+4>>2]=ie(w,t)|0;g=ie(t,t)|0;a[h+8>>2]=g+-1;a[h+12>>2]=w;f=r[e+(a[h>>2]|0)>>0]|0;p=(f&255)>0?f:0;f=(f&255)<255?f:-1;v=r[e+(a[h+4>>2]|0)>>0]|0;p=(v&255)>(p&255)?v:p;f=(v&255)<(f&255)?v:f;v=r[e+(a[h+8>>2]|0)>>0]|0;p=(v&255)>(p&255)?v:p;f=(v&255)<(f&255)?v:f;v=r[e+(a[h+12>>2]|0)>>0]|0;p=((v&255)>(p&255)?v:p)&255;f=((v&255)<(f&255)?v:f)&255;if((p-f|0)<30){a[i>>2]=-1;a[s>>2]=0;u[o>>3]=-1.0;p=-2;break}b=(p+f|0)>>>1;r[m>>0]=(n[e+(a[h>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+1>>0]=(n[e+(a[h+4>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+2>>0]=(n[e+(a[h+8>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+3>>0]=(n[e+(a[h+12>>2]|0)>>0]|0)>>>0<b>>>0&1;f=0;while(1){p=f+1|0;if(((r[m+f>>0]|0)==1?(r[m+((p|0)%4|0)>>0]|0)==1:0)?(r[m+((f+2|0)%4|0)>>0]|0)==0:0){p=f;f=10;break}if((p|0)<4)f=p;else{f=12;break}}if((f|0)==10)a[s>>2]=p;else if((f|0)==12?(p|0)==4:0){a[i>>2]=-1;a[s>>2]=0;u[o>>3]=-1.0;p=-3;break}if(!g)v=255;else{p=255;f=0;do{v=e+f|0;m=n[v>>0]|0;h=m-b|0;h=(h|0)<0?0-h|0:h;p=(h|0)<(p|0)?h:p;r[v>>0]=m>>>0<b>>>0&1;f=f+1|0}while((f|0)<(g|0));v=p}switch(a[s>>2]|0){case 0:{if((t|0)>0){g=(t|0)==0;f=0;p=0;s=0;do{m=(s|0)==(w|0);b=ie(s,t)|0;if(!g){h=0;do{if((h|s|0)!=0?!(m&((h|0)==0|(h|0)==(w|0))):0){f=Vc(f|0,p|0,1)|0;f=(r[e+(h+b)>>0]|0)!=0|f;p=I}h=h+1|0}while((h|0)!=(t|0))}s=s+1|0}while((s|0)<(t|0))}else{f=0;p=0}break}case 1:{if((t|0)>0){g=(t|0)>0;f=0;p=0;s=0;do{m=(s|0)==0;b=(s|0)==(w|0);if(g){h=w;while(1){_=(h|0)==(w|0);if(!(m&_)?!(b&(_|(h|0)==0)):0){f=Vc(f|0,p|0,1)|0;f=(r[e+((ie(h,t)|0)+s)>>0]|0)!=0|f;p=I}if((h|0)>0)h=h+-1|0;else break}}s=s+1|0}while((s|0)<(t|0))}else{f=0;p=0}break}case 2:{if((t|0)>0){g=(t|0)>0;f=0;p=0;s=w;while(1){b=(s|0)==(w|0)|(s|0)==0;m=ie(s,t)|0;if(g){h=w;while(1){if(!(b&(h|0)==(w|0)|(h|s|0)==0)){f=Vc(f|0,p|0,1)|0;f=(r[e+(h+m)>>0]|0)!=0|f;p=I}if((h|0)>0)h=h+-1|0;else break}}if((s|0)>0)s=s+-1|0;else break}}else{f=0;p=0}break}case 3:{if((t|0)>0){g=(t|0)>0;f=0;p=0;s=w;while(1){m=(s|0)==(w|0);b=(s|0)==0;if(g){h=0;do{if(!(m&(h|0)==0|(h|s|0)==0|b&(h|0)==(w|0))){f=Vc(f|0,p|0,1)|0;f=(r[e+((ie(h,t)|0)+s)>>0]|0)!=0|f;p=I}h=h+1|0}while((h|0)<(t|0))}if((s|0)>0)s=s+-1|0;else break}}else{f=0;p=0}break}default:{f=0;p=0}}u[o>>3]=(v|0)>30?1.0:+(v|0)/30.0;switch(l|0){case 259:{_=r[4551+f>>0]|0;l=_<<24>>24;c=k;a[c>>2]=l;a[c+4>>2]=((l|0)<0)<<31>>31;if(_<<24>>24<0){a[i>>2]=-1;u[o>>3]=-1.0;p=-4;break e}break}case 515:{p=r[4423+f>>0]|0;l=p<<24>>24;_=k;a[_>>2]=l;a[_+4>>2]=((l|0)<0)<<31>>31;if(c)a[c>>2]=n[4487+f>>0];if(p<<24>>24<0){a[i>>2]=-1;u[o>>3]=-1.0;p=-4;break e}break}case 772:case 1028:{p=Ka(l,f,p,0,k)|0;if((p|0)<0){a[i>>2]=-1;u[o>>3]=-1.0;p=-4;break e}if((c|0)!=0&(p|0)>0)a[c>>2]=p;break}default:{_=k;a[_>>2]=f;a[_+4>>2]=p}}a[i>>2]=a[k>>2];p=0}}while(0);d=y;return p|0}function Wa(e,t,i,r,s,o,l){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;o=o|0;l=l|0;var c=0,p=0.0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0,C=0,q=0,T=0,E=0,A=0.0;E=d;d=d+16|0;c=E+8|0;f=E;e:do{if(!e){a[s>>2]=0;a[o>>2]=0;u[l>>3]=-1.0;t=-1}else switch(t|0){case 0:{h=ie(r,r)|0;C=h*3|0;q=za(h*12|0)|0;if(!q){en(3,5472,f);kt(1)}if(!h)t=0;else{t=0;c=0;do{t=((n[i+c>>0]|0)^255)+t|0;c=c+1|0}while((c|0)<(C|0))}c=(t|0)/(C|0)|0;if(!h)p=0.0;else{f=0;t=0;do{S=((n[i+f>>0]|0)^255)-c|0;a[q+(f<<2)>>2]=S;t=(ie(S,S)|0)+t|0;f=f+1|0}while((f|0)<(C|0));p=+(t|0)}x=+U(+p);if(x/(+(r|0)*1.7320508)<15.0){a[s>>2]=0;a[o>>2]=0;u[l>>3]=-1.0;ja(q);t=-2;break e}y=a[e>>2]|0;_=e+12|0;S=e+16|0;if((y|0)>0){k=a[e+8>>2]|0;v=(h|0)==0;f=-1;w=0;p=0.0;c=-1;t=-1;do{t:while(1){f=f+1|0;switch(a[k+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{T=17;break t}}}if((T|0)==17){T=0;m=f<<2;b=a[S>>2]|0;g=0;do{e=g+m|0;if(v)h=0;else{i=a[(a[_>>2]|0)+(e<<2)>>2]|0;r=0;h=0;do{h=(ie(a[i+(r<<2)>>2]|0,a[q+(r<<2)>>2]|0)|0)+h|0;r=r+1|0}while((r|0)<(C|0))}A=+(h|0)/+u[b+(e<<3)>>3]/x;e=A>p;c=e?g:c;t=e?f:t;p=e?A:p;g=g+1|0}while((g|0)!=4)}w=w+1|0}while((w|0)<(y|0))}else{p=0.0;c=-1;t=-1}a[o>>2]=c;a[s>>2]=t;u[l>>3]=p;ja(q);t=0;break e}case 1:{C=ie(r,r)|0;q=za(C<<2)|0;if(!q){en(3,5472,c);kt(1)}if(!C)t=0;else{t=0;c=0;do{t=((n[i+c>>0]|0)^255)+t|0;c=c+1|0}while((c|0)<(C|0))}c=(t|0)/(C|0)|0;if(!C)p=0.0;else{f=0;t=0;do{S=((n[i+f>>0]|0)^255)-c|0;a[q+(f<<2)>>2]=S;t=(ie(S,S)|0)+t|0;f=f+1|0}while((f|0)<(C|0));p=+(t|0)}x=+U(+p);if(x/+(r|0)<15.0){a[s>>2]=0;a[o>>2]=0;u[l>>3]=-1.0;ja(q);t=-2;break e}y=a[e>>2]|0;_=e+20|0;S=e+24|0;if((y|0)>0){v=a[e+8>>2]|0;w=(C|0)==0;f=-1;k=0;p=0.0;c=-1;t=-1;do{t:while(1){f=f+1|0;switch(a[v+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{T=37;break t}}}if((T|0)==37){T=0;m=f<<2;b=a[S>>2]|0;g=0;do{e=g+m|0;if(w)h=0;else{i=a[(a[_>>2]|0)+(e<<2)>>2]|0;r=0;h=0;do{h=(ie(a[i+(r<<2)>>2]|0,a[q+(r<<2)>>2]|0)|0)+h|0;r=r+1|0}while((r|0)<(C|0))}A=+(h|0)/+u[b+(e<<3)>>3]/x;e=A>p;c=e?g:c;t=e?f:t;p=e?A:p;g=g+1|0}while((g|0)!=4)}k=k+1|0}while((k|0)<(y|0))}else{p=0.0;c=-1;t=-1}a[o>>2]=c;a[s>>2]=t;u[l>>3]=p;ja(q);t=0;break e}default:{t=-1;break e}}}while(0);d=E;return t|0}function Ga(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0,c=0,d=0,p=0,f=0,h=0,m=0;r=nn(8,8)|0;s=nn(8,1)|0;n=nn(8,1)|0;o=a[r>>2]|0;l=a[s>>2]|0;c=0;do{m=e+(c<<4)|0;d=c<<4;u[o+(d<<3)>>3]=+u[m>>3];h=e+(c<<4)+8|0;u[o+((d|1)<<3)>>3]=+u[h>>3];u[o+((d|2)<<3)>>3]=1.0;u[o+((d|3)<<3)>>3]=0.0;u[o+((d|4)<<3)>>3]=0.0;u[o+((d|5)<<3)>>3]=0.0;f=t+(c<<4)|0;u[o+((d|6)<<3)>>3]=-(+u[m>>3]*+u[f>>3]);u[o+((d|7)<<3)>>3]=-(+u[h>>3]*+u[f>>3]);u[o+((d|8)<<3)>>3]=0.0;u[o+((d|9)<<3)>>3]=0.0;u[o+((d|10)<<3)>>3]=0.0;u[o+((d|11)<<3)>>3]=+u[m>>3];u[o+((d|12)<<3)>>3]=+u[h>>3];u[o+((d|13)<<3)>>3]=1.0;p=t+(c<<4)+8|0;u[o+((d|14)<<3)>>3]=-(+u[m>>3]*+u[p>>3]);u[o+((d|15)<<3)>>3]=-(+u[h>>3]*+u[p>>3]);d=c<<1;u[l+(d<<3)>>3]=+u[f>>3];u[l+((d|1)<<3)>>3]=+u[p>>3];c=c+1|0}while((c|0)!=4);mn(r)|0;pn(n,r,s)|0;m=a[n>>2]|0;u[i>>3]=+u[m>>3];u[i+8>>3]=+u[m+8>>3];u[i+16>>3]=+u[m+16>>3];m=a[n>>2]|0;u[i+24>>3]=+u[m+24>>3];u[i+32>>3]=+u[m+32>>3];u[i+40>>3]=+u[m+40>>3];m=a[n>>2]|0;u[i+48>>3]=+u[m+48>>3];u[i+56>>3]=+u[m+56>>3];u[i+64>>3]=1.0;dn(r)|0;dn(s)|0;dn(n)|0;return}function Ka(e,t,i,s,o){e=e|0;t=t|0;i=i|0;s=s|0;o=o|0;var l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,R=0,O=0;O=d;d=d+2320|0;c=O+2304|0;x=O+864|0;k=O+784|0;R=O+704|0;_=O+624|0;y=O+548|0;M=O+40|0;A=O;switch(e|0){case 772:{s=9;l=1;u=3;break}case 1028:{s=5;l=2;u=3;break}case 2830:{q=900;v=1472;E=64;P=120;C=127;T=s;l=9;u=6;break}default:i=-1}if((u|0)==3){e=0;while(1){r[c+e>>0]=t&1;t=Gc(t|0,i|0,1)|0;e=e+1|0;if((e|0)==13)break;else i=I}q=840;v=1408;E=s;P=13;C=15;T=c;u=6}do{if((u|0)==6){g=l<<1;c=1;i=0;while(1){s=y+(c<<2)|0;a[s>>2]=0;e=0;t=0;do{if(r[T+t>>0]|0){e=e^a[q+(((ie(t,c)|0)%(C|0)|0)<<2)>>2];a[s>>2]=e}t=t+1|0}while((t|0)<(P|0));i=(e|0)==0?i:1;a[s>>2]=a[v+(e<<2)>>2];if((c|0)<(g|0))c=c+1|0;else break}S=(i|0)!=0;if(S){a[k>>2]=0;i=a[y+4>>2]|0;a[k+4>>2]=i;a[x>>2]=0;a[x+72>>2]=1;if((g|0)>1){e=1;do{a[x+(e<<2)>>2]=-1;a[x+72+(e<<2)>>2]=0;e=e+1|0}while((e|0)<(g|0))}a[R>>2]=0;a[R+4>>2]=0;a[_>>2]=-1;a[_+4>>2]=0;m=0;b=0;while(1){s=b;b=b+1|0;h=k+(b<<2)|0;if((i|0)==-1){c=s+2|0;a[R+(c<<2)>>2]=m;if((m|0)<0)f=m;else{i=0;while(1){h=x+(b*72|0)+(i<<2)|0;f=a[h>>2]|0;a[x+(c*72|0)+(i<<2)>>2]=f;a[h>>2]=a[v+(f<<2)>>2];if((i|0)<(m|0))i=i+1|0;else{f=m;break}}}}else{e=s;while(1){i=(e|0)>0;if(i&(a[k+(e<<2)>>2]|0)==-1)e=e+-1|0;else break}if(i){t=e;do{i=t;t=t+-1|0;if((a[k+(t<<2)>>2]|0)!=-1)e=(a[_+(e<<2)>>2]|0)<(a[_+(t<<2)>>2]|0)?t:e}while((i|0)>1)}t=R+(e<<2)|0;p=b-e|0;f=p+(a[t>>2]|0)|0;c=s+2|0;f=(m|0)>(f|0)?m:f;a[R+(c<<2)>>2]=f;i=0;do{a[x+(c*72|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)<(g|0));i=a[t>>2]|0;t=k+(e<<2)|0;if((i|0)>=0){u=0;while(1){s=a[x+(e*72|0)+(u<<2)>>2]|0;if((s|0)!=-1)a[x+(c*72|0)+(p+u<<2)>>2]=a[q+(((s+C+(a[h>>2]|0)-(a[t>>2]|0)|0)%(C|0)|0)<<2)>>2];if((u|0)<(i|0))u=u+1|0;else break}}if((m|0)>=0){i=0;while(1){h=x+(b*72|0)+(i<<2)|0;p=a[h>>2]|0;u=x+(c*72|0)+(i<<2)|0;a[u>>2]=a[u>>2]^p;a[h>>2]=a[v+(p<<2)>>2];if((i|0)<(m|0))i=i+1|0;else break}}}a[_+(c<<2)>>2]=b-f;if((b|0)>=(g|0))break;i=a[y+(c<<2)>>2]|0;if((i|0)==-1)i=0;else i=a[q+(i<<2)>>2]|0;s=k+(c<<2)|0;a[s>>2]=i;if((f|0)>=1){t=1;while(1){e=a[y+(c-t<<2)>>2]|0;if((e|0)!=-1?(w=a[x+(c*72|0)+(t<<2)>>2]|0,(w|0)!=0):0){i=i^a[q+((((a[v+(w<<2)>>2]|0)+e|0)%(C|0)|0)<<2)>>2];a[s>>2]=i}if((t|0)<(f|0))t=t+1|0;else break}}i=a[v+(i<<2)>>2]|0;a[s>>2]=i;if((f|0)>(l|0))break;else m=f}if((f|0)>(l|0)){i=-1;break}if((f|0)>=0){i=0;while(1){_=x+(c*72|0)+(i<<2)|0;a[_>>2]=a[v+(a[_>>2]<<2)>>2];if((i|0)<(f|0))i=i+1|0;else break}}if((f|0)>=1){i=1;while(1){a[A+(i<<2)>>2]=a[x+(c*72|0)+(i<<2)>>2];if((i|0)<(f|0))i=i+1|0;else break}}u=(f|0)<1;i=0;p=1;do{if(u)e=1;else{l=1;e=1;while(1){t=A+(l<<2)|0;s=a[t>>2]|0;if((s|0)!=-1){x=(s+l|0)%(C|0)|0;a[t>>2]=x;e=a[q+(x<<2)>>2]^e}if((l|0)<(f|0))l=l+1|0;else break}}if(!e){a[M+(i<<2)>>2]=C-p;i=i+1|0}p=p+1|0}while((C|0)>=(p|0));if((i|0)!=(f|0)){i=-1;break}if((f|0)>0){i=0;do{A=T+(a[M+(i<<2)>>2]|0)|0;r[A>>0]=n[A>>0]^1;i=i+1|0}while((i|0)<(f|0))}}else c=0;e=o;a[e>>2]=0;a[e+4>>2]=0;e=1;t=0;s=0;l=0;i=P-E|0;while(1){M=iu(n[T+i>>0]|0,0,e|0,t|0)|0;s=Wc(M|0,I|0,s|0,l|0)|0;l=I;M=o;a[M>>2]=s;a[M+4>>2]=l;e=Vc(e|0,t|0,1)|0;i=i+1|0;if((i|0)>=(P|0))break;else t=I}if(S)i=a[R+(c<<2)>>2]|0;else i=0}}while(0);d=O;return i|0}function Ja(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0.0;q=d;d=d+32|0;C=q+24|0;n=q+16|0;i=q+8|0;do{if(e){if(!t){en(3,4674,i);i=-1;break}x=e+8|0;s=a[e+4>>2]|0;e:do{if((s|0)>0){r=a[x>>2]|0;i=0;do{if(!(a[r+(i<<2)>>2]|0))break e;i=i+1|0}while((i|0)<(s|0))}else i=0}while(0);if((i|0)!=(s|0)){S=ka(t)|0;if(!S){en(3,4719,n);i=-1;break}g=e+28|0;v=i<<2;w=e+12|0;k=e+20|0;y=e+16|0;_=e+24|0;s=qa(S,4742)|0;r=0;e:while(1){b=r+v|0;m=0;t=0;do{f=(m|0)==0;h=(m|0)==2;n=a[g>>2]|0;if((n|0)>0){p=0;do{if((n|0)>0){c=0;do{if(!s){r=17;break e}n=ua(s)|0;s=qa(0,4742)|0;n=255-n|0;l=(((ie(a[g>>2]|0,p)|0)+c|0)*3|0)+m|0;a[(a[(a[w>>2]|0)+(b<<2)>>2]|0)+(l<<2)>>2]=n;l=(ie(a[g>>2]|0,p)|0)+c|0;o=a[(a[k>>2]|0)+(b<<2)>>2]|0;l=o+(l<<2)|0;if(!f){a[l>>2]=(a[l>>2]|0)+n;if(h){l=o+((ie(a[g>>2]|0,p)|0)+c<<2)|0;a[l>>2]=(a[l>>2]|0)/3|0}}else a[l>>2]=n;t=n+t|0;c=c+1|0;n=a[g>>2]|0}while((c|0)<(n|0))}p=p+1|0}while((p|0)<(n|0))}m=m+1|0}while((m|0)<3);n=a[g>>2]|0;c=(t|0)/(ie(n*3|0,n)|0)|0;if((ie(n*3|0,n)|0)>0){o=a[(a[w>>2]|0)+(b<<2)>>2]|0;l=0;t=0;do{m=o+(l<<2)|0;n=(a[m>>2]|0)-c|0;a[m>>2]=n;t=(ie(n,n)|0)+t|0;l=l+1|0;n=a[g>>2]|0}while((l|0)<(ie(n*3|0,n)|0))}else t=0;T=+U(+ +(t|0));u[(a[y>>2]|0)+(b<<3)>>3]=T==0.0?1.0e-07:T;if(!(ie(n,n)|0))t=0;else{n=a[(a[k>>2]|0)+(b<<2)>>2]|0;o=0;t=0;do{h=n+(o<<2)|0;m=(a[h>>2]|0)-c|0;a[h>>2]=m;t=(ie(m,m)|0)+t|0;o=o+1|0;m=a[g>>2]|0}while((o|0)<(ie(m,m)|0))}T=+U(+ +(t|0));u[(a[_>>2]|0)+(b<<3)>>3]=T==0.0?1.0e-07:T;r=r+1|0;if((r|0)>=4){r=32;break}}if((r|0)==17){en(3,4747,C);ja(S);i=-1;break}else if((r|0)==32){ja(S);a[(a[x>>2]|0)+(i<<2)>>2]=1;a[e>>2]=(a[e>>2]|0)+1;break}}else i=-1}else{en(3,4649,q);i=-1}}while(0);d=q;return i|0}function Xa(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0,l=0,c=0;c=d;d=d+32|0;l=c+16|0;o=c+8|0;i=c;n=Ys(t,4854)|0;do{if(n){Js(n,0,2)|0;i=ea(n)|0;Js(n,0,0)|0;s=za(i+1|0)|0;if(!s){en(3,5472,o);Hs(n)|0;i=-1;break}o=Ws(s,i,1,n)|0;Hs(n)|0;if(!o){a[l>>2]=t;en(3,4820,l);ja(s);i=-1;break}else{r[s+i>>0]=0;i=Ja(e,s)|0;ja(s);break}}else{a[i>>2]=t;en(3,4774,i);i=-1}}while(0);d=c;return i|0}function Za(e,t){e=e|0;t=t|0;t=(a[e+8>>2]|0)+(t<<2)|0;if(!(a[t>>2]|0))t=-1;else{a[t>>2]=0;a[e>>2]=(a[e>>2]|0)+-1;t=1}return t|0}function en(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l+16|0;s=l;a[o>>2]=0;if(((t|0)!=0&(a[496]|0)<=(e|0)?(r[t>>0]|0)!=0:0)?(a[s>>2]=i,n=aa(o,t,s)|0,(n|0)>-1):0){s=a[497]|0;do{if(s){if(!(a[498]|0)){Uu[s&15](a[o>>2]|0);break}i=ct()|0;e=a[500]|0;if((i|0)==(a[499]|0)){if((e|0)>0){Uu[s&15](a[502]|0);a[500]=0;s=a[497]|0}Uu[s&15](a[o>>2]|0);break}s=a[501]|0;if((e|0)<(s|0)){t=(a[502]|0)+e|0;if((n|0)<(-3-e+s|0)){va(t,a[o>>2]|0)|0;a[500]=(a[500]|0)+n;break}else{r[t>>0]=46;r[t+1>>0]=46;r[t+2>>0]=46;r[t+3>>0]=0;a[500]=a[501];break}}}else Vs(a[o>>2]|0,a[659]|0)|0}while(0);ja(a[o>>2]|0)}d=l;return}function tn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,a=0,n=0,o=0;o=0;do{r=e+(o<<5)|0;s=e+(o<<5)+8|0;a=e+(o<<5)+16|0;n=0;do{u[i+(o<<5)+(n<<3)>>3]=+u[r>>3]*+u[t+(n<<3)>>3]+ +u[s>>3]*+u[t+32+(n<<3)>>3]+ +u[a>>3]*+u[t+64+(n<<3)>>3];n=n+1|0}while((n|0)!=4);n=i+(o<<5)+24|0;u[n>>3]=+u[e+(o<<5)+24>>3]+ +u[n>>3];o=o+1|0}while((o|0)!=3);return 0}function rn(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0;l=nn(4,4)|0;i=a[l>>2]|0;r=a[l>>2]|0;s=a[l>>2]|0;n=a[l>>2]|0;o=0;do{c=o<<2;u[i+(c<<3)>>3]=+u[e+(o<<5)>>3];u[r+(1+c<<3)>>3]=+u[e+(o<<5)+8>>3];u[s+(2+c<<3)>>3]=+u[e+(o<<5)+16>>3];u[n+(3+c<<3)>>3]=+u[e+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);i=a[l>>2]|0;r=i+96|0;a[r>>2]=0;a[r+4>>2]=0;a[r+8>>2]=0;a[r+12>>2]=0;a[r+16>>2]=0;a[r+20>>2]=0;u[i+120>>3]=1.0;mn(l)|0;i=a[l>>2]|0;r=a[l>>2]|0;s=a[l>>2]|0;n=a[l>>2]|0;o=0;do{c=o<<2;u[t+(o<<5)>>3]=+u[i+(c<<3)>>3];u[t+(o<<5)+8>>3]=+u[r+(1+c<<3)>>3];u[t+(o<<5)+16>>3]=+u[s+(2+c<<3)>>3];u[t+(o<<5)+24>>3]=+u[n+(3+c<<3)>>3];o=o+1|0}while((o|0)!=3);dn(l)|0;return 0}function sn(e){e=e|0;switch(e|0){case 1:case 0:{e=3;break}case 6:case 4:case 3:case 2:{e=4;break}case 14:case 13:case 12:case 5:{e=1;break}case 11:case 10:case 9:case 8:case 7:{e=2;break}default:e=0}return e|0}function an(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var a=0;do{if((e|0)!=0&(t|0)!=0&(i|0)!=0){a=xa(t,47)|0;if(!a){r[e>>0]=0;break}a=a+((s|0)!=0&1)-t|0;if((a+1|0)>>>0<=i>>>0){Sa(e,t,a)|0;r[e+a>>0]=0}else e=0}else e=0}while(0);return e|0}function nn(e,t){e=e|0;t=t|0;var i=0,r=0;i=za(12)|0;do{if(i){r=za(ie(e<<3,t)|0)|0;a[i>>2]=r;if(!r){ja(i);i=0;break}else{a[i+4>>2]=e;a[i+8>>2]=t;break}}else i=0}while(0);return i|0}function on(e){e=e|0;var t=0;t=nn(a[e+4>>2]|0,a[e+8>>2]|0)|0;if(t){if((un(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function ln(e,t){e=e|0;t=t|0;var i=0;i=nn(a[e+4>>2]|0,a[t+8>>2]|0)|0;if(i){if((pn(i,e,t)|0)<0){dn(i)|0;i=0}}else i=0;return i|0}function cn(e){e=e|0;var t=0;t=nn(a[e+8>>2]|0,a[e+4>>2]|0)|0;if(t){if((bn(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function un(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,d=0,p=0;i=a[e+4>>2]|0;if((i|0)==(a[t+4>>2]|0)?(l=a[e+8>>2]|0,(l|0)==(a[t+8>>2]|0)):0)if((i|0)>0){r=(l|0)>0;d=0;do{s=ie(l,d)|0;if(r){n=a[t>>2]|0;o=a[e>>2]|0;c=0;do{p=s+c|0;u[o+(p<<3)>>3]=+u[n+(p<<3)>>3];c=c+1|0}while((c|0)<(l|0))}d=d+1|0}while((d|0)<(i|0));i=0}else i=0;else i=-1;return i|0}function dn(e){e=e|0;if(e){ja(a[e>>2]|0);ja(e)}return 0}function pn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0.0,s=0,n=0,o=0,l=0,c=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0;f=a[t+8>>2]|0;if(((f|0)==(a[i+4>>2]|0)?(g=a[e+4>>2]|0,(g|0)==(a[t+4>>2]|0)):0)?(h=a[e+8>>2]|0,(h|0)==(a[i+8>>2]|0)):0){v=(h|0)>0?h:0;if((g|0)>0){m=(h|0)>0;b=(f|0)>0;c=a[e>>2]|0;p=0;while(1){e=ie(f,p)|0;if(m){s=0;d=c;while(1){u[d>>3]=0.0;if(b){r=0.0;n=0;o=(a[t>>2]|0)+(e<<3)|0;l=(a[i>>2]|0)+(s<<3)|0;while(1){r=r+ +u[o>>3]*+u[l>>3];u[d>>3]=r;n=n+1|0;if((n|0)>=(f|0))break;else{o=o+8|0;l=l+(h<<3)|0}}}s=s+1|0;if((s|0)>=(h|0))break;else d=d+8|0}}p=p+1|0;if((p|0)>=(g|0)){e=0;break}else c=c+(v<<3)|0}}else e=0}else e=-1;return e|0}function fn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0,o=0.0,l=0,c=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0.0,v=0,w=0,k=0;b=a[e+4>>2]|0;v=a[e+8>>2]|0;s=(b|0)<(v|0)?b:v;e:do{if(((((!((b|0)<2|(v|0)<2)?(a[t+8>>2]|0)==(v|0):0)?(a[t+4>>2]|0)==(s|0):0)?(w=i+4|0,(a[w>>2]|0)==(s|0)):0)?(n=r+4|0,(a[n>>2]|0)==(v|0)):0)?(k=on(e)|0,(k|0)!=0):0){g=+U(+ +(b|0));h=a[k+4>>2]|0;m=a[k+8>>2]|0;if(!((h|0)<1|(m|0)<1)?(a[n>>2]|0)==(m|0):0){if(m){s=a[r>>2]|0;e=0;do{u[s+(e<<3)>>3]=0.0;e=e+1|0}while((e|0)!=(m|0))}f=a[k>>2]|0;if(h){s=(m|0)==0;e=0;l=f;while(1){if(!s){n=0;c=l;d=a[r>>2]|0;while(1){u[d>>3]=+u[c>>3]+ +u[d>>3];n=n+1|0;if((n|0)==(m|0))break;else{c=c+8|0;d=d+8|0}}}e=e+1|0;if((e|0)==(h|0))break;else l=l+(m<<3)|0}}o=+(h|0);if(m){s=a[r>>2]|0;e=0;do{p=s+(e<<3)|0;u[p>>3]=+u[p>>3]/o;e=e+1|0}while((e|0)!=(m|0))}d=(m|0)>0?m:0;if((h|0)>0){s=(m|0)>0;e=0;l=f;while(1){if(s){n=0;c=l;p=a[r>>2]|0;while(1){u[c>>3]=+u[c>>3]-+u[p>>3];n=n+1|0;if((n|0)>=(m|0))break;else{c=c+8|0;p=p+8|0}}}e=e+1|0;if((e|0)>=(h|0))break;else l=l+(d<<3)|0}}s=ie(v,b)|0;if((s|0)>0){e=0;do{r=f+(e<<3)|0;u[r>>3]=+u[r>>3]/g;e=e+1|0}while((e|0)<(s|0))}s=hn(k,t,i)|0;dn(k)|0;l=a[w>>2]|0;if((l|0)>0){e=a[i>>2]|0;n=0;o=0.0;do{o=o+ +u[e+(n<<3)>>3];n=n+1|0}while((n|0)<(l|0))}else o=0.0;if((l|0)<=0)break;e=a[i>>2]|0;n=0;while(1){i=e+(n<<3)|0;u[i>>3]=+u[i>>3]/o;n=n+1|0;if((n|0)>=(l|0))break e}}dn(k)|0;s=-1}else s=-1}while(0);return s|0}function hn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0.0,c=0,p=0,f=0,h=0,m=0,b=0.0,g=0,v=0,w=0,k=0.0,y=0.0,_=0,S=0.0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0,D=0,L=0,z=0,j=0,H=0,Q=0,Y=0,V=0.0,W=0.0,G=0.0,K=0,J=0;Y=d;d=d+16|0;_=Y;M=e+4|0;O=a[M>>2]|0;$=e+8|0;F=a[$>>2]|0;H=(F|0)<(O|0)?F:O;e:do{if(((!((O|0)<2|(F|0)<2)?(j=t+8|0,(a[j>>2]|0)==(F|0)):0)?(N=t+4|0,(a[N>>2]|0)==(H|0)):0)?(D=i+4|0,(a[D>>2]|0)==(H|0)):0){Q=nn(H,H)|0;L=Q+4|0;if((a[L>>2]|0)==(H|0)?(z=Q+8|0,(a[z>>2]|0)==(H|0)):0){I=(O|0)<(F|0);v=a[M>>2]|0;w=a[$>>2]|0;if(I){if((H|0)!=(v|0)){dn(Q)|0;r=-1;break}n=a[Q>>2]|0;if((H|0)>0){p=(H|0)==0;o=(w|0)>0;f=0;g=n;while(1){c=ie(f,w)|0;if(!p){m=0;v=g;while(1){if((m|0)>=(f|0)){r=a[e>>2]|0;u[v>>3]=0.0;if(o){l=0.0;h=r+(c<<3)|0;r=r+((ie(m,w)|0)<<3)|0;s=0;while(1){l=l+ +u[h>>3]*+u[r>>3];u[v>>3]=l;s=s+1|0;if((s|0)>=(w|0))break;else{h=h+8|0;r=r+8|0}}}}else u[v>>3]=+u[n+((ie(m,H)|0)+f<<3)>>3];m=m+1|0;if((m|0)==(H|0))break;else v=v+8|0}}f=f+1|0;if((f|0)>=(H|0))break;else g=g+(H<<3)|0}}}else{if((H|0)!=(w|0)){dn(Q)|0;r=-1;break}n=a[Q>>2]|0;if((H|0)>0){c=(H|0)==0;o=(v|0)>0;p=0;m=n;while(1){if(!c){h=0;g=m;while(1){if((h|0)>=(p|0)){r=a[e>>2]|0;u[g>>3]=0.0;if(o){l=0.0;f=r+(p<<3)|0;r=r+(h<<3)|0;s=0;while(1){l=l+ +u[f>>3]*+u[r>>3];u[g>>3]=l;s=s+1|0;if((s|0)>=(v|0))break;else{f=f+(H<<3)|0;r=r+(H<<3)|0}}}}else u[g>>3]=+u[n+((ie(h,H)|0)+p<<3)>>3];h=h+1|0;if((h|0)==(H|0))break;else g=g+8|0}}p=p+1|0;if((p|0)>=(H|0))break;else m=m+(H<<3)|0}}}do{if(((H|0)>=2?(a[D>>2]|0)==(H|0):0)?(R=An(H)|0,(R|0)!=0):0){P=H+-1|0;a[_+4>>2]=P;a[_>>2]=(a[R>>2]|0)+8;if((Rn(Q,i,_)|0)<0){Pn(R)|0;break}T=a[R>>2]|0;u[T>>3]=0.0;if((P|0)>0){E=(H|0)==0;A=P;do{s=A;while(1){if((s|0)<=0)break;y=+B(+ +u[T+(s<<3)>>3]);r=s+-1|0;q=a[i>>2]|0;S=+B(+ +u[q+(r<<3)>>3]);if(y>(S+ +B(+ +u[q+(s<<3)>>3]))*1.0e-06)s=r;else break}x=A;A=A+-1|0;t:do{if((s|0)!=(x|0)){h=T+(x<<3)|0;m=T+(s+1<<3)|0;g=(s|0)<(x|0);C=0;do{if((C|0)>99)break t;C=C+1|0;v=a[i>>2]|0;w=v+(A<<3)|0;_=v+(x<<3)|0;l=+u[_>>3];b=(+u[w>>3]-l)*.5;k=+u[h>>3];k=k*k;y=+U(+(k+b*b));if(g){q=s;b=+u[v+(s<<3)>>3]-l+k/(b+(b<0.0?-y:y));k=+u[m>>3];while(1){l=+B(+b);do{if(!(l>=+B(+k))){y=-b/k;S=1.0/+U(+(y*y+1.0));y=y*S}else{if(!(l>1.0e-16)){y=1.0;S=0.0;break}l=-k/b;S=1.0/+U(+(l*l+1.0));y=S;S=l*S}}while(0);o=v+(q<<3)|0;G=+u[o>>3];f=q;q=q+1|0;c=v+(q<<3)|0;W=+u[c>>3];l=G-W;p=T+(q<<3)|0;V=S*(S*l+y*2.0*+u[p>>3]);u[o>>3]=G-V;u[c>>3]=W+V;if((f|0)>(s|0)){c=T+(f<<3)|0;u[c>>3]=y*+u[c>>3]-k*S}G=+u[p>>3];u[p>>3]=G+S*(y*l-S*2.0*G);o=ie(f,H)|0;c=ie(q,H)|0;if(E)l=k;else{r=a[Q>>2]|0;n=0;do{J=r+(n+o<<3)|0;b=+u[J>>3];K=r+(n+c<<3)|0;l=+u[K>>3];u[J>>3]=y*b-S*l;u[K>>3]=S*b+y*l;n=n+1|0}while((n|0)!=(H|0))}if((f|0)<(A|0)){b=+u[p>>3];J=T+(f+2<<3)|0;l=+u[J>>3];u[J>>3]=y*l;l=-(S*l)}if((q|0)>=(x|0))break;else k=l}}W=+B(+ +u[h>>3]);G=+B(+ +u[w>>3])}while(W>(G+ +B(+ +u[_>>3]))*1.0e-06)}}while(0)}while((x|0)>1)}if(P){c=a[i>>2]|0;p=a[Q>>2]|0;f=(H|0)==0;h=0;do{n=c+(h<<3)|0;b=+u[n>>3];o=h;h=h+1|0;if((h|0)<(H|0)){r=o;s=h;l=b;do{G=+u[c+(s<<3)>>3];J=G>l;l=J?G:l;r=J?s:r;s=s+1|0}while((s|0)<(H|0))}else{r=o;l=b}u[c+(r<<3)>>3]=b;u[n>>3]=l;if(!f){n=0;s=p+((ie(r,H)|0)<<3)|0;r=p+((ie(o,H)|0)<<3)|0;while(1){G=+u[s>>3];u[s>>3]=+u[r>>3];u[r>>3]=G;n=n+1|0;if((n|0)==(H|0))break;else{s=s+8|0;r=r+8|0}}}}while((h|0)!=(P|0))}Pn(R)|0;t:do{if(!I){n=a[t>>2]|0;m=(O|0)>(F|0)?F:O;i:do{if((H|0)>0){p=a[i>>2]|0;f=(m|0)==0;r=0;h=a[Q>>2]|0;do{if(+u[p+(r<<3)>>3]<1.0e-16)break i;if(!f){s=0;o=h;c=n;while(1){u[c>>3]=+u[o>>3];s=s+1|0;if((s|0)==(m|0))break;else{o=o+8|0;c=c+8|0}}}h=h+(m<<3)|0;n=n+(m<<3)|0;r=r+1|0}while((r|0)<(H|0))}else r=0}while(0);f=(m|0)>0?m:0;if((r|0)<(H|0)){c=a[i>>2]|0;p=(H|0)>0;while(1){u[c+(r<<3)>>3]=0.0;if(p){s=0;o=n;while(1){u[o>>3]=0.0;s=s+1|0;if((s|0)>=(H|0))break;else o=o+8|0}}r=r+1|0;if((r|0)>=(H|0))break;else n=n+(f<<3)|0}}}else{_=a[M>>2]|0;w=a[$>>2]|0;do{if(!((_|0)<1|(w|0)<1)){if((a[L>>2]|0)!=(_|0))break;if((a[z>>2]|0)!=(_|0))break;if((a[N>>2]|0)!=(_|0))break;if((a[j>>2]|0)!=(w|0))break;if((a[D>>2]|0)!=(_|0))break;s=a[t>>2]|0;i:do{if((_|0)>0){m=a[i>>2]|0;v=(w|0)==0;g=(_|0)==0;r=0;do{l=+u[m+(r<<3)>>3];if(l<1.0e-16)break i;b=1.0/+U(+ +B(+l));p=ie(r,_)|0;if(!v){f=0;h=s;while(1){if(g)l=0.0;else{n=0;o=(a[Q>>2]|0)+(p<<3)|0;c=(a[e>>2]|0)+(f<<3)|0;l=0.0;while(1){l=l+ +u[o>>3]*+u[c>>3];n=n+1|0;if((n|0)==(_|0))break;else{o=o+8|0;c=c+(w<<3)|0}}}u[h>>3]=b*l;f=f+1|0;if((f|0)==(w|0))break;else h=h+8|0}}s=s+(w<<3)|0;r=r+1|0}while((r|0)<(_|0))}else r=0}while(0);f=(w|0)>0?w:0;if((r|0)>=(_|0))break t;c=a[i>>2]|0;p=(w|0)>0;n=s;while(1){u[c+(r<<3)>>3]=0.0;if(p){s=0;o=n;while(1){u[o>>3]=0.0;s=s+1|0;if((s|0)>=(w|0))break;else o=o+8|0}}r=r+1|0;if((r|0)>=(_|0))break t;else n=n+(f<<3)|0}}}while(0);dn(Q)|0;r=-1;break e}}while(0);dn(Q)|0;r=0;break e}}while(0);dn(Q)|0;r=-1;break}dn(Q)|0;r=-1}else r=-1}while(0);d=Y;return r|0}function mn(e){e=e|0;var t=0,i=0,r=0,s=0.0,n=0,o=0,l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0.0,S=0;y=d;d=d+2e3|0;k=y;t=a[e>>2]|0;w=a[e+4>>2]|0;e:do{if((w|0)<=500){switch(w|0){case 0:{t=0;break e}case 1:{u[t>>3]=1.0/+u[t>>3];break e}default:{}}if((w|0)>0){e=0;do{a[k+(e<<2)>>2]=e;e=e+1|0}while((e|0)<(w|0))}v=t+(w+-1<<3)|0;if((w|0)>0){p=(w|0)==0;m=(w|0)==1;h=(w|0)==0;f=(w|0)==1;b=v;e=0;g=0;while(1){c=t+((ie(g,w)|0)<<3)|0;if((g|0)<(w|0)){r=g;s=0.0;i=c;while(1){_=+B(+ +u[i>>3]);l=s<_;e=l?r:e;s=l?_:s;r=r+1|0;if((r|0)>=(w|0))break;else i=i+(w<<3)|0}}else s=0.0;if(s<=1.0e-10){t=0;break e}n=k+(e<<2)|0;o=a[n>>2]|0;l=k+(g<<2)|0;a[n>>2]=a[l>>2];a[l>>2]=o;if(!p){i=0;r=t+((ie(e,w)|0)<<3)|0;n=c;while(1){_=+u[r>>3];u[r>>3]=+u[n>>3];u[n>>3]=_;i=i+1|0;if((i|0)==(w|0))break;else{r=r+8|0;n=n+8|0}}}s=+u[c>>3];if(!m){i=1;r=c;do{l=r;r=r+8|0;u[l>>3]=+u[r>>3]/s;i=i+1|0}while((i|0)!=(w|0))}u[b>>3]=1.0/s;if(!h){n=0;o=v;while(1){if((n|0)!=(g|0)){i=t+((ie(n,w)|0)<<3)|0;s=+u[i>>3];if(!f){l=1;r=c;while(1){S=i;i=i+8|0;u[S>>3]=+u[i>>3]-s*+u[r>>3];l=l+1|0;if((l|0)==(w|0))break;else r=r+8|0}}u[o>>3]=-(s*+u[b>>3])}n=n+1|0;if((n|0)==(w|0))break;else o=o+(w<<3)|0}}g=g+1|0;if((g|0)>=(w|0))break;else b=b+(w<<3)|0}}if((w|0)>0){n=(w|0)>0;o=0;do{e=k+(o<<2)|0;t:do{if((o|0)<(w|0)){i=o;do{if((a[e>>2]|0)==(o|0))break t;i=i+1|0;e=k+(i<<2)|0}while((i|0)<(w|0))}else i=o}while(0);a[e>>2]=a[k+(o<<2)>>2];if(n){r=0;e=t+(i<<3)|0;i=t+(o<<3)|0;while(1){_=+u[e>>3];u[e>>3]=+u[i>>3];u[i>>3]=_;r=r+1|0;if((r|0)>=(w|0))break;else{e=e+(w<<3)|0;i=i+(w<<3)|0}}}o=o+1|0}while((o|0)<(w|0))}}else t=0}while(0);d=y;return((t|0)==0)<<31>>31|0}function bn(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,d=0;o=a[e+4>>2]|0;if((o|0)==(a[t+8>>2]|0)?(c=a[e+8>>2]|0,(c|0)==(a[t+4>>2]|0)):0){d=(c|0)>0?c:0;if((o|0)>0){l=(c|0)>0;r=a[e>>2]|0;n=0;while(1){if(l){e=0;i=(a[t>>2]|0)+(n<<3)|0;s=r;while(1){u[s>>3]=+u[i>>3];e=e+1|0;if((e|0)>=(c|0))break;else{i=i+(o<<3)|0;s=s+8|0}}}n=n+1|0;if((n|0)>=(o|0)){e=0;break}else r=r+(d<<3)|0}}else e=0}else e=-1;return e|0}function gn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0.0,n=0.0,o=0;s=+(t|0)/+(a[e>>2]|0);n=+(i|0)/+(a[e+4>>2]|0);a[r>>2]=t;a[r+4>>2]=i;t=0;do{u[r+8+(t<<3)>>3]=s*+u[e+8+(t<<3)>>3];u[r+40+(t<<3)>>3]=n*+u[e+40+(t<<3)>>3];u[r+72+(t<<3)>>3]=+u[e+72+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=a[e+176>>2]|0;switch(t|0){case 4:{u[r+104>>3]=+u[e+104>>3];u[r+112>>3]=+u[e+112>>3];u[r+120>>3]=+u[e+120>>3];u[r+128>>3]=+u[e+128>>3];u[r+136>>3]=s*+u[e+136>>3];u[r+144>>3]=n*+u[e+144>>3];u[r+152>>3]=s*+u[e+152>>3];u[r+160>>3]=n*+u[e+160>>3];u[r+168>>3]=+u[e+168>>3];o=8;break}case 3:{u[r+104>>3]=s*+u[e+104>>3];u[r+112>>3]=n*+u[e+112>>3];u[r+120>>3]=+u[e+120>>3];u[r+128>>3]=+u[e+128>>3];u[r+136>>3]=+u[e+136>>3]/(s*n);u[r+144>>3]=+u[e+144>>3]/(n*(s*s*n));o=8;break}case 2:{u[r+104>>3]=s*+u[e+104>>3];u[r+112>>3]=n*+u[e+112>>3];u[r+120>>3]=+u[e+120>>3];u[r+128>>3]=+u[e+128>>3]/(s*n);u[r+136>>3]=+u[e+136>>3]/(n*(s*s*n));o=8;break}case 1:{u[r+104>>3]=s*+u[e+104>>3];u[r+112>>3]=n*+u[e+112>>3];u[r+120>>3]=+u[e+120>>3];u[r+128>>3]=+u[e+128>>3]/(s*n);o=8;break}default:t=-1}if((o|0)==8){a[r+176>>2]=t;t=0}return t|0}function vn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,a=0,n=0.0,o=0,l=0.0,c=0,p=0,f=0,h=0.0,m=0.0,b=0,g=0,v=0.0,w=0,k=0,y=0,_=0,S=0.0;a=d;d=d+96|0;s=a;if(!(+u[e+88>>3]>=0.0)){r=0;do{u[s+(r<<5)>>3]=-+u[e+(r<<5)>>3];u[s+(r<<5)+8>>3]=-+u[e+(r<<5)+8>>3];u[s+(r<<5)+16>>3]=-+u[e+(r<<5)+16>>3];u[s+(r<<5)+24>>3]=-+u[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3)}else{r=0;do{u[s+(r<<5)>>3]=+u[e+(r<<5)>>3];u[s+(r<<5)+8>>3]=+u[e+(r<<5)+8>>3];u[s+(r<<5)+16>>3]=+u[e+(r<<5)+16>>3];u[s+(r<<5)+24>>3]=+u[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3)}u[t>>3]=0.0;u[t+8>>3]=0.0;u[t+16>>3]=0.0;u[t+24>>3]=0.0;u[t+32>>3]=0.0;u[t+40>>3]=0.0;u[t+48>>3]=0.0;u[t+56>>3]=0.0;u[t+64>>3]=0.0;u[t+72>>3]=0.0;u[t+80>>3]=0.0;u[t+88>>3]=0.0;n=+u[s+64>>3];h=+u[s+72>>3];m=+u[s+80>>3];S=+U(+(n*n+h*h+m*m));e=t+80|0;u[e>>3]=S;S=n/S;y=i+64|0;u[y>>3]=S;h=h/+u[e>>3];w=i+72|0;u[w>>3]=h;m=m/+u[e>>3];b=i+80|0;u[b>>3]=m;f=i+88|0;u[f>>3]=+u[s+88>>3]/+u[e>>3];n=+u[s+32>>3];l=+u[s+40>>3];v=+u[s+48>>3];m=S*n+h*l+m*v;p=t+48|0;u[p>>3]=m;n=n-m*+u[y>>3];l=l-m*+u[w>>3];m=v-m*+u[b>>3];v=+U(+(n*n+l*l+m*m));c=t+40|0;u[c>>3]=v;_=i+32|0;u[_>>3]=n/v;k=i+40|0;u[k>>3]=l/+u[c>>3];g=i+48|0;u[g>>3]=m/+u[c>>3];m=+u[s>>3];l=+u[s+8>>3];v=+u[s+16>>3];n=+u[y>>3]*m+ +u[w>>3]*l+ +u[b>>3]*v;r=t+16|0;u[r>>3]=n;h=+u[_>>3]*m+ +u[k>>3]*l+ +u[g>>3]*v;o=t+8|0;u[o>>3]=h;m=m-h*+u[_>>3]-n*+u[y>>3];l=l-h*+u[k>>3]-n*+u[w>>3];n=v-h*+u[g>>3]-n*+u[b>>3];h=+U(+(m*m+l*l+n*n));u[t>>3]=h;u[i>>3]=m/h;u[i+8>>3]=l/+u[t>>3];u[i+16>>3]=n/+u[t>>3];n=+u[f>>3];l=(+u[s+56>>3]-+u[p>>3]*n)/+u[c>>3];u[i+56>>3]=l;u[i+24>>3]=(+u[s+24>>3]-l*+u[o>>3]-+u[r>>3]*n)/+u[t>>3];r=0;do{_=t+(r<<5)|0;u[_>>3]=+u[_>>3]/+u[e>>3];_=t+(r<<5)+8|0;u[_>>3]=+u[_>>3]/+u[e>>3];_=t+(r<<5)+16|0;u[_>>3]=+u[_>>3]/+u[e>>3];r=r+1|0}while((r|0)!=3);d=a;return 0}function wn(e,t,i,r,s,a){e=e|0;t=+t;i=+i;r=r|0;s=s|0;a=a|0;var n=0.0,o=0.0,l=0.0,c=0.0,d=0.0,p=0.0,f=0.0,h=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0,y=0.0,_=0.0,S=0.0,x=0.0,C=0.0,q=0.0,T=0.0,E=0.0;switch(a|0){case 4:{b=+u[e>>3];g=+u[e+8>>3];v=+u[e+16>>3];w=+u[e+24>>3];x=+u[e+32>>3];y=+u[e+40>>3];_=+u[e+48>>3];S=+u[e+56>>3];k=+u[e+64>>3];m=(t-_)/x;l=(i-S)/y;i=m*m;o=l*l;c=v*2.0;d=w*6.0;p=w*2.0;f=v*6.0;e:do{if(o!=0.0|i!=0.0){a=1;n=m;t=l;while(1){E=o+i;T=b*E+1.0+E*(g*E);C=i*3.0;q=o*C;n=n-(w*(E+i*2.0)+(t*(c*n)+n*T)-m)/(d*n+(c*t+(b*(o+C)+1.0+g*(o*o+(i*(i*5.0)+q)))));C=p*n;t=t-(v*(o*2.0+E)+t*T+t*C-l)/(f*t+(b*(i+o*3.0)+1.0+g*(o*(o*5.0)+(i*i+q)))+C);if((a|0)==4)break e;i=n*n;o=t*t;if(!(o!=0.0|i!=0.0)){n=0.0;t=0.0;break}else a=a+1|0}}else{n=0.0;t=0.0}}while(0);u[r>>3]=_+x*n/k;u[s>>3]=S+y*t/k;a=0;break}case 3:{m=+u[e>>3];n=(t-m)/+u[e+24>>3];h=e+8|0;t=i-+u[h>>3];l=+u[e+32>>3]/1.0e8;c=+u[e+40>>3]/1.0e8/1.0e5;i=n*n+t*t;d=+U(+i);p=l*3.0;f=c*5.0;e:do{if(d!=0.0){a=1;o=d;while(1){E=o-(o*(1.0-l*i-i*(c*i))-d)/(1.0-p*i-i*(f*i));n=n*E/o;t=t*E/o;if((a|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else a=a+1|0}}else{n=0.0;t=0.0}}while(0);a=e+16|0;u[r>>3]=n/+u[a>>3]+m;u[s>>3]=t/+u[a>>3]+ +u[h>>3];a=0;break}case 2:{m=+u[e>>3];n=t-m;h=e+8|0;t=i-+u[h>>3];l=+u[e+24>>3]/1.0e8;c=+u[e+32>>3]/1.0e8/1.0e5;i=n*n+t*t;d=+U(+i);p=l*3.0;f=c*5.0;e:do{if(d!=0.0){a=1;o=d;while(1){E=o-(o*(1.0-l*i-i*(c*i))-d)/(1.0-p*i-i*(f*i));n=n*E/o;t=t*E/o;if((a|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else a=a+1|0}}else{n=0.0;t=0.0}}while(0);a=e+16|0;u[r>>3]=n/+u[a>>3]+m;u[s>>3]=t/+u[a>>3]+ +u[h>>3];a=0;break}case 1:{p=+u[e>>3];n=t-p;h=e+8|0;t=i-+u[h>>3];l=+u[e+24>>3]/1.0e8;i=n*n+t*t;c=+U(+i);d=l*3.0;e:do{if(c!=0.0){a=1;o=c;while(1){E=o-(o*(1.0-l*i)-c)/(1.0-d*i);n=n*E/o;t=t*E/o;if((a|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else a=a+1|0}}else{n=0.0;t=0.0}}while(0);a=e+16|0;u[r>>3]=n/+u[a>>3]+p;u[s>>3]=t/+u[a>>3]+ +u[h>>3];a=0;break}default:a=-1}return a|0}function kn(e,t,i,r,s,a){e=e|0;t=+t;i=+i;r=r|0;s=s|0;a=a|0;var n=0.0,o=0.0,l=0.0,c=0.0,d=0.0,p=0.0,f=0.0,h=0.0;switch(a|0){case 4:{l=+u[e+16>>3];c=+u[e+24>>3];f=+u[e+32>>3];d=+u[e+40>>3];h=+u[e+48>>3];p=+u[e+56>>3];o=+u[e+64>>3];t=(t-h)*o/f;o=(i-p)*o/d;n=t*t+o*o;i=+u[e>>3]*n+1.0+n*(+u[e+8>>3]*n);u[r>>3]=h+f*(c*(t*(t*2.0)+n)+(l*2.0*t*o+t*i));u[s>>3]=p+d*(c*2.0*t*o+(l*(n+o*(o*2.0))+o*i));a=0;break}case 3:{o=+u[e>>3];h=+u[e+16>>3];n=(t-o)*h;a=e+8|0;t=h*(i-+u[a>>3]);if(n==0.0&t==0.0){u[r>>3]=o;t=+u[a>>3]}else{h=n*n+t*t;h=1.0-h*(+u[e+32>>3]/1.0e8)-h*(h*(+u[e+40>>3]/1.0e8/1.0e5));u[r>>3]=o+ +u[e+24>>3]*(n*h);t=+u[a>>3]+t*h}u[s>>3]=t;a=0;break}case 2:{o=+u[e>>3];h=+u[e+16>>3];n=(t-o)*h;a=e+8|0;t=h*(i-+u[a>>3]);if(n==0.0&t==0.0){u[r>>3]=o;t=+u[a>>3]}else{h=n*n+t*t;h=1.0-h*(+u[e+24>>3]/1.0e8)-h*(h*(+u[e+32>>3]/1.0e8/1.0e5));u[r>>3]=o+n*h;t=+u[a>>3]+t*h}u[s>>3]=t;a=0;break}case 1:{o=+u[e>>3];h=+u[e+16>>3];n=(t-o)*h;a=e+8|0;t=h*(i-+u[a>>3]);if(n==0.0&t==0.0){u[r>>3]=o;t=+u[a>>3]}else{h=1.0-(n*n+t*t)*(+u[e+24>>3]/1.0e8);u[r>>3]=o+n*h;t=+u[a>>3]+t*h}u[s>>3]=t;a=0;break}default:a=-1}return a|0}function yn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0,o=0,l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0.0;v=d;d=d+256|0;f=v+232|0;p=v+224|0;c=v+216|0;l=v+208|0;o=v+200|0;n=v+192|0;s=v+184|0;m=v+240|0;b=v;do{if((e|0)!=0&(t|0)>0&(i|0)!=0){g=Ys(e,4854)|0;if(!g){g=us()|0;a[s>>2]=a[g>>2];a[s+4>>2]=e;en(3,4857,s);e=ds(a[g>>2]|0)|0;a[n>>2]=5367;a[n+4>>2]=e;en(3,5361,n);e=-1;break}Js(g,0,2)|0;e:do{if(!(Bs(g)|0)){n=ea(g)|0;ra(g);e=0;do{if((e|0)>=4){h=9;break}s=a[2012+(e<<3)+4>>2]|0;e=e+1|0}while(((n|0)%(s|0)|0|0)!=0);do{if((h|0)==9)if((e|0)==4){en(3,4971,c);e=-1;break e}else{s=a[2012+(0<<3)+4>>2]|0;e=0;break}}while(0);if((Ws(b,s,1,g)|0)!=1){e=us()|0;a[p>>2]=a[e>>2];en(3,5051,p);e=ds(a[e>>2]|0)|0;a[f>>2]=5367;a[f+4>>2]=e;en(3,5361,f);e=-1;break}c=b+176|0;a[c>>2]=e;_n(b);p=(e|0)==1;f=b+120|0;if(p){w=+u[f>>3];l=b+128|0;u[f>>3]=+u[l>>3];u[l>>3]=w}else l=b+128|0;Kc(i|0,b|0,184)|0;a[m>>2]=r;s=i+176|0;if((t|0)>1){o=1;while(1){r=(a[m>>2]|0)+(4-1)&~(4-1);n=a[r>>2]|0;a[m>>2]=r+4;a[n+176>>2]=a[s>>2];if((Ws(b,a[2012+((a[s>>2]|0)+-1<<3)+4>>2]|0,1,g)|0)!=1){e=-1;break e}a[c>>2]=e;_n(b);if(p){w=+u[f>>3];u[f>>3]=+u[l>>3];u[l>>3]=w}Kc(n|0,b|0,184)|0;o=o+1|0;if((o|0)>=(t|0)){e=0;break}}}else e=0}else{e=us()|0;a[o>>2]=a[e>>2];en(3,4926,o);e=ds(a[e>>2]|0)|0;a[l>>2]=5367;a[l+4>>2]=e;en(3,5361,l);e=-1}}while(0);Hs(g)|0}else e=-1}while(0);d=v;return e|0}function _n(e){e=e|0;var t=0,i=0,r=0,s=0,n=0;n=d;d=d+192|0;s=n;xn(e,s);xn(e+4|0,s+4|0);t=0;do{Sn(e+8+(t<<5)|0,s+8+(t<<5)|0);Sn(e+8+(t<<5)+8|0,s+8+(t<<5)+8|0);Sn(e+8+(t<<5)+16|0,s+8+(t<<5)+16|0);Sn(e+8+(t<<5)+24|0,s+8+(t<<5)+24|0);t=t+1|0}while((t|0)!=3);i=e+176|0;r=0;do{Sn(e+104+(r<<3)|0,s+104+(r<<3)|0);r=r+1|0;t=a[i>>2]|0}while((r|0)<(a[2012+(t+-1<<3)>>2]|0));a[s+176>>2]=t;Kc(e|0,s|0,184)|0;d=n;return}function Sn(e,t){e=e|0;t=t|0;r[t>>0]=r[e+7>>0]|0;r[t+1>>0]=r[e+6>>0]|0;r[t+2>>0]=r[e+5>>0]|0;r[t+3>>0]=r[e+4>>0]|0;r[t+4>>0]=r[e+3>>0]|0;r[t+5>>0]=r[e+2>>0]|0;r[t+6>>0]=r[e+1>>0]|0;r[t+7>>0]=r[e>>0]|0;return}function xn(e,t){e=e|0;t=t|0;r[t>>0]=r[e+3>>0]|0;r[t+1>>0]=r[e+2>>0]|0;r[t+2>>0]=r[e+1>>0]|0;r[t+3>>0]=r[e>>0]|0;return}function Cn(e,t){e=e|0;t=t|0;var i=0,r=0,s=0.0,n=0,o=0,l=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0;S=d;d=d+64|0;w=S+24|0;k=S+16|0;y=S+8|0;_=S;b=za(208)|0;if(!b){en(3,5472,S+32|0);kt(1)}Kc(b|0,e|0,184)|0;v=t<<1;g=(a[e>>2]|0)+v|0;a[b+192>>2]=g;v=(a[e+4>>2]|0)+v|0;a[b+196>>2]=v;a[b+200>>2]=t;a[b+204>>2]=t;i=ie(g<<3,v)|0;r=za(i)|0;a[b+184>>2]=r;if(!r){en(3,5472,S+40|0);kt(1)}i=za(i)|0;a[b+188>>2]=i;if(!i){en(3,5472,S+48|0);kt(1)}m=e+104|0;p=a[e+176>>2]|0;f=(g|0)>0?g<<1:0;if((v|0)>0){h=(g|0)>0;l=0;while(1){s=+(l-t|0);if(h){e=0;n=r;o=i;while(1){x=+(e-t|0);kn(m,x,s,y,_,p)|0;c[n>>2]=+u[y>>3];c[n+4>>2]=+u[_>>3];wn(m,x,s,w,k,p)|0;c[o>>2]=+u[w>>3];c[o+4>>2]=+u[k>>3];e=e+1|0;if((e|0)>=(g|0))break;else{n=n+8|0;o=o+8|0}}}i=i+(f<<2)|0;l=l+1|0;if((l|0)>=(v|0))break;else r=r+(f<<2)|0}}d=S;return b|0}function qn(e){e=e|0;var t=0;if((e|0)!=0?(t=a[e>>2]|0,(t|0)!=0):0){ja(a[t+184>>2]|0);ja(a[(a[e>>2]|0)+188>>2]|0);ja(a[e>>2]|0);a[e>>2]=0;t=0}else t=-1;return t|0}function Tn(e,t,i,r,s){e=e|0;t=+t;i=+i;r=r|0;s=s|0;var n=0,o=0,l=0;o=(a[e+16>>2]|0)+~~(t+.5)|0;n=(a[e+20>>2]|0)+~~(i+.5)|0;if(((o|0)>=0?(l=a[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(a[e+12>>2]|0):0){e=a[e>>2]|0;n=(ie(l,n)|0)+o<<1;a[r>>2]=a[e+(n<<2)>>2];a[s>>2]=a[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function En(e,t,i,r,s){e=e|0;t=+t;i=+i;r=r|0;s=s|0;var n=0,o=0,l=0;o=(a[e+16>>2]|0)+~~(t+.5)|0;n=(a[e+20>>2]|0)+~~(i+.5)|0;if(((o|0)>=0?(l=a[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(a[e+12>>2]|0):0){e=a[e+4>>2]|0;n=(ie(l,n)|0)+o<<1;a[r>>2]=a[e+(n<<2)>>2];a[s>>2]=a[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function An(e){e=e|0;var t=0,i=0;t=za(8)|0;do{if(t){i=za(e<<3)|0;a[t>>2]=i;if(!i){ja(t);t=0;break}else{a[t+4>>2]=e;break}}else t=0}while(0);return t|0}function Pn(e){e=e|0;ja(a[e>>2]|0);ja(e);return 0}function Mn(e){e=e|0;var t=0.0,i=0,r=0.0,s=0,n=0;t=+U(+ +In(e,e));if(t!=0.0){s=a[e>>2]|0;r=+u[s>>3];t=r<0.0?-t:t;r=r+t;u[s>>3]=r;r=1.0/+U(+(r*t));e=a[e+4>>2]|0;if((e|0)>0){i=0;do{n=s+(i<<3)|0;u[n>>3]=r*+u[n>>3];i=i+1|0}while((i|0)<(e|0))}}return+-t}function In(e,t){e=e|0;t=t|0;var i=0.0,r=0,s=0;s=a[e+4>>2]|0;if((s|0)!=(a[t+4>>2]|0))kt(0);if((s|0)>0){r=a[e>>2]|0;e=a[t>>2]|0;t=0;i=0.0;do{i=i+ +u[r+(t<<3)>>3]*+u[e+(t<<3)>>3];t=t+1|0}while((t|0)<(s|0))}else i=0.0;return+i}function Rn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0.0,l=0,c=0,p=0,f=0,h=0,m=0,b=0.0,g=0.0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P+8|0;A=P;_=a[e+8>>2]|0;if(((_|0)==(a[e+4>>2]|0)?(_|0)==(a[t+4>>2]|0):0)?(_|0)==((a[i+4>>2]|0)+1|0):0){C=_+-2|0;q=E+4|0;T=A+4|0;if((_|0)>2){v=_+-1|0;w=0;do{h=ie(w,_)|0;m=a[e>>2]|0;u[(a[t>>2]|0)+(w<<3)>>3]=+u[m+(h+w<<3)>>3];l=_-w+-1|0;a[q>>2]=l;k=w;w=w+1|0;c=m+(h+w<<3)|0;a[E>>2]=c;g=+Mn(E);u[(a[i>>2]|0)+(k<<3)>>3]=g;if(!(g==0.0)){if((w|0)<(_|0)){p=a[t>>2]|0;f=w;do{if((w|0)<(f|0)){r=a[e>>2]|0;s=w;o=0.0;do{g=+u[r+((ie(s,_)|0)+f<<3)>>3];o=o+g*+u[m+(s+h<<3)>>3];s=s+1|0}while((s|0)<(f|0))}else o=0.0;r=ie(f,_)|0;if((f|0)<(_|0)){s=a[e>>2]|0;n=f;do{o=o+ +u[s+(n+r<<3)>>3]*+u[m+(n+h<<3)>>3];n=n+1|0}while((n|0)<(_|0))}u[p+(f<<3)>>3]=o;f=f+1|0}while((f|0)<(_|0))}a[T>>2]=l;a[q>>2]=l;a[E>>2]=c;a[A>>2]=(a[t>>2]|0)+(w<<3);o=+In(E,A)*.5;if((v|0)>(k|0)){r=a[t>>2]|0;l=v;do{b=+u[m+(l+h<<3)>>3];s=r+(l<<3)|0;g=+u[s>>3]-o*b;u[s>>3]=g;s=ie(l,_)|0;if((l|0)<(_|0)){n=a[e>>2]|0;c=l;do{f=n+(c+s<<3)|0;u[f>>3]=+u[f>>3]-(b*+u[r+(c<<3)>>3]+g*+u[m+(c+h<<3)>>3]);c=c+1|0}while((c|0)<(_|0))}l=l+-1|0}while((l|0)>(k|0))}}}while((w|0)<(C|0))}if((_|0)<=1){if((_|0)>0){s=0;n=a[e>>2]|0;r=a[t>>2]|0;y=27}}else{y=ie(C,_)|0;n=a[e>>2]|0;r=a[t>>2]|0;u[r+(C<<3)>>3]=+u[n+(y+C<<3)>>3];s=_+-1|0;u[(a[i>>2]|0)+(C<<3)>>3]=+u[n+(s+y<<3)>>3];y=27}if((y|0)==27)u[r+(s<<3)>>3]=+u[n+((ie(s,_)|0)+s<<3)>>3];if((_|0)>0){p=(_|0)>0;m=_;do{i=m;m=m+-1|0;f=ie(m,_)|0;h=a[e>>2]|0;if((i|0)<=(C|0)?(S=_-m+-1|0,x=h+(f+i<<3)|0,(i|0)<(_|0)):0){r=(i|0)<(_|0);l=i;do{a[T>>2]=S;a[q>>2]=S;a[E>>2]=x;s=ie(l,_)|0;a[A>>2]=(a[e>>2]|0)+(s+i<<3);o=+In(E,A);if(r){n=a[e>>2]|0;c=i;do{y=n+(c+s<<3)|0;u[y>>3]=+u[y>>3]-o*+u[h+(c+f<<3)>>3];c=c+1|0}while((c|0)<(_|0))}l=l+1|0}while((l|0)<(_|0))}if(p){r=0;do{u[h+(r+f<<3)>>3]=0.0;r=r+1|0}while((r|0)<(_|0))}u[h+(f+m<<3)>>3]=1.0}while((i|0)>1);r=0}else r=0}else r=-1;d=P;return r|0}function On(e,t,i){e=e|0;t=t|0;i=i|0;var r=0.0,s=0.0,a=0.0,n=0.0,o=0.0;a=+u[i>>3];n=+u[i+8>>3];s=+u[i+16>>3];r=+u[t+88>>3]+(a*+u[t+64>>3]+n*+u[t+72>>3]+s*+u[t+80>>3]);if(r==0.0)i=-1;else{o=+u[t+56>>3]+(a*+u[t+32>>3]+n*+u[t+40>>3]+s*+u[t+48>>3]);u[e>>3]=(+u[t+24>>3]+(a*+u[t>>3]+n*+u[t+8>>3]+s*+u[t+16>>3]))/r;u[e+8>>3]=o/r;i=0}return i|0}function $n(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0.0,n=0.0,o=0.0,l=0.0,c=0.0,p=0.0,f=0.0,h=0.0,m=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0,T=0,E=0.0,A=0.0,P=0.0,M=0.0,I=0.0,R=0.0,O=0.0,$=0.0,F=0.0;T=d;d=d+1072|0;x=T+1056|0;S=T+768|0;_=T+192|0;q=T+48|0;C=T;F=+u[i>>3];M=+u[r>>3];v=F*M;$=+u[i+8>>3];w=r+8|0;P=+u[w>>3];y=$*P;o=+u[i+16>>3];I=+u[r+16>>3];c=o*I;p=+u[i+24>>3];O=+u[i+32>>3];R=+u[i+40>>3];f=P*R;l=+u[i+48>>3];h=I*l;m=+u[i+56>>3];A=+u[i+64>>3];E=+u[i+72>>3];b=P*E;s=+u[i+80>>3];g=I*s;n=+u[i+88>>3];u[S>>3]=v;u[S+8>>3]=F*P;u[S+16>>3]=F*I;u[S+24>>3]=M*$;u[S+32>>3]=y;u[S+40>>3]=I*$;u[S+48>>3]=M*o;u[S+56>>3]=P*o;u[S+64>>3]=c;u[S+72>>3]=F;u[S+80>>3]=$;u[S+88>>3]=o;o=M*O;u[S+96>>3]=o;u[S+104>>3]=P*O;u[S+112>>3]=I*O;u[S+120>>3]=M*R;u[S+128>>3]=f;u[S+136>>3]=I*R;u[S+144>>3]=M*l;u[S+152>>3]=P*l;u[S+160>>3]=h;u[S+168>>3]=O;u[S+176>>3]=R;u[S+184>>3]=l;l=A*M;u[S+192>>3]=l;u[S+200>>3]=P*A;u[S+208>>3]=I*A;u[S+216>>3]=M*E;P=+u[w>>3];u[S+224>>3]=E*P;u[S+232>>3]=I*E;u[S+240>>3]=M*s;u[S+248>>3]=P*s;u[S+256>>3]=g;u[S+264>>3]=A;u[S+272>>3]=E;u[S+280>>3]=s;r=_+64|0;i=_;w=i+64|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=-1.0;r=_+72|0;a[r>>2]=0;a[r+4>>2]=0;a[r+8>>2]=0;a[r+12>>2]=0;a[r+16>>2]=0;a[r+20>>2]=0;a[r+24>>2]=0;a[r+28>>2]=0;u[_+104>>3]=1.0;r=_+160|0;i=_+112|0;w=i+48|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=1.0;r=_+240|0;i=_+168|0;w=i+72|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=-1.0;r=_+296|0;i=_+248|0;w=i+48|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=-1.0;r=_+304|0;a[r>>2]=0;a[r+4>>2]=0;a[r+8>>2]=0;a[r+12>>2]=0;a[r+16>>2]=0;a[r+20>>2]=0;a[r+24>>2]=0;a[r+28>>2]=0;u[_+336>>3]=1.0;r=_+456|0;i=_+344|0;w=i+112|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=1.0;r=_+512|0;i=_+464|0;w=i+48|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=1.0;r=_+568|0;i=_+520|0;w=i+48|0;do{a[i>>2]=0;i=i+4|0}while((i|0)<(w|0));u[r>>3]=1.0;k=0;do{w=0;do{i=q+(k*48|0)+(w<<3)|0;u[i>>3]=0.0;s=0.0;r=0;do{s=s+ +u[S+(k*96|0)+(r<<3)>>3]*+u[_+(r*48|0)+(w<<3)>>3];r=r+1|0}while((r|0)!=12);u[i>>3]=s;w=w+1|0}while((w|0)!=6);k=k+1|0}while((k|0)!=3);$=p+(v+y+c);F=m+(o+f+h);s=n+(l+b+g);n=+u[t>>3];o=+u[t+8>>3];l=+u[t+16>>3];c=+u[t+24>>3]+($*n+F*o+s*l);p=+u[t+32>>3];f=+u[t+40>>3];h=+u[t+48>>3];m=+u[t+56>>3]+($*p+F*f+s*h);b=+u[t+64>>3];g=+u[t+72>>3];v=+u[t+80>>3];s=+u[t+88>>3]+($*b+F*g+s*v);if(s==0.0){en(3,5089,x);r=-1}else{F=s*s;u[C>>3]=(n*s-c*b)/F;u[C+8>>3]=(s*o-c*g)/F;u[C+16>>3]=(s*l-c*v)/F;u[C+24>>3]=(s*p-m*b)/F;u[C+32>>3]=(s*f-m*g)/F;u[C+40>>3]=(s*h-m*v)/F;i=0;do{s=+u[C+(i*24|0)>>3];n=+u[C+(i*24|0)+8>>3];o=+u[C+(i*24|0)+16>>3];r=0;do{x=e+(i*48|0)+(r<<3)|0;u[x>>3]=0.0;F=s*+u[q+(r<<3)>>3]+0.0;u[x>>3]=F;F=F+n*+u[q+48+(r<<3)>>3];u[x>>3]=F;u[x>>3]=F+o*+u[q+96+(r<<3)>>3];r=r+1|0}while((r|0)!=6);i=i+1|0}while((i|0)!=2);r=0}d=T;return r|0}function Fn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0,o=0,l=0;l=d;d=d+48|0;o=l+24|0;n=l+12|0;s=l;a[o+4>>2]=6;a[o+8>>2]=1;a[o>>2]=e;a[n+4>>2]=r;a[n+8>>2]=1;a[n>>2]=t;a[s+4>>2]=r;a[s+8>>2]=6;a[s>>2]=i;t=cn(s)|0;do{if(t){e=ln(t,s)|0;if(!e){dn(t)|0;i=-1;break}i=ln(t,n)|0;if(!i){dn(t)|0;dn(e)|0;i=-1;break}if((mn(e)|0)<0){dn(t)|0;dn(e)|0;dn(i)|0;i=-1;break}else{pn(o,e,i)|0;dn(t)|0;dn(e)|0;dn(i)|0;i=0;break}}else i=-1}while(0);d=l;return i|0}function Nn(e,t){e=e|0;t=t|0;var i=0.0,r=0.0,s=0.0,a=0,n=0.0,o=0.0,l=0.0,c=0,p=0,f=0,h=0.0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0;f=d;d=d+192|0;c=f+96|0;p=f;n=+u[t>>3];l=+u[t+8>>3];r=+u[t+16>>3];i=n*n+l*l+r*r;if(i==0.0){o=0.0;s=0.0;r=1.0;i=0.0}else{i=+U(+i);o=i;s=r/i;r=n/i;i=l/i}k=+u[t+24>>3];g=+u[t+32>>3];l=+u[t+40>>3];h=+Y(+o);n=1.0-h;o=+V(+o);u[c>>3]=h+r*r*n;w=i*r*n;v=s*o;u[c+8>>3]=w-v;b=r*s*n;m=i*o;u[c+16>>3]=b+m;u[c+24>>3]=k;u[c+32>>3]=w+v;u[c+40>>3]=h+i*i*n;i=i*s*n;o=r*o;u[c+48>>3]=i-o;u[c+56>>3]=g;u[c+64>>3]=b-m;u[c+72>>3]=i+o;u[c+80>>3]=h+s*s*n;u[c+88>>3]=l;a=0;do{i=+u[e+(a<<5)>>3];r=+u[e+(a<<5)+8>>3];s=+u[e+(a<<5)+16>>3];t=0;do{u[p+(a<<5)+(t<<3)>>3]=i*+u[c+(t<<3)>>3]+r*+u[c+32+(t<<3)>>3]+s*+u[c+64+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=p+(a<<5)+24|0;u[t>>3]=+u[e+(a<<5)+24>>3]+ +u[t>>3];a=a+1|0}while((a|0)!=3);t=0;do{u[e+(t<<5)>>3]=+u[p+(t<<5)>>3];u[e+(t<<5)+8>>3]=+u[p+(t<<5)+8>>3];u[e+(t<<5)+16>>3]=+u[p+(t<<5)+16>>3];u[e+(t<<5)+24>>3]=+u[p+(t<<5)+24>>3];t=t+1|0}while((t|0)!=3);d=f;return 0}function Dn(e){e=e|0;var t=0,i=0;t=za(136)|0;if(!t)t=0;else{i=0;do{u[t+(i<<5)>>3]=+u[e+(i<<5)>>3];u[t+(i<<5)+8>>3]=+u[e+(i<<5)+8>>3];u[t+(i<<5)+16>>3]=+u[e+(i<<5)+16>>3];u[t+(i<<5)+24>>3]=+u[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3);a[t+96>>2]=10;u[t+104>>3]=.10000000149011612;u[t+112>>3]=.9900000095367432;u[t+120>>3]=4.0;u[t+128>>3]=.5}return t|0}function Ln(e){e=e|0;var t=0;t=a[e>>2]|0;if(!t)t=-1;else{ja(t);a[e>>2]=0;t=0}return t|0}function zn(e,t){e=e|0;t=+t;if(!e)e=-1;else{u[e+128>>3]=t;e=0}return e|0}function jn(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0.0,l=0,c=0,p=0.0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0.0,q=0.0;x=d;d=d+176|0;c=x+168|0;l=x+160|0;k=x+48|0;_=x+64|0;y=x;v=t+8|0;n=a[v>>2]|0;do{if((n|0)>=3){S=za(n*96|0)|0;if(!S){en(3,5109,l);n=-1;break}w=za(n<<4)|0;if(!w){en(3,5109,c);ja(S);n=-1;break}else n=0;do{u[r+(n<<5)>>3]=+u[i+(n<<5)>>3];u[r+(n<<5)+8>>3]=+u[i+(n<<5)+8>>3];u[r+(n<<5)+16>>3]=+u[i+(n<<5)+16>>3];u[r+(n<<5)+24>>3]=+u[i+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);b=t+4|0;c=k+8|0;i=e+104|0;f=e+120|0;h=e+112|0;m=e+96|0;p=0.0;g=0;e:while(1){tn(e,r,_)|0;n=a[v>>2]|0;if((n|0)>0){o=0.0;l=0;do{if((On(k,_,(a[b>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}n=a[t>>2]|0;q=+u[n+(l<<4)>>3]-+u[k>>3];C=+u[n+(l<<4)+8>>3]-+u[c>>3];o=o+(q*q+C*C);n=l<<1;u[w+(n<<3)>>3]=q;u[w+((n|1)<<3)>>3]=C;l=l+1|0;n=a[v>>2]|0}while((l|0)<(n|0))}else o=0.0;o=o/+(n|0);if(o<+u[i>>3]){l=24;break}if(((g|0)>0?o<+u[f>>3]:0)?o/p>+u[h>>3]:0){l=24;break}if((g|0)==(a[m>>2]|0)){l=24;break}if((n|0)>0){l=0;do{if(($n(S+(l*12<<3)|0,e,r,(a[b>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0;n=a[v>>2]|0}while((l|0)<(n|0))}if((Fn(y,w,S,n<<1)|0)<0){l=22;break}Nn(r,y)|0;p=o;g=g+1|0}if((l|0)==10){Hn(S,w);n=-1;break}else if((l|0)==20){Hn(S,w);n=-1;break}else if((l|0)==22){Hn(S,w);n=-1;break}else if((l|0)==24){u[s>>3]=o;ja(S);ja(w);n=0;break}}else n=-1}while(0);d=x;return n|0}function Hn(e,t){e=e|0;t=t|0;ja(e);ja(t);return}function Bn(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0.0,l=0,c=0,p=0,f=0,h=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0;I=d;d=d+192|0;f=I+184|0;p=I+176|0;c=I+168|0;n=I+160|0;T=I+48|0;A=I+64|0;E=I;q=t+8|0;l=a[q>>2]|0;do{if((l|0)>=4){h=~~(+(l|0)*+u[e+128>>3])+-1|0;h=(h|0)<3?3:h;M=za(l*96|0)|0;if(!M){en(3,5109,n);n=-1;break}P=za(l<<4)|0;if(!P){en(3,5109,c);ja(M);n=-1;break}n=l<<3;C=za(n)|0;if(!C){en(3,5109,p);ja(M);ja(P);n=-1;break}x=za(n)|0;if(!x){en(3,5109,f);ja(M);ja(P);ja(C);n=-1;break}else n=0;do{u[r+(n<<5)>>3]=+u[i+(n<<5)>>3];u[r+(n<<5)+8>>3]=+u[i+(n<<5)+8>>3];u[r+(n<<5)+16>>3]=+u[i+(n<<5)+16>>3];u[r+(n<<5)+24>>3]=+u[i+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);_=t+4|0;S=T+8|0;f=x+(h<<3)|0;i=e+104|0;h=e+120|0;w=e+112|0;k=e+96|0;g=0.0;y=0;e:while(1){tn(e,r,A)|0;n=a[q>>2]|0;if((n|0)>0){l=0;do{if((On(T,A,(a[_>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}n=a[t>>2]|0;b=+u[n+(l<<4)>>3]-+u[T>>3];v=+u[n+(l<<4)+8>>3]-+u[S>>3];n=l<<1;u[P+(n<<3)>>3]=b;u[P+((n|1)<<3)>>3]=v;v=b*b+v*v;u[x+(l<<3)>>3]=v;u[C+(l<<3)>>3]=v;l=l+1|0;n=a[q>>2]|0}while((l|0)<(n|0))}da(x,n,8,1);v=+u[f>>3]*4.0;v=v<16.0?16.0:v;l=a[q>>2]|0;b=v/6.0;if((l|0)>0){o=0.0;n=0;do{m=+u[x+(n<<3)>>3];if(m>v)m=b;else{m=1.0-m/v;m=b*(1.0-m*(m*m))}o=o+m;n=n+1|0}while((n|0)<(l|0))}else o=0.0;o=o/+(l|0);if(o<+u[i>>3]){l=36;break}if(((y|0)>0?o<+u[h>>3]:0)?o/g>+u[w>>3]:0){l=36;break}if((y|0)==(a[k>>2]|0)){l=36;break}if((l|0)>0){p=0;n=0;do{m=+u[C+(p<<3)>>3];if(m<=v){l=n*6|0;c=M+(l<<3)|0;if(($n(c,e,r,(a[_>>2]|0)+(p*24|0)|0)|0)<0){l=28;break e}g=1.0-m/v;g=g*g;u[c>>3]=+u[c>>3]*g;c=M+((l|1)<<3)|0;u[c>>3]=+u[c>>3]*g;c=M+(l+2<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+3<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+4<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+5<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+6<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+7<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+8<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+9<<3)|0;u[c>>3]=g*+u[c>>3];c=M+(l+10<<3)|0;u[c>>3]=g*+u[c>>3];l=M+(l+11<<3)|0;u[l>>3]=g*+u[l>>3];l=p<<1;u[P+(n<<3)>>3]=g*+u[P+(l<<3)>>3];u[P+(n+1<<3)>>3]=g*+u[P+((l|1)<<3)>>3];l=a[q>>2]|0;n=n+2|0}p=p+1|0}while((p|0)<(l|0))}else n=0;if((n|0)<6){l=32;break}if((Fn(E,P,M,n)|0)<0){l=34;break}Nn(r,E)|0;g=o;y=y+1|0}if((l|0)==14){Un(M,P,C,x);n=-1;break}else if((l|0)==28){Un(M,P,C,x);n=-1;break}else if((l|0)==32){Un(M,P,C,x);n=-1;break}else if((l|0)==34){Un(M,P,C,x);n=-1;break}else if((l|0)==36){u[s>>3]=o;ja(M);ja(P);ja(C);ja(x);n=0;break}}else n=-1}while(0);d=I;return n|0}function Un(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;ja(e);ja(t);ja(i);ja(r);return}function Qn(e,t){e=e|0;t=t|0;var i=0.0;i=+u[e>>3]-+u[t>>3];return(i<0.0?-1:i>0.0&1)|0}function Yn(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0.0,l=0.0,c=0,p=0.0,f=0.0,h=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0,y=0.0,_=0,S=0,x=0,C=0,q=0.0,T=0,E=0,A=0,P=0.0,M=0.0,I=0.0,R=0.0,O=0.0,$=0.0,F=0.0,N=0.0,D=0.0,L=0.0,z=0.0,j=0.0,H=0.0,B=0.0,Q=0.0,Y=0,V=0,W=0,G=0,K=0,J=0;Y=d;d=d+64|0;A=Y+48|0;C=Y+40|0;x=Y+32|0;S=Y+24|0;k=Y+16|0;h=Y+8|0;c=Y;e:do{if((r|0)>=4){n=0;while(1){if((n|0)>=(r|0))break;if(+u[i+(n*24|0)+16>>3]!=0.0){n=-1;break e}else n=n+1|0}if((((((((!(+u[e>>3]==0.0)?!(+u[e+32>>3]!=0.0):0)?(T=e+40|0,!(+u[T>>3]==0.0)):0)?!(+u[e+64>>3]!=0.0):0)?!(+u[e+72>>3]!=0.0):0)?!(+u[e+80>>3]!=1.0):0)?!(+u[e+24>>3]!=0.0):0)?!(+u[e+56>>3]!=0.0):0)?!(+u[e+88>>3]!=0.0):0){n=r<<1;E=nn(n,8)|0;if(!E){en(3,5124,c);n=-1;break}_=nn(n,1)|0;if(!_){dn(E)|0;en(3,5150,h);n=-1;break}if(r){n=a[E>>2]|0;c=a[_>>2]|0;h=0;do{J=i+(h*24|0)|0;V=h<<4;u[n+(V<<3)>>3]=+u[J>>3];K=i+(h*24|0)+8|0;u[n+((V|1)<<3)>>3]=+u[K>>3];u[n+((V|2)<<3)>>3]=1.0;u[n+((V|3)<<3)>>3]=0.0;u[n+((V|4)<<3)>>3]=0.0;u[n+((V|5)<<3)>>3]=0.0;G=t+(h<<4)|0;u[n+((V|6)<<3)>>3]=-(+u[J>>3]*+u[G>>3]);u[n+((V|7)<<3)>>3]=-(+u[K>>3]*+u[G>>3]);u[n+((V|8)<<3)>>3]=0.0;u[n+((V|9)<<3)>>3]=0.0;u[n+((V|10)<<3)>>3]=0.0;u[n+((V|11)<<3)>>3]=+u[J>>3];u[n+((V|12)<<3)>>3]=+u[K>>3];u[n+((V|13)<<3)>>3]=1.0;W=t+(h<<4)+8|0;u[n+((V|14)<<3)>>3]=-(+u[J>>3]*+u[W>>3]);u[n+((V|15)<<3)>>3]=-(+u[K>>3]*+u[W>>3]);V=h<<1;u[c+(V<<3)>>3]=+u[G>>3];u[c+((V|1)<<3)>>3]=+u[W>>3];h=h+1|0}while((h|0)!=(r|0))}r=cn(E)|0;if(!r){dn(E)|0;dn(_)|0;en(3,5176,k);n=-1;break}h=ln(r,E)|0;if(!h){dn(E)|0;dn(_)|0;dn(r)|0;en(3,5202,S);n=-1;break}c=ln(r,_)|0;if(!c){dn(E)|0;dn(_)|0;dn(r)|0;dn(h)|0;en(3,5228,x);n=-1;break}if((mn(h)|0)<0){dn(E)|0;dn(_)|0;dn(r)|0;dn(h)|0;dn(c)|0;en(3,5254,C);n=-1;break}n=ln(h,c)|0;if(!n){dn(E)|0;dn(_)|0;dn(r)|0;dn(h)|0;dn(c)|0;en(3,5280,A);n=-1;break}J=a[n>>2]|0;m=+u[J+48>>3];B=+u[e+48>>3];w=+u[T>>3];o=(+u[J+24>>3]-m*B)/w;v=+u[e+16>>3];Q=+u[e+8>>3];g=+u[e>>3];b=(+u[J>>3]-m*v-o*Q)/g;l=+u[J+56>>3];p=(+u[J+32>>3]-B*l)/w;f=(+u[J+8>>3]-v*l-Q*p)/g;w=(+u[J+40>>3]-B)/w;g=(+u[J+16>>3]-v-Q*w)/g;dn(E)|0;dn(_)|0;dn(r)|0;dn(h)|0;dn(c)|0;dn(n)|0;Q=+U(+(m*m+(o*o+b*b)));v=+U(+(l*l+(p*p+f*f)));b=b/Q;o=o/Q;m=m/Q;f=f/v;p=p/v;l=l/v;v=(Q+v)*.5;g=g/v;Q=1.0/v;if(Q<0.0){z=-o;l=-l;p=-p;m=-m;f=-f;j=-b;B=-g;H=-Q}else{z=o;j=b;B=g;H=w/v}o=l*z-p*m;b=f*m-l*j;g=p*j-f*z;v=+U(+(g*g+(o*o+b*b)));do{if(!(v==0.0)){w=o/v;b=b/v;o=g/v;L=l*m+(p*z+f*j);L=L<0.0?-L:L;L=(+U(+(L+1.0))+ +U(+(1.0-L)))*.5;if(j*b-z*w!=0.0){n=0;P=j;y=z;M=m;O=w;R=b}else{J=j*o-m*w!=0.0;n=J?1:2;P=J?j:m;y=J?m:z;M=J?z:j;O=J?w:o;R=J?o:b;o=J?b:w}g=P*R;v=y*O;b=g-v;if(b==0.0){b=z;o=j;break}I=(y*o-M*R)/b;q=L*R/b;g=v-g;b=(P*o-M*O)/g;g=L*O/g;v=I*I+b*b+1.0;w=I*q+b*g;y=w*w-v*(q*q+g*g+-1.0);if(y<0.0){b=z;o=j;break}D=+U(+y);N=(D-w)/v;M=q+I*N;F=g+b*N;D=(-w-D)/v;I=q+I*D;g=g+b*D;J=(n|0)==1;b=J?R:o;v=J?o:R;$=J?N:F;N=J?F:N;F=J?D:g;R=J?g:D;J=(n|0)==2&(J^1);g=J?O:b;b=J?b:O;D=J?N:M;N=J?M:N;o=J?R:I;O=J?I:R;if(f*v-p*b!=0.0){n=0;P=f;y=p;M=l;R=b;q=v}else{J=f*g-l*b!=0.0;n=J?1:2;P=J?f:l;y=J?l:p;M=J?p:f;R=J?b:g;q=J?g:v;g=J?v:b}v=P*q;w=y*R;b=v-w;if(b==0.0){b=z;o=j;break}I=(y*g-M*q)/b;q=L*q/b;b=w-v;y=(P*g-M*R)/b;b=L*R/b;g=I*I+y*y+1.0;v=I*q+y*b;w=v*v-g*(q*q+b*b+-1.0);if(w<0.0){b=z;o=j;break}w=+U(+w);l=(w-v)/g;j=q+I*l;z=b+y*l;w=(-v-w)/g;m=q+I*w;f=b+y*w;J=(n|0)==1;p=J?l:z;l=J?z:l;y=J?w:f;w=J?f:w;J=(n|0)==2&(J^1);f=J?l:j;l=J?j:l;q=J?w:m;w=J?m:w;m=N*l+($*p+D*f);m=m<0.0?-m:m;b=N*w+($*y+D*q);b=b<0.0?-b:b;g=O*l+(F*p+o*f);g=g<0.0?-g:g;v=O*w+(F*y+o*q);v=v<0.0?-v:v;if(m<b)if(m<g){if(m<v){b=$;m=N;o=D;break}b=F;l=w;p=y;m=O;f=q;break}else{if(g<v){b=F;m=O;break}b=F;l=w;p=y;m=O;f=q;break}else if(b<g){if(b<v){b=$;l=w;p=y;m=N;f=q;o=D;break}b=F;l=w;p=y;m=O;f=q;break}else{if(g<v){b=F;m=O;break}b=F;l=w;p=y;m=O;f=q;break}}else{b=z;o=j}}while(0);D=l*b-p*m;L=f*m-l*o;z=p*o-f*b;j=+U(+(z*z+(D*D+L*L)));u[s>>3]=o;u[s+32>>3]=b;u[s+64>>3]=m;u[s+8>>3]=f;u[s+40>>3]=p;u[s+72>>3]=l;u[s+16>>3]=D/j;u[s+48>>3]=L/j;u[s+80>>3]=z/j;u[s+24>>3]=B;u[s+56>>3]=H;u[s+88>>3]=Q;n=0}else n=-1}else n=-1}while(0);d=Y;return n|0}function Vn(e){e=e|0;ja(a[e>>2]|0);ja(e);return 0}function Wn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return+ +Kn(e,t,i,r,0)}function Gn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return+ +Kn(e,t,i,r,1)}function Kn(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0.0,o=0,l=0,c=0,p=0,f=0.0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+208|0;C=M+200|0;x=M+192|0;q=M+96|0;T=M;E=r+4|0;m=a[E>>2]|0;b=r+112|0;g=r+120|0;if((m|0)>0){k=a[r>>2]|0;y=(i|0)>0;_=(i|0)>0;S=0;do{if(!(a[k+(S*320|0)+4>>2]|0)){if(y){l=a[k+(S*320|0)>>2]|0;c=0;o=-1;do{if((a[t+(c<<8)+8>>2]|0)==(l|0)?(f=+u[t+(c<<8)+40>>3],!(f<+u[b>>3])):0)if(!((o|0)!=-1?!(+u[t+(o<<8)+40>>3]<f):0))o=c;c=c+1|0}while((c|0)<(i|0))}else o=-1;a[k+(S*320|0)+304>>2]=o;if((o|0)>-1)a[t+(o<<8)+16>>2]=a[t+(o<<8)+20>>2]}else{c=k+(S*320|0)+312|0;p=k+(S*320|0)|0;if(_){h=0;o=-1;do{l=a[t+(h<<8)+12>>2]|0;if((l|0)==0?(w=t+(h<<8)+248|0,v=a[w>>2]|0,w=a[w+4>>2]|0,!((v|0)==0&(w|0)==0)):0){l=c;if((v|0)==(a[l>>2]|0)?(w|0)==(a[l+4>>2]|0):0)P=20}else if((l|0)==(a[p>>2]|0))P=20;if((P|0)==20){P=0;n=+u[t+(h<<8)+48>>3];if(!(n<+u[g>>3]))if(!((o|0)!=-1?!(+u[t+(o<<8)+48>>3]<n):0))o=h}h=h+1|0}while((h|0)<(i|0))}else o=-1;a[k+(S*320|0)+304>>2]=o;if((o|0)>-1)a[t+(o<<8)+16>>2]=a[t+(o<<8)+24>>2]}S=S+1|0}while((S|0)<(m|0))}if((m|0)>0){b=0;o=0;m=0;l=0;while(1){c=a[r>>2]|0;p=a[c+(b*320|0)+304>>2]|0;do{if((p|0)<0)c=m;else{h=t+(p<<8)|0;if(+kc(e,h,+u[c+(b*320|0)+8>>3],T)>4.0){a[(a[r>>2]|0)+(b*320|0)+304>>2]=-1;c=t+(p<<8)+236|0;if(a[c>>2]|0){c=m;break}a[c>>2]=7;c=m;break}c=a[h>>2]|0;if((l|0)==0|(m|0)<(c|0)){o=0;do{u[q+(o<<5)>>3]=+u[T+(o<<5)>>3];u[q+(o<<5)+8>>3]=+u[T+(o<<5)+8>>3];u[q+(o<<5)+16>>3]=+u[T+(o<<5)+16>>3];u[q+(o<<5)+24>>3]=+u[T+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);o=b}else c=m;l=l+1|0}}while(0);b=b+1|0;if((b|0)>=(a[E>>2]|0))break;else m=c}}else{o=0;l=0}do{if((l|0)!=0?(l|0)>=(a[r+128>>2]|0):0){tn(q,(a[r>>2]|0)+(o*320|0)+112|0,T)|0;m=l<<2;g=za(l<<6)|0;if(!g){en(3,5472,x);kt(1)}b=za(l*96|0)|0;if(!b){en(3,5472,C);kt(1)}c=a[E>>2]|0;if((c|0)>0){p=a[r>>2]|0;h=0;o=0;do{l=a[p+(h*320|0)+304>>2]|0;if((l|0)>=0){x=a[t+(l<<8)+16>>2]|0;i=(4-x|0)%4|0;C=o<<3;u[g+(C<<3)>>3]=+u[t+(l<<8)+168+(i<<4)>>3];u[g+((C|1)<<3)>>3]=+u[t+(l<<8)+168+(i<<4)+8>>3];i=(5-x|0)%4|0;u[g+((C|2)<<3)>>3]=+u[t+(l<<8)+168+(i<<4)>>3];u[g+((C|3)<<3)>>3]=+u[t+(l<<8)+168+(i<<4)+8>>3];i=(6-x|0)%4|0;u[g+((C|4)<<3)>>3]=+u[t+(l<<8)+168+(i<<4)>>3];u[g+((C|5)<<3)>>3]=+u[t+(l<<8)+168+(i<<4)+8>>3];x=(7-x|0)%4|0;u[g+((C|6)<<3)>>3]=+u[t+(l<<8)+168+(x<<4)>>3];u[g+((C|7)<<3)>>3]=+u[t+(l<<8)+168+(x<<4)+8>>3];C=o*12|0;u[b+(C<<3)>>3]=+u[p+(h*320|0)+208>>3];u[b+((C|1)<<3)>>3]=+u[p+(h*320|0)+216>>3];u[b+((C|2)<<3)>>3]=+u[p+(h*320|0)+224>>3];u[b+((C|3)<<3)>>3]=+u[p+(h*320|0)+232>>3];u[b+(C+4<<3)>>3]=+u[p+(h*320|0)+240>>3];u[b+(C+5<<3)>>3]=+u[p+(h*320|0)+248>>3];u[b+(C+6<<3)>>3]=+u[p+(h*320|0)+256>>3];u[b+(C+7<<3)>>3]=+u[p+(h*320|0)+264>>3];u[b+(C+8<<3)>>3]=+u[p+(h*320|0)+272>>3];u[b+(C+9<<3)>>3]=+u[p+(h*320|0)+280>>3];x=a[r>>2]|0;u[b+(C+10<<3)>>3]=+u[x+(h*320|0)+288>>3];u[b+(C+11<<3)>>3]=+u[x+(h*320|0)+296>>3];o=o+1|0}h=h+1|0}while((h|0)<(c|0))}p=r+104|0;l=(s|0)!=0;if(!(a[p>>2]|0)){o=r+8|0;n=+_c(e,T,g,b,m,o);if(l&n>=20.0){zn(a[e>>2]|0,.8)|0;n=+Sc(e,T,g,b,m,o);if(n>=20.0){zn(a[e>>2]|0,.6)|0;n=+Sc(e,T,g,b,m,o);if(n>=20.0){zn(a[e>>2]|0,.4)|0;n=+Sc(e,T,g,b,m,o);if(n>=20.0){zn(a[e>>2]|0,0.0)|0;n=+Sc(e,T,g,b,m,o)}}}}ja(b);ja(g)}else{n=+_c(e,T,g,b,m,q);c=r+8|0;f=+_c(e,c,g,b,m,c);o=n<f;do{if(l){if(o){o=0;do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){zn(a[e>>2]|0,.8)|0;n=+Sc(e,T,g,b,m,q);f=+Sc(e,c,g,b,m,c);if(n<f){o=0;do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){zn(a[e>>2]|0,.6)|0;n=+Sc(e,T,g,b,m,q);f=+Sc(e,c,g,b,m,c);if(n<f){o=0;do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){zn(a[e>>2]|0,.4)|0;n=+Sc(e,T,g,b,m,q);f=+Sc(e,c,g,b,m,c);if(n<f){o=0;do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f;if(n>=20.0){zn(a[e>>2]|0,0.0)|0;n=+Sc(e,T,g,b,m,q);f=+Sc(e,c,g,b,m,c);if(n<f)o=0;else{n=f;break}do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}}}}}else if(o){o=0;do{u[r+8+(o<<5)>>3]=+u[q+(o<<5)>>3];u[r+8+(o<<5)+8>>3]=+u[q+(o<<5)+8>>3];u[r+8+(o<<5)+16>>3]=+u[q+(o<<5)+16>>3];u[r+8+(o<<5)+24>>3]=+u[q+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=f}while(0);ja(b);ja(g)}if(n<20.0){a[p>>2]=1;break}a[p>>2]=0;p=a[E>>2]|0;if((p|0)>0){o=a[r>>2]|0;c=0;do{l=a[o+(c*320|0)+304>>2]|0;if((l|0)>=0?(A=t+(l<<8)+236|0,(a[A>>2]|0)==0):0)a[A>>2]=8;c=c+1|0}while((c|0)<(p|0))}}else P=38}while(0);if((P|0)==38){a[r+104>>2]=0;n=-1.0}d=M;return+n}function Jn(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0,D=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,Y=0,V=0.0,W=0.0;Y=d;d=d+2544|0;U=Y+208|0;B=Y+200|0;I=Y+184|0;H=Y+176|0;M=Y+168|0;P=Y+152|0;j=Y+144|0;A=Y+136|0;D=Y+128|0;N=Y+120|0;F=Y+112|0;E=Y+104|0;o=Y+96|0;n=Y+88|0;s=Y+80|0;r=Y+72|0;i=Y+64|0;R=Y;O=Y+2280|0;$=Y+232|0;C=Y+224|0;z=Y+220|0;q=Y+216|0;T=Y+212|0;Q=Ys(e,5306)|0;e:do{if(!Q){a[i>>2]=e;en(3,5308,i);i=ds(a[(us()|0)>>2]|0)|0;a[r>>2]=5367;a[r+4>>2]=i;en(3,5361,r);i=0}else{Xn(O,Q);a[s>>2]=z;if((sa(O,5368,s)|0)!=1){a[n>>2]=e;en(3,5371,n);Hs(Q)|0;i=0;break}i=a[z>>2]|0;L=za(i*320|0)|0;if(!L){en(3,5472,o);kt(1)}g=R+8|0;v=R+16|0;w=R+24|0;k=R+32|0;y=R+40|0;_=R+48|0;S=R+56|0;x=(t|0)==0;t:do{if((i|0)>0){i=0;s=0;i:while(1){Xn(O,Q);r=L+(i*320|0)|0;n=L+(i*320|0)+312|0;a[E>>2]=n;a[E+4>>2]=C;if((sa(O,5489,E)|0)==1){b=a[n>>2]|0;a[r>>2]=(b&-32768|0)==0&0==0?b&32767:0;a[L+(i*320|0)+4>>2]=1;s=s|2}else{if(x){r=10;break}if(!(an($,e,2048,1)|0)){r=12;break}_a($,O,2047-(ya($)|0)|0)|0;b=Xa(t,$)|0;a[r>>2]=b;if((b|0)<0){r=14;break}a[L+(i*320|0)+4>>2]=0;s=s|1}Xn(O,Q);r=L+(i*320|0)+8|0;a[A>>2]=r;if((sa(O,5785,A)|0)!=1){r=18;break}Xn(O,Q);h=L+(i*320|0)+16|0;m=L+(i*320|0)+24|0;b=L+(i*320|0)+40|0;a[P>>2]=h;a[P+4>>2]=m;a[P+8>>2]=L+(i*320|0)+32;a[P+12>>2]=b;if((sa(O,5894,P)|0)!=4){a[M>>2]=q;a[M+4>>2]=T;if((sa(O,5910,M)|0)==2)n=0;else{r=21;break}}else n=1;do{Xn(O,Q);a[I>>2]=L+(i*320|0)+16+(n<<5);a[I+4>>2]=L+(i*320|0)+16+(n<<5)+8;a[I+8>>2]=L+(i*320|0)+16+(n<<5)+16;a[I+12>>2]=L+(i*320|0)+16+(n<<5)+24;if((sa(O,5894,I)|0)!=4){r=23;break i}n=n+1|0}while((n|0)<3);rn(h,L+(i*320|0)+112|0)|0;W=+u[r>>3];V=W*-.5;u[R>>3]=V;W=W*.5;u[g>>3]=W;u[v>>3]=W;u[w>>3]=W;u[k>>3]=W;u[y>>3]=V;u[_>>3]=V;u[S>>3]=V;r=L+(i*320|0)+48|0;n=L+(i*320|0)+56|0;o=L+(i*320|0)+72|0;l=L+(i*320|0)+80|0;c=L+(i*320|0)+88|0;p=L+(i*320|0)+104|0;f=0;do{V=+u[R+(f<<4)>>3];W=+u[R+(f<<4)+8>>3];u[L+(i*320|0)+208+(f*24|0)>>3]=+u[b>>3]+(+u[h>>3]*V+ +u[m>>3]*W);u[L+(i*320|0)+208+(f*24|0)+8>>3]=+u[o>>3]+(+u[r>>3]*V+ +u[n>>3]*W);u[L+(i*320|0)+208+(f*24|0)+16>>3]=+u[p>>3]+(+u[l>>3]*V+ +u[c>>3]*W);f=f+1|0}while((f|0)!=4);i=i+1|0;if((i|0)>=(a[z>>2]|0))break t}if((r|0)==10){a[F>>2]=e;a[F+4>>2]=O;en(3,5496,F)}else if((r|0)==12){a[N>>2]=e;en(3,5624,N)}else if((r|0)==14){a[D>>2]=e;a[D+4>>2]=$;en(3,5708,D)}else if((r|0)==18){a[j>>2]=e;a[j+4>>2]=i+1;en(3,5789,j)}else if((r|0)==21){a[H>>2]=e;a[H+4>>2]=i+1;en(3,5916,H)}else if((r|0)==23){a[B>>2]=e;a[B+4>>2]=i+1;en(3,5916,B)}Hs(Q)|0;ja(L);i=0;break e}else s=0}while(0);Hs(Q)|0;i=za(136)|0;if(!i){en(3,5472,U);kt(1)}a[i>>2]=L;a[i+4>>2]=a[z>>2];a[i+104>>2]=0;do{if((s&3|0)!=3){r=i+108|0;if(!(s&1)){a[r>>2]=1;break}else{a[r>>2]=0;break}}else a[i+108>>2]=2}while(0);u[i+112>>3]=.5;u[i+120>>3]=.5}}while(0);d=Y;return i|0}function Xn(e,t){e=e|0;t=t|0;var i=0,s=0;e:do{if(Qs(e,256,t)|0)while(1){i=ya(e)|0;t:do{if(i)while(1){i=i+-1|0;s=e+i|0;switch(r[s>>0]|0){case 13:case 10:break;default:break t}r[s>>0]=0;if(!i)break t}}while(0);switch(r[e>>0]|0){case 0:case 35:break;default:break e}if(!(Qs(e,256,t)|0))break e}}while(0);return}function Zn(e,t,i,r){e=e|0;t=+t;i=+i;r=r|0;var s=0,n=0.0,o=0.0,l=0,c=0.0,p=0.0,f=0,h=0,m=0,b=0,g=0;g=d;d=d+400|0;f=g+296|0;b=g+200|0;h=g+128|0;m=g;l=a[e>>2]|0;s=a[e+4>>2]|0;if((vn(e+8|0,f,b)|0)<0)en(3,6025,g+392|0);else{o=+(s+-1|0);s=f+32|0;u[s>>3]=o*+u[f+64>>3]-+u[s>>3];s=f+40|0;u[s>>3]=o*+u[f+72>>3]-+u[s>>3];s=f+48|0;u[s>>3]=o*+u[f+80>>3]-+u[s>>3];s=f+56|0;u[s>>3]=o*+u[f+88>>3]-+u[s>>3];n=+u[f+80>>3];s=0;do{u[h+(s*24|0)>>3]=+u[f+(s<<5)>>3]/n;u[h+(s*24|0)+8>>3]=+u[f+(s<<5)+8>>3]/n;u[h+(s*24|0)+16>>3]=+u[f+(s<<5)+16>>3]/n;s=s+1|0}while((s|0)!=3);n=+(l+-1|0);u[m>>3]=+u[h>>3]*2.0/n;u[m+8>>3]=+u[h+8>>3]*2.0/n;u[m+16>>3]=+u[h+16>>3]*2.0/n+-1.0;l=m+24|0;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;u[m+40>>3]=+u[h+32>>3]*2.0/o;u[m+48>>3]=+u[h+40>>3]*2.0/o+-1.0;l=m+56|0;n=i-t;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;a[l+16>>2]=0;a[l+20>>2]=0;u[m+80>>3]=(t+i)/n;u[m+88>>3]=i*-2.0*t/n;l=m+96|0;a[l>>2]=0;a[l+4>>2]=0;a[l+8>>2]=0;a[l+12>>2]=0;u[m+112>>3]=1.0;u[m+120>>3]=0.0;n=+u[b+24>>3];o=+u[b+56>>3];i=+u[b+88>>3];l=0;do{t=+u[m+(l<<5)>>3];s=m+(l<<5)+8|0;e=m+(l<<5)+16|0;c=+u[s>>3];p=+u[e>>3];f=0;do{u[r+((f<<2)+l<<3)>>3]=t*+u[b+(f<<3)>>3]+c*+u[b+32+(f<<3)>>3]+p*+u[b+64+(f<<3)>>3];f=f+1|0}while((f|0)!=3);u[r+(l+12<<3)>>3]=+u[m+(l<<5)+24>>3]+(t*n+ +u[s>>3]*o+ +u[e>>3]*i);l=l+1|0}while((l|0)!=4)}d=g;return}function eo(e){e=e|0;a[496]=e;return}function to(){return a[496]|0}function io(e){e=e|0;var t=0,i=0;t=e+212|0;i=a[t>>2]|0;if(i){$c(i)|0;Xl(a[t>>2]|0)|0;a[t>>2]=0}t=e+224|0;if(a[t>>2]|0){Vl(t)|0;a[t>>2]=0}t=e+192|0;if(a[t>>2]|0){qn(t)|0;a[t>>2]=0}return}function ro(e){e=e|0;var t=0,i=0,r=0,s=0,n=0;n=d;d=d+16|0;i=n;a[i>>2]=e;if(!(Qo(2044,i)|0))e=-1;else{s=Yo(2044,i)|0;e=s+196|0;t=a[e>>2]|0;if(t){ja(t);a[e>>2]=0;a[s+200>>2]=0}io(s);Dc(a[s+216>>2]|0)|0;Vo(2044,i)|0;i=s+248|0;r=s+252|0;e=a[i>>2]|0;if((a[r>>2]|0)!=(e|0)){t=0;do{Vn(a[e+(t<<3)+4>>2]|0)|0;t=t+1|0;e=a[i>>2]|0}while(t>>>0<(a[r>>2]|0)-e>>3>>>0)}Wo(i);Mr(i);Wo(s+248|0);Mr(s);e=0}d=n;return e|0}function so(e){e=e|0;var t=0,i=0,s=0,n=0,o=0;o=d;d=d+208|0;n=o+192|0;s=o;i=o+196|0;if(!(r[e>>0]&1))t=e+1|0;else t=a[e+8>>2]|0;if((yn(t,1,s,o+184|0)|0)<0){if(!(r[e>>0]&1))t=e+1|0;else t=a[e+8>>2]|0;a[n>>2]=t;en(3,6093,n);t=-1}else{t=a[521]|0;a[521]=t+1;a[i>>2]=t;Kc(Go(2064,i)|0,s|0,184)|0}d=o;return t|0}function ao(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,p=0,f=0;f=d;d=d+48|0;p=f+24|0;c=f+16|0;o=f+8|0;s=f;i=f+32|0;r=f+28|0;a[i>>2]=e;a[r>>2]=t;do{if((Qo(2044,i)|0)!=0?(l=Yo(2044,i)|0,(Ko(2064,r)|0)!=0):0){n=l+8|0;Kc(n|0,Go(2064,r)|0,184)|0;r=a[n>>2]|0;i=l+204|0;t=a[l+12>>2]|0;e=l+208|0;if(!((r|0)==(a[i>>2]|0)?(t|0)==(a[e>>2]|0):0)){a[s>>2]=r;a[s+4>>2]=t;en(2,6152,s);gn(n,a[i>>2]|0,a[e>>2]|0,n)|0}io(l);i=Cn(n,15)|0;e=l+192|0;a[e>>2]=i;if(!i){en(3,6199,o);i=-1;break}i=Wl(i)|0;t=l+212|0;a[t>>2]=i;if(!i){en(3,6237,c);i=-1;break}Gl(i,2)|0;c=Ql(n)|0;a[l+224>>2]=c;if(!c){en(3,6274,p);i=-1;break}else{Oc(a[t>>2]|0,a[l+216>>2]|0)|0;Zn(a[e>>2]|0,+u[l+232>>3],+u[l+240>>3],l+264|0);i=0;break}}else i=-1}while(0);d=f;return i|0}function no(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;n=l;i=l+12|0;a[i>>2]=e;if(Qo(2044,i)|0){s=Yo(2044,i)|0;if(!(r[t>>0]&1))t=t+1|0;else t=a[t+8>>2]|0;e=s+216|0;i=Xa(a[e>>2]|0,t)|0;a[s+260>>2]=i;if((i|0)<0){a[n>>2]=t;en(3,6312,n);Dc(a[e>>2]|0)|0;en(3,6358,o);i=-1}}else i=-1;d=l;return i|0}function oo(e,t){e=e|0;t=t|0;var i=0,s=0,n=0,o=0,l=0,c=0,u=0;u=d;d=d+32|0;n=u+16|0;s=u+8|0;i=u+20|0;c=u;a[i>>2]=e;do{if(Qo(2044,i)|0){l=Yo(2044,i)|0;if(!(r[t>>0]&1))i=t+1|0;else i=a[t+8>>2]|0;e=a[l+212>>2]|0;t=l+216|0;o=l+220|0;i=Jn(i,a[t>>2]|0)|0;a[o>>2]=i;if(!i){en(3,6402,s);Dc(a[t>>2]|0)|0;en(3,6429,n);i=-1;break}switch(a[i+108>>2]|0){case 0:{oc(e,0)|0;break}case 1:{oc(e,2)|0;break}default:oc(e,3)|0}e=l+248|0;t=l+252|0;s=a[t>>2]|0;i=s-(a[e>>2]|0)>>3;n=c;a[n>>2]=0;a[n+4>>2]=0;a[c>>2]=i;a[c+4>>2]=a[o>>2];if((s|0)==(a[l+256>>2]|0)){Jo(e,c);break}else{l=c;i=a[l>>2]|0;l=a[l+4>>2]|0;c=s;a[c>>2]=i;a[c+4>>2]=l;a[t>>2]=(a[t>>2]|0)+8;break}}else i=-1}while(0);d=u;return i|0}function lo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0;n=d;d=d+16|0;i=n;a[i>>2]=e;if(((Qo(2044,i)|0)!=0?(r=Yo(2044,i)|0,(t|0)>=0):0)?(s=a[r+248>>2]|0,(a[r+252>>2]|0)-s>>3>>>0>t>>>0):0)i=a[(a[s+(t<<3)+4>>2]|0)+4>>2]|0;else i=-1;d=n;return i|0}function co(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;a[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{t=Yo(2044,t)|0;t=(a[t+252>>2]|0)-(a[t+248>>2]|0)>>3}d=i;return t|0}function uo(e,t){e=e|0;t=+t;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;if(Qo(2044,i)|0)u[(Yo(2044,i)|0)+232>>3]=t;d=r;return}function po(e){e=e|0;var t=0.0,i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;if(!(Qo(2044,i)|0))t=-1.0;else t=+u[(Yo(2044,i)|0)+232>>3];d=r;return+t}function fo(e,t){e=e|0;t=+t;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;if(Qo(2044,i)|0)u[(Yo(2044,i)|0)+240>>3]=t;d=r;return}function ho(e){e=e|0;var t=0.0,i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;if(!(Qo(2044,i)|0))t=-1.0;else t=+u[(Yo(2044,i)|0)+240>>3];d=r;return+t}function mo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;i=s+4|0;a[i>>2]=e;if((Qo(2044,i)|0)!=0?(oc(a[(Yo(2044,i)|0)+212>>2]|0,t)|0)==0:0){a[r>>2]=t;en(1,6478,r)}d=s;return}function bo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(uc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?a[i>>2]|0:-1)|0}return 0}function go(e,t){e=e|0;t=+t;var i=0,r=0,s=0.0,n=0,o=0,l=0;l=d;d=d+16|0;o=l;i=l+8|0;a[i>>2]=e;if((((Qo(2044,i)|0)!=0?(r=Yo(2044,i)|0,!(t<=0.0|t>=1.0)):0)?(s=t,n=a[r+212>>2]|0,(n|0)!=0):0)?(dc(n,s)|0)==0:0){u[o>>3]=s;en(1,6513,o)}d=l;return}function vo(e){e=e|0;var t=0,i=0,r=0,s=0;s=d;d=d+16|0;t=s+8|0;r=s;a[t>>2]=e;if((Qo(2044,t)|0)!=0?(i=a[(Yo(2044,t)|0)+212>>2]|0,(i|0)!=0):0){e=(pc(i,r)|0)==0;d=s;return+(e?+u[r>>3]:-1.0)}d=s;return-1.0}function wo(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;if(Qo(2044,i)|0)lc(a[(Yo(2044,i)|0)+212>>2]|0,t)|0;d=r;return}function ko(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{cc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0;t=a[i>>2]|0}d=r;return t|0}function yo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;i=s+4|0;a[i>>2]=e;if((Qo(2044,i)|0)!=0?(ec(a[(Yo(2044,i)|0)+212>>2]|0,t)|0)==0:0){a[r>>2]=t;en(1,6544,r)}d=s;return}function _o(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(tc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?a[i>>2]|0:-1)|0}return 0}function So(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0;n=d;d=d+16|0;s=n;i=n+4|0;a[i>>2]=e;if(((Qo(2044,i)|0)!=0?(r=Yo(2044,i)|0,t>>>0<=255):0)?(ic(a[r+212>>2]|0,t)|0)==0:0){a[s>>2]=t;en(1,6569,s)}d=n;return}function xo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(rc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?a[i>>2]|0:-1)|0}return 0}function Co(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;i=s+4|0;a[i>>2]=e;if((Qo(2044,i)|0)!=0?(Jl(a[(Yo(2044,i)|0)+212>>2]|0,t)|0)==0:0){a[r>>2]=t;en(1,6590,r)}d=s;return}function qo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(sc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?a[i>>2]|0:-1)|0}return 0}function To(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;i=s+4|0;a[i>>2]=e;if(!(Qo(2044,i)|0))t=0;else{e=(t|0)!=0;Kl(a[(Yo(2044,i)|0)+212>>2]|0,e&1)|0;a[r>>2]=e?6616:6620;en(1,6625,r)}d=s;return t|0}function Eo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;a[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else t=a[(a[(Yo(2044,t)|0)+212>>2]|0)+4834148>>2]|0;d=i;return t|0}function Ao(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else{Zl(a[(Yo(2044,t)|0)+212>>2]|0,i)|0;t=a[i>>2]|0}d=r;return t|0}function Po(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;i=s+4|0;a[i>>2]=e;if((Qo(2044,i)|0)!=0?(ac(a[(Yo(2044,i)|0)+212>>2]|0,t)|0)==0:0){a[r>>2]=t;en(1,6647,r)}d=s;return}function Mo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;a[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(nc(a[(Yo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?a[i>>2]|0:-1)|0}return 0}function Io(e,t){e=e|0;t=t|0;var i=0;i=0;do{u[t+(i<<5)>>3]=+u[e+(i<<5)>>3];u[t+(i<<5)+8>>3]=+u[e+(i<<5)+8>>3];u[t+(i<<5)+16>>3]=+u[e+(i<<5)+16>>3];u[t+(i<<5)+24>>3]=+u[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3);return}function Ro(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;s=d;d=d+16|0;r=s;a[r>>2]=e;do{if(Qo(2044,r)|0){r=Yo(2044,r)|0;e=a[r+212>>2]|0;if((a[e+44>>2]|0)>(t|0)){+kc(a[r+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,+(i|0),264);r=0;break}else{r=a[523]|0;break}}else r=a[522]|0}while(0);d=s;return r|0}function Oo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;s=d;d=d+16|0;r=s;a[r>>2]=e;do{if(Qo(2044,r)|0){r=Yo(2044,r)|0;e=a[r+212>>2]|0;if((a[e+44>>2]|0)>(t|0)){+yc(a[r+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,264,+(i|0),264);r=0;break}else{r=a[523]|0;break}}else r=a[522]|0}while(0);d=s;return r|0}function $o(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;s=d;d=d+16|0;r=s;a[r>>2]=e;do{if(Qo(2044,r)|0){r=a[(Yo(2044,r)|0)+212>>2]|0;if((a[r+44>>2]|0)>(t|0)){a[((t|0)<0?8:r+48+(t<<8)|0)+16>>2]=i;r=0;break}else{r=a[523]|0;break}}else r=a[522]|0}while(0);d=s;return r|0}function Fo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0.0,n=0.0,o=0.0,l=0.0,c=0.0,p=0.0,f=0.0,h=0.0;r=d;d=d+16|0;i=r;a[i>>2]=e;do{if(Qo(2044,i)|0){i=a[(Yo(2044,i)|0)+212>>2]|0;if((a[i+44>>2]|0)>(t|0)){i=(t|0)<0?8:i+48+(t<<8)|0;h=+u[33];u[i+168>>3]=h;l=+u[34];u[i+176>>3]=l;f=+u[35];u[i+184>>3]=f;o=+u[36];u[i+192>>3]=o;p=+u[37];u[i+200>>3]=p;n=+u[38];u[i+208>>3]=n;c=+u[39];u[i+216>>3]=c;s=+u[40];u[i+224>>3]=s;u[i+56>>3]=(h+f+p+c)*.25;u[i+64>>3]=(l+o+n+s)*.25;i=0;break}else{i=a[523]|0;break}}else i=a[522]|0}while(0);d=r;return i|0}function No(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;do{if(Qo(2044,i)|0){i=Yo(2044,i)|0;e=a[i+248>>2]|0;if((t|0)<0?1:(a[i+252>>2]|0)-e>>3>>>0<=t>>>0){i=a[524]|0;break}else{t=a[e+(t<<3)+4>>2]|0;e=a[i+212>>2]|0;+Gn(a[i+224>>2]|0,e+48|0,a[e+44>>2]|0,t);Io(t+8|0,264);i=0;break}}else i=a[522]|0}while(0);d=r;return i|0}function Do(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;do{if(Qo(2044,i)|0){i=Yo(2044,i)|0;e=a[i+248>>2]|0;if((t|0)<0?1:(a[i+252>>2]|0)-e>>3>>>0<=t>>>0){i=a[524]|0;break}else{t=a[e+(t<<3)+4>>2]|0;e=a[i+212>>2]|0;+Wn(a[i+224>>2]|0,e+48|0,a[e+44>>2]|0,t);Io(t+8|0,264);i=0;break}}else i=a[522]|0}while(0);d=r;return i|0}function Lo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;a[t>>2]=e;if(!(Qo(2044,t)|0))t=a[522]|0;else{t=Yo(2044,t)|0;t=fc(a[t+212>>2]|0,a[t+196>>2]|0)|0}d=i;return t|0}function zo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;a[t>>2]=e;if(!(Qo(2044,t)|0))t=2088;else t=(a[(Yo(2044,t)|0)+212>>2]|0)+44|0;d=i;return a[t>>2]|0}function jo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;s=d;d=d+16|0;r=s;a[r>>2]=e;do{if(Qo(2044,r)|0){e=Yo(2044,r)|0;r=a[e+248>>2]|0;if((t|0)<0?1:(a[e+252>>2]|0)-r>>3>>>0<=t>>>0){r=a[524]|0;break}r=a[r+(t<<3)+4>>2]|0;if((i|0)<0?1:(a[r+4>>2]|0)<=(i|0)){r=a[523]|0;break}else{r=a[r>>2]|0;Io(r+(i*320|0)+16|0,264);zt(0,a[r+(i*320|0)+304>>2]|0,a[r+(i*320|0)>>2]|0,a[r+(i*320|0)+4>>2]|0,+ +u[r+(i*320|0)+8>>3])|0;r=0;break}}else r=a[522]|0}while(0);d=s;return r|0}function Ho(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;a[i>>2]=e;do{if(Qo(2044,i)|0){i=a[(Yo(2044,i)|0)+212>>2]|0;if((a[i+44>>2]|0)>(t|0)){i=(t|0)<0?8:i+48+(t<<8)|0;Qe(1,a[i>>2]|0,a[i+4>>2]|0,a[i+8>>2]|0,a[i+12>>2]|0,a[i+16>>2]|0,a[i+20>>2]|0,a[i+24>>2]|0,+ +u[i+32>>3],+ +u[i+40>>3],+ +u[i+48>>3],+ +u[i+56>>3],+ +u[i+64>>3],+ +u[i+72>>3],+ +u[i+80>>3],+ +u[i+88>>3],+ +u[i+96>>3],+ +u[i+104>>3],+ +u[i+112>>3],+ +u[i+120>>3],+ +u[i+128>>3],+ +u[i+136>>3],+ +u[i+144>>3],+ +u[i+152>>3],+ +u[i+160>>3],+ +u[i+168>>3],+ +u[i+176>>3],+ +u[i+184>>3],+ +u[i+192>>3],+ +u[i+200>>3],+ +u[i+208>>3],+ +u[i+216>>3],+ +u[i+224>>3],a[i+240>>2]|0)|0;i=0;break}else{i=a[523]|0;break}}else i=a[522]|0}while(0);d=r;return i|0}function Bo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0,n=0,o=0,l=0;o=d;d=d+16|0;n=o+8|0;s=o+12|0;r=a[525]|0;a[525]=r+1;a[s>>2]=r;s=Yo(2044,s)|0;a[s>>2]=r;a[s+204>>2]=e;a[s+208>>2]=t;l=ie(e<<2,t)|0;t=s+200|0;a[t>>2]=l;e=s+196|0;a[e>>2]=za(l)|0;l=Fc()|0;a[s+216>>2]=l;if(!l)en(3,8285,o);ao(r,i)|0;a[n>>2]=a[t>>2];en(1,8322,n);Lt(2,a[s>>2]|0,a[e>>2]|0,a[t>>2]|0,s+264|0,264)|0;d=o;return a[s>>2]|0}function Uo(e){e=e|0;var t=0;e=d;d=d+16|0;t=e;Xo(8591,7);Zo(8597,3);el(8606,2);el(8617,3);tl(8633,4);Zo(8651,4);il(8671,5);Xo(8683,8);tl(8700,5);Xo(8720,9);Xo(8738,10);tl(8760,6);tl(8783,7);Zo(8812,6);Zo(8825,7);Xo(8838,11);tl(8857,8);tl(8867,9);Zo(8880,8);Zo(8893,9);rl(8912,10);sl(8924,1);al(8936,1);nl(8959,1);al(8982,2);nl(9004,2);ol(9026,1);Zo(9043,10);ol(9060,2);Zo(9073,11);ol(9086,3);Zo(9110,12);ll(9134,3);nl(9147,3);ol(9160,4);Zo(9178,13);ol(9196,5);Zo(9212,14);ol(9228,6);Zo(9245,15);cl(9262,2088);cl(9291,2096);cl(9319,2092);Mt(9352,680,0);Mt(9369,680,1);Mt(9385,680,0);Mt(9407,680,0);Mt(9432,680,1);Mt(9457,680,1);Mt(9482,680,100);Mt(9509,680,0);Mt(9535,680,1);Mt(9561,680,0);Mt(9588,680,0);Mt(9615,680,1);Mt(9641,680,2);Mt(9666,680,3);Mt(9704,680,4);Mt(9741,680,0);Mt(9775,680,0);Mt(9799,680,1);Mt(9825,680,2);Mt(9852,680,2);Mt(9886,680,5);u[t>>3]=.5;ul(9904,t);Mt(9925,680,0);Mt(9944,680,1);Mt(9962,680,2);Mt(9980,680,3);Mt(9999,680,4);Mt(10021,680,3);Mt(10040,680,515);Mt(10069,680,259);Mt(10097,680,4);Mt(10116,680,772);Mt(10146,680,1028);Mt(10176,680,0);Mt(10207,680,1);Mt(10243,680,2);Mt(10277,680,3);Mt(10315,680,0);Mt(10348,680,1);Mt(10395,680,2);Mt(10437,680,3);Mt(10480,680,4);Mt(10532,680,5);Mt(10583,680,6);Mt(10628,680,7);Mt(10667,680,8);Mt(10712,680,9);d=e;return}function Qo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0;i=a[t>>2]|0;s=a[e+4>>2]|0;e:do{if(s){n=s+-1|0;o=(n&s|0)==0;if(o)r=n&i;else r=(i>>>0)%(s>>>0)|0;t=a[(a[e>>2]|0)+(r<<2)>>2]|0;if(t)do{t=a[t>>2]|0;if(!t){t=0;break e}e=a[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(s>>>0)|0;if((e|0)!=(r|0)){t=0;break e}}while((a[t+8>>2]|0)!=(i|0));else t=0}else t=0}while(0);return t|0}function Yo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0;n=d;d=d+32|0;s=n+8|0;r=n;i=Qo(e,t)|0;if(!i){br(s,e,t);gr(r,e,a[s>>2]|0);i=a[r>>2]|0;a[s>>2]=0}d=n;return i+16|0}function Vo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;i=s+4|0;r=s;t=Qo(e,t)|0;if(!t)t=0;else{a[r>>2]=t;a[i>>2]=a[r>>2];hr(e,i)|0;t=1}d=s;return t|0}function Wo(e){e=e|0;var t=0,i=0;i=a[e>>2]|0;if(i){t=e+4|0;e=a[t>>2]|0;if((e|0)!=(i|0)){do{e=e+-8|0}while((e|0)!=(i|0));a[t>>2]=e}Mr(i)}return}function Go(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0;n=d;d=d+32|0;s=n+8|0;r=n;i=Ko(e,t)|0;if(!i){Rl(s,e,t);Ol(r,e,a[s>>2]|0);i=a[r>>2]|0;a[s>>2]=0}d=n;return i+16|0}function Ko(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0;i=a[t>>2]|0;s=a[e+4>>2]|0;e:do{if(s){n=s+-1|0;o=(n&s|0)==0;if(o)r=n&i;else r=(i>>>0)%(s>>>0)|0;t=a[(a[e>>2]|0)+(r<<2)>>2]|0;if(t)do{t=a[t>>2]|0;if(!t){t=0;break e}e=a[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(s>>>0)|0;if((e|0)!=(r|0)){t=0;break e}}while((a[t+8>>2]|0)!=(i|0));else t=0}else t=0}while(0);return t|0}function Jo(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l;n=e+4|0;i=a[e>>2]|0;s=((a[n>>2]|0)-i>>3)+1|0;if(s>>>0>536870911)Ar(e);r=i;i=(a[e+8>>2]|0)-r|0;if(i>>3>>>0<268435455){i=i>>2;i=i>>>0<s>>>0?s:i}else i=536870911;Pl(o,i,(a[n>>2]|0)-r>>3,e+8|0);n=o+8|0;s=a[n>>2]|0;i=t;r=a[i+4>>2]|0;t=s;a[t>>2]=a[i>>2];a[t+4>>2]=r;a[n>>2]=s+8;Ml(e,o);Il(o);d=l;return}function Xo(e,t){e=e|0;t=t|0;Be(e|0,4,2200,10911,1,t|0);return}function Zo(e,t){e=e|0;t=t|0;Be(e|0,2,2192,10801,10,t|0);return}function el(e,t){e=e|0;t=t|0;Be(e|0,3,2180,10906,12,t|0);return}function tl(e,t){e=e|0;t=t|0;Be(e|0,3,2168,10906,13,t|0);return}function il(e,t){e=e|0;t=t|0;Be(e|0,2,2160,10801,11,t|0);return}function rl(e,t){e=e|0;t=t|0;Be(e|0,2,2152,10797,7,t|0);return}function sl(e,t){e=e|0;t=t|0;Be(e|0,1,2148,10794,16,t|0);return}function al(e,t){e=e|0;t=t|0;Be(e|0,3,2136,10789,1,t|0);return}function nl(e,t){e=e|0;t=t|0;Be(e|0,2,2128,10785,1,t|0);return}function ol(e,t){e=e|0;t=t|0;Be(e|0,3,2116,10780,1,t|0);return}function ll(e,t){e=e|0;t=t|0;Be(e|0,3,2104,10775,2,t|0);return}function cl(e,t){e=e|0;t=t|0;Mt(e|0,680,a[t>>2]|0);return}function ul(e,t){e=e|0;t=t|0;Mt(e|0,720,~~+u[t>>3]>>>0|0);return}function dl(){a[511]=0;a[512]=0;a[513]=0;a[514]=0;c[515]=1.0;St(11,2044,b|0)|0;a[516]=0;a[517]=0;a[518]=0;a[519]=0;c[520]=1.0;St(12,2064,b|0)|0;Uo(0);return}function pl(e){e=e|0;bl(e);return}function fl(e){e=e|0;hl(e);return}function hl(e){e=e|0;var t=0;ml(e,a[e+8>>2]|0);t=a[e>>2]|0;a[e>>2]=0;if(t)Mr(t);return}function ml(e,t){e=e|0;t=t|0;if(t)do{e=t;t=a[t>>2]|0;Mr(e)}while((t|0)!=0);return}function bl(e){e=e|0;var t=0;gl(e,a[e+8>>2]|0);t=a[e>>2]|0;a[e>>2]=0;if(t)Mr(t);return}function gl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=a[t>>2]|0;Wo(e+264|0);Mr(e)}while((t|0)!=0);return}function vl(e,t,i){e=e|0;t=t|0;i=+i;ju[e&3](t,i);return}function wl(e,t,i){e=e|0;t=t|0;i=i|0;Qu[e&7](t,i);return}function kl(e,t){e=e|0;t=t|0;return+ +Hu[e&3](t)}function yl(e,t,i){e=e|0;t=t|0;i=+i;ju[e&3](t,i);return}function _l(e){e=e|0;return Bu[e&1]()|0}function Sl(e,t){e=e|0;t=t|0;Uu[e&15](t);return}function xl(e,t){e=e|0;t=t|0;var i=0,r=0;i=d;d=d+16|0;r=i;Cl(r,t);e=Yu[e&31](r)|0;Bc(r);d=i;return e|0}function Cl(e,t){e=e|0;t=t|0;Hc(e,t+4|0,a[t>>2]|0);return}function ql(e,t,i){e=e|0;t=t|0;i=i|0;return Xu[e&15](t,i)|0}function Tl(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,s=0;r=d;d=d+16|0;s=r;Cl(s,i);e=Xu[e&15](t,s)|0;Bc(s);d=r;return e|0}function El(e,t){e=e|0;t=t|0;return Yu[e&31](t)|0}function Al(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return Du[e&15](t,i,r)|0}function Pl(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;a[e+12>>2]=0;a[e+16>>2]=r;if(!t)r=0;else r=Pr(t<<3)|0;a[e>>2]=r;i=r+(i<<3)|0;a[e+8>>2]=i;a[e+4>>2]=i;a[e+12>>2]=r+(t<<3);return}function Ml(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0;r=a[e>>2]|0;n=e+4|0;i=t+4|0;s=(a[n>>2]|0)-r|0;o=(a[i>>2]|0)+(0-(s>>3)<<3)|0;a[i>>2]=o;Kc(o|0,r|0,s|0)|0;s=a[e>>2]|0;a[e>>2]=a[i>>2];a[i>>2]=s;s=t+8|0;r=a[n>>2]|0;a[n>>2]=a[s>>2];a[s>>2]=r;s=e+8|0;e=t+12|0;r=a[s>>2]|0;a[s>>2]=a[e>>2];a[e>>2]=r;a[t>>2]=a[i>>2];return}function Il(e){e=e|0;var t=0,i=0,r=0;i=a[e+4>>2]|0;r=e+8|0;t=a[r>>2]|0;if((t|0)!=(i|0)){do{t=t+-8|0}while((t|0)!=(i|0));a[r>>2]=t}t=a[e>>2]|0;if(t)Mr(t);return}function Rl(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;r=Pr(200)|0;a[r+8>>2]=a[i>>2];Yc(r+16|0,0,184)|0;a[e>>2]=r;e=e+4|0;a[e>>2]=t+8;a[e+4>>2]=257;return}function Ol(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0.0,u=0.0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0;p=a[i+8>>2]|0;v=i+4|0;a[v>>2]=p;g=t+4|0;d=a[g>>2]|0;b=(d|0)==0;e:do{if(!b){f=d+-1|0;h=(f&d|0)==0;if(h)n=f&p;else n=(p>>>0)%(d>>>0)|0;s=a[(a[t>>2]|0)+(n<<2)>>2]|0;if(!s)m=12;else while(1){o=a[s>>2]|0;if(!o){m=12;break e}s=a[o+4>>2]|0;if(h)s=s&f;else s=(s>>>0)%(d>>>0)|0;if((s|0)!=(n|0)){m=12;break e}if((a[o+8>>2]|0)==(p|0)){s=0;i=o;break}else s=o}}else{n=0;m=12}}while(0);if((m|0)==12){p=t+12|0;l=+(((a[p>>2]|0)+1|0)>>>0);u=+c[t+16>>2];do{if(b|l>+(d>>>0)*u){if(d>>>0>2)s=(d+-1&d|0)==0;else s=0;o=(s&1|d<<1)^1;s=~~+te(+(l/u))>>>0;pr(t,o>>>0<s>>>0?s:o);o=a[g>>2]|0;s=a[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&s;break}else{d=o;n=(s>>>0)%(o>>>0)|0;break}}}while(0);s=a[(a[t>>2]|0)+(n<<2)>>2]|0;if(!s){s=t+8|0;a[i>>2]=a[s>>2];a[s>>2]=i;a[(a[t>>2]|0)+(n<<2)>>2]=s;s=a[i>>2]|0;if(s){s=a[s+4>>2]|0;n=d+-1|0;if(!(n&d))s=s&n;else s=(s>>>0)%(d>>>0)|0;a[(a[t>>2]|0)+(s<<2)>>2]=i}}else{a[i>>2]=a[s>>2];a[s>>2]=i}a[p>>2]=(a[p>>2]|0)+1;s=1}a[e>>2]=i;r[e+4>>0]=s;return}function $l(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c*3|0)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+3|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+6|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Fl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+10+(m<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Nl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Dl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Ll(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<1)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+12+(m<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+2|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+4|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function zl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;m=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=m;f=m+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=o*3|0;C=t+-1|0;if((i|0)>0){c=0;o=m;p=m+(C<<1)|0;while(1){s[p>>1]=0;s[o>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{o=o+(t<<1)|0;p=p+(t<<1)|0}}}p=l+1179664|0;c=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((T|0)>1){S=(C|0)>1;h=(a[l+4>>2]|0)+c|0;x=1;f=e+(c<<2)|0;e=m+(c<<1)|0;o=0;t:while(1){if(S){c=h;w=1;v=f;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(q|0)){r[c>>0]=-1;o=s[e+(_<<1)>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=s[e+(k<<1)>>1]|0;m=h<<16>>16;o=s[e+(y<<1)>>1]|0;b=o<<16>>16;f=o<<16>>16>0;if(h<<16>>16<=0){if(f){s[e>>1]=o;o=b*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-3<<2)|0;if((a[f>>2]|0)<(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[e+-2>>1]|0;if(o<<16>>16>0){s[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((a[o>>2]|0)>=(w|0)){o=g;break}a[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;s[e>>1]=o;a[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;a[l+1310736+(g<<2)>>2]=1;a[l+1310736+(g+1<<2)>>2]=w;a[l+1310736+(g+2<<2)>>2]=x;a[l+1310736+(g+3<<2)>>2]=w;a[l+1310736+(g+4<<2)>>2]=w;a[l+1310736+(g+5<<2)>>2]=x;a[l+1310736+(g+6<<2)>>2]=x;break}}if(f){o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;a[b>>2]=(a[b>>2]|0)+x;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}f=s[e+-2>>1]|0;if(f<<16>>16<=0){s[e>>1]=h;o=m*7|0;f=l+1310736+(o+-7<<2)|0;a[f>>2]=(a[f>>2]|0)+1;f=l+1310736+(o+-6<<2)|0;a[f>>2]=(a[f>>2]|0)+w;f=l+1310736+(o+-5<<2)|0;a[f>>2]=(a[f>>2]|0)+x;f=l+1310736+(o+-4<<2)|0;if((a[f>>2]|0)>(w|0))a[f>>2]=w;a[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[l+1179664+(m+-1<<2)>>2]|0;m=a[l+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){s[e>>1]=m;if((g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(o|0))a[h>>2]=m;f=f+1|0;if((f|0)>=(g|0)){o=m;break}else h=h+4|0}}else o=m}else{s[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){f=0;h=p;while(1){if((a[h>>2]|0)==(m|0))a[h>>2]=o;f=f+1|0;if((f|0)>=(g|0))break;else h=h+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;a[b>>2]=(a[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;a[b>>2]=(a[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;a[o>>2]=(a[o>>2]|0)+x;o=g}else{s[e>>1]=0;r[c>>0]=0;o=g}}while(0);w=w+1|0;f=v+4|0;e=e+2|0;c=c+1|0;if((w|0)>=(C|0))break;else{v=f;g=o}}}else c=h;x=x+1|0;if((x|0)>=(T|0)){m=o;A=52;break e}else{h=c+2|0;f=f+8|0;e=e+4|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{f=1;o=1;while(1){c=a[p>>2]|0;if((c|0)==(f|0)){c=o;o=o+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[p>>2]=c;if((f|0)<(m|0)){f=f+1|0;p=p+4|0}else break}}h=l+8|0;c=o+-1|0;a[h>>2]=c;if(c){Yc(e|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((o|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[h>>2]|0))}if((m|0)>0){e=0;do{p=(a[l+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;c=l+12+(p<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(f<<2)>>2]|0);c=p<<1;o=l+655376+(c<<3)|0;u[o>>3]=+u[o>>3]+ +(a[l+1310736+(f+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(f+2<<2)>>2]|0);p=p<<2;c=l+131084+(p<<2)|0;o=a[l+1310736+(f+3<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;c=l+131084+((p|1)<<2)|0;o=a[l+1310736+(f+4<<2)>>2]|0;if((a[c>>2]|0)<(o|0))a[c>>2]=o;c=l+131084+((p|2)<<2)|0;o=a[l+1310736+(f+5<<2)>>2]|0;if((a[c>>2]|0)>(o|0))a[c>>2]=o;o=l+131084+((p|3)<<2)|0;c=a[l+1310736+(f+6<<2)>>2]|0;if((a[o>>2]|0)<(c|0))a[o>>2]=c;e=e+1|0}while((e|0)<(m|0))}if((a[h>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[h>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function jl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+c|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}else{s[h>>1]=0;r[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+1|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+2|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Hl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}else{s[h>>1]=0;r[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+2|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+4|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Bl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;c=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;m=(a[l+4>>2]|0)+c|0;C=1;e=e+(c<<1)|0;h=h+(c<<1)|0;p=0;t:while(1){if(x){c=m;k=1;w=e;v=p;while(1){do{if((n[w>>0]|0|0)>(o|0)){r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}else{s[h>>1]=0;r[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+2|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}else c=m;C=C+1|0;if((C|0)>=(T|0)){b=p;A=52;break e}else{m=c+2|0;e=e+4|0;h=h+4|0}}en(3,3904,E);c=-1}else{b=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((b|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(b|0)){e=e+1|0;f=f+4|0}else break}}m=l+8|0;c=p+-1|0;a[m>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[m>>2]|0))}if((b|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(b|0))}if((a[m>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[m>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Ul(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var c=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0;P=d;d=d+16|0;E=P;h=a[l>>2]|0;T=i+-1|0;if((t|0)>0){c=0;p=h;f=h+((ie(T,t)|0)<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(t|0))break;else{p=p+2|0;f=f+2|0}}}q=t+-1|0;if((i|0)>0){c=0;p=h;f=h+(q<<1)|0;while(1){s[f>>1]=0;s[p>>1]=0;c=c+1|0;if((c|0)>=(i|0))break;else{p=p+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;p=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((T|0)>1){x=(q|0)>1;c=(a[l+4>>2]|0)+p|0;C=1;e=e+p|0;h=h+(p<<1)|0;o=o+p|0;p=0;t:while(1){if(x){k=1;w=e;v=p;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){r[c>>0]=-1;p=s[h+(S<<1)>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}m=s[h+(y<<1)>>1]|0;b=m<<16>>16;p=s[h+(_<<1)>>1]|0;g=p<<16>>16;e=p<<16>>16>0;if(m<<16>>16<=0){if(e){s[h>>1]=p;p=g*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-3<<2)|0;if((a[e>>2]|0)<(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=s[h+-2>>1]|0;if(p<<16>>16>0){s[h>>1]=p;p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;p=l+1310736+(p+-3<<2)|0;if((a[p>>2]|0)>=(k|0)){p=v;break}a[p>>2]=k;p=v;break}else{p=v+1|0;if((v|0)>32767)break t;s[h>>1]=p;a[l+1179664+(v<<2)>>2]=p<<16>>16;v=v*7|0;a[l+1310736+(v<<2)>>2]=1;a[l+1310736+(v+1<<2)>>2]=k;a[l+1310736+(v+2<<2)>>2]=C;a[l+1310736+(v+3<<2)>>2]=k;a[l+1310736+(v+4<<2)>>2]=k;a[l+1310736+(v+5<<2)>>2]=C;a[l+1310736+(v+6<<2)>>2]=C;break}}if(e){p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+(g+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;g=l+1310736+(p+-5<<2)|0;a[g>>2]=(a[g>>2]|0)+C;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}e=s[h+-2>>1]|0;if(e<<16>>16<=0){s[h>>1]=m;p=b*7|0;e=l+1310736+(p+-7<<2)|0;a[e>>2]=(a[e>>2]|0)+1;e=l+1310736+(p+-6<<2)|0;a[e>>2]=(a[e>>2]|0)+k;e=l+1310736+(p+-5<<2)|0;a[e>>2]=(a[e>>2]|0)+C;e=l+1310736+(p+-4<<2)|0;if((a[e>>2]|0)>(k|0))a[e>>2]=k;a[l+1310736+(p+-1<<2)>>2]=C;p=v;break}p=a[l+1179664+(b+-1<<2)>>2]|0;b=a[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((p|0)>(b|0)){s[h>>1]=b;if((v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(p|0))a[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){p=b;break}else m=m+4|0}}else p=b}else{s[h>>1]=p;if((p|0)<(b|0)&(v|0)>0){e=0;m=f;while(1){if((a[m>>2]|0)==(b|0))a[m>>2]=p;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}p=(p<<16>>16)*7|0;g=l+1310736+(p+-7<<2)|0;a[g>>2]=(a[g>>2]|0)+1;g=l+1310736+(p+-6<<2)|0;a[g>>2]=(a[g>>2]|0)+k;p=l+1310736+(p+-5<<2)|0;a[p>>2]=(a[p>>2]|0)+C;p=v}else{s[h>>1]=0;r[c>>0]=0;p=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;h=h+2|0;c=c+1|0;if((k|0)>=(q|0))break;else{w=e;v=p}}}C=C+1|0;if((C|0)>=(T|0)){m=p;A=52;break e}else{c=c+2|0;e=e+2|0;h=h+4|0;o=o+2|0}}en(3,3904,E);c=-1}else{m=0;A=52}}while(0);if((A|0)==52){h=l+12|0;if((m|0)<1)p=1;else{e=1;p=1;while(1){c=a[f>>2]|0;if((c|0)==(e|0)){c=p;p=p+1|0}else c=a[l+1179664+(c+-1<<2)>>2]|0;a[f>>2]=c;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}o=l+8|0;c=p+-1|0;a[o>>2]=c;if(c){Yc(h|0,0,c<<2|0)|0;Yc(l+655376|0,0,c<<4|0)|0;if((p|0)>1){c=0;do{A=c<<2;a[l+131084+(A<<2)>>2]=t;a[l+131084+((A|1)<<2)>>2]=0;a[l+131084+((A|2)<<2)>>2]=i;a[l+131084+((A|3)<<2)>>2]=0;c=c+1|0}while((c|0)<(a[o>>2]|0))}if((m|0)>0){h=0;do{f=(a[l+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;c=l+12+(f<<2)|0;a[c>>2]=(a[c>>2]|0)+(a[l+1310736+(e<<2)>>2]|0);c=f<<1;p=l+655376+(c<<3)|0;u[p>>3]=+u[p>>3]+ +(a[l+1310736+(e+1<<2)>>2]|0);c=l+655376+((c|1)<<3)|0;u[c>>3]=+u[c>>3]+ +(a[l+1310736+(e+2<<2)>>2]|0);f=f<<2;c=l+131084+(f<<2)|0;p=a[l+1310736+(e+3<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;c=l+131084+((f|1)<<2)|0;p=a[l+1310736+(e+4<<2)>>2]|0;if((a[c>>2]|0)<(p|0))a[c>>2]=p;c=l+131084+((f|2)<<2)|0;p=a[l+1310736+(e+5<<2)>>2]|0;if((a[c>>2]|0)>(p|0))a[c>>2]=p;p=l+131084+((f|3)<<2)|0;c=a[l+1310736+(e+6<<2)>>2]|0;if((a[p>>2]|0)<(c|0))a[p>>2]=c;h=h+1|0}while((h|0)<(m|0))}if((a[o>>2]|0)>0){c=0;do{t=l+12+(c<<2)|0;i=c<<1;A=l+655376+(i<<3)|0;u[A>>3]=+u[A>>3]/+(a[t>>2]|0);i=l+655376+((i|1)<<3)|0;u[i>>3]=+u[i>>3]/+(a[t>>2]|0);c=c+1|0}while((c|0)<(a[o>>2]|0));c=0}else c=0}else c=0}d=P;return c|0}function Ql(e){e=e|0;return Yl(e+8|0)|0}function Yl(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=za(4)|0;if(!t){en(3,5472,i);kt(1)}e=Dn(e)|0;a[t>>2]=e;if(!e){ja(t);t=0}d=i;return t|0}function Vl(e){e=e|0;var t=0;t=a[e>>2]|0;if(!t)t=-1;else{Ln(t)|0;ja(a[e>>2]|0);a[e>>2]=0;t=0}return t|0}function Wl(e){e=e|0;var t=0,i=0,r=0;i=d;d=d+16|0;t=za(7062432)|0;if(!t){en(3,5472,i);kt(1)}a[t>>2]=0;a[t+4834148>>2]=0;a[t+7062408>>2]=0;a[t+4>>2]=-1;a[t+8>>2]=0;a[t+12>>2]=1;a[t+16>>2]=100;a[t+20>>2]=0;a[t+24>>2]=0;a[t+28>>2]=2;u[t+7062416>>3]=.5;a[t+7062424>>2]=3;a[t+32>>2]=e;r=a[e>>2]|0;a[t+36>>2]=r;e=a[e+4>>2]|0;a[t+40>>2]=e;a[t+44>>2]=0;a[t+15408>>2]=0;a[t+4834152>>2]=0;a[t+4818296>>2]=0;e=za(ie(r<<1,e)|0)|0;a[t+4834144>>2]=e;if(!e){en(3,5472,i+8|0);kt(1)}else{a[t+7062384>>2]=0;Gl(t,2)|0;Kl(t,0)|0;a[t+7062388>>2]=-1;Jl(t,0)|0;a[t+7062392>>2]=7;a[t+7062396>>2]=0;d=i;return t|0}return 0}function Gl(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0;n=d;d=d+16|0;i=n;e:do{if(e){r=e+4|0;if((a[r>>2]|0)!=(t|0)){switch(t|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{s=0;break}case 14:case 13:case 12:case 5:{s=1;break}default:{a[i>>2]=t;en(3,3936,i);i=-1;break e}}a[r>>2]=t;a[e+8>>2]=sn(t)|0;i=e+7062408|0;t=a[i>>2]|0;if(t){Cc(t);a[i>>2]=xc(a[e+36>>2]|0,a[e+40>>2]|0,a[r>>2]|0,0)|0}i=e+24|0;t=a[i>>2]|0;if(!s)switch(t|0){case 1:{a[i>>2]=4;i=0;break e}case 4:{a[i>>2]=3;i=0;break e}default:{i=0;break e}}else switch(t|0){case 0:{a[i>>2]=1;i=0;break e}case 3:{a[i>>2]=4;i=0;break e}default:{i=0;break e}}}else i=0}else i=-1}while(0);d=n;return i|0}function Kl(e,t){e=e|0;t=t|0;var i=0,r=0,s=0;s=d;d=d+16|0;r=s;do{if(e)if((a[e>>2]|0)!=(t|0)){a[e>>2]=t;if(!t){i=e+4834148|0;ja(a[i>>2]|0);a[i>>2]=0;i=0;break}t=za(ie(a[e+40>>2]|0,a[e+36>>2]|0)|0)|0;a[e+4834148>>2]=t;if(!t){en(3,5472,r);kt(1)}else i=0}else i=0;else i=-1}while(0);d=s;return i|0}function Jl(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;s=l;if(e){n=e+7062388|0;if((a[n>>2]|0)!=(t|0)){i=e+7062408|0;r=a[i>>2]|0;if(r){Cc(r);a[i>>2]=0}switch(t|0){case 3:case 2:case 1:{a[i>>2]=xc(a[e+36>>2]|0,a[e+40>>2]|0,a[e+4>>2]|0,0)|0;break}case 4:{a[e+7062404>>2]=1;a[e+7062400>>2]=1;t=4;break}case 0:{t=0;break}default:{en(3,3985,s);t=0}}a[n>>2]=t;if((a[e>>2]|0)==1){a[o>>2]=a[760+(t<<2)>>2];en(3,4059,o);t=0}else t=0}else t=0}else t=-1;d=l;return t|0}function Xl(e){e=e|0;var t=0,i=0;if(!e)t=-1;else{t=e+7062408|0;i=a[t>>2]|0;if(i){Cc(i);a[t>>2]=0}ja(a[e+4834144>>2]|0);ja(a[e+4834148>>2]|0);ja(e);t=0}return t|0}function Zl(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e>>2];e=0}else e=-1;return e|0}function ec(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){a[e+12>>2]=t;e=0}else e=-1;return e|0}function tc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+12>>2];e=0}else e=-1;return e|0}function ic(e,t){e=e|0;t=t|0;if((e|0)==0|t>>>0>255)e=-1;else{a[e+16>>2]=t;e=0}return e|0}function rc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+16>>2];e=0}else e=-1;return e|0}function sc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+7062388>>2];e=0}else e=-1;return e|0}function ac(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){a[e+20>>2]=t;e=0}else e=-1;return e|0}function nc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[t>>2]=a[e+20>>2];e=0}return e|0}function oc(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<5){a[e+24>>2]=t;e=0}else e=-1;return e|0}function lc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[e+7062424>>2]=t;e=0}return e|0}function cc(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){a[t>>2]=a[e+7062424>>2];e=0}else e=-1;return e|0}function uc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{a[t>>2]=a[e+24>>2];e=0}return e|0}function dc(e,t){e=e|0;t=+t;if((e|0)!=0?!(t<=0.0|t>=1.0):0){u[e+7062416>>3]=t;e=0}else e=-1;return e|0}function pc(e,t){e=e|0;t=t|0;if(!e)e=-1;else{u[t>>3]=+u[e+7062416>>3];e=0}return e|0}function fc(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,o=0.0,l=0,c=0,p=0,f=0.0,h=0.0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0,D=0,L=0,z=0.0,j=0,H=0,B=0.0,U=0.0;H=d;d=d+80|0;D=H+32|0;I=H+24|0;C=H;x=H+52|0;A=H+40|0;N=H+64|0;j=e+44|0;a[j>>2]=0;$=e+7062388|0;r=a[$>>2]|0;e:do{if((r|0)==4){O=e+7062396|0;i=a[O>>2]|0;do{if((i|0)>0){r=4;i=i+-1|0}else{E=e+16|0;M=a[E>>2]|0;P=e+7062400|0;q=(a[P>>2]|0)+M|0;q=(q|0)>255?255:q;a[x>>2]=q;R=e+7062404|0;T=M-(a[R>>2]|0)|0;T=(T|0)<0?0:T;a[x+4>>2]=T;a[x+8>>2]=M;i=e+36|0;r=e+40|0;s=e+4|0;l=e+12|0;c=e+20|0;p=e+4834144|0;m=e+15416|0;b=e+15408|0;g=e+7062384|0;v=e+24|0;w=e+32|0;k=e+7062416|0;y=e+48|0;_=e+7062424|0;S=0;do{if((Rc(t,a[i>>2]|0,a[r>>2]|0,a[s>>2]|0,a[e>>2]|0,a[l>>2]|0,a[x+(S<<2)>>2]|0,a[c>>2]|0,p,0)|0)<0){i=-1;break e}if((mc(a[i>>2]|0,a[r>>2]|0,p,a[c>>2]|0,1e6,70,1.0,m,b)|0)<0){i=-1;break e}if((wc(t,a[i>>2]|0,a[r>>2]|0,a[s>>2]|0,m,a[b>>2]|0,a[g>>2]|0,a[c>>2]|0,a[v>>2]|0,(a[w>>2]|0)+184|0,+u[k>>3],y,j,a[_>>2]|0)|0)<0){i=-1;break e}a[A+(S<<2)>>2]=a[j>>2];S=S+1|0}while((S|0)<3);if((a[e>>2]|0)==1){L=a[A+4>>2]|0;s=a[A+8>>2]|0;r=a[A>>2]|0;a[C>>2]=T;a[C+4>>2]=L;a[C+8>>2]=M;a[C+12>>2]=s;a[C+16>>2]=q;a[C+20>>2]=r;en(3,4153,C)}else{r=a[A>>2]|0;s=a[A+8>>2]|0}i=a[A+4>>2]|0;if((r|0)>(s|0)|(i|0)>(s|0)){r=(r|0)>=(i|0)?q:T;a[E>>2]=r;i=r-M|0;if((i|0)>0){a[P>>2]=i;i=1}else{a[P>>2]=1;i=0-i|0}a[R>>2]=i;if((a[e>>2]|0)==1){a[I>>2]=r;en(3,4229,I)}r=a[$>>2]|0;i=a[e+7062392>>2]|0;break}i=a[P>>2]|0;r=a[R>>2]|0;do{if((i|0)>=(r|0))if((i|0)>(r|0)){a[R>>2]=r+1;break}else{i=i+1|0;a[P>>2]=i;a[R>>2]=r+1;break}else{i=i+1|0;a[P>>2]=i}}while(0);if((i+M|0)>254){a[P>>2]=1;i=1}if((M|0)<=(i|0))a[R>>2]=1;a[O>>2]=a[e+7062392>>2];L=47;break e}}while(0);a[O>>2]=i;L=30}else L=30}while(0);e:do{if((L|0)==30){t:do{switch(r|0){case 3:{r=e+7062408|0;i=Ic(a[r>>2]|0,t,9,-7)|0;if((i|0)<0)break e;i=a[r>>2]|0;r=e+4834144|0;i=Rc(a[i>>2]|0,a[i+8>>2]|0,a[i+12>>2]|0,5,a[e>>2]|0,a[e+12>>2]|0,0,0,r,a[i+4>>2]|0)|0;if((i|0)<0)break e;i=e+36|0;s=e+40|0;l=e+20|0;break}case 2:case 1:{s=e+7062396|0;i=a[s>>2]|0;if((i|0)>0){a[s>>2]=i+-1;L=44;break t}i=a[e+7062408>>2]|0;if((r|0)==1)i=Pc(i,t,N)|0;else i=Mc(i,t,N)|0;if((i|0)<0)break e;i=e+16|0;if((a[e>>2]|0)==1?(F=n[N>>0]|0,(a[i>>2]|0)!=(F|0)):0){a[D>>2]=(a[$>>2]|0)==1?4281:4288;a[D+4>>2]=F;en(3,4293,D)}a[i>>2]=n[N>>0];a[s>>2]=a[e+7062392>>2];L=44;break}default:L=44}}while(0);if((L|0)==44){i=e+36|0;s=e+40|0;l=e+20|0;r=e+4834144|0;if((Rc(t,a[i>>2]|0,a[s>>2]|0,a[e+4>>2]|0,a[e>>2]|0,a[e+12>>2]|0,a[e+16>>2]|0,a[l>>2]|0,r,0)|0)<0){i=-1;break}}c=e+15416|0;p=e+15408|0;if((mc(a[i>>2]|0,a[s>>2]|0,r,a[l>>2]|0,1e6,70,1.0,c,p)|0)>=0?(wc(t,a[i>>2]|0,a[s>>2]|0,a[e+4>>2]|0,c,a[p>>2]|0,a[e+7062384>>2]|0,a[l>>2]|0,a[e+24>>2]|0,(a[e+32>>2]|0)+184|0,+u[e+7062416>>3],e+48|0,j,a[e+7062424>>2]|0)|0)>=0:0)L=47;else i=-1}}while(0);e:do{if((L|0)==47){w=e+28|0;if((a[w>>2]|0)==1){hc(e);i=0;break}k=e+4818296|0;g=e+24|0;b=a[k>>2]|0;if((b|0)>0){v=0;do{r=a[j>>2]|0;s=e+4818304+(v*264|0)+56|0;l=e+4818304+(v*264|0)+64|0;if((r|0)>0){h=+(a[e+4818304+(v*264|0)>>2]|0);i=-1;c=0;f=.5;while(1){o=+(a[e+48+(c<<8)>>2]|0);B=h/o;if(!(B<.7|B>1.43)?(B=+u[e+48+(c<<8)+56>>3]-+u[s>>3],z=+u[e+48+(c<<8)+64>>3]-+u[l>>3],z=(B*B+z*z)/o,z<f):0){i=c;o=z}else o=f;c=c+1|0;if((c|0)>=(r|0)){m=i;break}else f=o}}else m=-1;t:do{if((m|0)>-1){p=a[g>>2]|0;switch(p|0){case 2:case 1:case 0:break;case 4:case 3:{s=e+48+(m<<8)+40|0;o=+u[e+4818304+(v*264|0)+40>>3];if(!(+u[s>>3]<o)){i=e+48+(m<<8)+48|0;r=e+4818304+(v*264|0)+48|0;if(!(+u[i>>3]<+u[r>>3]))break t}else{r=e+4818304+(v*264|0)+48|0;i=e+48+(m<<8)+48|0}u[s>>3]=o;a[e+48+(m<<8)+8>>2]=a[e+4818304+(v*264|0)+8>>2];u[i>>3]=+u[r>>3];a[e+48+(m<<8)+12>>2]=a[e+4818304+(v*264|0)+12>>2];i=-1;f=1.0e8;s=0;while(1){o=0.0;r=0;do{t=(r+s|0)%4|0;h=+u[e+4818304+(v*264|0)+168+(r<<4)>>3]-+u[e+48+(m<<8)+168+(t<<4)>>3];B=+u[e+4818304+(v*264|0)+168+(r<<4)+8>>3]-+u[e+48+(m<<8)+168+(t<<4)+8>>3];o=o+(h*h+B*B);r=r+1|0}while((r|0)!=4);r=o<f;i=r?s:i;s=s+1|0;if((s|0)==4)break;else f=r?o:f}t=4-i|0;a[e+48+(m<<8)+20>>2]=(t+(a[e+4818304+(v*264|0)+20>>2]|0)|0)%4|0;a[e+48+(m<<8)+24>>2]=(t+(a[e+4818304+(v*264|0)+24>>2]|0)|0)%4|0;break t}default:{i=-1;break e}}i=e+48+(m<<8)+32|0;h=+u[e+4818304+(v*264|0)+32>>3];if(+u[i>>3]<h){u[i>>3]=h;c=a[e+4818304+(v*264|0)+4>>2]|0;a[e+48+(m<<8)+4>>2]=c;s=e+4818304+(v*264|0)+16|0;i=-1;f=1.0e8;l=0;while(1){o=0.0;r=0;do{t=(r+l|0)%4|0;U=+u[e+4818304+(v*264|0)+168+(r<<4)>>3]-+u[e+48+(m<<8)+168+(t<<4)>>3];B=+u[e+4818304+(v*264|0)+168+(r<<4)+8>>3]-+u[e+48+(m<<8)+168+(t<<4)+8>>3];o=o+(U*U+B*B);r=r+1|0}while((r|0)!=4);if(o<f)i=(4-l+(a[s>>2]|0)|0)%4|0;else o=f;l=l+1|0;if((l|0)==4)break;else f=o}a[e+48+(m<<8)+16>>2]=i;if(p>>>0<2){a[e+48+(m<<8)+8>>2]=c;u[e+48+(m<<8)+40>>3]=h;a[e+48+(m<<8)+20>>2]=i;break}else{a[e+48+(m<<8)+12>>2]=c;u[e+48+(m<<8)+48>>3]=h;a[e+48+(m<<8)+24>>2]=i;break}}}}while(0);v=v+1|0}while((v|0)<(b|0))}hc(e);if((a[k>>2]|0)>0){s=0;i=0;do{r=e+4818304+(s*264|0)|0;L=e+4818304+(s*264|0)+256|0;t=(a[L>>2]|0)+1|0;a[L>>2]=t;if((t|0)<4){if((s|0)!=(i|0))Kc(e+4818304+(i*264|0)|0,r|0,264)|0;i=i+1|0}s=s+1|0}while((s|0)<(a[k>>2]|0))}else i=0;a[k>>2]=i;i=a[j>>2]|0;t:do{if((i|0)>0){p=0;do{l=e+48+(p<<8)|0;s=a[e+48+(p<<8)+4>>2]|0;if((s|0)>=0){c=a[k>>2]|0;i:do{if((c|0)>0){r=0;do{if((a[e+4818304+(r*264|0)+4>>2]|0)==(s|0))break i;r=r+1|0}while((r|0)<(c|0))}else r=0}while(0);if((r|0)==(c|0)){if((c|0)==60)break t;a[k>>2]=c+1}Kc(e+4818304+(r*264|0)|0,l|0,256)|0;a[e+4818304+(r*264|0)+256>>2]=1}p=p+1|0;i=a[j>>2]|0}while((p|0)<(i|0))}}while(0);if((a[w>>2]|0)!=2?(a[k>>2]|0)>0:0){c=0;while(1){s=e+4818304+(c*264|0)+56|0;l=e+4818304+(c*264|0)+64|0;t:do{if((i|0)>0){f=+(a[e+4818304+(c*264|0)>>2]|0);r=0;do{o=+(a[e+48+(r<<8)>>2]|0);U=f/o;if(!(U<.7|U>1.43)?(B=+u[e+48+(r<<8)+56>>3]-+u[s>>3],U=+u[e+48+(r<<8)+64>>3]-+u[l>>3],(B*B+U*U)/o<.5):0)break t;r=r+1|0}while((r|0)<(i|0))}else r=0}while(0);if((r|0)==(i|0)){Kc(e+48+(i<<8)|0,e+4818304+(c*264|0)|0,256)|0;i=(a[j>>2]|0)+1|0;a[j>>2]=i}c=c+1|0;if((c|0)>=(a[k>>2]|0)){i=0;break}}}else i=0}}while(0);d=H;return i|0}function hc(e){e=e|0;var t=0,i=0,r=0,s=0;switch(a[e+24>>2]|0){case 1:case 0:{i=a[e+44>>2]|0;if((i|0)>0){r=0;do{t=e+48+(r<<8)+4|0;if((a[t>>2]|0)>-1?+u[e+48+(r<<8)+32>>3]<.5:0){a[e+48+(r<<8)+8>>2]=-1;a[t>>2]=-1;a[e+48+(r<<8)+236>>2]=6}r=r+1|0}while((r|0)<(i|0))}break}case 2:{i=a[e+44>>2]|0;if((i|0)>0){r=0;do{t=e+48+(r<<8)+4|0;if((a[t>>2]|0)>-1?+u[e+48+(r<<8)+32>>3]<.5:0){a[e+48+(r<<8)+12>>2]=-1;a[t>>2]=-1;a[e+48+(r<<8)+236>>2]=6}r=r+1|0}while((r|0)<(i|0))}break}default:{r=a[e+44>>2]|0;if((r|0)>0){s=0;do{t=e+48+(s<<8)+8|0;if((a[t>>2]|0)>-1?+u[e+48+(s<<8)+40>>3]<.5:0){a[t>>2]=-1;i=0}else i=1;t=e+48+(s<<8)+12|0;if(((a[t>>2]|0)>-1?+u[e+48+(s<<8)+48>>3]<.5:0)?(a[t>>2]=-1,(i|0)==0):0)a[e+48+(s<<8)+236>>2]=6;s=s+1|0}while((s|0)<(r|0))}}}return}function mc(e,t,i,r,s,n,o,l,c){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;o=+o;l=l|0;c=c|0;var p=0.0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0,D=0.0;N=d;d=d+96|0;M=N+56|0;R=N+48|0;I=N+8|0;O=N;F=(r|0)==1;if(F){e=(e|0)/2|0;t=(t|0)/2|0;s=(s|0)/4|0;n=(n|0)/4|0}a[c>>2]=0;E=i+8|0;A=e+-2|0;C=t+-2|0;q=i+1179664|0;e:do{if((a[E>>2]|0)>0){T=0;while(1){_=i+12+(T<<2)|0;x=a[_>>2]|0;t:do{if(((((!((x|0)<(n|0)|(x|0)>(s|0))?(P=i+131084+(T<<4)|0,(a[P>>2]|0)!=1):0)?(a[i+131084+(T<<4)+4>>2]|0)!=(A|0):0)?(a[i+131084+(T<<4)+8>>2]|0)!=1:0)?(a[i+131084+(T<<4)+12>>2]|0)!=(C|0):0)?(bc(a[i>>2]|0,e,0,q,T+1|0,P,l+((a[c>>2]|0)*80048|0)|0)|0)>=0:0){w=a[_>>2]|0;S=a[c>>2]|0;k=l+(S*80048|0)+28|0;t=a[k>>2]|0;y=l+(S*80048|0)+40028|0;f=a[y>>2]|0;x=l+(S*80048|0)+24|0;h=(a[x>>2]|0)+-1|0;if((h|0)>1){g=0;v=1;r=0;while(1){m=(a[l+(S*80048|0)+28+(v<<2)>>2]|0)-t|0;m=ie(m,m)|0;b=(a[l+(S*80048|0)+40028+(v<<2)>>2]|0)-f|0;m=(ie(b,b)|0)+m|0;b=(m|0)>(g|0);r=b?v:r;v=v+1|0;if((v|0)>=(h|0))break;else g=b?m:g}}else r=0;p=+(w|0)/.75*.01*o;a[R>>2]=0;a[O>>2]=0;i:do{if((gc(k,y,0,r,p,M,R)|0)>=0?(gc(k,y,r,(a[x>>2]|0)+-1|0,p,I,O)|0)>=0:0){t=a[R>>2]|0;f=a[O>>2]|0;do{if((t|0)==1&(f|0)==1){t=a[I>>2]|0;f=a[M>>2]|0}else{if((t|0)>1&(f|0)==0){t=(r|0)/2|0;a[O>>2]=0;a[R>>2]=0;if((gc(k,y,0,t,p,M,R)|0)<0)break i;if((gc(k,y,t,r,p,I,O)|0)<0)break i;if(!((a[R>>2]|0)==1&(a[O>>2]|0)==1))break i;t=r;f=a[M>>2]|0;r=a[I>>2]|0;break}if(!((t|0)==0&(f|0)>1))break i;t=(r+-1+(a[x>>2]|0)|0)/2|0;a[O>>2]=0;a[R>>2]=0;if((gc(k,y,r,t,p,M,R)|0)<0)break i;if((gc(k,y,t,(a[x>>2]|0)+-1|0,p,I,O)|0)<0)break i;if(!((a[R>>2]|0)==1&(a[O>>2]|0)==1))break i;t=a[I>>2]|0;f=r;r=a[M>>2]|0}}while(0);a[l+(S*80048|0)+80028>>2]=0;a[l+(S*80048|0)+80032>>2]=f;a[l+(S*80048|0)+80036>>2]=r;a[l+(S*80048|0)+80040>>2]=t;a[l+(S*80048|0)+80044>>2]=(a[x>>2]|0)+-1;a[l+((a[c>>2]|0)*80048|0)>>2]=a[_>>2];x=a[c>>2]|0;u[l+(x*80048|0)+8>>3]=+u[i+655376+(T<<4)>>3];u[l+(x*80048|0)+16>>3]=+u[i+655376+(T<<4)+8>>3];x=x+1|0;a[c>>2]=x;if((x|0)==60){r=60;break e}else break t}}while(0)}}while(0);T=T+1|0;if((T|0)>=(a[E>>2]|0)){$=4;break}}}else $=4}while(0);if(($|0)==4)r=a[c>>2]|0;if((r|0)>0){h=0;do{e=h;h=h+1|0;n=l+(e*80048|0)+16|0;f=l+(e*80048|0)|0;if((h|0)<(r|0)){o=+u[l+(e*80048|0)+8>>3];s=h;do{D=o-+u[l+(s*80048|0)+8>>3];p=+u[n>>3]-+u[l+(s*80048|0)+16>>3];p=D*D+p*p;r=a[f>>2]|0;e=l+(s*80048|0)|0;t=a[e>>2]|0;if((r|0)>(t|0)){if(p<+((r|0)/4|0|0))a[e>>2]=0}else if(p<+((t|0)/4|0|0))a[f>>2]=0;s=s+1|0;r=a[c>>2]|0}while((s|0)<(r|0))}}while((h|0)<(r|0))}if((r|0)>0){s=0;do{if(!(a[l+(s*80048|0)>>2]|0)){e=s+1|0;if((e|0)<(r|0)){r=s;t=e;while(1){Kc(l+(r*80048|0)|0,l+(t*80048|0)|0,80048)|0;r=a[c>>2]|0;e=t+1|0;if((e|0)<(r|0)){r=t;t=e}else break}}r=r+-1|0;a[c>>2]=r}s=s+1|0}while((s|0)<(r|0))}if(F&(r|0)>0){t=0;while(1){a[l>>2]=a[l>>2]<<2;r=l+8|0;u[r>>3]=+u[r>>3]*2.0;r=l+16|0;u[r>>3]=+u[r>>3]*2.0;r=l+24|0;if((a[r>>2]|0)>0){e=0;do{F=l+28+(e<<2)|0;a[F>>2]=a[F>>2]<<1;F=l+40028+(e<<2)|0;a[F>>2]=a[F>>2]<<1;e=e+1|0}while((e|0)<(a[r>>2]|0))}t=t+1|0;if((t|0)>=(a[c>>2]|0))break;else l=l+80048|0}}d=N;return 0}function bc(e,t,i,r,n,o,l){e=e|0;t=t|0;i=i|0;r=r|0;n=n|0;o=o|0;l=l|0;var c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0;_=d;d=d+80032|0;m=_+16|0;h=_+8|0;u=_;k=_+40024|0;y=_+24|0;w=a[o+8>>2]|0;i=a[o>>2]|0;o=a[o+4>>2]|0;e:do{if((i|0)<=(o|0)){c=i;i=e+((ie(w,t)|0)+i<<1)|0;while(1){v=s[i>>1]|0;if(v<<16>>16>0?(a[r+((v<<16>>16)+-1<<2)>>2]|0)==(n|0):0){f=c;break}if((c|0)<(o|0)){c=c+1|0;i=i+2|0}else{S=6;break e}}b=l+24|0;a[b>>2]=1;g=l+28|0;a[g>>2]=f;v=l+40028|0;a[v>>2]=w;r=w;p=f;c=1;i=5;while(1){o=(i+5|0)%8|0;i=0;while(1){n=a[776+(o<<2)>>2]|0;u=a[808+(o<<2)>>2]|0;if((s[e+(u+p+(ie(n+r|0,t)|0)<<1)>>1]|0)>0){i=n;n=o;break}i=i+1|0;o=(o+1|0)%8|0;if((i|0)>=8){S=11;break}}if((S|0)==11){S=0;if((i|0)==8){S=13;break}u=a[808+(o<<2)>>2]|0;i=a[776+(o<<2)>>2]|0;n=o}a[l+28+(c<<2)>>2]=u+p;o=a[b>>2]|0;a[l+40028+(o<<2)>>2]=i+(a[l+40028+(o+-1<<2)>>2]|0);i=a[b>>2]|0;o=l+28+(i<<2)|0;if((a[o>>2]|0)==(f|0)?(a[l+40028+(i<<2)>>2]|0)==(w|0):0){r=i;S=16;break}c=i+1|0;a[b>>2]=c;if((c|0)==9999){S=19;break}r=a[l+40028+(i<<2)>>2]|0;p=a[o>>2]|0;i=n}if((S|0)==13){en(3,4347,h);i=-1;break}else if((S|0)==16){if((r|0)>1){u=0;n=1;o=0;while(1){i=(a[l+28+(n<<2)>>2]|0)-f|0;i=ie(i,i)|0;c=(a[l+40028+(n<<2)>>2]|0)-w|0;i=(ie(c,c)|0)+i|0;c=(i|0)>(u|0);o=c?n:o;n=n+1|0;if((n|0)>=(r|0))break;else u=c?i:u}}else o=0;if((o|0)>0){i=0;do{a[k+(i<<2)>>2]=a[l+28+(i<<2)>>2];a[y+(i<<2)>>2]=a[l+40028+(i<<2)>>2];i=i+1|0}while((i|0)<(o|0))}if((o|0)<(r|0)){i=o;do{w=i-o|0;a[l+28+(w<<2)>>2]=a[l+28+(i<<2)>>2];a[l+40028+(w<<2)>>2]=a[l+40028+(i<<2)>>2];i=i+1|0}while((i|0)<(a[b>>2]|0))}if((o|0)>0){i=0;do{w=i-o|0;a[l+28+((a[b>>2]|0)+w<<2)>>2]=a[k+(i<<2)>>2];a[l+40028+((a[b>>2]|0)+w<<2)>>2]=a[y+(i<<2)>>2];i=i+1|0}while((i|0)<(o|0))}a[l+28+(a[b>>2]<<2)>>2]=a[g>>2];a[l+40028+(a[b>>2]<<2)>>2]=a[v>>2];a[b>>2]=(a[b>>2]|0)+1;i=0;break}else if((S|0)==19){en(3,4354,m);i=-1;break}}else S=6}while(0);if((S|0)==6){en(3,4340,u);i=-1}d=_;return i|0}function gc(e,t,i,r,s,n,o){e=e|0;t=t|0;i=i|0;r=r|0;s=+s;n=n|0;o=o|0;var l=0,c=0.0,u=0.0,d=0,p=0.0,f=0,h=0.0,m=0,b=0,g=0,v=0.0;l=a[t+(r<<2)>>2]|0;b=a[t+(i<<2)>>2]|0;h=+(l-b|0);d=a[e+(i<<2)>>2]|0;g=a[e+(r<<2)>>2]|0;p=+(d-g|0);u=+((ie(g,b)|0)-(ie(d,l)|0)|0);l=i+1|0;if((l|0)<(r|0)){c=0.0;d=l;do{v=u+(h*+(a[e+(d<<2)>>2]|0)+p*+(a[t+(d<<2)>>2]|0));v=v*v;g=v>c;c=g?v:c;l=g?d:l;d=d+1|0}while((d|0)<(r|0))}else c=0.0;if(c/(h*h+p*p)>s)if(((gc(e,t,i,l,s,n,o)|0)>=0?(f=a[o>>2]|0,(f|0)<=5):0)?(a[n+(f<<2)>>2]=l,a[o>>2]=(a[o>>2]|0)+1,(gc(e,t,l,r,s,n,o)|0)>=0):0)m=7;else l=-1;else m=7;if((m|0)==7)l=0;return l|0}function vc(e,t,i,r,s,n,o){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;o=o|0;var l=0,p=0.0,f=0,h=0.0,m=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0;x=d;d=d+16|0;w=x+4|0;k=x;y=An(2)|0;_=An(2)|0;S=nn(2,2)|0;b=0;e:while(1){g=b;b=b+1|0;v=a[r+(b<<2)>>2]|0;l=a[r+(g<<2)>>2]|0;m=+(v+1-l|0)*.05+.5;l=~~(+(l|0)+m);v=~~(+(v|0)-m)-l|0;f=v+1|0;i=nn(f,2)|0;if((v|0)>-1){v=0;do{C=v+l|0;if((En(s,+(a[e+(C<<2)>>2]|0),+(a[t+(C<<2)>>2]|0),w,k)|0)<0){l=10;break e}C=v<<1;q=a[i>>2]|0;u[q+(C<<3)>>3]=+c[w>>2];u[q+((C|1)<<3)>>3]=+c[k>>2];v=v+1|0}while((v|0)<(f|0))}if((fn(i,S,y,_)|0)<0){l=10;break}q=a[S>>2]|0;h=+u[q+8>>3];u[n+(g*24|0)>>3]=h;m=-+u[q>>3];u[n+(g*24|0)+8>>3]=m;q=a[_>>2]|0;u[n+(g*24|0)+16>>3]=-(h*+u[q>>3]+ +u[q+8>>3]*m);dn(i)|0;if((b|0)>=4){l=7;break}}e:do{if((l|0)==7){dn(S)|0;Pn(_)|0;Pn(y)|0;b=0;while(1){i=(b+3|0)%4|0;l=n+(i*24|0)|0;p=+u[n+(b*24|0)+8>>3];f=n+(b*24|0)|0;h=+u[n+(i*24|0)+8>>3];m=+u[l>>3]*p-+u[f>>3]*h;if(+B(+m)<.0001){i=-1;break e}q=n+(b*24|0)+16|0;C=n+(i*24|0)+16|0;u[o+(b<<4)>>3]=(h*+u[q>>3]-p*+u[C>>3])/m;u[o+(b<<4)+8>>3]=(+u[f>>3]*+u[C>>3]-+u[l>>3]*+u[q>>3])/m;b=b+1|0;if((b|0)>=4){i=0;break}}}else if((l|0)==10){dn(i)|0;dn(S)|0;Pn(_)|0;Pn(y)|0;i=-1}}while(0);d=x;return i|0}function wc(e,t,i,r,s,n,o,l,p,f,h,m,b,g){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;o=o|0;l=l|0;p=p|0;f=f|0;h=+h;m=m|0;b=b|0;g=g|0;var v=0,w=0,k=0,y=0,_=0,S=0,x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0;M=d;d=d+16|0;A=M+4|0;P=M;C=p>>>0<2;q=(p|0)==2;if((n|0)>0){E=0;v=0;do{a[m+(v<<8)>>2]=a[s+(E*80048|0)>>2];if((En(f,+u[s+(E*80048|0)+8>>3],+u[s+(E*80048|0)+16>>3],A,P)|0)>=0?(u[m+(v<<8)+56>>3]=+c[A>>2],u[m+(v<<8)+64>>3]=+c[P>>2],T=m+(v<<8)+168|0,(vc(s+(E*80048|0)+28|0,s+(E*80048|0)+40028|0,a[s+(E*80048|0)+24>>2]|0,s+(E*80048|0)+80028|0,f,m+(v<<8)+72|0,T)|0)>=0):0){w=m+(v<<8)+8|0;k=m+(v<<8)+20|0;y=m+(v<<8)+40|0;_=m+(v<<8)+12|0;S=m+(v<<8)+24|0;x=m+(v<<8)+48|0;switch(Lc(o,l,p,e,t,i,r,f,T,h,w,k,y,_,S,x,g,m+(v<<8)+240|0,m+(v<<8)+248|0)|0){case 0:{a[m+(v<<8)+236>>2]=0;break}case-1:{a[m+(v<<8)+236>>2]=2;break}case-2:{a[m+(v<<8)+236>>2]=3;break}case-3:{a[m+(v<<8)+236>>2]=4;break}case-4:{a[m+(v<<8)+236>>2]=5;break}case-5:{a[m+(v<<8)+236>>2]=9;break}case-6:{a[m+(v<<8)+236>>2]=1;break}default:{}}if(!C){if(q){a[m+(v<<8)+4>>2]=a[_>>2];a[m+(v<<8)+16>>2]=a[S>>2];u[m+(v<<8)+32>>3]=+u[x>>3]}}else{a[m+(v<<8)+4>>2]=a[w>>2];a[m+(v<<8)+16>>2]=a[k>>2];u[m+(v<<8)+32>>3]=+u[y>>3]}v=v+1|0}E=E+1|0}while((E|0)<(n|0))}else v=0;a[b>>2]=v;d=M;return 0}function kc(e,t,i,r){e=e|0;t=t|0;i=+i;r=r|0;var s=0,n=0,o=0,l=0,c=0,p=0,f=0.0,h=0,m=0;l=d;d=d+288|0;p=l+200|0;c=l+104|0;s=l+264|0;o=l+8|0;n=l;h=a[t+16>>2]|0;m=(4-h|0)%4|0;u[p>>3]=+u[t+168+(m<<4)>>3];u[p+8>>3]=+u[t+168+(m<<4)+8>>3];m=(5-h|0)%4|0;u[p+16>>3]=+u[t+168+(m<<4)>>3];u[p+24>>3]=+u[t+168+(m<<4)+8>>3];m=(6-h|0)%4|0;u[p+32>>3]=+u[t+168+(m<<4)>>3];u[p+40>>3]=+u[t+168+(m<<4)+8>>3];h=(7-h|0)%4|0;u[p+48>>3]=+u[t+168+(h<<4)>>3];u[p+56>>3]=+u[t+168+(h<<4)+8>>3];f=i*-.5;u[c>>3]=f;i=i*.5;u[c+8>>3]=i;u[c+16>>3]=0.0;u[c+24>>3]=i;u[c+32>>3]=i;u[c+40>>3]=0.0;u[c+48>>3]=i;u[c+56>>3]=f;u[c+64>>3]=0.0;u[c+72>>3]=f;u[c+80>>3]=f;u[c+88>>3]=0.0;a[s>>2]=p;a[s+4>>2]=c;a[s+8>>2]=4;if((Yn(a[e>>2]|0,p,c,4,o)|0)<0)i=1.0e8;else{m=(jn(a[e>>2]|0,s,o,r,n)|0)<0;i=m?1.0e8:+u[n>>3]}d=l;return+i}function yc(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=+r;s=s|0;var n=0,o=0,l=0,c=0,p=0,f=0.0,h=0,m=0;o=d;d=d+192|0;p=o+104|0;c=o+8|0;l=o+168|0;n=o;h=a[t+16>>2]|0;m=(4-h|0)%4|0;u[p>>3]=+u[t+168+(m<<4)>>3];u[p+8>>3]=+u[t+168+(m<<4)+8>>3];m=(5-h|0)%4|0;u[p+16>>3]=+u[t+168+(m<<4)>>3];u[p+24>>3]=+u[t+168+(m<<4)+8>>3];m=(6-h|0)%4|0;u[p+32>>3]=+u[t+168+(m<<4)>>3];u[p+40>>3]=+u[t+168+(m<<4)+8>>3];h=(7-h|0)%4|0;u[p+48>>3]=+u[t+168+(h<<4)>>3];u[p+56>>3]=+u[t+168+(h<<4)+8>>3];f=r*-.5;u[c>>3]=f;r=r*.5;u[c+8>>3]=r;u[c+16>>3]=0.0;u[c+24>>3]=r;u[c+32>>3]=r;u[c+40>>3]=0.0;u[c+48>>3]=r;u[c+56>>3]=f;u[c+64>>3]=0.0;u[c+72>>3]=f;u[c+80>>3]=f;u[c+88>>3]=0.0;a[l>>2]=p;a[l+4>>2]=c;a[l+8>>2]=4;t=(jn(a[e>>2]|0,l,i,s,n)|0)<0;d=o;return+(t?1.0e8:+u[n>>3])}function _c(e,t,i,r,s,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;var o=0,l=0,c=0,p=0,f=0,h=0,m=0;m=d;d=d+32|0;p=m+20|0;f=m;o=za(s<<4)|0;a[p>>2]=o;if(!o){en(3,5472,m+8|0);kt(1)}l=za(s*24|0)|0;c=p+4|0;a[c>>2]=l;if(!l){en(3,5472,m+16|0);kt(1)}if((s|0)>0){h=0;do{u[o+(h<<4)>>3]=+u[i+(h<<4)>>3];u[o+(h<<4)+8>>3]=+u[i+(h<<4)+8>>3];u[l+(h*24|0)>>3]=+u[r+(h*24|0)>>3];u[l+(h*24|0)+8>>3]=+u[r+(h*24|0)+8>>3];u[l+(h*24|0)+16>>3]=+u[r+(h*24|0)+16>>3];h=h+1|0}while((h|0)<(s|0))}a[p+8>>2]=s;if((jn(a[e>>2]|0,p,t,n,f)|0)<0)u[f>>3]=1.0e8;ja(a[p>>2]|0);ja(a[c>>2]|0);d=m;return+ +u[f>>3]}function Sc(e,t,i,r,s,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;n=n|0;var o=0,l=0,c=0,p=0,f=0,h=0,m=0;m=d;d=d+32|0;p=m+20|0;f=m;o=za(s<<4)|0;a[p>>2]=o;if(!o){en(3,5472,m+8|0);kt(1)}l=za(s*24|0)|0;c=p+4|0;a[c>>2]=l;if(!l){en(3,5472,m+16|0);kt(1)}if((s|0)>0){h=0;do{u[o+(h<<4)>>3]=+u[i+(h<<4)>>3];u[o+(h<<4)+8>>3]=+u[i+(h<<4)+8>>3];u[l+(h*24|0)>>3]=+u[r+(h*24|0)>>3];u[l+(h*24|0)+8>>3]=+u[r+(h*24|0)+8>>3];u[l+(h*24|0)+16>>3]=+u[r+(h*24|0)+16>>3];h=h+1|0}while((h|0)<(s|0))}a[p+8>>2]=s;if((Bn(a[e>>2]|0,p,t,n,f)|0)<0)u[f>>3]=1.0e8;ja(a[p>>2]|0);ja(a[c>>2]|0);d=m;return+ +u[f>>3]}function xc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0;s=za(2080)|0;e:do{if(s){a[s+2068>>2]=i;t:do{if(!r){switch(i|0){case 5:case 12:case 13:case 14:break;default:{n=4;break t}}a[s+2076>>2]=0}else n=4}while(0);do{if((n|0)==4){n=za(ie(t,e)|0)|0;a[s>>2]=n;if(!n){ja(s);s=0;break e}else{a[s+2076>>2]=1;break}}}while(0);a[s+2072>>2]=r;a[s+4>>2]=0;a[s+8>>2]=e;a[s+12>>2]=t}}while(0);return s|0}function Cc(e){e=e|0;if(e){if(a[e+2076>>2]|0)ja(a[e>>2]|0);ja(a[e+4>>2]|0);ja(e)}return}function qc(e,t){e=e|0;t=t|0;var i=0,s=0,o=0,l=0,c=0,u=0,p=0;c=d;d=d+16|0;s=c;i=a[e+2068>>2]|0;e:do{switch(i|0){case 5:case 12:case 13:case 14:if(!(a[e+2072>>2]|0)){a[e>>2]=t;i=0;break e}else{Kc(a[e>>2]|0,t|0,ie(a[e+12>>2]|0,a[e+8>>2]|0)|0)|0;i=0;break e}default:{if((i&-2|0)==2){i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(a[e>>2]|0)+o>>0]=(((n[t+(l|1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l|2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break e}else l=l+4|0}}if((i&-3|0)==4){i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(a[e>>2]|0)+o>>0]=(((n[t+(l|2)>>0]|0)+(n[t+(l|1)>>0]|0)+(n[t+(l|3)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break e}else l=l+4|0}}if(i>>>0<2){i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(a[e>>2]|0)+o>>0]=(((n[t+(l+1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l+2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break e}else l=l+3|0}}switch(i|0){case 8:{i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(a[e>>2]|0)+o>>0]=r[t+l>>0]|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 7:{i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(a[e>>2]|0)+o>>0]=r[t+(l|1)>>0]|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 9:{i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){p=n[t+l>>0]|0;u=n[t+(l|1)>>0]|0;r[(a[e>>2]|0)+o>>0]=(((p&248)+10+(p<<5&224)+(u>>>3&28)+(u<<3&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 10:{i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){u=n[t+l>>0]|0;p=n[t+(l|1)>>0]|0;r[(a[e>>2]|0)+o>>0]=(((u&248)+12+(u<<5&224)+(p>>>3&24)+(p<<2&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 11:{i=e+8|0;s=e+12|0;if(!(ie(a[s>>2]|0,a[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){p=n[t+l>>0]|0;r[(a[e>>2]|0)+o>>0]=(((p&240)+24+(p<<4&240)+((n[t+(l|1)>>0]|0)&240)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(a[s>>2]|0,a[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}default:{en(3,4361,s);i=-1;break e}}}}}while(0);d=c;return i|0}function Tc(e,t){e=e|0;t=t|0;var i=0,r=0;if((e|0)!=0&(t|0)!=0?(qc(e,t)|0)>=0:0){Yc(e+16|0,0,1024)|0;t=a[e>>2]|0;r=ie(a[e+12>>2]|0,a[e+8>>2]|0)|0;i=t+r|0;if((r|0)>0){do{r=e+16+((n[t>>0]|0)<<2)|0;a[r>>2]=(a[r>>2]|0)+1;t=t+1|0}while(t>>>0<i>>>0);t=0}else t=0}else t=-1;return t|0}function Ec(e,t){e=e|0;t=t|0;var i=0;t=Tc(e,t)|0;if((t|0)>=0){t=0;i=0;do{t=(a[e+16+(i<<2)>>2]|0)+t|0;a[e+1040+(i<<2)>>2]=t;i=i+1|0}while((i|0)!=256);t=0}return t|0}function Ac(e,t,i,s){e=e|0;t=t|0;i=+i;s=s|0;var n=0,o=0,l=0;if(!(i<0.0|i>1.0)){t=Ec(e,t)|0;if((t|0)>=0){l=~~(+(ie(a[e+12>>2]|0,a[e+8>>2]|0)|0)*i)>>>0;t=0;while(1){o=t&255;n=a[e+1040+(o<<2)>>2]|0;if(n>>>0<l>>>0)t=t+1<<24>>24;else break}if((n|0)==(l|0))do{t=t+1<<24>>24}while((a[e+1040+((t&255)<<2)>>2]|0)==(l|0));r[s>>0]=((t&255)+o|0)>>>1;t=0}}else t=-1;return t|0}function Pc(e,t,i){e=e|0;t=t|0;i=i|0;return Ac(e,t,.5,i)|0}function Mc(e,t,i){e=e|0;t=t|0;i=i|0;var s=0.0,n=0,o=0.0,l=0.0,c=0.0,u=0.0,d=0,p=0.0,f=0.0;t=Tc(e,t)|0;if((t|0)>=0){t=1;s=0.0;do{s=s+ +((ie(a[e+16+(t<<2)>>2]|0,t)|0)>>>0);t=t+1|0}while((t|0)!=256);u=+(ie(a[e+12>>2]|0,a[e+8>>2]|0)|0);d=0;o=0.0;t=0;c=0.0;p=0.0;while(1){n=a[e+16+(d<<2)>>2]|0;p=p+ +(n>>>0);if(p!=0.0){l=u-p;if(l==0.0)break;o=o+ +((ie(d,n)|0)>>>0);f=o/p-(s-o)/l;l=f*(p*l*f);if(l>c)t=d&255;else l=c}else l=c;if((d&255)<<24>>24==-1)break;else{d=d+1|0;c=l}}r[i>>0]=t;t=0}return t|0}function Ic(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;var o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,b=0,g=0,v=0,w=0,k=0;t=Tc(e,t)|0;do{if((t|0)>=0){w=e+4|0;if(!(a[w>>2]|0)){t=e+8|0;o=e+12|0;v=za(ie(a[o>>2]|0,a[t>>2]|0)|0)|0;a[w>>2]=v;if(!v){t=-1;break}else v=t}else{v=e+8|0;o=e+12|0}b=i>>1;g=0-b|0;t=a[o>>2]|0;if((t|0)>0){f=(b|0)<(g|0);h=(b|0)<(g|0);m=0;do{t=a[v>>2]|0;if((t|0)>0){p=0;do{if(f){l=0;i=0}else{l=0;d=g;i=0;while(1){c=d+m|0;if(((c|0)>=0?(c|0)<(a[o>>2]|0):0)?(k=ie(t,c)|0,!h):0){u=g;while(1){c=u+p|0;if((c|0)>-1&(c|0)<(t|0)){l=l+1|0;i=(n[(a[e>>2]|0)+(k+c)>>0]|0)+i|0}if((u|0)<(b|0))u=u+1|0;else break}}if((d|0)<(b|0))d=d+1|0;else break}}d=(ie(t,m)|0)+p|0;r[(a[w>>2]|0)+d>>0]=(i|0)/(l|0)|0;p=p+1|0;t=a[v>>2]|0}while((p|0)<(t|0))}m=m+1|0;t=a[o>>2]|0}while((m|0)<(t|0))}if((s|0)!=0?(ie(t,a[v>>2]|0)|0)>0:0){t=0;do{e=(a[w>>2]|0)+t|0;r[e>>0]=(n[e>>0]|0)+s;t=t+1|0}while((t|0)<(ie(a[o>>2]|0,a[v>>2]|0)|0));t=0}else t=0}}while(0);return t|0}function Rc(e,t,i,r,s,a,n,o,l,c){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;a=a|0;n=n|0;o=o|0;l=l|0;c=c|0;var u=0;e:do{switch(s|0){case 0:{switch(a|0){case 1:{if(c){u=zi(e,t,i,c,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){u=Mi(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=Ri(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=Fi(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=Ni(e,t,i,n,l)|0;break e}case 8:{u=Li(e,t,i,n,l)|0;break e}case 7:{u=Di(e,t,i,n,l)|0;break e}case 9:{u=Ii(e,t,i,n,l)|0;break e}case 10:{u=$i(e,t,i,n,l)|0;break e}case 11:{u=Oi(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){u=_i(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=xi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=Ti(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=Ei(e,t,i,n,l)|0;break e}case 8:{u=Pi(e,t,i,n,l)|0;break e}case 7:{u=Ai(e,t,i,n,l)|0;break e}case 9:{u=Si(e,t,i,n,l)|0;break e}case 10:{u=qi(e,t,i,n,l)|0;break e}case 11:{u=Ci(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(c){u=ar(e,t,i,c,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){u=Ki(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=Xi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=tr(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=ir(e,t,i,n,l)|0;break e}case 8:{u=sr(e,t,i,n,l)|0;break e}case 7:{u=rr(e,t,i,n,l)|0;break e}case 9:{u=Ji(e,t,i,n,l)|0;break e}case 10:{u=er(e,t,i,n,l)|0;break e}case 11:{u=Zi(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){u=ji(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=Bi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=Yi(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=Vi(e,t,i,n,l)|0;break e}case 8:{u=Gi(e,t,i,n,l)|0;break e}case 7:{u=Wi(e,t,i,n,l)|0;break e}case 9:{u=Hi(e,t,i,n,l)|0;break e}case 10:{u=Qi(e,t,i,n,l)|0;break e}case 11:{u=Ui(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}case 1:{switch(a|0){case 1:{if(c){u=ri(e,t,i,c,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){u=Wt(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=Kt(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=Zt(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=ei(e,t,i,n,l)|0;break e}case 8:{u=ii(e,t,i,n,l)|0;break e}case 7:{u=ti(e,t,i,n,l)|0;break e}case 9:{u=Gt(e,t,i,n,l)|0;break e}case 10:{u=Xt(e,t,i,n,l)|0;break e}case 11:{u=Jt(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){u=nr(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=lr(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=dr(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=Qt(e,t,i,n,l)|0;break e}case 8:{u=Vt(e,t,i,n,l)|0;break e}case 7:{u=Yt(e,t,i,n,l)|0;break e}case 9:{u=or(e,t,i,n,l)|0;break e}case 10:{u=ur(e,t,i,n,l)|0;break e}case 11:{u=cr(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(c){u=Ul(e,t,i,c,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){u=$l(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=Nl(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=zl(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=jl(e,t,i,n,l)|0;break e}case 8:{u=Bl(e,t,i,n,l)|0;break e}case 7:{u=Hl(e,t,i,n,l)|0;break e}case 9:{u=Fl(e,t,i,n,l)|0;break e}case 10:{u=Ll(e,t,i,n,l)|0;break e}case 11:{u=Dl(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){u=si(e,t,i,n,l)|0;break e}if((r&-2|0)==2){u=ni(e,t,i,n,l)|0;break e}if((r&-3|0)==4){u=ci(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{u=ui(e,t,i,n,l)|0;break e}case 8:{u=pi(e,t,i,n,l)|0;break e}case 7:{u=di(e,t,i,n,l)|0;break e}case 9:{u=ai(e,t,i,n,l)|0;break e}case 10:{u=li(e,t,i,n,l)|0;break e}case 11:{u=oi(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}default:kt(0)}}while(0);return u|0}function Oc(e,t){e=e|0;t=t|0;var i=0;if((e|0)!=0?(i=e+7062384|0,(a[i>>2]|0)==0):0){a[i>>2]=t;i=0}else i=-1;return i|0}function $c(e){e=e|0;var t=0;if((e|0)!=0?(t=e+7062384|0,(a[t>>2]|0)!=0):0){a[t>>2]=0;t=0}else t=-1;return t|0}function Fc(){return Nc(16,50)|0}function Nc(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,n=0,o=0,l=0,c=0,u=0,p=0,f=0,h=0,m=0,b=0,g=0;g=d;d=d+64|0;b=g+56|0;m=g+48|0;l=g+40|0;o=g+32|0;n=g+24|0;s=g+16|0;r=g+8|0;i=g;e:do{if(!((e+-16|0)>>>0>48|(t|0)<1)){f=za(32)|0;if(!f){en(3,5472,i);kt(1)}a[f>>2]=0;a[f+4>>2]=t;a[f+28>>2]=e;p=za(t<<2)|0;a[f+8>>2]=p;if(!p){en(3,5472,r);kt(1)}i=t<<4;u=za(i)|0;a[f+12>>2]=u;if(!u){en(3,5472,s);kt(1)}s=za(i)|0;c=f+20|0;a[c>>2]=s;if(!s){en(3,5472,n);kt(1)}i=t<<5;n=za(i)|0;a[f+16>>2]=n;if(!n){en(3,5472,o);kt(1)}o=za(i)|0;a[f+24>>2]=o;if(!o){en(3,5472,l);kt(1)}r=ie(e,e)|0;i=r*12|0;r=r<<2;if((t|0)>0){e=0;t:while(1){a[p+(e<<2)>>2]=0;s=e<<2;o=0;while(1){if((o|0)>=4)break;l=za(i)|0;n=o+s|0;a[u+(n<<2)>>2]=l;if(!l){i=18;break t}l=za(r)|0;a[(a[c>>2]|0)+(n<<2)>>2]=l;if(!l){i=20;break t}else o=o+1|0}e=e+1|0;if((e|0)>=(t|0)){h=f;break e}}if((i|0)==18){en(3,5472,m);kt(1)}else if((i|0)==20){en(3,5472,b);kt(1)}}else h=f}else h=0}while(0);d=g;return h|0}function Dc(e){e=e|0;var t=0,i=0,r=0,s=0,n=0,o=0,l=0;if(!e)t=-1;else{t=e+4|0;i=e+8|0;r=e+12|0;s=e+20|0;if((a[t>>2]|0)>0){n=0;do{if(a[(a[i>>2]|0)+(n<<2)>>2]|0)Za(e,n)|0;o=n<<2;ja(a[(a[r>>2]|0)+(o<<2)>>2]|0);ja(a[(a[s>>2]|0)+(o<<2)>>2]|0);l=1+o|0;ja(a[(a[r>>2]|0)+(l<<2)>>2]|0);ja(a[(a[s>>2]|0)+(l<<2)>>2]|0);l=2+o|0;ja(a[(a[r>>2]|0)+(l<<2)>>2]|0);ja(a[(a[s>>2]|0)+(l<<2)>>2]|0);o=3+o|0;ja(a[(a[r>>2]|0)+(o<<2)>>2]|0);ja(a[(a[s>>2]|0)+(o<<2)>>2]|0);n=n+1|0}while((n|0)<(a[t>>2]|0))}ja(e);t=0}return t|0}function Lc(e,t,i,s,o,l,c,p,f,h,m,b,g,v,w,k,y,_,S){e=e|0;t=t|0;i=i|0;s=s|0;o=o|0;l=l|0;c=c|0;p=p|0;f=f|0;h=+h;m=m|0;b=b|0;g=g|0;v=v|0;w=w|0;k=k|0;y=y|0;_=_|0;S=S|0;var x=0,C=0,q=0,T=0,E=0,A=0,P=0,M=0,I=0,R=0,O=0,$=0,F=0,N=0;N=d;d=d+12448|0;q=N+12440|0;C=N+8|0;$=N;O=N+12312|0;F=N+24|0;do{if((i+-2|0)>>>0<3){if((y|0)!=2830){x=y&255;if((Ya(t,2,x,x*3|0,s,o,l,c,p,f,h,F)|0)<0){a[v>>2]=-1;x=-6;break}x=Va(F,x,v,w,k,y,_)|0;if(!S)break;a[S>>2]=0;a[S+4>>2]=0;break}if((Ya(t,2,14,42,s,o,l,c,p,f,.875,F)|0)<0){a[v>>2]=-1;x=-6;break}a[C>>2]=0;a[C+4>>2]=182;a[C+8>>2]=195;a[C+12>>2]=13;y=r[F+(a[C>>2]|0)>>0]|0;x=(y&255)>0?y:0;y=(y&255)<255?y:-1;R=r[F+(a[C+4>>2]|0)>>0]|0;x=(R&255)>(x&255)?R:x;y=(R&255)<(y&255)?R:y;R=r[F+(a[C+8>>2]|0)>>0]|0;x=(R&255)>(x&255)?R:x;y=(R&255)<(y&255)?R:y;R=r[F+(a[C+12>>2]|0)>>0]|0;x=((R&255)>(x&255)?R:x)&255;y=((R&255)<(y&255)?R:y)&255;e:do{if((x-y|0)>=30){R=(x+y|0)>>>1;r[q>>0]=(n[F+(a[C>>2]|0)>>0]|0)>>>0<R>>>0&1;r[q+1>>0]=(n[F+(a[C+4>>2]|0)>>0]|0)>>>0<R>>>0&1;r[q+2>>0]=(n[F+(a[C+8>>2]|0)>>0]|0)>>>0<R>>>0&1;r[q+3>>0]=(n[F+(a[C+12>>2]|0)>>0]|0)>>>0<R>>>0&1;y=0;while(1){x=y+1|0;if(((r[q+y>>0]|0)==1?(r[q+((x|0)%4|0)>>0]|0)==1:0)?(r[q+((y+2|0)%4|0)>>0]|0)==0:0){I=y;break}if((x|0)<4)y=x;else{I=x;break}}switch(I|0){case 4:{a[w>>2]=0;u[k>>3]=-1.0;x=-3;y=0;C=0;break e}case 0:{C=119;x=255;y=0;do{A=y+-3|0;T=(y&-2|0)==12;E=y*14|0;q=0;do{if(((q+-3|A)>>>0>=8?(M=q&-2,(q|y)>>>0>=2):0)?!(T&((M|0)==0|(M|0)==12)):0){P=(n[F+(q+E)>>0]|0)-R|0;r[O+C>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;C=C+-1|0;x=(P|0)<(x|0)?P:x}q=q+1|0}while((q|0)!=14);y=y+1|0}while((y|0)!=14);break}case 1:{C=119;x=255;y=0;do{A=y+-3|0;E=y&-2;T=(E|0)==0;E=(E|0)==12;q=13;while(1){if(((q+-3|A)>>>0>=8?(P=(q&-2|0)==12,!(T&P)):0)?!(E&(q>>>0<2|P)):0){M=(n[F+((q*14|0)+y)>>0]|0)-R|0;r[O+C>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;C=C+-1|0;x=(M|0)<(x|0)?M:x}if((q|0)>0)q=q+-1|0;else break}y=y+1|0}while((y|0)!=14);break}case 2:{y=119;x=255;A=13;while(1){T=A+-3|0;E=A>>>0<2|(A&-2|0)==12;q=A*14|0;C=13;while(1){if((C+-3|T)>>>0>=8?!((C|A)>>>0<2|E&(C&-2|0)==12):0){M=(n[F+(C+q)>>0]|0)-R|0;r[O+y>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;y=y+-1|0;x=(M|0)<(x|0)?M:x}if((C|0)>0)C=C+-1|0;else break}if((A|0)>0)A=A+-1|0;else break}break}case 3:{y=119;x=255;A=13;while(1){E=A+-3|0;T=A&-2;q=(T|0)==12;T=(T|0)==0;C=0;do{if(((C+-3|E)>>>0>=8?!(q&C>>>0<2|(C|A)>>>0<2):0)?!(T&(C&-2|0)==12):0){M=(n[F+((C*14|0)+A)>>0]|0)-R|0;r[O+y>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;y=y+-1|0;x=(M|0)<(x|0)?M:x}C=C+1|0}while((C|0)!=14);if((A|0)>0)A=A+-1|0;else break}break}default:x=255}a[w>>2]=I;u[k>>3]=(x|0)>30?1.0:+(x|0)/30.0;x=Ka(2830,0,0,O,$)|0;if((x|0)<0){x=-4;y=0;C=0}else{if(_)a[_>>2]=x;C=$;x=0;y=a[C>>2]|0;C=a[C+4>>2]|0}}else{a[w>>2]=0;u[k>>3]=-1.0;x=-2;y=0;C=0}}while(0);if((x|0)<0){a[v>>2]=-1;break}if((y|0)==-1&(C|0)==-1){a[v>>2]=-1;x=-5;break}a[v>>2]=(y&-32768|0)==0&0==0?y&32767:0;if(!S)x=0;else{x=S;a[x>>2]=y;a[x+4>>2]=C;x=0}}else x=1}while(0);e:do{switch(i|0){case 0:case 1:case 3:case 4:{if(!e){a[m>>2]=-1;y=-1;break e}y=e+28|0;C=a[y>>2]|0;q=C<<2;switch(i|0){case 0:case 3:if((Ya(t,0,C,q,s,o,l,c,p,f,h,F)|0)<0){a[m>>2]=-1;y=-6;break e}else{y=Wa(e,0,F,a[y>>2]|0,m,b,g)|0;break e}default:if((Ya(t,1,C,q,s,o,l,c,p,f,h,F)|0)<0){a[m>>2]=-1;y=-6;break e}else{y=Wa(e,1,F,a[y>>2]|0,m,b,g)|0;break e}}}default:y=1}}while(0);if((x|0)!=1){if((y|0)!=1)x=(y&x|0)<0?y:0}else x=y;d=N;return x|0}function zc(e){e=e|0;var t=0,i=0,r=0,s=0,n=0,o=0,l=0,c=0;c=d;d=d+16|0;t=c+8|0;o=c+4|0;i=c;a[o>>2]=e;do{if(e>>>0>=212){n=(e>>>0)/210|0;r=n*210|0;a[i>>2]=e-r;t=(jc(3712,3904,i,t)|0)-3712>>2;s=t;t=(a[3712+(t<<2)>>2]|0)+r|0;e:while(1){r=5;while(1){if(r>>>0>=47){r=211;l=8;break}i=a[3520+(r<<2)>>2]|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=106;break e}if((t|0)==(ie(e,i)|0))break;else r=r+1|0}t:do{if((l|0)==8)while(1){l=0;i=(t>>>0)/(r>>>0)|0;if(i>>>0<r>>>0){l=105;break e}if((t|0)==(ie(i,r)|0))break t;i=r+10|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+12|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+16|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+18|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+22|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+28|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+30|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+36|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+40|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+42|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+46|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+52|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+58|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+60|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+66|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+70|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+72|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+78|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+82|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+88|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+96|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+100|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+102|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+106|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+108|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+112|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+120|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+126|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+130|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+136|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+138|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+142|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+148|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+150|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+156|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+162|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+166|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+168|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+172|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+178|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+180|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+186|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+190|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+192|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+196|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+198|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+208|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break;else{r=r+210|0;l=8}}}while(0);r=s+1|0;t=(r|0)==48;r=t?0:r;t=(t&1)+n|0;s=r;n=t;t=(a[3712+(r<<2)>>2]|0)+(t*210|0)|0}if((l|0)==105){a[o>>2]=t;break}else if((l|0)==106){a[o>>2]=t;break}}else t=a[(jc(3520,3712,o,t)|0)>>2]|0}while(0);d=c;return t|0}function jc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0;s=a[i>>2]|0;r=e;i=t-e>>2;e:while(1){while(1){if(!i)break e;e=(i|0)/2|0;if((a[r+(e<<2)>>2]|0)>>>0<s>>>0)break;else i=e}r=r+(e+1<<2)|0;i=i+-1-e|0}return r|0}function Hc(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0;if(i>>>0>4294967279)ls(e);if(i>>>0<11){r[e>>0]=i<<1;e=e+1|0}else{n=i+16&-16;s=Pr(n)|0;a[e+8>>2]=s;a[e>>2]=n|1;a[e+4>>2]=i;e=s}Kc(e|0,t|0,i|0)|0;r[e+i>>0]=0;return}function Bc(e){e=e|0;if(r[e>>0]&1)Mr(a[e+8>>2]|0);return}function Uc(){}function Qc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;r=t-r-(i>>>0>e>>>0|0)>>>0;return(I=r,e-i>>>0|0)|0}function Yc(e,t,i){e=e|0;t=t|0;i=i|0;var s=0,n=0,o=0,l=0;s=e+i|0;if((i|0)>=20){t=t&255;o=e&3;l=t|t<<8|t<<16|t<<24;n=s&~3;if(o){o=e+4-o|0;while((e|0)<(o|0)){r[e>>0]=t;e=e+1|0}}while((e|0)<(n|0)){a[e>>2]=l;e=e+4|0}}while((e|0)<(s|0)){r[e>>0]=t;e=e+1|0}return e-i|0}function Vc(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){I=t<<i|(e&(1<<i)-1<<32-i)>>>32-i;return e<<i}I=e<<i-32;return 0}function Wc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;i=e+i>>>0;return(I=t+r+(i>>>0<e>>>0|0)>>>0,i|0)|0}function Gc(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){I=t>>>i;return e>>>i|(t&(1<<i)-1)<<32-i}I=0;return t>>>i-32|0}function Kc(e,t,i){e=e|0;t=t|0;i=i|0;var s=0;if((i|0)>=4096)return Xe(e|0,t|0,i|0)|0;s=e|0;if((e&3)==(t&3)){while(e&3){if(!i)return s|0;r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;i=i-1|0}while((i|0)>=4){a[e>>2]=a[t>>2];e=e+4|0;t=t+4|0;i=i-4|0}}while((i|0)>0){r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;i=i-1|0}return s|0}function Jc(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){I=t>>i;return e>>>i|(t&(1<<i)-1)<<32-i}I=(t|0)<0?-1:0;return t>>i-32|0}function Xc(e){e=e|0;var t=0;t=r[m+(e&255)>>0]|0;if((t|0)<8)return t|0;t=r[m+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=r[m+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(r[m+(e>>>24)>>0]|0)+24|0}function Zc(e,t){e=e|0;t=t|0;var i=0,r=0,s=0,a=0;a=e&65535;s=t&65535;i=ie(s,a)|0;r=e>>>16;e=(i>>>16)+(ie(s,r)|0)|0;s=t>>>16;t=ie(s,a)|0;return(I=(e>>>16)+(ie(s,r)|0)+(((e&65535)+t|0)>>>16)|0,e+t<<16|i&65535|0)|0}function eu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,a=0,n=0,o=0,l=0,c=0;c=t>>31|((t|0)<0?-1:0)<<1;l=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;a=r>>31|((r|0)<0?-1:0)<<1;s=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;o=Qc(c^e,l^t,c,l)|0;n=I;e=a^c;t=s^l;return Qc((au(o,n,Qc(a^i,s^r,a,s)|0,I,0)|0)^e,I^t,e,t)|0}function tu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0,o=0,l=0,c=0,u=0;s=d;d=d+16|0;l=s|0;o=t>>31|((t|0)<0?-1:0)<<1;n=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;u=r>>31|((r|0)<0?-1:0)<<1;c=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;e=Qc(o^e,n^t,o,n)|0;t=I;au(e,t,Qc(u^i,c^r,u,c)|0,I,l)|0;r=Qc(a[l>>2]^o,a[l+4>>2]^n,o,n)|0;i=I;d=s;return(I=i,r)|0}function iu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,a=0;s=e;a=i;i=Zc(s,a)|0;e=I;return(I=(ie(t,a)|0)+(ie(r,s)|0)+e|e&0,i|0|0)|0}function ru(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return au(e,t,i,r,0)|0}function su(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var s=0,n=0;n=d;d=d+16|0;s=n|0;au(e,t,i,r,s)|0;d=n;return(I=a[s+4>>2]|0,a[s>>2]|0)|0}function au(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;var n=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0;d=e;c=t;u=c;o=i;f=r;l=f;if(!u){n=(s|0)!=0;if(!l){if(n){a[s>>2]=(d>>>0)%(o>>>0);a[s+4>>2]=0}f=0;s=(d>>>0)/(o>>>0)>>>0;return(I=f,s)|0}else{if(!n){f=0;s=0;return(I=f,s)|0}a[s>>2]=e|0;a[s+4>>2]=t&0;f=0;s=0;return(I=f,s)|0}}n=(l|0)==0;do{if(o){if(!n){n=(se(l|0)|0)-(se(u|0)|0)|0;if(n>>>0<=31){p=n+1|0;l=31-n|0;t=n-31>>31;o=p;e=d>>>(p>>>0)&t|u<<l;t=u>>>(p>>>0)&t;n=0;l=d<<l;break}if(!s){f=0;s=0;return(I=f,s)|0}a[s>>2]=e|0;a[s+4>>2]=c|t&0;f=0;s=0;return(I=f,s)|0}n=o-1|0;if(n&o){l=(se(o|0)|0)+33-(se(u|0)|0)|0;m=64-l|0;p=32-l|0;c=p>>31;h=l-32|0;t=h>>31;o=l;e=p-1>>31&u>>>(h>>>0)|(u<<p|d>>>(l>>>0))&t;t=t&u>>>(l>>>0);n=d<<m&c;l=(u<<m|d>>>(h>>>0))&c|d<<p&l-33>>31;break}if(s){a[s>>2]=n&d;a[s+4>>2]=0}if((o|0)==1){h=c|t&0;m=e|0|0;return(I=h,m)|0}else{m=Xc(o|0)|0;h=u>>>(m>>>0)|0;m=u<<32-m|d>>>(m>>>0)|0;return(I=h,m)|0}}else{if(n){if(s){a[s>>2]=(u>>>0)%(o>>>0);a[s+4>>2]=0}h=0;m=(u>>>0)/(o>>>0)>>>0;return(I=h,m)|0}if(!d){if(s){a[s>>2]=0;a[s+4>>2]=(u>>>0)%(l>>>0)}h=0;m=(u>>>0)/(l>>>0)>>>0;return(I=h,m)|0}n=l-1|0;if(!(n&l)){if(s){a[s>>2]=e|0;a[s+4>>2]=n&u|t&0}h=0;m=u>>>((Xc(l|0)|0)>>>0);return(I=h,m)|0}n=(se(l|0)|0)-(se(u|0)|0)|0;if(n>>>0<=30){t=n+1|0;l=31-n|0;o=t;e=u<<l|d>>>(t>>>0);t=u>>>(t>>>0);n=0;l=d<<l;break}if(!s){h=0;m=0;return(I=h,m)|0}a[s>>2]=e|0;a[s+4>>2]=c|t&0;h=0;m=0;return(I=h,m)|0}}while(0);if(!o){u=l;c=0;l=0}else{p=i|0|0;d=f|r&0;u=Wc(p|0,d|0,-1,-1)|0;i=I;c=l;l=0;do{r=c;c=n>>>31|c<<1;n=l|n<<1;r=e<<1|r>>>31|0;f=e>>>31|t<<1|0;Qc(u,i,r,f)|0;m=I;h=m>>31|((m|0)<0?-1:0)<<1;l=h&1;e=Qc(r,f,h&p,(((m|0)<0?-1:0)>>31|((m|0)<0?-1:0)<<1)&d)|0;t=I;o=o-1|0}while((o|0)!=0);u=c;c=0}o=0;if(s){a[s>>2]=e;a[s+4>>2]=t}h=(n|0)>>>31|(u|o)<<1|(o<<1|n>>>31)&0|c;m=(n<<1|0>>>31)&-2|l;return(I=h,m)|0}function nu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return Du[e&15](t|0,i|0,r|0)|0}function ou(e,t,i,r,s,a){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;a=a|0;Lu[e&3](t|0,i|0,r|0,s|0,a|0)}function lu(e,t,i){e=e|0;t=t|0;i=i|0;return+zu[e&1](t|0,i|0)}function cu(e,t,i){e=e|0;t=t|0;i=+i;ju[e&3](t|0,+i)}function uu(e,t){e=e|0;t=t|0;return+Hu[e&3](t|0)}function du(e){e=e|0;return Bu[e&1]()|0}function pu(e,t){e=e|0;t=t|0;Uu[e&15](t|0)}function fu(e,t,i){e=e|0;t=t|0;i=i|0;Qu[e&7](t|0,i|0)}function hu(e,t){e=e|0;t=t|0;return Yu[e&31](t|0)|0}function mu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;Vu[e&1](t|0,i|0,r|0)}function bu(e){e=e|0;Wu[e&0]()}function gu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=+r;Gu[e&3](t|0,i|0,+r)}function vu(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;return Ku[e&1](t|0,i|0,r|0,s|0)|0}function wu(e,t,i,r,s,a,n){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;a=a|0;n=n|0;Ju[e&3](t|0,i|0,r|0,s|0,a|0,n|0)}function ku(e,t,i){e=e|0;t=t|0;i=i|0;return Xu[e&15](t|0,i|0)|0}function yu(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;Zu[e&3](t|0,i|0,r|0,s|0)}function _u(e,t,i){e=e|0;t=t|0;i=i|0;ae(0);return 0}function Su(e,t,i,r,s){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;ae(1)}function xu(e,t){e=e|0;t=t|0;ae(2);return 0.0}function Cu(e,t){e=e|0;t=+t;ae(3)}function qu(e){e=e|0;ae(4);return 0.0}function Tu(){ae(5);return 0}function Eu(e){e=e|0;ae(6)}function Au(e,t){e=e|0;t=t|0;ae(7)}function Pu(e){e=e|0;ae(8);return 0}function Mu(e,t,i){e=e|0;t=t|0;i=i|0;ae(9)}function Iu(){ae(10)}function Ru(e,t,i){e=e|0;t=t|0;i=+i;ae(11)}function Ou(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;ae(12);return 0}function $u(e,t,i,r,s,a){e=e|0;t=t|0;i=i|0;r=r|0;s=s|0;a=a|0;ae(13)}function Fu(e,t){e=e|0;t=t|0;ae(14);return 0}function Nu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;ae(15)}var Du=[_u,Qr,Yr,Fa,Fs,$s,Ns,Bo,$o,Ro,Oo,jo,Tl,ql,Os,Ia];var Lu=[Su,ss,rs,es];var zu=[xu,kl];var ju=[Cu,uo,fo,go];var Hu=[qu,po,ho,vo];var Bu=[Tu,to];var Uu=[Eu,Ir,Rr,Dr,jr,Lr,zr,Hr,Br,Ur,eo,pl,fl,Ea,Aa,Eu];var Qu=[Au,Co,So,mo,wo,yo,Po,Sl];var Yu=[Pu,Or,Rs,ro,co,so,Lo,zo,Ao,Eo,qo,xo,bo,ko,_o,Mo,_l,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu,Pu];var Vu=[Mu,wl];var Wu=[Iu];var Gu=[Ru,yl,vl,Ru];var Ku=[Ou,Al];var Ju=[$u,os,ns,as];var Xu=[Fu,Qn,no,oo,lo,Fo,Do,No,Ho,To,El,xl,Fu,Fu,Fu,Fu];var Zu=[Nu,Wr,Gr,Jr];return{_i64Subtract:Qc,_fflush:Us,_i64Add:Wc,_memset:Yc,_malloc:za,_memcpy:Kc,___getTypeName:kr,_bitshift64Lshr:Gc,_free:ja,___errno_location:us,_bitshift64Shl:Vc,__GLOBAL__sub_I_ARToolKitJS_cpp:dl,__GLOBAL__sub_I_bind_cpp:_r,runPostSets:Uc,stackAlloc:fi,stackSave:hi,stackRestore:mi,establishStackSpace:bi,setThrew:gi,setTempRet0:ki,getTempRet0:yi,dynCall_iiii:nu,dynCall_viiiii:ou,dynCall_dii:lu,dynCall_vid:cu,dynCall_di:uu,dynCall_i:du,dynCall_vi:pu,dynCall_vii:fu,dynCall_ii:hu,dynCall_viii:mu,dynCall_v:bu,dynCall_viid:gu,dynCall_iiiii:vu,dynCall_viiiiii:wu,dynCall_iii:ku,dynCall_viiii:yu}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module["_i64Subtract"]=asm["_i64Subtract"],__GLOBAL__sub_I_bind_cpp=Module["__GLOBAL__sub_I_bind_cpp"]=asm["__GLOBAL__sub_I_bind_cpp"],_fflush=Module["_fflush"]=asm["_fflush"],__GLOBAL__sub_I_ARToolKitJS_cpp=Module["__GLOBAL__sub_I_ARToolKitJS_cpp"]=asm["__GLOBAL__sub_I_ARToolKitJS_cpp"],_i64Add=Module["_i64Add"]=asm["_i64Add"],_memset=Module["_memset"]=asm["_memset"],runPostSets=Module["runPostSets"]=asm["runPostSets"],_malloc=Module["_malloc"]=asm["_malloc"],_memcpy=Module["_memcpy"]=asm["_memcpy"],___getTypeName=Module["___getTypeName"]=asm["___getTypeName"],_bitshift64Lshr=Module["_bitshift64Lshr"]=asm["_bitshift64Lshr"],_free=Module["_free"]=asm["_free"],___errno_location=Module["___errno_location"]=asm["___errno_location"],_bitshift64Shl=Module["_bitshift64Shl"]=asm["_bitshift64Shl"],dynCall_iiii=Module["dynCall_iiii"]=asm["dynCall_iiii"],dynCall_viiiii=Module["dynCall_viiiii"]=asm["dynCall_viiiii"],dynCall_dii=Module["dynCall_dii"]=asm["dynCall_dii"],dynCall_vid=Module["dynCall_vid"]=asm["dynCall_vid"],dynCall_di=Module["dynCall_di"]=asm["dynCall_di"],dynCall_i=Module["dynCall_i"]=asm["dynCall_i"],dynCall_vi=Module["dynCall_vi"]=asm["dynCall_vi"],dynCall_vii=Module["dynCall_vii"]=asm["dynCall_vii"],dynCall_ii=Module["dynCall_ii"]=asm["dynCall_ii"],dynCall_viii=Module["dynCall_viii"]=asm["dynCall_viii"],dynCall_v=Module["dynCall_v"]=asm["dynCall_v"],dynCall_viid=Module["dynCall_viid"]=asm["dynCall_viid"],dynCall_iiiii=Module["dynCall_iiiii"]=asm["dynCall_iiiii"],dynCall_viiiiii=Module["dynCall_viiiiii"]=asm["dynCall_viiiiii"],dynCall_iii=Module["dynCall_iii"]=asm["dynCall_iii"],dynCall_viiii=Module["dynCall_viiii"]=asm["dynCall_viiii"],initialStackTop;function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Runtime.stackAlloc=asm["stackAlloc"],Runtime.stackSave=asm["stackSave"],Runtime.stackRestore=asm["stackRestore"],Runtime.establishStackSpace=asm["establishStackSpace"],Runtime.setTempRet0=asm["setTempRet0"],Runtime.getTempRet0=asm["getTempRet0"],ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var preloadStartTime=null,calledMain=!1;function run(e){function t(){Module["calledRun"]||(Module["calledRun"]=!0,ABORT||(ensureInitRuntime(),preMain(),Module["onRuntimeInitialized"]&&Module["onRuntimeInitialized"](),Module["_main"]&&shouldRunNow&&Module["callMain"](e),postRun()))}e=e||Module["arguments"],null===preloadStartTime&&(preloadStartTime=Date.now()),runDependencies>0||(preRun(),runDependencies>0||Module["calledRun"]||(Module["setStatus"]?(Module["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){Module["setStatus"]("")}),1),t()}),1)):t()))}function exit(e,t){if(!t||!Module["noExitRuntime"])throw Module["noExitRuntime"]||(ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),Module["onExit"]&&Module["onExit"](e)),ENVIRONMENT_IS_NODE?(process["stdout"]["once"]("drain",(function(){process["exit"](e)})),console.log(" "),setTimeout((function(){process["exit"](e)}),500)):ENVIRONMENT_IS_SHELL&&"function"===typeof quit&&quit(e),new ExitStatus(e)}dependenciesFulfilled=function e(){Module["calledRun"]||run(),Module["calledRun"]||(dependenciesFulfilled=e)},Module["callMain"]=Module.callMain=function(e){assert(0==runDependencies,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called"),e=e||[],ensureInitRuntime();var t=e.length+1;function i(){for(var e=0;e<3;e++)r.push(0)}var r=[allocate(intArrayFromString(Module["thisProgram"]),"i8",ALLOC_NORMAL)];i();for(var s=0;s<t-1;s+=1)r.push(allocate(intArrayFromString(e[s]),"i8",ALLOC_NORMAL)),i();r.push(0),r=allocate(r,"i32",ALLOC_NORMAL);try{var a=Module["_main"](t,r,0);exit(a,!0)}catch(n){if(n instanceof ExitStatus)return;if("SimulateInfiniteLoop"==n)return void(Module["noExitRuntime"]=!0);throw n&&"object"===typeof n&&n.stack&&Module.printErr("exception thrown: "+[n,n.stack]),n}finally{calledMain=!0}},Module["run"]=Module.run=run,Module["exit"]=Module.exit=exit;var abortDecorators=[];function abort(e){void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.",i="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach((function(t){i=t(i,e)})),i}if(Module["abort"]=Module.abort=abort,Module["preInit"]){"function"==typeof Module["preInit"]&&(Module["preInit"]=[Module["preInit"]]);while(Module["preInit"].length>0)Module["preInit"].pop()()}var shouldRunNow=!0;Module["noInitialRun"]&&(shouldRunNow=!1),run(),function(){"use strict";var e=function(e,i,r){var s=e,a=i;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;r=i,s=n.videoWidth||n.width,a=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=s,this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.videoWidth=s,this.videoHeight=a,"string"===typeof r){var o=this;this.cameraParam=new t(r,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=r,this._initialize()};e.prototype.dispose=function(){for(var e in i.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,r,s=this.getMarkerNum();for(t in this.patternMarkers)r=this.patternMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(t in this.barcodeMarkers)r=this.barcodeMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(var a=0;a<s;a++){var n=this.getMarker(a),o=i.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=i.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(a,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=i.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(a,n.dirMatrix)),o!==i.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(a,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(a,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:a,type:o,marker:n,matrix:this.transform_mat}})}var c=this.getMultiMarkerCount();for(a=0;a<c;a++){var u=this.getMultiMarkerPatternCount(a);l=!1;i.getTransMatMultiSquareRobust(this.id,a),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<u;d++){var p=this.getMultiEachMarker(a,d);if(p.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:a,matrix:this.transform_mat}});break}}if(l)for(d=0;d<u;d++){p=this.getMultiEachMarker(a,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:a,markerIndex:d,marker:p,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var i=this.patternMarkers[e];return i||(this.patternMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.trackBarcodeMarkerId=function(e,t){var i=this.barcodeMarkers[e];return i||(this.barcodeMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.getMultiMarkerCount=function(){return i.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return i.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var i=this.listeners[e].indexOf(t);i>-1&&this.listeners[e].splice(i,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var i=0;i<t.length;i++)t[i].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,r){return i.addMarker(this.id,e,t,r)},e.prototype.loadMultiMarker=function(e,t,r){return i.addMultiMarker(this.id,e,t,r)},e.prototype.getTransMatSquare=function(e,t,r){return i.getTransMatSquare(this.id,e,t),r.set(this.marker_transform_mat),r},e.prototype.getTransMatSquareCont=function(e,t,r,s){return this.marker_transform_mat.set(r),i.getTransMatSquareCont(this.id,e,t),s.set(this.marker_transform_mat),s},e.prototype.getTransMatMultiSquare=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,i){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=i&&0!==i&&(t[12]*=i,t[13]*=i,t[14]*=i),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?i.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return i.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===i.getMarker(this.id,e))return i.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var r=0;r<t.length;r++)this.marker_transform_mat[2*r+0]=t[r][0],this.marker_transform_mat[2*r+1]=t[r][1];return i.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===i.getMultiEachMarker(this.id,e,t))return i.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return i.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return i.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return i.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return i.setLogLevel(e)},e.prototype.getLogLevel=function(){return i.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return i.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return i.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return i.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return i.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return i.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return i.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return i.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return i.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return i.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return i.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return i.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return i.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return i.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return i.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return i.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return i.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return i.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return i.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return i.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var i=this.getMarkerNum(),r=0;r<i;r++)this._debugMarker(this.getMarker(r))},e.prototype._initialize=function(){this.id=i.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=i.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){if(!e||"undefined"===typeof e)return!1;if("IMG"===e.nodeName&&e.width>e.height||"VIDEO"===e.nodeName&&e.videoWidth>e.videoHeight)this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.canvas.height/this.canvas.width,i=this.canvas.width*t,r=this.canvas.height*t,s=(this.canvas.width-r)/2;this.ctx.drawImage(e,s,0,r,i)}if(0===this.canvas.width||0===this.canvas.height)return!1;var a=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=a.data;return!!this.dataHeap&&(this.dataHeap.set(n),!0)},e.prototype._debugMarker=function(e){var t,i;t=e.vertex;var r=this.ctx;r.strokeStyle="red",r.beginPath(),r.moveTo(t[0][0],t[0][1]),r.lineTo(t[1][0],t[1][1]),r.stroke(),r.beginPath(),r.moveTo(t[2][0],t[2][1]),r.lineTo(t[3][0],t[3][1]),r.stroke(),r.strokeStyle="green",r.beginPath(),r.lineTo(t[1][0],t[1][1]),r.lineTo(t[2][0],t[2][1]),r.stroke(),r.beginPath(),r.moveTo(t[3][0],t[3][1]),r.lineTo(t[0][0],t[0][1]),r.stroke(),i=e.pos,r.beginPath(),r.arc(i[0],i[1],8,0,2*Math.PI),r.fillStyle="red",r.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",i=e.onSuccess,r=e.onError||function(e){console.error("ARController.getUserMedia",e)},s=document.createElement("video"),a=function(){0!==this.videoWidth&&i(s)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){n&&(s.play(),s.paused||o.forEach((function(e){window.removeEventListener(e,l,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var c=function(e){s.addEventListener("loadedmetadata",a,!1),s.src=window.URL.createObjectURL(e),n=!0,l()},u={},d={};e.width&&(d.width=e.width,"object"===typeof e.width?(e.width.max&&(u.maxWidth=e.width.max),e.width.min&&(u.minWidth=e.width.max)):u.maxWidth=e.width),e.height&&(d.height=e.height,"object"===typeof e.height?(e.height.max&&(u.maxHeight=e.height.max),e.height.min&&(u.minHeight=e.height.max)):u.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var p={audio:!1,video:{mandatory:u}};return navigator.getUserMedia?navigator.getUserMedia(p,c,r):r("navigator.getUserMedia is not supported on your browser"),s},e.getUserMediaARController=function(i){var r={};for(var s in i)r[s]=i[s];var a=i.onSuccess,n=i.cameraParam;r.onSuccess=function(){new t(n,(function(){var t=this,r=i.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),s=r/Math.max(o.videoWidth,o.videoHeight),n=s*o.videoWidth,l=s*o.videoHeight;if(o.videoWidth<o.videoHeight){var c=n;n=l,l=c}var u=new e(n,l,t);u.image=o,o.videoWidth<o.videoHeight?(u.orientation="portrait",u.videoWidth=o.videoHeight,u.videoHeight=o.videoWidth):(u.orientation="landscape",u.videoWidth=o.videoWidth,u.videoHeight=o.videoHeight),a(u,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(r);return o};var t=function(e,t,i){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=i,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;i.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&i.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var i={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:p,addMarker:n,addMultiMarker:u},r=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function s(){for(var e in r.forEach((function(e){i[e]=Module[e]})),Module)e.match(/^AR/)&&(i[e]=Module[e])}var a=0;function n(e,t,i){var r="/marker_"+a++;m(t,r,(function(){var t=Module._addMarker(e,r);i&&i(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),i=t.split("\n"),r=[],s=0;return i.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(s){case 0:return+e,void(s=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void s++;case 5:return void(s=1)}})),r}var c=0;function u(e,t,i){var r="/multi_marker_"+c++;m(t,r,(function(s){var a=l(s);function n(){var t=Module._addMultiMarker(e,r),s=Module.getMultiMarkerNum(e,t);i&&i(t,s)}if(!a.length)return n();var o=t.split("/").slice(0,-1).join("/");a=a.map((function(e){return"patt.hiro"===e||"patt.kanji"===e||"patt2.hiro"===e||"patt2.kanji"===e?["http://127.0.0.1:8080/data/data/"+e,e]:[o+"/"+e,e]})),b(a,n)}))}var d=0;function p(e,t){var i="/camera_param_"+d++,r=function(){var e=Module._loadCamera(i);t&&t(e)};"object"===typeof e?h(i,e,r):e.indexOf("\n")>-1?f(i,e,r):m(e,i,r)}function f(e,t,i){for(var r=new Uint8Array(t.length),s=0;s<r.length;s++)r[s]=255&t.charCodeAt(s);h(e,r,i)}function h(e,t,i){FS.writeFile(e,t,{encoding:"binary"}),i(t)}function m(e,t,i){var r=new XMLHttpRequest;r.open("GET",e,!0),console.log(e),r.responseType="arraybuffer",r.onload=function(e){console.log("before buffer");var s=r.response,a=new Uint8Array(s);h(t,a,i)},r.send()}function b(e,t){var i=e.pop();i?m(i[0],i[1],(function(){b(e,t)})):t()}window.artoolkit=i,window.ARController=e,window.ARCameraParam=t,window.Module?s():window.Module={onRuntimeInitialized:function(){s()}}}();var AR=AR||{};AR.Marker=function(e,t){this.id=e,this.corners=t},AR.Detector=function(){this.grey=new CV.Image,this.thres=new CV.Image,this.homography=new CV.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},AR.Detector.prototype.detect=function(e){return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,.2*e.width,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)},AR.Detector.prototype.findCandidates=function(e,t,i,r){var s,a,n,o=[],l=e.length;for(this.polys=[],n=0;n<l;++n)s=e[n],s.length>=t&&(a=CV.approxPolyDP(s,s.length*i),this.polys.push(a),4===a.length&&CV.isContourConvex(a)&&CV.minEdgeLength(a)>=r&&o.push(a));return o},AR.Detector.prototype.clockwiseCorners=function(e){var t,i,r,s,a,n,o=e.length;for(n=0;n<o;++n)t=e[n][1].x-e[n][0].x,r=e[n][1].y-e[n][0].y,i=e[n][2].x-e[n][0].x,s=e[n][2].y-e[n][0].y,t*s-r*i<0&&(a=e[n][1],e[n][1]=e[n][3],e[n][3]=a);return e},AR.Detector.prototype.notTooNear=function(e,t){var i,r,s,a,n,o,l=[],c=e.length;for(a=0;a<c;++a)for(n=a+1;n<c;++n){for(i=0,o=0;o<4;++o)r=e[a][o].x-e[n][o].x,s=e[a][o].y-e[n][o].y,i+=r*r+s*s;i/4<t*t&&(CV.perimeter(e[a])<CV.perimeter(e[n])?e[a].tooNear=!0:e[n].tooNear=!0)}for(a=0;a<c;++a)e[a].tooNear||l.push(e[a]);return l},AR.Detector.prototype.findMarkers=function(e,t,i){var r,s,a,n=[],o=t.length;for(a=0;a<o;++a)r=t[a],CV.warp(e,this.homography,r,i),CV.threshold(this.homography,this.homography,CV.otsu(this.homography)),s=this.getMarker(this.homography,r),s&&n.push(s);return n},AR.Detector.prototype.getMarker=function(e,t){var i,r,s,a,n,o=e.width/7>>>0,l=o*o>>1,c=[],u=[],d=[];for(a=0;a<7;++a)for(s=0===a||6===a?1:6,n=0;n<7;n+=s)if(i={x:n*o,y:a*o,width:o,height:o},CV.countNonZero(e,i)>l)return null;for(a=0;a<5;++a)for(c[a]=[],n=0;n<5;++n)i={x:(n+1)*o,y:(a+1)*o,width:o,height:o},c[a][n]=CV.countNonZero(e,i)>l?1:0;for(u[0]=c,d[0]=this.hammingDistance(u[0]),r={first:d[0],second:0},a=1;a<4;++a)u[a]=this.rotate(u[a-1]),d[a]=this.hammingDistance(u[a]),d[a]<r.first&&(r.first=d[a],r.second=a);return 0!==r.first?null:new AR.Marker(this.mat2id(u[r.second]),this.rotate2(t,4-r.second))},AR.Detector.prototype.hammingDistance=function(e){var t,i,r,s,a,n=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],o=0;for(r=0;r<5;++r){for(i=1/0,s=0;s<4;++s){for(t=0,a=0;a<5;++a)t+=e[r][a]===n[s][a]?0:1;t<i&&(i=t)}o+=i}return o},AR.Detector.prototype.mat2id=function(e){var t,i=0;for(t=0;t<5;++t)i<<=1,i|=e[t][1],i<<=1,i|=e[t][3];return i},AR.Detector.prototype.rotate=function(e){var t,i,r=[],s=e.length;for(t=0;t<s;++t)for(r[t]=[],i=0;i<e[t].length;++i)r[t][i]=e[e[t].length-i-1][t];return r},AR.Detector.prototype.rotate2=function(e,t){var i,r=[],s=e.length;for(i=0;i<s;++i)r[i]=e[(t+i)%s];return r};var CV=CV||{};CV.Image=function(e,t,i){this.width=e||0,this.height=t||0,this.data=i||[]},CV.grayscale=function(e,t){for(var i=e.data,r=t.data,s=i.length,a=0,n=0;a<s;a+=4)r[n++]=.299*i[a]+.587*i[a+1]+.114*i[a+2]+.5&255;return t.width=e.width,t.height=e.height,t},CV.threshold=function(e,t,i){var r,s=e.data,a=t.data,n=s.length,o=[];for(r=0;r<256;++r)o[r]=r<=i?0:255;for(r=0;r<n;++r)a[r]=o[s[r]];return t.width=e.width,t.height=e.height,t},CV.adaptiveThreshold=function(e,t,i,r){var s,a=e.data,n=t.data,o=a.length,l=[];for(CV.stackBoxBlur(e,t,i),s=0;s<768;++s)l[s]=s-255<=-r?255:0;for(s=0;s<o;++s)n[s]=l[a[s]-n[s]+255];return t.width=e.width,t.height=e.height,t},CV.otsu=function(e){var t,i,r,s=e.data,a=s.length,n=[],o=0,l=0,c=0,u=0,d=0,p=0;for(r=0;r<256;++r)n[r]=0;for(r=0;r<a;++r)n[s[r]]++;for(r=0;r<256;++r)l+=n[r]*r;for(r=0;r<256;++r)if(u+=n[r],0!==u){if(d=a-u,0===d)break;c+=n[r]*r,t=c/u-(l-c)/d,i=u*d*t*t,i>p&&(p=i,o=r)}return o},CV.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],CV.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],CV.BlurStack=function(){this.color=0,this.next=null},CV.stackBoxBlur=function(e,t,i){var r,s,a,n,o,l,c,u,d,p,f=e.data,h=t.data,m=e.height,b=e.width,g=m-1,v=b-1,w=i+i+1,k=i+1,y=CV.stackBoxBlurMult[i],_=CV.stackBoxBlurShift[i];for(r=s=new CV.BlurStack,p=1;p<w;++p)r=r.next=new CV.BlurStack;for(r.next=s,o=0,d=0;d<m;++d){for(l=o,a=f[o],n=k*a,r=s,p=0;p<k;++p)r.color=a,r=r.next;for(p=1;p<k;++p)r.color=f[o+p],n+=r.color,r=r.next;for(r=s,u=0;u<b;++u)h[o++]=n*y>>>_,c=u+k,c=l+(c<v?c:v),n-=r.color-f[c],r.color=f[c],r=r.next}for(u=0;u<b;++u){for(o=u,l=o+b,a=h[o],n=k*a,r=s,p=0;p<k;++p)r.color=a,r=r.next;for(p=1;p<k;++p)r.color=h[l],n+=r.color,r=r.next,l+=b;for(r=s,d=0;d<m;++d)h[o]=n*y>>>_,c=d+k,c=u+(c<g?c:g)*b,n-=r.color-h[c],r.color=h[c],r=r.next,o+=b}return t},CV.gaussianBlur=function(e,t,i,r){var s=CV.gaussianKernel(r);return t.width=e.width,t.height=e.height,i.width=e.width,i.height=e.height,CV.gaussianBlurFilter(e,i,s,!0),CV.gaussianBlurFilter(i,t,s,!1),t},CV.gaussianBlurFilter=function(e,t,i,r){var s,a,n,o,l,c=e.data,u=t.data,d=e.height,p=e.width,f=0,h=i.length>>1;for(n=0;n<d;++n)for(o=0;o<p;++o){for(a=0,l=-h;l<=h;++l)r?(s=f+l,o+l<0?s=f:o+l>=p&&(s=f)):(s=f+l*p,n+l<0?s=f:n+l>=d&&(s=f)),a+=i[h+l]*c[s];u[f++]=r?a:a+.5&255}return t},CV.gaussianKernel=function(e){var t,i,r,s,a,n,o=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]],l=[];if(e<=7&&e%2===1)l=o[e>>1];else{for(t=.5*(e-1),i=.8+.3*(t-1),r=-.5/(i*i),s=0,n=0;n<e;++n)a=n-t,s+=l[n]=Math.exp(r*a*a);for(s=1/s,n=0;n<e;++n)l[n]*=s}return l},CV.findContours=function(e,t){var i,r,s,a,n,o,l,c,u,d=e.width,p=e.height,f=[];for(i=CV.binaryBorder(e,t),r=CV.neighborhoodDeltas(d+2),s=d+3,n=1,c=0;c<p;++c,s+=2)for(u=0;u<d;++u,++s)a=i[s],0!==a&&(o=l=!1,1===a&&0===i[s-1]?o=!0:a>=1&&0===i[s+1]&&(l=!0),(o||l)&&(++n,f.push(CV.borderFollowing(i,s,n,{x:u,y:c},l,r))));return f},CV.borderFollowing=function(e,t,i,r,s,a){var n,o,l,c,u,d=[];d.hole=s,c=u=s?0:4;do{if(c=c-1&7,n=t+a[c],0!==e[n])break}while(c!==u);if(c===u)e[t]=-i,d.push({x:r.x,y:r.y});else{o=t,4^c;while(1){u=c;do{l=o+a[++c]}while(0===e[l]);if(c&=7,c-1>>>0<u>>>0?e[o]=-i:1===e[o]&&(e[o]=i),d.push({x:r.x,y:r.y}),c,r.x+=CV.neighborhood[c][0],r.y+=CV.neighborhood[c][1],l===t&&o===n)break;o=l,c=c+4&7}}return d},CV.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],CV.neighborhoodDeltas=function(e){for(var t=[],i=CV.neighborhood.length,r=0;r<i;++r)t[r]=CV.neighborhood[r][0]+CV.neighborhood[r][1]*e;return t.concat(t)},CV.approxPolyDP=function(e,t){var i,r,s,a,n,o,l,c,u,d,p,f={start_index:0,end_index:0},h={start_index:0,end_index:0},m=[],b=[],g=e.length;for(t*=t,p=0,u=0;u<3;++u)for(n=0,p=(p+h.start_index)%g,r=e[p],++p===g&&(p=0),d=1;d<g;++d)i=e[p],++p===g&&(p=0),l=i.x-r.x,c=i.y-r.y,a=l*l+c*c,a>n&&(n=a,h.start_index=d);n<=t?m.push({x:r.x,y:r.y}):(f.start_index=p,f.end_index=h.start_index+=f.start_index,h.start_index-=h.start_index>=g?g:0,h.end_index=f.start_index,h.end_index<h.start_index&&(h.end_index+=g),b.push({start_index:h.start_index,end_index:h.end_index}),b.push({start_index:f.start_index,end_index:f.end_index}));while(0!==b.length){if(f=b.pop(),s=e[f.end_index%g],r=e[p=f.start_index%g],++p===g&&(p=0),f.end_index<=f.start_index+1)o=!0;else{for(n=0,l=s.x-r.x,c=s.y-r.y,u=f.start_index+1;u<f.end_index;++u)i=e[p],++p===g&&(p=0),a=Math.abs((i.y-r.y)*l-(i.x-r.x)*c),a>n&&(n=a,h.start_index=u);o=n*n<=t*(l*l+c*c)}o?m.push({x:r.x,y:r.y}):(h.end_index=f.end_index,f.end_index=h.start_index,b.push({start_index:h.start_index,end_index:h.end_index}),b.push({start_index:f.start_index,end_index:f.end_index}))}return m},CV.warp=function(e,t,i,r){var s,a,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k,y,_,S,x,C,q,T=e.data,E=t.data,A=e.width,P=e.height,M=0;for(b=CV.getPerspectiveTransform(i,r-1),g=b[8],v=b[2],w=b[5],C=0;C<r;++C)for(g+=b[7],v+=b[1],w+=b[4],k=g,y=v,_=w,q=0;q<r;++q)k+=b[6],y+=b[0],_+=b[3],S=y/k,x=_/k,s=S>>>0,a=s===A-1?s:s+1,n=S-s,o=1-n,l=x>>>0,c=l===P-1?l:l+1,u=x-l,d=1-u,p=f=l*A,h=m=c*A,E[M++]=d*(o*T[p+s]+n*T[f+a])+u*(o*T[h+s]+n*T[m+a])&255;return t.width=r,t.height=r,t},CV.getPerspectiveTransform=function(e,t){var i=CV.square2quad(e);return i[0]/=t,i[1]/=t,i[3]/=t,i[4]/=t,i[6]/=t,i[7]/=t,i},CV.square2quad=function(e){var t,i,r,s,a,n,o,l=[];return t=e[0].x-e[1].x+e[2].x-e[3].x,i=e[0].y-e[1].y+e[2].y-e[3].y,0===t&&0===i?(l[0]=e[1].x-e[0].x,l[1]=e[2].x-e[1].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y,l[4]=e[2].y-e[1].y,l[5]=e[0].y,l[6]=0,l[7]=0,l[8]=1):(r=e[1].x-e[2].x,s=e[3].x-e[2].x,a=e[1].y-e[2].y,n=e[3].y-e[2].y,o=r*n-s*a,l[6]=(t*n-s*i)/o,l[7]=(r*i-t*a)/o,l[8]=1,l[0]=e[1].x-e[0].x+l[6]*e[1].x,l[1]=e[3].x-e[0].x+l[7]*e[3].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y+l[6]*e[1].y,l[4]=e[3].y-e[0].y+l[7]*e[3].y,l[5]=e[0].y),l},CV.isContourConvex=function(e){var t,i,r,s,a,n,o,l,c=0,u=!0,d=e.length,p=0,f=0;for(i=e[d-1],t=e[0],a=t.x-i.x,n=t.y-i.y;p<d;++p){if(++f===d&&(f=0),i=t,t=e[f],o=t.x-i.x,l=t.y-i.y,r=o*n,s=l*a,c|=s>r?1:s<r?2:3,3===c){u=!1;break}a=o,n=l}return u},CV.perimeter=function(e){for(var t,i,r=e.length,s=0,a=r-1,n=0;s<r;a=s++)t=e[s].x-e[a].x,i=e[s].y-e[a].y,n+=Math.sqrt(t*t+i*i);return n},CV.minEdgeLength=function(e){for(var t,i,r,s=e.length,a=0,n=s-1,o=1/0;a<s;n=a++)i=e[a].x-e[n].x,r=e[a].y-e[n].y,t=i*i+r*r,t<o&&(o=t);return Math.sqrt(o)},CV.countNonZero=function(e,t){var i,r,s=e.data,a=t.height,n=t.width,o=t.x+t.y*e.width,l=e.width-n,c=0;for(i=0;i<a;++i){for(r=0;r<n;++r)0!==s[o++]&&++c;o+=l}return c},CV.binaryBorder=function(e,t){var i,r,s=e.data,a=e.height,n=e.width,o=0,l=0;for(r=-2;r<n;++r)t[l++]=0;for(i=0;i<a;++i){for(t[l++]=0,r=0;r<n;++r)t[l++]=0===s[o++]?0:1;t[l++]=0}for(r=-2;r<n;++r)t[l++]=0;return t};var POS=POS||{};POS.Posit=function(e,t){this.objectPoints=this.buildModel(e),this.focalLength=t,this.objectVectors=[],this.objectNormal=[],this.objectMatrix=[[],[],[]],this.init()},POS.Posit.prototype.buildModel=function(e){var t=e/2;return[[-t,t,0],[t,t,0],[t,-t,0],[-t,-t,0]]},POS.Posit.prototype.init=function(){var e,t=this.objectPoints.length,i=[],r=[],s=0,a=2;for(e=0;e<t;++e)this.objectVectors[e]=[this.objectPoints[e][0]-this.objectPoints[0][0],this.objectPoints[e][1]-this.objectPoints[0][1],this.objectPoints[e][2]-this.objectPoints[0][2]],i[e]=[this.objectVectors[e][0],this.objectVectors[e][1],this.objectVectors[e][2]];while(0===s)r[0]=this.objectVectors[1][1]*this.objectVectors[a][2]-this.objectVectors[1][2]*this.objectVectors[a][1],r[1]=this.objectVectors[1][2]*this.objectVectors[a][0]-this.objectVectors[1][0]*this.objectVectors[a][2],r[2]=this.objectVectors[1][0]*this.objectVectors[a][1]-this.objectVectors[1][1]*this.objectVectors[a][0],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),++a;for(e=0;e<3;++e)this.objectNormal[e]=r[e]/s;POS.pseudoInverse(i,t,this.objectMatrix)},POS.Posit.prototype.pose=function(e){var t,i,r,s,a,n,o=[[],[],[]],l=[[],[],[]],c=[],u=[[],[],[]],d=[[],[],[]],p=[],f=[];for(this.pos(e,o,l,c),r=this.isValid(o,c),t=r?this.iterate(e,o,c,u,p):{euclidean:-1,pixels:-1,maximum:-1},s=this.isValid(l,c),i=s?this.iterate(e,l,c,d,f):{euclidean:-1,pixels:-1,maximum:-1},a=0;a<3;++a)for(n=0;n<3;++n)r&&(p[a]-=u[a][n]*this.objectPoints[0][n]),s&&(f[a]-=d[a][n]*this.objectPoints[0][n]);return t.euclidean<i.euclidean?new POS.Pose(t.pixels,u,p,i.pixels,d,f):new POS.Pose(i.pixels,d,f,t.pixels,u,p)},POS.Posit.prototype.pos=function(e,t,i,r){var s,a,n,o,l,c,u,d,p,f,h=this.objectPoints.length,m=[],b=[],g=[],v=[],w=[],k=[],y=[],_=[];for(p=0;p<h;++p)m[p]=[e[p].x-e[0].x,e[p].y-e[0].y];for(p=0;p<3;++p)for(b[p]=0,g[p]=0,f=0;f<h;++f)b[p]+=this.objectMatrix[p][f]*m[f][0],g[p]+=this.objectMatrix[p][f]*m[f][1];for(s=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],a=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],n=b[0]*g[0]+b[1]*g[1]+b[2]*g[2],o=(a-s)*(a-s)+n*n*4,l=a-s>=0?(a-s+Math.sqrt(o))/2:(a-s-Math.sqrt(o))/2,l>=0?(c=Math.sqrt(l),u=0===c?0:-n/c):(c=Math.sqrt(-n*n/l),u=0===c?Math.sqrt(s-a):-n/c),p=0;p<3;++p)v[p]=b[p]+c*this.objectNormal[p],w[p]=g[p]+u*this.objectNormal[p];for(d=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]),p=0;p<3;++p)k[p]=v[p]/d,y[p]=w[p]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],p=0;p<3;++p)t[0][p]=k[p],t[1][p]=y[p],t[2][p]=_[p];for(p=0;p<3;++p)v[p]=b[p]-c*this.objectNormal[p],w[p]=g[p]-u*this.objectNormal[p];for(p=0;p<3;++p)k[p]=v[p]/d,y[p]=w[p]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],p=0;p<3;++p)i[0][p]=k[p],i[1][p]=y[p],i[2][p]=_[p];r[0]=e[0].x/d,r[1]=e[0].y/d,r[2]=this.focalLength/d},POS.Posit.prototype.isValid=function(e,t){for(var i,r=this.objectPoints.length,s=1/0,a=0;a<r;++a)i=t[2]+(e[2][0]*this.objectVectors[a][0]+e[2][1]*this.objectVectors[a][1]+e[2][2]*this.objectVectors[a][2]),i<s&&(s=i);return s>=0},POS.Posit.prototype.iterate=function(e,t,i,r,s){var a,n,o,l,c,u,d,p,f,h=this.objectPoints.length,m=[],b=[],g=[[],[],[]],v=[[],[],[]],w=[],k=[],y=!1,_=0;for(p=0;p<h;++p)m[p]={x:e[p].x,y:e[p].y};for(p=0;p<3;++p){for(f=0;f<3;++f)r[p][f]=t[p][f];s[p]=i[p]}for(p=0;p<h;++p){for(o=0,f=0;f<3;++f)o+=this.objectVectors[p][f]*r[2][f]/s[2];b[p]={x:(1+o)*e[p].x,y:(1+o)*e[p].y}}for(n=0,p=0;p<h;++p)n+=Math.abs(b[p].x-m[p].x),n+=Math.abs(b[p].y-m[p].y);for(p=0;p<3;++p)w[p]=s[p]-(r[p][0]*this.objectPoints[0][0]+r[p][1]*this.objectPoints[0][1]+r[p][2]*this.objectPoints[0][2]);l=c=this.error(e,r,w),y=0===c.pixels||n<.01;while(_++<100&&!y){for(p=0;p<h;++p)m[p].x=b[p].x,m[p].y=b[p].y;for(this.pos(b,g,v,s),p=0;p<3;++p)w[p]=s[p]-(g[p][0]*this.objectPoints[0][0]+g[p][1]*this.objectPoints[0][1]+g[p][2]*this.objectPoints[0][2]),k[p]=s[p]-(v[p][0]*this.objectPoints[0][0]+v[p][1]*this.objectPoints[0][1]+v[p][2]*this.objectPoints[0][2]);if(c=this.error(e,g,w),u=this.error(e,v,k),c.euclidean>=0&&u.euclidean>=0)if(u.euclidean<c.euclidean)for(l=u,p=0;p<3;++p)for(f=0;f<3;++f)r[p][f]=v[p][f];else for(l=c,p=0;p<3;++p)for(f=0;f<3;++f)r[p][f]=g[p][f];if(c.euclidean<0&&u.euclidean>=0)for(l=u,p=0;p<3;++p)for(f=0;f<3;++f)r[p][f]=v[p][f];if(u.euclidean<0&&c.euclidean>=0)for(l=c,p=0;p<3;++p)for(f=0;f<3;++f)r[p][f]=g[p][f];for(p=0;p<h;++p){for(o=0,f=0;f<3;++f)o+=this.objectVectors[p][f]*r[2][f]/s[2];b[p].x=(1+o)*e[p].x,b[p].y=(1+o)*e[p].y}for(a=n,n=0,p=0;p<h;++p)n+=Math.abs(b[p].x-m[p].x),n+=Math.abs(b[p].y-m[p].y);d=Math.abs(n-a),y=0===l.pixels||d<.01}return l},POS.Posit.prototype.error=function(e,t,i){var r,s,a,n=this.objectPoints.length,o=[],l=[],c=[],u=0,d=0,p=0;if(!this.isValid(t,i))return{euclidean:-1,pixels:-1,maximum:-1};for(r=0;r<n;++r)for(o[r]=[],s=0;s<3;++s)o[r][s]=i[s];for(r=0;r<n;++r)for(s=0;s<3;++s)for(a=0;a<3;++a)o[r][s]+=t[s][a]*this.objectPoints[r][a];for(r=0;r<n;++r)for(l[r]=[],s=0;s<2;++s)l[r][s]=this.focalLength*o[r][s]/o[r][2];for(r=0;r<n;++r)c[r]=[l[r][0]-e[r].x,l[r][1]-e[r].y];for(r=0;r<n;++r)u+=Math.sqrt(c[r][0]*c[r][0]+c[r][1]*c[r][1]),d+=Math.abs(Math.round(l[r][0])-Math.round(e[r].x))+Math.abs(Math.round(l[r][1])-Math.round(e[r].y)),Math.abs(c[r][0])>p&&(p=Math.abs(c[r][0])),Math.abs(c[r][1])>p&&(p=Math.abs(c[r][1]));return{euclidean:u/n,pixels:d,maximum:p}},POS.pseudoInverse=function(e,t,i){var r,s,a,n=[],o=[[],[],[]],l=[[],[],[]],c=0,u=0;for(SVD.svdcmp(e,t,3,n,o),r=0;r<3;++r)n[r]>c&&(c=n[r]);for(c*=.01,r=0;r<3;++r)n[r]<c&&(n[r]=0);for(s=0;s<3;++s)if(0===n[s])for(++u,a=s;a<2;++a){for(r=0;r<t;++r)e[r][a]=e[r][a+1];for(r=0;r<3;++r)o[r][a]=o[r][a+1]}for(s=0;s<2;++s)0===n[s]&&(n[s]=n[s+1]);for(r=0;r<3;++r)for(s=0;s<3-u;++s)l[r][s]=o[r][s]/n[s];for(r=0;r<3;++r)for(s=0;s<t;++s)for(i[r][s]=0,a=0;a<3-u;++a)i[r][s]+=l[r][a]*e[s][a]},POS.Pose=function(e,t,i,r,s,a){this.bestError=e,this.bestRotation=t,this.bestTranslation=i,this.alternativeError=r,this.alternativeRotation=s,this.alternativeTranslation=a};var SVD=SVD||{};SVD.svdcmp=function(e,t,i,r,s){var a,n,o,l,c,u,d,p,f,h,m,b,g,v,w,k=0,y=0,_=0,S=[];for(n=0;n<i;++n){if(d=n+1,S[n]=_*y,y=b=_=0,n<t){for(u=n;u<t;++u)_+=Math.abs(e[u][n]);if(0!==_){for(u=n;u<t;++u)e[u][n]/=_,b+=e[u][n]*e[u][n];for(h=e[n][n],y=-SVD.sign(Math.sqrt(b),h),m=h*y-b,e[n][n]=h-y,l=d;l<i;++l){for(b=0,u=n;u<t;++u)b+=e[u][n]*e[u][l];for(h=b/m,u=n;u<t;++u)e[u][l]+=h*e[u][n]}for(u=n;u<t;++u)e[u][n]*=_}}if(r[n]=_*y,y=b=_=0,n<t&&n!==i-1){for(u=d;u<i;++u)_+=Math.abs(e[n][u]);if(0!==_){for(u=d;u<i;++u)e[n][u]/=_,b+=e[n][u]*e[n][u];for(h=e[n][d],y=-SVD.sign(Math.sqrt(b),h),m=h*y-b,e[n][d]=h-y,u=d;u<i;++u)S[u]=e[n][u]/m;for(l=d;l<t;++l){for(b=0,u=d;u<i;++u)b+=e[l][u]*e[n][u];for(u=d;u<i;++u)e[l][u]+=b*S[u]}for(u=d;u<i;++u)e[n][u]*=_}}k=Math.max(k,Math.abs(r[n])+Math.abs(S[n]))}for(n=i-1;n>=0;--n){if(n<i-1){if(0!==y){for(l=d;l<i;++l)s[l][n]=e[n][l]/e[n][d]/y;for(l=d;l<i;++l){for(b=0,u=d;u<i;++u)b+=e[n][u]*s[u][l];for(u=d;u<i;++u)s[u][l]+=b*s[u][n]}}for(l=d;l<i;++l)s[n][l]=s[l][n]=0}s[n][n]=1,y=S[n],d=n}for(n=Math.min(i,t)-1;n>=0;--n){for(d=n+1,y=r[n],l=d;l<i;++l)e[n][l]=0;if(0!==y){for(y=1/y,l=d;l<i;++l){for(b=0,u=d;u<t;++u)b+=e[u][n]*e[u][l];for(h=b/e[n][n]*y,u=n;u<t;++u)e[u][l]+=h*e[u][n]}for(l=n;l<t;++l)e[l][n]*=y}else for(l=n;l<t;++l)e[l][n]=0;++e[n][n]}for(u=i-1;u>=0;--u)for(o=1;o<=30;++o){for(a=!0,d=u;d>=0;--d){if(p=d-1,Math.abs(S[d])+k===k){a=!1;break}if(Math.abs(r[p])+k===k)break}if(a)for(f=0,b=1,n=d;n<=u;++n){if(h=b*S[n],Math.abs(h)+k===k)break;for(y=r[n],m=SVD.pythag(h,y),r[n]=m,m=1/m,f=y*m,b=-h*m,l=1;l<=t;++l)v=e[l][p],w=e[l][n],e[l][p]=v*f+w*b,e[l][n]=w*f-v*b}if(w=r[u],d===u){if(w<0)for(r[u]=-w,l=0;l<i;++l)s[l][u]=-s[l][u];break}if(30===o)return!1;for(g=r[d],p=u-1,v=r[p],y=S[p],m=S[u],h=((v-w)*(v+w)+(y-m)*(y+m))/(2*m*v),y=SVD.pythag(h,1),h=((g-w)*(g+w)+m*(v/(h+SVD.sign(y,h))-m))/g,f=b=1,l=d;l<=p;++l){for(n=l+1,y=S[n],v=r[n],m=b*y,y*=f,w=SVD.pythag(h,m),S[l]=w,f=h/w,b=m/w,h=g*f+y*b,y=y*f-g*b,m=v*b,v*=f,c=0;c<i;++c)g=s[c][l],w=s[c][n],s[c][l]=g*f+w*b,s[c][n]=w*f-g*b;for(w=SVD.pythag(h,m),r[l]=w,0!==w&&(w=1/w,f=h*w,b=m*w),h=f*y+b*v,g=f*v-b*y,c=0;c<t;++c)v=e[c][l],w=e[c][n],e[c][l]=v*f+w*b,e[c][n]=w*f-v*b}S[d]=0,S[u]=h,r[u]=g}return!0},SVD.pythag=function(e,t){var i,r=Math.abs(e),s=Math.abs(t);return r>s?(i=s/r,r*Math.sqrt(1+i*i)):0===s?0:(i=r/s,s*Math.sqrt(1+i*i))},SVD.sign=function(e,t){return t>=0?Math.abs(e):-Math.abs(e)};var THREEx=THREEx||{};THREEx.ArucoContext=function(e){e=e||{},this.parameters={debug:void 0!==e.debug&&e.debug,canvasWidth:void 0!==e.canvasWidth?e.canvasWidth:640,canvasHeight:void 0!==e.canvasHeight?e.canvasHeight:480},this.canvas=document.createElement("canvas"),this.detector=new AR.Detector,this.debug=null,1==e.debug&&(this.debug=new THREEx.ArucoDebug(this)),this.setSize(this.parameters.canvasWidth,this.parameters.canvasHeight)},THREEx.ArucoContext.prototype.setSize=function(e,t){this.canvas.width=e,this.canvas.height=t,null!==this.debug&&this.debug.setSize(e,t)},THREEx.ArucoContext.prototype.detect=function(e){var t=this.canvas,i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height);var r=i.getImageData(0,0,t.width,t.height),s=this.detector.detect(r);return s},THREEx.ArucoContext.prototype.updateObject3D=function(e,t,i,r){for(var s=r.corners,a=this.canvas,n=new Array(s.length),o=0;o<s.length;++o){var l=s[o];n[o]={x:l.x-a.width/2,y:-l.y+a.height/2}}var c=t.pose(n),u=c.bestRotation,d=c.bestTranslation;e.position.x=d[0],e.position.y=d[1],e.position.z=-d[2],e.rotation.x=-Math.asin(-u[1][2]),e.rotation.y=-Math.atan2(u[0][2],u[2][2]),e.rotation.z=Math.atan2(u[1][0],u[1][1]),e.scale.x=i,e.scale.y=i,e.scale.z=i};var THREEx=THREEx||{};AR.Detector.prototype.detect=function(e){var t=this.datGUIOptions;return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,t.adaptativeThreshold.kernelSize,t.adaptativeThreshold.threshold),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,e.width*t.candidates.minSize,t.candidates.epsilon,t.candidates.minLength),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,t.notTooNear.minDist),this.findMarkers(this.grey,this.candidates,t.findMarkers.warpSize)},AR.Detector.prototype.datGUIOptions={adaptativeThreshold:{kernelSize:2,threshold:7},candidates:{minSize:.2,epsilon:.05,minLength:10},notTooNear:{minDist:10},findMarkers:{warpSize:49}},THREEx.addArucoDatGui=function(e,t){e.detector.datGUIOptions;var i={resolution:"640x480"},r=function(){var t=i.resolution.match(/(\d+)x(\d+)/),r=parseInt(t[1]),s=parseInt(t[2]);e.setSize(r,s)};r(),t.add(i,"resolution",["320x240","640x480"]).onChange(r);var s=t.addFolder("Adaptative Threshold");s.open(),s.add(e.detector.datGUIOptions.adaptativeThreshold,"kernelSize").min(0).step(1).onChange(r),s.add(e.detector.datGUIOptions.adaptativeThreshold,"threshold").min(0).step(1).onChange(r);s=t.addFolder("Candidates");s.open(),s.add(e.detector.datGUIOptions.candidates,"minSize").min(0).max(1).onChange(r),s.add(e.detector.datGUIOptions.candidates,"epsilon").min(0).onChange(r),s.add(e.detector.datGUIOptions.candidates,"minLength").min(0).step(1).onChange(r);s=t.addFolder("notTooNear");s.open(),s.add(e.detector.datGUIOptions.notTooNear,"minDist").min(0).step(1).onChange(r);s=t.addFolder("findMarkers");s.open(),s.add(e.detector.datGUIOptions.findMarkers,"warpSize").min(0).step(1).onChange(r)};var THREEx=THREEx||{};THREEx.ArucoDebug=function(e){this.arucoContext=e,this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.arucoContext.canvas.width,this.canvasElement.height=this.arucoContext.canvas.height},THREEx.ArucoDebug.prototype.setSize=function(e,t){this.canvasElement.width!==e&&(this.canvasElement.width=e),this.canvasElement.height!==t&&(this.canvasElement.height=t)},THREEx.ArucoDebug.prototype.clear=function(){var e=this.canvasElement,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},THREEx.ArucoDebug.prototype.drawContoursContours=function(){var e=this.arucoContext.detector.contours,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(e){return e?"magenta":"blue"}))},THREEx.ArucoDebug.prototype.drawContoursPolys=function(){var e=this.arucoContext.detector.polys,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"green"}))},THREEx.ArucoDebug.prototype.drawContoursCandidates=function(){var e=this.arucoContext.detector.candidates,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"red"}))},THREEx.ArucoDebug.prototype.drawContours=function(e,t,i,r,s,a){var n,o,l,c=e.length,u=this.canvasElement,d=u.getContext("2d");d.save();while(c--){for(o=e[c],d.strokeStyle=a(o.hole),d.beginPath(),n=0;n<o.length;++n)l=o[n],d.moveTo(t+l.x,i+l.y),l=o[(n+1)%o.length],d.lineTo(t+l.x,i+l.y);d.stroke(),d.closePath()}d.restore()},THREEx.ArucoDebug.prototype.drawDetectorGrey=function(){var e=arucoContext.detector.grey;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawDetectorThreshold=function(){var e=arucoContext.detector.thres;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawCVImage=function(e){this.arucoContext.detector;var t=this.canvasElement,i=t.getContext("2d"),r=i.createImageData(t.width,t.height);this.copyCVImage2ImageData(e,r),i.putImageData(r,0,0)},THREEx.ArucoDebug.prototype.copyCVImage2ImageData=function(e,t){var i=e.data.length,r=4*i+3;while(i--)t.data[r-=4]=255,t.data[r-1]=t.data[r-2]=t.data[r-3]=e.data[i];return t},THREEx.ArucoDebug.prototype.drawVideo=function(e){var t=this.canvasElement,i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height)},THREEx.ArucoDebug.prototype.drawMarkerIDs=function(e){var t,i,r,s,a,n,o=this.canvasElement,l=o.getContext("2d");for(l.save(),l.strokeStyle="blue",l.lineWidth=1,a=0;a!==e.length;++a){for(t=e[a].corners,r=1/0,s=1/0,n=0;n!==t.length;++n)i=t[n],r=Math.min(r,i.x),s=Math.min(s,i.y);l.strokeText(e[a].id,r,s)}l.restore()},THREEx.ArucoDebug.prototype.drawMarkerCorners=function(e){var t,i,r,s,a=this.canvasElement,n=a.getContext("2d");for(n.save(),n.lineWidth=3,r=0;r<e.length;++r){for(t=e[r].corners,n.strokeStyle="red",n.beginPath(),s=0;s<t.length;++s)i=t[s],n.moveTo(i.x,i.y),i=t[(s+1)%t.length],n.lineTo(i.x,i.y);n.stroke(),n.closePath(),n.strokeStyle="green",n.strokeRect(t[0].x-2,t[0].y-2,4,4)}n.restore()};var THREEx=THREEx||{};THREEx.ArucoMarkerGenerator=function(){},THREEx.ArucoMarkerGenerator.createSVG=function(e,t){var i=document.createElement("div");return i.innerHTML=new ArucoMarker(e).toSVG(t),i},THREEx.ArucoMarkerGenerator.createImage=function(e,t){var i=this.createCanvas(e,t),r=i.toDataURL(),s=document.createElement("img");return s.src=r,s},THREEx.ArucoMarkerGenerator.createCanvas=function(e,t){var i=document.createElement("canvas"),r=i.getContext("2d");i.width=t,i.height=t;var s=new ArucoMarker(e),a=s.markerMatrix(),n=.1*i.width,o=t-2*n,l=o/7;r.fillStyle="white",r.fillRect(0,0,i.width,i.height),r.fillStyle="black",r.fillRect(n,n,i.width-2*n,i.height-2*n);for(var c=0;c<5;c++)for(var u=0;u<5;u++)1===a[u][c]&&(r.fillStyle="white",r.fillRect(n+(u+1)*l,n+(c+1)*l,l+1,l+1));return i};var THREE=THREE||__webpack_require__("5a89");THREE.WebAR={},THREE.WebAR.MAX_FLOAT32_VALUE=34028e34,THREE.WebAR.VRPointCloud=function(e){this._vrDisplay=e,this._numberOfPointsInLastPointCloud=0,this._bufferGeometry=new THREE.BufferGeometry,this._bufferGeometry.frustumCulled=!1;var t=null;e?(this._pointCloud=new VRPointCloud,e.getPointCloud(this._pointCloud,!1,0,!1),t=this._pointCloud.points):t=new Float32Array([-1,1,-2,1,1,-2,1,-1,-2,-1,-1,-2]);for(var i=new Float32Array(t.length),r=new THREE.Color,s=0;s<i.length;s+=3)e&&(t[s]=THREE.WebAR.MAX_FLOAT32_VALUE,t[s+1]=THREE.WebAR.MAX_FLOAT32_VALUE,t[s+2]=THREE.WebAR.MAX_FLOAT32_VALUE),r.setRGB(1,1,1),i[s]=r.r,i[s+1]=r.g,i[s+2]=r.b;return this._positions=new THREE.BufferAttribute(t,3),this._bufferGeometry.addAttribute("position",this._positions),this._colors=new THREE.BufferAttribute(i,3),this._bufferGeometry.addAttribute("color",this._colors),this._bufferGeometry.computeBoundingSphere(),this},THREE.WebAR.VRPointCloud.prototype.getBufferGeometry=function(){return this._bufferGeometry},THREE.WebAR.VRPointCloud.prototype.update=function(e,t,i){this._vrDisplay&&(this._vrDisplay.getPointCloud(this._pointCloud,!e,"number"===typeof t?t:0,!!i),e&&this._pointCloud.numberOfPoints>0&&(this._positions.needsUpdate=!0))},THREE.WebAR.getIndexFromOrientation=function(e){var t=0;switch(e){case 90:t=1;break;case 180:t=2;break;case 270:t=3;break;default:t=0;break}return t},THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations=function(e){var t=screen.orientation.angle,i=e?e.getSeeThroughCamera():null,r=i?i.orientation:0,s=THREE.WebAR.getIndexFromOrientation(r),a=THREE.WebAR.getIndexFromOrientation(t);return ret=a-s,ret<0&&(ret+=4),ret%4},THREE.WebAR.createVRSeeThroughCameraMesh=function(e,t){var i=new THREE.BufferGeometry;if(e){var r=e.getSeeThroughCamera();if(!r)throw"ERROR: Could not get the see through camera!";n=r,n.readyState=2,n.HAVE_CURRENT_DATA=2;var s=r.width/r.textureWidth,a=r.height/r.textureHeight;i.WebAR_textureCoords=[new Float32Array([0,0,0,a,s,0,s,a]),new Float32Array([s,0,0,0,s,a,0,a]),new Float32Array([s,a,s,0,0,a,0,0]),new Float32Array([0,a,s,a,0,0,s,0])]}else{var n=document.createElement("video");n.src="string"===typeof t?t:"../../resources/videos/sintel.webm",n.play(),i.WebAR_textureCoords=[new Float32Array([0,0,0,1,1,0,1,1]),new Float32Array([1,0,0,0,1,1,0,1]),new Float32Array([1,1,1,0,0,1,0,0]),new Float32Array([0,1,1,1,0,0,1,0])]}i.addAttribute("position",new THREE.BufferAttribute(new Float32Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]),3)),i.setIndex(new THREE.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),i.WebAR_textureCoordIndex=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);var o=i.WebAR_textureCoords[i.WebAR_textureCoordIndex];i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(o),2)),i.computeBoundingSphere();var l,c=new THREE.VideoTexture(n);if(c.minFilter=THREE.NearestFilter,c.magFilter=THREE.NearestFilter,c.format=THREE.RGBFormat,c.flipY=!1,e){var u=["attribute vec3 position;","attribute vec2 uv;","","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","","varying vec2 vUV;","","void main(void) {","    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","    vUV = uv;","}"],d=["#extension GL_OES_EGL_image_external : require","precision mediump float;","","varying vec2 vUV;","","uniform samplerExternalOES map;","","void main(void) {","   gl_FragColor = texture2D(map, vUV);","}"];l=new THREE.RawShaderMaterial({uniforms:{map:{type:"t",value:c}},vertexShader:u.join("\r\n"),fragmentShader:d.join("\r\n"),side:THREE.DoubleSide})}else l=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:c});var p=new THREE.Mesh(i,l);return p},THREE.WebAR.updateCameraMeshOrientation=function(e,t){var i=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);if(i!=t.geometry.WebAR_textureCoordIndex){var r=t.geometry.getAttribute("uv"),s=t.geometry.WebAR_textureCoords[i];t.geometry.WebAR_textureCoordIndex=i;for(var a=0;a<r.length;a++)r.array[a]=s[a];r.needsUpdate=!0}},THREE.WebAR.createVRSeeThroughCamera=function(e,t,i){var r=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,t,i);return e&&THREE.WebAR.resizeVRSeeThroughCamera(e,r),r},THREE.WebAR.resizeVRSeeThroughCamera=function(e,t){if(t.aspect=window.innerWidth/window.innerHeight,e){var i=window.innerWidth>window.innerHeight,r=e.getSeeThroughCamera();if(r){var s=r.width>r.height,a=!(i&&s),n=a?r.height:r.width,o=a?r.width:r.height,l=a?r.focalLengthY:r.focalLengthX,c=a?r.focalLengthX:r.focalLengthY,u=a?r.pointY:r.pointX,d=a?r.pointX:r.pointY,p=t.near/l,f=t.near/c,h=(u-n/2)*p,m=-(d-o/2)*f,b=p*-n/2-h,g=p*n/2-h,v=f*-o/2-m,w=f*o/2-m;t.projectionMatrix.makePerspective(b,g,w,v,t.near,t.far),t.fov=2*THREE.Math.radToDeg(Math.atan(w*t.zoom/t.near))}}else t.updateProjectionMatrix()},THREE.WebAR._worldUp=new THREE.Vector3(0,1,0),THREE.WebAR._normalY=new THREE.Vector3,THREE.WebAR._normalZ=new THREE.Vector3,THREE.WebAR._rotationMatrix=new THREE.Matrix4,THREE.WebAR._planeNormal=new THREE.Vector3,THREE.WebAR.rotateObject3D=function(e,t,i){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown normal1 type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}if(t instanceof THREE.Vector3||t instanceof THREE.Vector4)THREE.WebAR._normalZ.set(t.x,t.y,t.z);else{if(!(e instanceof Float32Array))throw"Unknown normal2 type.";THREE.WebAR._normalZ.set(t[0],t[1],t[2])}THREE.WebAR._normalY.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalZ).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalZ.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalY.z,i.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.rotateObject3DWithPickingPlane=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown plane type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}THREE.WebAR._normalY.set(0,1,0);var i=.5;Math.abs(THREE.WebAR._planeNormal.dot(THREE.WebAR._worldUp))>i&&THREE.WebAR._normalY.set(0,0,1),THREE.WebAR._normalZ.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalY).normalize(),THREE.WebAR._normalY.crossVectors(THREE.WebAR._normalZ,THREE.WebAR._planeNormal).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalY.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalZ.z,t.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.positionObject3DWithPickingPoint=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)t.position.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown point type.";t.position.set(e[0],e[1],e[2])}},THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud=function(e,t,i){THREE.WebAR.rotateObject3DWithPickingPlane(e.plane,t),THREE.WebAR.positionObject3DWithPickingPoint(e.point,t),t.position.add(THREE.WebAR._planeNormal.multiplyScalar(i))},THREE.WebAR.positionAndRotateObject3D=function(e,t,i,r,s){THREE.WebAR.rotateObject3D(t,i,r),THREE.WebAR.positionObject3DWithPickingPoint(e,r),r.position.add(THREE.WebAR._planeNormal.multiplyScalar(s))},function(e,t){__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(){return{WebAR:THREE.WebAR,THREEx:THREEx}})),function(e){function t(e,t,i,r,s){this._listener=t,this._isOnce=i,this.context=r,this._signal=e,this._priority=s||0}function i(e,t){if("function"!==typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}var r={VERSION:"0.7.4"};t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.Signal=function(){this._bindings=[],this._prevParams=null},r.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,i,r,s){var a=this._indexOfListener(e,r);if(-1!==a){if(e=this._bindings[a],e.isOnce()!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,i,r,s),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===e&&i.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,r){return i(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return i(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){i(e,"remove");var r=this._indexOfListener(e,t);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,i=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=i),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(i))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function(e){this.id=THREEx.ArBaseControls.id++,this.object3d=e,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(e){this._sourceElement=e;var t=parseInt(e.style.width),i=parseInt(e.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,t/i,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var e=this._sourceElement,t=this._cameraPicking,i=parseInt(e.style.width),r=parseInt(e.style.height);t.aspect=i/r,t.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(e,t){var i=this._sourceElement,r=this._cameraPicking,s=new THREE.Vector3;s.x=e.layerX/parseInt(i.style.width)*2-1,s.y=-e.layerY/parseInt(i.style.height)*2+1;var a=new THREE.Raycaster;a.setFromCamera(s,r);var n=a.intersectObjects(t);return n},THREEx.ARClickability.prototype.update=function(){},THREEx.ARClickability.tangoPickingPointCloud=function(e,t,i){var r=e._tangoContext.vrDisplay;if(null===r)return null;var s=r.getPickingPointAndPlaneInPointCloud(t,i);if(null==s)return console.warn("Could not retrieve the correct point and plane."),null;var a=.01,n=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(s,n,a),n.rotateZ(-Math.PI/2);var o={};return o.position=n.position,o.quaternion=n.quaternion,o};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(e){var t=!0,i=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),r=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:e},opacity:{value:.5}},defines:{updateInShaderEnabled:t?1:0}}),s=new THREE.Mesh(i,r);s.rotation.x=-Math.PI/2,this.object3d=s;for(var a=-.65,n=.65,o=.75,l=1.05,c=[[]],u=0;u<s.geometry.faces.length;u++)c[0][u]=[],c[0][u][0]=new THREE.Vector2,c[0][u][1]=new THREE.Vector2,c[0][u][2]=new THREE.Vector2;for(var d=0;d<s.geometry.parameters.heightSegments/2;d++)c[0][4*d+0][0].set(a/2+.5,l/2+.5),c[0][4*d+0][1].set(a/2+.5,o/2+.5),c[0][4*d+0][2].set(n/2+.5,l/2+.5),c[0][4*d+1][0].set(a/2+.5,o/2+.5),c[0][4*d+1][1].set(n/2+.5,o/2+.5),c[0][4*d+1][2].set(n/2+.5,l/2+.5),c[0][4*d+2][0].set(a/2+.5,o/2+.5),c[0][4*d+2][1].set(a/2+.5,l/2+.5),c[0][4*d+2][2].set(n/2+.5,o/2+.5),c[0][4*d+3][0].set(a/2+.5,l/2+.5),c[0][4*d+3][1].set(n/2+.5,l/2+.5),c[0][4*d+3][2].set(n/2+.5,o/2+.5);!0===t&&(s.geometry.faceVertexUvs=c,s.geometry.uvsNeedUpdate=!0);var p=[];p.push(new THREE.Vector3(a,l,0)),p.push(new THREE.Vector3(n,l,0)),p.push(new THREE.Vector3(a,o,0)),p.push(new THREE.Vector3(n,o,0));r=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),i=new THREE.PlaneGeometry(1,1);var f=new THREE.Mesh(i,r);return this.orthoMesh=f,void(this.update=function(e,i){m(e,i),!1===t&&h(e,i)});function h(e,t){var i=new THREE.Vector3;c[0].forEach((function(r,a){r.forEach((function(r,n){i.x=2*r.x-1,i.y=2*r.y-1,i.z=0,i.applyMatrix4(e),i.applyMatrix4(t),i.x/=i.z,i.y/=i.z,i.x=i.x/2+.5,i.y=i.y/2+.5,s.geometry.faceVertexUvs[0][a][n].set(i.x,i.y)}))})),s.geometry.uvsNeedUpdate=!0}function m(e,t){var i=[];p.forEach((function(r,s){var a=r.clone();a.applyMatrix4(e),a.applyMatrix4(t),a.x/=a.z,a.y/=a.z,i.push(a)}));for(var r=0;r<i.length;r++)f.geometry.vertices[r].copy(i[r]);f.geometry.computeBoundingSphere(),f.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction="\n        vec2 transformUvToMarkerSpace(vec2 originalUv){\n                vec3 transformedUv;\n                // set transformedUv - from UV coord to clip coord\n                transformedUv.x = originalUv.x * 2.0 - 1.0;\n                transformedUv.y = originalUv.y * 2.0 - 1.0;\n                transformedUv.z = 0.0;\n\n\t\t// apply modelViewMatrix and projectionMatrix\n                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;\n\n\t\t// apply perspective\n\t\ttransformedUv.x /= transformedUv.z;\n\t\ttransformedUv.y /= transformedUv.z;\n\n                // set back from clip coord to Uv coord\n                transformedUv.x = transformedUv.x / 2.0 + 0.5;\n                transformedUv.y = transformedUv.y / 2.0 + 0.5;\n\n                // return the result\n                return transformedUv.xy;\n        }",THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+"\tvarying vec2 vUv;\n\n\tvoid main(){\n                // pass the UV to the fragment\n                #if (updateInShaderEnabled == 1)\n\t\t        vUv = transformUvToMarkerSpace(uv);\n                #else\n\t\t        vUv = uv;\n                #endif\n\n                // compute gl_Position\n\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}",THREEx.ArMarkerCloak.fragmentShader="\n\tvarying vec2 vUv;\n\tuniform sampler2D texture;\n\tuniform float opacity;\n\n\tvoid main(void){\n\t\tvec3 color = texture2D( texture, vUv ).rgb;\n\n\t\tgl_FragColor = vec4( color, opacity);\n\t}";var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function(e,t,i){var r=this;THREEx.ArBaseControls.call(this,t),this.context=e,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6};var s=["pattern","barcode","unknown"];console.assert(-1!==s.indexOf(this.parameters.type),"illegal value",this.parameters.type);s=["modelViewMatrix","cameraTransformMatrix"];function a(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var s=r.parameters[t];void 0!==s?r.parameters[t]=i:console.warn("THREEx.ArMarkerControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArMarkerControls: '"+t+"' parameter is undefined.")}}console.assert(-1!==s.indexOf(this.parameters.changeMatrixMode),"illegal value",this.parameters.changeMatrixMode),this.object3d=t,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,a(i),e.addMarker(this),"artoolkit"===r.context.parameters.trackingBackend?this._initArtoolkit():"aruco"===r.context.parameters.trackingBackend?this._arucoPosit=new POS.Posit(this.parameters.size,r.context.arucoContext.canvas.width):"tango"===r.context.parameters.trackingBackend?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function(e){var t=this.object3d;if(t.visible=!0,"artoolkit"===this.context.parameters.trackingBackend){var i=(new THREE.Matrix4).copy(this.context._artoolkitProjectionAxisTransformMatrix);i.multiply(e),e.copy(i)}else"aruco"===this.context.parameters.trackingBackend||"tango"===this.context.parameters.trackingBackend||console.assert(!1);if("tango"!==this.context.parameters.trackingBackend){var r=(new THREE.Matrix4).makeRotationX(Math.PI/2);e.multiply(r)}"modelViewMatrix"===this.parameters.changeMatrixMode?t.matrix.copy(e):"cameraTransformMatrix"===this.parameters.changeMatrixMode?t.matrix.getInverse(e):console.assert(!1),t.matrix.decompose(t.position,t.quaternion,t.scale),this.dispatchEvent({type:"markerFound"})},ARjs.MarkerControls.prototype.name=function(){var e="";if(e+=this.parameters.type,"pattern"===this.parameters.type){var t=this.parameters.patternUrl,i=t.replace(/^.*\//g,"");e+=" - "+i}else"barcode"===this.parameters.type?e+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return e},ARjs.MarkerControls.prototype._initArtoolkit=function(){var e=this,t=null,i=setInterval((function(){var t=e.context.arController;null!==t&&(clearInterval(i),i=null,r())}),20);return;function r(){var i=e.context.arController;console.assert(null!==i),"pattern"===e.parameters.type?i.loadMarker(e.parameters.patternUrl,(function(r){t=r,i.trackPatternMarkerId(t,e.parameters.size)})):"barcode"===e.parameters.type?(t=e.parameters.barcodeValue,i.trackBarcodeMarkerId(t,e.parameters.size)):"unknown"===e.parameters.type?t=null:console.log(!1,"invalid marker type",e.parameters.type),i.addEventListener("getMarker",(function(i){if(i.data.type===artoolkit.PATTERN_MARKER&&"pattern"===e.parameters.type){if(null===t)return;i.data.marker.idPatt===t&&s(i)}else if(i.data.type===artoolkit.BARCODE_MARKER&&"barcode"===e.parameters.type){if(null===t)return;i.data.marker.idMatrix===t&&s(i)}else i.data.type===artoolkit.UNKNOWN_MARKER&&"unknown"===e.parameters.type&&s(i)}))}function s(t){if(!(t.data.type===artoolkit.PATTERN_MARKER&&t.data.marker.cfPatt<e.parameters.minConfidence)&&!(t.data.type===artoolkit.BARCODE_MARKER&&t.data.marker.cfMatt<e.parameters.minConfidence)){var i=(new THREE.Matrix4).fromArray(t.data.matrix);e.updateWithModelViewMatrix(i)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(e){this.object3d=new THREE.Group;var t=new THREE.AxisHelper;this.object3d.add(t);var i=e.id,r=document.createElement("canvas");r.width=64,r.height=64;var s=r.getContext("2d"),a=new THREE.CanvasTexture(r);s.font="48px monospace",s.fillStyle="rgba(192,192,255, 0.5)",s.fillRect(0,0,r.width,r.height),s.fillStyle="darkblue",s.fillText(i,r.width/4,3*r.height/4),a.needsUpdate=!0;var n=new THREE.PlaneGeometry(1,1),o=new THREE.MeshBasicMaterial({map:a,transparent:!0});t=new THREE.Mesh(n,o);t.rotation.x=-Math.PI/2,this.object3d.add(t)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(e,t){var i=this;function r(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var s=i.parameters[t];void 0!==s?i.parameters[t]=r:console.warn("THREEx.ArSmoothedControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArSmoothedControls: '"+t+"' parameter is undefined.")}}THREEx.ArBaseControls.call(this,e),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,t=t||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},r(t)},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(e){var t=this.object3d,i=this.parameters,r=t.visible,s=performance.now()/1e3;if(!1===e.visible&&(this._visibleStartedAt=null),!0===e.visible&&(this._unvisibleStartedAt=null),!0===e.visible&&null===this._visibleStartedAt&&(this._visibleStartedAt=s),!1===e.visible&&null===this._unvisibleStartedAt&&(this._unvisibleStartedAt=s),!1===r&&!0===e.visible){var a=s-this._visibleStartedAt;a>=this.parameters.minVisibleDelay&&(t.visible=!0,c())}if(!0===r&&!1===e.visible){var n=s-this._unvisibleStartedAt;n>=this.parameters.minUnvisibleDelay&&(t.visible=!1)}if(null===this._lastLerpStepAt)u(),this._lastLerpStepAt=s;else for(var o=Math.floor((s-this._lastLerpStepAt)/this.parameters.lerpStepDelay),l=0;l<o;l++)u(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;return this.object3d.updateMatrix(),!1===r&&!0===t.visible&&this.dispatchEvent({type:"becameVisible"}),void(!0===r&&!1===t.visible&&this.dispatchEvent({type:"becameUnVisible"}));function c(){t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale)}function u(){t.position.lerp(e.position,i.lerpPosition),t.quaternion.slerp(e.quaternion,i.lerpQuaternion),t.scale.lerp(e.scale,i.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var s=t.parameters[i];void 0!==s?t.parameters[i]=r:console.warn("THREEx.ArToolkitContext: '"+i+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitContext: '"+i+"' parameter is undefined.")}}t._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,imageSmoothingEnabled:!1},console.assert(-1!==["artoolkit","aruco","tango"].indexOf(this.parameters.trackingBackend),"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(-1!==["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode),"invalid parameter detectionMode",this.parameters.detectionMode),this.arController=null,this.arucoContext=null,t.initialized=!1,this._arMarkersControls=[],i(e)},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="1.6.2",ARjs.Context.createDefaultCamera=function(e){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),"artoolkit"===e)var t=new THREE.Camera;else if("aruco"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else if("tango"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return t},ARjs.Context.prototype.init=function(e){var t=this;return void("artoolkit"===this.parameters.trackingBackend?this._initArtoolkit(i):"aruco"===this.parameters.trackingBackend?this._initAruco(i):"tango"===this.parameters.trackingBackend?this._initTango(i):console.assert(!1));function i(){t.dispatchEvent({type:"initialized"}),t.initialized=!0,e&&e()}},ARjs.Context.prototype.update=function(e){if("artoolkit"===this.parameters.trackingBackend&&null===this.arController)return!1;var t=performance.now();return!(null!==this._updatedAt&&t-this._updatedAt<1e3/this.parameters.maxDetectionRate)&&(this._updatedAt=t,this._arMarkersControls.forEach((function(e){e.object3d.visible=!1})),"artoolkit"===this.parameters.trackingBackend?this._updateArtoolkit(e):"aruco"===this.parameters.trackingBackend?this._updateAruco(e):"tango"===this.parameters.trackingBackend?this._updateTango(e):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(e)},ARjs.Context.prototype.removeMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls);var t=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(t!==t),this._arMarkersControls.splice(t,1)},ARjs.Context.prototype._initArtoolkit=function(e){var t=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationZ(Math.PI));var i=new ARCameraParam(t.parameters.cameraParametersUrl,(function(){var r=new ARController(t.parameters.canvasWidth,t.parameters.canvasHeight,i);t.arController=r,r.ctx.mozImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.webkitImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.msImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.imageSmoothingEnabled=t.parameters.imageSmoothingEnabled,!0===t.parameters.debug&&(r.debugSetup(),r.canvas.style.position="absolute",r.canvas.style.top="0px",r.canvas.style.opacity="0.6",r.canvas.style.pointerEvents="none",r.canvas.style.zIndex="-1");var s={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},a=s[t.parameters.detectionMode];console.assert(void 0!==a),r.setPatternDetectionMode(a);var n={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},o=n[t.parameters.matrixCodeType];console.assert(void 0!==o),r.setMatrixCodeType(o),r.setPattRatio(t.parameters.patternRatio),e()}));return this},ARjs.Context.prototype.getProjectionMatrix=function(e){console.assert("artoolkit"===this.parameters.trackingBackend),console.assert(this.arController,"arController MUST be initialized to call this function");var t=this.arController.getCameraMatrix(),i=(new THREE.Matrix4).fromArray(t);return i.multiply(this._artoolkitProjectionAxisTransformMatrix),i},ARjs.Context.prototype._updateArtoolkit=function(e){this.arController.process(e)},ARjs.Context.prototype._initAruco=function(e){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var t=this.arucoContext.canvas.getContext("2d");t.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout((function(){e()}),0)},ARjs.Context.prototype._updateAruco=function(e){var t=this,i=this._arMarkersControls,r=this.arucoContext.detect(e);r.forEach((function(e){for(var r=null,s=0;s<i.length;s++)if(console.assert("barcode"===i[s].parameters.type),i[s].parameters.barcodeValue===e.id){r=i[s];break}if(null!==r){var a=new THREE.Object3D;t.arucoContext.updateObject3D(a,r._arucoPosit,r.parameters.size,e),a.updateMatrix(),r.updateWithModelViewMatrix(a.matrix)}}))},ARjs.Context.prototype._initTango=function(e){var t=this;navigator.getVRDisplays||(navigator.getVRDevices?alert("Your browser supports WebVR but not the latest version. See <a href='http://webvr.info'>webvr.info</a> for more info."):alert("Your browser does not support WebVR. See <a href='http://webvr.info'>webvr.info</a> for assistance.")),this._tangoContext={vrDisplay:null,vrPointCloud:null,frameData:new VRFrameData},navigator.getVRDisplays().then((function(i){0===i.length&&alert("no vrDisplays available");var r=t._tangoContext.vrDisplay=i[0];console.log("vrDisplays.displayName :",r.displayName),"Tango VR Device"===r.displayName&&(t._tangoContext.vrPointCloud=new THREE.WebAR.VRPointCloud(r,!0)),e()}))},ARjs.Context.prototype._updateTango=function(e){var t=this,i=(this._arMarkersControls,this._tangoContext,this._tangoContext.vrDisplay);if(null!==i){if("Tango VR Device"===i.displayName){var r=!0,s=0;t._tangoContext.vrPointCloud.update(r,s,!0)}if(0!==this._arMarkersControls.length){var a=this._arMarkersControls[0],n=this._tangoContext.frameData;if(i.getFrameData(n),null!==n.pose.position&&null!==n.pose.orientation){var o=(new THREE.Vector3).fromArray(n.pose.position),l=(new THREE.Quaternion).fromArray(n.pose.orientation),c=new THREE.Vector3(1,1,1),u=(new THREE.Matrix4).compose(o,l,c),d=new THREE.Matrix4;d.getInverse(u),a.updateWithModelViewMatrix(d)}}}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var e=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return!0===e?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(e){return"default"===e&&(e=this._guessPerformanceLabel()),"desktop-fast"===e?(this.contextParameters.canvasWidth=1920,this.contextParameters.canvasHeight=1440,this.contextParameters.maxDetectionRate=30):"desktop-normal"===e?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):"phone-normal"===e?(this.contextParameters.canvasWidth=320,this.contextParameters.canvasHeight=240,this.contextParameters.maxDetectionRate=30):"phone-slow"===e?(this.contextParameters.canvasWidth=240,this.contextParameters.canvasHeight=180,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+e),this},ARjs.Profile.prototype.defaultMarker=function(e){return e=e||this.contextParameters.trackingBackend,"artoolkit"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro"):"aruco"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):"tango"===e?(this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(e){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.sourceImage=function(e){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.trackingBackend=function(e){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=e,this},ARjs.Profile.prototype.changeMatrixMode=function(e){return this.defaultMarkerParameters.changeMatrixMode=e,this},ARjs.Profile.prototype.trackingMethod=function(e){var t=ARjs.Utils.parseTrackingMethod(e);return this.defaultMarkerParameters.markersAreaEnabled=t.markersAreaEnabled,this.contextParameters.trackingBackend=t.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return"tango"===this.contextParameters.trackingBackend&&this.sourceImage(THREEx.ArToolkitContext.baseURL+"../data/images/img.jpg"),this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var s=t.parameters[i];void 0!==s?t.parameters[i]=r:console.warn("THREEx.ArToolkitSource: '"+i+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitSource: '"+i+"' parameter is undefined.")}}this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},i(e)},ARjs.Source.prototype.init=function(e,t){var i=this;if("image"===this.parameters.sourceType)var r=this._initSourceImage(s,t);else if("video"===this.parameters.sourceType)r=this._initSourceVideo(s,t);else if("webcam"===this.parameters.sourceType)r=this._initSourceWebcam(s,t);else console.assert(!1);return this.domElement=r,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this;function s(){document.body.appendChild(i.domElement),i.ready=!0,e&&e()}},ARjs.Source.prototype._initSourceImage=function(e){var t=document.createElement("img");t.src=this.parameters.sourceUrl,t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var i=setInterval((function(){t.naturalWidth&&(e(),clearInterval(i))}),20);return t},ARjs.Source.prototype._initSourceVideo=function(e){var t=document.createElement("video");t.src=this.parameters.sourceUrl,t.style.objectFit="initial",t.autoplay=!0,t.webkitPlaysinline=!0,t.controls=!1,t.loop=!0,t.muted=!0,document.body.addEventListener("click",(function e(){document.body.removeEventListener("click",e),t.play()})),t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var i=setInterval((function(){t.videoWidth&&(e(),clearInterval(i))}),20);return t},ARjs.Source.prototype._initSourceWebcam=function(e,t){var i=this;t=t||function(e){alert("Webcam Error\nName: "+e.name+"\nMessage: "+e.message)};var r=document.createElement("video");if(r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.setAttribute("playsinline",""),r.style.width=this.parameters.displayWidth+"px",r.style.height=this.parameters.displayHeight+"px",void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.enumerateDevices||void 0===navigator.mediaDevices.getUserMedia){if(void 0===navigator.mediaDevices)var s="navigator.mediaDevices";else if(void 0===navigator.mediaDevices.enumerateDevices)s="navigator.mediaDevices.enumerateDevices";else if(void 0===navigator.mediaDevices.getUserMedia)s="navigator.mediaDevices.getUserMedia";else console.assert(!1);return t({name:"",message:"WebRTC issue-! "+s+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then((function(s){var a={audio:!1,video:{facingMode:"environment",width:{ideal:i.parameters.sourceWidth},height:{ideal:i.parameters.sourceHeight}}};null!==i.parameters.deviceId&&(a.video.deviceId={exact:i.parameters.deviceId}),navigator.mediaDevices.getUserMedia(a).then((function(t){r.srcObject=t,document.body.addEventListener("click",(function(){r.play()}));var i=setInterval((function(){r.videoWidth&&(e(),clearInterval(i))}),20)})).catch((function(e){t({name:e.name,message:e.message})}))})).catch((function(e){t({message:e.message})})),r},ARjs.Source.prototype.hasMobileTorch=function(){var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream===!1)return!1;void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0];if(void 0===t.getCapabilities)return!1;var i=t.getCapabilities();return!!i.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(!0===this.hasMobileTorch());var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream!==!1){void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0],i=t.getCapabilities();i.torch?(this._currentTorchStatus=!1===this._currentTorchStatus,t.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch((function(e){console.log(e)}))):alert("no mobile torch is available on your camera")}else alert("enabling mobile torch is available only on webcam")},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var e=window.innerWidth,t=window.innerHeight;if(console.assert(0===arguments.length),"IMG"===this.domElement.nodeName)var i=this.domElement.naturalWidth,r=this.domElement.naturalHeight;else if("VIDEO"===this.domElement.nodeName)i=this.domElement.videoWidth,r=this.domElement.videoHeight;else console.assert(!1);var s=i/r,a=e/t;if(a<s){var n=s*t;this.domElement.style.width=n+"px",this.domElement.style.marginLeft=-(n-e)/2+"px",this.domElement.style.height=t+"px",this.domElement.style.marginTop="0px"}else{var o=1/(s/e);this.domElement.style.height=o+"px",this.domElement.style.marginTop=-(o-t)/2+"px",this.domElement.style.width=e+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function(e){window.innerWidth>window.innerHeight?(e.style.width=this.domElement.style.width,e.style.height=this.domElement.style.height,e.style.marginLeft=this.domElement.style.marginLeft,e.style.marginTop=this.domElement.style.marginTop):(e.style.height=this.domElement.style.height,e.style.width=4*parseInt(e.style.height)/3+"px",e.style.marginLeft=(window.innerWidth-parseInt(e.style.width))/2+"px",e.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(e,t,i){if(3!==arguments.length)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var r=e.parameters.trackingBackend;if("artoolkit"===r){this.onResizeElement();var s=!!t.domElement.dataset.aframeCanvas;!1===s&&this.copyElementSizeTo(t.domElement),null!==e.arController&&this.copyElementSizeTo(e.arController.canvas)}else"aruco"===r?(this.onResizeElement(),this.copyElementSizeTo(t.domElement),this.copyElementSizeTo(e.arucoContext.canvas)):"tango"===r?t.setSize(window.innerWidth,window.innerHeight):console.assert(!1,"unhandled trackingBackend "+r);if("artoolkit"===r)null!==e.arController&&i.projectionMatrix.copy(e.getProjectionMatrix());else if("aruco"===r)i.aspect=t.domElement.width/t.domElement.height,i.updateProjectionMatrix();else if("tango"===r){var a=e._tangoContext.vrDisplay;a&&"Tango VR Device"===a.displayName&&THREE.WebAR.resizeVRSeeThroughCamera(a,i)}else console.assert(!1,"unhandled trackingBackend "+r)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(e){var t=new THREE.PlaneGeometry(2,2),i=new THREE.MeshBasicMaterial({map:e}),r=new THREE.Mesh(t,i);this.object3d=r,this.update=function(e){e.updateMatrixWorld(!0);var t=new THREE.Vector3(-0,0,-20);t=new THREE.Vector3(-0,0,-20);r.position.copy(t),e.localToWorld(r.position),e.matrixWorld.decompose(e.position,e.quaternion,e.scale),r.quaternion.copy(e.quaternion);var i=2*THREE.Math.radToDeg(Math.atan(1/e.projectionMatrix.elements[5])),s=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),a=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),n=s/a;r.scale.y=Math.tan(THREE.Math.DEG2RAD*i/2)*t.length(),r.scale.x=r.scale.y*n}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(e){this._sourceElement=e,this._pickingScene=new THREE.Scene;var t=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),i=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(t,i),this._pickingScene.add(this._pickingPlane);var r=parseInt(e.style.width),s=parseInt(e.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,r/s,.1,30)},THREEx.HitTestingPlane.prototype.update=function(e,t,i){if(this.onResize(),"modelViewMatrix"===i){var r=this._pickingPlane;t.parent.updateMatrixWorld(),r.matrix.copy(t.parent.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale)}else if("cameraTransformMatrix"===i){var s=this._pickingCamera;e.updateMatrixWorld(),s.matrix.copy(e.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var e=this._sourceElement,t=this._pickingCamera,i=parseInt(e.style.width),r=parseInt(e.style.height);t.aspect=i/r,t.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(e,t){e=2*(e-.5),t=2*-(t-.5),this._pickingScene.updateMatrixWorld(!0);var i=new THREE.Raycaster,r=new THREE.Vector3(e,t,1);i.setFromCamera(r,this._pickingCamera);var s=i.intersectObjects([this._pickingPlane]);if(0===s.length)return null;var a=this._pickingPlane.worldToLocal(s[0].point.clone()),n=new THREE.Quaternion,o=new THREE.Vector3(1,1,1);return{position:a,quaternion:n,scale:o}},THREEx.HitTestingPlane.prototype.renderDebug=function(e){e.render(this._pickingScene,this._pickingCamera)};var THREEx=THREEx||{};THREEx.HitTestingTango=function(e){this._arContext=e,this.boundingSphereRadius=.01,this.resultScale=new THREE.Vector3(1,1,1).multiplyScalar(1)},THREEx.HitTestingTango.prototype.update=function(){},THREEx.HitTestingTango.prototype.test=function(e,t){var i=this._arContext._tangoContext.vrDisplay;if(null===i)return null;if("Tango VR Device"!==i.displayName)return null;var r=i.getPickingPointAndPlaneInPointCloud(e,t);if(null==r)return console.warn("Could not retrieve the correct point and plane."),null;var s=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(r,s,this.boundingSphereRadius),s.rotateZ(-Math.PI/2);var a={position:s.position,quaternion:s.quaternion,scale:this.resultScale};return a};var ARjs=ARjs||{};ARjs.Anchor=function(e,t){var i=this,r=e.arContext,s=e.parameters.scene,a=e.parameters.camera;this.arSession=e,this.parameters=t,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",t.markersAreaEnabled);var n=new THREE.Group;if(s.add(n),"modelViewMatrix"===t.changeMatrixMode)var o=n;else if("cameraTransformMatrix"===t.changeMatrixMode)o=a;else console.assert(!1);if(!1===t.markersAreaEnabled){var l=new THREEx.ArMarkerControls(r,o,t);this.controls=l}else{if(console.assert("artoolkit"===r.parameters.trackingBackend||"aruco"===r.parameters.trackingBackend),!0===location.hash.substring(1).startsWith("markers-page-resolution=")){var c=location.hash.substring(1),u=c.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(3===u.length);var d=parseInt(u[1]),p=parseInt(u[2]);r=e.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(r.parameters.trackingBackend,d,p)}null===localStorage.getItem("ARjsMultiMarkerFile")&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(r.parameters.trackingBackend),console.assert(null!==localStorage.getItem("ARjsMultiMarkerFile"));var f=localStorage.getItem("ARjsMultiMarkerFile");if("modelViewMatrix"===t.changeMatrixMode)var h=s;else if("cameraTransformMatrix"===t.changeMatrixMode)h=a;else console.assert(!1);var m=ARjs.MarkersAreaControls.fromJSON(r,h,o,f);this.controls=m,m.parameters.changeMatrixMode=t.changeMatrixMode;var b=[];m.subMarkersControls.forEach((function(e){var t=new THREEx.ArMarkerHelper(e);t.object3d.visible=!1,e.object3d.add(t.object3d),b.push(t)})),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(e){b.forEach((function(t){t.object3d.visible=e}))}}this.object3d=new THREE.Group;var g=!0;if("tango"===r.parameters.trackingBackend&&(g=!1),!0===g){var v=new THREE.Group;s.add(v);var w=new THREEx.ArSmoothedControls(v);v.add(this.object3d)}else n.add(this.object3d);this.update=function(){i.object3d.visible=i.object3d.parent.visible,void 0!==w&&(void 0!==m&&m.updateSmoothedControls(w),w.update(n))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(e,t){var i=e.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var r=document.createElement("span");if(r.style.display="block",this.domElement.appendChild(r),r.innerHTML="<b>trackingBackend</b> : "+i,ARjs.SessionDebugUI.AugmentedWebsiteURL){r=document.createElement("a");r.innerHTML="Share on augmented-websites",r.style.display="block",r.href=ARjs.SessionDebugUI.AugmentedWebsiteURL+"?"+location.href,this.domElement.appendChild(r)}if("tango"===i&&t){r=document.createElement("button");this.domElement.appendChild(r),r.id="buttonTangoTogglePointCloud",r.innerHTML="toggle-point-cloud",r.href="javascript:void(0)",r.addEventListener("click",(function(){var i=e.parameters.scene;t.object3d.parent?i.remove(t.object3d):i.add(t.object3d)}))}},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function(e){var t=e.arSession,i=t.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var r=document.createElement("span");if(r.style.display="block",this.domElement.appendChild(r),r.innerHTML="<b>markersAreaEnabled</b> :"+e.parameters.markersAreaEnabled,e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonToggleMarkerHelpers",r.innerHTML="toggle-marker-helper",r.href="javascript:void(0)";var s=!1;r.addEventListener("click",(function(){s=!s,e.markersArea.setSubMarkersVisibility(s)}))}if(e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonMarkersAreaLearner",r.innerHTML="Learn-new-marker-area",r.href="javascript:void(0)",r.addEventListener("click",(function(){if(null!==ARjs.AnchorDebugUI.MarkersAreaLearnerURL)var e=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else e=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(e,i)}))}if(e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonMarkersAreaReset",r.innerHTML="Reset-marker-area",r.href="javascript:void(0)",r.addEventListener("click",(function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(i),location.reload()}))}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function(e){var t=this,i=e.arContext,r=i.parameters.trackingBackend;this.enabled=!0,this._arSession=e,this._hitTestingPlane=null,this._hitTestingTango=null,"tango"===r?t._hitTestingTango=new THREEx.HitTestingTango(i):t._hitTestingPlane=new THREEx.HitTestingPlane(e.arSource.domElement)},ARjs.HitTesting.prototype.update=function(e,t,i){!1!==this.enabled&&(null!==this._hitTestingTango?this._hitTestingTango.update():null!==this._hitTestingPlane?this._hitTestingPlane.update(e,t,i):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(e){var t=this._arSession.arContext.parameters.trackingBackend,i=this._arSession.arSource;if(!1===this.enabled)return[];if("tango"===t)var r=e.pageX/window.innerWidth,s=e.pageY/window.innerHeight;else r=e.clientX/i.domElementWidth(),s=e.clientY/i.domElementHeight();return this.test(r,s)},ARjs.HitTesting.prototype.test=function(e,t){var i=this._arSession.arContext,r=i.parameters.trackingBackend,s=[];if(!1===this.enabled)return[];var a=null;if("tango"===r)a=this._hitTestingTango.test(e,t);else a=this._hitTestingPlane.test(e,t);if(null===a)return s;var n=new ARjs.HitTesting.Result(a.position,a.quaternion,a.scale);return s.push(n),s},ARjs.HitTesting.Result=function(e,t,i){this.position=e,this.quaternion=t,this.scale=i},ARjs.HitTesting.Result.prototype.apply=function(e){e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function(e){return e.position.copy(this.position),e.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function(e){return e.quaternion.copy(this.quaternion),e.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var s=t.parameters[i];void 0!==s?t.parameters[i]=r:console.warn("THREEx.Session: '"+i+"' is not a property of this material.")}else console.warn("THREEx.Session: '"+i+"' parameter is undefined.")}}this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},this.signals={sourceReady:new signals.Signal,contextInitialized:new signals.Signal},i(e),console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",e.contextParameters.trackingBackend);var r=t.arSource=new ARjs.Source(e.sourceParameters);r.init((function(){r.onResize(s,t.parameters.renderer,t.parameters.camera),t.signals.sourceReady.dispatch()})),window.addEventListener("resize",(function(){r.onResize(s,t.parameters.renderer,t.parameters.camera)}));var s=t.arContext=new ARjs.Context(e.contextParameters);t.arContext.init(),s.addEventListener("initialized",(function(e){r.onResize(s,t.parameters.renderer,t.parameters.camera),t.signals.contextInitialized.dispatch()})),this.update=function(){!1!==r.ready&&s.update(r.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.TangoPointCloud=function(e){var t=this,i=e.arContext;this.object3d=new THREE.Group,console.warn("Work only on cameraTransformMatrix - fix me - useless limitation"),i.addEventListener("initialized",(function(e){var r=i._tangoContext.vrPointCloud,s=r.getBufferGeometry(),a=new THREE.PointsMaterial({size:.01,depthWrite:!1}),n=new THREE.Points(s,a);n.frustumCulled=!1,n.renderDepth=0,t.object3d.add(n)}))};var ARjs=ARjs||{};ARjs.TangoVideoMesh=function(e){var t=e.arContext,i=e.renderer,r=null,s=null,a=new THREE.Scene,n=new THREE.OrthographicCamera(-1,1,1,-1,0,100);this._sceneOrtho=a,this._cameraOrtho=n,t.addEventListener("initialized",(function(e){console.assert("tango"===t.parameters.trackingBackend),s=t._tangoContext.vrDisplay,console.assert(s,"vrDisplay MUST be defined"),"Tango VR Device"===s.displayName&&(r=THREE.WebAR.createVRSeeThroughCameraMesh(s),a.add(r))})),this.update=function(){console.assert("tango"===t.parameters.trackingBackend),null!==r&&THREE.WebAR.updateCameraMeshOrientation(s,r)},this.render=function(){console.assert("tango"===t.parameters.trackingBackend),i.render(a,n),i.clearDepth()}};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(e){var t=this.parseTrackingMethod(e).trackingBackend;if("artoolkit"===t)var i=new THREE.Camera;else if("aruco"===t)i=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else if("tango"===t)i=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+t);return i},ARjs.Utils.isTango=function(){var e=null!==navigator.userAgent.match("Chrome/57.0.2987.5");return e},ARjs.Utils.parseTrackingMethod=function(e){return"best"===e&&(e=ARjs.Utils.isTango()?"tango":"area-artoolkit"),e.startsWith("area-")?{trackingBackend:e.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:e,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(e,t,i){var r=this;THREEx.ArBaseControls.call(this,t),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:i.subMarkersControls,subMarkerPoses:i.subMarkerPoses,changeMatrixMode:void 0!==i.changeMatrixMode?i.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,e.addEventListener("sourceProcessed",(function(){r._onSourceProcessed()}))},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var e=this,t={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},i=e.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach((function(r,s){var a=r.object3d;if(!1!==a.visible){var n=a.matrix.clone(),o=e.parameters.subMarkerPoses[s];n.multiply((new THREE.Matrix4).getInverse(o));var l=new THREE.Vector3,c=new THREE.Quaternion,u=new THREE.Vector3;n.decompose(l,c,u),t.count++,ARjs.MarkersAreaControls.averageVector3(t.position.sum,l,t.count,t.position.average),ARjs.MarkersAreaControls.averageQuaternion(t.quaternion.sum,c,i,t.count,t.quaternion.average),ARjs.MarkersAreaControls.averageVector3(t.scale.sum,u,t.count,t.scale.average)}})),t.count>0?e.object3d.visible=!0:e.object3d.visible=!1,t.count>0){var r=new THREE.Matrix4;r.compose(t.position.average,t.quaternion.average,t.scale.average),"modelViewMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.copy(r):"cameraTransformMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.getInverse(r):console.assert(!1),e.object3d.matrix.decompose(e.object3d.position,e.object3d.quaternion,e.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(e,t,i,r,s){return s=s||new THREE.Quaternion,console.assert(i instanceof THREE.Quaternion===!0),t.dot(i)>0&&(t=new THREE.Quaternion(-t.x,-t.y,-t.z,-t.w)),e.x+=t.x,e.y+=t.y,e.z+=t.z,e.w+=t.w,s.x=e.x/r,s.y=e.y/r,s.z=e.z/r,s.w=e.w/r,s.normalize(),s},ARjs.MarkersAreaControls.averageVector3=function(e,t,i,r){return r=r||new THREE.Vector3,e.x+=t.x,e.y+=t.y,e.z+=t.z,r.x=e.x/i,r.y=e.y/i,r.z=e.z/i,r},ARjs.MarkersAreaControls.computeCenter=function(e){var t=JSON.parse(e),i={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},r=new THREE.Quaternion;t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),s=new THREE.Vector3,a=new THREE.Quaternion,n=new THREE.Vector3;t.decompose(s,a,n),i.count++,ARjs.MarkersAreaControls.averageVector3(i.position.sum,s,i.count,i.position.average),ARjs.MarkersAreaControls.averageQuaternion(i.quaternion.sum,a,r,i.count,i.quaternion.average),ARjs.MarkersAreaControls.averageVector3(i.scale.sum,n,i.count,i.scale.average)}));var s=new THREE.Matrix4;return s.compose(i.position.average,i.quaternion.average,i.scale.average),s},ARjs.MarkersAreaControls.computeBoundingBox=function(e){var t=JSON.parse(e),i=new THREE.Box3;return t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),r=new THREE.Vector3,s=new THREE.Quaternion,a=new THREE.Vector3;t.decompose(r,s,a),i.expandByPoint(r)})),i},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(e,t){void 0===t&&(t=[[.4,.1,.3],[.5,.1,.4],[.5,.2,.5],[.6,.2,.7],[.6,.2,.7]]);var i=0;if(this.parameters.subMarkersControls.forEach((function(e,t){var r=e.object3d;!0===r.visible&&i++})),void 0!==t[i-1])var r=t[i-1];else r=t[t.length-1];e.parameters.lerpPosition=r[0],e.parameters.lerpQuaternion=r[1],e.parameters.lerpScale=r[2]},ARjs.MarkersAreaControls.fromJSON=function(e,t,i,r,s){var a=JSON.parse(r),n=[],o=[];s=s||{},a.subMarkersControls.forEach((function(i){var r=new THREE.Object3D;t.add(r);var s=new THREEx.ArMarkerControls(e,r,i.parameters);n.push(s),o.push((new THREE.Matrix4).fromArray(i.poseMatrix))})),s.subMarkersControls=n,s.subMarkerPoses=o;var l=new THREEx.ArMultiMarkerControls(e,i,s);return l};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(e,t){var i=this;this._arToolkitContext=e,this.subMarkersControls=t,this.enabled=!0,e.addEventListener("sourceProcessed",(function(){i._onSourceProcessed()}))},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var e=this.subMarkersControls[0].object3d.quaternion;if(!1!==this.enabled)for(var t=this.subMarkersControls.filter((function(e){return!0===e.object3d.visible})),i=Object.keys(t).length,r=new THREE.Vector3,s=new THREE.Quaternion,a=new THREE.Vector3,n=new THREE.Matrix4,o=0;o<i;o++)for(var l=t[o],c=0;c<i;c++){var u=t[c];if(o!==c){void 0===l.object3d.userData.seenCouples&&(l.object3d.userData.seenCouples={});var d=l.object3d.userData.seenCouples;void 0===d[u.id]&&(d[u.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),n.getInverse(l.object3d.matrix),n.multiply(u.object3d.matrix),n.decompose(r,s,a);var p=d[u.id];p.count++,THREEx.ArMultiMarkerControls.averageVector3(p.position.sum,r,p.count,p.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(p.quaternion.sum,s,e,p.count,p.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(p.scale.sum,a,p.count,p.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var e=this,t=this.subMarkersControls[0];this.deleteResult(),t.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var i=!1;this.subMarkersControls.forEach((function(t){var r=t.object3d.userData.result,s=void 0!==r&&r.confidenceFactor>=1;if(!0!==s){var a=e._getLearnedCoupleStats(t);if(null!==a){var n=e._getSubMarkerControlsByID(a),o=t.object3d.userData.seenCouples[a],l=new THREE.Matrix4;l.compose(o.position.average,o.quaternion.average,o.scale.average);var c=n.object3d.userData.result.averageMatrix,u=(new THREE.Matrix4).getInverse(c).multiply(l);u=(new THREE.Matrix4).getInverse(u),console.assert(void 0===t.object3d.userData.result),t.object3d.userData.result={averageMatrix:u,confidenceFactor:1},i=!0}}}))}while(!0===i)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(e){if(void 0===e.object3d.userData.seenCouples)return null;for(var t=e.object3d.userData.seenCouples,i=Object.keys(t).map(Number),r=0;r<i.length;r++){var s=i[r],a=this._getSubMarkerControlsByID(s),n=a.object3d.userData.result,o=void 0!==n&&n.confidenceFactor>=1;if(!1!==o)return s}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(e){for(var t=0;t<this.subMarkersControls.length;t++){var i=this.subMarkersControls[t];if(i.id===e)return i}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var e={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:(new Date).toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},t=this.subMarkersControls[0];(new THREE.Matrix4).getInverse(t.object3d.matrix);this.subMarkersControls.forEach((function(t,i){if(void 0!==t.object3d.userData.result){var r=t.object3d.userData.result.averageMatrix;console.assert(r instanceof THREE.Matrix4);var s={parameters:{},poseMatrix:r.toArray()};"pattern"===t.parameters.type?(s.parameters.type=t.parameters.type,s.parameters.patternUrl=t.parameters.patternUrl):"barcode"===t.parameters.type?(s.parameters.type=t.parameters.type,s.parameters.barcodeValue=t.parameters.barcodeValue):console.assert(!1),e.subMarkersControls.push(s)}}));var i=JSON.stringify(e,null,"\t"),r=!1;if(!0===r){var s=JSON.parse(i);s.subMarkersControls.forEach((function(e){e.poseMatrix=e.poseMatrix.map((function(e){var t=100;return Math.round(e*t)/t}))})),i=JSON.stringify(s,null,"\t")}return i},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach((function(e){delete e.object3d.userData.seenCouples}))},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach((function(e){delete e.object3d.userData.result}))};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(e,t){var i={backURL:location.href,trackingBackend:t,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(t)};location.href=e+"?"+encodeURIComponent(JSON.stringify(i))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(e){var t=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(e);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(t))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(e){console.assert(e);var t=document.createElement("a");t.href=ARjs.Context.baseURL;var i=t.href,r={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]};return r.subMarkersControls[0]={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(0,0,0).toArray()},"artoolkit"===e?(r.subMarkersControls[0].parameters.type="pattern",r.subMarkersControls[0].parameters.patternUrl=i+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):"aruco"===e?(r.subMarkersControls[0].parameters.type="barcode",r.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),r},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(e){var t=document.createElement("a");t.href=ARjs.Context.baseURL;var i=t.href;if("artoolkit"===e)var r=[{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if("aruco"===e)r=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return r},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function(e,t,i){var r=this.buildMarkersAreaFileFromResolution(e,t,i);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(r))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function(e,t,i){var r={meta:{createdBy:"AR.js - Augmented Website",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]},s=.1;if(t>i)var a=.4*i;else if(t<i)a=.4*t;else if(t===i)a=.33*t;else console.assert(!1);var n=a*(1-2*s),o=(t-a)/2/n,l=(i-a)/2/n,c=u("center",0,0);r.subMarkersControls.push(c);c=u("topleft",-o,-l);r.subMarkersControls.push(c);c=u("topright",+o,-l);r.subMarkersControls.push(c);c=u("bottomleft",-o,+l);r.subMarkersControls.push(c);c=u("bottomright",+o,+l);return r.subMarkersControls.push(c),r;function u(t,i,r){console.log("buildSubMarkerControls",t,i,r);var s={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(i,0,r).toArray()};return"artoolkit"===e?d(s.parameters,t):"aruco"===e?p(s.parameters,t):console.assert(!1),s}function d(e,t){var i=document.createElement("a");i.href=ARjs.Context.baseURL;var r=i.href,s={center:a(r+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:a(r+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:a(r+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:a(r+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:a(r+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};return console.assert(void 0!==s[t]),e.type="pattern",void(e.patternUrl=s[t]);function a(e){var t=document.createElement("a");return t.href=e,t.href}}function p(e,t){var i={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(i[t]),e.type="barcode",e.barcodeValue=i[t]}}}).call(this,__webpack_require__("227d"),"/",__webpack_require__("b639").Buffer)},9593:function(e,t,i){},9785:function(e,t,i){},a2e6:function(e,t,i){"use strict";var r=i("a553"),s=i.n(r);s.a},a553:function(e,t,i){},ac85:function(e,t,i){"use strict";var r=i("1686"),s=i.n(r);s.a},ae4c:function(e,t,i){},b650:function(e,t,i){"use strict";var r=i("ae4c"),s=i.n(r);s.a},bc32:function(e,t,i){"use strict";var r=i("ea63"),s=i.n(r);s.a},cf83:function(e){e.exports=JSON.parse('[{"label":"United States of America","value":"USA"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"Afghanistan","value":"AFG"},{"label":"Åland Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaçao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},e030:function(e){e.exports=JSON.parse('[{"code":"magnifier","label":"Magnifier","animationShow":"slideInUp","animationHide":"slideOutDown"},{"code":"code-scanner","label":"CodeScanner","animationShow":"FadeIn","animationHide":"FadeOut"}]')},e08c:function(e){e.exports=JSON.parse('{"baseServiceID":"4fafc201-1fb5-459e-8fcc-c5c9c331914b","baseCara":"beb5483e-36e1-4688-b7f5-"}')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"}]')},ea63:function(e,t,i){},f159:function(e,t,i){},f9ff:function(e,t,i){"use strict";var r=i("f159"),s=i.n(r);s.a},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')}});