(function(e){function t(t){for(var a,n,i=t[0],l=t[1],c=t[2],u=0,p=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},r={1:0},o=[];function n(e){return i.p+"js/"+({}[e]||e)+"."+{2:"773bf292"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=r[e]=[t,a]}));t.push(s[2]=a);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=n(e);var c=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",c.name="ChunkLoadError",c.type=a,c.request=o,s[1](c)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;o.push([0,0]),s()})({0:function(e,t,s){e.exports=s("2f39")},"019e":function(e,t,s){},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"help","icon":"question","title":"HelpStep","description":"HelpStepDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"increment-counter","icon":"plus-square","title":"IncrementCounter","description":"IncrementCounterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false,"nbTrials":0,"passOption":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":120,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":false},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-over-flow","icon":"layer-group","title":"ImageOverFlow","description":"ImageOverFlowDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"portrait-robot","icon":"user-circle","title":"PortraitRobot","description":"PortraitRobotDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":true},{"category":"enigma","code":"binocular","icon":"binoculars","title":"Binocular","description":"BinocularDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"phone-call","icon":"phone-volume","title":"PhoneCall","description":"PhoneCallDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"trigger-event","icon":"bolt","title":"TriggerEvent","description":"TriggerEventDesc","showTrick":"no","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"wait-for-event","icon":"bolt","title":"WaitForEvent","description":"WaitForEventDesc","showTrick":"yes","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true}]')},"046e":function(e,t,s){},"08bd":function(e,t,s){},"0cd0":function(e,t,s){"use strict";var a=s("046e"),r=s.n(a);r.a},1:function(e,t){},1878:function(e,t,s){"use strict";var a=s("c16d"),r=s.n(a);r.a},1929:function(e,t,s){},"1ae2":function(e,t,s){"use strict";var a=s("b496"),r=s.n(a);r.a},2:function(e,t){},"20ce":function(e,t,s){"use strict";var a=s("241f"),r=s.n(a);r.a},"22ae":function(e){e.exports=JSON.parse('[{"label":"red","value":"#FF0000"},{"label":"pink","value":"#FFC0CB"},{"label":"purple","value":"#800080"},{"label":"green","value":"#008000"},{"label":"blue","value":"#0000FF"},{"label":"yellow","value":"#FFFF00"},{"label":"orange","value":"#FFA500"},{"label":"black","value":"#000000"},{"label":"white","value":"#FFFFFF"},{"label":"gray","value":"#808080"}]')},"241f":function(e,t,s){},"278e":function(e,t,s){"use strict";var a=s("1929"),r=s.n(a);r.a},"2f04":function(e){e.exports=JSON.parse('[{"code":"keypad","step":"wait-for-event"},{"code":"joystick","step":"wait-for-event"},{"code":"distance","step":"wait-for-event"},{"code":"pot","step":"wait-for-event"},{"code":"escapebox","step":"wait-for-event"},{"code":"button","step":"wait-for-event"},{"code":"lcd","step":"trigger-event"},{"code":"buzzer","step":"trigger-event"},{"code":"chest","step":"trigger-event"},{"code":"relay","step":"trigger-event"}]')},"2f39":function(e,t,s){"use strict";s.r(t);var a=s("967e"),r=s.n(a),o=(s("a481"),s("96cf"),s("fa84")),n=s.n(o),l=(s("7d6e"),s("e54f"),s("573e"),s("4848"),s("c382"),s("4a8e"),s("58af"),s("b828"),s("7713"),s("3c1c"),s("e046"),s("62f2"),s("7e6d"),s("2b0e")),c=s("b3f7"),u=s("b05d"),d=s("cb32"),p=s("54e1"),m=s("58a8"),h=s("9c40"),f=s("f20b"),g=s("e7a9"),b=s("f09f"),v=s("4b7e"),w=s("a370"),y=s("880c"),q=s("32a7"),k=s("62cd"),x=s("8f8e"),C=s("b047"),S=s("b498"),_=s("52ee"),I=s("24e8"),P=s("9404"),$=s("3b73"),T=s("8572"),A=s("0016"),z=s("068f"),O=s("ef35"),M=s("27f9"),N=s("66e5"),R=s("0170"),F=s("4074"),D=s("4d5a"),L=s("1c1c"),j=s("9f0a"),E=s("09e3"),Q=s("9989"),U=s("de5e"),B=s("639d"),Y=s("7cbe"),H=s("6b1d"),G=s("3786"),W=s("7bbf"),V=s("daf4"),J=s("ed5e"),K=s("ddd8"),Z=s("eb85"),X=s("c1d0"),ee=s("2c91"),te=s("0d59"),se=s("8380"),ae=s("06d5"),re=s("9569"),oe=s("f7ac"),ne=s("eaac"),ie=s("bd08"),le=s("db86"),ce=s("357e"),ue=s("7460"),de=s("429b"),pe=s("823b"),me=s("adad"),he=s("9564"),fe=s("65c6"),ge=s("6ac5"),be=s("05c0"),ve=s("7f67"),we=s("714f"),ye=s("4396"),qe=s("75c3"),ke=s("12c5"),xe=s("436b"),Ce=s("f5084"),Se=s("2a19");l["a"].use(u["a"],{config:{cordova:{backButtonExit:!1},loading:{delay:500}},iconSet:c["a"],components:{QAvatar:d["a"],QBanner:p["a"],QBadge:m["a"],QBtn:h["a"],QBtnDropdown:f["a"],QBtnGroup:g["a"],QCard:b["a"],QCardActions:v["a"],QCardSection:w["a"],QCarousel:y["a"],QCarouselControl:q["a"],QCarouselSlide:k["a"],QCheckbox:x["a"],QChip:C["a"],QColor:S["a"],QDate:_["a"],QDialog:I["a"],QDrawer:P["a"],QExpansionItem:$["a"],QField:T["a"],QIcon:A["a"],QImg:z["a"],QInfiniteScroll:O["a"],QInput:M["a"],QItem:N["a"],QItemLabel:R["a"],QItemSection:F["a"],QLayout:D["a"],QList:L["a"],QOptionGroup:j["a"],QPageContainer:E["a"],QPage:Q["a"],QPageSticky:U["a"],QParallax:B["a"],QPopupProxy:Y["a"],QLinearProgress:H["a"],QRadio:G["a"],QRange:W["a"],QRating:V["a"],QScrollObserver:J["a"],QSelect:K["a"],QSeparator:Z["a"],QSlider:X["a"],QSpace:ee["a"],QSpinner:te["a"],QSpinnerDots:se["a"],QSpinnerPuff:ae["a"],QSpinnerRadio:re["a"],QSpinnerOrbit:oe["a"],QTable:ne["a"],QTr:ie["a"],QTd:le["a"],QTh:ce["a"],QTab:ue["a"],QTabs:de["a"],QTabPanel:pe["a"],QTabPanels:me["a"],QToggle:he["a"],QToolbar:fe["a"],QToolbarTitle:ge["a"],QTooltip:be["a"]},directives:{ClosePopup:ve["a"],Ripple:we["a"],Scroll:ye["a"],TouchPan:qe["a"],TouchSwipe:ke["a"]},plugins:{Dialog:xe["a"],Loading:Ce["a"],Notify:Se["a"]}});var _e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"q-app"}},[s("router-view")],1)},Ie=[],Pe={name:"App"},$e=Pe,Te=s("2877"),Ae=Object(Te["a"])($e,_e,Ie,!1,null,null,null),ze=Ae.exports,Oe=(s("ac4d"),s("8a81"),s("ac6a"),s("2f62")),Me=s("0e44"),Ne=s("a78e"),Re=(s("551c"),s("06db"),s("bc3a")),Fe=s.n(Re),De="https://preprod.api-graaly.com",Le=Fe.a.create({baseURL:De,validateStatus:function(e){return!0}});Le.defaults.timeout=5e3,Le.interceptors.request.use((function(e){var t=localStorage.getItem("jwt");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var je=function(){return Le},Ee={checkEmail:function(e){return je().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return je().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,s){return je().post("login/facebook",{id:e,token:t}).then((function(e){s(!1,e)}))},playAnonymous:function(e){return je().post("user/create/anonymous/"+e).catch((function(e){return console.log(e.request)}))},logout:function(){return je().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return je().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?je().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):je().post("account",{}).catch((function(e){return console.log(e.request)}))},createAccount:function(e){return je().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return je().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return je().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return je().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,s){return je().post("user/forgottenpassword/code/validate",{email:e,password:t,code:s}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e){return je().post("user/forgottenpassword/code/generate",{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return je().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};l["a"].use(Oe["a"]);var Qe,Ue={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[],mediaStreams:[],chatMessages:[],chatNotification:0,networkMode:"online",forceOnline:!1},Be={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]},addMediaStream:function(e,t){e.mediaStreams.push(t)},clearMediaStreams:function(e){var t=!0,s=!1,a=void 0;try{for(var r,o=e.mediaStreams[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;n&&n.getTracks&&n.getTracks().forEach((function(e){return e.stop()}))}}catch(i){s=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw a}}e.mediaStreams=[]},setChatMessage:function(e,t){e.chatMessages=t},setChatNotification:function(e,t){e.chatNotification=t},updateChatNotification:function(e,t){e.chatNotification++},setNetworkMode:function(e,t){e.networkMode=t},setForceOnline:function(e,t){e.forceOnline=t}},Ye={login:function(){var e=n()(r.a.mark((function e(t,s){var a,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,a("loginStart"),e.next=4,Ee.login(s.email,s.password);case 4:return o=e.sent,200===o.status&&(a("loginSuccess",o.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));function t(t,s){return e.apply(this,arguments)}return t}(),logout:function(){var e=n()(r.a.mark((function e(t){var s,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.next=3,Ee.logout();case 3:return a=e.sent,s("logout"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var s=e.commit;return s("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var s=e.commit,a=e.state;if(null===t){var r=a.questSteps.geolocation.drawDirectionInterval;null!==r&&window.clearInterval(r)}s("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var s=e.commit;return s("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var s=e.commit;return s("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var s=e.commit;return s("setErrorMessage",t)},setCurrentRun:function(e,t){var s=e.commit;return s("setCurrentRun",t)},addTimeoutId:function(e,t){var s=e.commit;return s("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var s=e.commit;return s("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")},addMediaStream:function(e,t){var s=e.commit;return s("addMediaStream",t)},clearMediaStreams:function(e){var t=e.commit;return t("clearMediaStreams")},setNetworkMode:function(e,t){var s=e.commit;return s("setNetworkMode",t)},setForceOnline:function(e,t){var s=e.commit;return s("setForceOnline",t)}},He={},Ge=new Oe["a"].Store({state:Ue,getters:He,actions:Ye,mutations:Be,plugins:[Object(Me["a"])({getState:function(e){return Ne["getJSON"](e)},setState:function(e,t){Ne["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),We=s("8c4f"),Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[s("q-page-container",[s("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),s("div",{attrs:{id:"screen-too-large"}},[s("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},Je=[],Ke={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"}},methods:{}},Ze=Ke,Xe=Object(Te["a"])(Ze,Ve,Je,!1,null,null,null),et=Xe.exports,tt={},st=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll",class:e.showNonHybridQRReader?"bg-transparent":"background-dark"},[e.showNonHybridQRReader?s("div",[s("div",{staticClass:"text-white bg-primary q-pt-xl q-pl-md q-pb-sm"},[s("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeQRCodeReader}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n      "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n    ")]),e.showNonHybridQRReader?s("qr-code-stream",{on:{QrCodeResult:e.checkCode}}):e._e()],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{staticClass:"teaser"},[e.offline.active?e._e():s("mainQuest",{attrs:{quest:e.bestQuest}}),e.offline.active?s("div",{staticClass:"q-pt-lg"},[s("div",{staticClass:"q-pa-md no-internet-connection"},[s("q-icon",{attrs:{name:"cloud_off"}}),s("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():s("div",{staticClass:"q-pa-md"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?s("div",[s("mainQuest",{attrs:{quest:e.questList[0]}}),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n        ")],1):e._e(),s("titleBar",{attrs:{title:{text:e.$t("label.CachedQuests"),type:"key"}}}),s("questsList",{attrs:{format:"small",quests:e.questList}})],1):e._e()]):e._e(),e.offline.active?e._e():s("div",{staticClass:"q-px-md q-pt-lg q-pb-lg cursor-pointer centered"},[s("div",{staticClass:"q-pb-md"},[e._v("Vous avez reçu un QR code ?")]),s("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/scan-button.png)"},on:{click:e.startScanQRCode}},[e._v("\n        "+e._s(e.$t("label.ScanQRCode"))+"\n      ")])]),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n    ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?s("div",[!e.warnings.noNetwork&&e.warnings.noServerReponse?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]):e._e(),!e.offline.active&&e.invitationQuests&&e.invitationQuests.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Invitations"),type:"key"}}}),s("questsList",{attrs:{format:e.mainQuestListFormat,quests:e.invitationQuests}})],1):e._e(),e.offline.active?e._e():s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.AroundYou"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAroundYou}}),!e.nearestQuests||e.nearestQuests.length>0?s("div",[s("questsList",{attrs:{format:e.mainQuestListFormat,quests:e.nearestQuests}})],1):e._e(),e.nearestQuests&&0===e.nearestQuests.length?s("div",[s("div",{staticClass:"centered q-pa-md"},[e._v("\n          "+e._s(e.$t("label.NoQuestAroundYou"))+"\n          "),s("div",[s("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])])])]):e._e()],1),!e.offline.active&&e.onTopQuests&&e.onTopQuests.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.OnTopGames"),type:"key"}}}),s("questsList",{attrs:{format:"small",quests:e.onTopQuests}})],1):e._e(),!e.offline.active&&e.extraQuests&&e.extraQuests.items&&e.extraQuests.items.length>0?s("div",[e.extraQuests.title&&e.extraQuests.title[e.$t("label.shortLang")]?s("titleBar",{attrs:{title:{text:e.extraQuests.title[e.$t("label.shortLang")],type:"key"}}}):e._e(),s("questsList",{attrs:{format:"small",quests:e.extraQuests.items}})],1):e._e(),e.offline.active||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country?e._e():s("div",{staticClass:"q-px-md q-pt-lg"},[s("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/profile-button.png)"},on:{click:e.openUpdateProfilePage}},[e._v("\n        "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n      ")])]),e.offline.active||e.friendQuests&&!(e.friendQuests.length>0)?e._e():s("div",[s("titleBar",{attrs:{format:"small",title:{text:e.$t("label.FriendsQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreFriendsGames}}),s("questsList",{attrs:{format:"small",quests:e.friendQuests}})],1),e.offline.active||e.users&&!(e.users.length>0)?e._e():s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Designers"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllCreators}}),s("usersList",{attrs:{format:"scroll",users:e.users}})],1),e.offline.active?e._e():s("div",{staticClass:"q-ma-md relative-position creator-button cursor-pointer",on:{click:e.buildQuest}},[s("img",{staticClass:"full-width",attrs:{src:"statics/images/other/creator.jpg"}}),s("div",{staticClass:"bg-accent subtitle2 q-pa-md full-width",staticStyle:{bottom:"0px",position:"absolute","line-height":"0.8em"}},[e._m(0),s("span",[e._v(e._s(e.$t("label.StartCreation")))])])]),e.offline.active?e._e():s("div",{staticClass:"q-px-md q-py-lg"},[s("div",{staticClass:"image-button cursor-pointer",staticStyle:{"background-image":"url(statics/images/icon/locator-button.png)"},on:{click:e.openMap}},[e._v("\n        "+e._s(e.$t("label.OpenTheMap"))+"\n      ")])]),s("div",{staticClass:"fixed-top"},[s("div",{staticClass:"home-header row no-wrap",class:{disabled:e.offline.active}},[e._m(1),s("div",{staticClass:"col centered"},[e.$store.state.user.isAdmin?s("q-icon",{staticClass:"header-button cursor-pointer",attrs:{name:"build"},on:{click:e.openAdminPage}}):e._e()],1),s("div",{staticClass:"col centered"},[s("q-icon",{staticClass:"header-button cursor-pointer",attrs:{name:"add_circle_outline"},on:{click:e.buildQuest}})],1),s("div",{staticClass:"col centered"},[s("q-icon",{staticClass:"header-button cursor-pointer",attrs:{name:"search"},on:{click:e.openSearch}})],1),s("div",{staticClass:"col centered"},[s("q-avatar",{staticClass:"cursor-pointer",on:{click:function(t){return e.openProfile()}}},[s("img",{attrs:{src:e.getProfileImage()}})])],1)])]),e.offline.active?e._e():s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}}),s("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.ranking.show,callback:function(t){e.$set(e.ranking,"show",t)},expression:"ranking.show"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YourRanking")))]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e.warnings.rankingMissing?s("q-card-section",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.getRanking}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),s("q-card-section",[s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Level")))]),s("q-item",{attrs:{multiline:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"trending_up",color:"primary"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.MyLevel"))+": "+e._s(e.$store.state.user.level)+" ("+e._s(e.$store.state.user.score)+" "+e._s(e.$t("label.points"))+")")]),s("q-linear-progress",{staticClass:"q-my-sm",staticStyle:{height:"18px"},attrs:{rounded:"",value:e.profile.level.progress,color:"primary"}}),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max})))])],1)],1)],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Rankings")))]),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"public",color:"primary"}})],1),s("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourWorldRanking"))+" :\n                "),e.$store.state.user.statistics.rankings.world?s("span",[e._v(e._s(e.$store.state.user.statistics.rankings.world))]):e._e(),e.$store.state.user.statistics.rankings.world?e._e():s("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"home",color:"primary"}})],1),s("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourCityRanking"))+" :\n                "),e.$store.state.user.statistics.rankings.town?s("span",[e._v(e._s(e.$store.state.user.statistics.rankings.town))]):e._e(),e.$store.state.user.statistics.rankings.town?e._e():s("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1)],1):e._e(),e.success.ranking&&e.success.ranking.length>0?s("div",[s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Rewards")))]),e._l(e.success.ranking,(function(t,a){return s("q-list",{key:a},[s("q-item-label",{attrs:{header:""}},[e._v(e._s(t.city))]),s("q-item",{staticStyle:{"flex-wrap":"wrap"}},e._l(t.rewards,(function(t,a){return s("img",{key:a,class:{reward:!0,disabled:!t.won},attrs:{src:e.uploadUrl+"/upload/quest/"+t.image}})})),0)],1)})),e._v("\n            "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n          ")],2):e._e()],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():s("q-card-section",[e._v("\n          "+e._s(e.$t("label.NoRankingYet"))+"\n        ")])],1)],1),e.offline.active?e._e():s("div",{staticClass:"fixed-bottom over-map"},[e.offline.show?s("div",[s("offlineLoader",{attrs:{quest:e.offline.quest,design:"download",lang:e.$t("label.shortLang")},on:{end:function(t){return e.questLoadedInCache()}}})],1):e._e()]),s("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[s("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1)])},at=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"float-right"},[s("img",{staticStyle:{width:"32px"},attrs:{src:"statics/images/icon/puzzle-big.svg"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col centered"},[s("img",{staticClass:"logo",attrs:{src:"statics/images/logo/logo-header-color.png"}})])}],rt=(s("7f7f"),s("28a5"),s("34ef"),s("6762"),s("2fdb"),s("8993")),ot=s.n(rt),nt=(s("6b54"),s("3b2b"),s("3452")),it={notificationsArr:[],handleError:function(e){Ge.dispatch("setErrorMessage",e),wi.push("/error")},buildOptionsForSelect:function(e,t,s){var a=[];return e.forEach((function(e){a.push({value:e[t.valueField],label:s("label."+e[t.labelField])})})),a},getById:function(e,t){for(var s=0;s<e.length;s++)if(e[s].id===t)return e[s];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,s,a){var r=6371,o=it.degreesToRadians(s-e),n=it.degreesToRadians(a-t);e=it.degreesToRadians(e),s=it.degreesToRadians(s);var i=Math.sin(o/2)*Math.sin(o/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(e)*Math.cos(s),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return r*l},bearingBetweenEarthCoordinates:function(e,t,s,a){var r=it.degreesToRadians(a-t),o=it.degreesToRadians(e),n=it.degreesToRadians(s),i=Math.sin(r)*Math.cos(n),l=Math.cos(o)*Math.sin(n)-Math.sin(o)*Math.cos(n)*Math.cos(r),c=it.radiansToDegrees(Math.atan2(i,l));return(c+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),s={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var a in s)t=t.replace(new RegExp(s[a],"g"),a);return t},shuffle:function(e){var t,s,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),s=e[a],e[a]=e[t],e[t]=s;return e},buildIncrementalArray:function(e){for(var t=[],s=1;s<=e;s++)t.push(s);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,s){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var s=setTimeout(e,t);return Ge.dispatch("addTimeoutId",s),s})),clearAllTimeouts:function(){var e=!0,t=!1,s=void 0;try{for(var a,r=Ge.state.runningTimeoutsIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;clearTimeout(o)}}catch(n){t=!0,s=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}Ge.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,s){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var s=setInterval(e,t);return Ge.dispatch("addIntervalId",s),s})),clearAllIntervals:function(){var e=!0,t=!1,s=void 0;try{for(var a,r=Ge.state.runningIntervalIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;clearInterval(o)}}catch(n){t=!0,s=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}Ge.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},getDurationFromNow:function(e){var t=new Date(e),s=new Date,a=s.getTime()-t.getTime();return{h:parseInt(a/36e5%24),m:parseInt(a/6e4%60)}},getFullDate:function(e){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==ot()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e["isActiveClone"]=null,t[s]=this.clone(e[s]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,s){var a=t?1e3:1024,r=s("label.byteCharacter");if(Math.abs(e)<a)return e+" "+r;var o=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],n=-1;o=o.map((function(e){return e+r}));do{e/=a,++n}while(Math.abs(e)>=a&&n<o.length-1);return e.toFixed(1)+" "+o[n]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<16;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},initFileStorage:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:s,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:s,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},checkIfFileExists:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:s,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:s,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},writeInFile:function(e,t,s,a){var r=this;return new Promise((function(o,n){window.cordova||o(!1),window.requestFileSystem(window.TEMPORARY,0,(function(n){e&&""!==e?n.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){o(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),o(!1)},s||(s=new Blob(["some file data"],{type:"text/plain"}));var t=r.gcrypt(s,"Gr44lyCryp7");e.write(t)}))}),(function(){o(!1)}))}),(function(){o(!1)})):n.root.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){o(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),o(!1)},s||(s=new Blob(["some file data"],{type:"text/plain"}));var t=r.gcrypt(s,"Gr44lyCryp7");e.write(t)}))}),(function(){o(!1)}))}),(function(){o(!1)}))}))},readFile:function(e,t){var s=this;return new Promise((function(a,r){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){r||a(!1),e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=s.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=s.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},saveBinaryFile:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(r){var o=new XMLHttpRequest;o.open("GET",t+s,!0),t.includes("https://preprod.api-graaly.com")||o.setRequestHeader("Cache-Control","no-cache"),o.responseType="blob",o.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(s,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(s,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}else a(!1)},o.send()}),(function(){a(!1)}))}))},readBinaryFile:function(e,t){var s=this;return new Promise((function(a,r){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(r){r||a(!1),e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var r=new FileReader;r.onloadend=function(){var e=s.getMimeType(t),r=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(r))},r.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var r=new FileReader;r.onloadend=function(){var e=s.getMimeType(t),r=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(r))},r.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,s){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(s){s||t(!1),s.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",s=e.substr(-4);switch(s){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,s){return s?nt["AES"].decrypt(e,t).toString(nt["enc"].Utf8):nt["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},openExternalLink:function(e){window.cordova?navigator.app.loadUrl(e,{openExternal:!0}):window.open(e,"_blank")},removeUnusedUrl:function(e){if(-1!==e.indexOf("gc=")){var t=e.indexOf("gc=");return e.substring(t+3)}return e},loadImage:function(e){return new Promise((function(t,s){var a=new Image;a.onload=function(){t(a)},a.onerror=s,a.src=e}))},isIOS:function(){return window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId},isSafari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},requestDeviceMotionPermission:function(){return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceMotionEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},requestDeviceOrientationPermission:function(){return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceOrientationEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},stringToBytes:function(e){for(var t=new Uint8Array(e.length),s=0,a=e.length;s<a;s++)t[s]=e.charCodeAt(s);return t.buffer},bytesToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},replaceStringAt:function(e,t,s){return e.substr(0,t)+s+e.substr(t+s.length)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},timeStringToSeconds:function(e){var t=e.split("h"),s=t[1].split("m"),a=s[1].split("s"),r=3600*t[0],o=60*s[0],n=1*a[0],i=r+o+n;return i},secondsToTimeString:function(e){var t=Math.floor(e/3600);e%=3600;var s=Math.floor(e/60),a=e%60;return t+"h"+s+"m"+a+"s"},map:function(e,t,s,a,r){return(e-t)*(r-a)/(s-t)+a},compareVersions:function(e,t){for(var s,a=/(\.0+)+$/,r=e.replace(a,"").split("."),o=t.replace(a,"").split("."),n=Math.min(r.length,o.length),i=0;i<n;i++)if(s=parseInt(r[i],10)-parseInt(o[i],10),s)return s;return r.length-o.length},downloadDataUrl:function(e,t){return new Promise((function(s,a){try{var r=document.createElement("a");document.body.appendChild(r),r.style="display: none",r.href=e,r.download=t,r.click(),window.URL.revokeObjectURL(e),s()}catch(o){a(o)}}))},orderCharactersOfString:function(e){return e.split("").sort().join("")}},lt=it,ct={listNearest:function(e,t){return t||(t="default"),je().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/0/lang/"+t).catch((function(e){return console.log(e.request)}))},listNearestSync:function(e,t,s,a){return t||(t="default"),je().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/"+s+"/lang/"+t).then((function(e){a(!1,e)}))},listHomeQuests:function(e,t){return t||(t="default"),je().get("quests/home/"+e.lng+"-"+e.lat+"/lang/"+t).catch((function(e){return console.log(e.request)}))},listAllForCountry:function(){return je().get("quests/country/FR").catch((function(e){return console.log(e.request)}))},listFriendQuests:function(e){return e||(e="default"),je().get("quests/friends/played/0/lang/"+e).catch((function(e){return console.log(e.request)}))},listFriendQuestsync:function(e,t,s){return e||(e="default"),je().get("quests/friends/played/"+t+"/lang/"+e).then((function(e){s(!1,e)}))},getByIdForStep:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n,i,l;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(window.cordova){r.next=5;break}return r.next=3,a.getByIdOnline(e,t,s);case 3:return n=r.sent,r.abrupt("return",n.data);case 5:return r.next=7,a.isCached(e);case 7:if(i=r.sent,i||"online"!==Ge.state.networkMode){r.next=23;break}return r.prev=9,r.next=12,a.getByIdOnline(e,t,s);case 12:return l=r.sent,r.abrupt("return",l.data);case 16:if(r.prev=16,r.t0=r["catch"](9),!Ge.state.forceOnline){r.next=21;break}throw console.error("getByIdForStep(): could not retrieve quest data (online mode)",r.t0),r.t0;case 21:Ge.commit("setNetworkMode","offline"),console.log("switch to offline mode");case 23:return r.abrupt("return",a.getByIdOffline(e,s));case 24:case"end":return r.stop()}}),o,null,[[9,16]])})))()},getByIdOnline:function(e){var t=arguments;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:"999",o=t.length>2&&void 0!==t[2]?t[2]:"default",s.next=4,je().get("quest/"+e+"/version/"+a+"/lang/"+o).catch((function(e){return console.log(e.request)}));case 4:return n=s.sent,s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},getByIdOffline:function(e,t){return n()(r.a.mark((function s(){var a,o,n,i,l,c,u;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,lt.readFile(e,"quest_"+e+".json");case 2:if(a=s.sent,a){s.next=5;break}throw new Error("Could not load quest with Id '"+e+"' from cache");case 5:return a=JSON.parse(a),s.next=8,lt.readBinaryFile(e,a.picture[t]);case 8:if(o=s.sent,o&&(a.picture=o),!a.customization||!a.customization.logo||""===a.customization.logo){s.next=15;break}return s.next=13,lt.readBinaryFile(e,a.customization.logo);case 13:n=s.sent,n&&(a.customization.logo=n);case 15:if(!a.customization||!a.customization.audio){s.next=29;break}if(i=a.mainLanguage,!a.customization.audio[t]||""===a.customization.audio[t]){s.next=24;break}return s.next=20,lt.readBinaryFile(e,a.customization.audio[t]);case 20:l=s.sent,l&&(a.customization.audio[t]=l),s.next=29;break;case 24:if(t===i||!a.customization.audio[i]||""===a.customization.audio[i]){s.next=29;break}return s.next=27,lt.readBinaryFile(e,a.customization.audio[i]);case 27:c=s.sent,c&&(a.customization.audio[i]=c);case 29:if(!a.customization||!a.customization.character||""===a.customization.character){s.next=34;break}return s.next=32,lt.readBinaryFile(e,a.customization.character);case 32:u=s.sent,u&&(a.customization.character=u);case 34:return s.abrupt("return",a);case 35:case"end":return s.stop()}}),s)})))()},getSize:function(e,t){return je().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.getByIdOnline(e,999,t)},find:function(e,t,s){return s||(s="default"),je().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/0/lang/"+s)},findSync:function(e,t,s,a,r){return s||(s="default"),je().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/"+a+"/lang/"+s).then((function(e){r(!1,e)}))},create:function(e,t,s,a){return je().post("quest/create/"+a+"/"+t+"/"+s,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return je().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return je().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return je().delete("quest/"+e+"/version/"+t+"/remove")},clone:function(e,t){return je().post("quest/"+e+"/version/"+t+"/clone")},createFromSample:function(e,t,s,a){return je().post("quest/"+e+"/version/"+t+"/createfromsample/"+s+"/"+(a?"pro":"individual"))},closePrivate:function(e,t){return je().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return je().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return je().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return je().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return je().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e,t){return t||(t="default"),je().get("user/"+e+"/quests/created/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e,t){return t||(t="default"),je().get("user/"+e+"/quests/played/0/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUserSync:function(e,t,s,a){return t||(t="default"),je().get("user/"+e+"/quests/played/"+s+"/lang/"+t).then((function(e){a(!1,e)}))},listMedia:function(e,t,s){return s||(s="all"),je().get("quest/"+e+"/version/"+t+"/media/"+s+"/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,s){return je().delete("quest/"+e+"/version/"+t+"/media/"+s+"/remove")},listObjectFiles:function(e,t){return je().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,s){return je().get("quest/"+e+"/version/"+t+"/statistics/"+s).catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return je().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return je().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAudio:function(e){return je().post("/quest/audio/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacter:function(e){return je().post("/quest/character/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacterOnMap:function(e){return je().post("/quest/characteronmap/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return je().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return je().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadSnapshot:function(e,t){return je().post("/quest/"+t+"/gamesnapshot/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return je().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return je().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},checkTierPayment:function(e){return je().get("quest/"+e+"/payment/tier/check").catch((function(e){return console.log(e.request)}))},printQRCodes:function(e){return je().get("quest/"+e+"/payment/tier/print").catch((function(e){return console.log(e.request)}))},createTierPayment:function(e,t){return je().post("quest/"+e+"/payment/tier/add",{price:t}).catch((function(e){return console.log(e.request)}))},removeTierPayment:function(e,t){return je().delete("quest/"+e+"/payment/tier/remove/"+t).catch((function(e){return console.log(e.request)}))},listTierPayments:function(e){return je().get("quest/"+e+"/payment/tier/list").catch((function(e){return console.log(e.request)}))},useTierPaymentCode:function(e,t){return je().post("quest/"+e+"/payment/tier/use",{code:t}).catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return je().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return je().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return je().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),je().get("quest/"+e+"/connectandplay/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},checkQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),je().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return je().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return je().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,s){return je().put("quest/"+e+"/version/"+t+"/editor/add/"+s).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,s){return je().delete("quest/"+e+"/version/"+t+"/editor/remove/"+s)},listInvitees:function(e,t){return je().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,s){return je().put("quest/"+e+"/version/"+t+"/invitee/add/"+s).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,s){return je().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+s)},isCached:function(e){return!!window.cordova&&lt.checkIfFileExists(e,"quest_"+e+".json")},removeFromCache:function(e){return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.removeDirectory(e);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://graaly-upload.s3.eu-west-3.amazonaws.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.jpg"}},ut={listFriends:function(e,t,s){return je().get("user/"+e+"/friends/list/"+t+"/"+s).catch((function(e){return console.log(e.request)}))},listFriendsSync:function(e,t,s,a){return je().get("user/"+e+"/friends/list/"+t+"/"+s).then((function(e){a(!1,e)}))},listSuggestions:function(e,t){return je().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/0").catch((function(e){return console.log(e.request)}))},listSuggestionsSync:function(e,t,s,a){return je().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/"+s).then((function(e){a(!1,e)}))},listFollowersSync:function(e,t,s){return je().get("user/followers/"+e+"/"+t).then((function(e){s(!1,e)}))},find:function(e,t){return je().get("user/type/"+e+"/filter/"+t+"/0").catch((function(e){return console.log(e.request)}))},findSync:function(e,t,s,a){return je().get("user/type/"+e+"/filter/"+t+"/"+s).then((function(e){a(!1,e)}))},listNews:function(e,t,s){return je().get("user/friends/news/list/"+e+"/"+t).then((function(e){s(!1,e)}))},likeNews:function(e){return je().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return je().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return je().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRangeRanking:function(e){return je().get("ranking/"+e).catch((function(e){return console.log(e.request)}))},getRewards:function(e,t){return je().get("user/"+e+"/reward/list/"+t).catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return je().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return je().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return je().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return je().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return je().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?je().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?je().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):je().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return je().delete("user/friend/remove/"+e)},checkContacts:function(e){return je().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return je().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},dt={launchpopup:function(){var e=this;AppRate.preferences.useLanguage="fr",AppRate.preferences.storeAppURL={ios:"id1448284225",android:"market://details?id=graaly.app"},AppRate.preferences.reviewType={ios:"InAppReview",android:"InAppReview"},AppRate.preferences.simpleMode=!0,AppRate.preferences.callbacks.onButtonClicked=function(t){switch(console.log("onButtonClicked -> "+t),t){case 1:e.addAlreadyAskedForRating();break;case 2:e.addLater(7);break;case 3:break;default:break}},AppRate.promptForRating()},initLocalStorage:function(){null===window.localStorage.getItem("alreadyAsked")&&window.localStorage.setItem("alreadyAsked","false"),null===window.localStorage.getItem("futuredate")&&window.localStorage.setItem("futuredate","")},addAlreadyAskedForRating:function(){window.localStorage.setItem("alreadyAsked","true")},addLater:function(e){var t=new Date,s=new Date;s.setDate(t.getDate()+e),window.localStorage.setItem("alreadyAsked","later"),window.localStorage.setItem("futuredate",s.toString())},hasAlreadyHavePopup:function(){var e=window.localStorage.getItem("alreadyAsked");if("true"===e||"false"===e)return console.log("has already awensered"),e;if("later"===e){var t=window.localStorage.getItem("futuredate");return new Date(t)<new Date?"false":"true"}},resetAlreadyAsked:function(){window.localStorage.setItem("alreadyAsked","false"),window.localStorage.setItem("futuredate","")}},pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSupported&&e.isActive?e._e():s("div",{staticClass:"geolocation-layer"},[!e.isActive&&e.nbFails>=2?s("div",[s("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[s("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"},on:{click:function(t){e.showHelp=!0}}})],1)],1):e._e(),s("q-dialog",{model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.LocationSearching"))+"\n        "),e.askUserToEnableGeolocation?s("div",[s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.CouldNotRetrieveYourPosition"))+"\n          ")]),s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.PossibleReasons"))+"\n            "),s("ul",[s("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),s("li",[e._v("\n                "+e._s(e.$t("label.GeolocationDisabled"))+"\n                "),e.nativeSettingsIsEnabled?s("span",[s("br"),s("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():s("div",[e.isChrome?s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])])]):e._e(),e.isSupported?e._e():s("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n          "+e._s(e.$t("label.GeolocationNotSupported"))+"\n        ")])])],1)],1)],1)},mt=[],ht=(s("4917"),s("c5f6"),{props:{maximumAge:{type:Number,default:0}},data:function(){return{isSupported:!0,isActive:!1,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:5e3,nbFails:0,disabled:!1,alreadyWorked:!1,showHelp:!1,method:lt.isIOS()?"getCurrentPosition":"watchPosition",geolocationWatchId:null,timeoutIds:[],positionHistory:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,s=t.vendor,a=t.userAgent.indexOf("Edge")>-1,r=t.userAgent.match("CriOS");return!!r||null!==e&&"undefined"!==typeof e&&"Google Inc."===s&&!1===a},askUserToEnableGeolocation:function(){return this.nbFails>=2&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||("watchPosition"===this.method?(this.isActive=!0,this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge})):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(console.warn("Could not get location",e),!this.disabled&&(this.isSupported=!0,this.isActive=!1,this.nbFails++,window.cordova||(this.userDeniedGeolocation=1===e.code),this.$emit("error",!this.alreadyWorked),"getCurrentPosition"===this.method)){var t=setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);this.timeoutIds.push(t)}},locationSuccess:function(e){if(!this.disabled&&(this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1,this.$emit("success",{coords:{accuracy:e.coords&&e.coords.accuracy?e.coords.accuracy:10,altitude:e.coords?e.coords.altitude:null,speed:e.coords?e.coords.speed:null,latitude:e.coords.latitude,longitude:e.coords.longitude}}),"getCurrentPosition"===this.method)){var t=setTimeout(this.startTracking,1e3);this.timeoutIds.push(t)}},stopTracking:function(){if("watchPosition"===this.method&&null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null),this.timeoutIds.length>0){var e=!0,t=!1,s=void 0;try{for(var a,r=this.timeoutIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;clearTimeout(o)}}catch(n){t=!0,s=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}this.timeoutIds=[]}},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),ft=ht,gt=(s("0cd0"),Object(Te["a"])(ft,pt,mt,!1,null,"9a1cbd72",null)),bt=gt.exports,vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'énergie est gratuite !")]),s("q-list",{attrs:{highlight:""}},[s("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),s("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),s("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),s("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?s("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},wt=[],yt=(s("f751"),function(e,t,s,a,r){window.cordova;var o,n={position:"top"};switch(t){case"positive":o={icon:"check_circle",color:r||"positive",timeout:a||4e3};break;case"warning":o={icon:"warning",color:r||"orange",timeout:a||8e3};break;case"error":o={icon:"report_problem",color:r||"negative",timeout:a||8e3};break;case"rightAnswer":o={color:r||"positive",timeout:a||6e3,multiLine:!0};break;case"wrongAnswer":o={color:r||"orange",timeout:a||5e3,multiLine:!0};break;case"readMore":o={icon:"info",color:r||"positive",timeout:0,position:"bottom"},n.actions=[{icon:"close"}];break;default:o={icon:"info",color:r||"info",timeout:a||3e3};break}s&&(o.actions=s);var i=Se["a"].create(Object.assign({message:e},n,o));return"readMore"!==t&&lt.clearAllNotifications(),lt.notificationsArr.push(i),i}),qt={data:function(){return{coinsWon:0}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.coinsWon=0;case 1:case"end":return t.stop()}}),t)})))()},methods:{buy:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.coinsWon=0,s.next=3,ut.buy(e);case 3:a=s.sent,a&&a.data&&a.data.coins?(t.coinsWon=a.data.coins,t.$store.state.user.coins+=t.coinsWon):yt(t.$t("label.ErrorStandardMessage"),"error"),setTimeout(t.resetCoinsWon,2e3);case 6:case"end":return s.stop()}}),s)})))()},resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},kt=qt,xt=Object(Te["a"])(kt,vt,wt,!1,null,null,null),Ct=xt.exports,St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pt-lg"},[s("div",{staticClass:"q-pa-md bg-grey-8"},[s("div",{staticClass:"subtitle4 centered"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),s("div",{staticClass:"subtitle6 q-py-md"},[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[s("q-input",{attrs:{dark:"",label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))])],1),s("div",{staticClass:"centered q-pt-md"},[s("a",{on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),s("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)])])},_t=[],It={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.submitSuggestion(e.place);case 2:s=t.sent,s&&s.data&&"ok"===s.data.status?(yt(e.$t("label.ThankYouForYourProposal"),"positive"),e.emitClose()):yt(e.$t("label.TechnicalIssue"),"error");case 4:case"end":return t.stop()}}),t)})))()}}},Pt=It,$t=Object(Te["a"])(Pt,St,_t,!1,null,null,null),Tt=$t.exports,At=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-px-md"},[s("div",{staticClass:"float-right bar-link"},[e.link?s("a",{staticClass:"cursor-pointer",on:{click:e.clickLink}},[e._v(e._s(e.link.text))]):e._e()]),s("div",{class:"title-bar "+e.title.type+"-bar"},[e._v("\n    "+e._s(e.title.text)+"\n  ")])])},zt=[],Ot={props:["title","link"],methods:{clickLink:function(){this.$emit("click")}}},Mt=Ot,Nt=Object(Te["a"])(Mt,At,zt,!1,null,null,null),Rt=Nt.exports,Ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-quest relative-position"},[s("div",{staticClass:"absolute-position fullwidth",style:"background: url("+e.getThumbImage()+" ) center center /cover no-repeat; height: 35vh"},[s("div",{staticClass:"absolute-position fullwidth",staticStyle:{height:"20vh"}}),s("div",{staticClass:"absolute-position fullwidth",staticStyle:{background:"linear-gradient(to bottom, transparent, #323232)",height:"15vh"}})]),e.quest?e._e():s("div",{staticClass:"absolute-center"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1),e.quest?s("div",[s("div",{staticClass:"centered main-quest-banner q-pa-md"},[s("div",{staticClass:"title2"}),s("div",{staticClass:"q-pt-md q-pb-md subtitle6"}),s("div",[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Play"),loading:e.submitting},on:{click:e.playQuest}})],1),e.quest.description.length<30?s("div",{staticClass:"white-overliner q-mt-md subtitle6"},[e._v("\n        "+e._s(e.$t("label."+e.quest.description))+"\n      ")]):e._e()])]):e._e()])},Dt=[],Lt={props:["quest"],data:function(){return{lang:this.$t("label.shortLang"),serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",submitting:!1}},methods:{playQuest:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.submitting=!0,e.$router.push("/quest/play/"+e.quest.questId);case 2:case"end":return t.stop()}}),t)})))()},getThumbImage:function(){return this.quest?(this.quest.thumb&&(this.quest.thumb[this.lang]?e=this.quest.thumb[this.lang]:this.quest.thumb[this.quest.mainLanguage]&&(e=this.quest.thumb[this.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.jpg"):"statics/images/quest/default-quest-picture.jpg";var e}}},jt=Lt,Et=Object(Te["a"])(jt,Ft,Dt,!1,null,null,null),Qt=Et.exports,Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.quests?e._e():s("div",{staticClass:"quest-small relative-position"},[s("div",{staticClass:"absolute-center"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.quests&&(e.quests.length>0||e.add)&&"small"===e.format?s("div",{staticClass:"horizontal-scroll-wrapper quests-horizontal-scroll-wrapper",class:{"quest-red":"red"===e.color}},[e.add?s("div",{staticClass:"quest-add-button relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.buildQuest()}}},[s("div",[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.quests,(function(t){return s("div",{key:t._id,staticClass:"quest-small relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb,t.mainLanguage)+" ) center center / cover no-repeat ",on:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("div",[!t.status||"published"===t.status||"draft"===t.status&&t.version>1?e._e():s("q-chip",{attrs:{color:"status-"+t.status}},[e._v("\n          "+e._s(e.$t("status."+t.status))+"\n        ")]),"private"===t.access?s("q-chip",{attrs:{color:"secondary",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.Private"))+"\n        ")]):e._e()],1),t.userName?s("div",[s("q-chip",{attrs:{color:"graaly-blue-dark"}},[s("q-avatar",[s("img",{attrs:{src:e.getUserBackgroundImage(t.userPicture)}})]),e._v("\n          "+e._s(t.userName)+"\n        ")],1)],1):e._e(),s("div",{staticClass:"info-banner"},[t.duration&&999!==t.duration&&t.duration<60?s("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&999!==t.duration&&t.duration>=60?s("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?s("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():s("div",[s("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?s("div",[e._v("\n          €"),s("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?s("div",[e._v("\n          €€"),s("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?s("div",[e._v("\n          €€€\n        ")]):e._e(),t.rating&&t.rating.nbVoters?s("div",[s("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?s("div",["in-progress"===t.playStatus?s("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?s("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),s("div",{staticClass:"title-banner q-pl-sm"},[s("div",[t.location&&t.location.town?s("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():s("span",[e._v(" ")])]),t.title?s("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?s("div",[e._m(0,!0),s("div",{staticClass:"point-banner with-plus"},[s("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?s("div",[e._m(1,!0),s("div",{staticClass:"point-banner point-won"},[s("div",[e._v(e._s(t.points))])])]):e._e()])}))],2):e._e(),e.quests&&e.quests.length>0&&"big"===e.format?s("div",{class:{"quest-red":"red"===e.color}},e._l(e.quests,(function(t){return s("div",{key:t._id,staticClass:"quest-big relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb,t.mainLanguage)+" ) center center / cover no-repeat ",on:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?s("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?s("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?s("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():s("div",[s("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?s("div",[e._v("\n          €"),s("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?s("div",[e._v("\n          €€"),s("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?s("div",[e._v("\n          €€€\n        ")]):e._e(),t.distance?s("div",[e._v("\n          "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n        ")]):e._e(),t.rating&&t.rating.nbVoters?s("div",[s("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?s("div",["in-progress"===t.playStatus?s("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?s("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),s("div",{staticClass:"title-banner q-pl-sm"},[s("div",[t.location&&t.location.town?s("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():s("span",[e._v(" ")])]),t.title?s("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?s("div",[e._m(2,!0),s("div",{staticClass:"point-banner with-plus"},[s("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?s("div",[e._m(3,!0),s("div",{staticClass:"point-banner point-won"},[s("div",[e._v(e._s(t.points))])])]):e._e()])})),0):e._e()])},Bt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner"},[s("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner point-won"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner"},[s("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner point-won"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])}],Yt={props:["quests","format","color","add"],data:function(){return{lang:this.$t("label.shortLang"),serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},methods:{getBackgroundImage:function(e,t){var s;return e&&e[this.lang]?s=e[this.lang]:e&&e[t]&&(s=e[t]),s&&"_"===s[0]?"statics/images/quest/"+s:s&&-1!==s.indexOf("blob:")?s:s?this.uploadUrl+"/upload/quest/"+s:"statics/images/quest/default-quest-picture.jpg"},getUserBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")}}},Ht=Yt,Gt=Object(Te["a"])(Ht,Ut,Bt,!1,null,null,null),Wt=Gt.exports,Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.users?e._e():s("div",{staticClass:"user-card-small relative-position"},[s("div",{staticClass:"centered q-pt-lg"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),"scroll"===e.format&&(e.users&&e.users.length>0||e.add)?s("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},[e.add?s("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[s("div",{staticClass:"user-add-button"},[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return s("div",{key:t._id,staticClass:"cursor-pointer"},[s("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),"list"===e.format&&(e.users&&e.users.length>0||e.add)?s("div",{staticClass:"row justify-around q-pt-sm"},[e.add?s("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[s("div",{staticClass:"user-add-button"},[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return s("div",{key:t._id,staticClass:"cursor-pointer"},[s("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),s("q-dialog",{model:{value:e.addFriend.show,callback:function(t){e.$set(e.addFriend,"show",t)},expression:"addFriend.show"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.FollowYourFriends"))+"\n        "),s("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[s("newfriend",{on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},Jt=[],Kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",["suggestions"===e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?s("div",[e.loadingContacts?s("div",{staticClass:"centered"},[s("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n          "+e._s(e.$t("label.LoadingContacts"))+"\n        ")],1):e._e(),null===e.loadingContacts?s("div",{staticClass:"centered"},[s("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?s("div",[s("q-list",{attrs:{highlight:""}},[e._l(e.validatedContacts,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.name))]),s("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(s){return e.addFriend(t._id)}}})],1)],1)})),s("q-item",[s("q-item-section",{attrs:{avatar:""}}),s("q-item-section",[s("q-item-label",[s("a",{on:{click:function(t){e.newFriendMode="addFriend"}}},[e._v(e._s(e.$t("label.AddFriendManually")))])])],1)],1)],2)],1):e._e()]):e._e(),"addFriend"!==e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?e._e():s("div",[s("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n\n          "+e._s(e.$t("label.FindWithEmail"))+"\n          "),s("div",{staticClass:"row q-pb-md"},[s("div",{staticClass:"col-8"},[s("q-input",{attrs:{dark:"",color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),s("div",{staticClass:"col-4 centered"},[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n          "+e._s(e.$t("label.FindWithPhone"))+"\n          "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("q-input",{attrs:{dark:"",color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),s("div",{staticClass:"col-4 centered"},[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])])])},Zt=[],Xt=(s("7514"),s("b5ae")),es=function(e){var t=e.match(/\d/g);return 10===t.length},ts={data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",submitting:!1,loadingContacts:null,console:"",newFriendMode:"suggestions",isHybrid:window.cordova}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid||(e.newFriendMode="addFriend");case 1:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error&&e.$v.form.phone.$error){t.next=5;break}return t.next=3,ut.addFriend({email:e.form.email,phone:e.form.phone});case 3:s=t.sent,s?200===s.status?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?yt(e.$t("label.InvitationSent"),"success"):(yt(e.$t("label.FriendsAdded"),"success"),e.$emit("friendadded")),e.form.email="",e.form.phone=""):s.data&&"Friend not found"===s.data.message?yt(e.$t("label.FriendNotFound"),"error"):s.data&&"Too much friends"===s.data.message?yt(e.$t("label.TooMuchFriends"),"error"):s.data&&"User can not be friend with him"===s.data.message?yt(e.$t("label.UserCanNotBeFriendWithHim"),"error"):s.data&&"Already friends"===s.data.message?yt(e.$t("label.AlreadyFriends"),"error"):yt(e.$t("label.ErrorStandardMessage"),"error"):yt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return o=new FormData,o.append("image",a[0]),s.next=7,AuthService.uploadAccountPicture(o);case 7:n=s.sent,n&&n.data&&(n.data.file?t.$store.state.user.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&yt(t.$t("label.FileTooLarge"),"error"));case 9:case"end":return s.stop()}}),s)})))()},getContacts:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.cordova?(e.loadingContacts=!0,s=new ContactFindOptions,s.filter="",s.multiple=!0,a=["displayName","emails","phoneNumbers"],navigator.contacts.find(a,e.checkContacts,e.onError,s),e.loadingContacts=!1):e.newFriendMode="addFriend";case 1:case"end":return t.stop()}}),t)})))()},checkContacts:function(e){for(var t=[],s=0;s<e.length;s++)if(e[s].emails&&e[s].emails.length>0){var a=e[s].emails[0].value;a=a.toLowerCase(),t.push({name:e[s].displayName,email:a})}else if(e[s].phoneNumbers&&e[s].phoneNumbers.length>0){var r=e[s].phoneNumbers[0].value,o=r.match(/\d/g);t.push({name:e[s].displayName,phone:o.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ut.checkContacts(e);case 2:return a=s.sent,a&&a.data&&a.data.contacts&&(t.validatedContacts=a.data.contacts),s.next=6,t.hideContactsAlreadyfriends();case 6:case"end":return s.stop()}}),s)})))()},hideContactsAlreadyfriends:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.listFriends();case 2:for(s=t.sent,a=s.data,o=e.validatedContacts.length-1;o>=0;o--)for(n=0;n<a.length;n++)e.validatedContacts.length>o&&e.validatedContacts[o]._id===a[n].friendId&&e.validatedContacts.splice(o,1);case 5:case"end":return t.stop()}}),t)})))()},hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ut.addFriend(e);case 2:a=s.sent,a?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?yt(t.$t("label.InvitationSent"),"success"):(yt(t.$t("label.FriendsAdded"),"success"),t.$emit("friendadded")),t.hideUserFromValidatedContacts(e)):yt(t.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return s.stop()}}),s)})))()},onError:function(e){yt(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:Xt["email"]},phone:{checkPhone:es}}}},ss=ts,as=Object(Te["a"])(ss,Kt,Zt,!1,null,null,null),rs=as.exports,os=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative-position q-mr-md user-card",class:"user-card-"+e.size+(e.showName?" user-"+e.size+"-with-title":""),on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[s("div",{style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "}),e.showName?s("div",{staticClass:"centered subtitle6 user-card-name"},[e._v("\n    "+e._s(e.user.name)+"\n  ")]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()])},ns=[],is={props:["user","size","showName"],data:function(){return{serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},ls=is,cs=Object(Te["a"])(ls,os,ns,!1,null,null,null),us=cs.exports,ds={components:{newfriend:rs,userCard:us},props:["users","add","format"],data:function(){return{addFriend:{show:!1}}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriend.show=!0},closeAddFriends:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addFriend.show=!1;case 1:case"end":return t.stop()}}),t)})))()},updateFriendsActivity:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh");case 1:case"end":return t.stop()}}),t)})))()}}},ps=ds,ms=Object(Te["a"])(ps,Vt,Jt,!1,null,null,null),hs=ms.exports,fs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md",class:e.isHybrid?"":"full-height"},[e.isHybrid?s("div",[s("div",{staticClass:"q-pa-lg absolute-bottom-left",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"q-mr-md",style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{round:"",size:"1rem",color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",icon:e.isLight?"flashlight_off":"flashlight_on",disable:e.torchNotSupported},on:{click:e.toggleLight}}),s("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{round:"",size:"1rem",color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",icon:"cameraswitch"},on:{click:e.changeCamera}})],1),s("div",{staticClass:"text-center absolute-bottom",staticStyle:{bottom:"50px"}})]):s("div",[s("qrcode-stream",{staticClass:"q-mb-md",attrs:{camera:e.camera,torch:e.torchActive},on:{decode:e.onDecode,init:e.onInit}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showScanConfirmation,expression:"showScanConfirmation"}],staticClass:"scan-confirmation"},[s("q-spinner",{attrs:{color:"primary",size:"5em",thickness:2}})],1),e.start&&(e.isIOs||e.isSafari)?s("q-btn",{staticClass:"absolute-center",style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{label:e.$t("label.startScan"),color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",icon:"qr_code_scanner"},on:{click:function(t){e.start=!e.start}}}):e._e()],1),s("q-btn",{staticClass:"q-mr-md",style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{round:"",size:"1rem",color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",icon:e.isLight?"flashlight_off":"flashlight_on",disable:e.torchNotSupported},on:{click:function(t){e.torchActive=!e.torchActive}}}),s("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{round:"",size:"1rem",color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",icon:"cameraswitch"},on:{click:e.switchCamera}})],1)])},gs=[],bs=s("bb6f"),vs={name:"qrCodeStream",components:{QrcodeStream:bs["QrcodeStream"]},props:["color"],data:function(){return{result:"",isLight:!1,timeOutId:null,usedCamera:0,isHybrid:null,camera:"rear",noRearCamera:!1,noFrontCamera:!1,torchActive:!1,torchNotSupported:!1,showScanConfirmation:!1,start:!1,isIOs:lt.isIOS(),isSafari:lt.isSafari()}},created:function(){this.isHybrid=window.cordova},methods:{isDone:function(e,t){e&&console.log(e),this.usedCamera=t.currentCamera,t.authorized?setTimeout(this.scan,500):yt(this.$t("qrCode.unauthorized"),"error")},scan:function(){QRScanner.scan(this.displayResult)},toggleLight:function(){var e=this;QRScanner.getStatus((function(t){t.canEnableLight&&(t.lightEnabled?QRScanner.disableLight((function(){e.isLight=!1})):QRScanner.enableLight((function(){e.isLight=!0})))}))},changeCamera:function(){var e=this;0===this.usedCamera?(this.usedCamera=1,this.torchNotSupported=!0):(this.usedCamera=0,QRScanner.getStatus((function(t){t.canEnableLight&&(e.torchNotSupported=!1)}))),QRScanner.useCamera(this.usedCamera)},displayResult:function(e,t){e?yt(this.$t("qrCode.scanError"),"error"):(this.result=t,this.$emit("QrCodeResult",this.result),this.timeOutId=setTimeout(this.scan,4e3))},onDecode:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e;case 2:return t.result=s.sent,a=t.camera,t.pause(),s.next=7,t.timeout(1e3);case 7:return s.next=9,t.$emit("QrCodeResult",t.result);case 9:return s.next=11,t.timeout(1e3);case 11:t.unpause(a);case 12:case"end":return s.stop()}}),s)})))()},unpause:function(e){this.camera=e},pause:function(){this.camera="off"},timeout:function(e){return new Promise((function(t){window.setTimeout(t,e)}))},switchCamera:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.camera,t.next="front"===t.t0?3:"rear"===t.t0?5:7;break;case 3:return e.camera="rear",t.abrupt("break",7);case 5:return e.camera="front",t.abrupt("break",7);case 7:case"end":return t.stop()}}),t)})))()},onInit:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.torchNotSupported=!0,e.start="off"!==e.camera,e.showScanConfirmation="off"===e.camera;case 3:case"end":return t.stop()}}),t)})))()},prepareScanner:function(){document.body.style.backgroundColor="transparent",document.body.style.background="transparent",QRScanner.prepare(this.isDone)}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid&&(QRScanner.destroy(),setTimeout(e.prepareScanner,1e3));case 1:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.isHybrid&&(document.body.style.backgroundColor="#323232",QRScanner.destroy(),null!==this.timeOutId&&clearTimeout(this.timeOutId))}},ws=vs,ys=(s("20ce"),Object(Te["a"])(ws,fs,gs,!1,null,"35a443d2",null)),qs=ys.exports,ks=function(e){return e>=3e3?{level:9,next:9,max:15e3,progress:(e-3e3)/12e3}:e>=1500?{level:8,next:9,max:3e3,progress:(e-1500)/1500}:e>=800?{level:7,next:8,max:1500,progress:(e-800)/700}:e>=400?{level:6,next:7,max:800,progress:(e-400)/400}:e>=200?{level:5,next:6,max:400,progress:(e-200)/200}:e>=100?{level:4,next:5,max:200,progress:(e-100)/100}:e>=30?{level:3,next:4,max:100,progress:(e-30)/70}:e>=15?{level:2,next:3,max:30,progress:(e-15)/15}:{level:1,next:2,max:15,progress:e/15}},xs={components:{QInfiniteScroll:O["a"],QSpinnerDots:se["a"],geolocation:bt,shop:Ct,suggest:Tt,mainQuest:Qt,titleBar:Rt,questsList:Wt,usersList:hs,qrCodeStream:qs},data:function(){return{bestQuest:null,nearestQuests:null,invitationQuests:null,onTopQuests:null,extraQuests:null,friendQuests:null,users:null,search:{quests:[],text:""},user:{position:null,positionType:null,proposeAQuest:!0},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",showSearch:!1,warnings:{noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{ranking:[]},profile:{level:{},organization:{},progress:.1,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},isMounted:!1,mainQuestListFormat:"big",isHybrid:window.cordova,showNonHybridQRReader:!1,isQuestsLoaded:!1,suggestQuest:{show:!1},innerWidth:window.innerWidth,QuestService:ct}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1),document.body.style.background="#323232"},mounted:function(){var e=this;if(this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name){if(this.$q&&this.$q.platform&&this.$q.platform.is&&this.$q.platform.is.desktop&&(this.mainQuestListFormat="small"),window.cordova){dt.initLocalStorage();var t=this.$store.state.user.statistics.nbQuestsSuccessful;t>=1&&"false"===dt.hasAlreadyHavePopup()&&(console.log("the user has done at least one quest"),dt.launchpopup())}this.initPage(),this.$nextTick((function(){e.isMounted=!0}))}else this.backToLogin();this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide()},methods:{initPage:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkIfProfileIsComplete(),lt.clearAllRunningProcesses(),t.next=4,e.checkNetwork();case 4:return e.profile.level=ks(e.$store.state.user.score),t.next=7,e.getFriendQuests();case 7:case"end":return t.stop()}}),t)})))()},checkIfProfileIsComplete:function(){18!==this.$store.state.user.story.step||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.openUpdateProfilePage()},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},onLocationSuccess:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.isQuestsLoaded&&"defaultProfilePosition"!==t.user.positionType||t.offline.active){s.next=4;break}return s.next=4,t.loadQuests();case 4:if(null!==t.users){s.next=7;break}return s.next=7,t.getCreators();case 7:t.user.positionType="userCurrentLocation",t.$refs["geolocation-component"].stopTracking();case 9:case"end":return s.stop()}}),s)})))()},startScanQRCode:function(){this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},checkCode:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e=lt.removeUnusedUrl(e),3!=e.length){s.next=4;break}return yt(t.$t("label.QRCodeIsNotStartingOne"),"error"),s.abrupt("return");case 4:return s.next=6,ct.checkQRCode(e,t.$t("label.shortLang"));case 6:a=s.sent,a&&a.data&&"ok"===a.data.status?(t.closeQRCodeReader(),-1===e.indexOf("_score")?a.data.questId?t.playQuest(a.data.questId):t.playQuest(e):t.$router.push("/quest/"+e.substring(0,24)+"/end")):yt(t.$t("label.QRCodeIsNotWorking"),"error");case 8:case"end":return s.stop()}}),s)})))()},checkNetwork:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.offline.active,a=lt.isNetworkAvailable(),e.warnings.noNetwork=!a,e.offline.active=!a,s===e.offline.active){t.next=9;break}return e.questList=[],t.next=8,e.loadQuests();case 8:e.questList[0].description="CachedQuests";case 9:lt.setTimeout(e.checkNetwork,5e3);case 10:case"end":return t.stop()}}),t)})))()},loadQuests:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noServerReponse=!1,t.next=3,e.getQuests();case 3:case"end":return t.stop()}}),t)})))()},getQuests:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isQuestsLoaded=null,e.showBottomMenu=!1,e.offline.active){t.next=18;break}if(null!==e.user.position){t.next=7;break}return yt(e.$t("label.LocationSearching"),"warning"),e.isQuestsLoaded=!1,t.abrupt("return");case 7:return t.next=9,ct.listHomeQuests({lng:e.user.position.longitude,lat:e.user.position.latitude});case 9:if(s=t.sent,s&&s.data){t.next=14;break}return yt(e.$t("label.TechnicalIssue"),"error"),e.isQuestsLoaded=!1,t.abrupt("return");case 14:e.isQuestsLoaded=!0,s.data.message&&"No quest"===s.data.message||(s.data.best&&(e.bestQuest=s.data.best),s.data.nearests?e.nearestQuests=s.data.nearests:e.nearestQuests=[],s.data.topQuests?e.onTopQuests=s.data.topQuests:e.onTopQuests=[],s.data.invitations&&(e.invitationQuests=s.data.invitations),s.data.extra&&(e.extraQuests=s.data.extra)),t.next=45;break;case 18:return t.next=20,lt.readFile("","quests.json");case 20:if(a=t.sent,!a){t.next=43;break}if(o=JSON.parse(a),!o||!o.list){t.next=41;break}if(n=o.list,!(n.length>0)){t.next=39;break}i=0;case 27:if(!(i<n.length)){t.next=35;break}return t.next=30,lt.readBinaryFile(n[i].questId,n[i].picture[e.$t("label.shortLang")]);case 30:l=t.sent,n[i].picture=l||"_default-quest-picture.jpg";case 32:i++,t.next=27;break;case 35:e.questList=n,e.offline.active=!0,t.next=41;break;case 39:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 41:t.next=45;break;case 43:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 45:case"end":return t.stop()}}),t)})))()},getFriendQuests:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.listFriendQuests();case 2:if(s=t.sent,e.friendQuests=[],s&&s.data)for(a=0;a<s.data.length;a++)e.friendQuests.push({questId:s.data[a].questId,picture:s.data[a].questData.picture,title:s.data[a].questData.title,location:{town:s.data[a].questData.town},userPicture:s.data[a].userData.picture,userName:s.data[a].userData.name,playStatus:s.data[a].status?s.data[a].status:"succeeded",points:s.data[a].stars});case 5:case"end":return t.stop()}}),t)})))()},getCreators:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.listSuggestions({lng:e.user.position.longitude,lat:e.user.position.latitude},10);case 2:if(s=t.sent,s&&s.data){t.next=6;break}return yt(e.$t("label.TechnicalIssue"),"error"),t.abrupt("return");case 6:s.data.message&&"No users"===s.data.message||(e.users=s.data);case 7:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.rankingMissing=!1,e.$q.loading.show(),t.next=4,ut.getRanking();case 4:s=t.sent,e.$q.loading.hide(),s&&s.data?e.success.ranking=s.data:e.warnings.rankingMissing=!0;case 7:case"end":return t.stop()}}),t)})))()},openAdminPage:function(){this.offline.active||this.$router.push("/admin")},getQuestTitle:function(e,t){return e&&e.title?e.title:this.$t("label.NoTitle")},backToLogin:function(){this.$router.push("/user/login")},trackCallBackFunction:function(){return!1},onLocationError:function(e){var t=this;return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.user.location&&t.$store.state.user.location.geometry&&t.$store.state.user.location.geometry.coordinates&&0!==t.$store.state.user.location.geometry.coordinates[0]&&null===t.user.position&&t.$set(t.user,"position",{longitude:t.$store.state.user.location.geometry.coordinates[0],latitude:t.$store.state.user.location.geometry.coordinates[1]}),null===t.user.position||t.offline.active){e.next=10;break}if(!1!==t.isQuestsLoaded){e.next=5;break}return e.next=5,t.loadQuests();case 5:if(null!==t.users){e.next=8;break}return e.next=8,t.getCreators();case 8:t.user.positionType="defaultProfilePosition",t.$refs["geolocation-component"].stopTracking();case 10:case"end":return e.stop()}}),e)})))()},playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){if(this.userIsConnected())this.$router.push("/quest/create/welcome");else{var e=this;this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToCreateAnAccount"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.openUpdateProfilePage();case 1:case"end":return t.stop()}}),t)}))))}},userIsConnected:function(){return"-"!==this.$store.state.user.name},modifyQuest:function(e){this.$router.push("/quest/builder/"+e)},readMore:function(){yt(this.$t("label.QuestDownloadFinished"),"positive")},readMoreAroundYou:function(){this.$router.push("/search/quest/around")},readMoreFriendsGames:function(){this.$router.push("/search/quest/friends")},readMoreAllCreators:function(){this.$router.push("/user/"+this.$store.state.user.id+"/friends")},openProfile:function(e){this.offline.active||(e||(e=this.$store.state.user.id),this.$router.push("/profile/"+e))},openSearch:function(){this.offline.active||this.$router.push("/search/quest/around")},openRanking:function(){this.offline.active||this.$router.push("/user/ranking/level/all")},openMap:function(){this.offline.active||this.$router.push("/map")},getProfileImage:function(){var e=this.$store.state.user;return e.picture&&-1!==e.picture.indexOf("http")?e.picture:e.picture?this.uploadUrl+"/upload/profile/"+e.picture:"statics/images/icon/profile-small.png"}}},Cs=xs,Ss=(s("a2e6"),Object(Te["a"])(Cs,st,at,!1,null,null,null)),_s=Ss.exports,Is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"div-column",staticClass:"column"},[null!==e.user.position?s("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,a){return s("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(s){return e.openQuestSummary(t,a)}}})})),e.map.loaded?s("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}):e._e(),s("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[s("div",{staticClass:"infoWindow"},[s("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),s("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?s("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?s("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?s("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?s("p",[e._v("\n            "+e._s(e.currentQuest.displayPrice)+"\n          ")]):e._e(),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Play")))])],1)])],2):e._e()],1):e._e(),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top over-map"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:e.backToHome}})],1)],1)},Ps=[],$s=(s("cadf"),s("456d"),s("755e")),Ts={components:{geolocation:bt},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},user:{position:null},currentQuestIndex:null,currentQuest:null,questList:[],isMounted:!1}},computed:{google:$s["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.initPage(),this.$nextTick((function(){e.isMounted=!0}))},methods:{initPage:function(){return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:lt.clearAllRunningProcesses();case 1:case"end":return e.stop()}}),e)})))()},onNewUserPosition:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.map.loaded){s.next=4;break}return s.next=4,t.reloadMap();case 4:case"end":return s.stop()}}),s)})))()},centerOnUserPosition:function(){null!==this.user.position?(this.centerMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):Notification(this.$t("label.LocationSearching"),"warning")},centerMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var s=this.map.infoWindow,a={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=a,this.currentQuestIndex!==t||!s.isOpen){var r=this.$refs.questMarkers[t].$markerObject;r.setAnimation(google.maps.Animation.BOUNCE),lt.setTimeout((function(){r.setAnimation(null)}),700)}if(this.currentQuestIndex===t?s.isOpen=!s.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",s.isOpen=!0,this.panTo(a)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){var o={premiumprice1:"0,99 €",premiumprice2:"1,99 €",premiumprice3:"2,99 €",premiumprice5:"4,99 €",premiumprice8:"7,99 €",premiumprice10:"9,99 €",premiumprice20:"19,99 €"};this.currentQuest.displayPrice=o[e.premiumPrice.androidId]}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},reloadMap:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.map.loaded=null,e.$q.loading.show(),t.next=4,e.getQuests();case 4:e.closeInfoWindows(),e.$refs.mapRef?(e.questList.length>0?e.$refs.mapRef.$mapPromise.then((function(t){var s=new google.maps.LatLngBounds,a=!0,r=!1,o=void 0;try{for(var n,i=e.questList[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var l=n.value;s.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(c){r=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}s.extend({lng:e.user.position.longitude,lat:e.user.position.latitude}),t.fitBounds(s)})):e.centerOnUserPosition(),e.map.loaded=!0):(e.centerOnUserPosition(),e.map.loaded=!0),e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},getQuests:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(null!==t.user.position){s.next=3;break}return Notification(t.$t("label.LocationSearching"),"warning"),s.abrupt("return");case 3:return t.map.filter=e||"all",t.$q.loading.show(),s.next=7,ct.listAllForCountry();case 7:if(a=s.sent,t.$q.loading.hide(),a&&a.data){s.next=12;break}return Notification(t.$t("label.TechnicalIssue"),"error"),s.abrupt("return");case 12:if(a.data.message&&"No quest"===a.data.message||(t.questList=a.data),0!==t.questList.length||"world"===t.map.filter){s.next=15;break}return s.abrupt("return",t.getQuests("world"));case 15:case"end":return s.stop()}}),s)})))()},getQuestLevelName:function(e){var t=lt.getById(questLevels,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),s=e.lng();this.map.center.lat===t&&this.map.center.lng===s||(this.map.centerTmp={lng:s,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},setMapIcon:function(e){return e?{url:"statics/images/icon/place.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:30}}:{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},trackCallBackFunction:function(){return!1},onUserPositionError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},backToHome:function(){this.$router.push("/home")}}},As=Ts,zs=Object(Te["a"])(As,Is,Ps,!1,null,null,null),Os=zs.exports,Ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll",class:e.multiplayer.showScanner||e.shop.showScanner?"bg-transparent":"background-dark"},[e.multiplayer.showScanner?s("div",[s("div",{staticClass:"text-white bg-primary q-pt-xl q-pl-md q-pb-sm"},[s("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeMultiplayerQRCodeReader}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n      "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n    ")]),s("qr-code-stream",{on:{QrCodeResult:e.checkTeamCode}})],1):e._e(),e.shop.showScanner?s("div",[s("div",{staticClass:"text-white bg-primary q-pt-xl q-pl-md q-pb-sm"},[s("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeTierPaymentQRCode}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n      "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n    ")]),s("qr-code-stream",{on:{QrCodeResult:e.checkTierPaymentCode}})],1):e._e(),e.shop.showScanner||e.multiplayer.showScanner?e._e():s("div",{staticClass:"reduce-window-size-desktop",class:{loaded:e.pageReady},attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():s("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.Loading"))+"\n      "),s("div",{staticClass:"q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?s("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.QuestNeedNetwork"))+"\n      "),s("div",[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),e.quest&&e.quest.status?s("div",{staticClass:"relative-position image-banner"},[s("div",{staticClass:"effect-kenburns limit-size-desktop",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat ;"}),s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1),s("div",{staticClass:"q-py-sm dark-banner absolute-bottom limit-size-desktop"},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.openProfile(e.quest.authorUserId)}}},[s("q-item-section",{attrs:{side:""}},[e.quest.customization&&e.quest.customization.logo&&""!==e.quest.customization.logo?e._e():s("q-avatar",{attrs:{size:"50px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?s("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+e.quest.author.picture}}):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})]),e.quest.customization&&e.quest.customization.logo&&""!==e.quest.customization.logo?s("q-avatar",{attrs:{size:"50px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.logo}}):e._e()]):e._e()],1),s("q-item-section",{staticStyle:{"padding-right":"84px"}},[e.quest.customization&&e.quest.customization.authorName&&""!==e.quest.customization.authorName||"undefined"===typeof e.quest.author||!e.quest.author||!e.quest.author.name?e._e():s("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(e.quest.author.name))]),e.quest.customization&&e.quest.customization.authorName&&""!==e.quest.customization.authorName?s("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(e.quest.customization.authorName))]):e._e()],1)],1)],1)]):e._e(),e.quest&&e.quest.status?s("div",{staticClass:"q-pa-md quest-description text-white",staticStyle:{"padding-bottom":"-50px"}},[!e.quest.availablePoints||!e.quest.availablePoints.maxPts||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"float-right quest-score",on:{click:e.showRewards}},[s("img",{attrs:{src:"statics/images/icon/point.png"}}),s("div",{staticClass:"absolute"},[e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+"\n        ")])]),e.warning.lowBattery?s("div",{staticClass:"bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n      ")],1):e._e(),e.warning.tooMuchUsers?s("div",{staticClass:"bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"warning"}}),e._v(" "+e._s(e.$t("label.TooMuchUsersCurrently"))+"\n      ")],1):e._e(),"published"!==e.quest.status?s("div",{staticClass:"bg-primary centered q-pa-sm q-mb-md"},[e._v("\n        "+e._s(e.$t("label."+("quest"===e.quest.type?"QuestDraftVersion":"PageDraftVersion")))+"\n      ")]):e._e(),s("div",{staticClass:"text-h5"},[e._v("\n        "+e._s(""===e.quest.title?e.$t("label.NoTitle"):e.quest.title)+"\n         "),e.getLanguage()!==e.$store.state.user.language?s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()]),s("div",{staticClass:"row q-pt-md text-subtitle1 properties-bar"},[s("div",{staticClass:"q-mr-lg"},[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/difficulty.svg"}}),e._v(e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        ")]),e.quest.duration&&e.quest.duration<999?s("div",{staticClass:"q-mr-lg"},[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/duration.svg"}}),e.quest.duration&&e.quest.duration<60?s("span",[e._v(e._s(e.quest.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),e.quest.duration&&e.quest.duration>=60?s("span",[e._v(e._s(Math.floor(e.quest.duration/60))+e._s(e.$t("label.hoursSimplified"))+e._s(e.quest.duration%60>0?e.quest.duration%60:""))]):e._e()]):e._e(),"quest"===e.quest.type&&e.quest.customization&&!e.quest.customization.hidePaymentBox?s("div",{staticClass:"q-mr-lg"},[e.quest.premiumPrice.tier||"free"!==e.shop.premiumQuest.priceCode||"quest"!==e.quest.type?e._e():s("span",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),e.shop.premiumQuest.alreadyPayed?e._e():s("span",[e._v(e._s(e.$t("label.Free")))]),e.shop.premiumQuest.alreadyPayed?s("span",[e._v(e._s(e.$t("label.AlreadyPaied")))]):e._e()]),"free"!==e.shop.premiumQuest.priceCode&&"quest"===e.quest.type?s("span",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s("0"===e.shop.premiumQuest.priceValue?e.quest.premiumPrice&&e.quest.premiumPrice.prices&&e.quest.premiumPrice.prices.fr?e.quest.premiumPrice.prices.fr:"...":e.shop.premiumQuest.priceValue))])]):e._e()]):e._e(),s("div",[e.quest.rating&&e.quest.rating.rounded?s("q-rating",{attrs:{readonly:"",color:"yellow-8",max:5,size:"0.8em"},model:{value:e.quest.rating.rounded,callback:function(t){e.$set(e.quest.rating,"rounded",t)},expression:"quest.rating.rounded"}}):e._e()],1)]),"room"===e.quest.type&&e.quest.premiumPrice.manual?s("div",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.premiumPrice.tier&&"quest"===e.quest.type&&e.quest.premiumPrice.manual&&"free"===e.shop.premiumQuest.priceCode?s("div",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.location&&e.quest.location.address?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-location",on:{click:function(t){return e.goToLocationWithMaps(e.quest.location.coordinates[0],e.quest.location.coordinates[1])}}},[s("u",[e._v(" "+e._s(e.quest.location.address))])]):e._e(),e.quest.warning?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning",on:{click:function(t){return e.openWarningLink()}}},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),s("u",[e._v(e._s(e.getTranslatedData(e.quest.warning)))])],1):e._e(),e.quest.playersNumber&&e.quest.playersNumber>1?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning"},[s("q-icon",{attrs:{color:"secondary",name:"group"}}),e._v(" "+e._s(e.$t("label.YouNeedToBeXPlayers",{nb:e.quest.playersNumber}))+"\n      ")],1):e._e(),s("div",{staticClass:"text-subtitle1 q-mt-sm quest-ranking"},[s("a",{staticClass:"concertone",on:{click:function(t){return e.$router.push("/user/ranking/ranking/"+e.quest.questId)}}},[e._v(e._s(e.$t("label.Ranking")))])])]):e._e(),s("div",{staticClass:"quest-home-button"},[s("div",{staticClass:"text-center q-pt-md"},["yes"===e.canReplay?s("p",[!e.isQuestOpen.status||"quest"!==e.quest.type||e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)||this.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||!e.getAllLanguages()||e.isAdmin?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[e.continueQuest?s("span",[e._v(e._s(e.$t("label.ContinueTheQuest")))]):e._e(),!e.continueQuest&&e.isRunFinished?s("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))]):e._e(),e.continueQuest||e.isRunFinished?e._e():s("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]),e.continueQuest?s("q-btn",{staticClass:"q-mt-md large-btn",attrs:{flat:"",color:"primary"},on:{click:e.restartGame}},[s("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))])]):e._e(),"room"===e.quest.type&&e.quest.readMoreLink&&""!==e.quest.readMoreLink?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:e.openReadMoreLink}},[s("span",[e._v(e._s(e.$t("label.Book")))])]):e._e(),!e.isQuestOpen.status||e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyCoins()}}},[s("span",[e._v(e._s(e.$t("label.BuyCoinsToPlay")))])]),e.isQuestOpen.status&&this.isUserTooFar&&!e.quest.allowRemotePlay?s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.GetCloserToStartingPoint"))+" ("+e._s(e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m")+")")])]):e._e(),e.isAdmin||e.isQuestOpen.status&&e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)&&"notplayableonweb"!==e.shop.premiumQuest.priceCode&&(!this.isUserTooFar||e.quest.allowRemotePlay)?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[s("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]):e._e(),!e.isQuestOpen.status||"notplayableonweb"!==e.shop.premiumQuest.priceCode||e.isAdmin||e.isOwner?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.QuestPlayableOnMobile")))])]),e.isQuestOpen.status&&"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[s("span",[e._v(e._s(e.$t("label.TestYourQuest")))])]):e._e(),e.isQuestOpen.status?e._e():s("span",[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.isQuestOpen.displayHours=!0}}},[s("span",[e._v(e._s(e.$t("label.OpeningHours")))])]),s("div",[e._v(e._s(e.$t("label.QuestIsNotPlayableNow")))])],1)],1):e._e(),"yes"!==e.canReplay?s("p",["no"===e.canReplay?s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.YouCanNotPlayAgainThisGame")))])]):e._e(),"nottoday"===e.canReplay?s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.YouCanNotPlayAgainThisGameToday")))])]):e._e()],1):e._e()])]),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"text-subtitle1 arial",domProps:{innerHTML:e._s(this.quest.description)}}),e.isUserTooFar&&!e.quest.allowRemotePlay?s("div",{staticClass:"q-pt-md"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.QuestIsFarFromUser"))}})],1):e._e()]),e.isOwner||e.isAdmin?s("div",{staticClass:"q-pa-md subtitle5 centered"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.YouAreQuestOwnerDesc"))}}),e._v("\n       "),s("q-btn",{attrs:{flat:"",color:"secondary",label:e.$t("label.Modify")},on:{click:function(t){return e.modifyQuest()}}})],1):e._e(),"room"===e.quest.type?s("div",{staticClass:"q-pa-md subtitle5"},[e._v("\n      "+e._s(e.$t("label.RoomDataWarning"))+"\n    ")]):e._e(),s("div",{staticClass:"centered text-grey text-subtitle1 arial q-mt-xl q-mb-md"},[e._v("\n      "+e._s(e.$t("label.Version")+" "+e.quest.version)+"\n    ")]),e.quest.snapshots&&e.quest.snapshots.length>0?s("div",[s("div",{staticClass:"row"},[e.quest.snapshots.length>0?s("div",{staticClass:"col-4 centered q-pa-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[0]}})]):e._e(),e.quest.snapshots.length>1?s("div",{staticClass:"col-4 centered q-pa-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[1]}})]):e._e(),e.quest.snapshots.length>2?s("div",{staticClass:"col-4 centered q-pa-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[2]}})]):e._e()])]):e._e()]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreloaderPopup,expression:"showPreloaderPopup"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("div",{staticClass:"centered q-pa-lg title2 text-primary background-lighter"},[s("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.InProgressPreparation")))]),s("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),e.offline.show?s("div",{staticClass:"centered"},[s("offlineLoader",{attrs:{quest:this.quest,design:"prepare",lang:e.getLanguage()},on:{end:function(t){return e.showCalibrationAndStartQuest()}}})],1):e._e(),s("div",[e.quest.customization&&e.quest.customization.removeWarning?e._e():s("div",[s("div",{staticClass:"q-px-lg q-pb-lg q-pt-md centered subtitle2"},[e._v("\n              "+e._s(e.$t("label.Warnings"))+"\n            ")]),s("div",{staticClass:"q-pa-md subtitle5"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.GeneralWarning"))}})],1)]),e.isRunFinished?s("div",{staticClass:"q-pa-md subtitle5"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.YouAlreadyDidThisQuest"))}})],1):e._e()]),s("gpscalibration",{ref:"gpscal",on:{end:function(t){e.startQuest(e.quest.questId,e.getLanguage())}}})],1)])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.multiplayer.show,expression:"multiplayer.show"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("div",{staticClass:"bottom-margin-for-keypad"},[s("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n            "+e._s(e.$t("label.ThisIsAMultiplayerGame"))+"\n          ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.JoinATeam")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanMultiplayerQRCode}},[s("span",[e._v(e._s(e.$t("label.ScanTheLeaderQRCode")))])])],1)],1)],1),s("div",{staticClass:"centered"},[e._v("\n            -\n            "),s("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n            -\n          ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.CreateATeam")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[""===e.multiplayer.qrcode?s("div",{staticClass:"centered"},[s("q-input",{attrs:{dark:"",type:"text",label:e.$t("label.TeamName"),"bottom-slots":"",counter:"",maxlength:"20"},model:{value:e.multiplayer.team,callback:function(t){e.$set(e.multiplayer,"team",t)},expression:"multiplayer.team"}}),s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.createTeam}},[s("span",[e._v(e._s(e.$t("label.CreateTeam")))])])],1):e._e(),""!==e.multiplayer.qrcode?s("div",{staticClass:"centered"},[s("div",[e._v(e._s(e.$t("label.OtherPlayersMustScanThisQRCode")))]),s("div",{staticClass:"q-pa-md"},[s("img",{attrs:{src:e.uploadUrl+"/upload/teams/"+e.multiplayer.qrcode+".png"}})]),s("div",[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.checkTeamAndStart}},[s("span",[e._v(e._s(e.$t("label.MyTeamIsCompleteLetsGo")))])])],1)]):e._e()])],1)],1)])])])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.shop.show,expression:"shop.show"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[s("q-icon",{attrs:{name:"close"}})],1),s("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n          "+e._s(e.$t("label.BuyThisQuest"))+"\n        ")]),e.quest.premiumPrice&&e.quest.premiumPrice.tier?s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.YouHaveReceivedAQrCodeFrom",{author:e.quest.author.name})))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanTierPaymentQRCode}},[s("span",[e._v(e._s(e.$t("label.ScanTheUniqueQRCode")))])])],1)],1)],1):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&e.quest.premiumPrice.active?s("div",{staticClass:"centered"},[e._v("\n          -\n          "),s("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n          -\n        ")]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.active?s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.BuyInOneClick")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():s("q-btn",{staticClass:"glossy large-button text-primary bg-white",attrs:{disabled:!e.shop.premiumQuest.buyable},on:{click:function(t){return e.buyQuest()}}},[s("span",[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?e.quest.premiumPrice&&e.quest.premiumPrice.prices&&e.quest.premiumPrice.prices.fr?e.quest.premiumPrice.prices.fr:"...":e.shop.premiumQuest.priceValue)+")")])])],1)],1)],1):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:"",color:"primary"},on:{click:e.closeShop}},[e._v(e._s(e.$t("label.Cancel")))])],1)])])]),s("q-dialog",{model:{value:e.showRewardsPopup,callback:function(t){e.showRewardsPopup=t},expression:"showRewardsPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.ScoreAndBadges"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.OnThisEscapeGameYouCanWin"))+"\n        "),s("ul",[e.quest.availablePoints&&e.quest.availablePoints.minPts&&e.quest.availablePoints.maxPts?s("li",[e._v(e._s(e.$t("label.ScoreRange",{min:e.quest.availablePoints.minPts,max:e.quest.availablePoints.maxPts})))]):e._e(),e.quest.rewardPicture&&""!==e.quest.rewardPicture?s("li",[e._v(e._s(e.$t("label.OneBadge")))]):e._e()])])],1)],1),s("q-dialog",{model:{value:e.isQuestOpen.displayHours,callback:function(t){e.$set(e.isQuestOpen,"displayHours",t)},expression:"isQuestOpen.displayHours"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.OpeningHours"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e.quest.scheduling&&e.quest.scheduling.length>0?s("div",[s("div",{staticClass:"centered q-pb-md"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.quest.scheduling,(function(t,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),s("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.From"))+" "+e._s(t[0])+"h\n            ")]),s("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.To"))+" "+e._s(t[1])+"h\n            ")])])}))],2):e._e()])],1)],1),e.geolocationIsSupported?e._e():s("div",{staticClass:"fixed-bottom over-map"},[s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1)])],1)},Ns=[],Rs=(s("b54a"),{getById:function(e){return je().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){return je().get("run/quest/"+e).catch((function(e){return console.log(e.request)}))},listScoresForThisQuest:function(e){return je().get("run/quest/"+e+"/ranking/scores").catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return je().get("run/quest/"+e+"/ranking/friends").catch((function(e){return console.log(e.request)}))},checkNumberOfPlayers:function(e){return je().get("run/quest/"+e+"/players/number").catch((function(e){return console.log(e.request)}))},checkIfAlreadyPlayingAGame:function(e){return je().get("run/quest/"+e+"/checkifalreadyplaying").catch((function(e){return console.log(e.request)}))},getRankingForAQuest:function(e){return je().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return je().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e,t,s){return je().post("run/"+e+"/step/next/player/"+t,s).catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t,s){return je().get("run/"+e+"/marker/"+t+"/next/player/"+s).catch((function(e){return console.log(e.request)}))},listWonObjects:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().get("quest/"+e+"/runs/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},getHint:function(e,t,s,a){return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a||(a="default"),r.next=3,je().get("run/"+e+"/step/"+t+"/version/"+s+"/hint/lang/"+a);case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}}),o)})))()},init:function(e,t,s,a,r,o){return r||(r="noteamnamedefined"),je().post("run/quest/"+e+"/version/"+t+"/init/"+s+"/remote/"+a+"/team/"+r+"/datashared/"+o).catch((function(e){return console.log(e.request)}))},initTeamPlay:function(e,t,s,a,r){return je().post("run/teamplay/quest/"+e+"/init/"+t+"/"+s+"/"+a+"/"+r).catch((function(e){return console.log(e.request)}))},addTeamPlayer:function(e){return je().post("run/join/"+e).catch((function(e){return console.log(e.request)}))},createATeam:function(e,t){return je().post("run/quest/"+questId+"/version/"+version+"/init/"+lang+"/remote/"+remotePlay).catch((function(e){return console.log(e.request)}))},checkTeamIsReady:function(e){return je().get("run/"+e+"/check/team/ready").catch((function(e){return console.log(e.request)}))},endRun:function(e,t,s,a,r){return je().put("run/"+e+"/quest/"+s+"/version/"+a+"/lang/"+r+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t,s){return je().put("run/"+e+"/passstep/"+t+"/player/"+s).catch((function(e){return console.log(e.request)}))},closeInProgressRuns:function(e){return je().post("run/quest/"+e+"/close").catch((function(e){return console.log(e.request)}))},createMultiplayerRunForTesters:function(e){return je().post("run/quest/"+e+"/test/create").catch((function(e){return console.log(e.request)}))}}),Fs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.offline.progress>0&&e.offline.progress<1?s("div",{staticClass:"centered q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():s("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():s("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.Downloading")))]),e.error.raised?e._e():s("div",{staticClass:"q-pa-md"},[s("q-linear-progress",{staticStyle:{height:"5px"},attrs:{color:"primary","track-color":"grey-1",value:e.offline.progress}}),e.isIOs?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(parseInt(100*e.offline.progress,10))+" %\n      ")]):e._e()],1),e.error.raised&&e.error.nb<2?s("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?s("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+"\n    ")]):e._e()]):e._e()])},Ds=[],Ls={listForAQuest:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s||(s="default"),a.next=3,je().get("quest/"+e+"/version/"+t+"/steps/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return o=a.sent,a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,s,a){return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a||(a="default"),r.next=3,je().get("quest/"+e+"/version/"+s+"/chapter/"+t+"/steps/lang/"+a).catch((function(e){return console.log(e.request)}));case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),o)})))()},listWonObjects:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().get("quest/"+e+"/version/"+s+"/steps/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a)})))()},getById:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s||(s="default"),a.next=3,je().get("step/"+e+"/version/"+t+"/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return o=a.sent,a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()},checkAnswer:function(e,t,s,a,o,i){return n()(r.a.mark((function n(){var l;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,je().post("quest/"+e+"/version/"+s+"/step/"+t+"/check/"+a+"/player/"+i,o).catch((function(e){return console.log(e.request)}));case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}}),n)})))()},countForAQuest:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().get("quest/"+e+"/version/"+t+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},listChapters:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().get("quest/"+e+"/version/"+t+"/lang/"+s+"/chapter/list").catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a)})))()},save:function(e){return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,je().put("quest/"+e.questId+"/version/"+e.version+"/step/"+e.stepId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,ct.removeFromCache(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},modifyChapter:function(e){return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,je().put("quest/"+e.questId+"/version/"+e.version+"/chapter/"+e.chapterId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,ct.removeFromCache(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},remove:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().delete("quest/"+e+"/version/"+s+"/step/"+t+"/remove");case 2:return o=a.sent,a.next=5,ct.removeFromCache(e);case 5:return a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},removeChapter:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().delete("quest/"+e+"/version/"+s+"/chapter/"+t+"/remove");case 2:return o=a.sent,a.next=5,ct.removeFromCache(e);case 5:return a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},move:function(e,t,s,a){return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,je().put("quest/"+e+"/version/"+t+"/step/"+s+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return n=r.sent,r.next=5,ct.removeFromCache(e);case 5:return r.abrupt("return",n);case 6:case"end":return r.stop()}}),o)})))()},moveChapter:function(e,t,s,a){return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,je().put("quest/"+e+"/version/"+t+"/chapter/"+s+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return n=r.sent,r.next=5,ct.removeFromCache(e);case 5:return r.abrupt("return",n);case 6:case"end":return r.stop()}}),o)})))()},duplicate:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().put("quest/"+e+"/version/"+s+"/step/"+t+"/clone").catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.next=5,ct.removeFromCache(e);case 5:return a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},uploadBackgroundImage:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/background/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadAudio:function(e,t){return je().post("/quest/"+e+"/step/audio/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAnswerImage:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/choose-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadMemoryImage:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/memory/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadCodeAnswerImage:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/code-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadVideo:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/video/upload",t,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadPuzzleImage:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().post("/quest/"+e+"/step/jigsaw-puzzle/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ct.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadItemImage:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().post("/quest/"+e+"/step/"+t+"/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.next=5,ct.removeFromCache(e);case 5:return a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},uploadItemObject:function(e,t,s){return n()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,je().post("/quest/"+e+"/step/3dobject/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,ct.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e,t,s){return n()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,je().post("/quest/"+e+"/step/character/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,ct.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadAlternativeImage:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().post("/quest/"+e+"/step/"+t+"/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.next=5,ct.removeFromCache(e);case 5:return a.abrupt("return",o);case 6:case"end":return a.stop()}}),a)})))()},uploadSnapshot:function(e,t){return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.abrupt("return",je().post("/quest/"+e+"/snapshot/upload",t,{timeout:6e5,headers:{"Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}));case 1:case"end":return s.stop()}}),s)})))()},generateTextsExportFile:function(e,t,s){return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,je().get("quest/"+e+"/version/"+t+"/"+s+"/export/texts").catch((function(e){return console.log(e.request)}));case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a)})))()}},js={props:["quest","design","lang"],watch:{quest:function(){var e=n()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.saveOfflineQuest(e.quest);case 4:case"end":return t.stop()}}),t)})))()},methods:{saveOfflineQuest:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.error.raised=!1,s.next=3,ct.isCached(e.questId);case 3:if(a=s.sent,t.offline.progress=.1,a){s.next=11;break}return s.next=8,t.saveQuestData(e);case 8:if(o=s.sent,o){s.next=11;break}return s.abrupt("return");case 11:t.offline.progress=1,n=t,setTimeout((function(){n.$emit("end")}),3e3);case 14:case"end":return s.stop()}}),s)})))()},addQuestInOfflineList:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,lt.checkIfFileExists("","quests.json");case 2:if(a=s.sent,!a){s.next=8;break}return s.next=6,lt.readFile("","quests.json");case 6:n=s.sent,o=JSON.parse(n);case 8:for(a&&o&&o.list||(o={list:[]}),i=!1,l=0;l<o.list.length;l++)o.list[l].questId===e&&(i=!0);return i||o.list.push(t.quest),s.next=14,lt.writeInFile("","quests.json",JSON.stringify(o),!0);case 14:case"end":return s.stop()}}),s)})))()},saveQuestData:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_,I,P,$;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t,lt.setTimeout(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.cancelSavingTooLong(a.quest.questId);case 2:case"end":return e.stop()}}),e)}))),42e4),s.next=4,Ls.listForAQuest(e.questId,e.version,t.lang);case 4:for(o=s.sent,i=o.data.steps,l=o.data.chapters,t.quest.steps=[],c=0;c<i.length;c++)t.quest.steps.push(i[c].stepId);for(t.quest.chapters=[],c=0;c<l.length;c++)t.quest.chapters.push(l[c].chapterId);if(t.error.raised){s.next=209;break}return s.next=14,lt.writeInFile(e.questId,"quest_"+e.questId+".json",JSON.stringify(e),!0);case 14:if(u=s.sent,u){s.next=18;break}return t.throwSaveError("Could not create quest file for quest "+e.questId),s.abrupt("return",!1);case 18:return s.next=20,t.addQuestInOfflineList(e.questId);case 20:if(t.error.raised){s.next=206;break}if(t.offline.progress=.2,!e.picture||!e.picture[t.lang]||""===e.picture[t.lang]){s.next=29;break}return s.next=25,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/",e.picture[t.lang]);case 25:if(d=s.sent,d){s.next=29;break}return t.throwSaveError("Could not create quest picture for quest "+e.questId),s.abrupt("return",!1);case 29:if(t.offline.progress+=.1,!e.customization||!e.customization.character||""===e.customization.character){s.next=33;break}return s.next=33,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/",e.customization.character);case 33:if(!e.customization||!e.customization.logo||""===e.customization.logo){s.next=36;break}return s.next=36,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/",e.customization.logo);case 36:if(!e.customization||!e.customization.characterOnMap||""===e.customization.characterOnMap){s.next=39;break}return s.next=39,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/",e.customization.characterOnMap);case 39:if(!(e.customization&&e.customization.audio&&e.customization.audio[t.lang]&&""!==e.customization.audio[t.lang])){s.next=42;break}return s.next=42,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/",e.customization.audio[t.lang]);case 42:if(!o||!o.data){s.next=203;break}p=Math.ceil(70/i.length)/100,c=0;case 45:if(!(c<i.length)){s.next=190;break}if(!t.error.raised){s.next=48;break}return s.abrupt("return",!1);case 48:return m=i[c],s.next=51,lt.writeInFile(e.questId,"step_"+m.stepId+".json",JSON.stringify(m),!0);case 51:if(h=s.sent,h){s.next=55;break}return t.throwSaveError("Could not save step file for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 55:if(!m.backgroundImage||!m.backgroundImage[t.lang]||""===m.backgroundImage[t.lang]){s.next=62;break}return s.next=58,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/background/",m.backgroundImage[t.lang]);case 58:if(f=s.sent,f){s.next=62;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 62:if(!m.videoStream||!m.videoStream[t.lang]||""===m.videoStream[t.lang]){s.next=69;break}return s.next=65,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/video/",m.videoStream[t.lang]);case 65:if(g=s.sent,g){s.next=69;break}return t.throwSaveError("Could not save video for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 69:if(!m.audioStream||!m.audioStream[t.lang]||""===m.audioStream[t.lang]){s.next=76;break}return s.next=72,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/audio/",m.audioStream[t.lang]);case 72:if(b=s.sent,b){s.next=76;break}return t.throwSaveError("Could not save audio for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 76:if("choose"!==m.type||!m.options||!m.options.items){s.next=90;break}v=!0,w=0;case 79:if(!(w<m.options.items.length)){s.next=90;break}if(!m.options.items[w].imagePath){s.next=87;break}return s.next=83,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/choose-image/",m.options.items[w].imagePath);case 83:if(v=s.sent,v){s.next=87;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "choose-image" '+m.stepId),s.abrupt("return",!1);case 87:w++,s.next=79;break;case 90:if("memory"!==m.type||!m.options||!m.options.items){s.next=104;break}y=!0,w=0;case 93:if(!(w<m.options.items.length)){s.next=104;break}if(!m.options.items[w].imagePath){s.next=101;break}return s.next=97,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/memory/",m.options.items[w].imagePath);case 97:if(y=s.sent,y){s.next=101;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "memory" '+m.stepId),s.abrupt("return",!1);case 101:w++,s.next=93;break;case 104:if("code-image"!==m.type||!m.options||!m.options.images){s.next=118;break}q=!0,w=0;case 107:if(!(w<m.options.images.length)){s.next=118;break}if(!m.options.images[w].imagePath){s.next=115;break}return s.next=111,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/",m.options.images[w].imagePath);case 111:if(q=s.sent,q){s.next=115;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "code-image" '+m.stepId),s.abrupt("return",!1);case 115:w++,s.next=107;break;case 118:if(!("jigsaw-puzzle"===m.type&&m.options&&m.options.picture&&m.options.picture[t.lang]&&""!==m.options.picture[t.lang])){s.next=125;break}return s.next=121,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/",m.options.picture[t.lang]);case 121:if(k=s.sent,k){s.next=125;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "jigsaw-puzzle" '+m.stepId),s.abrupt("return",!1);case 125:if("geolocation"!==m.type||!m.options||!m.options.locator||""===m.options.locator){s.next=132;break}return s.next=128,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/geolocation/",m.options.locator);case 128:if(x=s.sent,x){s.next=132;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "geolocation" '+m.stepId),s.abrupt("return",!1);case 132:if("new-item"!==m.type||!m.options||!m.options.picture||""===m.options.picture){s.next=144;break}if(-1!==m.options.picture.indexOf("statics")){s.next=144;break}if(void 0,!m.options.pictures||!m.options.pictures[t.lang]||""===m.options.pictures[t.lang]){s.next=141;break}return s.next=138,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/",m.options.pictures[t.lang]);case 138:s.sent,s.next=144;break;case 141:return s.next=143,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/",m.options.picture);case 143:s.sent;case 144:if("character"!==m.type||!m.options||!m.options.character||""===m.options.character||"usequestcharacter"===m.options.character){s.next=152;break}if(!(m.options.character.length>3)){s.next=152;break}return s.next=148,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/character/",m.options.character);case 148:if(C=s.sent,C){s.next=152;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "character" '+m.stepId),s.abrupt("return",!1);case 152:if("find-item"!==m.type&&"use-item"!==m.type||!m.options||!m.options.altFile||""===m.options.altFile){s.next=160;break}if(!(m.options.altFile.length>3)){s.next=160;break}return s.next=156,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/background/",m.options.altFile);case 156:if(S=s.sent,S){s.next=160;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 160:if("locate-item-ar"!==m.type||!m.options){s.next=184;break}if(!m.options.picture||""===m.options.picture){s.next=168;break}return s.next=164,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/",m.options.picture);case 164:if(_=s.sent,_){s.next=168;break}return t.throwSaveError("Could not save 2D image for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 168:if(!m.options.is3D){s.next=184;break}if(!m.options.customModel){s.next=178;break}return s.next=172,lt.saveBinaryFile(e.questId,t.uploadUrl+"/upload/quest/"+e.questId+"/step/3dobject/",m.options.customModel+".glb");case 172:if(I=s.sent,I){s.next=176;break}return t.throwSaveError("Could not save custom 3D model for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 176:s.next=184;break;case 178:return s.next=180,lt.saveBinaryFile(e.questId,t.serverUrl+"/statics/3d-models/",m.options.model+".glb");case 180:if(P=s.sent,P){s.next=184;break}return t.throwSaveError("Could not save standard 3D model for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 184:if(!t.error.raised){s.next=186;break}return s.abrupt("return",!1);case 186:t.offline.progress+=p;case 187:c++,s.next=45;break;case 190:c=0;case 191:if(!(c<l.length)){s.next=203;break}if(!t.error.raised){s.next=194;break}return s.abrupt("return",!1);case 194:return s.next=196,lt.writeInFile(e.questId,"chapter_"+l[c].chapterId+".json",JSON.stringify(l[c]),!0);case 196:if($=s.sent,$){s.next=200;break}return t.throwSaveError("Could not save chapter "+l[c].chapterId+" for quest "+e.questId),s.abrupt("return",!1);case 200:c++,s.next=191;break;case 203:return s.abrupt("return",!0);case 206:return s.abrupt("return",!1);case 207:s.next=210;break;case 209:return s.abrupt("return",!1);case 210:case"end":return s.stop()}}),s)})))()},throwSaveError:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.error("OfflineLoader error: "+e),yt(t.$t("label.ErrorOfflineSaving"),"error"),t.error.raised=!0,t.error.nb++,s.next=6,t.removeOfflineData(t.quest.questId);case 6:t.offline.progress=0,a=t,t.$q.dialog({dark:!0,message:a.$t("label.ErrorDownloadNeedsToRestart"),ok:!0,cancel:!0}).onCancel((function(){a.$router.push({path:"/quest/play/"+t.quest.questId,query:{timestamp:Date.now()}})})).onOk(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.saveOfflineQuest(t.quest);case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return s.stop()}}),s)})))()},cancelSavingTooLong:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.offline.progress||1===e.offline.progress||e.error.raised||(yt(e.$t("label.ErrorOfflineSaving"),"error"),e.error.raised=!0,e.error.nb++);case 1:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,lt.removeDirectory(e);case 2:return a=s.sent,s.next=5,t.removeQuestFromOfflineList(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},removeQuestFromOfflineList:function(e){return n()(r.a.mark((function t(){var s,a,o,n,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,lt.readFile("","quests.json");case 6:for(o=t.sent,a=JSON.parse(o),n=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(n=i);return-1!==n&&a.list.splice(n,1),t.next=13,lt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},Es=js,Qs=Object(Te["a"])(Es,Fs,Ds,!1,null,null,null),Us=Qs.exports,Bs=s("b06b"),Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{model:{value:e.geolocationshowCalibration,callback:function(t){e.geolocationshowCalibration=t},expression:"geolocationshowCalibration"}},[s("div",{staticClass:"bg-black centered q-pa-md"},[s("img",{staticStyle:{width:"100%","max-width":"500px"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),s("div",{staticClass:"text-white"},[e._v("\n      "+e._s(e.$t("label.WaveThePhoneForGPSPrecision"))+"\n    ")])])])},Hs=[],Gs={data:function(){return{geolocationshowCalibration:!1}},methods:{askUserToCalibrateGPS:function(e){var t=this;this.geolocationshowCalibration=!0,setTimeout((function(){t.closeGPSCalibration(e)}),5500)},closeGPSCalibration:function(e){this.geolocationshowCalibration=!1,null!==e&&void 0!==e&&"locate-item-ar"===e?this.$emit("endvertical"):this.$emit("end")}}},Ws=Gs,Vs=Object(Te["a"])(Ws,Ys,Hs,!1,null,null,null),Js=Vs.exports,Ks=s("b047c"),Zs=s.n(Ks),Xs={components:{shop:Ct,qrCodeStream:qs,offlineLoader:Us,gpscalibration:Js},data:function(){return{quest:{},ranking:{show:!1,items:[]},playStep:0,shop:{show:!1,showScanner:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1,alreadyPayed:!1}},offline:{active:!1,show:!1},warning:{questNotLoaded:!1,lowBattery:!1,tooMuchUsers:!1},serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isQuestOpen:{status:!0,displayHours:!1},isSharedWithPartners:!1,isOwner:!1,isAdmin:!1,showRewardsPopup:!1,showPreloaderPopup:!1,multiplayer:{showScanner:!1,show:!1,team:"",qrcode:""},geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,continueQuestId:"",canReplay:"yes",distanceFromStart:0,pageReady:!1,isHybrid:window.cordova,isIOs:lt.isIOS()}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return lt.clearAllRunningProcesses(),window.addEventListener("batterystatus",e.checkBattery,!1),t.next=4,e.initQuest();case 4:e.$store.state.history={items:[],index:0},e.$store.commit("setNetworkMode","online"),e.$store.commit("setForceOnline",!1);case 7:case"end":return t.stop()}}),t)})))()},updated:Zs()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*lt.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),lt.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0}),(function(){e.geolocationIsSupported=!1,lt.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3)}),{timeout:1e4,maximumAge:0}):(this.geolocationIsSupported=!1,lt.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3))},checkIfQuestIsOpened:function(){if(this.quest.scheduling&&this.quest.scheduling.length>0&&!this.isAdmin&&!this.isOwner){var e=new Date,t=e.getDay();if(this.quest.scheduling[t]&&2===this.quest.scheduling[t].length){var s=e.getHours();this.quest.scheduling[t][0]<=s&&this.quest.scheduling[t][1]>s?this.isQuestOpen.status=!0:this.isQuestOpen.status=!1}}},initQuest:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.getByIdOnline(e.$route.params.id);case 2:if(s=t.sent,s&&s.data){t.next=9;break}return t.next=6,lt.checkIfFileExists(e.$route.params.id,"quest_"+e.$route.params.id+".json");case 6:return a=t.sent,!e.isOwner&&a&&e.startQuest(e.$route.params.id,e.$route.params.lang),t.abrupt("return");case 9:if(e.quest=s.data,e.$store.commit("setForceOnline",!(!e.quest.hasOwnProperty("customization")||!e.quest.customization.hasOwnProperty("forceOnline"))&&e.quest.customization.forceOnline),"undefined"===typeof e.quest.authorUserId){t.next=16;break}return t.next=14,Ee.getAccount(e.quest.authorUserId);case 14:o=t.sent,o&&o.data&&e.$set(e.quest,"author",o.data);case 16:if(window.cordova&&e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&store.products.length>0&&e.$router.go(0),e.checkUserIsCloseFromStartingPoint(),e.$store.state.user.isAdmin&&(e.isAdmin=!0),e.quest.editorsUserId)for(n=0;n<e.quest.editorsUserId.length;n++)e.quest.editorsUserId[n]===e.$store.state.user._id&&(e.isOwner=!0);else e.$store.state.user._id===e.quest.authorUserId&&(e.isOwner=!0);return e.checkIfQuestIsOpened(),(e.isOwner||e.isAdmin)&&e.$store.commit("setForceOnline",!0),t.next=24,e.getRun();case 24:return t.next=26,e.checkUserCanPlay();case 26:return t.next=28,e.initPay();case 28:return t.next=30,e.checkSimultaneousPlayers();case 30:case"end":return t.stop()}}),t)})))()},showCalibrationAndStartQuest:function(){this.quest.hasGeolocationSteps?this.$refs.gpscal.askUserToCalibrateGPS():this.startQuest(this.quest.questId,this.getLanguage())},getRun:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.listForAQuest(e.quest.questId);case 2:if(s=t.sent,!(s&&s.data&&s.data.length>0)){t.next=13;break}for(a=0;a<s.data.length;a++)"finished"===s.data[a].status&&(e.isRunFinished=!0,e.quest.customization&&e.quest.customization.userReplay&&"no"===e.quest.customization.userReplay&&(e.canReplay="no"),e.quest.customization&&e.quest.customization.userReplay&&"onceaday"===e.quest.customization.userReplay&&(o=new Date,n=new Date(s.data[a].dateCreated),lt.getFullDate(n)===lt.getFullDate(o)&&(e.canReplay="nottoday"))),"in-progress"===s.data[a].status&&s.data[a].currentStep&&(e.isRunStarted=!0,e.continueQuestId=s.data[a]._id);if(!e.isRunStarted){t.next=11;break}return e.continueQuest=!0,t.next=9,lt.checkIfFileExists(e.quest.questId,"quest_"+e.quest.questId+".json");case 9:i=t.sent,!e.isOwner&&i&&e.startQuest(e.quest.questId,e.$route.params.lang);case 11:t.next=17;break;case 13:return t.next=15,ct.isCached(e.quest.questId);case 15:l=t.sent,l&&(e.continueQuest=!0);case 17:case"end":return t.stop()}}),t)})))()},checkSimultaneousPlayers:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.quest.limitNumberOfPlayer){t.next=5;break}return t.next=3,Rs.checkNumberOfPlayers(e.quest.questId);case 3:s=t.sent,s&&s.data&&parseInt(s.data,10)>=e.quest.limitNumberOfPlayer&&(e.warning.tooMuchUsers=!0);case 5:return t.next=7,lt.writeInFile(e.quest.questId,"run_"+e.quest.questId+".json",JSON.stringify({}),!1);case 7:case"end":return t.stop()}}),t)})))()},checkBattery:function(e){e.level<50?this.warning.lowBattery=!0:this.warning.lowBattery=!1},checkUserCanPlay:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRunStarted&&!e.isRunFinished){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(e.quest.price>e.$store.state.user.coins)||e.isAdmin||e.isOwner){t.next=5;break}return e.isRunPlayable=!1,t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=2;break}return t.abrupt("return","free");case 2:if(e.quest.premiumPrice.active){t.next=4;break}return t.abrupt("return","free");case 4:if(window.cordova){t.next=8;break}return e.isAdmin||e.isOwner||yt(e.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),e.shop.premiumQuest.priceCode="notplayableonweb",t.abrupt("return");case 8:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=11;break}return yt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("return");case 11:return t.next=13,ct.hasPayed(e.quest.questId);case 13:if(s=t.sent,!(s&&s.data&&s.data.status&&"paied"===s.data.status)){t.next=18;break}return e.shop.premiumQuest.priceCode="free",e.shop.premiumQuest.alreadyPayed=!0,t.abrupt("return","free");case 18:e.shop.premiumQuest.priceCode=e.quest.premiumPrice.androidId,store.register({id:e.quest.premiumPrice.androidId,alias:e.quest.premiumPrice.androidId,type:store.CONSUMABLE}),store.error((function(e){yt(e.message+"(code: "+e.code+")","error")})),store.when(e.quest.premiumPrice.androidId).updated(e.displayPrice),store.when(e.quest.premiumPrice.androidId).approved((function(e){e.verify()})),store.when(e.quest.premiumPrice.androidId).verified(function(){var t=n()(r.a.mark((function t(s){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(s);case 2:a=t.sent,a?s.finish():yt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 25:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.shop.premiumQuest.priceValue=e.price,e.canPurchase&&(this.shop.premiumQuest.buyable=!0)},savePurchase:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.purchasePremium(t.quest.questId,e);case 2:if(a=s.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){s.next=7;break}return t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang),s.abrupt("return",!0);case 7:return s.abrupt("return",!1);case 8:case"end":return s.stop()}}),s)})))()},buyQuest:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:store.order(e.quest.premiumPrice.androidId);case 1:case"end":return t.stop()}}),t)})))()},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t;if(t=this.isOwner||this.isAdmin?e.languages:e.languages.filter((function(e){return e.published})),t&&t.length>0){for(var s="",a=0;a<t.length;a++)t[a].lang===this.$store.state.user.language&&(s=this.$store.state.user.language);""===s&&t.length>0&&(s=t[0].lang)}else e.languages.length>0&&(s=e.languages[0].lang);return s},getTranslatedData:function(e){var t=this.getLanguage();return e[t]?e[t]:(this.quest.warning=null,"")},openWarningLink:function(){this.quest&&this.quest.warning&&this.quest.warning.link&&lt.openExternalLink(this.quest.warning.link)},goToLocationWithMaps:function(e,t){Object(Bs["a"])("https://maps.google.com/?daddr=".concat(t,",").concat(e))},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},restartGame:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){s.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.continueQuestId){t.next=3;break}return t.next=3,Rs.endRun(e.continueQuestId,null,e.quest.questId,e.quest.version,e.$route.params.lang);case 3:return t.next=5,lt.removeDirectory(e.quest.questId);case 5:e.playQuest(e.quest.questId,e.$route.params.lang);case 6:case"end":return t.stop()}}),t)})))()},playQuest:function(e,t){var s=this;return n()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.quest.forcePlayerToHaveAccount||"-"!==s.$store.state.user.name){a.next=3;break}return s.$q.dialog({message:s.$t("label.YouNeedToCreateYourAccountToPlay"),ok:s.$t("label.Ok"),cancel:s.$t("label.Cancel")}).onOk((function(){s.$router.push("/profile/"+s.$store.state.user.id)})).onCancel((function(){return!1})),a.abrupt("return",!1);case 3:if(!s.quest.shareUserDataWithCreator||"-"===s.$store.state.user.name||s.isSharedWithPartners){a.next=7;break}s.$q.dialog({message:s.$t("label.PartnerAskForYouData"),options:{type:"checkbox",model:[],items:[{label:s.$t("label.ShareDataWithPartner"),value:"ok"}]},ok:s.$t("label.Ok"),cancel:s.$t("label.Cancel")}).onOk((function(a){a.length>0&&"ok"===a[0]&&(s.isSharedWithPartners=!0),s.playQuestLaunch(e,t)})).onCancel((function(){return!1})),a.next=9;break;case 7:return a.next=9,s.playQuestLaunch(e,t);case 9:case"end":return a.stop()}}),a)})))()},playQuestLaunch:function(e,t){var s=this;return n()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==s.playStep||!s.quest.premiumPrice||!s.quest.premiumPrice.tier&&!s.quest.premiumPrice.active||s.isAdmin||s.isOwner||s.isRunFinished||s.isRunStarted){t.next=11;break}if(!s.quest.premiumPrice.tier){t.next=8;break}return t.next=4,ct.checkTierPayment(e);case 4:a=t.sent,200===a.status?s.startPreloader():s.shop.show=!0,t.next=9;break;case 8:s.shop.show=!0;case 9:t.next=12;break;case 11:s.playStep<=1&&s.quest.playersNumber>1&&!s.continueQuest?(s.shop.show=!1,s.multiplayer.show=!0):s.startPreloader();case 12:case"end":return t.stop()}}),t)})))()},startPreloader:function(){if(this.shop.show=!1,this.multiplayer.show=!1,this.showPreloaderPopup=!0,!this.isHybrid||this.quest.customization&&this.quest.customization.forceOnline){var e=this;setTimeout((function(){e.showCalibrationAndStartQuest()}),3e3)}else this.offline.show=!0},openProfile:function(e){this.$router.push("/profile/"+e)},scanMultiplayerQRCode:function(){this.multiplayer.showScanner=!0,this.multiplayer.show=!1},closeMultiplayerQRCodeReader:function(){this.multiplayer.showScanner=!1},scanTierPaymentQRCode:function(){this.shop.showScanner=!0,this.shop.show=!1},closeTierPaymentQRCode:function(){this.shop.showScanner=!1},checkTeamCode:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Rs.addTeamPlayer(e);case 2:a=s.sent,200===a.status?(t.playStep=2,t.playQuest(t.quest.questId,t.$route.params.lang)):yt(t.$t("label.ErrorMessageForNewTeamMember"),"error");case 4:case"end":return s.stop()}}),s)})))()},checkTierPaymentCode:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.useTierPaymentCode(t.quest.questId,e);case 2:a=s.sent,200===a.status?(t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang)):yt(t.$t("label.TechnicalIssueOrCodeAlreadyUsed"),"error");case 4:case"end":return s.stop()}}),s)})))()},createTeam:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multiplayer.team||""===e.multiplayer.team){t.next=7;break}return t.next=3,Rs.init(e.quest.questId,e.quest.version,e.$route.params.lang,e.isUserTooFar,e.multiplayer.team,e.isSharedWithPartners);case 3:s=t.sent,200===s.status&&s.data&&s.data._id?(e.multiplayer.runId=s.data._id,e.multiplayer.qrcode=s.data._id):yt(e.$t("label.ErrorStandardMessage"),"error"),t.next=8;break;case 7:yt(e.$t("label.PleaseEnterYourTeamName"),"error");case 8:case"end":return t.stop()}}),t)})))()},checkTeamAndStart:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.checkTeamIsReady(e.multiplayer.runId);case 2:s=t.sent,200===s.status?(e.playStep=2,e.playQuest(e.quest.questId,e.$route.params.lang)):s.data&&s.data.members&&s.data.members.length>0?(a=s.data.members.join(", "),yt(e.$t("label.YouNeedMoreMembersToPlay",{nb:e.quest.playersNumber,members:a}),"warning")):yt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},openReadMoreLink:function(){lt.openExternalLink(this.quest.readMoreLink)},startQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar+"&sharepartner="+this.isSharedWithPartners)},showRewards:function(){this.showRewardsPopup=!0},backToTheMap:function(){this.$router.push("/home")},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){var e,t=this.getLanguage();return this.quest.picture&&(this.quest.picture[t]?e=this.quest.picture[t]:this.quest.picture[this.quest.mainLanguage]&&(e=this.quest.picture[this.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.jpg"}}},ea=Xs,ta=(s("1ae2"),Object(Te["a"])(ea,Ms,Ns,!1,null,null,null)),sa=ta.exports,aa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reduce-window-size-desktop"},[e.warnings.questDataMissing||e.warnings.stepDataMissing||e.warnings.runDataMissing?s("div",{staticClass:"centered full-height bg-primary q-pa-sm",staticStyle:{margin:"auto"},on:{click:function(t){return e.initData()}}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",[s("div",{staticClass:"centered q-pt-lg"},[s("q-spinner-radio",{attrs:{color:"primary",size:"2em"}})],1),s("div",{staticClass:"centered q-py-lg"},[e._v(e._s(e.$t("label.NetwordkErrorReloadPage")))]),e.warnings.questDataMissing?s("div",{staticClass:"text-grey"},[e._v("Error 103.21")]):e._e(),e.warnings.stepDataMissing?s("div",{staticClass:"text-grey"},[e._v("Error 103.22")]):e._e(),e.warnings.runDataMissing?s("div",{staticClass:"text-grey"},[e._v("Error 103.23")]):e._e()])],1)],1):e._e(),e.warnings.isNetworkLow?s("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?s("div",{staticClass:"centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?s("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():s("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),s("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio?s("audio",{attrs:{id:"background-music",autoplay:"",loop:""}},[s("source",{attrs:{src:e.info.audio,type:"audio/mpeg"}})]):e._e(),s("div",{class:{fit:"image-over-flow"!==e.step.type}},[s("stepPlay",{attrs:{step:e.step,runId:e.runId,inventory:e.inventory,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,customization:e.info.quest.customization?e.info.quest.customization:{color:"primary"},answer:e.offline.answer,player:e.player,timer:e.countDownTime,quest:e.info.quest,offline:e.offline.active},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.nextStep(!0)},suggestNext:e.alertOnNext,hideButtons:e.hideFooterButtons,showButtons:e.showFooterButtons,openInventory:e.zoomOrUse,msg:e.trackMessage}})],1),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[s("div",{staticClass:"q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return s("div",{key:a,staticClass:"inventory-item"},[s("img",{attrs:{src:-1!==t.picture.indexOf("statics/")||-1!==t.picture.indexOf("blob:")?t.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture},on:{click:function(s){return e.zoomOrUse(t)}}}),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?s("div",[e._v(e._s(t.titles[e.lang]))]):e._e(),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?e._e():s("div",[e._v(e._s(t.title))]),s("q-btn-group",[s("q-btn",{attrs:{padding:"xs",size:"md",color:"primary",icon:"zoom_in"},on:{click:function(s){return e.zoomItem(t)}}}),"use-item"===e.step.type?s("q-btn",{attrs:{padding:"xs",size:"md",color:"primary",icon:"done"},on:{click:function(s){return e.useItem(t)}}}):e._e(),e.inventory.items.length>0&&"simple"!==e.info.quest.editorMode?s("q-btn",{attrs:{padding:"xs",size:"md",color:-1===e.inventory.selectedItems.indexOf(t.picture)?"primary":"secondary",icon:"merge_type"},on:{click:function(s){return e.selectItem(t)}}}):e._e()],1)],1)})),0),s("div",{staticClass:"centered q-pt-md"},[e.inventory.selectedItems.length>0?s("q-btn",{staticClass:"glossy normal-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{disabled:1===e.inventory.selectedItems.length,color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:function(t){return e.combineItems()}}},[s("div",[e._v(e._s(e.$t("label.CombineItems")))])]):e._e()],1)])])]),s("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[s("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?s("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),s("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),s("q-btn",{staticClass:"glossy normal-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[s("div",[e._v(e._s(e.$t("label.Close")))])]),s("div",[s("q-btn-group",{attrs:{outline:""}},[s("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),s("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),s("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),s("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}],staticClass:"reduce-window-size-desktop"},[e.warnings.questDataMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():s("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) #000000 center center / cover no-repeat "},[s("q-toolbar",{staticClass:"dark-banner text-white"},[e.info&&e.info.quest&&e.info.quest.availablePoints?s("q-toolbar-title",[e._v("\n            "+e._s(e.$t("label.GoodAnswersNumber"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions)+"\n          ")]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"play"===e.sound.status?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_up"},on:{click:e.cutSound}}):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"pause"===e.sound.status?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_off"},on:{click:e.cutSound}}):e._e(),e.offline.active?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_off"}}):e._e(),e.offline.active?e._e():s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_done"}})],1),s("div",{staticClass:"text-center dark-banner q-pb-xl q-pt-md fixed-bottom"},[s("p",{staticClass:"title"},[e._v("\n            "+e._s(e.info.quest&&e.info.quest.title?e.info.quest.title:e.$t("label.NoTitle"))+"\n          ")]),e.run&&e.run.team&&e.run.team.name?s("p",[e._v("\n            "+e._s(e.$t("label.Team"))+" : "+e._s(e.run.team.name)+"\n          ")]):e._e(),s("p",[e.info.quest&&e.info.quest.customization&&e.info.quest.customization.removeScoring?e._e():s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[s("span",[e._v("\n                "+e._s(e.$t("label.LeaveQuest"))+"\n              ")])])],1),s("p",[e.info.quest&&e.info.quest.playersNumber&&e.info.quest.playersNumber<2?s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.restartGame}},[s("span",[e._v("\n                "+e._s(e.$t("label.RestartQuest"))+"\n              ")])]):e._e()],1),s("p",[e.offline.active?e._e():s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[s("span",[e._v("\n                "+e._s(e.$t("label.Feedback"))+"\n              ")])])],1),s("p",{staticClass:"q-pb-xl"},[s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.openInfo}},[s("span",[e._v("\n                "+e._s(e.$t("label.BackToQuest"))+"\n              ")])])],1),s("p",{staticClass:"q-pb-lg"})])],1)])]),e.hint.isOpened?s("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[s("story",{attrs:{step:"hint",color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?e.info.quest.customization.color:"primary",data:{hint:e.hint.label,character:e.info.quest.customization&&e.info.quest.customization.character&&""!==e.info.quest.customization.character?-1===e.info.quest.customization.character.indexOf("blob:")?e.uploadUrl+"/upload/quest/"+e.info.quest.customization.character:e.info.quest.customization.character:"3"}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.countDownTime.enabled,expression:"countDownTime.enabled"}],staticClass:"fadein-message",staticStyle:{"font-size":"48px"}},[s("q-icon",{attrs:{color:"white",name:"timer"}}),e._v(" "+e._s(e.$t("label.ItRemainsMinutes",{time:e.countDownTime.remainingMinutes})))],1),s("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[s("div",{staticClass:"bg-white q-pa-md reduce-window-size-desktop"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),s("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[s("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),s("div",{staticClass:"q-pa-md q-gutter-sm centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),s("div",{staticClass:"q-pt-md"},[s("a",{staticClass:"dark",on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Cancel")))])])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu step-menu-fixed fixed-bottom"},[s("div",{staticClass:"row white-buttons",class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:""},[s("div",{staticClass:"col centered"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():s("div",{staticClass:"q-py-sm"},[s("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}},[this.$store.state.chatNotification>0?s("q-badge",{attrs:{color:"accent",rounded:"",floating:""}},[e._v(e._s(this.$store.state.chatNotification))]):e._e()],1)],1),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?s("q-btn",{staticStyle:{"padding-top":"0 !important"},attrs:{flat:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[s("q-avatar",{attrs:{size:"60px"}},[s("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),s("div",{staticClass:"col centered q-py-sm"},[e.info.quest.customization&&e.info.quest.customization.hideInventory?e._e():s("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}},[this.step&&this.step.hint?s("q-badge",{attrs:{color:"secondary",floating:""}},[e._v(e._s(this.hint.remainingNumber))]):e._e()],1)],1),s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",disable:0===e.$store.state.history.index,icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.step.id&&(e.next.enabled||e.next.canPass),expression:"step.id && (next.enabled || next.canPass)"}],class:{flashing:e.next.suggest,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])]),e.step&&e.step.options&&(e.step.options.displayTime||e.step.options.displayGoodAnswers)?s("div",{staticClass:"subtitle-5",staticStyle:{position:"absolute",left:"0",bottom:"70px","background-color":"#000",color:"#fff"}},[e.step.options.displayTime?s("span",[e._v(e._s(e.currentDate)+" ")]):e._e(),e.step.options.displayGoodAnswers?s("span",[e._v(" "+e._s(e.$t("label.Score"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions))]):e._e()]):e._e()],1)},ra=[],oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat"},[s("div",{staticClass:"subtitle3 q-pb-lg",on:{click:e.scrollBottom}},[e._v("Demande d'aide")]),e.arrayOfMessages.length>0?s("q-scroll-area",{ref:"scroll",staticClass:"q-pb-md row messages"},e._l(e.arrayOfMessages,(function(t){return s("q-intersection",{key:t.id,attrs:{transition:"scale",once:""}},[s("q-chat-message",{attrs:{name:t.admin?"Admin":"Vous",text:[t.content],stamp:e.timeMessage(t),sent:!t.admin,"bg-color":t.admin?"secondary":"accent","text-color":"white"}})],1)})),1):e._e(),s("q-input",{staticClass:"q-mb-sm input-message",staticStyle:{width:"calc(100% - 20px)","max-width":"550px"},attrs:{rounded:"",outlined:"",dense:"",label:"Ecrire un message"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SendChatMessage(t)}},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",color:e.writeMessage?"primary":"grey",disabled:!e.writeMessage,icon:"send"},on:{click:e.SendChatMessage}})]},proxy:!0}]),model:{value:e.messageToSend,callback:function(t){e.messageToSend=t},expression:"messageToSend"}})],1)},na=[],ia={getUserMessages:function(e){return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Fe.a.get("https://gmdash.api-graaly.com:3001/messages/".concat(e)).then((function(e){return e.data})).catch((function(e){return e})));case 1:case"end":return t.stop()}}),t)})))()}},la=s("e7fc"),ca={Connect:function(e){Qe=la.connect("wss://test.mosquitto.org:8081");var t="graaly/".concat(e,"/#");console.log("Connecting to mqtt"),Qe.on("connect",(function(){console.log("connected to Mqtt"),Qe.subscribe(t,(function(e){console.log("Subscribed to topic : "+t),e&&console.error(e)}))})),Qe.on("message",(function(e,t){var s=JSON.parse(t.toString());s.userId===Ge.state.user.id&&(ia.getUserMessages(s.userId).then((function(e){Ge.commit("setChatMessage",e)})),s.admin&&Ge.commit("updateChatNotification"))}))},Send:function(e,t){var s="graaly/".concat(e,"/injest/");console.log("publishing on topic : "+s),Qe.publish(s,JSON.stringify(t))},SendChat:function(e,t){var s="graaly/".concat(e,"/chat/");console.log("publishing on topic : "+s),Qe.publish(s,JSON.stringify(t))}},ua=ca,da=s("c72b"),pa=s("8169"),ma=s("ad56"),ha=s("4983"),fa={name:"chat",components:{QChatMessage:pa["a"],QIntersection:ma["a"],QScrollArea:ha["a"]},props:{questId:String,isOpened:Boolean},data:function(){return{messageToSend:"",writeMessage:!1}},computed:{player:function(){return this.$store.state.user.name},arrayOfMessages:function(){return this.$store.state.chatMessages}},watch:{isOpened:function(){this.scrollBottom()},messageToSend:function(e){e.length>=3?this.writeMessage=!0:this.writeMessage=!1},arrayOfMessages:function(){this.scrollBottom()}},methods:{SendChatMessage:function(){var e={ts:new Date,questId:this.questId,userId:this.$store.state.user.id,name:this.player,admin:!1,content:this.messageToSend};ua.SendChat(this.questId,e),this.messageToSend="",this.scrollBottom()},timeMessage:function(e){return Object(da["a"])(e.ts,"FR-fr")},scrollBottom:function(){var e=this;setTimeout((function(){var t=e.$refs.scroll;if(t){var s=t.getScrollTarget(),a=300;t.setScrollPosition(s.scrollHeight,a)}}),200)}},mounted:function(){var e=this;ua.Connect(this.questId),ia.getUserMessages(this.$store.state.user.id).then((function(t){e.$store.commit("setChatMessage",t)}))}},ga=function(e,t,s){return[["à l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][t]};Object(da["b"])("FR-fr",ga);var ba=fa,va=(s("278e"),Object(Te["a"])(ba,oa,na,!1,null,"fbadbbd6",null)),wa=va.exports,ya=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fit",class:{"bg-black":!e.showNonHybridQRReader&&"locate-marker"===e.step.type||"sensor"===e.step.id,loaded:e.pageReady,"bg-transparent":e.showNonHybridQRReader||"image-over-flow"===e.step.type},attrs:{id:"play-view"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"image-over-flow"!==e.step.type&&"locate-marker"!==e.step.type,expression:"(step.type !== 'image-over-flow' && step.type !== 'locate-marker')"}],staticClass:"step-background",class:{"effect-kenburns":e.step.options&&e.step.options.kenBurnsEffect,"effect-blur":e.step.options&&e.step.options.blurEffect,opacity0:"locate-item-ar"===e.step.type&&!e.stepPlayed,fadeIn:"locate-item-ar"===e.step.type&&e.stepPlayed},attrs:{id:"background-image"}}),e.showNonHybridQRReader?s("div",[s("div",{staticClass:"text-white q-pt-xl q-pl-md q-pb-sm",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:""},[s("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeQRCodeReader}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),e.showNonHybridQRReader?s("qr-code-stream",{attrs:{color:e.customization&&e.customization.color&&""!==e.customization.color?e.customization.color:"primary"},on:{QrCodeResult:e.checkAnswer}}):e._e()],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden",style:"color: "+e.customization.fontColor},[e.timer&&e.timer.enabled?s("div",[e.isIOs?e._e():s("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:Math.abs(e.timer.remaining),color:e.timer.remaining<0?"negative":e.timer.remaining<.25?"warning":"positive"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(Math.abs(e.timer.remainingMinutes),10)+" "+e.$t("label.minutes")}})],1)]),e.isIOs?s("div",{staticClass:"text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type,"bg-positive":e.timer.remaining>.25,"bg-warning":e.timer.remaining<=.25&&e.timer.remaining>0,"bg-negative":e.timer.remaining<=0},staticStyle:{height:"25px",position:"relative"}},[s("strong",[e._v(e._s(parseInt(Math.abs(e.timer.remainingMinutes),10)+" "+e.$t("label.minutes")))])]):e._e()],1):e._e(),null!==e.step.countDownTime&&void 0!==e.step.countDownTime&&!0===e.step.countDownTime.enabled&&this.countdowntimeleft>0?s("div",[e.isIOs?e._e():s("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:e.map(this.countdowntimeleft,0,this.step.countDownTime.time,0,1),color:"primary"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")}})],1)]),e.isIOs?s("div",{staticClass:"bg-positive text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},staticStyle:{height:"25px",position:"relative"}},[s("strong",[e._v(e._s(parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")))])]):e._e()],1):e._e(),e.geolocation.lowCompassAccuracy||e.geolocation.lowGpsAccuracy?s("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[s("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"}},[e.geolocation.persistentLowAccuracy?e._e():s("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.WarningLowGpsAccuracy")))]),e.geolocation.persistentLowAccuracy?s("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.PersistentLowGpsAccuracyPleaseSkipStep")))]):e._e()],1)],1):e._e(),e.audio&&e.audio.file&&""!==e.audio.file?s("div",[s("audio",{attrs:{id:"step-music",autoplay:""}},[s("source",{attrs:{src:e.audio.file,type:"audio/mpeg"}})]),s("div",{staticStyle:{position:"absolute",top:"4px",right:"10px","z-index":"1000"}},[s("q-btn-group",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},staticStyle:{color:"#fff"},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:""}},[s("div",{staticStyle:{padding:"4px"}},[e._v(e._s(e.$t("label.Audio")))]),s("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"replay_circle_filled"},on:{click:e.replayAudioSound}}),e.audio.play?s("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"pause_circle"},on:{click:e.switchAudioSound}}):e._e(),e.audio.play?e._e():s("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"play_circle"},on:{click:e.switchAudioSound}})],1)],1)]):e._e(),e.isNetworkLow?s("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type||"help"==e.step.type?s("div",{staticClass:"info"},[e.showTools&&""!=e.getTranslatedText()?s("div",{class:{grow:!e.step.videoStream||!e.step.videoStream[e.lang]},attrs:{id:"info-clickable"}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"help"===e.step.type||"info-video"===e.step.type||e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1),e.step.videoStream&&e.step.videoStream[e.lang]?s("div",{staticClass:"video"},[e.step.options&&e.step.options.rotateVideo?e._e():s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[s("source",{attrs:{src:e.step.videoStream&&e.step.videoStream[e.lang]&&-1!==e.step.videoStream[e.lang].indexOf("blob:")?e.step.videoStream[e.lang]:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream[e.lang],type:"video/mp4"}})]),e.step.options&&e.step.options.rotateVideo?s("video",{staticStyle:{position:"absolute",transform:"rotate(90deg)","transform-origin":"bottom left",width:"100vh",height:"100vw","margin-top":"-100vw","object-fit":"cover","z-index":"4",visibility:"visible"},attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[s("source",{attrs:{src:e.step.videoStream&&e.step.videoStream[e.lang]&&-1!==e.step.videoStream[e.lang].indexOf("blob:")?e.step.videoStream[e.lang]:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream[e.lang],type:"video/mp4"}})]):e._e()]):e._e()]):e._e(),"help"==e.step.type?s("div",{class:"font-"+e.customization.font,staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("p",{staticClass:"text help-text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessage"))}}),e.step.options&&e.step.options.helpNext?s("div",{staticClass:"text help-text centered"},[s("div",{staticClass:"white-buttons"},[s("q-btn",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward"}})],1),s("div",[e._v(e._s(e.$t("label.HelpStepMessageNextMessage")))])]):e._e(),e.step.options&&e.step.options.helpPrevious?s("div",{staticClass:"text help-text centered"},[s("div",{staticClass:"white-buttons"},[s("q-btn",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"}})],1),s("div",[e._v(e._s(e.$t("label.HelpStepMessagePreviousMessage")))])]):e._e(),e.step.options&&e.step.options.helpInventory?s("div",{staticClass:"text help-text centered"},[s("div",{staticClass:"white-buttons"},[s("q-btn",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"work"}})],1),s("div",[e._v(e._s(e.$t("label.HelpStepMessageInventoryMessage")))])]):e._e(),e.step.options&&e.step.options.helpHint?s("div",{staticClass:"text help-text centered"},[s("div",{staticClass:"white-buttons"},[s("q-btn",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"}})],1),s("div",[e._v(e._s(e.$t("label.HelpStepMessageHintMessage")))])]):e._e(),s("p",{staticClass:"text help-text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageEnd"))}})]):e._e(),"new-item"==e.step.type?s("div",{staticClass:"new-item"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"item"},[s("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture},on:{click:function(t){return e.openInventory(e.step.options)}}}),""!=e.step.options.title&&" "!=e.step.options.title?s("p",[s("span",[e._v(e._s(e.step.options.title))])]):e._e()])]):e._e(),"end-chapter"==e.step.type?s("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"increment-counter"==e.step.type?s("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"character"==e.step.type?s("div",{staticClass:"character"},[s("div",{staticClass:"fixed-bottom-character story",on:{click:function(t){return e.nextCharacterBubbleText()}}},[e._m(0),s("div",{staticClass:"bubble-middle",staticStyle:{"font-size":"0.9em",background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[e.character.needToScroll?s("div",{staticClass:"scroll-indicator"},[s("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),!(e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber])||e.step.options&&e.step.options.html?e._e():s("p",{ref:"bubbleText",staticClass:"carrier-return small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"}},[e._v(e._s(e.character.bubbleText[e.character.bubbleNumber]))]),e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber]&&e.step.options&&e.step.options.html?s("p",{ref:"bubbleTextHtml",staticClass:"text small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"},domProps:{innerHTML:e._s(e.character.bubbleText[e.character.bubbleNumber])}}):e._e(),e.character.bubbleNumber<e.character.numberOfBubble-1?s("p",{staticClass:"text-grey small-margin"},[e._v(e._s(e.$t("label.ReadNext")))]):e._e()]),e._m(1),s("div",{staticClass:"character"},[e.step.options.character.length<3?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.step.options.character+"_attitude1.png"}}):e._e(),e.step.options.character.length>2&&"usequestcharacter"!==e.step.options.character?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:-1!==e.step.options.character.indexOf("blob:")?e.step.options.character:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.step.options.character}}):e._e(),"usequestcharacter"===e.step.options.character?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:-1===e.customization.character.indexOf("blob:")?e.uploadUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]),e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?s("div",{staticClass:"full-width",class:e.step.options&&e.step.options.characterBarColor?"":"bg-black",style:"height: 68px; "+(e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?"background-color: "+e.step.options.characterBarColor:"")}):e._e(),e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?e._e():s("div",{staticClass:"full-width",staticStyle:{height:"68px"}})])]):e._e(),"choose"==e.step.type?s("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),"text"===e.answerType?s("div",{staticClass:"answers-text q-mt-lg"},e._l(e.step.options.items,(function(t,a){return s("q-btn",{key:a,staticClass:"full-width shadowed",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+a},on:{click:function(t){return e.chooseSelectValue(a)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():s("span",{class:"font-"+e.customization.font},[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?s("span",{class:"font-"+e.customization.font},[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?s("div",{staticClass:"answers-images"},[s("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,a){return s("div",{key:a,class:t.class,attrs:{"test-id":"answer-image-"+a},on:{click:function(t){return e.chooseSelectValue(a)}}},[s("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?s("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e(),e.step.options.multipleAnswers?s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{staticClass:"glossy",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1]},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1):e._e(),e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-keypad"==e.step.type?s("div",{staticClass:"code",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"typed-code"},[s("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)]),e.rightAnswer?s("table",{staticClass:"shadow-8 right"},[s("tr",e._l(e.rightAnswer,(function(t,a){return s("td",{key:a,staticClass:"typed"},[e._v(e._s(t))])})),0)]):e._e()]),s("div",{staticClass:"keypad"},[s("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,a){return s("div",{key:a},e._l(t,(function(t,a){return s("q-btn",{key:a,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(s){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mb-md q-px-md"},[s("div",[s("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[s("div",[e._v("\n                  "+e._s(e.$t("label.Clear"))+"\n                ")])]),s("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v("\n                  "+e._s(e.$t("label.Confirm"))+"\n                ")])])],1)]),e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-color"==e.step.type?s("div",{staticClass:"code code-color",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"color-bubbles",staticStyle:{"margin-top":"5rem"}},e._l(e.playerCode,(function(t,a){return s("div",{key:a,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[a],attrs:{"test-id":"color-code-"+a},on:{click:function(t){return e.changeColorForCode(a)}}},[e._v(" ")])})),0),e.rightAnswer?s("div",{staticClass:"color-bubbles"},e._l(e.rightAnswer,(function(t,a){return s("div",{key:a,staticClass:"shadow-8 right",style:"background-color: "+t},[e._v(" ")])})),0):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-image"==e.step.type?s("div",{staticClass:"code code-image",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("table",[s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,staticClass:"text-center"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}})],1)})),0),s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a},[e.step.options.images[t]?s("img",{attrs:{id:"image-code-"+a,src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(a)}}}):e._e()])})),0),s("tr",{directives:[{name:"show",rawName:"v-show",value:e.rightAnswer,expression:"rightAnswer"}]},e._l(e.rightAnswer,(function(t,a){return s("td",{key:a,staticClass:"right"},[e.step.options.images[t]?s("img",{attrs:{src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath}}):e._e()])})),0),s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,staticClass:"text-center"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}})],1)})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-ma-md"},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1),e.step.options&&e.step.options.hideEnlargeMessage?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:""}},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))])],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"geolocation"==e.step.type?s("div",{staticClass:"geolocation"},[s("div",{class:e.geolocation.mode+"mode"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.step.showDistanceToTarget?s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:0==e.geolocation.GPSdistance?"...":Math.round(e.geolocation.GPSdistance)})))]):e._e()]),s("geolocationStepMap",{directives:[{name:"show",rawName:"v-show",value:"map"===e.geolocation.mode&&null===e.playerResult,expression:"geolocation.mode === 'map' && playerResult === null"}],staticClass:"geolocation-step-map",class:"font-"+e.customization.font,attrs:{"target-position":e.geolocation.destinationPosition,"player-position":e.geolocation.playerPosition}}),e.step.options.switchmode?s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{id:"mode-switch",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:e.getGeolocationStepSwitchButtonIcon(),round:"",size:"lg"},on:{click:function(t){return e.switchModeForGeolocationStep()}}}):e._e()],1):e._e(),"gpssensor"==e.step.id&&"sensor"===e.geolocation.mode?s("div",{staticClass:"background-map full-width full-height q-pa-md centered"},[e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?s("div",[e._v(e._s(e.customization.geolocationMessage[e.lang]))]):e._e(),e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?e._e():s("div",[e._v(e._s(e.$t("label.FindAllLocationsToStartSteps")))]),s("div",{staticClass:"q-mt-xl centered"},[s("q-spinner-orbit",{attrs:{color:e.geolocation.colorIndicator,size:"50vw"}})],1),e._v("\n        "+e._s(e.$t("label.ColorIndicatorExplaination",{distance:e.geolocation.closestDistance}))+"\n      ")]):e._e(),"gpssensor"==e.step.id&&"map"===e.geolocation.mode?s("div",{staticClass:"background-map full-width full-height q-pa-md centered"},[s("geolocationStepMap",{staticClass:"geolocation-step-map",class:"font-"+e.customization.font,attrs:{"target-position":e.geolocation.destinationPosition,"player-position":e.geolocation.playerPosition}})],1):e._e(),"write-text"==e.step.type?s("div",{staticClass:"write-text",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"answer-text q-pa-md col-9"},[s("input",{class:{right:!0===e.playerResult,wrong:!1===e.playerResult},staticStyle:{height:"55px"},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),e.rightAnswer?s("input",{staticClass:"right",attrs:{disabled:""},domProps:{value:e.rightAnswer}}):e._e()]),s("div",{staticClass:"col-3"},[s("q-btn",{staticClass:"glossy",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer",icon:"done"},on:{click:function(t){return e.checkAnswer()}}})],1)]),e.step.options&&e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"jigsaw-puzzle"===e.step.type?s("div",{staticClass:"puzzle"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return s("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(s){return e.movePieceWithClick(t.pos)}}},[s("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),s("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),e.step.options.hidePuzzleNotWorkingMessage?e._e():s("div",{staticClass:"q-mt-lg background-lighter4 q-pa-md"},[e.puzzle&&"drag"===e.puzzle.mode?s("div",{staticClass:"centered arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpText"))+"\n          ")]):e._e(),"click"===e.puzzle.mode?s("div",{staticClass:"centered text-primary q-pt-lg arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n          ")]):e._e(),e.puzzle&&"drag"===e.puzzle.mode?s("div",{staticClass:"centeredq-pt-sm"},[s("a",{staticClass:"text-black",on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()])]):e._e(),"memory"===e.step.type?s("div",{staticClass:"puzzle",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"row memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,a){return s("div",{key:a,staticClass:"col-3 q-pa-sm"},[s("div",{staticClass:"card",class:{open:t.isClicked,closed:!t.isClicked,disabled:t.isFound},style:e.step.options&&e.step.options.memoryCardColor&&""!==e.step.options.memoryCardColor?"background: "+e.step.options.memoryCardColor:"",on:{click:function(t){return e.selectMemoryCard(a)}}},[t.imagePath?s("img",{staticStyle:{display:"block",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"},attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}}):e._e()])])})),0)]):e._e(),"portrait-robot"===e.step.type?s("div",{staticClass:"portrait-robot",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"relative-position"},[e.portrait.face?s("div",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/face-"+e.portrait.face.position+".png"}})]):e._e(),e.portrait.eye?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-"+e.portrait.eye.position+".png"}})]):e._e(),e.portrait.mouth?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-"+e.portrait.mouth.position+".png"}})]):e._e(),e.portrait.nose?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-"+e.portrait.nose.position+".png"}})]):e._e(),e.portrait.hair?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-"+e.portrait.hair.position+".png"}})]):e._e(),e.portrait.beard?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-"+e.portrait.beard.position+".png"}})]):e._e(),e.portrait.glass?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-"+e.portrait.glass.position+".png"}})]):e._e(),e.portrait.hat?s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-"+e.portrait.hat.position+".png"}})]):e._e()]),s("table",{staticClass:"portrait-parts relative-position"},[s("tr",[e.portrait.face?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/face-0.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]):e._e(),e.portrait.eye?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-0.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]):e._e(),e.portrait.mouth?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-0.png"},on:{click:function(t){return e.changePortraitPart("mouth")}}})]):e._e(),e.portrait.nose?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-0.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]):e._e(),e.portrait.hair?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-0.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]):e._e(),e.portrait.beard?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-0.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]):e._e(),e.portrait.glass?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-0.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]):e._e(),e.portrait.hat?s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-0.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})]):e._e()])]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mx-md",staticStyle:{"padding-bottom":"100px"}},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)])]):e._e(),"binocular"===e.step.type?s("div",{staticClass:"binocular"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"relative-position"},[s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"400%"},attrs:{src:e.getBackgroundImage()}})]),s("div",{staticClass:"absolute no-mouse-event",staticStyle:{top:"0px",width:"100%"}},[e.step.options.shape&&"binocular"!==e.step.options.shape?e._e():s("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/binoculars.png"}}),e.step.options.shape&&"flashlight"===e.step.options.shape?s("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/flashlight.png"}}):e._e()])]),s("div",{staticClass:"absolute text-white centered",staticStyle:{width:"100%",left:"0px",right:"0px",bottom:"130px"}},[e._v("\n          "+e._s(e.$t("label.MovePictureWithFinger"))+"\n        ")])]):e._e(),"phone-call"===e.step.type?s("div",{staticClass:"phone-call fit"},[s("div",{staticClass:"fit bg-black"},[s("div",{staticClass:"q-pb-xxl"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"fixed-bottom q-pb-xxl q-pl-xl q-pr-xl"},[s("q-btn",{attrs:{round:"",color:"positive",icon:"call"},on:{click:function(t){return e.phoneCall()}}}),s("q-btn",{staticClass:"float-right",attrs:{round:"",color:"negative",icon:"call_end"},on:{click:function(t){return e.cancelPhoneCall()}}})],1)])]):e._e(),"use-item"==e.step.type?s("div",{staticClass:"use-item"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.useItem.imageHeight+"px;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.checkUseItem(t)}}},[s("img",{style:"position: relative; z-index: 500; width: "+e.useItem.crossSize+"px; height: "+e.useItem.crossSize+"px; display: none;",attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?s("p",{staticClass:"inventory-btn"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"}},[s("q-avatar",[e.itemUsed&&e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?s("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e(),!e.itemUsed||e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?e._e():s("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}})])],1),e._v("\n        "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n      ")],1):e._e(),"find-item"==e.step.type?s("div",{staticClass:"find-item",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.findItem.imageHeight+"px;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.checkFindItem(t)}}},[s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play0",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play1",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play2",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play3",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play4",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"===e.step.type?s("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs["geolocation-component"]&&e.$refs["geolocation-component"].isActive,expression:"$refs['geolocation-component'] && $refs['geolocation-component'].isActive"}],staticClass:"locate-item-ar"},[e.noSensorFound?s("div",{staticClass:"text text-center",class:"font-"+e.customization.font},[s("p",{staticClass:"q-mb-lg"},[e._v(e._s(e.$t("label.noSensorFound")))]),s("q-icon",{staticClass:"q-mb-lg",attrs:{size:"3em",name:"sensors_off"}}),s("p",[e._v(e._s(e.$t("label.noSensorNext")))])],1):s("div",[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&e.geolocation.active&&null===e.playerResult,expression:"cameraStreamEnabled && geolocation.active && playerResult === null"}],ref:"camera-stream-for-locate-item-ar"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&(this.geolocation.active||e.isIOs),expression:"playerResult === null && (this.geolocation.active || isIOs)"}],staticClass:"q-mt-xl"},[s("div",{staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():s("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?s("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.geolocation.active?e._e():s("p",[e._v(e._s(e.$t("label.PleaseWaitLoadingAndGPSInit")))]),e.step.showDistanceToTarget&&e.geolocation.active?s("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:0==e.geolocation.GPSdistance?"...":Math.round(e.geolocation.GPSdistance)})))]):e._e(),!e.geolocation.canSeeTarget&&e.geolocation.active?s("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]):e._e(),e.geolocation.canTouchTarget&&e.geolocation.active?s("p",{staticStyle:{color:"#f00"}},[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&e.geolocation.active?s("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||null!==e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult !== null && step.options && step.options.is3D)"}],staticClass:"target-view"},[s("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),s("div",{staticStyle:{width:"100%","text-align":"center"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})]),s("q-dialog",{ref:"raVerticallyDialog"},[s("q-card",{staticClass:"q-dialog-plugin"},[s("q-card-section",{staticClass:"bg-negative text-white q-pa-sm"},[e._v("\n                ATTENTION\n              ")]),s("q-card-section",[s("p",{staticClass:"q-pt-md q-ma-none"},[e._v(e._s(e.$t("label.holdVerticaly")))])])],1)],1)],1)]):e._e(),"image-over-flow"==e.step.type?s("super-impose-image-camera-step",{attrs:{quest:e.quest,step:e.step,customization:e.customization},on:{showButtons:function(t){return e.$emit("showButtons")},hideButtons:function(t){return e.$emit("hideButtons")}}}):e._e(),"locate-marker"==e.step.type||"sensor"==e.step.id?s("div",{staticClass:"locate-marker"},[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():s("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?s("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()])]),null===e.playerResult?s("div",{staticClass:"text-white centered q-mt-md q-pt-xl"},[e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?s("div",[e._v(e._s(e.customization.qrCodeMessage[e.lang]))]):e._e(),e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?e._e():s("div",[e._v(e._s(e.$t("label.ScanTheMarkersLikeThat")))]),e._m(2),e._v("\n          "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n          "),s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.startScanQRCode()}}},[s("div",[e._v(e._s(e.$t("label.LaunchTheScanner")))])])],1)]):e._e(),s("div",{staticClass:"text-center"},[e.playerResult&&e.step.options&&"scan"==e.step.options.mode?s("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e()]),e.locateMarker.showHelp?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font,staticStyle:{height:"100%"}},[s("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&e.step.options&&"scan"===e.step.options.mode?"FindMarkerHelp":"TouchObjectOnMarkerHelp"}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e(),"wait-for-event"==e.step.type?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"distance"===e.step.options.object&&null!==e.iot.distance?s("h2",{staticClass:"centered big q-pb-lg",class:{right:!0===e.playerResult}},[e._v("\n            "+e._s(e.iot.distance)+" cm\n          ")]):e._e(),"pot"===e.step.options.object&&null!==e.iot["pot1"]?s("div",e._l([1,2,3],(function(t){return s("q-linear-progress",{key:t,staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["pot"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})})),1):e._e(),"keypad"===e.step.options.object?s("div",[s("p",[e._v(e._s(e.$t("label.KeypadInput")))]),s("p",{ref:"iot-keypad",staticClass:"iot-keypad",class:{right:!0===e.playerResult,wrong:!1===e.playerResult,shake:!1===e.playerResult}},[e._v(e._s(e.iot.keypadAnswer))])]):e._e(),"joystick"===e.step.options.object&&null!==e.iot["axisX"]?s("div",e._l(["X","Y"],(function(t){return s("div",{key:t},[s("p",[e._v(e._s("X"===t?e.$t("label.Horizontal"):e.$t("label.Vertical")))]),s("q-linear-progress",{staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["axis"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})],1)})),0):e._e(),"button"===e.step.options.object&&!0===e.playerResult?s("div",[s("p",{staticClass:"right q-pb-md q-px-md q-my-md"},[e._v(e._s(this.step.options.message))])]):e._e()])]):e._e(),"trigger-event"==e.step.type?s("div",{staticClass:"trigger-event"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"},domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"chest"!==e.step.options.object||"relay"===e.step.options.object?s("div",[e.step.options.triggerMode&&"manual"===e.step.options.triggerMode?s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.TriggerTheEvent"),size:"xl",disable:null===e.bluetooth.deviceId},on:{click:function(t){return e.triggerIotEvent()}}}):e._e()],1):e._e(),"chest"===e.step.options.object?s("div",[s("p",[e._v(e._s(e.$t("label.ChestActions")))]),s("div",{staticStyle:{display:"flex"}},[s("q-btn",{staticStyle:{"flex-grow":"1","margin-right":"1rem"},attrs:{color:"primary",label:e.$t("label.Open"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("open")}}}),s("q-btn",{staticStyle:{"flex-grow":"1"},attrs:{color:"primary",label:e.$t("label.Close"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("close")}}})],1)]):e._e(),"bluetooth"===e.step.options.protocol&&null===e.bluetooth.deviceId?s("p",[e._v(e._s(e.$t("label.SearchingBluetoothDevice")))]):e._e()]):e._e(),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"waiting"==e.step.id,expression:"step.id == 'waiting'"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"centered q-pa-lg title4 text-primary"},[s("div",{staticClass:"q-pa-lg text-uppercase",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.WaitingForOtherUsersActions")))]),s("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),s("div",[s("div",{staticClass:"q-pa-lg centered"},[e._v("\n              "+e._s(e.$t("label.WaitingForOtherUsersActionsDesc"))+"\n            ")])])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type&&"compass"===e.geolocation.mode||"locate-item-ar"==e.step.type&&e.deviceHasGyroscope)&&e.step.showDirectionToTarget&&null===e.playerResult&&(e.geolocation.active||e.isIOs),expression:"((step.type == 'geolocation' && geolocation.mode === 'compass') || (step.type == 'locate-item-ar' && deviceHasGyroscope)) && step.showDirectionToTarget && playerResult === null && (geolocation.active || isIOs)"}],staticClass:"direction-helper"},[s("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:"geolocation"==e.step.type&&!0===e.playerResult,expression:"step.type == 'geolocation' && playerResult === true"}],staticClass:"direction-helper centered"},[s("q-avatar",{staticStyle:{margin:"auto","margin-bottom":"30px"},attrs:{size:"140px","font-size":"52px",color:"positive","text-color":"white",icon:"thumb_up"}})],1),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"===e.step.type||"locate-item-ar"===e.step.type)&&e.$refs["geolocation-component"]&&(e.$refs["geolocation-component"].userDeniedGeolocation||!e.$refs["geolocation-component"].isActive),expression:"(step.type === 'geolocation' || step.type === 'locate-item-ar') && $refs['geolocation-component'] && ($refs['geolocation-component'].userDeniedGeolocation || !$refs['geolocation-component'].isActive)"}],staticClass:"geolocation-issue"},[s("div",[s("p",{staticClass:"bg-warning"},[e._v(e._s(e.$t("label.GeolocationCouldNotBeRetrieved")))]),s("p",[e._v(e._s(e.$t("label.GeolocationIssuePleaseSkipThisStep")))])])]),s("orientation",{ref:"orientation-component",attrs:{disabled:!e.quest.hasGeolocationSteps},on:{success:function(t){return e.onNewDeviceOrientation(t)},error:function(t){return e.onDeviceOrientationError(t)}}}),!0===e.playerResult&&e.displaySuccessIcon&&e.step&&e.step.options&&e.step.options.successIcon&&"block"!==e.step.options.successIcon?s("div",{staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[s("q-icon",{attrs:{color:"white",name:e.step.options.successIcon}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.geolocation.foundStep,expression:"geolocation.foundStep"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[s("q-icon",{attrs:{color:"white",name:"check_box"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:60===this.countdowntimeleft||30===this.countdowntimeleft||15===this.countdowntimeleft||10===this.countdowntimeleft||5===this.countdowntimeleft,expression:"\n        this.countdowntimeleft === 60 ||\n        this.countdowntimeleft === 30 ||\n        this.countdowntimeleft === 15 ||\n        this.countdowntimeleft === 10 ||\n        this.countdowntimeleft === 5\n        "}],staticClass:"fadein-message text-center"},[s("div",{staticStyle:{"font-size":"0.6em"}},[e._v(e._s(e.$t("label.ItRemains")))]),e._v("\n        "+e._s(this.countdowntimeleft)+" "+e._s(e.$t("label.s"))+"\n    ")]),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"fixed-bottom over-map"},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[s("div",{staticClass:"bg-white centered q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),s("gpscalibration",{ref:"gpscal"}),s("holdphonevertically",{attrs:{show:e.geolocation.showARHelp}})],1)},qa=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-top"},[s("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-bottom"},[s("img",{attrs:{src:"statics/icons/story/sticker-bottom.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-mt-md"},[s("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],ka=(s("6c7b"),s("5df3"),s("1c4c"),s("f576"),s("14b9"),s("bc78")),xa={storeTimeLeft:function(e,t,s){var a={runid:e,stepid:t,timeleft:s};a=JSON.stringify(a),localStorage.setItem("timer-"+e+"-"+t,a)},allStorage:function(){for(var e=[],t=0,s=localStorage.length;t<s;t++){var a=localStorage.key(t),r=localStorage[a];if(a.includes("timer-")){var o={key:a,value:r};e.push(o)}}return e},getTimeLeft:function(e,t){var s=this.allStorage(),a=!0,r=!1,o=void 0;try{for(var n,i=s[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var l=n.value,c=JSON.parse(l.value);if(c.runid===e&&c.stepid===t)return c.timeleft<0&&(c.timeleft=0),c.timeleft}}catch(u){r=!0,o=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return null},clearStoredTimers:function(){var e=this.allStorage();e.forEach((function(e){localStorage.removeItem(e.key)}))}},Ca=s("22ae"),Sa=s("3ba6"),_a=s("2f04"),Ia=s("e08c"),Pa=s("025e"),$a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},Ta=[],Aa={props:{disabled:{type:Boolean,default:!1}},data:function(){return{status:"stopped",sensor:{start:function(){},stop:function(){},onreading:function(){},onerror:function(){}},deviceHasGyroscope:null,gyroscopeDetectionCounter:0,initialBearingAngle:null,noSensorFound:!1,isHybrid:window.cordova,isIOs:lt.isIOS(),isSafari:lt.isSafari()}},watch:{disabled:function(e,t){!0===e&&"started"===this.status?this.stopSensor():!1===e&&"stopped"===this.status&&this.startSensor()}},mounted:function(){var e=this;this.$nextTick((function(){e.startSensor()}))},beforeDestroy:function(){this.stopSensor()},methods:{absoluteOrientationSensorError:function(e){console.error("Could not get orientation",e.error),this.stopSensor(),this.$emit("error",e.error)},absoluteOrientationSensorSuccess:function(){this.$emit("success",this.sensor)},handleDeviceOrientationEvent:function(e){this.$emit("success",e)},startSensor:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.disabled&&"started"!==e.status){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.detectGyroscope();case 4:if(!e.isHybrid||e.isIOs||e.isSafari||e.deviceHasGyroscope){t.next=8;break}window.addEventListener("deviceorientationabsolute",e.handleDeviceOrientationEvent,!0),t.next=38;break;case 8:if(t.prev=8,!("AbsoluteOrientationSensor"in window)){t.next=16;break}e.sensor=new AbsoluteOrientationSensor({frequency:30}),e.sensor.onerror=e.absoluteOrientationSensorError,e.sensor.onreading=e.absoluteOrientationSensorSuccess,e.sensor.start(),t.next=33;break;case 16:if(!e.isSafari){t.next=25;break}if(console.log("IS SAFARI"),"undefined"!==typeof DeviceMotionEvent){t.next=21;break}return e.noSensorFound=!0,t.abrupt("return");case 21:e.sensor={stop:e.stopAlternateAbsoluteOrientationSensor},window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1),t.next=33;break;case 25:return e.sensor={stop:e.stopAlternateAbsoluteOrientationSensor},t.next=28,lt.requestDeviceOrientationPermission();case 28:if(s=t.sent,"granted"===s){t.next=32;break}return Notification(e.$t("label.PleaseAcceptDeviceOrientationPermissionRequest"),"error"),t.abrupt("return");case 32:window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1);case 33:t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](8),console.error(t.t0);case 38:e.status="started";case 39:case"end":return t.stop()}}),t,null,[[8,35]])})))()},stopSensor:function(){"started"===this.status&&(this.deviceHasGyroscope?this.sensor.stop():window.removeEventListener("deviceorientationabsolute",this.handleDeviceOrientationEvent,!0),this.status="stopped")},eventAlternateAbsoluteOrientationSensor:function(e){null===this.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.initialBearingAngle+e.alpha)%360:e.alpha,s=e.beta,a=e.gamma,r=Math.PI/180,o=s?s*r:0,n=a?a*r:0,i=t?t*r:0,l=Math.cos(o/2),c=Math.cos(n/2),u=Math.cos(i/2),d=Math.sin(o/2),p=Math.sin(n/2),m=Math.sin(i/2),h=l*c*u-d*p*m,f=d*c*u-l*p*m,g=l*p*u+d*c*m,b=l*c*m+d*p*u;this.sensor.quaternion=[f,g,b,h],this.absoluteOrientationSensorSuccess()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},detectGyroscope:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isIOs&&!e.isSafari){t.next=4;break}e.deviceHasGyroscope=!0,t.next=7;break;case 4:return window.addEventListener("devicemotion",e.handleMotionEventToDetectGyroscope,!0),t.next=7,e.waitForGyroscopeDetection();case 7:case"end":return t.stop()}}),t)})))()},waitForGyroscopeDetection:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.abrupt("return",new Promise((function(t,a){null!==e.deviceHasGyroscope?(e.gyroscopeDetectionCounter=0,t()):e.gyroscopeDetectionCounter>40?t():(e.gyroscopeDetectionCounter++,lt.setTimeout(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.waitForGyroscopeDetection();case 2:t();case 3:case"end":return e.stop()}}),e)}))),250))})));case 2:case"end":return t.stop()}}),t)})))()},handleMotionEventToDetectGyroscope:function(e){null!==this.deviceHasGyroscope||this.isIOs||(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha,window.removeEventListener("devicemotion",this.handleMotionEvent,!0))}}},za=Aa,Oa=Object(Te["a"])(za,$a,Ta,!1,null,null,null),Ma=Oa.exports,Na=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{model:{value:e.showPhoneAnimation,callback:function(t){e.showPhoneAnimation=t},expression:"showPhoneAnimation"}},[s("div",{staticClass:"bg-black centered q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),s("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])},Ra=[],Fa={props:["show"],watch:{show:function(){var e=n()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:!0!==t&&"true"!==t||(lt.setTimeout(this.closeHandleMobileVertically,5e3),this.showPhoneAnimation=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{showPhoneAnimation:!1}},methods:{closeHandleMobileVertically:function(){this.showPhoneAnimation=!1}}},Da=Fa,La=Object(Te["a"])(Da,Na,Ra,!1,null,null,null),ja=La.exports,Ea=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?s("div",{staticClass:"story fit reduce-window-size-desktop",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"},on:{click:e.closeBubble}},[s("div",{staticClass:"fixed-story",style:"position: fixed; z-index: 10000; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),s("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?s("div",{staticClass:"scroll-indicator"},[s("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),s("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),s("div",{staticClass:"text-right font-standard"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?s("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v("  \n        "),e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button2")?s("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary"},on:{click:e.buttonAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.label))+"\n        ")]):e._e(),e._v("  \n        "),s("q-btn",{staticClass:"glossy normal-button",style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary"},on:{click:e.next}},[s("div",[e._v(e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>"))])])],1)]),e._m(1),s("div",{staticClass:"character"},[-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")&&-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?s("img",{staticStyle:{"min-height":"30vh","vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}}):e._e(),-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")||-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?s("img",{staticStyle:{"min-height":"20vh","max-height":"30vh","vertical-align":"bottom"},attrs:{src:e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character}}):e._e()]),e.steps[e.currentStep.id].allowSkip?s("div",{staticClass:"fixed-bottom-left q-pa-md font-standard"},[s("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},Qa=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-top"},[s("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-bottom"},[s("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],Ua={props:["step","data","color"],data:function(){return{steps:{hint:{discussions:[{character:this.data&&this.data.character?this.data.character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:this.data.help,button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null,button:{label:"Yes"},button2:{label:"No",action:"closeall"}},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:this.data&&this.data.character?this.data.character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks",action:"close"}}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentStep.id=e.step,e.steps[e.currentStep.id]){t.next=4;break}return e.hideStory(),t.abrupt("return");case 4:return e.currentStep.discussionId=0,e.nextStep=e.step,e.hide=!1,e.moreToValidStep(),t.next=10,e.saveStepPassed();case 10:lt.setTimeout(e.checkIfTextIsHidden,500);case 11:case"end":return t.stop()}}),t)})))()},methods:{next:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.needToScroll=!1,!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")||!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.hasOwnProperty("action")){t.next=6;break}e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.action),lt.setTimeout(e.checkIfTextIsHidden,500),t.next=8;break;case 6:return t.next=8,e.closeStory();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:s=e.$refs.bubbleText.clientHeight,s>"140"&&(e.needToScroll=!0);case 4:case"end":return t.stop()}}),t)})))()},moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("nextStep")){t.next=5;break}return e.nextStep=e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].nextStep,e.$store.state.user.story.step=e.nextStep,t.next=5,ut.nextStoryStep(e.nextStep);case 5:case"end":return t.stop()}}),t)})))()},skipTutorial:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,e.$q.dialog({title:e.$t("label.SkipTutorial"),message:e.$t("label.SkipTutorialDesc"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk((function(){e.nextStep=17,ut.nextStoryStep(e.nextStep),e.$store.state.user.story.step=e.nextStep,e.hideStory()})).onCancel((function(){console.log("cancel"),e.hide=!1}));case 2:case"end":return t.stop()}}),t)})))()},closeStory:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveStepPassed();case 2:e.steps[e.currentStep.id].discussions.length-1>e.currentStep.discussionId?(e.currentStep.discussionId++,e.moreToValidStep()):e.hideStory();case 3:case"end":return t.stop()}}),t)})))()},hideStory:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,setTimeout(e.emitNext,500);case 2:case"end":return t.stop()}}),t)})))()},emitNext:function(){this.$emit("next",this.nextStep)},closeBubble:function(){},linkAction:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action?e.hideStory():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},buttonAction:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.hideStory():"closeall"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.skipTutorial():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}},Ba=Ua,Ya=Object(Te["a"])(Ba,Ea,Qa,!1,null,null,null),Ha=Ya.exports,Ga=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"geolocation-step-map"},[e.isMounted?s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)}}},[e._l(e.position.target,(function(t,a){return e.position.target&&e.position.target.length>0?s("gmap-marker",{key:a,attrs:{position:t.coords,icon:e.getNextDestinationMapIcon(t.marker)}}):e._e()})),e.position.target&&e.position.target.coords&&!e.position.target.length?s("gmap-marker",{attrs:{position:{lng:e.position.target.coords.lng,lat:e.position.target.coords.lat},icon:e.getNextDestinationMapIcon(e.position.target.marker)}}):e._e(),e.position.player&&e.position.player.coords?s("gmap-marker",{attrs:{position:{lng:e.position.player.coords.longitude,lat:e.position.player.coords.latitude},icon:e.getUserMapIcon(e.position.player.marker)}}):e._e()],2):e._e()],1)},Wa=[],Va={props:["targetPosition","playerPosition"],watch:{targetPosition:function(e,t){null!==e&&e!==t&&(this.position.target=e),this.reloadMap()},playerPosition:function(e,t){null!==e&&e!==t&&(this.position.player=e),this.reloadMap()}},data:function(){return{map:{zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},loaded:!1,positionned:!1},position:{player:{coords:{longitude:0,latitude:0},marker:""},target:{coords:{lng:0,lat:0}}},isMounted:!1}},computed:{google:$s["gmapApi"]},mounted:function(){var e=this;this.$nextTick((function(){e.position.target=e.targetPosition,e.isMounted=!0,e.reloadMap(),e.position.player=e.playerPosition}))},methods:{getUserMapIcon:function(e){return console.log("-"+e+"-"),e&&""!==e?{url:e,size:{width:150,height:150,f:"px",b:"px"},scaledSize:{width:50,height:50,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:25,y:25}}:{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},getNextDestinationMapIcon:function(e){return e&&""!==e?{url:e,size:{width:150,height:150,f:"px",b:"px"},scaledSize:{width:50,height:50,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:25,y:25}}:{url:"statics/icons/game/target.png",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},reloadMap:function(){var e=this;this.map.loaded=null,this.$refs.mapRef?this.$refs.mapRef.$mapPromise.then((function(t){var s=new google.maps.LatLngBounds;if(e.targetPosition)if(e.targetPosition.length>0)for(var a=0;a<e.targetPosition.length;a++)s.extend(e.targetPosition[a].coords);else s.extend(e.targetPosition.coords);e.position.player&&e.position.player.coords&&s.extend({lng:e.position.player.coords.longitude,lat:e.position.player.coords.latitude}),t.fitBounds(s),e.map.positionned=!0})):(this.centerOnUserPosition(),this.map.loaded=!0),this.map.positionned||setTimeout(this.reloadMap,2e3)},centerOnUserPosition:function(){this.position.player&&this.position.player.coords&&(this.$data.map.center={lat:this.position.player.coords.latitude,lng:this.position.player.coords.longitude}),this.map.zoom=14},updateCenter:function(e){var t=e.lat(),s=e.lng();this.map.center.lat===t&&this.map.center.lng===s||(this.map.centerTmp={lng:s,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp}}},Ja=Va,Ka=Object(Te["a"])(Ja,Ga,Wa,!1,null,null,null),Za=Ka.exports,Xa=s("5a89"),er=s("22b5"),tr=s("34ad"),sr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"image-over-flow"==e.step.type?s("div",{staticClass:"image-over-flow"},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-image-over-flow",staticClass:"full-height full-width"}),s("div",[e.takingSnapshot?e._e():s("div",{staticStyle:{position:"absolute",bottom:"78px",right:"8px","z-index":"1990"}},[s("div",[e.step.options&&e.step.options.snapshotAllowed?s("q-btn",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"photo_camera"},on:{click:function(t){return e.prepareSnapshot()}}}):e._e()],1),s("div",{staticClass:"q-pt-md"},[s("q-btn",{staticClass:"text-white q-mr-sm",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"flip_camera_ios"},on:{click:function(t){return e.switchCamera()}}})],1)]),s("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{position:"absolute",top:"0",left:"0",height:"100vh",width:"100vw","z-index":"1980"},attrs:{id:"snapshotImage"}}),s("div",[""===e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!==e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),e.step.options&&(e.step.options.fullWidthPicture||e.step.options.redFilter||e.step.options.fullHeightPicture)?e._e():s("div",{ref:"ImageOverFlowPicture",staticClass:"image",style:"overflow: hidden; background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw; z-index: 1985;"}),e.step.options&&e.step.options.fullWidthPicture&&!e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",height:"100vh",width:"100vw","z-index":"1985"},attrs:{crossorigin:"anonymous",src:e.getBackgroundImage()}}):e._e(),e.step.options&&!e.step.options.fullWidthPicture&&e.step.options.fullHeightPicture&&!e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"50%",bottom:"0",height:"100vh",width:"auto","z-index":"1985",left:"50%","-webkit-transform":"translateY(-50%) translateX(-50%)"},attrs:{crossorigin:"anonymous",src:e.getBackgroundImage()}}):e._e(),e.isIOs&&""!==e.imageOverFlow.snapshot?s("img",{staticStyle:{"object-fit":"cover",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100vw",height:"100vh","z-index":"1970"},attrs:{src:e.imageOverFlow.snapshot}}):e._e(),(e.isIOs&&""!==e.imageOverFlow.snapshot||!e.isIOs)&&e.step.options&&e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1975","mix-blend-mode":"multiply",opacity:"0.8"},attrs:{src:"statics/images/background/red.png"}}):e._e(),e.isIOs&&e.step.options&&e.step.options.redFilter?s("div",{staticClass:"centered",staticStyle:{background:"transparent",position:"absolute",bottom:"200px",width:"100%","z-index":"1980"}},[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.takeVideoSnapShot()}}},[e._v(e._s(e.$t("label.ApplyRedFilter")))]),""!==e.imageOverFlow.snapshot?s("q-btn",{attrs:{flat:""},on:{click:function(t){return e.cancelTakeVideoSnapShot()}}},[e._v(e._s(e.$t("label.Cancel")))]):e._e()],1):e._e()])]):e._e()},ar=[],rr={drawImageProp:function(e,t,s,a,r,o,n,i){2===arguments.length&&(s=a=0,r=e.canvas.width,o=e.canvas.height),n="number"===typeof n?n:.5,i="number"===typeof i?i:.5,n<0&&(n=0),i<0&&(i=0),n>1&&(n=1),i>1&&(i=1);var l,c,u,d,p=t.naturalWidth,m=t.naturalHeight,h=Math.min(r/p,o/m),f=p*h,g=m*h,b=1;f<r&&(b=r/f),Math.abs(b-1)<1e-14&&g<o&&(b=o/g),f*=b,g*=b,u=p/(f/r),d=m/(g/o),l=(p-u)*n,c=(m-d)*i,l<0&&(l=0),c<0&&(c=0),u>p&&(u=p),d>m&&(d=m),e.drawImage(t,l,c,u,d,s,a,r,o)}},or=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{ref:"snapshotDialog",attrs:{persistent:"",maximized:"",position:"bottom"}},[s("q-card",{staticClass:"full-height"},[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"}),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.onCancelClick}})],1),s("q-card-section",[s("q-img",{staticStyle:{"max-width":"80%","max-height":"80%",margin:"0 auto",display:"block"},attrs:{src:e.dataURL,"spinner-color":"white"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",label:e.$t("snapshot.share")},on:{click:e.shareWithFriend}}),s("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",label:e.$t("snapshot.save")},on:{click:e.saveAndDownload}})],1)],1)],1)},nr=[],ir={name:"snapshotDialogComponent",props:["snapshotFilename","blob","quest","step","isHybrid","color"],data:function(){return{dataURL:null,fileEntry:null,isIOs:lt.isIOS(),isSafari:lt.isSafari(),fileName:this.snapshotFilename}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.blobToBase64(e.blob);case 2:e.dataURL=t.sent,e.isHybrid&&e.createFileEntry();case 4:case"end":return t.stop()}}),t)})))()},methods:{saveAndDownload:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isHybrid){t.next=4;break}e.saveToGallery(e.blob),t.next=7;break;case 4:return t.next=6,lt.downloadDataUrl(e.dataURL,e.snapshotFilename);case 6:e.$q.notify({message:e.$t("snapshot.fileDownload"),color:"positive"});case 7:return t.next=9,e.saveSnapshotOnServer(e.blob,e.snapshotFilename);case 9:case"end":return t.stop()}}),t)})))()},shareWithFriend:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=[],t.next=3,new File([e.blob],"capture"+Date.now()+".jpg",{type:"image/jpeg"});case 3:a=t.sent,s.push(a),e.isHybrid?window.plugins.socialsharing.share(null,null,e.fileEntry.nativeURL,null,(function(){console.log("SUCCESS SHARE")}),(function(){console.log("ERROR SHARE")})):navigator.share&&navigator.canShare({files:s})?navigator.share({files:[a]}):e.$q.notify({message:e.$t("snapshot.notSupported"),color:"negative"});case 6:case"end":return t.stop()}}),t)})))()},saveToGallery:function(){var e=this,t=function(){e.$q.notify({message:e.$t("snapshot.imageSavedToGallery"),color:"positive"}),e.saveSnapshotOnServer(e.blob,e.snapshotFilename)},s=function(t){console.log(t),e.$q.notify({message:e.$t("snapshot.imageSavedFailed"),color:"negative"})};cordova.plugins.imagesaver.saveImageToGallery(this.fileEntry.nativeURL,t,s)},createFileEntry:function(){var e=this;window.resolveLocalFileSystemURL(cordova.file.dataDirectory,(function(s){var a=e.fileName.replace(/[-:]/g,"");t(s,a,e.blob)}));var t=function(e,t,a){e.getFile(t,{create:!0,exclusive:!1},(function(e){s(e,a)}),(function(e){console.log(e)}))},s=function(t,s){t.createWriter((function(a){a.onerror=function(e){console.log("Error on Write file"),console.log(e)},a.write(s),e.fileEntry=t}))}},saveSnapshotOnServer:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.quest.customization||!s.quest.customization.saveSelfieOnServer){a.next=13;break}return a.prev=1,o=new FormData,o.append("image",e,t),a.next=6,Ls.uploadSnapshot(s.step.questId,o);case 6:yt(s.$t("label.SnapshotTaken"),"info"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.error(a.t0),yt(s.$t("label.ErrorTakingSnapshot"),"error");case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},blobToBase64:function(e){return new Promise((function(t,s){var a=new FileReader;a.onloadend=function(){return t(a.result)},a.readAsDataURL(e)}))},show:function(){this.$refs.snapshotDialog.show()},hide:function(){this.$refs.snapshotDialog.hide()},onCancelClick:function(){this.hide(),this.$emit("hide")}},beforeDestroy:function(){this.fileEntry=null,this.dataURL=null}},lr=ir,cr=Object(Te["a"])(lr,or,nr,!1,null,"15a47b9c",null),ur=cr.exports,dr={name:"SuperImposeImageCameraStep",props:["quest","step","customization"],data:function(){return{serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",cameraStreamEnabled:!1,imageCapture:null,cameraUsed:"user",iOSCameraUsed:"",takingSnapshot:!1,isHybrid:window.cordova,isIOs:lt.isIOS(),isSafari:lt.isSafari(),imageOverFlow:{snapshot:""},backGroundImg:null}},methods:{switchCamera:function(){"environment"===this.cameraUsed?this.cameraUsed="user":this.cameraUsed="environment",this.isIOs&&CameraPreview?CameraPreview.switchCamera():(this.clearAllCameraStreams(),this.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0))},prepareSnapshot:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,i,l,c,u,d,p,m;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.takingSnapshot=!0,e.isIOs&&e.step.options&&e.step.options.redFilter||e.$emit("hideButtons"),s=document.getElementById("snapshotImage"),a=new Date,o=a.toISOString().substring(0,19).replace(":","-"),i="snapshot-".concat(o,".jpg"),t.prev=6,l=e.getScreenWidth(),c=e.getScreenHeight(),!e.isIOs||!CameraPreview){t.next=13;break}CameraPreview.takePicture({quality:85},(function(e){var t="data:image/jpeg;base64,"+e;s.src=t})),t.next=27;break;case 13:if(!e.isSafari){t.next=23;break}u=e.$refs["camera-stream-for-image-over-flow"],d=document.createElement("canvas"),d.width=u.videoWidth,d.height=u.videoHeight,p=d.getContext("2d"),p.drawImage(u,0,0,u.videoWidth,u.videoHeight),d.toBlob((function(e){s.src=URL.createObjectURL(e)}),"image/png"),t.next=27;break;case 23:return t.next=25,e.imageCapture.takePhoto();case 25:m=t.sent,s.src=URL.createObjectURL(m);case 27:e.takingSnapshot=!1,s.onload=n()(r.a.mark((function t(){var a,o,u;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.hide(),a=document.createElement("canvas"),o=a.getContext("2d"),a.height=c,a.width=l,a.style.display="none",rr.drawImageProp(o,s),u=new Image,u.crossOrigin="anonymous",u.src=e.getBackgroundImage(),u.onload=n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{rr.drawImageProp(o,u)}catch(r){console.log("picture missing")}return t.next=3,new Promise((function(e){return a.toBlob(e,"image/jpeg")}));case 3:s=t.sent,e.isHybrid?e.openDialog(!0,s,i,a):e.openDialog(!1,s,i,a);case 5:case"end":return t.stop()}}),t)})));case 11:case"end":return t.stop()}}),t)}))),t.next=38;break;case 31:t.prev=31,t.t0=t["catch"](6),yt(e.$t("label.SnapshotTakenIssue"),"error"),console.error(t.t0),console.log(t.t0.stack),e.$q.loading.hide(),e.$emit("showButtons");case 38:case"end":return t.stop()}}),t,null,[[6,31]])})))()},openDialog:function(e,t,s,a){var o=this;this.$q.dialog({component:ur,parent:this,snapshotFilename:s,blob:t,isHybrid:e,quest:this.quest,step:this.step,color:this.customization&&this.customization.color&&""!==this.customization.color?this.customization.color:"primary"}).onCancel(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.$emit("showButtons"),o.cancelTakeVideoSnapShot(),a.remove();case 3:case"end":return e.stop()}}),e)}))))},takeVideoSnapShot:function(){var e=this;CameraPreview.takePicture({quality:85},(function(t){e.imageOverFlow.snapshot="data:image/jpeg;base64,"+t}))},cancelTakeVideoSnapShot:function(){this.imageOverFlow.snapshot=""},launchVideoStreamForAndroid:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cameraUsed,r=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:a},audio:!1}).then((function(e){if(r.setAttribute("muted",!0),r.setAttribute("playsinline",!0),r.srcObject=e,r.play(),s.$store.dispatch("addMediaStream",e),s.cameraStreamEnabled=!0,t){var a=e.getVideoTracks()[0];s.imageCapture=new ImageCapture(a)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),r},launchVideoStreamForIphone:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:e.iOSCameraUsed?e.iOSCameraUsed:CameraPreview.CAMERA_DIRECTION.FRONT,toBack:!0,tapPhoto:!0,tapFocus:!1,previewDrag:!1,storeToFile:!1,disableExifHeaderStripping:!1},e.$q.loading.show(),setTimeout(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,CameraPreview.startCamera(s,(function(){setTimeout((function(){e.$q.loading.hide()}),1e3),e.cameraStreamEnabled=!0}),(function(){setTimeout((function(){e.$q.loading.hide()}),1e3)}));case 2:case"end":return t.stop()}}),t)}))),2e3);case 3:case"end":return t.stop()}}),t)})))()},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera((function(){console.log("CAMERA STOP")})):this.$store.dispatch("clearMediaStreams"),this.cameraStreamEnabled=!1},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,s=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",s.getMonth()+1+"."+s.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return e},getScreenHeight:function(){var e=window.innerHeight;return e},getBackgroundImage:function(){if(!this.step.backgroundImage)return"";var e=this.step.backgroundImage[this.lang]?this.step.backgroundImage[this.lang]:this.step.backgroundImage[this.quest.mainLanguage];return e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/background/"+e}},created:function(){},mounted:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isIOs||!CameraPreview){t.next=6;break}return e.step.options.cameraUsed&&"environment"==e.step.options.cameraUsed?e.iOSCameraUsed=CameraPreview.CAMERA_DIRECTION.BACK:e.iOSCameraUsed=CameraPreview.CAMERA_DIRECTION.FRONT,t.next=4,e.launchVideoStreamForIphone();case 4:t.next=9;break;case 6:return e.step.options.cameraUsed&&"environment"==e.step.options.cameraUsed?e.cameraUsed="environment":e.cameraUsed="user",t.next=9,e.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0);case 9:s=new Image,s.crossOrigin="anonymous",s.src=e.getBackgroundImage(),a=e,s.onload=function(){a.$refs["ImageOverFlowPicture"].style.backgroundImage="url("+this.src+")"};case 14:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.clearAllCameraStreams()}},pr=dr,mr=(s("3b2f"),Object(Te["a"])(pr,sr,ar,!1,null,"ba25fe14",null)),hr=mr.exports,fr=s("e7fc"),gr=(s("6e23"),{props:["step","runId","reload","itemUsed","lang","answer","customization","player","inventory","timer","quest","offline"],components:{holdphonevertically:ja,gpscalibration:Js,geolocation:bt,orientation:Ma,story:Ha,geolocationStepMap:Za,qrCodeStream:qs,SuperImposeImageCameraStep:hr},watch:{reload:function(){var e=n()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 4:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),itemUsed:function(){var e=n()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.step&&"use-item"===this.step.type&&this.step.options&&this.step.options.hasOwnProperty("touchLocation")&&!1===this.step.options.touchLocation&&this.checkUseItem();case 1:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){lt.setTimeout(this.checkIfDataAreInit,5e3)},updated:Zs()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),beforeDestroy:function(){this.resetEvents()},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,imageCapture:null,takingSnapshot:!1,cameraUsed:"environment",serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,showNonHybridQRReader:!1,showGeolocationIssueMessage:!1,isIOs:lt.isIOS(),isSafari:lt.isSafari(),isPageInit:!1,isNetworkLow:!1,isTimeUp:!1,displaySuccessIcon:!1,rightAnswer:null,audio:{file:null,play:!0},noSensorFound:!1,character:{bubbleText:[],numberOfBubble:1,bubbleNumber:0,needToScroll:!1},answerType:"text",playerCode:[],choose:{answers:[]},keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],showTools:!0,codeColors:{},geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},playerPosition:{coords:{longitude:0,latitude:0},marker:""},destinationPosition:[],target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:ka["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1,gpsAccuracy:null,lowGpsAccuracyCeiling:15,lowGpsAccuracy:!1,lowCompassAccuracy:!1,persistentLowAccuracy:!1,persistentLowAccuracyTimeout:null,gpsAccuracyTimeout:null,showARHelp:!1,playerTouchedArObject:!1,currentIndex:0,foundStep:!1,mode:"compass",colorIndicator:"blue-2",closestDistance:100,isCalibrationWatched:!1},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:5},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationInterval:null},deviceHasGyroscope:null,locateMarker:{markerControls:{},playerAnswer:"",flash:!1,showHelp:!1},writetext:{playerAnswer:""},puzzle:{pieces:[],picture:"statics/icons/game/card-back.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},imageOverFlow:{snapshot:""},portrait:{face:{position:1,number:4},eye:{position:1,number:16},mouth:{position:1,number:1},nose:{position:1,number:5},hair:{position:1,number:26},beard:{position:1,number:31},glass:{position:1,number:5},hat:{position:1,number:4},type:"portrait-robot"},findItem:{nbItemsFound:0,crossSize:30,imageWidth:900,imageHeight:1200},useItem:{crossSize:30,imageWidth:900,imageHeight:1200},readMoreNotif:null,itemUsedComputed:null,mqttClient:null,bluetooth:{enabled:!1,deviceId:null},iotObject:null,iot:{distance:null,pot1:null,pot2:null,pot3:null,keypadAnswer:null,axisX:null,axisY:null,chest:{disableActionButtons:!1},relay:{disableActionButtons:!1}},story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null,pageReady:!1,countdowntimeleft:0}},resetData:function(){var e=this.initialState();this.playerResult=e.playerResult,this.stepPlayed=e.stepPlayed,this.cameraStreamEnabled=e.cameraStreamEnabled,this.imageCapture=e.imageCapture,this.takingSnapshot=e.takingSnapshot,this.nbTry=e.nbTry,this.score=e.score,this.reward=e.reward,this.controlsAreDisplayed=e.controlsAreDisplayed,this.isNetworkLow=e.isNetworkLow,this.isTimeUp=e.isTimeUp,this.displaySuccessIcon=e.displaySuccessIcon,this.character=e.character,this.playerCode=e.playerCode,this.geolocation=e.geolocation,this.deviceMotion=e.deviceMotion,this.locateMarker=e.locateMarker,this.writetext=e.writetext,this.puzzle=e.puzzle,this.choose=e.choose,this.memory=e.memory,this.portrait=e.portrait,this.nbItemsFound=e.nbItemsFound,this.readMoreNotif=e.readMoreNotif,this.itemUsedComputed=e.itemUsedComputed,this.mqttClient=e.mqttClient,this.bluetooth=e.bluetooth,this.iotObject=e.iotObject,this.iot=e.iot,this.story=e.story,this.enlargePicture=e.enlargePicture,this.latestRequestAnimationId=e.latestRequestAnimationId,this.countdowntimeleft=e.countdowntimeleft,this.pageReady=e.pageReady,this.showTools=e.showTools,this.rightAnswer=e.rightAnswer,this.audio=e.audio,this.showNonHybridQRReader=e.showNonHybridQRReader,this.showGeolocationIssueMessage=e.showGeolocationIssueMessage},resetEvents:function(){if(this.clearAllCameraStreams(),this.stopLatestAnimation(),window.removeEventListener("deviceorientation",this.checkPhoneVertically),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),null!==this.deviceMotion.idleAccelerationInterval&&clearInterval(this.deviceMotion.idleAccelerationInterval),er["a"].removeAll(),null!==this.mqttClient){var e=this;this.mqttClient.end(!1,{},(function(){e.mqttClient=null}))}if(this.bluetooth.enabled&&this.bluetoothDisconnect(this.bluetooth.deviceId),this.step.countDownTime&&this.step.countDownTime.enabled||this.stopcountdown(),["geolocation","locate-item-ar"].includes(this.step.type)&&this.geolocation.isCalibrationWatched)try{cordova.plugins.headingcalibration.stopWatchCalibration(),this.geolocation.isCalibrationWatched=!1}catch(t){}},getBackgroundImage:function(){if(!this.step.backgroundImage)return"";var e=this.step.backgroundImage[this.lang]?this.step.backgroundImage[this.lang]:this.step.backgroundImage[this.quest.mainLanguage];return e&&"_"===e[0]?"statics/images/quest/"+e:e?-1!==e.indexOf("blob:")?e:this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/background/"+e:""},resetBackgroundImage:function(){return n()(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById("play-view");case 2:return t=e.sent,t.style.background="none",t.style.backgroundColor="transparent",e.next=7,document.getElementById("background-image");case 7:s=e.sent,s&&(s.style.background="none",s.style.backgroundImage="none",s.style.backgroundColor="transparent");case 9:case"end":return e.stop()}}),e)})))()},initData:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isPageInit=!0,e.resetEvents(),e.resetData(),t.next=5,e.resetBackgroundImage();case 5:er["a"].removeAll(),e.$nextTick(n()(r.a.mark((function t(){var s,a,o,n,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.getElementById("play-view"),e.step.backgroundImage?"find-item"===e.step.type||"use-item"===e.step.type||"binocular"===e.step.type||"phone-call"===e.step.type?(s.style.background="none",s.style.backgroundColor="#000",e.showControls()):"image-over-flow"===e.step.type||"locate-marker"===e.step.type||"sensor"===e.step.id?(e.showControls(),s.style.background="none",s.style.backgroundColor="transparent",document.body.style.backgroundColor="transparent"):"jigsaw-puzzle"===e.step.type?(a=e.getBackgroundImage(),s.style.background='#fff url("'+a+'") center/cover no-repeat',e.showControls()):(o=e.getBackgroundImage(),n=document.getElementById("background-image"),n&&(n.style.background=o?'#fff url("'+o+'") center/cover no-repeat':"transparent"),e.step.options&&e.step.options.hasOwnProperty("initDuration")?lt.setTimeout(e.showControls,1e3*parseInt(e.step.options.initDuration,10)):lt.setTimeout(e.showControls,1e3)):(e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type&&"sensor"!==e.step.id&&"image-over-flow"!==e.step.type?(s.style.background="none",s.style.backgroundColor="#fff",document.body.style.backgroundColor="#323232"):(s.style.background="none",s.style.backgroundColor="transparent",document.body.style.backgroundColor="transparent","locate-item-ar"===e.step.type&&(i=document.getElementById("background-image"),i&&(i.style.background="none",i.style.backgroundColor="transparent"))),e.showControls()),e.getAudioSound(),e.resetDrawDirectionInterval(),e.resetSuccessIcon(),l=e,"end-chapter"!==e.step.type&&"increment-counter"!==e.step.type||e.checkAnswer(),"choose"===e.step.type&&(e.answerType=Array.isArray(e.step.options.items)&&e.step.options.items[0].hasOwnProperty("imagePath")&&null!==e.step.options.items[0].imagePath?"image":"text"),"character"===e.step.type&&(e.step.text&&""!==e.step.text?(e.character.bubbleText=e.step.text.split("|"),e.character.numberOfBubble=e.character.bubbleText.length,1===e.character.numberOfBubble&&e.checkAnswer(),lt.setTimeout(e.checkIfTextIsHidden,1500)):e.checkAnswer()),"code-keypad"===e.step.type&&e.resetKeypadCode(),"code-color"===e.step.type){if(e.step.options.colors)for(e.codeColors=[],c=0;c<e.step.options.colors.length;c++)e.codeColors.push(e.step.options.colors[c].value);else e.codeColors=Ca;e.resetColorCode()}if("code-image"===e.step.type&&e.resetImageCode(),"find-item"===e.step.type&&lt.setTimeout(e.initFindItemElements,600),"use-item"===e.step.type&&lt.setTimeout(e.initUseItemElements,600),"new-item"!==e.step.type){t.next=22;break}if(!e.step.options.hasOwnProperty("addInventoryAndPass")||!e.step.options.addInventoryAndPass){t.next=20;break}return t.next=18,e.checkAnswer();case 18:lt.setTimeout(e.forceNextStep,1e3),e.step.type="none";case 20:e.step.options.hasOwnProperty("pictures")&&e.step.options.pictures[e.lang]&&(e.step.options.picture=e.step.options.pictures[e.lang]),e.step.options.hasOwnProperty("titles")&&e.step.options.titles[e.lang]&&(e.step.options.title=e.step.options.titles[e.lang]);case 22:if("jigsaw-puzzle"!==e.step.type){t.next=26;break}return t.next=25,e.initPuzzle();case 25:e.$emit("pass");case 26:if("memory"===e.step.type&&(e.initMemory(),e.$emit("pass")),"binocular"===e.step.type&&(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&yt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")),"phone-call"===e.step.type&&e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&yt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),"portrait-robot"===e.step.type&&e.step.options&&e.step.options.customize&&(e.portrait=e.step.options.customize),"geolocation"===e.step.type&&(e.step.options.hasOwnProperty("mode")&&["compass","map"].includes(e.step.options.mode)?e.geolocation.mode=e.step.options.mode:e.geolocation.mode="compass",e.customization&&e.customization.characterOnMap&&""!==e.customization.characterOnMap&&(e.geolocation.playerPosition.marker=-1!==e.customization.characterOnMap.indexOf("blob:")?e.customization.characterOnMap:e.uploadUrl+"/upload/quest/"+e.customization.characterOnMap)),"gpssensor"===e.step.id){if(e.step.visibles&&e.step.visibles.length>0)for(e.geolocation.mode="map",c=0;c<e.step.visibles.length;c++)e.geolocation.destinationPosition.push({marker:-1!==e.step.visibles[c].marker.indexOf("blob:")||""===e.step.visibles[c].marker?e.step.visibles[c].marker:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/geolocation/"+e.step.visibles[c].marker,coords:e.step.visibles[c].coords});else e.geolocation.mode="sensor";e.customization&&e.customization.characterOnMap&&""!==e.customization.characterOnMap&&(e.geolocation.playerPosition.marker=-1!==e.customization.characterOnMap.indexOf("blob:")?e.customization.characterOnMap:e.uploadUrl+"/upload/quest/"+e.customization.characterOnMap)}if("geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type){t.next=58;break}if(e.noSensorFound=e.$refs["orientation-component"].noSensorFound,e.deviceHasGyroscope=e.$refs["orientation-component"].deviceHasGyroscope,!(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop)){t.next=39;break}"0"===e.runId?(yt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")):(e.$emit("pass"),e.$emit("forceMoveNext")),t.next=56;break;case 39:if(e.$emit("pass"),e.deviceHasGyroscope&&window.addEventListener("devicemotion",e.handleMotionEvent,!0),"geolocation"!==e.step.type||!e.isHybrid||e.isIOs||e.isSafari||e.deviceHasGyroscope||yt(e.$t("label.PleaseHoldYourDeviceFlat")),"locate-item-ar"!==e.step.type){t.next=56;break}if(e.isHybrid){t.next=48;break}return t.next=46,e.callPermissionsEvent();case 46:d=t.sent,console.log(d);case 48:return e.geolocation.showARHelp=e.$refs["geolocation-component"].isActive,t.next=51,lt.requestDeviceMotionPermission();case 51:if(u=t.sent,"granted"===u){t.next=55;break}return yt(e.$t("label.PleaseAcceptDeviceMotionPermissionRequest"),"error"),t.abrupt("return");case 55:e.deviceHasGyroscope||yt(e.$t("label.CouldNotEnableAR"),"warning");case 56:if(e.$store.dispatch("setDrawDirectionInterval",window.setInterval(e.drawDirectionArrow,100)),e.isHybrid&&!e.isIOs)try{cordova.plugins.headingcalibration.watchCalibration((function(t){e.geolocation.isCalibrationWatched=!0,t<=1?(l.geolocation.lowCompassAccuracy=!0,null!==l.geolocation.gpsAccuracyTimeout||l.geolocation.showCalibration||l.geolocation.persistentLowAccuracy||(l.geolocation.gpsAccuracyTimeout=lt.setTimeout((function(){l.step.options&&!0===l.step.options.hideAnimation||l.$refs.gpscal.askUserToCalibrateGPS(),null!==l.geolocation.gpsAccuracyTimeout&&(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===l.geolocation.persistentLowAccuracyTimeout&&(l.geolocation.persistentLowAccuracyTimeout=lt.setTimeout((function(){l.persistentLowAccuracy=!0,l.$emit("msg","suggestNext"),null!==l.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(l.geolocation.lowCompassAccuracy=!1,null===l.geolocation.gpsAccuracyTimeout||l.geolocation.lowGpsAccuracy||(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null,clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null,l.geolocation.persistentLowAccuracy=!1))}),(function(e){console.error("watch calibration: failure",e)}))}catch(r){console.log("calibration tests not working")}case 58:if("locate-item-ar"!==e.step.type||e.playerResult){t.next=111;break}if(window.addEventListener("deviceorientation",e.checkPhoneVertically),!e.deviceHasGyroscope&&e.step.backgroundImage||(e.isIOs&&CameraPreview?(p={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(p),CameraPreview.show()):e.launchVideoStreamForAndroid("camera-stream-for-locate-item-ar",!0)),m=document.getElementById("target-canvas"),e.geolocation.target={scene:new Xa["Scene"],camera:new Xa["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new Xa["WebGLRenderer"]({canvas:m,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new Xa["Clock"]},e.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),h=e.geolocation.target,f=h.scene,e.addDefaultLightTo3DScene(f),!e.step.options.is3D){t.next=81;break}return t.next=70,e.loadAndPrepare3DModel(e.step.options.customModel?e.step.options.customModel:e.step.options.model,e.step.questId,e.step.options.customModel||!1);case 70:v=t.sent,g=v.object,b=v.animations,w=(new Xa["Box3"]).setFromObject(g),y=(w.max.z-w.min.z)/2,g.applyMatrix4((new Xa["Matrix4"]).makeTranslation(0,0,y)),h.size=Math.max(w.max.x-w.min.x,w.max.y-w.min.y,w.max.z-w.min.z),b.length>0&&(q=new Xa["AnimationMixer"](g),q.clipAction(b[0]).play(),e.geolocation.target.mixers.push(q)),e.geolocation.target.renderer.outputEncoding=Xa["sRGBEncoding"],t.next=103;break;case 81:k="",k=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/locate-item-ar/"+e.step.options.picture,e.$refs["item-image"].src=k,h.size=e.step.options.objectSize||1,x=new Xa["PlaneGeometry"](h.size,h.size),t.prev=86,C=(new Xa["TextureLoader"]).load(k),C.anisotropy=0,C.magFilter=Xa["NearestFilter"],C.minFilter=Xa["NearestFilter"],t.next=98;break;case 93:return t.prev=93,t.t0=t["catch"](86),console.error("Error while loading image:",t.t0),yt(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 98:S=new Xa["MeshBasicMaterial"]({map:C}),S.transparent=!0,g=new Xa["Mesh"](x,S),g.position.y=0,g.position.z=1.5;case 103:g.name="targetObject",g.up=new Xa["Vector3"](0,0,1),g.visible=!1,f.add(g),e.geolocation.target.camera.up=new Xa["Vector3"](0,0,1),e.geolocation.target.camera.lookAt(new Xa["Vector3"](0,1,0)),e.geolocation.target.camera.position.z=1.5,e.animateTargetCanvas();case 111:if("image-over-flow"===e.step.type&&e.$emit("pass"),"locate-marker"!==e.step.type&&"sensor"!==e.step.id||e.playerResult||("sensor"===e.step.id?e.step.options={mode:"scan",layerCode:"magnifier"}:e.$emit("pass"),e.initQRCodes()),"wait-for-event"!==e.step.type&&"trigger-event"!==e.step.type){t.next=131;break}if(e.iotObject=e.getIotObjectFromCode(e.step.options.object),"keypad"===e.step.options.object&&(e.iot.keypadAnswer="_".repeat(e.step.options.answer.length)),"mqtt"!==e.step.options.protocol){t.next=123;break}e.mqttClient=fr["connect"]("wss://api.graaly.com:9001"),e.mqttClient.on("connect",(function(){console.log("Successfully connected to MQTT server wss://api.graaly.com:9001"),"wait-for-event"===l.step.type&&l.mqttClient.subscribe("Graaly",(function(e){e?console.error("Error when subscribing to topic Graaly:",e):console.log("Successfully subscribed to MQTT topic Graaly")}))})),e.mqttClient.on("error",(function(e){console.error("Error connecting to MQTT server wss://api.graaly.com:9001","connack=",e)})),"wait-for-event"===l.step.type&&e.mqttClient.on("message",(function(e,t){console.log("Received MQTT message (topic "+e+"): ",t.toString());try{t=JSON.parse(t)}catch(s){console.error("Could not read MQTT message. Error:",s)}t.macAddress===l.step.options.boardMacAddress&&(console.log("*** MAC ADDRESSES MATCHED ***",l.step.stepId),console.log("matching codes?",t.code,l.step.options.code),t.code===l.step.options.code&&(console.log("*** CODES MATCHED, CHECK ANSWER ***"),yt(l.step.options.successMessage,"positive"),l.checkAnswer()))})),t.next=128;break;case 123:if("bluetooth"!==e.step.options.protocol){t.next=127;break}e.isHybrid?ble.enable(e.bluetoothEnableSuccess,e.bluetoothEnableFailure):console.warn("Webapp mode => no bluetooth support."),t.next=128;break;case 127:throw new Error("Unsupported IoT step protocol: "+e.step.options.protocol);case 128:e.$emit("pass"),t.next=133;break;case 131:null!==e.mqttClient&&e.mqttClient.end(!1,{},(function(){l.mqttClient=null})),e.bluetooth&&e.bluetooth.enabled&&e.bluetoothDisconnect(e.bluetooth.deviceId);case 133:if(!e.isTimerAvailable()){t.next=136;break}return t.next=136,e.startCountdown();case 136:case"end":return t.stop()}}),t,null,[[86,93]])}))));case 7:case"end":return t.stop()}}),t)})))()},callPermissionsEvent:function(){var e=this;return new Promise((function(t,s){"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?e.$q.dialog({title:e.$t("label.arDialogTitle"),message:e.$t("label.arDialogMessage"),persistent:!0}).onOk((function(){DeviceMotionEvent.requestPermission().then((function(e){console.log("devicePermissions",e),t(e)})).catch((function(e){return s(e)}))})).onCancel((function(){s(new Error("User canceled authorization for device motion event"))})).onDismiss((function(){s(new Error("User dismissed authorization for device motion event"))})):t()}))},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},initQRCodes:function(){for(var e=1;e<=60;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"help"!==this.step.type&&"image-over-flow"!==this.step.type&&"binocular"!==this.step.type&&"new-item"!==this.step.type&&"trigger-event"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},resetSuccessIcon:function(){this.step.options&&!this.step.options.successIcon&&(this.step.options.successIcon="thumb_up")},checkIfDataAreInit:function(){this.isPageInit||this.initData()},sendAnswer:function(e,t,s,a,o){var i=this;return n()(r.a.mark((function n(){var l,c,u,d,p,m;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i.offline){r.next=23;break}return o&&i.$q.loading.show(),l=i,c=lt.setTimeout((function(){l.isNetworkLow=!0}),8e3),r.next=6,Ls.checkAnswer(e,t,i.step.version,s,a,i.player,{retries:0});case 6:if(u=r.sent,clearTimeout(c),i.isNetworkLow=!1,!u||!u.data){r.next=16;break}return o&&i.$q.loading.hide(),d=u.data,"0"===i.runId&&(d.remainingTrial=i.step.nbTrial-i.nbTry-1),r.abrupt("return",d);case 16:return o&&i.$q.loading.hide(),r.next=19,i.checkOfflineAnswer(a.answer);case 19:return p=r.sent,r.abrupt("return",p);case 21:r.next=28;break;case 23:return Ls.checkAnswer(e,t,i.step.version,s,a,i.player,{retries:0}),r.next=26,i.checkOfflineAnswer(a.answer);case 26:return m=r.sent,r.abrupt("return",m);case 28:case"end":return r.stop()}}),n)})))()},checkOfflineAnswer:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,l,c;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t.step.type,"info-text"!==a&&"info-video"!==a&&"new-item"!==a&&"character"!==a&&"help"!==a&&"image-over-flow"!==a&&"binocular"!==a&&"phone-call"!==a){s.next=5;break}return s.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("geolocation"!==a&&"locate-item-ar"!==a&&"jigsaw-puzzle"!==a){s.next=9;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 9:if("use-item"!==a){s.next=25;break}if(!0!==t.isTimeUp){s.next=12;break}return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 12:if(!t.step.options||!t.step.options.hasOwnProperty("touchLocation")||!1!==t.step.options.touchLocation){s.next=17;break}if(t.answer.item!==e.item){s.next=15;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 15:s.next=23;break;case 17:if(o=e&&e.windowWidth?e.windowWidth:t.getFindItemPictureSize()/100,n={left:Math.round(t.answer.coordinates.left/100*100*o),top:Math.round(t.answer.coordinates.top/100*133*o)},i=Math.round(8*e.windowWidth),l=Math.sqrt(Math.pow(n.left-e.posX,2)+Math.pow(n.top-e.posY,2)),!(l<=i&&t.answer.item===e.item)){s.next=23;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 23:s.next=62;break;case 25:if("find-item"!==a){s.next=31;break}if(!0!==t.isTimeUp){s.next=28;break}return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 28:return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 31:if("write-text"!==a){s.next=41;break}c=0;case 33:if(!(c<t.answer.length)){s.next=39;break}if(lt.removeAccents(e)!==lt.removeAccents(t.answer[c])){s.next=36;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 36:c++,s.next=33;break;case 39:s.next=62;break;case 41:if("memory"!==a){s.next=45;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 45:if("portrait-robot"!==a){s.next=50;break}if(JSON.stringify(e)!==JSON.stringify(t.answer)){s.next=48;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 48:s.next=62;break;case 50:if("code-image"!==a){s.next=60;break}if(!t.step.options||!t.step.options.orderIsNotImportant){s.next=56;break}if(lt.orderCharactersOfString(e)!==lt.orderCharactersOfString(t.answer)){s.next=54;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 54:s.next=58;break;case 56:if(e!==t.answer){s.next=58;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 58:s.next=62;break;case 60:if(e!=t.answer){s.next=62;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 62:if(!(!t.isTimeUp&&t.step.nbTrial&&t.step.nbTrial>0&&t.nbTry+1<t.step.nbTrial)){s.next=66;break}return s.abrupt("return",{result:!1,remainingTrial:t.step.nbTrial-t.nbTry-1,offline:!0});case 66:return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 67:case"end":return s.stop()}}),s)})))()},checkAnswer:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(null===t.playerResult){s.next=3;break}return"locate-marker"===t.step.type&&yt(t.$t("label.qrCodeAlreadyGood"),"info"),s.abrupt("return");case 3:if("sensor"!==t.step.id){s.next=9;break}if(t.locateMarker.markerControls[e]){s.next=7;break}return yt(t.$t("label.QRCodeIsNotPlayingOne"),"error"),s.abrupt("return");case 7:return t.locateMarker.markerControls[e].detected||(t.locateMarker.flash=!1,t.locateMarker.flash=!0,t.locateMarker.markerControls[e].detected=!0,t.$emit("played",e)),s.abrupt("return");case 9:if("gpssensor"!==t.step.id){s.next=15;break}return s.next=12,t.sendAnswer(t.step.questId,e.stepId,t.runId,{answer:e.position,isTimeUp:t.isTimeUp},!1);case 12:return a=s.sent,t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0,e.position),s.abrupt("return");case 15:s.t0=t.step.type,s.next="info-text"===s.t0||"info-video"===s.t0||"new-item"===s.t0||"help"===s.t0||"end-chapter"===s.t0||"increment-counter"===s.t0||"character"===s.t0||"image-over-flow"===s.t0||"binocular"===s.t0||"phone-call"===s.t0||"trigger-event"===s.t0?18:"choose"===s.t0?23:"geolocation"===s.t0?30:"code-keypad"===s.t0?35:"code-color"===s.t0?40:"code-image"===s.t0?45:"jigsaw-puzzle"===s.t0?50:"memory"===s.t0?55:"portrait-robot"===s.t0?60:"write-text"===s.t0?66:"use-item"===s.t0?72:"find-item"===s.t0?81:"locate-item-ar"===s.t0||"locate-marker"===s.t0?103:"wait-for-event"===s.t0?118:135;break;case 18:return s.next=20,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{},!1);case 20:return a=s.sent,t.submitGoodAnswer(0,a.offline,!1),s.abrupt("break",136);case 23:return e=t.choose.answers.sort(),o=e.join("|"),s.next=27,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:o,isTimeUp:t.isTimeUp},!0);case 27:if(a=s.sent,!0===a.result){for(n=0;n<e.length;n++)i=t.step.options.items[e[n]],!1!==t.step.displayRightAnswer||t.step.options.rightAnswerMessage&&t.step.options.rightAnswerMessage[t.lang]&&""!==t.step.options.rightAnswerMessage[t.lang]?(i.icon="done",i.class="right"):i.class="rightorwrong",l["a"].set(t.step.options.items,e[n],i);t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,o)}else{if(!t.isTimeUp)for(n=0;n<e.length;n++)c=t.step.options.items[e[n]],!1!==t.step.displayRightAnswer||t.step.options.rightAnswerMessage&&t.step.options.rightAnswerMessage[t.lang]&&""!==t.step.options.rightAnswerMessage[t.lang]?(c.icon="clear",c.class="wrong"):c.class="rightorwrong",l["a"].set(t.step.options.items,e[n],c);if(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(a.answer||0===a.answer)&&!a.remainingTrial)for(u=(a.answer+"").split("|"),n=0;n<u.length;n++)d=t.step.options.items[u[n]],d.icon="done",d.class="right",l["a"].set(t.step.options.items,u[n],d);t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,o)}return s.abrupt("break",136);case 30:return s.next=32,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 32:return a=s.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0,e):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0,e),s.abrupt("break",136);case 35:return s.next=37,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join(""),isTimeUp:t.isTimeUp},!0);case 37:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer)),t.nbTry++,a.remainingTrial>0?(t.resetKeypadCode(),t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join(""))),s.abrupt("break",136);case 40:return s.next=42,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 42:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer.split("|"))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),s.abrupt("break",136);case 45:return s.next=47,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 47:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer.split("|"))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),s.abrupt("break",136);case 50:return s.next=52,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!(!0===t.isTimeUp),isTimeUp:t.isTimeUp},!0);case 52:return a=s.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),s.abrupt("break",136);case 55:return s.next=57,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!(!0===t.isTimeUp),isTimeUp:t.isTimeUp},!1);case 57:return a=s.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),s.abrupt("break",136);case 60:return p={items:{type:1,face:t.portrait.face?t.portrait.face.position:0,eye:t.portrait.eye?t.portrait.eye.position:0,mouth:t.portrait.mouth?t.portrait.mouth.position:0,nose:t.portrait.nose?t.portrait.nose.position:0,hair:t.portrait.hair?t.portrait.hair.position:0,beard:t.portrait.beard?t.portrait.beard.position:0,glass:t.portrait.glass?t.portrait.glass.position:0,hat:t.portrait.hat?t.portrait.hat.position:0}},s.next=63,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:p,isTimeUp:t.isTimeUp},!1);case 63:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,JSON.stringify(p)):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,JSON.stringify(p))),s.abrupt("break",136);case 66:return t.writetext.playerAnswer=t.writetext.playerAnswer.trim(),s.next=69,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.writetext.playerAnswer,isTimeUp:t.isTimeUp},!0);case 69:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.writetext.playerAnswer):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer[0])),t.nbTry++,a.remainingTrial>0?(t.writetext.playerAnswer="",t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.writetext.playerAnswer)),s.abrupt("break",136);case 72:return s.next=74,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 74:if(a=s.sent,!t.isTimeUp){s.next=79;break}if(t.inventory&&t.inventory.items&&Array.isArray(t.inventory.items)){s.next=78;break}throw new Error("Could not retrieve inventory items. Inventory content: ",t.inventory);case 78:Array.from(t.inventory.items).forEach((function(e){var s=e.originalPicture?e.originalPicture:e.picture;s===a.answer.item&&(t.itemUsedComputed=e)}));case 79:return!0===a.result?(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.step.options&&t.step.options.altFile&&(t.step.backgroundImage[t.lang]=t.step.options.altFile),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer)):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?yt(t.$t("label.UseItemNothingHappens"),"error"):(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.submitWrongAnswer(a.offline,t.step.displayRightAnswer))),s.abrupt("break",136);case 81:if(m=t.findItemIsFound(e),!m.all){s.next=90;break}return s.next=85,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!0,isTimeUp:t.isTimeUp},!0);case 85:a=s.sent,t.step.options&&t.step.options.altFile&&(t.step.backgroundImage[t.lang]=t.step.options.altFile,t.hideAllFindItemLocation()),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer),s.next=102;break;case 90:if(h=t.isTimeUp?0:t.step.nbTrial-t.nbTry-1,m.one){s.next=102;break}if(t.nbTry++,!(h>0)){s.next=97;break}t.step.options.wrongLocationMessage&&t.step.options.wrongLocationMessage[t.lang]&&""!==t.step.options.wrongLocationMessage[t.lang]?yt(t.step.options.wrongLocationMessage[t.lang],"error"):yt(t.$t("label.FindItemNothingHappens"),"error"),s.next=102;break;case 97:return s.next=99,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!1,isTimeUp:t.isTimeUp},!0);case 99:a=s.sent,t.step.options&&t.step.options.altFile?(t.step.backgroundImage[t.lang]=t.step.options.altFile,t.hideAllFindItemLocation()):t.showAllFindItemLocation(),t.submitWrongAnswer(!1,t.step.displayRightAnswer);case 102:return s.abrupt("break",136);case 103:if(!("locate-item-ar"===t.step.type||"locate-marker"===t.step.type&&t.step.options&&"touch"===t.step.options.mode)){s.next=110;break}return s.next=106,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 106:a=s.sent,a&&a.hasOwnProperty("result")&&("locate-item-ar"===t.step.type&&(t.deviceHasGyroscope&&window.removeEventListener("devicemotion",t.handleMotionEvent,!0),window.removeEventListener("deviceorientation",t.checkPhoneVertically)),t.isIOs&&CameraPreview&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),er["a"].removeAll(),"locate-item-ar"===t.step.type&&t.step.options&&t.step.options.is3D||"locate-marker"===t.step.type?(f="locate-item-ar"===t.step.type?t.geolocation.target:t.locateMarker,g=f.camera,b=f.scene.getObjectByName("targetObject"),b.visible=!0,v=(new Xa["Box3"]).setFromObject(b),w=new Xa["Vector3"],v.getSize(w),y=2*Math.max(w.x,w.y,w.z),q=Object.assign({},b.scale),k=new er["a"].Tween(b.scale).to({x:0,y:0,z:0},1e3).easing(er["a"].Easing.Back.In).onComplete((function(){g.position.set(0,0,2*y/3),g.lookAt(new Xa["Vector3"](0,y,w.z/2)),b.scale.set(0,0,0),b.position.set(0,y,w.z/2),b.rotation.set(0,0,0),!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)})),x=new er["a"].Tween(b.scale).to({x:q.x,y:q.y,z:q.z},1e3).easing(er["a"].Easing.Back.Out),C=new er["a"].Tween(b.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),k.chain(x,C).start()):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)),s.next=117;break;case 110:if(S=!1,t.locateMarker.markerControls[e]&&!t.locateMarker.markerControls[e].detected?(t.locateMarker.markerControls[e].detected=!0,S=!0):yt(t.$t("label.qrCodeAlreadyScan"),"info"),!S){s.next=117;break}return s.next=115,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 115:a=s.sent,!0===a.result?(t.submitGoodAnswer(a.score,a.offline,!0),t.locateMarker.playerAnswer=e):(t.nbTry++,2===t.nbTry||t.isTimeUp?t.submitWrongAnswer(a.offline,!0):t.submitRetry(1));case 117:return s.abrupt("break",136);case 118:return s.next=120,t.stopBluetoothNotification();case 120:return s.next=122,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 122:if(a=s.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):yt(t.$t("label.TechnicalIssue"),"error"),"mqtt"!==t.step.options.protocol){s.next=129;break}_=t,t.mqttClient.end(!1,{},(function(){_.mqttClient=null})),s.next=134;break;case 129:if("bluetooth"!==t.step.options.protocol){s.next=133;break}t.bluetoothDisconnect(t.bluetooth.deviceId),s.next=134;break;case 133:throw new Error("Unknown IoT protocol '"+t.step.options.protocol+"'");case 134:return s.abrupt("break",136);case 135:console.log("checkAnswer(): Step type "+t.step.type+" not supported.");case 136:t.score=a&&a.score?a.score:0,t.reward=a&&a.reward?a.reward:0;case 138:case"end":return s.stop()}}),s)})))()},submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),lt.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,s,a){if(this.playerResult=!0,void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled){var r=this.getStepType(this.step.type);"enigma"===r.category&&(this.step.countDownTime.enabled=!1,this.stopcountdown())}if(this.stepPlayed=!0,this.$emit("success",e,t,s,a),this.$emit("played"),s||this.step.options&&this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang])switch(this.step.type){case"character":case"new-item":case"info-text":case"help":case"end-chapter":case"increment-counter":case"info-video":case"image-over-flow":case"binocular":case"phone-call":break;case"choose":case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"),!0,!1,!0);break;case"write-text":case"jigsaw-puzzle":case"memory":case"portrait-robot":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"),!0,!1,!0);break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem"),!0,!1,!0):this.displaySuccessMessage(!0,this.$t("label.WellDone"),!0,!1,!0);break;case"wait-for-event":this.displaySuccessMessage(!0,this.$t("label.WellDone"),!0,!1,!0);break}this.displayReadMoreAlert(),!1!==this.step.displayRightAnswer||this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang]||this.forceNextStep(),this.step.options.moveToNextStepAutomatically&&(this.step.options.moveToNextStepAutomaticallyDuration?lt.setTimeout(this.forceNextStep,1e3*parseInt(this.step.options.moveToNextStepAutomaticallyDuration,10)):lt.setTimeout(this.forceNextStep,3e3))},submitWrongAnswer:function(e,t,s){this.step.countDownTime&&(this.step.countDownTime.enabled=!1,this.stopcountdown()),this.playerResult=!1,this.stepPlayed=!0,this.$emit("fail",e,t,s),this.$emit("played"),!0===this.isTimeUp?this.displaySuccessMessage(!1,this.$t("label.CountDownPopupfail"),!1,!1,!0):(t||this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang])&&this.displaySuccessMessage(!1,this.$t("label.WrongAnswer"),!0,!1,!0),this.displayReadMoreAlert(),!1!==this.step.displayRightAnswer||this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang]?this.step.options.moveToNextStepAutomatically?lt.setTimeout(this.forceNextStep,3e3):lt.setTimeout(this.alertToPassToNextStep,15e3):this.forceNextStep()},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"),!1,!1,!1)},displayReadMoreAlert:function(){var e=this;if(this.step.extraText){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=yt("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(e){e>40?this.displaySuccessMessage(!1,this.$t("label.WrongAnswer"),!0,!1,!1):1===e?this.displaySuccessMessage(!1,this.$t("label.SecondTryOnTry",{nb:e}),!1,!1,!1):this.displaySuccessMessage(!1,this.$t("label.SecondTry",{nb:e}),!1,!1,!1)},forceNextStep:function(){this.$emit("forceMoveNext")},nextCharacterBubbleText:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.character.bubbleNumber<e.character.numberOfBubble-1&&(e.character.bubbleNumber++,e.character.needToScroll=!1,lt.setTimeout(e.checkIfTextIsHidden,500)),!(e.character.bubbleNumber>=e.character.numberOfBubble-1)){t.next=8;break}if(e.stepPlayed){t.next=7;break}return t.next=5,e.checkAnswer();case 5:t.next=8;break;case 7:e.forceNextStep();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:s=e.$refs.bubbleText?e.$refs.bubbleText.clientHeight:0,a=e.$refs.bubbleTextHtml?e.$refs.bubbleTextHtml.clientHeight:0,o=Math.max(s,a),o>"177"&&(e.character.needToScroll=!0);case 6:case"end":return t.stop()}}),t)})))()},chooseSelectValue:function(e){this.step.options&&this.step.options&&this.step.options.multipleAnswers?-1===this.choose.answers.indexOf(e)?(l["a"].set(this.step.options.items[e],"class","right"),this.choose.answers.push(e)):(l["a"].set(this.step.options.items[e],"class",""),this.choose.answers.splice(this.choose.answers.indexOf(e),1)):(this.choose.answers=[e],this.checkAnswer(e))},resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(this.codeColors[0])},resetImageCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(0)},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e)},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e)},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options.images[this.playerCode[e]].imagePath&&-1!==this.step.options.images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options.images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){if(this.playerCode){var t=this.playerCode.indexOf("");-1!==t&&l["a"].set(this.playerCode,t,e)}},clearLastCodeChar:function(){if(this.playerCode){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||l["a"].set(this.playerCode,e,"")}},changeColorForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),s=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[s])}},changeImageForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),s=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[s])}},launchVideoStreamForAndroid:function(e,t,s){var a=this;s||(s=this.cameraUsed);var r=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:s},audio:!1}).then((function(e){if(r.setAttribute("muted",!0),r.setAttribute("playsinline",!0),r.srcObject=e,r.play(),a.cameraStreamEnabled=!0,a.$store.dispatch("addMediaStream",e),t){var s=e.getVideoTracks()[0];a.imageCapture=new ImageCapture(s)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),r},stopVideoTracks:function(e){this.$refs[e]&&this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),s=e.width,a=e.height,r=Math.round(s/2),o=Math.round(a/2);t.save(),t.clearRect(0,0,s,a),t.translate(r,o),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,this.customization&&this.customization.color&&""!==this.customization.color?(t.fillStyle=this.customization.color,t.strokeStyle=this.customization.color):(t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor),t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),a>25&&t.arc(0,0,Math.round(a/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(lt.degreesToRadians(this.geolocation.direction));var n=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(a/2.5)),t.lineTo(-20,45-Math.round(a/2.5)),t.lineTo(-n,45-Math.round(a/2.5)),t.lineTo(-n,Math.round(a/2.5)-25),t.lineTo(n,Math.round(a/2.5)-25),t.lineTo(n,45-Math.round(a/2.5)),t.lineTo(20,45-Math.round(a/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,l,c,u,d,p,m,h,f,g,b,v;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("gpssensor"!==t.step.id&&"map"!==t.step.id){s.next=24;break}t.geolocation.gpsAccuracy=e.coords.accuracy,t.geolocation.playerPosition.coords=e.coords,t.geolocation.active=!0,a=e.coords,o=1e3,n=5,i=0;case 8:if(!(i<t.step.locations.length)){s.next=20;break}if(l={lat:t.step.locations[i].lat,lng:t.step.locations[i].lng},t.geolocation.GPSdistance=1e3*lt.distanceInKmBetweenEarthCoordinates(l.lat,l.lng,a.latitude,a.longitude),o=Math.min(o,parseInt(t.geolocation.GPSdistance,10)),n=t.step.locations[i].distance?t.step.locations[i].distance:5,!(t.geolocation.GPSdistance<=n)){s.next=17;break}return t.geolocation.active=!1,s.next=17,t.checkAnswer({stepId:t.step.steps[i],position:a});case 17:i++,s.next=8;break;case 20:t.geolocation.closestDistance=o,t.updateDistanceIndicatorColor(o),s.next=68;break;case 24:if("geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type||null!==t.playerResult||t.geolocation.playerTouchedArObject){s.next=68;break}if(t.geolocation.gpsAccuracy=e.coords.accuracy,t.geolocation.active=!0,t.geolocation.playerPosition.coords=e.coords,c=e.coords,0===t.step.options.lat&&parseInt(t.step.options.lng,10)===t.step.options.lng&&(0===t.step.options.lng?"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+5e-5,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+5e-4,t.step.options.lng=c.longitude+5e-4):"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+1e-5*t.step.options.lng,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+1e-4*t.step.options.lng,t.step.options.lng=c.longitude+1e-4*t.step.options.lng)),u=t.step.options,"undefined"!==typeof u){s.next=34;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),s.abrupt("return");case 34:if(t.geolocation.gpsAccuracy>t.geolocation.lowGpsAccuracyCeiling?(t.geolocation.lowGpsAccuracy=!0,d=t,null!==t.geolocation.gpsAccuracyTimeout||t.geolocation.showCalibration||t.geolocation.persistentLowAccuracy||(t.geolocation.gpsAccuracyTimeout=lt.setTimeout((function(){d.step.options&&!0===d.step.options.hideAnimation||d.$refs.gpscal.askUserToCalibrateGPS(),null!==d.geolocation.gpsAccuracyTimeout&&(clearTimeout(d.geolocation.gpsAccuracyTimeout),d.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===t.geolocation.persistentLowAccuracyTimeout&&(t.geolocation.persistentLowAccuracyTimeout=lt.setTimeout((function(){t.geolocation.persistentLowAccuracy=!0,t.$emit("msg","suggestNext"),null!==t.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(t.geolocation.lowGpsAccuracy=!1,null===t.geolocation.gpsAccuracyTimeout||t.geolocation.lowCompassAccuracy||(clearTimeout(t.geolocation.gpsAccuracyTimeout),t.geolocation.gpsAccuracyTimeout=null,clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null,t.geolocation.persistentLowAccuracy=!1)),p={lat:u.lat,lng:u.lng},"geolocation"===t.step.type&&u.locations&&u.locations.length>0&&(p.lat=u.locations[t.geolocation.currentIndex].lat,p.lng=u.locations[t.geolocation.currentIndex].lng),t.geolocation.destinationPosition={coords:p},t.step.options.locator&&""!==t.step.options.locator&&(t.geolocation.destinationPosition.marker=-1!==t.step.options.locator.indexOf("blob:")?t.step.options.locator:t.uploadUrl+"/upload/quest/"+t.step.questId+"/step/geolocation/"+t.step.options.locator),t.geolocation.GPSdistance=1e3*lt.distanceInKmBetweenEarthCoordinates(p.lat,p.lng,c.latitude,c.longitude),m=lt.bearingBetweenEarthCoordinates(c.latitude,c.longitude,p.lat,p.lng),t.geolocation.rawDirection=m,h=lt.degreesToRadians(m),t.deviceHasGyroscope||(h=0,f=2+(null!==t.geolocation.target?t.geolocation.target.size:0),t.geolocation.GPSdistance=Math.max(f,t.geolocation.GPSdistance)),t.deviceMotion.isAccelerationIdle||(t.geolocation.position.x=Math.sin(h)*t.geolocation.GPSdistance,t.geolocation.position.y=Math.cos(h)*t.geolocation.GPSdistance),"locate-item-ar"!==t.step.type||null===t.geolocation.target||null===t.geolocation.target.scene){s.next=55;break}if(g=t.geolocation.target,b=g.scene,v=b.getObjectByName("targetObject"),t.geolocation.canSeeTarget=null===g.size||t.geolocation.GPSdistance<40*g.size,"undefined"!==typeof v){s.next=52;break}return s.abrupt("return");case 52:v.visible||(v.position.x=t.geolocation.position.x,v.position.y=t.geolocation.position.y,v.visible=!0),new er["a"].Tween(v.position).to({x:t.geolocation.position.x,y:t.geolocation.position.y},1e3).easing(er["a"].Easing.Quadratic.InOut).start(),t.updatePlayerCanTouchTarget();case 55:if("geolocation"!==t.step.type||t.stepPlayed||!(u.distance&&t.geolocation.GPSdistance<=parseInt(u.distance,10)||!u.distance&&t.geolocation.GPSdistance<=20)){s.next=68;break}if(!(u.locations&&u.locations.length>0&&t.geolocation.currentIndex+1<u.locations.length)){s.next=63;break}yt(t.$t("label.CheckpointReached"),"info"),t.geolocation.foundStep=!1,t.geolocation.foundStep=!0,t.geolocation.currentIndex++,s.next=68;break;case 63:return t.stepPlayed=!0,t.geolocation.active=!1,t.resetDrawDirectionInterval(),s.next=68,t.checkAnswer(c);case 68:case"end":return s.stop()}}),s)})))()},onUserPositionError:function(e){console.error("UserPositionError",e)},updateDistanceIndicatorColor:function(e){var t=this.getColorIndicator(10);e<100&&(t=this.getColorIndicator(9)),e<50&&(t=this.getColorIndicator(8)),e<40&&(t=this.getColorIndicator(7)),e<30&&(t=this.getColorIndicator(6)),e<20&&(t=this.getColorIndicator(5)),e<17&&(t=this.getColorIndicator(4)),e<15&&(t=this.getColorIndicator(3)),e<13&&(t=this.getColorIndicator(2)),e<10&&(t=this.getColorIndicator(1)),this.geolocation.colorIndicator=t},getColorIndicator:function(e){var t=["red-7","red-4","red-3","red-2","red-1","blue-1","blue-2","blue-3","blue-4","blue-5"];return t[e-1]},switchModeForGeolocationStep:function(){"compass"===this.geolocation.mode?this.geolocation.mode="map":this.geolocation.mode="compass"},getGeolocationStepSwitchButtonIcon:function(){return"compass"===this.geolocation.mode?"map":"explore"},checkUseItem:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!0!==t.playerResult){s.next=2;break}return s.abrupt("return");case 2:if(null!==t.itemUsed){s.next=6;break}return yt(t.$t("label.PleaseSelectAnItemFirst"),"error"),t.$emit("msg","suggestInventory"),s.abrupt("return");case 6:return a=t.getUseItemPictureSize()/100,o={windowWidth:a,item:t.itemUsed.originalPicture?t.itemUsed.originalPicture:t.itemUsed.picture},e&&(o.posX=e.offsetX,o.posY=e.offsetY),s.next=11,t.checkAnswer(o);case 11:case"end":return s.stop()}}),s)})))()},showItemLocation:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i,l,c,u,d;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=s.getUseItemPictureSize()/100,n={left:Math.round(e/100*100*o),top:Math.round(t/100*133*o)},i=s.useItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=n.top-i+"px",l.style.left=n.left-i+"px",l.style.display="block",c=l.src,u=null!==s.itemUsedComputed?s.itemUsedComputed:s.itemUsed,d=s,lt.setInterval((function(){l.src===c&&d.step.answers&&d.step.answers.item?(u.pictures&&u.pictures[d.lang]&&""!==u.pictures[d.lang]?l.src=u.picture.indexOf("statics/")>-1||-1!==u.picture.indexOf("blob:")?u.picture:d.uploadUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+u.picture:l.src=d.step.answers.item.indexOf("statics/")>-1||-1!==d.step.answers.item.indexOf("blob:")?d.step.answers.item:d.uploadUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+d.step.answers.item,l.style.borderRadius="50%"):(l.src=c,l.style.borderRadius="0")}),1e3);case 11:case"end":return a.stop()}}),a)})))()},initUseItemElements:function(){this.useItem.imageWidth=this.getUseItemPictureSize(),this.useItem.crossSize=this.useItem.imageWidth/8,this.useItem.imageHeight=4*this.useItem.imageWidth/3},getUseItemPictureSize:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},checkFindItem:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!0!==t.playerResult){s.next=2;break}return s.abrupt("return");case 2:return a=t.getFindItemPictureSize()/100,o={windowWidth:a,posX:e.offsetX,posY:e.offsetY},s.next=6,t.checkAnswer(o);case 6:case"end":return s.stop()}}),s)})))()},initFindItemElements:function(){this.findItem.imageWidth=this.getFindItemPictureSize(),this.findItem.crossSize=this.findItem.imageWidth/8,this.findItem.imageHeight=4*this.findItem.imageWidth/3},getFindItemPictureSize:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},prepareSnapshot:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,i,l,c,u,d,p,m,h;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.takingSnapshot=!0,e.$q.loading.show(),e.$emit("hideButtons"),s=e,a=document.getElementById("snapshotImage"),o=new Date,i=o.toISOString().substring(0,19).replaceAll(":","-"),l="snapshot-".concat(i,".jpg"),t.prev=8,c=s.getScreenWidth(),u=s.getScreenHeight(),!e.isIOs||!CameraPreview){t.next=17;break}return yt(s.$t("label.SnapshotManualOnIOs"),"error"),e.$q.loading.hide(),t.abrupt("return",!1);case 17:if(!e.isSafari){t.next=27;break}d=s.$refs["camera-stream-for-image-over-flow"],p=document.createElement("canvas"),p.width=d.videoWidth,p.height=d.videoHeight,m=p.getContext("2d"),m.drawImage(d,0,0,d.videoWidth,d.videoHeight),p.toBlob((function(e){a.src=URL.createObjectURL(e)}),"image/png"),t.next=31;break;case 27:return t.next=29,e.imageCapture.takePhoto();case 29:h=t.sent,a.src=URL.createObjectURL(h);case 31:a.onload=n()(r.a.mark((function e(){var t,o,i,d;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.$q.loading.hide(),t=document.createElement("canvas"),o=t.getContext("2d"),t.height=u,t.width=c,t.style.display="none",draw.drawImageProp(o,a),i=s.$refs["imageOverflowForCapture"],draw.drawImageProp(o,i),!s.isHybrid){e.next=13;break}s.isIOs&&CameraPreview||(console.log("Save picture in Android Library"),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(e){e.root.getDirectory("Graaly",{create:!0},(function(e){e.getFile(l,{create:!0,exclusive:!1},(function(e){e.createWriter(function(){var e=n()(r.a.mark((function e(a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return t.toBlob(e,"image/jpeg")}));case 2:d=e.sent,a.onwriteend=function(){var e=n()(r.a.mark((function e(a){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.remove(),e.next=3,s.saveSnapshotOnServer(d,l);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onerror=function(e){console.error("Failed file write: ",e)},a.write(d);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),(function(e){yt(s.$t("label.TechnicalIssue"),"error"),console.error("Could not create snapshot file on device filesystem",e)}))}),(function(e){yt(s.$t("label.TechnicalIssue"),"error"),console.error("Could not access Graaly directory on device filesystem",e)}))}),(function(e){yt(s.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",e)}))),e.next=17;break;case 13:return e.next=15,new Promise((function(e){return t.toBlob(e,"image/jpeg")}));case 15:d=e.sent,s.$q.dialog({component:snapshotDialogComponent,parent:s,snapshotFilename:l,canvas:t,blob:d}).onCancel(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.$emit("showButtons"),s.takingSnapshot=!1,e.next=4,s.saveSnapshotOnServer(d,l);case 4:t.remove();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e)}))),t.next=41;break;case 34:t.prev=34,t.t0=t["catch"](8),yt(s.$t("label.SnapshotTakenIssue"),"error"),console.error(t.t0),console.log(t.t0.stack),e.$q.loading.hide(),e.$emit("showButtons");case 41:case"end":return t.stop()}}),t,null,[[8,34]])})))()},takeIOsSnapshot:function(){var e=this;this.$q.loading.hide(),navigator.screenshot.save((function(t,s){if(t)console.error(t),yt(e.$t("label.ErrorTakingSnapshot"),"info");else{var a=cordova.plugins.permissions;a.requestPermission(a.READ_EXTERNAL_STORAGE,(function(t){t.hasPermission?e.saveIOsSnapshot(s):yt(e.$t("label.ErrorTakingSnapshot"),"info")}),alert)}e.takingSnapshot=!1,e.$emit("showButtons")}))},saveIOsSnapshot:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,new Promise((function(t){return window.resolveLocalFileSystemURL("file://"+e.filePath,t,(function(e){console.log("Error "+e)}))}));case 3:return a=s.sent,s.next=6,new Promise((function(e,t){return a.file((function(t){var s=new FileReader;s.onloadend=function(t){e(s.result)},s.readAsArrayBuffer(t)}))}));case 6:return o=s.sent,n=new Blob([new Uint8Array(o)],{type:"image/jpg"}),i=new FormData,i.append("image",n),s.next=12,Ls.uploadSnapshot(t.step.questId,i);case 12:s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),yt(t.$t("label.ErrorTakingSnapshot"),"error"),console.log("Error: "+s.t0);case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()},saveSnapshotOnServer:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.quest.customization||!s.quest.customization.saveSelfieOnServer){a.next=15;break}return a.prev=1,o=new FormData,o.append("image",e,t),a.next=6,Ls.uploadSnapshot(s.step.questId,o);case 6:yt(s.$t("label.SnapshotTaken"),"info"),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.error(a.t0),yt(s.$t("label.ErrorTakingSnapshot"),"error");case 13:a.next=15;break;case 15:s.takingSnapshot=!1,s.$emit("showButtons");case 17:case"end":return a.stop()}}),a,null,[[1,9]])})))()},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,s=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",s.getMonth()+1+"."+s.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return e},getScreenHeight:function(){var e=window.innerHeight;return e},showFoundLocation:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i,l;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=s.getFindItemPictureSize()/100,n={left:Math.round(e/100*100*o),top:Math.round(t/100*133*o)},i=s.findItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=n.top-i+"px",l.style.left=n.left-i+"px",l.style.display="block";case 7:case"end":return a.stop()}}),a)})))()},checkPuzzle:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.comparePuzzlePiecePositions(),s&&e.checkAnswer(),t.abrupt("return",s);case 3:case"end":return t.stop()}}),t)})))()},comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l,c,u,d,p,m,h,f;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.step.options.picture&&e.step.options.picture[e.lang]?e.step.options.picture[e.lang]:e.step.options.picture[e.quest.mainLanguage],a=s&&-1!==s.indexOf("blob:")?s:s&&-1===s.indexOf("upload/")?e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/jigsaw-puzzle/"+s:e.uploadUrl+s,t.next=4,lt.loadImage(a);case 4:for(e.puzzle.picture=a,o=parseInt(e.step.options.level||2,10),n=e.puzzle.colsByLevel[o],i=Math.pow(n,2),l=document.getElementById("pieces").clientWidth-1,c=l,u=Math.floor(c/n),d=Math.floor(l/n),p=0;p<i;p++)m=d*(p%n)+"px",h=u*Math.floor(p/n)+"px",e.puzzle.pieces[p]={pos:p,backSize:100*n,backXPos:m,backYPos:h,width:d,height:u,classes:"piece"};f=!0;while(f)e.puzzle.pieces=e.shuffle(e.puzzle.pieces),f=e.comparePuzzlePiecePositions();return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})))()},shuffle:function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[s],e[s]=a}return e},handleDragStart:function(e){if(this.puzzle&&"drag"===this.puzzle.mode)return e.target.className&&-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0;this.puzzle.dragSrcEl=null,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},handleDragOver:function(e){this.puzzle&&"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),s=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(s,t)}return!0}},switchPieces:function(e,t){var s=0,a=0;if(t!==e){for(var r=0;r<this.puzzle.pieces.length;r++)this.puzzle.pieces[r].pos===t&&(s=r),this.puzzle.pieces[r].pos===e&&(a=r);var o=this.puzzle.pieces[s];l["a"].set(this.puzzle.pieces,s,this.puzzle.pieces[a]),l["a"].set(this.puzzle.pieces,a,o),this.checkPuzzle()}},changePuzzleMode:function(){this.puzzle&&"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if(this.puzzle.dragSrcEl=null,this.puzzle&&"click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var s=this.puzzle.pieces[t];l["a"].set(this.puzzle.pieces,t,s)}}else{if(this.puzzle.clickModeSelected===e)return;for(var a=0;a<this.puzzle.pieces.length;a++)this.puzzle.pieces[a].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var s=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!s.single||t<this.step.options.items.length)&&(e[t]={imagePath:s.imagePath,isClicked:!1,isFound:!1,isUnique:s.single})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,l["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){if(this.step.options.lastIsSingle){this.memory.disabled=!0;for(var s=0;s<this.memory.items.length;s++)this.memory.items[s].isUnique?(this.memory.items[s].isClicked=!0,t.memory.items[s].isFound=!0):(this.memory.items[s].isClicked=!1,t.memory.items[s].isFound=!1),l["a"].set(this.memory.items,s,this.memory.items[s])}else for(var a=0;a<this.memory.items.length;a++)this.memory.items[a].isFound||(this.memory.items[a].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(this.memory.items,a,this.memory.items[a]));this.checkAnswer()}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,lt.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},changePortraitPart:function(e){l["a"].set(this.portrait[e],"position",this.portrait[e].position+1),this.portrait[e].position>this.portrait[e].number&&l["a"].set(this.portrait[e],"position",1)},phoneCall:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.step.options.number,cordova.plugins.phonedialer.dial(s,(function(e){console.log("Dialing succeeded")}),(function(e){"empty"===e?console.log("Unknown phone number"):console.log("Dialer Error:"+e)}),!1),e.checkAnswer();case 3:case"end":return t.stop()}}),t)})))()},cancelPhoneCall:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkAnswer();case 2:e.forceNextStep();case 3:case"end":return t.stop()}}),t)})))()},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,s=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&s.lookAt(e.camera.position),t.length>0)for(var a=0;a<t.length;a++)t[a].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(s.position),e.renderer.render(e.scene,e.camera),er["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onNewDeviceOrientation:function(e){var t=this;if(!1!==e.activated)if(this.deviceHasGyroscope){var s=(new Xa["Quaternion"]).fromArray(e.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&!this.geolocation.playerTouchedArObject&&(this.geolocation.target.camera.quaternion=s),!this.geolocation.waitForNextQuaternionRead){var a=(new Xa["Euler"]).setFromQuaternion(s,"ZXY"),r=(new Xa["Euler"]).setFromQuaternion(s,"XZY"),o=a.x<Math.PI/4?a.z:r.y,n=JSON.stringify((360-lt.radiansToDegrees(o))%360);this.geolocation.direction=(this.geolocation.rawDirection-n+360)%360,this.geolocation.waitForNextQuaternionRead=!0,lt.setTimeout((function(){t.geolocation.waitForNextQuaternionRead=!1}),100)}}else this.geolocation.direction=(this.geolocation.rawDirection+e.alpha)%360;else console.warn("sensor is not activated")},onDeviceOrientationError:function(e){yt(this.$t("label.CouldNotEnableAR"),"warning")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var s=t.scene.getObjectByName("targetObject"),a=new Xa["Vector2"];a.x=e.clientX/t.renderer.domElement.clientWidth*2-1,a.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var r=new Xa["Raycaster"];r.setFromCamera(a,t.camera);var o=r.intersectObject(s,!0),n="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(o.length>0&&n){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.geolocation.active=!1,this.geolocation.playerTouchedArObject=!0);var i="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(i),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n,i,l,c,u,d,p,m;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=4,i=Sa[e],r.prev=2,r.next=5,a.ModelLoaderAsync(e,t,s);case 5:l=r.sent,r.next=13;break;case 8:return r.prev=8,r.t0=r["catch"](2),console.error("Error while loading 3D model:",r.t0),yt(a.$t("label.CouldNotDisplayObject"),"error"),r.abrupt("return");case 13:return c=l.scene,i&&(i.rotation=i.rotation||{},i.rotation.hasOwnProperty("x")&&c.rotateX(lt.degreesToRadians(i.rotation.x)),i.rotation.hasOwnProperty("y")&&c.rotateY(lt.degreesToRadians(i.rotation.y)),i.rotation.hasOwnProperty("z")&&c.rotateZ(lt.degreesToRadians(i.rotation.z)),u=(i.scale||1)*n,c.scale.set(u,u,u)),d=(new Xa["Box3"]).setFromObject(c),p=d.getCenter(new Xa["Vector3"]),p.multiplyScalar(-1),m=new Xa["Object3D"],c.applyMatrix4((new Xa["Matrix4"]).makeTranslation(p.x,p.y,p.z)),m.add(c),m.up=new Xa["Vector3"](0,0,1),c=m,i&&i.translation&&"locate-item-ar"===a.step.type&&(i.translation.hasOwnProperty("x")&&(c.position.x+=i.translation.x*n),i.translation.hasOwnProperty("y")&&(c.position.y+=i.translation.y*n),i.translation.hasOwnProperty("z")&&(c.position.z+=i.translation.z*n)),r.abrupt("return",{object:c,animations:l.animations});case 25:case"end":return r.stop()}}),o,null,[[2,8]])})))()},ModelLoaderAsync:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n,i;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=console.log,r.next=3,lt.readBinaryFile(t,e+".glb");case 3:return i=r.sent,r.abrupt("return",new Promise((function(r,o){var l=new tr["a"];e&&-1!==e.indexOf("blob:")?l.load(e,r,n,o):i?l.load(i,r,n,o):s?l.load(a.uploadUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",r,n,o):l.load(a.serverUrl+"/statics/3d-models/"+e+".glb",r,n,o)})));case 5:case"end":return r.stop()}}),o)})))()},addDefaultLightTo3DScene:function(e){var t=new Xa["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new Xa["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,s,a,r){var o,n=this,i="",l=!1;this.displaySuccessIcon=!0,e?(s&&this.step.options&&this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang]?(i=this.step.options.rightAnswerMessage[this.lang],i.length>40&&(l=2e4)):i=t,o=this.step.options.rightAnswerColor):(s&&this.step.options&&this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang]?(i=this.step.options.wrongAnswerMessage[this.lang],i.length>40&&(l=2e4)):i=t,o=this.step.options.wrongAnswerColor),a&&""!==a||!r||(a=[{icon:"arrow_forward",handler:function(){n.forceNextStep()}}]),yt(i,e?"rightAnswer":"wrongAnswer",a,l,o)},readMore:function(){this.step.extraText&&(this.story.step=6,this.story.data={readMore:lt.replaceBreakByBR(this.step.extraText),character:this.customization&&this.customization.character&&""!==this.customization.character?-1===this.customization.character.indexOf("blob:")?this.uploadUrl+"/upload/quest/"+this.customization.character:this.customization.character:"2"})},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera():this.$store.dispatch("clearMediaStreams")},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t=this.deviceMotion,s=!0;if((!this.deviceHasGyroscope||null===this.geolocation.GPSdistance||isNaN(this.geolocation.position.x)||isNaN(this.geolocation.position.y))&&(s=!1),!s)return t.acceleration.avgData={x:[],y:[],z:[]},t.velocity={x:0,y:0},void(t.dateLatestEvent=null);null===t.idleAccelerationInterval&&(t.idleAccelerationInterval=lt.setInterval((function(){t.isAccelerationIdle=!0}),1e3));var a=e.acceleration,r=new Xa["Vector3"](a.x,a.y,a.z);t.acceleration.raw=r,t.acceleration.avgData.x.push(t.acceleration.raw.x),t.acceleration.avgData.y.push(t.acceleration.raw.y),t.acceleration.avgData.z.push(t.acceleration.raw.z),t.acceleration.avgData.x.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.x.shift(),t.acceleration.avgData.y.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.y.shift(),t.acceleration.avgData.z.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.z.shift(),t.acceleration.filtered.x=lt.arrayAverage(t.acceleration.avgData.x),t.acceleration.filtered.y=lt.arrayAverage(t.acceleration.avgData.y),t.acceleration.filtered.z=lt.arrayAverage(t.acceleration.avgData.z),t.isAccelerationIdle=t.isAccelerationIdle&&Math.pow(t.acceleration.filtered.x,2)+Math.pow(t.acceleration.filtered.y,2)+Math.pow(t.acceleration.filtered.z,2)<.5},checkPhoneVertically:function(e){this.$refs&&this.$refs.raVerticallyDialog&&this.$refs["geolocation-component"].isActive&&(e.beta<50||e.beta>130?this.$refs.raVerticallyDialog.show():this.$refs.raVerticallyDialog.hide())},updatePlayerCanTouchTarget:function(){var e=10;this.step.options.hasOwnProperty("touchDistance")&&"number"===typeof this.step.options.touchDistance&&this.step.options.touchDistance>0&&(e=this.step.options.touchDistance),!this.geolocation.canTouchTarget&&this.geolocation.GPSdistance<=e&&(this.geolocation.canTouchTarget=!0)},enlargeThePicture:function(e){if(!this.step.options||!this.step.options.hideEnlargeMessage){this.enlargePicture.show=!0;var t=this.step.options.images[this.playerCode[e]].imagePath;this.enlargePicture.url=t&&-1!==t.indexOf("blob:")?t:this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t}},triggerIotEvent:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("mqtt"!==t.step.options.protocol){s.next=4;break}t.mqttClient.publish("Graaly",JSON.stringify({macAddress:t.step.options.boardMacAddress,code:t.step.options.code})),s.next=31;break;case 4:if("bluetooth"!==t.step.options.protocol){s.next=30;break}s.t0=t.step.options.object,s.next="lcd"===s.t0?8:"buzzer"===s.t0?10:"chest"===s.t0?12:"relay"===s.t0?15:18;break;case 8:return a=t.step.options.message,s.abrupt("break",19);case 10:return a=t.step.options.duration+","+t.step.options.frequency,s.abrupt("break",19);case 12:return t.iot.chest.disableActionButtons=!0,a=e,s.abrupt("break",19);case 15:return t.iot.relay.disableActionButtons=!0,a=e,s.abrupt("break",19);case 18:throw new Error("Object '"+t.step.options.object+"' not supported");case 19:if(t.sendMessageToBluetoothServer(t.step.options.object+":"+a),"chest"!==t.step.options.object){s.next=24;break}return s.next=23,lt.sleep(2e3);case 23:t.iot.chest.disableActionButtons=!1;case 24:if("relay"!==t.step.options.object){s.next=28;break}return s.next=27,lt.sleep(2e3);case 27:t.iot.relay.disableActionButtons=!1;case 28:s.next=31;break;case 30:throw new Error("IoT protocol not supported: "+t.step.options.protocol);case 31:case"end":return s.stop()}}),s)})))()},bluetoothEnableSuccess:function(){console.log("Bluetooth is enabled"),this.bluetooth.enabled=!0,this.searchForBluetoothPeripheral()},bluetoothDisconnect:function(e){if(this.isHybrid){console.log("Disconnecting BLE");var t=this;ble.disconnect(e,(function(){t.bluetooth.enabled=!1,t.bluetooth.deviceId=null}))}},bluetoothEnableFailure:function(){console.log("The user did *not* enable Bluetooth"),yt("Bluetooth could not be enabled","error")},searchForBluetoothPeripheral:function(){console.log("Searching for BT peripherals..."),ble.startScan([],this.bluetoothScanResult)},bluetoothScanResult:function(){var e=n()(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Device discovered",t),console.log(this.step.options.deviceid),t.name!==this.step.options.deviceid){e.next=8;break}return e.next=5,this.stopBluetoothScan();case 5:console.log("Graaly IoT BT device discovered"),this.bluetooth.deviceId=t.id,ble.connect(t.id,this.bluetoothDeviceConnected,this.bluetoothDeviceDisonnected);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceConnected:function(){var e=n()(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("BT device connected",t),e.next=3,this.sendMessageToBluetoothServer("cm:"+this.step.options.object);case 3:"wait-for-event"===this.step.type&&(console.log("Start notification listening"),ble.startNotification(t.id,this.iotObject.bleServiceId,this.iotObject.bleCharacteristicId,this.onBluetoothNotification,(function(e){return console.error(e)}))),"trigger-event"!==this.step.type||this.step.options.triggerMode&&"auto"!==this.step.options.triggerMode||("chest"===this.step.options.object||"relay"===this.step.options.object?this.triggerIotEvent("open"):this.triggerIotEvent(""));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceDisonnected:function(e){console.log("BT device disconnected",e)},onBluetoothNotification:function(){var e=n()(r.a.mark((function e(t){var s,a,o,n,i,l,c,u,d,p,m;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=lt.bytesToString(t),console.log("Received BT notification: "+s),this.lastReceivedValue=s,null===this.playerResult){e.next=5;break}return e.abrupt("return");case 5:e.t0=this.step.options.object,e.next="keypad"===e.t0?8:"joystick"===e.t0?22:"distance"===e.t0?30:"pot"===e.t0?33:"button"===e.t0?40:"escapebox"===e.t0?45:46;break;case 8:if(!(s.length<8)){e.next=10;break}throw new Error("Invalid data retrieved from IoT device (keypad mode): "+s);case 10:if(this.iot.keypadAnswer=lt.replaceStringAt(this.iot.keypadAnswer,this.iot.keypadAnswer.indexOf("_"),s.charAt(7)),-1!==this.iot.keypadAnswer.indexOf("_")){e.next=21;break}if(this.iot.keypadAnswer!==this.step.options.answer){e.next=16;break}this.checkAnswer(),e.next=21;break;case 16:return this.playerResult=!1,e.next=19,lt.sleep(1e3);case 19:this.iot.keypadAnswer="_".repeat(this.step.options.answer.length),this.playerResult=null;case 21:return e.abrupt("break",47);case 22:if(o=s.match(new RegExp("(\\d+)","g")),a=!0,2===o.length){e.next=26;break}throw new Error("Invalid length for array 'axisValues'");case 26:for(o={X:o[1],Y:o[0]},n=0,i=["X","Y"];n<i.length;n++)l=i[n],c=parseInt(o[l],10),this.iot["axis"+l]=c/255,(c<this.step.options["range"+l].min||c>this.step.options["range"+l].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 30:return this.iot.distance=parseInt(s.substring(9),10),this.iot.distance>=this.step.options.range.min&&this.iot.distance<=this.step.options.range.max&&this.checkAnswer(),e.abrupt("break",47);case 33:if(u=s.match(new RegExp("(\\d+)","g")),a=!0,3===u.length){e.next=37;break}throw new Error("Invalid length for array 'potValues'");case 37:for(d=0;d<3;d++)p=parseInt(u[d],10),this.iot["pot"+(d+1)]=p/255,(p<this.step.options["range"+(d+1)].min||p>this.step.options["range"+(d+1)].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 40:if(!(s.length<8)){e.next=42;break}throw new Error("Invalid data retrieved from IoT device (button mode): "+s);case 42:return m=s.substring(7),"pressed"===m&&this.checkAnswer(),e.abrupt("break",47);case 45:return e.abrupt("break",47);case 46:throw new Error("Unknown IoT object code '"+this.step.options.object+"'");case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendMessageToBluetoothServer:function(e){var t=this;return new Promise((function(s,a){t.bluetooth.enabled&&null!==t.bluetooth.deviceId?(console.log("sendMessageToBluetoothServer: "+e),ble.writeWithoutResponse(t.bluetooth.deviceId,Ia.baseServiceID,t.createIotCara(t.bluetooth.deviceId),lt.stringToBytes(e),(function(e){console.log("BLE write success",e),s()}),(function(e){console.log("BLE write failure",e),a(e)}))):a(new Error("Bluetooth device not connected"))}))},stopBluetoothScan:function(){var e=n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ble.stopScan((function(){console.log("BT Scan stopped")}),(function(e){console.log("Could not stop BT scan",e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stopBluetoothNotification:function(){if(this.isHybrid){var e=this;return new Promise((function(t,s){ble.stopNotification(e.bluetooth.deviceId,Ia.baseServiceID,e.createIotCara(e.bluetooth.deviceId),(function(){t()}),(function(e){s(new Error("Could not stop bluetooth notifications. error: "+e))}))}))}},getIotObjectFromCode:function(e){var t=!0,s=!1,a=void 0;try{for(var r,o=_a[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;if(n.code===e)return n}}catch(i){s=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw a}}throw new Error("Unknown object code '"+e+"'")},createIotCara:function(e){var t=Ia.baseCara+e.toLowerCase().replaceAll(":","");return t},isTimerAvailable:function(){return!!(this.step&&void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled&&lt.timeStringToSeconds(this.step.countDownTime.time)>0)},startCountdown:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==e.isTimerAvailable()){t.next=11;break}if(s=0,a=xa.getTimeLeft(e.runId,e.step._id),s=null===a?lt.timeStringToSeconds(e.step.countDownTime.time):a,!(s<0&&e.step.countDownTime)){t.next=9;break}e.step.countDownTime.enabled=!1,t.next=11;break;case 9:return t.next=11,e.manageCountDown(s,e.step._id);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("error in countdown()",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},manageCountDown:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=s,s.step.countDownTime&&s.step.countDownTime.enabled&&t===s.step._id&&setTimeout(n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(e<=0)){s.next=5;break}return s.next=3,o.handleTimeUp();case 3:s.next=10;break;case 5:return e--,o.countdowntimeleft=e,e%2===0&&"0"!==o.runId&&xa.storeTimeLeft(o.runId,o.step._id,e),s.next=10,o.manageCountDown(e,t);case 10:case"end":return s.stop()}}),s)}))),1e3);case 2:case"end":return a.stop()}}),a)})))()},handleTimeUp:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTimeUp=!0,e.stopcountdown(),e.step.countDownTime&&(e.step.countDownTime.enabled=!1),s=e.getStepType(e.step.type),e.$emit("closeAllPanels"),"enigma"!==s.category){t.next=8;break}return t.next=8,e.checkAnswer();case 8:case"end":return t.stop()}}),t)})))()},stopcountdown:function(){this.step.countDownTime&&(this.step.countDownTime.enabled=!1)},map:function(e,t,s,a,r){var o=lt.map(e,t,lt.timeStringToSeconds(s),a,r);return o},getStepType:function(e){var t=!0,s=!1,a=void 0;try{for(var r,o=Pa[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;if(n.code===e)return n}}catch(i){s=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},findItemIsFound:function(e){for(var t=!1,s=!1,a=e&&e.windowWidth?e.windowWidth:this.getFindItemPictureSize()/100,r=0;r<this.step.options.coordinates.length;r++)if(!this.step.options.coordinates[r].found){var o={left:Math.round(this.step.options.coordinates[r].left/100*100*a),top:Math.round(this.step.options.coordinates[r].top/100*133*a)},n=Math.round(8*a),i=e?Math.sqrt(Math.pow(o.left-e.posX,2)+Math.pow(o.top-e.posY,2)):100;i<=n?(this.step.options.coordinates[r].found=!0,s=!0,document.getElementById("cross-play"+r).style.left=o.left-n+"px",document.getElementById("cross-play"+r).style.top=o.top-n+"px",document.getElementById("cross-play"+r).style.display="block"):t=!0}return{all:!t,one:s}},getAudioSound:function(){var e=this.quest.mainLanguage,t=this.lang,s=this.step.audioStream&&this.step.audioStream[this.lang]&&""!==this.step.audioStream[this.lang],a=this.step.audioStream&&this.step.audioStream[e]&&""!==this.step.audioStream[e];s||a?(!s&&a&&e!==this.lang&&(t=e),-1!==this.step.audioStream[t].indexOf("blob:")?this.audio.file=this.step.audioStream[t]:this.audio.file=this.uploadUrl+"/upload/quest/"+this.step.questId+"/audio/"+this.step.audioStream[t]):this.audio.file=null},switchAudioSound:function(){var e=document.getElementById("step-music");e&&(this.audio.play?(e.pause(),this.audio.play=!1):(e.play(),this.audio.play=!0))},replayAudioSound:function(){var e=document.getElementById("step-music");e&&(e.currentTime=0,e.play(),this.audio.play=!0)},openInventory:function(e){this.$emit("openInventory",e)},showAllFindItemLocation:function(){for(var e=this.getFindItemPictureSize()/100,t=0;t<this.step.options.coordinates.length;t++){var s={left:Math.round(this.step.options.coordinates[t].left/100*100*e),top:Math.round(this.step.options.coordinates[t].top/100*133*e)},a=this.useItem.crossSize/2,r=document.getElementById("cross-play"+t);r.style.top=s.top-a+"px",r.style.left=s.left-a+"px",r.style.display="block"}},hideAllFindItemLocation:function(){for(var e=0;e<5;e++){var t=document.getElementById("cross-play"+e);t.style.display="none"}}}}),br=gr,vr=(s("8cf0"),Object(Te["a"])(br,ya,qa,!1,null,"dd6822dc",null)),wr=vr.exports,yr=s("c1df"),qr=s.n(yr),kr={components:{stepPlay:wr,story:Ha,chat:wa,Notify:Se["a"]},data:function(){return this.initialState()},mounted:function(){lt.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake(),this.isHybrid&&"android"===cordova.platformId&&StatusBar.show()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1},selectedItems:[]},hint:{isOpened:!1,isFirst:!0,label:"",suggest:!1,show:!1,used:!1,number:0,remainingNumber:0},info:{isOpened:!1,score:0,quest:{},audio:""},chat:{isOpened:!1},next:{suggest:!1,enabled:!1,canPass:!1},sound:{status:"play",tempMute:!1},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},navigatingToStepId:null,story:{step:null,data:null},loadStepData:!1,run:{currentChapter:0},runId:0,player:"P1",isMultiplayer:!1,isRunFinished:!1,remotePlay:!1,dataSharedWithPartner:!1,isHybrid:window.cordova,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!0,answer:null,steps:[],force:!1},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,runDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:lt.isIOS(),countDownTime:{remaining:0},selectedItem:null,currentDate:null,score:{nbGoodAnwers:0,nbQuestions:0}}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.next=e.next,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectedItem,this.loadStepData=e.loadStepData,this.startDate=e.startDate,this.footer=e.footer},initData:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.prev=1,t.next=4,ct.getByIdForStep(e.questId,999,e.lang);case 4:e.info.quest=t.sent,t.next=14;break;case 7:return t.prev=7,t.t0=t["catch"](1),console.error(t.t0),e.$q.loading.hide(),e.warnings.questDataMissing=!0,e.reloadPageInAWhile(),t.abrupt("return");case 14:return e.isMultiplayer=e.info.quest.playersNumber&&e.info.quest.playersNumber>1,e.initOfflineMode(),e.getAudioSound(),e.startFullScreen(),e.loadStepData=!1,t.next=21,e.getRun();case 21:return t.next=23,e.getPlayer();case 23:return e.player=t.sent,t.next=26,e.getStep();case 26:if(e.sendStepIdToParent(),e.updateHistory(),e.startCountDown(),e.checkIfAlreadyPlayed(),"use-item"!==e.step.type){t.next=33;break}return t.next=33,e.fillInventory();case 33:e.$q.loading.hide(),e.isHintAvailable()&&(lt.setTimeout(e.alertOnHint,12e3),e.hint.show=!0),lt.setTimeout(e.alertOnNext,18e4),e.loadStepData=!0,e.refreshCurrentDate();case 38:case"end":return t.stop()}}),t,null,[[1,7]])})))()},moveToStep:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.navigatingToStepId=e,lt.clearAllRunningProcesses(),t.resetData(),t.$q.loading.show(),"undefined"===t.lang&&(t.lang=t.$t("label.shortLang")),t.loadStepData=!1,s.next=8,t.getRun();case 8:return s.next=10,t.getPlayer();case 10:return t.player=s.sent,s.next=13,t.getStep(e);case 13:if(t.sendStepIdToParent(),t.updateHistory(),t.manageAudio(),t.checkIfAlreadyPlayed(),"use-item"!==t.step.type){s.next=20;break}return s.next=20,t.fillInventory();case 20:t.$q.loading.hide(),t.isHintAvailable()&&(lt.setTimeout(t.alertOnHint,12e3),t.hint.show=!0),lt.setTimeout(t.alertOnNext,18e4),t.loadStepData=!0,t.refreshCurrentDate(),t.computeGoodAnswers(),t.hint.isFirst=!0;case 27:case"end":return s.stop()}}),s)})))()},getRun:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l,c,u;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.runDataMissing=!1,s=!!e.$route.query.hasOwnProperty("remoteplay")&&e.$route.query.remoteplay,a=e.$route.query.hasOwnProperty("sharepartner")&&"true"===e.$route.query.sharepartner,t.next=5,e.checkIfRunIsAlreadyLoaded(e.questId);case 5:if(n=t.sent,!n){t.next=10;break}return t.next=9,e.loadOfflineRun(e.questId);case 9:o=t.sent;case 10:if(e.offline.active&&(0!==e.run.currentChapter||e.offline.force)){t.next=70;break}return t.next=13,Rs.listForAQuest(e.questId);case 13:if(i=t.sent,!i||!i.data){t.next=63;break}l=0;case 16:if(!(l<i.data.length)){t.next=37;break}if(i.data[l]&&i.data[l].status&&"finished"===i.data[l].status&&(e.isRunFinished=!0),!i.data[l]||!i.data[l].status||"in-progress"!==i.data[l].status){t.next=34;break}if(e.run=i.data[l],e.runId=e.run._id,!n){t.next=34;break}if(!(o.dateUpdated>e.run.dateUpdated)){t.next=31;break}return c=e.run._id,e.run=o,e.run._id||(e.run._id=c,e.runId=c),e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=29,Rs.updateFromOffline(e.run);case 29:t.next=34;break;case 31:return e.run.answers=o.answers,t.next=34,e.updateOfflineRun(e.questId);case 34:l++,t.next=16;break;case 37:if(0!==e.run.currentChapter){t.next=60;break}return t.next=40,Rs.init(e.questId,e.questVersion,e.$route.params.lang,s,null,a);case 40:if(u=t.sent,!(u&&200===u.status&&u.data&&u.data._id)){t.next=55;break}if(!n){t.next=51;break}return e.run=o,e.run._id=u.data._id,e.runId=e.run._id,e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=49,Rs.updateFromOffline(e.run);case 49:t.next=53;break;case 51:e.run=u.data,e.runId=e.run._id;case 53:t.next=57;break;case 55:e.warnings.runDataMissing=!0,e.reloadPageInAWhile();case 57:e.info.score=0,t.next=61;break;case 60:e.info.score=e.run.tempScore;case 61:t.next=68;break;case 63:return e.offline.active=!0,e.offline.force=!0,e.warnings.runDataMissing=!0,e.reloadPageInAWhile(),t.abrupt("return",!1);case 68:t.next=81;break;case 70:if(e.isHybrid){t.next=75;break}e.warnings.runDataMissing=!0,e.reloadPageInAWhile(),t.next=81;break;case 75:if(!n){t.next=79;break}o&&(e.run=o,e.run._id&&(e.runId=e.run._id),e.info.score=e.run.tempScore,Rs.updateFromOffline(e.run)),t.next=81;break;case 79:return t.next=81,e.updateOfflineRun(e.questId);case 81:case"end":return t.stop()}}),t)})))()},getPlayer:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.run.team||!e.run.team.members){t.next=8;break}s=0;case 2:if(!(s<e.run.team.members.length)){t.next=8;break}if(e.run.team.members[s]._id!==e.$store.state.user._id){t.next=5;break}return t.abrupt("return",e.run.team.members[s].player);case 5:s++,t.next=2;break;case 8:return t.abrupt("return","P1");case 9:case"end":return t.stop()}}),t)})))()},getStep:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.warnings.questDataMissing&&!s.warnings.runDataMissing){a.next=2;break}return a.abrupt("return",!1);case 2:if(s.warnings.stepDataMissing=!1,"undefined"===typeof e||null===e){a.next=7;break}o=e,a.next=55;break;case 7:if(s.offline.active){a.next=37;break}return a.next=10,Rs.getNextStep(s.questId,s.player,t);case 10:if(n=a.sent,!n||!n.data||200!==n.status){a.next=34;break}if(!n.data.next){a.next=29;break}if("locationMarker"!==n.data.next){a.next=18;break}return s.step={id:"sensor"},a.abrupt("return",!1);case 18:if("geolocation"!==n.data.next){a.next=23;break}return s.step={id:"gpssensor",locations:n.data.extra.locations,steps:n.data.extra.geosteps,visibles:n.data.extra.visibles,questId:s.questId,version:s.questVersion},a.abrupt("return",!1);case 23:if(o=n.data.next,!t||"combine"!==t.type){a.next=26;break}return a.abrupt("return",o);case 26:n.data.extra&&"removehistory"===n.data.extra&&s.removeHistory(),a.next=32;break;case 29:return s.isMultiplayer&&s.showWaitingPage(),s.getPreviousStep(),a.abrupt("return",!1);case 32:a.next=35;break;case 34:n&&n.data&&"app_quest_data_is_obsolete"===n.data.message?s.$q.dialog({title:s.$t("label.QuestUpdated"),message:s.$t("label.PleaseRestartQuest")}).onOk((function(){s.$router.push("/quest/play/"+s.questId)})):s.$q.dialog({title:s.$t("label.TechnicalProblem")}).onOk((function(){s.$router.push("/quest/play/"+s.questId)}));case 35:a.next=55;break;case 37:return a.next=39,s.getNextOfflineStep(s.questId,null,s.player,t);case 39:if(i=a.sent,i&&i.id){a.next=46;break}return s.isMultiplayer&&s.showWaitingPage(),s.getPreviousStep(),a.abrupt("return",!1);case 46:if(o=i.id,!t||"combine"!==t.type){a.next=49;break}return a.abrupt("return",o);case 49:if("locationMarker"!==o){a.next=52;break}return s.step={id:"sensor"},a.abrupt("return",!1);case 52:if("geolocation"!==o){a.next=55;break}return s.step={id:"gpssensor",locations:i.extra.locations,steps:i.extra.geosteps,visibles:i.extra.visibles,questId:s.questId,version:s.questVersion},a.abrupt("return",!1);case 55:if("end"!==o){a.next=57;break}return a.abrupt("return",s.$router.push("/quest/"+s.questId+"/end"));case 57:if(s.offline.active){a.next=80;break}return a.next=60,Ls.getById(o,s.questVersion,s.lang);case 60:if(l=a.sent,!l||!l.data||200!==l.status){a.next=75;break}if(!l.data.message||"Step not yet available"!==l.data.message){a.next=66;break}s.showStepBlockedMessage(l.data.startDate),a.next=73;break;case 66:if(s.step=l.data,s.step.id=s.step.stepId,!t||"combine"!==t.type){a.next=70;break}return a.abrupt("return",s.step.stepId);case 70:return s.getPreviousStep(),s.step.hint&&(s.hint.remainingNumber=s.step.hint.length),a.abrupt("return",!0);case 73:a.next=78;break;case 75:return s.warnings.stepDataMissing=!0,s.reloadPageInAWhile(),a.abrupt("return",!1);case 78:a.next=184;break;case 80:return a.next=82,lt.readFile(s.questId,"step_"+o+".json");case 82:if(c=a.sent,c){a.next=87;break}s.$q.dialog({title:s.$t("label.TechnicalProblem")}).onOk((function(){s.$router.push("/quest/play/"+s.questId)})),a.next=184;break;case 87:if(u=JSON.parse(c),u.hint&&(s.hint.remainingNumber=u.hint.length),d=s.offlineCheckAccess(u),d&&d.message&&"Step not yet available"===stepAccessMessage&&s.showStepBlockedMessage(d.startDate),!u.backgroundImage||!u.backgroundImage[s.lang]){a.next=96;break}return a.next=94,lt.readBinaryFile(s.questId,u.backgroundImage[s.lang]);case 94:p=a.sent,p?u.backgroundImage[s.lang]=p:s.warnings.stepDataMissing=!0;case 96:if(!u.videoStream||!u.videoStream[s.lang]||""===u.videoStream[s.lang]){a.next=101;break}return a.next=99,lt.readBinaryFile(s.questId,u.videoStream[s.lang]);case 99:m=a.sent,m?u.videoStream[s.lang]=m:s.warnings.stepDataMissing=!0;case 101:if(!u.audioStream){a.next=115;break}if(h=s.info.quest.mainLanguage,!u.audioStream[s.lang]||""===u.audioStream[s.lang]){a.next=110;break}return a.next=106,lt.readBinaryFile(s.questId,u.audioStream[s.lang]);case 106:f=a.sent,f?u.audioStream[s.lang]=f:s.warnings.stepDataMissing=!0,a.next=115;break;case 110:if(s.lang===h||!u.audioStream[h]||""===u.audioStream[h]){a.next=115;break}return a.next=113,lt.readBinaryFile(s.questId,u.audioStream[h]);case 113:g=a.sent,g?u.audioStream[h]=g:s.warnings.stepDataMissing=!0;case 115:if("choose"!==u.type||!u.options){a.next=126;break}b=0;case 117:if(!(b<u.options.items.length)){a.next=126;break}if(!u.options.items[b].imagePath){a.next=123;break}return a.next=121,lt.readBinaryFile(s.questId,u.options.items[b].imagePath);case 121:v=a.sent,v?u.options.items[b].imagePath=v:s.warnings.stepDataMissing=!0;case 123:b++,a.next=117;break;case 126:if("memory"!==u.type||!u.options||!u.options.items){a.next=137;break}b=0;case 128:if(!(b<u.options.items.length)){a.next=137;break}if(!u.options.items[b].imagePath){a.next=134;break}return a.next=132,lt.readBinaryFile(s.questId,u.options.items[b].imagePath);case 132:w=a.sent,w?u.options.items[b].imagePath=w:s.warnings.stepDataMissing=!0;case 134:b++,a.next=128;break;case 137:if("code-image"!==u.type||!u.options||!u.options.images){a.next=148;break}b=0;case 139:if(!(b<u.options.images.length)){a.next=148;break}if(!u.options.images[b].imagePath){a.next=145;break}return a.next=143,lt.readBinaryFile(s.questId,u.options.images[b].imagePath);case 143:y=a.sent,y?u.options.images[b].imagePath=y:s.warnings.stepDataMissing=!0;case 145:b++,a.next=139;break;case 148:if(!("jigsaw-puzzle"===u.type&&u.options&&u.options.picture&&u.options.picture[s.lang]&&""!==u.options.picture[s.lang])){a.next=153;break}return a.next=151,lt.readBinaryFile(s.questId,u.options.picture[s.lang]);case 151:q=a.sent,q?u.options.picture[s.lang]=q:s.warnings.stepDataMissing=!0;case 153:if("geolocation"!==u.type||!u.options||!u.options.locator||""===u.options.locator){a.next=158;break}return a.next=156,lt.readBinaryFile(s.questId,u.options.locator);case 156:k=a.sent,k?u.options.locator=k:s.warnings.stepDataMissing=!0;case 158:if("new-item"!==u.type||!u.options||!u.options.picture||""===u.options.picture){a.next=169;break}if(!u.options.pictures||!u.options.pictures[s.lang]||""===u.options.pictures[s.lang]){a.next=165;break}return a.next=162,lt.readBinaryFile(s.questId,u.options.pictures[s.lang]);case 162:x=a.sent,a.next=168;break;case 165:return a.next=167,lt.readBinaryFile(s.questId,u.options.picture);case 167:x=a.sent;case 168:x&&(u.options.picture=x,u.options.hasOwnProperty("pictures")&&u.options.pictures[s.lang]&&(u.options.pictures[s.lang]=x));case 169:if("character"!==u.type||!u.options||!u.options.character||""===u.options.character||"usequestcharacter"===u.options.character){a.next=174;break}return a.next=172,lt.readBinaryFile(s.questId,u.options.character);case 172:C=a.sent,C&&(u.options.character=C);case 174:if("find-item"!==u.type&&"use-item"!==u.type||!u.options||!u.options.altFile||""===u.options.altFile){a.next=179;break}return a.next=177,lt.readBinaryFile(s.questId,u.options.altFile);case 177:S=a.sent,S&&(u.options.altFile=S);case 179:return s.step=u,s.step.id=s.step.stepId,s.getPreviousStep(),s.offline.answer=s.step.answers,a.abrupt("return",!0);case 184:case"end":return a.stop()}}),a)})))()},sendStepIdToParent:function(){try{window.self!==window.top&&(document.domain="graaly.com",parent.document.getElementById("stepid").value=this.step.id)}catch(e){console.log(e)}},refreshCurrentDate:function(){var e=new Date;this.currentDate=qr()(e).format("DD/MM/YYYY, k:mm")},showWaitingPage:function(){var e=this;this.step={id:"waiting"},this.next.enabled=!1,this.next.canPass=!1,setTimeout(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.moveToStep();case 1:case"end":return t.stop()}}),t)}))),15e3)},checkIfAlreadyPlayed:function(){var e=this.run.conditionsDone;e&&"undefined"!==typeof this.step.stepId&&-1!==e.indexOf("stepDone_"+this.step.stepId)&&(this.next.canPass=!0)},updateHistory:function(){this.$store.state.history&&this.$store.state.history.items||this.removeHistory(),-1===this.$store.state.history.items.indexOf(this.step.stepId)&&this.step.stepId&&this.$store.state.history.items.push(this.step.stepId)},removeHistory:function(){this.$store.state.history={items:[],index:0}},getPreviousStep:function(){(this.step.conditions&&this.step.conditions.length>0||"waiting"===this.step.id)&&(this.previousStepId="ok")},startCountDown:function(){if(this.info.quest.countDownTime&&this.info.quest.countDownTime.enabled){var e=lt.getDurationFromNow(this.run.dateCreated),t=this.info.quest.duration-e.m;if(this.countDownTime.enabled=!0,this.countDownTime.remainingMinutes=t,this.countDownTime.remaining=t/this.info.quest.duration,setTimeout(this.startCountDown,6e4),t<=0&&this.info.quest.countDownTime.stopGame)return this.$router.push("/quest/"+this.questId+"/end")}},trackStepSuccess:function(e,t,s,a){var o=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s&&(o.info.score+=e),"image-over-flow"!==o.step.type&&"binocular"!==o.step.type&&o.hideHint(),t.next=4,o.saveOfflineAnswer(!0,!1,!1);case 4:!1!==o.step.displayRightAnswer||o.step.options.rightAnswerMessage&&""!==o.step.options.rightAnswerMessage||o.nextStep();case 5:case"end":return t.stop()}}),t)})))()},trackStepPlayed:function(e,t){var s=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("sensor"!==s.step.id){t.next=5;break}return t.next=3,s.getMarkerStep(e);case 3:t.next=19;break;case 5:if("gpssensor"!==s.step.id){t.next=10;break}return t.next=8,s.getNextGPSStep();case 8:t.next=19;break;case 10:if("waiting"!==s.step.id){t.next=15;break}return t.next=13,s.getMarkerStep(e);case 13:t.next=19;break;case 15:s.next.enabled=!0,"image-over-flow"!==s.step.type&&"binocular"!==s.step.type&&(s.next.suggest=!0,s.hint.show=!1,s.hint.suggest=!1),s.inventory.show=!1,s.footer.tabSelected="next";case 19:case"end":return t.stop()}}),t)})))()},trackStepPass:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(!e.step.canPass&&!1!==e.step.canPass||!0===e.step.canPass)&&(e.next.canPass=!0);case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(e,t,s){var a=this;return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.hideHint(),e.next=3,a.saveOfflineAnswer(!1,s,!1);case 3:!1!==a.step.displayRightAnswer||a.step.options.wrongAnswerMessage&&""!==a.step.options.wrongAnswerMessage||a.nextStep();case 4:case"end":return e.stop()}}),e)})))()},trackMessage:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.next.suggest=!0);case 1:case"end":return s.stop()}}),s)})))()},getMarkerStep:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.offline.active){s.next=4;break}return s.next=3,Rs.getMarkerNextStep(t.questId,e,t.player);case 3:o=s.sent;case 4:if(!o||!o.data){s.next=8;break}o.data.next?a=o.data.next:yt(t.$t("label.NothingOccurs"),"info"),s.next=12;break;case 8:return s.next=10,t.getNextOfflineStep(t.questId,e,t.player);case 10:n=s.sent,n&&(a=n.id);case 12:if(!a){s.next=26;break}if("end"!==a){s.next=25;break}if(!t.$store.state.user.isAdmin){s.next=18;break}return s.abrupt("return",t.$router.push("/admin/validate/"+t.questId));case 18:if(t.$store.state.user._id!==t.info.quest.authorUserId){s.next=22;break}return s.abrupt("return",t.$router.push("/quest/builder/"+t.questId));case 22:return s.abrupt("return",t.$router.push("/quest/"+t.questId+"/end"));case 23:s.next=26;break;case 25:t.moveToStep(a);case 26:case"end":return s.stop()}}),s)})))()},getNextGPSStep:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Rs.getNextStep(e.questId,e.player);case 3:a=t.sent;case 4:if(!a||!a.data){t.next=8;break}a.data.next?s=a.data.next:yt(e.$t("label.NothingOccurs"),"info"),t.next=12;break;case 8:return t.next=10,e.getNextOfflineStep(e.questId,null,e.player);case 10:o=t.sent,o&&(s=o.id);case 12:if(!s){t.next=26;break}if("end"!==s){t.next=25;break}if(!e.$store.state.user.isAdmin){t.next=18;break}return t.abrupt("return",e.$router.push("/admin/validate/"+e.questId));case 18:if(e.$store.state.user._id!==e.info.quest.authorUserId){t.next=22;break}return t.abrupt("return",e.$router.push("/quest/builder/"+e.questId));case 22:return t.abrupt("return",e.$router.push("/quest/"+e.questId+"/end"));case 23:t.next=26;break;case 25:e.moveToStep(s);case 26:case"end":return t.stop()}}),t)})))()},hideHint:function(){this.step.hint={}},getBackgroundImage:function(){var e;return this.info.quest.picture&&(this.info.quest.picture[this.lang]?e=this.info.quest.picture[this.lang]:this.info.quest.picture[this.info.quest.mainLanguage]&&(e=this.info.quest.picture[this.info.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:""},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.uploadUrl+"/upload/quest/"+this.info.quest.customization.logo},getMapCharacterMarkerImage:function(){return this.info.quest.customization&&this.info.quest.customization.characterOnMap&&-1!==this.info.quest.customization.characterOnMap.indexOf("blob:")?this.info.quest.customization.characterOnMap:this.serverUrl+"/upload/quest/"+this.info.quest.customization.characterOnMap},getAudioSound:function(){var e=this.info.quest.mainLanguage,t=this.lang,s=this.info.quest.customization&&this.info.quest.customization.audio&&this.info.quest.customization.audio[this.lang]&&""!==this.info.quest.customization.audio[this.lang],a=this.info.quest.customization&&this.info.quest.customization.audio&&this.info.quest.customization.audio[e]&&""!==this.info.quest.customization.audio[e];s||a?(!s&&a&&e!==this.lang&&(t=e),-1!==this.info.quest.customization.audio[t].indexOf("blob:")?this.info.audio=this.info.quest.customization.audio[t]:this.info.audio=this.uploadUrl+"/upload/quest/"+this.info.quest.customization.audio[t]):this.info.audio=null},nextStep:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.step&&t.step.id){s.next=2;break}return s.abrupt("return",!1);case 2:if(t.$store.state.history.index++,!(t.$store.state.history.items&&t.$store.state.history.index<t.$store.state.history.items.length)){s.next=7;break}return s.next=6,t.moveToStep(t.$store.state.history.items[t.$store.state.history.index]);case 6:return s.abrupt("return");case 7:if(t.loadStepData=!1,!t.next.enabled){s.next=13;break}return s.next=11,t.moveToNextStep("success");case 11:s.next=20;break;case 13:if(!t.next.canPass){s.next=20;break}if(!e){s.next=19;break}return s.next=17,t.passStep();case 17:s.next=20;break;case 19:t.$q.dialog({dark:!0,message:t.$t("label.ConfirmPass"),ok:t.$t("label.Ok"),cancel:t.$t("label.Cancel")}).onOk(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.passStep();case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){}));case 20:case"end":return s.stop()}}),s)})))()},passStep:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=3;break}return t.next=3,Rs.passStep(e.runId,e.step.id,e.player);case 3:return t.next=5,e.passOfflineStep(e.step.id);case 5:return t.next=7,e.moveToNextStep("pass");case 7:case"end":return t.stop()}}),t)})))()},moveToNextStep:function(e){var t=this;return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveOfflineRun(t.questId,t.run,!1);case 2:t.next.enabled=!1,t.next.suggest=!1,t.next.canPass=!1,"locate-item-ar"!==t.step.type&&"image-over-flow"!==t.step.type||t.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),t.moveToStep();case 7:case"end":return e.stop()}}),e)})))()},previousStep:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=!0,e.$store.state.history.index--,e.$store.state.history.index<0?(e.$store.state.history.index=0,s=!1):e.$store.state.history.items&&e.$store.state.history.index>e.$store.state.history.items.length&&(e.$store.state.history.index=e.$store.state.history.items.length),!s){t.next=6;break}return t.next=6,e.moveToStep(e.$store.state.history.items[e.$store.state.history.index]);case 6:case"end":return t.stop()}}),t)})))()},askForHint:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(e.hint.suggest=!1,!e.hint.isOpened){t.next=7;break}e.closeAllPanels(),t.next=23;break;case 7:if(!e.$store.state.user.bonus||!e.$store.state.user.bonus.name||"infinitehint"!==e.$store.state.user.bonus.name){t.next=12;break}return t.next=10,e.getHint();case 10:t.next=23;break;case 12:if(!e.info.quest.customization||!e.info.quest.customization.doNotPreventUserForHint){t.next=17;break}return t.next=15,e.getHint();case 15:t.next=23;break;case 17:if(!e.hint.isFirst){t.next=21;break}e.$q.dialog({dark:!0,message:e.$t("label.ConfirmHint"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHint();case 2:e.hint.isFirst=!1;case 3:case"end":return t.stop()}}),t)})))),t.next=23;break;case 21:return t.next=23,e.getHint();case 23:case"end":return t.stop()}}),t)})))()},getHint:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Rs.getHint(e.runId,e.step.stepId,e.run.version);case 3:s=t.sent;case 4:s&&s.hint?e.hint.label=s.hint:e.hint.label=e.step.hint[e.hint.number],e.step.hint&&e.hint.number<e.step.hint.length-1?e.hint.number++:e.hint.number=0,e.hint.used=!0,e.closeAllPanels(),e.hint.isOpened=!0,e.footer.tabSelected="hint",e.hint.remainingNumber>0&&e.hint.remainingNumber--;case 11:case"end":return t.stop()}}),t)})))()},closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},hideFooterButtons:function(){this.footer.show=!1},showFooterButtons:function(){this.footer.show=!0},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.warnings.inventoryMissing=!1,e.offline.active){t.next=5;break}return t.next=4,Rs.listWonObjects(e.questId,e.runId);case 4:s=t.sent;case 5:if(!s||!s.data){t.next=10;break}for(e.inventory.items.length=0,a=0;a<s.data.length;a++)e.inventory.items.push({picture:s.data[a].pictures&&s.data[a].pictures[e.lang]?s.data[a].pictures[e.lang]:s.data[a].picture,title:s.data[a].title}),s.data[a].titles&&(e.inventory.items[a].titles=s.data[a].titles);t.next=14;break;case 10:return t.next=12,e.listWonObjects();case 12:o=t.sent,o?e.inventory.items=o:e.warnings.inventoryMissing=!0;case 14:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.inventory.items||0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.footer.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},openInfo:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.info.quest.customization||!e.info.quest.customization.hideMenu){t.next=2;break}return t.abrupt("return",!1);case 2:e.info.isOpened?(e.closeAllPanels(),e.footer.show=!0):(e.closeAllPanels(),e.info.isOpened=!0,e.footer.show=!1);case 3:case"end":return t.stop()}}),t)})))()},backToMap:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$router.push("/home"));case 1:case"end":return t.stop()}}),t)})))()},restartGame:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){s.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.endRun(e.runId,null,e.questId,e.questVersion,e.info.quest.mainLanguage);case 2:return t.next=4,lt.removeDirectory(e.questId);case 4:return t.next=6,e.removeQuestFromOfflineList(e.questId);case 6:e.$router.push("/quest/play/"+e.questId);case 7:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return n()(r.a.mark((function t(){var s,a,o,n,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,lt.readFile("","quests.json");case 6:for(o=t.sent,a=JSON.parse(o),n=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(n=i);return-1!==n&&a.list.splice(n,1),t.next=13,lt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()},showStepBlockedMessage:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.startDate.enabled=!0,t.startDate.date=e,lt.setTimeout(t.computeRemainingTime,1e3);case 3:case"end":return s.stop()}}),s)})))()},computeRemainingTime:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=new Date,a=new Date(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2)-1,e.startDate.date.substr(8,2),0,0,0),o=(a-s.getTime())/1e3,!(o<0)){t.next=7;break}return t.next=6,e.initData();case 6:return t.abrupt("return");case 7:e.startDate.remainingDays=Math.floor(o/86400),e.startDate.remainingHours=Math.floor((o-86400*e.startDate.remainingDays)/3600),e.startDate.remainingMinutes=Math.floor((o-86400*e.startDate.remainingDays-3600*e.startDate.remainingHours)/60),e.startDate.remainingSeconds=Math.floor(o%60),lt.setTimeout(e.computeRemainingTime,1e3);case 12:case"end":return t.stop()}}),t)})))()},zoomOrUse:function(e){"use-item"===this.step.type?this.useItem(e):this.zoomItem(e)},useItem:function(e){"use-item"===this.step.type&&(this.selectedItem=e,this.closeAllPanels())},selectItem:function(e){-1===this.inventory.selectedItems.indexOf(e.picture)?this.inventory.selectedItems.push(e.picture):this.inventory.selectedItems.splice(this.inventory.selectedItems.indexOf(e.picture),1)},zoomItem:function(e){this.inventory.detail.zoom=1,this.inventory.detail.isOpened=!0,this.inventory.detail.url=-1!==e.picture.indexOf("statics/")||-1!==e.picture.indexOf("blob:")?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.lang]&&""!==e.titles[this.lang]?this.inventory.detail.title=e.titles[this.lang]:this.inventory.detail.title=e.title},combineItems:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getStep(null,{type:"combine",items:e.inventory.selectedItems});case 2:if(s=t.sent,!s){t.next=12;break}if("end"!==s){t.next=8;break}return t.abrupt("return",e.$router.push("/quest/"+e.questId+"/end"));case 8:e.inventory.isOpened=!1,e.moveToStep(s);case 10:t.next=13;break;case 12:yt(e.$t("label.NothingOccurs"),"info");case 13:case"end":return t.stop()}}),t)})))()},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},inventoryZoom:function(e){l["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.sendFeedback(e.feedback.message,{questId:e.questId,stepId:e.step.stepId});case 2:s=t.sent,s?(yt(e.$t("label.YourMessageHasBeenSent"),"info"),e.feedback.isOpened=!1):yt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return!!(this.step&&this.step.hint&&""!==this.step.hint&&this.step.hint.length>0)},alertOnHint:function(){this.hint.suggest=!0},alertOnNext:function(){this.next.suggest=!0},checkIfRunIsAlreadyLoaded:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(window.cordova){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,lt.checkIfFileExists(t.questId,"run_"+e+".json");case 4:if(a=s.sent,!a){s.next=9;break}return s.abrupt("return",!0);case 9:return s.abrupt("return",!1);case 10:case"end":return s.stop()}}),s)})))()},loadOfflineRun:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.isMultiplayer){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,lt.readFile(t.questId,"run_"+e+".json");case 4:if(a=s.sent,a){s.next=9;break}return s.abrupt("return",!1);case 9:return s.abrupt("return",JSON.parse(a));case 10:case"end":return s.stop()}}),s)})))()},updateOfflineRun:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.isMultiplayer){s.next=2;break}return s.abrupt("return",!1);case 2:return t.run&&t.run.questId||(t.run={_id:t.runId,userId:t.$store.state.user._id,questId:e,version:t.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:t.remotePlay,dataSharedWithPartner:t.dataSharedWithPartner,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:t.info.quest.picture,thumb:t.info.quest.thumb||"default-quest-thumb.png",title:t.info.quest.title,type:t.info.quest.type,zipcode:t.info.quest.location.zipcode,town:t.info.quest.location.town,country:t.info.quest.location.country},language:t.lang,userData:{name:t.$store.state.user.name,picture:t.$store.state.user.picture,location:t.$store.state.user.location},history:[],historyIndex:0}),s.next=5,t.saveOfflineRun(e,t.run,!1);case 5:case"end":return s.stop()}}),s)})))()},saveOfflineAnswer:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n,i,l,c,u,d,p,m;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.isMultiplayer){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,a.checkIfStepIsAlreadyPlayedInRun(a.step.stepId,a.player);case 4:if(n=r.sent,i=a.run.conditionsDone,l=!1,c=0,e?(i=a.updateConditions(i,a.step.stepId,!0,a.step.type,!0,a.player,t),l=!0,c=a.hint.used||a.nbTry>1?a.step.points/2:a.step.points,u="success"):(l=!0,u="fail",i=a.updateConditions(i,a.step.stepId,!1,a.step.type,!0,a.player,t)),t={stepId:a.step.stepId,stepNumber:a.step.number,nbTry:1,ended:l,score:c,reward:0,status:u,useHint:!1,date:new Date,online:!1},"new-item"===a.step.type&&(a.run.inventory?a.run.inventory.push(a.step.answers):a.run.inventory=[a.step.answers],-1===i.indexOf("objectWon_"+a.step.stepId)&&i.push("objectWon_"+a.step.stepId)),!n){if(d=!1,a.run.answers&&a.run.answers.length>1)for(p=0;p<a.run.answers.length;p++)a.run.answers[p]&&a.run.answers[p].stepId&&null!==a.run.answers[p].stepId&&a.run.answers[p].stepId===a.step.stepId&&(d=!0,t.nbTry=a.run.answers[p].nbTry+1,t.useHint=a.run.answers[p].useHint,a.run.answers[p]=t);d||(a.run.answers||(a.run.answers=[]),a.run.answers.push(t))}return a.run.conditionsDone=i,r.next=15,a.saveOfflineRun(a.questId,a.run,s);case 15:if(m=r.sent,!m){r.next=18;break}return r.abrupt("return",!0);case 18:return r.abrupt("return",!1);case 19:case"end":return r.stop()}}),o)})))()},passOfflineStep:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.isMultiplayer){s.next=2;break}return s.abrupt("return",!1);case 2:return t.run.conditionsDone=t.updateConditions(t.run.conditionsDone,e,!1,t.step.type,!0,t.player),s.next=5,t.saveOfflineRun(t.questId,t.run,!0);case 5:case"end":return s.stop()}}),s)})))()},offlineCheckAccess:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.isMultiplayer){s.next=2;break}return s.abrupt("return",!1);case 2:if(!(e&&e.startDate&&e.startDate.enabled&&e.startDate.date)){s.next=7;break}if(a=new Date,o=Date.UTC(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2),e.startDate.date.substr(8,2),0,0,0),!(a<o)){s.next=7;break}return s.abrupt("return",{message:"Step not yet available",date:e.startDate.date});case 7:return s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)})))()},saveOfflineRun:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.isMultiplayer){r.next=2;break}return r.abrupt("return",!1);case 2:return s&&(t.dateUpdated=new Date),r.next=5,lt.writeInFile(a.questId,"run_"+e+".json",JSON.stringify(t),!0);case 5:if(n=r.sent,!n){r.next=10;break}return r.abrupt("return",!0);case 10:return r.abrupt("return",!1);case 11:case"end":return r.stop()}}),o)})))()},getNextOfflineStep:function(e,t,s,a){var o=this;return n()(r.a.mark((function n(){var i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_,I,P,$,T,A,z,O,M,N,R,F;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=o.run.conditionsDone||[],s||(s="P1"),r.next=4,o.updateOfflineRun(e);case 4:if(!(o.run.history&&o.run.historyIndex<o.run.history.length)){r.next=9;break}return o.run.historyIndex++,r.next=8,o.saveOfflineRun(e,o.run,!0);case 8:return r.abrupt("return",{id:o.run.history[o.run.historyIndex-1],extra:a});case 9:if(!(o.info.quest.steps&&o.offline.steps.length<1)){r.next=19;break}l=0;case 11:if(!(l<o.info.quest.steps.length)){r.next=19;break}return r.next=14,lt.readFile(e,"step_"+o.info.quest.steps[l]+".json");case 14:c=r.sent,o.offline.steps.push(JSON.parse(c));case 16:l++,r.next=11;break;case 19:if(u=o.run.currentChapter,u){r.next=26;break}if(!(o.info.quest.chapters&&o.info.quest.chapters.length>0)){r.next=25;break}u=o.info.quest.chapters[0],r.next=26;break;case 25:return r.abrupt("return",!1);case 26:if(!t){r.next=66;break}return r.next=29,o.listSpecificTypeForAChapter(o.offline.steps,u,"locate-marker");case 29:if(d=r.sent,p=[],!(d&&d.length>0)){r.next=52;break}l=0;case 33:if(!(l<d.length)){r.next=52;break}if(!t||d[l].answers===t){r.next=36;break}return r.abrupt("continue",49);case 36:if(!o.run.conditionsDone||-1!==o.run.conditionsDone.indexOf("stepDone"+s+"_"+d[l].stepId)){r.next=49;break}if(!(d[l].conditions&&d[l].conditions.length>0)){r.next=48;break}m=0;case 39:if(!(m<d[l].conditions.length)){r.next=45;break}if(-1!==o.run.conditionsDone.indexOf(d[l].conditions[m])){r.next=42;break}return r.abrupt("continue",49);case 42:m++,r.next=39;break;case 45:p.push({id:d[l].stepId,nbConditions:d[l].conditions.length}),r.next=49;break;case 48:p.push({id:d[l].stepId,nbConditions:0});case 49:l++,r.next=33;break;case 52:if(0!==p.length){r.next=54;break}return r.abrupt("return",{id:"",extra:a});case 54:for(h=0,l=0;l<p.length;l++)p[l].nbConditions>=h&&(f=p[l].id,h=p[l].nbConditions);if("simple"!==o.info.quest.editorMode){r.next=61;break}return r.next=59,o.saveOfflineAnswer("success",!1,!0);case 59:r.next=65;break;case 61:i.push("stepDone_"+f.toString()),i.push("stepDone"+o.player+"_"+f.toString()),o.run.conditionDone=i,o.run.currentStep=f;case 65:t=!1;case 66:return r.next=68,o.listForAChapter(o.offline.steps,u,s);case 68:for(g=r.sent,b=!1,v=!1,w=0,y=0;y<i.length;y++)-1!==i[y].indexOf("counterIncrement_")&&w++;if(!(g&&g.length>0)){r.next=183;break}q=0,l=0;case 76:if(!(l<g.length)){r.next=183;break}if(q=0,!i||-1!==i.indexOf("stepDone"+s+"_"+g[l].stepId)){r.next=180;break}if(!(g[l].conditions&&g[l].conditions.length>0)){r.next=115;break}m=0;case 81:if(!(m<g[l].conditions.length)){r.next=115;break}if(-1!==g[l].conditions[m].indexOf("countergreater_")||-1!==g[l].conditions[m].indexOf("counterlower_")||-1!==g[l].conditions[m].indexOf("haveobject_")||-1!==g[l].conditions[m].indexOf("nothaveobject_")||-1!==g[l].conditions[m].indexOf("combineobject_")){r.next=87;break}if(-1!==i.indexOf(g[l].conditions[m])){r.next=85;break}return r.abrupt("continue",180);case 85:r.next=112;break;case 87:if(-1===g[l].conditions[m].indexOf("countergreater_")){r.next=91;break}if(k=parseInt(g[l].conditions[m].replace("countergreater_",""),10),!(w<=k)){r.next=91;break}return r.abrupt("continue",180);case 91:if(-1===g[l].conditions[m].indexOf("counterlower_")){r.next=95;break}if(x=parseInt(g[l].conditions[m].replace("counterlower_",""),10),!(w>=x)){r.next=95;break}return r.abrupt("continue",180);case 95:if(-1===g[l].conditions[m].indexOf("haveobject_")){r.next=99;break}if(C=g[l].conditions[m].replace("haveobject_",""),-1!==i.indexOf("objectWon_"+C)){r.next=99;break}return r.abrupt("continue",180);case 99:if(-1===g[l].conditions[m].indexOf("nothaveobject_")){r.next=103;break}if(S=g[l].conditions[m].replace("nothaveobject_",""),-1===i.indexOf("objectWon_"+S)){r.next=103;break}return r.abrupt("continue",180);case 103:if(-1===g[l].conditions[m].indexOf("combineobject_")){r.next=112;break}if(!a||"combine"!==a.type){r.next=111;break}if(_=g[l].conditions[m].replace("combineobject_",""),-1!==a.items.indexOf(_)){r.next=108;break}return r.abrupt("continue",180);case 108:q++,r.next=112;break;case 111:return r.abrupt("continue",180);case 112:m++,r.next=81;break;case 115:if("geolocation"!==g[l].type){r.next=123;break}if(!o.info.quest||"advanced"!==o.info.quest.editorMode){r.next=123;break}return v=!0,a||(a={}),a.geosteps||(a.geosteps=[]),a.geosteps.push(g[l].stepId),g[l].options&&g[l].options.locations&&g[l].options.locations.length>0&&(a.locations||(a.locations=[],a.visibles=[]),a.locations.push({lat:g[l].options.locations[0].lat,lng:g[l].options.locations[0].lng,distance:g[l].options.distance}),g[l].options&&g[l].options.mode&&"map"===g[l].options.mode&&a.visibles.push({marker:g[l].options.locator?g[l].options.locator:"",coords:{lat:g[l].options.locations[0].lat,lng:g[l].options.locations[0].lng,distance:g[l].options.distance}})),r.abrupt("continue",180);case 123:if("locate-marker"!==g[l].type){r.next=130;break}if(!o.info.quest||"advanced"!==o.info.quest.editorMode){r.next=130;break}return b=!0,a||(a={}),a.steps||(a.steps=[]),a.steps.push(g[l].stepId),r.abrupt("continue",180);case 130:if("increment-counter"!==g[l].type){r.next=146;break}return i.push("counterIncrement_"+g[l].stepId.toString()),i.push("stepDone_"+g[l].stepId.toString()),i.push("stepDone"+s+"_"+g[l].stepId.toString()),o.run.conditionDone=i,w++,r.next=138,o.findStepForCounterValueOffline(o.offline.steps,e,o.run.version,w);case 138:if(I=r.sent,I){r.next=145;break}return r.next=142,o.getNextOfflineStep(e,t,s,a);case 142:P=r.sent,I=P.id,a=P.extra;case 145:return r.abrupt("return",{id:I,extra:a});case 146:if("end-chapter"!==g[l].type||a&&"combine"===a.type){r.next=172;break}if(g[l].options&&g[l].options.resetHistory&&o.removeHistory(),$=void 0,!g[l].options||!g[l].options.resetChapterProgression){r.next=153;break}o.removeAllConditionsOfAChapter(o.offline.steps,i,g[l].chapterId),r.next=163;break;case 153:if(g[l].options&&g[l].options.resetChapterProgressionAndMoveNext&&o.removeAllConditionsOfAChapter(o.offline.steps,i,g[l].chapterId),!g[l].options||!g[l].options.chapterId||""==g[l].options.chapterId){r.next=160;break}return r.next=157,o.moveToChapter(g[l].options.chapterId);case 157:$=r.sent,r.next=163;break;case 160:return r.next=162,o.moveToNextChapter();case 162:$=r.sent;case 163:if("end"===$){r.next=169;break}return g[l].options&&g[l].options.resetChapterProgression||(i.push("stepDone_"+g[l].stepId.toString()),i.push("stepDone"+o.player+"_"+g[l].stepId.toString()),o.run.conditionDone=i),r.next=167,o.getNextOfflineStep(e,t,s,a);case 167:T=r.sent,$=T.id;case 169:return r.abrupt("return",{id:$,extra:a});case 172:if(!a||"combine"!==a.type){r.next=178;break}if(!(q>1)){r.next=176;break}return A=g[l].stepId,r.abrupt("return",{id:A,extra:a});case 176:r.next=180;break;case 178:return z=g[l].stepId,r.abrupt("return",{id:z,extra:a});case 180:l++,r.next=76;break;case 183:if(!o.info.quest||"simple"!==o.info.quest.editorMode||b||a&&"combine"===a.type){r.next=193;break}return r.next=186,o.moveToNextChapter();case 186:if(O=r.sent,"end"===O){r.next=192;break}return r.next=190,o.getNextOfflineStep(e,t,s,a);case 190:M=r.sent,O=M.id;case 192:return r.abrupt("return",{id:O,extra:a});case 193:if(!b||v||!o.info.quest||"advanced"!==o.info.quest.editorMode){r.next=195;break}return r.abrupt("return",{id:"locationMarker",extra:a});case 195:if(!v||!o.info.quest||"advanced"!==o.info.quest.editorMode){r.next=201;break}if(1!==a.geosteps.length){r.next=200;break}return r.abrupt("return",{id:a.geosteps[0],extra:""});case 200:return r.abrupt("return",{id:"geolocation",extra:a});case 201:if(!("advanced"===o.info.quest.editorMode&&g&&g.length>0)){r.next=206;break}for(N=[],R=0;R<g.length;R++)g[R].conditions.length>0&&-1!==g[R].conditions[0].indexOf("stepRandom_")&&i&&-1===i.indexOf("stepDone"+s+"_"+g[R].stepId)&&g[R].conditions.length>0&&(F=g[R].conditions[0].replace("stepRandom_",""),-1!==i.indexOf("stepDone"+s+"_"+F)&&N.push(g[R].stepId));if(!(N.length>0)){r.next=206;break}return r.abrupt("return",{id:N[Math.floor(Math.random()*N.length)],extra:a});case 206:return r.abrupt("return",{id:"",extra:a});case 207:case"end":return r.stop()}}),n)})))()},listSpecificTypeForAChapter:function(e,t,s){return n()(r.a.mark((function a(){var o,n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=[],e)for(n=0;n<e.length;n++)e[n].chapterId.toString()===t.toString()&&e[n].type.toString()===s.toString()&&o.push(e[n]);return a.abrupt("return",o);case 3:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,s){return n()(r.a.mark((function a(){var o,n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=[],e)for(n=0;n<e.length;n++)e[n].chapterId!==t||"All"!==e[n].player&&e[n].player!==s&&s||o.push(e[n]);return a.abrupt("return",o);case 3:case"end":return a.stop()}}),a)})))()},listWonObjects:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=[],!(e.run.conditionsDone&&e.run.conditionsDone.length>0)){t.next=29;break}a=0;case 3:if(!(a<e.run.conditionsDone.length)){t.next=29;break}if(-1===e.run.conditionsDone[a].indexOf("objectWon_")){t.next=26;break}return o=e.run.conditionsDone[a].replace("objectWon_",""),t.next=8,lt.readFile(e.questId,"step_"+o+".json");case 8:if(n=t.sent,!n){t.next=26;break}if(i=JSON.parse(n),!(i.options&&i.options.picture&&i.options.title)){t.next=26;break}if(-1!==i.options.picture.indexOf("statics")){t.next=24;break}if(!i.options.pictures||!i.options.pictures[e.lang]||""===i.options.pictures[e.lang]){t.next=19;break}return t.next=16,lt.readBinaryFile(e.questId,i.options.pictures[e.lang]);case 16:l=t.sent,t.next=22;break;case 19:return t.next=21,lt.readBinaryFile(e.questId,i.options.picture);case 21:l=t.sent;case 22:t.next=25;break;case 24:l=i.options.pictures&&i.options.pictures[e.lang]&&""!==i.options.pictures[e.lang]?i.options.pictures[e.lang]:i.options.picture;case 25:s.push({step:o,picture:l,originalPicture:i.options.picture,title:i.options.title,pictures:i.options.pictures,titles:i.options.titles});case 26:a++,t.next=3;break;case 29:return t.abrupt("return",s);case 30:case"end":return t.stop()}}),t)})))()},checkIfStepIsAlreadyPlayedInRun:function(e,t){var s=this;return n()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(s.run&&s.run.conditionsDone&&s.run.conditionsDone.length>0)){a.next=3;break}if(-1===s.run.conditionsDone.indexOf("stepDone"+t+"_"+e)){a.next=3;break}return a.abrupt("return",!0);case 3:return a.abrupt("return",!1);case 4:case"end":return a.stop()}}),a)})))()},findStepForCounterValueOffline:function(e,t,s,a){return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<e.length)){t.next=7;break}if(-1===e[s].conditions.indexOf("counter_"+a)){t.next=4;break}return t.abrupt("return",e[s].stepId);case 4:s++,t.next=1;break;case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},updateConditions:function(e,t,s,a,r,o,n){if(!t)return e;"undefined"===typeof e&&(e=[]),-1===e.indexOf("stepDone_"+t)&&r&&e.push("stepDone_"+t),-1===e.indexOf("stepDone"+o+"_"+t)&&r&&e.push("stepDone"+o+"_"+t);var i=["info-text","info-video","new-item","character","help","end-chapter"];return-1===i.indexOf(a)&&-1===e.indexOf("stepFail_"+t)&&-1===e.indexOf("stepSuccess_"+t)&&(s?(e.push("stepSuccess_"+t),e.push("stepSuccess"+o+"_"+t)):(e.push("stepFail_"+t),e.push("stepFail"+o+"_"+t))),"choose"==a&&-1===e.indexOf("stepAnswerNb_"+t+"_"+n)&&e.push("stepAnswerNb_"+t+"_"+(parseInt(n,10)+1)),e},removeStepFromConditions:function(e,t){if(!e)return e;for(var s=[],a=0;a<e.length;a++)-1!==e[a].indexOf("_"+t)&&s.push(a);for(a=s.length-1;a>=0;a--)e.splice(s[a],1);return e},removeConditionsUntilLastMarker:function(e,t,s){var a=this;return n()(r.a.mark((function s(){var o,n,i,l,c,u;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:o=[t],n=0;case 2:if(!(n<7)){s.next=18;break}return s.next=5,lt.readFile(a.questId,"step_"+t+".json");case 5:if(l=s.sent,l&&(i=JSON.parse(l)),"locate-marker"!==i.type){s.next=9;break}return s.abrupt("break",18);case 9:if(c=!1,i.conditions&&i.conditions.length>0)for(u=0;u<i.conditions.length;u++)-1!==i.conditions[u].indexOf("stepDone_")&&(t=i.conditions[u].replace("stepDone_",""),o.push(t),c=!0);if(c){s.next=13;break}return s.abrupt("return",{found:!1,updatedCondition:e});case 13:if(6!==n){s.next=15;break}return s.abrupt("return",{found:!1,updatedCondition:e});case 15:n++,s.next=2;break;case 18:for(u=0;u<o.length;u++)e=a.removeStepFromConditions(e,o[u]);return s.abrupt("return",{found:!0,updatedCondition:e});case 20:case"end":return s.stop()}}),s)})))()},removeAllConditionsOfAChapter:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.listForAChapter(e,s);case 2:if(n=r.sent,n&&n.length>0)for(i=0;i<n.length;i++)t=a.removeStepFromConditions(t,n[i].stepId);a.run.conditionsDone=t;case 5:case"end":return r.stop()}}),o)})))()},moveToNextChapter:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=0,e.info.quest.chapters&&e.info.quest.chapters.length>0)if(e.run.currentChapter&&0!==e.run.currentChapter)for(a=0;a<e.info.quest.chapters.length;a++)e.info.quest.chapters[a]===e.run.currentChapter&&(s=a<e.info.quest.chapters.length-1?e.info.quest.chapters[a+1]:"end");else s=e.info.quest.chapters[0];return e.run.currentChapter=s,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},moveToChapter:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.run.currentChapter=e,s.abrupt("return",e);case 2:case"end":return s.stop()}}),s)})))()},cutSound:function(){var e=document.getElementById("background-music");e&&(this.sound&&this.sound.status&&"play"===this.sound.status?(e.pause(),this.sound.status="pause"):(e.play(),this.sound.status="play",this.sound.tempMute=!1))},reduceVolume:function(){var e=document.getElementById("background-music");e&&(e.volume=.2)},resetVolume:function(){var e=document.getElementById("background-music");e&&(e.volume=1)},manageAudio:function(){var e=this.step.audioStream&&(this.step.audioStream[this.lang]&&""!==this.step.audioStream[this.lang]||this.step.audioStream[this.info.quest.mainLanguage]&&""!==this.step.audioStream[this.info.quest.mainLanguage]);this.resetVolume(),"info-video"===this.step.type||e?this.reduceVolume():this.sound.tempMute&&this.cutSound()},swithFullscreenMode:function(){AndroidFullScreen.immersiveMode()},startFullScreen:function(){this.info.quest.customization&&this.info.quest.customization.hideFullScreen||document.addEventListener("deviceready",this.swithFullscreenMode,!1)},reloadPageInAWhile:function(){var e=this;setTimeout((function(){e.moveToStep(e.navigatingToStepId)}),15e3)},initOfflineMode:function(){var e=this.info.quest.customization&&this.info.quest.customization.forceOnline,t=this.$store.state.user._id===this.info.quest.authorUserId,s=Array.isArray(this.info.quest.editorsUserId)&&this.info.quest.editorsUserId.includes(this.$store.state.user._id);this.offline.active=!(this.isMultiplayer||e||!this.isHybrid||t||s||this.$store.state.user.isAdmin)},computeGoodAnswers:function(){if(this.run.conditionsDone){for(var e=this.run.conditionsDone,t=0,s=0,a=0;a<e.length;a++)-1!==e[a].indexOf("stepSuccess_")?(t++,s++):-1!==e[a].indexOf("stepFail_")&&t++;this.score.nbQuestions=t,this.score.nbGoodAnwers=s}}},computed:{chatNotification:function(){return this.$store.state.chatNotification}},watch:{}},xr=kr,Cr=(s("fd41"),Object(Te["a"])(xr,aa,ra,!1,null,"13a148a6",null)),Sr=Cr.exports,_r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll text-white",class:e.quest&&e.quest.customization&&e.quest.customization.endColor?"":"background-dark",style:e.quest&&e.quest.customization&&e.quest.customization.endColor&&""!==e.quest.customization.endColor?"background-color: "+e.quest.customization.endColor:""},[e.warnings.noNetwork?s("div",[s("div",{staticClass:"bg-primary"},[s("div",{staticClass:"centered q-pa-lg"},[s("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),s("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),!e.warnings.noNetwork&&e.quest&&e.quest.customization&&e.quest.customization.removeScoring?s("div",{staticClass:"q-ma-md rounded background-lighter2"},[s("div",{staticClass:"q-pa-md",class:"font-"+e.quest.customization.font},[e.quest.customization&&e.quest.customization.endMessage&&e.quest.customization.endMessage[e.lang]&&(e.nbGoodAnwers!==e.nbQuestions||e.quest.customization.endMessageForPerfectScore&&e.quest.customization.endMessageForPerfectScore[e.lang]&&""===e.quest.customization.endMessageForPerfectScore[e.lang])?s("div",{staticClass:"text-h4",domProps:{innerHTML:e._s(e.quest.customization.endMessage[e.lang])}}):e._e(),e.quest.customization&&e.quest.customization.endMessage&&e.nbGoodAnwers===e.nbQuestions&&e.quest.customization.endMessageForPerfectScore&&e.quest.customization.endMessageForPerfectScore[e.lang]&&""!==e.quest.customization.endMessageForPerfectScore[e.lang]?s("div",{staticClass:"text-h4",domProps:{innerHTML:e._s(e.quest.customization.endMessageForPerfectScore[e.lang])}}):e._e(),!e.quest.customization||!e.quest.customization.endMessage||!e.quest.customization.endMessage[e.lang]||e.quest.customization.endMessage[e.lang]&&""===e.quest.customization.endMessage[e.lang]?s("div",{staticClass:"text-h4"},[e._v(e._s(e.$t("label.ThanksForPlaying")))]):e._e(),s("div",[e._v(e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions))])]),e.isUserAuthor?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.openValidation(e.questId,e.quest.version)}}})],1):e._e()]):e._e(),e.quest&&e.quest.customization&&e.quest.customization.endMessage&&e.quest.customization.endMessage[e.lang]&&""!==e.quest.customization.endMessage[e.lang]?s("div",{staticClass:"q-px-md text-grey align-right",staticStyle:{"font-size":"0.8em","margin-top":"-10px"}},[e._v("\n    "+e._s(e.endDate)+" "+e._s(e.ranking.total)+"\n  ")]):e._e(),e.isUserAuthor?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?s("div",[s("div",{staticClass:"relative-position header-point-box"},[s("div",{staticClass:"full-width centered header-point absolute"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}}),s("div",[e._v("+"+e._s(e.run.stars))])]),s("div",{staticStyle:{"padding-top":"100px"}},[s("div",{staticClass:"rounded background-lighter2 centered full-width",staticStyle:{"padding-top":"35px"}},[s("h2",{staticClass:"text-center title2 q-mt-xl q-mb-sm q-mx-xl text-uppercase"},[e._v(e._s(e.$t("label.YouWin")))]),s("div",{staticClass:"relative-position progress-box"},[s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),s("div",{staticClass:"value"},[e._v("\n                  "+e._s(Math.floor(100*e.level.progress))+"%\n                ")])]),s("div",{staticClass:"rank-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])]),e.run&&e.run.duration?s("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourTime"))+": "+e._s(e.run.duration.h)+"h "+e._s(e.run.duration.m)+"m\n            ")]):e._e(),e.run&&e.run.score&&e.run.score>0?s("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourScore"))+": "+e._s(e.run.score)+" "+e._s(e.$t("label.pts"))+"\n            ")]):e._e(),e.run&&e.ranking&&e.ranking.position&&"-"!==e.ranking.position?s("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.YourRanking"))+": "+e._s(e.ranking.position)+"\n            ")]):e._e(),e.run?s("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions)+"\n            ")]):e._e()])])]),e.unlockedQuest.show?s("div",{staticClass:"centered q-mt-md subtitle5"},[s("span",{staticClass:"text-primary"},[e._v(e._s(e.$t("label.YouWonNewGame")))]),s("div",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy",attrs:{color:"primary",label:e.$t("label.SolveThisQuest")},on:{click:function(t){return e.$router.push("/quest/play/"+e.unlockedQuest.id)}}})],1)]):e._e(),s("div",{staticClass:"centered q-mt-md subtitle5"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),s("div",{staticClass:"centered q-px-md"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.quest&&"discovery"!==e.quest.type&&e.run.score>0&&e.quest&&"public"===e.quest.access,expression:"quest && quest.type !== 'discovery' && run.score > 0 && quest && quest.access === 'public'"}]},[s("a",{staticClass:"small",on:{click:e.openChallengeBox}},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),s("span",{staticClass:"secondary-font-very-small"},[e._v(" "+e._s(e.$t("label.or"))+" ")])]),s("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])]),e.author?s("div",{staticClass:"centered q-mt-lg"},[s("div",{staticClass:"user-card user-card-small relative-position",staticStyle:{margin:"0px"}},[s("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.author.statistics&&e.author.statistics.nbQuestsCreated&&e.author.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.author.statistics&&e.author.statistics.nbQuestsSuccessful&&e.author.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.author.level+".svg"}})]):e._e()])]),s("div",{staticClass:"centered subtitle3"},[e._v("\n          "+e._s(e.author.name)+"\n        ")]),e.$store.state.user.id!==e.author._id?s("div",{staticClass:"centered q-pt-sm"},[e.author.status&&"friend"===e.author.status?e._e():s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.author.status&&"friend"===e.author.status?s("div",{staticClass:"centered"},[s("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n              "+e._s(e.$t("label.Followed"))+"\n            ")])],1):e._e()],1):e._e()]):e._e(),s("q-dialog",{attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[s("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1):e._e()]),e.isUserAuthor||e.warnings.noNetwork?e._e():s("div",{staticClass:"q-pa-md"},[s("div",[e.quest&&"discovery"!==e.quest.type&&e.showAddReview?s("div",{staticClass:"q-mx-md q-mt-xl q-pa-sm centered"},[s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),s("div",{staticClass:"q-py-sm"},[s("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"white",disable:e.reviewSent},on:{click:function(t){e.showReviewText=!0}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1)]):e._e(),s("q-dialog",{staticClass:"over-map",model:{value:e.showReviewText,callback:function(t){e.showReviewText=t},expression:"showReviewText"}},[s("div",{staticClass:"q-pa-md q-pt-lg centered bg-grey"},[s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),s("div",{staticClass:"q-py-sm"},[s("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"secondary",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),s("div",{staticClass:"subtitle6 q-pt-lg"},[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width q-my-sm",attrs:{placeholder:e.$t("label.Feedback"),rows:"4",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}}),s("div",{staticClass:"q-pa-md"},[s("a",{on:{click:function(t){e.showReviewText=!1}}},[e._v(e._s(e.$t("label.Cancel")))])])],1)]),e.showReward&&e.run&&e.run.questData?s("div",{staticClass:"q-pa-md q-mt-lg centered rounded background-lighter2"},[s("div",{staticClass:"subtitle4 q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),s("div",{staticClass:"q-pt-md"},[s("img",{staticClass:"badge-alone",attrs:{src:e.uploadUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),s("div",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e()],1)]),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}]},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),s("div",[e._v(e._s(e.$t("label.RankingEndIntro")))]),e._l(e.ranking.items,(function(t){return s("div",{key:t.id,staticClass:"q-py-md rank-box"},[s("div",[s("userCard",{attrs:{user:t,size:"medium"}})],1),s("div",{staticClass:"full-width"},["-"!==t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.location.postalCode?s("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?s("span",[e._v(", ")]):e._e(),t.location.country?s("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                "+e._s(t.stars)+"\n              ")]),s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                "+e._s(t.position)+"\n              ")])])])])}))],2),s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/home")}}})],1),e.isUserAdmin?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.version)}}})],1):e._e()]):e._e(),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md bg-graaly-blue-dark"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("div",{staticClass:"subtitle3 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?s("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?s("div",[s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),s("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?s("div",[s("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return s("q-item",{key:t.friendId},[s("q-item-section",[s("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-label",[e._v(e._s(t.name))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],staticClass:"normal-button glossy",attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(s){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),s("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?s("div",{staticClass:"panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg centered"},[e._v(e._s(e.$t("label.YouWonABonus")))]),s("div",{staticClass:"q-pa-md text-primary"},[s("q-card",{staticClass:"q-ma-sm"},[s("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),s("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")]),s("q-card-section",[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.closeBonus}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)],1)],1)]):e._e()])],1)},Ir=[],Pr={add:function(e,t,s,a,r){return je().put("review/add",{questId:e,version:t,runId:s,text:a,rating:r}).catch((function(e){return console.log(e.request)}))},list:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,je().get("review/list",{params:{filter:JSON.stringify(e),options:JSON.stringify(t)}});case 2:if(a=s.sent,200===a.status){s.next=5;break}throw new Error("Request "+a.config.url+" failed with code "+a.status+"/"+a.statusText+". Data returned: "+a.data);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()}},$r={components:{suggest:Tt,userCard:us},data:function(){return{title:"Enquête réussie",lang:"",rating:0,comment:"",ranking:{show:!1,items:[],position:"-",total:""},score:{},nbQuestions:0,nbGoodAnwers:0,level:{color:"white",upgraded:!1},run:{score:0,stars:1},endDate:"",quest:null,friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},unlockedQuest:{show:!1,id:0},author:null,questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,showReviewText:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},isHybrid:window.cordova,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.lang=e.$t("label.shortLang"),lt.clearAllRunningProcesses(),t.next=4,e.loadData();case 4:e.isHybrid&&"android"===cordova.platformId&&StatusBar.hide(),s=new Date,e.endDate=qr()(s).format("DD/MM/YYYY, k:mm"),lt.setTimeout(e.showNotationBox,7e3);case 8:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l,c,u,d;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noNetwork=!1,s=!1,e.$q.loading.show(),t.next=5,Rs.listForAQuest(e.questId);case 5:if(a=t.sent,!a){t.next=58;break}if(a&&a.data&&a.data.length>0)for(o=0;o<a.data.length;o++)"finished"===a.data[o].status&&(e.run=a.data[o]),"in-progress"===a.data[o].status&&(e.run=a.data[o],s=!0);if(!e.run||!e.run.version){t.next=14;break}return t.next=11,ct.getByIdOnline(e.questId,e.run.version);case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,ct.getLastById(e.questId);case 16:n=t.sent;case 17:if(n&&n.data&&(e.quest=n.data),!n||!n.data){t.next=25;break}return e.isUserAuthor=e.$store.state.user._id===e.quest.authorUserId,t.next=22,Pr.list({questId:e.questId,userId:e.$store.state.user._id,version:e.run.version},{limit:1});case 22:i=t.sent,l=i.data&&i.data.length>=1,e.showAddReview=!e.isUserAdmin&&!e.isUserAuthor&&!l;case 25:return e.score.old=e.$store.state.user.points,e.score.old||(e.score.old=0),e.initProgression(),t.next=30,e.getOfflineRunData();case 30:return c=t.sent,c&&(e.run=c),t.next=34,e.computeGoodAnswers();case 34:return t.next=36,Rs.endRun(e.run._id,c,e.questId,e.quest.version,e.quest.mainLanguage);case 36:if(u=t.sent,!u||!u.data){t.next=44;break}return e.quest.customization&&e.quest.customization.removeScoring||(e.run.score=u.data.score,e.run.reward=u.data.reward,e.run.stars=u.data.stars,u.data.newBonus&&""!==u.data.newBonus&&(e.run.bonus=u.data.newBonus,e.showBonus=!0),e.run.questData&&e.run.questData.rewardPicture&&""!==e.run.questData.rewardPicture&&(e.showReward=!0)),u.data.unlockedQuest&&(e.unlockedQuest.show=!0,e.unlockedQuest.id=u.data.unlockedQuest),t.next=42,e.removeOfflineData();case 42:t.next=45;break;case 44:e.warnings.noNetwork=!0;case 45:if(e.run._id){t.next=50;break}return t.next=48,Rs.listForAQuest(e.questId);case 48:a=t.sent,a&&a.data&&a.data.length>0&&(e.run=a.data[0]);case 50:return e.quest.customization&&e.quest.customization.removeScoring||(e.score.new=s?e.score.old+e.run.stars:e.score.old,e.$store.state.user.points=e.score.new,lt.setTimeout(e.updateProgression,3e3)),t.next=53,e.getRanking();case 53:d=lt.getDurationFromNow(e.run.dateCreated),e.run.duration={h:d.h,m:d.m},e.getAuthorProfile(),t.next=59;break;case 58:e.warnings.noNetwork=!0;case 59:e.$q.loading.hide();case 60:case"end":return t.stop()}}),t)})))()},initProgression:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.level=ks(e.score.old);case 1:case"end":return t.stop()}}),t)})))()},updateProgression:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge||e.showBonus?lt.setTimeout(e.updateProgression,2e3):(s=ks(e.score.new),s.level>e.level.level?(e.level.progress=1,e.$store.state.user.level=s.level,e.level=s,e.level.progress=.1,e.level.upgraded=!0):e.level=s);case 1:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===e.questId){t.next=5;break}return t.next=3,Rs.listPlayersForThisQuest(e.questId);case 3:s=t.sent,s&&s.data&&(s.data.position?e.ranking.position=s.data.position:e.ranking.position=s.data,s.data.total&&(e.ranking.total=s.data.total));case 5:case"end":return t.stop()}}),t)})))()},showRanking:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.ranking.show=!0,s=!1,a=0;a<e.ranking.items.length;a++)e.ranking.items[a].id===e.$store.state.user._id&&(s=!0);s||(e.ranking.items.push({id:e.$store.state.user._id,score:e.run.score,name:e.$store.state.user.name,picture:e.$store.state.user.picture,position:e.ranking.items.length+1,isFriend:!0,className:"selected"}),lt.setTimeout(e.updateRanking,3e3));case 4:case"end":return t.stop()}}),t)})))()},updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],s=this.ranking.items[e-1];this.$set(this.ranking.items,e,s),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),lt.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.$router.push("/user/updateprofile"),t.next=9;break;case 4:return e.showChallenge=!0,t.next=7,ut.listFriends(e.$store.state.user._id,0,100);case 7:s=t.sent,s&&s.data&&s.data.length>0&&(e.friends=s.data,e.filteredFriends=e.friends);case 9:case"end":return t.stop()}}),t)})))()},closeChallenge:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge=!1;case 1:case"end":return t.stop()}}),t)})))()},challenge:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ut.challengeFriend(e.friendId,t.run._id);case 2:for(a=0;a<t.filteredFriends.length;a++)t.filteredFriends[a].friendId===e.friendId&&(t.filteredFriends[a].isChallenged=!0,l["a"].set(t.filteredFriends,a,t.filteredFriends[a]));case 3:case"end":return s.stop()}}),s)})))()},challengeAll:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.challengeFriend("all",e.run._id);case 2:case"end":return t.stop()}}),t)})))()},closeBonus:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showBonus=!1;case 1:case"end":return t.stop()}}),t)})))()},closeReward:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showReward=!1;case 1:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.getFriend(e.quest.authorUserId);case 2:s=t.sent,s&&s.data&&"friend"!==s.data.status&&(e.author=s.data);case 4:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){return this.author.picture&&-1!==this.author.picture.indexOf("http")?this.author.picture:this.author.picture?this.uploadUrl+"/upload/profile/"+this.author.picture:"statics/images/icon/profile-small.png"},follow:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"===e.$store.state.user.name){t.next=5;break}return t.next=3,ut.addFriend(e.quest.authorUserId);case 3:s=t.sent,s?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?yt(e.$t("label.InvitationSent"),"success"):yt(e.$t("label.FriendsAdded"),"success"),l["a"].set(e.author,"status","friend")):yt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},openValidation:function(e,t){this.$router.push("/admin/validate/"+e+"/version/"+t)},showNotationBox:function(){this.showReviewText=!0},addReview:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.rating){t.next=3;break}return yt(e.$t("label.PleaseRateTheQuest"),"warning"),t.abrupt("return",!1);case 3:return e.$q.loading.show(),t.next=6,Pr.add(e.questId,e.run.version,e.run._id,e.comment,e.rating);case 6:e.$q.loading.hide(),e.reviewSent=!0,e.showReviewText=!1,yt(e.$t("label.ReviewSent"),"positive");case 10:case"end":return t.stop()}}),t)})))()},computeGoodAnswers:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s=e.run.conditionsDone,a=0,o=0,n=0;n<s.length;n++)-1!==s[n].indexOf("stepSuccess_")?(a++,o++):-1!==s[n].indexOf("stepFail_")&&a++;e.nbQuestions=a,e.nbGoodAnwers=o;case 6:case"end":return t.stop()}}),t)})))()},getOfflineRunData:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.readFile(e.questId,"run_"+e.questId+".json");case 2:if(s=t.sent,s){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",JSON.parse(s));case 8:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.removeDirectory(e.questId);case 2:return s=t.sent,t.next=5,e.removeQuestFromOfflineList(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return n()(r.a.mark((function t(){var s,a,o,n,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,lt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,lt.readFile("","quests.json");case 6:for(o=t.sent,a=JSON.parse(o),n=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(n=i);return-1!==n&&a.list.splice(n,1),t.next=13,lt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},Tr=$r,Ar=Object(Te["a"])(Tr,_r,Ir,!1,null,null,null),zr=Ar.exports,Or=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper background-map"},[s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",[this.$route.params.teamId&&"none"!==this.$route.params.teamId?e._e():s("q-input",{attrs:{outlined:"",label:e.$t("label.TeamID"),error:e.$v.form.teamId.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamId.$touch},model:{value:e.form.teamId,callback:function(t){e.$set(e.form,"teamId",t)},expression:"form.teamId"}}),-1===e.options.indexOf("individual")?s("q-input",{attrs:{outlined:"",label:e.$t("label.TeamName"),error:e.$v.form.teamName.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamName.$touch},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}}):e._e(),-1===e.options.indexOf("firstandlast")?s("q-input",{attrs:{outlined:"",label:e.$t("label.YourFullName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),-1!==e.options.indexOf("firstandlast")?s("q-input",{attrs:{outlined:"",label:e.$t("label.FirstAndLastName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e()],1),s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.Start"),loading:e.submitting}})],1),e.$route.query.redirect&&""!==e.$route.query.redirect?s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"large-btn",attrs:{flat:"",color:"primary",label:e.$t("label.Back")},on:{click:function(t){return e.redirect()}}})],1):e._e()]),s("div",{staticClass:"centered smaller version secondary-font"},[e._v("\n        Version "+e._s(e.version)+" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}})])])])])},Mr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",staticStyle:{width:"30%","max-width":"200px","margin-bottom":"0px","margin-top":"20px"},attrs:{src:"statics/images/logo/logo-home.png"}})])}],Nr={data:function(){return{questId:this.$route.params.id,lang:this.$route.params.lang,option:this.$route.params.option?this.$route.params.option:"none",options:[],form:{teamId:"",teamName:"",name:""},isHybrid:window.cordova,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",submitting:!1,version:"2.1.65"}},mounted:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.$store&&e.$store.state&&e.$store.state.user&&e.$store.state.user.name&&"-"===e.$store.state.user.name)){t.next=5;break}return t.next=3,Rs.checkIfAlreadyPlayingAGame(e.questId);case 3:s=t.sent,s&&s.data&&s.data.status&&e.$router.push("/quest/play/"+e.questId);case 5:e.options=e.option.split("-"),-1!==e.options.indexOf("individual")&&(e.form.teamName=lt.randomId()),e.$route.params.teamId&&"none"!==e.$route.params.teamId&&(e.form.teamId=e.$route.params.teamId),e.switchLanguage(e.lang);case 9:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.submitting=!0,-1===e.options.indexOf("checklastname")){t.next=8;break}if(s=e.form.name.split(" "),!(s.length<2)){t.next=8;break}return yt(e.$t("label.PleaseEnterFirstNameAndLastName"),"error"),e.submitting=!1,t.abrupt("return",!1);case 8:return t.next=10,Ee.playAnonymous(e.$t("label.shortLang"));case 10:if(a=t.sent,!a||!a.data||"ok"!==a.data.status){t.next=25;break}if(!a.data.user){t.next=21;break}return window.localStorage.setItem("jwt",a.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),t.next=17,Rs.initTeamPlay(e.questId,e.lang,e.form.teamId,e.form.teamName,e.form.name);case 17:o=t.sent,o&&o.data&&(o.data.message?(yt(e.$t("label."+o.data.message),"error"),e.submitting=!1):e.$router.push("/quest/play/"+e.questId+"/version/"+o.data.version+"/step/0/"+e.lang+"?remoteplay=false")),t.next=23;break;case 21:yt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 23:t.next=27;break;case 25:yt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 27:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e},redirect:function(){this.$router.push(this.$route.query.redirect)}},validations:{form:{teamId:{required:Xt["required"]},teamName:{required:Xt["required"]},name:{required:Xt["required"]}}}},Rr=Nr,Fr=Object(Te["a"])(Rr,Or,Mr,!1,null,null,null),Dr=Fr.exports,Lr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},jr=[],Er={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},Qr=Er,Ur=Object(Te["a"])(Qr,Lr,jr,!1,null,null,null),Br=Ur.exports,Yr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{staticClass:"reduce-window-size-desktop",attrs:{id:"teaser"}},[e.userType?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderChooseUserType"))+"\n      ")]),s("div",{staticClass:"q-pa-md cursor-pointer",attrs:{"test-id":"btn-create-public-quest"},on:{click:function(t){return e.changeUserType("pro")}}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AProfessional")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AProfessionalDesc1"))+"\n          ")])],1)],1),s("div",{staticClass:"q-pa-md cursor-pointer",on:{click:function(t){return e.changeUserType("individual")}}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AnIndividual")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AnIndividualDesc1"))+"\n          ")])],1)],1),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.Education")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.EducationDesc"))+"\n          ")])],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.Cancel")))])],1)]),"pro"!==e.userType||e.access?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderProIntro"))+"\n      ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("private")}}},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),s("q-card-section",{staticClass:"subtitle5"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.PrivateProQuestDesc1"))}})]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("public")}}},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PublicQuest")))]),s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),s("q-card-section",{staticClass:"subtitle5"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc1"))}})]),e.readMorePublicProQuest?s("q-card-section",[s("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc2"))}})]):e._e(),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"individual"!==e.userType||e.access?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderIntro"))+"\n      ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white"},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),e.privateQuest.buyable?s("div",{staticClass:"subtitle4"},[e._v(e._s(e.privateQuest.price))]):e._e()]),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateQuestDesc1"))+"\n          ")]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[e.privateQuest.buyable?s("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.BuyPrivateQuest")))]):e._e(),e.privateQuest.buyable?e._e():s("q-btn",{attrs:{flat:"",disabled:""}},[e._v(e._s(e.$t("label.OnlyBuyableOnMobile")))])],1)],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"public"===e.access&&"room"===e.questType?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.AddYourRoom")))]),s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderAddRoomMessage"))}}),s("div",{staticClass:"q-px-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.Add")))])]),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"public"===e.access&&"quest"===e.questType?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPublicQuest")))]),s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),s("div",{staticClass:"q-px-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"private"===e.access?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPrivateQuest")))]),"individual"===e.userType?s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}):e._e(),"pro"===e.userType?s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateProWelcomeMessage"))}}):e._e(),s("div",{staticClass:"q-px-md centered"},["individual"===e.userType?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyPrivateQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptAndBuyAPrivateQuest"))+" ("+e._s(e.privateQuest.price)+")")])]):e._e(),"pro"===e.userType?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]):e._e(),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.cancel()}}})],1)])])},Hr=[],Gr={data:function(){return{userType:null,access:null,questType:"quest",readMorePublicProQuest:!1,privateQuest:{price:"-",buyable:!1,computed:!1}}},mounted:function(){return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},changeUserType:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.userType=e,t.moveToTop(),"individual"!==e){s.next=5;break}return s.next=5,t.initPay();case 5:case"end":return s.stop()}}),s)})))()},changeAccess:function(e){this.access=e,this.moveToTop()},changeQuestType:function(e){this.questType=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order("privatequestprice");case 1:case"end":return e.stop()}}),e)})))()},createNewQuest:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={title:{}},t.next=3,ct.create(s,e.access,e.userType,e.questType);case 3:a=t.sent,a&&a.data&&a.data.questId?e.$router.push("/quest/builder/"+a.data.questId):yt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:if(!e.privateQuest.computed){t.next=4;break}return t.abrupt("return");case 4:e.privateQuest.computed=!0,store.products.byId["privatequestprice"]?(s=store.get("privatequestprice"),e.displayPrice(s)):store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){yt(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(e.displayPrice),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var t=n()(r.a.mark((function t(s){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(s);case 2:a=t.sent,a?s.finish():yt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 11:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.privateQuest.price=e.price,e.canPurchase&&(this.privateQuest.buyable=!0)},savePurchase:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.purchasePrivateQuest(null,e);case 2:if(a=s.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){s.next=7;break}return s.next=6,t.createNewQuest();case 6:return s.abrupt("return",!0);case 7:return s.abrupt("return",!1);case 8:case"end":return s.stop()}}),s)})))()},cancel:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/profile/me");case 1:case"end":return t.stop()}}),t)})))()},backToUserType:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userType=null,e.access=null;case 2:case"end":return t.stop()}}),t)})))()}}},Wr=Gr,Vr=Object(Te["a"])(Wr,Yr,Hr,!1,null,null,null),Jr=Vr.exports,Kr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll row",class:{"bg-white":!e.chapters.showNewStepOverview}},[s("div",{staticClass:"col bg-white",class:{"desktop-only":e.chapters.showNewStepOverview},staticStyle:{"min-width":"260px"}},[s("div",{staticClass:"settings-bar background-dark",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn q-pa-sm",attrs:{to:{path:"/profile/me"}}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e.readOnly&&"rejected"===e.quest.status?s("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.YourQuestHasNotBeenPublished"))+"\n      ")]):e._e(),!e.readOnly&&!this.isAdmin||"published"!==e.quest.status&&"unpublished"!==e.quest.status&&"rejected"!==e.quest.status?e._e():s("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n      ")]),s("div",{staticClass:"q-pa-md full-width"},[e.tabs.progress>0?s("span",[e.form.fields.title[e.languages.current]?s("span",[e.form.fields.title[e.languages.current].length<=30?s("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?s("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():s("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?s("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?s("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):s("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),s("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",class:{"desktop-only":e.chapters.showNewStepOverview},model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[s("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:"quest"===e.quest.type?e.$t("label.Intro")+" ("+e.languages.current+")":e.$t("label.YourRoom"),default:""}}),"quest"===e.quest.type?s("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}):e._e(),s("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier?s("q-tab",{attrs:{name:"payments",icon:e.getTabIcon(5),label:e.$t("label.Payments")},on:{click:e.listPayments}}):e._e(),e.isEdition?s("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(6),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?s("q-tab",{attrs:{name:"results",icon:e.getTabIcon(7),label:e.$t("label.Results")}}):e._e()],1),s("q-separator"),"settings"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[this.quest.languages&&0!==this.quest.languages.length?e._e():s("div",[s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"add_circle"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),e._l(e.form.languages,(function(t){return s("div",{key:t.code},[s("q-btn",{staticClass:"glossy full-width q-mt-sm",attrs:{disabled:e.readOnly,color:"primary"},on:{click:function(s){return e.selectLanguage(t.value)}}},[e._v(e._s(t.label))])],1)}))],2)],1),s("div",{staticClass:"centered q-mt-md"},[s("strong",[e._v(e._s(e.$t("label.Or")))])]),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"content_copy"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.UseAModel")))]),e._l(e.samples.list,(function(t){return s("q-card",{key:t.questId,staticClass:" q-mt-md my-card"},[s("q-card-section",{staticClass:"bg-secondary text-white"},[s("div",{staticClass:"text-h6"},[e._v(e._s(t.name))])]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:""},on:{click:function(s){return e.selectSample(t.questId)}}},[e._v(e._s(e.$t("label.Select")))])],1)],1)}))],2)],1)],1),this.quest.languages.length>0?s("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?s("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")]):e._e(),"public"===this.quest.access?s("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")]):e._e(),this.quest.isPremium?s("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")]):e._e(),s("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}})],1),"quest"===e.quest.type?s("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.QuestType"))+"\n          "),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),s("div",{staticClass:"q-gutter-md"},[s("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),s("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode&&this.quest.isPremium?s("div",[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PlayersNumber"),options:e.form.players,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestMultiplayer")}}})]},proxy:!0}],null,!1,3064096794),model:{value:e.form.fields.playersNumber,callback:function(t){e.$set(e.form.fields,"playersNumber",t)},expression:"form.fields.playersNumber"}})],1):e._e()],1):e._e(),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}})],1),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShowCountDown")},model:{value:e.form.fields.countDownTime.enabled,callback:function(t){e.$set(e.form.fields.countDownTime,"enabled",t)},expression:"form.fields.countDownTime.enabled"}}),s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.StopGameAfterCountDown")},model:{value:e.form.fields.countDownTime.stopGame,callback:function(t){e.$set(e.form.fields.countDownTime,"stopGame",t)},expression:"form.fields.countDownTime.stopGame"}})],1),s("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.StartingPointOfTheQuest"))+"\n          "),e.isIOs?e._e():s("div",[s("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():s("div",{staticClass:"location-address"},[s("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?s("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest"),value:e.form.fields.startingPlace},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}}):e._e()],1),s("a",{on:{click:function(t){return e.getCurrentLocation()}}},[s("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?s("div",[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),s("table",[s("tr",[s("td",[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}})],1),s("td",[s("q-btn",{staticClass:"q-ma-md",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])],1)])])],1):e._e()]),"room"===this.quest.type?s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ReadMoreLink")},model:{value:e.form.fields.readMoreLink,callback:function(t){e.$set(e.form.fields,"readMoreLink",t)},expression:"form.fields.readMoreLink"}})],1):e._e(),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GameAvailability"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.LimitNumberOfPlayerInOneHour")},model:{value:e.form.fields.limitNumberOfPlayer,callback:function(t){e.$set(e.form.fields,"limitNumberOfPlayer",t)},expression:"form.fields.limitNumberOfPlayer"}})],1),e.form.fields.scheduling&&0===e.form.fields.scheduling.length?s("q-btn",{staticClass:"full-width",on:{click:e.startSchedule}},[e._v(e._s(e.$t("label.ScheduleGame")))]):e._e(),e.form.fields.scheduling&&e.form.fields.scheduling.length>0?s("div",[s("div",{staticClass:"centered"},[s("strong",[e._v(e._s(e.$t("label.GameSchedule")))])]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.form.fields.scheduling,(function(t,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),s("div",{staticClass:"col"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.From"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[0],callback:function(s){e.$set(t,0,s)},expression:"schedule[0]"}})],1),s("div",{staticClass:"col"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.To"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[1],callback:function(s){e.$set(t,1,s)},expression:"schedule[1]"}})],1)])})),s("q-btn",{staticClass:"full-width",attrs:{flat:""},on:{click:e.resetSchedule}},[e._v(e._s(e.$t("label.Reset")))])],2):e._e(),e.form.fields.customization?s("div",["quest"===e.quest.type?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.UserCanReplayGame"),options:e.form.userReplays,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.customization.userReplay,callback:function(t){e.$set(e.form.fields.customization,"userReplay",t)},expression:"form.fields.customization.userReplay"}}):e._e()],1):e._e()],1)]),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GamePayment"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnMobile")},model:{value:e.showPaymentBox,callback:function(t){e.showPaymentBox=t},expression:"showPaymentBox"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnMobileHelp")}}}),e.showPaymentBox?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}):e._e(),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnYourSide")},model:{value:e.showTierPaymentBox,callback:function(t){e.showTierPaymentBox=t},expression:"showTierPaymentBox"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnYourSideHelp")}}})],1),e.showTierPaymentBox?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.tierPriceForPlayer,callback:function(t){e.$set(e.form.fields,"tierPriceForPlayer",t)},expression:"form.fields.tierPriceForPlayer"}})],1):e._e(),e.form.fields.customization?s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HidePaiement")},model:{value:e.form.fields.customization.hidePaymentBox,callback:function(t){e.$set(e.form.fields.customization,"hidePaymentBox",t)},expression:"form.fields.customization.hidePaymentBox"}})],1):e._e()],1)]):e._e(),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.UserData"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ForcePlayerToHaveAccount")},model:{value:e.form.fields.forcePlayerToHaveAccount,callback:function(t){e.$set(e.form.fields,"forcePlayerToHaveAccount",t)},expression:"form.fields.forcePlayerToHaveAccount"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ForcePlayerToHaveAccountHelp")}}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShareUserDataWithCreator")},model:{value:e.form.fields.shareUserDataWithCreator,callback:function(t){e.$set(e.form.fields,"shareUserDataWithCreator",t)},expression:"form.fields.shareUserDataWithCreator"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ShareUserDataWithCreatorHelp")}}})],1)])]):e._e(),s("q-separator"),s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameIntroduction"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"description"},[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),"quest"===e.quest.type?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}):e._e(),e.form.fields.customization?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.CustomizeYourName")},model:{value:e.form.fields.customization.authorName,callback:function(t){e.$set(e.form.fields.customization,"authorName",t)},expression:"form.fields.customization.authorName"}})],1):e._e(),null!==e.form.fields.picture?s("div",[s("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.picture[e.languages.current]}})]):e._e(),e.isIOs?e._e():s("div",[e.readOnly?e._e():s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["picturefile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),s("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?s("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),s("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),null!==e.form.fields.thumb?s("div",[s("p",[e._v(e._s(e.$t("label.SmallPicture"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.thumb[e.languages.current]}})]):e._e(),e.isIOs?e._e():s("div",[e.readOnly?e._e():s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["thumbfile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),s("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadThumb}})],1),e.isIOs?s("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),s("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadThumb}})]):e._e(),!e.form.fields.snapshots||e.form.fields.snapshots.length<3?s("div",[e.isIOs?e._e():s("div",[e.readOnly?e._e():s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["snapshot"].click()}}},[e._v(e._s(e.$t("label.AddAGameSnapshot")))]),s("input",{ref:"snapshot",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadSnapshot}})],1),e.isIOs?s("div",[e._v("\n                  "+e._s(e.$t("label.AddAGameSnapshot"))+":\n                  "),s("input",{ref:"snapshot",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadSnapshot}})]):e._e()]):e._e(),e.form.fields.snapshots&&e.form.fields.snapshots.length>0?s("div",[s("div",[e._v(e._s(e.$t("label.Snapshots"))+":")]),s("div",{staticClass:"row"},[e.form.fields.snapshots.length>0?s("div",{staticClass:"col-4 centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[0]}}),s("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(0)}}})],1):e._e(),e.form.fields.snapshots.length>1?s("div",{staticClass:"col-4 centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[1]}}),s("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(1)}}})],1):e._e(),e.form.fields.snapshots.length>2?s("div",{staticClass:"col-4 centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[2]}}),s("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(2)}}})],1):e._e()])]):e._e(),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.MyGameIsIndoorRemoveWarningsOnStart")},model:{value:e.form.fields.customization.removeWarning,callback:function(t){e.$set(e.form.fields.customization,"removeWarning",t)},expression:"form.fields.customization.removeWarning"}})],1)],1)]),s("q-separator"),s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameInterface"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[this.quest.isPremium&&e.form.fields.customization&&e.form.fields.customization.audio&&e.form.fields.customization.audio[e.languages.current]&&""!==e.form.fields.customization.audio[e.languages.current]?s("div",[s("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.form.fields.customization.audio[e.languages.current]))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!this.quest.isPremium||e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["audiofile"].click()}}},[e._v(e._s(e.$t("label.AddAnAudioFile")))])],1),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3",hidden:""},on:{change:e.uploadAudio}})],1),this.quest.isPremium&&e.isIOs&&!e.readOnly?s("div",[e._v("\n                "+e._s(e.$t("label.AddAnAudioFile"))+":\n                "),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]):e._e(),e.form.fields.customization?s("div",["quest"===e.quest.type?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.FontFamily"),options:e.form.fonts,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.itemProps,r=t.itemEvents,o=t.opt;return[s("q-item",e._g(e._b({},"q-item",a,!1),r),[s("q-item-section",[s("q-item-label",{class:"font-"+o.value,domProps:{innerHTML:e._s(o.label)}})],1)],1)]}}],null,!1,597358429),model:{value:e.form.fields.customization.font,callback:function(t){e.$set(e.form.fields.customization,"font",t)},expression:"form.fields.customization.font"}}):e._e()],1):e._e(),e.form.fields.customization?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TextColor"),placeholder:"#000000"},model:{value:e.form.fields.customization.fontColor,callback:function(t){e.$set(e.form.fields.customization,"fontColor",t)},expression:"form.fields.customization.fontColor"}})],1):e._e(),e.form.fields.customization?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),this.quest.isPremium&&"quest"===this.quest.type?s("div",[e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?s("div",[s("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),s("img",{staticClass:"limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.logo}}),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeLogo}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["logofile"].click()}}},[e._v(e._s(e.$t("label.AddALogo")))]),s("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),s("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?s("div",[e._v("\n                  "+e._s(e.$t("label.AddALogo"))+":\n                  "),s("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e()]):e._e(),e.form.fields.customization&&e.form.fields.customization.character&&""!==e.form.fields.customization.character?s("div",[s("p",[e._v(e._s(e.$t("label.YourCharacter"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"max-width":"400px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.character}}),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeCharacter}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacter")))]),s("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacter}})],1),e.isIOs&&!e.readOnly?s("div",[e._v("\n                "+e._s(e.$t("label.AddACustomCharacter"))+":\n                "),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacter}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.characterOnMap&&""!==e.form.fields.customization.characterOnMap?s("div",[s("p",[e._v(e._s(e.$t("label.YourCharacterOnMap"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"max-width":"200px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.characterOnMap}}),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeCharacterOnMap}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterOnMapfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacterOnMap")))]),s("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacterOnMap")}}})],1),s("input",{ref:"characterOnMapfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterOnMap}})],1),e.isIOs&&!e.readOnly?s("div",[e._v("\n                "+e._s(e.$t("label.AddACustomCharacterOnMap"))+":\n                "),s("input",{ref:"characterOnMapfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterOnMap}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacterOnMap")}}})],1):e._e(),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideInventory")},model:{value:e.form.fields.customization.hideInventory,callback:function(t){e.$set(e.form.fields.customization,"hideInventory",t)},expression:"form.fields.customization.hideInventory"}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.DoNotPreventUserForHint")},model:{value:e.form.fields.customization.doNotPreventUserForHint,callback:function(t){e.$set(e.form.fields.customization,"doNotPreventUserForHint",t)},expression:"form.fields.customization.doNotPreventUserForHint"}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideFullScreen")},model:{value:e.form.fields.customization.hideFullScreen,callback:function(t){e.$set(e.form.fields.customization,"hideFullScreen",t)},expression:"form.fields.customization.hideFullScreen"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.QRCodeMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.qrCodeMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.qrCodeMessage,e.languages.current,t)},expression:"form.fields.customization.qrCodeMessage[languages.current]"}}),s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.GeolocationMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.geolocationMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.geolocationMessage,e.languages.current,t)},expression:"form.fields.customization.geolocationMessage[languages.current]"}})],1):e._e()])]),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeEndOfGame"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture&&!e.form.fields.customization.removeScoring?s("div",[s("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"background-color":"#f00"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),s("div",[e._v(e._s(e.$t("label.RewardPictureWarning")))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeReward}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!e.isIOs||e.readOnly||e.form.fields.customization.removeScoring?e._e():s("div",{staticClass:"q-mt-md"},[e._v("\n                "+e._s(e.$t("label.AddAReward"))+":\n                "),s("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),e.isIOs||e.readOnly||e.form.fields.customization.removeScoring?e._e():s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["rewardfile"].click()}}},[e._v(e._s(e.$t("label.AddAReward")))]),s("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),s("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.RemoveScoringAndRating")},model:{value:e.form.fields.customization.removeScoring,callback:function(t){e.$set(e.form.fields.customization,"removeScoring",t)},expression:"form.fields.customization.removeScoring"}})],1),e.form.fields.customization.removeScoring?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessage")+" "+e.currentLanguageForLabels,type:"textarea"},model:{value:e.form.fields.customization.endMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.endMessage,e.languages.current,t)},expression:"form.fields.customization.endMessage[languages.current]"}}),s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessageForPerfectScore")+" "+e.currentLanguageForLabels,type:"textarea"},model:{value:e.form.fields.customization.endMessageForPerfectScore[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.endMessageForPerfectScore,e.languages.current,t)},expression:"form.fields.customization.endMessageForPerfectScore[languages.current]"}})],1):e._e()])]):e._e()],1),s("div",[e._v("\n          "+e._s(e.$t("label.Version"))+": "+e._s(e.quest.version)+"\n        ")]),s("div",{staticClass:"centered"},[e.readOnly?e._e():s("q-btn",{staticClass:"glossy large-button q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),"published"!==e.quest.status?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{attrs:{flat:"",color:"negative",size:"md",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]):e._e(),"steps"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial scroll-on-desktop-80",class:{"desktop-only":e.chapters.showNewStepOverview}},[e.warnings.stepsMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.quest.size.limit<e.quest.size.current?s("div",{staticClass:"text-primary q-pa-md"},[e._v("\n        "+e._s(e.$t("label.OverQuotaMessage"))+"\n        "),s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.$t("label.RemoveFiles")))])],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?s("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?s("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),s("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return s("li",{key:t._id,staticClass:"list-group-item step-hover"},[e.readOnly?e._e():s("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),s("div",{staticStyle:{"line-height":"3rem",padding:"4px"}},[s("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),s("span",{staticStyle:{"margin-top":"4px"},on:{click:function(s){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():s("q-btn",{staticClass:"float-right",on:{click:function(s){return e.removeStep(t.stepId)}}},[s("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():s("q-btn",{staticClass:"float-right",on:{click:function(s){return e.modifyStep(t)}}},[s("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():s("p",{staticClass:"centered q-mt-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}},[e._v(e._s(e.$t("label.AddAStep")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?s("div",{staticClass:"smaller"},[s("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),s("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e(),"advanced"===e.form.fields.editorMode?s("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():s("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),s("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t){return s("li",{key:t._id,staticClass:"step-list list-group-item align-top"},[e.readOnly?e._e():s("q-icon",{staticClass:"handle",staticStyle:{"font-size":"1.3rem"},attrs:{name:"reorder"}}),s("div",[s("p",{staticClass:"bigger",staticStyle:{"margin-bottom":"8px"}},[e._v("\n                "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n                "),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md size-1",attrs:{name:"add_box"},nativeOn:{click:function(s){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(s){return e.removeChapter(t.chapterId)}}}),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(s){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?s("q-icon",{staticClass:"float-right q-mt-sm a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(s){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():s("div",[e._v("\n                "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n              ")]),e._l(t.steps,(function(a){return s("div",{key:a._id,staticClass:"step-hover",staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[s("div",{staticClass:"step-text"},[s("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===a.level},attrs:{color:"grey",name:e.getIconFromStepType(a.type)}}),e.readOnly||a.error?e._e():s("span",{on:{click:function(t){return e.playStep(a)}}},["All"!==a.player?s("q-badge",{attrs:{color:"primary",align:"top"}},[e._v(e._s(a.player))]):e._e(),e._v(" "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))],1),!e.readOnly&&a.error?s("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(a.error)}}},[s("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                    "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage])+"\n                  ")],1):e._e(),e.readOnly?s("span",[e._v(e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))]):e._e()],1),s("div",{staticClass:"step-button"},[e.readOnly?e._e():s("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(a)}}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return e.insertStep(t.chapterId,a.stepId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.duplicateStep(a.stepId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"content_copy"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.Duplicate")))])],1)],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(a.stepId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"delete"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():s("p",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.addChapter()}}},[e._v(e._s(e.$t("label.AddASChapter")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?s("div",{staticClass:"smaller"},[s("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),s("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e()]):e._e(),"publish"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["old"===e.quest.status?s("div",[s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n        ")]),"room"!==e.quest.type?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e()],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?s("div",["tovalidate"===e.quest.status?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestUnderValidation"))+"\n        ")]):e._e(),"rejected"===e.quest.status?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestPublicationRejected"))+"\n        ")]):e._e(),e.chapters.items.length>100?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n        ")]):e._e(),"quest"===e.quest.type?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),"room"===e.quest.type?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.SeeYourQuestPage")))])],1):e._e(),"private"===e.quest.access?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"people"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Invitees"))+" "),e.quest.limitations&&e.quest.limitations.nbInvitees?s("span",[e._v("("+e._s(e.invitee.items.length)+"/"+e._s(e.quest.limitations.nbInvitees)+")")]):e._e()]),e.quest.version<2?s("q-item-label",[e._v(e._s(e.$t("label.WarningInvitees")))]):e._e(),e._l(e.invitee.items,(function(t){return s("p",{key:t.id},[s("q-toggle",{attrs:{label:t.name},on:{input:function(s){return e.removeInvitee(t.id)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item.checked"}})],1)})),e.warnings.inviteeMissing?s("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),s("q-input",{attrs:{type:"text",label:e.$t("label.InvitePeople"),"bottom-slots":"",error:!e.invitee.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addInvitee()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteInviteesHelp"))+"\n              ")]},proxy:!0}],null,!1,3016168484),model:{value:e.invitee.new.email,callback:function(t){e.$set(e.invitee.new,"email",t)},expression:"invitee.new.email"}})],2)],1):e._e(),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label."+("quest"===e.quest.type?"public"===e.quest.access?"LanguagesPublished":"LanguagesPublishedForPrivate":"PageLanguagesPublished"))))]),e._l(e.form.fields.languages,(function(t){return s("p",{key:t.lang},[s("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(s){return e.publish(t.lang)}},model:{value:t.published,callback:function(s){e.$set(t,"published",s)},expression:"lang.published"}})],1)})),"public"===e.quest.access&&"quest"===e.quest.type?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?s("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return s("p",{key:t.id},[s("q-toggle",{attrs:{label:t.name},on:{input:function(s){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?s("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),s("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.EditorIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteEditorsHelp"))+"\n              ")]},proxy:!0}],null,!1,658616356),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),"quest"===e.quest.type?s("div",{staticClass:"q-pt-md"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest"))}}),s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"_qrcode.png"}})]):e._e(),"room"===e.quest.type?s("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.SaveQuestResultsMarker",{url1:e.uploadUrl+"/upload/quest/"+e.questId+"_score1_qrcode.png",url2:e.uploadUrl+"/upload/quest/"+e.questId+"_score2_qrcode.png",url3:e.uploadUrl+"/upload/quest/"+e.questId+"_score3_qrcode.png"}))}}):e._e()],1)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_download"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Downloads")))]),"quest"===e.quest.type?s("div",[e.isHybrid?e._e():s("div",[s("q-btn",{attrs:{color:"primary",flat:"",type:"a",href:"statics/markers/all.pdf",download:""}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1),e.isHybrid?s("div",[s("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadMarkers()}}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1):e._e(),e.isHybrid?e._e():s("div",[s("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadTexts()}}},[e._v(e._s(e.$t("label.ExportTexts")))])],1)]):e._e()],1)],1),"room"!==e.quest.type?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e(),"published"!==e.quest.status?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"negative"},on:{click:function(t){return e.removeQuest()}}},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),e._v("\n            "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n          ")],1)],1):e._e(),"published"===e.quest.status?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),s("q-item-section",[e._v("\n            "+e._s(e.$t("label.YouNeedToUnpublishYourQuestToRemoveIt"))+"\n          ")])],1):e._e()],1):e._e()]):e._e(),"payments"===e.tabs.selected&&e.isEdition?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.payments,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{rounded:""}},[s("img",{attrs:{src:e.uploadUrl+"/upload/tiers/"+t.qrCode+".png"}})])],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.qrCode.replace("tierplay_","")))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("status."+t.status))+" - "+e._s(e._f("formatDate")(t.dateUpdate,e.$store.state.user.language)))])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn-dropdown",{attrs:{icon:"cloud_upload",split:"",dense:""},on:{click:function(s){return e.downloadQRCode(t.qrCode)}}},[s("q-list",["new"===t.status?s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return e.removeCode(t._id)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"delete"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1):e._e(),"new"===t.status?s("q-item",[s("q-item-section",{attrs:{avatar:""}},[e._v("\n                    URL :\n                  ")]),s("q-item-section",[s("q-item-label",[s("input",{domProps:{value:"https://app.graaly.com/webapp/#/quest/play/"+e.questId+"/"+t.qrCode}})])],1)],1):e._e()],1)],1)],1)],1)})),1),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.createNewPaymentQRCode}},[s("span",[e._v(e._s(e.$t("label.CreateNewQRCodeForPlay")))])]),s("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(10)}}},[s("span",[e._v(e._s(e.$t("label.Create10NewQRCodeForPlay")))])]),s("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(50)}}},[s("span",[e._v(e._s(e.$t("label.Create50NewQRCodeForPlay")))])]),s("q-btn",{staticClass:"glossy large-button",attrs:{flat:"",color:"primary"},on:{click:e.printQRCode}},[s("span",[e._v(e._s(e.$t("label.PrintQRCodePages")))])])],1)],1):e._e(),"reviews"===e.tabs.selected&&e.isEdition?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))])],1):e._e()],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sellings?s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalSellings")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(parseInt(85*e.statistics.statistics.sellings)/100)+" €")])])],1):e._e(),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalNumberOfPlayers")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished)),e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>0?s("span",{staticClass:"smaller",class:{"text-red":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays<=e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished,"text-grey":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished}},[e._v("/"+e._s(e.quest.limitations.nbPlays))]):e._e()]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers)+" ")])])],1),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageScore")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageScore)))]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MaxScore"))+e._s(e.$t("label.colons"))+e._s(e.quest.availablePoints.score)+" ")])])],1),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageDuration")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageDuration)))])])],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?s("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersByAge")}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return s("q-item",{key:t._id},[t&&!t._id?s("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?s("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?s("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersBySex")}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return s("q-item",{key:t._id},[s("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),e.reviews.length>0?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1)],1):e._e(),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),s("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("img",{attrs:{src:e.getAvatar(t.userId.picture)}})])],1),s("q-item-section",[s("q-item-label",[e._v("\n                    "+e._s(t.userId.name)+"\n                  ")]),s("q-item-label",{attrs:{caption:""}},[s("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(s){e.$set(t,"rating",s)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                  ")],1),s("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?s("q-item",[s("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1)],1):e._e(),"results"===e.tabs.selected&&e.isEdition&&"private"===e.quest.access?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["published"===e.quest.status?s("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?s("div",[s("q-list",e._l(e.ranking.items,(function(t,a){return s("q-item",{key:a},[s("q-item-section",{attrs:{top:"",avatar:""}},[s("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?s("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?s("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.userData.name))]),"finished"===t.status?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?s("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n        ")]):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),s("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?s("div",[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?s("div",[e._v("\n          "+e._s(e.$t("label.FinalRankingIntro"))+"\n          "),s("q-list",e._l(e.ranking.items,(function(t,a){return s("q-item",{key:a},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[e._v("\n                  "+e._s(a+1)+"\n                ")])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.userData.name))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),s("q-item-section",{attrs:{side:"",top:"",avatar:""}},[s("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?s("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?s("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?s("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n        ")]):e._e()]):e._e()]):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white hint panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,a){return s("q-list",{key:t.id},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[s("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(a)}}},[s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),s("q-item-section",[e._v(e._s(t.size)+" Ko")]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"delete"},on:{click:function(s){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?s("div",[e._v("\n          "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n        ")]):e._e(),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),s("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),s("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[s("div",{staticClass:"q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),s("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),s("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():s("div",{staticClass:"centered"},[s("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-mb-sm glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.form.fields.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1),s("div",{staticClass:"col-auto"},[e.chapters.showNewStepPageSettings||e.chapters.showNewStepOverview||e.chapters.showNewStepPage?e._e():s("div",{staticClass:"desktop-only background-dark arial full-page-div full-height"},[s("div",{staticClass:"q-pa-xl",domProps:{innerHTML:e._s(e.$t("label.CreationStudioHelp"))}})]),e.chapters.showNewStepPage?s("div",{staticClass:"bg-white arial full-page-div"},[s("div",{staticClass:"scroll"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),s("div",[s("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),s("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return s("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",{staticClass:"centered q-pa-sm"},[s("div",[e._v(e._s(e.$t("stepType."+t.description)))]),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(s){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),s("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),s("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return s("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",{staticClass:"centered q-pa-sm"},[s("div",[e._v(e._s(e.$t("stepType."+t.description)))]),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(s){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]):e._e(),e.chapters.showNewStepPageSettings?s("div",{staticClass:"bg-white arial full-page-div scroll-on-desktop-100"},[s("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1):e._e(),e.chapters.showNewStepOverview?s("div",{staticClass:"fullscreen-mobile",staticStyle:{background:"none","background-color":"transparent"}},[s("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",customization:e.quest.customization?e.quest.customization:{color:"primary"},inventory:e.inventory,itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current,quest:e.quest,offline:!1},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.closeOverview()}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu step-menu-fixed"},[s("div",{staticClass:"row white-buttons",class:{"bg-primary":!e.quest.customization||!e.quest.customization.color||""===e.quest.customization.color},style:e.quest.customization&&e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:""},[s("div",{staticClass:"col centered"},[e.quest.customization.logo&&""!==e.quest.customization.logo?s("q-btn",{staticStyle:{"padding-top":"0 !important"},attrs:{flat:"",size:"lg"}},[s("q-avatar",{attrs:{size:"60px"}},[s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),s("div",{staticClass:"col centered q-py-sm"},[e.quest.customization&&e.quest.customization.hideInventory?e._e():s("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),s("div",{staticClass:"col centered q-py-sm"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])]),e.chapters.newStep.overviewData&&e.chapters.newStep.overviewData.options&&(e.chapters.newStep.overviewData.options.displayTime||e.chapters.newStep.overviewData.options.displayGoodAnswers)?s("div",{staticClass:"subtitle-5",staticStyle:{position:"absolute",left:"0",bottom:"70px","background-color":"#000",color:"#fff"}},[e.chapters.newStep.overviewData.options.displayTime?s("span",[e._v(e._s(e.currentDate)+" ")]):e._e(),e.chapters.newStep.overviewData.options.displayGoodAnswers?s("span",[e._v(" "+e._s(e.$t("label.Score"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions))]):e._e()]):e._e()],1):e._e(),s("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[s("div",{staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[s("div",{staticClass:"q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n          ")],1):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"===e.chapters.newStep.overviewData.type?s("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"!==e.chapters.newStep.overviewData.type?s("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryZoom")))]):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return s("div",{key:a,staticClass:"inventory-item",on:{click:function(s){return e.selectItem(t)}}},[s("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?s("p",[e._v(e._s(t.titles[e.languages.current]))]):e._e(),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?e._e():s("p",[e._v(e._s(t.title))])])})),0)])])]),s("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[s("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?s("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),s("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[s("div",[e._v(e._s(e.$t("label.Close")))])]),s("div",[s("q-btn-group",{attrs:{outline:""}},[s("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),s("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),s("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),s("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),s("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[s("div",{staticClass:"hint panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?s("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?s("p",[e._v(e._s(e.hint.label[e.hint.number]))]):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-mb-xl glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)])])],1)])},Zr=[],Xr=s("53fe"),eo=s.n(Xr),to=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white arial step-setting"},[s("div",{staticClass:"q-pa-md background-dark"},[s("a",{staticClass:"float-right no-underline clickable",attrs:{color:"grey"},on:{click:e.close}},[s("q-icon",{staticClass:"subtitle4",attrs:{name:"close"}})],1),null!==e.selectedStep.type?s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e()]),s("div",{staticClass:"q-pa-md q-pt-md q-mt-lg bottom-margin-for-keypad"},[s("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code?s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"","test-id":"step-text"},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n        "+e._s(e.$t("label.AddABackgroundImage")+" "+e.currentLanguageForLabels)+"\n      ")]),e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?s("div",[s("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?s("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]}}):e._e(),s("br"),s("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.type.code?s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),s("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?s("div",[e._v("\n        "+e._s(e.$t("label.UploadAVideo"))+":\n        "),s("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),s("div",[s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.videoStream||!e.selectedStep.form.videoStream[e.lang]||""===e.selectedStep.form.videoStream[e.lang],expression:"!selectedStep.form.videoStream || !selectedStep.form.videoStream[lang] || selectedStep.form.videoStream[lang] === ''"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),e.selectedStep.form.videoStream&&e.selectedStep.form.videoStream[e.lang]&&""!==e.selectedStep.form.videoStream[e.lang]?s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[s("source",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream[e.lang],type:"video/mp4"}})]):e._e()]),s("div",[s("q-toggle",{attrs:{label:e.$t("label.RotateVideo")},model:{value:e.selectedStep.form.options.rotateVideo,callback:function(t){e.$set(e.selectedStep.form.options,"rotateVideo",t)},expression:"selectedStep.form.options.rotateVideo"}})],1)]):e._e(),"new-item"==e.options.type.code?s("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():s("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,a){return s("div",{key:a,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(a)}}},[s("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[a].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():s("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.UploadTheItemPicture")+" "+e.currentLanguageForLabels)+":\n          "),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),s("a",{staticClass:"dark",on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),s("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?s("div",[s("div",[e._v(e._s(e.$t("label.SplitMessageWithPipe")))]),s("h2",[e._v(e._s(e.$t("label.Character")))]),e.quest.customization.character&&""!==e.quest.customization.character?s("div",[s("q-radio",{attrs:{val:"usequestcharacter"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.character}})])],1):e._e(),e._l(6,(function(t){return s("div",{key:t,staticClass:"answer"},[s("q-radio",{attrs:{val:t.toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{attrs:{src:"statics/icons/story/character"+t+"_attitude1.png"}})])],1)})),s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{label:e.$t("label.OtherCharacters")}},e._l(34,(function(t){return s("div",{key:t,staticClass:"answer"},[s("q-radio",{attrs:{val:(t+6).toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{attrs:{src:"statics/icons/story/character"+(t+6)+"_attitude1.png"}})])],1)})),0)],1),s("div",[s("div",{staticClass:"q-mb-sm"},[e._v("\n          "+e._s(e.$t("label.OrDownloadAFile"))+"\n          "),e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?s("div",[e._v("\n            "+e._s(e.$t("label.UploadACharacter"))+":\n            "),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.character.$error,expression:"$v.selectedStep.form.options.character.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.character&&e.selectedStep.form.options.character.length>2&&"usequestcharacter"!==e.selectedStep.form.options.character?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/character/"+e.selectedStep.form.options.character}})]):e._e()])])],2):e._e(),"geolocation"===e.options.type.code?s("div",{staticClass:"location-gps"},[s("h2",[e._v(e._s(e.$t("label.DefaultMode")))]),s("div",{staticClass:"fields-group"},[s("q-list",[s("q-item",[s("q-item-section",[s("q-radio",{attrs:{val:"compass",label:e.$t("label.CompassMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),s("q-item-section",[s("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("CompassMode")}}})],1)],1),s("q-item",[s("q-item-section",[s("q-radio",{attrs:{val:"map",label:e.$t("label.MapMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),s("q-item-section",[s("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("MapMode")}}})],1)],1)],1)],1),s("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),e._l(e.selectedStep.form.options.locations,(function(t,a){return s("div",{key:a,staticClass:"fields-group"},[s("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lat,expression:"location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"ex. 45,49812",step:"any"},domProps:{value:t.lat},on:{input:function(s){s.target.composing||e.$set(t,"lat",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lng,expression:"location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"ex. 5,65487",step:"any"},domProps:{value:t.lng},on:{input:function(s){s.target.composing||e.$set(t,"lng",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),s("div",[s("a",{staticClass:"dark clickable",on:{click:function(t){return e.openGeolocationPopin(a)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))]),e.selectedStep.form.options.locations.length>1?s("span",[e._v(" - "),s("a",{staticClass:"dark clickable",on:{click:function(t){return e.removeGPSLocation(a)}}},[e._v(e._s(e.$t("label.RemoveGPSLocation")))])]):e._e()])])])})),s("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddAnGPSLocation")},on:{click:function(t){return e.addGPSLocation()}}})],2):e._e(),"choose"==e.options.type.code?s("div",[s("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),s("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),s("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),s("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("q-checkbox",{attrs:{val:a,"test-id":"radio-answer-"+a},model:{value:e.config.choose.answers,callback:function(t){e.$set(e.config.choose,"answers",t)},expression:"config.choose.answers"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+a},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[a].text.$touch}},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].text.required?s("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",["image"===e.config.choose.answerType&&null!==t.imagePath?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})]):e._e(),s("q-btn",{attrs:{"test-id":"delete-answer-"+a},on:{click:function(t){return e.deleteAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnAnswer"))+"\n      ")])],2):e._e(),"write-text"==e.options.type.code?s("div",[e._l(e.selectedStep.form.answers,(function(t,a){return s("div",{key:a},[s("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.answers[a],callback:function(t){e.$set(e.selectedStep.form.answers,a,t)},expression:"selectedStep.form.answers[index]"}})],1)})),s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.addWriteTextAnswer()}}},[e._v(e._s(e.$t("label.AddAnAnswer")))]),s("div",[e._v(e._s(e.$t("label.WriteTextWarning")))])],2):e._e(),"code-keypad"==e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"6","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?s("div",{staticClass:"code-color"},[s("h2",[e._v(e._s(e.$t("label.AvailableColors")))]),s("q-list",e._l(e.config.colorCode.colorsForCode,(function(t,a){return s("q-item",{key:a,style:"background-color: "+t.value},[s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.label))])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{staticClass:"bg-white",on:{click:function(t){return e.deleteColor(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)],1)})),1),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{staticClass:"q-pa-md",attrs:{dense:"",icon:"playlist_add",label:e.$t("label.AddNewColor")}},[s("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCodeName"),maxlength:"15"},model:{value:e.config.colorCode.newColor.label,callback:function(t){e.$set(e.config.colorCode.newColor,"label",t)},expression:"config.colorCode.newColor.label"}}),s("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCode"),maxlength:"7"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-color",{model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}})],1)],1)]},proxy:!0}],null,!1,2730844002),model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}}),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"secondary"},on:{click:function(t){return e.addColor()}}},[e._v("\n              "+e._s(e.$t("label.Add"))+"\n            ")])],1)],1)],1),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),s("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),s("table",[s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("q-select",{ref:"colorSelect"+a,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+a},model:{value:e.unformatedAnswer[a],callback:function(t){e.$set(e.unformatedAnswer,a,t)},expression:"unformatedAnswer[index]"}})],1)})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[a],on:{click:function(t){return e.triggerClickOnColorSelect(a)}}},[e._v(" ")])])})),0)])],1):e._e(),"code-image"==e.options.type.code?s("div",{staticClass:"code-image"},[s("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})]):e._e(),s("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnImage"))+"\n      ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?s("div",[s("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),s("table",[s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a,staticClass:"text-center",attrs:{"test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("img",{attrs:{id:"image-code-setting-"+a,src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a,staticClass:"text-center",attrs:{"test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"jigsaw-puzzle"===e.options.type.code?s("div",[s("div",{staticClass:"background-upload"},[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),s("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.UploadThePuzzlePicture")+" "+e.currentLanguageForLabels)+":\n          "),s("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture[e.lang]?e._e():s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture[e.lang]?s("div",[s("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),s("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture[e.lang]}})]):e._e()]),s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?s("div",[s("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})]):e._e(),s("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddACardPair"))+"\n      ")])],2):e._e(),"phone-call"==e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.PhoneNumber"),"min-length":"2","max-length":"10","bottom-slots":""},model:{value:e.selectedStep.form.options.number,callback:function(t){e.$set(e.selectedStep.form.options,"number",t)},expression:"selectedStep.form.options.number"}})],1):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]?s("div",{staticClass:"find-item"},[s("p",[s("q-toggle",{attrs:{label:e.$t("label.ObjectNeedToBeAppliedOnPicture")},model:{value:e.selectedStep.form.options.touchLocation,callback:function(t){e.$set(e.selectedStep.form.options,"touchLocation",t)},expression:"selectedStep.form.options.touchLocation"}})],1),s("div",[s("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.useItem.imageHeight+"px; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[e.selectedStep.form.options.touchLocation?s("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: "+e.config.useItem.crossSize+"px; height: "+e.config.useItem.crossSize+"px;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}}):e._e()])])]):e._e(),"use-item"==e.options.type.code?s("div",{staticClass:"inventory"},[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:function(t){e.$v.selectedStep.form.answerItem.$touch}},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?s("div",[e._v("\n        "+e._s(e.$t("label.SelectedObject"))+" :\n        "),s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e(),e.selectedStep.form.answerItem?s("div",[s("q-toggle",{attrs:{label:e.$t("label.RemoveObjectFromInventoryAfterUse")},model:{value:e.selectedStep.form.options.removeObjectAfterUse,callback:function(t){e.$set(e.selectedStep.form.options,"removeObjectAfterUse",t)},expression:"selectedStep.form.options.removeObjectAfterUse"}})],1):e._e(),s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"find-item"===e.options.type.code&&e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]?s("div",{staticClass:"find-item"},[s("q-select",{attrs:{label:e.$t("label.AreasNumber"),options:e.config.findItem.numberOfAreas,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},on:{input:e.changeNbAreas},model:{value:e.selectedStep.form.options.nbAreas,callback:function(t){e.$set(e.selectedStep.form.options,"nbAreas",t)},expression:"selectedStep.form.options.nbAreas"}}),s("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),e.selectedStep&&e.selectedStep.form&&e.selectedStep.form.answers?s("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden;background-image: url("+e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.findItem.imageHeight+"px; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinatesFindItem(t)}}},[s("img",{style:"position: absolute; z-index: 500; top: 100px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross0",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(0)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross1",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(1)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross2",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(2)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 200px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross3",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(3)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 300px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross4",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(4)}}})]):e._e(),s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"locate-item-ar"===e.options.type.code?s("div",{staticClass:"locate-item-ar"},[s("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),s("div",{staticClass:"fields-group"},[s("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),s("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),s("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?s("div",[e._v("\n            "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n            "),s("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),s("div",[s("p",[e._v(e._s(e.$t("label.ObjectSize")))]),e.selectedStep.form.options.hasOwnProperty("objectSize")?s("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),s("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?s("div",[e._v("\n              "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n              "),s("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),s("div",{attrs:{id:"target-canvas"}}),s("div",{staticClass:"q-mb-md"},[e._v("\n            "+e._s(e.$t("label.TouchAndDragObject"))+"\n          ")])],1):e._e(),e.selectedStep.form.options.hasOwnProperty("touchDistance")?s("div",[s("p",[e._v(e._s(e.$t("label.TouchDistance")))]),s("q-slider",{attrs:{min:5,max:100,step:1,"label-always":"","label-value":(e.selectedStep.form.options.touchDistance||10)+"m"},model:{value:e.selectedStep.form.options.touchDistance,callback:function(t){e.$set(e.selectedStep.form.options,"touchDistance",t)},expression:"selectedStep.form.options.touchDistance"}})],1):e._e()],1),s("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),s("div",{staticClass:"fields-group"},[s("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),s("div",[s("a",{staticClass:"dark",on:{click:function(t){return e.openGeolocationPopin(-1)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])])]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?s("div",{staticClass:"locate-marker"},[s("h2",[e._v(e._s(e.$t("label.Marker")))]),s("p",[s("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),s("span",[e._v(e._s(e.selectedStep.form.answers))]),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary","test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}},[e._v("\n          "+e._s(e.$t("label.Choose"))+"\n        ")])],1),s("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),s("q-card-section",e._l(e.markersList,(function(t,a){return s("q-btn",{key:a,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(s){return e.selectMarker(t)}}},[s("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),s("span",[e._v(e._s(t))])])})),1),s("q-card-actions",[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),"portrait-robot"===e.options.type.code&&e.selectedStep.form.answers&&e.selectedStep.form.answers.items?s("div",{staticClass:"portrait-robot"},[s("h2",[e._v(e._s(e.$t("label.BuildThePortraitRobot")))]),s("div",{staticClass:"relative-position"},[s("div",[s("img",{attrs:{src:"statics/portrait-robot/face-"+e.selectedStep.form.answers.items.face+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/eye-"+e.selectedStep.form.answers.items.eye+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/mouth-"+e.selectedStep.form.answers.items.mouth+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/nose-"+e.selectedStep.form.answers.items.nose+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/hair-"+e.selectedStep.form.answers.items.hair+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/beard-"+e.selectedStep.form.answers.items.beard+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/glass-"+e.selectedStep.form.answers.items.glass+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/hat-"+e.selectedStep.form.answers.items.hat+".png"}})])]),s("table",{staticClass:"portrait-parts"},[s("tr",[s("td",[s("img",{attrs:{src:"statics/portrait-robot/face-1.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/eye-1.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/nose-1.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/hair-1.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/beard-2.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/glass-2.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/hat-4.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])])]):e._e(),"end-chapter"===e.options.type.code?s("q-list",{attrs:{bordered:""}},[s("div",{staticClass:"q-pa-md"},[s("q-toggle",{attrs:{label:e.$t("label.RedirectToNextChapter")},model:{value:e.config.endChapter.moveToNextStep,callback:function(t){e.$set(e.config.endChapter,"moveToNextStep",t)},expression:"config.endChapter.moveToNextStep"}}),e.config.endChapter.moveToNextStep?e._e():s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.RedirectToChapter"),options:e.selectedStep.chapters},model:{value:e.selectedStep.form.options.chapterId,callback:function(t){e.$set(e.selectedStep.form.options,"chapterId",t)},expression:"selectedStep.form.options.chapterId"}})],1)],1)]):e._e(),"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Protocol"),options:e.config.iot.protocols},model:{value:e.selectedStep.form.options.protocol,callback:function(t){e.$set(e.selectedStep.form.options,"protocol",t)},expression:"selectedStep.form.options.protocol"}}),s("q-input",{attrs:{"emit-value":"","map-options":"",label:"DeviceID (plug the device in)",options:e.config.iot.triggerEvent.modes,mask:"NN:NN:NN:NN:NN:NN","fill-mask":"",value:"00:00:00:00:00:00"},model:{value:e.selectedStep.form.options.deviceid,callback:function(t){e.$set(e.selectedStep.form.options,"deviceid",t)},expression:"selectedStep.form.options.deviceid"}}),"wait-for-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.waitForEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.triggerEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.TriggerMode"),options:e.config.iot.triggerEvent.modes},model:{value:e.selectedStep.form.options.triggerMode,callback:function(t){e.$set(e.selectedStep.form.options,"triggerMode",t)},expression:"selectedStep.form.options.triggerMode"}}):e._e(),"distance"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.SuccessRange")))]),s("q-range",{attrs:{min:0,max:200,"left-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.min+"cm":"","right-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.max+"cm":"","label-always":""},model:{value:e.selectedStep.form.options.range,callback:function(t){e.$set(e.selectedStep.form.options,"range",t)},expression:"selectedStep.form.options.range"}})],1):e._e(),"pot"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.SuccessRanges")))]),e._l([1,2,3],(function(t){return s("q-range",{key:t,staticClass:"q-my-md",attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].min:"","right-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].max:"","label-always":""},model:{value:e.selectedStep.form.options["range"+t],callback:function(s){e.$set(e.selectedStep.form.options,"range"+t,s)},expression:"selectedStep.form.options['range' + index]"}})}))],2):e._e(),"keypad"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.selectedStep.form.options.answer,callback:function(t){e.$set(e.selectedStep.form.options,"answer",t)},expression:"selectedStep.form.options.answer"}})],1):e._e(),"joystick"===e.selectedStep.form.options.object?s("div",[s("h2",{staticStyle:{"line-height":"1.5rem"}},[e._v(e._s(e.$t("label.SuccessRanges")))]),s("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Horizontal")))]),s("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.min:"","right-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.max:"","label-always":""},model:{value:e.selectedStep.form.options.rangeX,callback:function(t){e.$set(e.selectedStep.form.options,"rangeX",t)},expression:"selectedStep.form.options.rangeX"}}),s("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Vertical")))]),s("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.min+"":"","right-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.max+"":"","label-always":""},model:{value:e.selectedStep.form.options.rangeY,callback:function(t){e.$set(e.selectedStep.form.options,"rangeY",t)},expression:"selectedStep.form.options.rangeY"}})],1):e._e(),"button"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{type:"textarea",label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:300},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"lcd"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:16},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"buzzer"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.Duration")))]),s("q-slider",{attrs:{min:0,max:3e3,"label-value":e.selectedStep.form.options.duration?e.selectedStep.form.options.duration+"ms":"","label-always":""},model:{value:e.selectedStep.form.options.duration,callback:function(t){e.$set(e.selectedStep.form.options,"duration",t)},expression:"selectedStep.form.options.duration"}}),s("h2",[e._v(e._s(e.$t("label.Frequency")))]),s("q-slider",{attrs:{min:100,max:1e4,"label-value":e.selectedStep.form.options.frequency?e.selectedStep.form.options.frequency+"Hz":"","label-always":""},model:{value:e.selectedStep.form.options.frequency,callback:function(t){e.$set(e.selectedStep.form.options,"frequency",t)},expression:"selectedStep.form.options.frequency"}})],1):e._e()],1):e._e(),e.quest.playersNumber>1?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Player"),options:e.players},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpPlayer")}}})]},proxy:!0}],null,!1,3443813941),model:{value:e.selectedStep.form.player,callback:function(t){e.$set(e.selectedStep.form,"player",t)},expression:"selectedStep.form.player"}})],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[s("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?s("q-list",{attrs:{highlight:""}},[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,a){return s("q-item",{key:a},[s("q-item-section",[s("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(a)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?s("div",[e._v("\n            "+e._s(e.$t("label.NoCondition"))+"\n          ")]):e._e(),e.selectedStep.newConditionForm?e._e():s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),"counter"!==e.selectedStep.newCondition.selectedType&&"countergreater"!==e.selectedStep.newCondition.selectedType&&"counterlower"!==e.selectedStep.newCondition.selectedType&&"combineobject"!==e.selectedStep.newCondition.selectedType&&"haveobject"!==e.selectedStep.newCondition.selectedType&&"nothaveobject"!==e.selectedStep.newCondition.selectedType?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}):e._e(),"combineobject"===e.selectedStep.newCondition.selectedType&&"new-item"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectCombined"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"combineobject"===e.selectedStep.newCondition.selectedType&&"new-item"!==e.options.type.code?s("div",[e._v(e._s(e.$t("label.YouCanOnlyUseThisFeatureInNewItemStep")))]):e._e(),"haveobject"===e.selectedStep.newCondition.selectedType?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectInInventory"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"nothaveobject"===e.selectedStep.newCondition.selectedType?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectNotInInventory"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"counter"===e.selectedStep.newCondition.selectedType||"countergreater"===e.selectedStep.newCondition.selectedType||"counterlower"===e.selectedStep.newCondition.selectedType?s("q-input",{attrs:{label:e.$t("label.CounterValue")},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}):e._e(),"stepAnswerNb"===e.selectedStep.newCondition.selectedType?s("q-input",{attrs:{label:e.$t("label.AnswerNumber")},model:{value:e.selectedStep.newCondition.answerNumber,callback:function(t){e.$set(e.selectedStep.newCondition,"answerNumber",t)},expression:"selectedStep.newCondition.answerNumber"}}):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),s("q-btn",{staticClass:"q-mx-md",attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Chapters")}},[s("div",{staticClass:"q-pa-md"},[s("div",[e._v("\n            "+e._s(e.$t("label.ChapterChangeWarning"))+"\n          ")]),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Chapter"),options:e.selectedStep.chapters},on:{input:e.changeChapter},model:{value:e.selectedStep.form.chapterId,callback:function(t){e.$set(e.selectedStep.form,"chapterId",t)},expression:"selectedStep.form.chapterId"}})],1)])],1):e._e(),s("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[s("div",{staticClass:"q-pa-sm"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code&&e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter' && options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n              "+e._s(e.$t("label.AddABackgroundImage"))+"\n            ")]),e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?s("div",[s("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?s("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]}}):e._e(),s("br"),s("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"geolocation"===e.options.type.code?s("div",{staticClass:"background-upload"},[s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheLocatorPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLocatorImage}})],1),e.isIOs?s("div",[e._v("\n                "+e._s(e.$t("label.UploadTheLocatorPicture"))+":\n                "),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLocatorImage}})]):e._e(),s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.locator&&null!==e.selectedStep.form.options.locator?s("div",[s("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.locator.indexOf("statics/")?e.selectedStep.form.options.locator:e.uploadUrl+"/upload/quest/"+e.questId+"/step/geolocation/"+e.selectedStep.form.options.locator}})])]):e._e()]):e._e(),e.options.type.nbTrials>0?s("div",[s("q-input",{attrs:{label:e.$t("label.NbTrials")},model:{value:e.selectedStep.form.nbTrial,callback:function(t){e.$set(e.selectedStep.form,"nbTrial",t)},expression:"selectedStep.form.nbTrial"}})],1):e._e(),e.options.type.passOption>0?s("div",[s("q-toggle",{attrs:{label:e.$t("label.UserCanPass")},model:{value:e.selectedStep.form.canPass,callback:function(t){e.$set(e.selectedStep.form,"canPass",t)},expression:"selectedStep.form.canPass"}})],1):e._e(),"memory"==e.options.type.code||"locate-item-ar"==e.options.type.code||"jigsaw-puzzle"==e.options.type.code||"use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code||"portrait-robot"==e.options.type.code?s("div",{staticClass:"q-pb-md"},[e.options&&e.options.mode&&"advanced"===e.options.mode?s("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}}):e._e(),e.selectedStep.form.options.rightAnswerMessage?s("q-input",{attrs:{label:e.$t("label.CustomizeRightAnswerMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.rightAnswerMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.rightAnswerMessage,e.lang,t)},expression:"selectedStep.form.options.rightAnswerMessage[lang]"}}):e._e(),e.selectedStep.form.options.wrongAnswerMessage?s("q-input",{attrs:{label:e.$t("label.CustomizeWrongAnswerMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.wrongAnswerMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.wrongAnswerMessage,e.lang,t)},expression:"selectedStep.form.options.wrongAnswerMessage[lang]"}}):e._e(),s("q-input",{attrs:{label:e.$t("label.CustomizeRightAnswerColor"),placeholder:"yellow-4"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:function(t){e.colors.showPopin=!0}}})]},proxy:!0}],null,!1,862916511),model:{value:e.selectedStep.form.options.rightAnswerColor,callback:function(t){e.$set(e.selectedStep.form.options,"rightAnswerColor",t)},expression:"selectedStep.form.options.rightAnswerColor"}}),s("q-input",{attrs:{label:e.$t("label.CustomizeWrongAnswerColor"),placeholder:"Red-6"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:function(t){e.colors.showPopin=!0}}})]},proxy:!0}],null,!1,862916511),model:{value:e.selectedStep.form.options.wrongAnswerColor,callback:function(t){e.$set(e.selectedStep.form.options,"wrongAnswerColor",t)},expression:"selectedStep.form.options.wrongAnswerColor"}}),s("q-select",{attrs:{label:e.$t("label.IconForSuccess"),options:e.successIcon.options},scopedSlots:e._u([{key:"selected",fn:function(){return[s("q-icon",{attrs:{name:e.selectedStep.form.options.successIcon}})]},proxy:!0},{key:"option",fn:function(t){return[s("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:t.opt}})],1),s("q-item-section",["block"!==t.opt?s("q-item-label",[e._v(e._s(e.$t("label.SelectThisIcon")))]):e._e(),"block"===t.opt?s("q-item-label",[e._v(e._s(e.$t("label.NoIcon")))]):e._e()],1)],1)]}}],null,!1,1223828950),model:{value:e.selectedStep.form.options.successIcon,callback:function(t){e.$set(e.selectedStep.form.options,"successIcon",t)},expression:"selectedStep.form.options.successIcon"}})],1):e._e(),s("q-toggle",{attrs:{label:e.$t("label.MoveToNextStepAutomatically")},model:{value:e.selectedStep.form.options.moveToNextStepAutomatically,callback:function(t){e.$set(e.selectedStep.form.options,"moveToNextStepAutomatically",t)},expression:"selectedStep.form.options.moveToNextStepAutomatically"}}),e.selectedStep.form.options.moveToNextStepAutomatically?s("div",[s("q-input",{attrs:{label:e.$t("label.MoveToNextStepAutomaticallyDuration")},model:{value:e.selectedStep.form.options.moveToNextStepAutomaticallyDuration,callback:function(t){e.$set(e.selectedStep.form.options,"moveToNextStepAutomaticallyDuration",t)},expression:"selectedStep.form.options.moveToNextStepAutomaticallyDuration"}})],1):e._e(),!e.options||"info-text"!=e.options.type.code&&"code-image"!=e.options.type.code&&"code-color"!=e.options.type.code&&"code-keypad"!=e.options.type.code&&"choose"!=e.options.type.code&&"write-text"!=e.options.type.code?e._e():s("div",{staticClass:"q-pb-md"},[s("q-toggle",{attrs:{label:e.$t("label.HideHideButton")},model:{value:e.selectedStep.form.options.hideHideButton,callback:function(t){e.$set(e.selectedStep.form.options,"hideHideButton",t)},expression:"selectedStep.form.options.hideHideButton"}})],1),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?s("div",{staticClass:"location-gps"},[s("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),s("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}}),s("q-toggle",{attrs:{label:e.$t("label.HideMake8Animation")},model:{value:e.selectedStep.form.options.hideAnimation,callback:function(t){e.$set(e.selectedStep.form.options,"hideAnimation",t)},expression:"selectedStep.form.options.hideAnimation"}})],1):e._e(),"geolocation"==e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.AllowToSwitchGeolocationMode")},model:{value:e.selectedStep.form.options.switchmode,callback:function(t){e.$set(e.selectedStep.form.options,"switchmode",t)},expression:"selectedStep.form.options.switchmode"}}),s("q-input",{attrs:{label:e.$t("label.DistanceToWin")},model:{value:e.selectedStep.form.options.distance,callback:function(t){e.$set(e.selectedStep.form.options,"distance",t)},expression:"selectedStep.form.options.distance"}})],1):e._e(),"character"==e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.CharacterBarColor")},model:{value:e.selectedStep.form.options.characterBarColor,callback:function(t){e.$set(e.selectedStep.form.options,"characterBarColor",t)},expression:"selectedStep.form.options.characterBarColor"}})],1):e._e(),"new-item"==e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.AddToInventoryAndPass")},model:{value:e.selectedStep.form.options.addInventoryAndPass,callback:function(t){e.$set(e.selectedStep.form.options,"addInventoryAndPass",t)},expression:"selectedStep.form.options.addInventoryAndPass"}})],1):e._e(),"memory"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}}),s("q-input",{attrs:{label:e.$t("label.CustomizedMemoryCardColor")},model:{value:e.selectedStep.form.options.memoryCardColor,callback:function(t){e.$set(e.selectedStep.form.options,"memoryCardColor",t)},expression:"selectedStep.form.options.memoryCardColor"}})],1):e._e(),"jigsaw-puzzle"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.HidePuzzleNotWorkingMessage")},model:{value:e.selectedStep.form.options.hidePuzzleNotWorkingMessage,callback:function(t){e.$set(e.selectedStep.form.options,"hidePuzzleNotWorkingMessage",t)},expression:"selectedStep.form.options.hidePuzzleNotWorkingMessage"}})],1):e._e(),"code-image"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.HideEnlargeMessage")},model:{value:e.selectedStep.form.options.hideEnlargeMessage,callback:function(t){e.$set(e.selectedStep.form.options,"hideEnlargeMessage",t)},expression:"selectedStep.form.options.hideEnlargeMessage"}}),s("q-toggle",{attrs:{label:e.$t("label.OrderIsNotImportant")},model:{value:e.selectedStep.form.options.orderIsNotImportant,callback:function(t){e.$set(e.selectedStep.form.options,"orderIsNotImportant",t)},expression:"selectedStep.form.options.orderIsNotImportant"}})],1):e._e(),"help"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageInventory")},model:{value:e.selectedStep.form.options.helpInventory,callback:function(t){e.$set(e.selectedStep.form.options,"helpInventory",t)},expression:"selectedStep.form.options.helpInventory"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageHint")},model:{value:e.selectedStep.form.options.helpHint,callback:function(t){e.$set(e.selectedStep.form.options,"helpHint",t)},expression:"selectedStep.form.options.helpHint"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessagePrevious")},model:{value:e.selectedStep.form.options.helpPrevious,callback:function(t){e.$set(e.selectedStep.form.options,"helpPrevious",t)},expression:"selectedStep.form.options.helpPrevious"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageNext")},model:{value:e.selectedStep.form.options.helpNext,callback:function(t){e.$set(e.selectedStep.form.options,"helpNext",t)},expression:"selectedStep.form.options.helpNext"}})],1):e._e(),"image-over-flow"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullWidth")},model:{value:e.selectedStep.form.options.fullWidthPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullWidthPicture",t)},expression:"selectedStep.form.options.fullWidthPicture"}}),s("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullHeight")},model:{value:e.selectedStep.form.options.fullHeightPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullHeightPicture",t)},expression:"selectedStep.form.options.fullHeightPicture"}}),s("q-toggle",{attrs:{label:e.$t("label.PlayerCanTakeSnapshot")},model:{value:e.selectedStep.form.options.snapshotAllowed,callback:function(t){e.$set(e.selectedStep.form.options,"snapshotAllowed",t)},expression:"selectedStep.form.options.snapshotAllowed"}}),s("q-toggle",{attrs:{label:e.$t("label.ReplacePictureByRedFilter")},model:{value:e.selectedStep.form.options.redFilter,callback:function(t){e.$set(e.selectedStep.form.options,"redFilter",t)},expression:"selectedStep.form.options.redFilter"}}),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.CameraUsed"),options:e.config.imageOverFlow.cameraOptions},model:{value:e.selectedStep.form.options.cameraUsed,callback:function(t){e.$set(e.selectedStep.form.options,"cameraUsed",t)},expression:"selectedStep.form.options.cameraUsed"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),"find-item"===e.options.type.code?s("div",[e.selectedStep.form.options.wrongLocationMessage?s("q-input",{attrs:{label:e.$t("label.WrongLocationMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.wrongLocationMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.wrongLocationMessage,e.lang,t)},expression:"selectedStep.form.options.wrongLocationMessage[lang]"}}):e._e()],1):e._e(),"binocular"===e.options.type.code?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Shape"),options:e.config.binocular.options},model:{value:e.selectedStep.form.options.shape,callback:function(t){e.$set(e.selectedStep.form.options,"shape",t)},expression:"selectedStep.form.options.shape"}})],1):e._e(),"end-chapter"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.ResetHistoryAfter")},model:{value:e.selectedStep.form.options.resetHistory,callback:function(t){e.$set(e.selectedStep.form.options,"resetHistory",t)},expression:"selectedStep.form.options.resetHistory"}}),s("q-toggle",{attrs:{label:e.$t("label.RestartChapterAfterStep")},model:{value:e.selectedStep.form.options.resetChapterProgression,callback:function(t){e.$set(e.selectedStep.form.options,"resetChapterProgression",t)},expression:"selectedStep.form.options.resetChapterProgression"}}),s("q-toggle",{attrs:{label:e.$t("label.ResetChapterProgression")},model:{value:e.selectedStep.form.options.resetChapterProgressionAndMoveNext,callback:function(t){e.$set(e.selectedStep.form.options,"resetChapterProgressionAndMoveNext",t)},expression:"selectedStep.form.options.resetChapterProgressionAndMoveNext"}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter'"}]},[e.selectedStep.form.audioStream[e.lang]&&""!==e.selectedStep.form.audioStream[e.lang]?s("div",[s("div",[e._v(e._s(e.$t("label.YourAudioFile")+" "+e.currentLanguageForLabels)+" : "+e._s(e.selectedStep.form.audioStream[e.lang]))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.selectedStep.form.audioStream[e.lang]&&""!==e.selectedStep.form.audioStream[e.lang]?e._e():s("div",[e._v("\n              "+e._s(e.$t("label.AddAnAudioFile")+" "+e.currentLanguageForLabels)+":\n              "),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})])]),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.KenBurnsEffect")},model:{value:e.selectedStep.form.options.kenBurnsEffect,callback:function(t){e.$set(e.selectedStep.form.options,"kenBurnsEffect",t)},expression:"selectedStep.form.options.kenBurnsEffect"}}),s("br"),s("q-toggle",{attrs:{label:e.$t("label.BlurEffect")},model:{value:e.selectedStep.form.options.blurEffect,callback:function(t){e.$set(e.selectedStep.form.options,"blurEffect",t)},expression:"selectedStep.form.options.blurEffect"}})],1):e._e(),"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.UseHtmlInDescription")},model:{value:e.selectedStep.form.options.html,callback:function(t){e.$set(e.selectedStep.form.options,"html",t)},expression:"selectedStep.form.options.html"}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter'"}]},[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel")+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}}),s("q-toggle",{attrs:{label:e.$t("label.DisplayTime")},model:{value:e.selectedStep.form.options.displayTime,callback:function(t){e.$set(e.selectedStep.form.options,"displayTime",t)},expression:"selectedStep.form.options.displayTime"}}),s("q-toggle",{attrs:{label:e.$t("label.DisplayGoodAnswers")},model:{value:e.selectedStep.form.options.displayGoodAnswers,callback:function(t){e.$set(e.selectedStep.form.options,"displayGoodAnswers",t)},expression:"selectedStep.form.options.displayGoodAnswers"}})],1)],1)])],1),s("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hints")}},[s("div",{staticClass:"q-pa-sm"},[e.selectedStep.form.hint&&e.selectedStep.form.hint[e.lang]&&e.selectedStep.form.hint[e.lang].length>0?s("div",e._l(e.selectedStep.form.hint[e.lang],(function(t,a){return s("div",{key:a},[s("q-btn",{staticClass:"float-right",on:{click:function(t){return e.removeHint(a)}}},[s("q-icon",{attrs:{name:"delete"}})],1),s("q-btn",{staticClass:"float-right q-mr-sm",on:{click:function(t){return e.updateHint(a)}}},[s("q-icon",{attrs:{name:"mode_edit"}})],1),s("div",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("label.Hint")+" "+(a+1)+" "+e.currentLanguageForLabels))]),e._v("\n              "+e._s(t)+"\n            ")],1)})),0):e._e(),s("div",[s("q-input",{attrs:{label:e.$t("label.NewHint")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"check"},on:{click:function(t){return e.addHint()}}})]},proxy:!0}]),model:{value:e.newHint,callback:function(t){e.newHint=t},expression:"newHint"}})],1)])])],1),s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[s("div",{staticClass:"q-pa-sm"},[s("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),s("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),s("q-list",{directives:[{name:"show",rawName:"v-show",value:"enigma"===e.options.type.category&&"image-over-flow"!==e.options.type.code&&!["image-over-flow","trigger-event"].includes(e.options.type.code),expression:"options.type.category === 'enigma' && options.type.code !== 'image-over-flow' && !['image-over-flow', 'trigger-event'].includes(options.type.code)"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.CountDownLabel")}},[s("div",{staticClass:"q-pa-sm"},[s("q-toggle",{attrs:{label:e.$t("label.CountDownLabel")},on:{input:e.activateCountDown},model:{value:e.selectedStep.form.countDownTime.enabled,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"enabled",t)},expression:"selectedStep.form.countDownTime.enabled"}}),s("q-input",{attrs:{filled:"",label:e.$t("label.CountDownIsActive"),mask:"##h##m##s","fill-mask":"",value:"00h00m00s"},model:{value:e.selectedStep.form.countDownTime.time,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"time",t)},expression:"selectedStep.form.countDownTime.time"}})],1)])],1),s("div",{staticClass:"centered q-pa-md q-pt-lg q-pb-sm"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:function(t){return e.checkAndSubmit(!0)}}},[e._v(e._s(e.$t("label.SaveAndTestThisStep")))])],1),s("div",{staticClass:"centered q-px-md q-pb-xl"},[s("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.checkAndSubmit(!1)}}},[e._v(e._s(e.$t("label.SaveThisStep")))])],1)],1),s("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[s("q-card",[s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),s("q-card-actions",[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.checkAndSubmit(!1)}}}),s("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),s("q-dialog",{attrs:{maximized:""},model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[s("div",{staticClass:"q-pa-md"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),s("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.colors.showPopin,expression:"colors.showPopin"}],staticClass:"bg-white panel-bottom q-pa-md"},[s("div",{staticClass:"q-pa-md centered"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors1.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors2.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors3.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors4.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors5.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors6.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors7.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors8.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors9.png"}})]),s("div",{staticClass:"col-4 col-12-sm"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors10.png"}})])]),s("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.colors.showPopin=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)])]),"geolocation"===e.options.type.code||"locate-item-ar"===e.options.type.code?s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}):e._e(),s("q-dialog",{model:{value:e.config.geolocation.showPopin,callback:function(t){e.$set(e.config.geolocation,"showPopin",t)},expression:"config.geolocation.showPopin"}},[s("q-card",[s("q-card-section",[s("h1",[e._v(e._s(e.$t("label.CurrentLocation")))]),s("p",[e._v(e._s(e.$t("label.Latitude"))+" : "+e._s(e.config.geolocation.position.latitude))]),s("p",[e._v(e._s(e.$t("label.Longitude"))+" : "+e._s(e.config.geolocation.position.longitude))]),s("p",{class:{warning:e.config.geolocation.position.accuracy>10}},[e._v(e._s(e.$t("label.Accuracy"))+" : "+e._s(Math.round(10*e.config.geolocation.position.accuracy)/10)+" "+e._s(e.$t("label.Meters")))])]),s("q-card-section",{staticClass:"warning",style:{visibility:e.config.geolocation.position.accuracy>10?"visible":"hidden"},domProps:{innerHTML:e._s(e.$t("label.MyLocationWarning"))}}),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary",disable:e.config.geolocation.position.accuracy>10},on:{click:function(t){return e.saveMyGPSLocation()}}},[e._v(e._s(e.$t("label.Save")))]),s("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary"},on:{click:function(t){e.config.geolocation.showPopin=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1)],1)],1),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.AddABackgroundImage")))]),e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$refs["backgroundfile"].click()}}},[s("q-icon",{attrs:{name:"cloud_upload"}}),s("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),s("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?s("div",[e._v("\n        "+e._s(e.$t("label.UploadABackgroundImage"))+":\n        "),s("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),e.media.isSimulated?s("div",{staticClass:"centered"},[s("div",{style:"width: 105px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),s("div",{style:"width: 84px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),s("div",{style:"width: 135px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block;"})]):e._e(),e.media.isSimulated?s("div",[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyBackgroundPictureImageDisplaysOnMobiles")))]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.MyPictureIsNotDisplayedWell")}},[s("q-card",[s("q-card-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.MyPictureIsNotDisplayedWellDesc"))}})])],1)],1)],1)],1):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage&&!e.selectedStep.form.backgroundImage[e.lang]||e.media.isSimulated?e._e():s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.WarningImageResize")))]),e.media&&e.media.items&&e.media.items.length>0&&!e.media.isSimulated?s("div",[s("div",{staticClass:"centered q-pa-md"},[e._v(e._s(e.$t("label.OrSelectAnImageInTheList")))]),e._l(e.media.items,(function(t,a){return s("img",{key:t.id,staticStyle:{width:"30vw","max-width":"300px",height:"40vw","max-height":"400px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+t.type+t.file},on:{click:function(t){return e.selectMedia(a)}}})}))],2):e._e(),s("div",{staticClass:"centered q-ma-md"},[s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1)])])],1)},so=[],ao=s("d442"),ro=s.n(ao),oo=s("547f"),no=s("57e4"),io=s("6397"),lo=s.n(io),co="demoObject",uo={props:["quest","stepId","lang","options"],components:{geolocation:bt},watch:{stepId:function(){var e=n()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},backgroundImage:{},extraText:{},player:"All",options:{},hint:{},nbTrial:0,canPass:!0,chapterId:"0",conditions:[],startDate:{enabled:!1},countDownTime:{enabled:!1},audioStream:{}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"},{label:this.$t("label.StepAnswerNb"),value:"stepAnswerNb"},{label:this.$t("label.StepRandom"),value:"stepRandom"},{label:this.$t("label.StepCounter"),value:"counter"},{label:this.$t("label.StepCounterGreater"),value:"countergreater"},{label:this.$t("label.StepCounterLower"),value:"counterlower"},{label:this.$t("label.StepCombineObject"),value:"combineobject"},{label:this.$t("label.StepHaveObject"),value:"haveobject"},{label:this.$t("label.StepNotHaveObject"),value:"nothaveobject"}],selectedValue:"",selectedObject:"",answerNumber:0,values:[]},chapters:[]},media:{isOpened:!1,isSimulated:!1,simulationPicture:"",items:[],detail:{isOpened:!1,index:0}},players:[],stepTypes:Pa,objectsList:oo,markersList:no,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6,answers:[]},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],colorsForCode:this.getColorsForCodeOptions(),newColor:{label:"",value:""}},geolocation:{currentIndex:0,showPopin:!1,position:{latitude:null,longitude:null,accuracy:null}},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions(),maxNbAnswers:10},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[],crossSize:40,imageHeight:1200,imageWidth:900,stepsOfItems:[]},findItem:{numberOfAreas:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],currentArea:0,crossSize:40,imageHeight:1200,imageWidth:900},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1},imageOverFlow:{cameraOptions:[{label:this.$t("label.FaceCamera"),value:"user"},{label:this.$t("label.BackCamera"),value:"environment"}]},binocular:{shape:"binocular",options:[{label:this.$t("label.Binoculars"),value:"binocular"},{label:this.$t("label.FlashLight"),value:"flashlight"}]},portrait:{face:{number:4},eye:{number:16},mouth:{number:1},nose:{number:5},hair:{number:26},beard:{number:31},glass:{number:5},hat:{number:4}},endChapter:{moveToNextStep:!0},iot:{triggerEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("trigger-event"),modes:[{label:this.$t("label.TriggerModeAuto"),value:"auto"},{label:this.$t("label.TriggerModeManual"),value:"manual"}]},waitForEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("wait-for-event")},DeviceID:"0000000000",protocols:[{label:"MQTT",value:"mqtt"},{label:"Bluetooth",value:"bluetooth"}]}},newHint:"",successIcon:{options:["thumb_up","block","favorite","star","check_circle","emoji_emotions","auto_awesome","local_fire_department","light_mode","local_police"]},questItems:[],colors:{showPopin:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("0"!==e.stepId){t.next=3;break}return t.next=3,e.initData();case 3:case"end":return t.stop()}}),t)})))()},methods:{getStepId:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.stepId&&"0"!==e.stepId?(e.selectedStep.id=e.stepId,e.selectedStep.isNew=!1):(e.selectedStep.id=0,e.selectedStep.isNew=!0);case 1:case"end":return t.stop()}}),t)})))()},resetStep:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:{},videoStream:{},audioStream:{},answerPointerCoordinates:{top:50,left:50},answerItem:null,player:"All",nbTrial:0,canPass:!0,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},countDownTime:{enabled:!1},number:null},e.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value="")}));case 2:case"end":return t.stop()}}),t)})))()},initData:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,c,u,d,p,m,h,f,g;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.questId=e.quest.questId,e.resetStep(),!e.stepId||-1!==e.stepId){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getStepId();case 6:if(e.selectedStep.isNew){t.next=15;break}return t.next=9,Ls.getById(e.stepId,e.quest.version,"all");case 9:s=t.sent,s&&s.data?Object.assign(e.selectedStep.form,s.data):yt(e.$t("label.ErrorStandardMessage"),"error"),e.options.chapterId=s.data&&s.data.chapterId?s.data.chapterId:0,e.getUnderstandableConditions(),t.next=18;break;case 15:e.selectedStep.form.type=e.options.type.code,e.selectedStep.form.chapterId=e.options.chapterId,0!==e.options.previousStepId&&(e.selectedStep.form.conditions.push("stepDone_"+e.options.previousStepId),e.getUnderstandableConditions());case 18:if(e.selectedStep.type=e.getStepType(e.selectedStep.form.type),e.selectedStep.form.nbTrial&&0!==e.selectedStep.form.nbTrial||(e.selectedStep.form.nbTrial=e.selectedStep.type.nbTrials),null!==e.selectedStep.form.number){t.next=25;break}return t.next=23,Ls.countForAQuest(e.questId,e.quest.version);case 23:a=t.sent,e.selectedStep.form.number=a&&a.data&&a.data.count?a.data.count+1:1;case 25:if(e.selectedStep.form.title[e.lang]&&""!==e.selectedStep.form.title[e.lang]||(o=e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.title[e.quest.mainLanguage]?e.selectedStep.form.title[e.quest.mainLanguage]:e.$t("label.Step")+" "+e.selectedStep.form.number,e.$set(e.selectedStep.form.title,e.lang,o)),e.selectedStep.form.text[e.lang]&&""!==e.selectedStep.form.text[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.text[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.text,e.lang,e.selectedStep.form.text[e.quest.mainLanguage]),e.selectedStep.form.extraText[e.lang]&&""!==e.selectedStep.form.extraText[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.extraText[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.extraText,e.lang,e.selectedStep.form.extraText[e.quest.mainLanguage]),e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.backgroundImage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.backgroundImage,e.lang,e.selectedStep.form.backgroundImage[e.quest.mainLanguage]),e.selectedStep.form.videoStream[e.lang]&&""!==e.selectedStep.form.videoStream[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.videoStream[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.videoStream,e.lang,e.selectedStep.form.videoStream[e.quest.mainLanguage]),(!e.selectedStep.form.hint[e.lang]||""===e.selectedStep.form.hint[e.lang])&&e.lang!==e.quest.mainLanguage&&e.selectedStep.form.hint[e.quest.mainLanguage]&&e.selectedStep.form.hint[e.quest.mainLanguage].length>0)for(e.selectedStep.form.hint[e.lang]=[],n=0;n<e.selectedStep.form.hint[e.quest.mainLanguage].length;n++)e.selectedStep.form.hint[e.lang].push(e.selectedStep.form.hint[e.quest.mainLanguage][n]);for(e.selectedStep.form.options.rightAnswerMessage?e.selectedStep.form.options.rightAnswerMessage[e.lang]&&""!==e.selectedStep.form.options.rightAnswerMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.rightAnswerMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.rightAnswerMessage,e.lang,e.selectedStep.form.options.rightAnswerMessage[e.quest.mainLanguage]):e.selectedStep.form.options.rightAnswerMessage={},e.selectedStep.form.options.successIcon||(e.selectedStep.form.options.successIcon="thumb_up"),e.selectedStep.form.options.wrongAnswerMessage?e.selectedStep.form.options.wrongAnswerMessage[e.lang]&&""!==e.selectedStep.form.options.wrongAnswerMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.wrongAnswerMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.wrongAnswerMessage,e.lang,e.selectedStep.form.options.wrongAnswerMessage[e.quest.mainLanguage]):e.selectedStep.form.options.wrongAnswerMessage={},e.selectedStep.form.options.wrongLocationMessage?e.selectedStep.form.options.wrongLocationMessage[e.lang]&&""!==e.selectedStep.form.options.wrongLocationMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.wrongLocationMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.wrongLocationMessage,e.lang,e.selectedStep.form.options.wrongLocationMessage[e.quest.mainLanguage]):e.selectedStep.form.options.wrongLocationMessage={},"info-text"!==e.options.type.code&&"info-video"!==e.options.type.code&&"new-item"!==e.options.type.code&&"character"!==e.options.type.code&&"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code||e.players.push({label:e.$t("label.All"),value:"All"}),i=0;i<e.quest.playersNumber;i++)e.players.push({label:e.$t("label.Player")+" "+(i+1),value:"P"+(i+1)});if(e.selectedStep.form.options.hasOwnProperty("kenBurnsEffect")||(e.selectedStep.form.options.kenBurnsEffect=!1),e.selectedStep.form.options.hasOwnProperty("blurEffect")||(e.selectedStep.form.options.blurEffect=!1),e.selectedStep.form.options.hasOwnProperty("html")||(e.selectedStep.form.options.html=!1),e.getQuestItemsAsOptions(),"choose"!==e.options.type.code){t.next=45;break}if(e.selectedStep.form.options&&e.selectedStep.form.options.items&&Array.isArray(e.selectedStep.form.options.items)){if(e.config.choose.answers=(e.selectedStep.form.answers+"").split("|").map((function(e){return parseInt(e,10)})),e.config.choose.answerType=e.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==e.selectedStep.form.options.items[0].imagePath?"image":"text","text"===e.config.choose.answerType)for(u=0;u<e.selectedStep.form.options.items.length;u++)e.selectedStep.form.options.items[u].textLanguage&&e.selectedStep.form.options.items[u].textLanguage[e.lang]&&(e.selectedStep.form.options.items[u].text=e.selectedStep.form.options.items[u].textLanguage[e.lang])}else for(e.config.choose.answerType="text",e.selectedStep.form.options={items:[],hideHideButton:!0},e.config.choose.answers=[0],c=0;c<e.config.choose.defaultNbAnswers;c++)e.selectedStep.form.options.items.push({text:e.$t("label.AnswerNb",{nb:c+1}),imagePath:null});t.next=143;break;case 45:if("help"!==e.options.type.code){t.next=49;break}e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("helpInventory")||(e.selectedStep.form.options.helpHint=!0,e.selectedStep.form.options.helpInventory=!0,e.selectedStep.form.options.helpNext=!0,e.selectedStep.form.options.helpPrevious=!0),t.next=143;break;case 49:if("code-color"!==e.options.type.code){t.next=56;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=Array(4).fill("#FF0000"),e.selectedStep.form.options.colors&&(e.config.colorCode.colorsForCode=e.selectedStep.form.options.colors),e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),t.next=143;break;case 56:if("code-image"!==e.options.type.code){t.next=62;break}if(!e.selectedStep.form.options||!e.selectedStep.form.options.images)for(e.selectedStep.form.options={images:[],hideHideButton:!0},d=0;d<e.config.imageCode.defaultNbAnswers;d++)e.selectedStep.form.options.images.push({imagePath:null});e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=[0,0,0,0],t.next=143;break;case 62:if("code-keypad"!==e.options.type.code){t.next=67;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),"string"!==typeof e.selectedStep.form.answers&&(e.selectedStep.form.answers=""),t.next=143;break;case 67:if("write-text"!==e.options.type.code){t.next=72;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),"object"===ot()(e.selectedStep.form.answers)&&e.selectedStep.form.answers.length||(e.selectedStep.form.answers=[],e.selectedStep.form.answers.push("")),t.next=143;break;case 72:if("info-text"!==e.options.type.code&&"character"!==e.options.type.code&&"choose"!==e.options.type.code&&"write-text"!==e.options.type.code&&"code-keypad"!==e.options.type.code){t.next=78;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),e.selectedStep.form.options.hasOwnProperty("initDuration")||(e.selectedStep.form.options.initDuration=1),"character"!==e.options.type.code||e.selectedStep.form.options.character||l["a"].set(e.selectedStep.form.options,"character","1"),t.next=143;break;case 78:if("find-item"!==e.options.type.code){t.next=83;break}e.selectedStep.form.options.hasOwnProperty("nbAreas")?e.$nextTick((function(){this.initFindItemElements(),this.positionFindItemPointer()})):(e.selectedStep.form.options.nbAreas=1,e.selectedStep.form.options.coordinates=[{top:50,left:50}]),e.selectedStep.form.options||(e.selectedStep.form.options={}),t.next=143;break;case 83:if("use-item"!==e.options.type.code){t.next=89;break}e.selectedStep.form.answers.hasOwnProperty("coordinates")&&(e.selectedStep.form.answerPointerCoordinates=e.selectedStep.form.answers.coordinates,e.$nextTick((function(){this.initUseItemElements(),this.positionUseItemPointer()}))),e.selectedStep.form.answers&&e.selectedStep.form.answers.item&&(e.selectedStep.form.answerItem=e.selectedStep.form.answers.item),e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("touchLocation")||(e.selectedStep.form.options={touchLocation:!0}),t.next=143;break;case 89:if("new-item"!==e.options.type.code){t.next=93;break}e.selectedStep.form.options.hasOwnProperty("picture")?(e.selectedStep.form.options.hasOwnProperty("pictures")&&e.selectedStep.form.options.pictures[e.lang]&&(e.selectedStep.form.options.picture=e.selectedStep.form.options.pictures[e.lang]),e.selectedStep.form.options.hasOwnProperty("titles")&&e.selectedStep.form.options.titles[e.lang]&&(e.selectedStep.form.options.title=e.selectedStep.form.options.titles[e.lang])):e.selectedStep.form.options={picture:null,title:"",pictures:{fr:"",en:""},titles:{fr:"",en:""}},t.next=143;break;case 93:if("jigsaw-puzzle"!==e.options.type.code){t.next=97;break}e.selectedStep.form.options.hasOwnProperty("picture")||(e.selectedStep.form.options={picture:null,level:2}),t.next=143;break;case 97:if("binocular"!==e.options.type.code){t.next=101;break}e.selectedStep.form.options.shape||(e.selectedStep.form.options.shape="binocular"),t.next=143;break;case 101:if("memory"!==e.options.type.code){t.next=105;break}if(!e.selectedStep.form.options.hasOwnProperty("items")){for(p=[],m=0;m<8;m++)p.push({imagePath:null,single:!1});e.$set(e.selectedStep.form.options,"items",p)}t.next=143;break;case 105:if("portrait-robot"!==e.options.type.code){t.next=109;break}e.selectedStep.form.answers.hasOwnProperty("items")||e.$set(e.selectedStep.form.answers,"items",{type:1,face:1,eye:1,mouth:1,nose:1,hair:1,beard:1,glass:1,hat:1}),t.next=143;break;case 109:if("end-chapter"!==e.options.type.code){t.next=113;break}e.selectedStep.form.options.hasOwnProperty("chapterId")&&""!=e.selectedStep.form.options.chapterId?e.config.endChapter.moveToNextStep=!1:e.config.endChapter.moveToNextStep=!0,t.next=143;break;case 113:if("phone-call"!==e.options.type.code){t.next=117;break}e.selectedStep.form.options.hasOwnProperty("number")||e.$set(e.selectedStep.form.options,"number","000000000"),t.next=143;break;case 117:if("geolocation"!==e.options.type.code){t.next=124;break}e.selectedStep.form.options.hasOwnProperty("distance")||e.$set(e.selectedStep.form.options,"distance","20"),e.selectedStep.form.options.hasOwnProperty("showHelp")||e.$set(e.selectedStep.form.options,"showHelp",!0),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","compass"),e.selectedStep.form.options.hasOwnProperty("locations")||e.$set(e.selectedStep.form.options,"locations",[{lat:"",lng:"",destination:""}]),t.next=143;break;case 124:if("locate-item-ar"!==e.options.type.code){t.next=142;break}for(h in e.selectedStep.form.options.hasOwnProperty("picture")||e.$set(e.selectedStep.form.options,"picture",null),e.selectedStep.form.options.hasOwnProperty("objectSize")||e.$set(e.selectedStep.form.options,"objectSize",1),e.selectedStep.form.options.hasOwnProperty("touchDistance")||e.$set(e.selectedStep.form.options,"touchDistance",10),e.selectedStep.form.options.hasOwnProperty("is3D")||e.$set(e.selectedStep.form.options,"is3D",!1),Sa)e.config.locateItem.selectModel3DOptions.push({label:Sa[h].name[e.$store.state.user.language],value:h});if(e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),!e.selectedStep.form.options.is3D){t.next=140;break}if(!e.selectedStep.form.options.customModel){t.next=138;break}return t.next=136,e.displayARObject(e.selectedStep.form.options.customModel,e.questId);case 136:t.next=140;break;case 138:return t.next=140,e.displayARObject(e.selectedStep.form.options.model);case 140:t.next=143;break;case 142:if("locate-marker"===e.options.type.code){for(f in"string"!==typeof e.selectedStep.form.answers&&e.$set(e.selectedStep.form,"answers",no[0]),Sa)e.config.locateItem.selectModel3DOptions.push({label:Sa[f].name[e.$store.state.user.language],value:f});e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","scan")}else"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?(e.selectedStep.form.options.hasOwnProperty("protocol")||e.$set(e.selectedStep.form.options,"protocol","bluetooth"),e.selectedStep.form.options.hasOwnProperty("object")||("wait-for-event"===e.options.type.code?e.$set(e.selectedStep.form.options,"object","distance"):e.$set(e.selectedStep.form.options,"object","lcd"),e.updateIotStepOptions()),"trigger-event"!==e.options.type.code||e.selectedStep.form.options.hasOwnProperty("triggerMode")||e.$set(e.selectedStep.form.options,"triggerMode","auto")):"image-over-flow"===e.options.type.code&&(g={fullWidthPicture:!1,fullHeightPicture:!1,snapshotAllowed:!1,redFilter:!1},e.selectedStep.form.options=Object.assign(g,e.selectedStep.form.options));case 143:return e.originalStepData=lt.clone(e.selectedStep.form),t.next=146,e.changeNewConditionType();case 146:return t.next=148,e.listChapters(e.questId,e.quest.version,e.lang);case 148:case"end":return t.stop()}}),t)})))()},checkAndSubmit:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.checkMainTextLength(t.selectedStep.form.text[t.lang])){s.next=5;break}return s.next=3,t.submitStep(e);case 3:s.next=6;break;case 5:t.$q.dialog({dark:!0,message:t.$t("label.TextTooLongForStep",{nb:t.mainTextMaxLength}),cancel:!0}).onOk(function(){var s=n()(r.a.mark((function s(a){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.submitStep(e);case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).onCancel((function(){return!1}));case 6:case"end":return s.stop()}}),s)})))()},submitStep:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,l,c,u,d;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$v.selectedStep.form.$touch(),!t.$v.selectedStep.form.$error){s.next=4;break}return yt(t.$t("label.StepSettingsFormError"),"error"),s.abrupt("return");case 4:if("choose"!==t.options.type.code){s.next=13;break}if("text"===t.config.choose.answerType){for(a=0;a<t.selectedStep.form.options.items.length;a++)t.selectedStep.form.options&&t.selectedStep.form.options.items&&t.selectedStep.form.options.items[a]&&t.selectedStep.form.options.items[a].textLanguage?t.selectedStep.form.options.items[a].textLanguage[t.lang]=t.selectedStep.form.options.items[a].text:(o={},o[t.lang]=t.selectedStep.form.options.items[a].text,t.selectedStep.form.options.items[a].textLanguage=o);t.selectedStep.form.options.items=t.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}if(t.selectedStep.form.answers=t.config.choose.answers.sort().join("|"),!(t.config.choose.answers.length<1)){s.next=12;break}return yt(t.$t("label.StepSettingsFormError"),"error"),s.abrupt("return");case 12:t.config.choose.answers.length>1?t.selectedStep.form.options.multipleAnswers=!0:t.selectedStep.form.options.multipleAnswers=!1;case 13:if("character"===t.options.type.code&&(t.selectedStep.form.options.character||(t.selectedStep.form.options.character="1")),"code-keypad"===t.options.type.code&&(t.selectedStep.form.options.codeLength=t.selectedStep.form.answers.length),"code-color"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|"),t.selectedStep.form.options.colors=t.config.colorCode.colorsForCode),"code-image"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|")),"write-text"===t.options.type.code)for(n=0;n<t.selectedStep.form.answers.length;n++)t.selectedStep.form.answers[n]=lt.removeAccents(t.selectedStep.form.answers[n].trim());return"jigsaw-puzzle"===t.options.type.code&&(i=parseInt(t.selectedStep.form.options.level,10),l=t.config.jigsaw.nbPiecesByLevel[i],c=lt.buildIncrementalArray(Math.pow(l,2)),c=lt.shuffle(c),t.selectedStep.form.answers=c.join("|")),"memory"===t.options.type.code&&Array.isArray(t.selectedStep.form.options.items)&&t.selectedStep.form.options.items.length>0&&(t.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),t.selectedStep.form.options.lastIsSingle&&(t.selectedStep.form.options.items[t.selectedStep.form.options.items.length-1].single=!0)),t.options.type.code,"end-chapter"===t.options.type.code&&t.config.endChapter.moveToNextStep&&(t.selectedStep.form.options.chapterId=""),t.options.type.code,"use-item"===t.options.type.code&&(t.selectedStep.form.answers={coordinates:t.selectedStep.form.answerPointerCoordinates,item:t.selectedStep.form.answerItem},t.selectedStep.form.options.removeObjectAfterUse&&(t.selectedStep.form.options.stepOfObjectToRemove=t.config.useItem.stepsOfItems[t.selectedStep.form.answerItem])),"new-item"===t.options.type.code&&(t.selectedStep.form.options.titles||(t.selectedStep.form.options.titles={}),t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures||(t.selectedStep.form.options.pictures={}),t.selectedStep.form.options.pictures[t.lang]||(t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture)),u=Object.assign(t.selectedStep.form,{questId:t.questId,version:t.quest.version,chapterId:t.options.chapterId,type:t.options.type.code}),t.$q.loading.show(),s.next=29,Ls.save(u);case 29:d=s.sent,t.$q.loading.hide(),!0===e?d&&d.data&&d.data.stepId?(u.id=d.data.stepId,u.stepId=d.data.stepId,t.$emit("change",u)):yt(t.$t("label.TechnicalIssue"),"error"):!1===e&&(yt(t.$t("label.StepSaved"),"success"),t.$emit("close"));case 32:case"end":return s.stop()}}),s)})))()},addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?yt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?yt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.config.imageCode.maxNbAnswers?yt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.imageCode.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?yt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},deleteCodeAnswer:function(e){if(this.selectedStep.form.options.images.length<=this.config.choose.minNbAnswers)yt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options.images.splice(e,1)}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("#FF0000")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.uploadUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.uploadUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},changePortraitPart:function(e){this.selectedStep.form.answers.items&&(l["a"].set(this.selectedStep.form.answers.items,e,this.selectedStep.form.answers.items[e]+1),this.selectedStep.form.answers.items[e]>this.config.portrait[e].number&&l["a"].set(this.selectedStep.form.answers.items,e,1))},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l,c;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.formatedConditions.length=0,s=0;case 2:if(!(s<e.selectedStep.form.conditions.length)){t.next=19;break}if(a=e.selectedStep.form.conditions[s],o=a.split("_"),"stepDone"!==o[0]&&"stepSuccess"!==o[0]&&"stepFail"!==o[0]&&"stepAnswerNb"!==o[0]&&"stepRandom"!==o[0]){t.next=10;break}return t.next=8,Ls.getById(o[1],e.quest.version,"all");case 8:n=t.sent,n&&n.data&&n.data.hasOwnProperty("title")?(i=n.data.title[e.lang]?n.data.title[e.lang]:n.data.title[Object.keys(n.data.title)[0]],"stepDone"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.FollowStep")+" <i>"+i+"</i>"),"stepSuccess"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepSuccess")+" <i>"+i+"</i>"),"stepFail"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepFail")+" <i>"+i+"</i>"),"stepAnswerNb"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.AnswerNumber")+" "+o[2]+" "+e.$t("label.To")+" <i>"+i+"</i>"),"stepRandom"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepRandom")+" <i>"+i+"</i>")):e.selectedStep.formatedConditions.push(e.$t("label.InvalidCondition"));case 10:if("counter"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounter")+" <i>"+o[1]+"</i>"),"countergreater"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounterGreater")+" <i>"+o[1]+"</i>"),"counterlower"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounterLower")+" <i>"+o[1]+"</i>"),"combineobject"===o[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCombineObject")+" <i><img src='"+(-1!==o[1].indexOf("statics/")?o[1]:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+o[1])+"' style='width: 40px' /></i>"),"haveobject"===o[0])for(l in e.config.useItem.stepsOfItems)e.config.useItem.stepsOfItems[l]===o[1]&&e.selectedStep.formatedConditions.push(e.$t("label.StepHaveObject")+" <i><img src='"+(-1!==l.indexOf("statics/")?l:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+l)+"' style='width: 40px' /></i>");if("nothaveobject"===o[0])for(c in e.config.useItem.stepsOfItems)e.config.useItem.stepsOfItems[c]===o[1]&&e.selectedStep.formatedConditions.push(e.$t("label.StepNotHaveObject")+" <i><img src='"+(-1!==c.indexOf("statics/")?c:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+c)+"' style='width: 40px' /></i>");case 16:s++,t.next=2;break;case 19:case"end":return t.stop()}}),t)})))()},deleteCondition:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.conditions.splice(e,1),t.selectedStep.formatedConditions.splice(e,1);case 2:case"end":return s.stop()}}),s)})))()},changeNewConditionType:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedStep.newCondition.values.length=0,s=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","jigsaw-puzzle","memory"],"stepDone"!==e.selectedStep.newCondition.selectedType&&"stepSuccess"!==e.selectedStep.newCondition.selectedType&&"stepFail"!==e.selectedStep.newCondition.selectedType&&"stepRandom"!==e.selectedStep.newCondition.selectedType){t.next=7;break}return t.next=5,Ls.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 5:if(a=t.sent,a&&a.data&&a.data.length>0)for(o=0;o<a.data.length;o++)a.data[o].stepId.toString()!==e.stepId.toString()&&("stepDone"!==e.selectedStep.newCondition.selectedType&&"stepRandom"!==e.selectedStep.newCondition.selectedType&&-1===s.indexOf(a.data[o].type)||(n=a.data[o].title[e.lang]?a.data[o].title[e.lang]:a.data[o].title[Object.keys(a.data[o].title)[0]],e.selectedStep.newCondition.values.push({label:n,value:a.data[o].stepId})));case 7:if("stepAnswerNb"!==e.selectedStep.newCondition.selectedType){t.next=12;break}return t.next=10,Ls.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 10:if(i=t.sent,i&&i.data&&i.data.length>0)for(o=0;o<i.data.length;o++)i.data[o].stepId.toString()!==e.stepId.toString()&&"choose"==i.data[o].type&&(l=i.data[o].title[e.lang]?i.data[o].title[e.lang]:i.data[o].title[Object.keys(i.data[o].title)[0]],e.selectedStep.newCondition.values.push({label:l,value:i.data[o].stepId}));case 12:case"end":return t.stop()}}),t)})))()},saveNewCondition:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""===e.selectedStep.newCondition.selectedType||""===e.selectedStep.newCondition.selectedValue&&""===e.selectedStep.newCondition.selectedObject||("stepDone"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepDone_"+e.selectedStep.newCondition.selectedValue),"stepSuccess"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepSuccess_"+e.selectedStep.newCondition.selectedValue),"stepFail"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepFail_"+e.selectedStep.newCondition.selectedValue),"stepAnswerNb"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepAnswerNb_"+e.selectedStep.newCondition.selectedValue+"_"+e.selectedStep.newCondition.answerNumber),"stepRandom"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepRandom_"+e.selectedStep.newCondition.selectedValue),"counter"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("counter_"+e.selectedStep.newCondition.selectedValue),"countergreater"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("countergreater_"+e.selectedStep.newCondition.selectedValue),"counterlower"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("counterlower_"+e.selectedStep.newCondition.selectedValue),"combineobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("combineobject_"+e.selectedStep.newCondition.selectedObject),"haveobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("haveobject_"+e.config.useItem.stepsOfItems[e.selectedStep.newCondition.selectedObject]),"nothaveobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("nothaveobject_"+e.config.useItem.stepsOfItems[e.selectedStep.newCondition.selectedObject])),e.getUnderstandableConditions(),t.next=4,e.resetNewConditionForm();case 4:e.selectedStep.newConditionForm=!1;case 5:case"end":return t.stop()}}),t)})))()},resetNewConditionForm:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.newCondition.selectedType="stepDone",t.next=3,e.changeNewConditionType();case 3:e.selectedStep.newCondition.selectedValue="";case 4:case"end":return t.stop()}}),t)})))()},listChapters:function(e,t,s){var a=this;return n()(r.a.mark((function o(){var n,i;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Ls.listChapters(e,t,s);case 2:if(n=r.sent,n&&n.data)for(i=0;i<n.data.length;i++)a.selectedStep.chapters.push({label:n.data[i].title,value:n.data[i].chapterId});case 4:case"end":return r.stop()}}),o)})))()},changeChapter:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(l["a"].set(t.selectedStep.form,"chapterId",e),l["a"].set(t.options,"chapterId",e),t.$forceUpdate(),a=0;a<t.selectedStep.form.conditions.length;a++)t.deleteCondition(0);case 4:case"end":return s.stop()}}),s)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},uploadBackgroundImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadBackgroundImage(t.questId,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.selectedStep.form.backgroundImage[t.lang]=n.data.file,t.displayBackgroundImageSize(t.selectedStep.form.backgroundImage[t.lang])):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},displayBackgroundImageSize:function(e){this.media.isSimulated=!0,this.media.simulationPicture=this.uploadUrl+"/upload/quest/"+this.questId+"/step/background/"+e},resetBackgroundImage:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.backgroundImage[e.lang]=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value="");case 2:case"end":return t.stop()}}),t)})))()},uploadVideo:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.selectedStep.form.videoStream[t.lang]=null,t.$q.loading.show(),o=new FormData,o.append("video",a[0]),s.next=9,Ls.uploadVideo(t.questId,o);case 9:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.selectedStep.form.videoStream||(t.selectedStep.form.videoStream={}),t.selectedStep.form.videoStream[t.lang]=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 12:case"end":return s.stop()}}),s)})))()},uploadImageToRecognize:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadImageToRecognize(t.questId,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?t.selectedStep.form.answers=n.data.file:n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadAnswerImage:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.target.files,o[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),n=new FormData,n.append("image",o[0]),a.next=8,Ls.uploadAnswerImage(s.questId,n);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?yt(s.$t("label.FileTooLarge"),"error"):yt(s.$t("label.UnknowUploadError"),"error"):yt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadMemoryImage:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.target.files,o[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),n=new FormData,n.append("image",o[0]),a.next=8,Ls.uploadMemoryImage(s.questId,n);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?yt(s.$t("label.FileTooLarge"),"error"):yt(s.$t("label.UnknowUploadError"),"error"):yt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?yt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.target.files,o[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),n=new FormData,n.append("image",o[0]),a.next=8,Ls.uploadCodeAnswerImage(s.questId,n);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.images[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?yt(s.$t("label.FileTooLarge"),"error"):yt(s.$t("label.UnknowUploadError"),"error"):yt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadPuzzleImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadPuzzleImage(t.questId,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.selectedStep.form.options.picture||(t.selectedStep.form.options.picture={}),l["a"].set(t.selectedStep.form.options.picture,t.lang,n.data.file)):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadItemImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadItemImage(t.questId,t.options.type.code,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(l["a"].set(t.selectedStep.form.options,"picture",n.data.file),t.selectedStep.form.options.pictures&&(t.selectedStep.form.options.pictures[t.lang]=n.data.file)):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadLocatorImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadItemImage(t.questId,t.options.type.code,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?l["a"].set(t.selectedStep.form.options,"locator",n.data.file):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadItemObject:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadItemObject(t.questId,t.options.type.code,o);case 8:if(n=s.sent,!n||!n.hasOwnProperty("data")){s.next=19;break}if(!n.data.file){s.next=16;break}return t.selectedStep.form.options.customModel=n.data.file,s.next=14,t.displayARObject(t.selectedStep.form.options.customModel,t.questId);case 14:s.next=17;break;case 16:n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error");case 17:s.next=20;break;case 19:yt(t.$t("label.ErrorStandardMessage"),"error");case 20:t.$q.loading.hide();case 21:case"end":return s.stop()}}),s)})))()},changeObjectInList:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.form.options.customModel=null,t.next=3,e.displayARObject(e.selectedStep.form.options.model);case 3:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadCharacterImage(t.questId,t.options.type.code,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?l["a"].set(t.selectedStep.form.options,"character",n.data.file):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadAlternativeImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),o=new FormData,o.append("image",a[0]),s.next=8,Ls.uploadAlternativeImage(t.questId,t.options.type.code,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?l["a"].set(t.selectedStep.form.options,"altFile",n.data.file):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},loadAndPrepare3DModel:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i,l,c;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s.$q.loading.show(),a.next=4,s.ModelLoaderAsync(e,t);case 4:o=a.sent,s.$q.loading.hide(),a.next=13;break;case 8:return a.prev=8,a.t0=a["catch"](0),console.error("Error while loading 3D model:",a.t0),yt(s.$t("label.CouldNotDisplayObject"),"error"),a.abrupt("return");case 13:return n=o.scene,i=(new Xa["Box3"]).setFromObject(n),l=i.getCenter(new Xa["Vector3"]),l.multiplyScalar(-1),c=new Xa["Object3D"],n.applyMatrix4((new Xa["Matrix4"]).makeTranslation(l.x,l.y,l.z)),c.add(n),c.up=new Xa["Vector3"](0,0,1),n=c,n.rotation.z=Math.PI/4,a.abrupt("return",{object:n,animations:o.animations});case 24:case"end":return a.stop()}}),a,null,[[0,8]])})))()},ModelLoaderAsync:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=console.log,a.abrupt("return",new Promise((function(a,r){var n=new tr["a"];-1!==e.indexOf("blob:")?n.load(e,a,o,r):t?n.load(s.uploadUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",a,o,r):n.load(s.serverUrl+"/statics/3d-models/"+e+".glb",a,o,r)})));case 2:case"end":return a.stop()}}),a)})))()},displayARObject:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==s.config.locateItem.object){a.next=5;break}o=s,s.$nextTick(n()(r.a.mark((function s(){var a,n,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=document.getElementById("target-canvas"),a){s.next=3;break}throw new Error("missing 3D canvas");case 3:return o.config.locateItem.scene=new Xa["Scene"],n=new Xa["PerspectiveCamera"](70,1.333,.001,1e3),n.up=new Xa["Vector3"](0,0,1),n.rotation.x=Math.PI/2,n.lookAt(new Xa["Vector3"](0,0,0)),o.config.locateItem.camera=n,i=new Xa["WebGLRenderer"]({alpha:!0,antialias:!0}),a.appendChild(i.domElement),o.config.locateItem.renderer=i,o.config.locateItem.renderer.setSize(Math.round(a.clientWidth),Math.round(.8*a.clientWidth)),o.config.locateItem.renderer.gammaOutput=!0,o.config.locateItem.controls=new lo.a(n,i.domElement),l=new Xa["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),o.config.locateItem.scene.add(l),o.config.locateItem.scene.add(new Xa["AmbientLight"](11579568)),s.next=21,o.displayARObjectEnd(e,t);case 21:o.animateModelPreview();case 22:case"end":return s.stop()}}),s)})))),a.next=9;break;case 5:return i=s.config.locateItem.scene.getObjectByName(co),s.config.locateItem.scene.remove(i),a.next=9,s.displayARObjectEnd(e,t);case 9:case"end":return a.stop()}}),a)})))()},displayARObjectEnd:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i,l;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.loadAndPrepare3DModel(e,t);case 2:o=a.sent,n=o.object,n.up=new Xa["Vector3"](0,0,1),n.visible=!0,n.name=co,s.config.locateItem.scene.add(n),i=(new Xa["Box3"]).setFromObject(n),l=new Xa["Vector3"],i.getSize(l),s.config.locateItem.zoom=1.5*Math.max(l.x,l.y,l.z),s.config.locateItem.camera.position.set(0,-s.config.locateItem.zoom,0),s.config.locateItem.controls.update(),s.config.locateItem.object=n;case 15:case"end":return a.stop()}}),a)})))()},animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.changeObjectInList();case 2:case"end":return t.stop()}}),t)})))()},selectObject:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.options.title=t.objectsList[e].name[t.lang],t.selectedStep.form.options.picture="statics/images/object/"+t.objectsList[e].file,t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture;case 4:case"end":return s.stop()}}),s)})))()},getColorsForCodeOptions:function(){var e=this,t=[];return Ca.forEach((function(s){t.push({value:s.value,label:e.$t("color."+s.label)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},deleteColor:function(e){this.config.colorCode.colorsForCode.splice(e,1)},addColor:function(){this.config.colorCode.colorsForCode.push({value:this.config.colorCode.newColor.value,label:this.config.colorCode.newColor.label}),this.config.colorCode.newColor={label:"",value:""}},removeHint:function(e){this.selectedStep.form.hint[this.lang].splice(e,1),this.$forceUpdate()},updateHint:function(e){var t=this;this.$q.dialog({dark:!0,message:this.$t("label.ModifyTheHint"),prompt:{model:this.selectedStep.form.hint[this.lang][e],type:"text"},cancel:!0}).onOk(function(){var s=n()(r.a.mark((function s(a){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.hint[t.lang][e]=a,t.$forceUpdate();case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).onCancel((function(){}))},addHint:function(){this.selectedStep.form.hint&&this.selectedStep.form.hint[this.lang]||(this.selectedStep.form.hint||(this.selectedStep.form.hint={}),this.selectedStep.form.hint[this.lang]=[]),this.selectedStep.form.hint[this.lang].push(this.newHint),this.newHint=""},getQuestItemsAsOptions:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ls.listWonObjects(e.questId,e.stepId,e.quest.version);case 2:s=t.sent,s&&s.data?(e.questItems=s.data,a=[],e.questItems.forEach((function(t){a.push({value:t.picture,label:t.title}),e.config.useItem.stepsOfItems[t.picture]=t.step})),a.sort((function(e,t){return e.label>t.label?1:-1})),e.config.useItem.questItemsAsOptions=a):yt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,r=this.getUseItemPictureWidth();this.selectedStep.form.answerPointerCoordinates.left=Math.round(100*s/r),this.selectedStep.form.answerPointerCoordinates.top=Math.round(75*a/r),this.positionUseItemPointer()},getClickCoordinatesFindItem:function(e){var t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,r=this.getFindItemPictureWidth();this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].left=Math.round(100*s/r),this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].top=Math.round(75*a/r),this.positionFindItemPointer()},positionFindItemPointer:function(){for(var e=this.getFindItemPictureWidth()/100,t=this.config.findItem.crossSize/2,s=0;s<5;s++)document.getElementById("cross"+s)&&(s<this.selectedStep.form.options.nbAreas?(document.getElementById("cross"+s).style.display="block",document.getElementById("cross"+s).style.left=Math.round(this.selectedStep.form.options.coordinates[s].left*e-t)+"px",document.getElementById("cross"+s).style.top=Math.round(this.selectedStep.form.options.coordinates[s].top*(4*e/3)-t)+"px"):document.getElementById("cross"+s).style.display="none")},getFindItemPictureWidth:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},initFindItemElements:function(){this.config.findItem.imageWidth=this.getFindItemPictureWidth(),this.config.findItem.crossSize=this.config.findItem.imageWidth/8,this.config.findItem.imageHeight=4*this.config.findItem.imageWidth/3},getUseItemPictureWidth:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},initUseItemElements:function(){this.config.useItem.imageWidth=this.getUseItemPictureWidth(),this.config.useItem.crossSize=this.config.useItem.imageWidth/8,this.config.useItem.imageHeight=4*this.config.useItem.imageWidth/3},positionUseItemPointer:function(){var e=this.getUseItemPictureWidth()/100,t=this.config.useItem.crossSize/2;document.getElementById("cross").style.left=Math.round(this.selectedStep.form.answerPointerCoordinates.left*e-t)+"px",document.getElementById("cross").style.top=Math.round(this.selectedStep.form.answerPointerCoordinates.top*(4*e/3)-t)+"px"},openGeolocationPopin:function(e){this.config.geolocation.showPopin=!0,this.config.geolocation.currentIndex=e},saveMyGPSLocation:function(){var e=this.config.geolocation.currentIndex,t=this.config.geolocation.position;-1!==e&&this.selectedStep.form.options.locations&&this.selectedStep.form.options.locations.length>0?(this.$set(this.selectedStep.form.options.locations[e],"lat",t.latitude),this.$set(this.selectedStep.form.options.locations[e],"lng",t.longitude)):(this.$set(this.selectedStep.form.options,"lat",t.latitude),this.$set(this.selectedStep.form.options,"lng",t.longitude),this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch()),yt(this.$t("label.LocationSaved"),"success"),this.config.geolocation.showPopin=!1},onNewUserPosition:function(e){this.$set(this.config.geolocation,"position",e.coords)},onUserPositionError:function(e){console.error("UserPositionError",e)},addGPSLocation:function(){this.selectedStep.form.options.locations?this.selectedStep.form.options.locations.push({lat:"",lng:"",destination:""}):this.selectedStep.form.options.locations=[{lat:"",lng:"",destination:""}]},removeGPSLocation:function(e){this.selectedStep.form.options.locations.splice(e,1)},checkMainTextLength:function(e){var t=11,s=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=s&&(e.match(/\n/g)||[]).length<=t},addWriteTextAnswer:function(){this.selectedStep.form.answers.push("")},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){ro()(this.originalStepData)!==ro()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,s=!1,a=void 0;try{for(var r,o=Pa[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;if(n.code===e)return n}}catch(i){s=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},showMedia:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia("background");case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},selectMedia:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.backgroundImage[t.lang]=t.media.items[e].file,t.hideMedia();case 2:case"end":return s.stop()}}),s)})))()},loadMedia:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.listMedia(t.quest.questId,t.quest.version,e);case 2:a=s.sent,a&&a.data&&(t.media.items=a.data);case 4:case"end":return s.stop()}}),s)})))()},hideMedia:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.media.isOpened=!1,e.media.isSimulated=!1,"use-item"===e.options.type.code&&lt.setTimeout(e.initUseItemElements,2e3),"find-item"===e.options.type.code&&lt.setTimeout(e.initFindItemElements,2e3);case 4:case"end":return t.stop()}}),t)})))()},getIotObjectsAsOptions:function(e){var t=this;if(!["wait-for-event","trigger-event"].includes(e))throw new Error("Unsupported step type: "+e);var s=[];return _a.forEach((function(a){a.step===e&&s.push({value:a.code,label:t.$t("iotObjects."+a.code)})})),s.sort((function(e,t){return e.label>t.label?1:-1})),s},updateIotStepOptions:function(){for(var e=["range","rangeX","rangeY","message","answer"],t=1;t<=3;t++)e.push("range"+t);for(var s=0,a=e;s<a.length;s++){var r=a[s];delete this.selectedStep.form.options[r]}switch(this.selectedStep.form.options.object){case"keypad":this.$set(this.selectedStep.form.options,"answer","");break;case"joystick":this.$set(this.selectedStep.form.options,"rangeX",{min:100,max:200}),this.$set(this.selectedStep.form.options,"rangeY",{min:100,max:200});break;case"distance":this.$set(this.selectedStep.form.options,"range",{min:50,max:150});break;case"pot":for(var o=1;o<=3;o++)this.$set(this.selectedStep.form.options,"range"+o,{min:100,max:200});break;case"escapebox":break;case"lcd":this.$set(this.selectedStep.form.options,"message","");break;case"buzzer":this.$set(this.selectedStep.form.options,"duration",1e3),this.$set(this.selectedStep.form.options,"frequency",440);break;case"chest":break;case"relay":break;default:throw new Error("unknown IoT object code '"+this.selectedStep.form.options.object+"'")}},activateCountDown:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,!0===e&&t.$q.dialog({dark:!0,message:t.$t("label.CountDownWarning"),ok:!0,cancel:!0}).onCancel(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.selectedStep.form.countDownTime.enabled=!1;case 1:case"end":return e.stop()}}),e)}))));case 2:case"end":return s.stop()}}),s)})))()},selectFindItemArea:function(e){for(var t=0;t<this.selectedStep.form.options.nbAreas;t++)document.getElementById("cross"+t)&&(document.getElementById("cross"+t).style.opacity=.5);document.getElementById("cross"+e)&&(document.getElementById("cross"+e).style.opacity=1),this.config.findItem.currentArea=e},changeNbAreas:function(){if(this.selectedStep.form.options&&this.selectedStep.form.options.coordinates)if(this.selectedStep.form.options.coordinates.length<this.selectedStep.form.options.nbAreas){for(var e=this.selectedStep.form.options.coordinates.length;e<this.selectedStep.form.options.nbAreas;e++)this.selectedStep.form.options.coordinates.push({top:50,left:50});this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1,this.selectFindItemArea(this.config.findItem.currentArea-1)}else this.selectedStep.form.options.coordinates.length=this.selectedStep.form.options.nbAreas,this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1;return this.positionFindItemPointer(),!0},showGeolocationModeHelp:function(e){this.$q.dialog({title:this.$t("label."+e),message:this.$t("label."+e+"Help")})},uploadAudio:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("audio",a[0]),s.next=8,Ls.uploadAudio(t.quest.questId,o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(yt(t.$t("label.UploadSucessful"),"positive"),t.$set(t.selectedStep.form.audioStream,t.lang,n.data.file)):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeAudio:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.audioStream[e.lang]="";case 1:case"end":return t.stop()}}),t)})))()}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:Xt["required"]},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:Xt["required"]},imagePath:{}}:{text:{},imagePath:{required:Xt["required"]}}}};break;case"code-keypad":e.answers={required:Xt["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:Xt["required"]};break;case"geolocation":break;case"info-video":e.videoStream={required:Xt["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:Xt["required"]}};break;case"new-item":e.options={picture:{required:Xt["required"]},title:{required:Xt["required"]}};break;case"character":e.options={character:{required:Xt["required"]}};break;case"use-item":e.backgroundImage={required:Xt["required"]},e.answerItem={required:Xt["required"]};break;case"write-text":e.answers={required:Xt["required"]};break;case"locate-item-ar":e.options={lat:{required:Xt["required"]},lng:{required:Xt["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:Xt["required"]}:e.options.picture={required:Xt["required"]};break;case"touch-object-on-marker":e.options={model:{required:Xt["required"]}};break;case"wait-for-event":e.options={protocol:{required:Xt["required"]},object:{required:Xt["required"]}};break}return{selectedStep:{form:e}}}},po=uo,mo=(s("fd92"),s("b650"),Object(Te["a"])(po,to,so,!1,null,"056b81a2",null)),ho=mo.exports,fo=s("fb4c"),go=s("534a"),bo=s("e18e");l["a"].directive("sortable",{inserted:function(e,t){return new eo.a(e,t.value||{})}});var vo={components:{stepSettings:ho,stepPlay:wr,story:Ha},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},samples:{selected:"",list:[{questId:"61b315e6826fe25856cb573d",name:this.$t("samples.sample1")},{questId:"61bcfe7713927b4a5e2cca59",name:this.$t("samples.sample2")},{questId:"61b1dba8826fe25856cb56f7",name:this.$t("samples.sample3")}]},form:{fields:{title:{},category:"",priceForPlayer:"",tierPriceForPlayer:"",premiumPrice:{},playersNumber:1,description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,snapshots:[],town:"",country:"",zipcode:"",editorMode:"simple",customization:{audio:{},color:"",logo:"",character:"",removeScoring:!1,endMessage:{fr:"",en:""},endMessageForPerfectScore:{fr:"",en:""},font:"standard",fontColor:"#000000",qrCodeMessage:{fr:"",en:""},geolocationMessage:{fr:"",en:""},hideInventory:!1,hideFullScreen:!1,authorName:"",userReplay:"yes"},rewardPicture:"",readMoreLink:"",limitNumberOfPlayer:0,scheduling:[],forcePlayerToHaveAccount:!1,shareUserDataWithCreator:!1,countDownTime:{enabled:!1,stopGame:!1}},categories:lt.buildOptionsForSelect(fo,{valueField:"id",labelField:"name"},this.$t),languages:lt.buildOptionsForSelect(bo,{valueField:"code",labelField:"name"},this.$t),levels:lt.buildOptionsForSelect(go,{valueField:"id",labelField:"name"},this.$t),prices:[{label:"0,99 €",value:"premiumprice1"},{label:"1,99 €",value:"premiumprice2"},{label:"2,99 €",value:"premiumprice3"},{label:"4,99 €",value:"premiumprice5"},{label:"7,99 €",value:"premiumprice8"},{label:"9,99 €",value:"premiumprice10"},{label:"14,99 €",value:"premiumprice15"},{label:"19,99 €",value:"premiumprice20"}],fonts:[{label:"Standard",value:"standard",class:"font-standard"},{label:"Arial",value:"arial",class:"font-arial"},{label:"Garamond",value:"garamond",class:"font-garamond"},{label:"Courrier New",value:"courrier",class:"font-courrier"},{label:"Brush script",value:"brush",class:"font-brush"}],userReplays:[{label:this.$t("label.Yes"),value:"yes"},{label:this.$t("label.No"),value:"no"},{label:this.$t("label.OnceADay"),value:"onceaday"}],players:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],times:[{label:"00h",value:0},{label:"01h",value:1},{label:"02h",value:2},{label:"03h",value:3},{label:"04h",value:4},{label:"05h",value:5},{label:"06h",value:6},{label:"07h",value:7},{label:"08h",value:8},{label:"09h",value:9},{label:"10h",value:10},{label:"11h",value:11},{label:"12h",value:12},{label:"13h",value:13},{label:"14h",value:14},{label:"15h",value:15},{label:"16h",value:16},{label:"17h",value:17},{label:"18h",value:18},{label:"19h",value:19},{label:"20h",value:20},{label:"21h",value:21},{label:"22h",value:22},{label:"23h",value:23},{label:"24h",value:24}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120},{label:"180 "+this.$t("label.minutes"),value:180},{label:"240 "+this.$t("label.minutes"),value:240},{label:"300 "+this.$t("label.minutes"),value:300},{label:"360 "+this.$t("label.minutes"),value:360},{label:"420 "+this.$t("label.minutes"),value:420},{label:"480 "+this.$t("label.minutes"),value:480},{label:this.$t("label.DoNotDisplay"),value:999}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1}},selectedItem:null,hint:{isOpened:!1,label:"",suggest:!1,number:0},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],payments:[],statistics:[],canMoveNextStep:!1,canPass:!1,showPaymentBox:!1,showTierPaymentBox:!1,storage:"",itemUsed:null,isIOs:lt.isIOS(),serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",titleMaxLength:50,isHybrid:!1,isAdmin:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1},currentDate:null,score:{nbGoodAnwers:0,nbQuestions:0}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:lt.clearAllRunningProcesses(),e.$route.params.questId&&""!==e.$route.params.questId?("undefined"!==typeof window.cordova&&(e.isHybrid=!0),e.loadQuestData()):e.$router.push("/quest/create/welcome"),e.$store.state.user.isAdmin&&(e.isAdmin=!0),e.refreshCurrentDate();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadQuestData:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.questId=e.$route.params.questId,t.next=3,ct.getLastById(e.questId,"all");case 3:if(s=t.sent,!s){t.next=55;break}if(e.quest=s.data,"draft"===e.quest.status||e.isAdmin||(e.readOnly=!0),e.editor.initMode=e.quest.editorMode,e.quest.languages&&e.quest.languages.length>0&&"fr"===e.languages.current)for(e.languages.current=e.quest.languages[0].lang,a=0;a<e.quest.languages.length;a++)e.languages.available.push({label:e.$t("language."+e.quest.languages[a].lang),value:e.quest.languages[a].lang});return e.quest.description[e.languages.current]&&""!==e.quest.description[e.languages.current]||(e.quest.description[e.languages.current]=e.quest.description[e.quest.mainLanguage]),e.quest.picture[e.languages.current]&&""!==e.quest.picture[e.languages.current]||(e.quest.picture[e.languages.current]=e.quest.picture[e.quest.mainLanguage]),e.form.fields.questId=e.quest.questId,e.quest.title&&Object.keys(e.quest.title).length>0?e.form.fields.title=e.quest.title:(e.form.fields.title={},e.form.fields.title[e.languages.current]="-"),e.form.fields.description=e.quest.description,e.form.fields.category=e.quest.category,e.form.fields.location=e.quest.location,e.form.fields.languages=e.quest.languages,e.form.fields.mainLanguage=e.quest.mainLanguage,e.form.fields.level=e.quest.level,e.form.fields.duration=e.quest.duration,e.form.fields.picture=e.quest.picture,e.form.fields.thumb=e.quest.thumb,e.form.fields.snapshots=e.quest.snapshots,e.form.fields.editorMode=e.quest.editorMode,e.form.fields.customization=Object.assign(e.form.fields.customization,e.quest.customization),e.form.fields.rewardPicture=e.quest.rewardPicture,e.form.fields.readMoreLink=e.quest.readMoreLink,e.form.fields.limitNumberOfPlayer=e.quest.limitNumberOfPlayer,e.form.fields.scheduling=e.quest.scheduling,e.form.fields.forcePlayerToHaveAccount=e.quest.forcePlayerToHaveAccount||!1,e.form.fields.shareUserDataWithCreator=e.quest.shareUserDataWithCreator||!1,e.form.fields.playersNumber=e.quest.playersNumber,e.form.fields.startingPlace=e.form.fields.location.address||"",e.form.fields.zipcode=e.form.fields.location&&e.form.fields.location.zipcode?e.form.fields.location.zipcode:"",e.form.fields.town=e.form.fields.location&&e.form.fields.location.town?e.form.fields.location.town:"",e.form.fields.country=e.form.fields.location&&e.form.fields.location.country?e.form.fields.location.country:"",e.quest.countDownTime&&(e.form.fields.countDownTime=Object.assign(e.form.fields.countDownTime,e.quest.countDownTime)),"room"===e.quest.type?e.form.fields.priceForPlayer=e.quest.premiumPrice.manual:"quest"===e.quest.type&&(e.quest.premiumPrice||(e.form.fields.premiumPrice={}),e.quest.premiumPrice.androidId&&(e.form.fields.priceForPlayer=e.quest.premiumPrice.androidId),e.quest.premiumPrice.active?e.showPaymentBox=!0:e.showPaymentBox=!1,e.quest.premiumPrice.tier?(e.form.fields.tierPriceForPlayer=e.quest.premiumPrice.manual,e.showTierPaymentBox=!0):e.showTierPaymentBox=!1),e.form.fields.location.hasOwnProperty("coordinates")&&2===e.form.fields.location.coordinates.length&&(o=e.form.fields.location.coordinates,e.form.fields.location={lng:o[0],lat:o[1]}),e.tabs.progress=e.quest.creationStep,e.tabs.progress<=3&&(e.tabs.selected=e.tabs.list[Math.min(e.tabs.progress,2)]),t.next=43,e.refreshStepsList();case 43:return t.next=45,e.listEditors();case 45:return t.next=47,e.listInvitees();case 47:return t.next=49,e.listReviews();case 49:return t.next=51,e.getStatistics();case 51:e.quest.access&&"private"===e.quest.access&&e.getPrivateRanking(),e.getReadableStorageUsage(),t.next=56;break;case 55:yt(e.$t("label.ErrorStandardMessage"),"error");case 56:case"end":return t.stop()}}),t)})))()},movePremium:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=11;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=11;break}return t.next=4,ct.CheckIfCanBeMovedPremium(e.questId);case 4:if(s=t.sent,!(s&&s.data&&s.data.canBePremium)){t.next=10;break}return t.next=8,ct.MoveToPremium(e.questId);case 8:a=t.sent,a&&a.data&&a.data.status&&"ok"===a.data.status?(e.quest.isPremium=!0,e.quest.size.limit=6e8):yt(e.$t("label.ErrorStandardMessage"),"error");case 10:e.premium.isOpened=!1;case 11:case"end":return t.stop()}}),t)})))()},openPremiumBox:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=7;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=6;break}return t.next=4,ct.CheckIfCanBeMovedPremium(e.questId);case 4:s=t.sent,s&&s.data&&s.data.canBePremium&&(e.premium.canMovePremium=!0);case 6:e.premium.isOpened=!0;case 7:case"end":return t.stop()}}),t)})))()},uploadReward:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadReward(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.rewardPicture=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeReward:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.rewardPicture=null;case 1:case"end":return t.stop()}}),t)})))()},changeEditorMode:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("advanced"!==e.form.fields.editorMode){t.next=4;break}e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:case"end":return t.stop()}}),t)})))).onCancel(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.editorMode="simple";case 1:case"end":return t.stop()}}),t)})))),t.next=6;break;case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})))()},refreshCurrentDate:function(){var e=new Date;this.currentDate=qr()(e).format("DD/MM/YYYY, k:mm")},refreshStepsList:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.stepsMissing=!1,e.$q.loading.show(),t.next=4,Ls.listForAQuest(e.questId,e.quest.version,"all");case 4:if(s=t.sent,!s||!s.data){t.next=83;break}if(e.chapters.items=s.data.chapters,a=s.data.steps,"simple"!==e.form.fields.editorMode){t.next=12;break}e.chapters.items&&e.chapters.items.length>0&&(e.chapters.items[0].steps=a),t.next=69;break;case 12:o=0;case 13:if(!(o<e.chapters.items.length)){t.next=69;break}for(n=!1,i=[],l=[],c=[],u=[],d=0;d<a.length;d++)a[d].chapterId.toString()===e.chapters.items[o].chapterId.toString()&&(e.chapters.items[o].steps||(e.chapters.items[o].steps=[]),"end-chapter"===a[d].type&&(n=!0),c.push(a[d]));for(p=[],d=0;d<c.length;d++)p.push(c[d].stepId.toString());m=[],h=0;case 24:if(!(p.length>0&&h<1e3)){t.next=58;break}h++,d=0;case 27:if(!(d<c.length)){t.next=56;break}if(f=c[d].stepId.toString(),-1!==m.indexOf(f)){t.next=53;break}if(c[d].conditions&&0===c[d].conditions.length&&(m.unshift(f),p.splice(p.indexOf(f),1),i.push(c[d].title[e.languages.current])),!(c[d].conditions&&c[d].conditions.length>0)){t.next=53;break}g=0,b=0;case 34:if(!(b<c[d].conditions.length)){t.next=51;break}if(-1!==c[d].conditions[b].indexOf("counter")||-1!==c[d].conditions[b].indexOf("combineobject")||-1!==c[d].conditions[b].indexOf("haveobject")||-1!==c[d].conditions[b].indexOf("nothaveobject")){t.next=48;break}if(v=c[d].conditions[b].replace("stepDone_",""),v=v.replace("stepSuccess_",""),v=v.replace("stepFail_",""),v=v.replace("stepRandom_",""),-1!==v.indexOf("stepAnswerNb")&&(w=v.split("_"),v=w[1]),-1!==m.indexOf(v)){t.next=46;break}return-1===p.indexOf(v)&&(l.push(f),p.splice(p.indexOf(f),1),m.push(f)),t.abrupt("continue",53);case 46:y=m.indexOf(v),y>g&&(g=y);case 48:b++,t.next=34;break;case 51:m.length>=g?m.splice(g+1,0,f):m.push(f),p.splice(p.indexOf(f),1);case 53:d++,t.next=27;break;case 56:t.next=24;break;case 58:for(d=0;d<m.length;d++)for(b=0;b<c.length;b++)m[d]===c[b].stepId.toString()&&(-1!==l.indexOf(c[b].stepId.toString())&&(c[b].error="FollowingStepsHaveInvalidCondition"),0===d||0===c[b].conditions.length||c[b].conditions.length>1||"locate-marker"===c[b].type||"geolocation"===c[b].type?c[b].level=1:c[b].level=2,e.chapters.items[o].steps.push(c[b]));for(q=!1,b=0;b<c.length;b++){for(q=!1,d=0;d<m.length;d++)m[d]===c[b].stepId.toString()&&(q=!0);q||(c[b].error="FollowingStepsHaveInvalidCondition",c[b].level=1,e.chapters.items[o].steps.push(c[b]))}e.chapters.items[o].warnings=[],n||e.chapters.items[o].warnings.push({noEndOfChapter:!0}),i.length>1&&e.chapters.items[o].warnings.push({moreThan1StepWithNoCondition:i}),u.length>0&&e.chapters.items[o].warnings.push({stepsWithMissingParent:u}),l.length>0&&e.chapters.items[o].warnings.push({stepWithNoParent:l});case 66:o++,t.next=13;break;case 69:a&&a.length>0&&e.tabs.progress<2&&(e.tabs.progress=2),k=!1,x=0;case 72:if(!(x<a.length)){t.next=80;break}if(C=a[x],"locate-marker"!==C.type){t.next=77;break}return k=!0,t.abrupt("break",80);case 77:x++,t.next=72;break;case 80:e.quest.hasLocateMarkerSteps=k,t.next=84;break;case 83:e.warnings.stepsMissing=!0;case 84:e.$q.loading.hide();case 85:case"end":return t.stop()}}),t)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",s=0;s<e.length;s++)if(e[s].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[s].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[s].moreThan1StepWithNoCondition.join(", ")+". "),e[s].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[s].hasOwnProperty("stepsWithMissingParent")){for(var a in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[s].stepsWithMissingParent)for(var r=0;r<this.chapters.items.length;r++)for(var o=0;o<this.chapters.items[r].steps.length;o++)this.chapters.items[r].steps[o].stepId.toString()===a&&(t+=this.chapters.items[r].steps[o].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("public"!==e.quest.access||0!==e.form.fields.location.lat&&0!==e.form.fields.location.lng){t.next=3;break}return yt(e.$t("label.YouMustDefineStartLocation"),"warning"),t.abrupt("return");case 3:if(e.$v.form.fields.$touch(),e.$v.form.fields.$error){t.next=17;break}return s={languages:[e.form.fields.mainLanguage],version:e.quest.version,type:e.quest.type,location:{type:"Point",coordinates:[e.form.fields.location.lng,e.form.fields.location.lat],town:e.form.fields.town,country:e.form.fields.country,zipcode:e.form.fields.zipcode,address:e.form.fields.startingPlace}},e.form.fields.premiumPrice||(e.form.fields.premiumPrice={}),e.showPaymentBox&&(e.form.fields.premiumPrice.active=!0),e.showTierPaymentBox&&(e.form.fields.premiumPrice.tier=!0),a=Object.assign({},e.form.fields,s),a.questId||(a.questId=e.questId),e.$q.loading.show(),t.next=14,ct.save(a);case 14:o=t.sent,e.$q.loading.hide(),o&&o.data?(e.quest.playersNumber=e.form.fields.playersNumber,e.tabs.progress<1&&("quest"===e.quest.type?(e.tabs.progress=1,e.tabs.selected="steps"):(e.tabs.progress=2,e.tabs.selected="publish")),yt(e.$t("label.QuestSaved"),"info")):yt(e.$t("label.ErrorStandardMessage"),"error");case 17:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadPicture(o);case 8:return n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?t.form.fields.picture[t.languages.current]=n.data.file:n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),s.next=12,ct.uploadThumb(o);case 12:i=s.sent,i&&i.hasOwnProperty("data")?i.data.file?t.form.fields.thumb[t.languages.current]=i.data.file:i.data.message&&"Error: File too large"===i.data.message&&yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 15:case"end":return s.stop()}}),s)})))()},uploadThumb:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadThumb(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?t.form.fields.thumb[t.languages.current]=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadSnapshot:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.form.fields.snapshots&&t.form.fields.snapshots.length>2)){s.next=2;break}return s.abrupt("return",!1);case 2:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=6;break}return s.abrupt("return");case 6:return o=new FormData,o.append("image",a[0]),s.next=10,ct.uploadSnapshot(o,t.questId);case 10:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?t.form.fields.snapshots.push(n.data.file):n.data.message&&"Error: File too large"===n.data.message&&yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 13:case"end":return s.stop()}}),s)})))()},removeSnapshot:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.quest.snapshots.splice(e,1);case 1:case"end":return s.stop()}}),s)})))()},uploadLogo:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadLogo(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.logo=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeLogo:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.logo=null;case 1:case"end":return t.stop()}}),t)})))()},uploadAudio:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("audio",a[0]),s.next=8,ct.uploadAudio(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(yt(t.$t("label.UploadSucessful"),"positive"),t.form.fields.customization.audio||(t.form.fields.customization.audio={}),t.$set(t.form.fields.customization.audio,t.languages.current,n.data.file)):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeAudio:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.audio[e.languages.current]="";case 1:case"end":return t.stop()}}),t)})))()},uploadCharacter:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadCharacter(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.character=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeCharacter:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.character=null;case 1:case"end":return t.stop()}}),t)})))()},uploadCharacterOnMap:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return o=new FormData,o.append("image",a[0]),s.next=8,ct.uploadCharacterOnMap(o);case 8:n=s.sent,n&&n.hasOwnProperty("data")?n.data.file?(t.form.fields.customization.characterOnMap=n.data.file,t.$forceUpdate()):n.data.message&&"Error: File too large"===n.data.message?yt(t.$t("label.FileTooLarge"),"error"):yt(t.$t("label.UnknowUploadError"),"error"):yt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeCharacterOnMap:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.characterOnMap=null;case 1:case"end":return t.stop()}}),t)})))()},startStory:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.countForUser(e.$store.state.user._id);case 2:s=t.sent,s.data&&s.data<2&&(e.story.active=!0,null===e.story.step&&"settings"===e.tabs.selected&&(e.story.step=17));case 4:case"end":return t.stop()}}),t)})))()},getCurrentLocation:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),navigator.geolocation.getCurrentPosition(e.fillLocation,e.getLocationError,{timeout:5e3,maximumAge:0});case 2:case"end":return t.stop()}}),t)})))()},getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var s=new google.maps.Geocoder;s.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,s){t.$q.loading.hide(),"OK"===s&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),yt(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.form.fields.location={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},t.form.fields.town=t.getCity(e),t.form.fields.country=t.getCountry(e),t.form.fields.zipcode=t.getZipcode(e),t.form.fields.startingPlace=e.formatted_address||"";case 5:case"end":return s.stop()}}),s)})))()},getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("postal_code"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("locality"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("country"===e.address_components[t].types[s])return e.address_components[t].short_name;return""},onChapterListUpdate:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ls.moveChapter(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=s.sent,a&&t.chapters.items.splice(e.newIndex,0,t.chapters.items.splice(e.oldIndex,1)[0]);case 4:case"end":return s.stop()}}),s)})))()},onStepListUpdate:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ls.move(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=s.sent,a&&t.chapters.items[0].steps.splice(e.newIndex,0,t.chapters.items[0].steps.splice(e.oldIndex,1)[0]);case 4:case"end":return s.stop()}}),s)})))()},publish:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.checkIfTestable();case 2:if(a=s.sent,!a){s.next=36;break}for(o="unpublish",i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].lang&&t.form.fields.languages[i].lang===e&&t.form.fields.languages[i].published&&(o="publish");if("publish"!==o){s.next=28;break}if("unpublished"!==t.quest.status&&"draft"!==t.quest.status){s.next=21;break}if("private"!==t.quest.access||t.quest.isPremium){s.next=16;break}return t.$q.loading.show(),s.next=12,ct.publish(t.questId,e);case 12:t.$q.loading.hide(),t.quest.status="published",s.next=18;break;case 16:l=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l.$q.loading.show(),t.next=3,ct.publish(l.questId,e);case 3:l.$q.loading.hide(),l.quest.status="tovalidate";case 5:case"end":return t.stop()}}),t)})))).onCancel(n()(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=0;t<l.form.fields.languages.length;t++)l.form.fields.languages[t].published=!1;case 1:case"end":return e.stop()}}),e)}))));case 18:t.readOnly=!0,s.next=25;break;case 21:return t.$q.loading.show(),s.next=24,ct.publish(t.questId,e);case 24:t.$q.loading.hide();case 25:t.tabs.progress=3,s.next=34;break;case 28:return t.$q.loading.show(),s.next=31,ct.unpublish(t.questId,e);case 31:t.$q.loading.hide(),t.quest.status="unpublished",t.tabs.progress=2;case 34:s.next=38;break;case 36:for(yt(t.$t("label.YourQuestContainsErrorsInSteps"),"error"),i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].published=!1;case 38:case"end":return s.stop()}}),s)})))()},isReadOnly:function(){return!(this.isAdmin||"disabled"!==this.quest.status&&"tovalidate"!==this.quest.status)},unpublish:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="unpublished",e.$q.loading.show(),t.next=4,ct.unpublish(e.questId);case 4:e.$q.loading.hide(),yt(e.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return t.stop()}}),t)})))()},testQuest:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfTestable();case 2:s=t.sent,s&&(e.isHybrid?e.$router.push("/quest/play/"+e.questId):e.$q.dialog({dark:!0,message:e.$t("label.TestWithSimulatorWarning"),ok:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/quest/play/"+e.questId);case 1:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t)})))()},checkIfTestable:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<e.chapters.items.length)){t.next=8;break}if(!(e.chapters.items[s].warnings&&e.chapters.items[s].warnings.length>0)){t.next=5;break}return yt(e.$t("label.YourQuestContainsErrorsInSteps"),"error"),t.abrupt("return",!1);case 5:s++,t.next=1;break;case 8:if(!(e.editor.items&&e.quest.playersNumber&&e.editor.items.length>=e.quest.playersNumber)){t.next=18;break}return t.next=11,Rs.closeInProgressRuns(e.questId);case 11:if(!(e.quest.playersNumber>1)){t.next=16;break}return t.next=14,Rs.createMultiplayerRunForTesters(e.questId);case 14:if(a=t.sent,a){for(o=[],s=0;s<e.editor.items.length;s++)o.push(e.editor.items[s].name);yt(e.$t("label.HereAreTheTesters",{nameList:o.join(", ")}),"info")}case 16:t.next=20;break;case 18:return yt(e.$t("label.YouNeedAtLeastXEditorsToTest",{nb:e.quest.playersNumber}),"error"),t.abrupt("return",!1);case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})))()},removeQuest:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.remove(s.questId,s.quest.version);case 2:e.$router.push("/home");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},duplicateQuest:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.clone(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&s.data.newId&&(a=s.data.newId,o=e,e.$q.dialog({dark:!0,message:e.$t("label.DoYouWantToOpenClonedQuest"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.$router.push("/quest/settings/"+a);case 1:case"end":return e.stop()}}),e)})))));case 4:case"end":return t.stop()}}),t)})))()},removeStep:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ls.remove(a.questId,e,a.quest.version);case 2:return t.next=4,a.refreshStepsList();case 4:case"end":return t.stop()}}),t)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return s.stop()}}),s)})))()},createNewVersion:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.quest.status="waiting",e.$q.dialog({dark:!0,message:e.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="draft",t.next=3,ct.createNewVersion(s.questId);case 3:e.$router.push("/quest/builder/"+s.questId);case 4:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})))()},removeChapter:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,o=0;case 2:if(!(o<t.chapters.items.length)){s.next=10;break}if(t.chapters.items[o].chapterId.toString()!==e){s.next=7;break}if(!(t.chapters.items[o].steps&&t.chapters.items[o].steps.length>0)){s.next=7;break}return yt(t.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),s.abrupt("return",!1);case 7:o++,s.next=2;break;case 10:t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function s(){var o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ls.removeChapter(a.questId,e,a.quest.version);case 2:return o=a.chapters.items.map((function(e){return e.chapterId})).indexOf(e),a.chapters.items.splice(o,1),s.next=6,t.refreshStepsList();case 6:case"end":return s.stop()}}),s)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return s.stop()}}),s)})))()},modifyChapter:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(a=t,o={name:"",position:0},i=0;i<t.chapters.items.length;i++)t.chapters.items[i].chapterId.toString()===e&&(o.name=t.chapters.items[i].title[t.languages.current]?t.chapters.items[i].title[t.languages.current]:"",o.position=i);t.$q.dialog({dark:!0,message:t.$t("label.ModifyTheChapter"),prompt:{model:o.name,type:"text"},cancel:!0}).onOk(function(){var t=n()(r.a.mark((function t(s){var n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n[a.languages.current]=s,t.next=4,Ls.modifyChapter({questId:a.questId,version:a.quest.version,chapterId:e,title:n});case 4:a.chapters.items[o.position].title[a.languages.current]=s;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return s.stop()}}),s)})))()},addChapter:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var t=n()(r.a.mark((function t(a){var o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={},o[s.languages.current]=a,t.next=4,Ls.modifyChapter({questId:s.questId,version:s.quest.version,chapterId:"0",title:o});case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},modifyStep:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.chapters.showNewStepPageSettings=!0,e&&e.stepId&&(a=t,setTimeout((function(){a.stepId=e.stepId,a.chapters.newStep.type=a.getStepTypeInformations(e.type),a.chapters.newStep.chapterId=e.chapterId,a.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),t.closeAllPanels(),t.closeStepTypePage(),t.chapters.showNewStepOverview=!1,t.chapters.showNewStep=!1,t.chapters.reloadStepPlay=!1,t.moveToTop();case 8:case"end":return s.stop()}}),s)})))()},playStep:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.chapters.reloadStepPlay=!1,e&&e.stepId&&(t.stepId=e.stepId,e.id=e.stepId,t.chapters.newStep.type=t.getStepTypeInformations(e.type),t.chapters.newStep.chapterId=e.chapterId,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop),t.closeAllPanels(),s.next=5,Ls.getById(t.stepId,t.quest.version,t.languages.current);case 5:a=s.sent,a&&a.data?(t.chapters.newStep.overviewData=a.data,t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!0,t.hint.number=0,t.moveToTop(),o=t,setTimeout((function(){o.chapters.reloadStepPlay=!0}),300),t.computeGoodAnswers()):yt(t.$t("label.ErrorStandardMessage"),"error");case 7:case"end":return s.stop()}}),s)})))()},moveToPosition:function(e){return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.scrollTo(0,e);case 1:case"end":return t.stop()}}),t)})))()},closeOverview:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resetStepData(),e.closeAllPanels(),e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.showNewStepOverview=!1,e.tabs.selected="steps",lt.clearAllNotifications(),e.story.active&&7===e.countSteps()&&(e.story.step=22);case 7:case"end":return t.stop()}}),t)})))()},resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1,this.hint.number=0},closeStepSettingsPage:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:return e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.newStep.type={},e.stepId=-1,e.chapters.showNewStepPageSettings=!1,e.tabs.selected="steps",t.next=9,e.refreshMediaSize();case 9:case"end":return t.stop()}}),t)})))()},addStep:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e||(e=t.chapters.items[0].chapterId),t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepOverview=!1,t.chapters.showNewStepPage=!0,t.chapters.newStep.chapterId=e,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop,a=0,o=0;case 8:if(!(o<t.chapters.items.length)){s.next=16;break}if(t.chapters.items[o].chapterId.toString()!==e||!t.chapters.items[o].steps){s.next=13;break}return n=t.chapters.items[o].steps.length,n>0&&(a=t.chapters.items[o].steps[n-1].stepId),s.abrupt("break",16);case 13:o++,s.next=8;break;case 16:t.chapters.newStep.previousStepId=a;case 17:case"end":return s.stop()}}),s)})))()},insertStep:function(e,t){var s=this;return n()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e||(e=s.chapters.items[0].chapterId),s.chapters.showNewStepPage=!0,s.chapters.showNewStepPageSettings=!1,s.chapters.showNewStepOverview=!1,s.chapters.newStep.chapterId=e,s.chapters.newStep.previousStepId=t;case 6:case"end":return a.stop()}}),a)})))()},duplicateStep:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ls.duplicate(t.questId,e,t.quest.version);case 2:return s.next=4,t.refreshStepsList();case 4:case"end":return s.stop()}}),s)})))()},selectLanguage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.languages.current=e,a=!1,t.quest.languages)for(o=0;o<t.quest.languages.length;o++)t.quest.languages[o].lang===e&&(a=!0);if(a){s.next=6;break}return s.next=6,ct.addLanguage(t.questId,e);case 6:return s.next=8,t.loadQuestData();case 8:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]),t.story.active&&(t.story.step=18);case 10:case"end":return s.stop()}}),s)})))()},changeLanguage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=!1,t.quest.languages)for(o=0;o<t.quest.languages.length;o++)t.quest.languages[o].lang===e&&(a=!0);if(a){s.next=7;break}i=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.addLanguage(i.questId,e);case 2:return s.next=4,t.loadQuestData();case 4:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 5:case"end":return s.stop()}}),s)})))).onCancel(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.languages.current=i.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),s.next=10;break;case 7:return s.next=9,t.loadQuestData();case 9:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 10:case"end":return s.stop()}}),s)})))()},closePrivateQuest:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct.closePrivate(s.questId,s.quest.version);case 2:return s.quest.status="old",e.next=5,s.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getPrivateRanking:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rs.listScoresForThisQuest(e.questId);case 2:s=t.sent,s&&s.data&&(e.ranking.items=s.data,e.ranking.items.sort(e.compareScore),e.refreshPosition());case 4:case"end":return t.stop()}}),t)})))()},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return Pa.filter((function(s){return s.category===e&&s.enabled&&!(("end-chapter"===s.code||"increment-counter"===s.code)&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.chapters.newStep.type=e,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!1,t.stepId="0",t.chapters.showNewStepPageSettings=!0,t.moveToTop(),0===t.countSteps()&&t.story.active&&(t.story.step=20);case 7:case"end":return s.stop()}}),s)})))()},countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,"end-chapter"!==e.type&&"increment-counter"!==e.type){s.next=8;break}return s.next=5,t.closeOverview();case 5:return s.next=7,t.refreshStepsList();case 7:return s.abrupt("return",!1);case 8:return t.chapters.showNewStepOverview=!0,t.stepId=e.id,s.next=12,Ls.getById(t.stepId,t.quest.version,t.languages.current);case 12:if(a=s.sent,!a||!a.data){s.next=28;break}return t.chapters.newStep.overviewData=a.data,t.moveToTop(),o=t,setTimeout((function(){o.chapters.reloadStepPlay=!0}),300),t.story.active&&0===t.countSteps()&&(t.story.step=21),s.next=21,t.refreshMediaSize();case 21:return s.next=23,t.refreshStepsList();case 23:if("use-item"!==t.chapters.newStep.overviewData.type){s.next=26;break}return s.next=26,t.fillInventory();case 26:s.next=29;break;case 28:yt(t.$t("label.ErrorStandardMessage"),"error");case 29:case"end":return s.stop()}}),s)})))()},trackStepPlayed:function(e){var t=this;return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0;case 1:case"end":return e.stop()}}),e)})))()},trackStepSuccess:function(e){var t=this;return n()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0,"image-over-flow"!==t.chapters.newStep.overviewData.type&&"binocular"!==t.chapters.newStep.overviewData.type&&t.hideHint();case 2:case"end":return e.stop()}}),e)})))()},trackStepPass:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.canPass=!0;case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hideHint();case 1:case"end":return t.stop()}}),t)})))()},trackMessage:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.canMoveNextStep=!0);case 1:case"end":return s.stop()}}),s)})))()},addEditor:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,ct.addEditor(e.questId,e.quest.version,e.editor.new.email);case 3:if(s=t.sent,e.$q.loading.hide(),!s||403===s.status){t.next=12;break}return t.next=8,e.listEditors();case 8:e.editor.new.email="",e.editor.new.isExisting=!0,t.next=13;break;case 12:e.editor.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listEditors:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.editorsMissing=!1,t.next=3,ct.listEditors(e.questId,e.quest.version);case 3:if(s=t.sent,s&&s.data)for(e.editor.items=s.data,a=0;a<e.editor.items.length;a++)e.editor.items[a].checked=!0;else e.warnings.editorsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeEditor:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),s.next=3,ct.removeEditor(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),s.next=6,t.listEditors();case 6:case"end":return s.stop()}}),s)})))()},addInvitee:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,ct.addInvitee(e.questId,e.quest.version,e.invitee.new.email);case 3:if(s=t.sent,e.$q.loading.hide(),!s||403===s.status){t.next=12;break}return t.next=8,e.listInvitees();case 8:e.invitee.new.email="",e.invitee.new.isExisting=!0,t.next=13;break;case 12:e.invitee.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listInvitees:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inviteeMissing=!1,t.next=3,ct.listInvitees(e.questId,e.quest.version);case 3:if(s=t.sent,s&&s.data)for(e.invitee.items=s.data,a=0;a<e.invitee.items.length;a++)e.invitee.items[a].checked=!0;else e.warnings.inviteeMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeInvitee:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),s.next=3,ct.removeInvitee(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),s.next=6,t.listInvitees();case 6:case"end":return s.stop()}}),s)})))()},hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<Pa.length;t++)if(Pa[t].code===e)return"fas fa-"+Pa[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<Pa.length;t++)if(Pa[t].code===e)return Pa[t];return""},fillInventory:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inventoryMissing=!1,e.$q.loading.show(),t.next=4,Ls.listWonObjects(e.questId,e.stepId,e.quest.version);case 4:s=t.sent,s&&s.data?e.inventory.items=s.data:e.warnings.inventoryMissing=!0,e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.overview.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},selectItem:function(e){this.inventory.detail.zoom=1,"use-item"!==this.chapters.newStep.overviewData.type?(this.inventory.detail.isOpened=!0,e.pictures&&e.pictures[this.languages.current]&&""!==e.pictures[this.languages.current]?this.inventory.detail.url=e.picture.indexOf("statics/")>-1||-1!==e.picture.indexOf("blob:")?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture:this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.languages.current]&&""!==e.titles[this.languages.current]?this.inventory.detail.title=e.titles[this.languages.current]:this.inventory.detail.title=e.title):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},inventoryZoom:function(e){l["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},askForHint:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(!e.hint.isOpened){t.next=8;break}e.closeAllPanels(),e.hint.number++,e.hint.number>=e.hint.label.length&&(e.hint.number=0),t.next=12;break;case 8:return t.next=10,Rs.getHint(0,e.stepId,e.quest.version,e.languages.current);case 10:s=t.sent,s&&s.hint?(e.hint.label=s.hint,e.closeAllPanels(),e.hint.isOpened=!0,e.overview.tabSelected="hint"):yt(e.$t("label.ErrorStandardMessage"),"error");case 12:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&""!==this.chapters.newStep.overviewData.hint&&this.chapters.newStep.overviewData.hint.length>0},getMyGPSLocation:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),s=e,navigator.geolocation.getCurrentPosition((function(e){s.$q.loading.hide(),s.form.fields.location.lat=e.coords.latitude,s.form.fields.location.lng=e.coords.longitude}),e.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return t.stop()}}),t)})))()},moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=lt.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=lt.humanReadableFileSize(this.quest.size.limit,!0,this.$t);this.storage=this.$t("label.UsedOver",{current:e,limit:t})}},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia();case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},loadMedia:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.listMedia(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&(e.media.items=s.data);case 4:case"end":return t.stop()}}),t)})))()},refreshMediaSize:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.getSize(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&(e.quest.size=s.data.size);case 4:case"end":return t.stop()}}),t)})))()},removeMedia:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.removeMedia(t.questId,t.quest.version,e);case 2:if(a=s.sent,a){s.next=7;break}t.$q.dialog({message:t.$t("label.TechnicalIssue")}),s.next=9;break;case 7:return s.next=9,t.loadMedia();case 9:case"end":return s.stop()}}),s)})))()},zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshMediaSize();case 2:e.media.isOpened=!1;case 3:case"end":return t.stop()}}),t)})))()},startSchedule:function(){this.form.fields.scheduling=[[0,24],[0,24],[0,24],[0,24],[0,24],[0,24],[0,24]]},resetSchedule:function(){this.form.fields.scheduling=[]},downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var s=new XMLHttpRequest;s.open("GET","statics/markers/all.pdf",!0),s.responseType="blob",s.onload=function(s){if(200!==this.status)return yt(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var a=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(a)}))}),(function(t){yt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},s.send()}),(function(t){yt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},downloadTexts:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ls.generateTextsExportFile(e.questId,e.quest.version,e.languages.current);case 3:if(s=t.sent,s.hasOwnProperty("data")&&s.data.hasOwnProperty("result")){t.next=6;break}throw new Error("Could not retrieve texts from server");case 6:a="data:text/csv;charset=utf-8,"+s.data.result,o=encodeURI(a),n=document.createElement("a"),n.setAttribute("href",o),n.setAttribute("download","texts_"+e.languages.current+".csv"),document.body.appendChild(n),n.click(),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),console.error(t.t0),yt(e.$t("label.TechnicalIssue"),"error");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},createNewPaymentQRCode:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.createTierPayment(e.questId,e.quest.premiumPrice.manual);case 2:return t.next=4,e.listPayments();case 4:case"end":return t.stop()}}),t)})))()},createMultipleNewPaymentQRCode:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=0;case 1:if(!(a<e)){s.next=7;break}return s.next=4,ct.createTierPayment(t.questId,t.quest.premiumPrice.manual);case 4:a++,s.next=1;break;case 7:return s.next=9,t.listPayments();case 9:case"end":return s.stop()}}),s)})))()},printQRCode:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.printQRCodes(e.questId);case 2:t.sent,setTimeout(e.openQRCodesPrinted,2e3);case 4:case"end":return t.stop()}}),t)})))()},openQRCodesPrinted:function(){window.open(this.serverUrl+"/upload/tiers/print/"+this.questId+".pdf","_self")},listPayments:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier)){t.next=5;break}return t.next=3,ct.listTierPayments(e.questId);case 3:s=t.sent,e.payments=s.data;case 5:case"end":return t.stop()}}),t)})))()},downloadQRCode:function(e){lt.openExternalLink(this.uploadUrl+"/upload/tiers/"+e+".png")},removeCode:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToRemoveThisTierCode"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ct.removeTierPayment(t.questId,e);case 2:return s.next=4,t.listPayments();case 4:case"end":return s.stop()}}),s)}))));case 1:case"end":return s.stop()}}),s)})))()},listReviews:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pr.list({questId:e.questId,version:e.quest.version});case 2:s=t.sent,e.reviews=s.data;case 4:case"end":return t.stop()}}),t)})))()},getStatistics:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new Date,t.next=3,ct.getStatistics(e.questId,e.quest.version,s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate());case 3:a=t.sent,e.statistics=a.data;case 5:case"end":return t.stop()}}),t)})))()},getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.uploadUrl+"/upload/profile/"+e:"statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],s="check_circle";return this.isEdition||"quest"!==this.quest.type?"img:":e<=this.tabs.progress?s:t},trackCallBackFunction:function(){return!1},selectSample:function(e){var t=this;return n()(r.a.mark((function s(){var a,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,ct.remove(t.questId,t.quest.version);case 3:return s.next=5,ct.createFromSample(e,1,t.quest.access,t.quest.isPremium);case 5:a=s.sent,a&&a.data&&a.data.newId&&(o=a.data.newId,t.$router.push("/quest/settings/"+o)),s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](0),console.error(s.t0),yt(t.$t("label.ErrorStandardMessage"),"error");case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},computeGoodAnswers:function(){if(this.run&&this.run.conditionsDone){for(var e=this.run.conditionsDone,t=0,s=0,a=0;a<e.length;a++)-1!==e[a].indexOf("stepSuccess_")?(t++,s++):-1!==e[a].indexOf("stepFail_")&&t++;this.score.nbQuestions=t,this.score.nbGoodAnwers=s}}},validations:{form:{fields:{title:{required:Xt["required"]},category:{required:Xt["required"]}}}}},wo=vo,yo=(s("74f2"),Object(Te["a"])(wo,Kr,Zr,!1,null,null,null)),qo=yo.exports,ko=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper",class:e.showNonHybridQRReader?"bg-transparent":"background-map"},[e.showNonHybridQRReader?s("div",[s("div",{staticClass:"text-white bg-primary q-pt-xl q-pl-md q-pb-sm"},[s("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeQRCodeReader}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n      "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n    ")]),e.showNonHybridQRReader?s("qr-code-stream",{on:{QrCodeResult:e.checkCode}}):e._e()],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",[s("q-input",{ref:"loginemail",attrs:{id:"loginemail",outlined:"",type:"email",label:e.$t("label.YourEmail"),error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),"forgottenpassword"!==e.step?s("q-input",{attrs:{id:"loginPass",outlined:"",type:"password",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"forgottenpassword"!==e.step?s("p",{staticClass:"centered q-mt-sm q-mb-lg"},[s("a",{on:{click:function(t){return e.openPasswordForgottenPopup()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?s("div",[s("p",[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),s("q-input",{attrs:{outlined:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?s("div",[s("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.SignIn"),loading:e.submitting}})],1),s("div",{staticClass:"centered q-mt-sm q-mb-xl"},[s("q-btn",{staticClass:"large-btn",attrs:{outline:"",color:"primary",label:e.$t("label.Subscribe")},on:{click:function(t){return e.goToSubscribe()}}})],1)]),s("div",{staticClass:"q-py-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.ScanA"),"icon-right":"qr_code_2"},on:{click:function(t){return e.startScanQRCode()}}})],1),s("div",{staticClass:"q-py-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.LetsPlayWithoutAccount")},on:{click:function(t){return e.validateTerms()}}})],1),s("div",{staticClass:"q-py-md centered"},[s("q-btn",{staticClass:"large-btn",attrs:{flat:"",color:"accent",label:e.$t("label.TeamPlay")},on:{click:function(t){return e.teamPlay()}}})],1),s("div",{staticClass:"centered smaller version secondary-font"},[e._v("\n        Version "+e._s(e.version)+" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}})])])]),s("q-dialog",{model:{value:e.passwordForgottenPopup,callback:function(t){e.passwordForgottenPopup=t},expression:"passwordForgottenPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header row items-center"},[e._v("\n        "+e._s(e.$t("label.ForgottenPassword"))+"\n        "),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",[s("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("q-btn",{staticClass:"glossy full-width",attrs:{color:"primary",label:e.$t("label.Ok")},on:{click:function(t){return e.sendForgottenPasswordCode()}}})],1)],1)],1),s("q-dialog",{model:{value:e.terms.show,callback:function(t){e.$set(e.terms,"show",t)},expression:"terms.show"}},[s("div",{staticClass:"q-pa-md"},[s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{dark:""},model:{value:e.terms.usage,callback:function(t){e.$set(e.terms,"usage",t)},expression:"terms.usage"}})],1),s("q-item-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.terms.usageError?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{dark:""},model:{value:e.terms.privacy,callback:function(t){e.$set(e.terms,"privacy",t)},expression:"terms.privacy"}})],1),s("q-item-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.terms.privacyError?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])],1),s("div",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.playAnonymous()}}},[s("span",[e._v(e._s(e.$t("label.Confirm")))])])],1)],1)])],1)},xo=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],Co=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},So={components:{qrCodeStream:qs},data:function(){return{step:"password",form:{email:"",password:"",newPassword:"",code:""},terms:{show:!1,usage:!1,usageError:!1,privacy:!1,privacyError:!1},showSocialLogin:{facebook:!1,google:!1},passwordForgottenPopup:!1,showNonHybridQRReader:!1,teamPlayId:"",isHybrid:window.cordova,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com",submitting:!1,version:"2.1.65"}},mounted:function(){var e=this;lt.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),window.cordova&&(this.showSocialLogin.facebook=!0),this.$nextTick((function(){e.$refs["loginemail"].focus()}))},methods:{formSubmit:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$v.$touch(),e.submitting=!0,t.t0=e.step,t.next="password"===t.t0?5:"forgottenpassword"===t.t0?10:16;break;case 5:return t.next=7,e.signIn(e.form.email,e.form.password);case 7:return s=t.sent,s&&s.status?("success"===s.status&&(window.localStorage.setItem("jwt",s.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.user.jwt),e.$router.push(e.defineRedirection())),"failed"===s.status&&yt(e.$t("label.IncorrectLoginPleaseRetry"),"warning")):yt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("break",16);case 10:if(e.$v.form.newPassword.$error){t.next=15;break}return t.next=13,Ee.changePassword(e.form.email,e.form.newPassword,e.form.code);case 13:a=t.sent,a&&a.status&&200===a.status?a.data&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),e.$router.push(e.defineRedirection())):yt(e.$t("label.ErrorStandardMessage"),"error"):a.data&&"You have tries too much codes"===a.data.message?yt(e.$t("label.YourAccountIsBlocked"),"warning"):yt(e.$t("label.IncorrectCodePleaseRetry"),"warning");case 15:return t.abrupt("break",16);case 16:e.submitting=!1;case 17:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ee.login(e,t);case 2:if(a=s.sent,!a||200!==a.status){s.next=7;break}return s.abrupt("return",{status:"success",user:a.data.user});case 7:if(!a||401!==a.status){s.next=11;break}return s.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return s.abrupt("return",{error:"technical issue"});case 12:case"end":return s.stop()}}),s)})))()},validateAccount:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ee.validateAccount(e,t);case 2:o=a.sent,o&&o.status>=300&&o.data&&o.data.message?yt(o.data.message,"warning"):yt(s.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return a.stop()}}),a)})))()},googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},fbLoginSuccess:function(e){var t=this;facebookConnectPlugin.getAccessToken((function(s){Ee.checkFacebookToken(e.authResponse.userID,s,(function(e,s){e&&yt(t.$t("label.TechnicalIssue"),"error"),s&&("login successful"===s.message||s.data&&"login successful"===s.data.message)?this.$router.push(this.defineRedirection()):yt(t.$t("label.TechnicalIssue"),"error")}))}))},defineRedirection:function(){var e="/home";return this.$route&&this.$route.query&&this.$route.query.hasOwnProperty("redirect")&&this.$route.query.redirect&&(e=this.$route.query.redirect),e},facebookLogin:function(){var e=this;window.cordova&&facebookConnectPlugin?facebookConnectPlugin.login(["public_profile"],this.fbLoginSuccess,(function(t){console.log(t),yt(e.$t("label.TechnicalIssue"),"error")})):(window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0))},startScanQRCode:function(){this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},validateTerms:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.terms.show=!0;case 1:case"end":return t.stop()}}),t)})))()},playAnonymous:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.terms.usageError=!1,e.terms.privacyError=!1,!1!==e.terms.usage){t.next=6;break}e.terms.usageError=!0,t.next=14;break;case 6:if(!1!==e.terms.privacy){t.next=10;break}e.terms.privacyError=!0,t.next=14;break;case 10:return t.next=12,Ee.playAnonymous(e.$t("label.shortLang"));case 12:s=t.sent,s&&s.data&&"ok"===s.data.status&&s.data.user?(window.localStorage.setItem("jwt",s.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),e.$router.push(e.defineRedirection())):yt(e.$t("label.ErrorStandardMessage"),"error");case 14:case"end":return t.stop()}}),t)})))()},checkCode:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(3!=e.length){s.next=3;break}return yt(t.$t("label.QRCodeIsNotStartingOne"),"error"),s.abrupt("return");case 3:if(-1===e.indexOf("teamplay_")){s.next=8;break}a=e.replace("teamplay_",""),-1===a.indexOf("_")?t.$router.push({path:"/teamplay/"+a+"/"+t.$t("label.shortLang"),query:{redirect:"/user/login"}}):(o=a.split("_"),t.$router.push({path:"/teamplay/"+o[0]+"/"+t.$t("label.shortLang")+"/individual-firstandlast-checklastname/"+o[1],query:{redirect:"/user/login"}})),s.next=13;break;case 8:return e=lt.removeUnusedUrl(e),s.next=11,ct.checkLoginQRCode(e,t.$t("label.shortLang"));case 11:n=s.sent,n&&n.data&&"ok"===n.data.status?(t.closeQRCodeReader(),n.data.user?(window.localStorage.setItem("jwt",n.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(n.data.user.jwt),-1===e.indexOf("_score")?-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?n.data.questId?t.$router.push("/quest/play/"+n.data.questId):t.$router.push("/quest/play/"+e):t.$q.dialog({message:t.$t("label.UniqueUsageQRCodeWarning"),ok:t.$t("label.Ok")}).onOk((function(s){n.data.questId?t.$router.push("/quest/play/"+n.data.questId):t.$router.push("/quest/play/"+e)})):t.$router.push("/quest/"+e.substring(0,24)+"/end")):-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?yt(t.$t("label.QRCodeIsNotWorking"),"error"):yt(t.$t("label.QRCodeAlreadyUsed"),"error")):-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?yt(t.$t("label.QRCodeIsNotWorking"),"error"):yt(t.$t("label.QRCodeAlreadyUsed"),"error");case 13:case"end":return s.stop()}}),s)})))()},goToSubscribe:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:"/user/createAccount/generic",query:{redirect:e.$route.query.redirect}});case 1:case"end":return t.stop()}}),t)})))()},openPasswordForgottenPopup:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.passwordForgottenPopup=!0;case 1:case"end":return t.stop()}}),t)})))()},sendForgottenPasswordCode:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Ee.sendForgottenPasswordCode(e.form.email);case 3:s=t.sent,s&&200===s.status?(e.step="forgottenpassword",e.passwordForgottenPopup=!1):yt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e},teamPlay:function(){this.showNonHybridQRReader=!0}},validations:{form:{email:{required:Xt["required"],email:Xt["email"]},newPassword:{required:Xt["required"],minLength:Object(Xt["minLength"])(8),checkPasswordComplexity:Co}}}},_o=So,Io=Object(Te["a"])(_o,ko,xo,!1,null,null,null),Po=Io.exports,$o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},To=[],Ao={mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logout");case 2:window.localStorage.removeItem("jwt"),delete Fe.a.defaults.headers.common["Authorization"],e.$router.push("/user/login");case 5:case"end":return t.stop()}}),t)})))()}},zo=Ao,Oo=Object(Te["a"])(zo,$o,To,!1,null,null,null),Mo=Oo.exports,No=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToProfile()}}})],1),s("div",{staticClass:"centered"},[s("div",{staticClass:"user-card user-card-big main-profile centered relative-position"},[s("div",{staticClass:"relative-position no-overflow",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[s("div",{staticClass:"edit-bar centered"},[s("label",{on:{click:function(t){return e.$refs["uploadfile"].click()}}},[s("q-icon",{attrs:{name:"camera_alt"}})],1),s("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),""!==e.profile.form.name?s("div",[s("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n            "+e._s(e.profile.form.name)+"\n          ")]),e.profile.form.location&&(e.profile.form.location.postalCode||e.profile.form.location.country)?s("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.profile.form.location.postalCode?s("span",[e._v(e._s(e.profile.form.location.postalCode))]):e._e(),e.profile.form.location.postalCode&&e.profile.form.location.country?s("span",[e._v(", ")]):e._e(),e.profile.form.location.country?s("span",[e._v(e._s(e.profile.form.location.country))]):e._e()]):e._e()]):e._e()])]),s("div",[""===e.profile.form.name?s("div",[s("div",{staticClass:"centered subtitle5 q-mt-lg"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n        ")]),s("div",{staticClass:"centered subtitle6"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYouDesc"))+"\n        ")])]):e._e()]),s("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[s("q-input",{attrs:{dark:"",label:e.$t("label.YourName"),placeholder:"John Doe","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourEmail"),placeholder:"john.doe@gmail.com","bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.profile.form.password.$error,"error-message":e.$v.profile.form.password.checkPasswordComplexity?e.$v.profile.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),s("q-input",{attrs:{dark:"",label:e.$t("label.YourPresentation"),"bottom-slots":"",type:"textarea","min-rows":3},model:{value:e.profile.form.description,callback:function(t){e.$set(e.profile.form,"description",t)},expression:"profile.form.description"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":""},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge")},on:{blur:e.$v.profile.form.age.$touch},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}),s("div",{staticClass:"q-pt-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitProfileChanges()}}}),""===e.$store.state.user.name?s("q-btn",{staticClass:"q-pt-md",attrs:{color:"primary",flat:"",label:e.$t("label.MaybeLater")},on:{click:function(t){return e.backToMap()}}}):e._e()],1)],1),e.displayPassword?e._e():s("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.ChangeYourPassword")))]),s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.CurrentPassword"),"bottom-slots":"",error:e.$v.profile.form.oldPassword.$error,"error-message":e.$v.profile.form.oldPassword.checkPasswordComplexity?e.$v.profile.form.oldPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.oldPassword.$touch},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.NewPassword"),"bottom-slots":"",error:e.$v.profile.form.newPassword.$error,"error-message":e.$v.profile.form.newPassword.checkPasswordComplexity?e.$v.profile.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.newPassword.$touch},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),s("div",{staticClass:"q-pt-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitChangePassword()}}})],1)],1),s("div",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded"},[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RemoveYourAccount")))]),s("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-my-md glossy",attrs:{color:"negative",label:e.$t("label.IConfirmIWantToRemoveMyAccount")},on:{click:function(t){return e.removeAccount()}}})],1)]),s("div",[s("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[s("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),s("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),s("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})])]),s("q-dialog",{model:{value:e.showHelpPopup,callback:function(t){e.showHelpPopup=t},expression:"showHelpPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.HowWeUseYourData"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[s("ul",[s("li",[e._v(e._s(e.$t("label.DataCountry")))]),s("li",[e._v(e._s(e.$t("label.DataZipcode")))]),s("li",[e._v(e._s(e.$t("label.DataSex")))]),s("li",[e._v(e._s(e.$t("label.DataAge")))]),s("li",[e._v(e._s(e.$t("label.DataPhone")))])])])],1)],1)],1)},Ro=[],Fo=s("4c18"),Do=s("cf83"),Lo={data:function(){return{profile:{form:{name:"--",description:"",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:"",oldPassword:"",newPassword:""}},position:null,countries:"fr"===this.$i18n.locale?Fo:Do,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:lt.buildOptionsForSelect(bo,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,showHelpPopup:!1,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.profile.form={name:this.$store.state.user.name?"-"===this.$store.state.user.name?"":this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email&&-1===this.$store.state.user.email.indexOf("dummyuser")?this.$store.state.user.email:"",password:"",description:this.$store.state.user.description?this.$store.state.user.description:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language},this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{getProfileImage:function(){return this.profile.form.picture&&-1!==this.profile.form.picture.indexOf("http")?this.profile.form.picture:this.profile.form.picture?this.uploadUrl+"/upload/profile/"+this.profile.form.picture:"statics/images/icon/profile-small.png"},submitProfileChanges:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.name.$error||e.$v.profile.form.email.$error||e.$v.profile.form.password.$error&&e.displayPassword){t.next=9;break}return s={name:e.profile.form.name,email:e.profile.form.email,description:e.profile.form.description,password:e.profile.form.password,phone:e.profile.form.phone?e.profile.form.phone:"",zipCode:e.profile.form.zipCode,country:e.profile.form.country,language:e.profile.form.language,age:e.profile.form.age,sex:e.profile.form.sex},e.position&&(s.position=e.position),e.$q.loading.show(),t.next=6,Ee.modifyAccount(s);case 6:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?yt(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 9:case"end":return t.stop()}}),t)})))()},getLocation:function(){var e=this;if(this.profile.form.zipCode&&""!==this.profile.form.zipCode&&this.profile.form.country&&""!==this.profile.form.country){var t=new google.maps.Geocoder;t.geocode({address:this.profile.form.zipCode+" "+this.profile.form.country},(function(t,s){e.$q.loading.hide(),"OK"===s&&t[0].geometry&&(e.position={},e.position.lat=t[0].geometry.location.lat(),e.position.lng=t[0].geometry.location.lng())}))}},submitChangePassword:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.oldPassword.$error||e.$v.profile.form.newPassword.$error){t.next=8;break}return s={oldPassword:e.profile.form.oldPassword,newPassword:e.profile.form.newPassword},e.$q.loading.show(),t.next=5,Ee.modifyAccount(s);case 5:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?yt(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 8:case"end":return t.stop()}}),t)})))()},backToProfile:function(){""===this.profile.form.name?this.$router.push("/home"):this.$router.push("/profile/"+this.$store.state.user.id)},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},helpFields:function(){this.showHelpPopup=!0},uploadImage:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return o=new FormData,o.append("image",a[0]),t.$q.loading.show(),s.next=8,Ee.uploadAccountPicture(o);case 8:n=s.sent,n&&n.data&&(n.data.file?t.profile.form.picture=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&yt(t.$t("label.FileTooLarge"),"error")),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},disconnect:function(){this.$router.push("/user/logout")},removeAccount:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveYourAccount"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee.removeAccount();case 2:if(t=e.sent,!t){e.next=9;break}return yt(s.$t("label.YourAccountIsRemoved"),"info"),e.next=7,s.disconnect();case 7:e.next=10;break;case 9:yt(s.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return t.stop()}}),t)})))()}},validations:{profile:{form:{email:{required:Xt["required"],email:Xt["email"]},name:{required:Xt["required"],minLength:Object(Xt["minLength"])(2)},country:{required:Xt["required"]},zipCode:{required:Xt["required"]},password:{required:Xt["required"],minLength:Object(Xt["minLength"])(8),checkPasswordComplexity:Co},oldPassword:{required:Xt["required"],minLength:Object(Xt["minLength"])(8),checkPasswordComplexity:Co},newPassword:{required:Xt["required"],minLength:Object(Xt["minLength"])(8),checkPasswordComplexity:Co},age:{required:Xt["required"]}}}}},jo=Lo,Eo=Object(Te["a"])(jo,No,Ro,!1,null,null,null),Qo=Eo.exports,Uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{style:"padding-top: "+("level"===e.tab?200:"ranking"===e.tab?160:110)+"px;"},[s("transition",{attrs:{name:"slideInTop"}},["level"===e.tab?s("div",e._l(e.levels,(function(t){return s("div",{key:t.number,staticClass:"q-ma-md level-to-reach",class:{"level-not-reached":e.$store.state.user.points<t.minPoints},style:"background-image: url(statics/images/icon/level"+t.number+".svg)"},[e.$store.state.user.points<t.minPoints?s("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.PointsToReachLevel",{score:t.minPoints})))]):e._e(),e.$store.state.user.points>=t.minPoints?s("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.LevelReached")))]):e._e()])})),0):e._e()]),s("transition",{attrs:{name:"slideInTop"}},["ranking"===e.tab?s("div",[e._l(e.ranking,(function(t,a){return"quest"!==e.range&&e.ranking&&e.ranking.length>0?s("div",{key:a,staticClass:"q-pa-md rank-box"},[s("div",[s("userCard",{attrs:{user:t,size:"medium"},on:{click:e.openProfile}})],1),s("div",{staticClass:"full-width"},["-"!==t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.location.postalCode?s("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?s("span",[e._v(", ")]):e._e(),t.location.country?s("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.points)+"\n                ")]),s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")])])])]):e._e()})),"quest"===e.range&&e.ranking&&e.ranking.length>0?s("div",{staticClass:"subtitle3 q-pa-md"},[e._v("\n            "+e._s(e.ranking[0].questData.title.fr)+"\n          ")]):e._e(),e._l(e.ranking,(function(t,a){return"quest"===e.range&&e.ranking&&e.ranking.length>0?s("div",{key:a,staticClass:"q-pa-md rank-box"},[s("div",[s("userCard",{attrs:{user:t.userData,size:"small"},on:{click:function(s){return e.openProfile(t.userId[0])}}})],1),s("div",{staticClass:"full-width"},[s("div",{staticClass:"subtitle5"},[e._v(e._s(t.userData.name))]),t.userData.location&&(t.userData.location.country||t.userData.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.userData.location.postalCode?s("span",[e._v(e._s(t.userData.location.postalCode))]):e._e(),t.userData.location.postalCode&&t.userData.location.country?s("span",[e._v(", ")]):e._e(),t.userData.location.country?s("span",[e._v(e._s(t.userData.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-4 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.stars)+"\n                ")]),s("div",{staticClass:"col-4 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")]),t.duration?s("div",{staticClass:"col-4 centered",staticStyle:{"font-size":"0.8em","line-height":"0.7em","padding-top":"8px"}},[e._v("\n                  "+e._s(t.duration)),s("br"),e._v("min\n                ")]):e._e()])])]):e._e()})),e.ranking&&0===e.ranking.length?s("div",{staticClass:"centered"},[e._v("\n            "+e._s(e.$t("label.NoRanking"))+"\n          ")]):e._e()],2):e._e()]),s("transition",{attrs:{name:"slideInTop"}},["news"===e.tab?s("div",[s("q-infinite-scroll",{on:{load:e.loadNews}},[s("q-list",[e._l(e.news.items,(function(t,a){return s("q-item",{key:t._id},[s("q-item-section",{staticClass:"q-pl-md",attrs:{avatar:""}},[s("userCard",{attrs:{user:t.data,size:"medium"},on:{click:e.openProfile}})],1),s("q-item-section",{staticClass:"force-justify-start"},[t.data&&t.data.userId?s("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(t.data.name))]):e._e(),s("q-item-label",{staticClass:"grey-round-box subtitle6 q-pa-sm"},["standard"===t.type?s("div",[e._v("\n                      "+e._s(t.title)+"\n                    ")]):e._e(),"standard"!==t.type?s("div",[s("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?s("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),s("div",{staticClass:"q-pt-sm"},[e._v("\n                      "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                      "),"friends"===t.destination?s("span",[e._v("\n                        -\n                        "),e.isLiked(t)?e._e():s("a",{on:{click:function(t){return e.like(a)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?s("a",{on:{click:function(t){return e.unlike(a)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?s("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])])],1)],1)})),0===e.news.items.length?s("q-item",[s("q-item-label",[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),s("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[s("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e()])],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-4",class:{"tab-unselected":"level"!==e.tab},on:{click:function(t){return e.selectTab("level")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Level"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"tab-unselected":"ranking"!==e.tab},on:{click:function(t){return e.selectTab("ranking")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Ranking"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"tab-unselected":"news"!==e.tab},on:{click:function(t){return e.selectTab("news")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.News"))+"\n          ")])])]),"level"===e.tab?s("div",[s("div",{staticClass:"relative-position progress-box"},[s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),s("div",{staticClass:"value"},[e._v("\n              "+e._s(Math.floor(100*e.level.progress))+"%\n            ")])]),s("div",{staticClass:"score subtitle6"},[e._v("\n            "+e._s(e.$t("label.YouHaveReachAScore",{score:e.$store.state.user.points}))+"\n          ")]),s("div",{staticClass:"rank-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])])]):e._e(),"ranking"===e.tab?s("div",[s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-3",class:{"tab-unselected":"world"!==e.range},on:{click:function(t){return e.selectRange("world")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.World"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"country"!==e.range},on:{click:function(t){return e.selectRange("country")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCountry"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"city"!==e.range},on:{click:function(t){return e.selectRange("city")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCity"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"friends"!==e.range},on:{click:function(t){return e.selectRange("friends")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.Friends"))+"\n            ")])])])]):e._e()],1)])])},Bo=[],Yo={components:{userCard:us},data:function(){return{tab:"level",range:"world",news:{limit:20,skip:0,items:[]},levels:[{number:9,minPoints:3e3,maxPoints:15e3},{number:8,minPoints:1500,maxPoints:3e3},{number:7,minPoints:800,maxPoints:1500},{number:6,minPoints:400,maxPoints:800},{number:5,minPoints:200,maxPoints:400},{number:4,minPoints:100,maxPoints:200},{number:3,minPoints:30,maxPoints:100},{number:2,minPoints:15,maxPoints:30},{number:1,minPoints:0,maxPoints:15}],ranking:null,level:{progress:.04},serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.$store.state.user.points||(this.$store.state.user.points=0),this.selectTab(this.$route.params.type)},methods:{selectTab:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.tab=e,"level"===t.tab&&(t.range=null,t.computeProgression()),"ranking"!==t.tab){s.next=10;break}if(24!==t.$route.params.subtype.length){s.next=8;break}return s.next=6,t.selectRange(t.$route.params.subtype);case 6:s.next=10;break;case 8:return s.next=10,t.selectRange();case 10:case"end":return s.stop()}}),s)})))()},selectRange:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e||(e="world"),t.range=e,s.next=4,t.getRanking(e);case 4:case"end":return s.stop()}}),s)})))()},openProfile:function(e){this.$router.push("/profile/"+e)},backToTheMap:function(){this.$router.back()},computeProgression:function(){this.level=ks(this.$store.state.user.points)},loadNews:function(e,t){var s=this;ut.listNews(this.news.limit,this.news.skip,(function(e,a){s.news.skip+=s.news.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.news.items=s.news.items.concat(a.data),t())}))},like:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),t.news.items[e].likes.push({userId:t.$store.state.user._id,date:new Date}),s.next=4,ut.likeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return s.stop()}}),s)})))()},unlike:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(t.$q.loading.show(),a=0;a<t.news.items[e].likes.length;a++)t.news.items[e].likes[a].userId===t.$store.state.user._id&&t.news.items[e].likes.splice(a,1);return s.next=4,ut.unlikeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return s.stop()}}),s)})))()},isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},getRanking:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),"world"!==e&&"country"!==e&&"city"!==e&&"friends"!==e){s.next=7;break}return s.next=4,ut.getRangeRanking(e);case 4:a=s.sent,s.next=11;break;case 7:return s.next=9,Rs.getRankingForAQuest(e);case 9:a=s.sent,t.range="quest";case 11:a&&a.data?a.data.users?t.ranking=a.data.users:t.ranking=a.data:t.ranking=[],t.$q.loading.hide();case 13:case"end":return s.stop()}}),s)})))()}}},Ho=Yo,Go=Object(Te["a"])(Ho,Uo,Bo,!1,null,null,null),Wo=Go.exports,Vo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[s("div",{staticStyle:{"margin-top":"120px"}},["played"===e.tab?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadPlayed}},[s("questsList",{attrs:{format:"big",quests:e.quests.played}})],1):e._e(),"created"===e.tab&&e.$route.params.id!==e.$store.state.user.id?s("div",[s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),"created"===e.tab&&e.$route.params.id===e.$store.state.user.id?s("div",[e.quests.built&&e.quests.built.rejected&&e.quests.built.rejected.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourRejectedQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.rejected}})],1):e._e(),e.quests.built&&e.quests.built.tovalidate&&e.quests.built.tovalidate.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourUnderValidationQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.tovalidate}})],1):e._e(),e.quests.built&&e.quests.built.draft?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourDraftQuests")))]),s("questsList",{attrs:{format:"big",color:"red",add:!0,quests:e.quests.built.draft}})],1):e._e(),e.quests.built&&e.quests.built.published&&e.quests.built.published.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourPublishedQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.published}})],1):e._e()]):e._e(),"played"===e.tab&&e.quests.played&&0===e.quests.played.length?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestPlayed"))+"\n      ")]):e._e(),"created"===e.tab&&e.quests.built&&0===e.quests.built.length?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e()],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"played"!==e.tab},on:{click:function(t){return e.selectTab("played")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsSuccessful"))+"\n          ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"created"!==e.tab},on:{click:function(t){return e.selectTab("created")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsCreated"))+"\n          ")])])])],1)])])},Jo=[],Ko={components:{questsList:Wt},data:function(){return{quests:{played:null,built:null},skip:0,limit:12,tab:"played",serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.selectTab(this.$route.params.type)},methods:{loadPlayed:function(e,t){var s=this;return n()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=s,ct.ListPlayedByAUserSync(s.$route.params.id,null,s.skip,(function(e,s){if(a.skip+=a.limit,e&&t(e),s&&s.data&&s.data.length>0){a.quests.played=[];for(var r=0;r<s.data.length;r++)a.quests.played.push({questId:s.data[r].questId,picture:s.data[r].questData.picture,title:s.data[r].questData.title,location:{town:s.data[r].questData.town},playStatus:s.data[r].status&&""!==s.data[r].status?s.data[r].status:"finished",points:s.data[r].stars});t()}}));case 2:case"end":return e.stop()}}),e)})))()},loadCreated:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e||(e=t.$store.state.user.id),s.next=3,ct.ListCreatedByAUser(e);case 3:if(a=s.sent,e===t.$store.state.user.id&&(t.quests.built={rejected:[],tovalidate:[],draft:[],published:[]}),a&&a.data){if(a.data.length>0)if(t.quests.createdNb=a.data.length,e===t.$store.state.user.id)for(o=0;o<a.data.length;o++)n=a.data[o],"published"===n.status?t.quests.built["published"].push(n):"rejected"===n.status?t.quests.built["rejected"].push(n):"tovalidate"===n.status?t.quests.built["tovalidate"].push(n):t.quests.built["draft"].push(n);else t.quests.built=a.data}else t.quests.built=[];case 6:case"end":return s.stop()}}),s)})))()},selectTab:function(e){this.tab=e,this.skip=0,"created"===e&&this.loadCreated(this.$route.params.id)},backToTheMap:function(){this.$router.back()}}},Zo=Ko,Xo=Object(Te["a"])(Zo,Vo,Jo,!1,null,null,null),en=Xo.exports,tn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[s("div",{staticStyle:{"margin-top":"120px"}},["follow"===e.tab?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadFriends}},[s("usersList",{attrs:{format:"list",add:e.$store.state.user.id===e.$route.params.id,users:e.users},on:{refresh:e.reloadFriends}})],1):e._e(),"suggestion"===e.tab&&null!==e.user.position?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadSuggestions}},[s("usersList",{attrs:{format:"list",add:!1,users:e.suggestions}})],1):e._e(),"suggestion"===e.tab&&null===e.user.position?s("div",[e._v("\n        "+e._s(e.$t("label.WeNeedYourPositionForThisFeature"))+"\n      ")]):e._e()],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.$route.params.id?s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"follow"!==e.tab},on:{click:function(t){return e.selectTab("follow")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.YouFollowThem"))+"\n          ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"suggestion"!==e.tab},on:{click:function(t){return e.selectTab("suggestion")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Suggestions"))+"\n          ")])])]):e._e(),e.$store.state.user.id!==e.$route.params.id?s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n          "+e._s(e.$t("label.FollowedPeople"))+"\n        ")])]):e._e()],1)]),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},sn=[],an={components:{usersList:hs,geolocation:bt},data:function(){return{users:null,user:{position:null},suggestions:null,suggestionType:"followers",skip:0,limit:12,tab:"follow",serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){},methods:{reloadFriends:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skip=0,t.next=3,e.loadFriends(0,(function(){}));case 3:case"end":return t.stop()}}),t)})))()},loadFriends:function(e,t){var s=this;return n()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=s,ut.listFriendsSync(0,s.skip,s.limit,(function(e,s){null===a.users&&(a.users=[]),e&&t(e),s&&s.data&&s.data.length>0&&(a.skip+=a.limit,a.users=a.users.concat(s.data),t())}));case 2:case"end":return e.stop()}}),e)})))()},loadSuggestions:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=s,"near"===s.suggestionType?ut.listSuggestionsSync({lng:s.user.position.longitude,lat:s.user.position.latitude},s.limit,s.skip,(function(e,s){o.skip+=o.limit,null===o.suggestions&&(o.suggestions=[]),e&&t(e),s&&s.data&&s.data.length>0&&(o.suggestions=o.suggestions.concat(s.data),t())})):ut.listFollowersSync(s.limit,s.skip,(function(s,a){null===o.suggestions&&(o.suggestions=[]),s&&t(s),a&&a.data&&a.data.length>0&&(o.skip+=a.data.length,o.suggestions=o.suggestions.concat(a.data),t()),a&&a.data&&a.data.length>0&&!(a.data.length<o.limit)||(o.suggestionType="near",o.loadSuggestions(e,t))}));case 2:case"end":return a.stop()}}),a)})))()},onLocationSuccess:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$set(t.user,"position",e.coords);case 1:case"end":return s.stop()}}),s)})))()},onLocationError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},selectTab:function(e){this.tab=e,this.skip=0,"suggestion"===e&&null===this.suggestions&&this.loadSuggestions(0,(function(){}))},backToTheMap:function(){this.$router.back()}}},rn=an,on=Object(Te["a"])(rn,tn,sn,!1,null,null,null),nn=on.exports,ln=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n      "+e._s(e.$t("label."+(e.$store.state.user.id===e.$route.params.id?"YourBadges":"Badges")))+"\n    ")]),s("badgesList",{attrs:{format:e.$store.state.user.id===e.$route.params.id?"bytown":"list",badges:e.badges}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1)],1)])},cn=[],un=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.badges?e._e():s("div",{staticClass:"badge relative-position"},[s("div",{staticClass:"centered q-pt-lg"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.badges&&0===e.badges.length?s("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):e._e(),"scroll"===e.format&&e.badges&&e.badges.length>0?s("div",{staticClass:"horizontal-scroll-wrapper badges-horizontal-scroll-wrapper"},e._l(e.badges,(function(t){return s("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.questData.rewardPicture}}),s("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"list"===e.format&&e.badges&&e.badges.length>0?s("div",{staticClass:"row justify-around"},e._l(e.badges,(function(t){return s("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.questData.rewardPicture}}),s("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"bytown"===e.format&&e.badges&&e.badges.length>0?s("div",[e._l(e.badges,(function(t,a){return s("div",{key:a},[s("div",{staticClass:"subtitle4 q-pb-md"},[e._v(e._s(t.city))]),s("div",{staticClass:"row justify-around"},e._l(t.rewards,(function(t,a){return s("div",{key:a,staticClass:"badge relative-position q-mr-md",on:{click:function(s){return e.openQuest(t.questId)}}},[s("img",{class:{reward:!0,disabled:!t.won},attrs:{src:e.uploadUrl+"/upload/quest/"+t.image}}),t.won?s("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(t.title)+"\n          ")]):e._e(),t.won?e._e():s("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(e.$t("label.NotWon"))+"\n          ")])])})),0)])})),e._v("\n    "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n  ")],2):e._e()])},dn=[],pn={props:["badges","format"],data:function(){return{serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},methods:{openQuest:function(e){this.$router.push("/quest/play/"+e)}}},mn=pn,hn=Object(Te["a"])(mn,un,dn,!1,null,null,null),fn=hn.exports,gn={components:{badgesList:fn},data:function(){return{badges:null,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.loadBadges()},methods:{loadBadges:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.getRewards(e.$route.params.id,"all");case 2:s=t.sent,s&&s.data&&(e.badges=s.data);case 4:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.$router.back()}}},bn=gn,vn=Object(Te["a"])(bn,ln,cn,!1,null,null,null),wn=vn.exports,yn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.userId?s("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"settings"},on:{click:function(t){return e.updateProfile()}}}):e._e()],1),s("div",{staticClass:"centered"},[s("div",{staticClass:"user-card user-card-big main-profile relative-position"},[s("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()]),s("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e.user.location&&(e.user.location.postalCode||e.user.location.country)?s("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.user.location.postalCode?s("span",[e._v(e._s(e.user.location.postalCode))]):e._e(),e.user.location.postalCode&&e.user.location.country?s("span",[e._v(", ")]):e._e(),e.user.location.country?s("span",[e._v(e._s(e.user.location.country))]):e._e()]):e._e()])]),e.user.description?s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n      "+e._s(e.user.description)+"\n    ")]):e._e(),e.$store.state.user.id!==e.userId?s("div",{staticClass:"centered q-pa-md"},[e.user.status&&"friend"===e.user.status?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.user.status&&"friend"===e.user.status?s("div",{staticClass:"centered"},[s("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n          "+e._s(e.$t("label.Followed"))+"\n        ")]),s("div",{staticClass:"q-pt-sm"},[s("a",{on:{click:e.removeFriend}},[e._v(e._s(e.$t("label.DoNotFollowAnymore")))])])],1):e._e()],1):e._e(),s("div",[e.warnings.listCreatedQuestsMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]),e.$store.state.user.id===e.userId?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),s("questsList",{attrs:{format:"small",color:"red",add:!0,quests:e.quests.built}})],1):e._e(),e.$store.state.user.id!==e.userId&&e.quests&&e.quests.built&&e.quests.built.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),null===e.badges||e.badges.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Badges"),type:"badge"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreBadges}}),s("badgesList",{attrs:{format:"scroll",badges:e.badges}})],1):e._e(),null===e.quests.played||e.quests.played.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.SolvedQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPlayed}}),s("questsList",{attrs:{format:"small",quests:e.quests.played}})],1):e._e(),null===e.friends.list||e.friends.list.length>0||e.$store.state.user.id===e.userId?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.YouFollowThem"),type:"friend"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllFriends}}),s("usersList",{attrs:{format:"scroll",add:e.$store.state.user.id===e.userId,users:e.friends.list},on:{refresh:e.loadFriends}})],1):e._e(),e.$store.state.user.id===e.userId?s("div",[s("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[s("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),s("div",{staticClass:"centered q-mb-sm cursor-pointer"},[s("a",{on:{click:function(t){return e.removeOfflineData()}}},[e._v(e._s(e.$t("label.RemoveOfflineData")))])]),s("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),s("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})]):e._e()])])},qn=[],kn={components:{titleBar:Rt,questsList:Wt,usersList:hs,badgesList:fn},data:function(){return{user:{position:null,proposeAQuest:!0},userId:null,friends:{list:null,show:!1},quests:{played:null,built:null,createdNb:0},badges:null,warnings:{listCreatedQuestsMissing:!1,listFriendsMissing:!1},serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){"me"===this.$route.params.id?this.userId=this.$store.state.user.id:this.userId=this.$route.params.id,this.getProfile(),this.listCreatedQuests(),this.listPlayedQuests(),this.loadFriends(),this.loadBadges()},methods:{getProfile:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId!==e.$store.state.user.id){t.next=5;break}e.user={name:e.$store.state.user.name,email:e.$store.state.user.email,description:e.$store.state.user.description,phone:e.$store.state.user.phone?e.$store.state.user.phone:"",picture:e.$store.state.user.picture,zipCode:e.$store.state.user.location.postalCode,country:e.$store.state.user.location.country,language:e.$store.state.user.language,statistics:e.$store.state.user.statistics,level:e.$store.state.user.level},"-"===e.user.name&&e.updateProfile(),t.next=9;break;case 5:return t.next=7,ut.getFriend(e.userId);case 7:s=t.sent,s&&s.data&&(e.user=s.data);case 9:case"end":return t.stop()}}),t)})))()},listCreatedQuests:function(e){var t=this;return n()(r.a.mark((function e(){var s,a,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.warnings.listCreatedQuestsMissing=!1,e.next=3,ct.ListCreatedByAUser(t.userId);case 3:if(s=e.sent,t.quests.built=[],s&&s.data){if(s.data.length>0)for(t.quests.createdNb=s.data.length,a=[],t.quests.built=[],o=0;o<s.data.length;o++)-1===a.indexOf(s.data[o].questId)&&(t.quests.built.push(s.data[o]),a.push(s.data[o].questId))}else t.warnings.listCreatedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e)})))()},listPlayedQuests:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.ListPlayedByAUser(e.userId);case 2:s=t.sent,s&&s.data&&(e.quests.played=e.formatRunResults(s.data));case 4:case"end":return t.stop()}}),t)})))()},formatRunResults:function(e){for(var t=[],s=0;s<e.length;s++)t.push({questId:e[s].questId,picture:e[s].questData.picture,title:e[s].questData.title,location:{town:e[s].questData.town},playStatus:e[s].status?e[s].status:"succeeded",points:e[s].stars});return t},loadFriends:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.listFriendsMissing=!1,t.next=3,ut.listFriends(e.userId,0,10);case 3:s=t.sent,s&&s.data?e.friends.list=s.data:e.warnings.listFriendsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},loadBadges:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.getRewards(e.userId,"won");case 2:s=t.sent,s&&s.data&&(e.badges=s.data);case 4:case"end":return t.stop()}}),t)})))()},loadOrganization:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.user.organizationId){t.next=5;break}return t.next=3,ut.getOrganization();case 3:s=t.sent,s&&(e.user.organization=s.data);case 5:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.updateProfile(),t.next=8;break;case 4:return t.next=6,ut.addFriend(e.userId);case 6:s=t.sent,s?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?yt(e.$t("label.InvitationSent"),"success"):yt(e.$t("label.FriendsAdded"),"success"),l["a"].set(e.user,"status","friend")):yt(e.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return t.stop()}}),t)})))()},readMoreQuestPublished:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/created");case 1:case"end":return t.stop()}}),t)})))()},readMoreQuestPlayed:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/played");case 1:case"end":return t.stop()}}),t)})))()},readMoreBadges:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/badges");case 1:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.userId===this.$store.state.user.id?this.$router.push("/home"):this.$router.back()},readMoreAllFriends:function(){this.$router.push("/user/"+this.userId+"/friends")},getProfileImage:function(){return this.user.picture&&-1!==this.user.picture.indexOf("http")?this.user.picture:this.user.picture?this.uploadUrl+"/upload/profile/"+this.user.picture:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")},updateProfile:function(){this.$router.push("/user/updateprofile")},disconnect:function(){this.$router.push("/user/logout")},removeOfflineData:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("CHECK OFFLINE 1"),t.next=3,lt.readFile("","quests.json");case 3:if(s=t.sent,console.log("CHECK OFFLINE 2"),!s){t.next=23;break}if(console.log("CHECK OFFLINE 3"),a=JSON.parse(s),!a||!a.list){t.next=21;break}if(console.log("CHECK OFFLINE 4"),o=a.list,!(o.length>0)){t.next=21;break}console.log("CHECK OFFLINE 5"),n=0;case 14:if(!(n<o.length)){t.next=21;break}return console.log("CHECK OFFLINE 6"),t.next=18,lt.removeDirectory(o[n].questId);case 18:n++,t.next=14;break;case 21:return t.next=23,lt.writeInFile("","quests.json",JSON.stringify({}),!0);case 23:e.$q.dialog({dark:!0,message:e.$t("label.DataHaveBeenRemoved")});case 24:case"end":return t.stop()}}),t)})))()},removeFriend:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.userId,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ut.removeFriend(s);case 2:l["a"].set(e.user,"status","normal");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()}}},xn=kn,Cn=Object(Te["a"])(xn,yn,qn,!1,null,null,null),Sn=Cn.exports,_n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{style:"padding-top: "+("quest"===e.type?"302":"258")+"px;"},["quest"===e.type&&e.results.quests&&e.results.quests.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherQuests}},[s("questsList",{attrs:{format:"big",quests:e.results.quests}})],1)],1):e._e(),"designer"===e.type&&e.results.designers&&e.results.designers.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[s("usersList",{attrs:{format:"list",users:e.results.designers}})],1)],1):e._e(),"player"===e.type&&e.results.players&&e.results.players.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[s("usersList",{attrs:{format:"list",users:e.results.players}})],1)],1):e._e(),"quest"===e.type&&e.results.quests&&0===e.results.quests.length?s("div",{staticClass:"centered q-pa-md",nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[s("q-icon",{attrs:{name:"explore",size:"2rem"}}),e._v("\n        "+e._s(e.$t("label.NoQuestForThisSearch"))+"\n        "),s("div",[s("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1):e._e(),"designer"===e.type&&e.results.designers&&0===e.results.designers.length?s("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoDesignerForThisSearch"))+"\n      ")]):e._e(),"player"===e.type&&e.results.players&&0===e.results.players.length?s("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisSearch"))+"\n      ")]):e._e()]),s("q-scroll-observer",{on:{scroll:e.onScroll}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-4",class:{"box-unselected":"quest"!==e.type},on:{click:function(t){return e.selectType("quest")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-quest-box-top"},[s("img",{attrs:{src:"statics/images/icon/key-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-quest-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.EscapeGame"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"box-unselected":"designer"!==e.type},on:{click:function(t){return e.selectType("designer")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-creator-box-top"},[s("img",{attrs:{src:"statics/images/icon/puzzle-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-creator-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Designers"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"box-unselected":"player"!==e.type},on:{click:function(t){return e.selectType("player")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-user-box-top"},[s("img",{attrs:{src:"statics/images/icon/user-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-user-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Players"))+"\n          ")])])]),"quest"===e.type?s("div",[s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"around"!==e.subtype},on:{click:function(t){return e.selectSubtype("around")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.AroundYou"))+"\n            ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"friends"!==e.subtype},on:{click:function(t){return e.selectSubtype("friends")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.FriendsQuests"))+"\n            ")])])])]):e._e(),s("div",[s("q-input",{staticClass:"q-px-md arial",attrs:{dark:"",debounce:"500",placeholder:e.$t("label.Search")},on:{input:function(t){return e.find()}},scopedSlots:e._u([""!==e.search.text?{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"close"}})]},proxy:!0}:null],null,!0),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1)],1)],1),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},In=[],Pn=(s("386d"),{components:{geolocation:bt,questsList:Wt,usersList:hs},data:function(){return{type:"quest",subtype:null,results:{quests:null,designers:null,players:null},search:{text:"",limit:10,skip:0},user:{position:null},scrollInfo:{},findQuestWhenLocationIsKnown:!0,serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.$route.params.subtype&&(this.subtype=this.$route.params.subtype),this.$route.params.type&&(this.type=this.$route.params.type),"around"!==this.subtype&&this.find()},methods:{selectType:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.type=e,t.subtype="none",s.next=4,t.find();case 4:case"end":return s.stop()}}),s)})))()},selectSubtype:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.subtype=e,t.search.text="",t.search.skip=0,s.next=5,t.find();case 5:case"end":return s.stop()}}),s)})))()},find:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("quest"!==e.type){t.next=5;break}return t.next=3,e.findQuests();case 3:t.next=14;break;case 5:if("player"!==e.type){t.next=11;break}return e.search.skip=0,t.next=9,e.findUser("player");case 9:t.next=14;break;case 11:return e.search.skip=0,t.next=14,e.findUser("designer");case 14:case"end":return t.stop()}}),t)})))()},findUser:function(e){var t=this;return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,!(t.search.text.length>3)){s.next=8;break}return t.subtype="keyword",t.$q.loading.show(),s.next=6,ut.find(e,t.search.text);case 6:a=s.sent,a&&a.data?"player"===e?t.results.players=a.data:t.results.designers=a.data:t.displayNetworkIssueMessage();case 8:t.$q.loading.hide(),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),t.$q.loading.hide();case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()},loadOtherUsers:function(e,t){if(this.search.skip>=10){var s=this;ut.find(this.type,this.search.text,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&("player"===type?s.results.players=s.results.players.concat(a.data):s.results.designers=s.results.designers.concat(a.data),t())}))}},findQuests:function(){var e=this;return n()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!("keyword"!==e.subtype||e.search.text.length>3)){t.next=22;break}if(e.search.text.length>3&&(e.subtype="keyword"),e.$q.loading.show(),s=e.user.position,"keyword"!==e.subtype){t.next=11;break}return t.next=8,ct.find(e.search.text,s,0,10);case 8:a=t.sent,t.next=21;break;case 11:if("around"!==e.subtype){t.next=17;break}return t.next=14,ct.listNearest(s,0);case 14:a=t.sent,t.next=21;break;case 17:if("friends"!==e.subtype){t.next=21;break}return t.next=20,ct.listFriendQuests();case 20:a=t.sent;case 21:a&&a.data?("friends"===e.subtype?e.results.quests=e.formatRunResults(a.data):e.results.quests=a.data,e.search.skip=a.data.length,e.user.position&&(e.results.quests=e.results.quests.map((function(e){var t=6378.137,a=e.location.coordinates[1]*Math.PI/180-s.latitude*Math.PI/180,r=e.location.coordinates[0]*Math.PI/180-s.longitude*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(s.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),n=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return e.distance=Math.floor(t*n),e})))):e.displayNetworkIssueMessage();case 22:e.$q.loading.hide(),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0),e.$q.loading.hide();case 29:case"end":return t.stop()}}),t,null,[[0,25]])})))()},loadOtherQuests:function(e,t){if(this.user.position&&this.search.skip>=10){var s=this;"around"===this.subtype?ct.listNearestSync(this.user.position,null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(a.data),t())})):"friends"===this.subtype?ct.listFriendQuestsync(null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(this.formatRunResults(a.data)),t())})):ct.findSync(this.search.text,this.user.position,null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(a.data),t())}))}},formatRunResults:function(e){for(var t=[],s=0;s<e.length;s++)t.push({questId:e[s].questId,picture:e[s].questData.picture,title:e[s].questData.title,location:{town:e[s].questData.town},playStatus:e[s].status?e[s].status:"succeeded",points:e[s].stars});return t},displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},onLocationSuccess:function(e){var t=this;return n()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!t.findQuestWhenLocationIsKnown){s.next=5;break}return t.findQuestWhenLocationIsKnown=!1,s.next=5,t.find();case 5:case"end":return s.stop()}}),s)})))()},onLocationError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},onScroll:function(e){this.scrollInfo=e},backToTheMap:function(){this.$router.back()}}}),$n=Pn,Tn=Object(Te["a"])($n,_n,In,!1,null,null,null),An=Tn.exports,zn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("div",{staticClass:"background-dark q-pa-md"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){return e.$router.push("/home")}}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),s("div",{staticClass:"title2 centered"},[e._v("Administration")])]),s("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[s("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Validation",default:""},on:{click:e.loadQuestsToValidate}}),s("q-tab",{attrs:{name:"rejected",icon:"sentiment_very_dissatisfied",label:"Rejected"},on:{click:e.loadQuestsRejected}}),s("q-tab",{attrs:{name:"earnings",icon:"euro",label:"Earnings"},on:{click:e.loadEarnings}}),s("q-tab",{attrs:{name:"statistics",icon:"bar_chart",label:"Statistics"},on:{click:e.loadStatistics}}),s("q-tab",{attrs:{name:"limitations",icon:"pan_tool",label:"Limitations"},on:{click:e.loadLimitations}}),s("q-tab",{attrs:{name:"disabled",icon:"pan_tool",label:"Désactivées"}})],1),s("q-separator"),s("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[s("q-tab-panel",{attrs:{name:"validation"}},[s("q-table",{staticClass:"container",attrs:{title:"Games awaiting validation",data:e.questsToValidate.items,columns:e.questsToValidate.columns,"visible-columns":e.questsToValidate.visible,"row-key":"id",loading:e.questsToValidate.loading,pagination:e.questsToValidate.initialPagination,"no-data-label":"I didn't find anything for you"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n                  "+e._s(a.label)+"\n                ")])})),s("q-th",{attrs:{"auto-width":""}},[e._v("Play")]),s("q-th",{attrs:{"auto-width":""}},[e._v("Validate")])],2)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{attrs:{"auto-width":""}},[s("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]),s("q-td",{key:"author",attrs:{"auto-width":""}},[e._v(e._s(t.row.author)),s("br"),s("span",{staticClass:"text-secondary",staticStyle:{"font-size":"10px"}},[e._v(e._s(t.row.authorUserId))])]),s("q-td",{key:"mail",attrs:{"auto-width":""}},[e._v(e._s(t.row.userMail)+" "),s("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(s){return e.copy(t.row.userMail)}}})],1),s("q-td",{key:"access",attrs:{"auto-width":""}},[e._v(e._s(t.row.access))]),s("q-td",{key:"premium",attrs:{"auto-width":""}},[e._v(e._s(t.row.isPremium?"Premium":"Individual"))]),s("q-td",{attrs:{"auto-width":""}},[s("q-btn",{attrs:{size:"md",color:"accent",glossy:"",icon:"play_arrow"},nativeOn:{click:function(s){return e.$router.push("/quest/play/"+t.row.questId)}}})],1),s("q-td",{attrs:{"auto-width":""}},[s("q-btn",{attrs:{size:"md",color:"primary",glossy:"",icon:"done"},on:{click:function(s){return e.validate(t.row.questId,t.row.version)}}})],1)],1)]}}])})],1),s("q-tab-panel",{attrs:{name:"rejected"}},[s("q-table",{staticClass:"container",attrs:{title:"Rejected Games",data:e.questsRejected.items,columns:e.questsRejected.columns,"visible-columns":e.questsRejected.visible,"row-key":"id",loading:e.questsRejected.loading,pagination:e.questsRejected.initialPagination,"no-data-label":"I didn't find anything for you"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n                  "+e._s(a.label)+"\n                ")])}))],2)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{attrs:{"auto-width":""}},[s("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]),s("q-td",{key:"author",attrs:{"auto-width":""}},[e._v(e._s(t.row.author)),s("br"),s("span",{staticClass:"text-secondary",staticStyle:{"font-size":"10px"}},[e._v(e._s(t.row.authorUserId))])]),s("q-td",{key:"mail",attrs:{"auto-width":""}},[e._v(e._s(t.row.userMail)+" "),s("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(s){return e.copy(t.row.userMail)}}})],1),s("q-td",{key:"access",attrs:{"auto-width":""}},[e._v(e._s(t.row.access))]),s("q-td",{key:"premium",attrs:{"auto-width":""}},[e._v(e._s(t.row.isPremium?"Premium":"Individual"))])],1)]}}])})],1),s("q-tab-panel",{attrs:{name:"earnings"}},[s("q-table",{staticClass:"container",attrs:{title:"Earnings of games",data:e.earnings.items,columns:e.earnings.columns,"visible-columns":e.earnings.visible,"row-key":"id",loading:e.earnings.loading,pagination:e.earnings.initialPagination,"no-data-label":"I didn't find anything for you"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n                  "+e._s(a.label)+"\n                ")])})),1)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[t.row.title.fr?s("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]):e._e(),t.row.premiumPrice.prices?s("q-td",{key:"price",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.premiumPrice.prices.fr?t.row.premiumPrice.prices.fr:t.row.premiumPrice.prices.en)),s("br"),e._v(e._s(t.row.premiumPrice.manual&&""!==t.row.premiumPrice.manual?"manual : "+t.row.premiumPrice.manual:""))]):s("q-td",{key:"price",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(" Pas de prix")]),s("q-td",{key:"qrcode",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.premiumPrice.tier?t.row.tierEarnings:"--"))]),s("q-td",{key:"earnings",staticClass:"text-right",attrs:{"auto-width":""}},[e._v(e._s(t.row.earnings.toFixed(2))+" €")])],1)]}}])})],1),s("q-tab-panel",{attrs:{name:"statistics"}},[s("q-table",{staticClass:"container",attrs:{title:"Statistics of games",data:e.statistics.items,columns:e.statistics.columns,"visible-columns":e.statistics.visible,"row-key":"id",loading:e.statistics.loading,pagination:e.statistics.initialPagination,"no-data-label":"I didn't find anything for you"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n                "+e._s(a.label)+"\n              ")])})),1)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row._id.questData.fr))]),s("q-td",{key:"weekNb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.weekNb))]),s("q-td",{key:"monthNb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.monthNb))]),s("q-td",{key:"rating",staticClass:"text-center",attrs:{"auto-width":""}},[t.row.rating?s("q-rating",{attrs:{size:"1em",color:"accent",readonly:""},model:{value:t.row.rating,callback:function(s){e.$set(t.row,"rating",s)},expression:"props.row.rating"}}):s("q-rating",{attrs:{value:0,size:"1em",color:"accent",readonly:""}})],1)],1)]}}])})],1),s("q-tab-panel",{attrs:{name:"limitations"}},[s("q-table",{staticClass:"container",attrs:{title:"Statistics of games",data:e.limitations.items,columns:e.limitations.columns,"visible-columns":e.limitations.visible,"row-key":"id",loading:e.limitations.loading,pagination:e.limitations.initialPagination,"no-data-label":"I didn't find anything for you"}})],1),s("q-tab-panel",{attrs:{name:"disabled"}},[s("disabled-quest-panel")],1)],1)],1)])},On=[],Mn={ListQuestsToValidate:function(){return je().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return je().get("admin/quests/rejected")},ListTowns:function(){return je().get("admin/towns")},ListBestGames:function(){return je().get("admin/bestgames")},ListEarnings:function(){return je().get("admin/earnings")},ListLimitations:function(){return je().get("admin/limitations")},countQuestDisabled:function(){return je().get("admin/quests/countDisabled")},ListQuestDisabled:function(e,t){return je().get("admin/quests/disabled/"+e+"/"+t)},publish:function(e){return je().get("admin/quests/publish/"+e)},getUserMail:function(e){return je().get("/user/"+e+"/profile/private")},CreateTown:function(e){return je().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return je().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return je().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},deleteFolder:function(e){return je().delete("/admin/delete/quest/"+e)}},Nn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-table",{staticClass:"container",attrs:{title:"Not Published Games",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.pagination,"no-data-label":"I didn't find anything for you"},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"header",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(a){return s("q-th",{key:a.name,attrs:{props:t}},[e._v("\n        "+e._s(a.label)+"\n      ")])})),s("q-th",{attrs:{"auto-width":""}},[e._v("Delete")])],2)]}},{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{attrs:{"auto-width":""}},[s("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?s("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr)),s("br"),s("span",{staticClass:"text-primary"},[e._v(e._s(t.row.questId))])]),s("q-td",{key:"mail",attrs:{"auto-width":""}},[e._v(e._s(!1!==t.row.userMail?t.row.userMail:"-- Pas de mail --")+" "),t.row.userMail?s("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(s){return e.copy(t.row.userMail)}}}):e._e()],1),s("q-td",{key:"status",attrs:{"auto-width":""}},[e._v(e._s(t.row.status))]),s("q-td",{key:"nbStep",attrs:{"auto-width":""}},[e._v(" à définir ")]),s("q-td",{key:"version",attrs:{"auto-width":""}},[e._v(e._s(t.row.version))]),s("q-td",{key:"size",attrs:{"auto-width":""}},[e._v(e._s(e.goodSize(t.row.size.current)))]),s("q-td",{key:"dateUpdated",attrs:{"auto-width":""}},[e._v(e._s(t.row.dateUpdated))]),s("q-td",{attrs:{"auto-width":""}},[s("q-btn",{attrs:{size:"md",color:"accent",glossy:"",icon:"delete"},on:{click:function(s){return e.openDeleteDialog(t.row.questId,t.row.version,t.row.title.fr?t.row.title.fr:t.row.title.en)}}}),s("q-dialog",{ref:"adminDeleteDialog"},[s("q-card",{staticClass:"q-dialog-plugin"},[s("q-card-section",{staticClass:"bg-primary"},[e._v("\n              ATTENTION !!!\n            ")]),s("q-card-section",[s("p",{staticClass:"q-ma-none q-py-md"},[e._v("Vous allez supprimer définitement la quête "),s("br"),s("span",{staticClass:"text-primary"},[e._v(e._s(e.deleteQ.title))]),e._v(" en version : "),s("span",{staticClass:"text-primary"},[e._v(e._s(e.deleteQ.version))]),s("br"),e._v("\n                Etes vous réellement sûr de vouloir executer cette commande ?")]),s("p",{staticClass:"q-ma-none"},[e._v("ID : "+e._s(e.deleteQ.questId))])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"accent",label:"DELETE"},on:{click:function(t){return e.confirmDeleteQuest()}}}),s("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:function(t){return e.cancelDeleteDialog()}}})],1)],1)],1)],1)],1)]}}])})},Rn=[],Fn=s("4db1"),Dn=s.n(Fn),Ln={name:"disabledQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","mail","status","nbStep","version","lastUpdate"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"mail",label:"Mail",sortable:!0,align:"left",field:"userMail"},{name:"status",required:!0,label:"Status",align:"left",sortable:!0,field:"status"},{name:"nbRun",required:!0,label:"Run Count",align:"left",sortable:!0,field:"creationStep"},{name:"version",required:!0,label:"Version",align:"left",sortable:!0,field:"version"},{name:"size",required:!0,label:"Size",align:"left",sortable:!0,field:function(e){return e.size.current}},{name:"lastUpdate",required:!0,label:"Last Update",align:"left",sortable:!0,field:"dateUpdated"}],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:50},deleteQ:{questId:null,version:null,title:null},serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.onRequest({pagination:this.pagination})},methods:{copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)},goodSize:function(e){if(!e)return"No data";var t=e.toLocaleString();return t.length>8?t.slice(-t.length,-8)+" Mo":t.length>4?t.slice(-t.length,-4)+" Ko":t.length<4?"- de 1 Ko":void 0},loadDisabledQuest:function(e,t){return n()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Mn.ListQuestDisabled(e,t);case 2:return a=s.sent,s.abrupt("return",a.data.disabledQuest);case 4:case"end":return s.stop()}}),s)})))()},getDisabledQuestNumber:function(){return n()(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mn.countQuestDisabled();case 2:return t=e.sent,e.abrupt("return",t.data.questCount);case 4:case"end":return e.stop()}}),e)})))()},onRequestAll:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0;case 1:case"end":return t.stop()}}),t)})))()},onRequest:function(e){var t=this;return n()(r.a.mark((function s(){var a,o,n,i,l,c,u,d;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return o=e.pagination,n=o.page,i=o.rowsPerPage,t.loading=!0,s.next=4,t.getDisabledQuestNumber();case 4:return l=s.sent,t.pagination.rowsNumber=l,c=0===i?t.pagination.rowsNumber:i,u=n,s.next=10,t.loadDisabledQuest(u,c);case 10:d=s.sent,(a=t.items).splice.apply(a,[0,t.items.length].concat(Dn()(d))),t.pagination.page=n,t.pagination.rowsPerPage=i,t.loading=!1;case 15:case"end":return s.stop()}}),s)})))()},openDeleteDialog:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pas de titre";this.deleteQ.questId=e,this.deleteQ.version=t,this.deleteQ.title=s,this.$refs.adminDeleteDialog.show()},cancelDeleteDialog:function(){this.$refs.adminDeleteDialog.hide(),this.deleteQ.questId=null,this.deleteQ.version=null,this.deleteQ.title=null},confirmDeleteQuest:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("delete quest : "+e.deleteQ.questId+" - version : "+e.deleteQ.version),t.next=3,Mn.deleteFolder(e.deleteQ.questId);case 3:return s=t.sent,console.log(s),200===s.status?yt(e.$t("label.DeleteQuestAndFolder"),"positive"):(console.error(s),yt(e.$t("label.TechnicalProblem"),"negative")),e.$refs.adminDeleteDialog.hide(),e.deleteQ.questId=null,e.deleteQ.version=null,e.deleteQ.title=null,t.next=12,e.onRequest({pagination:e.pagination});case 12:case"end":return t.stop()}}),t)})))()}}},jn=Ln,En=Object(Te["a"])(jn,Nn,Rn,!1,null,"91ec9ca4",null),Qn=En.exports,Un={components:{disabledQuestPanel:Qn},data:function(){return{questsToValidate:{loading:!0,items:[],visible:["name","author","mail","access","premium"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"author",required:!0,label:"Author",align:"left",sortable:!0,field:"author"},{name:"mail",label:"Mail",sortable:!0,align:"left",field:"userMail"},{name:"access",label:"Access",align:"left",sortable:!0,field:"access"},{name:"premium",label:"Premium",align:"left",sortable:!0,field:function(e){return e.isPremium?"Premium":"Individual"}}],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10}},questsRejected:{loading:!0,items:[],visible:["name","author","mail","access","premium"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"author",required:!0,label:"Author",align:"left",sortable:!0,field:"author"},{name:"mail",label:"Mail",sortable:!0,align:"left",field:"userMail"},{name:"access",label:"Access",align:"left",sortable:!0,field:"access"},{name:"premium",label:"Premium",align:"left",sortable:!0,field:function(e){return e.isPremium?"Premium":"Individual"}}],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10}},questDisabled:{},earnings:{loading:!0,items:[],visible:["name","price","mail","qrcode","earnings"],columns:[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"price",label:"Price",sortable:!1,align:"center",field:function(e){return e.premiumPrice.prices.fr}},{name:"qrcode",label:"QR-Code used",align:"center",sortable:!0,field:"tierEarnings"},{name:"earnings",label:"Earnings",align:"right",sortable:!0,field:"earnings"}],initialPagination:{sortBy:"earnings",descending:!0,page:1,rowsPerPage:10}},statistics:{loading:!0,items:[],visible:["name","weekNb","monthNb","rating"],columns:[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e._id.questData.fr}},{name:"weekNb",label:"Played Weekly",sortable:!0,align:"center",field:"weekNb"},{name:"monthNb",label:"Played Monthly",align:"center",sortable:!0,field:"monthNb"},{name:"rating",label:"Rating",align:"center",sortable:!0,field:"rating"}],initialPagination:{sortBy:"monthNb",descending:!0,page:1,rowsPerPage:10}},limitations:{loading:!0,items:[],visible:["name","stats","remaining"],columns:[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"stats",label:"Played/Limit",sortable:!0,align:"right",field:function(e){return e.nbPlayers+"/"+e.limitations.nbPlays}},{name:"remaining",label:"Remaining credit",sortable:!0,align:"right",field:function(e){return e.limitations.nbPlays-e.nbPlayers}}],initialPagination:{sortBy:"monthNb",descending:!0,page:1,rowsPerPage:10}},adminTab:"validation",serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){this.loadQuestsToValidate()},methods:{goodSize:function(e){if(!e)return"No data";var t=e.toLocaleString();return t.length>8?t.slice(-t.length,-8)+" Mo":t.length>4?t.slice(-t.length,-4)+" Ko":t.length<4?"- de 1 Ko":void 0},copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)},loadQuestsToValidate:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListQuestsToValidate();case 2:s=t.sent,e.questsToValidate.items=s.data.quests,e.questsToValidate.items.forEach((function(t){Mn.getUserMail(t.authorUserId).then((function(s){200===s.status?t.userMail=s.data.email:t.userMail="No User",e.questsToValidate.loading=!1}))}));case 5:case"end":return t.stop()}}),t)})))()},loadTowns:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListTowns();case 2:s=t.sent,e.towns.items=s.data.towns;case 4:case"end":return t.stop()}}),t)})))()},loadStatistics:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListBestGames();case 2:s=t.sent,e.statistics.items=s.data.games,e.statistics.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadEarnings:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListEarnings();case 2:s=t.sent,e.earnings.items=s.data.earnings,e.earnings.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadLimitations:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListLimitations();case 2:s=t.sent,e.limitations.items=s.data.limitations,e.limitations.loading=!1,console.log(e.limitations.items);case 6:case"end":return t.stop()}}),t)})))()},validate:function(e,t){var s=this;return n()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s.$router.push("/admin/validate/"+e+"/version/"+t);case 1:case"end":return a.stop()}}),a)})))()},loadQuestsRejected:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.ListQuestsRejected();case 2:s=t.sent,e.questsRejected.items=s.data.quests,e.questsRejected.items.forEach((function(t){Mn.getUserMail(t.authorUserId).then((function(s){200===s.status?t.userMail=s.data.email:t.userMail="No User",e.questsRejected.loading=!1}))}));case 5:case"end":return t.stop()}}),t)})))()},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},Bn=Un,Yn=(s("f4ba"),Object(Te["a"])(Bn,zn,On,!1,null,null,null)),Hn=Yn.exports,Gn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[e.quest&&e.quest.title?s("div",{staticClass:"page-content top-padding-middle"},[s("p",[e._v("\n      Validation of the quest "),s("strong",[e._v(e._s(e.quest.title))])]),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),s("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the\n      quest is rejected\n    ")])]):e._e()])},Wn=[],Vn={data:function(){return{quest:{},serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.questId,e.$route.params.version);case 2:case"end":return t.stop()}}),t)})))()},methods:{getQuest:function(e,t){var s=this;return n()(r.a.mark((function a(){var o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,ct.getByIdOnline(e,t);case 2:o=a.sent,s.quest=o.data;case 4:case"end":return a.stop()}}),a)})))()},publish:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.publish(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},reject:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.reject(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()}}},Jn=Vn,Kn=Object(Te["a"])(Jn,Gn,Wn,!1,null,null,null),Zn=Kn.exports,Xn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[s("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),s("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),s("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),s("div",[s("q-icon",{attrs:{name:"explore"}}),s("p",[e._v("GPS location bottom left")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),s("div",[s("q-icon",{attrs:{name:"explore"}}),s("p",[e._v("GPS location top right")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,a){return s("div",{key:a},[s("q-icon",{attrs:{name:"place"}}),s("p",[e._v("Place")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"place.name"}})],1),s("div",{staticClass:"col"},[e.isIOs?e._e():s("div",[""===t.picture?s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+a].click()}}}):e._e(),s("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1),e.isIOs?s("div",[s("q-icon",{attrs:{name:"cloud_upload"}}),s("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1):e._e(),""!==t.picture?s("div",[s("img",{staticStyle:{width:"50px"},attrs:{src:e.uploadUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),s("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"place.type"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(s){e.$set(t.location,"lng",s)},expression:"place.location.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(s){e.$set(t.location,"lat",s)},expression:"place.location.lat"}})],1)])],1)})),s("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),s("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},ei=[],ti={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:lt.isIOS(),serverUrl:"https://preprod.api-graaly.com",uploadUrl:"https://graaly-upload.s3.eu-west-3.amazonaws.com"}},mounted:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlace();case 1:case"end":return t.stop()}}),t)})))()},methods:{configureTown:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mn.CreateTown(e.form.fields);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(e,t){var s=this;return n()(r.a.mark((function a(){var o,n,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s.$q.loading.show(),o=t.target.files,o[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",o[0]),a.next=8,Mn.uploadPlaceImage(n);case 8:i=a.sent,i&&i.hasOwnProperty("data")&&(s.form.fields.places[e].picture=i.data.file,s.$q.loading.hide());case 10:case"end":return a.stop()}}),a)})))()}},validations:{form:{fields:{name:{required:Xt["required"]},zipcode:{required:Xt["required"]}}}}},si=ti,ai=Object(Te["a"])(si,Xn,ei,!1,null,null,null),ri=ai.exports,oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper background-map"},[s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{staticClass:"q-pa-lg",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},["generic"===e.step?s("q-input",{attrs:{outlined:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName"),"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),"generic"===e.step?s("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:function(t){e.$v.form.email.$touch,e.checkEmail()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):e._e(),"generic"===e.step?s("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.form.password.$error,"error-message":e.$v.form.password.checkPasswordComplexity?e.$v.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule"),"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"","test-id":"sex"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge"),"test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry"),"test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}):e._e(),"location"===e.step?s("q-input",{attrs:{outlined:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",error:e.$v.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode"),"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}):e._e(),"location"===e.step?s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("q-checkbox",{attrs:{dark:"","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),s("div",{staticClass:"col secondary-font-small"},[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.form.terms.$error?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),"location"===e.step?s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("q-checkbox",{attrs:{dark:"","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),s("div",{staticClass:"col secondary-font-small"},[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.form.privacy.$error?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),"validation"===e.step?s("div",[s("p",{attrs:{"test-id":"enter-code"}},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),s("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?s("p",{staticClass:"text-right q-mt-md q-mb-md"},[s("a",{on:{click:function(t){return e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?s("p",{staticClass:"text-center q-mt-md q-mb-md"},[s("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),s("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:e.formDisabled,color:"primary",label:e.$t("label.Subscribe"),loading:e.submitting,type:"submit"}})],1),s("div",{staticClass:"centered q-mt-sm q-mb-lg"},[s("a",{on:{click:function(t){return e.goToSignIn()}}},[e._v(e._s(e.$t("label.IAlreadyHaveAnAccount")))])]),s("p")],1)])])])},ni=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],ii={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,formDisabled:!0,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?Fo:Do,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){lt.clearAllRunningProcesses()},methods:{formSubmit:function(){var e=this;return n()(r.a.mark((function t(){var s,a,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?8:"validation"===t.t0?22:"firstusage"===t.t0?29:31;break;case 3:return e.$v.form.password.$touch(),e.$v.form.email.$touch(),e.$v.form.name.$touch(),e.$v.form.password.$error||e.$v.form.email.$error||e.$v.form.name.$error||(e.step="location"),t.abrupt("break",31);case 8:if(e.$v.form.country.$touch(),e.$v.form.zipCode.$touch(),e.$v.form.age.$touch(),e.$v.form.terms.$touch(),e.$v.form.privacy.$touch(),e.$v.form.country.$error||e.$v.form.zipCode.$error||e.$v.form.age.$error||e.$v.form.terms.$error||e.$v.form.privacy.$error){t.next=21;break}return s={name:e.form.name,email:e.form.email,sex:e.form.sex,age:e.form.age,password:e.form.password,zipcode:e.form.zipCode,country:e.form.country,language:e.$i18n.locale},e.submitting=!0,t.next=18,Ee.createAccount(s);case 18:a=t.sent,a.status&&200===a.status&&a.data&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),e.openHome()):yt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 21:return t.abrupt("break",31);case 22:return t.next=24,Ee.validateAccount(e.form.email,e.form.code);case 24:return o=t.sent,e.submitting=!0,o.status&&200===o.status?e.openHome():o.data&&"You have tries too much codes"===o.data.message?yt(e.$t("label.YourAccountIsBlocked"),"warning"):yt(e.$t("label.IncorrectCodePleaseRetry"),"warning"),e.submitting=!1,t.abrupt("break",31);case 29:return e.openHome(),t.abrupt("break",31);case 31:case"end":return t.stop()}}),t)})))()},openHome:function(){var e="/home";this.$route&&this.$route.query&&this.$route.query.hasOwnProperty("redirect")&&this.$route.query.redirect&&(e=this.$route.query.redirect),this.$router.push(e)},checkUserIsExisting:function(e){return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ee.checkEmail(e);case 2:if(s=t.sent,!(s&&s.data&&s.data.hasOwnProperty("existing")&&!0===s.data.existing)){t.next=7;break}return t.abrupt("return",{status:s.data.status});case 7:if(!(s&&s.data&&s.data.hasOwnProperty("existing")&&!1===s.data.existing)){t.next=11;break}return t.abrupt("return",{status:"missing"});case 11:return t.abrupt("return",{error:"technical issue"});case 12:case"end":return t.stop()}}),t)})))()},checkEmail:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error){t.next=5;break}return t.next=3,e.checkUserIsExisting(e.form.email);case 3:s=t.sent,s&&s.status?"active"===s.status?yt(e.$t("label.EmailAlreadyUsed"),"error"):"new"===s.status?e.$router.push("/user/createAccount/validation"):"blocked"===s.status?yt(e.$t("label.YourAccountIsBlocked"),"warning"):e.formDisabled=!1:yt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},backAction:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?5:"validation"===t.t0?7:10;break;case 3:return e.$router.push("/user/login"),t.abrupt("break",10);case 5:return e.step="generic",t.abrupt("break",10);case 7:return t.next=9,e.goToSignIn();case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})))()},goToSignIn:function(){var e=this;return n()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/login");case 1:case"end":return t.stop()}}),t)})))()},generateANewCode:function(){var e=this;return n()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Ee.generateANewValidationCode(e.form.email);case 3:s=t.sent,200===s.status?yt(e.$t("label.ANewCodeHasBeenSent"),"info"):yt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()}},validations:{form:{email:{required:Xt["required"],email:Xt["email"]},name:{required:Xt["required"]},country:{required:Xt["required"]},zipCode:{required:Xt["required"]},age:{required:Xt["required"]},terms:{sameAs:Object(Xt["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(Xt["sameAs"])((function(){return!0}))},password:{required:Xt["required"],minLength:Object(Xt["minLength"])(8),checkPasswordComplexity:Co}}}},li=ii,ci=Object(Te["a"])(li,oi,ni,!1,null,null,null),ui=ci.exports,di=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("img",{staticStyle:{width:"100%"},attrs:{src:"/statics/icons/game/oops.png"}}),"upgraderequired"===e.errorType&&e.isHybrid?s("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.UpgradeRequired"))+"\n  ")]):e._e(),"upgraderequired"!==e.errorType||e.isHybrid?e._e():s("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.RefreshCacheRequired"))+"\n  ")]),null===e.errorType?s("h3",[e._v("\n    "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n  ")]):e._e(),null!==e.errorMessage?s("p",[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),null===e.errorType?s("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()])},pi=[],mi={data:function(){return{errorMessage:null,errorType:null,isHybrid:window.cordova}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},hi=mi,fi=(s("1878"),Object(Te["a"])(hi,di,pi,!1,null,"50bb54ea",null)),gi=fi.exports,bi=[{path:"/",component:et,children:[{path:"",name:"none",redirect:"/home",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",redirect:"/user/login",meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang",name:"teamplayold",component:tt.TEAM_PLAY?tt.TEAM_PLAY:Dr,meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang/:option/:teamId",name:"teamplay",component:tt.TEAM_PLAY?tt.TEAM_PLAY:Dr,meta:{requiresAuth:!1}},{path:"home",name:"home",component:tt.HOME?tt.HOME:_s,meta:{requiresAuth:!0}},{path:"map",name:"map",component:Os,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:tt.QUEST_PLAY_HOME?tt.QUEST_PLAY_HOME:sa,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})/:qrcode",name:"playhomewithcode",component:sa,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:tt.QUEST_PLAY_STEP?tt.QUEST_PLAY_STEP:Sr,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:tt.QUEST_PLAY_END?tt.QUEST_PLAY_END:zr,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:Jr,meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:Br,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:qo,meta:{requiresAuth:!0}},{path:"user/createAccount/:step",name:"signup",component:ui,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:tt.LOGIN_PAGE?tt.LOGIN_PAGE:Po,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:Mo,meta:{requiresAuth:!0}},{path:"user/:id/quests/:type",name:"quests",component:en,meta:{requiresAuth:!0}},{path:"user/:id/friends",name:"friends",component:nn,meta:{requiresAuth:!0}},{path:"user/:id/badges",name:"badges",component:wn,meta:{requiresAuth:!0}},{path:"search/:type/:subtype",name:"search",component:An,meta:{requiresAuth:!0}},{path:"user/ranking/:type/:subtype",name:"ranking",component:Wo,meta:{requiresAuth:!0}},{path:"profile/:id",name:"profile",component:Sn,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"updateprofile",component:Qo,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:Hn,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:Zn,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:ri,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:gi,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return s.e(2).then(s.bind(null,"ee5d"))}}];l["a"].use(We["a"]);var vi=new We["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:bi}),wi=vi,yi=function(){return qi.apply(this,arguments)};function qi(){return qi=n()(r.a.mark((function e(){var t,s,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Ge){e.next=6;break}return e.next=3,Ge({Vue:l["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Ge;case 7:if(t=e.t0,"function"!==typeof wi){e.next=14;break}return e.next=11,wi({Vue:l["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=wi;case 15:return s=e.t1,t.$router=s,a={router:s,store:t,render:function(e){return e(ze)}},a.el="#q-app",e.abrupt("return",{app:a,store:t,router:s});case 20:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}var ki=s("9483");Object(ki["a"])("service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var xi,Ci=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(qr.a.locale(t),e)return qr()(String(e)).fromNow()}))},Si=s("a925"),_i=s("3013"),Ii=s.n(_i),Pi=function(e){var t=e.app,s=e.Vue;s.use(Si["a"]),t.i18n=new Si["a"]({locale:"fr",messages:Ii.a}),xi=t.i18n},$i=s("9224"),Ti=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=n()(r.a.mark((function e(t,s,a){var o,n,i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=13;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Ge.state.user||(Ge.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,points:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),a(),e.next=11;break;case 7:return e.next=9,Ee.getAccount();case 9:o=e.sent,o&&o.data&&o.data.name?(n=$i.version,o.data.clientSupportedVersion&&lt.compareVersions(o.data.clientSupportedVersion,n)>0?a({path:"/error/upgraderequired"}):(Ge.state.user=o.data,a())):Ge.state.user?o&&o.status&&200!==o.status?(401===o.status?yt(xi.t("label.SessionExpired"),"error"):yt(xi.t("label.AuthCheckError"),"error"),a({path:"/user/login",query:"/"===s.path?null:{redirect:t.fullPath}})):a():(i=Ne["get"]("firstusage"),i&&"ok"===i?a({path:"/user/login",query:"/"===s.path?null:{redirect:t.fullPath}}):(Ne["set"]("firstusage","ok",{expires:36500,secure:!0}),a({path:"/firstusage"})));case 11:e.next=14;break;case 13:a();case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("Error in RouterAuthentication:",e.t0),a();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,s,a){return e.apply(this,arguments)}}())},Ai=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var s=e.hash.split("/");"quest"===s[1]&&s.length>2&&"play"===s[2]&&(s.length>4?t.push("/quest/play/"+s[3]+"/"+s[4]):t.push("/quest/play/"+s[3]))}}))}}),!1)},zi=function(e){var t=e.Vue;t.use($s,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},Oi=s("1dce"),Mi=s.n(Oi),Ni=function(e){var t=e.Vue;t.use(Mi.a)};function Ri(){return Fi.apply(this,arguments)}function Fi(){return Fi=n()(r.a.mark((function e(){var t,s,a,o,n,i,c,u,d;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,yi();case 2:t=e.sent,s=t.app,a=t.store,o=t.router,n=!0,i=function(e){n=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[Ci,Ti,Ai,zi,Pi,Ni,tt],d=0;case 11:if(!(!0===n&&d<u.length)){e.next=29;break}if("function"===typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:s,router:o,store:a,Vue:l["a"],ssrContext:null,redirect:i,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==n){e.next=31;break}return e.abrupt("return");case 31:new l["a"](s);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),Fi.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&s.e(0).then(s.t.bind(null,"a0db",7)),Ri()},3:function(e,t){},3013:function(e,t){var s="https://graaly.com",a="sales@graaly.com",r={privacy:{en:s+"/privacy-policy/",fr:s+"/fr/confidentialite/"},terms:{en:s+"/terms/",fr:s+"/fr/cgu/"}};e.exports={en:{color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White",gray:"Gray",pink:"Pink",purple:"Purple",orange:"Orange",yellow:"Yellow",brown:"Brown"},news:{newQuestWon:"Has won the game <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the game <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your game <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on game <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the games you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in games during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video & text",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Geolocation",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",ImageOverFlow:"superimpose image and camera / Souvenir photo",ImageOverFlowDesc:"superimpose transparent image and camera flow",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Scan a QR Code",LocateMarkerDesc:"Player has to find a QR code.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"Redirection / End of chapter",EndOfChapterDesc:"This transition send player to a new chapter",TriggerEvent:"Graaly -> your material",TriggerEventDesc:"Graaly physical a physical action (using an electronic board)",WaitForEvent:"Your material -> Graaly",WaitForEventDesc:"A physical action activate a step (using an electronic card)",HelpStep:"Help page",HelpStepDesc:"How to use Graaly, presentation of the buttons for the players.",PortraitRobot:"Composite picture",PortraitRobotDesc:"Create suspect face based on face items",PhoneCall:"Phone call",PhoneCallDesc:"Launch a phone call to a defined number",Binocular:"Binoculars",BinocularDesc:"Search in a picture using binoculars",IncrementCounter:"Increment counter",IncrementCounterDesc:"Increment a counter that you can use for your steps trigger"},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected",new:"new",used:"used",reused:"used twice",rereused:"used 3 times"},story:{hint:"Hint: <br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!"},iotObjects:{keypad:"Keypad",joystick:"Joystick",distance:"Distance",pot:"Potentiometers",lcd:"LCD display",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Chest",button:"Button",relay:"Relay"},days:{day0:"Sunday",day1:"Monday",day2:"Tuesday",day3:"Wednesday",day4:"Thursday",day5:"Friday",day6:"Saturday"},snapshot:{share:"share",save:"save",shareTitle:"Share with friends",fileDownload:"Cette image a été téléchargée",notSupported:"This function is not supported with this device",imageSavedToGallery:"This image is saved in your photo gallery",imageSavedFailed:"Something went wrong while saving your photo"},samples:{sample1:"Simple linear treasure hunt",sample2:"Escape game with QR codes to flash",sample3:"Advanced escape game"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",BackToMap:"Back",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the games near your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (It can takes up to 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error has occured, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again oin one hour",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be at least 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you are using Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful games",QuestsCreated:"Created games",CreateANewQuest:"Create a new game",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No game created",NoQuestPlayed:"No game played",NoQuestPlayedLong:"No game played. To play a game, return to the home page!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",MyProfile:"My profile",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to ?",ReachScoreOf:"Reach a score of {score} to unlock new games",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play",ContinueTheQuest:"Continue the game",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",km:"km",NoQuestForThisSearch:"No game for this search",NoPlayerForThisSearch:"No player for this search",NoDesignerForThisSearch:"No designer for this search",WhyDontYouCreateAQuest:"Why don't you create a game?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",InventoryZoom:"Touch an objet to zoom",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this game",YouAlreadyStartThisQuest:"You have already played this game, do you want to continue where you last left it?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",Hints:"Hints",CreateYourQuest:"New game",CreateYourPrivateQuest:"Create your private game!",CreateYourPublicQuest:"Create your public game!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</p><p>The story of your game must not undermine living or dead people</li><li>Your game must concern a location where no game has already be done, except if the content is different enough.</li><li>Your game must have more than 6 steps. We advise you to have less than 70 steps</li><li>Our moderation team will check if your game respects these rules, and if the quality level is enough. If not, you will be asked to improve your game, or your game will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 20 invitees (for more, please contact us)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 200 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny game to challenge players and win points!",BuilderProIntro:"Create your game on Graaly",BuilderChooseUserType:"Are you:",BuilderAddRoomMessage:"<p>By adding your room, you can benefit from services for free: <ul><li>Visibility in our directory</li><li>Statistics</li><li>Link to your reservation page</li><li>Suggestion of your room to our community</li></ul></p><p>Your customers can benefit also from free services: <ul><li>Find your rooms around them</li><li>Follow escape games played by their friends and challenge them on your rooms</li><li>Save their results and win points to challenge their friends</li></ul></p>",AProfessional:"professional",AProfessionalDesc1:"As a professional, you can use advanced Graaly features (statistics, advanced customization, monetization, easy start QR code ...)",AnIndividual:"individual",AnIndividualDesc1:"As an individual, you can also create public and private games, with all Graaly features you need",TryForFree:"Test for free",FromPrice:"From",PaymentOnUsage:"Pay as you go",NewQuest:"New game",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the game",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your game is published",YourQuestIsUnpublished:"Your game is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your game",PublishYourQuest:"Publish your game",UnpublishYourQuest:"Unpublish your game",SelectedLanguage:"I create my game in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Game",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload an image",AddABackgroundImage:"Add a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of what should be found",UploadTheObjectToFind:"Upload the GLB file of the 3D object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step without testing",SaveAndTestThisStep:"Save and test this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Wrong answer. You have {nb} tries left",SecondTryOnTry:"Wrong answer. You can have one more try",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your game",AddYourChapters:"Create a first chapter and add first steps of your game inside",ActivateTheLanguageVisible:"Activate the languages playable for your game",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your game",LanguagesPublished:"Publish game in",LanguagesPublishedForPrivate:"Publish game for invitees (or with QR code below)",PageLanguagesPublished:"Publish page in",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave the game",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you points. Are you sure to use it?",YouWin:"You have won",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review it",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this game in the past",ResolveOtherQuestsToWinPoints:"Play new games to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have no friend yet",YourRanking:"Your ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this game?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",LocationToFind:"Location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the games of a city to win all the rewards",NoRankingYet:"Your rank is not yet calculated, it id calculated once a day",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your game is now read only. Your game will be validated by our game master. This can take a few days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email explaning why",QuestPublicationRejected:"Your game has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"You found it! Touch it now!",ObjectSize:"Object size",TouchDistance:"Object can be touched nearer than...",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the game",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step.",YourQuestMustContainAtLeast6Steps:"Your game is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your game is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Your battery is low, please consider charging it",WarningNoNetwork:"Waiting for network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the game element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this game",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this game? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type the email address of the editor you want to invite",InviteInviteesHelp:"Type the email address of the person you want to invite",UserIsNotAGraalyUser:"No more invitee allowed or this person need to create a Graaly account.",EditorIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text",NewHint:"Next hint","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a game",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",FriendsAdded:"You follow this person now",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove this friend ?",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"Create your profile!",WeNeedMoreInformationAboutYouDesc:"It's simple and it unlocks nice features",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",CreateMyAccount:"Create my account",IAlreadyHaveAnAccount:"I already have an account",Reviews:"Reviews",CommentThisQuest:"Comments for game author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the game before sending your review",QuestNotReviewed:"This game has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery game",contactUsPro:'You can find our professional services on <a href="'.concat(s,'" target="_blank">').concat(s,'</a> or contact us at <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",NetwordkErrorReloadPage:"Network issue! We will try to reload page in 15 seconds.",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again from the start",BackToQuest:"Back to the game",min:"min",pts:"pts",SportQuest:"Nature game",DiscoveryQuest:"Discovery game",CulturalQuest:"Cultural game",ChildQuest:"Children's game",TransportQuest:"Game by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night game",ExtremQuest:"Extreme game",CulinarQuest:"Culinary game",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, it will still be avaible in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before the text appear above the background image (in seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this game (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your gender",PleaseSelectYourAge:"Please select your age range",RankingIntro:"Here are the best players for this game",CloseQuestRanking:"Back to the game",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to the end of the game",NoFriendsLong:"You do not follow people yet",IAgreeTheTermsAndConditions:"I agree with the <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.terms.en,"', { openExternal: true }) : window.open('").concat(r.terms.en,"'))\">terms & conditions</a>"),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:"I agree with the <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.privacy.en,"', { openExternal: true }) : window.open('").concat(r.privacy.en,"'))\">privacy policy</a>"),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.terms.en,"', { openExternal: true }) : window.open('").concat(r.terms.en,"'))\">Terms & conditions</a>"),PrivacyPolicyLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.privacy.en,"', { openExternal: true }) : window.open('").concat(r.privacy.en,"'))\">Privacy policy</a>"),DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",StepRandom:"(BETA) Randomly after",StepCounter:"(BETA) Counter has the value",StepCounterGreater:"(BETA) Counter is greater than ",StepCounterLower:"(BETA) Counter is lower than ",StepCombineObject:"(BETA) Object combined ",StepHaveObject:"(BETA) Object is in inventory ",StepNotHaveObject:"(BETA) Object is not in inventory ",StepAnswerNb:"(BETA) Answer Nb to the question",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have an 'End of chapter' step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the 'introduction step' of a chapter can have no triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe the following step has been removed, or you created circular conditions)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues in your game",IssuesInYourStep:"Issues in your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a QR code, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occured.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this game. If your game is already published, players will play the published version, until you will publish this new game version.",ClickHereToCreateANewQuestVersion:"To edit your game, click here",YourUnderValidationQuests:"currently reviewed",YourRejectedQuests:"Your rejected",YourDraftQuests:"Your drafts",YourPublishedQuests:"Your published",QuestDraftVersion:"Non published version of the game",PageDraftVersion:"Non published page",PrivateQuest:"Private game",PublicQuest:"Public game",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your game, do you want to add it?",Results:"Results",ClosePrivateQuest:"Close the game",ClosePrivateQuestDesc:"After clicking here, your game will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this game? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this game",NoPlayersYetForThisQuest:"No player yet for this game",PrivateQuestDesc1:"Your game is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a game to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your game will be visible and playable by every body",PublicProQuestDesc1:"Your game is playable by all users. You pay a small fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",PublicProQuestDesc2:"<p>If your game is not free, you can either use the in-app payment, or manage the payment your self</p><p>For the in-app payment, Google/Apple take 30% of the revenues</p><p>In all cases, Graaly takes 30% of the revenues</p><p>The rest is for you, so from 40% to 70% of the net revenues.</p><p>Graaly will send you money monthly</p><p>If your game is free for the end users, Graaly will charge you monthly 0,25 € (excl. taxes) per player</p><p>You can disable your game when you want</p><p>Please contact us at contact@graaly.com for more details</p>",PrivateProQuestDesc1:"Your game is dedicated to a list of people. You pay a fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",CreatePrivateQuest:"Create a private game",BuyPrivateQuest:"Buy a private game",OnlyBuyableOnMobile:"Only buyable on mobile",AcceptAndBuyAPrivateQuest:"Accept and buy a private game",CreatePublicQuest:"Create a public game",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this game",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your game is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Game type",helpQuestType:"A chain of clues game is a list of enigmas that follows each other. A game is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first game, we advise you to start with a chain of clues game. You can change a chain of clues game in a game, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Game files",YouDoNotUseAnyMediaYetInYourQuest:"You do not use any media yet in your game",Feedback:"Your feedback",Back:"Back",FeedbackTitle:"Send feedback",FeedbackIntroduction:"To send feedback to this game author, or rate this game, please wait for the end of the game. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your game builder",OrDownloadAFile:"Or download your own picture",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your game...",ErrorOfflineSaving:"Technical issue, you can not play this game without a network connection",QuestNeedNetwork:"You need network to launch this game. Activate your device network, and click on the button when you have network to launch the game",ReloadQuest:"Reload game",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Loading ...",Loading:"Loading ...",YouAreOfflineNoQuestsAvailable:"Sorry, we could not find any game playable offline.",ButtonsColor:"Buttons bar color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",byteCharacter:"B",AvailableTomorrow:"Available tomorrow",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You already follow this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not follow more than 150 people",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this game without a network connection.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro game",MovePremium:"Move this game to pro mode",PremiumDefinition1:"Give your game more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized game to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable game</u>: you can sell your game to players</li><li>You can access the statistics of your game</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, have a look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your game to premium mode (look at your game settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of game played",NumberOfPlayersYesterday:"Yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by gender",AverageScore:"Average score",AverageDuration:"Average duration (min)",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro games",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro game(s) more",YouCanNotCreateNewQuests:"Yon can not create new pro games. Subscribe to our professional offers on <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(s,"', { openExternal: true }) : window.open('").concat(s,"'))\">").concat(s,'</a> or by email at  <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Paying:"Paying",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of game on a mobile device",QuestPlayableOnMobile:"This game is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Game loading failed. You can play the game online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the game. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a game",SuggestANewQuest:"Suggest a new game",YouLikedThisQuest:"You liked this game?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested games to contact the responsible of this place. You will be warned if a game is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Game has been updated",PleaseRestartQuest:"Please restart the game from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code",ScanQRCode:"Scan a QR Code",MarkersToPrint:"Game's QR Codes",MarkersToStartQuest:"Players can start your game by scanning this QR code on the login page",SaveQuestResultsMarker:"Your player can scan a QR Code to save their score with Graaly (scan it on login page or home page). For the players who exited the room in time:<br /><img src='{url3}' /><br />For players who were close to exit the room in time:<br /><img src='{url2}' /><br />For players that did not exit the room<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other games around",UnknowUploadError:"An error occured. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screen. Depending on the screen sizes, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your game. This will motivate them to play your game. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",CreateYourAccountMsg:"Create your account to save your score and play with your friends!",MaybeLater:"Maybe later!",LetsPlay:"Play",NewAccount:"New account",PleaseAcceptDeviceMotionPermissionRequest:"Please allow the application to detect the motion of your device, in order to play this part of the game",PleaseAcceptDeviceOrientationPermissionRequest:"Please allow the application to detect the orientation of your device, in order to play this part of the game",DoYouWantToCreateAnAccount:"To build a game, you need to create an account. Do you agree to create your account?",UserWithSameEmailAlreadyExisting:"An account already exists with this email address",PasswordTooWeak:"Your password must be more complex (8 caracters and a capital leter and one digit)",AreYouSureYouWantToPublishThisQuest:"Are you sure you want to ask for publishing? You will not be allowed to make changes until Graaly team validate your request",YourCharacter:"Custom character",AddACustomCharacter:"Add a character",helpQuestCharacter:"This character will show up when a player ask for a hint or a Read More message",AvailableColors:"Available colors",TypeColorCode:"Type color code. Ex: #ff55cc",TypeColorCodeName:"Type the color name. Ex: Red",AddNewColor:"Add a new color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>You are far from this game</b>.<br />By solving this game afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this game</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are editor of this game, you will not win any point, and you will not play it with offline mode",GeneralWarning:"<b>For your safety</b>, do not play the game driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",RemoveScoringAndRating:"Hide the score and the rating",TypeEndMessage:"Text replacing the scoring and rating final screen",TypeEndMessageForPerfectScore:"Customized text if user has all answers right",ThanksForPlaying:"Thanks for playing this game. See you later with new games!",EnlargePictureToFullWidth:"Enlarge the picture to full screen",EnlargePictureToFullHeight:"Enlarge the picture to full height",PlayerCanTakeSnapshot:"Player can take snapshots",SnapshotTaken:"Screenshot saved on your mobile",SnapshotTakenIssue:"Error with the automatic screenshot. You can make a manual screenshot.",NbTrials:"Trials number",UserCanPass:"Player can pass this step",Welcome:"Welcome!",SignIn:"Sign-in",Subscribe:"Subscribe",EmailAlreadyUsed:"This email address is already used. Please sign-in or ask to modify your password",AroundYou:"Close to you",SeeMore:"See more",Designers:"Designers",Difficulty1:"Easy",Difficulty2:"Normal",Difficulty3:"Hard",ClosestQuestToYou:"The game closest to you",YouAreNearThisQuest:"You are close to this game",YouAreInvitedToThisQuest:"You are invited to this game",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Played by friends",ScoreAndBadges:"Score & badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"With this game, you can win:",ScoreRange:"Between {min} and {max} points",InProgressPreparation:"Preparation in progress",Warnings:"Warnings",Follow:"Follow",Followed:"Followed",SolvedQuests:"Solved games",Creations:"Creations",Badges:"Badges",FollowYourFriends:"Follow your friends",CreatedYourFirstQuest:"Create your first game",DoNotFollowAnymore:"Stop following",AllTheseDataAreOptional:"These informations are not mandatory:",DataCountry:"Your country: used to display the relevant games for you",DataZipcode:"Your zip code: used to display the relevant games for you",DataSex:"Your sex: used to display the relevant games for you",DataAge:"Your age: used to hide games not adapted to your age",DataPhone:"Your phone number: used to connect you with your friends",EscapeGame:"Game",EscapeGames:"Games",Players:"Players",YouHaveReachAScore:"You have reached {score} points",LevelReached:"Level reached!",PointsToReachLevel:"{score} points to reach",Friends:"Friends",World:"World",MyCountry:"My country",MyCity:"My city",NoRanking:"No ranking yet",Invitations:"Invitations",YouFollowThem:"You follow",AddYourRoomInTheDirectory:"Add your room in the directory",AddYourRoom:"Add your room",ProAddYourRoom:"You can add you rooms and benefit from many free services",YourRoom:"Your room",PriceFrom:"Price per player from",ReadMoreLink:"Link to the booking page",SmallPicture:"Small picture",SeeYourQuestPage:"Preview the page",FromPricePerPlayer:"From {price} per player or game",Book:"Book",YourBadges:"Your badges",YouDoNotHaveBadgesYet:"You do not have badges yet. To win badges, you need to play games with rewards.",FollowedPeople:"Followed people",WeNeedYourPositionForThisFeature:"We need your position for this feature",OtherCharacters:"Other characters",BackToTheMap:"Home",or:"or",RefreshCacheRequired:"The application cached on your browser is too old. Please use private navigation to update your cached files",FindFriendManually:"Find friends manually",NoQuestAroundYou:"We did not find games close to you",CachedQuests:"Already loaded",YourPresentation:"Introduce yourself",DuplicateThisQuest:"Clone this game",DoYouWantToOpenClonedQuest:"Do you want to edit the duplicated game now?",OpenTheMap:"games map",ReplacePictureByRedFilter:"Replace picture by red filter",TotalNumberOfPlaysNotFinished:"Number of games in progress",RoomDataWarning:"Some information can be obsolete, do not hesitate to look at the escape game web site for more information",AnonymousUser:"Anonymous user",NotWon:"To be won",OnTopGames:"Featured games",ThisStepOnlyWorkOnMobile:"The QR code scan only works on the mobile app",YourQuestHasNotBeenPublished:"Your game is not published",OnDesktopDisplayMessage:"On computer, you need to reduce your the size of your browser window.",EventCode:"Event code",BoardMacAddress:"Board Mac address",SuccessMessage:"Success message",YourTime:"Your time",LimitNumberOfPlayerInOneHour:"Limit the number of players by hour (0 = unlimited)",TooMuchUsersCurrently:"Too much users are playing currently",OrSelectAnImageInTheList:"Or pick a picture in the list",IotObject:"IoT object",Protocol:"Protocol",SuccessRange:"Success range",SuccessRanges:"Success ranges",WriteTextWarning:"Accents and capital letters are not necessary",DistanceToWin:"Player wins when he is closer to the GPS location than (m)",SplitMessageWithPipe:"Add pipes '|' if you want to split your text in several bubbles",ClickHere:"Click here",FollowTheCreator:"Follow the creator",PlayersNumber:"(BETA) Number of smartphone to play",helpQuestMultiplayer:"This define the minimum number of players to play the game. Each player will have his phone, and should have specific missions in the game. For more information about multiplayer, please watch our Youtube tutorials",ThisIsAMultiplayerGame:"This game is multiplayer",JoinATeam:"Join a team",ScanTheLeaderQRCode:"Scan the leader QR Code",CreateATeam:"Create a new team",TeamName:"Team name",CreateTeam:"Create the team",OtherPlayersMustScanThisQRCode:"Other players must scan this QR Code to join your team",ThisIsNotATeamQRCodeValid:"This code is not valid! You must scan a code displayed on the mobile of the person who create the team",MyTeamIsCompleteLetsGo:"Team has scanned, let's go!",YouNeedMoreMembersToPlay:"You need {nb} members to start this game. Current member(s): {members}",Team:"Team",WaitingForOtherUsersActions:"Waiting for other players",WaitingForOtherUsersActionsDesc:"You can not go forward until other players solve their puzzles",Player:"Player",All:"All",YouNeedToBeXPlayers:"You need to be at least {nb} to play",YouNeedAtLeastXEditorsToTest:"You need at least {nb} éditors to test this multiplayer game (see Publish tab)",HereAreTheTesters:"This is a multiplayer game. It will be tester by: {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Display of your picture on diffent screen sizes",MyPictureIsNotDisplayedWell:"The display is not correct",MyPictureIsNotDisplayedWellDesc:"<b>If your picture is not correct for all sizes</b>: You need to have a picture with 900 pixels width and 1200 pixels height.<br /><b>If your picture is not correct with the smaller size</b>: You need to add a not useful border of 100px. You can add a black border of 100 pixels to your picture for example",RestartQuest:"Restart game",AreYouSureToRestartThisQuest:"Are you sure to restart this game? You will not gain any point by restarting.",PaymentOnMobile:"Payment on mobile",PaymentOnMobileHelp:"The payment is really simple for players, in one touch. Meanwhile, the Apple / Google stores will take 30% of the revenues.",PaymentOnYourSide:"Payment managed by you",PaymentOnYourSideHelp:"You can manage the payment in your store or with tiers like 4Escape",Payments:"Payments",CreateNewQRCodeForPlay:"Create a new unique QR Code for a player",Create10NewQRCodeForPlay:"Create 10 new unique QR Codes",Create50NewQRCodeForPlay:"Create 50 new unique QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Are you sure to remove this code? If you have sent this code to a player, he will not be able to play any more!",BuyThisQuest:"Buy this game",YouHaveReceivedAQrCodeFrom:"You have received a QR code from {author}",ScanTheUniqueQRCode:"Scan the single use QR code",BuyInOneClick:"Buy in one clic",TechnicalIssueOrCodeAlreadyUsed:"This QR code is already used by another account. Please sign-in or contact the creator of this game to have a new code.",ChangeTheBackgroundImageOnceClicked:"Change background picture when player has clicked",Message:"Message",Frequency:"Frequency",TriggerTheEvent:"Trigger the event",SearchingBluetoothDevice:"Searching Bluetooth device...",KeypadInput:"Keypad input",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Open",ChestActions:"Chest actions",TriggerMode:"Triggering mode",TriggerModeAuto:"Auto (at step loading)",TriggerModeManual:"Manual (player must touch a button)",helpPlayer:"For each step of a multiplayer game, you need to select the player who will see the step. Other players will not see it, and will have a waiting message until the player solve the enigma. You can display a transition step for all player, but an enigma can only be display for one player. If you need an enigma to be solved by all users, you need to create a step for each player. For more information, please watch our Youtube tutos.",ErrorMessageForNewTeamMember:"Technical issue or number of players reached",YouNeedToUnpublishYourQuestToRemoveIt:"You need to unpublish your game to remove it",PleaseEnterYourTeamName:"Please enter your team name",Version:"Version",CountDownLabel:"Time limit for this step",CountDownIsActive:"Activate the time limit",CountDownWarning:"Are you sure you want to activate the timer ? Make sure that there are no risks for the player, like a road to cross!",CountDownPopupfail:"Time is up !",MaxScore:"Max score",YouMustTestThisStepOnMobile:"You must test this step on a mobile device",AreasNumber:"Number of areas to find",ItRemains:"It remains",s:"s",LetsPlayWithoutAccount:"Play without account",ErrorDownloadNeedsToRestart:"Error while downloading, do you want to restart?",StartCreation:"Start creation?",ErrorTakingSnapshot:"Snapshot has not been taken",YourAudioFile:"Your background music",AddAnAudioFile:"Add a background music",ObjectNeedToBeAppliedOnPicture:"The object is applied on a picture area",ReadNext:"READ MORE",AlreadyPaied:"Purchased",HelpStepMessageInventory:"Display Inventory button help",HelpStepMessageHint:"Display Hint button help",HelpStepMessagePrevious:"Display Previous button help",HelpStepMessageNext:"Display Next button help",HelpStepMessage:"Welcome in your interface!\n\nTo participate, just follow the indications on screen.",HelpStepMessageInventoryMessage:"With the suitcase, you can access and use the objects won during the game.",HelpStepMessageHintMessage:"With the light bulb, you can access the hints.",HelpStepMessagePreviousMessage:"Press the back button to move back to the previous step.",HelpStepMessageNextMessage:"Press the next button to move to the next step.",HelpStepMessageEnd:"If any problem, do not hesitate to close the application, you will restart to the latest step you played.",KenBurnsEffect:"Zoom out effect on picture",Show:"Show",Hide:"Hide",TotalSellings:"Game sells",RevenuesPayedFloor:"Revenues payed when over 50€",QRCodeMessage:"Message displayed when user needs to scan a QR code (escape game mode)",GeolocationMessage:"Message displayed when user to find several geolocalized places (escape game mode)",TeamID:"Team ID",PleaseFillThisForm:"Please fill this field",Zoom:"Zoom",ScheduleGame:"Schedule the game",GameSchedule:"Game schedule",Reset:"Reset",SchedulingDescription:"The game is playable :",From:"From",To:"To",QuestIsNotPlayableNow:"The game is not playable now",OpeningHours:"Opening hours",CreationStudioHelp:"<h3>Help</h3>We propose you several resources to help you using the creation studio:<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Builder guide (fr)</a></li><li>Some <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>video tutorials (fr)</a> to build steps of your game</li></ul><div class='text-accent'>New ! Join the <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>Graaly game designer Facebook group</a> to ask your questions to other game designers and to Graaly developers!</div><br />To test your game, we advise you to:<ul><li>test on your phone with the Graaly app</li><li>test on your web browser <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>developer mode</a> (to make it short, click on f12 key, and on the tablet icon). Warning: some steps are not working on this mode (Augmented reality, geolocation, QR code flashing, superimpose image and camera)</li></ul>",TestWithSimulatorWarning:"You will test with the simulator. Some step types are not working on it. For a real test, please use the Graaly mobile application",FontFamily:"Font used for texts",ExportTexts:"Game's texts",Downloads:"Downloads",ForcePlayerToHaveAccount:"Force player to create a Graaly account",ForcePlayerToHaveAccountHelp:"If not activated, users can play your game without creating an account",ShareUserDataWithCreator:"Ask player to share his data with you",ShareUserDataWithCreatorHelp:"A user that plays Graaly accept to share his data with Graaly. You can ask players to share the data with you also. To motivate them, we advise you to make them win something (organize a draw, give a voucher, ...)",YouNeedToCreateYourAccountToPlay:"You need to create your account to play this game",ShareDataWithPartner:"Share your data with the game creator",PartnerAskForYouData:"The creator of this game want to access your data (email address, name). The reason can be to organize a draw, or a competition, or to give you a voucher. Please read the game description for more information",UseHtmlInDescription:"Use HTML tags in the question",DoNotDisplay:"Do not display",AddAnGPSLocation:"Add a GPS location",BuildThePortraitRobot:"Build the picture to find",Education:"Education",EducationDesc:"We do not have an education plan yet, but you can use the professional mode and contact us at contact@graaly.com.",Call:"Call",BlurEffect:"Blur effect",CheckpointReached:"You have reached a checkpoint! The map now shows the next target's position.",DefaultMode:"Default display mode",CompassMode:"Classic",CompassModeHelp:"Shows a direction arrow and the remaining distance to reach the target",MapMode:"Map",MapModeHelp:"Shows a Google map with player & target positions",AllowToSwitchGeolocationMode:"Button to switch display mode",ApplyRedFilter:"Apply red filter",Chapters:"Chapters",Chapter:"Chapter",ChapterChangeWarning:"Changing the chapter will remove his triggers and create inconsistencies in triggers. You will need to update the steps that depend on it.",ResetHistoryAfter:"Prevent back button after this step",RestartChapterAfterStep:"Restart chapter after this step",HideInventory:"Do not use inventory",ShowCountDown:"Display countdown timer",StopGameAfterCountDown:"Stop game when time ends",ItRemainsMinutes:"It remains {time} minutes",CustomizeEndOfGame:"Customize the end of the game",CustomizeGameInterface:"Customize game interface",GameAvailability:"Game availability",GamePayment:"Game payment",UserData:"User data",CustomizeGameIntroduction:"Customize game presentation",RemoveGPSLocation:"Remove this location",OverQuotaMessage:"You reach the file storage limit",RemoveFiles:"Remove files",InvalidTeamID:"Invalid team ID",HideFullScreen:"Do not display full screen (Android)",YourFullName:"Your full name",TextColor:"Text color",GoodAnswersNumber:"Right answers",PleaseEnterFirstNameAndLastName:"Please type your first name and last name",PassTheQRCodeInFrontOfYourCamera:"Pass the QR code in front of your camera",HideHideButton:"Hide show/hide button",PleaseHoldYourDeviceFlat:"Please hold your device flat",MyLocationWarning:"Current GPS coordinates are not accurate enough. To get the GPS position, please use Google Maps (by clicking on a location, a popup is displayed with latitude and longitude), the 'My GPS position' app on Android or iPhone.",FindAllLocationsToStartSteps:"Move and find each location!",ColorIndicatorExplaination:"You are {distance}m from the nearest place",YouWonNewGame:"Congratulations! You unlocked a new game!",WarningLowGpsAccuracy:"Warning: low GPS accuracy",PersistentLowGpsAccuracyPleaseSkipStep:"GPS accuracy is still too low after one minute. We advise to skip this step (bottom right button).",LocationSaved:"Current location set as goal position.",CurrentLocation:"Current GPS location",Accuracy:"Accuracy",Meters:"meters",secondes:"seconde(s)",ScanA:"Scan a",OnceADay:"Once a day",UserCanReplayGame:"User can play again",CustomizeYourName:"Customize the author's name",YouCanNotPlayAgainThisGame:"You can not play again this game",YouCanNotPlayAgainThisGameToday:"You can play again tomorrow",CustomizeRightAnswerMessage:"Custom right answer message",CustomizeWrongAnswerMessage:"Custom wrong answer message",RotateVideo:"Rotate the video 90°",UploadSucessful:"Upload successful",RemoveObjectFromInventoryAfterUse:"Remove object from inventory after use",ModifyTheHint:"Modify the hint",AddAGameSnapshot:"Add a game snapshot",Snapshots:"Snapshot(s)",CounterValue:"Counter value",CharacterBarColor:"Color of the bar below the character",HideMake8Animation:"Hide animation if GPS is weak",HideEnlargeMessage:"Hide button to enlarge thumbs",CustomizedMemoryCardColor:"Customized color for the cards",HidePuzzleNotWorkingMessage:"Hide button when puzzle is not working",SnapshotManualOnIOs:"To make a screenshot on iPhone/iPad, press the side button and the volume up button at the same time",MovePictureWithFinger:"Move the binoculars with your finger to observe the whole picture",InvalidCondition:"Invalid trigger, please remove",WrongLocationMessage:"Message when user click wrong location",MoveToNextStepAutomatically:"Move to next step automatically",Duplicate:"Duplicate",PleaseWaitLoadingAndGPSInit:"PLEASE WAIT, DATA AND GPS INITIALIZATION",MoveToNextStepAutomaticallyDuration:"Seconds before moving to next step",UseAModel:"I use a model",AddToInventoryAndPass:"Add in inventory and pass this step",holdVerticaly:"For the best experience with augmented reality, please hold your phone upright.",startScan:"Start Scan",noSensorFound:"No sensors found on your device",noSensorNext:"You can go directly to the next step by clicking on the arrow at the bottom right",UniqueUsageQRCodeWarning:"Please note that this code can not be used with another Graaly account. To use it on another device, you need to use the same Graaly account.",arDialogTitle:"Authorization",arDialogMessage:"To continue, please authorize the application to use features of your device",qrCodeAlreadyScan:"You have already tried this QR Code",qrCodeAlreadyGood:"You have already scanned the correct QR Code, go to the next step",Audio:"Audio",TeamPlay:"Team game",TypeTeamPlayId:"Type the game ID if you received one.",OrderIsNotImportant:"Picture order is not important",DoNotPreventUserForHint:"Do not display a warning message when user call a hint",DeleteQuestAndFolder:"Quest And Files are delete",TextTooLongForStep:"Your text is too long and could impact readability on small screens. We recommend {nb} characters for this kind of step. Do you still want to save ?",FirstAndLastName:"Your first and last name",IconForSuccess:"Icon displayed on success",SelectThisIcon:"Select this icon",NoIcon:"No icon",CustomizeRightAnswerColor:"Customize right answer message color",CustomizeWrongAnswerColor:"Customize wrong answer message color",Binoculars:"Binoculars",FlashLight:"Flashlight",Shape:"Shape",DataHaveBeenRemoved:"Data have been removed",Private:"Private",WarningInvitees:"The invitees will be able to play when your game will be published",RemoveOfflineData:"Remove offline games data",DisplayTime:"Display time",DisplayGoodAnswers:"Display number of good answers",FaceCamera:"Front camera",BackCamera:"Back camera",CameraUsed:"Camera used",RedirectToNextChapter:"Redirect to next chapter",RedirectToChapter:"Redirect to chapter",ObjectCombined:"Object combined",CombineItems:"Combiner the items",MyGameIsIndoorRemoveWarningsOnStart:"My game is indoor without any risks, remove warnings on startup",YouCanOnlyUseThisFeatureInNewItemStep:"You can use this feature only in New Object steps",YourCharacterOnMap:"Character on the interactive map",AddACustomCharacterOnMap:"Add a character on the map",helpQuestCharacterOnMap:"This customize the marker that show the user position on the interactive map",UploadTheLocatorPicture:"Upload a picture for the map",ObjectInInventory:"Object is in inventory",ObjectNotInInventory:"Object is not in inventory",ResetChapterProgression:"Reset progression for this chapter",GeolocationCouldNotBeRetrieved:"Unknown player location",GeolocationIsDeniedPleaseSkipThisStep:"This part of the game requires your geographical location, but it seems that you denied access to your location to the app. Therefore, this step cannot be shown. Please use the right arrow button to play the next step.",HidePaiement:"Hide the price (communicated to players outside of Graaly)",QRCodeAlreadyUsed:"This QR code is already used by another account. Please sign-in or contact the creator of this game to have a new code.",GeolocationIssuePleaseSkipThisStep:"This part of the game requires your geographical location, but Graaly could not retrieve it, either due to a permission issue or an accuracy issue. Please ensure that you have allowed Graaly application to access to your location (by checking your device settings) and that your GPS is enabled and calibrated (to calibrate, move your device in a figure-8 motion a few times). Currently, this game step cannot be shown. Please use the right arrow button to play the next step.",PrintQRCodePages:"Print QR Codes",AnswerNumber:"Number of the answer",QRCodeIsNotStartingOne:"This is not the right QR code. Look for the QR code to start the game!",QRCodeIsNotPlayingOne:"This is not the right QR code. Look for the QR code with a logo on the bottom right!"}},fr:{color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc",gray:"Gris",pink:"Rose",purple:"Violet",orange:"Orange",yellow:"Jaune",brown:"Marron"},news:{newQuestWon:"A réussi le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre jeu <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur le jeu <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos jeux durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est doublée durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"+100 d'énergie","100coinsDesc":"Vous gagnez +100 en énergie","10coins":"+10 énergie","10coinsDesc":"Vous gagnez +10 en énergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Géolocalisation",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",ImageOverFlow:"Superposer image et caméra / Photo souvenir",ImageOverFlowDesc:"Superposer une image transparente avec la caméra",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser un objet",UseAnItemDesc:"Utiliser un objet de l'inventaire sur une image",LocateItemAR:"Réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité.",LocateMarker:"Scanner un QR Code",LocateMarkerDesc:"Le joueur doit trouver un QR Code.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Redirection / Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur à un nouveau chapitre",TriggerEvent:"Graaly -> Votre matériel",TriggerEventDesc:"Graaly déclenche une action sur votre matériel physique (utilisation d'une carte électronique)",WaitForEvent:"Votre matériel -> Graaly",WaitForEventDesc:"Votre matériel active une étape Graaly (utilisation d'une carte électronique)",HelpStep:"Page d'aide",HelpStepDesc:"Aide à l'utilisation de Graaly, présentation des boutons.",PortraitRobot:"Portrait robot",PortraitRobotDesc:"Reconstituez le visage des suspects",PhoneCall:"Appel téléphonique",PhoneCallDesc:"Lancez un appel téléphonique vers un numéro défini",Binocular:"Jumelles",BinocularDesc:"Rechercher dans une image en utilisant des jumelles",IncrementCounter:"Incrémenter le compteur",IncrementCounterDesc:"Incrémenter un compteur que vous pouvez utiliser pour déclencher des étapes"},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Français"},status:{published:"publié",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dépublié",rejected:"rejeté",new:"nouveau",used:"utilisé",reused:"utilisé 2x",rereused:"utilisé 3x"},story:{hint:"Indice :<br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !"},iotObjects:{keypad:"Digicode",joystick:"Joystick",distance:"Distance",pot:"Potentiomètres",lcd:"Afficheur LCD",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Coffre",button:"Bouton",relay:"Relais"},days:{day0:"Dimanche",day1:"Lundi",day2:"Mardi",day3:"Mercredi",day4:"Jeudi",day5:"Vendredi",day6:"Samedi"},snapshot:{share:"Partager",save:"Télécharger",shareTitle:"Partage avec tes amis",fileDownload:"Cette image a été téléchargée",notSupported:"Cette fonctionnalité n'est pas supportée sur cette plateforme",imageSavedToGallery:"Cette image est enregistrée dans votre galerie de photos",imageSavedFailed:"Une erreur s'est produite lors de l'enregistrement de votre photo"},samples:{sample1:"Jeu de piste linéaire et simple",sample2:"Escape game avec des QR codes à trouver",sample3:"Escape game avancé"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (nécessaire pour lister les jeux à proximité de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vérifier que vous avez du réseau et contacter le support si le problème persiste",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte présentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Jeux résolus",QuestsCreated:"Jeux créés",CreateANewQuest:"Créer un nouveau jeu",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucun jeu créé",NoQuestPlayed:"Aucun jeu résolu",NoQuestPlayedLong:"Aucun jeu résolu. Pour résoudre un jeu, retournez à l'accueil !",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Très difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position géographique, mais elle n'a pas pu être récupérée.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : déplacez vous vers une zone dégagée à l'extérieur",GeolocationDisabled:"Géolocalisation désactivée sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l'application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Jouer",ContinueTheQuest:"Continuer le jeu",Language:"Langue",StartingPoint:"Lieu de départ",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",km:"km",NoQuestForThisSearch:"Aucun jeu ne correspond à votre recherche",NoPlayerForThisSearch:"Aucun joueur ne correspond à votre recherche",NoDesignerForThisSearch:"Aucun créateur ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer ce jeu ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",InventoryZoom:"Touchez un objet pour zoomer",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer ce jeu",YouAlreadyStartThisQuest:"Vous avez déjà commencé ce jeu, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",Hints:"Indices",CreateYourQuest:"Nouveau jeu",CreateYourPrivateQuest:"Créez votre jeu privée !",CreateYourPublicQuest:"Créez votre jeu publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre jeu ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre jeu ne doit pas concerner un lieu pour lequel un jeu existe déjà, sauf si le thême est suffisamment différent</li><li>Votre jeu doit faire plus de 6 étapes. Nous vous conseillons d'en créer moins de 70.</li><li>Vous devez posséder les droits des images, vidéos et sons que vous utilisez.</li><li>Les visuels doivent être homogènes (photos réalistes, desssins, ...).</li><li>Notre équipe de modérateurs validera si votre jeu respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre jeu, ou il sera refusé</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 20 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 200 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de créer très simplement, et pas à pas, des jeux ludiques pour les autres joueurs. Ces jeux peuvent être des jeux de piste ou des escape games",BuilderProIntro:"Créez votre jeu avec Graaly",BuilderChooseUserType:"Etes-vous :",BuilderAddRoomMessage:"<p>En ajoutant votre salle, vous pouvez bénéficier gratuitement des services suivants :<ul><li>Visibilité dans notre annuaire</li><li>Statistiques</li><li>Lien vers votre page de réservation</li><li>Suggestion de votre salle à notre communauté</li></ul></p><p>Vos clients bénéficient aussi de services gratuits : <ul><li>Trouvez vos salles autour d'eux</li><li>Suivre les escape games joués par leurs amis et les défier sur vos salles</li><li>Sauver leurs succès pour gagner des points et défier leurs amis</li></ul></p>",AProfessional:"professionnel",AProfessionalDesc1:"En tant que professionnels, vous avez accès à des fonctionnalités avancées de Graaly (statistiques, personnalisation avancée, monétisation, QR code de démarrage rapide ...)",AnIndividual:"particulier",AnIndividualDesc1:"En tant que particulier, vous pouvez aussi créer des jeux, avec tous les types d'énigmes Graaly",TryForFree:"Tester gratuitement",FromPrice:"A partir de",PaymentOnUsage:"Paiement à l'usage",NewQuest:"Nouveau jeu",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ du jeu",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre jeu est publié",YourQuestIsUnpublished:"Votre jeu est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre jeu",PublishYourQuest:"Publier votre jeu",UnpublishYourQuest:"Dépublier votre jeu",SelectedLanguage:"Je crée mon jeu en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image",AddABackgroundImage:"Ajouter une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne réponse",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadTheObjectToFind:"Téléchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadrée pour être carrée",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez vérifier que vous avez du réseau et ré-essayer plus tard",TechnicalProblem:"Problème technique",SaveThisStep:"Enregistrer cette étape sans tester",SaveAndTestThisStep:"Enregistrer et tester cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Mauvaise réponse. Il vous reste {nb} essai(s)",SecondTryOnTry:"Mauvaise réponse. Il vous reste 1 essai",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par créer une étape pour votre jeu",AddYourChapters:"Commencez par créer un chapitre, et ajoutez y les premières pages de votre énigme",ActivateTheLanguageVisible:"Activez les langues pour que votre jeu soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invités puissent jouer",LanguagesPublished:"Publier le jeu en",LanguagesPublishedForPrivate:"Publier le jeu pour les invités (ou via le QR code ci-dessous)",PageLanguagesPublished:"Publier la fiche en",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter le jeu",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"En utilisant l'indice, vous gagnerez moins de points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous avez gagné",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Donnez votre avis",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de ce jeu",ResolveOtherQuestsToWinPoints:"Résolvez de nouveaux jeux pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Votre classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter de l'énergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté ce jeu",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OpenLocationSettings:"Ouvrir les paramètres de localisation",LocationToFind:"Lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",DefineGPSLocation:"Tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Réussissez tous les jeux d'une ville pour obtenir toutes les récompenses",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre jeu n'est plus modifiable. Votre jeu va être validé par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejetée. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre jeu n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Vous y êtes ! Levez votre téléphone et touchez l'élément à trouver",ObjectSize:"Taille de l'objet",TouchDistance:"L'objet peut être touché à moins de...",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ du jeu",ClickOnArrowToMoveToNextStep:"Appuyez sur la flèche en bas à droite pour passer à l'étape suivante.",YourQuestMustContainAtLeast6Steps:"Votre jeu est trop court, vous devez créer au moins 3 étapes",YourQuestMustContainLessThan50Steps:"Votre jeu est trop long, vous devez créer moins de 100 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile pour jouer",WarningNoNetwork:"En attente du réseau ...",WarningLowNetwork:"Réseau faible, veuillez patienter ...",CouldNotDisplayObject:"Désolé, une erreur est survenue au chargement de l'objet à trouver, il ne peut donc pas être affiché. Veuillez redémarrez l'application. Si le problème persiste, passez cette étape.",CouldNotEnableAR:"Nous n'avons pas pu détecter l'orientation de votre téléphone.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer ce jeu",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer ce jeu ? Il sera définivement supprimé.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un éditeur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'éditeur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",EditorIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Sélectionner l'objet dans la liste",HintText:"Texte de l'indice",NewHint:"Indice supplémentaire","2DPicture":"Image à plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Créer un jeu",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnées GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Télécharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complémentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",FriendsAdded:"Vous suivez cettte personne maintenant",InvitationSent:"Invitation envoyée",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numéro de téléphone",InvalidPhoneNumber:"Numéro invalide",AreYouSureYouWantToRemoveThisFriend:"Êtes-vous certain(e) de ne plus vouloir le/la suivre",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de télephone",YourPhoneNumber:"Votre numéro de téléphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous êtes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux caméra",GeolocationFailed:"Impossible de vous géolocaliser",GeolocationFailedDesc:"Nous n'avons pas réussi à vous géolocaliser, soit vous n'avez pas de réseau, soit vous avez bloqué la géolocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Créez votre profil !",WeNeedMoreInformationAboutYouDesc:"C'est simple et ça vous débloque des fonctionnalités utiles",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres données, et vous ne pourrez plus vous connecter à l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",AreYouSureYouWantToRemoveYourAccount:"Êtes-vous sûrs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprimé",CreateMyAccount:"Créer mon compte",IAlreadyHaveAnAccount:"J'ai déjà un compte",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoyé à l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note au jeu avant d'envoyer votre avis.",QuestNotReviewed:"Ce jeu n'a pas encore reçu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour démarrer le jeu de découverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(s,'" target="_blank">').concat(s,'</a> ou nous contacter à <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Désolé, votre appareil ne permet pas la géolocalisation.",TechnicalErrorReloadPage:"Problème technique, appuyez pour relancer",NetwordkErrorReloadPage:"Problème réseau ! Nous allons essayer de recharger la page dans 15 secondes.",TechnicalProblemNetworkIssue:"Veuillez vérifier que vous avez du réseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Rejouer du début",BackToQuest:"Retour au jeu",min:"min",pts:"pts",SportQuest:"jeu nature",DiscoveryQuest:"jeu découverte",CulturalQuest:"jeu culturel",ChildQuest:"jeu pour enfants",TransportQuest:"jeu en moyen de transport",ShopQuest:"Découverte de commerces",EnterpriseQuest:"Découverte d'entreprise",NightQuest:"jeu nocturne",ExtremQuest:"jeu extrême",CulinarQuest:"jeu culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la réactiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redémarrer l'aide",DurationBeforeTextAppearAbovePicture:"Durée avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s) à gagner",YouAlreadyPlayedThisQuest:"Vous avez déjà réussi ce jeu (aucun point à gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour ce jeu",CloseQuestRanking:"Retour au jeu",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour au jeu",NoFriendsLong:"Vous ne suivez encore personne",IAgreeTheTermsAndConditions:"Je suis d'accord avec les <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.terms.fr,"', { openExternal: true }) : window.open('").concat(r.terms.fr,"'))\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:"Je suis d'accord avec la <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.privacy.fr,"', { openExternal: true }) : window.open('").concat(r.privacy.fr,"'))\">politique d'utilisation des données personnelles</a>"),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialité pour utiliser Graaly",TermsAndConditionsLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.terms.fr,"', { openExternal: true }) : window.open('").concat(r.terms.fr,"'))\">Conditions d'utilisation</a>"),PrivacyPolicyLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(r.privacy.fr,"', { openExternal: true }) : window.open('").concat(r.privacy.fr,"'))\">Politique d'utilisation des données personnelles</a>"),DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune étape ?",FollowStep:"Suit l'étape",StepSuccess:"Bonne réponse à",StepFail:"Mauvaise réponse à",StepRandom:"Aléatoirement après",StepCounter:"Le compteur à la valeur ",StepCounterGreater:"Le compteur est supérieur à ",StepCounterLower:"Le compteur est inférieur à ",StepCombineObject:"(BETA) Objet combiné ",StepHaveObject:"(BETA) Objet est dans l'inventaire ",StepNotHaveObject:"(BETA) Objet n'est pas dans l'inventaire ",StepAnswerNb:"(BETA) Réponse N° au QCM",NoCondition:"Aucune condition (démarre au début du chapitre)",Conditions:"Déclencheurs",AddACondition:"Ajouter un déclencheur",ConditionType:"Type de déclencheur",ConditionValue:"Valeur du déclencheur",YourStepCanOnlyFollowOneStep:"Votre étape ne peut suivre qu'une seule autre étape",ThisStepIsTriggeredWhen:"Cette étape est affichée quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des étapes. Veuillez supprimer les étapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette étape n'est pas visible par les joueurs. Vous pouvez passer à l'étape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez créer une étape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les étapes suivantes n'ont pas de déclencheur. Seul la première étape d'un chapitre peut ne pas avoir de déclencheur",FollowingStepsHaveInvalidCondition:"Des étapes ont des conditions invalides (dépendent probablement d'étapes manquantes, ou vous avez créé une chaîne impossible, comme une condition circulaire)",FollowingStepsHaveNoValidParent:"Les étapes suivantes ont un déclencheur incorrect",IssuesInYouQuest:"Problèmes de votre jeu",IssuesInYourStep:"Problèmes de votre étape",DisplayRightAnswer:"Afficher la bonne réponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une étape dans ce chapitre",ScanTheMarkersLikeThat:"La marque à trouver et à scanner avec votre téléphone a une forme similaire à",ScanTheMarkersLikeThat2:"Pour scanner un QR code, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre à jour votre application Graaly pour continuer à l'utiliser",SorryAnErrorOccurs:"Désolé, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez créer un nouveau brouillon pour ce jeu. Si votre jeu est déjà publié, cette version restera accessible aux joueurs, jusqu'à ce que vous publiiez cette nouvelle version de votre jeu.",ClickHereToCreateANewQuestVersion:"Pour modifier votre jeu, cliquez ici",YourUnderValidationQuests:"Vos jeux en cours de validation",YourRejectedQuests:"Vos jeux rejetés",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos jeux publiés",QuestDraftVersion:"Version du jeu non publiée",PageDraftVersion:"Page non publiée",PrivateQuest:"Jeu privé",PublicQuest:"Jeu public",Invitees:"Invités",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configurée pour votre jeu, voulez-vous l'ajouter ?",Results:"Résultats",ClosePrivateQuest:"Clore le jeu",ClosePrivateQuestDesc:"En cliquant ici, votre jeu ne sera plus jouable. Vous aurez alors accès aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sûr(e) de clore ce jeu ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a joué à ce jeu",NoPlayersYetForThisQuest:"Encore aucun joueur pour ce jeu",PrivateQuestDesc1:"Votre jeu est destiné à votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous créez un jeu pour faire découvrir un lieu, une activité, une entreprise.",PublicQuestDesc2:"Une fois validé par les games masters, ce jeu sera visible et jouable par tous",PublicProQuestDesc1:"Votre jeu est jouable par tous les joueurs Graaly. Vous payez un petit montant par partie ou partagez les revenus avec nous.<p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PublicProQuestDesc2:"<p>Si votre jeu est payant pour les joueurs, vous pouvez soit utiliser le système de paiement intégré à Graaly soit gérer vous même le paiement</p><p>Concernant le système de paiement intégré, Google/Apple prennent 30% des revenus</p><p>Dans tous les cas Graaly conserve 30% des revenus</p><p>Le reste est pour vous, soit de 40% à 70% des revenus.</p><p>Graaly vous reverse votre part mensuellement</p><p>Si votre jeu est gratuit pour les joueurs, Graaly vous facture mensuellement 0,25 € HT par joueur, soit moins que le facicule papier que vous devrier acheter sans application mobile</p><p>Vous pouvez désactiver votre jeu à tout moment</p><p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PrivateProQuestDesc1:"Votre jeu est dédié à des joueurs définis. Vous payez un petit montant par partie ou partagez les revenus avec nous. Contactez-nous à contact@graaly.com pour plus d'information",CreatePrivateQuest:"Créer un jeu privé",BuyPrivateQuest:"Acheter un jeu privé",OnlyBuyableOnMobile:"Seulement disponible sur mobile",AcceptAndBuyAPrivateQuest:"Accepter et acheter un jeu privé",CreatePublicQuest:"Créer un jeu public",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour ce jeu",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre jeu est clos, et ne peut plus être publiée",YourQuestContainsErrorsInSteps:"Votre jeu présente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type de jeu",helpQuestType:"Un jeu de piste comporte une liste d'énigme qui se suivent de façon linéaire. Un jeu propose des énigmes qui peuvent être résolue dans un ordre non défini, la résolution de plusieurs énigmes débloquent d'autres énigmes. Si vous êtes nouveau sur Graaly, nous vous conseillons de commencer par un jeu de type jeu de piste. Vous pouvez transformer un jeu de piste en escape game, mais pas le contraire.",basicEditor:"Jeu de piste (éditeur simple)",advancedEditor:"Escape game (éditeur avancé)",UsedOver:"{current} utilisés sur {limit}",QuestMedia:"Fichiers du jeu",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre jeu",Feedback:"Vos commentaires",Back:"Retour",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire à l'auteur du jeu, ou noter le jeu, attendez la page de fin du jeu. Si vous souhaitez contacter l'équipe Graaly, pour par exemple signaler un contenu inapproprié dans ce jeu, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a été envoyé",BackToBuilder:"Retour à la création du jeu",OrDownloadAFile:"Ou téléchargez votre image",UploadACharacter:"Télécharger un personnage",LoadingQuestDataForOfflineMode:"Préparation de votre jeu ...",ErrorOfflineSaving:"Problème technique, vous ne pourrez pas jouer ce jeu sans réseau",QuestNeedNetwork:"Il vous faut du réseau mobile pour lancer ce jeu. Recherchez du réseau, et cliquez sur le bouton ci-dessous pour relancer le chargement du jeu",ReloadQuest:"Recharger le jeu",ConnectToComputeScore:"Je suis connecté, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre réussite et votre score, vous devez vous reconnecter au réseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans réseau",Downloading:"Chargement ...",Loading:"Chargement ...",YouAreOfflineNoQuestsAvailable:"Désolé, il n'y a pas de jeu disponible pour être joué hors ligne.",ButtonsColor:"Couleur de la barre de boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible dès demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous suivez déjà cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas être ami avec vous même",TooMuchFriends:"Vous ne pouvez pas suivre plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagné !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avancé. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Téléchargement terminé. Vous pouvez désormais jouer ce jeu sans réseau.",GoToQuestValidation:"Aller à la validation",SessionExpired:"Votre session a expiré, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez réduire sa taille",PremiumQuest:"jeu Pro",MovePremium:"Passer ce jeu en mode pro",PremiumDefinition1:"Donnez plus de valeur à votre jeu !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Un jeu plus personnalisé à vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser le jeu avec votre logo et vos couleurs, ... </li><li><u>Un jeu rentable</u> : Vous pouvez gagner de l'argent en rendant votre jeu payante</li><li>Vous pouvez accéder aux statistiques de votre jeu</li><li>Vous bénéficiez du support de notre équipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos jeux en mode pro, contactez nous à sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalité, vous devez passer ce jeu en mode premium (voir dans les paramètres de votre jeu)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de parties jouées",NumberOfPlayersYesterday:"Hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",AverageDuration:"Durée moyenne (min)",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont créé des jeux pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore créer {nb} jeu(s) pro(s)",YouCanNotCreateNewQuests:'Vous ne pouvez plus créer des jeux pro. Souscrivez à nos offres professionnelles sur <a href="'.concat(s,'" target="_blank">').concat(s,'</a> ou contactez-nous à <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Paying:"Payant",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer ce jeu sur un appareil mobile",QuestPlayableOnMobile:"Ce jeu se joue sur mobile",PuzzleHelpText:"Déplacez les pièces pour les réordonner",ClickToEnlargePictures:"Appuyez sur les images pour les élargir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre téléphone pendant 3 secondes pour une meilleure précision GPS",TakeMobileVertically:"Tenez votre téléphone verticalement et recherchez",null:"Indéfini",TooMuchOfflineLoadingErrors:"Le chargement du jeu n'a pas fonctionné. Vous pouvez jouer le jeu si le réseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annulé le chargement du jeu, le jeu ne fonctionnera pas si vous perdez le réseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggérer un jeu",SuggestANewQuest:"Suggérer un nouveau jeu",YouLikedThisQuest:"Vous avez aimé ce jeu ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour découvrir un lieu en jouant, ou pour motiver vos enfants ou élèves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Musée du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou téléphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En complétant ce formulaire, vous nous aidez à identifier les jeux les plus demandées pour contacter les responsables des lieux concernés. Vous serez ensuite informé si un jeu est créée sur ce lieu.",InsertAStepAfter:"Insérer une étape après",QuestUpdated:"Le jeu a été modifié",PleaseRestartQuest:"Merci de rejouer le jeu depuis le début.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette étape n'est jouable qu'à partir de cette date",ThisStepIsAvailableIn:"Cette étape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pièce à bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scanner un QR Code",ScanQRCode:"Scanner un QR Code",MarkersToPrint:"QR Codes du jeu",MarkersToStartQuest:"Les joueurs peuvent jouer en scannant ce QR Code sur la page de login de Graaly",SaveQuestResultsMarker:"Vos joueurs peuvent scanner un QR Code pour enregistrer leur score dans Graaly (sur la page de login ou sur la page d'accueil). Pour les joueurs qui sont sortis de la salle dans les temps<br /><img src='{url3}' /><br />Pour les joueurs qui sont presque sortis dans les temps<br /><img src='{url2}' /><br />Pour les joueurs qui ne sont pas sortis<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Cette action ne peut être annulée",AddAReward:"Télécharger une récompense",Reward:"Récompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit être en rouge, sinon pensez à utiliser une image avec un fond transparent. Si une partie de votre image est coupée, téléchargez une image au format carré.",YouWonAReward:"Bravo, vous avez gagné un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres récompenses en jouant aux autres jeux dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut être trop gros ou n'a pas le bon format. Veuillez réessayer avec une image plus petite",helpQuestLogo:"Votre logo apparaîtra dans un bulle en bas de l'écran de jeu. Suivant les écrans, la bulle peut être assez petite, choisissez une image avec peu de détails.",helpQuestReward:"Les joueurs pourront gagner un badge à la fin du jeu. Cela les motive à jouer à votre jeu. Pour proposer un badge en récompense, téléchargez une image représentant le badge, avec un fond transparent (format .gif ou .png)",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouvé",CreateYourAccountMsg:"Créez votre compte pour sauvegarder votre score et jouer avec vos amis !",MaybeLater:"Peut-être plus tard !",LetsPlay:"Jouez",NewAccount:"Nouveau compte",PleaseAcceptDeviceMotionPermissionRequest:"Veuillez accepter que l'application accède aux mesures des mouvements de votre appareil, afin de pouvoir jouer cette partie du jeu",PleaseAcceptDeviceOrientationPermissionRequest:"Veuillez accepter que l'application accède aux mesures de l'orientation de votre appareil, afin de pouvoir jouer cette partie du jeu",DoYouWantToCreateAnAccount:"Pour créer un jeu, vous devez créer votre compte. Souhaitez-vous créer votre compte Graaly ?",UserWithSameEmailAlreadyExisting:"Un compte existe déjà avec cet email",PasswordTooWeak:"Votre mot de passe doit etre au 8 caractères, contenir une majuscule et un chiffre",AreYouSureYouWantToPublishThisQuest:"Etes-vous sûr de demander la publication de votre jeu ? Vous ne pourrez plus faire aucun changement jusqu'à ce que l'équipe Graaly confirme votre demande",YourCharacter:"Personnage personnalisé",AddACustomCharacter:"Ajouter un personnage",helpQuestCharacter:"Ce personnage s'affichera quand un joueur demandera un indice ou affichera un En savoir plus",AvailableColors:"Couleurs disponibles",TypeColorCode:"Entrez le code couleur. Ex: #ff55cc",TypeColorCodeName:"Entrez le nom de la couleur. Ex: Rouge",AddNewColor:"Ajoutez une nouvelle couleur",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Vous n'êtes pas sur le lieu du jeu</b>.<br />En résolvant ce jeu à distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez déjà réussi ce jeu</b>. Vous pouvez le résoudre à nouveau, mais il ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous êtes éditeur de ce jeu, il ne vous rapportera aucun point, et vous ne pourrez pas y jouer en mode offline",GeneralWarning:"<b>Pour votre sécurité</b>, ne jouez pas au jeu en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",RemoveScoringAndRating:"Cacher le score et la notation",TypeEndMessage:"Texte de fin qui remplace l'écran de score et de notation",TypeEndMessageForPerfectScore:"Texte de fin personnalisé si le joueur a toutes les bonnes réponses",ThanksForPlaying:"Merci d'avoir joué à ce jeu. A bientôt pour d'autres jeux !",EnlargePictureToFullWidth:"Elargir l'image en plein écran (déformer)",EnlargePictureToFullHeight:"Elargir l'image en pleine hauteur",PlayerCanTakeSnapshot:"Le joueur peut prendre des captures d'écran",SnapshotTaken:"Capture enregistrée dans vos photos",SnapshotTakenIssue:"Impossible de faire une capture automatique. Vous pouvez faire une capture d'écran manuellement avec votre appareil.",NbTrials:"Nombre d'essais",UserCanPass:"Le joueur peut passer l'étape",Welcome:"Bienvenue !",SignIn:"Connexion",Subscribe:"S'inscrire",EmailAlreadyUsed:"Cette adresse email est déjà utilisée. Connectez-vous ou demandez une modification de votre mot de passe",AroundYou:"Autour de vous",SeeMore:"Voir plus",Designers:"Créateurs",Difficulty1:"Simple",Difficulty2:"Normal",Difficulty3:"Difficile",ClosestQuestToYou:"Jeu proche de vous",YouAreNearThisQuest:"Jeu le plus proche de vous",YouAreInvitedToThisQuest:"Vous êtes invité à ce jeu",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Joué par amis",ScoreAndBadges:"Score et badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"Sur ce jeu, vous pouvez gagner :",ScoreRange:"Entre {min} et {max} points",InProgressPreparation:"Préparation en cours",Warnings:"Mises en garde",Follow:"Suivre",Followed:"Suivi(e)",SolvedQuests:"Jeux résolus",Creations:"Créations",Badges:"Badges",FollowYourFriends:"Suivre vos amis",CreatedYourFirstQuest:"Créez votre premier jeu",DoNotFollowAnymore:"Ne plus suivre",AllTheseDataAreOptional:"Toutes ces données sont optionnelles",DataCountry:"Votre pays : utilisé pour afficher les bons jeux pour vous",DataZipcode:"Votre code postal : utilisé pour afficher les bons jeux pour vous",DataSex:"Votre sexe : utilisé pour afficher les bons jeux pour vous",DataAge:"Votre age : utilisé pour éviter certains jeux non adaptés à votre age",DataPhone:"Votre numéro de téléphone : utilisé pour vous connecter avec vos amis",EscapeGame:"Escape game",EscapeGames:"Escape games",Players:"Joueurs",YouHaveReachAScore:"Vous avez un score de {score} points",LevelReached:"Niveau atteint !",PointsToReachLevel:"{score} points à atteindre",Friends:"Amis",World:"Mondial",MyCountry:"Mon pays",MyCity:"Ma ville",NoRanking:"Encore aucun classement",Invitations:"Invitations",YouFollowThem:"Vous suivez",AddYourRoomInTheDirectory:"Référencez votre salle dans l'annuaire",AddYourRoom:"Ajoutez votre salle",ProAddYourRoom:"Vous pouvez ajouter vos salles dans Graaly et bénéficier de nombreux services gratuits",YourRoom:"Votre salle",PriceFrom:"Prix par joueur à partir de",ReadMoreLink:"Lien vers la page de réservation",SmallPicture:"Petite image",SeeYourQuestPage:"Visualiser la page",FromPricePerPlayer:"A partir de {price} par joueur ou partie",Book:"Réserver",YourBadges:"Vos badges",YouDoNotHaveBadgesYet:"Vous n'avez pas encore de badges. Pour gagner des badges, il vous faut résoudre des jeux qui proposent des récompenses.",FollowedPeople:"Personnes suivies",WeNeedYourPositionForThisFeature:"Nous avons besoin de votre position pour cette fonctionnalité",OtherCharacters:"Autres personnages",BackToTheMap:"Accueil",or:"ou",RefreshCacheRequired:"L'application en cache sur votre navigateur est obsolète. Veuillez passez en navigation privée pour rafraichir votre cache",FindFriendManually:"Trouvez vos amis manuellement",NoQuestAroundYou:"Nous n'avons trouvé aucun jeu autour de vous",CachedQuests:"Déjà téléchargé(s)",YourPresentation:"Présentez-vous",DuplicateThisQuest:"Dupliquer ce jeu",DoYouWantToOpenClonedQuest:"Voulez-vous modifier le nouveau jeu maintenant ?",OpenTheMap:"Carte des jeux",ReplacePictureByRedFilter:"Remplacer l'image par un filtre rouge",TotalNumberOfPlaysNotFinished:"Nombre de parties en cours",RoomDataWarning:"Certaines informations peuvent être obsolètes, n'hésitez pas à aller sur le site de l'escape game pour plus d'informations",AnonymousUser:"Joueur anonyme",NotWon:"A gagner",OnTopGames:"Jeux du moment",ThisStepOnlyWorkOnMobile:"Le scan de QR code ne fonctionne que sur l'application mobile",YourQuestHasNotBeenPublished:"Votre escape n'a pas été publié",OnDesktopDisplayMessage:"Sur ordinateur, vous devez réduire la taille de votre écran. Vous pouvez taper sur la touche F12 pour cela.",EventCode:"Code de l'événement",BoardMacAddress:"Adresse Mac de la carte",SuccessMessage:"Message de réussite",YourTime:"Votre temps",LimitNumberOfPlayerInOneHour:"Limiter le nombre de joueurs par heure (0 = illimité)",TooMuchUsersCurrently:"Trop de joueurs actuellement",OrSelectAnImageInTheList:"Ou sélectionnez une image dans la liste",IotObject:"Objet connecté",Protocol:"Protocole",SuccessRange:"Plage de succès",SuccessRanges:"Plages de succès",WriteTextWarning:"Accents et majuscules ne sont pas nécessaires",DistanceToWin:"Le joueur gagne quand il est à la distance suivante du lieu (m)",SplitMessageWithPipe:"Ajouter le signe '|' pour séparer votre texte dans plusieurs bulles",ClickHere:"Cliquez ici",FollowTheCreator:"Suivez le créateur",PlayersNumber:"(BETA) Nombre de téléphones requis pour jouer",helpQuestMultiplayer:"Cela défini le nombre de joueur minimum pour que le jeu soit jouable. Chaque joueur devra avoir un téléphone, et aura un rôle différent dans le jeu. Pour plus d'informations sur le mode multijoueur, regardez nos tutos Youtube",ThisIsAMultiplayerGame:"Ce jeu se joue en équipe",JoinATeam:"Rejoindre une équipe",ScanTheLeaderQRCode:"Scanner le QR Code du leader",CreateATeam:"Créer une nouvelle équipe",TeamName:"Nom de l'équipe",CreateTeam:"Créer l'équipe",OtherPlayersMustScanThisQRCode:"Les autres joueurs doivent scanner ce QR Code pour rejoindre votre équipe",ThisIsNotATeamQRCodeValid:"Ce code n'est pas valide ! Vous devez scanner le code qui s'affiche sur le smartphone de la personne qui a créé l'équipe",MyTeamIsCompleteLetsGo:"L'équipe est au complet, allons-y !",YouNeedMoreMembersToPlay:"Votre équipe doit être composée au minimum de {nb} membres. Membre(s) actuel(s) : {members}",Team:"Equipe",WaitingForOtherUsersActions:"En attente des autres joueurs",WaitingForOtherUsersActionsDesc:"Vous ne pouvez pas avancer tant que les autres joueurs n'ont pas réussi leurs énigmes",Player:"Joueur",All:"Tous",YouNeedToBeXPlayers:"Vous devez être au moins {nb} pour jouer",YouNeedAtLeastXEditorsToTest:"Vous devez avoir {nb} éditeurs pour tester ce jeu multijoueur (voir onglet Mise en ligne)",HereAreTheTesters:"Ce jeu est multijoueur, il sera testé par : {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Affichage de mon image sur différents types de téléphones",MyPictureIsNotDisplayedWell:"Mon image s'affiche mal",MyPictureIsNotDisplayedWellDesc:"<b>Si votre image est mal cadrée sur toutes les tailles</b>: Il faut que votre image soit dans un format 900 pixels par 1200 pixels.<br /><b>Votre image n'est pas correcte sur la taille du centre</b>: Il faut que votre image présente une partie non utile sur 100 pixels à droite et à gauche de votre image. Vous pouvez ajouter une bordure noire de 100 pixels autour de votre image par exemple",RestartQuest:"Redémarrer le jeu",AreYouSureToRestartThisQuest:"Etes-vous sûr de redémarrer ce jeu ? Vous ne gagnerez aucun point en redémarrant le jeu.",PaymentOnMobile:"Paiement sur mobile",PaymentOnMobileHelp:"Le paiement est très simple pour les joueurs, juste en pressant un bouton. Cependant Google / Apple prennent 30% des revenus de votre jeu.",PaymentOnYourSide:"Paiement réalisé par vous",PaymentOnYourSideHelp:"Vous pouvez collecter le paiement dans votre boutique ou au travers de tiers (4Escape, ...)",Payments:"Paiements",CreateNewQRCodeForPlay:"Créer un nouveau QR Code pour un joueur qui a payé",Create10NewQRCodeForPlay:"Créer 10 nouveaux QR Codes",Create50NewQRCodeForPlay:"Créer 50 nouveaux QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Etes-vous sûr de supprimer ce code ? Si vous avez envoyé ce code à un joueur, il ne pourra plus jouer !",BuyThisQuest:"Acheter ce jeu",YouHaveReceivedAQrCodeFrom:"Vous avez reçu un QR code de {author}",ScanTheUniqueQRCode:"Scanner le QR code à usage unique",BuyInOneClick:"Achetez en un clic",TechnicalIssueOrCodeAlreadyUsed:"Ce QR code a déjà été utilisé par un autre compte. Veuillez vous connecter ou contacter le créateur du jeu pour obtenir un autre code.",ChangeTheBackgroundImageOnceClicked:"Changez l'image de fond quand le joueur a cliqué",Message:"Message",Frequency:"Fréquence",TriggerTheEvent:"Déclencher l'action",SearchingBluetoothDevice:"Recherche de l'appareil Bluetooth...",KeypadInput:"Saisie digicode",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Ouvrir",ChestActions:"Actions sur le coffre",TriggerMode:"Mode de déclenchement",TriggerModeAuto:"Auto (au chargement de l'étape)",TriggerModeManual:"Manuel (le joueur doit toucher un bouton)",helpPlayer:"Pour chaque étape d'un jeu multijoueur, vous devez sélectionner le joueur qui verra cette étape. Les autres joueurs ne le verront pas, et auront un message d'attente jusqu'à que le joueur résolve l'énigme. Vous pouvez afficher une étape de type transition pour tous les joueurs, mais vous ne pouvez afficher une énigme que pour un joueur. Si vous souhaitez que tous les joueurs résolvent la même énigme, vous devez créer une étape pour chaque joueur. Pour plus d'information, regardez nos tutos Youtube.",ErrorMessageForNewTeamMember:"Problème technique ou nombre de joueurs atteint",YouNeedToUnpublishYourQuestToRemoveIt:"Vous devez dépublier vote jeu pour le supprimer",PleaseEnterYourTeamName:"Veuillez entrer le nom de votre équipe",Version:"Version",CountDownLabel:"Limite de temps de l’énigme",CountDownIsActive:"Entrez la limite de durée pour cette énigme",CountDownWarning:"Etes-vous certain(e) d'activer un compte à rebours ? Assurez-vous qu'il n'y a aucun risque pour le joueur, comme une route à traverser !",CountDownPopupfail:"Temps écoulé !",MaxScore:"Score maxi",YouMustTestThisStepOnMobile:"Vous devez tester ce type d'étape sur un appareil mobile",AreasNumber:"Nombre de zones à trouver",ItRemains:"Il reste",s:"s",LetsPlayWithoutAccount:"Jouer sans compte",ErrorDownloadNeedsToRestart:"Erreur lors du telechargement de l'enquete, voulez vous recommencer ?",StartCreation:"Devenir créateur ?",ErrorTakingSnapshot:"Impossible de faire la capture d'écran",YourAudioFile:"Votre musique de fond",AddAnAudioFile:"Ajouter une musique de fond",ObjectNeedToBeAppliedOnPicture:"L'objet est appliqué sur une partie de l'image",ReadNext:"LIRE LA SUITE",AlreadyPaied:"Acheté",HelpStepMessageInventory:"Afficher l'aide pour le bouton Inventaire",HelpStepMessageHint:"Afficher l'aide pour le bouton Indice",HelpStepMessagePrevious:"Afficher l'aide pour le bouton Retour",HelpStepMessageNext:"Afficher l'aide pour le bouton Suivant",HelpStepMessage:"Bienvenue dans votre interface !\n\nPour participer, il vous suffira de suivre les indications à l'écran.",HelpStepMessageInventoryMessage:"La valise vous sert à utiliser des objets que vous avez récupérés durant le jeu.",HelpStepMessageHintMessage:"L'ampoule vous sert à obtenir des indices.",HelpStepMessagePreviousMessage:"Pour revenir à l'étape précédente, appuyez sur la flèche de gauche.",HelpStepMessageNextMessage:"Pour passer à l'étape suivante, appuyez sur la flèche de droite.",HelpStepMessageEnd:"En cas de problème, n'hésitez pas à fermer l'application et à la redémarrer, vous reviendrez à la dernière étape réussie.",KenBurnsEffect:"Effet de zoom arrière sur l'image",Show:"Montrer",Hide:"Masquer",TotalSellings:"Ventes du jeu",RevenuesPayedFloor:"Paiement quand gains > 50€",QRCodeMessage:"Message affiché quand le joueur doit flasher un QR code (mode Escape game)",GeolocationMessage:"Message affiché quand le joueur doit rechercher plusieurs lieux en géolocalisation (mode Escape game)",TeamID:"Identifiant équipe",PleaseFillThisForm:"Veuillez compléter ce champ",Zoom:"Zoom",ScheduleGame:"Planifier le jeu",GameSchedule:"Planification du jeu",Reset:"Réinitialiser",SchedulingDescription:"Le jeu est jouable sur les créneaux :",From:"De",To:"A",QuestIsNotPlayableNow:"Le jeu n'est pas disponible actuellement",OpeningHours:"Heures d'ouverture",CreationStudioHelp:"<h3>Aide</h3>Nous vous proposons plusieurs ressources pour vous aider à utiliser le studio de création :<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Guide d'utilisation du studio</a></li><li>Des <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>tutoriels vidéo</a> d'utilisation du studio de création</li></ul><div class='text-accent'>Nouveau ! Rejoignez le <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>groupe Facebook des créateurs de jeux Graaly</a> pour échanger sur vos problématiques avec les autres utilisateurs et avec nos développeurs !</div><br />Pour tester votre jeu, nous vous conseillons de :<ul><li>tester sur votre téléphone avec l'application Graaly</li><li>tester dans votre navigateur en <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>mode développeur</a> (pour faire simple, cliquez sur la touche f12, puis sur l'icône en forme de tablette). Attention, certaines étapes ne fonctionnent pas dans ce mode (réalité augmentée, géolocalisation, scanne de QR code, superposition image et caméra)</li></ul>",TestWithSimulatorWarning:"Vous allez tester avec le simulateur. Certains types d'étapes ne sont pas fonctionnels. Pour un vrai test, utilisez l'application mobile Graaly",FontFamily:"Police de caractère pour les textes",ExportTexts:"Textes du jeu",Downloads:"Téléchargements",ForcePlayerToHaveAccount:"Forcer les joueurs à créer un compte Graaly",ForcePlayerToHaveAccountHelp:"Si cette option n'est pas activée, les utilisateurs peuvent jouer anonymement",ShareUserDataWithCreator:"Demander aux joueurs de partager leurs données avec vous",ShareUserDataWithCreatorHelp:"Un joueur accepte de partager ses données avec Graaly. Vous pouvez demander aux joueurs de partager leurs données avec vous, nous vous conseillons pour les motiver de faire gagner quelque chose (jeu concours, tirage au sort, bon de réduction, ...)",YouNeedToCreateYourAccountToPlay:"Vous devez créer votre compte pour joueur à ce jeu",ShareDataWithPartner:"Partager vos données avec le créateur du jeu",PartnerAskForYouData:"Le créateur du jeu souhaiterais accéder à vos données (adresse email, nom). Cela peut être pour vous permettre de participer à un tirage au sort, un jeu concours ou vous faire gagner un bon de réduction. Veuillez lire la description du jeu pour en savoir plus",UseHtmlInDescription:"Utiliser des balises HTML dans la question",DoNotDisplay:"Ne pas afficher",AddAnGPSLocation:"Ajouter un point GPS",BuildThePortraitRobot:"Construisez le portrait à trouver",Education:"Education",EducationDesc:"Nous ne proposons pas encore d'offre éducation, mais vous pouvez utiliser le mode professionnel, et nous contacter à contact@graaly.com pour plus d'information.",Call:"Appeler",BlurEffect:"Effet de flou",CheckpointReached:"Vous avez atteint un objectif intermédiaire ! La carte montre désormais le prochain lieu à atteindre.",DefaultMode:"Mode d'affichage par défaut",CompassMode:"Classique",CompassModeHelp:"Affichage d'une flèche de direction et de la distance à l'objectif",MapMode:"Carte",MapModeHelp:"Affiche une carte Google Maps avec les positions du joueur et de l'objectif",AllowToSwitchGeolocationMode:"Bouton pour changer le mode d'affichage",ApplyRedFilter:"Appliquer le filtre rouge",Chapters:"Chapitres",Chapter:"Chapitre",ChapterChangeWarning:"Attention, si vous changez le chapitre, vous supprimez tous ses déclencheurs et risquez d'avoir des incohérences au niveau des déclencheurs des autres étapes. Il faudra les modifier aussi dans les étapes qui en dépendent.",ResetHistoryAfter:"Empécher le retour arrière après cette étape",RestartChapterAfterStep:"Redémarrer le chapitre après cette étape",HideInventory:"Ne pas utiliser l'inventaire",ShowCountDown:"Afficher compte à rebours",StopGameAfterCountDown:"Arrêter le jeu quand le temps est fini",ItRemainsMinutes:"Il vous reste {time} minutes",CustomizeEndOfGame:"Personnaliser la fin du jeu",CustomizeGameInterface:"Personnaliser l'interface de jeu",GameAvailability:"Disponibilité du jeu",GamePayment:"Paiement du jeu",UserData:"Données utilisateurs",CustomizeGameIntroduction:"Personnaliser l'intro du jeu",RemoveGPSLocation:"Supprimer cette localisation",OverQuotaMessage:"Vous avez atteind la limite de stockage",RemoveFiles:"Supprimer des fichiers",InvalidTeamID:"Identifiant d'équipe invalide",HideFullScreen:"Ne pas afficher en plein écran (Android)",YourFullName:"Votre nom complet",TextColor:"Couleur du texte",GoodAnswersNumber:"Réponses correctes",PleaseEnterFirstNameAndLastName:"Veuillez entrer votre prénom et votre nom",PassTheQRCodeInFrontOfYourCamera:"Passez le QR code devant votre caméra",HideHideButton:"Cacher le bouton montrer/cacher",PleaseHoldYourDeviceFlat:"Veuillez tenir votre appareil à plat",MyLocationWarning:"La précision de la position GPS n'est pas assez fiable. Pour récupérer les coordonnées GPS, utilisez Google Maps (en cliquant sur un lieu, une bulle s'affiche avec la latitude et longitude), l'application 'Ma position GPS' sur Android ou l'application 'Mes coordonnées GPS' sur iPhone.",FindAllLocationsToStartSteps:"Déplacez-vous et trouvez chaque lieu !",ColorIndicatorExplaination:"Vous êtes à {distance}m d'un des lieux",YouWonNewGame:"Bravo ! Vous avez débloqué un nouveau jeu !",WarningLowGpsAccuracy:"Attention: précision GPS faible",PersistentLowGpsAccuracyPleaseSkipStep:"La précision GPS est toujours faible après plus d'une minute. Nous vous recommandons de passer cette étape (bouton en bas à droite).",LocationSaved:"Position de l'objectif mise à jour à partir de la position GPS de l'appareil.",CurrentLocation:"Position GPS actuelle",Accuracy:"Précision",Meters:"mètres",secondes:"seconde(s)",ScanA:"Scanner un",OnceADay:"Une fois par jour",UserCanReplayGame:"Le joueur peu rejouer",CustomizeYourName:"Personnaliser le nom de l'auteur",YouCanNotPlayAgainThisGame:"Vous ne pouvez rejouer à ce jeu",YouCanNotPlayAgainThisGameToday:"Vous pouvez rejouer demain",CustomizeRightAnswerMessage:"Message de bonne réponse personnalisé",CustomizeWrongAnswerMessage:"Message de mauvaise réponse personnalisé",RotateVideo:"Tourner la vidéo de 90°",UploadSucessful:"Fichier chargé sur le serveur avec succès",RemoveObjectFromInventoryAfterUse:"Supprimer l'objet de l'inventaire après",ModifyTheHint:"Modifier l'indice",AddAGameSnapshot:"Ajouter une capture du jeu",Snapshots:"Capture(s)",CounterValue:"Valeur du compteur",CharacterBarColor:"Couleur de la barre sous le personnage",HideMake8Animation:"Cacher l'animation en cas de mauvais GPS",HideEnlargeMessage:"Cacher le bouton pour élargir les vignettes",CustomizedMemoryCardColor:"Couleur personnalisée pour le dos des cartes",HidePuzzleNotWorkingMessage:"Cacher le bouton quand le puzzle ne fonctionne pas",SnapshotManualOnIOs:"Pour faire une capture sur iPhone/iPad, appuyez simultanéement sur le bouton latéral et le bouton du volume",MovePictureWithFinger:"Déplacez les jumelles avec le doigt pour observer d'autres endroits",InvalidCondition:"Condition invalide à supprimer",WrongLocationMessage:"Message quand on appuie au mauvais endroit",MoveToNextStepAutomatically:"Passer à l'étape suivante automatiquement",Duplicate:"Dupliquer",PleaseWaitLoadingAndGPSInit:"CHARGEMENT DES DONNEES ET GPS EN COURS ...",MoveToNextStepAutomaticallyDuration:"Secondes avant de passer à l'étape suivante",UseAModel:"J'utilise un modèle :",AddToInventoryAndPass:"Ajouter à l'inventaire et passer cette étape",holdVerticaly:"Pour une meilleure expérience avec la réalité augmentée, merci de tenir votre téléphone à la verticale.",startScan:"Démarrer",noSensorFound:"Pas de capteurs trouvés sur votre appareil",noSensorNext:"Vous pouvez directement passer à l'étape suivante en cliquant sur la flèche en bas à droite",UniqueUsageQRCodeWarning:"Attention, ce code est à usage unique. Vous ne pourrez pas l'utiliser avec un autre compte Graaly. Pour l'utiliser sur un autre appareil, vous devrez utiliser le même compte Graaly.",arDialogTitle:"Autorisation",arDialogMessage:"Pour continuer, veuillez autoriser l'application à utiliser certaines fonctionnalités de votre appareil",qrCodeAlreadyScan:"Vous avez déjà essayé ce QR Code",qrCodeAlreadyGood:"Vous avez déjà scanner le bon QR Code, passez à l'étape suivante",Audio:"Audio",TeamPlay:"Jeu d'équipe",TypeTeamPlayId:"Tapez l'ID du jeu si vous en avez reçu un.",OrderIsNotImportant:"L'ordre des images n'est pas important",DoNotPreventUserForHint:"Ne pas afficher de message d'alerte quand le joueur utilise un indice",DeleteQuestAndFolder:"L'enquête et ses fichiers ont été supprimés",TextTooLongForStep:"Votre texte est trop long ou contient trop de sauts de lignes, et risque de mal s'afficher sur des petits écrans ! Nous conseillons {nb} caractères pour ce type d'étape. Souhaitez vous enregistrer quand même ?",FirstAndLastName:"Votre nom et prénom",IconForSuccess:"Icone affiché quand on gagne",SelectThisIcon:"Sélectionner cette icône",NoIcon:"Aucune icône",CustomizeRightAnswerColor:"Personnaliser la couleur du message de bonne réponse",CustomizeWrongAnswerColor:"Personnaliser la couleur du message de mauvaise réponse",Binoculars:"Jumelles",FlashLight:"Lampe de poche",Shape:"Forme",DataHaveBeenRemoved:"Les données ont été supprimées",Private:"Privé",WarningInvitees:"Les invités ne pourront jouer que quand votre jeu sera publié",RemoveOfflineData:"Supprimer les données offline des jeux",DisplayTime:"Afficher l'heure",DisplayGoodAnswers:"Afficher le nombre de bonnes réponses",FaceCamera:"Camera de face",BackCamera:"Camera arrière",CameraUsed:"Camera utilisée",RedirectToNextChapter:"Rediriger vers le chapitre qui suit",RedirectToChapter:"Rediriger vers le chapitre",ObjectCombined:"Objet combiné",CombineItems:"Combiner les objets",MyGameIsIndoorRemoveWarningsOnStart:"Mon jeu est en intérieur sans risque, supprimer les avertissements au lancement",YouCanOnlyUseThisFeatureInNewItemStep:"Vous ne pouvez utiliser cette fonctionnalité que dans les étapes Nouvel Objet",YourCharacterOnMap:"Personnage sur la carte interactive",AddACustomCharacterOnMap:"Ajouter un personnage sur la carte",helpQuestCharacterOnMap:"Cela permet de personnaliser le marqueur qui représente le joueur sur la carte interactive",UploadTheLocatorPicture:"Télécharger une image pour la carte",ObjectInInventory:"L'objet est dans l'inventaire",ObjectNotInInventory:"L'objet n'est pas dans l'inventaire",ResetChapterProgression:"Supprimer la progression de ce chapitre",GeolocationCouldNotBeRetrieved:"Position du joueur inconnue",GeolocationIsDeniedPleaseSkipThisStep:"Cette partie du jeu nécessite un accès à votre position, cependant il semble que ayez refusé cet accès. Cette étape ne peut donc pas être affichée. Veuillez appuyer sur la flèche permettant de jouer l'étape suivante.",HidePaiement:"Cacher le prix (communiqué aux joueurs hors de Graaly)",QRCodeAlreadyUsed:"Ce QR code a déjà été utilisé par un autre compte. Veuillez vous connecter ou contacter le créateur du jeu pour obtenir un autre code.",GeolocationIssuePleaseSkipThisStep:"Cette partie du jeu nécessite un accès à votre position, mais Graaly n'a pas pu la récupérer, soit à cause d'un problème de permissions ou de précision. Vérifiez que vos avez autorisé Graaly à accéder à votre position (en vérifiant dans les paramètres de votre appareil) et que votre GPS est activé et calibré (pour calibrer, tenez votre appareil en lui faisant faire des \"8\" plusieurs fois). Actuellement, cette étape ne peut pas être affichée. Veuillez appuyer sur la flèche permettant de jouer l'étape suivante.",PrintQRCodePages:"Imprimer les QR Codes",AnswerNumber:"Numéro de la réponse",QRCodeIsNotStartingOne:"Ce n'est pas le bon QR code. Recherchez le QR code de démarrage du jeu !",QRCodeIsNotPlayingOne:"Ce n'est pas le bon QR code. Recherchez un QR code avec un logo en bas à droite !"}}}},"3b2f":function(e,t,s){"use strict";var a=s("019e"),r=s.n(a);r.a},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac à dos","en":"Backpack"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candélabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantôme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Clé","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe à pétrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine téléphonique","en":"Phone booth"},"author":"Dave Sutton","url":"https://www.cgtrader.com/free-3d-models/exterior/other/telephone-box"},"phone-rotary":{"name":{"fr":"Téléphone à cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},"42ad":function(e,t,s){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="4678"},"4c18":function(e){e.exports=JSON.parse('[{"label":"France","value":"FRA"},{"label":"Belgique","value":"BEL"},{"label":"Suisse","value":"CHE"},{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbaïdjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahreïn","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzégovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brésil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Bélarus","value":"BLR"},{"label":"Bénin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (République démocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Côte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythrée","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"Fédération Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grèce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinée Française","value":"GUF"},{"label":"Guinée Équatoriale","value":"GNQ"},{"label":"Guinée","value":"GIN"},{"label":"Guinée-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Géorgie du Sud et les îles Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et îles McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Caïmans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Féroé","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caïques","value":"TCA"},{"label":"Iles Vierges (États-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures éloignées des États-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaïque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'île de noël","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les Îles Cook","value":"COK"},{"label":"Les îles Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronésie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Nioué","value":"NIU"},{"label":"Norvège","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zélande","value":"NZL"},{"label":"Népal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbékistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (état de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guinée","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Française","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Pérou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"République Dominicaine","value":"DOM"},{"label":"République Tchèque","value":"CZE"},{"label":"République arabe syrienne","value":"SYR"},{"label":"République centrafricaine","value":"CAF"},{"label":"République de Corée","value":"KOR"},{"label":"République populaire démocratique de Corée","value":"PRK"},{"label":"Réunion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthélemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Niévès","value":"KNA"},{"label":"Saint-Siège","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hélène, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa américaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tomé et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovénie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suriname","value":"SUR"},{"label":"Suède","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sénégal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes françaises","value":"ATF"},{"label":"Territoire britannique de l\'océan Indien","value":"IOT"},{"label":"Thaïlande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinité-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkménistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pièces","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Clé","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac à dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Bouée de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fusée","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Téléphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Télévision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle clé","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},"74f2":function(e,t,s){"use strict";var a=s("7da1"),r=s.n(a);r.a},"7da1":function(e,t,s){},"7e6d":function(e,t,s){},"8cf0":function(e,t,s){"use strict";var a=s("42ad"),r=s.n(a);r.a},9224:function(e){e.exports=JSON.parse('{"name":"graaly-frontend","version":"2.2.0","description":"Graaly Frontend","productName":"Graaly","cordovaId":"graaly.app","author":"Eric Mathieu <eric.mathieu13@gmail.com>, Maxime Pacary <maxime.pacary@gmail.com>","private":true,"scripts":{"lint":"eslint --ext .js,.vue src","start:dev":"quasar dev"},"dependencies":{"@babel/core":"^7.4.5","@quasar/babel-preset-app":"^1.2.0","@quasar/extras":"^1.9.15","@tweenjs/tween.js":"^18.3.1","ajv":"^6.9.1","autoprefixer":"^9.5.0","axios":"^0.21.1","axios-cookiejar-support":"^0.4.2","cordova":"^9.0.0","core-js":"^2.5.7","crypto-js":"^3.1.9-1","image-capture":"^0.4.0","js-cookie":"^2.2.0","moment":"^2.22.2","mqtt":"^3.0.0","object-hash":"^1.3.1","quasar":"^1.15.1","sortablejs":"^1.7.0","three":"^0.125.0","three-orbitcontrols":"^2.102.2","timeago.js":"^4.0.2","tough-cookie":"^3.0.1","vue":"^2.6.10","vue-i18n":"^7.8.1","vue-qrcode-reader":"^3.0.1","vue2-google-maps":"^0.10.6","vuelidate":"^0.7.4","vuex":"^3.0.1","vuex-persistedstate":"^2.5.4","webpack":"^4.29.6"},"devDependencies":{"@babel/cli":"^7.4.4","@quasar/app":"^1.9.6","babel-eslint":"^8.2.1","chalk":"^2.4.2","eslint":"^4.18.2","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.9.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.3.0","start-server-and-test":"^1.11.5","strip-ansi":"^3.0.1","vue-template-compiler":"^2.6.10"},"engines":{"node":">= 8.9.0","npm":">= 5.6.0","yarn":">= 1.6.0"},"browserslist":["> 1%","last 2 versions","not ie <= 10"]}')},a2e6:function(e,t,s){"use strict";var a=s("a553"),r=s.n(a);r.a},a553:function(e,t,s){},aa38:function(e,t,s){},ae4c:function(e,t,s){},b26c:function(e,t,s){},b496:function(e,t,s){},b650:function(e,t,s){"use strict";var a=s("ae4c"),r=s.n(a);r.a},c16d:function(e,t,s){},cf83:function(e){e.exports=JSON.parse('[{"label":"United States of America","value":"USA"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"Afghanistan","value":"AFG"},{"label":"Åland Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaçao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},e08c:function(e){e.exports=JSON.parse('{"baseServiceID":"4fafc201-1fb5-459e-8fcc-c5c9c331914b","baseCara":"beb5483e-36e1-4688-b7f5-"}')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"}]')},f4ba:function(e,t,s){"use strict";var a=s("b26c"),r=s.n(a);r.a},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')},fd41:function(e,t,s){"use strict";var a=s("aa38"),r=s.n(a);r.a},fd92:function(e,t,s){"use strict";var a=s("08bd"),r=s.n(a);r.a}});