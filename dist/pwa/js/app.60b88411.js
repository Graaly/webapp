(function(e){function t(t){for(var r,n,o=t[0],l=t[1],u=t[2],c=0,f=[];c<o.length;c++)n=o[c],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&f.push(a[n][0]),a[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],r=!0,n=1;n<i.length;n++){var l=i[n];0!==a[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},a={app:0},s=[];function n(e){return o.p+"js/"+({}[e]||e)+"."+{"2d230c65":"f2c84fb9"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],i=a[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,r){i=a[e]=[t,r]}));t.push(i[2]=r);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=n(e);var u=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(c);var i=a[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,i[1](u)}a[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=u;s.push([0,"vendor"]),i()})({0:function(e,t,i){e.exports=i("2f39")},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":90,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true},{"category":"enigma","code":"image-recognition","icon":"camera","title":"PhotographAnObject","description":"PhotographAnObjectDesc","showTrick":"yes","enabled":false,"hasBackgroundImage":"option","hasOptions":true},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"no","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"no","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true}]')},"05d1":function(e,t,i){},1:function(e,t){},1634:function(e,t,i){"use strict";var r=i("525b"),a=i.n(r);a.a},2:function(e,t){},"21ca":function(e,t,i){},"22ae":function(e){e.exports=JSON.parse('["red","green","blue","black","white"]')},"2f39":function(e,t,i){"use strict";i.r(t);var r=i("967e"),a=i.n(r),s=(i("a481"),i("96cf"),i("fa84")),n=i.n(s),o=(i("7d6e"),i("e54f"),i("573e"),i("4848"),i("c382"),i("4a8e"),i("58af"),i("b828"),i("7713"),i("3c1c"),i("e046"),i("62f2"),i("7e6d"),i("2b0e")),l=i("b3f7"),u=i("b05d"),c=i("cb32"),d=i("54e1"),f=i("58a8"),h=i("9c40"),p=i("156b"),m=i("8c8f"),b=i("f09f"),g=i("4b7e"),v=i("a370"),w=i("880c"),k=i("32a7"),y=i("62cd"),_=i("8f8e"),S=i("b047"),x=i("c859"),q=i("24e8"),E=i("f2cc"),C=i("54b4"),T=i("0016"),A=i("068f"),M=i("ef35"),P=i("27f9"),R=i("6ab5"),I=i("e208"),O=i("033f"),F=i("4d5a"),$=i("497d"),D=i("9f0a"),N=i("c7a0"),L=i("2ea3"),z=i("639d"),j=i("6b1d"),H=i("3786"),B=i("daf4"),U=i("ddd8"),Q=i("eb85"),V=i("c1d0"),Y=i("2c91"),W=i("0d59"),G=i("8380"),K=i("06d5"),J=i("9569"),X=i("7460"),Z=i("429bb"),ee=i("823b"),te=i("adad"),ie=i("9564"),re=i("65c6"),ae=i("6ac5"),se=i("7f67"),ne=i("714f"),oe=i("4396"),le=i("75c3"),ue=i("12c5"),ce=i("436b"),de=i("f508"),fe=i("2a19");o["a"].use(u["a"],{config:{cordova:{backButtonExit:!1}},iconSet:l["a"],components:{QAvatar:c["a"],QBanner:d["a"],QBadge:f["a"],QBtn:h["a"],QBtnDropdown:p["a"],QBtnGroup:m["a"],QCard:b["a"],QCardActions:g["a"],QCardSection:v["a"],QCarousel:w["a"],QCarouselControl:k["a"],QCarouselSlide:y["a"],QCheckbox:_["a"],QChip:S["a"],QDate:x["a"],QDialog:q["a"],QDrawer:E["a"],QExpansionItem:C["a"],QIcon:T["a"],QImg:A["a"],QInfiniteScroll:M["a"],QInput:P["a"],QItem:R["a"],QItemLabel:I["a"],QItemSection:O["a"],QLayout:F["a"],QList:$["a"],QOptionGroup:D["a"],QPageContainer:N["a"],QPage:L["a"],QParallax:z["a"],QLinearProgress:j["a"],QRadio:H["a"],QRating:B["a"],QSelect:U["a"],QSeparator:Q["a"],QSlider:V["a"],QSpace:Y["a"],QSpinner:W["a"],QSpinnerDots:G["a"],QSpinnerPuff:K["a"],QSpinnerRadio:J["a"],QTab:X["a"],QTabs:Z["a"],QTabPanel:ee["a"],QTabPanels:te["a"],QToggle:ie["a"],QToolbar:re["a"],QToolbarTitle:ae["a"]},directives:{ClosePopup:se["a"],Ripple:ne["a"],Scroll:oe["a"],TouchPan:le["a"],TouchSwipe:ue["a"]},plugins:{Dialog:ce["a"],Loading:de["a"],Notify:fe["a"]}});var he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"q-app"}},[i("router-view")],1)},pe=[],me={name:"App"},be=me,ge=i("2877"),ve=Object(ge["a"])(be,he,pe,!1,null,null,null),we=ve.exports,ke=i("2f62"),ye=i("0e44"),_e=i("a78e"),Se=i("bc3a"),xe=i.n(Se),qe=i("429c"),Ee=i.n(qe),Ce=i("9fe5"),Te=i.n(Ce);new Te.a.CookieJar;Ee()(xe.a),xe.a.defaults.withCredentials=!0,xe.a.defaults.timeout=15e3;var Ae=function(){var e="https://api.graaly.com";return xe.a.create({baseURL:e,jar:!1,validateStatus:function(e){return!0}})},Me={checkEmail:function(e){return Ae().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return Ae().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,i){return Ae().post("login/facebook",{id:e,token:t}).then((function(e){i(!1,e)}))},logout:function(){return Ae().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return Ae().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?Ae().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):Ae().get("account").catch((function(e){return console.log(e.request)}))},createAccount:function(e){return Ae().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return Ae().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return Ae().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return Ae().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,i){return Ae().post("user/forgottenpassword/code/validate",{email:e,password:t,code:i}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e){return Ae().post("user/forgottenpassword/code/generate",{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return Ae().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};o["a"].use(ke["a"]);var Pe={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[]},Re={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]}},Ie={login:function(){var e=n()(a.a.mark((function e(t,i){var r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("loginStart"),e.next=4,Me.login(i.email,i.password);case 4:return s=e.sent,200===s.status&&(r("loginSuccess",s.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),logout:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,e.next=3,Me.logout();case 3:return r=e.sent,i("logout"),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var i=e.commit;return i("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var i=e.commit,r=e.state;if(null===t){var a=r.questSteps.geolocation.drawDirectionInterval;null!==a&&window.clearInterval(a)}i("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var i=e.commit;return i("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var i=e.commit;return i("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var i=e.commit;return i("setErrorMessage",t)},setCurrentRun:function(e,t){var i=e.commit;return i("setCurrentRun",t)},addTimeoutId:function(e,t){var i=e.commit;return i("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var i=e.commit;return i("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")}},Oe={},Fe=new ke["a"].Store({state:Pe,getters:Oe,actions:Ie,mutations:Re,plugins:[Object(ye["a"])({getState:function(e){return _e["getJSON"](e)},setState:function(e,t){_e["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),$e=i("8c4f"),De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[i("q-page-container",[i("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),i("div",{attrs:{id:"screen-too-large"}},[i("h5",{staticClass:"text-center"},[e._v(e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens")))])])],1)},Ne=[],Le={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language&&(this.$i18n.locale=this.$store.state.user.language)},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language&&(this.$i18n.locale=this.$store.state.user.language)}},methods:{}},ze=Le,je=Object(ge["a"])(ze,De,Ne,!1,null,null,null),He=je.exports,Be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"div-column",staticClass:"column"},[e.offline.active||null===e.user.position?e._e():i("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?i("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,r){return i("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(i){return e.openQuestSummary(t,r)}}})})),e.map.loaded?i("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()},on:{click:function(t){return e.openDiscoveryQuest()}}}):e._e(),i("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[!this.$store.state.user.story||this.$store.state.user.story.step>3?i("div",{staticClass:"infoWindow"},[i("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),i("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?i("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?i("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?i("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?i("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.availablePoints?i("span",[e._v(e._s(e.currentQuest.availablePoints)+" "+e._s(e.$t("label.pts")))]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?i("p",[e._v("\n            "+e._s(e.currentQuest.displayPrice)+"\n          ")]):e._e(),e.currentQuest&&e.currentQuest.authorUserId!==e.$store.state.user._id?i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Play")))]):e._e(),e.currentQuest&&e.currentQuest.authorUserId===e.$store.state.user._id?i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.modifyQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Modify")))]):e._e(),e.currentQuest&&e.currentQuest.authorUserId===e.$store.state.user._id?i("q-btn",{staticClass:"q-mt-sm",attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.TestYourQuest")))]):e._e(),!e.offline.available||!e.currentQuest||e.currentQuest.premiumPrice&&e.currentQuest.premiumPrice.androidId&&"free"!==e.currentQuest.premiumPrice.androidId||e.currentQuest.authorUserId===e.$store.state.user._id||e.offline.show?e._e():i("div",{staticClass:"q-pa-md"},[i("a",{attrs:{color:"primary"},on:{click:function(t){return e.downloadQuest(e.currentQuest)}}},[e._v(e._s(e.$t("label.DownloadForOfflineUse")))])])],1):e._e(),this.$store.state.user.story&&this.$store.state.user.story.step<=3?i("div",{staticClass:"infoWindow"},[i("p",[e._v(e._s(e.$t("label.ClickHereToStartDiscoveryQuest")))]),i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.openDiscoveryQuest()}}},[e._v(e._s(e.$t("label.Start")))])],1):e._e()])],2):e._e()],1),e.offline.active?i("div",{staticClass:"fullscreen scroll q-px-md"},[i("div",{staticClass:"no-internet-connection"},[i("q-icon",{attrs:{name:"cloud_off"}}),i("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():i("div",{staticClass:"q-my-md"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?i("div",{staticClass:"image-list",staticStyle:{width:"100%"}},[i("div",{staticClass:"q-my-md"},[e._v(e._s(e.$t("label.YouAreOfflineYourQuestsList")))]),e._l(e.questList,(function(t,r){return i("q-card",{key:r,staticClass:"q-mb-md",nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-img",{attrs:{src:e.QuestService.getBackgroundImage(t),basic:""}},[i("div",{staticClass:"absolute-top text-center"},[i("span",{domProps:{innerHTML:e._s(e.getQuestTitle(t,!0))}}),t.rating&&t.rating.rounded?i("q-rating",{attrs:{slot:"subtitle",color:"primary",max:5},slot:"subtitle",model:{value:t.rating.rounded,callback:function(i){e.$set(t.rating,"rounded",i)},expression:"item.rating.rounded"}}):e._e()],1)])],1)}))],2):e._e()]):e._e(),e.offline.active?e._e():i("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}}),e.loadingMap?i("div",{staticClass:"centered q-pa-xl",staticStyle:{width:"100%",position:"absolute",top:"100px","z-index":"7000"}},[i("q-spinner",{attrs:{color:"primary",size:"3em"}}),i("br"),e._v("\n    "+e._s(e.$t("label.QuestMapIsLoading"))+"\n  ")],1):e._e(),!e.$store.state.user||e.offline.active||e.loadingMap?e._e():i("div",{staticClass:"score-box q-mr-md",on:{click:e.openRanking}},[i("div",{staticClass:"q-px-md q-pt-md score-text centered",class:{bouncing:e.warnings.score}},[e._v(e._s(e.$store.state.user.score))]),i("div",{staticStyle:{width:"100px"}},[i("div",{staticClass:"centered bg-primary text-white level-box",staticStyle:{"margin-bottom":"1px"}},[e._v(e._s(e.$t("label.Level"))+" "+e._s(e.$store.state.user.level))]),i("q-linear-progress",{staticStyle:{height:"6px"},attrs:{value:e.profile.level.progress,stripe:"",animate:"",color:"primary"}})],1)]),e.invitations.length>0?i("div",{staticClass:"invitations-box"},[i("q-expansion-item",{attrs:{"expand-separator":"",icon:"email",label:e.$t("label.YouHaveInvitations",{nb:e.invitations.length}),"header-class":"text-primary bg-white"}},[i("q-list",e._l(e.invitations,(function(t){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t._id,staticClass:"bg-white",attrs:{clickable:""},on:{click:function(i){return e.playQuest(t.questId)}}},[i("q-item-section",[i("q-item-label",[e._v(e._s(t.title.fr))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.author))])],1)],1)})),1)],1)],1):e._e(),i("q-drawer",{staticClass:"over-map",attrs:{side:"left",width:e.innerWidth,"test-id":"quests-pane"},model:{value:e.showSuccess,callback:function(t){e.showSuccess=t},expression:"showSuccess"}},[i("q-tabs",{staticClass:"bg-accent text-white",model:{value:e.questsTab,callback:function(t){e.questsTab=t},expression:"questsTab"}},[i("q-tab",{attrs:{name:"built",icon:"add_box",label:e.$t("label.QuestsCreated")}}),i("q-tab",{attrs:{name:"played",icon:"play_circle_filled",label:e.$t("label.QuestsSuccessful")}})],1),i("q-separator"),"built"===e.questsTab?i("div",{staticClass:"q-pa-md q-pb-xl tab-content-80"},[e.success.quests.built.tovalidate&&0===e.success.quests.built.tovalidate.length&&0===e.success.quests.built.rejected.length&&0===e.success.quests.built.published.length&&0===e.success.quests.built.draft.length&&!e.warnings.listCreatedQuestsMissing?i("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e(),i("q-btn",{staticClass:"full-width",attrs:{link:"",color:"secondary"},on:{click:e.buildQuest}},[e._v(e._s(e.$t("label.CreateANewQuest")))]),i("q-btn",{staticClass:"full-width q-mt-sm",attrs:{outline:"",color:"secondary"},on:{click:function(t){e.menu.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestAQuest")))]),e.warnings.listCreatedQuestsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.success.quests.built.tovalidate&&e.success.quests.built.tovalidate.length>0?i("q-expansion-item",{attrs:{label:e.$t("label.YourUnderValidationQuests"),"default-opened":""}},[i("q-list",e._l(e.success.quests.built.tovalidate,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:t.thumb?e.serverUrl+"/upload/quest/"+t.thumb:"statics/profiles/noprofile.png"}}),"private"===t.access?i("q-badge",{attrs:{floating:"",color:"black"}},[i("q-icon",{attrs:{name:"lock",color:"white"}})],1):e._e()],1)],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1))+" (v"+e._s(t.version)+")")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.PublicationRequested"))+" ...\n              ")])],1)],1)})),1)],1):e._e(),e.success.quests.built.rejected&&e.success.quests.built.rejected.length>0?i("q-expansion-item",{attrs:{label:e.$t("label.YourRejectedQuests"),"default-opened":""}},[i("q-list",e._l(e.success.quests.built.rejected,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.modifyQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:t.thumb?e.serverUrl+"/upload/quest/"+t.thumb:"statics/profiles/noprofile.png"}}),"private"===t.access?i("q-badge",{attrs:{floating:"",color:"black"}},[i("q-icon",{attrs:{name:"lock",color:"white"}})],1):e._e()],1)],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1))+" (v"+e._s(t.version)+")")]),i("q-item-label",{staticStyle:{color:"#f00"},attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.PublicationRejected"))+"\n              ")])],1)],1)})),1)],1):e._e(),e.success.quests.built.draft&&e.success.quests.built.draft.length>0?i("q-expansion-item",{attrs:{label:e.$t("label.YourDraftQuests"),"default-opened":""}},[i("q-list",e._l(e.success.quests.built.draft,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.modifyQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:t.thumb?e.serverUrl+"/upload/quest/"+t.thumb:"statics/profiles/noprofile.png"}}),"private"===t.access?i("q-badge",{attrs:{floating:"",color:"black"}},[i("q-icon",{attrs:{name:"lock",color:"white"}})],1):e._e()],1)],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1))+" (v"+e._s(t.version)+")")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")])],1)],1)})),1)],1):e._e(),e.success.quests.built.published&&e.success.quests.built.published.length>0?i("q-expansion-item",{attrs:{label:e.$t("label.YourPublishedQuests"),"default-opened":""}},[i("q-list",e._l(e.success.quests.built.published,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.modifyQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:t.thumb?e.serverUrl+"/upload/quest/"+t.thumb:"statics/profiles/noprofile.png"}}),"private"===t.access?i("q-badge",{attrs:{floating:"",color:"black"}},[i("q-icon",{attrs:{name:"lock",color:"white"}})],1):e._e()],1)],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1))+" (v"+e._s(t.version)+")")]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[t.rating&&t.rating.rounded?i("q-rating",{attrs:{readonly:"",color:"primary",max:5,size:"1rem"},model:{value:t.rating.rounded,callback:function(i){e.$set(t.rating,"rounded",i)},expression:"quest.rating.rounded"}}):e._e(),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e()],1)],1)})),1)],1):e._e(),e.success.quests.built.tovalidate||e.warnings.listCreatedQuestsMissing?e._e():i("div",[e._v("\n        "+e._s(e.$t("label.Loading"))+"\n      ")])],1):e._e(),"played"===e.questsTab?i("div",{staticClass:"q-pa-md q-pb-xl tab-content-80"},[e.warnings.listPlayedQuestsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listPlayedQuests(e.$store.state.user._id)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.success.quests.played&&e.success.quests.played.length>0?i("q-list",e._l(e.success.quests.played,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.playQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.questData&&t.questData.thumb?i("img",{attrs:{src:t.questData.thumb&&"_"===t.questData.thumb[0]?"statics/images/quest/"+t.questData.thumb:e.serverUrl+"/upload/quest/"+t.questData.thumb}}):e._e(),t.questData&&!t.questData.thumb&&t.questData.picture?i("img",{attrs:{src:t.questData.picture&&"_"===t.questData.picture[0]?"statics/images/quest/"+t.questData.picture:e.serverUrl+"/upload/quest/"+t.questData.picture}}):e._e(),t.questData&&(t.questData.picture||t.questData.thumb)?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t.questData,!1))+" "+e._s(t.type))]),t.dateCreated&&"finished"==t.status&&!t.score?i("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("label.PlayedOn"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n            ")]):e._e(),t.dateCreated&&"finished"==t.status&&t.score?i("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("label.Succeeded"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n            ")]):e._e(),t.dateCreated?e._e():i("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("label.Succeeded"))+"\n            ")]),t.dateCreated&&"finished"==t.status&&t.score?i("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("label.MyScore"))+": "+e._s(t.score)+" ")]):e._e(),"in-progress"==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n              "+e._s(e.$t("label.ContinueThisQuest"))+"\n            ")]):e._e()],1),i("q-item-section",{attrs:{side:"",top:""}},["finished"!=t.status||t.questData.type&&"quest"!==t.questData.type?e._e():i("q-item-label",{staticClass:"score"},[i("q-icon",{attrs:{color:"warning",name:"fas fa-award"}}),t.stars>1?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e(),t.stars>2?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e()],1),t.questData.type&&"quest"!==t.questData.type?i("q-item-label",{staticClass:"score"},[e._v(e._s(t.reward)+" "),i("q-icon",{attrs:{name:"fas fa-bolt"}})],1):e._e()],1)],1)})),1):e._e(),e.success.quests.played&&0!==e.success.quests.played.length?e._e():i("q-list",[0!==e.success.quests.played.length||e.warnings.listPlayedQuestsMissing?e._e():i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoQuestPlayedLong")))])],1)],1)],1):e._e()],1),i("q-drawer",{staticClass:"over-map",attrs:{side:"right",width:e.innerWidth,"test-id":"profile-pane"},model:{value:e.showProfile,callback:function(t){e.showProfile=t},expression:"showProfile"}},[i("div",{staticClass:"header row"},[i("div",{staticClass:"col-4"},[i("div",{staticClass:"big-avatar"},[e.$store.state.user.picture&&-1!==e.$store.state.user.picture.indexOf("http")?i("div",{style:"background-image: url("+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture&&-1===e.$store.state.user.picture.indexOf("http")?i("div",{style:"background-image: url("+e.serverUrl+"/upload/profile/"+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture?e._e():i("div",{style:"background-image: url(statics/icons/game/profile-small.png); background-color: #fff;"}),i("label",{attrs:{for:"picturefile"},on:{click:function(t){return e.$refs["uploadfile"].click()}}},[e._v(e._s(e.$t("label.Edit")))]),i("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"title"},[e._v(e._s(e.$store.state.user.name))]),i("q-btn",{attrs:{label:e.$t("label.SignOut"),icon:"power_settings_new",flat:"","test-id":"btn-signout"},nativeOn:{click:function(t){return e.disconnect()}}})],1)]),i("q-tabs",{staticClass:"bg-accent text-white",model:{value:e.profileTab,callback:function(t){e.profileTab=t},expression:"profileTab"}},[i("q-tab",{attrs:{name:"profile",icon:"face",label:e.$t("label.MyProfile")}}),i("q-tab",{attrs:{name:"friends",icon:"supervised_user_circle",label:e.$t("label.Friends")}}),i("q-tab",{attrs:{name:"news",icon:"notifications",label:e.$t("label.News")}}),i("q-tab",{attrs:{name:"pro",icon:"store",label:e.$t("label.Pro")}})],1),i("q-separator"),"profile"===e.profileTab?i("div",{staticClass:"q-pa-md tab-content-180"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"account_circle"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.EditYourInformations")))]),i("q-input",{attrs:{label:e.$t("label.YourName"),placeholder:"John Doe",maxlength:"30","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{focus:function(t){return e.hideMenu()},blur:function(t){e.showMenu(),e.$v.profile.form.name.$touch}},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),e.profile.userCanChangeEmail?i("q-input",{attrs:{label:e.$t("label.YourEmail"),placeholder:e.$t("label.emailExample"),"bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.profile.form.email.required?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{focus:function(t){return e.hideMenu()},blur:function(t){e.showMenu(),e.$v.profile.form.email.$touch}},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}):e._e(),e.profile.userCanChangePhone?i("q-input",{attrs:{label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample"),"bottom-slots":"",error:e.$v.profile.form.phone.$error,"error-message":e.$t("label.InvalidPhoneNumber")},on:{focus:function(t){return e.hideMenu()},blur:function(t){e.showMenu(),e.$v.profile.form.phone.$touch}},model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}):e._e(),i("q-select",{attrs:{label:e.$t("label.YourCountry"),options:e.profile.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},on:{focus:function(t){return e.hideMenu()},blur:function(t){return e.showMenu()}},model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),i("q-input",{attrs:{label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},on:{focus:function(t){return e.hideMenu()},blur:function(t){return e.showMenu()}},model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),i("q-select",{attrs:{label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage,focus:function(t){return e.hideMenu()},blur:function(t){return e.showMenu()}},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:function(t){return e.submitProfileChanges()}}},[e._v(e._s(e.$t("label.Save")))])],1)],1),e.profile.userCanChangePassword?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"lock"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.ChangeYourPassword")))]),i("q-input",{attrs:{type:"password",label:e.$t("label.CurrentPassword")},on:{focus:function(t){return e.hideMenu()},blur:function(t){return e.showMenu()}},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),i("q-input",{attrs:{type:"password",label:e.$t("label.NewPassword")},on:{focus:function(t){return e.hideMenu()},blur:function(t){return e.showMenu()}},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:function(t){return e.submitProfileChanges()}}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"help"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.Tutorial")))]),i("q-btn",{staticClass:"q-my-md",attrs:{color:"primary",label:e.$t("label.IWantToRestartTutorial")},on:{click:function(t){return e.restartTutorial()}}})],1)],1),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"remove_circle"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.RemoveYourAccount")))]),i("p",[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),i("q-btn",{staticClass:"q-my-md",attrs:{color:"primary",label:e.$t("label.IConfirmIWantToRemoveMyAccount")},on:{click:function(t){return e.removeAccount()}}})],1)],1),i("div",{staticClass:"centered",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),i("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})],1)]):e._e(),"friends"===e.profileTab?i("div",{staticClass:"q-pa-md tab-content-180"},[i("q-btn",{staticClass:"full-width",attrs:{link:"",color:"secondary"},on:{click:function(t){return e.openAddFriendsModal()}}},[e._v(e._s(e.$t("label.AddFriends")))]),e.warnings.listFriendsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.loadFriends}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),i("q-list",[e._l(e.friends.list,(function(t){return i("q-item",{key:t.friendId},[i("q-item-section",{attrs:{avatar:""},nativeOn:{click:function(i){return e.openFriendCard(t.friendId)}}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-section",{nativeOn:{click:function(i){return e.openFriendCard(t.friendId)}}},[e._v("\n            "+e._s(t.name)+"\n          ")]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"close"},on:{click:function(i){return e.removeFriend(t.friendId)}}})],1)],1)})),0!==e.friends.list.length||e.warnings.listFriendsMissing?e._e():i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoFriend")))])],1)],2)],1):e._e(),"news"===e.profileTab?i("div",{staticClass:"q-pa-md tab-content-180"},[i("q-infinite-scroll",{on:{load:e.loadNews}},[i("q-list",[e._l(e.friends.news.items,(function(t,r){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.data.picture&&-1!==t.data.picture.indexOf("http")?i("img",{attrs:{src:t.data.picture}}):e._e(),t.data.picture&&-1===t.data.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.data.picture}}):e._e(),t.data.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-section",[t.data&&t.data.userId?i("q-item-label",[i("strong",[e._v(e._s(t.data.name))])]):e._e(),"standard"===t.type?i("q-item-label",[e._v("\n                "+e._s(t.title)+"\n              ")]):e._e(),"standard"!==t.type?i("q-item-label",[i("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?i("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),i("q-item-label",{attrs:{caption:""}},[t.data.stars?i("span",[i("q-icon",{attrs:{color:"warning",name:"fas fa-award"}}),t.data.stars>1?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e(),t.data.stars>2?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e()],1):e._e(),e._v("\n                "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                "),"friends"===t.destination?i("span",[e._v("\n                  - \n                  "),e.isLiked(t)?e._e():i("a",{staticStyle:{color:"#000"},on:{click:function(t){return e.like(r)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?i("a",{on:{click:function(t){return e.unlike(r)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?i("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])],1)],1)})),0===e.friends.news.items.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),i("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[i("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e(),"pro"===e.profileTab?i("div",{staticClass:"q-pa-md tab-content-180"},[e.$store.state.user.organizationId?e._e():i("div",[i("div",[i("q-card",{staticClass:"q-mb-md"},[i("q-img",{attrs:{src:"statics/icons/game/storekeeper.jpg"}},[i("div",{staticClass:"absolute-bottom"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.Storekeeper")))]),i("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.StorekeeperDesc")))])])])],1)],1),i("div",[i("span",{domProps:{innerHTML:e._s(e.$t("label.contactUsPro"))}})])]),e.$store.state.user.organizationId&&e.profile.organization.organization?i("div",[i("p",{staticClass:"text-weight-bold"},[e._v(e._s(e.$t("label.YourOrganizationSubscribeAProAccount",{name:e.profile.organization.organization.name})))]),e.profile.organization.quests&&e.profile.organization.quests.length>0?i("p",[e._v("\n          "+e._s(e.$t("label.MembersOfYourOrganizationCreatedPremiumQuests"))+"\n          "),i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.profile.organization.quests,(function(t){return i("q-item",{key:t.questId,nativeOn:{click:function(i){return e.playQuest(t.questId)}}},[i("q-item-section",[e._v(e._s(e.getQuestTitle(t))+" (statut"+e._s(e.$t("label.colons"))+e._s(e.$t("status."+t.status))+")")])],1)})),1)],1):e._e(),e.profile.organization.organization.premiumQuestsNb&&e.profile.organization.organization.premiumQuestsNb>0?i("p",[e._v(e._s(e.$t("label.YouCanCreateNbPremiumQuests",{nb:e.profile.organization.organization.premiumQuestsNb})))]):e._e(),e.profile.organization.organization.premiumQuestsNb&&0!==e.profile.organization.organization.premiumQuestsNb?e._e():i("p",[i("span",{domProps:{innerHTML:e._s(e.$t("label.YouCanNotCreateNewQuests"))}})])]):e._e()]):e._e()],1),i("q-dialog",{attrs:{"full-width":"","full-height":""},model:{value:e.showSearch,callback:function(t){e.showSearch=t},expression:"showSearch"}},[i("div",{ref:"div-column",staticClass:"column search-from-map"},[i("div",[i("q-input",{staticClass:"q-pa-md",attrs:{debounce:"500",placeholder:e.$t("label.Search")},on:{input:function(t){return e.findQuests()}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"close"},on:{click:function(t){return e.closeSearch()}}})]},proxy:!0}]),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1),e._l(e.search.quests,(function(t){return i("q-card",{key:t._id,staticClass:"q-ma-sm",nativeOn:{click:function(i){return e.$router.push(t.authorUserId===e.$store.state.user._id?"/quest/builder/"+t.questId:"/quest/play/"+t.questId)}}},[i("q-img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.picture}},[i("div",{staticClass:"absolute-top text-center"},[e._v("\n            "+e._s(e.getQuestTitle(t,!0))+"\n            "),t.rating&&t.rating.rounded?i("q-rating",{attrs:{slot:"subtitle",color:"primary",max:5},slot:"subtitle",model:{value:t.rating.rounded,callback:function(i){e.$set(t.rating,"rounded",i)},expression:"item.rating.rounded"}}):e._e(),t.distance&&t.distance>0&&t.distance<=99?i("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[i("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n            ")],1):e._e(),0===t.distance?i("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[i("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" <1 "+e._s(e.$t("label.km"))+"\n            ")],1):e._e(),t.distance>99?i("span",{staticClass:"row items-center text-white",attrs:{slot:"right"},slot:"right"},[i("q-icon",{attrs:{color:"white",name:"place"}}),e._v(" >99 "+e._s(e.$t("label.km"))+"\n            ")],1):e._e()],1)])],1)})),i("q-item",{directives:[{name:"show",rawName:"v-show",value:e.search.text.length>0&&0==e.search.quests.length,expression:"search.text.length > 0 && search.quests.length == 0"}],nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"explore",size:"2rem"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.NoQuestForThisSearch")))]),i("q-item-label",{attrs:{caption:""}},[i("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1)],1)],2)]),i("q-dialog",{staticClass:"over-map",model:{value:e.friends.show,callback:function(t){e.$set(e.friends,"show",t)},expression:"friends.show"}},[i("div",{staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.friends.show=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.friends.selected.name))]),i("q-tabs",{staticClass:"bg-accent text-white",model:{value:e.friendsTab,callback:function(t){e.friendsTab=t},expression:"friendsTab"}},[i("q-tab",{attrs:{name:"friendbuilt",icon:"add_box",label:e.$t("label.QuestsCreated"),default:""}}),i("q-tab",{attrs:{name:"friendplayed",icon:"play_circle_filled",label:e.$t("label.QuestsSuccessful")}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:e.friendsTab,callback:function(t){e.friendsTab=t},expression:"friendsTab"}},[i("q-tab-panel",{attrs:{name:"friendbuilt"}},[i("q-list",[e._l(e.friends.selected.built,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.playQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:t.thumb?e.serverUrl+"/upload/quest/"+t.thumb:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[t.rating&&t.rating.rounded?i("q-rating",{attrs:{readonly:"",color:"primary",max:5,size:"1rem"},model:{value:t.rating.rounded,callback:function(i){e.$set(t.rating,"rounded",i)},expression:"quest.rating.rounded"}}):e._e(),e._v("\n                  "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n                ")],1):e._e(),"unpublished"==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.$t("label.Unpublished"))+"\n                ")]):e._e(),"tovalidate"==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.$t("label.PublicationRequested"))+" ...\n                ")]):e._e(),"rejected"==t.status?i("q-item-label",{staticStyle:{color:"#f00"},attrs:{caption:""}},[e._v("\n                  "+e._s(e.$t("label.PublicationRejected"))+"\n                ")]):e._e()],1)],1)})),0===e.friends.selected.built.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoQuestCreated")))])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"friendplayed"}},[e.friends.selected.played&&e.friends.selected.played.length>0?i("q-list",[e._l(e.friends.selected.played,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.playQuest(t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.questData&&t.questData.thumb?i("img",{attrs:{src:t.questData.thumb&&"_"===t.questData.thumb[0]?"statics/images/quest/"+t.questData.thumb:e.serverUrl+"/upload/quest/"+t.questData.thumb}}):e._e(),t.questData&&!t.questData.thumb&&t.questData.picture?i("img",{attrs:{src:t.questData.picture&&"_"===t.questData.picture[0]?"statics/images/quest/"+t.questData.picture:e.serverUrl+"/upload/quest/"+t.questData.picture}}):e._e(),t.questData&&(t.questData.picture||t.questData.thumb)?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t.questData,!1))+" "+e._s(t.type))]),t.dateCreated?e._e():i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.$t("label.Succeeded"))+"\n                ")]),t.score?i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.$t("label.Score"))+": "+e._s(t.score)+" ")]):e._e()],1),t.questData.type&&"quest"!==t.questData.type?e._e():i("q-item-section",{staticClass:"score",attrs:{side:""}},[i("q-icon",{attrs:{color:"warning",name:"fas fa-award"}}),t.stars>1?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e(),t.stars>2?i("q-icon",{staticClass:"q-ml-xs",attrs:{color:"warning",name:"fas fa-award"}}):e._e()],1),t.questData.type&&"quest"!==t.questData.type?i("q-item-section",{staticClass:"score",attrs:{side:""}},[e._v("\n                "+e._s(t.reward)+" "),i("q-icon",{attrs:{name:"fas fa-bolt"}})],1):e._e()],1)})),0===e.friends.selected.played.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.NoQuestPlayed")))])],1):e._e()],2):e._e()],1)],1)],1)]),i("q-dialog",{staticClass:"over-map",model:{value:e.friends.new.show,callback:function(t){e.$set(e.friends.new,"show",t)},expression:"friends.new.show"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.AddFriends")))]),i("q-space"),i("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),i("q-card-section",[i("newfriend",{attrs:{load:e.friends.new.show},on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1),i("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.shop.show,callback:function(t){e.$set(e.shop,"show",t)},expression:"shop.show"}},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Shop")))]),i("shop",{on:{close:e.closeShop}})],1),i("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.ranking.show,callback:function(t){e.$set(e.ranking,"show",t)},expression:"ranking.show"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YourRanking")))]),i("q-space"),i("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeRanking}})],1),e.warnings.rankingMissing?i("q-card-section",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.getRanking}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),i("q-card-section",[i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Level")))]),i("q-item",{attrs:{multiline:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"trending_up",color:"primary"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.MyLevel"))+": "+e._s(e.$store.state.user.level)+" ("+e._s(e.$store.state.user.score)+" "+e._s(e.$t("label.points"))+")")]),i("q-linear-progress",{staticClass:"q-my-sm",staticStyle:{height:"18px"},attrs:{rounded:"",value:e.profile.level.progress,color:"primary"}}),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max})))])],1)],1)],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Rankings")))]),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"public",color:"primary"}})],1),i("q-item-label",[e._v("\n              "+e._s(e.$t("label.YourWorldRanking"))+" : \n              "),e.$store.state.user.statistics.rankings.world?i("span",[e._v(e._s(e.$store.state.user.statistics.rankings.world))]):e._e(),e.$store.state.user.statistics.rankings.world?e._e():i("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"home",color:"primary"}})],1),i("q-item-label",[e._v("\n              "+e._s(e.$t("label.YourCityRanking"))+" :\n              "),e.$store.state.user.statistics.rankings.town?i("span",[e._v(e._s(e.$store.state.user.statistics.rankings.town))]):e._e(),e.$store.state.user.statistics.rankings.town?e._e():i("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1)],1):e._e(),e.success.ranking&&e.success.ranking.length>0?i("div",[i("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Rewards")))]),e._l(e.success.ranking,(function(t,r){return i("q-list",{key:r},[i("q-item-label",{attrs:{header:""}},[e._v(e._s(t.city))]),i("q-item",{staticStyle:{"flex-wrap":"wrap"}},e._l(t.rewards,(function(t,r){return i("img",{key:r,class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}})})),0)],1)})),e._v("\n          "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n        ")],2):e._e()],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():i("q-card-section",[e._v("\n        "+e._s(e.$t("label.NoRankingYet"))+"\n      ")])],1)],1),e.menu.show&&!e.offline.active?i("div",{staticClass:"fixed-bottom over-map"},[i("div",{staticClass:"menu-background"}),i("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:e.swipeMenu,expression:"swipeMenu",modifiers:{horizontal:!0}}],staticClass:"menu row"},[i("div",{staticClass:"col-4 centered",attrs:{"test-id":"btn-quests-pane"},on:{click:function(t){return e.openSuccessPage()}}},[i("q-btn",{class:{bouncing:e.warnings.questButton},attrs:{icon:"playlist_add_check",round:"",color:"primary"}})],1),i("div",{staticClass:"col-4 centered",attrs:{"test-id":"btn-bottom-menu"},on:{click:function(t){return e.openBottomMenu()}}},[i("img",{class:{bouncing:e.warnings.mainButton},attrs:{src:"statics/icons/game/menu-main.png"}})]),i("div",{staticClass:"col-4 centered",attrs:{"test-id":"btn-profile-pane"},on:{click:function(t){return e.openProfilePage()}}},[i("q-btn",{class:{bouncing:e.warnings.networkButton},attrs:{icon:"group",round:"",color:"primary"}})],1)]),e.warnings.noLocation?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1):e._e(),e.warnings.lowBattery?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n    ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?i("div",[e.warnings.noNetwork?i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n      ")],1):e._e(),!e.warnings.noNetwork&&e.warnings.noServerReponse?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.reloadMap}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]):e._e(),e.offline.show?i("div",[i("offlineLoader",{attrs:{quest:e.offline.quest,design:"download"},on:{end:function(t){return e.questLoadedInCache()}}})],1):e._e()]):e._e(),i("q-dialog",{attrs:{position:"bottom","test-id":"bottom-menu"},model:{value:e.showBottomMenu,callback:function(t){e.showBottomMenu=t},expression:"showBottomMenu"}},[i("q-list",{staticClass:"bg-white"},[i("q-item",{nativeOn:{click:function(t){e.menu.suggestQuest.show=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"emoji_objects"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.SuggestAQuest")))])],1),i("q-item",{nativeOn:{click:function(t){return e.centerOnUserPosition()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"gps_fixed"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.CenterOnYourPosition")))])],1),i("q-item",{attrs:{"test-id":"btn-create-quest"},nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"add_location"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.BuildAQuestHere")))])],1),i("q-separator"),"best"===e.map.filter||"easy"===e.map.filter?i("q-item",{nativeOn:{click:function(t){return e.getQuests("all")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"place"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.DisplayAllQuests")))])],1):e._e(),"best"!==e.map.filter?i("q-item",{nativeOn:{click:function(t){return e.getQuests("best")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"favorite"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.BestQuests")))])],1):e._e(),"easy"!==e.map.filter?i("q-item",{nativeOn:{click:function(t){return e.getQuests("easy")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"child_care"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.OnlyEasy")))])],1):e._e(),i("q-item",{nativeOn:{click:function(t){return e.openSearch()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"search"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.SearchForAQuest")))])],1),e.$store.state.user.isAdmin?i("q-item",{nativeOn:{click:function(t){return e.openAdminPage()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"primary",name:"settings"}})],1),i("q-item-section",[e._v(e._s(e.$t("label.Administrate")))])],1):e._e(),e.$store.state.user.isAdmin&&e.shop.inAppPurchase.activated?i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"green",name:"check"}})],1),i("q-item-section",[e._v("In-app purchase")])],1):e._e(),e.$store.state.user.isAdmin&&!e.shop.inAppPurchase.activated?i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"red",name:"close"}})],1),i("q-item-section",[e._v("In-app purchase")])],1):e._e()],1)],1),null!==e.story.step?i("div",{staticClass:"fixed-bottom story-container fit"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:e.endStory}})],1):e._e(),i("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.menu.suggestQuest.show,callback:function(t){e.$set(e.menu.suggestQuest,"show",t)},expression:"menu.suggestQuest.show"}},[i("suggest",{on:{close:function(t){e.menu.suggestQuest.show=!1}}})],1)],1)},Ue=[],Qe=(i("7514"),i("386d"),i("cadf"),i("06db"),i("456d"),i("ac4d"),i("8a81"),i("ac6a"),i("7f7f"),i("34ef"),i("551c"),i("8993")),Ve=i.n(Qe),Ye=(i("6b54"),i("3b2b"),i("5a89")),We=i("3452"),Ge={notificationsArr:[],handleError:function(e){Fe.dispatch("setErrorMessage",e),xa.push("/error")},buildOptionsForSelect:function(e,t,i){var r=[];return e.forEach((function(e){r.push({value:e[t.valueField],label:i("label."+e[t.labelField])})})),r},getById:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e[i];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,i,r){var a=6371,s=Ge.degreesToRadians(i-e),n=Ge.degreesToRadians(r-t);e=Ge.degreesToRadians(e),i=Ge.degreesToRadians(i);var o=Math.sin(s/2)*Math.sin(s/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(e)*Math.cos(i),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return a*l},bearingBetweenEarthCoordinates:function(e,t,i,r){var a=Ge.degreesToRadians(r-t),s=Ge.degreesToRadians(e),n=Ge.degreesToRadians(i),o=Math.sin(a)*Math.cos(n),l=Math.cos(s)*Math.sin(n)-Math.sin(s)*Math.cos(n)*Math.cos(a),u=Ge.radiansToDegrees(Math.atan2(o,l));return(u+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),i={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var r in i)t=t.replace(new RegExp(i[r],"g"),r);return t},shuffle:function(e){var t,i,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),i=e[r],e[r]=e[t],e[t]=i;return e},buildIncrementalArray:function(e){for(var t=[],i=1;i<=e;i++)t.push(i);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var i=setTimeout(e,t);return Fe.dispatch("addTimeoutId",i),i})),clearAllTimeouts:function(){var e=!0,t=!1,i=void 0;try{for(var r,a=Fe.state.runningTimeoutsIds[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;clearTimeout(s)}}catch(n){t=!0,i=n}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}Fe.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var i=setInterval(e,t);Fe.dispatch("addIntervalId",i)})),clearAllIntervals:function(){var e=!0,t=!1,i=void 0;try{for(var r,a=Fe.state.runningIntervalIds[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;clearInterval(s)}}catch(n){t=!0,i=n}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}Fe.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==Ve()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e["isActiveClone"]=null,t[i]=this.clone(e[i]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,i){var r=t?1e3:1024,a=i("label.byteCharacter");if(Math.abs(e)<r)return e+" "+a;var s=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],n=-1;s=s.map((function(e){return e+a}));do{e/=r,++n}while(Math.abs(e)>=r&&n<s.length-1);return e.toFixed(1)+" "+s[n]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<16;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},detachObject3D:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attachObject3D:function(e,t,i){e.applyMatrix((new Ye["Matrix4"]).getInverse(t.matrixWorld)),i.remove(e),t.add(e)},initFileStorage:function(e,t,i){return new Promise((function(r,a){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(a){e&&""!==e?a.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:i,exclusive:!1},(function(e){r(e)}),(function(){r(!1)}))}),(function(){r(!1)})):a.root.getFile(t,{create:i,exclusive:!1},(function(e){r(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}))},checkIfFileExists:function(e,t,i){return new Promise((function(r,a){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(a){e&&""!==e?a.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:i,exclusive:!1},(function(e){r(!0)}),(function(){r(!1)}))}),(function(){r(!1)})):a.root.getFile(t,{create:i,exclusive:!1},(function(e){r(!0)}),(function(){r(!1)}))}),(function(){r(!1)}))}))},writeInFile:function(e,t,i,r){var a=this;return new Promise((function(s,n){window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,0,(function(n){e&&""!==e?n.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:r,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),s(!1)},i||(i=new Blob(["some file data"],{type:"text/plain"}));var t=a.gcrypt(i,"Gr44lyCryp7");e.write(t)}))}),(function(){s(!1)}))}),(function(){s(!1)})):n.root.getFile(t,{create:r,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),s(!1)},i||(i=new Blob(["some file data"],{type:"text/plain"}));var t=a.gcrypt(i,"Gr44lyCryp7");e.write(t)}))}),(function(){s(!1)}))}),(function(){s(!1)}))}))},readFile:function(e,t){var i=this;return new Promise((function(r,a){t||r(!1),window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,0,(function(a){a||r(!1),e&&""!==e?a.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var t=new FileReader;t.onloadend=function(){var e=i.gcrypt(this.result,"Gr44lyCryp7",!0);r(e)},t.readAsText(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)})):a.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var t=new FileReader;t.onloadend=function(){var e=i.gcrypt(this.result,"Gr44lyCryp7",!0);r(e)},t.readAsText(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)}))}))},saveBinaryFile:function(e,t,i){return new Promise((function(r,a){window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(a){var s=new XMLHttpRequest;s.open("GET",t+i,!0),s.responseType="blob",s.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?a.root.getDirectory(e,{create:!0},(function(e){e.getFile(i,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){r(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),r(!1)},e.write(t)}))}),(function(){r(!1)}))}),(function(){r(!1)})):a.root.getFile(i,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){r(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),r(!1)},e.write(t)}))}),(function(){r(!1)}))}else r(!1)},s.send()}),(function(){r(!1)}))}))},readBinaryFile:function(e,t){var i=this;return new Promise((function(r,a){t||r(!1),window.cordova||r(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(a){a||r(!1),e&&""!==e?a.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var a=new FileReader;a.onloadend=function(){var e=i.getMimeType(t),a=new Blob([new Uint8Array(this.result)],{type:e});r(window.URL.createObjectURL(a))},a.readAsArrayBuffer(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)})):a.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||r(!1),e.file((function(e){e||r(!1);var a=new FileReader;a.onloadend=function(){var e=i.getMimeType(t),a=new Blob([new Uint8Array(this.result)],{type:e});r(window.URL.createObjectURL(a))},a.readAsArrayBuffer(e)}),(function(){r(!1)}))}),(function(){r(!1)}))}),(function(){r(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,i){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(i){i||t(!1),i.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",i=e.substr(-4);switch(i){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,i){return i?We["AES"].decrypt(e,t).toString(We["enc"].Utf8):We["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},loadImage:function(e){return new Promise((function(t,i){var r=new Image;r.onload=function(){t(r)},r.onerror=i,r.src=e}))}},Ke=Ge,Je={listNearest:function(e,t){return Ae().get("quests/nearest/"+e.lng+"-"+e.lat+"/"+t).catch((function(e){return console.log(e.request)}))},getById:function(e,t){return Ae().get("quest/"+e+"/version/"+t).catch((function(e){return console.log(e.request)}))},getSize:function(e,t){return Ae().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e){return Ae().get("quest/"+e+"/version/last").catch((function(e){return console.log("getLastById(): could not retrieve quest data",e)}))},find:function(e,t){return Ae().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude)},create:function(e,t){return Ae().post("quest/create/"+t,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return Ae().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return Ae().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return Ae().delete("quest/"+e+"/version/"+t+"/remove")},closePrivate:function(e,t){return Ae().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return Ae().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return Ae().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return Ae().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return Ae().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e){return Ae().get("user/"+e+"/quests/created").catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e){return Ae().get("user/"+e+"/quests/played").catch((function(e){return console.log(e.request)}))},listMedia:function(e,t){return Ae().get("quest/"+e+"/version/"+t+"/media/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,i){return Ae().delete("quest/"+e+"/version/"+t+"/media/"+i+"/remove")},listObjectFiles:function(e,t){return Ae().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,i){return Ae().get("quest/"+e+"/version/"+t+"/statistics/"+i).catch((function(e){return console.log(e.request)}))},getInvitations:function(){return Ae().get("user/quests/invitations/list").catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return Ae().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return Ae().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return Ae().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return Ae().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return Ae().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return Ae().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return Ae().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return Ae().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return Ae().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return Ae().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return Ae().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return Ae().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,i){return Ae().put("quest/"+e+"/version/"+t+"/editor/add/"+i).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,i){return Ae().delete("quest/"+e+"/version/"+t+"/editor/remove/"+i)},listInvitees:function(e,t){return Ae().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,i){return Ae().put("quest/"+e+"/version/"+t+"/invitee/add/"+i).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,i){return Ae().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+i)},isCached:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Ke.checkIfFileExists(t,"quest_"+t+".json");case 4:if(i=e.sent,i){e.next=7;break}return e.abrupt("return",!1);case 7:if(Ke.isNetworkAvailable()){e.next=9;break}return e.abrupt("return",!0);case 9:return e.t0=JSON,e.next=12,Ke.readFile(t,"quest_"+t+".json");case 12:return e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=16,this.getLastById(t);case 16:return s=e.sent,s=s.data,e.abrupt("return",s.version===r.version);case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeFromCache:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.removeDirectory(t);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://api.graaly.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.png"}},Xe={listFriends:function(){return Ae().get("user/friends/list").catch((function(e){return console.log(e.request)}))},listNews:function(e,t,i){return Ae().get("user/friends/news/list/"+e+"/"+t).then((function(e){i(!1,e)}))},likeNews:function(e){return Ae().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return Ae().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return Ae().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRanking:function(){return Ae().get("account/ranking").catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return Ae().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return Ae().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return Ae().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return Ae().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return Ae().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?Ae().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?Ae().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):Ae().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return Ae().delete("user/friend/remove/"+e)},checkContacts:function(e){return Ae().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return Ae().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},Ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isSupported&&e.isActive?e._e():i("div",{staticClass:"geolocation-layer centered",class:{"with-nav-bar":e.withNavBar,"without-nav-bar":!e.withNavBar,disabled:e.disabled}},[!e.isActive&&e.askUserToEnableGeolocation?i("div",{staticClass:"enable-geolocation"},[i("p",{staticClass:"text-primary"},[e._v(e._s(e.$t("label.CouldNotRetrieveYourPosition")))]),i("p",[e._v(e._s(e.$t("label.PossibleReasons")))]),i("ul",[i("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),i("li",[e._v("\n        "+e._s(e.$t("label.GeolocationDisabled"))+"\n        "),e.nativeSettingsIsEnabled?i("span",[i("br"),i("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():i("div",[e.isChrome?i("div",[i("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():i("div",[i("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])]):e._e(),e.isActive?e._e():i("div",{staticClass:"search-geolocation centered",class:e.withNavBar?"with-nav-bar":"without-nav-bar"},[i("p",[i("q-spinner-puff",{attrs:{color:"primary",size:"25px"}})],1),i("p",[e._v(e._s(e.$t("label.LocationSearching")))])]),e.isSupported?e._e():i("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n    "+e._s(e.$t("label.GeolocationNotSupported"))+"\n  ")])])},et=[],tt=(i("4917"),i("c5f6"),{props:{maximumAge:{type:Number,default:0},withNavBar:{type:Boolean,default:!1}},data:function(){return{isSupported:!0,isActive:!1,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:1e4,nbFails:0,disabled:!1,alreadyWorked:!1,method:"watchPosition",geolocationWatchId:null,timeoutIds:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,i=t.vendor,r=t.userAgent.indexOf("Edge")>-1,a=t.userAgent.match("CriOS");return!!a||null!==e&&"undefined"!==typeof e&&"Google Inc."===i&&!1===r},askUserToEnableGeolocation:function(){return this.nbFails>=1&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||("watchPosition"===this.method?this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(!this.disabled){console.warn("Could not get location"),console.log(e),this.isSupported=!0,this.isActive=!1,this.nbFails++,this.userDeniedGeolocation=1===e.code,this.$emit("error",!this.alreadyWorked),"watchPosition"===this.method&&this.stopTracking();var t=Ke.setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);"getCurrentPosition"===this.method&&this.timeoutIds.push(t)}},locationSuccess:function(e){this.disabled||(this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1,this.$emit("success",e))},stopTracking:function(){if("watchPosition"===this.method)null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null);else if(this.timeoutIds.length>0){var e=!0,t=!1,i=void 0;try{for(var r,a=this.timeoutIds[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;clearTimeout(s)}}catch(n){t=!0,i=n}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}this.timeoutIds=[]}},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),it=tt,rt=(i("1634"),Object(ge["a"])(it,Ze,et,!1,null,"60e5f244",null)),at=rt.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.canFindContacts?i("div",[i("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.newFriendTab,callback:function(t){e.newFriendTab=t},expression:"newFriendTab"}},[i("q-tab",{attrs:{name:"suggestions",label:e.$t("label.Suggestions")}}),i("q-tab",{attrs:{name:"addfriends",label:e.$t("label.Add")}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:e.newFriendTab,callback:function(t){e.newFriendTab=t},expression:"newFriendTab"}},[i("q-tab-panel",{attrs:{name:"suggestions"}},[e.loadingContacts?i("div",{staticClass:"centered"},[i("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n          "+e._s(e.$t("label.LoadingContacts"))+"\n        ")],1):e._e(),null===e.loadingContacts?i("div",{staticClass:"centered"},[i("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?i("div",[i("q-list",{attrs:{highlight:""}},e._l(e.validatedContacts,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(i){return e.addFriend(t._id)}}})],1)],1)})),1)],1):e._e(),!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length?e._e():i("div",[e._v("\n          "+e._s(e.$t("label.NoMoreContactFound"))+"\n        ")])]),i("q-tab-panel",{attrs:{name:"addfriends"}},[i("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n        \n          "+e._s(e.$t("label.FindWithEmail"))+"\n          "),i("div",{staticClass:"row q-pb-md"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n          "+e._s(e.$t("label.FindWithPhone"))+"\n          "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])],1)],1):e._e(),e.canFindContacts?e._e():i("div",[i("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n      \n      "+e._s(e.$t("label.FindWithEmail"))+"\n      "),i("div",{staticClass:"row q-pb-md"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n      "+e._s(e.$t("label.FindWithPhone"))+"\n      "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("q-input",{attrs:{color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?i("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),i("div",{staticClass:"col-4 centered"},[i("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])])},nt=[],ot=i("b5ae"),lt=(i("f751"),{position:"top",actions:[{icon:"close"}]}),ut=function(e,t,i){var r;switch(t){case"positive":r={icon:"check_circle",color:"positive"};break;case"warning":r={icon:"warning",color:"orange"};break;case"error":r={icon:"report_problem",color:"negative"};break;case"rightAnswer":r={color:"positive",timeout:4e3};break;case"wrongAnswer":r={color:"orange",timeout:4e3};break;case"readMore":r={icon:"info",color:"positive",timeout:0,position:"bottom"};break;default:r={icon:"info",color:"info"};break}i&&(r.actions=i);var a=fe["a"].create(Object.assign({message:e},lt,r));return Ke.notificationsArr.push(a),a},ct=function(e){var t=e.match(/\d/g);return 10===t.length},dt={props:["load"],watch:{load:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.getContacts();case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,canFindContacts:!0,serverUrl:"https://api.graaly.com",submitting:!1,loadingContacts:null,console:"",newFriendTab:"suggestions"}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formSubmit:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.form.email.$error&&this.$v.form.phone.$error){e.next=5;break}return e.next=3,Xe.addFriend({email:this.form.email,phone:this.form.phone});case 3:t=e.sent,t?200===t.status?(t.data&&t.data.hasOwnProperty("status")&&"invitationsent"===t.data.status?ut(this.$t("label.InvitationSent"),"success"):(ut(this.$t("label.FriendsAdded"),"success"),this.$emit("friendadded")),this.form.email="",this.form.phone=""):t.data&&"Friend not found"===t.data.message?ut(this.$t("label.FriendNotFound"),"error"):t.data&&"Too much friends"===t.data.message?ut(this.$t("label.TooMuchFriends"),"error"):t.data&&"User can not be friend with him"===t.data.message?ut(this.$t("label.UserCanNotBeFriendWithHim"),"error"):t.data&&"Already friends"===t.data.message?ut(this.$t("label.AlreadyFriends"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return r=new FormData,r.append("image",i[0]),e.next=7,AuthService.uploadAccountPicture(r);case 7:s=e.sent,s&&s.data&&(s.data.file?this.$store.state.user.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error"));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getContacts:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("contact1"),window.cordova?(this.loadingContacts=!0,console.log("contact2"),t=new ContactFindOptions,console.log("contact3"),t.filter="",t.multiple=!0,i=["displayName","emails","phoneNumbers"],console.log("contact4"),navigator.contacts.find(i,this.checkContacts,this.onError,t),console.log("contact5"),this.loadingContacts=!1):(console.log("contact6"),this.canFindContacts=!1);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkContacts:function(e){for(var t=[],i=0;i<e.length;i++)if(e[i].emails&&e[i].emails.length>0){var r=e[i].emails[0].value;r=r.toLowerCase(),t.push({name:e[i].displayName,email:r})}else if(e[i].phoneNumbers&&e[i].phoneNumbers.length>0){var a=e[i].phoneNumbers[0].value,s=a.match(/\d/g);t.push({name:e[i].displayName,phone:s.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.checkContacts(t);case 2:return i=e.sent,i&&i.data&&i.data.contacts&&(this.validatedContacts=i.data.contacts),e.next=6,this.hideContactsAlreadyfriends();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideContactsAlreadyfriends:function(){var e=n()(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.listFriends();case 2:for(t=e.sent,i=t.data,r=this.validatedContacts.length-1;r>=0;r--)for(s=0;s<i.length;s++)this.validatedContacts.length>r&&this.validatedContacts[r]._id===i[s].friendId&&this.validatedContacts.splice(r,1);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.addFriend(t);case 2:i=e.sent,i?(i.data&&i.data.hasOwnProperty("status")&&"invitationsent"===i.data.status?ut(this.$t("label.InvitationSent"),"success"):(ut(this.$t("label.FriendsAdded"),"success"),this.$emit("friendadded")),this.hideUserFromValidatedContacts(t)):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onError:function(e){ut(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:ot["email"]},phone:{checkPhone:ct}}}},ft=dt,ht=Object(ge["a"])(ft,st,nt,!1,null,null,null),pt=ht.exports,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'énergie est gratuite !")]),i("q-list",{attrs:{highlight:""}},[i("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),i("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),i("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),i("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?i("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},bt=[],gt={data:function(){return{coinsWon:0}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.coinsWon=0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{buy:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.coinsWon=0,e.next=3,Xe.buy(t);case 3:i=e.sent,i&&i.data&&i.data.coins?(this.coinsWon=i.data.coins,this.$store.state.user.coins+=this.coinsWon):ut(this.$t("label.ErrorStandardMessage"),"error"),setTimeout(this.resetCoinsWon,2e3);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},vt=gt,wt=Object(ge["a"])(vt,mt,bt,!1,null,null,null),kt=wt.exports,yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?i("div",{staticClass:"story fit",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"}},[i("div",{style:"position: fixed; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onBackgroundTouch,expression:"onBackgroundTouch"}],staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?i("div",{staticClass:"scroll-indicator"},[i("q-icon",{attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),i("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),i("div",{staticClass:"text-right"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?i("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v("  \n        "),i("q-btn",{attrs:{color:"primary"},on:{click:e.next}},[e._v("\n          "+e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>")+"\n        ")])],1)]),e._m(1),i("div",{staticClass:"character"},[i("img",{staticStyle:{"min-height":"30vh"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}})]),e.steps[e.currentStep.id].allowSkip?i("div",{staticClass:"fixed-bottom-left q-pa-md"},[i("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},_t=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-top"},[i("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-bottom"},[i("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],St=(i("b54a"),{props:["step","data"],data:function(){return{steps:{hint:{discussions:[{character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:"help",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},1:{discussions:[{character:"2",text:"WelcomeToQuest1",link:{label:"BackToTheMap",action:"/map"},condition:null},{character:"2",text:"WelcomeToQuest2",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.hasOwnProperty("startingPlace")&&"undefined"!==typeof this.data.startingPlace&&this.data.startingPlace.length>1},{character:"2",text:"YouAlreadyDidThisQuest",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.isRunFinished},{character:"2",text:"YouAreQuestOwnerDesc",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.isOwner},{character:"2",text:"QuestIsFarFromUser",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.isFar&&this.data.hasOwnProperty("startingPlace")&&"undefined"!==typeof this.data.startingPlace&&this.data.startingPlace.length>1},{character:"2",text:"QuestParams",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>0},{character:"2",text:"description",link:{label:"BackToTheMap",action:"/map"},condition:this.data&&this.data.hasOwnProperty("description")&&this.data.description.length>1},{character:"2",text:"GeneralWarning",condition:null}],bottom:0,allowSkip:!1},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentStep.id=this.step,this.steps[this.currentStep.id]){e.next=4;break}return this.hideStory(),e.abrupt("return");case 4:return this.currentStep.discussionId=0,this.nextStep=this.step,this.hide=!1,this.moreToValidStep(),e.next=10,this.saveStepPassed();case 10:Ke.setTimeout(this.checkIfTextIsHidden,500);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{next:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.needToScroll=!1,!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].hasOwnProperty("button")||!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button.hasOwnProperty("action")){e.next=6;break}this.$router.push(this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].button.action),Ke.setTimeout(this.checkIfTextIsHidden,500),e.next=8;break;case 6:return e.next=8,this.closeStory();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfTextIsHidden:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.bubbleText){e.next=2;break}return e.abrupt("return");case 2:t=this.$refs.bubbleText.clientHeight,t>"165"&&(this.needToScroll=!0);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].hasOwnProperty("nextStep")){e.next=5;break}return this.nextStep=this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].nextStep,this.$store.state.user.story.step=this.nextStep,e.next=5,Xe.nextStoryStep(this.nextStep);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),skipTutorial:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hide=!0,this.$q.dialog({title:this.$t("label.SkipTutorial"),message:this.$t("label.SkipTutorialDesc"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk((function(){t.nextStep=17,Xe.nextStoryStep(t.nextStep),t.$store.state.user.story.step=t.nextStep,t.hideStory()})).onCancel((function(){console.log("cancel"),t.hide=!1}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeStory:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveStepPassed();case 2:this.steps[this.currentStep.id].discussions.length-1>this.currentStep.discussionId?(this.currentStep.discussionId++,this.moreToValidStep()):this.hideStory();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideStory:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hide=!0,setTimeout(this.emitNext,500);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),emitNext:function(){this.$emit("next",this.nextStep)},linkAction:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.hasOwnProperty("action")){e.next=4;break}"close"===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.action?this.hideStory():this.$router.push(this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].link.action),e.next=6;break;case 4:return e.next=6,this.closeStory();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}}),xt=St,qt=Object(ge["a"])(xt,yt,_t,!1,null,null,null),Et=qt.exports,Ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-md"},[i("h1",{staticClass:"size-3"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),i("p",[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"room"}})],1),i("q-item-section",[i("q-input",{attrs:{label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),i("q-input",{attrs:{label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),i("q-input",{attrs:{label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),i("q-input",{attrs:{label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),i("q-input",{attrs:{label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),i("q-input",{attrs:{label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))]),i("div",{staticClass:"centered q-pt-md"},[i("a",{staticClass:"text-primary",attrs:{color:"primary"},on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),i("p",[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)],1)],1)])},Tt=[],At={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.submitSuggestion(this.place);case 2:t=e.sent,t&&t.data&&"ok"===t.data.status?(ut(this.$t("label.ThankYouForYourProposal"),"positive"),this.emitClose()):ut(this.$t("label.TechnicalIssue"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Mt=At,Pt=Object(ge["a"])(Mt,Ct,Tt,!1,null,null,null),Rt=Pt.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.offline.progress>0&&e.offline.progress<1?i("div",{staticClass:"bg-secondary centered fixed-bottom q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():i("div",[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():i("div",[e._v(e._s(e.$t("label.Downloading"))+" "+e._s(e.quest.title.fr))]),e.error.raised?e._e():i("div",[i("q-linear-progress",{staticStyle:{height:"10px"},attrs:{color:"primary",stripe:"",value:e.offline.progress}}),i("a",{staticClass:"text-white",on:{click:function(t){return e.cancelOfflineLoading()}}},[e._v(e._s(e.$t("label.Cancel")))])],1),e.error.raised&&e.error.nb<2?i("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+" \n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?i("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+" \n    ")]):e._e()]):e._e()])},Ot=[],Ft={listForAQuest:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("quest/"+t+"/version/"+i+"/steps").catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),listForAChapter:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("quest/"+t+"/version/"+r+"/chapter/"+i+"/steps").catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listWonObjects:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("quest/"+t+"/version/"+r+"/steps/"+i+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),getById:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("step/"+t+"/version/"+i).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),checkAnswer:function(){var e=n()(a.a.mark((function e(t,i,r,s,n){var o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("quest/"+t+"/version/"+r+"/step/"+i+"/check/"+s,n).catch((function(e){return console.log(e.request)}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r,a,s){return e.apply(this,arguments)}return t}(),countForAQuest:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("quest/"+t+"/version/"+i+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),save:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().put("quest/"+t.questId+"/version/"+t.version+"/step/"+t.stepId+"/update",t).catch((function(e){return console.log(e.request)}));case 2:return i=e.sent,e.next=5,Je.removeFromCache(t.questId);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),modifyChapter:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().put("quest/"+t.questId+"/version/"+t.version+"/chapter/"+t.chapterId+"/update",t).catch((function(e){return console.log(e.request)}));case 2:return i=e.sent,e.next=5,Je.removeFromCache(t.questId);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),remove:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().delete("quest/"+t+"/version/"+r+"/step/"+i+"/remove");case 2:return s=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),removeChapter:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().delete("quest/"+t+"/version/"+r+"/chapter/"+i+"/remove");case 2:return s=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),move:function(){var e=n()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().put("quest/"+t+"/version/"+i+"/step/"+r+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return n=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r,a){return e.apply(this,arguments)}return t}(),moveChapter:function(){var e=n()(a.a.mark((function e(t,i,r,s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().put("quest/"+t+"/version/"+i+"/chapter/"+r+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return n=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r,a){return e.apply(this,arguments)}return t}(),uploadBackgroundImage:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/background/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadImageToRecognize:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/image-recognition/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadAnswerImage:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/choose-image/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadMemoryImage:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/memory/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadCodeAnswerImage:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/code-image/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadVideo:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/video/upload",i,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadPuzzleImage:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/jigsaw-puzzle/upload",i,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadItemImage:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/"+i+"/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadItemObject:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/3dobject/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),uploadCharacterImage:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().post("/quest/"+t+"/step/character/upload",r,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=e.sent,e.next=5,Je.removeFromCache(t);case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}()},$t={props:["quest","design"],watch:{quest:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.saveOfflineQuest(this.quest);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{saveOfflineQuest:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.error.raised=!1,e.next=3,Je.isCached(t.questId);case 3:if(i=e.sent,i){e.next=11;break}return this.offline.progress=.1,e.next=8,this.saveQuestData(t);case 8:this.offline.progress=.1,e.next=12;break;case 11:this.offline.progress=1;case 12:this.$emit("end");case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addQuestInOfflineList:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=10;break}return e.next=6,Ke.readFile("","quests.json");case 6:s=e.sent,r=JSON.parse(s),e.next=11;break;case 10:r={list:[]};case 11:for(n=!1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=!0);return n||r.list.push(this.quest),e.next=16,Ke.writeInFile("","quests.json",JSON.stringify(r),!0);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveQuestData:function(){var e=n()(a.a.mark((function e(t){var i,r,s,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S,x,q,E,C;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this,Ke.setTimeout(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.cancelSavingTooLong(i.quest.questId);case 2:case"end":return e.stop()}}),e)}))),18e4),e.next=4,Ft.listForAQuest(t.questId,t.version);case 4:for(r=e.sent,s=r.data.steps,o=r.data.chapters,this.quest.steps=[],l=0;l<s.length;l++)this.quest.steps.push(s[l].stepId);for(this.quest.chapters=[],l=0;l<o.length;l++)this.quest.chapters.push(o[l].chapterId);if(this.error.raised){e.next=184;break}return e.next=14,Ke.writeInFile(t.questId,"quest_"+t.questId+".json",JSON.stringify(t),!0);case 14:if(u=e.sent,u){e.next=18;break}return this.throwSaveError(),e.abrupt("return",!1);case 18:return e.next=20,this.addQuestInOfflineList(t.questId);case 20:if(this.error.raised){e.next=181;break}if(this.offline.progress=.2,!t.picture||""===t.picture){e.next=32;break}return e.next=25,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.picture);case 25:if(c=e.sent,c){e.next=29;break}return this.throwSaveError(),e.abrupt("return",!1);case 29:this.offline.progress+=.1,e.next=33;break;case 32:this.offline.progress+=.1;case 33:if(!t.customization||!t.customization.logo||""===t.customization.logo){e.next=36;break}return e.next=36,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/",t.customization.logo);case 36:if(!r||!r.data){e.next=178;break}d=Math.ceil(70/s.length)/100,l=0;case 39:if(!(l<s.length)){e.next=165;break}if(!this.error.raised){e.next=42;break}return e.abrupt("return",!1);case 42:return f=s[l],e.next=45,Ke.writeInFile(t.questId,"step_"+f.stepId+".json",JSON.stringify(f),!0);case 45:if(h=e.sent,h){e.next=49;break}return this.throwSaveError(),e.abrupt("return",!1);case 49:if(!f.backgroundImage||""===f.backgroundImage){e.next=56;break}return e.next=52,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/background/",f.backgroundImage);case 52:if(p=e.sent,p){e.next=56;break}return this.throwSaveError(),e.abrupt("return",!1);case 56:if(!f.videoStream||""===f.videoStream){e.next=63;break}return e.next=59,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/video/",f.videoStream);case 59:if(m=e.sent,m){e.next=63;break}return this.throwSaveError(),e.abrupt("return",!1);case 63:if("image-recognition"!==f.type||!f.answers||""===f.answers){e.next=70;break}return e.next=66,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/image-recognition/",f.answers);case 66:if(b=e.sent,b){e.next=70;break}return this.throwSaveError(),e.abrupt("return",!1);case 70:if("choose"!==f.type||!f.options||!f.options.items){e.next=84;break}g=!0,v=0;case 73:if(!(v<f.options.items.length)){e.next=84;break}if(!f.options.items[v].imagePath){e.next=81;break}return e.next=77,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/choose-image/",f.options.items[v].imagePath);case 77:if(g=e.sent,g){e.next=81;break}return this.throwSaveError(),e.abrupt("return",!1);case 81:v++,e.next=73;break;case 84:if("memory"!==f.type||!f.options||!f.options.items){e.next=98;break}w=!0,v=0;case 87:if(!(v<f.options.items.length)){e.next=98;break}if(!f.options.items[v].imagePath){e.next=95;break}return e.next=91,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/memory/",f.options.items[v].imagePath);case 91:if(w=e.sent,w){e.next=95;break}return this.throwSaveError(),e.abrupt("return",!1);case 95:v++,e.next=87;break;case 98:if("code-image"!==f.type||!f.options||!f.options.images){e.next=112;break}k=!0,v=0;case 101:if(!(v<f.options.images.length)){e.next=112;break}if(!f.options.images[v].imagePath){e.next=109;break}return e.next=105,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/code-image/",f.options.images[v].imagePath);case 105:if(k=e.sent,k){e.next=109;break}return this.throwSaveError(),e.abrupt("return",!1);case 109:v++,e.next=101;break;case 112:if("jigsaw-puzzle"!==f.type||!f.options||!f.options.picture||""===f.options.picture){e.next=119;break}return e.next=115,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/jigsaw-puzzle/",f.options.picture);case 115:if(y=e.sent,y){e.next=119;break}return this.throwSaveError(),e.abrupt("return",!1);case 119:if("new-item"!==f.type||!f.options||!f.options.picture||""===f.options.picture){e.next=127;break}if(-1!==f.options.picture.indexOf("statics")){e.next=127;break}return e.next=123,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/new-item/",f.options.picture);case 123:if(_=e.sent,_){e.next=127;break}return this.throwSaveError(),e.abrupt("return",!1);case 127:if("character"!==f.type||!f.options||!f.options.character||""===f.options.character){e.next=135;break}if(1===f.options.character.length){e.next=135;break}return e.next=131,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/character/",f.options.character);case 131:if(S=e.sent,S){e.next=135;break}return this.throwSaveError(),e.abrupt("return",!1);case 135:if("locate-item-ar"!==f.type||!f.options){e.next=159;break}if(!f.options.picture||""===f.options.picture){e.next=143;break}return e.next=139,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/locate-item-ar/",f.options.picture);case 139:if(x=e.sent,x){e.next=143;break}return this.throwSaveError(),e.abrupt("return",!1);case 143:if(!f.options.is3D){e.next=159;break}if(!f.options.customModel){e.next=153;break}return e.next=147,Ke.saveBinaryFile(t.questId,this.serverUrl+"/upload/quest/"+t.questId+"/step/3dobject/",f.options.customModel+".glb");case 147:if(q=e.sent,q){e.next=151;break}return this.throwSaveError(),e.abrupt("return",!1);case 151:e.next=159;break;case 153:return e.next=155,Ke.saveBinaryFile(t.questId,this.serverUrl+"/statics/3d-models/",f.options.model+".glb");case 155:if(E=e.sent,E){e.next=159;break}return this.throwSaveError(),e.abrupt("return",!1);case 159:if(!this.error.raised){e.next=161;break}return e.abrupt("return",!1);case 161:this.offline.progress+=d;case 162:l++,e.next=39;break;case 165:l=0;case 166:if(!(l<o.length)){e.next=178;break}if(!this.error.raised){e.next=169;break}return e.abrupt("return",!1);case 169:return e.next=171,Ke.writeInFile(t.questId,"chapter_"+o[l].chapterId+".json",JSON.stringify(o[l]),!0);case 171:if(C=e.sent,C){e.next=175;break}return this.throwSaveError(),e.abrupt("return",!1);case 175:l++,e.next=166;break;case 178:return e.abrupt("return",!0);case 181:return e.abrupt("return",!1);case 182:e.next=185;break;case 184:return e.abrupt("return",!1);case 185:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),throwSaveError:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ut(this.$t("label.ErrorOfflineSaving"),"error"),this.error.raised=!0,this.error.nb++;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelSavingTooLong:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===this.offline.progress||1===this.offline.progress||this.error.raised||(ut(this.$t("label.ErrorOfflineSaving"),"error"),this.error.raised=!0,this.error.nb++);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelOfflineLoading:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,Ke.setTimeout(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.removeOfflineData(t.quest.questId);case 2:case"end":return e.stop()}}),e)}))),7e3),ut(this.$t("label.CancelOfflineWarning"),"warning"),this.offline.progress=0,this.$emit("end");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeOfflineData:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.removeDirectory(t);case 2:return i=e.sent,e.next=5,this.removeQuestFromOfflineList(t);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeQuestFromOfflineList:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=13;break}return e.next=6,Ke.readFile("","quests.json");case 6:for(s=e.sent,r=JSON.parse(s),n=-1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=o);return-1!==n&&r.list.splice(n,1),e.next=13,Ke.writeInFile("","quests.json",JSON.stringify(r),!0);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},Dt=$t,Nt=Object(ge["a"])(Dt,It,Ot,!1,null,null,null),Lt=Nt.exports,zt=i("755e"),jt=function(e){return e>=5e4?{level:8,next:8,max:1e5,progress:1}:e>=25e3?{level:8,next:8,max:5e4,progress:(e-25e3)/25e3}:e>=15e3?{level:7,next:8,max:25e3,progress:(e-15e3)/1e4}:e>=1e4?{level:6,next:7,max:15e3,progress:(e-1e4)/5e3}:e>=6e3?{level:5,next:6,max:1e4,progress:(e-6e3)/4e3}:e>=3e3?{level:4,next:5,max:6e3,progress:(e-3e3)/3e3}:e>=1500?{level:3,next:4,max:3e3,progress:(e-1500)/1500}:e>=500?{level:2,next:3,max:1500,progress:(e-500)/1e3}:{level:1,next:2,max:500,progress:e/500}},Ht=i("534a"),Bt=i("4c18"),Ut=i("cf83"),Qt=i("e18e"),Vt={components:{QInfiniteScroll:M["a"],QSpinnerDots:G["a"],geolocation:at,newfriend:pt,shop:kt,story:Et,suggest:Rt,offlineLoader:Lt},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},search:{quests:[],text:""},user:{position:null,proposeAQuest:!0},friends:{list:[],news:{limit:20,skip:0,items:[]},show:!1,selected:{name:"",played:[],built:[]},new:{show:!1}},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://api.graaly.com",showSuccess:!1,showProfile:!1,showSearch:!1,showBottomMenu:!1,menu:{show:!0,suggestQuest:{show:!1}},warnings:{lowBattery:!1,noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,listCreatedQuestsMissing:!1,listPlayedQuestsMissing:!1,listFriendsMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{quests:{played:[],built:{}},ranking:[]},profile:{level:{},organization:{},progress:.1,form:{name:"--",picture:"",email:"",phone:"",zipCode:"",country:"",oldPassword:"",newPassword:"",language:"en"},countries:"fr"===this.$i18n.locale?Bt:Ut,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},story:{step:null,data:null},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},languages:Ke.buildOptionsForSelect(Qt,{valueField:"code",labelField:"name"},this.$t),isMounted:!1,loadingMap:!0,innerWidth:window.innerWidth,questsTab:"built",profileTab:"news",friendsTab:"friendbuilt",invitations:[],QuestService:Je}},computed:{google:zt["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name?(this.initPage(),this.$nextTick((function(){e.isMounted=!0}))):this.backToLogin()},methods:{initPage:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.checkIfProfileIsComplete(),Ke.clearAllRunningProcesses(),window.addEventListener("batterylow",this.checkBattery,!1),e.next=5,this.checkNetwork();case 5:this.startStory(),this.checkInvitations(),this.profile.level=jt(this.$store.state.user.score);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfProfileIsComplete:function(){this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.$router.push("/user/updateprofile")},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},onNewUserPosition:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$set(this.user,"position",t.coords),!1!==this.map.loaded||this.offline.active){e.next=4;break}return e.next=4,this.reloadMap();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),centerOnUserPosition:function(){this.showBottomMenu=!1,null!==this.user.position?(this.CenterMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):ut(this.$t("label.LocationSearching"),"warning")},checkBattery:function(e){e.level<30?this.warnings.lowBattery=!0:this.warnings.lowBattery=!1},startStory:function(){this.$store.state.user.story&&(0===this.$store.state.user.story.step&&(this.story.step=0),10===this.$store.state.user.story.step&&(this.warnings.score=!0,this.story.data={score:this.$store.state.user.score},this.story.step=10))},getClosestQuestUnplayed:function(){for(var e=1e5,t=null,i=0;i<this.questList.length;i++)if(this.questList[i].authorUserId!==this.$store.state.user._id&&"played"!==this.questList[i].status&&"quest"===this.questList[i].type){var r=Math.sqrt(Math.pow(Math.abs(this.user.position.longitude-this.questList[i].location.coordinates[0]),2)+Math.pow(Math.abs(this.user.position.latitude-this.questList[i].location.coordinates[1]),2));r<e&&(e=r,t=this.questList[i])}return t},checkNetwork:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.offline.active,i=Ke.isNetworkAvailable(),this.warnings.noNetwork=!i,this.offline.active=!i,t===this.offline.active){e.next=8;break}return this.questList=[],e.next=8,this.reloadMap();case 8:Ke.setTimeout(this.checkNetwork,5e3);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),CenterMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var i=this.map.infoWindow,r={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=r,this.currentQuestIndex!==t||!i.isOpen){var a=this.$refs.questMarkers[t].$markerObject;a.setAnimation(google.maps.Animation.BOUNCE),Ke.setTimeout((function(){a.setAnimation(null)}),700)}if(this.currentQuestIndex===t?i.isOpen=!i.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",i.isOpen=!0,this.panTo(r)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){store.register({id:e.premiumPrice.androidId,alias:e.premiumPrice.androidId,type:store.CONSUMABLE});var s=this;console.log(e.premiumPrice.androidId),store.when(e.premiumPrice.androidId).updated((function(e){s.currentQuest.displayPrice=e.price})),store.refresh()}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},openDiscoveryQuestSummary:function(){var e=this.map.infoWindow,t={lng:this.user.position.longitude,lat:this.user.position.latitude};this.map.infoWindow.location=t,e.isOpen=!0},reloadMap:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.map.loaded=null,this.warnings.noServerReponse=!1,this.$q.loading.show(),!(this.$store.state.user.story.step>3)){e.next=9;break}return e.next=6,this.getQuests();case 6:this.closeInfoWindows(),e.next=10;break;case 9:this.openDiscoveryQuestSummary();case 10:this.$refs.mapRef?(this.questList.length>0?this.$refs.mapRef.$mapPromise.then((function(e){var i=new google.maps.LatLngBounds,r=!0,a=!1,s=void 0;try{for(var n,o=t.questList[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var l=n.value;i.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(u){a=!0,s=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}i.extend({lng:t.user.position.longitude,lat:t.user.position.latitude}),e.fitBounds(i)})):this.centerOnUserPosition(),this.map.loaded=!0):(this.centerOnUserPosition(),this.map.loaded=!0),this.loadingMap=!1,this.$q.loading.hide();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuests:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.showBottomMenu=!1,this.offline.active){e.next=24;break}if(null!==this.user.position){e.next=5;break}return ut(this.$t("label.LocationSearching"),"warning"),e.abrupt("return");case 5:return this.map.filter=t||"all",this.$q.loading.show(),e.next=9,Je.listNearest({lng:this.user.position.longitude,lat:this.user.position.latitude},this.map.filter);case 9:if(i=e.sent,this.$q.loading.hide(),i&&i.data){e.next=14;break}return ut(this.$t("label.TechnicalIssue"),"error"),e.abrupt("return");case 14:if(i.data.message&&"No quest"===i.data.message||(this.questList=i.data),0!==this.questList.length||"world"===this.map.filter){e.next=17;break}return e.abrupt("return",this.getQuests("world"));case 17:if(!(this.$store.state.user.story.step>=16)){e.next=21;break}return this.$store.state.user.story.step<23||this.$store.state.user.story.step>36?this.story.step=23:this.story.step=this.$store.state.user.story.step+1,e.next=21,Xe.nextStoryStep(this.story.step);case 21:16!==this.$store.state.user.story.step&&23!==this.$store.state.user.story.step||!this.user.proposeAQuest||(r=this.getClosestQuestUnplayed(),this.story.data=null!==r?{questId:r.questId,quest:this.getQuestTitle(r,!1)}:null,this.story.step=16,this.user.proposeAQuest=!1),e.next=49;break;case 24:return e.next=26,Ke.readFile("","quests.json");case 26:if(s=e.sent,!s){e.next=48;break}if(n=JSON.parse(s),!n||!n.list){e.next=46;break}if(o=n.list,!(o.length>0)){e.next=45;break}l=0;case 33:if(!(l<o.length)){e.next=41;break}return e.next=36,Ke.readBinaryFile(o[l].questId,o[l].picture);case 36:u=e.sent,o[l].picture=u||"_default-quest-picture.png";case 38:l++,e.next=33;break;case 41:this.questList=o,this.offline.active=!0,e.next=46;break;case 45:this.warnings.noServerReponse=!0;case 46:e.next=49;break;case 48:this.warnings.noServerReponse=!0;case 49:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkInvitations:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.getInvitations();case 2:t=e.sent,t&&t.data&&(this.invitations=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuestLevelName:function(e){var t=Ke.getById(Ht,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),i=e.lng();this.map.center.lat===t&&this.map.center.lng===i||(this.map.centerTmp={lng:i,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},openBottomMenu:function(){this.showSuccess?this.showSuccess=!1:this.showProfile?this.showProfile=!1:this.showBottomMenu=!0},openSuccessPage:function(){this.$q.loading.show(),this.showSuccess||(this.listCreatedQuests(this.$store.state.user._id),this.listPlayedQuests(this.$store.state.user._id)),this.$q.loading.hide(),this.showSuccess=!this.showSuccess,15===this.$store.state.user.story.step&&(this.story.step=15)},getRanking:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.rankingMissing=!1,this.$q.loading.show(),e.next=4,Xe.getRanking();case 4:t=e.sent,this.$q.loading.hide(),t&&t.data?this.success.ranking=t.data:this.warnings.rankingMissing=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listCreatedQuests:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t||(t=this.$store.state.user._id),this.warnings.listCreatedQuestsMissing=!1,e.next=4,Je.ListCreatedByAUser(t);case 4:if(i=e.sent,this.success.quests.built={rejected:[],tovalidate:[],draft:[],published:[]},i&&i.data)for(r=0;r<i.data.length;r++)s=i.data[r],"published"===s.status?this.success.quests.built["published"].push(s):"rejected"===s.status?this.success.quests.built["rejected"].push(s):"tovalidate"===s.status?this.success.quests.built["tovalidate"].push(s):this.success.quests.built["draft"].push(s);else this.warnings.listCreatedQuestsMissing=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listPlayedQuests:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t||(t=this.$store.state.user._id),this.warnings.listPlayedQuestsMissing=!1,e.next=4,Je.ListPlayedByAUser(t);case 4:i=e.sent,i&&i.data?this.success.quests.played=i.data:this.warnings.listPlayedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openProfilePage:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.networkButton=!1,this.$q.loading.show(),this.showProfile=!this.showProfile,this.getProfileChangeData(this.$store.state.user._id),e.next=6,this.loadFriends();case 6:return this.$q.loading.hide(),e.next=9,this.loadOrganization();case 9:14===this.$store.state.user.story.step&&(this.story.step=14);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadFriends:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.listFriendsMissing=!1,e.next=3,Xe.listFriends();case 3:t=e.sent,t&&t.data?this.friends.list=t.data:this.warnings.listFriendsMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadNews:function(e,t){var i=this;Xe.listNews(this.friends.news.limit,this.friends.news.skip,(function(e,r){i.friends.news.skip+=i.friends.news.limit,e&&t(e),r&&r.data&&r.data.length>0&&(i.friends.news.items=i.friends.news.items.concat(r.data),t())}))},loadOrganization:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$store.state.user.organizationId){e.next=5;break}return e.next=3,Xe.getOrganization();case 3:t=e.sent,t&&(this.profile.organization=t.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),like:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),this.friends.news.items[t].likes.push({userId:this.$store.state.user._id,date:new Date}),e.next=4,Xe.likeNews(this.friends.news.items[t]._id);case 4:this.$q.loading.hide();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),unlike:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.$q.loading.show(),i=0;i<this.friends.news.items[t].likes.length;i++)this.friends.news.items[t].likes[i].userId===this.$store.state.user._id&&this.friends.news.items[t].likes.splice(i,1);return e.next=4,Xe.unlikeNews(this.friends.news.items[t]._id);case 4:this.$q.loading.hide();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},openFriendCard:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),i=!0,e.next=4,Xe.getFriend(t);case 4:if(r=e.sent,!r||!r.data){e.next=17;break}return this.friends.selected.name=r.data.name,e.next=9,Je.ListPlayedByAUser(t);case 9:return s=e.sent,s&&s.data?this.friends.selected.played=s.data:i=!1,e.next=13,Je.ListCreatedByAUser(t);case 13:n=e.sent,s&&s.data?this.friends.selected.built=n.data:i=!1,e.next=18;break;case 17:i=!1;case 18:this.$q.loading.hide(),i?this.friends.show=!0:this.displayNetworkIssueMessage();case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},getProfileChangeData:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.profile.form={name:this.$store.state.user.name,email:this.$store.state.user.email,phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture,zipCode:this.$store.state.user.location.postalCode,country:this.$store.state.user.location.country,language:this.$store.state.user.language},this.$store.state.user.provider&&"graaly"!==this.$store.state.user.provider.name&&(this.profile.userCanChangeEmail=!1,this.profile.userCanChangePassword=!1);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitProfileChanges:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.profile.form.$error){e.next=8;break}return t={name:this.profile.form.name,email:this.profile.form.email,phone:this.profile.form.phone?this.profile.form.phone:"",oldPassword:this.profile.form.oldPassword,newPassword:this.profile.form.newPassword,zipCode:this.profile.form.zipCode,country:this.profile.form.country,language:this.profile.form.language},this.$q.loading.show(),e.next=5,Me.modifyAccount(t);case 5:i=e.sent,this.$q.loading.hide(),i.status>=300&&i.data&&i.data.message?ut(i.data.message,"warning"):ut(this.$t("label.AccountModifiedLong"),"positive");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeLanguage:function(){this.$i18n.locale=this.profile.form.language},uploadImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return r=new FormData,r.append("image",i[0]),this.$q.loading.show(),e.next=8,Me.uploadAccountPicture(r);case 8:s=e.sent,s&&s.data?s.data.file?this.$store.state.user.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error"):this.displayNetworkIssueMessage(),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),disconnect:function(){this.$router.push("/user/logout")},openAdminPage:function(){this.$router.push("/admin")},openHowTo:function(){this.$q.dialog({message:"to complete",position:"top"})},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},backToMap:function(){this.showProfile=!1,this.showSuccess=!1},backToLogin:function(){this.$router.push("/user/login")},setMapIcon:function(e){var t={url:"statics/icons/game/pointer-done-undefined.png",size:{width:64,height:64,f:"px",b:"px"},scaledSize:{width:40,height:40,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:20,y:40}};return e?(e.authorUserId===this.$store.state.user._id?t.url="statics/icons/game/pointer-mine-"+e.category+".png":"played"!==e.status&&("quest"===e.type?t.url="statics/icons/game/pointer-done-"+e.category+".png":t.url="statics/icons/game/pointer-"+e.editorMode+"-"+e.category+".png"),t):{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},swipeMenu:function(e){"right"===e.direction&&this.openSuccessPage(),"left"===e.direction&&this.openProfilePage()},openSearch:function(){this.showSearch=!0,this.showBottomMenu=!1},closeSearch:function(){this.showSearch=!1},findQuests:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(this.search.text.length>3)){e.next=8;break}return this.$q.loading.show(),t=this.user.position,e.next=6,Je.find(this.search.text,t);case 6:i=e.sent,i&&i.data?(this.search.quests=i.data,this.user.position.isSupported&&(this.search.quests=this.search.quests.map((function(e){var i=6378.137,r=e.location.coordinates[1]*Math.PI/180-t.latitude*Math.PI/180,a=e.location.coordinates[0]*Math.PI/180-t.longitude*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2),n=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return e.distance=Math.floor(i*n),e})))):this.displayNetworkIssueMessage();case 8:this.$q.loading.hide(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$q.loading.hide();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),buyCoins:function(){this.shop.show=!0},endStory:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.story.step=null,0!==t&&(this.$store.state.user.story.step=t),17!==t){e.next=5;break}return e.next=5,this.reloadMap();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeShop:function(){this.shop.show=!1},openAddFriendsModal:function(){this.friends.new.show=!0},closeAddFriends:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.friends.new.show=!1,e.next=3,this.loadFriends();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeFriend:function(){var e=n()(a.a.mark((function e(t){var i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.dialog({message:this.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.removeFriend(t);case 2:return e.next=4,i.loadFriends();case 4:return e.next=6,i.updateFriendsActivity();case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateFriendsActivity:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.friends.news.skip=0,this.friends.news.items=[],this.friends.news.items.length=0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeAccount:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.AreYouSureYouWantToRemoveYourAccount"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.removeAccount();case 2:if(i=e.sent,!i){e.next=9;break}return ut(t.$t("label.YourAccountIsRemoved"),"info"),e.next=7,t.disconnect();case 7:e.next=10;break;case 9:ut(t.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openRanking:function(){this.warnings.score=!1,this.getRanking(),this.ranking.show=!0,11===this.$store.state.user.story.step&&(this.story.step=11)},closeRanking:function(){this.ranking.show=!1,13===this.$store.state.user.story.step&&(this.warnings.networkButton=!0,this.story.step=13)},openDiscoveryQuest:function(){3===this.$store.state.user.story.step&&(this.story.step=3)},restartTutorial:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.nextStoryStep(0);case 2:return this.$store.state.user.story.step=0,this.backToMap(),e.next=6,this.initPage();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showMenu:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.menu.show=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideMenu:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,Ke.setTimeout((function(){t.menu.show=!1}),500);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackCallBackFunction:function(){return!1},onUserPositionError:function(e){e&&(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){this.$router.push("/quest/create/welcome")},downloadQuest:function(e){this.offline.show||(this.offline.quest=e,this.offline.show=!0)},questLoadedInCache:function(){ut(this.$t("label.QuestDownloadFinished"),"positive"),this.offline.show=!1},modifyQuest:function(e){this.$router.push("/quest/builder/"+e)}},validations:{profile:{form:{email:{required:ot["required"],email:ot["email"]},name:{required:ot["required"]},country:{required:ot["required"]},zipCode:{required:ot["required"]},phone:{checkPhone:ct}}}}},Yt=Vt,Wt=(i("78d7"),Object(ge["a"])(Yt,Be,Ue,!1,null,null,null)),Gt=Wt.exports,Kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.scrolling,expression:"scrolling"}],staticClass:"scroll"},[i("div",{staticClass:"fit",attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():i("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.Loading"))+"\n      "),i("div",[i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?i("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.QuestNeedNetwork"))+"\n      "),i("div",[i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),e.quest&&e.quest.status?i("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:e.swipeMgmt,expression:"swipeMgmt",modifiers:{horizontal:!0}}],staticClass:"fit",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[i("div",{staticClass:"fit"},[i("div",{staticClass:"text-center bottom-dark-banner"},["published"!==e.quest.status?i("div",{staticClass:"bg-accent centered q-pa-sm"},[e._v("\n            "+e._s(e.$t("label.QuestDraftVersion"))+"\n          ")]):e._e(),i("div",{staticClass:"title",on:{click:function(t){return e.restartStory()}}},[e._v("\n            "+e._s(e.getLanguage()?e.quest.title[e.getLanguage()]:e.$t("label.NoTitle"))+" "),i("q-icon",{attrs:{name:"help"}}),e._v("\n             "),e.getLanguage()!==e.$store.state.user.language?i("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()],1),"undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.name?i("p",[e._v(e._s(e.$t("label.By"))+" "+e._s(e.quest.author.name))]):e._e(),i("p",{staticClass:"medium-icon q-pa-none q-ma-none"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.availablePoints&&e.quest.availablePoints>0,expression:"!(isRunFinished || (isOwner && !isAdmin)) && quest.availablePoints && quest.availablePoints > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v(e._s(e.quest.availablePoints)+" "),i("span",{staticStyle:{"font-size":"0.5em"}},[e._v(e._s(e.$t("label.pointsToWin")))])]),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isOwner&&e.isRunFinished&&e.quest.availablePoints&&e.quest.availablePoints>0,expression:"!isOwner && isRunFinished && quest.availablePoints && quest.availablePoints > 0"}],staticClass:"q-ml-sm q-mr-sm"},[i("span",{staticStyle:{"font-size":"0.5em"}},[e._v(e._s(e.$t("label.YouAlreadyPlayedThisQuest")))])]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isOwner&&!e.isAdmin&&e.quest.availablePoints&&e.quest.availablePoints>0,expression:"isOwner && !isAdmin && quest.availablePoints && quest.availablePoints > 0"}],staticClass:"q-ml-sm q-mr-sm"},[i("span",{staticStyle:{"font-size":"0.5em"}},[e._v(e._s(e.$t("label.YouAreQuestOwnerDesc")))])]),i("span",{directives:[{name:"show",rawName:"v-show",value:!(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.reward&&e.quest.reward>0,expression:"!(isRunFinished || (isOwner && !isAdmin)) && quest.reward && quest.reward > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v(e._s(e.quest.reward)+" "),i("q-icon",{attrs:{name:"fas fa-bolt"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:(e.isRunFinished||e.isOwner&&!e.isAdmin)&&e.quest.reward&&e.quest.reward>0,expression:"(isRunFinished || (isOwner && !isAdmin)) && quest.reward && quest.reward > 0"}],staticClass:"q-ml-sm q-mr-sm"},[e._v("0 "),i("q-icon",{attrs:{name:"fas fa-bolt"}})],1)]),e.quest.rating&&e.quest.rating.rounded?i("p",[i("q-rating",{attrs:{readonly:"",color:"white",max:5,size:"1.2rem"},model:{value:e.quest.rating.rounded,callback:function(t){e.$set(e.quest.rating,"rounded",t)},expression:"quest.rating.rounded"}})],1):e._e(),e._v("  \n          "),i("div",{staticClass:"text-center"},[i("p",["free"===e.shop.premiumQuest.priceCode&&(!this.isUserTooFar||e.quest.allowRemotePlay)&&e.isRunPlayable&&e.getAllLanguages()&&e.getAllLanguages().length>1?i("q-btn-dropdown",{attrs:{color:"primary",label:e.$t("label.SolveThisQuest")}},[i("q-list",{attrs:{link:""}},e._l(e.getAllLanguages(),(function(t){return i("q-item",{directives:[{name:"show",rawName:"v-show",value:t.published,expression:"lang.published"}],key:t.lang,nativeOn:{click:function(i){return e.playQuest(e.quest.questId,t.lang)}}},[i("q-item-label",[i("img",{staticStyle:{"vertical-align":"middle","margin-left":"8px"},attrs:{src:"statics/icons/game/flag-"+t.lang+".png"}}),e._v("\n                      "+e._s(e.$t("language."+t.lang))+"\n                    ")])],1)})),1)],1):e._e(),"free"===e.shop.premiumQuest.priceCode&&(!this.isUserTooFar||e.quest.allowRemotePlay)&&e.isRunPlayable&&e.getAllLanguages()&&1===e.getAllLanguages().length?i("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[e.continueQuest?i("span",[e._v(e._s(e.$t("label.ContinueTheQuest")))]):e._e(),!e.continueQuest&&e.isRunFinished?i("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))]):e._e(),e.continueQuest||e.isRunFinished?e._e():i("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]):e._e(),e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():i("q-btn",{attrs:{color:"primary"},on:{click:function(t){return e.buyCoins()}}},[e._v(e._s(e.$t("label.BuyCoinsToPlay")))]),this.isUserTooFar&&!e.quest.allowRemotePlay?i("q-btn",{attrs:{disabled:"",color:"primary"}},[e._v(e._s(e.$t("label.GetCloserToStartingPoint"))+" ("+e._s(e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m")+")")]):e._e(),"free"===e.shop.premiumQuest.priceCode||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():i("q-btn",{attrs:{disabled:!e.shop.premiumQuest.buyable,color:"primary"},on:{click:function(t){return e.buyQuest()}}},[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue)+")")]),"notplayableonweb"===e.shop.premiumQuest.priceCode?i("q-btn",{attrs:{disabled:"",color:"primary"}},[e._v(e._s(e.$t("label.QuestPlayableOnMobile")))]):e._e()],1)]),i("div",{staticClass:"full-width text-center"},[i("q-btn",{attrs:{flat:"",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.backToTheMap()}}}),e.isOwner||e.isAdmin?i("q-btn",{attrs:{flat:"",label:e.$t("label.Modify")},on:{click:function(t){return e.modifyQuest()}}}):e._e()],1)]),e.offline.show?i("div",{staticClass:"fixed-bottom over-map fit"},[i("offlineLoader",{attrs:{quest:this.quest,design:"prepare"},on:{end:function(t){e.offline.show=!1}}})],1):e._e()])]):e._e()]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}],staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.ranking.show=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),e._v("\n      "+e._s(e.$t("label.RankingIntro"))+"\n      "),i("q-list",e._l(e.ranking.items,(function(t){return i("q-item",{key:t.position},[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}})]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),i("q-item-section",{attrs:{side:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"/statics/icons/game/profile-small.png"}})])],1),t.isFriend?e._e():i("q-item-section",{attrs:{side:""},nativeOn:{click:function(i){return e.addFriend(t.id)}}},[i("q-icon",{attrs:{name:"person_add",color:"primary"}})],1),t.isFriend?i("q-item-section",{attrs:{side:""}}):e._e()],1)})),1),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary",label:e.$t("label.CloseQuestRanking")},on:{click:function(t){e.ranking.show=!1}}})],1)],1)]),i("q-dialog",{model:{value:e.shop.show,callback:function(t){e.$set(e.shop,"show",t)},expression:"shop.show"}},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Shop")))]),i("shop")],1),e.geolocationIsSupported?e._e():i("div",{staticClass:"fixed-bottom over-map"},[i("div",{staticClass:"centered bg-warning q-pa-sm"},[i("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1)]),e.quest&&null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map fit"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1)},Jt=[],Xt=(i("55dd"),{getById:function(e){return Ae().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){return Ae().get("run/quest/"+e).catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return Ae().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return Ae().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e){return Ae().get("run/"+e+"/step/next").catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t){return Ae().get("run/"+e+"/marker/"+t+"/next").catch((function(e){return console.log(e.request)}))},listWonObjects:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("quest/"+t+"/runs/"+i+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),getHint:function(){var e=n()(a.a.mark((function e(t,i,r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("run/"+t+"/step/"+i+"/version/"+r+"/hint");case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),init:function(e,t,i,r){return Ae().post("run/quest/"+e+"/version/"+t+"/init/"+i+"/remote/"+r).catch((function(e){return console.log(e.request)}))},endRun:function(e,t,i,r,a){return Ae().put("run/"+e+"/quest/"+i+"/version/"+r+"/lang/"+a+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t){return Ae().put("run/"+e+"/passstep/"+t).catch((function(e){return console.log(e.request)}))},setHistoryOneStepBack:function(e){return Ae().get("run/"+e+"/historyonestepback").catch((function(e){return console.log(e.request)}))}}),Zt={components:{shop:kt,story:Et,offlineLoader:Lt},data:function(){return{quest:{},ranking:{show:!1,items:[]},shop:{show:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1}},story:{step:null,data:null},offline:{active:!1,show:!1},warning:{questNotLoaded:!1},serverUrl:"https://api.graaly.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isOwner:!1,isAdmin:!1,geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,distanceFromStart:0,scrolled:!1}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ke.clearAllRunningProcesses(),e.next=3,this.initQuest();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*Ke.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),Ke.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0,e.isRunStarted||e.isRunFinished||Ke.setTimeout(e.startStory,4e3)}),(function(){e.geolocationIsSupported=!1,Ke.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3),e.isRunStarted||e.isRunFinished||Ke.setTimeout(e.startStory,4e3)}),{timeout:1e4,maximumAge:1e4}):(this.geolocationIsSupported=!1,Ke.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3),this.isRunStarted||this.isRunFinished||Ke.setTimeout(this.startStory,4e3))},initQuest:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.id);case 2:if(this.checkUserIsCloseFromStartingPoint(),this.$store.state.user.isAdmin&&(this.isAdmin=!0),this.quest.editorsUserId)for(t=0;t<this.quest.editorsUserId.length;t++)this.quest.editorsUserId[t]===this.$store.state.user._id&&(this.isOwner=!0);else this.$store.state.user._id===this.quest.authorUserId&&(this.isOwner=!0);if(!this.offline.active||!this.isOwner&&!this.isAdmin){e.next=8;break}return e.next=8,this.getQuest(this.quest.questId,!0);case 8:return e.next=10,this.getRun();case 10:return e.next=12,this.checkUserCanPlay();case 12:return e.next=14,this.initPay();case 14:return e.next=16,this.getRanking();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startStory:function(){null===this.story.step&&(this.story.step=1,this.story.data={level2:1===this.quest.level?"grey":"red",level3:3===this.quest.level?"red":"grey",startingPlace:this.quest.location?this.quest.location.address:null,duration:this.quest.duration,isFar:this.isUserTooFar&&!this.quest.allowRemotePlay,isRunFinished:this.isRunFinished,isOwner:"undefined"!==typeof this.quest.author&&this.quest.author._id===this.$store.state.user._id,description:this.getLanguage()?this.quest.description[this.getLanguage()]:"",score:this.isRunFinished||this.isOwner&&!this.isAdmin?0:this.quest.availablePoints})},restartStory:function(){this.story.step=null,this.startStory()},getQuest:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o,l,u=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.isCached(t);case 2:if(r=e.sent,r&&!i){e.next=23;break}return this.offline.active=!1,e.next=7,Je.getLastById(t);case 7:if(s=e.sent,!s||!s.data||200!==s.status){e.next=19;break}if(this.quest=s.data,"undefined"===typeof this.quest.authorUserId){e.next=17;break}return e.next=13,Me.getAccount(this.quest.authorUserId);case 13:s=e.sent,s&&s.data&&this.$set(this.quest,"author",s.data),this.quest.description=Ke.replaceBreakByBR(this.quest.description),window.cordova&&(this.quest.premiumPrice&&this.quest.premiumPrice.androidId&&"free"!==this.quest.premiumPrice.androidId||(this.offline.show=!0));case 17:e.next=21;break;case 19:throw this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue"),ok:this.$t("label.BackToMap")}).onOk((function(){u.backToTheMap()})),new Error("Could not load quest with questId = '"+t+"'");case 21:e.next=43;break;case 23:return this.offline.active=!0,e.next=26,Ke.readFile(t,"quest_"+t+".json");case 26:if(n=e.sent,n){e.next=38;break}if(!i){e.next=32;break}this.warning.questNotLoaded=!0,e.next=36;break;case 32:return e.next=34,this.getQuest(t,!0);case 34:return o=e.sent,e.abrupt("return",o);case 36:e.next=43;break;case 38:return this.quest=JSON.parse(n),e.next=41,Ke.readBinaryFile(t,this.quest.picture);case 41:l=e.sent,this.quest.picture=l||"_default-quest-picture.png";case 43:return e.abrupt("return",!0);case 44:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),getRun:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xt.listForAQuest(this.quest.questId);case 2:if(t=e.sent,i=0,!(t&&t.data&&t.data.length>0)){e.next=9;break}for(r=0;r<t.data.length;r++)"finished"===t.data[r].status&&(this.isRunFinished=!0),"in-progress"===t.data[r].status&&t.data[r].currentStep&&(this.isRunStarted=!0,i=t.data[r]._id);this.isRunStarted&&(s=this,this.$q.dialog({title:this.$t("label.ContinueThisStep"),message:this.$t("label.YouAlreadyStartThisQuest"),ok:this.$t("label.Restart"),cancel:this.$t("label.Continue")}).onOk((function(){s.cancelRun(i)})).onCancel((function(){o.continueQuest=!0}))),e.next=13;break;case 9:return e.next=11,Je.isCached(this.quest.questId);case 11:n=e.sent,n&&(this.continueQuest=!0);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelRun:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xt.endRun(t,null,this.quest.questId,this.quest.version,this.quest.mainLanguage);case 2:return e.next=4,Ke.writeInFile(this.quest.questId,"run_"+this.quest.questId+".json",JSON.stringify({}),!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkUserCanPlay:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isRunStarted&&!this.isRunFinished){e.next=2;break}return e.abrupt("return",!0);case 2:if(!(this.quest.price>this.$store.state.user.coins)||this.isAdmin||this.isOwner){e.next=5;break}return this.isRunPlayable=!1,e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initPay:function(){var e=n()(a.a.mark((function e(){var t,i,r=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.premiumPrice&&this.quest.premiumPrice.androidId){e.next=2;break}return e.abrupt("return","free");case 2:if(this.quest.premiumPrice.active){e.next=4;break}return e.abrupt("return","free");case 4:if(!this.isAdmin&&!this.isOwner){e.next=6;break}return e.abrupt("return","free");case 6:if(!this.isRunStarted&&!this.isRunFinished){e.next=8;break}return e.abrupt("return","free");case 8:if(window.cordova){e.next=12;break}return ut(this.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),this.shop.premiumQuest.priceCode="notplayableonweb",e.abrupt("return");case 12:if(this.quest.premiumPrice&&this.quest.premiumPrice.androidId){e.next=15;break}return ut(this.$t("label.ErrorStandardMessage"),"error"),e.abrupt("return");case 15:return e.next=17,Je.hasPayed(this.quest.questId);case 17:if(t=e.sent,!(t&&t.data&&t.data.status&&"paied"===t.data.status)){e.next=22;break}return this.shop.premiumQuest.priceCode="free",window.cordova&&(this.offline.show=!0),e.abrupt("return","free");case 22:this.shop.premiumQuest.priceCode=this.quest.premiumPrice.androidId,i=this,store.register({id:this.quest.premiumPrice.androidId,alias:this.quest.premiumPrice.androidId,type:store.CONSUMABLE}),store.error((function(e){ut(e.message+"(code: "+e.code+")","error")})),store.when(this.quest.premiumPrice.androidId).updated((function(e){i.shop.premiumQuest.priceValue=e.price,e.canPurchase&&(i.shop.premiumQuest.buyable=!0)})),store.when(this.quest.premiumPrice.androidId).approved((function(e){e.verify()})),store.when(this.quest.premiumPrice.androidId).verified(function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.savePurchase(t);case 2:i=e.sent,i?t.finish():ut(r.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),store.refresh();case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),savePurchase:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.purchasePremium(this.quest.questId,t);case 2:if(i=e.sent,!(i&&i.data&&i.data.status&&"ok"===i.data.status)){e.next=7;break}return window.cordova&&(this.offline.show=!0),this.shop.premiumQuest.priceCode="free",e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),buyQuest:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order(this.quest.premiumPrice.androidId);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addFriend:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xe.addFriend(t);case 3:if(i=e.sent,this.$q.loading.hide(),i)for(r=0;r<this.ranking.items.length;r++)this.ranking.items[r].id===t&&(this.ranking.items[r].isFriend=!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getRanking:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===this.quest.questId){e.next=5;break}return e.next=3,Xt.listPlayersForThisQuest(this.quest.questId);case 3:if(t=e.sent,t&&t.data&&t.data.length>0){for(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),i=0;i<this.ranking.items.length;i++)0===i||this.ranking.items[i].score!==this.ranking.items[i-1].score?this.ranking.items[i].position=i+1:this.ranking.items[i].position=this.ranking.items[i-1].position;Ke.setTimeout(this.showRanking,3e3)}case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showRanking:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.ranking.show=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));if(t&&t.length>0){for(var i="",r=0;r<t.length;r++)t[r].lang===this.$store.state.user.language&&(i=this.$store.state.user.language);""===i&&t.length>0&&(i=t[0].lang)}else e.languages.length>0&&(i=e.languages[0].lang);return i},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},swipeMgmt:function(e){if("right"===e.direction&&this.backToTheMap(),"left"===e.direction){var t=this.getAllLanguages(this.quest),i=t[0].lang;this.playQuest(this.quest.questId,i)}},playQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar)},scrolling:function(e){this.scrolled=e>40},backToTheMap:function(){this.$router.push("/map")},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},buyCoins:function(){this.shop.show=!0},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){return this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png"}}},ei=Zt,ti=Object(ge["a"])(ei,Kt,Jt,!1,null,null,null),ii=ti.exports,ri=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.warnings.stepDataMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n  ")],1):e._e(),e.warnings.isNetworkLow?i("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?i("div",{staticClass:"centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?i("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():i("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),i("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),i("stepPlay",{attrs:{step:e.step,runId:e.run._id,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?e.info.quest.customization.color:"primary",answer:e.offline.answer},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage}}),i("transition",{attrs:{name:"slideInBottom"}},[i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"inventory panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items.length>0&&!e.warnings.inventoryMissing?i("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?i("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),i("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,r){return i("div",{key:r,on:{click:function(i){return e.selectItem(t)}}},[i("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),i("p",[e._v(e._s(t.title))])])})),0)])])]),i("q-dialog",{model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[i("div",{staticClass:"bg-white centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}),i("div",[e._v(e._s(e.$t("label.YouCanNotUseAnItemInThisStep")))]),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[e._v(e._s(e.$t("label.Close")))])],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}]},[e.warnings.questDataMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.getQuest(e.questId)}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():i("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[i("div",{staticClass:"text-center bottom-dark-banner q-pb-xl"},[i("p",{staticClass:"title"},[e._v(e._s(e.info.quest&&e.info.quest.title?e.info.quest.title[e.lang]:e.$t("label.NoTitle")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.info&&!e.offline.active,expression:"info && !offline.active"}],staticClass:"q-pa-md score-text"},[e._v(e._s(e.$t("label.CurrentScore"))+": "+e._s(e.info.score)+" ")]),i("p",[i("q-btn",{style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[e._v(e._s(e.$t("label.LeaveQuest")))])],1),i("p",[e.offline.active?e._e():i("q-btn",{style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[e._v(e._s(e.$t("label.Feedback")))])],1),i("p",{staticClass:"q-pb-xl"},[i("q-btn",{attrs:{color:"secondary"},on:{click:e.openInfo}},[e._v(e._s(e.$t("label.BackToQuest")))])],1),i("p",{staticClass:"q-pb-lg"})])])])]),e.hint.isOpened?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:"hint",data:{hint:e.hint.label[e.lang]}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),i("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[i("div",{staticClass:"bg-white q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),i("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[i("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),i("div",{staticClass:"q-pa-md q-gutter-sm"},[i("q-btn",{attrs:{color:"secondary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),i("q-btn",{on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Close")))])],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu fixed-bottom"},[i("div",{staticClass:"row white-buttons"},[i("div",{staticClass:"col centered q-pb-md"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():i("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}}),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?i("q-btn",{staticClass:"bg-white",attrs:{round:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[i("q-avatar",{attrs:{size:"60px"}},[i("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.inventory.show,expression:"inventory.show"}],class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])])],1)},ai=[],si=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fit",class:{"bg-black":"locate-marker"==e.step.type||"sensor"===e.step.id},attrs:{id:"play-view"}},[i("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden"},[e.isNetworkLow?i("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type?i("div",{staticClass:"info"},[i("div",{class:{grow:!e.step.videoStream},attrs:{id:"info-clickable"},on:{click:e.hideControlsTemporaly}},[e.step.options&&e.step.options.html?e._e():i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?i("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),i("p")]),e.step.videoStream?i("div",{staticClass:"video"},[i("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[i("source",{attrs:{src:-1!==e.step.videoStream.indexOf("blob:")?e.step.videoStream:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream,type:"video/mp4"}})])]):e._e()]):e._e(),"new-item"==e.step.type?i("div",{staticClass:"new-item"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{staticClass:"item"},[i("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture}}),i("p",[e._v(e._s(e.step.options.title))])])]):e._e(),"end-chapter"==e.step.type?i("div",{staticClass:"end-of-chapter"},[e._v("\n      "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n    ")]):e._e(),"character"==e.step.type?i("div",{staticClass:"character"},[i("div",{staticClass:"fixed-bottom story"},[e._m(0),i("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[i("p",{staticClass:"carrier-return"},[e._v(e._s(e.getTranslatedText()))])]),e._m(1),i("div",{staticClass:"character"},[1===e.step.options.character.length?i("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.step.options.character+"_attitude1.png"}}):e._e(),e.step.options.character.length>1?i("img",{staticStyle:{"max-width":"100%","max-height":"200px","vertical-align":"bottom"},attrs:{src:-1!==e.step.options.character.indexOf("blob:")?e.step.options.character:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.step.options.character}}):e._e()]),i("div",{staticClass:"full-width bg-accent",staticStyle:{height:"70px"}})])]):e._e(),"choose"==e.step.type?i("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[i("div",{on:{click:e.hideControlsTemporaly}},[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),"text"===e.answerType?i("div",{staticClass:"answers-text"},e._l(e.step.options.items,(function(t,r){return i("q-btn",{key:r,staticClass:"full-width shadowed",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+r},on:{click:function(t){return e.checkAnswer(r)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():i("span",[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?i("span",[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?i("div",{staticClass:"answers-images",staticStyle:{"padding-bottom":"100px"}},[i("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,r){return i("div",{key:r,class:t.class,attrs:{"test-id":"answer-image-"+r},on:{click:function(t){return e.checkAnswer(r)}}},[i("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?i("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e()]):e._e(),"code-keypad"==e.step.type?i("div",{staticClass:"code"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{staticClass:"typed-code"},[i("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)])]),i("div",{staticClass:"keypad"},[i("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,r){return i("div",{key:r},e._l(t,(function(t,r){return i("q-btn",{key:r,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(i){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg",staticStyle:{"padding-bottom":"100px"}},[i("div",[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[e._v(e._s(e.$t("label.Clear")))]),i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)])]):e._e(),"code-color"==e.step.type?i("div",{staticClass:"code code-color"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{staticClass:"color-bubbles"},e._l(e.playerCode,(function(t,r){return i("div",{key:r,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[r],attrs:{"test-id":"color-code-"+r},on:{click:function(t){return e.changeColorForCode(r)}}},[e._v(" ")])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg"},[i("div",[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)])]):e._e(),"code-image"==e.step.type?i("div",{staticClass:"code code-image"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("table",[i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,staticClass:"text-center"},[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+r},on:{click:function(t){return e.previousCodeAnswer(r)}}})],1)})),0),i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r},[i("img",{attrs:{id:"image-code-"+r,src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(r)}}})])})),0),i("tr",e._l(e.playerCode,(function(t,r){return i("td",{key:r,staticClass:"text-center"},[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+r},on:{click:function(t){return e.nextCodeAnswer(r)}}})],1)})),0)]),i("div",{staticClass:"centered text-grey q-py-md"},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg"},[i("div",[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[e._v(e._s(e.$t("label.Confirm")))])],1)])]):e._e(),"image-recognition"==e.step.type?i("div",{staticClass:"image-recognition"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{staticClass:"photo"},[i("img",{directives:[{name:"show",rawName:"v-show",value:!e.cameraStreamEnabled&&!e.photoTaken,expression:"!cameraStreamEnabled && !photoTaken"}],ref:"original-photo",staticClass:"shadow-8",attrs:{src:e.step.answers&&-1!==e.step.answers.indexOf("blob:")?e.step.answers:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/image-recognition/"+e.step.answers}}),i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-recognition"}),i("canvas",{ref:"photo-buffer",staticClass:"hidden"}),i("img",{directives:[{name:"show",rawName:"v-show",value:e.photoTaken,expression:"photoTaken"}],ref:"player-photo",attrs:{alt:e.$t("label.TheScreenCaptureWillAppearInThisBox")}})]),i("div",{staticClass:"actions q-mt-lg"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!e.cameraStreamEnabled&&!e.photoTaken,expression:"!cameraStreamEnabled && !photoTaken"}],staticClass:"full-width",style:"primary"===e.color?"":"background-color: "+e.color,attrs:{icon:"photo camera",color:"primary"===e.color?"primary":""},on:{click:function(t){return e.toggleCameraStream()}}},[e._v(e._s(e.$t("label.TakeThePicture")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}]},[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"clear"},on:{click:function(t){return e.toggleCameraStream()}}},[e._v(e._s(e.$t("label.Cancel")))]),i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",icon:"done"},on:{click:function(t){return e.checkAnswer()}}},[e._v(e._s(e.$t("label.Check")))])],1)],1)]):e._e(),"geolocation"==e.step.type?i("div",{staticClass:"geolocation"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))]),e.step.showDistanceToTarget&&e.geolocation.active?i("p",{staticClass:"text"},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e()])]):e._e(),"write-text"==e.step.type?i("div",{staticClass:"write-text"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{staticClass:"answer-text"},[i("input",{class:{right:!0===e.playerResult,wrong:!1===e.playerResult},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),i("q-btn",{staticClass:"full-width",style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":"",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer"},on:{click:function(t){return e.checkAnswer()}}},[e._v(e._s(e.$t("label.ConfirmTheAnswer")))])],1)]):e._e(),"jigsaw-puzzle"===e.step.type?i("div",{staticClass:"puzzle"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return i("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(i){return e.movePieceWithClick(t.pos)}}},[i("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),i("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),"drag"===e.puzzle.mode?i("div",{staticClass:"centered text-grey q-pt-xl"},[e._v("\n        "+e._s(e.$t("label.PuzzleHelpText"))+"\n      ")]):e._e(),"click"===e.puzzle.mode?i("div",{staticClass:"centered text-grey q-pt-xl"},[e._v("\n        "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n      ")]):e._e(),"drag"===e.puzzle.mode?i("div",{staticClass:"centered text-grey q-pt-sm"},[i("a",{on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()]):e._e(),"memory"===e.step.type?i("div",{staticClass:"puzzle"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("ul",{staticClass:"memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,r){return i("li",{key:r,staticClass:"card",class:{open:t.isClicked,show:t.isClicked,disabled:t.isFound,match:t.isFound},on:{click:function(t){return e.selectMemoryCard(r)}}},[i("img",{attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}})])})),0)]):e._e(),"use-item"==e.step.type?i("div",{staticClass:"use-item"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.useItem(t)}}},[i("img",{staticStyle:{position:"relative","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?i("p",{staticClass:"inventory-btn"},[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{round:"",color:"primary"===e.color?"primary":""}},[e.itemUsed?i("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e()]),e._v("\n      "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n    ")],1):e._e(),"find-item"==e.step.type?i("div",{staticClass:"find-item"},[i("div",[i("p",{staticClass:"text"},[e._v(e._s(e.getTranslatedText()))])]),i("div",{ref:"findItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.findItem(t)}}},[i("img",{staticStyle:{position:"relative","z-index":"500",width:"16vw",height:"16vw",display:"none"},attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"locate-item-ar"==e.step.type,expression:"step.type == 'locate-item-ar'"}],staticClass:"locate-item-ar"},[i("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult&&e.geolocation.active,expression:"cameraStreamEnabled && playerResult === null && geolocation.active"}],ref:"camera-stream-for-locate-item-ar"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&this.geolocation.active,expression:"playerResult === null && this.geolocation.active"}]},[i("div",{staticClass:"text"},[i("p",[e._v(e._s(e.getTranslatedText()))]),e.step.showDistanceToTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.distance)})))]):e._e(),!e.geolocation.canSeeTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]):e._e(),e.geolocation.canTouchTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&e.geolocation.active?i("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult && step.options && step.options.is3D)"}],staticClass:"target-view"},[i("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),i("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})],1),"locate-marker"==e.step.type||"sensor"==e.step.id?i("div",{staticClass:"locate-marker"},[i("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[i("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text"},[i("p",[e._v(e._s(e.getTranslatedText()))])])]),e.locateMarker.compliant&&null===e.playerResult&&!e.isHybrid?i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{round:"",size:"lg",color:"primary"===e.color?"primary":""},on:{click:function(t){e.locateMarker.showHelp=!0}}},[i("span",[e._v("?")])]):e._e(),e.locateMarker.compliant&&null===e.playerResult&&e.isHybrid?i("div",{staticClass:"text-white centered q-mt-md"},[e._v("\n        "+e._s(e.$t("label.ScanTheMarkersLikeThat"))+"\n        "),e._m(2),e._v("\n        "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n        "),i("div",[i("q-btn",{style:"primary"===e.color?"":"background-color: "+e.color,attrs:{color:"primary"===e.color?"primary":""},on:{click:function(t){return e.startScanQRCode()}}},[e._v(e._s(e.$t("label.LaunchTheScanner")))])],1)]):e._e(),e.locateMarker.compliant?e._e():i("div",[e._v("\n        "+e._s(e.$t("label.YourPhoneIsNotCompliantWithThisStepType"))+"\n      ")]),e.playerResult&&e.locateMarker.compliant&&"scan"==e.step.options.mode?i("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.locateMarker.compliant,expression:"locateMarker.compliant"}],staticClass:"marker-view"},[i("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"marker-canvas"},on:{click:e.onTargetCanvasClick}})]),e.locateMarker.showHelp?i("div",{staticClass:"fixed-bottom over-map",staticStyle:{height:"100%"}},[i("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&"scan"===e.step.options.mode?e.$t("label.FindMarkerHelp"):e.$t("label.TouchObjectOnMarkerHelp")}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type||"locate-item-ar"==e.step.type)&&e.step.showDirectionToTarget&&null===e.playerResult&&e.geolocation.active,expression:"(step.type == 'geolocation' || step.type == 'locate-item-ar') && step.showDirectionToTarget && playerResult === null && geolocation.active"}],staticClass:"direction-helper",style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem !important"}},[i("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),"geolocation"==e.step.type||"locate-item-ar"==e.step.type?i("geolocation",{ref:"geolocation-component",attrs:{withNavBar:!0},on:{success:function(t){return e.onNewUserPosition(t)}}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.score>1,expression:"playerResult === true && score > 1"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.score)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&1===e.score,expression:"playerResult === true && score === 1"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[i("q-icon",{attrs:{color:"white",name:"thumb_up"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),i("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[i("div",{staticClass:"bg-white centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),i("q-dialog",{model:{value:e.geolocation.showCalibration,callback:function(t){e.$set(e.geolocation,"showCalibration",t)},expression:"geolocation.showCalibration"}},[i("div",{staticClass:"bg-black centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),i("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.WaveThePhoneForGPSPrecision")))])])]),i("q-dialog",{model:{value:e.geolocation.takeMobileVertically,callback:function(t){e.$set(e.geolocation,"takeMobileVertically",t)},expression:"geolocation.takeMobileVertically"}},[i("div",{staticClass:"bg-black centered q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),i("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])],1)},ni=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-top"},[i("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bubble-bottom"},[i("img",{attrs:{src:"statics/icons/story/sticker-bottom.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],oi=(i("6c7b"),i("14b9"),i("f5766"),i("bc78")),li=16,ui=16;function ci(e,t){if(e.width!==t.width||e.height!==t.height){var i=e.width*e.height,r=t.width*t.height;if(i<r){var a=[e,t,i,r];t=a[0],e=a[1],r=a[2],i=a[3]}var s=Math.sqrt(r/i),n=Math.round(e.width*s),o=Math.round(e.height*s);e=di(e,n,o);var l=0,u=Math.min(e.width,t.width),c=e.width>t.width;e.width!==t.width&&(l=Math.round(Math.abs(e.width-t.width)/2));var d=0,f=Math.min(e.height,t.height),h=e.height>t.height;e.height!==t.height&&(d=Math.round(Math.abs(e.height-t.height)/2));var p=e;e=document.createElement("canvas"),e.width=u,e.height=f,e.getContext("2d").drawImage(p,c?l:0,h?d:0,u,f,0,0,u,f),p=t,t=document.createElement("canvas"),t.width=u,t.height=f,t.getContext("2d").drawImage(p,c?0:l,h?0:d,u,f,0,0,u,f)}var m=li,b=ui,g=e.width/e.height;return e.width>e.height?m=Math.round(m*g):e.width<e.height&&(b=Math.round(b/g)),e=di(e,m,b),t=di(t,m,b),fi(e,t)}function di(e,t,i){var r=document.createElement("canvas");return r.width=t,r.height=i,r.getContext("2d").drawImage(e,0,0,t,i),r}function fi(e,t){var i=hi(e),r=hi(t),a=100*pi.hammingDistance(i,r,e.width);return a.toFixed(3)}function hi(e){for(var t=pi.pixelsMap(e),i=pi.desaturate(t),r=pi.average(i),a=pi.thresholdMap(i,r),s="",n=0;n<a.length;n++)s+=a[n]?"-":"X",s+=(n+1)%e.width===0?"\n":"";return console.log(s),a}var pi={desaturate:function(e){for(var t=new Array(e.length/4),i=0;i<t.length;i++){var r=4*i;t[i]=Math.round((e[r]+e[r+1]+e[r+2])/3)}return t},average:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t/e.length},thresholdMap:function(e,t){return e.map((function(e){return e>=t}))},pixelsMap:function(e){return e.getContext("2d").getImageData(0,0,e.width,e.height).data},hammingDistance:function(e,t,i){for(var r=0,a="",s=0;s<e.length;s++)"undefined"!==typeof t[s]&&e[s]===t[s]?(r++,a+="."):a+="*",a+=(s+1)%i===0?"\n":"";return console.log(a),e.length>0?r/e.length:0}},mi={hash:hi,compare:ci,compareHash:fi,utils:pi},bi=i("22ae"),gi=i("3ba6"),vi=i("57e4"),wi=i("22b5"),ki=i("bd2e"),yi=i.n(ki),_i=i("8c64"),Si=i("0321"),xi={props:["step","runId","reload","itemUsed","lang","answer","color"],components:{geolocation:at,story:Et},watch:{reload:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){},beforeDestroy:function(){this.clearAllCameraStreams(),this.stopLatestAnimation(),this.geolocation.target=null,this.locateMarker.scene=null,this.locateMarker.renderer=null,this.locateMarker.camera=null,this.locateMarker.mixers=[],this.locateMarker.clock=null,this.locateMarker.arToolkitContext=null,this.locateMarker.arSmoothedControls=null,this.locateMarker.markerRoots={},this.locateMarker.markerControls={},null!==this.geolocation.absoluteOrientationSensor&&this.geolocation.absoluteOrientationSensor.stop(),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),Ke.clearAllRunningProcesses(),wi["a"].removeAll()},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,serverUrl:"https://api.graaly.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,isNetworkLow:!1,answerType:"text",playerCode:[],keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],photoComparisonThreshold:70,photoTaken:!1,geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},absoluteOrientationSensor:null,initialBearingAngle:null,target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:oi["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:4},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationCounter:1},minDistanceForGPS:20,deviceHasGyroscope:null,locateMarker:{renderer:null,scene:null,camera:null,mixers:[],clock:null,arToolkitContext:null,arSmoothedControls:null,markerRoots:{},markerControls:{},playerAnswer:"",layer:null,flash:!1,showHelp:!1,compliant:!0},writetext:{playerAnswer:""},puzzle:{pieces:[],picture:"statics/icons/game/medal.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},itemAdded:null,readMoreNotif:null,story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null}},getBackgroundImage:function(){return this.step.backgroundImage&&"_"===this.step.backgroundImage[0]?"statics/images/quest/"+this.step.backgroundImage:this.step.backgroundImage&&-1!==this.step.backgroundImage.indexOf("blob:")?this.step.backgroundImage:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/background/"+this.step.backgroundImage},initData:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:wi["a"].removeAll(),this.$nextTick(n()(a.a.mark((function e(){var i,r,s,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=document.getElementById("play-view"),t.step.backgroundImage?"find-item"===t.step.type||"use-item"===t.step.type?(i.style.background="none",i.style.backgroundColor="#000",t.showControls()):"jigsaw-puzzle"===t.step.type?(i.style.background="none",i.style.backgroundColor="#fff",t.showControls()):(r=t.getBackgroundImage(),i.style.background='#fff url("'+r+'") center/cover no-repeat',t.step.options&&t.step.options.hasOwnProperty("initDuration")?Ke.setTimeout(t.showControls,1e3*parseInt(t.step.options.initDuration,10)):Ke.setTimeout(t.showControls,1e3)):(t.step.type&&"locate-item-ar"!==t.step.type&&"locate-marker"!==t.step.type&&"sensor"!==t.step.id&&(i.style.background="none",i.style.backgroundColor="#fff"),t.showControls()),t.resetDrawDirectionInterval(),"end-chapter"===t.step.type&&t.checkAnswer(),"choose"===t.step.type&&(t.answerType=Array.isArray(t.step.options.items)&&t.step.options.items[0].hasOwnProperty("imagePath")&&null!==t.step.options.items[0].imagePath?"image":"text"),"code-keypad"===t.step.type&&t.resetKeypadCode(),"code-color"===t.step.type&&t.resetColorCode(),"code-image"===t.step.type&&t.resetImageCode(),"jigsaw-puzzle"!==t.step.type){e.next=12;break}return e.next=11,t.initPuzzle();case 11:t.$emit("pass");case 12:if("memory"===t.step.type&&(t.initMemory(),t.$emit("pass")),"geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type){e.next=22;break}t.$emit("pass"),t.askUserToCalibrateGPS();try{"AbsoluteOrientationSensor"in window?(s=new AbsoluteOrientationSensor({frequency:30}),s.onerror=function(e){return console.error(e.error.name,e.error.message)},s.onreading=t.onAbsoluteOrientationSensorReading,s.start(),t.geolocation.absoluteOrientationSensor=s):(t.geolocation.absoluteOrientationSensor={stop:t.stopAlternateAbsoluteOrientationSensor},window.addEventListener("deviceorientation",t.eventAlternateAbsoluteOrientationSensor,!1))}catch(S){console.error(S)}return t.$store.dispatch("setDrawDirectionInterval",window.setInterval(t.drawDirectionArrow,100)),window.addEventListener("devicemotion",t.handleMotionEvent,!0),e.next=21,t.waitForGyroscopeDetection();case 21:"locate-item-ar"!==t.step.type||t.deviceHasGyroscope||ut(t.$t("label.CouldNotEnableAR"),"warning");case 22:if("locate-item-ar"!==t.step.type||t.playerResult){e.next=73;break}if(!t.deviceHasGyroscope&&t.step.backgroundImage||(t.isIOs?(o={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(o),CameraPreview.show()):(l=t.$refs["camera-stream-for-locate-item-ar"],navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then((function(e){l.setAttribute("muted",!0),l.setAttribute("playsinline",!0),l.srcObject=e,l.play(),t.cameraStreamEnabled=!0})).catch((function(e){console.warn("No camera stream available"),console.log(e)})))),u=document.getElementById("target-canvas"),t.geolocation.target={scene:new Ye["Scene"],camera:new Ye["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new Ye["WebGLRenderer"]({canvas:u,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new Ye["Clock"]},t.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),c=t.geolocation.target,d=c.scene,t.addDefaultLightTo3DScene(d),!t.step.options.is3D){e.next=44;break}return e.next=33,t.loadAndPrepare3DModel(t.step.options.customModel?t.step.options.customModel:t.step.options.model,t.step.questId,t.step.options.customModel||!1);case 33:p=e.sent,f=p.object,h=p.animations,m=(new Ye["Box3"]).setFromObject(f),b=(m.max.z-m.min.z)/2,f.applyMatrix((new Ye["Matrix4"]).makeTranslation(0,0,b)),c.size=Math.max(m.max.x-m.min.x,m.max.y-m.min.y,m.max.z-m.min.z),h.length>0&&(g=new Ye["AnimationMixer"](f),g.clipAction(h[0]).play(),t.geolocation.target.mixers.push(g)),t.geolocation.target.renderer.gammaOutput=!0,e.next=65;break;case 44:v="",v=t.step.options.picture&&-1!==t.step.options.picture.indexOf("blob:")?t.step.options.picture:t.serverUrl+"/upload/quest/"+t.step.questId+"/step/locate-item-ar/"+t.step.options.picture,t.$refs["item-image"].src=v,c.size=t.step.options.objectSize||1,w=new Ye["PlaneGeometry"](c.size,c.size),e.prev=49,k=(new Ye["TextureLoader"]).load(v),k.anisotropy=0,k.magFilter=Ye["NearestFilter"],k.minFilter=Ye["NearestFilter"],e.next=61;break;case 56:return e.prev=56,e.t0=e["catch"](49),console.error("Error while loading image:",e.t0),ut(t.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 61:y=new Ye["MeshBasicMaterial"]({map:k}),y.transparent=!0,f=new Ye["Mesh"](w,y),f.position.y=0;case 65:f.name="targetObject",f.up=new Ye["Vector3"](0,0,1),f.visible=!1,d.add(f),t.geolocation.target.camera.up=new Ye["Vector3"](0,0,1),t.geolocation.target.camera.lookAt(new Ye["Vector3"](0,1,0)),t.geolocation.target.camera.position.z=1.5,t.animateTargetCanvas();case 73:"geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type||(t.$refs["geolocation-component"].disabled=!1),"locate-marker"!==t.step.type&&"sensor"!==t.step.id||t.playerResult||("sensor"===t.step.id?t.step.options={mode:"scan",layerCode:"magnifier"}:t.$emit("pass"),t.isHybrid?t.initQRCodes():(_=t.$refs["camera-stream-for-locate-marker"],navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then((function(e){_.srcObject=e,_.play(),_.onloadeddata=function(){var e=n()(a.a.mark((function e(i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cameraStreamEnabled=!0,r=document.getElementById("marker-canvas"),r.height=window.screen.height,r.width=window.screen.width,e.next=6,t.displayMarkers(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})).catch((function(e){console.warn("No camera stream available"),console.log(e)}))));case 75:case"end":return e.stop()}}),e,null,[[49,56]])}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),eventAlternateAbsoluteOrientationSensor:function(e){null===this.geolocation.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.geolocation.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.geolocation.initialBearingAngle+e.alpha)%360:e.alpha,i=e.beta,r=e.gamma,a=Math.PI/180,s=i?i*a:0,n=r?r*a:0,o=t?t*a:0,l=Math.cos(s/2),u=Math.cos(n/2),c=Math.cos(o/2),d=Math.sin(s/2),f=Math.sin(n/2),h=Math.sin(o/2),p=l*u*c-d*f*h,m=d*u*c-l*f*h,b=l*f*c+d*u*h,g=l*u*h+d*f*c;this.geolocation.absoluteOrientationSensor.quaternion=[m,b,g,p],this.onAbsoluteOrientationSensorReading()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},askUserToCalibrateGPS:function(){this.step.options&&this.step.options.showHelp&&(this.geolocation.showCalibration=!0,Ke.setTimeout(this.closeGPSCalibration,7e3))},closeGPSCalibration:function(){this.geolocation.showCalibration=!1,"locate-item-ar"===this.step.type&&this.askUserToHandleMobileVertically()},askUserToHandleMobileVertically:function(){this.geolocation.takeMobileVertically=!0,Ke.setTimeout(this.closeHandleMobileVertically,5e3)},closeHandleMobileVertically:function(){this.geolocation.takeMobileVertically=!1},initQRCodes:function(){for(var e=1;e<=16;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkAnswer(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},createMarkerControl:function(e){var t,i=this,r=this.locateMarker.arToolkitContext;t="scan"===this.step.options.mode?this.locateMarker.markerRoots["commonRoot"]:this.locateMarker.markerRoots[e];var a=new _i["THREEx"].ArMarkerControls(r,t,{type:"pattern",patternUrl:"statics/markers/"+e+"/pattern-marker.patt"});return a.code=e,a.addEventListener("markerFound",(function(e){"scan"===i.step.options.mode&&i.checkAnswer(e.target.code)})),a.detected=!1,a},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"character"!==this.step.type&&"new-item"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},hideControlsTemporaly:function(){this.controlsAreDisplayed=!1,Ke.setTimeout(this.showControls,4e3)},displayMarkers:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.locateMarker.markerRoots={},i=new Ye["WebGLRenderer"]({canvas:t,antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),r=new Ye["Scene"],s=new Ye["PerspectiveCamera"](45,window.innerWidth/window.innerHeight,.001,1e3),r.add(s),this.addDefaultLightTo3DScene(r),n=new _i["THREEx"].ArToolkitContext({cameraParametersUrl:"statics/markers/camera_para.dat",detectionMode:"mono",maxDetectionRate:30,canvasWidth:640,canvasHeight:480,patternRatio:.8}),n.initAsync=Object(Si["promisify"])(n.init),e.next=10,n.initAsync();case 10:if(o=new Ye["Group"],r.add(o),l=new _i["THREEx"].ArSmoothedControls(o,{lerpPosition:.4,lerpQuaternion:.3,lerpScale:1}),this.locateMarker.arToolkitContext=n,this.locateMarker.arSmoothedControls=l,this.locateMarker.renderer=i,this.locateMarker.scene=r,this.locateMarker.camera=s,this.locateMarker.markerCodeAnswer=this.step.answers,"scan"===this.step.options.mode&&(u=new Ye["Group"],r.add(u),this.locateMarker.markerRoots["commonRoot"]=u,c=new Ye["PlaneGeometry"](1,1),d=new Ye["MeshNormalMaterial"]({transparent:!0,opacity:0,side:Ye["DoubleSide"]}),f=new Ye["Mesh"](c,d),f.rotateX(Math.PI/2),o.add(f),o.name="markerObject"),vi.forEach((function(e){if("touch"===w.step.options.mode){var t=new Ye["Group"];r.add(t),w.locateMarker.markerRoots[e]=t}w.locateMarker.markerControls[e]=w.createMarkerControl(e)})),"touch"!==this.step.options.mode){e.next=35;break}return e.next=24,this.loadAndPrepare3DModel(this.step.options.customModel?this.step.options.customModel:this.step.options.model,this.step.questId,this.step.options.customModel||!1);case 24:m=e.sent,h=m.object,p=m.animations,h.rotateX(-Math.PI/2),b=(new Ye["Box3"]).setFromObject(h),g=(b.max.y-b.min.y)/2,h.applyMatrix((new Ye["Matrix4"]).makeTranslation(0,g,0)),h.name="targetObject",p.length>0&&(v=new Ye["AnimationMixer"](h),v.clipAction(p[0]).play(),this.locateMarker.mixers.push(v)),this.locateMarker.clock=new Ye["Clock"],o.add(h);case 35:this.animateMarkerCanvas();case 36:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendAnswer:function(){var e=n()(a.a.mark((function e(t,i,r,s,n){var o,l,u,c,d;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n&&this.$q.loading.show(),o=this,l=setTimeout((function(){o.isNetworkLow=!0}),8e3),e.next=5,Ft.checkAnswer(t,i,this.step.version,r,s);case 5:if(u=e.sent,clearTimeout(l),this.isNetworkLow=!1,!u||!u.data){e.next=14;break}return n&&this.$q.loading.hide(),c=u.data,e.abrupt("return",c);case 14:return n&&this.$q.loading.hide(),e.next=17,this.checkOfflineAnswer(s.answer);case 17:return d=e.sent,e.abrupt("return",d);case 19:case"end":return e.stop()}}),e,this)})));function t(t,i,r,a,s){return e.apply(this,arguments)}return t}(),checkOfflineAnswer:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.step.type,"info-text"!==i&&"info-video"!==i&&"new-item"!==i&&"character"!==i){e.next=5;break}return e.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("image-recognition"!==i){e.next=9;break}return e.abrupt("return",{result:t,answer:this.answer,score:0,reward:0,offline:!0});case 9:if("geolocation"!==i&&"locate-item-ar"!==i&&"jigsaw-puzzle"!==i){e.next=13;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 13:if("use-item"!==i){e.next=21;break}if(r={left:Math.round(this.answer.coordinates.left/100*100*t.windowWidth),top:Math.round(this.answer.coordinates.top/100*133*t.windowWidth)},s=Math.round(8*t.windowWidth),n=Math.sqrt(Math.pow(r.left-t.posX,2)+Math.pow(r.top-t.posY,2)),!(n<=s&&this.answer.item===t.item)){e.next=19;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 19:e.next=40;break;case 21:if("find-item"!==i){e.next=29;break}if(o={left:Math.round(this.answer.left/100*100*t.windowWidth),top:Math.round(this.answer.top/100*133*t.windowWidth)},l=Math.round(8*t.windowWidth),u=Math.sqrt(Math.pow(o.left-t.posX,2)+Math.pow(o.top-t.posY,2)),!(u<=l)){e.next=27;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 27:e.next=40;break;case 29:if("write-text"!==i){e.next=34;break}if(Ke.removeAccents(t)!==Ke.removeAccents(this.answer)){e.next=32;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 32:e.next=40;break;case 34:if("memory"!==i){e.next=38;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 38:if(t!==this.answer){e.next=40;break}return e.abrupt("return",{result:!0,answer:this.answer,score:1,reward:0,offline:!0});case 40:return e.abrupt("return",{result:!1,answer:this.answer,score:0,reward:0,offline:!0});case 41:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkAnswer:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===this.playerResult){e.next=2;break}return e.abrupt("return");case 2:if("sensor"!==this.step.id){e.next=5;break}return this.locateMarker.markerControls[t].detected||(this.locateMarker.flash=!1,this.locateMarker.flash=!0,this.locateMarker.markerControls[t].detected=!0,this.$emit("played",t)),e.abrupt("return");case 5:e.t0=this.step.type,e.next="info-text"===e.t0?8:"info-video"===e.t0?8:"new-item"===e.t0?8:"end-chapter"===e.t0?8:"character"===e.t0?8:"choose"===e.t0?13:"geolocation"===e.t0?18:"image-recognition"===e.t0?23:"code-keypad"===e.t0?29:"code-color"===e.t0?34:"code-image"===e.t0?40:"jigsaw-puzzle"===e.t0?45:"memory"===e.t0?50:"write-text"===e.t0?55:"use-item"===e.t0?60:"find-item"===e.t0?65:"locate-item-ar"===e.t0?70:"locate-marker"===e.t0?70:85;break;case 8:return e.next=10,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{},!1);case 10:return i=e.sent,this.submitGoodAnswer(0,i.offline,!0),e.abrupt("break",86);case 13:return e.next=15,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!0);case 15:return i=e.sent,!0===i.result?(r=this.step.options.items[t],!1===this.step.displayRightAnswer?r.class="rightorwrong":(r.icon="done",r.class="right"),o["a"].set(this.step.options.items,t,r),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer)):(s=this.step.options.items[t],!1===this.step.displayRightAnswer?s.class="rightorwrong":(s.icon="clear",s.class="wrong",(i.answer||0===i.answer)&&(n=this.step.options.items[i.answer],n.icon="done",n.class="right",o["a"].set(this.step.options.items,t,n),o["a"].set(this.step.options.items,i.answer,n))),o["a"].set(this.step.options.items,t,s),this.nbTry++,this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",86);case 18:return e.next=20,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!1);case 20:return i=e.sent,!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",86);case 23:return l=this.checkPhoto(),e.next=26,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:l},!0);case 26:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0):this.submitWrongAnswer(i.offline,!0),e.abrupt("break",86);case 29:return e.next=31,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join("")},!0);case 31:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?(this.resetKeypadCode(),this.submitRetry()):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",86);case 34:return this.$q.loading.show(),e.next=37,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join("|")},!0);case 37:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?(this.resetColorCode(),this.submitRetry()):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",86);case 40:return e.next=42,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.playerCode.join("|")},!0);case 42:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?(this.resetImageCode(),this.submitRetry()):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",86);case 45:return e.next=47,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:""},!0);case 47:return i=e.sent,!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",86);case 50:return e.next=52,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{},!1);case 52:return i=e.sent,!0===i.result&&this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0),e.abrupt("break",86);case 55:return e.next=57,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:this.writetext.playerAnswer},!0);case 57:return i=e.sent,!0===i.result?this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?(this.writetext.playerAnswer="",this.submitRetry()):this.submitWrongAnswer(i.offline,this.step.displayRightAnswer)),e.abrupt("break",86);case 60:return e.next=62,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!0);case 62:return i=e.sent,!0===i.result?(this.step.displayRightAnswer&&this.showItemLocation(i.answer.coordinates.left,i.answer.coordinates.top),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer)):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?ut(this.$t("label.UseItemNothingHappens"),"error"):(this.step.displayRightAnswer&&this.showItemLocation(i.answer.coordinates.left,i.answer.coordinates.top),this.submitWrongAnswer(i.offline,this.step.displayRightAnswer))),e.abrupt("break",86);case 65:return e.next=67,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!0);case 67:return i=e.sent,!0===i.result?(this.step.displayRightAnswer&&this.showFoundLocation(i.answer.left,i.answer.top),this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,this.step.displayRightAnswer)):(this.nbTry++,this.nbTry<2&&this.step.displayRightAnswer?ut(this.$t("label.FindItemNothingHappens"),"error"):(this.step.displayRightAnswer&&this.showFoundLocation(i.answer.left,i.answer.top),this.submitWrongAnswer(i.offline,this.step.displayRightAnswer))),e.abrupt("break",86);case 70:if("locate-item-ar"!==this.step.type&&("locate-marker"!==this.step.type||"touch"!==this.step.options.mode)){e.next=77;break}return e.next=73,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!1);case 73:i=e.sent,!0===i.result&&("locate-item-ar"===this.step.type&&(window.removeEventListener("devicemotion",this.handleMotionEvent,!0),this.geolocation.absoluteOrientationSensor.stop()),this.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),wi["a"].removeAll(),"locate-item-ar"===this.step.type&&this.step.options&&this.step.options.is3D||"locate-marker"===this.step.type?("locate-item-ar"===this.step.type?u=this.geolocation.target:(u=this.locateMarker,u.arToolkitContext=null),c=u.camera,d=u.scene.getObjectByName("targetObject"),d.visible=!0,f=(new Ye["Box3"]).setFromObject(d),h=new Ye["Vector3"],f.getSize(h),p=2*Math.max(h.x,h.y,h.z),m=Object.assign({},d.scale),b=new wi["a"].Tween(d.scale).to({x:0,y:0,z:0},1e3).easing(wi["a"].Easing.Back.In).onComplete((function(){"locate-marker"===S.step.type&&(Ke.detachObject3D(d,d.parent,u.scene),Ke.attachObject3D(d,u.scene,u.scene)),c.position.set(0,0,2*p/3),c.lookAt(new Ye["Vector3"](0,p,h.z/2)),d.scale.set(0,0,0),d.position.set(0,p,h.z/2),d.rotation.set(0,0,0),S.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0)})),g=new wi["a"].Tween(d.scale).to({x:m.x,y:m.y,z:m.z},1e3).easing(wi["a"].Easing.Back.Out),v=new wi["a"].Tween(d.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),b.chain(g,v).start()):this.submitGoodAnswer(i&&i.score?i.score:0,i.offline,!0)),e.next=84;break;case 77:if(w=!1,this.isHybrid?this.locateMarker.markerControls[t]&&!this.locateMarker.markerControls[t].detected&&(this.locateMarker.markerControls[t].detected=!0,w=!0):this.locateMarker.markerControls[t].detected||(k=this.locateMarker.scene.getObjectByName("markerObject"),y=new Ye["Raycaster"],y.setFromCamera(new Ye["Vector2"](0,0),this.locateMarker.camera),_=y.intersectObject(k,!0),_.length,this.locateMarker.markerControls[t].detected=!0,w=!0),!w){e.next=84;break}return e.next=82,this.sendAnswer(this.step.questId,this.step.stepId,this.runId,{answer:t},!0);case 82:i=e.sent,!0===i.result?(this.submitGoodAnswer(i.score,i.offline,!0),this.stopMarkersSensors(),this.locateMarker.playerAnswer=t):(this.nbTry++,2===this.nbTry?(this.submitWrongAnswer(i.offline,!0),this.stopMarkersSensors()):this.submitRetry(i.offline));case 84:return e.abrupt("break",86);case 85:console.log("checkAnswer(): Step type "+this.step.type+" not supported.");case 86:this.score=i&&i.score?i.score:0,this.reward=i&&i.reward?i.reward:0;case 88:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),Ke.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,i){if(this.playerResult=!!i||null,this.stepPlayed=!0,this.$emit("success",e,t,i),this.$emit("played"),this.displayReadMoreAlert(),i)switch(this.step.type){case"character":case"new-item":case"info-text":case"end-chapter":case"info-video":break;case"choose":break;case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"));break;case"image-recognition":case"write-text":case"jigsaw-puzzle":case"memory":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"));break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem")):this.displaySuccessMessage(!0,this.$t("label.WellDone"));break}},stopMarkersSensors:function(){this.isHybrid||(this.stopVideoTracks("camera-stream-for-locate-marker"),this.locateMarker.scene=new Ye["Scene"],this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera))},submitWrongAnswer:function(e,t){this.playerResult=!t&&null,this.stepPlayed=!0,this.$emit("fail",e,t),this.$emit("played"),this.displayReadMoreAlert(),t&&("image-recognition"===this.step.type?this.displaySuccessMessage(!1,this.$t("label.PhotosDoesntMatch")):this.displaySuccessMessage(!1,this.$t("label.WrongAnswer"))),Ke.setTimeout(this.alertToPassToNextStep,15e3)},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"))},displayReadMoreAlert:function(){var e=this;if(this.step.extraText&&"object"===Ve()(this.step.extraText)&&this.step.extraText[this.lang]){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=ut("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(){this.displaySuccessMessage(!1,this.$t("label.SecondTry"))},resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("red")},resetImageCode:function(){this.playerCode.length=0;for(var e=0;e<(this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4);e++)this.playerCode.push(0),this.forceImageRefresh(e)},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e)},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e)},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options.images[this.playerCode[e]].imagePath&&-1!==this.step.options.images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options.images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){var t=this.playerCode.indexOf("");-1!==t&&o["a"].set(this.playerCode,t,e)},clearLastCodeChar:function(){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||o["a"].set(this.playerCode,e,"")},changeColorForCode:function(e){if(null===this.playerResult){var t=bi.indexOf(this.playerCode[e]),i=(t+1)%bi.length;this.$set(this.playerCode,e,bi[i])}},changeImageForCode:function(e){if(null===this.playerResult){var t=bi.indexOf(this.playerCode[e]),i=(t+1)%bi.length;this.$set(this.playerCode,e,bi[i])}},toggleCameraStream:function(){var e=this;if(this.cameraStreamEnabled)this.stopVideoTracks("camera-stream-for-recognition");else{var t=this.$refs["camera-stream-for-recognition"],i=this.$refs["photo-buffer"],r=this.$refs["player-photo"];navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then((function(e){t.srcObject=e,t.play()})).catch((function(e){console.log("An error occured! "+e)})),t.addEventListener("canplay",(function(a){if(!e.cameraStreamEnabled){var s=a.target.parentElement,n=getComputedStyle(s),o=s.clientWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)),l=Math.floor(t.videoHeight/(t.videoWidth/o));t.setAttribute("width",o),t.setAttribute("height",l),i.setAttribute("width",o),i.setAttribute("height",l),r.setAttribute("width",o),r.setAttribute("height",l),e.cameraStreamEnabled=!0}}),!1)}},checkPhoto:function(){var e=this,t=this.$refs["photo-buffer"],i=t.getContext("2d");if(this.cameraStreamEnabled){i.drawImage(this.$refs["camera-stream-for-recognition"],0,0,t.width,t.height);var r=t.toDataURL("image/png");this.$refs["player-photo"].setAttribute("src",r),this.stopVideoTracks("camera-stream-for-recognition");var s=document.createElement("canvas"),o=new Image;o.crossOrigin="anonymous",o.src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/image-recognition/"+this.step.answers,o.onload=n()(a.a.mark((function i(){return a.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s.width=o.naturalWidth,s.height=o.naturalHeight,s.getContext("2d").drawImage(o,0,0,s.width,s.height),e.photoTaken=!0,i.abrupt("return",mi.compare(t,s)>=e.photoComparisonThreshold);case 5:case"end":return i.stop()}}),i)})))}},stopVideoTracks:function(e){this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),i=e.width,r=e.height,a=Math.round(i/2),s=Math.round(r/2);t.save(),t.clearRect(0,0,i,r),t.translate(a,s),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor,t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),r>25&&t.arc(0,0,Math.round(r/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(Ke.degreesToRadians(this.geolocation.direction));var n=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(r/2.5)),t.lineTo(-20,45-Math.round(r/2.5)),t.lineTo(-n,45-Math.round(r/2.5)),t.lineTo(-n,Math.round(r/2.5)-25),t.lineTo(n,Math.round(r/2.5)-25),t.lineTo(n,45-Math.round(r/2.5)),t.lineTo(20,45-Math.round(r/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.geolocation.active=!0,i=t.coords,0===this.step.options.lat&&0===this.step.options.lng&&("locate-item-ar"===this.step.type?(this.step.options.lat=i.latitude+2e-4,this.step.options.lng=i.longitude):(this.step.options.lat=i.latitude+5e-4,this.step.options.lng=i.longitude+5e-4)),r=this.step.options,"undefined"!==typeof r){e.next=7;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),e.abrupt("return");case 7:if(this.geolocation.GPSdistance=1e3*Ke.distanceInKmBetweenEarthCoordinates(r.lat,r.lng,i.latitude,i.longitude),s=Ke.bearingBetweenEarthCoordinates(i.latitude,i.longitude,r.lat,r.lng),(null===this.geolocation.distance||"locate-item-ar"===this.step.type&&(this.geolocation.GPSdistance>this.minDistanceForGPS||!this.deviceHasGyroscope)||"locate-item-ar"!==this.step.type)&&(this.geolocation.distance=this.geolocation.GPSdistance,this.geolocation.rawDirection=s),n=Ke.degreesToRadians(s),this.deviceHasGyroscope||(n=0,o=2+(null!==this.geolocation.target?this.geolocation.target.size:0),this.geolocation.GPSdistance=Math.max(o,this.geolocation.GPSdistance)),this.geolocation.position.x=Math.sin(n)*this.geolocation.GPSdistance,this.geolocation.position.y=Math.cos(n)*this.geolocation.GPSdistance,"locate-item-ar"!==this.step.type||null===this.geolocation.target||null===this.geolocation.target.scene){e.next=24;break}if(l=this.geolocation.target,u=l.scene,c=u.getObjectByName("targetObject"),this.geolocation.canSeeTarget=null===l.size||this.geolocation.GPSdistance<40*l.size,"undefined"!==typeof c){e.next=21;break}return e.abrupt("return");case 21:c.visible||(c.position.x=this.geolocation.position.x,c.position.y=this.geolocation.position.y,c.visible=!0),(this.geolocation.GPSdistance>this.minDistanceForGPS||!1===this.deviceHasGyroscope)&&new wi["a"].Tween(c.position).to({x:this.geolocation.position.x,y:this.geolocation.position.y},1e3).easing(wi["a"].Easing.Quadratic.InOut).start(),this.updatePlayerCanTouchTarget();case 24:if(!("geolocation"===this.step.type&&this.geolocation.distance<=20)){e.next=30;break}return this.$refs["geolocation-component"].disabled=!0,this.geolocation.active=!1,this.resetDrawDirectionInterval(),e.next=30,this.checkAnswer(i);case 30:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),useItem:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(!0===this.playerResult||this.nbTry>=3)){e.next=2;break}return e.abrupt("return");case 2:if(null!==this.itemUsed){e.next=6;break}return ut(this.$t("label.PleaseSelectAnItemFirst"),"error"),this.$emit("msg","suggestInventory"),e.abrupt("return");case 6:return i=window.innerWidth/100,r={windowWidth:i,posX:t.offsetX,posY:t.offsetY,item:this.itemUsed.originalPicture?this.itemUsed.originalPicture:this.itemUsed.picture},e.next=10,this.checkAnswer(r);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showItemLocation:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o,l,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=window.innerWidth/100,s={left:Math.round(t/100*100*r),top:Math.round(i/100*133*r)},n=Math.round(8*r),o=document.getElementById("cross-play"),o.style.top=s.top-n+"px",o.style.left=s.left-n+"px",o.style.display="block",l=o.src,u=this,Ke.setInterval((function(){o.src===l?(o.src=u.step.answers.item.indexOf("statics/")>-1||-1!==u.step.answers.item.indexOf("blob:")?u.step.answers.item:u.serverUrl+"/upload/quest/"+u.step.questId+"/step/new-item/"+u.step.answers.item,o.style.borderRadius="50%"):(o.src=l,o.style.borderRadius="0")}),1e3);case 10:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),findItem:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(!0===this.playerResult||this.nbTry>=3)){e.next=2;break}return e.abrupt("return");case 2:return i=window.innerWidth/100,r={windowWidth:i,posX:t.offsetX,posY:t.offsetY},e.next=6,this.checkAnswer(r);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text&&"object"===Ve()(this.step.text)&&this.step.text[this.lang]?this.step.text[this.lang]:e;return t},showFoundLocation:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=window.innerWidth/100,s={left:Math.round(t/100*100*r),top:Math.round(i/100*133*r)},n=Math.round(8*r),o=document.getElementById("cross-play"),o.style.top=s.top-n+"px",o.style.left=s.left-n+"px",o.style.display="block";case 7:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),checkPuzzle:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.comparePuzzlePiecePositions(),t&&this.checkAnswer(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o,l,u,c,d,f,h;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=-1!==this.step.options.picture.indexOf("blob:")?this.step.options.picture:-1===this.step.options.picture.indexOf("upload/")?this.serverUrl+"/upload/quest/"+this.step.questId+"/step/jigsaw-puzzle/"+this.step.options.picture:this.serverUrl+this.step.options.picture,e.next=3,Ke.loadImage(t);case 3:for(this.puzzle.picture=t,i=parseInt(this.step.options.level||2,10),r=this.puzzle.colsByLevel[i],s=Math.pow(r,2),n=document.getElementById("pieces").clientWidth,o=n,l=Math.floor(o/r),u=Math.floor(n/r),c=0;c<s;c++)d=u*(c%r)+"px",f=l*Math.floor(c/r)+"px",this.puzzle.pieces[c]={pos:c,backSize:100*r,backXPos:d,backYPos:f,width:u,height:l,classes:"piece"};h=!0;while(h)this.puzzle.pieces=this.shuffle(this.puzzle.pieces),h=this.comparePuzzlePiecePositions();return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),shuffle:function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[i],e[i]=r}return e},handleDragStart:function(e){if("drag"===this.puzzle.mode)return-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0},handleDragOver:function(e){"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if("drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if("drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),i=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(i,t)}return!0}},switchPieces:function(e,t){var i=0,r=0;if(t!==e){for(var a=0;a<this.puzzle.pieces.length;a++)this.puzzle.pieces[a].pos===t&&(i=a),this.puzzle.pieces[a].pos===e&&(r=a);var s=this.puzzle.pieces[i];o["a"].set(this.puzzle.pieces,i,this.puzzle.pieces[r]),o["a"].set(this.puzzle.pieces,r,s),this.checkPuzzle()}},changePuzzleMode:function(){"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if("click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var i=this.puzzle.pieces[t];o["a"].set(this.puzzle.pieces,t,i)}}else{for(var r=0;r<this.puzzle.pieces.length;r++)this.puzzle.pieces[r].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var i=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!i.single||t<this.step.options.items.length)&&(e[t]={imagePath:i.imagePath,isClicked:!1,isFound:!1})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,o["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){for(var i=0;i<this.memory.items.length;i++)this.memory.items[i].isFound||(this.memory.items[i].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,o["a"].set(this.memory.items,i,this.memory.items[i]));this.checkAnswer(!0)}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,o["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),o["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,Ke.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,o["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),o["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,i=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&i.lookAt(e.camera.position),t.length>0)for(var r=0;r<t.length;r++)t[r].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(i.position),e.renderer.render(e.scene,e.camera),wi["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},animateMarkerCanvas:function(){if("undefined"===typeof this.step||"sensor"!==this.step.id&&"undefined"===typeof this.step.type)this.stopLatestAnimation();else{var e=this.locateMarker.mixers;if(null!==this.locateMarker.arToolkitContext)if(this.locateMarker.arToolkitContext.update(this.$refs["camera-stream-for-locate-marker"]),"locate-marker"===this.step.type&&"scan"===this.step.options.mode||"sensor"===this.step.id)for(var t in this.locateMarker.markerRoots)this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[t]);else this.locateMarker.arSmoothedControls.update(this.locateMarker.markerRoots[this.step.answers]);if(null!==this.locateMarker.renderer&&this.locateMarker.renderer.render(this.locateMarker.scene,this.locateMarker.camera),e.length>0)for(var i=0;i<e.length;i++)e[i].update(this.locateMarker.clock.getDelta());wi["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateMarkerCanvas)}},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onAbsoluteOrientationSensorReading:function(){var e=this;if(!1!==this.geolocation.absoluteOrientationSensor.activated){var t=(new Ye["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&(this.geolocation.target.camera.quaternion=t),!this.waitForNextQuaternionRead){var i=(new Ye["Euler"]).setFromQuaternion(t,"ZXY"),r=(new Ye["Euler"]).setFromQuaternion(t,"XZY"),a=i.x<Math.PI/4?i.z:r.y,s=JSON.stringify((360-Ke.radiansToDegrees(a))%360);this.geolocation.direction=(this.geolocation.rawDirection-s+360)%360,this.waitForNextQuaternionRead=!0,Ke.setTimeout((function(){e.waitForNextQuaternionRead=!1}),100)}}else console.warn("sensor is not activated")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var i=t.scene.getObjectByName("targetObject"),r=new Ye["Vector2"];r.x=e.clientX/t.renderer.domElement.clientWidth*2-1,r.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var a=new Ye["Raycaster"];a.setFromCamera(r,t.camera);var s=a.intersectObject(i,!0),n="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(s.length>0&&n){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.$refs["geolocation-component"].disabled=!0,this.geolocation.active=!1);var o="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(o),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(){var e=n()(a.a.mark((function e(t,i,r){var s,n,o,l,u,c,d,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=4,n=gi[t],e.prev=2,this.$q.loading.show(),e.next=6,this.ModelLoaderAsync(t,i,r);case 6:o=e.sent,this.$q.loading.hide(),e.next=15;break;case 10:return e.prev=10,e.t0=e["catch"](2),console.error("Error while loading 3D model:",e.t0),ut(this.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 15:return l=o.scene,n&&(n.rotation=n.rotation||{},n.rotation.hasOwnProperty("x")&&l.rotateX(Ke.degreesToRadians(n.rotation.x)),n.rotation.hasOwnProperty("y")&&l.rotateY(Ke.degreesToRadians(n.rotation.y)),n.rotation.hasOwnProperty("z")&&l.rotateZ(Ke.degreesToRadians(n.rotation.z)),u=(n.scale||1)*s,l.scale.set(u,u,u)),c=(new Ye["Box3"]).setFromObject(l),d=c.getCenter(new Ye["Vector3"]),d.multiplyScalar(-1),f=new Ye["Object3D"],l.applyMatrix((new Ye["Matrix4"]).makeTranslation(d.x,d.y,d.z)),f.add(l),f.up=new Ye["Vector3"](0,0,1),l=f,n&&n.translation&&"locate-item-ar"===this.step.type&&(n.translation.hasOwnProperty("x")&&(l.position.x+=n.translation.x*s),n.translation.hasOwnProperty("y")&&(l.position.y+=n.translation.y*s),n.translation.hasOwnProperty("z")&&(l.position.z+=n.translation.z*s)),e.abrupt("return",{object:l,animations:o.animations});case 27:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(t,i,r){return e.apply(this,arguments)}return t}(),ModelLoaderAsync:function(){var e=n()(a.a.mark((function e(t,i,r){var s,n,o=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=console.log,e.next=3,Ke.readBinaryFile(i,t+".glb");case 3:return n=e.sent,e.abrupt("return",new Promise((function(e,a){var l=new yi.a;-1!==t.indexOf("blob:")?l.load(t,e,s,a):n?l.load(n,e,s,a):r?l.load(o.serverUrl+"/upload/quest/"+i+"/step/3dobject/"+t+".glb",e,s,a):l.load(o.serverUrl+"/statics/3d-models/"+t+".glb",e,s,a)})));case 5:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),addDefaultLightTo3DScene:function(e){var t=new Ye["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new Ye["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,i){ut(t,e?"rightAnswer":"wrongAnswer",i)},readMore:function(){this.step.extraText&&"object"===Ve()(this.step.extraText)&&this.step.extraText[this.lang]&&(this.story.step=6,this.story.data={readMore:Ke.replaceBreakByBR(this.step.extraText[this.lang])})},clearAllCameraStreams:function(){for(var e=["camera-stream-for-recognition","camera-stream-for-locate-marker","camera-stream-for-locate-item-ar"],t=[],i=0,r=e;i<r.length;i++){var a=r[i],s=this.$refs[a];"undefined"!==typeof s&&s.srcObject&&t.push(s.srcObject)}for(var n=0,o=t;n<o.length;n++){var l=o[n];Ke.clearCameraStream(l)}},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t,i=this.deviceMotion,r=!0;if(null===this.deviceHasGyroscope&&(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha),(!this.deviceHasGyroscope||null===this.geolocation.distance||null===this.geolocation.GPSdistance||this.geolocation.GPSdistance>this.minDistanceForGPS+10||null===this.geolocation.absoluteOrientationSensor||!this.geolocation.absoluteOrientationSensor.quaternion||isNaN(this.geolocation.position.x)||isNaN(this.geolocation.position.y))&&(r=!1),this.geolocation.target&&this.geolocation.target.scene?(t=this.geolocation.target.scene.getObjectByName("targetObject"),r=r&&"undefined"!==typeof t):r=!1,!r)return i.acceleration.avgData={x:[],y:[],z:[]},void(i.velocity={x:0,y:0});null!==this.geolocation.GPSdistance&&(i.isTargetPositionUndefined||this.geolocation.GPSdistance>=this.minDistanceForGPS)&&(this.geolocation.distance=this.geolocation.GPSdistance,t.position.x=this.geolocation.position.x,t.position.y=this.geolocation.position.y,i.isTargetPositionUndefined=!1);var a=e.acceleration,s=new Ye["Vector3"](a.x,a.y,a.z),n=(new Ye["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);s.applyQuaternion(n),i.acceleration.raw=s;var o=new Date;if(null!==i.dateLatestEvent){var l=(o.getTime()-i.dateLatestEvent.getTime())/1e3;i.acceleration.avgData.x.push(i.acceleration.raw.x),i.acceleration.avgData.y.push(i.acceleration.raw.y),i.acceleration.avgData.z.push(i.acceleration.raw.z),i.acceleration.avgData.x.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.x.shift(),i.acceleration.avgData.y.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.y.shift(),i.acceleration.avgData.z.length>i.acceleration.maxAvgItems&&i.acceleration.avgData.z.shift(),i.acceleration.filtered.x=Ke.arrayAverage(i.acceleration.avgData.x),i.acceleration.filtered.y=Ke.arrayAverage(i.acceleration.avgData.y),i.acceleration.filtered.z=Ke.arrayAverage(i.acceleration.avgData.z),i.isAccelerationIdle=Math.pow(i.acceleration.filtered.x,2)+Math.pow(i.acceleration.filtered.y,2)+Math.pow(i.acceleration.filtered.z,2)<.08;var u=1.4,c=.3;i.velocity.x*i.acceleration.filtered.x<0?i.acceleration.filtered.x*=c:i.isAccelerationIdle||(i.acceleration.filtered.x*=u),i.velocity.y*i.acceleration.filtered.y<0?i.acceleration.filtered.y*=c:i.isAccelerationIdle||(i.acceleration.filtered.y*=u),i.velocity.x+=i.acceleration.filtered.x*l,i.velocity.y+=i.acceleration.filtered.y*l,i.isAccelerationIdle?(i.velocity.x*=.99/Math.pow(i.idleAccelerationCounter,2),i.velocity.y*=.99/Math.pow(i.idleAccelerationCounter,2),i.idleAccelerationCounter=Math.max(100,i.idleAccelerationCounter+1)):i.idleAccelerationCounter=1;var d=5e3/3600,f=Math.sqrt(Math.pow(i.velocity.x,2)+Math.pow(i.velocity.y,2));f>d&&(i.velocity.x=i.velocity.x*d/f,i.velocity.y=i.velocity.y*d/f);var h,p={x:t.position.x,y:t.position.y},m={x:-i.velocity.x*l,y:-i.velocity.y*l};h=i.isAccelerationIdle?{x:0,y:0}:{x:(this.geolocation.position.x-p.x)/600,y:(this.geolocation.position.y-p.y)/600},this.geolocation.GPSdistance<=this.minDistanceForGPS&&(wi["a"].removeAll(),t.position.x=p.x+m.x+h.x,t.position.y=p.y+m.y+h.y,this.geolocation.distance=Math.sqrt(Math.pow(t.position.x,2)+Math.pow(t.position.y,2)),this.geolocation.rawDirection=(Ke.radiansToDegrees(-Math.atan2(t.position.y,t.position.x))+90)%360,this.updatePlayerCanTouchTarget())}i.dateLatestEvent=o},updatePlayerCanTouchTarget:function(){!this.geolocation.canTouchTarget&&this.geolocation.distance<=10&&(this.geolocation.canTouchTarget=!0)},waitForGyroscopeDetection:function(){var e=n()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.abrupt("return",new Promise((function(e,r){null!==i.deviceHasGyroscope?e():Ke.setTimeout(n()(a.a.mark((function i(){return a.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.waitForGyroscopeDetection();case 2:e();case 3:case"end":return i.stop()}}),i)}))),250)})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),enlargeThePicture:function(e){this.enlargePicture.show=!0;var t=this.step.options.images[this.playerCode[e]].imagePath;this.enlargePicture.url=-1!==t.indexOf("blob:")?t:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t}}},qi=xi,Ei=(i("f78a"),Object(ge["a"])(qi,si,ni,!1,null,"0a4b3365",null)),Ci=Ei.exports,Ti=i("53fe"),Ai=i.n(Ti);o["a"].directive("sortable",{inserted:function(e,t){return new Ai.a(e,t.value||{})}});var Mi={components:{stepPlay:Ci,story:Et},data:function(){return this.initialState()},mounted:function(){Ke.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:""}},hint:{isOpened:!1,label:"",suggest:!1,show:!1,used:!1},info:{isOpened:!1,score:0,quest:{}},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},story:{step:null,data:null},loadStepData:!1,run:{},isRunFinished:!1,canMoveNextStep:!1,canPass:!1,remotePlay:!1,serverUrl:"https://api.graaly.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!1,answer:null},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,selectedItem:null}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.canMoveNextStep=e.canMoveNextStep,this.canPass=e.canPass,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectItem,this.loadStepData=e.loadStepData},initData:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,this.getQuest(this.questId);case 3:return this.loadStepData=!1,e.next=6,this.getRun();case 6:return e.next=8,this.getStep();case 8:return this.$q.loading.hide(),this.isHintAvailable()&&(Ke.setTimeout(this.alertOnHint,12e3),this.hint.show=!0),e.next=12,this.startStory();case 12:this.loadStepData=!0;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRun:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o,l,u,c=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Xt.listForAQuest(this.info.quest.questId);case 3:return t=e.sent,i=0,r=!!this.$route.query.hasOwnProperty("remoteplay")&&this.$route.query.remoteplay,e.next=8,this.checkIfRunIsAlreadyLoaded(this.questId);case 8:if(s=e.sent,!s){e.next=13;break}return e.next=12,this.loadOfflineRun(this.questId);case 12:n=e.sent;case 13:if(!t||!t.data){e.next=58;break}this.offline.active=!1,o=0;case 16:if(!(o<t.data.length)){e.next=36;break}if("finished"===t.data[o].status&&(this.isRunFinished=!0),"in-progress"!==t.data[o].status){e.next=33;break}if(this.run=t.data[o],i=t.data[o].currentChapter,!s){e.next=33;break}if(!(n.dateUpdated>this.run.dateUpdated)){e.next=30;break}return l=this.run._id,this.run=n,this.run._id||(this.run._id=l),e.next=28,Xt.updateFromOffline(this.run);case 28:e.next=33;break;case 30:return this.run.answers=n.answers,e.next=33,this.updateOfflineRun(this.questId);case 33:o++,e.next=16;break;case 36:if(0!==i){e.next=55;break}return e.next=39,Xt.init(this.questId,this.questVersion,this.$route.params.lang,r);case 39:if(u=e.sent,200!==u.status||!u.data||!u.data._id){e.next=51;break}if(!s){e.next=48;break}return this.run=n,this.run._id=u.data._id,e.next=46,Xt.updateFromOffline(this.run);case 46:e.next=49;break;case 48:this.run=u.data;case 49:e.next=52;break;case 51:this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")}).onOk((function(){c.$router.push("/quest/play/"+c.questId)}));case 52:this.info.score=0,e.next=56;break;case 55:this.info.score=this.run.tempScore;case 56:e.next=65;break;case 58:if(this.offline.active=!0,!s){e.next=63;break}n&&(this.run=n,this.info.score=this.run.tempScore,i=this.run.currentChapter),e.next=65;break;case 63:return e.next=65,this.updateOfflineRun(this.questId);case 65:if(this.$q.loading.hide(),0!==i){e.next=69;break}return e.next=69,this.updateOfflineRun(this.questId);case 69:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStep:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.warnings.stepDataMissing=!1,!this.$route.params.stepId||"0"===this.$route.params.stepId||-1!==this.$route.params.stepId.indexOf("success_")||-1!==this.$route.params.stepId.indexOf("pass_")){e.next=5;break}i=this.$route.params.stepId,e.next=27;break;case 5:if(this.offline.active){e.next=12;break}return e.next=8,Xt.getNextStep(this.questId);case 8:if(r=e.sent,!r||200===r.status){e.next=12;break}return"app_quest_data_is_obsolete"===r.data.message?this.$q.dialog({title:this.$t("label.QuestUpdated"),message:this.$t("label.PleaseRestartQuest")}).onOk((function(){y.$router.push("/quest/play/"+y.questId)})):this.$q.dialog({title:this.$t("label.TechnicalProblem")}).onOk((function(){y.$router.push("/quest/play/"+y.questId)})),e.abrupt("return",!1);case 12:if(!r||!r.data||200!==r.status){e.next=21;break}if(!r.data.next){e.next=17;break}i=r.data.next,e.next=19;break;case 17:return this.step={id:"sensor"},e.abrupt("return",!1);case 19:e.next=27;break;case 21:return e.next=23,this.getNextOfflineStep(this.questId);case 23:if(i=e.sent,i){e.next=27;break}return this.step={id:"sensor"},e.abrupt("return",!1);case 27:if("end"!==i){e.next=29;break}return e.abrupt("return",this.$router.push("/quest/"+this.questId+"/end"));case 29:return e.next=31,this.checkIfStepIsAlreadyLoaded(i);case 31:if(s=e.sent,s&&!t){e.next=44;break}return e.next=35,Ft.getById(i,this.questVersion);case 35:if(n=e.sent,!n||!n.data||200!==n.status){e.next=40;break}n.data&&n.data.message?"Step not yet available"===n.data.message&&this.showStepBlockedMessage(n.data.startDate):(this.step=n.data,this.step.id=this.step.stepId,this.getPreviousStep()),e.next=42;break;case 40:return this.warnings.stepDataMissing=!0,e.abrupt("return",!1);case 42:e.next=129;break;case 44:return e.next=46,Ke.readFile(this.questId,"step_"+i+".json");case 46:if(o=e.sent,o){e.next=58;break}if(!t){e.next=52;break}this.warnings.questDataMissing=!0,e.next=56;break;case 52:return e.next=54,this.getStep(!0);case 54:return l=e.sent,e.abrupt("return",l);case 56:e.next=129;break;case 58:if(u=JSON.parse(o),c=this.offlineCheckAccess(o),c&&c.message&&"Step not yet available"===stepAccessMessage&&this.showStepBlockedMessage(c.startDate),!u.backgroundImage){e.next=66;break}return e.next=64,Ke.readBinaryFile(this.questId,u.backgroundImage);case 64:d=e.sent,d?u.backgroundImage=d:this.warnings.stepDataMissing=!0;case 66:if(!u.videoStream||""===u.videoStream){e.next=71;break}return e.next=69,Ke.readBinaryFile(this.questId,u.videoStream);case 69:f=e.sent,f?u.videoStream=f:this.warnings.stepDataMissing=!0;case 71:if("image-recognition"!==u.type||!u.answers||""===u.answers){e.next=76;break}return e.next=74,Ke.readBinaryFile(this.questId,u.answers);case 74:h=e.sent,h?u.answers=h:this.warnings.stepDataMissing=!0;case 76:if("choose"!==u.type||!u.options){e.next=87;break}p=0;case 78:if(!(p<u.options.length)){e.next=87;break}if(!u.options[p].imagePath){e.next=84;break}return e.next=82,Ke.readBinaryFile(this.questId,u.options[p].imagePath);case 82:m=e.sent,m?u.options[p].imagePath=m:this.warnings.stepDataMissing=!0;case 84:p++,e.next=78;break;case 87:if("memory"!==u.type||!u.options||!u.options.items){e.next=98;break}p=0;case 89:if(!(p<u.options.items.length)){e.next=98;break}if(!u.options.items[p].imagePath){e.next=95;break}return e.next=93,Ke.readBinaryFile(this.questId,u.options.items[p].imagePath);case 93:b=e.sent,b?u.options.items[p].imagePath=b:this.warnings.stepDataMissing=!0;case 95:p++,e.next=89;break;case 98:if("code-image"!==u.type||!u.options||!u.options.images){e.next=109;break}p=0;case 100:if(!(p<u.options.images.length)){e.next=109;break}if(!u.options.images[p].imagePath){e.next=106;break}return e.next=104,Ke.readBinaryFile(this.questId,u.options.images[p].imagePath);case 104:g=e.sent,g?u.options.images[p].imagePath=g:this.warnings.stepDataMissing=!0;case 106:p++,e.next=100;break;case 109:if("jigsaw-puzzle"!==u.type||!u.options||!u.options.picture||""===u.options.picture){e.next=114;break}return e.next=112,Ke.readBinaryFile(this.questId,u.options.picture);case 112:v=e.sent,v?u.options.picture=v:this.warnings.stepDataMissing=!0;case 114:if("new-item"!==u.type||!u.options||!u.options.picture||""===u.options.picture){e.next=119;break}return e.next=117,Ke.readBinaryFile(this.questId,u.options.picture);case 117:w=e.sent,w&&(u.options.picture=w);case 119:if("character"!==u.type||!u.options||!u.options.character||""===u.options.character){e.next=124;break}return e.next=122,Ke.readBinaryFile(this.questId,u.options.character);case 122:k=e.sent,k&&(u.options.character=k);case 124:return this.step=u,this.step.id=this.step.stepId,this.getPreviousStep(),this.offline.answer=this.step.answers,e.abrupt("return",!0);case 129:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getPreviousStep:function(){if(this.step.conditions&&this.step.conditions.length>0)for(var e=0;e<this.step.conditions.length;e++)if(-1!==this.step.conditions[e].indexOf("stepDone")){var t=this.step.conditions[e].replace("stepDone_","");return this.previousStepId=t,t}},trackStepSuccess:function(){var e=n()(a.a.mark((function e(t,i,r){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r&&(this.info.score+=t),this.hideHint(),e.next=4,this.saveOfflineAnswer(!0);case 4:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),trackStepPlayed:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("sensor"!==this.step.id){e.next=5;break}return e.next=3,this.getMarkerStep(t);case 3:e.next=10;break;case 5:this.canMoveNextStep=!0,this.hint.suggest=!1,this.hint.show=!1,this.inventory.show=!1,this.footer.tabSelected="next";case 10:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),trackStepPass:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.canPass=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackStepFail:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.hideHint(),e.next=3,this.saveOfflineAnswer(!1);case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),trackMessage:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"suggestInventory"===t&&(this.inventory.suggest=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMarkerStep:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offline.active){e.next=4;break}return e.next=3,Xt.getMarkerNextStep(this.questId,t);case 3:r=e.sent;case 4:if(!r||!r.data){e.next=8;break}r.data.next?i=r.data.next:ut(this.$t("label.NothingOccurs"),"info"),e.next=11;break;case 8:return e.next=10,this.getNextOfflineStep(this.questId,t);case 10:i=e.sent;case 11:if(!i){e.next=25;break}if("end"!==i){e.next=24;break}if(!this.$store.state.user.isAdmin){e.next=17;break}return e.abrupt("return",this.$router.push("/admin/validate/"+this.questId));case 17:if(this.$store.state.user._id!==this.info.quest.authorUserId){e.next=21;break}return e.abrupt("return",this.$router.push("/quest/builder/"+this.questId));case 21:return e.abrupt("return",this.$router.push("/quest/"+this.questId+"/end"));case 22:e.next=25;break;case 24:this.$router.push("/quest/play/"+this.questId+"/version/"+this.questVersion+"/step/"+i+"/"+this.$route.params.lang);case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideHint:function(){this.step.hint={}},getBackgroundImage:function(){return this.info.quest.picture&&"_"===this.info.quest.picture[0]?"statics/images/quest/"+this.info.quest.picture:this.info.quest.picture&&-1!==this.info.quest.picture.indexOf("blob:")?this.info.quest.picture:this.info.quest.picture?this.serverUrl+"/upload/quest/"+this.info.quest.picture:"statics/images/quest/default-quest-picture.png"},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.serverUrl+"/upload/quest/"+this.info.quest.customization.logo},nextStep:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadStepData=!1,this.$q.loading.show(),!this.canMoveNextStep){e.next=8;break}return e.next=5,this.moveToNextStep("success");case 5:this.$q.loading.hide(),e.next=9;break;case 8:this.canPass&&(this.$q.loading.hide(),this.$q.dialog({message:this.$t("label.ConfirmPass"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.offline.active){e.next=3;break}return e.next=3,Xt.passStep(t.run._id,t.step.id);case 3:return e.next=5,t.passOfflineStep(t.step.id);case 5:return e.next=7,t.moveToNextStep("pass");case 7:case"end":return e.stop()}}),e)})))).onCancel((function(){})));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moveToNextStep:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveOfflineRun(this.questId,this.run);case 2:this.canMoveNextStep=!1,this.canPass=!1,"locate-item-ar"===this.step.type&&this.isIOs&&(console.log("=======> stopping camera"),CameraPreview.stopCamera(),CameraPreview.stopCamera()),this.$router.push("/quest/play/"+this.questId+"/version/"+this.questVersion+"/step/"+t+"_"+this.step.stepId+"_"+Ke.randomId()+"/"+this.$route.params.lang);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),previousStep:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===this.previousStepId){e.next=11;break}if(!this.offline.active){e.next=8;break}return this.run.historyIndex--,this.run.historyIndex<1?this.run.historyIndex=1:this.run.historyIndex>this.run.history.length&&(this.run.historyIndex=this.run.history.length),e.next=6,this.saveOfflineRun(this.questId,this.run);case 6:e.next=10;break;case 8:return e.next=10,Xt.setHistoryOneStepBack(this.run._id);case 10:this.$router.push("/quest/play/"+this.questId+"/version/"+this.questVersion+"/step/"+this.previousStepId+"/"+this.$route.params.lang);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),askForHint:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(this.hint.suggest=!1,!this.hint.isOpened){e.next=7;break}this.closeAllPanels(),e.next=13;break;case 7:if(!this.$store.state.user.bonus||!this.$store.state.user.bonus.name||"infinitehint"!==this.$store.state.user.bonus.name){e.next=12;break}return e.next=10,this.getHint();case 10:e.next=13;break;case 12:this.$q.dialog({message:this.$t("label.ConfirmHint"),ok:this.$t("label.Ok"),cancel:this.$t("label.Cancel")}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHint();case 2:case"end":return e.stop()}}),e)}))));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getHint:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.offline.active){e.next=4;break}return e.next=3,Xt.getHint(this.run._id,this.step.stepId,this.run.version);case 3:t=e.sent;case 4:t&&t.hint?this.hint.label=t.hint:this.hint.label=this.step.hint,this.hint.used=!0,this.closeAllPanels(),this.hint.isOpened=!0,this.footer.tabSelected="hint";case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.warnings.inventoryMissing=!1,this.$q.loading.show(),this.offline.active){e.next=6;break}return e.next=5,Xt.listWonObjects(this.questId,this.run._id);case 5:t=e.sent;case 6:if(!t||!t.data){e.next=11;break}this.inventory.items=t.data,this.inventory.items.originalPicture=this.inventory.items.picture,e.next=15;break;case 11:return e.next=13,this.listWonObjects();case 13:i=e.sent,i?this.inventory.items=i:this.warnings.inventoryMissing=!0;case 15:this.$q.loading.hide();case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInventory:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.footer.tabSelected="inventory");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInfo:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.info.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.info.isOpened=!0,this.footer.tabSelected="info");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToMap:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$router.push("/map"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showStepBlockedMessage:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.startDate.enabled=!0,this.startDate.date=t,Ke.setTimeout(this.computeRemainingTime,1e3);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),computeRemainingTime:function(){var e=n()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=new Date,i=new Date(this.startDate.date.substr(0,4),this.startDate.date.substr(5,2)-1,this.startDate.date.substr(8,2),0,0,0),r=(i-t.getTime())/1e3,!(r<0)){e.next=7;break}return e.next=6,this.initData();case 6:return e.abrupt("return");case 7:this.startDate.remainingDays=Math.floor(r/86400),this.startDate.remainingHours=Math.floor((r-86400*this.startDate.remainingDays)/3600),this.startDate.remainingMinutes=Math.floor((r-86400*this.startDate.remainingDays-3600*this.startDate.remainingHours)/60),this.startDate.remainingSeconds=Math.floor(r%60),Ke.setTimeout(this.computeRemainingTime,1e3);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startStory:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"discovery"===this.info.quest.type&&(1===this.step.number&&(this.story.step=4),2===this.step.number&&(this.story.step=5),5===this.step.number&&(this.story.step=7),7===this.step.number&&(this.story.step=8));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuest:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o,l,u;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.questDataMissing=!1,e.next=3,Je.isCached(t);case 3:if(r=e.sent,r&&!i){e.next=11;break}return e.next=7,Je.getLastById(t);case 7:s=e.sent,s&&s.data?this.info.quest=s.data:this.warnings.questDataMissing=!0,e.next=35;break;case 11:return e.next=13,Ke.readFile(t,"quest_"+t+".json");case 13:if(n=e.sent,n){e.next=25;break}if(!i){e.next=19;break}this.warnings.questDataMissing=!0,e.next=23;break;case 19:return e.next=21,this.getQuest(t,!0);case 21:return o=e.sent,e.abrupt("return",o);case 23:e.next=35;break;case 25:return this.info.quest=JSON.parse(n),e.next=28,Ke.readBinaryFile(t,this.info.quest.picture);case 28:if(l=e.sent,this.info.quest.picture=l||"_default-quest-picture.png",!this.info.quest.customization||!this.info.quest.customization.logo||""===this.info.quest.customization.logo){e.next=35;break}return e.next=33,Ke.readBinaryFile(t,this.info.quest.customization.logo);case 33:u=e.sent,u&&(this.info.quest.customization.logo=u);case 35:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),selectItem:function(e){"use-item"!==this.step.type?(this.inventory.detail.isOpened=!0,this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.sendFeedback(this.feedback.message,{questId:this.questId,stepId:this.step.stepId});case 2:t=e.sent,t?(ut(this.$t("label.YourMessageHasBeenSent"),"info"),this.feedback.isOpened=!1):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isHintAvailable:function(){return!!(this.step&&this.step.hint&&this.step.hint[this.lang]&&""!==this.step.hint[this.lang])},alertOnHint:function(){this.hint.suggest=!0},checkIfStepIsAlreadyLoaded:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Ke.checkIfFileExists(this.questId,"step_"+t+".json");case 4:if(i=e.sent,!i){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkIfRunIsAlreadyLoaded:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Ke.checkIfFileExists(this.questId,"run_"+t+".json");case 4:if(i=e.sent,!i){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadOfflineRun:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.readFile(this.questId,"run_"+t+".json");case 2:if(i=e.sent,i){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",JSON.parse(i));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateOfflineRun:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.run&&this.run.questId||(this.run={userId:this.$store.state.user._id,questId:t,version:this.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:this.remotePlay,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:this.info.quest.picture,thumb:this.info.quest.thumb||"default-quest-thumb.png",title:this.info.quest.title,type:this.info.quest.type,zipcode:this.info.quest.location.zipcode,town:this.info.quest.location.town,country:this.info.quest.location.country},language:this.lang,userData:{name:this.$store.state.user.name,picture:this.$store.state.user.picture,location:this.$store.state.user.location},history:[],historyIndex:0}),e.next=3,this.saveOfflineRun(t,this.run);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveOfflineAnswer:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o,l,u,c,d,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkIfStepIsAlreadyPlayedInRun(this.step.stepId);case 2:if(i=e.sent,r=this.run.conditionsDone,s=!1,n=0,!t){e.next=20;break}if(!1!==this.step.displayRightAnswer){e.next=14;break}return e.next=10,this.removeConditionsUntilLastMarker(r,this.step.stepId,this.run.version);case 10:l=e.sent,r=l.found?this.updateConditions(r,this.step.stepId,!0,this.step.type,!1):this.updateConditions(r,this.step.stepId,!0,this.step.type,!0),e.next=15;break;case 14:r=this.updateConditions(r,this.step.stepId,!0,this.step.type,!0);case 15:s=!0,n=this.hint.used||this.nbTry>1?this.step.points/2:this.step.points,o="success",e.next=30;break;case 20:if(s=!0,o="fail",!1!==this.step.displayRightAnswer){e.next=29;break}return e.next=25,this.removeConditionsUntilLastMarker(r,this.step.stepId,this.run.version);case 25:l=e.sent,r=l.found?this.updateConditions(r,this.step.stepId,!1,this.step.type,!1):this.updateConditions(r,this.step.stepId,!1,this.step.type,!0),e.next=30;break;case 29:r=this.updateConditions(r,this.step.stepId,!1,this.step.type,!0);case 30:if(u={stepId:this.step.stepId,stepNumber:this.step.number,nbTry:1,ended:s,score:n,reward:0,status:o,useHint:!1,date:new Date,online:!1},"new-item"===this.step.type&&(this.run.inventory?this.run.inventory.push(this.step.answers):this.run.inventory=[this.step.answers],-1===r.indexOf("objectWon_"+this.step.stepId)&&r.push("objectWon_"+this.step.stepId)),!i){if(c=!1,this.run.answers&&this.run.answers.length>1)for(d=0;d<this.run.answers.length;d++)this.run.answers[d]&&this.run.answers[d].stepId&&null!==this.run.answers[d].stepId&&this.run.answers[d].stepId===this.step.stepId&&(c=!0,u.nbType=this.run.answers[d].nbTry+1,u.useHint=this.run.answers[d].useHint,this.run.answers[d]=u);c||(this.run.answers||(this.run.answers=[]),this.run.answers.push(u))}return this.run.conditionsDone=r,e.next=36,this.saveOfflineRun(this.questId,this.run);case 36:if(f=e.sent,!f){e.next=39;break}return e.abrupt("return",!0);case 39:return e.abrupt("return",!1);case 40:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),passOfflineStep:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.run.conditionsDone=this.updateConditions(this.run.conditionsDone,t,!1,this.step.type,!0),e.next=3,this.saveOfflineRun(this.questId,this.run);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),offlineCheckAccess:function(){var e=n()(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t&&t.startDate&&t.startDate.enabled&&t.startDate.date)){e.next=5;break}if(i=new Date,r=Date.UTC(t.startDate.date.substr(0,4),t.startDate.date.substr(5,2),t.startDate.date.substr(8,2),0,0,0),!(i<r)){e.next=5;break}return e.abrupt("return",{message:"Step not yet available",date:t.startDate.date});case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),saveOfflineRun:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.dateUpdated=new Date,e.next=3,Ke.writeInFile(this.questId,"run_"+t+".json",JSON.stringify(i),!0);case 3:if(r=e.sent,!r){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),addStepToHistory:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.run.history.push(t),this.run.historyIndex=this.run.history.length,e.next=4,this.saveOfflineRun(this.questId,this.run);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getNextOfflineStep:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o,l,u,c,d,f,h,p,m,b,g,v;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,this.updateOfflineRun(t);case 3:if(!(this.run.historyIndex<this.run.history.length)){e.next=8;break}return this.run.historyIndex++,e.next=7,this.saveOfflineRun(t,this.run);case 7:return e.abrupt("return",this.run.history[this.run.historyIndex-1]);case 8:s=0;case 9:if(!(s<this.info.quest.steps.length)){e.next=17;break}return e.next=12,Ke.readFile(t,"step_"+this.info.quest.steps[s]+".json");case 12:n=e.sent,r.push(JSON.parse(n));case 14:s++,e.next=9;break;case 17:if(o=this.run.currentChapter,o){e.next=24;break}if(!(this.info.quest.chapters.length>0)){e.next=23;break}o=this.info.quest.chapters[0],e.next=24;break;case 23:return e.abrupt("return",!1);case 24:if(!i){e.next=58;break}return e.next=27,this.listSpecificTypeForAChapter(r,o,"locate-marker");case 27:if(l=e.sent,u=[],!(l&&l.length>0)){e.next=50;break}s=0;case 31:if(!(s<l.length)){e.next=50;break}if(!i||l[s].answers===i){e.next=34;break}return e.abrupt("continue",47);case 34:if(!this.run.conditionsDone||-1!==this.run.conditionsDone.indexOf("stepDone_"+l[s].stepId)){e.next=47;break}if(!(l[s].conditions.length>0)){e.next=46;break}c=0;case 37:if(!(c<l[s].conditions.length)){e.next=43;break}if(-1!==this.run.conditionsDone.indexOf(l[s].conditions[c])){e.next=40;break}return e.abrupt("continue",47);case 40:c++,e.next=37;break;case 43:u.push({id:l[s].stepId,nbConditions:l[s].conditions.length}),e.next=47;break;case 46:u.push({id:l[s].stepId,nbConditions:0});case 47:s++,e.next=31;break;case 50:if(0!==u.length){e.next=52;break}return e.abrupt("return",!1);case 52:for(d=0,s=0;s<u.length;s++)u[s].nbConditions>=d&&(f=u[s].id,d=u[s].nbConditions);h=this.run.conditionsDone,h.push("stepDone_"+f.toString()),this.run.conditionDone=h,this.run.currentStep=f;case 58:return e.next=60,this.listForAChapter(r,o);case 60:if(p=e.sent,m=!1,!(p&&p.length>0)){e.next=97;break}s=0;case 64:if(!(s<p.length)){e.next=97;break}if(!this.run.conditionsDone||-1!==this.run.conditionsDone.indexOf("stepDone_"+p[s].stepId)){e.next=94;break}if(!(p[s].conditions.length>0)){e.next=74;break}c=0;case 68:if(!(c<p[s].conditions.length)){e.next=74;break}if(-1!==this.run.conditionsDone.indexOf(p[s].conditions[c])){e.next=71;break}return e.abrupt("continue",94);case 71:c++,e.next=68;break;case 74:if("locate-marker"!==p[s].type){e.next=77;break}return m=!0,e.abrupt("continue",94);case 77:if("end-chapter"!==p[s].type){e.next=90;break}return e.next=80,this.moveToNextChapter();case 80:if(b=e.sent,"end"===b){e.next=85;break}return e.next=84,this.getNextOfflineStep(t,i);case 84:b=e.sent;case 85:return e.next=87,this.addStepToHistory(b);case 87:return e.abrupt("return",b);case 90:return g=p[s].stepId,e.next=93,this.addStepToHistory(g);case 93:return e.abrupt("return",g);case 94:s++,e.next=64;break;case 97:if(!this.info.quest||"simple"!==this.info.quest.editorMode||m){e.next=108;break}return e.next=100,this.moveToNextChapter();case 100:if(v=e.sent,"end"===v){e.next=107;break}return e.next=104,this.getNextOfflineStep(t,i);case 104:return v=e.sent,e.next=107,this.addStepToHistory(v);case 107:return e.abrupt("return",v);case 108:return e.abrupt("return",!1);case 109:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),listSpecificTypeForAChapter:function(){var e=n()(a.a.mark((function e(t,i,r){var s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=[],t)for(n=0;n<t.length;n++)t[n].chapterId.toString()===i.toString()&&t[n].type.toString()===r.toString()&&s.push(t[n]);return e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),listForAChapter:function(){var e=n()(a.a.mark((function e(t,i){var r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=[],t)for(s=0;s<t.length;s++)t[s].chapterId===i&&r.push(t[s]);return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),listWonObjects:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],!(this.run.conditionsDone&&this.run.conditionsDone.length>0)){e.next=23;break}i=0;case 3:if(!(i<this.run.conditionsDone.length)){e.next=23;break}if(-1===this.run.conditionsDone[i].indexOf("objectWon_")){e.next=20;break}return r=this.run.conditionsDone[i].replace("objectWon_",""),e.next=8,Ke.readFile(this.questId,"step_"+r+".json");case 8:if(s=e.sent,!s){e.next=20;break}if(n=JSON.parse(s),!(n.options&&n.options.picture&&n.options.title)){e.next=20;break}if(-1!==n.options.picture.indexOf("statics")){e.next=18;break}return e.next=15,Ke.readBinaryFile(this.questId,n.options.picture);case 15:o=e.sent,e.next=19;break;case 18:o=n.options.picture;case 19:t.push({step:r,picture:o,originalPicture:n.options.picture,title:n.options.title});case 20:i++,e.next=3;break;case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfStepIsAlreadyPlayedInRun:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.run&&this.run.conditionsDone&&this.run.conditionsDone.length>0)){e.next=3;break}if(-1===this.run.conditionsDone.indexOf("stepDone_"+t)){e.next=3;break}return e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateConditions:function(e,t,i,r,a){if(-1===e.indexOf("stepDone_"+t)&&a&&e.push("stepDone_"+t),-1!==e.indexOf("stepSuccess_"+t)){var s=e.indexOf("stepSuccess_"+t);e.splice(s,1)}if(-1!==e.indexOf("stepFail_"+t)){var n=e.indexOf("stepFail_"+t);e.splice(n,1)}var o=["info-text","info-video","new-item","character","end-chapter"];return-1===o.indexOf(r)&&(i?e.push("stepSuccess_"+t):e.push("stepFail_"+t)),e},removeStepFromConditions:function(e,t){for(var i=[],r=0;r<e.length;r++)-1!==e[r].indexOf("_"+t)&&i.push(r);for(r=i.length-1;r>=0;r--)e.splice(i[r],1);return e},removeConditionsUntilLastMarker:function(){var e=n()(a.a.mark((function e(t,i,r){var s,n,o,l,u,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[i],n=0;case 2:if(!(n<7)){e.next=18;break}return e.next=5,Ke.readFile(this.questId,"step_"+i+".json");case 5:if(l=e.sent,l&&(o=JSON.parse(l)),"locate-marker"!==o.type){e.next=9;break}return e.abrupt("break",18);case 9:if(u=!1,o.conditions&&o.conditions.length>0)for(c=0;c<o.conditions.length;c++)-1!==o.conditions[c].indexOf("stepDone_")&&(i=o.conditions[c].replace("stepDone_",""),s.push(i),u=!0);if(u){e.next=13;break}return e.abrupt("return",{found:!1,updatedCondition:t});case 13:if(6!==n){e.next=15;break}return e.abrupt("return",{found:!1,updatedCondition:t});case 15:n++,e.next=2;break;case 18:for(c=0;c<s.length;c++)t=this.removeStepFromConditions(t,s[c]);return e.abrupt("return",{found:!0,updatedCondition:t});case 20:case"end":return e.stop()}}),e,this)})));function t(t,i,r){return e.apply(this,arguments)}return t}(),moveToNextChapter:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=0,this.info.quest.chapters&&this.info.quest.chapters.length>0)if(this.run.currentChapter&&0!==this.run.currentChapter)for(i=0;i<this.info.quest.chapters.length;i++)this.info.quest.chapters[i]===this.run.currentChapter&&(t=i<this.info.quest.chapters.length-1?this.info.quest.chapters[i+1]:"end");else t=this.info.quest.chapters[0];return this.run.currentChapter=t,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Pi=Mi,Ri=(i("b3c5"),Object(ge["a"])(Pi,ri,ai,!1,null,"010c3fce",null)),Ii=Ri.exports,Oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.warnings.noNetwork?i("div",{staticClass:"dark-background"},[i("div",{staticClass:"bg-primary"},[i("div",{staticClass:"centered q-pa-lg"},[i("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),i("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),e.warnings.noNetwork?e._e():i("div",{staticClass:"dark-background"},[e.run&&e.run._id?i("div",{staticClass:"bg-primary"},[i("div",{staticClass:"centered"},[i("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouWin")))]),i("h2",{directives:[{name:"show",rawName:"v-show",value:e.run.score>0||0===e.run.reward,expression:"run.score > 0 || run.reward === 0"}],staticClass:"size-1 q-mt-sm q-mb-sm"},[e._v(e._s(e.run.score)+" "+e._s(e.$t("label.points"))+" ")]),i("h2",{directives:[{name:"show",rawName:"v-show",value:e.run.reward>0,expression:"run.reward > 0"}],staticClass:"size-1 q-mt-sm q-mb-sm"},[e._v(e._s(e.run.reward)+" "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),i("q-icon",{staticClass:"big-icon",attrs:{name:"fas fa-award",color:"secondary"}}),e.run.stars>1?i("q-icon",{staticClass:"big-icon q-ml-md",attrs:{name:"fas fa-award",color:"secondary"}}):e._e(),e.run.stars<=1?i("q-icon",{staticClass:"big-icon q-ml-md",staticStyle:{color:"#ed555d"},attrs:{name:"fas fa-award"}}):e._e(),e.run.stars>2?i("q-icon",{staticClass:"big-icon q-ml-md",attrs:{name:"fas fa-award",color:"secondary"}}):e._e(),e.run.stars<=2?i("q-icon",{staticClass:"big-icon q-ml-md",staticStyle:{color:"#ed555d"},attrs:{name:"fas fa-award"}}):e._e()],1),i("div",{staticClass:"q-pa-md centered"},[i("p",{staticClass:"centered"},[e._v(e._s(e.$t("label.YourLevel"))+" : "+e._s(e.$store.state.user.level))]),i("q-linear-progress",{staticStyle:{height:"30px"},attrs:{value:e.level.progress,stripe:"",rounded:"",color:"secondary"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"discovery"!==e.quest.data.type&&e.run.score>0&&e.quest&&e.quest.data&&"public"===e.quest.data.access,expression:"quest.data.type !== 'discovery' && run.score > 0 && quest && quest.data && quest.data.access === 'public'"}],staticClass:"q-mt-md q-ml-md q-mr-md q-pb-md centered"},[i("q-btn",{attrs:{icon:"people",color:"secondary",size:"lg",label:e.$t("label.ChallengeYourFriends")},on:{click:e.openChallengeBox}})],1),i("div",{staticClass:"centered q-mt-md"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),i("div",{staticClass:"q-px-md"},[i("q-btn",{staticClass:"full-width q-ml-md",attrs:{color:"secondary"},on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])],1),i("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[i("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1),"discovery"!==e.quest.data.type&&e.showAddReview&&e.quest&&e.quest.data&&"public"===e.quest.data.access?i("div",{staticClass:"q-mt-md q-ml-md q-mr-md q-pa-sm centered"},[i("h3",{staticClass:"size-2"},[e._v(e._s(e.$t("label.ReviewThisQuest"))+" ")]),i("p",[e._v(e._s(e.$t("label.Rating")+e.$t("label.Colon"))+" "),i("q-rating",{attrs:{max:5,size:"1.5rem",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),i("p",[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width",attrs:{rows:"5",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),i("q-btn",{staticClass:"full-width",attrs:{color:"secondary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}})],1):e._e(),e.isUserAuthor||e.isUserAdmin?e._e():i("div",{staticClass:"back centered q-pa-md bg-primary text-primary"},[i("q-btn",{staticClass:"text-primary bg-white full-width",attrs:{label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/map")}}})],1),e.isUserAuthor?i("div",{staticClass:"back centered q-pa-md bg-primary text-primary"},[i("q-btn",{staticClass:"text-primary bg-white full-width",attrs:{label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?i("div",{staticClass:"back centered q-pa-md bg-primary text-primary"},[i("q-btn",{staticClass:"text-primary bg-white full-width",attrs:{label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.data.version)}}})],1):e._e()],1):e._e(),e.warnings.noNetwork?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}],staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.ranking.show=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),i("div",{staticClass:"q-pl-md"},[e._v(e._s(e.$t("label.RankingEndIntro")))]),i("q-list",e._l(e.ranking.items,(function(t){return i("q-item",{key:t.id,class:t.className},[i("q-item-section",{attrs:{avatar:""}},[i("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}})]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),i("q-item-section",{attrs:{side:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),t.isFriend||t.id===e.$store.state.user._id?e._e():i("q-item-section",{attrs:{side:""},nativeOn:{click:function(i){return e.addFriend(t.id)}}},[i("q-icon",{attrs:{name:"person_add",color:"primary"}})],1),t.isFriend?i("q-item-section",{attrs:{side:""}}):e._e()],1)})),1),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary",label:e.$t("label.CloseEndRanking")},on:{click:function(t){e.ranking.show=!1}}})],1)],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeChallenge}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?i("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?i("div",[i("div",{staticClass:"q-pa-md centered"},[i("q-btn",{attrs:{color:"primary",size:"lg",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),i("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?i("div",[i("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return i("q-item",{key:t.friendId},[i("q-item-section",[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),i("q-item-label",[e._v(e._s(t.name))]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(i){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),i("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?i("div",{staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeBonus}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.YouWonABonus")))]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"q-ma-sm"},[i("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),i("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")])],1)],1)]):e._e()]),i("transition",{attrs:{name:"slideInBottom"}},[e.showReward?i("div",{staticClass:"panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeReward}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),i("div",{staticClass:"q-pa-md"},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),i("p",[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e()]),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),e.level.upgraded?i("div",{staticClass:"fadein-message"},[e._v("+100 "),i("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},Fi=[],$i={add:function(e,t,i,r,a){return Ae().put("review/add",{questId:e,version:t,runId:i,text:r,rating:a}).catch((function(e){return console.log(e.request)}))},list:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae().get("review/list",{params:{filter:JSON.stringify(t),options:JSON.stringify(i)}});case 2:if(r=e.sent,200===r.status){e.next=5;break}throw new Error("Request "+r.config.url+" failed with code "+r.status+"/"+r.statusText+". Data returned: "+r.data);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}()},Di={components:{story:Et,suggest:Rt},data:function(){return{title:"Enquête réussie",rating:0,comment:"",ranking:{show:!1,items:[]},score:{},level:{color:"white",upgraded:!1},run:{score:0,stars:1},quest:{},friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},story:{step:null,data:null},questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ke.clearAllRunningProcesses(),e.next=3,this.loadData();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadData:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.noNetwork=!1,t=!1,this.$q.loading.show(),e.next=5,Xt.listForAQuest(this.questId);case 5:if(i=e.sent,!i){e.next=56;break}if(i&&i.data&&i.data.length>0)for(r=0;r<i.data.length;r++)"finished"===i.data[r].status&&(this.run=i.data[r]),"in-progress"===i.data[r].status&&(this.run=i.data[r],t=!0);return e.next=10,this.getRanking();case 10:if(!this.run||!this.run.version){e.next=16;break}return e.next=13,Je.getById(this.questId,this.run.version);case 13:this.quest=e.sent,e.next=19;break;case 16:return e.next=18,Je.getLastById(this.questId);case 18:this.quest=e.sent;case 19:if(!this.quest||!this.quest.data){e.next=26;break}return this.isUserAuthor=this.$store.state.user._id===this.quest.data.authorUserId,e.next=23,$i.list({questId:this.questId,userId:this.$store.state.user._id,version:this.run.version},{limit:1});case 23:s=e.sent,n=s.data&&s.data.length>=1,this.showAddReview=!this.isUserAdmin&&!this.isUserAuthor&&!n;case 26:return this.score.old=this.$store.state.user.score,this.initProgression(),e.next=30,this.getOfflineRunData();case 30:return o=e.sent,e.next=33,Xt.endRun(this.run._id,o,this.questId,this.quest.data.version,this.quest.data.mainLanguage);case 33:if(l=e.sent,!l||!l.data){e.next=44;break}return this.run.score=l.data.score,this.run.reward=l.data.reward,this.run.stars=l.data.stars,l.data.newBonus&&""!==l.data.newBonus&&(this.run.bonus=l.data.newBonus,this.showBonus=!0),this.run.questData.rewardPicture&&""!==this.run.questData.rewardPicture&&(this.showReward=!0),e.next=42,this.removeOfflineData();case 42:e.next=45;break;case 44:this.warnings.noNetwork=!0;case 45:if(this.run._id){e.next=50;break}return e.next=48,Xt.listForAQuest(this.questId);case 48:i=e.sent,i&&i.data&&i.data.length>0&&(this.run=i.data[0]);case 50:this.startStory(),this.score.new=t?this.score.old+this.run.score:this.score.old,this.$store.state.user.score=this.score.new,Ke.setTimeout(this.updateProgression,3e3),e.next=57;break;case 56:this.warnings.noNetwork=!0;case 57:this.$q.loading.hide();case 58:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initProgression:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.level=jt(this.score.old);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateProgression:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.ranking.show||this.showChallenge||this.showBonus?Ke.setTimeout(this.updateProgression,2e3):(t=jt(this.score.new),t.level>this.level.level?(this.level.progress=1,this.$store.state.user.level=t.level,this.level=t,this.level.progress=.1,this.level.upgraded=!0):this.level=t);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRanking:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===this.questId){e.next=5;break}return e.next=3,Xt.listPlayersForThisQuest(this.questId);case 3:t=e.sent,t&&t.data&&t.data.length>0&&(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),this.refreshPosition(),Ke.setTimeout(this.showRanking,5e3));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showRanking:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(this.ranking.show=!0,t=!1,i=0;i<this.ranking.items.length;i++)this.ranking.items[i].id===this.$store.state.user._id&&(t=!0);t||(this.ranking.items.push({id:this.$store.state.user._id,score:this.run.score,name:this.$store.state.user.name,picture:this.$store.state.user.picture,position:this.ranking.items.length+1,isFriend:!0,className:"selected"}),Ke.setTimeout(this.updateRanking,3e3));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],i=this.ranking.items[e-1];this.$set(this.ranking.items,e,i),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),Ke.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showChallenge=!0,e.next=3,Xe.listFriends();case 3:t=e.sent,t&&t.data&&t.data.length>0&&(this.friends=t.data,this.filteredFriends=this.friends);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeChallenge:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showChallenge=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),challenge:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.challengeFriend(t.friendId,this.run._id);case 2:for(i=0;i<this.filteredFriends.length;i++)this.filteredFriends[i].friendId===t.friendId&&(this.filteredFriends[i].isChallenged=!0,o["a"].set(this.filteredFriends,i,this.filteredFriends[i]));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),challengeAll:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xe.challengeFriend("all",this.run._id);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeBonus:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showBonus=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeReward:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.showReward=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startStory:function(){null===this.story.step&&(this.story.step=9,this.story.data={score:this.run.score,level:this.$store.state.user.level,progress:this.level.progress,discovery:"5b7303ec4efbcd1f8cb101c6"===this.questId})},addReview:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.rating){e.next=3;break}return ut(this.$t("label.PleaseRateTheQuest"),"warning"),e.abrupt("return",!1);case 3:return this.$q.loading.show(),e.next=6,$i.add(this.questId,this.run.version,this.run._id,this.comment,this.rating);case 6:this.$q.loading.hide(),this.reviewSent=!0,ut(this.$t("label.ReviewSent"),"positive");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getOfflineRunData:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.readFile(this.questId,"run_"+this.questId+".json");case 2:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",JSON.parse(t));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeOfflineData:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.removeDirectory(this.questId);case 2:return t=e.sent,e.next=5,this.removeQuestFromOfflineList(this.questId);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeQuestFromOfflineList:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ke.checkIfFileExists("","quests.json");case 2:if(i=e.sent,!i){e.next=13;break}return e.next=6,Ke.readFile("","quests.json");case 6:for(s=e.sent,r=JSON.parse(s),n=-1,o=0;o<r.list.length;o++)r.list[o].questId===t&&(n=o);return-1!==n&&r.list.splice(n,1),e.next=13,Ke.writeInFile("","quests.json",JSON.stringify(r),!0);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},Ni=Di,Li=(i("c840"),Object(ge["a"])(Ni,Oi,Fi,!1,null,"c9fd11ea",null)),zi=Li.exports,ji=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},Hi=[],Bi={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},Ui=Bi,Qi=Object(ge["a"])(Ui,ji,Hi,!1,null,null,null),Vi=Qi.exports,Yi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"wrapper"},[e.access?e._e():i("div",[i("h1",{staticClass:"size-3 centered"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderIntro"))+"\n      ")]),i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-secondary text-white"},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.PublicQuest"))+" - "+e._s(e.$t("label.Free")))])]),i("q-card-section",[e._v("\n            "+e._s(e.$t("label.PublicQuestDesc1"))+"\n          ")]),i("q-card-section",[e._v("\n            "+e._s(e.$t("label.PublicQuestDesc2"))+"\n          ")]),i("q-separator"),i("q-card-actions",[i("q-btn",{attrs:{flat:"","test-id":"btn-create-public-quest"},on:{click:function(t){return e.changeAccess("public")}}},[e._v(e._s(e.$t("label.CreatePublicQuest")))])],1)],1)],1),e.privateQuest.buyable?i("div",{staticClass:"q-pa-md"},[i("q-card",{staticClass:"my-card bg-primary text-white"},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.PrivateQuest"))+" - "+e._s(e.privateQuest.price))])]),i("q-card-section",[e._v("\n            "+e._s(e.$t("label.PrivateQuestDesc1"))+"\n          ")]),i("q-separator"),i("q-card-actions",[i("q-btn",{attrs:{flat:""},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.BuyPrivateQuest")))])],1)],1)],1):e._e(),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.Cancel")))])],1)]),"public"===e.access?i("div",{staticClass:"grow"},[i("h1",{staticClass:"size-3 centered"},[e._v(e._s(e.$t("label.CreateYourPublicQuest")))]),i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),i("div",{staticClass:"q-px-md"},[i("q-btn",{staticClass:"full-width center",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[e._v(e._s(e.$t("label.AcceptTheRules")))]),i("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"private"===e.access?i("div",{staticClass:"grow"},[i("h1",{staticClass:"size-3 centered"},[e._v(e._s(e.$t("label.CreateYourPrivateQuest")))]),i("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}),i("div",{staticClass:"q-px-md"},[i("q-btn",{staticClass:"full-width center",attrs:{color:"primary"},on:{click:function(t){return e.buyPrivateQuest()}}},[e._v(e._s(e.$t("label.AcceptAndBuyAPrivateQuest"))+" ("+e._s(e.privateQuest.price)+")")]),i("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e()])])},Wi=[],Gi={data:function(){return{access:null,privateQuest:{price:"-",buyable:!1}}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initPay();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},changeAccess:function(e){this.access=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order("privatequestprice");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),createNewQuest:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={title:{}},e.next=3,Je.create(t,this.access);case 3:i=e.sent,i&&i.data&&i.data.questId?this.$router.push("/quest/builder/"+i.data.questId):ut(this.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initPay:function(){var e=n()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.cordova){e.next=2;break}return e.abrupt("return");case 2:t=this,store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){ut(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(function(){var e=n()(a.a.mark((function e(i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.privateQuest.price=i.price,i.canPurchase&&(t.privateQuest.buyable=!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var e=n()(a.a.mark((function e(t){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.savePurchase(t);case 2:r=e.sent,r?t.finish():ut(i.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),store.refresh();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),savePurchase:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.purchasePrivateQuest(null,t);case 2:if(i=e.sent,!(i&&i.data&&i.data.status&&"ok"===i.data.status)){e.next=7;break}return e.next=6,this.createNewQuest();case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancel:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/map");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Ki=Gi,Ji=Object(ge["a"])(Ki,Yi,Wi,!1,null,null,null),Xi=Ji.exports,Zi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"bg-white":!e.chapters.showNewStepOverview}},[e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"title-bar"},[!e.readOnly||"published"!==e.quest.status&&"unpublished"!==e.quest.status?e._e():i("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n      "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n    ")]),i("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn",attrs:{to:{path:"/map"},color:"grey"}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("h1",{staticClass:"size-4 q-pl-md"},[e.tabs.progress>0?i("span",[e.form.fields.title[e.languages.current]?i("span",[e.form.fields.title[e.languages.current].length<=30?i("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?i("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():i("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?i("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?i("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):i("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),e.chapters.showNewStepOverview?e._e():i("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[i("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:e.$t("label.Intro")+" ("+e.languages.current+")",default:""}}),i("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}),i("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.isEdition&&"public"===e.quest.access?i("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(4),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?i("q-tab",{attrs:{name:"results",icon:e.getTabIcon(5),label:e.$t("label.Results")}}):e._e()],1),i("q-separator"),"settings"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md",class:{"tab-content-120":!e.isIOs}},[this.quest.languages&&0!==this.quest.languages.length?e._e():i("div",[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"language"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),i("q-option-group",{attrs:{type:"radio",color:"primary",options:e.form.languages,disable:e.readOnly},model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.SelectTheLanguageAndClickOnNextButton")))])],1)],1),i("q-btn",{staticClass:"full-width",attrs:{big:"",disabled:e.readOnly,color:"primary",label:e.$t("label.Save"),"test-id":"btn-save-language"},on:{click:function(t){return e.selectLanguage()}}})],1),this.quest.languages.length>0?i("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?i("div",[i("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")])],1):e._e(),"public"===this.quest.access?i("div",[i("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")])],1):e._e(),this.quest.isPremium?i("div",[i("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")])],1):e._e(),i("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),i("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}}),i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}),i("div",[e._v("\n        "+e._s(e.$t("label.QuestType"))+" \n        "),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),i("div",{staticClass:"q-gutter-sm"},[i("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),i("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1)],1),i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}}),i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),i("div",{staticClass:"description"},[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),e.isIOs?e._e():i("div",[i("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest")},on:{place_changed:e.setLocation},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}):e._e()],1),i("a",{on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?i("div",[i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}}),i("div",[i("a",{on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])],1):e._e(),null!==e.form.fields.picture?i("div",[i("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.picture}})]):e._e(),e.isIOs?e._e():i("div",[e.readOnly?e._e():i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.ModifyThePicture")},on:{click:function(t){return e.$refs["picturefile"].click()}}}),i("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.ModifyThePicture"))+":\n        "),i("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),this.quest.isPremium?i("div",[i("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),e.form.fields.customization?i("div",[i("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?i("div",[i("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),i("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.logo}})]):e._e(),e.isIOs||e.readOnly?e._e():i("div",[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddALogo")},on:{click:function(t){return e.$refs["logofile"].click()}}}),i("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),i("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?i("div",[e._v("\n          "+e._s(e.$t("label.AddALogo"))+":\n          "),i("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e(),e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture?i("div",[i("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),i("img",{staticClass:"full-width",staticStyle:{"background-color":"#f00"},attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),e._v("\n          "+e._s(e.$t("label.RewardPictureWarning"))+"\n        ")]):e._e(),e.isIOs||e.readOnly?e._e():i("div",{staticClass:"q-mt-md"},[i("q-btn-group",{staticClass:"full-width"},[i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddAReward")},on:{click:function(t){return e.$refs["rewardfile"].click()}}}),i("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),i("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),e.isIOs&&!e.readOnly?i("div",{staticClass:"q-mt-md"},[e._v("\n          "+e._s(e.$t("label.AddAReward"))+":\n          "),i("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),i("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1):e._e()],1):e._e(),this.quest.isPremium?e._e():i("div",[i("q-btn-group",{staticClass:"full-width q-mt-lg"},[i("q-btn",{attrs:{color:"secondary",label:e.$t("label.MovePremium")},on:{click:function(t){return e.openPremiumBox()}}}),i("q-btn",{attrs:{color:"secondary",icon:"help",split:""},on:{click:function(t){return e.openPremiumBox()}}})],1)],1),e.readOnly?e._e():i("q-btn",{staticClass:"full-width q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1):e._e(),"published"!==e.quest.status?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{attrs:{flat:"",color:"primary",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]),"steps"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md tab-content-120"},[e.warnings.stepsMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?i("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?i("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),i("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return i("li",{key:t._id,staticClass:"list-group-item"},[e.readOnly?e._e():i("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),i("div",[i("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),i("span",{staticStyle:{"margin-top":"4px"},on:{click:function(i){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():i("q-btn",{staticClass:"float-right",on:{click:function(i){return e.removeStep(t.stepId)}}},[i("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():i("q-btn",{staticClass:"float-right",on:{click:function(i){return e.modifyStep(t)}}},[i("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():i("p",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary",icon:"fas fa-plus-circle",label:e.$t("label.AddAStep"),"test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}})],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{attrs:{color:"primary",icon:"play_arrow",label:e.$t("label.TestYourQuest")},on:{click:function(t){return e.testQuest()}}})],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?i("p",{staticClass:"smaller"},[i("a",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.getReadableStorageUsage()))]),i("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e(),"advanced"===e.form.fields.editorMode?i("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():i("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),i("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t){return i("li",{key:t._id,staticClass:"step-list list-group-item"},[e.readOnly?e._e():i("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),i("div",[i("p",{staticClass:"bigger"},[e._v("\n              "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n              "),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md size-1",staticStyle:{"margin-top":"-8px"},attrs:{name:"add_box"},nativeOn:{click:function(i){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(i){return e.removeChapter(t.chapterId)}}}),e.readOnly?e._e():i("q-icon",{staticClass:"float-right q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(i){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?i("q-icon",{staticClass:"float-right a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(i){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():i("div",[e._v("\n              "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n            ")]),e._l(t.steps,(function(r){return i("div",{key:r._id,staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[i("div",{staticClass:"step-text"},[i("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===r.level},attrs:{color:"grey",name:e.getIconFromStepType(r.type)}}),e.readOnly||r.error?e._e():i("span",{on:{click:function(t){return e.playStep(r)}}},[e._v(e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage]))]),!e.readOnly&&r.error?i("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(r.error)}}},[i("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                  "+e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage])+"\n                ")],1):e._e(),e.readOnly?i("span",[e._v(e._s(r.title[e.languages.current]||r.title[e.quest.mainLanguage]))]):e._e()],1),i("div",{staticClass:"step-button"},[e.readOnly?e._e():i("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(r)}}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(i){return e.insertStep(t.chapterId,r.stepId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(r.stepId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{icon:"delete"}})],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():i("p",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary",icon:"fas fa-plus-circle",label:e.$t("label.AddASChapter")},on:{click:function(t){return e.addChapter()}}})],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{attrs:{color:"primary",icon:"play_arrow",label:e.$t("label.TestYourQuest")},on:{click:function(t){return e.testQuest()}}})],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?i("p",{staticClass:"smaller"},[i("a",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.getReadableStorageUsage()))]),i("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e()]),"publish"!==e.tabs.selected||e.chapters.showNewStepOverview?e._e():i("div",{staticClass:"q-pa-md tab-content-120"},["old"===e.quest.status?i("div",[i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n      ")])],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?i("div",["tovalidate"===e.quest.status?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.QuestUnderValidation"))+"\n      ")]):e._e(),"rejected"===e.quest.status?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.QuestPublicationRejected"))+"\n      ")]):e._e(),e.chapters.items.length>100?i("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n        "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n      ")]):e._e(),i("p",{staticClass:"centered q-pa-md"},[i("q-btn",{attrs:{color:"primary",icon:"play_arrow",label:e.$t("label.TestYourQuest")},on:{click:function(t){return e.testQuest()}}})],1),"private"===e.quest.access?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"people"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Invitees"))+" "),e.quest.limitations&&e.quest.limitations.nbInvitees?i("span",[e._v("("+e._s(e.invitee.items.length)+"/"+e._s(e.quest.limitations.nbInvitees)+")")]):e._e()]),e._l(e.invitee.items,(function(t){return i("p",{key:t.id},[i("q-toggle",{attrs:{label:t.name},on:{input:function(i){return e.removeInvitee(t.id)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})],1)})),e.warnings.inviteeMissing?i("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),i("q-input",{attrs:{type:"text",label:e.$t("label.InvitePeople"),"bottom-slots":"",error:!e.invitee.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addInvitee()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n              "+e._s(e.$t("label.InviteInviteesHelp"))+"\n            ")]},proxy:!0}],null,!1,3442983076),model:{value:e.invitee.new.email,callback:function(t){e.$set(e.invitee.new,"email",t)},expression:"invitee.new.email"}})],2)],1):e._e(),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.LanguagesPublished")))]),e._l(e.form.fields.languages,(function(t){return i("p",{key:t.lang},[i("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(i){return e.publish(t.lang)}},model:{value:t.published,callback:function(i){e.$set(t,"published",i)},expression:"lang.published"}})],1)})),"public"===e.quest.access?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?i("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return i("p",{key:t.id},[i("q-toggle",{attrs:{label:t.name},on:{input:function(i){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?i("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),i("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[i("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n              "+e._s(e.$t("label.InviteEditorsHelp"))+"\n            ")]},proxy:!0}],null,!1,3177067428),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),i("div",[e._v("\n            "+e._s(e.$t("label.MarkersToPrint"))+"\n            "),e.isHybrid?e._e():i("q-btn",{attrs:{color:"primary",icon:"fa fa-download",label:e.$t("label.Download"),type:"a",href:"statics/markers/all.pdf",download:""}}),e.isHybrid?i("q-btn",{attrs:{color:"primary",icon:"fa fa-download",label:e.$t("label.Download")},on:{click:function(t){return e.downloadMarkers()}}}):e._e()],1),this.quest.isPremium?i("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest",{code:e.questId}))}}):e._e()],1)],1),"published"!==e.quest.status?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),i("q-btn",{attrs:{color:"primary",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}}),e._v("\n          "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n        ")],1)],1):e._e()],1):e._e()]),"reviews"===e.tabs.selected&&!e.chapters.showNewStepOverview&&e.isEdition&&"public"===e.quest.access?i("div",{staticClass:"q-pa-md tab-content-120"},[i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))]),i("p",[e._v(e._s(e.$t("label.TotalNumberOfPlayers"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.nbPlayers))]),i("p",[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers))]),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?i("p",[e._v("\n          "+e._s(e.$t("label.NumberOfPlayersByAge"))+"\n            "),i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return i("q-item",{key:t._id},[t&&!t._id?i("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?i("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?i("p",[e._v("\n          "+e._s(e.$t("label.NumberOfPlayersBySex"))+"\n            "),i("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return i("q-item",{key:t._id},[i("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),i("p",[e._v(e._s(e.$t("label.AverageScore"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.averageScore))])],1):e._e()],1),e.reviews.length>0?i("q-item",[i("q-item-section",{attrs:{side:"",top:""}},[i("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1),i("q-item-section",[i("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),i("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return i("q-item",{key:t._id},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("img",{attrs:{src:e.getAvatar(t.userId.picture)}})])],1),i("q-item-section",[i("q-item-label",[e._v("\n                  "+e._s(t.userId.name)+"\n                ")]),i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(i){e.$set(t,"rating",i)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                ")],1),i("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?i("q-item",[i("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1):e._e()],1):e._e(),"results"===e.tabs.selected&&!e.chapters.showNewStepOverview&&e.isEdition&&"private"===e.quest.access?i("div",{staticClass:"q-pa-md tab-content-120"},["published"===e.quest.status?i("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?i("div",[i("q-list",e._l(e.ranking.items,(function(t,r){return i("q-item",{key:r},[i("q-item-section",{attrs:{top:"",avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"/statics/icons/game/profile-small.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),"finished"===t.status?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?i("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n      ")]):e._e(),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),i("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?i("div",[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?i("div",[e._v("\n        "+e._s(e.$t("label.FinalRankingIntro"))+"\n        "),i("q-list",e._l(e.ranking.items,(function(t,r){return i("q-item",{key:r},[i("q-item-section",{attrs:{avatar:""}},[t.position<=10?i("img",{attrs:{src:"statics/icons/game/medal-"+t.position+".png"}}):e._e()]),i("q-item-section",[i("q-item-label",[e._v(e._s(t.name))]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),i("q-item-section",{attrs:{side:"",top:"",avatar:""}},[i("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?i("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?i("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():i("img",{attrs:{src:"/statics/icons/game/profile-small.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?i("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n      ")]):e._e()]):e._e()]):e._e(),i("q-dialog",{attrs:{maximized:""},model:{value:e.chapters.showNewStepPage,callback:function(t){e.$set(e.chapters,"showNewStepPage",t)},expression:"chapters.showNewStepPage"}},[i("div",[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),i("div",[i("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),i("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return i("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[i("div",{staticClass:"centered q-pa-sm"},[i("div",[e._v(e._s(e.$t("stepType."+t.description)))]),i("q-btn",{attrs:{color:"primary",label:e.$t("label.UseThisGame"),"test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(i){return e.selectStepType(t)}}})],1)])})),1),i("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),i("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return i("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[i("div",{staticClass:"centered q-pa-sm"},[i("div",[e._v(e._s(e.$t("stepType."+t.description)))]),i("q-btn",{attrs:{color:"primary",label:e.$t("label.UseThisGame"),"test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(i){return e.selectStepType(t)}}})],1)])})),1),i("div",{staticClass:"q-pa-md centered"},[i("q-btn",{attrs:{color:"secondary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]),i("q-dialog",{attrs:{maximized:""},model:{value:e.chapters.showNewStepPageSettings,callback:function(t){e.$set(e.chapters,"showNewStepPageSettings",t)},expression:"chapters.showNewStepPageSettings"}},[i("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1),e.chapters.showNewStepOverview?i("div",{staticClass:"fullscreen"},[i("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",color:e.quest.customization&&e.quest.customization.color&&""!==e.quest.customization.color?e.quest.customization.color:"primary",itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu fixed-bottom"},[i("div",{staticClass:"row white-buttons"},[i("div",{staticClass:"col centered q-pb-md"},[e.quest.customization.logo&&""!==e.quest.customization.logo?i("q-btn",{staticClass:"bg-white",attrs:{round:"",size:"lg"}},[i("q-avatar",{attrs:{size:"60px"}},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),i("div",{staticClass:"col centered q-pb-md"},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])])],1):e._e(),i("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[i("div",{staticClass:"inventory panel-bottom q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?i("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[i("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.inventory.items.length>0&&!e.warnings.inventoryMissing?i("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?i("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),i("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,r){return i("div",{key:r,on:{click:function(i){return e.selectItem(t)}}},[i("img",{attrs:{src:t.picture.indexOf("statics/")>-1?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),i("p",[e._v(e._s(t.title))])])})),0)])]),i("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[i("div",{staticClass:"hint panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?i("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?i("p",[e._v(e._s(e.hint.label[e.languages.current]))]):e._e(),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[e._v(e._s(e.$t("label.Close")))])],1)]),i("transition",{attrs:{name:"slideInBottom"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"hint panel-bottom q-pa-md"},[i("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,r){return i("q-list",{key:t.id},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[i("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(r)}}},[i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),i("q-item-section",[e._v(e._s(t.size)+" Ko")]),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{icon:"delete"},on:{click:function(i){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?i("div",[e._v("\n        "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n      ")]):e._e(),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),i("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),i("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[i("div",{staticClass:"q-pa-md"},[i("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),i("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),i("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():i("div",{staticClass:"centered"},[i("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),i("q-btn",{staticClass:"q-mb-xl",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?i("div",{staticClass:"centered"},[i("q-btn",{staticClass:"q-mb-sm",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),i("q-btn",{staticClass:"q-mb-xl",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?i("div",{staticClass:"fixed-bottom over-map fit"},[i("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1)},er=[],tr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-md"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.close}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),null!==e.selectedStep.type?i("h1",{staticClass:"size-3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e(),i("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code?i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"",maxlength:e.mainTextMaxLength,error:e.$v.selectedStep.form.text[e.lang].$error,"error-message":e.$t("label.KeepEnigmaQuestionsShort"),"test-id":"step-text"},on:{blur:e.$v.selectedStep.form.text[e.lang].$touch,input:e.$v.selectedStep.form.text[e.lang].$touch},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return e.$refs["backgroundfile"].click()}}},[i("q-icon",{attrs:{name:"cloud_upload"}}),i("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),i("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?i("div",[e._v("\n      "+e._s(e.$t("label.UploadABackgroundImage"))+":\n      "),i("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage?e._e():i("p",[e._v(e._s(e.$t("label.WarningImageResize")))]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?i("div",[i("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),i("br"),i("a",{on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()]),"info-video"==e.options.type.code?i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),i("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?i("div",[e._v("\n      "+e._s(e.$t("label.UploadAVideo"))+":\n      "),i("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:null===e.selectedStep.form.videoStream,expression:"selectedStep.form.videoStream === null"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),null!==e.selectedStep.form.videoStream?i("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[i("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream,type:"video/mp4"}})]):e._e()])]):e._e(),"new-item"==e.options.type.code?i("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():i("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,r){return i("div",{key:r,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(r)}}},[i("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[r].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():i("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),i("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.UploadTheItemPicture"))+":\n        "),i("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),i("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),i("a",{on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),i("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?i("div",[i("h2",[e._v(e._s(e.$t("label.Character")))]),i("div",{staticClass:"answer"},[i("q-radio",{attrs:{val:"1"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),e._m(0)],1),i("div",{staticClass:"answer"},[i("q-radio",{attrs:{val:"2","test-id":"radio-character-to-select"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),e._m(1)],1),i("div",{staticClass:"answer"},[i("q-radio",{attrs:{val:"3"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),e._m(2)],1),i("div",{staticClass:"answer"},[i("q-radio",{attrs:{val:"4"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),e._m(3)],1),i("div",[e.quest.isPremium?i("div",{staticClass:"q-mb-sm"},[e._v("\n        "+e._s(e.$t("label.OrDownloadAFile"))+"\n        "),e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.UploadACharacter"))+":\n          "),i("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.character.$error,expression:"$v.selectedStep.form.options.character.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.character&&e.selectedStep.form.options.character.length>1?i("div",{staticClass:"centered"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/character/"+e.selectedStep.form.options.character}})]):e._e()]):e._e(),e.quest.isPremium?e._e():i("div",{staticClass:"q-mb-sm"},[i("q-btn",{staticClass:"full-width",attrs:{type:"button",color:"grey",label:e.$t("label.UploadACharacter")},on:{click:function(t){e.premium.show=!0}}})],1)])]):e._e(),"geolocation"==e.options.type.code?i("div",{staticClass:"location-gps"},[i("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),i("div",{staticClass:"fields-group"},[e.isIOs?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address"),value:e.selectedStep.form.options.destination},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}})],1),i("a",{on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.DefineGPSLocation"))+"\n        "),i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs?e._e():i("q-list",[i("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)]):e._e(),"choose"==e.options.type.code?i("div",[i("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),i("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),i("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),i("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),i("p",[e._v(e._s(e.$t("label.SelectTheGoodAnswer")))]),e._l(e.selectedStep.form.options.items,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("q-radio",{attrs:{val:r,"test-id":"radio-answer-"+r},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}}),i("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+r},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[r].text.$touch}},model:{value:t.text,callback:function(i){e.$set(t,"text",i)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[r].text.required?i("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[r].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",["image"===e.config.choose.answerType&&null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+r},on:{change:function(t){return e.uploadAnswerImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+r},on:{change:function(t){return e.uploadAnswerImage(r,t)}}})]):e._e(),i("q-btn",{attrs:{"test-id":"delete-answer-"+r},on:{click:function(t){return e.deleteAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddAnAnswer"))+"\n    ")])],2):e._e(),"write-text"==e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField"),"test-id":"input-text-answer"},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-keypad"==e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"6","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?i("div",{staticClass:"code-color"},[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),i("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),i("table",[i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("q-select",{ref:"colorSelect"+r,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+r},model:{value:e.unformatedAnswer[r],callback:function(t){e.$set(e.unformatedAnswer,r,t)},expression:"unformatedAnswer[index]"}})],1)})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[r],on:{click:function(t){return e.triggerClickOnColorSelect(r)}}},[e._v(" ")])])})),0)])],1):e._e(),"code-image"==e.options.type.code?i("div",{staticClass:"code-image"},[i("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[r].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",[null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+r},on:{change:function(t){return e.uploadCodeAnswerImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+r},on:{change:function(t){return e.uploadCodeAnswerImage(r,t)}}})]):e._e(),i("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddAnImage"))+"\n    ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?i("div",[i("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),i("table",[i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r,staticClass:"text-center",attrs:{"test-id":"previous-image-"+r},on:{click:function(t){return e.previousCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r},[i("img",{attrs:{id:"image-code-setting-"+r,src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),0),i("tr",e._l(e.unformatedAnswer,(function(t,r){return i("td",{key:r,staticClass:"text-center",attrs:{"test-id":"next-image-"+r},on:{click:function(t){return e.nextCodeAnswer(r)}}},[i("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"image-recognition"==e.options.type.code?i("div",{staticClass:"image-recognition"},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["image-to-recognize"].click()}}}),i("input",{ref:"image-to-recognize",attrs:{id:"image-to-recognize",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImageToRecognize}})],1),e.isIOs?i("div",[e._v("\n      "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n      "),i("input",{ref:"image-to-recognize",attrs:{id:"image-to-recognize",type:"file",accept:"image/*"},on:{change:e.uploadImageToRecognize}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.answers.$error,expression:"$v.selectedStep.form.answers.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),""!=e.selectedStep.form.answers?i("div",[i("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/image-recognition/"+e.selectedStep.form.answers}})]):e._e()]):e._e(),"jigsaw-puzzle"===e.options.type.code?i("div",[i("div",{staticClass:"background-upload"},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),i("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.UploadThePuzzlePicture"))+":\n        "),i("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?e._e():i("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture}})]):e._e()]),i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?i("div",[i("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,r){return i("div",{key:r,staticClass:"answer"},[i("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),i("p",[null!==t.imagePath?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():i("span",[i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][r].click()}}}),i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+r},on:{change:function(t){return e.uploadMemoryImage(r,t)}}})],1),e.isIOs?i("span",[i("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+r},on:{change:function(t){return e.uploadMemoryImage(r,t)}}})]):e._e(),i("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(r)}}},[i("q-icon",{attrs:{name:"clear"}})],1)],1)})),i("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n      "+e._s(e.$t("label.AddACardPair"))+"\n    ")])],2):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage?i("div",{staticClass:"find-item"},[i("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),i("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[i("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: 16vw; height: 16vw;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.options.type.code?i("div",{staticClass:"inventory"},[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:e.$v.selectedStep.form.answerItem.$touch},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?i("div",[e._v("\n      "+e._s(e.$t("label.SelectedObject"))+" :\n      "),i("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e()],1):e._e(),"find-item"===e.options.type.code&&null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage?i("div",{staticClass:"find-item"},[i("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),i("div",{ref:"findItemPicture",style:"overflow: hidden;background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 90vw; height: 120vw; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[i("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: 16vw; height: 16vw;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"===e.options.type.code?i("div",{staticClass:"locate-item-ar"},[i("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),i("div",{staticClass:"fields-group"},[i("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),i("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),i("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?i("div",[e._v("\n          "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n          "),i("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?i("div",[i("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),i("div",[i("p",[e._v(e._s(e.$t("label.ObjectSize")))]),"undefined"!==typeof e.selectedStep.form.options.objectSize?i("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),i("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?i("div",[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),i("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?i("div",[e._v("\n            "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n            "),i("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),e.quest.isPremium?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button",color:"grey",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$emit("openPremiumBox")}}})],1),i("div",{attrs:{id:"target-canvas"}}),i("div",[e._v("\n          "+e._s(e.$t("label.TouchAndDragObject"))+"\n        ")])],1):e._e()],1),i("h2",[e._v(e._s(e.$t("label.AddressToFind")))]),i("div",{staticClass:"fields-group"},[e.isIOs?e._e():i("div",{staticClass:"location-address"},[i("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},[i("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"destination",placeholder:e.$t("label.Address"),value:e.selectedStep.form.options.destination},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}})],1),i("a",{on:{click:function(t){return e.getCurrentLocation()}}},[i("img",{attrs:{src:"statics/icons/game/location.png"}})])]),e.isIOs?i("div",[e._v("\n        "+e._s(e.$t("label.DefineGPSLocation"))+"\n        "),i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])]):e._e(),e.isIOs?e._e():i("q-list",[i("q-expansion-item",{attrs:{icon:"explore",label:e.$t("label.OrDefineGPSLocation")}},[i("div",{staticClass:"location-gps-inputs"},[i("div",[i("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"par ex. 5,65487",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),i("div",[i("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"par ex. 45,49812",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),i("div",[i("a",{on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])],1)],1)]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?i("div",{staticClass:"locate-marker"},[i("h2",[e._v(e._s(e.$t("label.Marker")))]),i("p",[i("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),i("span",[e._v(e._s(e.selectedStep.form.answers))]),i("q-btn",{attrs:{color:"primary",label:e.$t("label.Choose"),"test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}})],1),i("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),i("q-card-section",e._l(e.markersList,(function(t,r){return i("q-btn",{key:r,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(i){return e.selectMarker(t)}}},[i("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),i("span",[e._v(e._s(t))])])})),1),i("q-card-actions",[i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[i("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?i("q-list",{attrs:{highlight:""}},[i("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,r){return i("q-item",{key:r},[i("q-item-section",[i("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),i("q-item-section",{attrs:{side:""}},[i("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(r)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?i("div",[e._v("\n          "+e._s(e.$t("label.NoCondition"))+"\n        ")]):e._e(),e.selectedStep.newConditionForm?e._e():i("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?i("div",[i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),i("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}),i("div",{staticClass:"centered"},[i("q-btn",{attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),i("q-btn",{attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),i("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[i("div",{staticClass:"q-pa-sm"},[e.options&&e.options.mode&&"advanced"===e.options.mode&&("use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code)?i("div",{staticClass:"q-pb-md"},[i("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}})],1):e._e(),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?i("div",{staticClass:"location-gps"},[i("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),i("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}}),i("q-toggle",{attrs:{label:e.$t("label.DisplayGeolocationHelp")},model:{value:e.selectedStep.form.options.showHelp,callback:function(t){e.$set(e.selectedStep.form.options,"showHelp",t)},expression:"selectedStep.form.options.showHelp"}})],1):e._e(),"memory"===e.options.type.code?i("div",[i("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?i("div",[i("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[e.isIOs?e._e():i("div",[i("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return e.$refs["backgroundfile2"].click()}}},[i("q-icon",{attrs:{name:"cloud_upload"}}),i("label",{attrs:{for:"picturefile2"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),i("input",{ref:"backgroundfile2",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile2",id:"picturefile2",type:"file",accept:"image/*"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?i("div",[i("q-icon",{attrs:{name:"cloud_upload"}}),e._v(" "+e._s(e.$t("label.UploadABackgroundImage"))+"\n            "),i("input",{ref:"backgroundfile2",attrs:{name:"picturefile2",id:"picturefile2",type:"file",accept:"image/*"},on:{change:e.uploadBackgroundImage}})],1):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage?e._e():i("p",[e._v(e._s(e.$t("label.WarningImageResize")))]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?i("div",[i("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),i("br"),i("a",{on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()]),i("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel"),type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}})],1)])],1),i("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hint")}},[i("div",{staticClass:"q-pa-sm"},[i("q-input",{attrs:{label:e.$t("label.HintText")},model:{value:e.selectedStep.form.hint[e.lang],callback:function(t){e.$set(e.selectedStep.form.hint,e.lang,t)},expression:"selectedStep.form.hint[lang]"}})],1)])],1),i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[i("div",{staticClass:"q-pa-sm"},[i("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),i("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),i("q-btn",{staticClass:"full-width",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:e.submitStep}},[e._v(e._s(e.$t("label.SaveThisStep")))]),i("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[i("q-card",[i("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),i("q-card-actions",[i("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.submitStep()}}}),i("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),i("q-dialog",{model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[i("div",{staticClass:"q-pa-md centered"},[i("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),i("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)])],1)},ir=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:"statics/icons/story/character1_attitude1.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:"statics/icons/story/character2_attitude1.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:"statics/icons/story/character3_attitude1.png"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:"statics/icons/story/character4_attitude1.png"}})])}],rr=(i("28a5"),i("d442")),ar=i.n(rr),sr=i("025e"),nr=i("547f"),or=i("e030"),lr=i("6397"),ur=i.n(lr),cr="demoObject",dr={props:["quest","stepId","lang","options"],watch:{stepId:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},extraText:{},options:{},hint:{},chapterId:"0",conditions:[],startDate:{enabled:!1}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"}],selectedValue:"",values:[]}},stepTypes:sr,objectsList:nr,markersList:vi,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],colorsForCode:this.getColorsForCodeOptions()},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions()},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[]},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1,layersForMarkersOptions:[]}},questItems:[],isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==this.stepId){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getStepId:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.stepId&&"0"!==this.stepId?(this.selectedStep.id=this.stepId,this.selectedStep.isNew=!1):(this.selectedStep.id=0,this.selectedStep.isNew=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetStep:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:null,videoStream:null,answerPointerCoordinates:{top:50,left:50},answerItem:null,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},number:null},this.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="")}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,l,u,c,d,f,h,p,m,b,g,v;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.questId=this.quest.questId,this.resetStep(),!this.stepId||-1!==this.stepId){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.getStepId();case 6:if(this.selectedStep.isNew){e.next=15;break}return e.next=9,Ft.getById(this.stepId,this.quest.version);case 9:t=e.sent,t&&t.data?Object.assign(this.selectedStep.form,t.data):ut(this.$t("label.ErrorStandardMessage"),"error"),this.options.chapterId=t.data.chapterId?t.data.chapterId:0,this.getUnderstandableConditions(),e.next=18;break;case 15:this.selectedStep.form.type=this.options.type.code,this.selectedStep.form.chapterId=this.options.chapterId,0!==this.options.previousStepId&&(this.selectedStep.form.conditions.push("stepDone_"+this.options.previousStepId),this.getUnderstandableConditions());case 18:if(this.selectedStep.type=this.getStepType(this.selectedStep.form.type),null!==this.selectedStep.form.number){e.next=24;break}return e.next=22,Ft.countForAQuest(this.questId,this.quest.version);case 22:i=e.sent,this.selectedStep.form.number=i&&i.data&&i.data.count?i.data.count+1:1;case 24:if(this.selectedStep.form.title[this.lang]&&""!==this.selectedStep.form.title[this.lang]||(r=this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.title[this.quest.mainLanguage]?this.selectedStep.form.title[this.quest.mainLanguage]:this.$t("label.Step")+" "+this.selectedStep.form.number,this.$set(this.selectedStep.form.title,this.lang,r)),this.selectedStep.form.text[this.lang]&&""!==this.selectedStep.form.text[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.text[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.text,this.lang,this.selectedStep.form.text[this.quest.mainLanguage]),this.selectedStep.form.extraText[this.lang]&&""!==this.selectedStep.form.extraText[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.extraText[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.extraText,this.lang,this.selectedStep.form.extraText[this.quest.mainLanguage]),this.selectedStep.form.hint[this.lang]&&""!==this.selectedStep.form.hint[this.lang]||this.lang!==this.quest.mainLanguage&&""!==this.selectedStep.form.hint[this.quest.mainLanguage]&&this.$set(this.selectedStep.form.hint,this.lang,this.selectedStep.form.hint[this.quest.mainLanguage]),"choose"!==this.options.type.code){e.next=32;break}if(this.selectedStep.form.options&&this.selectedStep.form.options.items&&Array.isArray(this.selectedStep.form.options.items)){if(this.config.choose.answerType=this.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==this.selectedStep.form.options.items[0].imagePath?"image":"text","text"===this.config.choose.answerType)for(n=0;n<this.selectedStep.form.options.items.length;n++)this.selectedStep.form.options.items[n].textLanguage&&this.selectedStep.form.options.items[n].textLanguage[this.lang]&&(this.selectedStep.form.options.items[n].text=this.selectedStep.form.options.items[n].textLanguage[this.lang])}else for(this.config.choose.answerType="text",this.selectedStep.form.options={items:[]},this.selectedStep.form.answers=0,s=0;s<this.config.choose.defaultNbAnswers;s++)this.selectedStep.form.options.items.push({text:this.$t("label.AnswerNb",{nb:s+1}),imagePath:null});e.next=126;break;case 32:if("code-color"!==this.options.type.code){e.next=37;break}this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=Array(4).fill("red"),this.selectedStep.form.options.codeLength||(this.selectedStep.form.options.codeLength=4),e.next=126;break;case 37:if("code-image"!==this.options.type.code){e.next=43;break}if(!this.selectedStep.form.options||!this.selectedStep.form.options.images)for(this.selectedStep.form.options={images:[]},l=0;l<this.config.imageCode.defaultNbAnswers;l++)this.selectedStep.form.options.images.push({imagePath:null});this.selectedStep.form.options.codeLength||(this.selectedStep.form.options.codeLength=4),this.selectedStep.form.answers&&"string"===typeof this.selectedStep.form.answers&&-1!==this.selectedStep.form.answers.indexOf("|")?this.unformatedAnswer=this.selectedStep.form.answers.split("|"):this.unformatedAnswer=[0,0,0,0],e.next=126;break;case 43:if("code-keypad"!==this.options.type.code){e.next=47;break}"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers=""),e.next=126;break;case 47:if("write-text"!==this.options.type.code){e.next=51;break}"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers=""),e.next=126;break;case 51:if("info-text"!==this.options.type.code&&"character"!==this.options.type.code&&"choose"!==this.options.type.code&&"write-text"!==this.options.type.code&&"code-keypad"!==this.options.type.code){e.next=56;break}this.selectedStep.form.options.hasOwnProperty("initDuration")||(this.selectedStep.form.options.initDuration=1),"character"!==this.options.type.code||this.selectedStep.form.options.character||o["a"].set(this.selectedStep.form.options,"character","1"),e.next=126;break;case 56:if("image-recognition"!==this.options.type.code){e.next=60;break}"string"!==typeof this.selectedStep.form.answers&&(this.selectedStep.form.answers=""),e.next=126;break;case 60:if("find-item"!==this.options.type.code){e.next=64;break}this.selectedStep.form.answers.hasOwnProperty("top")&&(this.selectedStep.form.answerPointerCoordinates=this.selectedStep.form.answers,this.$nextTick((function(){this.positionFindItemPointer()}))),e.next=126;break;case 64:if("use-item"!==this.options.type.code){e.next=70;break}this.selectedStep.form.answers.hasOwnProperty("coordinates")&&(this.selectedStep.form.answerPointerCoordinates=this.selectedStep.form.answers.coordinates,this.$nextTick((function(){this.positionFindItemPointer()}))),this.selectedStep.form.answers&&this.selectedStep.form.answers.item&&(this.selectedStep.form.answerItem=this.selectedStep.form.answers.item),this.getQuestItemsAsOptions(),e.next=126;break;case 70:if("new-item"!==this.options.type.code){e.next=74;break}this.selectedStep.form.options.hasOwnProperty("picture")||(this.selectedStep.form.options={picture:null,title:""}),e.next=126;break;case 74:if("jigsaw-puzzle"!==this.options.type.code){e.next=78;break}this.selectedStep.form.options.hasOwnProperty("picture")||(this.selectedStep.form.options={picture:null,level:2}),e.next=126;break;case 78:if("memory"!==this.options.type.code){e.next=82;break}if(!this.selectedStep.form.options.hasOwnProperty("items")){for(u=[],c=0;c<8;c++)u.push({imagePath:null,single:!1});this.$set(this.selectedStep.form.options,"items",u)}e.next=126;break;case 82:if("locate-item-ar"!==this.options.type.code){e.next=99;break}for(d in this.selectedStep.form.options.hasOwnProperty("picture")||this.$set(this.selectedStep.form.options,"picture",null),this.selectedStep.form.options.hasOwnProperty("objectSize")||this.$set(this.selectedStep.form.options,"objectSize",1),this.selectedStep.form.options.hasOwnProperty("is3D")||this.$set(this.selectedStep.form.options,"is3D",!1),gi)this.config.locateItem.selectModel3DOptions.push({label:gi[d].name[this.$store.state.user.language],value:d});if(this.config.locateItem.selectModel3DOptions=this.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("model")||this.$set(this.selectedStep.form.options,"model",this.config.locateItem.selectModel3DOptions[0].value),!this.selectedStep.form.options.is3D){e.next=97;break}if(!this.selectedStep.form.options.customModel){e.next=95;break}return e.next=93,this.displayARObject(this.selectedStep.form.options.customModel,this.questId);case 93:e.next=97;break;case 95:return e.next=97,this.displayARObject(this.selectedStep.form.options.model);case 97:e.next=126;break;case 99:if("locate-marker"!==this.options.type.code){e.next=126;break}for("string"!==typeof this.selectedStep.form.answers&&this.$set(this.selectedStep.form,"answers",vi[0]),f=!0,h=!1,p=void 0,e.prev=104,m=or[Symbol.iterator]();!(f=(b=m.next()).done);f=!0)g=b.value,this.config.locateMarker.layersForMarkersOptions.push({label:this.$t("layersForMarkers."+g.label),value:g.code});e.next=112;break;case 108:e.prev=108,e.t0=e["catch"](104),h=!0,p=e.t0;case 112:e.prev=112,e.prev=113,f||null==m.return||m.return();case 115:if(e.prev=115,!h){e.next=118;break}throw p;case 118:return e.finish(115);case 119:return e.finish(112);case 120:for(v in this.config.locateMarker.layersForMarkersOptions=this.config.locateMarker.layersForMarkersOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("layerCode")||this.$set(this.selectedStep.form.options,"layerCode",or[0].code),gi)this.config.locateItem.selectModel3DOptions.push({label:gi[v].name[this.$store.state.user.language],value:v});this.config.locateItem.selectModel3DOptions=this.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),this.selectedStep.form.options.hasOwnProperty("model")||this.$set(this.selectedStep.form.options,"model",this.config.locateItem.selectModel3DOptions[0].value),this.selectedStep.form.options.hasOwnProperty("mode")||this.$set(this.selectedStep.form.options,"mode","scan");case 126:return this.originalStepData=Ke.clone(this.selectedStep.form),e.next=129,this.changeNewConditionType();case 129:case"end":return e.stop()}}),e,this,[[104,108,112,120],[113,,115,119]])})));function t(){return e.apply(this,arguments)}return t}(),submitStep:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.selectedStep.form.$touch(),!this.$v.selectedStep.form.$error){e.next=4;break}return ut(this.$t("label.StepSettingsFormError"),"error"),e.abrupt("return");case 4:if("choose"===this.options.type.code&&"text"===this.config.choose.answerType){for(t=0;t<this.selectedStep.form.options.items.length;t++)this.selectedStep.form.options&&this.selectedStep.form.options.items&&this.selectedStep.form.options.items[t]&&this.selectedStep.form.options.items[t].textLanguage?this.selectedStep.form.options.items[t].textLanguage[this.lang]=this.selectedStep.form.options.items[t].text:(i={},i[this.lang]=this.selectedStep.form.options.items[t].text,this.selectedStep.form.options.items[t].textLanguage=i);this.selectedStep.form.options.items=this.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}return"character"===this.options.type.code&&(this.selectedStep.form.options.character||(this.selectedStep.form.options.character="1")),"code-keypad"===this.options.type.code&&(this.selectedStep.form.options.codeLength=this.selectedStep.form.answers.length),"code-color"===this.options.type.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|")),"code-image"===this.options.type.code&&(this.selectedStep.form.answers=this.unformatedAnswer.join("|")),"jigsaw-puzzle"===this.options.type.code&&(r=parseInt(this.selectedStep.form.options.level,10),s=this.config.jigsaw.nbPiecesByLevel[r],n=Ke.buildIncrementalArray(Math.pow(s,2)),n=Ke.shuffle(n),this.selectedStep.form.answers=n.join("|")),"memory"===this.options.type.code&&Array.isArray(this.selectedStep.form.options.items)&&this.selectedStep.form.options.items.length>0&&(this.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),this.selectedStep.form.options.lastIsSingle&&(this.selectedStep.form.options.items[this.selectedStep.form.options.items.length-1].single=!0)),"find-item"===this.options.type.code&&(this.selectedStep.form.answers=this.selectedStep.form.answerPointerCoordinates),"use-item"===this.options.type.code&&(this.selectedStep.form.answers={coordinates:this.selectedStep.form.answerPointerCoordinates,item:this.selectedStep.form.answerItem}),this.options.type.code,o=Object.assign(this.selectedStep.form,{questId:this.questId,version:this.quest.version,chapterId:this.options.chapterId,type:this.options.type.code}),this.$q.loading.show(),e.next=18,Ft.save(o);case 18:l=e.sent,this.$q.loading.hide(),l&&l.data&&l.data.stepId?(o.id=l.data.stepId,o.stepId=l.data.stepId,this.$emit("change",o)):ut(this.$t("label.TechnicalIssue"),"error");case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.config.choose.maxNbAnswers?ut(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},deleteCodeAnswer:function(e){if(this.selectedStep.form.options.images.length<=this.config.choose.minNbAnswers)ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options.images.splice(e,1)}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("red")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.formatedConditions.length=0,t=0;case 2:if(!(t<this.selectedStep.form.conditions.length)){e.next=13;break}if(i=this.selectedStep.form.conditions[t],r=i.split("_"),"stepDone"!==r[0]&&"stepSuccess"!==r[0]&&"stepFail"!==r[0]){e.next=10;break}return e.next=8,Ft.getById(r[1],this.quest.version);case 8:s=e.sent,s&&s.data&&s.data.hasOwnProperty("title")&&(n=s.data.title[this.lang]?s.data.title[this.lang]:s.data.title[Object.keys(s.data.title)[0]],"stepDone"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.FollowStep")+" <i>"+n+"</i>"),"stepSuccess"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.StepSuccess")+" <i>"+n+"</i>"),"stepFail"===r[0]&&this.selectedStep.formatedConditions.push(this.$t("label.StepFail")+" <i>"+n+"</i>"));case 10:t++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteCondition:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.conditions.splice(t,1),this.selectedStep.formatedConditions.splice(t,1);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeNewConditionType:function(){var e=n()(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedStep.newCondition.values.length=0,t=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","image-recognition","jigsaw-puzzle","memory"],"stepDone"!==this.selectedStep.newCondition.selectedType&&"stepSuccess"!==this.selectedStep.newCondition.selectedType&&"stepFail"!==this.selectedStep.newCondition.selectedType){e.next=7;break}return e.next=5,Ft.listForAChapter(this.questId,this.selectedStep.form.chapterId,this.quest.version);case 5:if(i=e.sent,i&&i.data&&i.data.length>0)for(r=0;r<i.data.length;r++)i.data[r].stepId.toString()!==this.stepId.toString()&&("stepDone"!==this.selectedStep.newCondition.selectedType&&-1===t.indexOf(i.data[r].type)||(s=i.data[r].title[this.lang]?i.data[r].title[this.lang]:i.data[r].title[Object.keys(i.data[r].title)[0]],this.selectedStep.newCondition.values.push({label:s,value:i.data[r].stepId})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveNewCondition:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return""!==this.selectedStep.newCondition.selectedType&&""!==this.selectedStep.newCondition.selectedValue&&("stepDone"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepDone_"+this.selectedStep.newCondition.selectedValue),"stepSuccess"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepSuccess_"+this.selectedStep.newCondition.selectedValue),"stepFail"===this.selectedStep.newCondition.selectedType&&this.selectedStep.form.conditions.push("stepFail_"+this.selectedStep.newCondition.selectedValue)),this.getUnderstandableConditions(),e.next=4,this.resetNewConditionForm();case 4:this.selectedStep.newConditionForm=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetNewConditionForm:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedStep.newCondition.selectedType="stepDone",e.next=3,this.changeNewConditionType();case 3:this.selectedStep.newCondition.selectedValue="";case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadBackgroundImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadBackgroundImage(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.backgroundImage=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetBackgroundImage:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.backgroundImage=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadVideo:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("video",i[0]),e.next=8,Ft.uploadVideo(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.videoStream=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadImageToRecognize:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadImageToRecognize(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.answers=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadAnswerImage:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),r=i.target.files,r[0]){e.next=4;break}return e.abrupt("return");case 4:return s=new FormData,s.append("image",r[0]),e.next=8,Ft.uploadAnswerImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.items[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadMemoryImage:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),r=i.target.files,r[0]){e.next=4;break}return e.abrupt("return");case 4:return s=new FormData,s.append("image",r[0]),e.next=8,Ft.uploadMemoryImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.items[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?ut(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),r=i.target.files,r[0]){e.next=4;break}return e.abrupt("return");case 4:return s=new FormData,s.append("image",r[0]),e.next=8,Ft.uploadCodeAnswerImage(this.questId,s);case 8:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.selectedStep.form.options.images[t].imagePath=n.data.file:n.data.message&&"Error: File too large"===n.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),uploadPuzzleImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadPuzzleImage(this.questId,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.options.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadItemImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadItemImage(this.questId,this.options.type.code,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.selectedStep.form.options.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadItemObject:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadItemObject(this.questId,this.options.type.code,r);case 8:if(s=e.sent,!s||!s.hasOwnProperty("data")){e.next=19;break}if(!s.data.file){e.next=16;break}return this.selectedStep.form.options.customModel=s.data.file,e.next=14,this.displayARObject(this.selectedStep.form.options.customModel,this.questId);case 14:e.next=17;break;case 16:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error");case 17:e.next=20;break;case 19:ut(this.$t("label.ErrorStandardMessage"),"error");case 20:this.$q.loading.hide();case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeObjectInList:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedStep.form.options.customModel=null,e.next=3,this.displayARObject(this.selectedStep.form.options.model);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadCharacterImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Ft.uploadCharacterImage(this.questId,this.options.type.code,r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?o["a"].set(this.selectedStep.form.options,"character",s.data.file):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadAndPrepare3DModel:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$q.loading.show(),e.next=4,this.ModelLoaderAsync(t,i);case 4:r=e.sent,this.$q.loading.hide(),e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](0),console.error("Error while loading 3D model:",e.t0),ut(this.$t("label.CouldNotDisplayObject"),"error"),e.abrupt("return");case 13:return s=r.scene,n=(new Ye["Box3"]).setFromObject(s),o=n.getCenter(new Ye["Vector3"]),o.multiplyScalar(-1),l=new Ye["Object3D"],s.applyMatrix((new Ye["Matrix4"]).makeTranslation(o.x,o.y,o.z)),l.add(s),l.up=new Ye["Vector3"](0,0,1),s=l,s.rotation.z=Math.PI/4,e.abrupt("return",{object:s,animations:r.animations});case 24:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t,i){return e.apply(this,arguments)}return t}(),ModelLoaderAsync:function(){var e=n()(a.a.mark((function e(t,i){var r,s=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=console.log,e.abrupt("return",new Promise((function(e,a){var n=new yi.a;-1!==t.indexOf("blob:")?n.load(t,e,r,a):i?n.load(s.serverUrl+"/upload/quest/"+i+"/step/3dobject/"+t+".glb",e,r,a):n.load(s.serverUrl+"/statics/3d-models/"+t+".glb",e,r,a)})));case 2:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),displayARObject:function(){var e=n()(a.a.mark((function e(t,i){var r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.config.locateItem.object){e.next=5;break}r=this,this.$nextTick(n()(a.a.mark((function e(){var s,n,o,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=document.getElementById("target-canvas"),s){e.next=3;break}throw new Error("missing 3D canvas");case 3:return r.config.locateItem.scene=new Ye["Scene"],n=new Ye["PerspectiveCamera"](70,1.333,.001,1e3),n.up=new Ye["Vector3"](0,0,1),n.rotation.x=Math.PI/2,n.lookAt(new Ye["Vector3"](0,0,0)),r.config.locateItem.camera=n,o=new Ye["WebGLRenderer"]({alpha:!0,antialias:!0}),s.appendChild(o.domElement),r.config.locateItem.renderer=o,r.config.locateItem.renderer.setSize(Math.round(.8*window.innerWidth),Math.round(.6*window.innerWidth)),r.config.locateItem.renderer.gammaOutput=!0,r.config.locateItem.controls=new ur.a(n,o.domElement),l=new Ye["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),r.config.locateItem.scene.add(l),r.config.locateItem.scene.add(new Ye["AmbientLight"](11579568)),e.next=21,r.displayARObjectEnd(t,i);case 21:r.animateModelPreview();case 22:case"end":return e.stop()}}),e)})))),e.next=9;break;case 5:return s=this.config.locateItem.scene.getObjectByName(cr),this.config.locateItem.scene.remove(s),e.next=9,this.displayARObjectEnd(t,i);case 9:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),displayARObjectEnd:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadAndPrepare3DModel(t,i);case 2:r=e.sent,s=r.object,s.up=new Ye["Vector3"](0,0,1),s.visible=!0,s.name=cr,this.config.locateItem.scene.add(s),n=(new Ye["Box3"]).setFromObject(s),o=new Ye["Vector3"],n.getSize(o),this.config.locateItem.zoom=1.5*Math.max(o.x,o.y,o.z),this.config.locateItem.camera.position.set(0,-this.config.locateItem.zoom,0),this.config.locateItem.controls.update(),this.config.locateItem.object=s;case 15:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.changeObjectInList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectObject:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.title=this.objectsList[t].name[this.lang],this.selectedStep.form.options.picture="statics/images/object/"+this.objectsList[t].file;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getColorsForCodeOptions:function(){var e=this,t=[];return bi.forEach((function(i){t.push({value:i,label:e.$t("color."+i)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},getQuestItemsAsOptions:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft.listWonObjects(this.questId,this.stepId,this.quest.version);case 2:t=e.sent,t&&t.data?(this.questItems=t.data,i=[],this.questItems.forEach((function(e){i.push({value:e.picture,label:e.title})})),i.sort((function(e,t){return e.label>t.label?1:-1})),this.config.useItem.questItemsAsOptions=i):ut(this.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,a="use-item"===this.options.type.code?this.$refs["useItemPicture"]:this.$refs["findItemPicture"];this.selectedStep.form.answerPointerCoordinates.left=Math.round(i/a.clientWidth*100),this.selectedStep.form.answerPointerCoordinates.top=Math.round(r/a.clientHeight*100),this.positionFindItemPointer()},positionFindItemPointer:function(){var e=window.innerWidth/100,t=Math.round(8*e);document.getElementById("cross").style.left=Math.round(90*this.selectedStep.form.answerPointerCoordinates.left*e/100-t)+"px",document.getElementById("cross").style.top=Math.round(120*this.selectedStep.form.answerPointerCoordinates.top*e/100-t)+"px"},setLocation:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selectedStep.form.options.lat=parseFloat(t.geometry.location.lat()),this.selectedStep.form.options.lng=parseFloat(t.geometry.location.lng()),this.selectedStep.form.options.destination=t.formatted_address||"",this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCurrentLocation:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation,this.getLocationError,{timeout:5e3,maximumAge:1e4});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLocationError:function(e){this.$q.loading.hide(),console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")})},fillLocation:function(e){var t=this;this.selectedStep.form.options.lat=e.coords.latitude,this.selectedStep.form.options.lng=e.coords.longitude,this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch();var i=new google.maps.Geocoder;i.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,i){t.$q.loading.hide(),"OK"===i&&e[0].formatted_address?(t.selectedStep.form.options.destination=e[0].formatted_address,document.getElementById("destination").value=t.selectedStep.form.options.destination):ut(t.$t("label.ErrorStandardMessage"),"error")}))},getMyGPSLocation:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),t=this,navigator.geolocation.getCurrentPosition((function(e){t.selectedStep.form.options.lat=e.coords.latitude,t.selectedStep.form.options.lng=e.coords.longitude,t.$v.selectedStep.form.options.lat.$touch(),t.$v.selectedStep.form.options.lng.$touch(),t.$q.loading.hide()}),this.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkMainTextLength:function(e){var t=11,i=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=i&&(e.match(/\n/g)||[]).length<=t},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){ar()(this.originalStepData)!==ar()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,i=!1,r=void 0;try{for(var a,s=sr[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var n=a.value;if(n.code===e)return n}}catch(o){i=!0,r=o}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}return console.warn("Could not retrieve step type from code '"+e+"'"),null}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:ot["required"]},e.text[this.lang]={function:function(e){return this.checkMainTextLength(e)}},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:ot["required"]},imagePath:{}}:{text:{},imagePath:{required:ot["required"]}}}};break;case"code-keypad":e.answers={required:ot["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:ot["required"]};break;case"geolocation":e.options={lat:{required:ot["required"]},lng:{required:ot["required"]}};break;case"info-video":e.videoStream={required:ot["required"]};break;case"image-recognition":e.answers={required:ot["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:ot["required"]}};break;case"new-item":e.options={picture:{required:ot["required"]},title:{required:ot["required"]}};break;case"character":e.options={character:{required:ot["required"]}};break;case"use-item":e.backgroundImage={required:ot["required"]},e.answerItem={required:ot["required"]};break;case"write-text":e.answers={required:ot["required"]};break;case"locate-item-ar":e.options={lat:{required:ot["required"]},lng:{required:ot["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:ot["required"]}:e.options.picture={required:ot["required"]};break;case"touch-object-on-marker":e.options={model:{required:ot["required"]}};break}return{selectedStep:{form:e}}}},fr=dr,hr=(i("8f39"),i("b650"),Object(ge["a"])(fr,tr,ir,!1,null,"0ac65cd4",null)),pr=hr.exports,mr=i("fb4c");o["a"].directive("sortable",{inserted:function(e,t){return new Ai.a(e,t.value||{})}});var br={components:{stepSettings:pr,stepPlay:Ci,story:Et},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},form:{fields:{title:{},category:"",priceForPlayer:"free",description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,town:"",country:"",zipcode:"",editorMode:"simple",customization:{color:"",logo:""},rewardPicture:""},categories:Ke.buildOptionsForSelect(mr,{valueField:"id",labelField:"name"},this.$t),languages:Ke.buildOptionsForSelect(Qt,{valueField:"code",labelField:"name"},this.$t),levels:Ke.buildOptionsForSelect(Ht,{valueField:"id",labelField:"name"},this.$t),prices:[{label:this.$t("label.Free"),value:"free"},{label:"0,99 €",value:"premiumprice1"},{label:"1,99 €",value:"premiumprice2"},{label:"2,99 €",value:"premiumprice3"},{label:"4,99 €",value:"premiumprice5"},{label:"9,99 €",value:"premiumprice10"},{label:"19,99 €",value:"premiumprice20"}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[]},selectedItem:null,hint:{isOpened:!1,label:""},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],statistics:[],canMoveNextStep:!1,canPass:!1,itemUsed:null,isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",pictureUploadURL:this.serverUrl+"/quest/picture/upload",titleMaxLength:50,isHybrid:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ke.clearAllRunningProcesses(),this.$route.params.questId&&""!==this.$route.params.questId?("undefined"!==typeof window.cordova&&(this.isHybrid=!0),this.loadQuestData()):this.$router.push("/quest/create/welcome"),this.startStory();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadQuestData:function(){var e=n()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.questId=this.$route.params.questId,e.next=3,Je.getLastById(this.questId);case 3:if(t=e.sent,!t||!t.data){e.next=32;break}if(this.quest=t.data,"draft"!==this.quest.status&&(this.readOnly=!0),this.editor.initMode=this.quest.editorMode,this.quest.languages&&this.quest.languages.length>0&&"fr"===this.languages.current)for(this.languages.current=this.quest.languages[0].lang,i=0;i<this.quest.languages.length;i++)this.languages.available.push({label:this.$t("language."+this.quest.languages[i].lang),value:this.quest.languages[i].lang});return this.quest.description[this.languages.current]&&""!==this.quest.description[this.languages.current]||(this.quest.description[this.languages.current]=this.quest.description[this.quest.mainLanguage]),this.form.fields=this.quest,this.form.fields.startingPlace=this.form.fields.location.address||"",this.form.fields.zipcode=this.form.fields.location&&this.form.fields.location.zipcode?this.form.fields.location.zipcode:"",this.form.fields.town=this.form.fields.location&&this.form.fields.location.town?this.form.fields.location.town:"",this.form.fields.country=this.form.fields.location&&this.form.fields.location.country?this.form.fields.location.country:"",this.quest.premiumPrice&&this.quest.premiumPrice.androidId&&(this.form.fields.priceForPlayer=this.quest.premiumPrice.androidId),this.form.fields.location.hasOwnProperty("coordinates")&&2===this.form.fields.location.coordinates.length&&(r=this.form.fields.location.coordinates,this.form.fields.location={lng:r[0],lat:r[1]}),this.tabs.progress=this.quest.creationStep,this.tabs.progress<=3&&(this.tabs.selected=this.tabs.list[Math.min(this.tabs.progress,2)]),e.next=21,this.refreshStepsList();case 21:return e.next=23,this.listEditors();case 23:return e.next=25,this.listInvitees();case 25:return e.next=27,this.listReviews();case 27:return e.next=29,this.getStatistics();case 29:this.quest.access&&"private"===this.quest.access&&this.getPrivateRanking(),e.next=33;break;case 32:ut(this.$t("label.ErrorStandardMessage"),"error");case 33:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),movePremium:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.isPremium){e.next=11;break}if(!this.$store.state.user||!this.$store.state.user.organizationId){e.next=11;break}return e.next=4,Je.CheckIfCanBeMovedPremium(this.questId);case 4:if(t=e.sent,!(t&&t.data&&t.data.canBePremium)){e.next=10;break}return e.next=8,Je.MoveToPremium(this.questId);case 8:i=e.sent,i&&i.data&&i.data.status&&"ok"===i.data.status?(this.quest.isPremium=!0,this.quest.size.limit=6e8):ut(this.$t("label.ErrorStandardMessage"),"error");case 10:this.premium.isOpened=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openPremiumBox:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.quest.isPremium){e.next=7;break}if(!this.$store.state.user||!this.$store.state.user.organizationId){e.next=6;break}return e.next=4,Je.CheckIfCanBeMovedPremium(this.questId);case 4:t=e.sent,t&&t.data&&t.data.canBePremium&&(this.premium.canMovePremium=!0);case 6:this.premium.isOpened=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadReward:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Je.uploadReward(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?(this.form.fields.rewardPicture=s.data.file,this.$forceUpdate()):s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),changeEditorMode:function(){var e=n()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("advanced"!==this.form.fields.editorMode){e.next=4;break}this.$q.dialog({message:this.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.refreshStepsList();case 2:case"end":return e.stop()}}),e)})))).onCancel(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form.fields.editorMode="simple";case 1:case"end":return e.stop()}}),e)})))),e.next=6;break;case 4:return e.next=6,this.refreshStepsList();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshStepsList:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.stepsMissing=!1,this.$q.loading.show(),e.next=4,Ft.listForAQuest(this.questId,this.quest.version);case 4:if(t=e.sent,!t||!t.data){e.next=78;break}if(this.chapters.items=t.data.chapters,i=t.data.steps,"simple"!==this.form.fields.editorMode){e.next=12;break}this.chapters.items&&this.chapters.items.length>0&&(this.chapters.items[0].steps=i),e.next=64;break;case 12:r=0;case 13:if(!(r<this.chapters.items.length)){e.next=64;break}for(s=!1,n=[],o=[],l=[],u=[],c=0;c<i.length;c++)i[c].chapterId.toString()===this.chapters.items[r].chapterId.toString()&&(this.chapters.items[r].steps||(this.chapters.items[r].steps=[]),"end-chapter"===i[c].type&&(s=!0),l.push(i[c]));for(d=[],c=0;c<l.length;c++)d.push(l[c].stepId.toString());f=[],h=0;case 24:if(!(d.length>0||h<1e3)){e.next=55;break}h++,c=0;case 27:if(!(c<l.length)){e.next=53;break}if(p=l[c].stepId.toString(),-1!==f.indexOf(p)){e.next=50;break}if(l[c].conditions&&0===l[c].conditions.length&&(f.unshift(p),d.splice(d.indexOf(p),1),n.push(l[c].title[this.languages.current])),!(l[c].conditions&&l[c].conditions.length>0)){e.next=50;break}m=0,b=0;case 34:if(!(b<l[c].conditions.length)){e.next=48;break}if(g=l[c].conditions[b].replace("stepDone_",""),g=g.replace("stepSuccess_",""),g=g.replace("stepFail_",""),-1!==f.indexOf(g)){e.next=43;break}return-1===d.indexOf(g)&&(o.push(p),d.splice(d.indexOf(p),1),f.push(p)),e.abrupt("continue",50);case 43:v=f.indexOf(g),v>m&&(m=v);case 45:b++,e.next=34;break;case 48:f.length>=m?f.splice(m+1,0,p):f.push(p),d.splice(d.indexOf(p),1);case 50:c++,e.next=27;break;case 53:e.next=24;break;case 55:for(c=0;c<f.length;c++)for(b=0;b<l.length;b++)f[c]===l[b].stepId.toString()&&(-1!==o.indexOf(l[b].stepId.toString())&&(l[b].error="FollowingStepsHaveInvalidCondition"),0===c||0===l[b].conditions.length||l[b].conditions.length>1||"locate-marker"===l[b].type?l[b].level=1:l[b].level=2,this.chapters.items[r].steps.push(l[b]));this.chapters.items[r].warnings=[],s||this.chapters.items[r].warnings.push({noEndOfChapter:!0}),n.length>1&&this.chapters.items[r].warnings.push({moreThan1StepWithNoCondition:n}),u.length>0&&this.chapters.items[r].warnings.push({stepsWithMissingParent:u}),o.length>0&&this.chapters.items[r].warnings.push({stepWithNoParent:o});case 61:r++,e.next=13;break;case 64:i&&i.length>0&&this.tabs.progress<2&&(this.tabs.progress=2),w=!1,k=0;case 67:if(!(k<i.length)){e.next=75;break}if(y=i[k],"locate-marker"!==y.type){e.next=72;break}return w=!0,e.abrupt("break",75);case 72:k++,e.next=67;break;case 75:this.quest.hasLocateMarkerSteps=w,e.next=79;break;case 78:this.warnings.stepsMissing=!0;case 79:this.$q.loading.hide();case 80:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",i=0;i<e.length;i++)if(e[i].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[i].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[i].moreThan1StepWithNoCondition.join(", ")+". "),e[i].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[i].hasOwnProperty("stepsWithMissingParent")){for(var r in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[i].stepsWithMissingParent)for(var a=0;a<this.chapters.items.length;a++)for(var s=0;s<this.chapters.items[a].steps.length;s++)this.chapters.items[a].steps[s].stepId.toString()===r&&(t+=this.chapters.items[a].steps[s].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=n()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.form.fields.location.lat&&0!==this.form.fields.location.lng){e.next=3;break}return ut(this.$t("label.YouMustDefineStartLocation"),"warning"),e.abrupt("return");case 3:if(this.$v.form.fields.$touch(),this.$v.form.fields.$error){e.next=13;break}return t={languages:[this.form.fields.mainLanguage],version:this.quest.version,location:{type:"Point",coordinates:[this.form.fields.location.lng,this.form.fields.location.lat],town:this.form.fields.town,country:this.form.fields.country,zipcode:this.form.fields.zipcode,address:this.form.fields.startingPlace}},i=Object.assign({},this.form.fields,t),this.$q.loading.show(),e.next=10,Je.save(i);case 10:r=e.sent,this.$q.loading.hide(),r&&r.data?(this.tabs.progress<1&&(this.tabs.progress=1,this.tabs.selected="steps",this.story.active&&(this.story.step=19)),ut(this.$t("label.QuestSaved"),"info")):ut(this.$t("label.ErrorStandardMessage"),"error");case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Je.uploadPicture(r);case 8:return s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.form.fields.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),e.next=12,Je.uploadThumb(r);case 12:n=e.sent,n&&n.hasOwnProperty("data")?n.data.file?this.form.fields.thumb=n.data.file:n.data.message&&"Error: File too large"===n.data.message&&ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),uploadLogo:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),i=t.target.files,i[0]){e.next=4;break}return e.abrupt("return");case 4:return r=new FormData,r.append("image",i[0]),e.next=8,Je.uploadLogo(r);case 8:s=e.sent,s&&s.hasOwnProperty("data")?s.data.file?this.form.fields.customization.logo=s.data.file:s.data.message&&"Error: File too large"===s.data.message?ut(this.$t("label.FileTooLarge"),"error"):ut(this.$t("label.UnknowUploadError"),"error"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),startStory:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.countForUser(this.$store.state.user._id);case 2:t=e.sent,t.data&&t.data<2&&(this.story.active=!0,null===this.story.step&&"settings"===this.tabs.selected&&(this.story.step=17));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCurrentLocation:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),navigator.geolocation.getCurrentPosition(this.fillLocation,this.getLocationError,{timeout:5e3,maximumAge:1e4});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var i=new google.maps.Geocoder;i.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,i){t.$q.loading.hide(),"OK"===i&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),ut(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.form.fields.location={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},this.form.fields.town=this.getCity(t),this.form.fields.country=this.getCountry(t),this.form.fields.zipcode=this.getZipcode(t),this.form.fields.startingPlace=t.formatted_address||"";case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("postal_code"===e.address_components[t].types[i])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("locality"===e.address_components[t].types[i])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var i=0;i<e.address_components[t].types.length;i++)if("country"===e.address_components[t].types[i])return e.address_components[t].short_name;return""},onChapterListUpdate:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft.moveChapter(this.questId,this.quest.version,t.oldIndex+1,t.newIndex+1);case 2:i=e.sent,i&&this.chapters.items.splice(t.newIndex,0,this.chapters.items.splice(t.oldIndex,1)[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onStepListUpdate:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft.move(this.questId,this.quest.version,t.oldIndex+1,t.newIndex+1);case 2:i=e.sent,i&&this.chapters.items[0].steps.splice(t.newIndex,0,this.chapters.items[0].steps.splice(t.oldIndex,1)[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),publish:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkIfTestable();case 2:if(i=e.sent,!i){e.next=23;break}for(r="unpublish",s=0;s<this.form.fields.languages.length;s++)this.form.fields.languages[s].lang&&this.form.fields.languages[s].lang===t&&this.form.fields.languages[s].published&&(r="publish");if("publish"!==r){e.next=15;break}return this.$q.loading.show(),e.next=10,Je.publish(this.questId,t);case 10:this.$q.loading.hide(),"unpublished"!==this.quest.status&&"draft"!==this.quest.status||("public"===this.quest.access?this.quest.status="tovalidate":this.quest.status="published",this.readOnly=!0),this.tabs.progress=3,e.next=21;break;case 15:return this.$q.loading.show(),e.next=18,Je.unpublish(this.questId,t);case 18:this.$q.loading.hide(),this.quest.status="unpublished",this.tabs.progress=2;case 21:e.next=24;break;case 23:ut(this.$t("label.YourQuestContainsErrorsInSteps"),"error");case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),isReadOnly:function(){return"disabled"===this.quest.status||"tovalidate"===this.quest.status},unpublish:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.quest.status="unpublished",this.$q.loading.show(),e.next=4,Je.unpublish(this.questId);case 4:this.$q.loading.hide(),ut(this.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),testQuest:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.checkIfTestable();case 2:t=e.sent,t?this.$router.push("/quest/play/"+this.questId):ut(this.$t("label.YourQuestContainsErrorsInSteps"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfTestable:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.chapters.items.length)){e.next=7;break}if(!(this.chapters.items[t].warnings&&this.chapters.items[t].warnings.length>0)){e.next=4;break}return e.abrupt("return",!1);case 4:t++,e.next=1;break;case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeQuest:function(){var e=n()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.remove(t.questId,t.quest.version);case 2:i.$router.push("/map");case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeStep:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,this.$q.dialog({message:this.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft.remove(i.questId,t,i.quest.version);case 2:return e.next=4,i.refreshStepsList();case 4:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createNewVersion:function(){var e=n()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.createNewVersion(t.questId);case 2:i.$router.push("/quest/builder/"+t.questId);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeChapter:function(){var e=n()(a.a.mark((function e(t){var i,r,s=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,r=0;case 2:if(!(r<this.chapters.items.length)){e.next=10;break}if(this.chapters.items[r].chapterId.toString()!==t){e.next=7;break}if(!(this.chapters.items[r].steps&&this.chapters.items[r].steps.length>0)){e.next=7;break}return ut(this.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),e.abrupt("return",!1);case 7:r++,e.next=2;break;case 10:this.$q.dialog({message:this.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft.removeChapter(i.questId,t,i.quest.version);case 2:return r=i.chapters.items.map((function(e){return e.chapterId})).indexOf(t),i.chapters.items.splice(r,1),e.next=6,s.refreshStepsList();case 6:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),modifyChapter:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=this,r={name:"",position:0},s=0;s<this.chapters.items.length;s++)this.chapters.items[s].chapterId.toString()===t&&(r.name=this.chapters.items[s].title[this.languages.current]?this.chapters.items[s].title[this.languages.current]:"",r.position=s);this.$q.dialog({message:this.$t("label.ModifyTheChapter"),prompt:{model:r.name,type:"text"},cancel:!0}).onOk(function(){var e=n()(a.a.mark((function e(s){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},n[i.languages.current]=s,e.next=4,Ft.modifyChapter({questId:i.questId,version:i.quest.version,chapterId:t,title:n});case 4:i.chapters.items[r.position].title[i.languages.current]=s;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addChapter:function(){var e=n()(a.a.mark((function e(){var t,i=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var e=n()(a.a.mark((function e(r){var s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={},s[t.languages.current]=r,e.next=4,Ft.modifyChapter({questId:t.questId,version:t.quest.version,chapterId:"0",title:s});case 4:return e.next=6,i.refreshStepsList();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),modifyStep:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chapters.showNewStepPageSettings=!0,t&&t.stepId&&(i=this,setTimeout((function(){i.stepId=t.stepId,i.chapters.newStep.type=i.getStepTypeInformations(t.type),i.chapters.newStep.chapterId=t.chapterId,i.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),this.closeAllPanels(),this.chapters.showNewStepOverview=!1,this.chapters.reloadStepPlay=!1,this.moveToTop();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),playStep:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chapters.reloadStepPlay=!1,t&&t.stepId&&(this.stepId=t.stepId,t.id=t.stepId,this.chapters.newStep.type=this.getStepTypeInformations(t.type),this.chapters.newStep.chapterId=t.chapterId,this.chapters.newStep.scrollPosition=document.documentElement.scrollTop),this.closeAllPanels(),this.chapters.newStep.overviewData=t,this.chapters.showNewStepPageSettings=!1,this.chapters.showNewStepOverview=!0,this.moveToTop(),i=this,setTimeout((function(){i.chapters.reloadStepPlay=!0}),300);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),moveToPosition:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.scrollTo(0,t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),closeOverview:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.resetStepData(),this.closeAllPanels(),e.next=4,this.refreshStepsList();case 4:this.moveToPosition(this.chapters.newStep.scrollPosition),this.chapters.showNewStepOverview=!1,this.tabs.selected="steps",Ke.clearAllNotifications(),this.story.active&&7===this.countSteps()&&(this.story.step=22);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1},closeStepSettingsPage:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshStepsList();case 2:return this.moveToPosition(this.chapters.newStep.scrollPosition),this.chapters.newStep.type={},this.stepId=-1,this.chapters.showNewStepPageSettings=!1,this.tabs.selected="steps",e.next=9,this.refreshMediaSize();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addStep:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(t=this.chapters.items[0].chapterId),this.chapters.showNewStepPage=!0,this.chapters.newStep.chapterId=t,this.chapters.newStep.scrollPosition=document.documentElement.scrollTop,i=0,r=0;case 6:if(!(r<this.chapters.items.length)){e.next=14;break}if(this.chapters.items[r].chapterId.toString()!==t||!this.chapters.items[r].steps){e.next=11;break}return s=this.chapters.items[r].steps.length,s>0&&(i=this.chapters.items[r].steps[s-1].stepId),e.abrupt("break",14);case 11:r++,e.next=6;break;case 14:this.chapters.newStep.previousStepId=i;case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),insertStep:function(){var e=n()(a.a.mark((function e(t,i){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(t=this.chapters.items[0].chapterId),this.chapters.showNewStepPage=!0,this.chapters.newStep.chapterId=t,this.chapters.newStep.previousStepId=i;case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),selectLanguage:function(){var e=n()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.languages.current,i=!1,this.quest.languages)for(r=0;r<this.quest.languages.length;r++)this.quest.languages[r].lang===t&&(i=!0);if(i){e.next=6;break}return e.next=6,Je.addLanguage(this.questId,t);case 6:return e.next=8,this.loadQuestData();case 8:this.quest.title[t]&&""!==this.quest.title[t]||(t===this.quest.mainLanguage?this.quest.title[t]=this.$t("label.NewQuest",t):this.quest.title[t]=this.quest.title[this.quest.mainLanguage]),this.story.active&&(this.story.step=18);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeLanguage:function(){var e=n()(a.a.mark((function e(t){var i,r,s,o=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!1,this.quest.languages)for(r=0;r<this.quest.languages.length;r++)this.quest.languages[r].lang===t&&(i=!0);if(i){e.next=7;break}s=this,this.$q.dialog({message:this.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.addLanguage(s.questId,t);case 2:o.quest.title[t]&&""!==o.quest.title[t]||(t===o.quest.mainLanguage?o.quest.title[t]=o.$t("label.NewQuest",t):o.quest.title[t]=o.quest.title[o.quest.mainLanguage]);case 3:case"end":return e.stop()}}),e)})))).onCancel(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.languages.current=s.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),e.next=10;break;case 7:return e.next=9,this.loadQuestData();case 9:this.quest.title[t]&&""!==this.quest.title[t]||(t===this.quest.mainLanguage?this.quest.title[t]=this.$t("label.NewQuest",t):this.quest.title[t]=this.quest.title[this.quest.mainLanguage]);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closePrivateQuest:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.$q.dialog({message:this.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.closePrivate(t.questId,t.quest.version);case 2:return t.quest.status="old",e.next=5,t.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPrivateRanking:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xt.listPlayersForThisQuest(this.questId);case 2:t=e.sent,t&&t.data&&(this.ranking.items=t.data,this.ranking.items.sort(this.compareScore),this.refreshPosition());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return sr.filter((function(i){return i.category===e&&i.enabled&&!("end-chapter"===i.code&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.chapters.newStep.type=t,this.chapters.showNewStepPage=!1,this.stepId="0",this.chapters.showNewStepPageSettings=!0,this.moveToTop(),0===this.countSteps()&&this.story.active&&(this.story.step=20);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.chapters.showNewStepPageSettings=!1,"end-chapter"!==t.type){e.next=5;break}return e.next=4,this.closeOverview();case 4:return e.abrupt("return",!1);case 5:return this.chapters.showNewStepOverview=!0,this.stepId=t.id,this.chapters.newStep.overviewData=t,this.moveToTop(),i=this,setTimeout((function(){i.chapters.reloadStepPlay=!0}),300),this.story.active&&0===this.countSteps()&&(this.story.step=21),e.next=14,this.refreshMediaSize();case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepPlayed:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("played"),this.canMoveNextStep=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepSuccess:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("success"),this.canMoveNextStep=!0,this.hideHint();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),trackStepPass:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("pass"),this.canPass=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackStepFail:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("fail"),this.hideHint();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackMessage:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"suggestInventory"===t&&(this.inventory.suggest=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addEditor:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Je.addEditor(this.questId,this.quest.version,this.editor.new.email);case 3:if(t=e.sent,this.$q.loading.hide(),!t||403===t.status){e.next=12;break}return e.next=8,this.listEditors();case 8:this.editor.new.email="",this.editor.new.isExisting=!0,e.next=13;break;case 12:this.editor.new.isExisting=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listEditors:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.editorsMissing=!1,e.next=3,Je.listEditors(this.questId,this.quest.version);case 3:if(t=e.sent,t&&t.data)for(this.editor.items=t.data,i=0;i<this.editor.items.length;i++)this.editor.items[i].checked=!0;else this.warnings.editorsMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeEditor:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Je.removeEditor(this.questId,this.quest.version,t);case 3:return this.$q.loading.hide(),e.next=6,this.listEditors();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addInvitee:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Je.addInvitee(this.questId,this.quest.version,this.invitee.new.email);case 3:if(t=e.sent,this.$q.loading.hide(),!t||403===t.status){e.next=12;break}return e.next=8,this.listInvitees();case 8:this.invitee.new.email="",this.invitee.new.isExisting=!0,e.next=13;break;case 12:this.invitee.new.isExisting=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),listInvitees:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.inviteeMissing=!1,e.next=3,Je.listInvitees(this.questId,this.quest.version);case 3:if(t=e.sent,t&&t.data)for(this.invitee.items=t.data,i=0;i<this.invitee.items.length;i++)this.invitee.items[i].checked=!0;else this.warnings.inviteeMissing=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeInvitee:function(){var e=n()(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.next=3,Je.removeInvitee(this.questId,this.quest.version,t);case 3:return this.$q.loading.hide(),e.next=6,this.listInvitees();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<sr.length;t++)if(sr[t].code===e)return"fas fa-"+sr[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<sr.length;t++)if(sr[t].code===e)return sr[t];return""},fillInventory:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.warnings.inventoryMissing=!1,this.$q.loading.show(),e.next=4,Ft.listWonObjects(this.questId,this.stepId,this.quest.version);case 4:t=e.sent,t&&t.data?this.inventory.items=t.data:this.warnings.inventoryMissing=!0,this.$q.loading.hide();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInventory:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.inventory.items.length){e.next=3;break}return e.next=3,this.fillInventory();case 3:this.inventory.isOpened?this.closeAllPanels():(this.closeAllPanels(),this.inventory.isOpened=!0,this.overview.tabSelected="inventory");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectItem:function(e){"use-item"===this.chapters.newStep.overviewData.type?(this.selectedItem=e,this.closeAllPanels()):ut(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},askForHint:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHintAvailable()){e.next=2;break}return e.abrupt("return");case 2:if(!this.hint.isOpened){e.next=6;break}this.closeAllPanels(),e.next=10;break;case 6:return e.next=8,Xt.getHint(0,this.stepId,this.quest.version);case 8:t=e.sent,t&&t.hint?(this.hint.label=t.hint,this.closeAllPanels(),this.hint.isOpened=!0,this.overview.tabSelected="hint"):ut(this.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&this.chapters.newStep.overviewData.hint[this.languages.current]&&""!==this.chapters.newStep.overviewData.hint[this.languages.current]},getMyGPSLocation:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$q.loading.show(),t=this,navigator.geolocation.getCurrentPosition((function(e){t.form.fields.location.lat=e.coords.latitude,t.form.fields.location.lng=e.coords.longitude,t.$v.form.fields.location.lat.$touch(),t.$v.form.fields.location.lng.$touch(),t.$q.loading.hide()}),this.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=Ke.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=Ke.humanReadableFileSize(this.quest.size.limit,!0,this.$t);return this.$t("label.UsedOver",{current:e,limit:t})}return""},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadMedia();case 2:this.media.isOpened=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadMedia:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.listMedia(this.questId,this.quest.version);case 2:t=e.sent,t&&t.data&&(this.media.items=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshMediaSize:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.getSize(this.questId,this.quest.version);case 2:t=e.sent,t&&t.data&&(this.quest.size=t.data.size);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeMedia:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.removeMedia(this.questId,this.quest.version,t);case 2:if(i=e.sent,i){e.next=7;break}this.$q.dialog({message:this.$t("label.TechnicalIssue")}),e.next=9;break;case 7:return e.next=9,this.loadMedia();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.refreshMediaSize();case 2:this.media.isOpened=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var i=new XMLHttpRequest;i.open("GET","statics/markers/all.pdf",!0),i.responseType="blob",i.onload=function(i){if(200!==this.status)return ut(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var r=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(r)}))}),(function(t){ut(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},i.send()}),(function(t){ut(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},listReviews:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$i.list({questId:this.questId,version:this.quest.version});case 2:t=e.sent,this.reviews=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStatistics:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,Je.getStatistics(this.questId,this.quest.version,t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate());case 3:i=e.sent,this.statistics=i.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.serverUrl+"/upload/profile/"+e:"/statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],i="check_circle";return this.isEdition?"img:":e<=this.tabs.progress?i:t},trackCallBackFunction:function(){return!1}},validations:{form:{fields:{title:{required:ot["required"]},category:{required:ot["required"]}}}}},gr=br,vr=(i("74f2"),Object(ge["a"])(gr,Zi,er,!1,null,null,null)),wr=vr.exports,kr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper dark-background"},[i("div",{staticClass:"page-content top-padding-middle"},[i("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.letsGo")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[i("div",{staticClass:"q-pa-lg"},["email"===e.step?i("q-input",{attrs:{type:"email",dark:"",color:"white",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):e._e(),"password"===e.step?i("q-input",{attrs:{type:"password",dark:"",color:"white",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"password"===e.step?i("p",{staticClass:"text-right q-mt-md q-mb-md"},[i("a",{on:{click:function(t){return e.sendForgottenPasswordCode()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?i("div",[i("p",[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),i("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?i("div",[i("q-input",{attrs:{type:"password",dark:"",color:"white",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),i("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg q-mb-xl"},["email"!==e.step?i("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"fas fa-chevron-left",loading:e.submitting},on:{click:function(t){return e.backAction()}}}):e._e(),i("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"fas fa-chevron-right",loading:e.submitting,disabled:"email"===e.step&&!e.form.email||"password"===e.step&&!e.form.password},on:{click:e.formSubmit}})],1)]),e.showSocialLogin.facebook||e.showSocialLogin.google?i("p",{staticClass:"text-center margin-size-3 q-mt-xl q-mb-lg"},[e._v("\n      "+e._s(e.$t("label.orSignInWith"))+"\n    ")]):e._e(),i("div",{staticClass:"q-pl-md q-pr-md"},[e.showSocialLogin.facebook?i("q-btn",{staticClass:"full-width",attrs:{color:"facebook",icon:"fab fa-facebook",label:"Facebook"},on:{click:e.facebookLogin}}):e._e(),e.showSocialLogin.google?i("q-btn",{staticClass:"full-width",attrs:{color:"google",icon:"fab fa-google",label:"Google"},on:{click:e.googleLogin}}):e._e()],1),e.isHybrid?i("div",{staticClass:"q-pa-md"},[i("q-btn",{staticClass:"full-width",attrs:{color:"secondary"},on:{click:function(t){return e.startScanQRCode()}}},[e._v(e._s(e.$t("label.ScanQRCodeToStartQuest")))])],1):e._e()])])},yr=[],_r=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},Sr={data:function(){return{step:"email",form:{email:"",password:"",newPassword:"",code:""},showSocialLogin:{facebook:!1,google:!1},isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1}},mounted:function(){Ke.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),window.cordova&&(this.showSocialLogin.facebook=!0)},methods:{formSubmit:function(){var e=n()(a.a.mark((function e(){var t,i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$v.$touch(),this.submitting=!0,e.t0=this.step,e.next="email"===e.t0?5:"password"===e.t0?11:"forgottenpassword"===e.t0?16:22;break;case 5:if(this.$v.form.email.$error){e.next=10;break}return e.next=8,this.checkUserIsExisting(this.form.email);case 8:t=e.sent,t&&t.status?"active"===t.status?this.step="password":"new"===t.status?this.$router.push("/user/createAccount/"+this.form.email+"/validation"):"blocked"===t.status?ut(this.$t("label.YourAccountIsBlocked"),"warning"):this.$router.push("/user/createAccount/"+this.form.email+"/generic"):ut(this.$t("label.ErrorStandardMessage"),"error");case 10:return e.abrupt("break",22);case 11:return e.next=13,this.signIn(this.form.email,this.form.password);case 13:return i=e.sent,i.status?("success"===i.status&&(r="/home",this.$route.query.hasOwnProperty("redirect")&&(r=this.$route.query.redirect),this.$router.push(r)),"failed"===i.status&&ut(this.$t("label.IncorrectLoginPleaseRetry"),"warning")):ut(this.$t("label.ErrorStandardMessage"),"error"),e.abrupt("break",22);case 16:if(this.$v.form.newPassword.$error){e.next=21;break}return e.next=19,Me.changePassword(this.form.email,this.form.newPassword,this.form.code);case 19:s=e.sent,s.status&&200===s.status?(n="/home",this.$route.query.hasOwnProperty("redirect")&&(n=this.$route.query.redirect),this.$router.push(n)):s.data&&"You have tries too much codes"===s.data.message?ut(this.$t("label.YourAccountIsBlocked"),"warning"):ut(this.$t("label.IncorrectCodePleaseRetry"),"warning");case 21:return e.abrupt("break",22);case 22:this.submitting=!1;case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backAction:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="password"===e.t0?3:"forgottenpassword"===e.t0?5:7;break;case 3:return this.step="email",e.abrupt("break",7);case 5:return this.step="password",e.abrupt("break",7);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkUserIsExisting:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.checkEmail(t);case 2:if(i=e.sent,!(i&&i.data&&i.data.hasOwnProperty("existing")&&!0===i.data.existing)){e.next=7;break}return e.abrupt("return",{status:i.data.status});case 7:if(!(i&&i.data&&i.data.hasOwnProperty("existing")&&!1===i.data.existing)){e.next=11;break}return e.abrupt("return",{status:"missing"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),signIn:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.login(t,i);case 2:if(r=e.sent,200!==r.status){e.next=7;break}return e.abrupt("return",{status:"success"});case 7:if(401!==r.status){e.next=11;break}return e.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return e.abrupt("return",{error:"technical issue"});case 12:case"end":return e.stop()}}),e)})));function t(t,i){return e.apply(this,arguments)}return t}(),validateAccount:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Me.validateAccount(t,i);case 2:r=e.sent,r.status>=300&&r.data&&r.data.message?ut(r.data.message,"warning"):ut(this.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},fbLoginSuccess:function(e){var t=this;facebookConnectPlugin.getAccessToken((function(i){Me.checkFacebookToken(e.authResponse.userID,i,(function(e,i){if(e&&ut(t.$t("label.TechnicalIssue"),"error"),i&&("login successful"===i.message||i.data&&"login successful"===i.data.message))return t.$router.push("/map");ut(t.$t("label.TechnicalIssue"),"error")}))}))},facebookLogin:function(){var e=this;window.cordova&&facebookConnectPlugin?(console.log("test1"),facebookConnectPlugin.login(["public_profile"],this.fbLoginSuccess,(function(t){console.log(t),ut(e.$t("label.TechnicalIssue"),"error")}))):(window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0))},startScanQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkCode(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},checkCode:function(){var e=n()(a.a.mark((function e(t){var i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.checkLoginQRCode(t,this.$t("label.shortLang"));case 2:i=e.sent,i&&i.data&&"ok"===i.data.status?this.$router.push("/quest/play/"+t):ut(this.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendForgottenPasswordCode:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,Me.sendForgottenPasswordCode(this.form.email);case 3:t=e.sent,200===t.status?this.step="forgottenpassword":ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},validations:{form:{email:{required:ot["required"],email:ot["email"]},newPassword:{required:ot["required"],minLength:Object(ot["minLength"])(8),checkPasswordComplexity:_r}}}},xr=Sr,qr=Object(ge["a"])(xr,kr,yr,!1,null,null,null),Er=qr.exports,Cr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},Tr=[],Ar={mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("logout");case 2:this.$router.push("/user/login");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Mr=Ar,Pr=Object(ge["a"])(Mr,Cr,Tr,!1,null,null,null),Rr=Pr.exports,Ir=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper dark-background"},[i("div",{staticClass:"page-content top-padding-middle q-pa-lg"},[i("div",{staticClass:"centered"},[e._v("\n      "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n    ")]),i("div",{staticClass:"centered"},[i("div",{staticClass:"big-avatar"},[e.$store.state.user.picture&&-1!==e.$store.state.user.picture.indexOf("http")?i("div",{style:"background-image: url("+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture&&-1===e.$store.state.user.picture.indexOf("http")?i("div",{style:"background-image: url("+e.serverUrl+"/upload/profile/"+e.$store.state.user.picture+");"}):e._e(),e.$store.state.user.picture?e._e():i("div",{style:"background-image: url(statics/icons/game/profile-small.png); background-color: #fff;"}),i("label",{attrs:{for:"picturefile"},on:{click:function(t){return e.$refs["uploadfile"].click()}}},[e._v(e._s(e.$t("label.Edit")))]),i("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),i("form",{on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[i("q-input",{attrs:{label:e.$t("label.YourName"),placeholder:"John Doe","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),i("q-input",{attrs:{label:e.$t("label.YourEmail"),placeholder:"john.doe@gmail.com","bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?i("q-input",{attrs:{type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.profile.form.password.$error,"error-message":e.$v.profile.form.password.checkPasswordComplexity?e.$v.profile.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),i("div",{staticClass:"q-pt-lg q-pb-md"},[e._v(e._s(e.$t("label.ToDisplayRelevantQuests")))]),i("q-select",{attrs:{label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),i("q-input",{attrs:{label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),i("q-select",{attrs:{label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),i("div",{staticClass:"q-pt-lg q-pb-md"},[e._v(e._s(e.$t("label.ToAvoidSendingYourToUnrelevantQuests")))]),i("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":""},model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),i("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":""},model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),i("div",{staticClass:"q-pt-lg q-pb-md"},[e._v(e._s(e.$t("label.ToHelpYouFindYourFriends")))]),i("q-input",{attrs:{label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}),i("q-btn",{staticClass:"text-primary bg-white full-width",on:{click:function(t){return e.submitProfileChanges()}}},[e._v(e._s(e.$t("label.Save")))])],1)])])},Or=[],Fr={data:function(){return{profile:{form:{name:"--",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:""}},countries:"fr"===this.$i18n.locale?Bt:Ut,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:Ke.buildOptionsForSelect(Qt,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){this.profile.form={name:this.$store.state.user.name?this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email?this.$store.state.user.email:"",password:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language},this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{submitProfileChanges:function(){var e=n()(a.a.mark((function e(){var t,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.profile.form.$error){e.next=8;break}return t={name:this.profile.form.name,email:this.profile.form.email,password:this.profile.form.password,phone:this.profile.form.phone?this.profile.form.phone:"",zipCode:this.profile.form.zipCode,country:this.profile.form.country,language:this.profile.form.language,age:this.profile.form.age,sex:this.profile.form.sex},this.$q.loading.show(),e.next=5,Me.modifyAccount(t);case 5:i=e.sent,this.$q.loading.hide(),i.status>=300&&i.data&&i.data.message?ut(i.data.message,"warning"):this.backToMap();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),backToMap:function(){this.$router.push("/map")},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},uploadImage:function(){var e=n()(a.a.mark((function e(t){var i,r,s;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.target.files,i[0]){e.next=3;break}return e.abrupt("return");case 3:return r=new FormData,r.append("image",i[0]),this.$q.loading.show(),e.next=8,Me.uploadAccountPicture(r);case 8:s=e.sent,s&&s.data&&(s.data.file?this.$store.state.user.picture=s.data.file:s.data.message&&"Error: File too large"===s.data.message&&ut(this.$t("label.FileTooLarge"),"error")),this.$q.loading.hide();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},validations:{profile:{form:{email:{required:ot["required"],email:ot["email"]},name:{required:ot["required"]},country:{required:ot["required"]},zipCode:{required:ot["required"]},password:{required:ot["required"],minLength:Object(ot["minLength"])(8),checkPasswordComplexity:_r}}}}},$r=Fr,Dr=Object(ge["a"])($r,Ir,Or,!1,null,null,null),Nr=Dr.exports,Lr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"page-content top-padding-middle"},[i("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){return e.$router.push("/map")}}},[i("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),i("h1",{staticClass:"size-3"},[e._v("Administration")]),i("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[i("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Quests validation",default:""}}),i("q-tab",{attrs:{name:"rejected",icon:"sentiment_very_dissatisfied",label:"Quests rejected"}}),i("q-tab",{attrs:{name:"minigames",icon:"child_friendly",label:"Mini games"}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[i("q-tab-panel",{attrs:{name:"validation"}},[i("q-list",{attrs:{highlight:""}},[e._l(e.questsToValidate.items,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.thumb?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"unpublished"==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)})),0===e.questsToValidate.items.length?i("q-item",[i("q-item-label",[e._v("No quest to validate")])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"rejected"}},[i("q-list",{attrs:{highlight:""}},[e._l(e.questsRejected.items,(function(t){return i("q-item",{key:t._id,nativeOn:{click:function(i){return e.$router.push("/quest/play/"+t.questId)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[t.thumb?i("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():i("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),i("q-item-section",[i("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?i("q-item-label",{attrs:{caption:""}},[i("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+" "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"published"!==t.status?i("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)})),0===e.questsRejected.items.length?i("q-item",[i("q-item-label",[e._v("No quest rejected")])],1):e._e()],2)],1),i("q-tab-panel",{attrs:{name:"minigames"}},[i("q-btn",{staticClass:"full-width",attrs:{link:"",color:"accent"},on:{click:function(t){return e.$router.push("/admin/minigames/builder")}}},[e._v(e._s(e.$t("label.AddATown")))]),i("q-list",{attrs:{highlight:""}},[e._l(e.towns.items,(function(t){return i("q-item",{key:t._id},[i("q-item-section",[i("q-item-label",[e._v(e._s(t.name)+" ("+e._s(t.zipcode)+")")]),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.country))])],1),"new"===t.status?i("q-item-section",{attrs:{side:""}},[i("q-btn",[e._v("Configure")])],1):e._e(),"configured"===t.status?i("q-item-section",{attrs:{side:""}},[i("q-btn",[e._v("Update")])],1):e._e()],1)})),0===e.towns.items.length?i("q-item",[i("q-item-label",[e._v("No town configured yet")])],1):e._e()],2)],1)],1)],1)])},zr=[],jr={ListQuestsToValidate:function(){return Ae().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return Ae().get("admin/quests/rejected")},ListTowns:function(){return Ae().get("admin/towns")},publish:function(e){return Ae().get("admin/quests/publish/"+e)},CreateTown:function(e){return Ae().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return Ae().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return Ae().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))}},Hr={data:function(){return{questsToValidate:{items:[]},questsRejected:{items:[]},towns:{items:[]},adminTab:"validation",serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadQuestsToValidate(),this.loadQuestsRejected(),this.loadTowns()},methods:{loadQuestsToValidate:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.ListQuestsToValidate();case 2:t=e.sent,this.questsToValidate.items=t.data.quests;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadTowns:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.ListTowns();case 2:t=e.sent,this.towns.items=t.data.towns;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadQuestsRejected:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.ListQuestsRejected();case 2:t=e.sent,this.questsRejected.items=t.data.quests;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},Br=Hr,Ur=Object(ge["a"])(Br,Lr,zr,!1,null,null,null),Qr=Ur.exports,Vr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[e.quest.title?i("div",{staticClass:"page-content top-padding-middle"},[i("p",[e._v("\n      Validation of the quest "),i("strong",[e._v(e._s(e.quest.title.fr)+" "+e._s(e.quest.title.en))])]),i("p",[i("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),i("p",[i("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),i("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the quest is rejected\n    ")])]):e._e()])},Yr=[],Wr={data:function(){return{quest:{},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getQuest(this.$route.params.questId,this.$route.params.version);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getQuest:function(){var e=n()(a.a.mark((function e(t,i){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Je.getById(t,i);case 2:r=e.sent,this.quest=r.data;case 4:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}(),publish:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.publish(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reject:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.reject(this.$route.params.questId);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Gr=Wr,Kr=Object(ge["a"])(Gr,Vr,Yr,!1,null,null,null),Jr=Kr.exports,Xr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"page-content top-padding-middle"},[i("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[i("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),i("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),i("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),i("div",[i("q-icon",{attrs:{name:"explore"}}),i("p",[e._v("GPS location bottom left")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),i("div",[i("q-icon",{attrs:{name:"explore"}}),i("p",[e._v("GPS location top right")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,r){return i("div",{key:r},[i("q-icon",{attrs:{name:"place"}}),i("p",[e._v("Place")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-9"},[i("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"place.name"}})],1),i("div",{staticClass:"col"},[e.isIOs?e._e():i("div",[""===t.picture?i("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+r].click()}}}):e._e(),i("input",{ref:"placepicture"+r,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(r,t)}}})],1),e.isIOs?i("div",[i("q-icon",{attrs:{name:"cloud_upload"}}),i("input",{ref:"placepicture"+r,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(r,t)}}})],1):e._e(),""!==t.picture?i("div",[i("img",{staticStyle:{width:"50px"},attrs:{src:e.serverUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),i("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"place.type"}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(i){e.$set(t.location,"lng",i)},expression:"place.location.lng"}})],1),i("div",{staticClass:"col"},[i("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(i){e.$set(t.location,"lat",i)},expression:"place.location.lat"}})],1)])],1)})),i("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},Zr=[],ea={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.addPlace();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{configureTown:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jr.CreateTown(this.form.fields);case 2:this.$router.push("/admin");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(){var e=n()(a.a.mark((function e(t,i){var r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$q.loading.show(),r=i.target.files,r[0]){e.next=4;break}return e.abrupt("return");case 4:return s=new FormData,s.append("image",r[0]),e.next=8,jr.uploadPlaceImage(s);case 8:n=e.sent,n&&n.hasOwnProperty("data")&&(this.form.fields.places[t].picture=n.data.file,this.$q.loading.hide());case 10:case"end":return e.stop()}}),e,this)})));function t(t,i){return e.apply(this,arguments)}return t}()},validations:{form:{fields:{name:{required:ot["required"]},zipcode:{required:ot["required"]}}}}},ta=ea,ia=Object(ge["a"])(ta,Xr,Zr,!1,null,null,null),ra=ia.exports,aa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper dark-background"},[i("div",{staticClass:"page-content top-padding-middle q-pa-lg"},["firstusage"!==e.step?i("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.tellUsAboutYou")))]):e._e(),"firstusage"===e.step?i("h1",{staticClass:"text-center size-3 q-mt-xl q-mb-lg"},[e._v(e._s(e.$t("label.IfYouUseGraalyForTheFirstTime")))]):e._e(),i("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},["generic"===e.step?i("q-input",{attrs:{dark:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName"),"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),"generic"===e.step?i("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.sex.$error,"error-message":e.$t("label.PleaseSelectYourSex"),"test-id":"sex"},on:{blur:e.$v.form.sex.$touch},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}):e._e(),"generic"===e.step?i("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge"),"test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}):e._e(),"location"===e.step?i("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry"),"test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}):e._e(),"location"===e.step?i("q-input",{attrs:{dark:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",error:e.$v.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode"),"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}):e._e(),"password"===e.step?i("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.form.password.$error,"error-message":e.$v.form.password.checkPasswordComplexity?e.$v.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule"),"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"password"===e.step?i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("q-checkbox",{attrs:{dark:"",color:"gold","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),i("div",{staticClass:"col"},[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.form.terms.$error?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),"password"===e.step?i("div",{staticClass:"row"},[i("div",{staticClass:"col-2"},[i("q-checkbox",{attrs:{dark:"",color:"gold","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),i("div",{staticClass:"col"},[i("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.form.privacy.$error?i("div",{staticClass:"q-field-bottom"},[i("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),"validation"===e.step?i("div",[i("p",{attrs:{"test-id":"enter-code"}},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),i("q-input",{attrs:{dark:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?i("p",{staticClass:"text-right q-mt-md q-mb-md"},[i("a",{on:{click:function(t){return e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?i("p",{staticClass:"text-center q-mt-md q-mb-md"},[i("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),i("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg q-mb-xl"},["firstusage"!==e.step?i("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"fas fa-chevron-left",loading:e.submitting},on:{click:function(t){return e.backAction()}}}):e._e(),i("q-btn",{attrs:{round:"",color:"white","text-color":"primary",icon:"fas fa-chevron-right",loading:e.submitting},on:{click:e.formSubmit}})],1)],1)])])},sa=[],na={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?Bt:Ut,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){Ke.clearAllRunningProcesses(),this.$route.params.email?this.form.email=this.$route.params.email:this.$router.push("/user/login")},methods:{formSubmit:function(){var e=n()(a.a.mark((function e(){var t,i,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?8:"password"===e.t0?12:"validation"===e.t0?24:"firstusage"===e.t0?31:33;break;case 3:return this.$v.form.sex.$touch(),this.$v.form.age.$touch(),this.$v.form.name.$touch(),this.$v.form.name.$error||this.$v.form.sex.$error||this.$v.form.age.$error||(this.step="location"),e.abrupt("break",33);case 8:return this.$v.form.country.$touch(),this.$v.form.zipCode.$touch(),this.$v.form.country.$error||this.$v.form.zipCode.$error||(this.step="password"),e.abrupt("break",33);case 12:if(this.$v.form.password.$touch(),this.$v.form.terms.$touch(),this.$v.form.privacy.$touch(),this.$v.form.password.$error||this.$v.form.terms.$error||this.$v.form.privacy.$error){e.next=23;break}return t={name:this.form.name,email:this.form.email,sex:this.form.sex,age:this.form.age,password:this.form.password,zipcode:this.form.zipCode,country:this.form.country,language:this.$i18n.locale},this.submitting=!0,e.next=20,Me.createAccount(t);case 20:i=e.sent,i.status&&200===i.status?this.openHome():ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 23:return e.abrupt("break",33);case 24:return e.next=26,Me.validateAccount(this.form.email,this.form.code);case 26:return r=e.sent,this.submitting=!0,r.status&&200===r.status?this.openHome():r.data&&"You have tries too much codes"===r.data.message?ut(this.$t("label.YourAccountIsBlocked"),"warning"):ut(this.$t("label.IncorrectCodePleaseRetry"),"warning"),this.submitting=!1,e.abrupt("break",33);case 31:return this.openHome(),e.abrupt("break",33);case 33:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openHome:function(){var e="/home";this.$route.query.hasOwnProperty("redirect")&&(e=this.$route.query.redirect),this.$router.push(e)},backAction:function(){var e=n()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.step,e.next="generic"===e.t0?3:"location"===e.t0?5:"password"===e.t0?7:"validation"===e.t0?9:11;break;case 3:return this.$router.push("/user/login"),e.abrupt("break",11);case 5:return this.step="generic",e.abrupt("break",11);case 7:return this.step="location",e.abrupt("break",11);case 9:return this.$router.push("/user/login"),e.abrupt("break",11);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateANewCode:function(){var e=n()(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.submitting=!0,e.next=3,Me.generateANewValidationCode(this.form.email);case 3:t=e.sent,200===t.status?ut(this.$t("label.ANewCodeHasBeenSent"),"info"):ut(this.$t("label.ErrorStandardMessage"),"error"),this.submitting=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},validations:{form:{name:{required:ot["required"]},country:{required:ot["required"]},zipCode:{required:ot["required"]},age:{required:ot["required"]},sex:{required:ot["required"]},terms:{sameAs:Object(ot["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(ot["sameAs"])((function(){return!0}))},password:{required:ot["required"],minLength:Object(ot["minLength"])(8),checkPasswordComplexity:_r}}}},oa=na,la=Object(ge["a"])(oa,aa,sa,!1,null,null,null),ua=la.exports,ca=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper dark-background"},[i("div",{staticClass:"page-content top-padding-middle fit firstusage"},[i("q-carousel",{ref:"carousel",staticClass:"text-white fit",attrs:{animated:"",swipeable:"",navigation:"","transition-next":"slide-left","transition-prev":"slide-right"},scopedSlots:e._u([{key:"control",fn:function(){return[i("q-carousel-control",{staticClass:"fit",attrs:{offset:[0,0]}},[i("q-btn",{staticClass:"q-carousel-left-arrow",attrs:{disable:!e.canGoToPrevious,color:"white","text-color":"primary",icon:"fas fa-chevron-left",round:"",size:"lg"},on:{click:function(t){return e.$refs.carousel.previous()}}}),i("q-btn",{staticClass:"q-carousel-right-arrow",attrs:{color:"white","text-color":"primary",icon:"fas fa-chevron-right",round:"",size:"lg"},on:{click:function(t){return e.nextSlide()}}})],1)]},proxy:!0}]),model:{value:e.firstUsageSlide,callback:function(t){e.firstUsageSlide=t},expression:"firstUsageSlide"}},[i("q-carousel-slide",{staticClass:"bg-primary",attrs:{name:"intro"}},[i("div",{staticClass:"row fit"},[i("div",{staticClass:"col centered"},[i("h3",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.WelcomeInGraalyWorld")))])])])]),i("q-carousel-slide",{staticClass:"bg-primary",attrs:{name:"discover"}},[i("div",{staticClass:"row fit"},[i("div",{staticClass:"col centered"},[i("h3",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.DiscoverPlacesAroundYou")))]),i("img",{attrs:{src:"statics/images/firstusage1.png"}})])])]),i("q-carousel-slide",{staticClass:"bg-primary",attrs:{name:"points"}},[i("div",{staticClass:"row fit"},[i("div",{staticClass:"col centered"},[i("h3",{staticClass:"vertical-middle"},[e._v(e._s(e.$t("label.WinPointsAndUnlockQuests")))]),i("img",{attrs:{src:"statics/images/firstusage2.png"}})])])])],1)],1)])},da=[],fa={data:function(){return{firstUsageSlide:"intro"}},computed:{canGoToPrevious:function(){return console.log(this.firstUsageSlide,"intro"!==this.firstUsageSlide),"intro"!==this.firstUsageSlide}},methods:{nextSlide:function(){var e=this.$refs["carousel"];"points"===e.value?this.$router.push("/user/login"):e.next()}}},ha=fa,pa=Object(ge["a"])(ha,ca,da,!1,null,null,null),ma=pa.exports,ba=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("img",{staticStyle:{width:"100%"},attrs:{src:"/statics/icons/game/oops.png"}}),"upgraderequired"===e.errorType?i("h2",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.UpgradeRequired"))+"\n  ")]):e._e(),null===e.errorType?i("h1",[e._v("\n    "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n  ")]):e._e(),null!==e.errorMessage?i("p",[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),null===e.errorType?i("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()])},ga=[],va={data:function(){return{errorMessage:null,errorType:null}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},wa=va,ka=(i("771f"),Object(ge["a"])(wa,ba,ga,!1,null,"31c80054",null)),ya=ka.exports,_a=[{path:"/",component:He,children:[{path:"",name:"none",redirect:"/map",meta:{requiresAuth:!0}},{path:"home",name:"home",redirect:"/map",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",component:ma,meta:{requiresAuth:!1}},{path:"map",name:"map",component:Gt,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:ii,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:Ii,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:zi,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:Xi,meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:Vi,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:wr,meta:{requiresAuth:!0}},{path:"user/createAccount/:email/:step",name:"signup",component:ua,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:Er,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:Rr,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"profile",component:Nr,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:Qr,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:Jr,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:ra,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:ya,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return i.e("2d230c65").then(i.bind(null,"ee5d"))}}];o["a"].use($e["a"]);var Sa=new $e["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:_a}),xa=Sa,qa=function(){var e="function"===typeof Fe?Fe({Vue:o["a"]}):Fe,t="function"===typeof xa?xa({Vue:o["a"],store:e}):xa;e.$router=t;var i={el:"#q-app",router:t,store:e,render:function(e){return e(we)}};return{app:i,store:e,router:t}},Ea=i("9483");Object(Ea["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.")},cached(e){console.log("Content has been cached for offline use.")},updated(e){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var Ca,Ta=function(e){var t=e.Vue;t.directive("click-outside",{bind:function(e,t,i){e.clickOutsideEvent=function(r){e===r.target||e.contains(r.target)||i.context[t.expression](r)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent)}})},Aa=i("c1df"),Ma=i.n(Aa),Pa=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(Ma.a.locale(t),e)return Ma()(String(e)).fromNow()}))},Ra=i("a925"),Ia=i("3013"),Oa=i.n(Ia),Fa=function(e){var t=e.app,i=e.Vue;i.use(Ra["a"]),t.i18n=new Ra["a"]({locale:"fr",messages:Oa.a}),Ca=t.i18n},$a=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=n()(a.a.mark((function e(t,i,r){var s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=15;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Fe.state.user||(Fe.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),r(),e.next=13;break;case 7:return de["a"].show(),e.next=10,Me.getAccount();case 10:s=e.sent,de["a"].hide(),s&&s.data&&s.data.name?s.data.clientSupportedVersion&&s.data.clientSupportedVersion>"1.7.0"?r({path:"/error/upgraderequired"}):(Fe.state.user=s.data,r()):Fe.state.user?s&&s.status&&200!==s.status?(401===s.status?ut(Ca.t("label.SessionExpired"),"error"):ut(Ca.t("label.AuthCheckError"),"error"),r({path:"/user/login",query:"/"===i.path?null:{redirect:t.fullPath}})):r():(n=_e["get"]("firstusage"),n&&"ok"===n?r({path:"/user/login",query:"/"===i.path?null:{redirect:t.fullPath}}):(_e["set"]("firstusage","ok",{expires:36500,secure:!0}),r({path:"/firstusage"})));case 13:e.next=16;break;case 15:r();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0),r();case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,i,r){return e.apply(this,arguments)}}())},Da=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var i=e.hash.split("/");"quest"===i[1]&&"play"===i[2]&&t.push("/quest/play/"+i[3])}}))}}),!1)},Na=function(e){var t=e.Vue;t.use(zt,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},La=i("1dce"),za=i.n(La),ja=function(e){var t=e.Vue;t.use(za.a)},Ha=i("a0db"),Ba=i.n(Ha),Ua=qa(),Qa=Ua.app,Va=Ua.store,Ya=Ua.router;function Wa(){return Ga.apply(this,arguments)}function Ga(){return Ga=n()(a.a.mark((function e(){var t,i,r,s,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=!0,i=function(e){t=!1,window.location.href=e},r=window.location.href.replace(window.location.origin,""),s=[Ta,Pa,$a,Da,Na,Fa,ja],n=0;case 5:if(!(!0===t&&n<s.length)){e.next=23;break}if("function"===typeof s[n]){e.next=8;break}return e.abrupt("continue",20);case 8:return e.prev=8,e.next=11,s[n]({app:Qa,router:Ya,store:Va,Vue:o["a"],ssrContext:null,redirect:i,urlPath:r});case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e["catch"](8),!e.t0||!e.t0.url){e.next=18;break}return window.location.href=e.t0.url,e.abrupt("return");case 18:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 20:n++,e.next=5;break;case 23:if(!1!==t){e.next=25;break}return e.abrupt("return");case 25:new o["a"](Qa);case 26:case"end":return e.stop()}}),e,null,[[8,13]])}))),Ga.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&Ba()(),Wa()},3:function(e,t){},3013:function(e,t){var i="https://graaly.com",r="sales@graaly.com",a={privacy:{en:i+"/privacy-policy/",fr:i+"/fr/confidentialite/"},terms:{en:i+"/terms/",fr:i+"/fr/cgu/"}};e.exports={en:{challenge:{challengePlay10Quests:"Play 10 quests",challengePlay30Quests:"Play 30 quests",challengePlay100Quests:"Play 100 quests",challengePlay1000Quests:"Play 1000 quests",challengeBuild1Quests:"Create 1 quest",challengeBuild5Quests:"Create 5 quests",challengeBuild10Quests:"Create 10 quests",challengeBuild40Quests:"Create 40 quests",challengeHave2members:"Invite 2 members in your agency",challengeHave10members:"Invite 10 members in your agency",challengeHave20members:"Invite 20 members in your agency"},color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White"},news:{newQuestWon:"Has won the quest <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the quest <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your quest <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on quest <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the quests you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in quests during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Find a location",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",PhotographAnObject:"Photograph an item",PhotographAnObjectDesc:"Compare your picture with a play camera picture",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Locate item using augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Locate a symbol",LocateMarkerDesc:"Player has to find a special symbol, printed or shown on a real screen.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"End of chapter",EndOfChapterDesc:"This transition send player to next chapter",OrDownloadAFile:"Or download your own picture"},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French"},story:{AskIfUseTuto:"Welcome<br />Do you want to play the demo quest, to understand how to use Graaly (approx. duration 5 min)? Press <b>Skip tutorial</b> on the bottom left to play without demo",Welcome:"Welcome <b>young detective</b>, you have just joined my team.<br />We have to deal with an increase in inquiries, and have chosen to call <b>someone like you</b>! ",FirstStep:"Please let me tell you that there will be a lot of work.<br />But if you're motivated and you listen to my advice, you'll <b>quickly become a good detective</b>.",PresentTeam:"Let start to <b>present our team</b>",PresentSecretary1:"Hello, I am <b>Jane</b>, I will assist you in your missions.",PresentSecretary2:"I will give you the <b>more information I can before you start a quest</b>",PresentIndicator1:"Hi, I am <b>Mark</b> your informer",PresentIndicator2:"Do not hesitate <b>to ask me hints</b> during quests",MapExplaination1:"You will be able to start a quest. <br /> Quests are represented by <i aria-hidden='true' style='font-size: 1.5em' class='q-icon fas fa-map-marker'> </i> icons on the map below.",MapExplaination2:"To start a quest, you need <b>enough energy</b>.<br />Your energy is represented by <i aria-hidden='true' style='font-size: 1.5em' class='q-icon fas fa-bolt'> </i>, on the top left corner of your screen",MapExplaination3:"Each quest earns you points.<br />Your points are displayed on the top right corner of your screen",StartPlaying:"Don't waste more time, select a discovery quest (that you can play at home) represented by the <img src='statics/icons/game/pointer-quest.png' /> icon on the map",WelcomeToQuest1:"Hello, nice to collaborate with you on this new quest",WelcomeToQuest2:"Please go to this place to start: <br /><b>{startingPlace}</b>",QuestParams:"You can win up to <b>{score}</b> on this quest.<br />This quest <b>difficulty level</b> is <img class='image-and-text-aligned' src='statics/icons/game/magnifying-red.png' /><img class='image-and-text-aligned' src='statics/icons/game/magnifying-{level2}.png' /><img class='image-and-text-aligned' src='statics/icons/game/magnifying-{level3}.png' />, and its <b>estimated duration</b> is {duration} minutes.",description:"{description}",QuestIsFarFromUser:"<b>You are far from this quest</b>.<br />By solving this quest afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this quest</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are the <b>owner of this quest</b>, you will not win any point",GeneralWarning:"<b>For your safety</b>, do not play Graaly driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",hint:"Hello, here is a hint: <br /><b>{hint}</b>",readMore:"{readMore}",DiscoveryQuest1:"Before you start your first investigation, come with me, I'll show you the basics of the job <b>on a first quest, really simple and doable remotely</b>.",RankingDescription1:"The <b>Ranking</b> allows you to show off with other detectives!",RankingDescription2:"You can see your <b>worldwide ranking</b> <i aria-hidden='true' class='q-icon material-icons'>public</i>, and <b>your local ranking</b> <i aria-hidden='true' class='q-icon material-icons'>home</i>.",RankingDescription3:"<b>Territories</b> allow you to know your progress in resolving a city's quests.<br />When you have <b>solved all the investigations of a city</b>, you have conquered the territory!",RankingDescription4:"Return to the map by pressing the <i aria-hidden='true' class='q-icon medium-icon material-icons'>close</i> button",CompleteProfile1:"Do not forget to <b>complete your profile</b>, to help me contact you if I need.",CompleteProfile2:"When it is done, touch the button <img src='statics/icons/game/menu-main.png' style='width: 40px'>.",CreateQuest1:"If you create your own quest on a place you know well, you will win points",CreateQuest2:"You can also <b>win real money</b> if your quest is very popular",CreateQuest3:"But it is especially <b>the way to have fun to make cogitate all the other investigators</b> by creating them enigmas",AddFriends:"Do not forget to <b>add your friends</b>.<br />You will then follow their progression, play their quests and compare your results",DiscoveryQuest2:"Your quest is composed with <b>steps</b>, which can be either a descriptive page like this, or an enigma",DiscoveryQuest3:"The bottom menu is the <b>navigation menu</b> of your quest",DiscoveryQuest4:"The button <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>menu</i> allows you to look at the <b>description of the quest</b>, and quit to the map page",DiscoveryQuest5:"The button <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_back</i> allows you got <b>go back to the previous step</b>.<br />Meanwhile, you do not win extra points if you already answer to the enigma.",DiscoveryQuest6:"The button <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i> allows you to <b>pass current step</b>, and reach the next step.<br />If you do not answer the enigma, you move to next step without winning any point.",DiscoveryQuest7:"<b>It's your turn</b>, press the button <i aria-hidden='true' class='q-icon material-icons bg-primary text-white'>arrow_forward</i> to move to next step.",DiscoveryQuest8:"This step of the quest is <b>an enigma</b>.<br />You need to press the picture linked to the good answer",DiscoveryQuest9:"<b>A good answer gives you 10 </b> points, a wrong one does not bring you any point.",DiscoveryQuest10:"If you are unsure about the answer, press the button <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>lightbulb_outline</i> to <b>get a hint</b>.<br />A <b>hint cost you 5 points</b>, you will win 5 points instead of 10 by using a hint.",DiscoveryQuest10b:"<b>Let's go, please press</b> the <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>lightbulb_outline</i> button",DiscoveryQuest11:"Some steps allow you to <b> earn items </b>, like a magnifying glass here",DiscoveryQuest12:"It's your turn, press the <i aria-hidden='true' class='q-icon material-icons bg-primary text-white'>work</i> button to look at your items.",DiscoveryQuest13:"Some steps are <b>mini games</b>, like a jigsaw puzzle here.<br />Move the pieces with your finger. If you can not solve it, skip the puzzle by pressing the button <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i>",DiscoveryQuest14:"In this step, you are asked to <b>use an object</b>. For that, select the object by pressing the <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>work</i> button",DiscoveryQuest15:"Once the object is selected, apply it by pressing on the man's backpack on the picture",DiscoveryQuest16:"If you use the wrong object, or you press on the wrong area of the picture, you have an extra <b>answer</b>, but you can win only the half of the step points",EndQuest1:"Well done, you won <b>{score}</b>! Depending on your score, you have won 1, 2 or 3 <i aria-hidden='true' class='q-icon fas fa-award'> </i>",EndQuest1b:"Well done, even if you did not win any points, you have reached the end of the quest!",EndQuest2:"You start with <b>the level 1</b>, but you will soon move to the level 2 and <b>unlock new quests</b>!",EndQuest3:"You are not far from <b> reaching the next level</b>! Stay motivated!",EndQuest4:"<b>Challenge your friends</b> to win more points and have fun comparing your scores.<br />It also allows you to be notified if a friend creates a new quest.",EndQuest5:"You can <b>rate this quest</b>, and inform its creator about issues you met during the quest",EndQuest6:"Press the <b>Back to map</b> button, to go back to the quests map, and start a new quest",MapReturn:"Well done, you have completed your first quest! Press the top right area (<b>{score}</b>) to <b>look at your ranking</b>",MapDetail1:"When you are on the map page, press the <img src='statics/icons/game/menu-main.png' style='width: 30px'> button to <b>access to the map options</b>, and find quests.<br />The <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>playlist_add_check</i> button lists the quests you solved or you built.<br />The <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>group</i> button opens your profile page, with your friends news.",StartNewQuest1:"Ok, I think you are ready to <b>start a new quest</b> !<br />Do not forget to charge your mobile more than 50% before starting a quest.",StartNewQuest2:"I propose that we start the <strong>{quest}</strong> quest !",StartNewQuest3:"Select a new quest on the map when you are ready",help:"{help}",BuilderLanguage1:"A new quest? What a good idea! I can not wait to test it!",BuilderLanguage2:"The first step is to <b>choose a language for your quest</b>.<br />You can add easily other languages later.",BuilderLanguage3:"For example, if you create a quest only in french, all players can play it in french, whatever their language.<br />If you create your quest in english and french, the quest will be played in the the player language.",BuilderConfiguration1:"The next step is to <b>describe your quest</b>, in the language you have chosen, to make players want to try to solve it.",BuilderConfiguration2:"The <b>title is very important</b>, try to choose an engaging one !",BuilderConfiguration3:"The <b>subject of your quest</b> is often the most complicated task.<br />Start by finding out informations about the place, the events that took place, and when they were held. The story can be completely imaginary, or include real facts.",BuilderConfiguration4:"I advise you to <b>play a few quests</b> before you start creating yours, they can give you many ideas to start!",BuilderConfiguration5:"Do not hesitate, in the description, to give information about you, about the place, about organizations able to give more information about the place visited",BuilderConfiguration6:"Also indicate precisely the <b>starting place of the quest</b>, if necessary use the description to complete the address.<br /> A wrong start can jeopardize the success of a quest!",BuilderStep1:"You will now create the <b>steps of your quest</b>.",BuilderStep2:"A step can be either<b><i>a transition</i></b>, in which you give informations or objects to the player, or <b><i>an enigma</i></b>, where the player has to solve an enigma",BuilderStep3:"It is often convenient to <b>alternate the two</b>, a transition to describe a place, to provide the information needed to solve puzzles, to provide information after a player solve an enigma , or provide objects necessary for the resolution of an enigma.",BuilderStep4:"Once your steps are created, you can <b>move</ b>, <b>delete</ b>, or <b>add new ones</b>. <br /> A quest must contain between 6 and 50 steps.",BuilderStep5:"Start by creating a first <b>Image and text</b> step to introduce your quest!",BuilderStepOverview1:"<b>The overview</b> helps you check if your enigma is displayed as you want",BuilderStepOverview2:"If you want to modify your enigma, press the <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_back</i> button",BuilderStepOverview3:"If the display is ok, press the <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i> button",BuilderStepSettings1:"Type a description and upload a picture, which will be the background image and the text displayed for the player.<br />The title is only displayed to you, to help you find a step in the steps list.",BuilderStepSettings2:"Once this step is configured, press the <b>Save this step</b> button to open the overview page",BuilderPublishing1:"Once your quest is finished, you can <b>test it</b> in the <i>Publish tab</i> to check that it is clear and feasible for other players",BuilderPublishing2:"Do not hesitate to add <b>editors</b> who can test your quest without publishing it.<br />The editors can also, if you you want, modify your quest.",BuilderPublishing3:"Once your quest is ok for you, you can <b>ask for publishing</b>. The Graaly `Game masters` will review it, and give you clues to improve it.<br /><b>During this phase, you can not modify your quest!</b>. So take time to review it before publishing your quest.",BuilderPublishing4:"If your quest is validated, it will be published, so playable by other players!"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the quest near from your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (it can takes 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error occurs, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again one hour later",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you use Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful quests",QuestsCreated:"Created quests",CreateANewQuest:"Create a new quest",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No quest created",NoQuestPlayed:"No quet played",NoQuestPlayedLong:"No quet played. To play a quest, return to the map and select a quest near from you!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",BackToMap:"Back to the map",MyProfile:"My profile",Friends:"Friends",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to do ?",ReachScoreOf:"Reach a score of {score} to unlock new quests",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play this quest",ContinueTheQuest:"Continue the quest",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",BackToTheMap:"Back to the map",WelcomeInGraalyWorld:"Welcome in the Graaly world!",DiscoverPlacesAroundYou:"Play and discover places around you!",WinPointsAndUnlockQuests:"Win points and unlock quests!",CreateYourQuestsAndWinMoney:"Build your own quests and earn money!",CenterOnYourPosition:"Center map on your location",BuildAQuestHere:"Build a quest",BestQuests:"Best quests",OnlyEasy:"Easiest quests",SearchForAQuest:"Search for a quest",DisplayAllQuests:"Display all quests",km:"km",NoQuestForThisSearch:"No quest for this search",WhyDontYouCreateAQuest:"Why don't you create a quest?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this quest",YouAlreadyStartThisQuest:"You have already played this quest, do you want to continue with the step you stopped?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",CreateYourQuest:"Create your quest!",CreateYourPrivateQuest:"Create your private quest!",CreateYourPublicQuest:"Create your public quest!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept those rules, described in the XXXXX:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the quest, do not ask players to touch, move, or degrade things.</p><p>The story of your quest must not undermine living or dead people</li><li>Your quest must concern a location where no quest has already be done, except if the content is enough different.</li><li>Your quest must have more than 6 steps and less than 50 steps</li><li>Our moderation team will check if your quest respects these rules, and if the quality level is enough. If not, you will be asked to improve your quest, or your quest will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept those rules, described in the XXXXX:<ul><li>If you are not the owner of the place of the quest, do not ask players to touch, move, or degrade things.</li><li>The story of your quest must not undermine living or dead people</li><li>You are limited to 20 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny quest to challenge players and win points!",HowToWinMoney:"How to win money?",HowToWinMoneyExplaination:"Graaly share with you 50% of the revenues of the ads displayed when a use play one of your quest. The revenues are payed when they reach $100.",NewQuest:"New quest",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the quest",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your quest is published",YourQuestIsUnpublished:"Your quest is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your quest",PublishYourQuest:"Publish your quest",UnpublishYourQuest:"Unpublish your quest",SelectTheLanguageAndClickOnNextButton:"Select the language to define settings and steps in the next tabs",SelectedLanguage:"Type quest in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Quest",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of the thing to find",UploadTheObjectToFind:"Upload a GLB file of the object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Try again (-5 points)",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your quest",AddYourChapters:"Create a first chapter and add first pages of your quest inside",ActivateTheLanguageVisible:"Activate the languages playable for your quest",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your quest",LanguagesPublished:"Languages playable",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave quest",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you 5 points. Are you sure to use it?",YouWin:"You win",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review this quest",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this quest in the past",ResolveOtherQuestsToWinPoints:"Play new quests to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have not friend yet",YourRanking:"My ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this quest?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",Map:"Quests map",AddressToFind:"Address of the location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the quests of a city to win all the rewards",NoRankingYet:"Your rank is not yet computed, please wait for tomorrow",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your quest is now read only. Your quest will be validated by our game master. This can take days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email to know why",QuestPublicationRejected:"Your quest has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"Find the object by looking around and touch it",ObjectSize:"Object size",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the quest",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step",YourQuestMustContainAtLeast6Steps:"Your quest is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your quest is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Charge your phone before starting quest",WarningNoNetwork:"No network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the quest element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this quest",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this quest? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type email address of the editor you want to invite",InviteInviteesHelp:"Type email address of the person you want to invite",UserIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a quest",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",AddFriends:"Add friends",FriendsAdded:"Friend added",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove him/her from your friends list",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct marker with your phone camera. A marker is a symbol surrounded by a black frame. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right marker. A marker is a symbol surrounded by a black frame. A virtual object will appear on the right marker ; touch it to succeed. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"We need more information about you",ToDisplayRelevantQuests:"To display the right quests:",ToHelpYouFindYourFriends:"To help you find your friends (optional):",ToAvoidSendingYourToUnrelevantQuests:"To avoid to make you go to unsuitable quests:",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",Reviews:"Reviews",CommentThisQuest:"Comments for quest author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the quest before sending your review",QuestNotReviewed:"This quest has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery quest",contactUsPro:'You can find our professional services on <a href="'.concat(i,'" target="_blank">').concat(i,'</a> or contact us at <a href="mailto:').concat(r,'">').concat(r,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again",BackToQuest:"Back to the quest",min:"min",pts:"pts",SportQuest:"Nature quest",DiscoveryQuest:"Discovery quest",CulturalQuest:"Cultural quest",ChildQuest:"Children's quest",TransportQuest:"Quest by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night quest",ExtremQuest:"Extreme quest",CulinarQuest:"Culinary quest",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, and enable it later in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before text appear above the background image (seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this quest (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your sex",PleaseSelectYourAge:"Please selection you age",RankingIntro:"Here is the best players for this quest",CloseQuestRanking:"Back to the quest",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to end of the quest",NoFriendsLong:"You do not have friends yet. To add friends, go back to map, open your profile, and select the friends tab",IAgreeTheTermsAndConditions:'I agree with the <a target="_blank" href="'.concat(a.terms.en,'">terms & conditions</a>'),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:'I agree with the <a target="_blank" href="'.concat(a.privacy.en,'">privacy policy</a>'),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:'<a target="_blank" href="'.concat(a.terms.en,'">Terms & conditions</a>'),PrivacyPolicyLink:'<a target="_blank" href="'.concat(a.privacy.en,'">Privacy policy</a>'),YourPhoneIsNotCompliantWithThisStepType:"Your device is currently not compliant with this step type. Please apologize for the inconvenience, please move to next step",DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have a End of chapter step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the introduction step of a chapter can not have triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe step it is following is missing)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues of your quest",IssuesInYourStep:"Issues of your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a mark, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occurs.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this quest. Your published quest will be still available for player, until you will publish this new quest version.",ClickHereToCreateANewQuestVersion:"To edit your quest, click here",YourUnderValidationQuests:"Your quest(s) currently reviewed",YourRejectedQuests:"Your quest(s) rejected",YourDraftQuests:"Your draft(s)",YourPublishedQuests:"Your published quest(s)",Loading:"Loading ...",QuestDraftVersion:"Non published quest",PrivateQuest:"Private quest",PublicQuest:"Public quest",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your quest, do you want to add it?",Results:"Results",ClosePrivateQuest:"Close the quest",ClosePrivateQuestDesc:"After clicking here, your quest will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this quest? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this quest",NoPlayersYetForThisQuest:"No player yet for this quest",PrivateQuestDesc1:"Your  quest is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a quest to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your quest will be visible on the Graaly map, and playable by every body",CreatePrivateQuest:"Create a private quest",BuyPrivateQuest:"Buy a private quest",AcceptAndBuyAPrivateQuest:"Accept annd buy a private quest",CreatePublicQuest:"Create a public quest",YouAreQuestOwnerDesc:"You are the owner of this quest, you will not win any point",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this quest",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your quest is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Quest type",helpQuestType:"A chain of clues quest is a list of enigmas that follows each other. An escape game quest is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first quest, we advise you to start with a chain of clues quest. You can change a chain of clues quest in an escape game quest, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Quest files",YouDoNotUseAnyMediaYetInYourQuest:"You do not user any media yet in your quest",Feedback:"Give feedback",FeedbackTitle:"Send a feedback",FeedbackIntroduction:"To send a feedback to this quest author, or rate this quest, please wait for the end of the quest. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your quest builder",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your quest...",ErrorOfflineSaving:"Technical issue, you can not play this quest without network",QuestNeedNetwork:"You need network to launch this quest. Activate your device network, and click on the button when you have network to launch the quest",ReloadQuest:"Reload quest",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Downloading ",YouAreOfflineYourQuestsList:"We did not succeed on listing the quests around you (network issue). Here are the quests you downloaded, and that you can play offline:",YouAreOfflineNoQuestsAvailable:'Sorry, we could not find any quests playable offline. The next time you have an internet connection, please download quests from the map screen by touching a quest, then the link "play offline". This will allow you to play those quests without internet connection.',ButtonsColor:"Buttons color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",AvailableTomorrow:"Available tomorrow",byteCharacter:"B",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You are already friend with this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not have more than 150 friends",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You have won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this quest without network.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro quest",MovePremium:"Move this quest to pro mode",PremiumDefinition1:"Give your quest more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized quest to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable quest</u>: you can sell your quest to players</li><li>You can access the statistics of your quest</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your quest to premium mode (look at your quest settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of players",NumberOfPlayersYesterday:"Number of players yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by sex",AverageScore:"Average score",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro quests",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro quest(s) more",YouCanNotCreateNewQuests:'Yon can not create new pro quests. Subscribe to our professional offers on <a href="'.concat(i,'" target="_blank">').concat(i,'</a> or by email at  <a href="mailto:').concat(r,'">').concat(r,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of quest on a mobile device",QuestPlayableOnMobile:"This quest is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Quest loading failed. You can play the quest online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the quest. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a quest",SuggestANewQuest:"Suggest a new quest",YouLikedThisQuest:"You liked this quest?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested quests to contact the responsible of this place. You will be warned if a quest is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Quest has been updated",PleaseRestartQuest:"Please restart the quest from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code to start a quest without account",MarkersToPrint:"Print the game's QR Codes, and place them where you want to",MarkersToStartQuest:"You can redirect the players to the quest, weither they have an account or not. For that, create a QR Code (on https://www.qr-code-generator.com/ for instance) with the value <strong>{code}</strong>",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other quests around",UnknowUploadError:"An error occurs. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screens. Depending on the screens, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your quest. This will motivate them to play your quest. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",DisplayGeolocationHelp:"Display the GPS calibration animation",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",QuestMapIsLoading:"Quest map is loading"}},fr:{challenge:{challengePlay10Quests:"Résoudre 10 enquêtes",challengePlay30Quests:"Résoudre 30 enquêtes",challengePlay100Quests:"Résoudre 100 enquêtes",challengePlay1000Quests:"Résoudre 1000 enquêtes",challengeBuild1Quests:"Créer 1 enquête",challengeBuild5Quests:"Créer 5 enquêtes",challengeBuild10Quests:"Créer 10 enquêtes",challengeBuild40Quests:"Créer 40 enquêtes",challengeHave2members:"Inviter 2 membres dans votre agence",challengeHave10members:"Inviter 10 membres dans votre agence",challengeHave20members:"Inviter 20 membres dans votre agence"},color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc"},news:{newQuestWon:"A réussi l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre enquête <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur l'énigme <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos enquêtes durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est doublée durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"+100 d'énergie","100coinsDesc":"Vous gagnez +100 en énergie","10coins":"+10 énergie","10coinsDesc":"Vous gagnez +10 en énergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Trouver un lieu",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Trouver un code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Trouver un code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",PhotographAnObject:"Photographier un objet",PhotographAnObjectDesc:"Retrouver et photographier un objet",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser objet",UseAnItemDesc:"Utiliser un objet de l'inventaire",LocateItemAR:"Trouver un objet en réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité.",LocateMarker:"Trouver un symbole",LocateMarkerDesc:"Le joueur doit trouver un symbole spécial, imprimé ou affiché sur un écran.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur au chapitre suivant"},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Français"},story:{AskIfUseTuto:"Bienvenue dans Graaly<br />Souhaitez-vous suivre l'enquête de démo pour vous familiariser avec Graaly (durée approx. 5 min) ? Pressez <b>Passer l'aide</b> en bas à gauche pour jouer sans la démo",Welcome:"Bienvenue <b>jeune détective</b>, vous venez de rejoindre mon équipe.<br />Nous devons faire face à une augmentation des enquêtes, et avons choisi de faire appel à <b>quelqu'un de prometteur comme vous</b> !",FirstStep:"Autant vous le dire tout de suite, il va y avoir du boulot.<br />Mais si vous êtes motivé(e) et vous écoutez mes conseils, vous allez <b>rapidement devenir un bon détective</b>.",PresentTeam:"Avant d'aller plus loin, je vais vous <b>présenter l'équipe</b>",PresentSecretary1:"Bonjour, je suis <b>Jeanne</b>, je vous assisterai dans vos missions.",PresentSecretary2:"Je vous ferai également un <b>briefing avant chaque enquête</b>.",PresentIndicator1:"Salut, je suis <b>Marc</b>, votre indic.",PresentIndicator2:"Si vous bloquez sur certaines enquêtes, <b>appelez moi</b> !",MapExplaination1:"Vous allez pouvoir commencer une enquête.<br />Les enquêtes sont représentées par les icônes <i aria-hidden='true' style='font-size: 1.5em' class='q-icon fas fa-map-marker'> </i> sur la carte ci-dessous.",MapExplaination2:"Pour commencer une enquête, il vous faut <b>assez d'énergie</b>.<br />Votre énergie est représentée par <i aria-hidden='true' style='font-size: 1.5em' class='q-icon fas fa-bolt'> </i>, en haut à gauche",MapExplaination3:"Chaque enquête vous rapporte des points<br />Vos points sont affichés en haut à droite",StartPlaying:"Ne perdons pas plus de temps, Je vous emmène sur une petite enquête de découverte (que vous pouvez jouer de chez vous), appuyez sur votre position représentée sur la carte par l'icône <img src='statics/icons/game/pointer-me.svg' width='30' height='30' />",WelcomeToQuest1:"Bonjour, ravie de collaborer avec vous sur cette nouvelle enquête",WelcomeToQuest2:"Rendez-vous à l'adresse suivante pour commencer : <br /><b>{startingPlace}</b>",QuestParams:"Cette enquête peut rapporter jusqu'à <b>{score}</b> points.<br />Elle est de <b>difficulté</b> <img class='image-and-text-aligned' src='statics/icons/game/magnifying-red.png' /><img class='image-and-text-aligned' src='statics/icons/game/magnifying-{level2}.png' /><img class='image-and-text-aligned' src='statics/icons/game/magnifying-{level3}.png' />, la <b>durée</b> est estimée à {duration} minutes.",description:"{description}",QuestIsFarFromUser:"<b>Vous n'êtes pas sur le lieu de l'enquête</b>.<br />En résolvant cette enquête à distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez déjà réussi cette enquête</b>. Vous pouvez la résoudre à nouveau, mais elle ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous êtes le <b>créateur de cette enquête</b>, elle ne vous rapportera aucun point",GeneralWarning:"<b>Pour votre sécurité</b>, ne jouez pas à Graaly en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",hint:"Salut, voici un indice :<br /><b>{hint}</b>",readMore:"{readMore}",DiscoveryQuest1:"Vous voulez que je vous apprenne les ficelles du métier ?<br />Venez avec moi, nous allons <b>résoudre la première enquête très simple et réalisable de chez vous</b>, juste pour apprendre comment utiliser Graaly.",RankingDescription1:"Le <b>Classement</b> vous permet de frimer auprès des autres détectives !",RankingDescription2:"Vous pouvez voir <b>votre classement mondial</b> <i aria-hidden='true' class='q-icon material-icons'>public</i>, et <b>votre classement local</b> <i aria-hidden='true' class='q-icon material-icons'>home</i>.",RankingDescription3:"<b>Les territoires</b> vous permettent de savoir votre progression dans la résolution des enquêtes d'une ville.<br />Quand vous avez <b>résolu toutes les enquêtes d'une ville</b>, vous avez conquis le territoire !",RankingDescription4:"Revenez à la carte en appuyant sur le bouton <i aria-hidden='true' class='q-icon medium-icon material-icons'>close</i>",CompleteProfile1:"N'oubliez pas de bien <b>compléter votre profil</b>, pour que je puisse vous contacter sans problème.",CompleteProfile2:"Dès que c'est bon, appuyez sur le bouton <img src='statics/icons/game/menu-main.png' style='width: 40px'>.",CreateQuest1:"Vous pouvez créer votre propre enquête, cela vous rapporte des points",CreateQuest2:"Vous pouvez aussi <b>gagner de l'argent</b> si votre enquête est très populaire.",CreateQuest3:"Mais c'est surtout le moyen de <b>s'amuser à faire cogiter tous les autres enquêteurs</b> en leur créant des énigmes",AddFriends:"N'oubliez pas <b>d'ajouter vos amis</b>.<br />Cela permet de suivre leur évolution, de jouer à leur enquêtes et de comparer vos résultats",DiscoveryQuest2:"Votre enquête se décompose en <b>plusieurs étapes</b>, qui peuvent être soit une page descriptive comme ici, soit une énigme",DiscoveryQuest3:"La barre du bas est le <b>menu de navigation</b> de votre enquête.",DiscoveryQuest4:"Le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>menu</i> vous permet de revoir la <b>description de l'enquête</b>, et de quitter l'enquête en cours.",DiscoveryQuest5:"Le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_back</i> vous permet de <b>revenir à l'étape précédente</b>.<br />Par contre, vous ne gagnerez pas de point supplémentaire si vous avez déjà répondu à l'énigme.",DiscoveryQuest6:"Le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i> vous permet de <b>passer à l'étape suivante</b>.<br />Si vous ne répondez pas à l'énigme, vous passez à l'étape suivante sans gagner de points.",DiscoveryQuest7:"<b>A vous de jouer</b>, appuyez sur le bouton <b>Fermer</b> puis sur le bouton <i aria-hidden='true' class='q-icon material-icons bg-primary text-white'>arrow_forward</i> pour passer à l'énigme suivante.",DiscoveryQuest8:"Cette étape de l'enquête est <b>une énigme</b>.<br />Il vous faut appuyer sur l'image correspondant à la bonne réponse, sur les 4 options possibles",DiscoveryQuest9:"<b>Une bonne réponse vous rapporte 10 points</b>, une mauvaise ne vous rapporte aucun point.",DiscoveryQuest10:"Si vous hésitez sur la réponse, appuyez sur le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>lightbulb_outline</i> pour <b>obtenir un indice</b>.<br />Un <b>indice vous coûte 5 points</b>, vous gagnerez 5 points au lieu de 10 en utilisant un indice.",DiscoveryQuest10b:"<b>Allez-y, appuyez sur le bouton</b> <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>lightbulb_outline</i>",DiscoveryQuest11:"Certaines étapes vous permettent de <b>gagner des objets</b>, comme une loupe ici",DiscoveryQuest12:"A vous de jouer, pressez le bouton <i aria-hidden='true' class='q-icon material-icons bg-primary text-white'>work</i> pour voir vos objets.",DiscoveryQuest13:"Certaines énigmes sont des <b>mini jeux</b>, comme un puzzle ici.<br />Déplacez les pièces avec le doigt. Si vous n'y arrivez pas, passez l'énigme en pressant le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i>",DiscoveryQuest14:"Dans cette énigme, on vous demande <b>d'utiliser un objet</b>. Pour cela, sélectionnez l'objet en appuyant sur le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>work</i>",DiscoveryQuest15:"Une fois l'objet sélectionné, appliquez en appuyant sur le sac à dos de l'homme sur l'image",DiscoveryQuest16:"Si vous vous trompez d'objet ou d'emplacement pour appliquer l'objet, vous avez une <b>chance supplémentaire</b>, mais vous ne gagnerez que la moitié des points de l'énigme",EndQuest1:"Bien joué, vous avez gagné <b>{score}</b> points ! Suivant votre nombre de points, vous avez gagné 1, 2 ou 3 <i aria-hidden='true' class='q-icon fas fa-award'> </i>",EndQuest1b:"Bravo, même si vous n'avez gagné aucun point, vous êtes arrivé au bout de cette enquête !",EndQuest2:"Vous <b>débutez au niveau 1</b>, mais rapidement vous pourrez passer au niveau 2 et <b>débloquer de nouvelles enquêtes et fonctionnalités</b> !",EndQuest3:"Vous n'êtes pas loin de <b>passer au niveau supérieur</b> ! Encore un petit effort !",EndQuest4:"<b>Défiez vos amis</b> enquêteurs pour gagner plus de points et s'amuser à comparer vos scores.<br />Cela vous permet aussi d'être averti si un ami crée une enquête.",EndQuest5:"Vous pouvez noter l'enquête et indiquer à son créateur si vous avez rencontré des problèmes",EndQuest6:"Appuyez sur le <b>bouton 'Retour à la carte'</b>, pour revenir à la carte des enquêtes, et démarrer une nouvelle enquête",MapReturn:"Bravo, vous avez réussi votre première enquête. Appuyez sur la zone en haut à droite (<b>{score}</b>), <b>pour voir votre classement</b>.",MapDetail1:"Quand vous êtes sur la carte, appuyez sur le bouton <img src='statics/icons/game/menu-main.png' style='width: 30px'> pour <b>accéder aux options de la carte</b>, et trouver les enquêtes qui vous intéressent.<br />Le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>playlist_add_check</i> liste les enquêtes que vous avez résolue et que vous avez créées.<br />Le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>group</i> vous permet d'accéder à votre profil et aux infos de vos amis.",StartNewQuest1:"Bon, on s'est assez reposé, <b>démarrons une nouvelle enquête</b> !<br />N'oubliez pas de charger votre portable à plus de 50% avant une enquête.",StartNewQuest2:"Je vous propose qu'on s'occupe de l'enquête <strong>{quest}</strong> ! Beaucoup s'y sont cassé les dents, y arriverez-vous ?",StartNewQuest3:"Sélectionnez une nouvelle enquête sur la carte quand vous êtes prêt",help:"{help}",BuilderLanguage1:"Quelle bonne idée, une nouvelle enquête ! J'ai hâte de pouvoir la tester !",BuilderLanguage2:"La première étape est de <b>choisir une langue pour votre enquête</b>.<br />Vous pourrez ensuite rajouter très facilement d'autres langues.",BuilderLanguage3:"Par exemple, si vous créez votre enquête uniquement en français, elle sera jouable en français par tous les joueurs, quelle que soit leur langue.<br />Si vous la créez en anglais et en français, la langue s'adaptera à celle du joueur.",BuilderConfiguration1:"La deuxième étape est de <b>décrire votre enquête</b>, dans la langue que vous avez choisie, pour donner envie aux joueurs d'essayer de la résoudre.",BuilderConfiguration2:"Le <b>titre est très important</b>, essayez d'en choisir un motivant !",BuilderConfiguration3:"Le <b>thème de votre enquête</b> est souvent la chose la plus compliquée à trouver.<br />Commencez par bien vous renseigner sur le lieu, sur les événements qui s'y sont déroulés, et à quelle période ils se sont déroulés. L'histoire peut être complètement imaginaire, ou comporter des faits réels.",BuilderConfiguration4:"Je vous conseille de <b>jouer à quelques enquêtes</b> avant de vous lancer dans la création de la vôtre, cela permet d'avoir plus d'idées pour démarrer !",BuilderConfiguration5:"N'hésitez pas, dans la description, à donner des informations sur vous, sur le lieu, sur des organismes capables de donner plus d'informations sur le lieu visité",BuilderConfiguration6:"Indiquez également précisément le <b>lieu de départ de l'enquête</b>, utilisez si besoin la description pour compléter l'adresse.<br />Un mauvais départ peut compromettre la réussite d'une enquête !",BuilderStep1:"Vous allez maintenant créer <b>chaque étape de votre enquête</b>.",BuilderStep2:"Une étape peut être soit <b><i>une transition</i></b>, dans laquelle vous donnez au joueur des informations ou des objets, soit <b><i>une énigme</i></b>, où le joueur doit résoudre une énigme",BuilderStep3:"Il est souvent pratique d'<b>alterner les deux</b>, une transition permettant de présenter un lieu, d'apporter des informations nécessaires à la résolution des énigmes, d'apporter des informations suite à la résolution d'une énigme, ou de fournir des objets nécessaires à la résolution d'une énigme.",BuilderStep4:"Une fois vos étapes créées, vous pouvez les <b>déplacer</b>, les <b>supprimer</b>, ou <b>en rajouter de nouvelles</b>.<br />Une enquête doit contenir entre 6 et 50 étapes.",BuilderStep5:"Commencez par créer une première étape de type <b>Image et texte</b> pour introduire votre enquête !",BuilderStepOverview1:"<b>L'aperçu</b> vous permet de vérifier que votre énigme s'affiche bien comme vous le souhaitez",BuilderStepOverview2:"Si vous souhaitez modifier votre énigme, pressez le bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_back</i>",BuilderStepOverview3:"Si tout est conforme, pressez le  bouton <i aria-hidden='true' style='font-size: 1.5em' class='q-icon material-icons bg-primary text-white'>arrow_forward</i>",BuilderStepSettings1:"Entrez une description et une image, qui correspondent à l'image de fond et au texte qui s'afficheront au joueur.<br />Le titre n'est affiché que pour vous, pour vous permettre de retrouver facilement vos étapes dans la liste des étapes.",BuilderStepSettings2:"Une fois que cette étape est configurée, pressez sur <b>Enregistrer cette étape</b> pour en avoir un aperçu, tel que le verra un joueur",BuilderPublishing1:"Dès que votre enquête est complète, vous pouvez <b>la tester</b> dans l'onglet <i>Mise en ligne</i> pour vérifier qu'elle vous convient et qu'elle est réalisable par d'autres joueurs",BuilderPublishing2:"N'hésitez pas à ajouter <b>un ou plusieurs éditeurs</b>, qui pourront tester votre enquête sans qu'elle soit visible par les autres joueurs.<br />Ils pourront aussi, si vous le souhaitez, modifier directement votre enquête.",BuilderPublishing3:"Dès que votre enquête vous convient, vous pouvez <b>proposer sa publication</b>. Les `Game masters` Graaly vont alors analyser votre enquête, et vous indiqueront s'il est nécessaire de modifier des choses pour sa publication.<br /><b>Durant cette phase, vous ne pourrez plus modifier votre enquête !</b>. Prenez donc bien le temps avant de la publier.",BuilderPublishing4:"Si votre enquête est conforme et de qualité, elle sera publiée, et donc jouable par tous !"},status:{published:"publié",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dépublié",rejected:"rejeté"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Utilisation de vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (nécessaire pour lister les enquêtes à proximité de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vérifier que vous avez du réseau et contacter le support si le problème persiste",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte présentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Enquêtes résolues",QuestsCreated:"Enquêtes créées",CreateANewQuest:"Créer une nouvelle enquête",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucune enquête créée",NoQuestPlayed:"Aucune enquête résolue",NoQuestPlayedLong:"Aucune enquête résolue. Pour résoudre une enquête, retournez à la carte et cliquez sur une enquête près de chez vous !",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",Friends:"Amis",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Très difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position géographique, mais elle n'a pas pu être récupérée.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : déplacez vous vers une zone dégagée à l'extérieur",GeolocationDisabled:"Géolocalisation désactivée sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l'application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Résoudre l'enquête",ContinueTheQuest:"Continuer l'enquête",Language:"Langue",StartingPoint:"Lieu de départ",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",BackToTheMap:"Retour à la carte",WelcomeInGraalyWorld:"Bienvenue dans le monde de Graaly !",DiscoverPlacesAroundYou:"Découvrez les lieux autour de vous en jouant !",WinPointsAndUnlockQuests:"Gagnez des points et débloquez des enquêtes !",CreateYourQuestsAndWinMoney:"Créez vos enquêtes et gagnez de l'argent !",CenterOnYourPosition:"Centrer sur votre position",BuildAQuestHere:"Créer une enquête",BestQuests:"Les plus populaires",OnlyEasy:"Les plus faciles",SearchForAQuest:"Chercher des enquêtes",DisplayAllQuests:"Afficher toutes les enquêtes",km:"km",NoQuestForThisSearch:"Aucune enquête ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer cette enquête ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer cette enquête",YouAlreadyStartThisQuest:"Vous avez déjà commencé cette enquête, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",CreateYourQuest:"Créez votre enquête !",CreateYourPrivateQuest:"Créez votre enquête privée !",CreateYourPublicQuest:"Créez votre enquête publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre enquête ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre enquête ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre enquête ne doit pas concerner un lieu pour lequel une enquête existe déjà, sauf si le thême est suffisamment différent</li><li>Votre enquête doit faire plus de 6 étapes et moins de 50</li><li>Notre équipe de modérateurs validera si votre enquête respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre enquête, ou elle sera refusée</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu de l'enquête ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre enquête ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 20 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de créer très simplement, et pas à pas, des enquêtes ludiques pour les autres joueurs. Ces enquêtes peuvent être des jeux de piste ou des escape games",HowToWinMoney:"Comment gagner de l'argent",HowToWinMoneyExplaination:"Graaly partage avec vous 50% des revenus des publicités affichées quand un utilisateur joue à votre enquête. Les revenus sont payés à partir du moment où ils atteignent 100 euros.",NewQuest:"Nouvelle enquête",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ de l'enquête",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre enquête est publiée",YourQuestIsUnpublished:"Votre enquête est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre enquête",PublishYourQuest:"Publier votre enquête",UnpublishYourQuest:"Dépublier votre enquête",SelectTheLanguageAndClickOnNextButton:"Selectionner la langue et définissez les paramètres et étapes dans les onglets",SelectedLanguage:"Saisir l'enquête en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne réponse",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadTheObjectToFind:"Téléchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadrée pour être carrée",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez vérifier que vous avez du réseau et ré-essayer plus tard",TechnicalProblem:"Problème technique",SaveThisStep:"Enregistrer cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Essaye à nouveau (-5 points)",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par créer une étape pour votre enquête",AddYourChapters:"Commencez par créer un chapitre, et ajoutez y les premières pages de votre énigme",ActivateTheLanguageVisible:"Activez les langues pour que votre enquête soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invités puissent jouer",LanguagesPublished:"Langues jouables",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter l'enquête",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"L'indice va vous coûter 5 points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous gagnez",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Votre avis sur cette enquête",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de cette enquête",ResolveOtherQuestsToWinPoints:"Résolvez de nouvelles enquêtes pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Mon classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter de l'énergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté cette enquête",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OpenLocationSettings:"Ouvrir les paramètres de localisation",Map:"Carte",AddressToFind:"Adresse du lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",DefineGPSLocation:"Tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Réussissez toutes les enquêtes d'une ville pour obtenir toutes les récompenses",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre enquête n'est plus modifiable. Votre enquête va être validée par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejetée. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre enquête n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Vous êtes proche de l'objet, regardez autour de vous et touchez le",ObjectSize:"Taille de l'objet",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ de l'enquête",ClickOnArrowToMoveToNextStep:"Appuyez sur la flèche en bas à droite pour passer à l'étape suivante",YourQuestMustContainAtLeast6Steps:"Votre enquête est trop courte, vous devez créer au moins 3 étapes",YourQuestMustContainLessThan50Steps:"Votre enquête est trop longue, vous devez créer moins de 100 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile",WarningNoNetwork:"Aucun réseau ...",WarningLowNetwork:"Réseau faible, veuillez patienter ...",CouldNotDisplayObject:"Désolé, une erreur est survenue au chargement de l'objet à trouver, il ne peut donc pas être affiché. Veuillez redémarrez l'application. Si le problème persiste, passez cette étape.",CouldNotEnableAR:"Nous n'avons pas pu détecter l'orientation de votre téléphone. Pas de panique ! Vous pouvez quand même trouver l'élément de l'enquête.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer cette enquête",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer cette enquête ? Elle sera définivement supprimée.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un éditeur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'éditeur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Sélectionner l'objet dans la liste",HintText:"Texte de l'indice","2DPicture":"Image à plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Créer une enquête",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnées GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Télécharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complémentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",AddFriends:"Ajouter des amis",FriendsAdded:"Ami ajouté",InvitationSent:"Invitation envoyée",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numéro de téléphone",InvalidPhoneNumber:"Numéro invalide",AreYouSureYouWantToRemoveThisFriend:"Êtes-vous certain(e) de vouloir le/la supprimer de votre liste d'amis",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de télephone",YourPhoneNumber:"Votre numéro de téléphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous êtes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux caméra",GeolocationFailed:"Impossible de vous géolocaliser",GeolocationFailedDesc:"Nous n'avons pas réussi à vous géolocaliser, soit vous n'avez pas de réseau, soit vous avez bloqué la géolocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon marqueur avec la caméra de votre téléphone. Un marqueur est un signe entouré d'un cadre noir. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon marqueur avec la caméra de votre téléphone. Un marqueur est un signe entouré d'un cadre noir. Pour réussir, touchez l'objet virtuel qui apparaît sur le marqueur. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Nous avons besoin de quelques informations complémentaires",ToDisplayRelevantQuests:"Pour vous afficher les bonnes enquêtes :",ToHelpYouFindYourFriends:"Pour vous aider à trouver vos amis (optionnel) :",ToAvoidSendingYourToUnrelevantQuests:"Pour ne pas vous faire aller vers des enquêtes inadaptées :",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres données, et vous ne pourrez plus vous connecter à l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",AreYouSureYouWantToRemoveYourAccount:"Êtes-vous sûrs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprimé",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoyé à l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note à l'enquête avant d'envoyer votre avis.",QuestNotReviewed:"Cette enquête n'a pas encore reçu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour démarrer l'enquête de découverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(i,'" target="_blank">').concat(i,'</a> ou nous contacter à <a href="mailto:').concat(r,'">').concat(r,"</a>."),GeolocationNotSupported:"Désolé, votre appareil ne permet pas la géolocalisation.",TechnicalErrorReloadPage:"Problème technique, appuyez pour relancer",TechnicalProblemNetworkIssue:"Veuillez vérifier que vous avez du réseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Résoudre à nouveau",BackToQuest:"Retour à l'enquête",min:"min",pts:"pts",SportQuest:"Enquête nature",DiscoveryQuest:"Enquête découverte",CulturalQuest:"Enquête culturelle",ChildQuest:"Enquête pour enfants",TransportQuest:"Enquête en moyen de transport",ShopQuest:"Découverte de commerces",EnterpriseQuest:"Découverte d'entreprise",NightQuest:"Enquête nocturne",ExtremQuest:"Enquête extrême",CulinarQuest:"Enquête culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la réactiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redémarrer l'aide",DurationBeforeTextAppearAbovePicture:"Durée avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s) à gagner",YouAlreadyPlayedThisQuest:"Vous avez déjà réussi cette enquête (aucun point à gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour cette enquête",CloseQuestRanking:"Retour à l'enquête",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour à l'enquête",NoFriendsLong:"Vous n'avez encore ajouté aucun ami. Pour ajouter des amis, retournez à la carte, puis ouvrez votre profil, et sélectionnez l'onglet Amis",IAgreeTheTermsAndConditions:'Je suis d\'accord avec les <a target="_blank" href="'.concat(a.terms.fr,"\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:'Je suis d\'accord avec la <a target="_blank" href="'.concat(a.privacy.fr,'">politique de confidentialité</a>'),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialité pour utiliser Graaly",TermsAndConditionsLink:'<a target="_blank" href="'.concat(a.terms.fr,"\">Conditions d'utilisation</a>"),PrivacyPolicyLink:'<a target="_blank" href="'.concat(a.privacy.fr,'">Politique de confidentialité</a>'),YourPhoneIsNotCompliantWithThisStepType:"Votre appareil n'est pour le moment pas compatible avec ce type d'étape. Nous sommes désolé pour ce désagréement, veuillez passer à l'étape suivante",DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune étape ?",FollowStep:"Suit l'étape",StepSuccess:"Bonne réponse à",StepFail:"Mauvaise réponse à",NoCondition:"Aucune condition (démarre au début du chapitre)",Conditions:"Déclencheurs",AddACondition:"Ajouter un déclencheur",ConditionType:"Type de déclencheur",ConditionValue:"Valeur du déclencheur",YourStepCanOnlyFollowOneStep:"Votre étape ne peut suivre qu'une seule autre étape",ThisStepIsTriggeredWhen:"Cette étape est affichée quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des étapes. Veuillez supprimer les étapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette étape n'est pas visible par les joueurs. Vous pouvez passer à l'étape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez créer une étape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les étapes suivantes n'ont pas de déclencheur. Seul la première étape d'un chapitre peut ne pas avoir de déclencheur",FollowingStepsHaveInvalidCondition:"Des étapes ont des conditions invalides (dépendent probablement d'étapes manquantes)",FollowingStepsHaveNoValidParent:"Les étapes suivantes ont un déclencheur incorrect",IssuesInYouQuest:"Problèmes de votre enquête",IssuesInYourStep:"Problèmes de votre étape",DisplayRightAnswer:"Afficher la bonne réponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une étape dans ce chapitre",ScanTheMarkersLikeThat:"La marque à trouver et à scanner avec votre téléphone a une forme similaire à",ScanTheMarkersLikeThat2:"Pour scanner une marque, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre à jour votre application Graaly pour continuer à l'utiliser",SorryAnErrorOccurs:"Désolé, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez créer un nouveau brouillon pour cette enquête. Votre enquête publiée restera accessible aux joueurs, jusqu'à ce que vous publiiez cette nouvelle version de votre enquête.",ClickHereToCreateANewQuestVersion:"Pour modifier votre enquête, cliquez ici",YourUnderValidationQuests:"Vos enquêtes en cours de validation",YourRejectedQuests:"Vos enquêtes rejetées",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos enquêtes publiées",Loading:"Chargement ...",QuestDraftVersion:"Enquête non publiée",PrivateQuest:"Enquête privée",PublicQuest:"Enquête publique",Invitees:"Invités",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configurée pour votre enquête, voulez-vous l'ajouter ?",Results:"Résultats",ClosePrivateQuest:"Clore l'enquête",ClosePrivateQuestDesc:"En cliquant ici, votre enquête ne sera plus jouable. Vous aurez alors accès aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sûr(e) de clore cette enquête ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a joué à cette enquête",NoPlayersYetForThisQuest:"Encore aucun joueur pour cette enquête",PrivateQuestDesc1:"Votre enquête est destiné à votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous créez une enquête pour faire découvrir un lieu, une activité, une entreprise.",PublicQuestDesc2:"Une fois validée par les games masters, cette enquête sera visible sur la carte Graaly et jouable par tous",CreatePrivateQuest:"Créer une enquête privée",BuyPrivateQuest:"Acheter une enquête privée",AcceptAndBuyAPrivateQuest:"Accepter et acheter une enquête privée",CreatePublicQuest:"Créer une enquête publique",YouAreQuestOwnerDesc:"Vous êtes le créateur de cette enquête, elle ne vous rapportera aucun point",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour cette enquête",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre enquête est close, et ne peut plus être publiée",YourQuestContainsErrorsInSteps:"Votre enquête présente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type d'enquête",helpQuestType:"Une enquête de type jeu de piste comporte une liste d'énigme qui se suivent de façon linéaire. Une enquête de type Escape game propose des énigmes qui peuvent être résolue dans un ordre non défini, la résolution de plusieurs énigmes débloquent d'autres énigmes. Si vous êtes nouveau sur Graaly, nous vous conseillons de commencer par une enquête de type jeu de piste. Vous pouvez transformer une enquête jeu de piste en enquête escape game, mais pas le contraire.",basicEditor:"Jeu de piste (éditeur simple)",advancedEditor:"Escape game (éditeur avancé)",UsedOver:"{current} utilisés sur {limit}",QuestMedia:"Fichiers de l'enquête",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre enquête",Feedback:"Vos commentaires",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire à l'auteur de l'enquête, ou noter l'enquête, attendez la page de fin de l'enquête. Si vous souhaitez contacter l'équipe Graaly, pour par exemple signaler un contenu inapproprié dans cette enquête, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a été envoyé",BackToBuilder:"Retour à la création de l'enquête",OrDownloadAFile:"Ou téléchargez votre image",UploadACharacter:"Télécharger un personnage",LoadingQuestDataForOfflineMode:"Préparation de votre enquête ...",ErrorOfflineSaving:"Problème technique, vous ne pourrez pas jouer cette enquête sans réseau",QuestNeedNetwork:"Il vous faut du réseau mobile pour lancer cette enquête. Recherchez du réseau, et cliquez sur le bouton ci-dessous pour relancer le chargement de l'enquête",ReloadQuest:"Recharger l'enquête",ConnectToComputeScore:"Je suis connecté, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre réussite et votre score, vous devez vous reconnecter au réseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans réseau",Downloading:"Téléchargement de ",YouAreOfflineYourQuestsList:"Nous n'avons pas réussi à récupérer la liste des enquêtes (problème réseau). Voici la liste des enquêtes que vous avez téléchargées, et auxquelles vous pouvez jouer sans réseau :",YouAreOfflineNoQuestsAvailable:"Désolé, il n'y a pas d'enquête disponible pour être jouée hors ligne. La prochaine fois que vous serez connecté à Internet, téléchargez des enquêtes depuis la carte en touchant une enquête, puis le lien \"jouer sans réseau\". Vous pourrez alors jouer ces enquêtes sans connection internet.",ButtonsColor:"Couleur des boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible dès demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous êtes déjà ami avec cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas être ami avec vous même",TooMuchFriends:"Vous ne pouvez pas avoir plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagné !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avancé. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Téléchargement terminé. Vous pouvez désormais jouer cette enquête sans réseau.",GoToQuestValidation:"Aller à la validation",SessionExpired:"Votre session a expiré, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez réduire sa taille",PremiumQuest:"Enquête Pro",MovePremium:"Passer cette enquête en mode pro",PremiumDefinition1:"Donnez plus de valeur à votre enquête !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Une enquête plus personnalisée à vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser l'enquête avec votre logo et vos couleurs, ... </li><li><u>Une enquête rentable</u> : Vous pouvez gagner de l'argent en rendant votre enquête payante</li><li>Vous pouvez accéder aux statistiques de votre enquête</li><li>Vous bénéficiez du support de notre équipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos enquêtes en mode pro, contactez nous à sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalité, vous devez passer cette enquête en mode premium (voir dans les paramètres de votre enquête)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de joueurs",NumberOfPlayersYesterday:"Nombre de joueurs hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont créé des enquêtes pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore créer {nb} enquête(s) pro(s)",YouCanNotCreateNewQuests:"Vous ne pouvez plus créer d'enquêtes pro. Souscrivez à nos offres professionnelles sur <a href=\"".concat(i,'" target="_blank">').concat(i,'</a> ou contactez-nous à <a href="mailto:').concat(r,'">').concat(r,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer cette enquête sur un appareil mobile",QuestPlayableOnMobile:"Cette enquête se joue sur mobile",PuzzleHelpText:"Déplacez les pièces pour les réordonner",ClickToEnlargePictures:"Appuyez sur les images pour les élargir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre téléphone pendant 3 secondes pour une meilleure précision GPS",TakeMobileVertically:"Tenez votre téléphone verticalement et recherchez",null:"Indéfini",TooMuchOfflineLoadingErrors:"Le chargement de l'enquête n'a pas fonctionné. Vous pouvez jouer l'enquête si le réseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annulé le chargement de l'enquête, l'enquête ne fonctionnera pas si vous perdez le réseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggérer une enquête",SuggestANewQuest:"Suggérer une nouvelle enquête",YouLikedThisQuest:"Vous avez aimé cette enquête ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour découvrir un lieu en jouant, ou pour motiver vos enfants ou élèves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Musée du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou téléphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En complétant ce formulaire, vous nous aidez à identifier les enquêtes les plus demandées pour contacter les responsables des lieux concernés. Vous serez ensuite informé si une enquête est créée sur ce lieu.",InsertAStepAfter:"Insérer une étape après",QuestUpdated:"L'enquête a été modifiée",PleaseRestartQuest:"Merci de rejouer l'enquête depuis le début.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette étape n'est jouable qu'à partir de cette date",ThisStepIsAvailableIn:"Cette étape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pièce à bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scannez un QR Code pour jouer une enquête sans compte",MarkersToPrint:"Imprimez les QR Codes du jeu, à placer aux endroits que vous avez prévu",MarkersToStartQuest:"Vous pouvez permettre aux joueurs d'accéder directement à l'enquête, avec ou sans compte utilisateur. Pour cela, créez un QR code (par exemple sur le site https://www.qr-code-generator.com/) ayant la valeur <strong>{code}</strong>",ThisActionCanNotBeCanceled:"Cette action ne peut être annulée",AddAReward:"Télécharger une récompense",Reward:"Récompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit être en rouge, sinon pensez à utiliser une image avec un fond transparent. Si une partie de votre image est coupée, téléchargez une image au format carré.",YouWonAReward:"Bravo, vous avez gagné un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres récompenses en jouant aux autres enquêtes dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut être trop gros ou n'a pas le bon format. Veuillez réessayer avec une image plus petite",helpQuestLogo:"Votre logo apparaîtra dans un bulle en bas de l'écran de jeu. Suivant les écrans, la bulle peut être assez petite, choisissez une image avec peu de détails.",helpQuestReward:"Les joueurs pourront gagner un badge à la fin de l'enquête. Cela les motive à jouer à votre enquête. Pour proposer un badge en récompense, téléchargez une image représentant le badge, avec un fond transparent (format .gif ou .png)",DisplayGeolocationHelp:"Afficher l'animation de calibrage GPS",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouvé",QuestMapIsLoading:"La carte des enquêtes se charge"}}}},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac à dos","en":"Backpack"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candélabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantôme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","scale":100,"translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Clé","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe à pétrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine téléphonique","en":"Phone booth"},"author":"Mountrise","url":"https://sketchfab.com/models/94fca8c5ac9f4974bd4a02e8f571f493","scale":0.2},"phone-rotary":{"name":{"fr":"Téléphone à cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},4678:function(e,t,i){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return i(t)}function s(e){if(!i.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id="4678"},"4c18":function(e){e.exports=JSON.parse('[{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbaïdjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahreïn","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belgique","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzégovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brésil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Bélarus","value":"BLR"},{"label":"Bénin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (République démocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Côte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythrée","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"France","value":"FRA"},{"label":"Fédération Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grèce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinée Française","value":"GUF"},{"label":"Guinée Équatoriale","value":"GNQ"},{"label":"Guinée","value":"GIN"},{"label":"Guinée-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Géorgie du Sud et les îles Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et îles McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Caïmans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Féroé","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caïques","value":"TCA"},{"label":"Iles Vierges (États-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures éloignées des États-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaïque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'île de noël","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les Îles Cook","value":"COK"},{"label":"Les îles Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronésie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Nioué","value":"NIU"},{"label":"Norvège","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zélande","value":"NZL"},{"label":"Népal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbékistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (état de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guinée","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Française","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Pérou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"République Dominicaine","value":"DOM"},{"label":"République Tchèque","value":"CZE"},{"label":"République arabe syrienne","value":"SYR"},{"label":"République centrafricaine","value":"CAF"},{"label":"République de Corée","value":"KOR"},{"label":"République populaire démocratique de Corée","value":"PRK"},{"label":"Réunion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthélemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Niévès","value":"KNA"},{"label":"Saint-Siège","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hélène, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa américaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tomé et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovénie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suisse","value":"CHE"},{"label":"Suriname","value":"SUR"},{"label":"Suède","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sénégal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes françaises","value":"ATF"},{"label":"Territoire britannique de l\'océan Indien","value":"IOT"},{"label":"Thaïlande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinité-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkménistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},"525b":function(e,t,i){},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pièces","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Clé","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac à dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Bouée de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fusée","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Téléphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Télévision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle clé","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},"637c":function(e,t,i){},"74f2":function(e,t,i){"use strict";var r=i("7da1"),a=i.n(r);a.a},"771f":function(e,t,i){"use strict";var r=i("637c"),a=i.n(r);a.a},"77df":function(e,t,i){},"78d7":function(e,t,i){"use strict";var r=i("05d1"),a=i.n(r);a.a},"7da1":function(e,t,i){},"7e6d":function(e,t,i){},"8c64":function(module,exports,__webpack_require__){(function(process,__dirname,Buffer){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,Module;(function(){"use strict";var e=function(e,i,r){var a=e,s=i;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;r=i,a=n.videoWidth||n.width,s=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.videoWidth=a,this.videoHeight=s,"string"===typeof r){var o=this;this.cameraParam=new t(r,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=r,this._initialize()};e.prototype.dispose=function(){for(var e in i.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,r,a=this.getMarkerNum();for(t in this.patternMarkers)r=this.patternMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(t in this.barcodeMarkers)r=this.barcodeMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(var s=0;s<a;s++){var n=this.getMarker(s),o=i.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=i.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(s,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=i.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(s,n.dirMatrix)),o!==i.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(s,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(s,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:s,type:o,marker:n,matrix:this.transform_mat}})}var u=this.getMultiMarkerCount();for(s=0;s<u;s++){var c=this.getMultiMarkerPatternCount(s);l=!1;i.getTransMatMultiSquareRobust(this.id,s),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<c;d++){var f=this.getMultiEachMarker(s,d);if(f.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:s,matrix:this.transform_mat}});break}}if(l)for(d=0;d<c;d++){f=this.getMultiEachMarker(s,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:s,markerIndex:d,marker:f,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var i=this.patternMarkers[e];return i||(this.patternMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.trackBarcodeMarkerId=function(e,t){var i=this.barcodeMarkers[e];return i||(this.barcodeMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.getMultiMarkerCount=function(){return i.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return i.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var i=this.listeners[e].indexOf(t);i>-1&&this.listeners[e].splice(i,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var i=0;i<t.length;i++)t[i].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,r){return i.addMarker(this.id,e,t,r)},e.prototype.loadMultiMarker=function(e,t,r){return i.addMultiMarker(this.id,e,t,r)},e.prototype.getTransMatSquare=function(e,t,r){return i.getTransMatSquare(this.id,e,t),r.set(this.marker_transform_mat),r},e.prototype.getTransMatSquareCont=function(e,t,r,a){return this.marker_transform_mat.set(r),i.getTransMatSquareCont(this.id,e,t),a.set(this.marker_transform_mat),a},e.prototype.getTransMatMultiSquare=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,i){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=i&&0!==i&&(t[12]*=i,t[13]*=i,t[14]*=i),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?i.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return i.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===i.getMarker(this.id,e))return i.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var r=0;r<t.length;r++)this.marker_transform_mat[2*r+0]=t[r][0],this.marker_transform_mat[2*r+1]=t[r][1];return i.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===i.getMultiEachMarker(this.id,e,t))return i.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return i.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return i.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return i.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return i.setLogLevel(e)},e.prototype.getLogLevel=function(){return i.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return i.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return i.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return i.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return i.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return i.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return i.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return i.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return i.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return i.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return i.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return i.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return i.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return i.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return i.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return i.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return i.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return i.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return i.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return i.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var i=this.getMarkerNum(),r=0;r<i;r++)this._debugMarker(this.getMarker(r))},e.prototype._initialize=function(){this.id=i.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=i.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){e||(e=this.image),this.ctx.save(),"portrait"===this.orientation?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(e,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),i=t.data;return!!this.dataHeap&&(this.dataHeap.set(i),!0)},e.prototype._debugMarker=function(e){var t,i;t=e.vertex;var r=this.ctx;r.strokeStyle="red",r.beginPath(),r.moveTo(t[0][0],t[0][1]),r.lineTo(t[1][0],t[1][1]),r.stroke(),r.beginPath(),r.moveTo(t[2][0],t[2][1]),r.lineTo(t[3][0],t[3][1]),r.stroke(),r.strokeStyle="green",r.beginPath(),r.lineTo(t[1][0],t[1][1]),r.lineTo(t[2][0],t[2][1]),r.stroke(),r.beginPath(),r.moveTo(t[3][0],t[3][1]),r.lineTo(t[0][0],t[0][1]),r.stroke(),i=e.pos,r.beginPath(),r.arc(i[0],i[1],8,0,2*Math.PI),r.fillStyle="red",r.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",i=e.onSuccess,r=e.onError||function(e){console.error("ARController.getUserMedia",e)},a=document.createElement("video"),s=function(){0!==this.videoWidth&&i(a)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){n&&(a.play(),a.paused||o.forEach((function(e){window.removeEventListener(e,l,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var u=function(e){a.addEventListener("loadedmetadata",s,!1),a.src=window.URL.createObjectURL(e),n=!0,l()},c={},d={};e.width&&(d.width=e.width,"object"===typeof e.width?(e.width.max&&(c.maxWidth=e.width.max),e.width.min&&(c.minWidth=e.width.max)):c.maxWidth=e.width),e.height&&(d.height=e.height,"object"===typeof e.height?(e.height.max&&(c.maxHeight=e.height.max),e.height.min&&(c.minHeight=e.height.max)):c.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f={audio:!1,video:{mandatory:c}};return navigator.getUserMedia?navigator.getUserMedia(f,u,r):r("navigator.getUserMedia is not supported on your browser"),a},e.getUserMediaARController=function(i){var r={};for(var a in i)r[a]=i[a];var s=i.onSuccess,n=i.cameraParam;r.onSuccess=function(){new t(n,(function(){var t=this,r=i.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),a=r/Math.max(o.videoWidth,o.videoHeight),n=a*o.videoWidth,l=a*o.videoHeight;if(o.videoWidth<o.videoHeight){var u=n;n=l,l=u}var c=new e(n,l,t);c.image=o,o.videoWidth<o.videoHeight?(c.orientation="portrait",c.videoWidth=o.videoHeight,c.videoHeight=o.videoWidth):(c.orientation="landscape",c.videoWidth=o.videoWidth,c.videoHeight=o.videoHeight),s(c,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(r);return o};var t=function(e,t,i){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=i,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;i.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&i.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var i={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:f,addMarker:n,addMultiMarker:c},r=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function a(){for(var e in r.forEach((function(e){i[e]=Module[e]})),Module)e.match(/^AR/)&&(i[e]=Module[e])}var s=0;function n(e,t,i){var r="/marker_"+s++;m(t,r,(function(){var t=Module._addMarker(e,r);i&&i(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),i=t.split("\n"),r=[],a=0;return i.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(a){case 0:return+e,void(a=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void a++;case 5:return void(a=1)}})),r}var u=0;function c(e,t,i){var r="/multi_marker_"+u++;m(t,r,(function(a){var s=l(a);function n(){var t=Module._addMultiMarker(e,r),a=Module.getMultiMarkerNum(e,t);i&&i(t,a)}if(!s.length)return n();var o=t.split("/").slice(0,-1).join("/");s=s.map((function(e){return[o+"/"+e,e]})),b(s,n)}))}var d=0;function f(e,t){var i="/camera_param_"+d++,r=function(){var e=Module._loadCamera(i);t&&t(e)};"object"===typeof e?p(i,e,r):e.indexOf("\n")>-1?h(i,e,r):m(e,i,r)}function h(e,t,i){for(var r=new Uint8Array(t.length),a=0;a<r.length;a++)r[a]=255&t.charCodeAt(a);p(e,r,i)}function p(e,t,i){FS.writeFile(e,t,{encoding:"binary"}),i(t)}function m(e,t,i){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(e){var a=r.response,s=new Uint8Array(a);p(t,s,i)},r.send()}function b(e,t){var i=e.pop();i?m(i[0],i[1],(function(){b(e,t)})):t()}window.artoolkit=i,window.ARController=e,window.ARCameraParam=t,window.Module?a():window.Module={onRuntimeInitialized:function(){a()}}})(),Module||(Module=("undefined"!==typeof Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB="object"===typeof window,ENVIRONMENT_IS_WORKER="function"===typeof importScripts,ENVIRONMENT_IS_NODE="object"===typeof process&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module["print"]||(Module["print"]=function(e){process["stdout"].write(e+"\n")}),Module["printErr"]||(Module["printErr"]=function(e){process["stderr"].write(e+"\n")});var nodeFS=__webpack_require__("ab21"),nodePath=__webpack_require__("7a44");Module["read"]=function(e,t){e=nodePath["normalize"](e);var i=nodeFS["readFileSync"](e);return i||e==nodePath["resolve"](e)||(e=path.join(__dirname,"..","src",e),i=nodeFS["readFileSync"](e)),i&&!t&&(i=i.toString()),i},Module["readBinary"]=function(e){var t=Module["read"](e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},Module["load"]=function(e){globalEval(read(e))},Module["thisProgram"]||(process["argv"].length>1?Module["thisProgram"]=process["argv"][1].replace(/\\/g,"/"):Module["thisProgram"]="unknown-program"),Module["arguments"]=process["argv"].slice(2),module["exports"]=Module,process["on"]("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module["print"]||(Module["print"]=print),"undefined"!=typeof printErr&&(Module["printErr"]=printErr),"undefined"!=typeof read?Module["read"]=read:Module["read"]=function(){throw"no read() available (jsc?)"},Module["readBinary"]=function(e){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"===typeof t),t},"undefined"!=typeof scriptArgs?Module["arguments"]=scriptArgs:"undefined"!=typeof arguments&&(Module["arguments"]=arguments);else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw"Unknown runtime environment. Where are we?";if(Module["read"]=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(Module["arguments"]=arguments),"undefined"!==typeof console)Module["print"]||(Module["print"]=function(e){console.log(e)}),Module["printErr"]||(Module["printErr"]=function(e){console.log(e)});else{var TRY_USE_DUMP=!1;Module["print"]||(Module["print"]=TRY_USE_DUMP&&"undefined"!==typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module["load"]=importScripts),"undefined"===typeof Module["setWindowTitle"]&&(Module["setWindowTitle"]=function(e){document.title=e})}function globalEval(e){eval.call(null,e)}for(var key in!Module["load"]&&Module["read"]&&(Module["load"]=function(e){globalEval(Module["read"](e))}),Module["print"]||(Module["print"]=function(){}),Module["printErr"]||(Module["printErr"]=Module["print"]),Module["arguments"]||(Module["arguments"]=[]),Module["thisProgram"]||(Module["thisProgram"]="./this.program"),Module.print=Module["print"],Module.printErr=Module["printErr"],Module["preRun"]=[],Module["postRun"]=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(e){tempRet0=e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"===e[0]){var t=parseInt(e.substr(1));return assert(t%8===0),t/8}return 0}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return"double"===t||"i64"===t?7&e&&(assert(4===(7&e)),e+=4):assert(0===(3&e)),e},getAlignSize:function(e,t,i){return i||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,i){return i&&i.length?(i.splice||(i=Array.prototype.slice.call(i)),i.splice(0,0,t),Module["dynCall_"+e].apply(null,i)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var i=Runtime.funcWrappers[t];return i[e]||(i[e]=function(){return Runtime.dynCall(t,e,arguments)}),i[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+e|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var i=enlargeMemory();if(!i)return DYNAMICTOP=t,0}return t},alignMemory:function(e,t){var i=e=Math.ceil(e/(t||16))*(t||16);return i},makeBigInt:function(e,t,i){var r=i?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t);return r},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module["Runtime"]=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9;function assert(e,t){e||abort("Assertion failed: "+t)}var globalScope=this,cwrap,ccall;function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,i,r){switch(i=i||"i8","*"===i.charAt(i.length-1)&&(i="i32"),i){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+i)}}function getValue(e,t,i){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;return null!==e&&void 0!==e&&0!==e&&(t=Runtime.stackAlloc(1+(e.length<<2)),writeStringToMemory(e,t)),t}},toC={string:JSfuncs["stringToC"],array:JSfuncs["arrayToC"]};ccall=function(e,t,i,r,a){var s=getCFunc(e),n=[],o=0;if(r)for(var l=0;l<r.length;l++){var u=toC[i[l]];u?(0===o&&(o=Runtime.stackSave()),n[l]=u(r[l])):n[l]=r[l]}var c=s.apply(null,n);if("string"===t&&(c=Pointer_stringify(c)),0!==o){if(a&&a.async)return void EmterpreterAsync.asyncFinalizers.push((function(){Runtime.stackRestore(o)}));Runtime.stackRestore(o)}return c};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every((function(e){return"number"===e})),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map((function(e,t){return"$"+t})),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource["stackSave"].body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc((function(){return cfunc})).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc((function(){return Pointer_stringify})).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource["stackRestore"].body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module["ccall"]=ccall,Module["cwrap"]=cwrap,Module["setValue"]=setValue,Module["getValue"]=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,i,r){var a,s;"number"===typeof e?(a=!0,s=e):(a=!1,s=e.length);var n,o="string"===typeof t?t:null;if(n=i==ALLOC_NONE?r:[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===i?ALLOC_STATIC:i](Math.max(s,o?1:t.length)),a){var l;r=n;for(assert(0==(3&n)),l=n+(-4&s);r<l;r+=4)HEAP32[r>>2]=0;l=n+s;while(r<l)HEAP8[r++>>0]=0;return n}if("i8"===o)return e.subarray||e.slice?HEAPU8.set(e,n):HEAPU8.set(new Uint8Array(e),n),n;var u,c,d,f=0;while(f<s){var h=e[f];"function"===typeof h&&(h=Runtime.getFunctionIndex(h)),u=o||t[f],0!==u?("i64"==u&&(u="i32"),setValue(n+f,h,u),d!==u&&(c=Runtime.getNativeTypeSize(u),d=u),f+=c):f++}return n}function getMemory(e){return staticSealed?"undefined"!==typeof _sbrk&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(e):_malloc(e):Runtime.staticAlloc(e)}function Pointer_stringify(e,t){if(0===t||!e)return"";var i,r=0,a=0;while(1){if(i=HEAPU8[e+a>>0],r|=i,0==i&&!t)break;if(a++,t&&a==t)break}t||(t=a);var s="";if(r<128){var n,o=1024;while(t>0)n=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,o))),s=s?s+n:n,e+=o,t-=o;return s}return Module["UTF8ToString"](e)}function AsciiToString(e){var t="";while(1){var i=HEAP8[e++>>0];if(!i)return t;t+=String.fromCharCode(i)}}function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}function UTF8ArrayToString(e,t){var i,r,a,s,n,o,l="";while(1){if(i=e[t++],!i)return l;if(128&i)if(r=63&e[t++],192!=(224&i))if(a=63&e[t++],224==(240&i)?i=(15&i)<<12|r<<6|a:(s=63&e[t++],240==(248&i)?i=(7&i)<<18|r<<12|a<<6|s:(n=63&e[t++],248==(252&i)?i=(3&i)<<24|r<<18|a<<12|s<<6|n:(o=63&e[t++],i=(1&i)<<30|r<<24|a<<18|s<<12|n<<6|o))),i<65536)l+=String.fromCharCode(i);else{var u=i-65536;l+=String.fromCharCode(55296|u>>10,56320|1023&u)}else l+=String.fromCharCode((31&i)<<6|r);else l+=String.fromCharCode(i)}}function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}function stringToUTF8Array(e,t,i,r){if(!(r>0))return 0;for(var a=i,s=i+r-1,n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++n)),o<=127){if(i>=s)break;t[i++]=o}else if(o<=2047){if(i+1>=s)break;t[i++]=192|o>>6,t[i++]=128|63&o}else if(o<=65535){if(i+2>=s)break;t[i++]=224|o>>12,t[i++]=128|o>>6&63,t[i++]=128|63&o}else if(o<=2097151){if(i+3>=s)break;t[i++]=240|o>>18,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}else if(o<=67108863){if(i+4>=s)break;t[i++]=248|o>>24,t[i++]=128|o>>18&63,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}else{if(i+5>=s)break;t[i++]=252|o>>30,t[i++]=128|o>>24&63,t[i++]=128|o>>18&63,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}}return t[i]=0,i-a}function stringToUTF8(e,t,i){return stringToUTF8Array(e,HEAPU8,t,i)}function lengthBytesUTF8(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),r<=127?++t:t+=r<=2047?2:r<=65535?3:r<=2097151?4:r<=67108863?5:6}return t}function UTF16ToString(e){var t=0,i="";while(1){var r=HEAP16[e+2*t>>1];if(0==r)return i;++t,i+=String.fromCharCode(r)}}function stringToUTF16(e,t,i){if(void 0===i&&(i=2147483647),i<2)return 0;i-=2;for(var r=t,a=i<2*e.length?i/2:e.length,s=0;s<a;++s){var n=e.charCodeAt(s);HEAP16[t>>1]=n,t+=2}return HEAP16[t>>1]=0,t-r}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e){var t=0,i="";while(1){var r=HEAP32[e+4*t>>2];if(0==r)return i;if(++t,r>=65536){var a=r-65536;i+=String.fromCharCode(55296|a>>10,56320|1023&a)}else i+=String.fromCharCode(r)}}function stringToUTF32(e,t,i){if(void 0===i&&(i=2147483647),i<4)return 0;for(var r=t,a=r+i-4,s=0;s<e.length;++s){var n=e.charCodeAt(s);if(n>=55296&&n<=57343){var o=e.charCodeAt(++s);n=65536+((1023&n)<<10)|1023&o}if(HEAP32[t>>2]=n,t+=4,t+4>a)break}return HEAP32[t>>2]=0,t-r}function lengthBytesUTF32(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&++i,t+=4}return t}function demangle(e){var t=!!Module["___cxa_demangle"];if(t)try{var i=_malloc(e.length);writeStringToMemory(e.substr(1),i);var r=_malloc(4),a=Module["___cxa_demangle"](i,0,0,r);if(0===getValue(r,"i32")&&a)return Pointer_stringify(a)}catch(f){}finally{i&&_free(i),r&&_free(r),a&&_free(a)}var s=3,n={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},o=[],l=!0;function u(){s++,"K"===e[s]&&s++;var t=[];while("E"!==e[s])if("S"!==e[s])if("C"!==e[s]){var i=parseInt(e.substr(s)),r=i.toString().length;if(!i||!r){s--;break}var a=e.substr(s+r,i);t.push(a),o.push(a),s+=r+i}else t.push(t[t.length-1]),s+=2;else{s++;var n=e.indexOf("_",s),l=e.substring(s,n)||0;t.push(o[l]||"?"),s=n+1}return s++,t}function c(t,i,r){i=i||1/0;var a,o="",d=[];function f(){return"("+d.join(", ")+")"}if("N"===e[s]){if(a=u().join("::"),i--,0===i)return t?[a]:a}else{("K"===e[s]||l&&"L"===e[s])&&s++;var h=parseInt(e.substr(s));if(h){var p=h.toString().length;a=e.substr(s+p,h),s+=p+h}}if(l=!1,"I"===e[s]){s++;var m=c(!0),b=c(!0,1,!0);o+=b[0]+" "+a+"<"+m.join(", ")+">"}else o=a;e:while(s<e.length&&i-- >0){var g=e[s++];if(g in n)d.push(n[g]);else switch(g){case"P":d.push(c(!0,1,!0)[0]+"*");break;case"R":d.push(c(!0,1,!0)[0]+"&");break;case"L":s++;var v=e.indexOf("E",s);h=v-s;d.push(e.substr(s,h)),s+=h+2;break;case"A":h=parseInt(e.substr(s));if(s+=h.toString().length,"_"!==e[s])throw"?";s++,d.push(c(!0,1,!0)[0]+" ["+h+"]");break;case"E":break e;default:o+="?"+g;break e}}return r||1!==d.length||"void"!==d[0]||(d=[]),t?(o&&d.push(o+"?"),d):o+f()}var d=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"===typeof e&&(e=Pointer_stringify(e)),"_"!==e[0])return e;if("_"!==e[1])return e;if("Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}d=c()}catch(f){d+="?"}return d.indexOf("?")>=0&&!t&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),d}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"}))}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module["ALLOC_NORMAL"]=ALLOC_NORMAL,Module["ALLOC_STACK"]=ALLOC_STACK,Module["ALLOC_STATIC"]=ALLOC_STATIC,Module["ALLOC_DYNAMIC"]=ALLOC_DYNAMIC,Module["ALLOC_NONE"]=ALLOC_NONE,Module["allocate"]=allocate,Module["getMemory"]=getMemory,Module["Pointer_stringify"]=Pointer_stringify,Module["AsciiToString"]=AsciiToString,Module["stringToAscii"]=stringToAscii,Module["UTF8ArrayToString"]=UTF8ArrayToString,Module["UTF8ToString"]=UTF8ToString,Module["stringToUTF8Array"]=stringToUTF8Array,Module["stringToUTF8"]=stringToUTF8,Module["lengthBytesUTF8"]=lengthBytesUTF8,Module["UTF16ToString"]=UTF16ToString,Module["stringToUTF16"]=stringToUTF16,Module["lengthBytesUTF16"]=lengthBytesUTF16,Module["UTF32ToString"]=UTF32ToString,Module["stringToUTF32"]=stringToUTF32,Module["lengthBytesUTF32"]=lengthBytesUTF32,Module["stackTrace"]=stackTrace;var PAGE_SIZE=4096,HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function alignMemoryPage(e){return e%4096>0&&(e+=4096-e%4096),e}var STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module["TOTAL_STACK"]||5242880,TOTAL_MEMORY=Module["TOTAL_MEMORY"]||268435456,totalMemory=65536,buffer;while(totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK)totalMemory<16777216?totalMemory*=2:totalMemory+=16777216;function callRuntimeCallbacks(e){while(e.length>0){var t=e.shift();if("function"!=typeof t){var i=t.func;"number"===typeof i?void 0===t.arg?Runtime.dynCall("v",i):Runtime.dynCall("vi",i,[t.arg]):i(void 0===t.arg?null:t.arg)}else t()}}totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&!!new Int32Array(1)["subarray"]&&!!new Int32Array(1)["set"],"JS engine does not provide full typed array support"),buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(255===HEAPU8[0]&&0===HEAPU8[3],"Typed arrays 2 must be run on a little-endian system"),Module["HEAP"]=HEAP,Module["buffer"]=buffer,Module["HEAP8"]=HEAP8,Module["HEAP16"]=HEAP16,Module["HEAP32"]=HEAP32,Module["HEAPU8"]=HEAPU8,Module["HEAPU16"]=HEAPU16,Module["HEAPU32"]=HEAPU32,Module["HEAPF32"]=HEAPF32,Module["HEAPF64"]=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module["preRun"]){"function"==typeof Module["preRun"]&&(Module["preRun"]=[Module["preRun"]]);while(Module["preRun"].length)addOnPreRun(Module["preRun"].shift())}callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module["postRun"]){"function"==typeof Module["postRun"]&&(Module["postRun"]=[Module["postRun"]]);while(Module["postRun"].length)addOnPostRun(Module["postRun"].shift())}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,i){var r=i>0?i:lengthBytesUTF8(e)+1,a=new Array(r),s=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=s),a}function intArrayToString(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}function writeStringToMemory(e,t,i){var r=intArrayFromString(e,i),a=0;while(a<r.length){var s=r[a];HEAP8[t+a>>0]=s,a+=1}}function writeArrayToMemory(e,t){for(var i=0;i<e.length;i++)HEAP8[t++>>0]=e[i]}function writeAsciiToMemory(e,t,i){for(var r=0;r<e.length;++r)HEAP8[t++>>0]=e.charCodeAt(r);i||(HEAP8[t>>0]=0)}function unSign(e,t,i){return e>=0?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function reSign(e,t,i){if(e<=0)return e;var r=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=r&&(t<=32||e>r)&&(e=-2*r+e),e}Module["addOnPreRun"]=addOnPreRun,Module["addOnInit"]=addOnInit,Module["addOnPreMain"]=addOnPreMain,Module["addOnExit"]=addOnExit,Module["addOnPostRun"]=addOnPostRun,Module["intArrayFromString"]=intArrayFromString,Module["intArrayToString"]=intArrayToString,Module["writeStringToMemory"]=writeStringToMemory,Module["writeArrayToMemory"]=writeArrayToMemory,Module["writeAsciiToMemory"]=writeAsciiToMemory,Math["imul"]&&-5===Math["imul"](4294967295,5)||(Math["imul"]=function(e,t){var i=e>>>16,r=65535&e,a=t>>>16,s=65535&t;return r*s+(i*s+r*a<<16)|0}),Math.imul=Math["imul"],Math["clz32"]||(Math["clz32"]=function(e){e>>>=0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math["clz32"];var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,Math_clz32=Math.clz32,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies)}function removeRunDependency(e){if(runDependencies--,Module["monitorRunDependencies"]&&Module["monitorRunDependencies"](runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module["addRunDependency"]=addRunDependency,Module["removeRunDependency"]=removeRunDependency,Module["preloadedImages"]={},Module["preloadedAudios"]={};var memoryInitializer=null,ASM_CONSTS=[function(e,t,i,r){artoolkit["multiEachMarkerInfo"]||(artoolkit["multiEachMarkerInfo"]={});var a=artoolkit["multiEachMarkerInfo"];a["visible"]=e,a["pattId"]=t,a["pattType"]=i,a["width"]=r},function(e,t,i,r,a,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S,x,q,E,C,T,A,M,P,R){var I=arguments,O=12;artoolkit["markerInfo"]||(artoolkit["markerInfo"]={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var F=artoolkit["markerInfo"];F["area"]=e,F["id"]=t,F["idPatt"]=i,F["idMatrix"]=r,F["dir"]=a,F["dirPatt"]=s,F["dirMatrix"]=n,F["cf"]=o,F["cfPatt"]=l,F["cfMatrix"]=u,F["pos"][0]=c,F["pos"][1]=d,F["line"][0][0]=I[O++],F["line"][0][1]=I[O++],F["line"][0][2]=I[O++],F["line"][1][0]=I[O++],F["line"][1][1]=I[O++],F["line"][1][2]=I[O++],F["line"][2][0]=I[O++],F["line"][2][1]=I[O++],F["line"][2][2]=I[O++],F["line"][3][0]=I[O++],F["line"][3][1]=I[O++],F["line"][3][2]=I[O++],F["vertex"][0][0]=I[O++],F["vertex"][0][1]=I[O++],F["vertex"][1][0]=I[O++],F["vertex"][1][1]=I[O++],F["vertex"][2][0]=I[O++],F["vertex"][2][1]=I[O++],F["vertex"][3][0]=I[O++],F["vertex"][3][1]=I[O++],F["errorCorrected"]=I[O++]},function(e,t,i,r,a){artoolkit["frameMalloc"]||(artoolkit["frameMalloc"]={});var s=artoolkit["frameMalloc"];s["framepointer"]=t,s["framesize"]=i,s["camera"]=r,s["transform"]=a}];function _emscripten_asm_const_33(e,t,i,r,a,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S,x,q,E,C,T,A,M,P,R,I){return ASM_CONSTS[e](t,i,r,a,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S,x,q,E,C,T,A,M,P,R,I)}function _emscripten_asm_const_4(e,t,i,r,a){return ASM_CONSTS[e](t,i,r,a)}function _emscripten_asm_const_5(e,t,i,r,a,s){return ASM_CONSTS[e](t,i,r,a,s)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);function copyTempFloat(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3]}function copyTempDouble(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3],HEAP8[tempDoublePtr+4]=HEAP8[e+4],HEAP8[tempDoublePtr+5]=HEAP8[e+5],HEAP8[tempDoublePtr+6]=HEAP8[e+6],HEAP8[tempDoublePtr+7]=HEAP8[e+7]}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}function ___assert_fail(e,t,i,r){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",i,r?Pointer_stringify(r):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}assert(tempDoublePtr%8==0),Module["_i64Subtract"]=_i64Subtract;var embind_charCodes=void 0;function readLatin1String(e){var t="",i=e;while(HEAPU8[i])t+=embind_charCodes[HEAPU8[i++]];return t}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(e){if(void 0===e)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var i=createNamedFunction(t,(function(e){this.name=t,this.message=e;var i=new Error(e).stack;void 0!==i&&(this.stack=this.toString()+"\n"+i.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},i}var BindingError=void 0;function throwBindingError(e){throw new BindingError(e)}var InternalError=void 0;function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,i){function r(t){var r=i(t);r.length!==e.length&&throwInternalError("Mismatched type converter count");for(var a=0;a<e.length;++a)registerType(e[a],r[a])}e.forEach((function(e){typeDependencies[e]=t}));var a=new Array(t.length),s=[],n=0;t.forEach((function(e,t){registeredTypes.hasOwnProperty(e)?a[t]=registeredTypes[e]:(s.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){a[t]=registeredTypes[e],++n,n===s.length&&r(a)})))})),0===s.length&&r(a)}function registerType(e,t,i){if(i=i||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||throwBindingError('type "'+r+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+r+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var a=awaitingDependencies[e];delete awaitingDependencies[e],a.forEach((function(e){e()}))}}function __embind_register_void(e,t){t=readLatin1String(t),registerType(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var i=EXCEPTIONS.infos[t];if(i.adjusted===e)return t}return e},addRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,0===t.refcount&&(t.destructor&&Runtime.dynCall("vi",t.destructor,[e]),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(e)),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return 0|(asm["setTempRet0"](0),0);var t=EXCEPTIONS.infos[e],i=t.type;if(!i)return 0|(asm["setTempRet0"](0),e);var r=Array.prototype.slice.call(arguments);Module["___cxa_is_pointer_type"](i);___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<r.length;a++)if(r[a]&&Module["___cxa_can_catch"](r[a],i,e))return e=HEAP32[e>>2],t.adjusted=e,0|(asm["setTempRet0"](r[a]),e);return e=HEAP32[e>>2],0|(asm["setTempRet0"](i),e)}function ___cxa_throw(e,t,i){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:i,refcount:0},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module["_memset"]=_memset;var _BDtoILow=!0;function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function __embind_register_bool(e,t,i,r,a){var s=getShiftFromSize(i);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:a},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===i)r=HEAP8;else if(2===i)r=HEAP16;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+t);r=HEAP32}return this["fromWireType"](r[e>>s])},destructorFunction:null})}function _abort(){Module["abort"]()}function _free(){}function _malloc(e){var t=Runtime.dynamicAlloc(e+8);return t+8&4294967288}function simpleReadValueFromPointer(e){return this["fromWireType"](HEAPU32[e>>2])}function __embind_register_std_string(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){for(var t=HEAPU32[e>>2],i=new Array(t),r=0;r<t;++r)i[r]=String.fromCharCode(HEAPU8[e+4+r]);return _free(e),i.join("")},toWireType:function(e,t){function i(e,t){return e[t]}function r(e,t){return e.charCodeAt(t)}var a;t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array?a=i:t instanceof Int8Array?a=i:"string"===typeof t?a=r:throwBindingError("Cannot pass non-string to std::string");var s=t.length,n=_malloc(4+s);HEAPU32[n>>2]=s;for(var o=0;o<s;++o){var l=a(t,o);l>255&&(_free(n),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[n+4+o]=l}return null!==e&&e.push(_free,n),n},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,i){var r,a;i=readLatin1String(i),2===t?(r=function(){return HEAPU16},a=1):4===t&&(r=function(){return HEAPU32},a=2),registerType(e,{name:i,fromWireType:function(e){for(var t=r(),i=HEAPU32[e>>2],s=new Array(i),n=e+4>>a,o=0;o<i;++o)s[o]=String.fromCharCode(t[n+o]);return _free(e),s.join("")},toWireType:function(e,i){var s=r(),n=i.length,o=_malloc(4+n*t);HEAPU32[o>>2]=n;for(var l=o+4>>a,u=0;u<n;++u)s[l+u]=i.charCodeAt(u);return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}Module["_bitshift64Shl"]=_bitshift64Shl,Module["_free"]=_free,Module["_malloc"]=_malloc;var _emscripten_asm_const_int=!0;Module["_i64Add"]=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function integerReadValueFromPointer(e,t,i){switch(t){case 0:return i?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return i?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return i?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,i,r,a){t=readLatin1String(t),-1===a&&(a=4294967295);var s=getShiftFromSize(i),n=function(e){return e};if(0===r){var o=32-8*i;n=function(e){return e<<o>>>o}}registerType(e,{name:t,fromWireType:n,toWireType:function(e,i){if("number"!==typeof i&&"boolean"!==typeof i)throw new TypeError('Cannot convert "'+_embind_repr(i)+'" to '+this.name);if(i<r||i>a)throw new TypeError('Passing a number "'+_embind_repr(i)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+a+"]!");return 0|i},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,s,0!==r),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(e){e>4&&0===--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module["count_emval_handles"]=count_emval_handles,Module["get_first_emval"]=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function __embind_register_emval(e,t){t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(e){return _malloc(e)}var _sin=Math_sin;function ___setErrNo(e){return Module["___errno_location"]&&(HEAP32[Module["___errno_location"]()>>2]=e),e}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(e){switch(e){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"===typeof navigator&&navigator["hardwareConcurrency"]||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}function __exit(e){Module["exit"](e)}function _exit(e){__exit(e)}Module["_bitshift64Lshr"]=_bitshift64Lshr;var _llvm_ctlz_i32=!0;function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this["fromWireType"](HEAPF32[e>>2])};case 3:return function(e){return this["fromWireType"](HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,i){var r=getShiftFromSize(i);t=readLatin1String(t),registerType(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,t){if("number"!==typeof t&&"boolean"!==typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,r),destructorFunction:null})}var _BDtoIHigh=!0;function _pthread_cleanup_push(e,t){__ATEXIT__.push((function(){Runtime.dynCall("vi",e,[t])})),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var i=createNamedFunction(e.name||"unknownFunctionName",(function(){}));i.prototype=e.prototype;var r=new i,a=e.apply(r,t);return a instanceof Object?a:r}function runDestructors(e){while(e.length){var t=e.pop(),i=e.pop();i(t)}}function craftInvokerFunction(e,t,i,r,a){var s=t.length;s<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var n=null!==t[1]&&null!==i,o="",l="",u=0;u<s-2;++u)o+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";var c="return function "+makeLegalFunctionName(e)+"("+o+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n",d=!1;for(u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){d=!0;break}d&&(c+="var destructors = [];\n");var f=d?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[throwBindingError,r,a,runDestructors,t[0],t[1]];n&&(c+="var thisWired = classParam.toWireType("+f+", this);\n");for(u=0;u<s-2;++u)c+="var arg"+u+"Wired = argType"+u+".toWireType("+f+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),p.push(t[u+2]);n&&(l="thisWired"+(l.length>0?", ":"")+l);var m="void"!==t[0].name;if(c+=(m?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",d)c+="runDestructors(destructors);\n";else for(u=n?1:2;u<t.length;++u){var b=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(c+=b+"_dtor("+b+"); // "+t[u].name+"\n",h.push(b+"_dtor"),p.push(t[u].destructorFunction))}m&&(c+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),c+="}\n",h.push(c);var g=new_(Function,h).apply(null,p);return g}function ensureOverloadTable(e,t,i){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+i+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function exposePublicSymbol(e,t,i){Module.hasOwnProperty(e)?((void 0===i||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[i])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(i)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+i+")!"),Module[e].overloadTable[i]=t):(Module[e]=t,void 0!==i&&(Module[e].numArguments=i))}function heap32VectorToArray(e,t){for(var i=[],r=0;r<e;r++)i.push(HEAP32[(t>>2)+r]);return i}function replacePublicSymbol(e,t,i){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==i?Module[e].overloadTable[i]=t:Module[e]=t}function requireFunction(e,t){function i(i){for(var r=[],a=1;a<e.length;++a)r.push("a"+a);var s="dynCall_"+e+"_"+t,n="return function "+s+"("+r.join(", ")+") {\n";return n+="    return dynCall(rawFunction"+(r.length?", ":"")+r.join(", ")+");\n",n+="};\n",new Function("dynCall","rawFunction",n)(i,t)}var r;if(e=readLatin1String(e),void 0!==Module["FUNCTION_TABLE_"+e])r=Module["FUNCTION_TABLE_"+e][t];else if("undefined"!==typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var a=asm["dynCall_"+e];void 0===a&&(a=asm["dynCall_"+e.replace(/f/g,"d")],void 0===a&&throwBindingError("No dynCall invoker for signature: "+e)),r=i(a)}return"function"!==typeof r&&throwBindingError("unknown function pointer with signature "+e+": "+t),r}var UnboundTypeError=void 0;function getTypeName(e){var t=___getTypeName(e),i=readLatin1String(t);return _free(t),i}function throwUnboundTypeError(e,t){var i=[],r={};function a(e){r[e]||registeredTypes[e]||(typeDependencies[e]?typeDependencies[e].forEach(a):(i.push(e),r[e]=!0))}throw t.forEach(a),new UnboundTypeError(e+": "+i.map(getTypeName).join([", "]))}function __embind_register_function(e,t,i,r,a,s){var n=heap32VectorToArray(t,i);e=readLatin1String(e),a=requireFunction(r,a),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",n)}),t-1),whenDependentTypesAreResolved([],n,(function(i){var r=[i[0],null].concat(i.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,r,null,a,s),t-1),[]}))}function __embind_register_constant(e,t,i){e=readLatin1String(e),whenDependentTypesAreResolved([],[t],(function(t){return t=t[0],Module[e]=t["fromWireType"](i),[]}))}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var i=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i--;i)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),i="/"===e.substr(-1);return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),e||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),i=t[0],r=t[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,i=arguments.length-1;i>=-1&&!t;i--){var r=i>=0?arguments[i]:FS.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var i=e.length-1;i>=0;i--)if(""!==e[i])break;return t>i?[]:e.slice(t,i-t+1)}e=PATH.resolve(e).substr(1),t=PATH.resolve(t).substr(1);for(var r=i(e.split("/")),a=i(t.split("/")),s=Math.min(r.length,a.length),n=s,o=0;o<s;o++)if(r[o]!==a[o]){n=o;break}var l=[];for(o=n;o<r.length;o++)l.push("..");return l=l.concat(a.slice(n)),l.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,i,r,a){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var s=0,n=0;n<r;n++){var o;try{o=e.tty.ops.get_char(e.tty)}catch(l){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===o&&0===s)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===o||void 0===o)break;s++,t[i+n]=o}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,i,r,a){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var s=0;s<r;s++)try{e.tty.ops.put_char(e.tty,t[i+s])}catch(n){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return r&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var i=256,r=new Buffer(i),a=0,s=process.stdin.fd,n=!1;try{s=fs.openSync("/dev/stdin","r"),n=!0}catch(o){}a=fs.readSync(s,r,0,i,null),n&&fs.closeSync(s),t=a>0?r.slice(0,a).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?(t=window.prompt("Input: "),null!==t&&(t+="\n")):"function"==typeof readline&&(t=readline(),null!==t&&(t+="\n"));if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["print"](UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(Module["printErr"](UTF8ArrayToString(e.output,0)),e.output=[])}}},MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,i,r){if(FS.isBlkdev(i)||FS.isFIFO(i))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var a=FS.createNode(e,t,i,r);return FS.isDir(a.mode)?(a.node_ops=MEMFS.ops_table.dir.node,a.stream_ops=MEMFS.ops_table.dir.stream,a.contents={}):FS.isFile(a.mode)?(a.node_ops=MEMFS.ops_table.file.node,a.stream_ops=MEMFS.ops_table.file.stream,a.usedBytes=0,a.contents=null):FS.isLink(a.mode)?(a.node_ops=MEMFS.ops_table.link.node,a.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(a.mode)&&(a.node_ops=MEMFS.ops_table.chrdev.node,a.stream_ops=MEMFS.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a),a},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],i=0;i<e.usedBytes;++i)t.push(e.contents[i]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){if(e.contents&&e.contents.subarray&&t>e.contents.length&&(e.contents=MEMFS.getFileDataAsRegularArray(e),e.usedBytes=e.contents.length),!e.contents||e.contents.subarray){var i=e.contents?e.contents.buffer.byteLength:0;if(i>=t)return;var r=1048576;t=Math.max(t,i*(i<r?2:1.125)|0),0!=i&&(t=Math.max(t,256));var a=e.contents;return e.contents=new Uint8Array(t),void(e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0))}!e.contents&&t>0&&(e.contents=[]);while(e.contents.length<t)e.contents.push(0)},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var i=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),i&&e.contents.set(i.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else while(e.contents.length<t)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(e,t,i,r){return MEMFS.createNode(e,t,i,r)},rename:function(e,t,i){if(FS.isDir(e.mode)){var r;try{r=FS.lookupNode(t,i)}catch(s){}if(r)for(var a in r.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=i,t.contents[i]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var i=FS.lookupNode(e,t);for(var r in i.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var i in e.contents)e.contents.hasOwnProperty(i)&&t.push(i);return t},symlink:function(e,t,i){var r=MEMFS.createNode(e,t,41471,0);return r.link=i,r},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return e.link}},stream_ops:{read:function(e,t,i,r,a){var s=e.node.contents;if(a>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-a,r);if(assert(n>=0),n>8&&s.subarray)t.set(s.subarray(a,a+n),i);else for(var o=0;o<n;o++)t[i+o]=s[a+o];return n},write:function(e,t,i,r,a,s){if(!r)return 0;var n=e.node;if(n.timestamp=Date.now(),t.subarray&&(!n.contents||n.contents.subarray)){if(s)return n.contents=t.subarray(i,i+r),n.usedBytes=r,r;if(0===n.usedBytes&&0===a)return n.contents=new Uint8Array(t.subarray(i,i+r)),n.usedBytes=r,r;if(a+r<=n.usedBytes)return n.contents.set(t.subarray(i,i+r),a),r}if(MEMFS.expandFileStorage(n,a+r),n.contents.subarray&&t.subarray)n.contents.set(t.subarray(i,i+r),a);else for(var o=0;o<r;o++)n.contents[a+o]=t[i+o];return n.usedBytes=Math.max(n.usedBytes,a+r),r},llseek:function(e,t,i){var r=t;if(1===i?r+=e.position:2===i&&FS.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r},allocate:function(e,t,i){MEMFS.expandFileStorage(e.node,t+i),e.node.usedBytes=Math.max(e.node.usedBytes,t+i)},mmap:function(e,t,i,r,a,s,n){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var o,l,u=e.node.contents;if(2&n||u.buffer!==t&&u.buffer!==t.buffer){if((a>0||a+r<e.node.usedBytes)&&(u=u.subarray?u.subarray(a,a+r):Array.prototype.slice.call(u,a,a+r)),l=!0,o=_malloc(r),!o)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);t.set(u,o)}else l=!1,o=u.byteOffset;return{ptr:o,allocated:l}},msync:function(e,t,i,r,a){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(2&a)return 0;MEMFS.stream_ops.write(e,t,0,r,i,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!==typeof indexedDB)return indexedDB;var e=null;return"object"===typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,i){IDBFS.getLocalSet(e,(function(r,a){if(r)return i(r);IDBFS.getRemoteSet(e,(function(e,r){if(e)return i(e);var s=t?r:a,n=t?a:r;IDBFS.reconcile(s,n,i)}))}))},getDB:function(e,t){var i,r=IDBFS.dbs[e];if(r)return t(null,r);try{i=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(a){return t(a)}i.onupgradeneeded=function(e){var t,i=e.target.result,r=e.target.transaction;t=i.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?r.objectStore(IDBFS.DB_STORE_NAME):i.createObjectStore(IDBFS.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},i.onsuccess=function(){r=i.result,IDBFS.dbs[e]=r,t(null,r)},i.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var i={};function r(e){return"."!==e&&".."!==e}function a(e){return function(t){return PATH.join2(e,t)}}var s=FS.readdir(e.mountpoint).filter(r).map(a(e.mountpoint));while(s.length){var n,o=s.pop();try{n=FS.stat(o)}catch(l){return t(l)}FS.isDir(n.mode)&&s.push.apply(s,FS.readdir(o).filter(r).map(a(o))),i[o]={timestamp:n.mtime}}return t(null,{type:"local",entries:i})},getRemoteSet:function(e,t){var i={};IDBFS.getDB(e.mountpoint,(function(e,r){if(e)return t(e);var a=r.transaction([IDBFS.DB_STORE_NAME],"readonly");a.onerror=function(e){t(this.error),e.preventDefault()};var s=a.objectStore(IDBFS.DB_STORE_NAME),n=s.index("timestamp");n.openKeyCursor().onsuccess=function(e){var a=e.target.result;if(!a)return t(null,{type:"remote",db:r,entries:i});i[a.primaryKey]={timestamp:a.key},a.continue()}}))},loadLocalEntry:function(e,t){var i,r;try{var a=FS.lookupPath(e);r=a.node,i=FS.stat(e)}catch(s){return t(s)}return FS.isDir(i.mode)?t(null,{timestamp:i.mtime,mode:i.mode}):FS.isFile(i.mode)?(r.contents=MEMFS.getFileDataAsTypedArray(r),t(null,{timestamp:i.mtime,mode:i.mode,contents:r.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,i){try{if(FS.isDir(t.mode))FS.mkdir(e,t.mode);else{if(!FS.isFile(t.mode))return i(new Error("node type not supported"));FS.writeFile(e,t.contents,{encoding:"binary",canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(r){return i(r)}i(null)},removeLocalEntry:function(e,t){try{FS.lookupPath(e);var i=FS.stat(e);FS.isDir(i.mode)?FS.rmdir(e):FS.isFile(i.mode)&&FS.unlink(e)}catch(r){return t(r)}t(null)},loadRemoteEntry:function(e,t,i){var r=e.get(t);r.onsuccess=function(e){i(null,e.target.result)},r.onerror=function(e){i(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,i,r){var a=e.put(i,t);a.onsuccess=function(){r(null)},a.onerror=function(e){r(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,i){var r=e.delete(t);r.onsuccess=function(){i(null)},r.onerror=function(e){i(this.error),e.preventDefault()}},reconcile:function(e,t,i){var r=0,a=[];Object.keys(e.entries).forEach((function(i){var s=e.entries[i],n=t.entries[i];(!n||s.timestamp>n.timestamp)&&(a.push(i),r++)}));var s=[];if(Object.keys(t.entries).forEach((function(i){t.entries[i];var a=e.entries[i];a||(s.push(i),r++)})),!r)return i(null);var n=0,o="remote"===e.type?e.db:t.db,l=o.transaction([IDBFS.DB_STORE_NAME],"readwrite"),u=l.objectStore(IDBFS.DB_STORE_NAME);function c(e){return e?c.errored?void 0:(c.errored=!0,i(e)):++n>=r?i(null):void 0}l.onerror=function(e){c(this.error),e.preventDefault()},a.sort().forEach((function(e){"local"===t.type?IDBFS.loadRemoteEntry(u,e,(function(t,i){if(t)return c(t);IDBFS.storeLocalEntry(e,i,c)})):IDBFS.loadLocalEntry(e,(function(t,i){if(t)return c(t);IDBFS.storeRemoteEntry(u,e,i,c)}))})),s.sort().reverse().forEach((function(e){"local"===t.type?IDBFS.removeLocalEntry(e,c):IDBFS.removeRemoteEntry(u,e,c)}))}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(e){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(e.opts.root),0)},createNode:function(e,t,i,r){if(!FS.isDir(i)&&!FS.isFile(i)&&!FS.isLink(i))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var a=FS.createNode(e,t,i);return a.node_ops=NODEFS.node_ops,a.stream_ops=NODEFS.stream_ops,a},getMode:function(e){var t;try{t=fs.lstatSync(e),NODEFS.isWindows&&(t.mode=t.mode|(146&t.mode)>>1)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}return t.mode},realPath:function(e){var t=[];while(e.parent!==e)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),PATH.join.apply(null,t)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(e){if(e&=-32769,e in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[e];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(e){var t,i=NODEFS.realPath(e);try{t=fs.lstatSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}return NODEFS.isWindows&&!t.blksize&&(t.blksize=4096),NODEFS.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var i=NODEFS.realPath(e);try{if(void 0!==t.mode&&(fs.chmodSync(i,t.mode),e.mode=t.mode),void 0!==t.timestamp){var r=new Date(t.timestamp);fs.utimesSync(i,r,r)}void 0!==t.size&&fs.truncateSync(i,t.size)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}},lookup:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t),r=NODEFS.getMode(i);return NODEFS.createNode(e,t,r)},mknod:function(e,t,i,r){var a=NODEFS.createNode(e,t,i,r),s=NODEFS.realPath(a);try{FS.isDir(a.mode)?fs.mkdirSync(s,a.mode):fs.writeFileSync(s,"",{mode:a.mode})}catch(n){if(!n.code)throw n;throw new FS.ErrnoError(ERRNO_CODES[n.code])}return a},rename:function(e,t,i){var r=NODEFS.realPath(e),a=PATH.join2(NODEFS.realPath(t),i);try{fs.renameSync(r,a)}catch(s){if(!s.code)throw s;throw new FS.ErrnoError(ERRNO_CODES[s.code])}},unlink:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t);try{fs.unlinkSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},rmdir:function(e,t){var i=PATH.join2(NODEFS.realPath(e),t);try{fs.rmdirSync(i)}catch(r){if(!r.code)throw r;throw new FS.ErrnoError(ERRNO_CODES[r.code])}},readdir:function(e){var t=NODEFS.realPath(e);try{return fs.readdirSync(t)}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},symlink:function(e,t,i){var r=PATH.join2(NODEFS.realPath(e),t);try{fs.symlinkSync(i,r)}catch(a){if(!a.code)throw a;throw new FS.ErrnoError(ERRNO_CODES[a.code])}},readlink:function(e){var t=NODEFS.realPath(e);try{return t=fs.readlinkSync(t),t=NODEJS_PATH.relative(NODEJS_PATH.resolve(e.mount.opts.root),t),t}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}}},stream_ops:{open:function(e){var t=NODEFS.realPath(e.node);try{FS.isFile(e.node.mode)&&(e.nfd=fs.openSync(t,NODEFS.flagsToPermissionString(e.flags)))}catch(i){if(!i.code)throw i;throw new FS.ErrnoError(ERRNO_CODES[i.code])}},close:function(e){try{FS.isFile(e.node.mode)&&e.nfd&&fs.closeSync(e.nfd)}catch(t){if(!t.code)throw t;throw new FS.ErrnoError(ERRNO_CODES[t.code])}},read:function(e,t,i,r,a){if(0===r)return 0;var s,n=new Buffer(r);try{s=fs.readSync(e.nfd,n,0,r,a)}catch(l){throw new FS.ErrnoError(ERRNO_CODES[l.code])}if(s>0)for(var o=0;o<s;o++)t[i+o]=n[o];return s},write:function(e,t,i,r,a){var s,n=new Buffer(t.subarray(i,i+r));try{s=fs.writeSync(e.nfd,n,0,r,a)}catch(o){throw new FS.ErrnoError(ERRNO_CODES[o.code])}return s},llseek:function(e,t,i){var r=t;if(1===i)r+=e.position;else if(2===i&&FS.isFile(e.node.mode))try{var a=fs.fstatSync(e.nfd);r+=a.size}catch(s){throw new FS.ErrnoError(ERRNO_CODES[s.code])}if(r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var t=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),i={};function r(e){for(var r=e.split("/"),a=t,s=0;s<r.length-1;s++){var n=r.slice(0,s+1).join("/");i[n]||(i[n]=WORKERFS.createNode(a,n,WORKERFS.DIR_MODE,0)),a=i[n]}return a}function a(e){var t=e.split("/");return t[t.length-1]}return Array.prototype.forEach.call(e.opts["files"]||[],(function(e){WORKERFS.createNode(r(e.name),a(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)})),(e.opts["blobs"]||[]).forEach((function(e){WORKERFS.createNode(r(e["name"]),a(e["name"]),WORKERFS.FILE_MODE,0,e["data"])})),(e.opts["packages"]||[]).forEach((function(e){e["metadata"].files.forEach((function(t){var i=t.filename.substr(1);WORKERFS.createNode(r(i),a(i),WORKERFS.FILE_MODE,0,e["blob"].slice(t.start,t.end))}))})),t},createNode:function(e,t,i,r,a,s){var n=FS.createNode(e,t,i);return n.mode=i,n.node_ops=WORKERFS.node_ops,n.stream_ops=WORKERFS.stream_ops,n.timestamp=(s||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),i===WORKERFS.FILE_MODE?(n.size=a.size,n.contents=a):(n.size=4096,n.contents={}),e&&(e.contents[t]=n),n},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(e,t,i,r){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(e,t,i){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(e,t){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(e,t,i){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(e){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(e,t,i,r,a){if(a>=e.node.size)return 0;var s=e.node.contents.slice(a,a+r),n=WORKERFS.reader.readAsArrayBuffer(s);return t.set(new Uint8Array(n),i),s.size},write:function(e,t,i,r,a){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(e,t,i){var r=t;if(1===i?r+=e.position:2===i&&FS.isFile(e.node.mode)&&(r+=e.node.size),r<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return r}}},_stdin=allocate(1,"i32*",ALLOC_STATIC),_stdout=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC),FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return ___setErrNo(e.errno)},lookupPath:function(e,t){if(e=PATH.resolve(FS.cwd(),e),t=t||{},!e)return{path:"",node:null};var i={follow_mount:!0,recurse_count:0};for(var r in i)void 0===t[r]&&(t[r]=i[r]);if(t.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var a=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),s=FS.root,n="/",o=0;o<a.length;o++){var l=o===a.length-1;if(l&&t.parent)break;if(s=FS.lookupNode(s,a[o]),n=PATH.join2(n,a[o]),FS.isMountpoint(s)&&(!l||l&&t.follow_mount)&&(s=s.mounted.root),!l||t.follow){var u=0;while(FS.isLink(s.mode)){var c=FS.readlink(n);n=PATH.resolve(PATH.dirname(n),c);var d=FS.lookupPath(n,{recurse_count:t.recurse_count});if(s=d.node,u++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}}return{path:n,node:s}},getPath:function(e){var t;while(1){if(FS.isRoot(e)){var i=e.mount.mountpoint;return t?"/"!==i[i.length-1]?i+"/"+t:i+t:i}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var i=0,r=0;r<t.length;r++)i=(i<<5)-i+t.charCodeAt(r)|0;return(e+i>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else{var i=FS.nameTable[t];while(i){if(i.name_next===e){i.name_next=e.name_next;break}i=i.name_next}}},lookupNode:function(e,t){var i=FS.mayLookup(e);if(i)throw new FS.ErrnoError(i,e);for(var r=FS.hashName(e.id,t),a=FS.nameTable[r];a;a=a.name_next){var s=a.name;if(a.parent.id===e.id&&s===t)return a}return FS.lookup(e,t)},createNode:function(e,t,i,r){if(!FS.FSNode){FS.FSNode=function(e,t,i,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=i,this.node_ops={},this.stream_ops={},this.rdev=r},FS.FSNode.prototype={};var a=365,s=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&a)===a},set:function(e){e?this.mode|=a:this.mode&=~a}},write:{get:function(){return(this.mode&s)===s},set:function(e){e?this.mode|=s:this.mode&=~s}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var n=new FS.FSNode(e,t,i,r);return FS.hashAddNode(n),n},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=FS.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:ERRNO_CODES.EACCES},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function(e,t){try{FS.lookupNode(e,t);return ERRNO_CODES.EEXIST}catch(i){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,i){var r;try{r=FS.lookupNode(e,t)}catch(s){return s.errno}var a=FS.nodePermissions(e,"wx");if(a)return a;if(i){if(!FS.isDir(r.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(r)||FS.getPath(r)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(r.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?ERRNO_CODES.ELOOP:FS.isDir(e.mode)&&(0!==(2097155&t)||512&t)?ERRNO_CODES.EISDIR:FS.nodePermissions(e,FS.flagsToPermissionString(t)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var i=e;i<=t;i++)if(!FS.streams[i])return i;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,i){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var r=new FS.FSStream;for(var a in e)r[a]=e[a];e=r;var s=FS.nextfd(t,i);return e.fd=s,FS.streams[s]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){var t=[],i=[e];while(i.length){var r=i.pop();t.push(r),i.push.apply(i,r.mounts)}return t},syncfs:function(e,t){"function"===typeof e&&(t=e,e=!1);var i=FS.getMounts(FS.root.mount),r=0;function a(e){if(e)return a.errored?void 0:(a.errored=!0,t(e));++r>=i.length&&t(null)}i.forEach((function(t){if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:function(e,t,i){var r,a="/"===i,s=!i;if(a&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!a&&!s){var n=FS.lookupPath(i,{follow_mount:!1});if(i=n.path,r=n.node,FS.isMountpoint(r))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(r.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var o={type:e,opts:t,mountpoint:i,mounts:[]},l=e.mount(o);return l.mount=o,o.root=l,a?FS.root=l:r&&(r.mounted=o,r.mount&&r.mount.mounts.push(o)),l},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i=t.node,r=i.mounted,a=FS.getMounts(r);Object.keys(FS.nameTable).forEach((function(e){var t=FS.nameTable[e];while(t){var i=t.name_next;-1!==a.indexOf(t.mount)&&FS.destroyNode(t),t=i}})),i.mounted=null;var s=i.mount.mounts.indexOf(r);assert(-1!==s),i.mount.mounts.splice(s,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,i){var r=FS.lookupPath(e,{parent:!0}),a=r.node,s=PATH.basename(e);if(!s||"."===s||".."===s)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var n=FS.mayCreate(a,s);if(n)throw new FS.ErrnoError(n);if(!a.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return a.node_ops.mknod(a,s,t,i)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdev:function(e,t,i){return"undefined"===typeof i&&(i=t,t=438),t|=8192,FS.mknod(e,t,i)},symlink:function(e,t){if(!PATH.resolve(e))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var i=FS.lookupPath(t,{parent:!0}),r=i.node;if(!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var a=PATH.basename(t),s=FS.mayCreate(r,a);if(s)throw new FS.ErrnoError(s);if(!r.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return r.node_ops.symlink(r,a,e)},rename:function(e,t){var i,r,a,s=PATH.dirname(e),n=PATH.dirname(t),o=PATH.basename(e),l=PATH.basename(t);try{i=FS.lookupPath(e,{parent:!0}),r=i.node,i=FS.lookupPath(t,{parent:!0}),a=i.node}catch(p){throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!r||!a)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(r.mount!==a.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var u,c=FS.lookupNode(r,o),d=PATH.relative(e,n);if("."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(d=PATH.relative(t,s),"."!==d.charAt(0))throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);try{u=FS.lookupNode(a,l)}catch(p){}if(c!==u){var f=FS.isDir(c.mode),h=FS.mayDelete(r,o,f);if(h)throw new FS.ErrnoError(h);if(h=u?FS.mayDelete(a,l,f):FS.mayCreate(a,l),h)throw new FS.ErrnoError(h);if(!r.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(c)||u&&FS.isMountpoint(u))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(a!==r&&(h=FS.nodePermissions(r,"w"),h))throw new FS.ErrnoError(h);try{FS.trackingDelegate["willMovePath"]&&FS.trackingDelegate["willMovePath"](e,t)}catch(p){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+p.message)}FS.hashRemoveNode(c);try{r.node_ops.rename(c,a,l)}catch(p){throw p}finally{FS.hashAddNode(c)}try{FS.trackingDelegate["onMovePath"]&&FS.trackingDelegate["onMovePath"](e,t)}catch(p){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+p.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}),i=t.node,r=PATH.basename(e),a=FS.lookupNode(i,r),s=FS.mayDelete(i,r,!0);if(s)throw new FS.ErrnoError(s);if(!i.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(a))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}i.node_ops.rmdir(i,r),FS.destroyNode(a);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}),i=t.node;if(!i.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return i.node_ops.readdir(i)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}),i=t.node,r=PATH.basename(e),a=FS.lookupNode(i,r),s=FS.mayDelete(i,r,!1);if(s)throw s===ERRNO_CODES.EISDIR&&(s=ERRNO_CODES.EPERM),new FS.ErrnoError(s);if(!i.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(a))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate["willDeletePath"]&&FS.trackingDelegate["willDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+n.message)}i.node_ops.unlink(i,r),FS.destroyNode(a);try{FS.trackingDelegate["onDeletePath"]&&FS.trackingDelegate["onDeletePath"](e)}catch(n){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+n.message)}},readlink:function(e){var t=FS.lookupPath(e),i=t.node;if(!i)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!i.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(i.parent),i.node_ops.readlink(i))},stat:function(e,t){var i=FS.lookupPath(e,{follow:!t}),r=i.node;if(!r)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!r.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return r.node_ops.getattr(r)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,i){var r;if("string"===typeof e){var a=FS.lookupPath(e,{follow:!i});r=a.node}else r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(i.node,t)},chown:function(e,t,i,r){var a;if("string"===typeof e){var s=FS.lookupPath(e,{follow:!r});a=s.node}else a=e;if(!a.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(e,t,i){FS.chown(e,t,i,!0)},fchown:function(e,t,i){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(r.node,t,i)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var i;if("string"===typeof e){var r=FS.lookupPath(e,{follow:!0});i=r.node}else i=e;if(!i.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(i.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(i.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var a=FS.nodePermissions(i,"w");if(a)throw new FS.ErrnoError(a);i.node_ops.setattr(i,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var i=FS.getStream(e);if(!i)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(0===(2097155&i.flags))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(i.node,t)},utime:function(e,t,i){var r=FS.lookupPath(e,{follow:!0}),a=r.node;a.node_ops.setattr(a,{timestamp:Math.max(t,i)})},open:function(e,t,i,r,a){if(""===e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var s;if(t="string"===typeof t?FS.modeStringToFlags(t):t,i="undefined"===typeof i?438:i,i=64&t?4095&i|32768:0,"object"===typeof e)s=e;else{e=PATH.normalize(e);try{var n=FS.lookupPath(e,{follow:!(131072&t)});s=n.node}catch(d){}}var o=!1;if(64&t)if(s){if(128&t)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else s=FS.mknod(e,i,0),o=!0;if(!s)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(s.mode)&&(t&=-513),65536&t&&!FS.isDir(s.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!o){var l=FS.mayOpen(s,t);if(l)throw new FS.ErrnoError(l)}512&t&&FS.truncate(s,0),t&=-641;var u=FS.createStream({node:s,path:FS.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1},r,a);u.stream_ops.open&&u.stream_ops.open(u),!Module["logReadFiles"]||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,Module["printErr"]("read file: "+e)));try{if(FS.trackingDelegate["onOpenFile"]){var c=0;1!==(2097155&t)&&(c|=FS.tracking.openFlags.READ),0!==(2097155&t)&&(c|=FS.tracking.openFlags.WRITE),FS.trackingDelegate["onOpenFile"](e,c)}}catch(d){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+d.message)}return u},close:function(e){e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{FS.closeStream(e.fd)}},llseek:function(e,t,i){if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return e.position=e.stream_ops.llseek(e,t,i),e.ungotten=[],e.position},read:function(e,t,i,r,a){if(r<0||a<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var s=!0;if("undefined"===typeof a)a=e.position,s=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var n=e.stream_ops.read(e,t,i,r,a);return s||(e.position+=n),n},write:function(e,t,i,r,a,s){if(r<0||a<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!e.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);1024&e.flags&&FS.llseek(e,0,2);var n=!0;if("undefined"===typeof a)a=e.position,n=!1;else if(!e.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var o=e.stream_ops.write(e,t,i,r,a,s);n||(e.position+=o);try{e.path&&FS.trackingDelegate["onWriteToFile"]&&FS.trackingDelegate["onWriteToFile"](e.path)}catch(l){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+l.message)}return o},allocate:function(e,t,i){if(t<0||i<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(0===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(e.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!e.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);e.stream_ops.allocate(e,t,i)},mmap:function(e,t,i,r,a,s,n){if(1===(2097155&e.flags))throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!e.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return e.stream_ops.mmap(e,t,i,r,a,s,n)},msync:function(e,t,i,r,a){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,i,r,a):0},munmap:function(e){return 0},ioctl:function(e,t,i){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return e.stream_ops.ioctl(e,t,i)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var i,r=FS.open(e,t.flags),a=FS.stat(e),s=a.size,n=new Uint8Array(s);return FS.read(r,n,0,s,0),"utf8"===t.encoding?i=UTF8ArrayToString(n,0):"binary"===t.encoding&&(i=n),FS.close(r),i},writeFile:function(e,t,i){if(i=i||{},i.flags=i.flags||"w",i.encoding=i.encoding||"utf8","utf8"!==i.encoding&&"binary"!==i.encoding)throw new Error('Invalid encoding type "'+i.encoding+'"');var r=FS.open(e,i.flags,i.mode);if("utf8"===i.encoding){var a=new Uint8Array(lengthBytesUTF8(t)+1),s=stringToUTF8Array(t,a,0,a.length);FS.write(r,a,0,s,0,i.canOwn)}else"binary"===i.encoding&&FS.write(r,t,0,t.length,0,i.canOwn);FS.close(r)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var i=FS.nodePermissions(t.node,"x");if(i)throw new FS.ErrnoError(i);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,i,r,a){return r}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0)),"undefined"!==typeof crypto){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=ENVIRONMENT_IS_NODE?function(){return __webpack_require__("1c46").randomBytes(1)[0]}:function(){return 256*Math.random()|0};FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var i=+t,r=FS.getStream(i);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return a.parent=a,a}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module["stdin"]?FS.createDevice("/dev","stdin",Module["stdin"]):FS.symlink("/dev/tty","/dev/stdin"),Module["stdout"]?FS.createDevice("/dev","stdout",null,Module["stdout"]):FS.symlink("/dev/tty","/dev/stdout"),Module["stderr"]?FS.createDevice("/dev","stderr",null,Module["stderr"]):FS.symlink("/dev/tty1","/dev/stderr");var e=FS.open("/dev/stdin","r");assert(0===e.fd,"invalid handle for stdin ("+e.fd+")");var t=FS.open("/dev/stdout","w");assert(1===t.fd,"invalid handle for stdout ("+t.fd+")");var i=FS.open("/dev/stderr","w");assert(2===i.fd,"invalid handle for stderr ("+i.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,ERRNO_CODES)if(ERRNO_CODES[t]===e){this.code=t;break}},this.setErrno(e),this.message=ERRNO_MESSAGES[e]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS,NODEFS:NODEFS,WORKERFS:WORKERFS}},init:function(e,t,i){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module["stdin"]=e||Module["stdin"],Module["stdout"]=t||Module["stdout"],Module["stderr"]=i||Module["stderr"],FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module["_fflush"];e&&e(0);for(var t=0;t<FS.streams.length;t++){var i=FS.streams[t];i&&FS.close(i)}},getMode:function(e,t){var i=0;return e&&(i|=365),t&&(i|=146),i},joinPath:function(e,t){var i=PATH.join.apply(null,e);return t&&"/"==i[0]&&(i=i.substr(1)),i},absolutePath:function(e,t){return PATH.resolve(t,e)},standardizePath:function(e){return PATH.normalize(e)},findObject:function(e,t){var i=FS.analyzePath(e,t);return i.exists?i.object:(___setErrNo(i.error),null)},analyzePath:function(e,t){try{var i=FS.lookupPath(e,{follow:!t});e=i.path}catch(a){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{i=FS.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=i.path,r.parentObject=i.node,r.name=PATH.basename(e),i=FS.lookupPath(e,{follow:!t}),r.exists=!0,r.path=i.path,r.object=i.node,r.name=i.node.name,r.isRoot="/"===i.path}catch(a){r.error=a.errno}return r},createFolder:function(e,t,i,r){var a=PATH.join2("string"===typeof e?e:FS.getPath(e),t),s=FS.getMode(i,r);return FS.mkdir(a,s)},createPath:function(e,t,i,r){e="string"===typeof e?e:FS.getPath(e);var a=t.split("/").reverse();while(a.length){var s=a.pop();if(s){var n=PATH.join2(e,s);try{FS.mkdir(n)}catch(o){}e=n}}return n},createFile:function(e,t,i,r,a){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t),n=FS.getMode(r,a);return FS.create(s,n)},createDataFile:function(e,t,i,r,a,s){var n=t?PATH.join2("string"===typeof e?e:FS.getPath(e),t):e,o=FS.getMode(r,a),l=FS.create(n,o);if(i){if("string"===typeof i){for(var u=new Array(i.length),c=0,d=i.length;c<d;++c)u[c]=i.charCodeAt(c);i=u}FS.chmod(l,146|o);var f=FS.open(l,"w");FS.write(f,i,0,i.length,0,s),FS.close(f),FS.chmod(l,o)}return l},createDevice:function(e,t,i,r){var a=PATH.join2("string"===typeof e?e:FS.getPath(e),t),s=FS.getMode(!!i,!!r);FS.createDevice.major||(FS.createDevice.major=64);var n=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(n,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a,s){for(var n=0,o=0;o<a;o++){var l;try{l=i()}catch(u){throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(void 0===l&&0===n)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(null===l||void 0===l)break;n++,t[r+o]=l}return n&&(e.node.timestamp=Date.now()),n},write:function(e,t,i,a,s){for(var n=0;n<a;n++)try{r(t[i+n])}catch(o){throw new FS.ErrnoError(ERRNO_CODES.EIO)}return a&&(e.node.timestamp=Date.now()),n}}),FS.mkdev(a,s,n)},createLink:function(e,t,i,r,a){var s=PATH.join2("string"===typeof e?e:FS.getPath(e),t);return FS.symlink(i,s)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!Module["read"])throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(Module["read"](e.url),!0),e.usedBytes=e.contents.length}catch(i){t=!1}return t||___setErrNo(ERRNO_CODES.EIO),t},createLazyFile:function(e,t,i,r,a){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,i=e/this.chunkSize|0;return this.getter(i)[t]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",i,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+i+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,s=1048576;a||(s=r);var n=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",i,!1),r!==s&&a.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(a.responseType="arraybuffer"),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+i+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):intArrayFromString(a.responseText||"",!0)},o=this;o.setDataGetter((function(e){var t=e*s,i=(e+1)*s-1;if(i=Math.min(i,r-1),"undefined"===typeof o.chunks[e]&&(o.chunks[e]=n(t,i)),"undefined"===typeof o.chunks[e])throw new Error("doXHR failed!");return o.chunks[e]})),this._length=r,this._chunkSize=s,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var n=new s;Object.defineProperty(n,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(n,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var o={isDevice:!1,contents:n}}else o={isDevice:!1,url:i};var l=FS.createFile(e,t,o,r,a);o.contents?l.contents=o.contents:o.url&&(l.contents=null,l.url=o.url),Object.defineProperty(l,"usedBytes",{get:function(){return this.contents.length}});var u={},c=Object.keys(l.stream_ops);return c.forEach((function(e){var t=l.stream_ops[e];u[e]=function(){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);return t.apply(null,arguments)}})),u.read=function(e,t,i,r,a){if(!FS.forceLoadFile(l))throw new FS.ErrnoError(ERRNO_CODES.EIO);var s=e.node.contents;if(a>=s.length)return 0;var n=Math.min(s.length-a,r);if(assert(n>=0),s.slice)for(var o=0;o<n;o++)t[i+o]=s[a+o];else for(o=0;o<n;o++)t[i+o]=s.get(a+o);return n},l.stream_ops=u,l},createPreloadedFile:function(e,t,i,r,a,s,n,o,l,u){Browser.init();var c=t?PATH.resolve(PATH.join2(e,t)):e,d=getUniqueRunDependency("cp "+c);function f(i){function f(i){u&&u(),o||FS.createDataFile(e,t,i,r,a,l),s&&s(),removeRunDependency(d)}var h=!1;Module["preloadPlugins"].forEach((function(e){h||e["canHandle"](c)&&(e["handle"](i,c,f,(function(){n&&n(),removeRunDependency(d)})),h=!0)})),h||f(i)}addRunDependency(d),"string"==typeof i?Browser.asyncLoad(i,(function(e){f(e)}),n):f(i)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,i){t=t||function(){},i=i||function(){};var r=FS.indexedDB();try{var a=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(s){return i(s)}a.onupgradeneeded=function(){console.log("creating db");var e=a.result;e.createObjectStore(FS.DB_STORE_NAME)},a.onsuccess=function(){var r=a.result,s=r.transaction([FS.DB_STORE_NAME],"readwrite"),n=s.objectStore(FS.DB_STORE_NAME),o=0,l=0,u=e.length;function c(){0==l?t():i()}e.forEach((function(e){var t=n.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){o++,o+l==u&&c()},t.onerror=function(){l++,o+l==u&&c()}})),s.onerror=i},a.onerror=i},loadFilesFromDB:function(e,t,i){t=t||function(){},i=i||function(){};var r=FS.indexedDB();try{var a=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(s){return i(s)}a.onupgradeneeded=i,a.onsuccess=function(){var r=a.result;try{var n=r.transaction([FS.DB_STORE_NAME],"readonly")}catch(s){return void i(s)}var o=n.objectStore(FS.DB_STORE_NAME),l=0,u=0,c=e.length;function d(){0==u?t():i()}e.forEach((function(e){var t=o.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),l++,l+u==c&&d()},t.onerror=function(){u++,l+u==c&&d()}})),n.onerror=i},a.onerror=i}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var i;if(-100===e)i=FS.cwd();else{var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(ERRNO_CODES.EBADF);i=r.path}t=PATH.join2(i,t)}return t},doStat:function(e,t,i){try{var r=e(t)}catch(a){if(a&&a.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(a.node)))return-ERRNO_CODES.ENOTDIR;throw a}return HEAP32[i>>2]=r.dev,HEAP32[i+4>>2]=0,HEAP32[i+8>>2]=r.ino,HEAP32[i+12>>2]=r.mode,HEAP32[i+16>>2]=r.nlink,HEAP32[i+20>>2]=r.uid,HEAP32[i+24>>2]=r.gid,HEAP32[i+28>>2]=r.rdev,HEAP32[i+32>>2]=0,HEAP32[i+36>>2]=r.size,HEAP32[i+40>>2]=4096,HEAP32[i+44>>2]=r.blocks,HEAP32[i+48>>2]=r.atime.getTime()/1e3|0,HEAP32[i+52>>2]=0,HEAP32[i+56>>2]=r.mtime.getTime()/1e3|0,HEAP32[i+60>>2]=0,HEAP32[i+64>>2]=r.ctime.getTime()/1e3|0,HEAP32[i+68>>2]=0,HEAP32[i+72>>2]=r.ino,0},doMsync:function(e,t,i,r){var a=new Uint8Array(HEAPU8.subarray(e,e+i));FS.msync(t,a,0,i,r)},doMkdir:function(e,t){return e=PATH.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,i){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod(e,t,i),0},doReadlink:function(e,t,i){if(i<=0)return-ERRNO_CODES.EINVAL;var r=FS.readlink(e);return r=r.slice(0,Math.max(0,i)),writeStringToMemory(r,t,!0),r.length},doAccess:function(e,t){if(-8&t)return-ERRNO_CODES.EINVAL;var i,r=FS.lookupPath(e,{follow:!0});i=r.node;var a="";return 4&t&&(a+="r"),2&t&&(a+="w"),1&t&&(a+="x"),a&&FS.nodePermissions(i,a)?-ERRNO_CODES.EACCES:0},doDup:function(e,t,i){var r=FS.getStream(i);return r&&FS.close(r),FS.open(e,t,0,i,i).fd},doReadv:function(e,t,i,r){for(var a=0,s=0;s<i;s++){var n=HEAP32[t+8*s>>2],o=HEAP32[t+(8*s+4)>>2],l=FS.read(e,HEAP8,n,o,r);if(l<0)return-1;if(a+=l,l<o)break}return a},doWritev:function(e,t,i,r){for(var a=0,s=0;s<i;s++){var n=HEAP32[t+8*s>>2],o=HEAP32[t+(8*s+4)>>2],l=FS.write(e,HEAP8,n,o,r);if(l<0)return-1;a+=l}return a},varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},getStreamFromFD:function(){var e=FS.getStream(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(SYSCALLS.get());if(!e)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return e},getSocketAddress:function(e){var t=SYSCALLS.get(),i=SYSCALLS.get();if(e&&0===t)return null;var r=__read_sockaddr(t,i);if(r.errno)throw new FS.ErrnoError(r.errno);return r.addr=DNS.lookup_addr(r.addr)||r.addr,r},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return assert(e>=0?0===t:-1===t),e},getZero:function(){assert(0===SYSCALLS.get())}};function ___syscall5(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStr(),r=SYSCALLS.get(),a=SYSCALLS.get(),s=FS.open(i,r,a);return s.fd}catch(n){return"undefined"!==typeof FS&&n instanceof FS.ErrnoError||abort(n),-n.errno}}function _emscripten_memcpy_big(e,t,i){return HEAPU8.set(HEAPU8.subarray(t,t+i),e),e}function ___syscall6(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD();return FS.close(i),0}catch(r){return"undefined"!==typeof FS&&r instanceof FS.ErrnoError||abort(r),-r.errno}}Module["_memcpy"]=_memcpy;var _cos=Math_cos;function _sbrk(e){var t=_sbrk;t.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),t.called=!0,assert(Runtime.dynamicAlloc),t.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var i=DYNAMICTOP;if(0!=e){var r=t.alloc(e);if(!r)return-1>>>0}return i}var _BItoD=!0;function ___syscall54(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get();switch(r){case 21505:return i.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return i.tty?0:-ERRNO_CODES.ENOTTY;case 21519:if(!i.tty)return-ERRNO_CODES.ENOTTY;var a=SYSCALLS.get();return HEAP32[a>>2]=0,0;case 21520:return i.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:a=SYSCALLS.get();return FS.ioctl(i,r,a);default:abort("bad ioctl syscall "+r)}}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view(e,t,i){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=r[t];function s(e){e>>=2;var t=HEAPU32,i=t[e],r=t[e+1];return new a(t["buffer"],r,i)}i=readLatin1String(i),registerType(e,{name:i,fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function _pthread_self(){return 0}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),a=SYSCALLS.get(),s=SYSCALLS.get(),n=SYSCALLS.get(),o=a;return assert(0===r),FS.llseek(i,o,n),HEAP32[s>>2]=i.position,i.getdents&&0===o&&0===n&&(i.getdents=null),0}catch(l){return"undefined"!==typeof FS&&l instanceof FS.ErrnoError||abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),a=SYSCALLS.get();return SYSCALLS.doWritev(i,r,a)}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}function ___syscall221(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get();switch(r){case 0:var a,s=SYSCALLS.get();return s<0?-ERRNO_CODES.EINVAL:(a=FS.open(i.path,i.flags,0,s),a.fd);case 1:case 2:return 0;case 3:return i.flags;case 4:s=SYSCALLS.get();return i.flags|=s,0;case 12:case 12:s=SYSCALLS.get();var n=0;return HEAP16[s+n>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(o){return"undefined"!==typeof FS&&o instanceof FS.ErrnoError||abort(o),-o.errno}}function ___syscall145(e,t){SYSCALLS.varargs=t;try{var i=SYSCALLS.getStreamFromFD(),r=SYSCALLS.get(),a=SYSCALLS.get();return SYSCALLS.doReadv(i,r,a)}catch(s){return"undefined"!==typeof FS&&s instanceof FS.ErrnoError||abort(s),-s.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module["BindingError"]=extendError(Error,"BindingError"),InternalError=Module["InternalError"]=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module["UnboundTypeError"]=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift((function(){Module["noFSInit"]||FS.init.initialized||FS.init()})),__ATMAIN__.push((function(){FS.ignorePermissions=!1})),__ATEXIT__.push((function(){FS.quit()})),Module["FS_createFolder"]=FS.createFolder,Module["FS_createPath"]=FS.createPath,Module["FS_createDataFile"]=FS.createDataFile,Module["FS_createPreloadedFile"]=FS.createPreloadedFile,Module["FS_createLazyFile"]=FS.createLazyFile,Module["FS_createLink"]=FS.createLink,Module["FS_createDevice"]=FS.createDevice,Module["FS_unlink"]=FS.unlink,__ATINIT__.unshift((function(){TTY.init()})),__ATEXIT__.push((function(){TTY.shutdown()})),ENVIRONMENT_IS_NODE){var fs=__webpack_require__("ab21"),NODEJS_PATH=__webpack_require__("7a44");NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(e,t,i,r){try{return Module["dynCall_iiii"](e,t,i,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_viiiii(e,t,i,r,a,s){try{Module["dynCall_viiiii"](e,t,i,r,a,s)}catch(n){if("number"!==typeof n&&"longjmp"!==n)throw n;asm["setThrew"](1,0)}}function invoke_dii(e,t,i){try{return Module["dynCall_dii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_vid(e,t,i){try{Module["dynCall_vid"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_di(e,t){try{return Module["dynCall_di"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_i(e){try{return Module["dynCall_i"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_vi(e,t){try{Module["dynCall_vi"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_vii(e,t,i){try{Module["dynCall_vii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_ii(e,t){try{return Module["dynCall_ii"](e,t)}catch(i){if("number"!==typeof i&&"longjmp"!==i)throw i;asm["setThrew"](1,0)}}function invoke_viii(e,t,i,r){try{Module["dynCall_viii"](e,t,i,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_v(e){try{Module["dynCall_v"](e)}catch(t){if("number"!==typeof t&&"longjmp"!==t)throw t;asm["setThrew"](1,0)}}function invoke_viid(e,t,i,r){try{Module["dynCall_viid"](e,t,i,r)}catch(a){if("number"!==typeof a&&"longjmp"!==a)throw a;asm["setThrew"](1,0)}}function invoke_iiiii(e,t,i,r,a){try{return Module["dynCall_iiiii"](e,t,i,r,a)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}function invoke_viiiiii(e,t,i,r,a,s,n){try{Module["dynCall_viiiiii"](e,t,i,r,a,s,n)}catch(o){if("number"!==typeof o&&"longjmp"!==o)throw o;asm["setThrew"](1,0)}}function invoke_iii(e,t,i){try{return Module["dynCall_iii"](e,t,i)}catch(r){if("number"!==typeof r&&"longjmp"!==r)throw r;asm["setThrew"](1,0)}}function invoke_viiii(e,t,i,r,a){try{Module["dynCall_viiii"](e,t,i,r,a)}catch(s){if("number"!==typeof s&&"longjmp"!==s)throw s;asm["setThrew"](1,0)}}Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort:abort,assert:assert,invoke_iiii:invoke_iiii,invoke_viiiii:invoke_viiiii,invoke_dii:invoke_dii,invoke_vid:invoke_vid,invoke_di:invoke_di,invoke_i:invoke_i,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_ii:invoke_ii,invoke_viii:invoke_viii,invoke_v:invoke_v,invoke_viid:invoke_viid,invoke_iiiii:invoke_iiiii,invoke_viiiiii:invoke_viiiiii,invoke_iii:invoke_iii,invoke_viiii:invoke_viiii,_fabs:_fabs,___syscall221:___syscall221,_sin:_sin,floatReadValueFromPointer:floatReadValueFromPointer,simpleReadValueFromPointer:simpleReadValueFromPointer,integerReadValueFromPointer:integerReadValueFromPointer,__embind_register_memory_view:__embind_register_memory_view,throwInternalError:throwInternalError,get_first_emval:get_first_emval,_abort:_abort,count_emval_handles:count_emval_handles,_pthread_cleanup_push:_pthread_cleanup_push,__embind_register_integer:__embind_register_integer,extendError:extendError,___assert_fail:___assert_fail,init_emval:init_emval,__embind_register_void:__embind_register_void,___cxa_find_matching_catch:___cxa_find_matching_catch,_ceilf:_ceilf,getShiftFromSize:getShiftFromSize,__embind_register_function:__embind_register_function,embind_init_charCodes:embind_init_charCodes,_emscripten_asm_const_33:_emscripten_asm_const_33,throwBindingError:throwBindingError,___setErrNo:___setErrNo,__emval_register:__emval_register,_sbrk:_sbrk,readLatin1String:readLatin1String,___cxa_allocate_exception:___cxa_allocate_exception,_emscripten_memcpy_big:_emscripten_memcpy_big,__embind_register_bool:__embind_register_bool,___resumeException:___resumeException,__ZSt18uncaught_exceptionv:__ZSt18uncaught_exceptionv,_sysconf:_sysconf,_embind_repr:_embind_repr,__embind_register_std_wstring:__embind_register_std_wstring,createNamedFunction:createNamedFunction,__embind_register_emval:__embind_register_emval,_cos:_cos,throwUnboundTypeError:throwUnboundTypeError,_pthread_self:_pthread_self,craftInvokerFunction:craftInvokerFunction,__emval_decref:__emval_decref,_sqrt:_sqrt,__embind_register_float:__embind_register_float,makeLegalFunctionName:makeLegalFunctionName,___syscall54:___syscall54,___unlock:___unlock,heap32VectorToArray:heap32VectorToArray,_pthread_cleanup_pop:_pthread_cleanup_pop,whenDependentTypesAreResolved:whenDependentTypesAreResolved,_exit:_exit,__embind_register_std_string:__embind_register_std_string,new_:new_,___cxa_atexit:___cxa_atexit,registerType:registerType,___cxa_throw:___cxa_throw,__exit:__exit,___lock:___lock,___syscall6:___syscall6,___syscall5:___syscall5,ensureOverloadTable:ensureOverloadTable,__embind_register_constant:__embind_register_constant,_time:_time,requireFunction:requireFunction,runDestructors:runDestructors,getTypeName:getTypeName,_atexit:_atexit,___syscall140:___syscall140,exposePublicSymbol:exposePublicSymbol,_emscripten_asm_const_5:_emscripten_asm_const_5,_emscripten_asm_const_4:_emscripten_asm_const_4,replacePublicSymbol:replacePublicSymbol,___syscall145:___syscall145,___syscall146:___syscall146,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,tempDoublePtr:tempDoublePtr,ABORT:ABORT,cttz_i8:cttz_i8,___dso_handle:___dso_handle};var asm=function(e,t,i){"use asm";var r=new e.Int8Array(i);var a=new e.Int16Array(i);var s=new e.Int32Array(i);var n=new e.Uint8Array(i);var o=new e.Uint16Array(i);var l=new e.Uint32Array(i);var u=new e.Float32Array(i);var c=new e.Float64Array(i);var d=t.STACKTOP|0;var f=t.STACK_MAX|0;var h=t.tempDoublePtr|0;var p=t.ABORT|0;var m=t.cttz_i8|0;var b=t.___dso_handle|0;var g=0;var v=0;var w=0;var k=0;var y=e.NaN,_=e.Infinity;var S=0,x=0,q=0,E=0,C=0.0,T=0,A=0,M=0,P=0.0;var R=0;var I=0;var O=0;var F=0;var $=0;var D=0;var N=0;var L=0;var z=0;var j=0;var H=e.Math.floor;var B=e.Math.abs;var U=e.Math.sqrt;var Q=e.Math.pow;var V=e.Math.cos;var Y=e.Math.sin;var W=e.Math.tan;var G=e.Math.acos;var K=e.Math.asin;var J=e.Math.atan;var X=e.Math.atan2;var Z=e.Math.exp;var ee=e.Math.log;var te=e.Math.ceil;var ie=e.Math.imul;var re=e.Math.min;var ae=e.Math.clz32;var se=t.abort;var ne=t.assert;var oe=t.invoke_iiii;var le=t.invoke_viiiii;var ue=t.invoke_dii;var ce=t.invoke_vid;var de=t.invoke_di;var fe=t.invoke_i;var he=t.invoke_vi;var pe=t.invoke_vii;var me=t.invoke_ii;var be=t.invoke_viii;var ge=t.invoke_v;var ve=t.invoke_viid;var we=t.invoke_iiiii;var ke=t.invoke_viiiiii;var ye=t.invoke_iii;var _e=t.invoke_viiii;var Se=t._fabs;var xe=t.___syscall221;var qe=t._sin;var Ee=t.floatReadValueFromPointer;var Ce=t.simpleReadValueFromPointer;var Te=t.integerReadValueFromPointer;var Ae=t.__embind_register_memory_view;var Me=t.throwInternalError;var Pe=t.get_first_emval;var Re=t._abort;var Ie=t.count_emval_handles;var Oe=t._pthread_cleanup_push;var Fe=t.__embind_register_integer;var $e=t.extendError;var De=t.___assert_fail;var Ne=t.init_emval;var Le=t.__embind_register_void;var ze=t.___cxa_find_matching_catch;var je=t._ceilf;var He=t.getShiftFromSize;var Be=t.__embind_register_function;var Ue=t.embind_init_charCodes;var Qe=t._emscripten_asm_const_33;var Ve=t.throwBindingError;var Ye=t.___setErrNo;var We=t.__emval_register;var Ge=t._sbrk;var Ke=t.readLatin1String;var Je=t.___cxa_allocate_exception;var Xe=t._emscripten_memcpy_big;var Ze=t.__embind_register_bool;var et=t.___resumeException;var tt=t.__ZSt18uncaught_exceptionv;var it=t._sysconf;var rt=t._embind_repr;var at=t.__embind_register_std_wstring;var st=t.createNamedFunction;var nt=t.__embind_register_emval;var ot=t._cos;var lt=t.throwUnboundTypeError;var ut=t._pthread_self;var ct=t.craftInvokerFunction;var dt=t.__emval_decref;var ft=t._sqrt;var ht=t.__embind_register_float;var pt=t.makeLegalFunctionName;var mt=t.___syscall54;var bt=t.___unlock;var gt=t.heap32VectorToArray;var vt=t._pthread_cleanup_pop;var wt=t.whenDependentTypesAreResolved;var kt=t._exit;var yt=t.__embind_register_std_string;var _t=t.new_;var St=t.___cxa_atexit;var xt=t.registerType;var qt=t.___cxa_throw;var Et=t.__exit;var Ct=t.___lock;var Tt=t.___syscall6;var At=t.___syscall5;var Mt=t.ensureOverloadTable;var Pt=t.__embind_register_constant;var Rt=t._time;var It=t.requireFunction;var Ot=t.runDestructors;var Ft=t.getTypeName;var $t=t._atexit;var Dt=t.___syscall140;var Nt=t.exposePublicSymbol;var Lt=t._emscripten_asm_const_5;var zt=t._emscripten_asm_const_4;var jt=t.replacePublicSymbol;var Ht=t.___syscall145;var Bt=t.___syscall146;var Ut=0.0;function Qt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=t+4|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<1)+2)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g>>0]|0|0)>(o|0)){a[e>>1]=0;r[u>>0]=0;f=b}else{r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}}while(0);v=v+1|0;i=g+2|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function Vt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){a[e>>1]=0;r[u>>0]=0;f=b}else{r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function Yt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g>>0]|0|0)>(o|0)){a[e>>1]=0;r[u>>0]=0;f=b}else{r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function Wt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u*3|0)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+3|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+6|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Gt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+10+(m<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Kt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<2)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+4|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+8|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Jt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Xt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+12+(m<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Zt(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<2)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(E|0)){a[e>>1]=0;r[u>>0]=0;o=g}else{r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}}while(0);w=w+1|0;h=v+4|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+8|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function ei(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+u|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w>>0]|0|0)>(o|0)){a[p>>1]=0;r[u>>0]=0;f=v}else{r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}}while(0);k=k+1|0;e=w+1|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+2|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function ti(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){a[p>>1]=0;r[u>>0]=0;f=v}else{r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}}while(0);k=k+1|0;e=w+2|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+4|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function ii(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w>>0]|0|0)>(o|0)){a[p>>1]=0;r[u>>0]=0;f=v}else{r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}}while(0);k=k+1|0;e=w+2|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+4|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function ri(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;f=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;u=(s[l+4>>2]|0)+f|0;q=1;e=e+f|0;p=p+(f<<1)|0;o=o+f|0;f=0;t:while(1){if(x){k=1;w=e;v=f;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){a[p>>1]=0;r[u>>0]=0;f=v}else{r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}q=q+1|0;if((q|0)>=(C|0)){m=f;A=52;break e}else{u=u+2|0;e=e+2|0;p=p+4|0;o=o+2|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(m|0)){e=e+1|0;h=h+4|0}else break}}o=l+8|0;u=f+-1|0;s[o>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[o>>2]|0))}if((m|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((s[o>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[o>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function ai(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t*3|0)+12|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t*6|0)+6)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+6|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function si(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){t=n[b>>0]|0;p=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function ni(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<3)+8)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+8|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function oi(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){p=n[b>>0]|0;do{if(((p&240)+24+(p<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function li(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){t=n[b>>0]|0;p=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function ui(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<3)+8)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}else{a[i>>1]=0;r[u>>0]=0;o=m}}while(0);g=g+1|0;h=b+8|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function ci(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=t+4|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<1)+2)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}else{a[e>>1]=0;r[u>>0]=0;f=b}}while(0);v=v+1|0;i=g+2|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function di(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g+1>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}else{a[e>>1]=0;r[u>>0]=0;f=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function fi(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}q=A+-1|0;if((i|0)>1){u=0;f=p;h=p+(q<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{f=f+(A<<1)|0;h=h+(A<<1)|0}}}h=l+1179664|0;f=A+1|0;_=0-A|0;k=1-A|0;y=~A;w=(t<<1)+8|0;e:do{if((E|0)>1){S=(q|0)>1;u=(s[l+4>>2]|0)+f|0;x=1;i=e+((t<<2)+4)|0;e=p+(f<<1)|0;f=0;t:while(1){if(S){v=1;g=i;b=f;while(1){do{if((n[g>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[e+(_<<1)>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}t=a[e+(k<<1)>>1]|0;p=t<<16>>16;f=a[e+(y<<1)>>1]|0;m=f<<16>>16;i=f<<16>>16>0;if(t<<16>>16<=0){if(i){a[e>>1]=f;f=m*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-3<<2)|0;if((s[i>>2]|0)<(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=a[e+-2>>1]|0;if(f<<16>>16>0){a[e>>1]=f;f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(v|0)){f=b;break}s[f>>2]=v;f=b;break}else{f=b+1|0;if((b|0)>32767)break t;a[e>>1]=f;s[l+1179664+(b<<2)>>2]=f<<16>>16;b=b*7|0;s[l+1310736+(b<<2)>>2]=1;s[l+1310736+(b+1<<2)>>2]=v;s[l+1310736+(b+2<<2)>>2]=x;s[l+1310736+(b+3<<2)>>2]=v;s[l+1310736+(b+4<<2)>>2]=v;s[l+1310736+(b+5<<2)>>2]=x;s[l+1310736+(b+6<<2)>>2]=x;break}}if(i){f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+(m+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=l+1310736+(f+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+x;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}i=a[e+-2>>1]|0;if(i<<16>>16<=0){a[e>>1]=t;f=p*7|0;i=l+1310736+(f+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=l+1310736+(f+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+v;i=l+1310736+(f+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+x;i=l+1310736+(f+-4<<2)|0;if((s[i>>2]|0)>(v|0))s[i>>2]=v;s[l+1310736+(f+-1<<2)>>2]=x;f=b;break}f=s[l+1179664+(p+-1<<2)>>2]|0;p=s[l+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((f|0)>(p|0)){a[e>>1]=p;if((b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(f|0))s[t>>2]=p;i=i+1|0;if((i|0)>=(b|0)){f=p;break}else t=t+4|0}}else f=p}else{a[e>>1]=f;if((f|0)<(p|0)&(b|0)>0){i=0;t=h;while(1){if((s[t>>2]|0)==(p|0))s[t>>2]=f;i=i+1|0;if((i|0)>=(b|0))break;else t=t+4|0}}}f=(f<<16>>16)*7|0;m=l+1310736+(f+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=l+1310736+(f+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+x;f=b}else{a[e>>1]=0;r[u>>0]=0;f=b}}while(0);v=v+1|0;i=g+4|0;e=e+2|0;u=u+1|0;if((v|0)>=(q|0))break;else{g=i;b=f}}}x=x+1|0;if((x|0)>=(E|0)){p=f;T=52;break e}else{u=u+2|0;i=i+w|0;e=e+4|0}}en(3,3904,C);u=-1}else{p=0;T=52}}while(0);if((T|0)==52){e=l+12|0;if((p|0)<1)f=1;else{i=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(i|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((i|0)<(p|0)){i=i+1|0;h=h+4|0}else break}}t=l+8|0;u=f+-1|0;s[t>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[t>>2]|0))}if((p|0)>0){e=0;do{h=(s[l+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(i<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(i+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(i+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(i+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(i+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(i+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(i+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;e=e+1|0}while((e|0)<(p|0))}if((s[t>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[t>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function hi(e){e=e|0;var t=0;t=d;d=d+e|0;d=d+15&-16;return t|0}function pi(){return d|0}function mi(e){e=e|0;d=e}function bi(e,t){e=e|0;t=t|0;d=e;f=t}function gi(e,t){e=e|0;t=t|0;if(!g){g=e;v=t}}function vi(e){e=e|0;r[h>>0]=r[e>>0];r[h+1>>0]=r[e+1>>0];r[h+2>>0]=r[e+2>>0];r[h+3>>0]=r[e+3>>0]}function wi(e){e=e|0;r[h>>0]=r[e>>0];r[h+1>>0]=r[e+1>>0];r[h+2>>0]=r[e+2>>0];r[h+3>>0]=r[e+3>>0];r[h+4>>0]=r[e+4>>0];r[h+5>>0]=r[e+5>>0];r[h+6>>0]=r[e+6>>0];r[h+7>>0]=r[e+7>>0]}function ki(e){e=e|0;R=e}function yi(){return R|0}function _i(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t*6|0)+6)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+6|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Si(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function xi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+8|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function qi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){t=n[r>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[r+1>>0]|0)&240)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ei(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ci(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(_|0)){a[p>>1]=0;l=h}else{l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}}while(0);m=m+1|0;r=r+8|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ti(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<1)+2)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){a[m>>1]=0;l=p}else{l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}}while(0);b=b+1|0;u=u+2|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ai(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<2)+4)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u+1>>0]|0|0)>(r|0)){a[m>>1]=0;l=p}else{l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}}while(0);b=b+1|0;u=u+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Mi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<2)+4)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){a[m>>1]=0;l=p}else{l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}}while(0);b=b+1|0;u=u+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Pi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l*3|0)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+3|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+6|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Ri(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){h=n[r>>0]|0;p=n[r+1>>0]|0;do{if(((h&248)+10+(h<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Ii(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+4|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+8|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Oi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){p=n[r>>0]|0;do{if(((p&240)+24+(p<<4&240)+((n[r+1>>0]|0)&240)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Fi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){h=n[r>>0]|0;p=n[r+1>>0]|0;do{if(((h&248)+12+(h<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function $i(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(x|0)){a[b>>1]=0;l=m}else{l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}}while(0);g=g+1|0;r=r+4|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+8|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Di(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+l|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){a[g>>1]=0;l=b}else{l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[g>>1]=l;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}else{a[g>>1]=p;if((p|0)<(l|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;u=u+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+2|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Ni(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+(l<<1)|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u+1>>0]|0|0)>(r|0)){a[g>>1]=0;l=b}else{l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=a[g+-2>>1]|0;if(e<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;u=u+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+4|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Li(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+(l<<1)|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){a[g>>1]=0;l=b}else{l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[g>>1]=l;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}else{a[g>>1]=p;if((p|0)<(l|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;u=u+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+4|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function zi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+l|0;e=h+(l<<1)|0;h=r+l|0;l=0;t:while(1){if(_){v=1;g=u;b=l;while(1){do{if((n[g>>0]|0)>(n[h>>0]|0)){a[e>>1]=0;l=b}else{l=a[e+(y<<1)>>1]|0;if(l<<16>>16>0){a[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}r=a[e+(w<<1)>>1]|0;p=r<<16>>16;l=a[e+(k<<1)>>1]|0;m=l<<16>>16;u=l<<16>>16>0;if(r<<16>>16<=0){if(u){a[e>>1]=l;l=m*7|0;u=o+1310736+(l+-7<<2)|0;s[u>>2]=(s[u>>2]|0)+1;u=o+1310736+(l+-6<<2)|0;s[u>>2]=(s[u>>2]|0)+v;u=o+1310736+(l+-5<<2)|0;s[u>>2]=(s[u>>2]|0)+S;u=o+1310736+(l+-3<<2)|0;if((s[u>>2]|0)<(v|0))s[u>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[e+-2>>1]|0;if(l<<16>>16>0){a[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[e>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(u){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[e>>1]=p;if((b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=p;u=u+1|0;if((u|0)>=(b|0)){l=p;break}else r=r+4|0}}else l=p}else{a[e>>1]=l;if((l|0)<(p|0)&(b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(p|0))s[r>>2]=l;u=u+1|0;if((u|0)>=(b|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[e+-2>>1]|0;if(l<<16>>16<=0){a[e>>1]=r;l=p*7|0;u=o+1310736+(l+-7<<2)|0;s[u>>2]=(s[u>>2]|0)+1;u=o+1310736+(l+-6<<2)|0;s[u>>2]=(s[u>>2]|0)+v;u=o+1310736+(l+-5<<2)|0;s[u>>2]=(s[u>>2]|0)+S;u=o+1310736+(l+-4<<2)|0;if((s[u>>2]|0)>(v|0))s[u>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[e>>1]=l;if((b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(p|0))s[r>>2]=l;u=u+1|0;if((u|0)>=(b|0))break;else r=r+4|0}}}else{a[e>>1]=p;if((p|0)<(l|0)&(b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=p;u=u+1|0;if((u|0)>=(b|0)){l=p;break}else r=r+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}}while(0);v=v+1|0;u=g+1|0;h=h+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=u;b=l}}}S=S+1|0;if((S|0)>=(q|0)){p=l;C=52;break e}else{u=u+2|0;e=e+4|0;h=h+2|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((p|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(p|0)){e=e+1|0;f=f+4|0}else break}}r=o+8|0;l=u+-1|0;s[r>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[r>>2]|0))}if((p|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(p|0))}if((s[r>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[r>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function ji(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t*3|0)+12|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t*6|0)+6)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+6|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Hi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+10+(e<<5&224)+(t>>>3&28)+(t<<3&248)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Bi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+8|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ui(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){t=n[r>>0]|0;do{if(((t&240)+24+(t<<4&240)+((n[r+1>>0]|0)&240)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Qi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<1)+8|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<2)+4)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){e=n[r>>0]|0;t=n[r+1>>0]|0;do{if(((e&248)+12+(e<<5&224)+(t>>>3&24)+(t<<2&248)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+4|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Vi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}_=r*3|0;S=C+-1|0;if((i|0)>1){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{r=r+(C<<1)|0;u=u+(C<<1)|0}}}u=o+1179664|0;w=0-C|0;g=1-C|0;v=~C;b=(t<<2)+16|0;e:do{if((x|0)>1){k=(S|0)>1;y=1;r=e+((t<<3)+8)|0;f=h+(C+1<<1)|0;l=0;t:while(1){if(k){m=1;p=f;h=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(_|0)){l=a[p+(w<<1)>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}i=a[p+(g<<1)>>1]|0;e=i<<16>>16;l=a[p+(v<<1)>>1]|0;t=l<<16>>16;f=l<<16>>16>0;if(i<<16>>16<=0){if(f){a[p>>1]=l;l=t*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=a[p+-2>>1]|0;if(l<<16>>16>0){a[p>>1]=l;l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(m|0)){l=h;break}s[l>>2]=m;l=h;break}else{l=h+1|0;if((h|0)>32767)break t;a[p>>1]=l;s[o+1179664+(h<<2)>>2]=l<<16>>16;h=h*7|0;s[o+1310736+(h<<2)>>2]=1;s[o+1310736+(h+1<<2)>>2]=m;s[o+1310736+(h+2<<2)>>2]=y;s[o+1310736+(h+3<<2)>>2]=m;s[o+1310736+(h+4<<2)>>2]=m;s[o+1310736+(h+5<<2)>>2]=y;s[o+1310736+(h+6<<2)>>2]=y;break}}if(f){l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+(t+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;t=o+1310736+(l+-5<<2)|0;s[t>>2]=(s[t>>2]|0)+y;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}f=a[p+-2>>1]|0;if(f<<16>>16<=0){a[p>>1]=i;l=e*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+m;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+y;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(m|0))s[f>>2]=m;s[o+1310736+(l+-1<<2)>>2]=y;l=h;break}l=s[o+1179664+(e+-1<<2)>>2]|0;e=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(e|0)){a[p>>1]=e;if((h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(l|0))s[i>>2]=e;f=f+1|0;if((f|0)>=(h|0)){l=e;break}else i=i+4|0}}else l=e}else{a[p>>1]=l;if((l|0)<(e|0)&(h|0)>0){f=0;i=u;while(1){if((s[i>>2]|0)==(e|0))s[i>>2]=l;f=f+1|0;if((f|0)>=(h|0))break;else i=i+4|0}}}l=(l<<16>>16)*7|0;t=o+1310736+(l+-7<<2)|0;s[t>>2]=(s[t>>2]|0)+1;t=o+1310736+(l+-6<<2)|0;s[t>>2]=(s[t>>2]|0)+m;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+y;l=h}else{a[p>>1]=0;l=h}}while(0);m=m+1|0;r=r+8|0;f=p+2|0;if((m|0)>=(S|0))break;else{p=f;h=l}}}y=y+1|0;if((y|0)>=(x|0)){t=l;E=52;break e}else{r=r+b|0;f=f+4|0}}en(3,3904,q);l=-1}else{t=0;E=52}}while(0);if((E|0)==52){i=o+12|0;if((t|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(t|0)){f=f+1|0;u=u+4|0}else break}}e=o+8|0;l=r+-1|0;s[e>>2]=l;if(l){Vu(i|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{u=(s[o+1179664+(i<<2)>>2]|0)+-1|0;f=i*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[e>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Yi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=t+4|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<1)+2)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}else{a[m>>1]=0;l=p}}while(0);b=b+1|0;u=u+2|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Wi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<2)+4)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u+1>>0]|0|0)>(r|0)){l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}else{a[m>>1]=0;l=p}}while(0);b=b+1|0;u=u+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Gi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0;A=d;d=d+16|0;q=A;C=(t|0)/2|0;T=(i|0)/2|0;h=s[o>>2]|0;x=T+-1|0;if((t|0)>1){l=0;u=h;f=h+((ie(x,C)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(C|0))break;else{u=u+2|0;f=f+2|0}}}S=C+-1|0;if((i|0)>1){l=0;u=h;f=h+(S<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(T|0))break;else{u=u+(C<<1)|0;f=f+(C<<1)|0}}}f=o+1179664|0;k=0-C|0;v=1-C|0;w=~C;g=(t<<1)+8|0;e:do{if((x|0)>1){y=(S|0)>1;_=1;u=e+((t<<2)+4)|0;i=h+(C+1<<1)|0;l=0;t:while(1){if(y){b=1;m=i;p=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){l=a[m+(k<<1)>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}e=a[m+(v<<1)>>1]|0;t=e<<16>>16;l=a[m+(w<<1)>>1]|0;h=l<<16>>16;i=l<<16>>16>0;if(e<<16>>16<=0){if(i){a[m>>1]=l;l=h*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-3<<2)|0;if((s[i>>2]|0)<(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=a[m+-2>>1]|0;if(l<<16>>16>0){a[m>>1]=l;l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(b|0)){l=p;break}s[l>>2]=b;l=p;break}else{l=p+1|0;if((p|0)>32767)break t;a[m>>1]=l;s[o+1179664+(p<<2)>>2]=l<<16>>16;p=p*7|0;s[o+1310736+(p<<2)>>2]=1;s[o+1310736+(p+1<<2)>>2]=b;s[o+1310736+(p+2<<2)>>2]=_;s[o+1310736+(p+3<<2)>>2]=b;s[o+1310736+(p+4<<2)>>2]=b;s[o+1310736+(p+5<<2)>>2]=_;s[o+1310736+(p+6<<2)>>2]=_;break}}if(i){l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+(h+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;h=o+1310736+(l+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}i=a[m+-2>>1]|0;if(i<<16>>16<=0){a[m>>1]=e;l=t*7|0;i=o+1310736+(l+-7<<2)|0;s[i>>2]=(s[i>>2]|0)+1;i=o+1310736+(l+-6<<2)|0;s[i>>2]=(s[i>>2]|0)+b;i=o+1310736+(l+-5<<2)|0;s[i>>2]=(s[i>>2]|0)+_;i=o+1310736+(l+-4<<2)|0;if((s[i>>2]|0)>(b|0))s[i>>2]=b;s[o+1310736+(l+-1<<2)>>2]=_;l=p;break}l=s[o+1179664+(t+-1<<2)>>2]|0;t=s[o+1179664+((i<<16>>16)+-1<<2)>>2]|0;if((l|0)>(t|0)){a[m>>1]=t;if((p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=t;i=i+1|0;if((i|0)>=(p|0)){l=t;break}else e=e+4|0}}else l=t}else{a[m>>1]=l;if((l|0)<(t|0)&(p|0)>0){i=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=l;i=i+1|0;if((i|0)>=(p|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;h=o+1310736+(l+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=o+1310736+(l+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+b;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=p}else{a[m>>1]=0;l=p}}while(0);b=b+1|0;u=u+4|0;i=m+2|0;if((b|0)>=(S|0))break;else{m=i;p=l}}}_=_+1|0;if((_|0)>=(x|0)){h=l;E=52;break e}else{u=u+g|0;i=i+4|0}}en(3,3904,q);l=-1}else{h=0;E=52}}while(0);if((E|0)==52){e=o+12|0;if((h|0)<1)u=1;else{i=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(i|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((i|0)<(h|0)){i=i+1|0;f=f+4|0}else break}}t=o+8|0;l=u+-1|0;s[t>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{E=l<<2;s[o+131084+(E<<2)>>2]=C;s[o+131084+((E|1)<<2)>>2]=0;s[o+131084+((E|2)<<2)>>2]=T;s[o+131084+((E|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[t>>2]|0))}if((h|0)>0){e=0;do{f=(s[o+1179664+(e<<2)>>2]|0)+-1|0;i=e*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(i<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(i+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(i+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(i+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(i+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(i+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(i+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;e=e+1|0}while((e|0)<(h|0))}if((s[t>>2]|0)>0){l=0;do{C=o+12+(l<<2)|0;T=l<<1;E=o+655376+(T<<3)|0;c[E>>3]=+c[E>>3]/+(s[C>>2]|0);T=o+655376+((T|1)<<3)|0;c[T>>3]=+c[T>>3]/+(s[C>>2]|0);l=l+1|0}while((l|0)<(s[t>>2]|0));l=0}else l=0}else l=0}d=A;return l|0}function Ki(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l*3|0)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+3|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+6|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Ji(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){h=n[r>>0]|0;p=n[r+1>>0]|0;do{if(((h&248)+10+(h<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Xi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+1>>0]|0)+(n[r>>0]|0)+(n[r+2>>0]|0)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+4|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+8|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function Zi(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){p=n[r>>0]|0;do{if(((p&240)+24+(p<<4&240)+((n[r+1>>0]|0)&240)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function er(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<1)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){h=n[r>>0]|0;p=n[r+1>>0]|0;do{if(((h&248)+12+(h<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+2|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+4|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function tr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=r*3|0;S=t+-1|0;if((i|0)>0){l=0;r=h;u=h+(S<<1)|0;while(1){a[u>>1]=0;a[r>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{r=r+(t<<1)|0;u=u+(t<<1)|0}}}u=o+1179664|0;l=t+1|0;k=0-t|0;v=1-t|0;w=~t;e:do{if((q|0)>1){y=(S|0)>1;_=1;r=e+(l<<2)|0;f=h+(l<<1)|0;l=0;t:while(1){if(y){g=1;b=f;m=l;while(1){do{if(((n[r+2>>0]|0)+(n[r+1>>0]|0)+(n[r+3>>0]|0)|0)>(x|0)){l=a[b+(k<<1)>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}e=a[b+(v<<1)>>1]|0;h=e<<16>>16;l=a[b+(w<<1)>>1]|0;p=l<<16>>16;f=l<<16>>16>0;if(e<<16>>16<=0){if(f){a[b>>1]=l;l=p*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-3<<2)|0;if((s[f>>2]|0)<(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=a[b+-2>>1]|0;if(l<<16>>16>0){a[b>>1]=l;l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(g|0)){l=m;break}s[l>>2]=g;l=m;break}else{l=m+1|0;if((m|0)>32767)break t;a[b>>1]=l;s[o+1179664+(m<<2)>>2]=l<<16>>16;m=m*7|0;s[o+1310736+(m<<2)>>2]=1;s[o+1310736+(m+1<<2)>>2]=g;s[o+1310736+(m+2<<2)>>2]=_;s[o+1310736+(m+3<<2)>>2]=g;s[o+1310736+(m+4<<2)>>2]=g;s[o+1310736+(m+5<<2)>>2]=_;s[o+1310736+(m+6<<2)>>2]=_;break}}if(f){l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+(p+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=o+1310736+(l+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+_;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}f=a[b+-2>>1]|0;if(f<<16>>16<=0){a[b>>1]=e;l=h*7|0;f=o+1310736+(l+-7<<2)|0;s[f>>2]=(s[f>>2]|0)+1;f=o+1310736+(l+-6<<2)|0;s[f>>2]=(s[f>>2]|0)+g;f=o+1310736+(l+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+_;f=o+1310736+(l+-4<<2)|0;if((s[f>>2]|0)>(g|0))s[f>>2]=g;s[o+1310736+(l+-1<<2)>>2]=_;l=m;break}l=s[o+1179664+(h+-1<<2)>>2]|0;h=s[o+1179664+((f<<16>>16)+-1<<2)>>2]|0;if((l|0)>(h|0)){a[b>>1]=h;if((m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(l|0))s[e>>2]=h;f=f+1|0;if((f|0)>=(m|0)){l=h;break}else e=e+4|0}}else l=h}else{a[b>>1]=l;if((l|0)<(h|0)&(m|0)>0){f=0;e=u;while(1){if((s[e>>2]|0)==(h|0))s[e>>2]=l;f=f+1|0;if((f|0)>=(m|0))break;else e=e+4|0}}}l=(l<<16>>16)*7|0;p=o+1310736+(l+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=o+1310736+(l+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+_;l=m}else{a[b>>1]=0;l=m}}while(0);g=g+1|0;r=r+4|0;f=b+2|0;if((g|0)>=(S|0))break;else{b=f;m=l}}}_=_+1|0;if((_|0)>=(q|0)){p=l;C=52;break e}else{r=r+8|0;f=f+4|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){e=o+12|0;if((p|0)<1)r=1;else{f=1;r=1;while(1){l=s[u>>2]|0;if((l|0)==(f|0)){l=r;r=r+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[u>>2]=l;if((f|0)<(p|0)){f=f+1|0;u=u+4|0}else break}}h=o+8|0;l=r+-1|0;s[h>>2]=l;if(l){Vu(e|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((r|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[h>>2]|0))}if((p|0)>0){e=0;do{u=(s[o+1179664+(e<<2)>>2]|0)+-1|0;f=e*7|0;l=o+12+(u<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(f<<2)>>2]|0);l=u<<1;r=o+655376+(l<<3)|0;c[r>>3]=+c[r>>3]+ +(s[o+1310736+(f+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(f+2<<2)>>2]|0);u=u<<2;l=o+131084+(u<<2)|0;r=s[o+1310736+(f+3<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;l=o+131084+((u|1)<<2)|0;r=s[o+1310736+(f+4<<2)>>2]|0;if((s[l>>2]|0)<(r|0))s[l>>2]=r;l=o+131084+((u|2)<<2)|0;r=s[o+1310736+(f+5<<2)>>2]|0;if((s[l>>2]|0)>(r|0))s[l>>2]=r;r=o+131084+((u|3)<<2)|0;l=s[o+1310736+(f+6<<2)>>2]|0;if((s[r>>2]|0)<(l|0))s[r>>2]=l;e=e+1|0}while((e|0)<(p|0))}if((s[h>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[h>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function ir(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+l|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[g>>1]=l;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}else{a[g>>1]=p;if((p|0)<(l|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{a[g>>1]=0;l=b}}while(0);v=v+1|0;u=u+1|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+2|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function rr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+(l<<1)|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u+1>>0]|0|0)>(r|0)){l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}e=a[g+-2>>1]|0;if(e<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{a[g>>1]=0;l=b}}while(0);v=v+1|0;u=u+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+4|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function ar(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+(l<<1)|0;e=h+(l<<1)|0;l=0;t:while(1){if(_){v=1;g=e;b=l;while(1){do{if((n[u>>0]|0|0)>(r|0)){l=a[g+(y<<1)>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}h=a[g+(w<<1)>>1]|0;p=h<<16>>16;l=a[g+(k<<1)>>1]|0;m=l<<16>>16;e=l<<16>>16>0;if(h<<16>>16<=0){if(e){a[g>>1]=l;l=m*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-3<<2)|0;if((s[e>>2]|0)<(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16>0){a[g>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[g>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(e){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[g>>1]=p;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}else{a[g>>1]=l;if((l|0)<(p|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[g+-2>>1]|0;if(l<<16>>16<=0){a[g>>1]=h;l=p*7|0;e=o+1310736+(l+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=o+1310736+(l+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+v;e=o+1310736+(l+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+S;e=o+1310736+(l+-4<<2)|0;if((s[e>>2]|0)>(v|0))s[e>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[g>>1]=l;if((b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(p|0))s[h>>2]=l;e=e+1|0;if((e|0)>=(b|0))break;else h=h+4|0}}}else{a[g>>1]=p;if((p|0)<(l|0)&(b|0)>0){e=0;h=f;while(1){if((s[h>>2]|0)==(l|0))s[h>>2]=p;e=e+1|0;if((e|0)>=(b|0)){l=p;break}else h=h+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{a[g>>1]=0;l=b}}while(0);v=v+1|0;u=u+2|0;e=g+2|0;if((v|0)>=(x|0))break;else{g=e;b=l}}}S=S+1|0;if((S|0)>=(q|0)){m=l;C=52;break e}else{u=u+4|0;e=e+4|0}}en(3,3904,E);l=-1}else{m=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((m|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(m|0)){e=e+1|0;f=f+4|0}else break}}p=o+8|0;l=u+-1|0;s[p>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[p>>2]|0))}if((m|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(m|0))}if((s[p>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[p>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function sr(e,t,i,r,o){e=e|0;t=t|0;i=i|0;r=r|0;o=o|0;var l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0;T=d;d=d+16|0;E=T;h=s[o>>2]|0;q=i+-1|0;if((t|0)>0){l=0;u=h;f=h+((ie(q,t)|0)<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(t|0))break;else{u=u+2|0;f=f+2|0}}}x=t+-1|0;if((i|0)>0){l=0;u=h;f=h+(x<<1)|0;while(1){a[f>>1]=0;a[u>>1]=0;l=l+1|0;if((l|0)>=(i|0))break;else{u=u+(t<<1)|0;f=f+(t<<1)|0}}}f=o+1179664|0;l=t+1|0;y=0-t|0;w=1-t|0;k=~t;e:do{if((q|0)>1){_=(x|0)>1;S=1;u=e+l|0;e=h+(l<<1)|0;h=r+l|0;l=0;t:while(1){if(_){v=1;g=u;b=l;while(1){do{if((n[g>>0]|0)>(n[h>>0]|0)){l=a[e+(y<<1)>>1]|0;if(l<<16>>16>0){a[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}r=a[e+(w<<1)>>1]|0;p=r<<16>>16;l=a[e+(k<<1)>>1]|0;m=l<<16>>16;u=l<<16>>16>0;if(r<<16>>16<=0){if(u){a[e>>1]=l;l=m*7|0;u=o+1310736+(l+-7<<2)|0;s[u>>2]=(s[u>>2]|0)+1;u=o+1310736+(l+-6<<2)|0;s[u>>2]=(s[u>>2]|0)+v;u=o+1310736+(l+-5<<2)|0;s[u>>2]=(s[u>>2]|0)+S;u=o+1310736+(l+-3<<2)|0;if((s[u>>2]|0)<(v|0))s[u>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[e+-2>>1]|0;if(l<<16>>16>0){a[e>>1]=l;l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;l=o+1310736+(l+-3<<2)|0;if((s[l>>2]|0)>=(v|0)){l=b;break}s[l>>2]=v;l=b;break}else{l=b+1|0;if((b|0)>32767)break t;a[e>>1]=l;s[o+1179664+(b<<2)>>2]=l<<16>>16;b=b*7|0;s[o+1310736+(b<<2)>>2]=1;s[o+1310736+(b+1<<2)>>2]=v;s[o+1310736+(b+2<<2)>>2]=S;s[o+1310736+(b+3<<2)>>2]=v;s[o+1310736+(b+4<<2)>>2]=v;s[o+1310736+(b+5<<2)>>2]=S;s[o+1310736+(b+6<<2)>>2]=S;break}}if(u){l=s[o+1179664+(p+-1<<2)>>2]|0;p=s[o+1179664+(m+-1<<2)>>2]|0;if((l|0)>(p|0)){a[e>>1]=p;if((b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=p;u=u+1|0;if((u|0)>=(b|0)){l=p;break}else r=r+4|0}}else l=p}else{a[e>>1]=l;if((l|0)<(p|0)&(b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(p|0))s[r>>2]=l;u=u+1|0;if((u|0)>=(b|0))break;else r=r+4|0}}}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;m=o+1310736+(l+-5<<2)|0;s[m>>2]=(s[m>>2]|0)+S;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}l=a[e+-2>>1]|0;if(l<<16>>16<=0){a[e>>1]=r;l=p*7|0;u=o+1310736+(l+-7<<2)|0;s[u>>2]=(s[u>>2]|0)+1;u=o+1310736+(l+-6<<2)|0;s[u>>2]=(s[u>>2]|0)+v;u=o+1310736+(l+-5<<2)|0;s[u>>2]=(s[u>>2]|0)+S;u=o+1310736+(l+-4<<2)|0;if((s[u>>2]|0)>(v|0))s[u>>2]=v;s[o+1310736+(l+-1<<2)>>2]=S;l=b;break}p=s[o+1179664+(p+-1<<2)>>2]|0;l=s[o+1179664+((l<<16>>16)+-1<<2)>>2]|0;if((p|0)>(l|0)){a[e>>1]=l;if((b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(p|0))s[r>>2]=l;u=u+1|0;if((u|0)>=(b|0))break;else r=r+4|0}}}else{a[e>>1]=p;if((p|0)<(l|0)&(b|0)>0){u=0;r=f;while(1){if((s[r>>2]|0)==(l|0))s[r>>2]=p;u=u+1|0;if((u|0)>=(b|0)){l=p;break}else r=r+4|0}}else l=p}l=(l<<16>>16)*7|0;m=o+1310736+(l+-7<<2)|0;s[m>>2]=(s[m>>2]|0)+1;m=o+1310736+(l+-6<<2)|0;s[m>>2]=(s[m>>2]|0)+v;l=o+1310736+(l+-5<<2)|0;s[l>>2]=(s[l>>2]|0)+S;l=b}else{a[e>>1]=0;l=b}}while(0);v=v+1|0;u=g+1|0;h=h+1|0;e=e+2|0;if((v|0)>=(x|0))break;else{g=u;b=l}}}S=S+1|0;if((S|0)>=(q|0)){p=l;C=52;break e}else{u=u+2|0;e=e+4|0;h=h+2|0}}en(3,3904,E);l=-1}else{p=0;C=52}}while(0);if((C|0)==52){h=o+12|0;if((p|0)<1)u=1;else{e=1;u=1;while(1){l=s[f>>2]|0;if((l|0)==(e|0)){l=u;u=u+1|0}else l=s[o+1179664+(l+-1<<2)>>2]|0;s[f>>2]=l;if((e|0)<(p|0)){e=e+1|0;f=f+4|0}else break}}r=o+8|0;l=u+-1|0;s[r>>2]=l;if(l){Vu(h|0,0,l<<2|0)|0;Vu(o+655376|0,0,l<<4|0)|0;if((u|0)>1){l=0;do{C=l<<2;s[o+131084+(C<<2)>>2]=t;s[o+131084+((C|1)<<2)>>2]=0;s[o+131084+((C|2)<<2)>>2]=i;s[o+131084+((C|3)<<2)>>2]=0;l=l+1|0}while((l|0)<(s[r>>2]|0))}if((p|0)>0){h=0;do{f=(s[o+1179664+(h<<2)>>2]|0)+-1|0;e=h*7|0;l=o+12+(f<<2)|0;s[l>>2]=(s[l>>2]|0)+(s[o+1310736+(e<<2)>>2]|0);l=f<<1;u=o+655376+(l<<3)|0;c[u>>3]=+c[u>>3]+ +(s[o+1310736+(e+1<<2)>>2]|0);l=o+655376+((l|1)<<3)|0;c[l>>3]=+c[l>>3]+ +(s[o+1310736+(e+2<<2)>>2]|0);f=f<<2;l=o+131084+(f<<2)|0;u=s[o+1310736+(e+3<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;l=o+131084+((f|1)<<2)|0;u=s[o+1310736+(e+4<<2)>>2]|0;if((s[l>>2]|0)<(u|0))s[l>>2]=u;l=o+131084+((f|2)<<2)|0;u=s[o+1310736+(e+5<<2)>>2]|0;if((s[l>>2]|0)>(u|0))s[l>>2]=u;u=o+131084+((f|3)<<2)|0;l=s[o+1310736+(e+6<<2)>>2]|0;if((s[u>>2]|0)<(l|0))s[u>>2]=l;h=h+1|0}while((h|0)<(p|0))}if((s[r>>2]|0)>0){l=0;do{t=o+12+(l<<2)|0;i=l<<1;C=o+655376+(i<<3)|0;c[C>>3]=+c[C>>3]/+(s[t>>2]|0);i=o+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);l=l+1|0}while((l|0)<(s[r>>2]|0));l=0}else l=0}else l=0}d=T;return l|0}function nr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t*3|0)+12|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t*6|0)+6)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+6|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function or(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){t=n[b>>0]|0;p=n[b+1>>0]|0;do{if(((t&248)+10+(t<<5&224)+(p>>>3&28)+(p<<3&248)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function lr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<3)+8)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+1>>0]|0)+(n[b>>0]|0)+(n[b+2>>0]|0)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+8|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function ur(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){p=n[b>>0]|0;do{if(((p&240)+24+(p<<4&240)+((n[b+1>>0]|0)&240)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function cr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<1)+8|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<2)+4)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){t=n[b>>0]|0;p=n[b+1>>0]|0;do{if(((t&248)+12+(t<<5&224)+(p>>>3&24)+(p<<2&248)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+4|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function dr(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;C=P;A=(t|0)/2|0;M=(i|0)/2|0;p=s[l>>2]|0;E=M+-1|0;if((t|0)>1){u=0;f=p;h=p+((ie(E,A)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(A|0))break;else{f=f+2|0;h=h+2|0}}}x=o*3|0;q=A+-1|0;if((i|0)>1){u=0;o=p;f=p+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(M|0))break;else{o=o+(A<<1)|0;f=f+(A<<1)|0}}}f=l+1179664|0;o=A+1|0;y=0-A|0;w=1-A|0;k=~A;v=(t<<2)+16|0;e:do{if((E|0)>1){_=(q|0)>1;u=(s[l+4>>2]|0)+o|0;S=1;h=e+((t<<3)+8)|0;i=p+(o<<1)|0;o=0;t:while(1){if(_){g=1;b=h;m=o;while(1){do{if(((n[b+2>>0]|0)+(n[b+1>>0]|0)+(n[b+3>>0]|0)|0)>(x|0)){a[i>>1]=0;r[u>>0]=0;o=m}else{r[u>>0]=-1;o=a[i+(y<<1)>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}e=a[i+(w<<1)>>1]|0;t=e<<16>>16;o=a[i+(k<<1)>>1]|0;p=o<<16>>16;h=o<<16>>16>0;if(e<<16>>16<=0){if(h){a[i>>1]=o;o=p*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=a[i+-2>>1]|0;if(o<<16>>16>0){a[i>>1]=o;o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(g|0)){o=m;break}s[o>>2]=g;o=m;break}else{o=m+1|0;if((m|0)>32767)break t;a[i>>1]=o;s[l+1179664+(m<<2)>>2]=o<<16>>16;m=m*7|0;s[l+1310736+(m<<2)>>2]=1;s[l+1310736+(m+1<<2)>>2]=g;s[l+1310736+(m+2<<2)>>2]=S;s[l+1310736+(m+3<<2)>>2]=g;s[l+1310736+(m+4<<2)>>2]=g;s[l+1310736+(m+5<<2)>>2]=S;s[l+1310736+(m+6<<2)>>2]=S;break}}if(h){o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+(p+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;p=l+1310736+(o+-5<<2)|0;s[p>>2]=(s[p>>2]|0)+S;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}h=a[i+-2>>1]|0;if(h<<16>>16<=0){a[i>>1]=e;o=t*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+g;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+S;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(g|0))s[h>>2]=g;s[l+1310736+(o+-1<<2)>>2]=S;o=m;break}o=s[l+1179664+(t+-1<<2)>>2]|0;t=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(t|0)){a[i>>1]=t;if((m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(o|0))s[e>>2]=t;h=h+1|0;if((h|0)>=(m|0)){o=t;break}else e=e+4|0}}else o=t}else{a[i>>1]=o;if((o|0)<(t|0)&(m|0)>0){h=0;e=f;while(1){if((s[e>>2]|0)==(t|0))s[e>>2]=o;h=h+1|0;if((h|0)>=(m|0))break;else e=e+4|0}}}o=(o<<16>>16)*7|0;p=l+1310736+(o+-7<<2)|0;s[p>>2]=(s[p>>2]|0)+1;p=l+1310736+(o+-6<<2)|0;s[p>>2]=(s[p>>2]|0)+g;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+S;o=m}}while(0);g=g+1|0;h=b+8|0;i=i+2|0;u=u+1|0;if((g|0)>=(q|0))break;else{b=h;m=o}}}S=S+1|0;if((S|0)>=(E|0)){t=o;T=52;break e}else{u=u+2|0;h=h+v|0;i=i+4|0}}en(3,3904,C);u=-1}else{t=0;T=52}}while(0);if((T|0)==52){i=l+12|0;if((t|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(t|0)){h=h+1|0;f=f+4|0}else break}}e=l+8|0;u=o+-1|0;s[e>>2]=u;if(u){Vu(i|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{T=u<<2;s[l+131084+(T<<2)>>2]=A;s[l+131084+((T|1)<<2)>>2]=0;s[l+131084+((T|2)<<2)>>2]=M;s[l+131084+((T|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[e>>2]|0))}if((t|0)>0){i=0;do{f=(s[l+1179664+(i<<2)>>2]|0)+-1|0;h=i*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;i=i+1|0}while((i|0)<(t|0))}if((s[e>>2]|0)>0){u=0;do{A=l+12+(u<<2)|0;M=u<<1;T=l+655376+(M<<3)|0;c[T>>3]=+c[T>>3]/+(s[A>>2]|0);M=l+655376+((M|1)<<3)|0;c[M>>3]=+c[M>>3]/+(s[A>>2]|0);u=u+1|0}while((u|0)<(s[e>>2]|0));u=0}else u=0}else u=0}d=P;return u|0}function fr(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;if((t|0)!=1){if(t+-1&t)t=zu(t)|0}else t=2;a=s[e+4>>2]|0;if(t>>>0<=a>>>0){if(t>>>0<a>>>0){if(a>>>0>2)r=(a+-1&a|0)==0;else r=0;i=~~+te(+(+((s[e+12>>2]|0)>>>0)/+u[e+16>>2]))>>>0;if(r)i=1<<32-(ae(i+-1|0)|0);else i=zu(i)|0;t=t>>>0<i>>>0?i:t;if(t>>>0<a>>>0)hr(e,t)}}else hr(e,t);return}function hr(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0;r=e+4|0;e:do{if(t){f=Mr(t<<2)|0;i=s[e>>2]|0;s[e>>2]=f;if(i)Pr(i);s[r>>2]=t;if(t){i=0;do{s[(s[e>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=(t|0))}r=e+8|0;a=s[r>>2]|0;if(a){i=s[a+4>>2]|0;d=t+-1|0;f=(d&t|0)==0;if(f)o=i&d;else o=(i>>>0)%(t>>>0)|0;s[(s[e>>2]|0)+(o<<2)>>2]=r;i=s[a>>2]|0;if(i){n=a;r=a;while(1){c=r;t:while(1){while(1){r=s[i+4>>2]|0;if(f)u=r&d;else u=(r>>>0)%(t>>>0)|0;if((u|0)==(o|0)){r=i;break}r=(s[e>>2]|0)+(u<<2)|0;if(!(s[r>>2]|0)){o=u;a=i;break t}l=i+8|0;r=i;while(1){a=s[r>>2]|0;if(!a)break;if((s[l>>2]|0)==(s[a+8>>2]|0))r=a;else break}s[n>>2]=a;s[r>>2]=s[s[(s[e>>2]|0)+(u<<2)>>2]>>2];s[s[(s[e>>2]|0)+(u<<2)>>2]>>2]=i;i=s[c>>2]|0;if(!i)break e}i=s[r>>2]|0;if(!i)break e;else{n=r;c=r}}s[r>>2]=n;i=s[a>>2]|0;if(!i)break;else{n=a;r=a}}}}}else{i=s[e>>2]|0;s[e>>2]=0;if(i)Pr(i);s[r>>2]=0}}while(0);return}function pr(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0,l=0;n=d;d=d+32|0;o=n+16|0;a=n+4|0;l=n;t=s[t>>2]|0;i=s[t>>2]|0;s[l>>2]=t;s[o>>2]=s[l>>2];mr(a,e,o);t=s[a>>2]|0;s[a>>2]=0;if(t){if(r[a+8>>0]|0)Wo(t+264|0);Pr(t)}d=n;return i|0}function mr(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0;p=s[i>>2]|0;d=s[t+4>>2]|0;i=s[p+4>>2]|0;f=d+-1|0;h=(f&d|0)==0;if(h)c=f&i;else c=(i>>>0)%(d>>>0)|0;n=(s[t>>2]|0)+(c<<2)|0;a=s[n>>2]|0;while(1){i=s[a>>2]|0;if((i|0)==(p|0)){u=a;break}else a=i}l=t+8|0;if((u|0)!=(l|0)){i=s[u+4>>2]|0;if(h)i=i&f;else i=(i>>>0)%(d>>>0)|0;if((i|0)==(c|0))n=p;else o=12}else o=12;do{if((o|0)==12){i=s[p>>2]|0;if(i){i=s[i+4>>2]|0;if(h)i=i&f;else i=(i>>>0)%(d>>>0)|0;if((i|0)==(c|0)){n=p;break}}s[n>>2]=0;n=p}}while(0);a=s[n>>2]|0;i=a;if(a){a=s[a+4>>2]|0;if(h)a=a&f;else a=(a>>>0)%(d>>>0)|0;if((a|0)!=(c|0)){s[(s[t>>2]|0)+(a<<2)>>2]=u;i=s[p>>2]|0}}s[u>>2]=i;s[n>>2]=0;t=t+12|0;s[t>>2]=(s[t>>2]|0)+-1;s[e>>2]=p;s[e+4>>2]=l;r[e+8>>0]=1;return}function br(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;r=Mr(408)|0;s[r+8>>2]=s[i>>2];Vu(r+16|0,0,392)|0;c[r+248>>3]=.0001;c[r+256>>3]=1.0e3;i=r+264|0;s[i>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[e>>2]=r;e=e+4|0;s[e>>2]=t+8;s[e+4>>2]=257;return}function gr(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0.0,c=0.0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0;f=s[i+8>>2]|0;v=i+4|0;s[v>>2]=f;g=t+4|0;d=s[g>>2]|0;b=(d|0)==0;e:do{if(!b){h=d+-1|0;p=(h&d|0)==0;if(p)n=h&f;else n=(f>>>0)%(d>>>0)|0;a=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!a)m=12;else while(1){o=s[a>>2]|0;if(!o){m=12;break e}a=s[o+4>>2]|0;if(p)a=a&h;else a=(a>>>0)%(d>>>0)|0;if((a|0)!=(n|0)){m=12;break e}if((s[o+8>>2]|0)==(f|0)){a=0;i=o;break}else a=o}}else{n=0;m=12}}while(0);if((m|0)==12){f=t+12|0;l=+(((s[f>>2]|0)+1|0)>>>0);c=+u[t+16>>2];do{if(b|l>+(d>>>0)*c){if(d>>>0>2)a=(d+-1&d|0)==0;else a=0;o=(a&1|d<<1)^1;a=~~+te(+(l/c))>>>0;vr(t,o>>>0<a>>>0?a:o);o=s[g>>2]|0;a=s[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&a;break}else{d=o;n=(a>>>0)%(o>>>0)|0;break}}}while(0);a=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!a){a=t+8|0;s[i>>2]=s[a>>2];s[a>>2]=i;s[(s[t>>2]|0)+(n<<2)>>2]=a;a=s[i>>2]|0;if(a){a=s[a+4>>2]|0;n=d+-1|0;if(!(n&d))a=a&n;else a=(a>>>0)%(d>>>0)|0;s[(s[t>>2]|0)+(a<<2)>>2]=i}}else{s[i>>2]=s[a>>2];s[a>>2]=i}s[f>>2]=(s[f>>2]|0)+1;a=1}s[e>>2]=i;r[e+4>>0]=a;return}function vr(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;if((t|0)!=1){if(t+-1&t)t=zu(t)|0}else t=2;a=s[e+4>>2]|0;if(t>>>0<=a>>>0){if(t>>>0<a>>>0){if(a>>>0>2)r=(a+-1&a|0)==0;else r=0;i=~~+te(+(+((s[e+12>>2]|0)>>>0)/+u[e+16>>2]))>>>0;if(r)i=1<<32-(ae(i+-1|0)|0);else i=zu(i)|0;t=t>>>0<i>>>0?i:t;if(t>>>0<a>>>0)wr(e,t)}}else wr(e,t);return}function wr(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0;r=e+4|0;e:do{if(t){f=Mr(t<<2)|0;i=s[e>>2]|0;s[e>>2]=f;if(i)Pr(i);s[r>>2]=t;if(t){i=0;do{s[(s[e>>2]|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)!=(t|0))}r=e+8|0;a=s[r>>2]|0;if(a){i=s[a+4>>2]|0;d=t+-1|0;f=(d&t|0)==0;if(f)o=i&d;else o=(i>>>0)%(t>>>0)|0;s[(s[e>>2]|0)+(o<<2)>>2]=r;i=s[a>>2]|0;if(i){n=a;r=a;while(1){c=r;t:while(1){while(1){r=s[i+4>>2]|0;if(f)u=r&d;else u=(r>>>0)%(t>>>0)|0;if((u|0)==(o|0)){r=i;break}r=(s[e>>2]|0)+(u<<2)|0;if(!(s[r>>2]|0)){o=u;a=i;break t}l=i+8|0;r=i;while(1){a=s[r>>2]|0;if(!a)break;if((s[l>>2]|0)==(s[a+8>>2]|0))r=a;else break}s[n>>2]=a;s[r>>2]=s[s[(s[e>>2]|0)+(u<<2)>>2]>>2];s[s[(s[e>>2]|0)+(u<<2)>>2]>>2]=i;i=s[c>>2]|0;if(!i)break e}i=s[r>>2]|0;if(!i)break e;else{n=r;c=r}}s[r>>2]=n;i=s[a>>2]|0;if(!i)break;else{n=a;r=a}}}}}else{i=s[e>>2]|0;s[e>>2]=0;if(i)Pr(i);s[r>>2]=0}}while(0);return}function kr(e){e=e|0;return ks(s[e+4>>2]|0)|0}function yr(e){e=e|0;Le(624,10917);Ze(632,10922,1,1,0);Fe(640,10927,1,-128,127);Fe(656,10932,1,-128,127);Fe(648,10944,1,0,255);Fe(664,10958,2,-32768,32767);Fe(672,10964,2,0,65535);Fe(680,10979,4,-2147483648,2147483647);Fe(688,10983,4,0,-1);Fe(696,10996,4,-2147483648,2147483647);Fe(704,11001,4,0,-1);ht(712,11015,4);ht(720,11021,8);yt(360,11028);yt(392,11040);at(416,4,11073);nt(440,11086);Ae(448,0,11102);Sr(11132);xr(11169);qr(11208);Er(11239);Cr(11279);Tr(11308);Ae(456,4,11346);Ae(464,5,11376);Sr(11415);xr(11447);qr(11480);Er(11513);Cr(11547);Tr(11580);Ae(472,6,11614);Ae(480,7,11645);Ae(488,7,11677);return}function _r(){yr(0);return}function Sr(e){e=e|0;Ae(536,0,e|0);return}function xr(e){e=e|0;Ae(528,1,e|0);return}function qr(e){e=e|0;Ae(520,2,e|0);return}function Er(e){e=e|0;Ae(512,3,e|0);return}function Cr(e){e=e|0;Ae(504,4,e|0);return}function Tr(e){e=e|0;Ae(496,5,e|0);return}function Ar(e){e=e|0;De(12478,12501,303,12589)}function Mr(e){e=e|0;var t=0;t=(e|0)==0?1:e;e=zs(t)|0;e:do{if(!e){while(1){e=Fr()|0;if(!e)break;Wc[e&0]();e=zs(t)|0;if(e)break e}t=Je(4)|0;s[t>>2]=2224;qt(t|0,544,1)}}while(0);return e|0}function Pr(e){e=e|0;js(e);return}function Rr(e){e=e|0;return}function Ir(e){e=e|0;Pr(e);return}function Or(e){e=e|0;return 12610}function Fr(){var e=0;e=s[559]|0;s[559]=e+0;return e|0}function $r(e){e=e|0;return}function Dr(e){e=e|0;return}function Nr(e){e=e|0;return}function Lr(e){e=e|0;return}function zr(e){e=e|0;return}function jr(e){e=e|0;Pr(e);return}function Hr(e){e=e|0;Pr(e);return}function Br(e){e=e|0;Pr(e);return}function Ur(e){e=e|0;Pr(e);return}function Qr(e,t,i){e=e|0;t=t|0;i=i|0;return(e|0)==(t|0)|0}function Vr(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0;o=d;d=d+64|0;n=o;if((e|0)!=(t|0))if((t|0)!=0?(a=Xr(t,576,592,0)|0,(a|0)!=0):0){t=n;r=t+56|0;do{s[t>>2]=0;t=t+4|0}while((t|0)<(r|0));s[n>>2]=a;s[n+8>>2]=e;s[n+12>>2]=-1;s[n+48>>2]=1;Zc[s[(s[a>>2]|0)+28>>2]&3](a,n,s[i>>2]|0,1);if((s[n+24>>2]|0)==1){s[i>>2]=s[n+16>>2];t=1}else t=0}else t=0;else t=1;d=o;return t|0}function Yr(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var n=0;e=t+16|0;n=s[e>>2]|0;do{if(n){if((n|0)!=(i|0)){a=t+36|0;s[a>>2]=(s[a>>2]|0)+1;s[t+24>>2]=2;r[t+54>>0]=1;break}e=t+24|0;if((s[e>>2]|0)==2)s[e>>2]=a}else{s[e>>2]=i;s[t+24>>2]=a;s[t+36>>2]=1}}while(0);return}function Wr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;if((e|0)==(s[t+8>>2]|0))Yr(0,t,i,r);return}function Gr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;if((e|0)==(s[t+8>>2]|0))Yr(0,t,i,r);else{e=s[e+8>>2]|0;Zc[s[(s[e>>2]|0)+28>>2]&3](e,t,i,r)}return}function Kr(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0;n=s[e+4>>2]|0;a=n>>8;if(n&1)a=s[(s[i>>2]|0)+a>>2]|0;e=s[e>>2]|0;Zc[s[(s[e>>2]|0)+28>>2]&3](e,t,i+a|0,(n&2|0)!=0?r:2);return}function Jr(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var n=0,o=0;e:do{if((e|0)!=(s[t+8>>2]|0)){o=s[e+12>>2]|0;n=e+16+(o<<3)|0;Kr(e+16|0,t,i,a);if((o|0)>1){o=t+54|0;e=e+24|0;do{Kr(e,t,i,a);if(r[o>>0]|0)break e;e=e+8|0}while(e>>>0<n>>>0)}}else Yr(0,t,i,a)}while(0);return}function Xr(e,t,i,n){e=e|0;t=t|0;i=i|0;n=n|0;var o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0;g=d;d=d+64|0;b=g;m=s[e>>2]|0;p=e+(s[m+-8>>2]|0)|0;m=s[m+-4>>2]|0;s[b>>2]=i;s[b+4>>2]=e;s[b+8>>2]=t;s[b+12>>2]=n;n=b+16|0;e=b+20|0;t=b+24|0;o=b+28|0;l=b+32|0;u=b+40|0;c=(m|0)==(i|0);f=n;h=f+36|0;do{s[f>>2]=0;f=f+4|0}while((f|0)<(h|0));a[n+36>>1]=0;r[n+38>>0]=0;e:do{if(c){s[b+48>>2]=1;Jc[s[(s[i>>2]|0)+20>>2]&3](i,b,p,p,1,0);n=(s[t>>2]|0)==1?p:0}else{Lc[s[(s[m>>2]|0)+24>>2]&3](m,b,p,1,0);switch(s[b+36>>2]|0){case 0:{n=(s[u>>2]|0)==1&(s[o>>2]|0)==1&(s[l>>2]|0)==1?s[e>>2]|0:0;break e}case 1:break;default:{n=0;break e}}if((s[t>>2]|0)!=1?!((s[u>>2]|0)==0&(s[o>>2]|0)==1&(s[l>>2]|0)==1):0){n=0;break}n=s[n>>2]|0}}while(0);d=g;return n|0}function Zr(e,t,i,a,n){e=e|0;t=t|0;i=i|0;a=a|0;n=n|0;r[t+53>>0]=1;do{if((s[t+4>>2]|0)==(a|0)){r[t+52>>0]=1;a=t+16|0;e=s[a>>2]|0;if(!e){s[a>>2]=i;s[t+24>>2]=n;s[t+36>>2]=1;if(!((n|0)==1?(s[t+48>>2]|0)==1:0))break;r[t+54>>0]=1;break}if((e|0)!=(i|0)){n=t+36|0;s[n>>2]=(s[n>>2]|0)+1;r[t+54>>0]=1;break}e=t+24|0;a=s[e>>2]|0;if((a|0)==2){s[e>>2]=n;a=n}if((a|0)==1?(s[t+48>>2]|0)==1:0)r[t+54>>0]=1}}while(0);return}function ea(e,t,i,a,n){e=e|0;t=t|0;i=i|0;a=a|0;n=n|0;var o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0;e:do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(i|0)?(o=t+28|0,(s[o>>2]|0)!=1):0)s[o>>2]=a}else{if((e|0)!=(s[t>>2]|0)){b=s[e+12>>2]|0;u=e+16+(b<<3)|0;ia(e+16|0,t,i,a,n);o=e+24|0;if((b|0)<=1)break;l=s[e+8>>2]|0;if((l&2|0)==0?(c=t+36|0,(s[c>>2]|0)!=1):0){if(!(l&1)){l=t+54|0;while(1){if(r[l>>0]|0)break e;if((s[c>>2]|0)==1)break e;ia(o,t,i,a,n);o=o+8|0;if(o>>>0>=u>>>0)break e}}l=t+24|0;e=t+54|0;while(1){if(r[e>>0]|0)break e;if((s[c>>2]|0)==1?(s[l>>2]|0)==1:0)break e;ia(o,t,i,a,n);o=o+8|0;if(o>>>0>=u>>>0)break e}}l=t+54|0;while(1){if(r[l>>0]|0)break e;ia(o,t,i,a,n);o=o+8|0;if(o>>>0>=u>>>0)break e}}if((s[t+16>>2]|0)!=(i|0)?(m=t+20|0,(s[m>>2]|0)!=(i|0)):0){s[t+32>>2]=a;f=t+44|0;if((s[f>>2]|0)==4)break;l=s[e+12>>2]|0;u=e+16+(l<<3)|0;c=t+52|0;a=t+53|0;h=t+54|0;d=e+8|0;p=t+24|0;t:do{if((l|0)>0){l=0;o=0;e=e+16|0;while(1){r[c>>0]=0;r[a>>0]=0;ta(e,t,i,i,1,n);if(r[h>>0]|0){b=20;break t}do{if(r[a>>0]|0){if(!(r[c>>0]|0))if(!(s[d>>2]&1)){o=1;b=20;break t}else{o=1;break}if((s[p>>2]|0)==1)break t;if(!(s[d>>2]&2))break t;else{l=1;o=1}}}while(0);e=e+8|0;if(e>>>0>=u>>>0){b=20;break}}}else{l=0;o=0;b=20}}while(0);do{if((b|0)==20){if((!l?(s[m>>2]=i,i=t+40|0,s[i>>2]=(s[i>>2]|0)+1,(s[t+36>>2]|0)==1):0)?(s[p>>2]|0)==2:0){r[h>>0]=1;if(o)break}else b=24;if((b|0)==24?o:0)break;s[f>>2]=4;break e}}while(0);s[f>>2]=3;break}if((a|0)==1)s[t+32>>2]=1}}while(0);return}function ta(e,t,i,r,a,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;var o=0,l=0;l=s[e+4>>2]|0;o=l>>8;if(l&1)o=s[(s[r>>2]|0)+o>>2]|0;e=s[e>>2]|0;Jc[s[(s[e>>2]|0)+20>>2]&3](e,t,i,r+o|0,(l&2|0)!=0?a:2,n);return}function ia(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0;o=s[e+4>>2]|0;n=o>>8;if(o&1)n=s[(s[i>>2]|0)+n>>2]|0;e=s[e>>2]|0;Lc[s[(s[e>>2]|0)+24>>2]&3](e,t,i+n|0,(o&2|0)!=0?r:2,a);return}function ra(e,t,i,a,n){e=e|0;t=t|0;i=i|0;a=a|0;n=n|0;var o=0,l=0,u=0,c=0;e:do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(i|0)?(o=t+28|0,(s[o>>2]|0)!=1):0)s[o>>2]=a}else{if((e|0)!=(s[t>>2]|0)){u=s[e+8>>2]|0;Lc[s[(s[u>>2]|0)+24>>2]&3](u,t,i,a,n);break}if((s[t+16>>2]|0)!=(i|0)?(l=t+20|0,(s[l>>2]|0)!=(i|0)):0){s[t+32>>2]=a;a=t+44|0;if((s[a>>2]|0)==4)break;o=t+52|0;r[o>>0]=0;c=t+53|0;r[c>>0]=0;e=s[e+8>>2]|0;Jc[s[(s[e>>2]|0)+20>>2]&3](e,t,i,i,1,n);if(r[c>>0]|0){if(!(r[o>>0]|0)){o=1;u=13}}else{o=0;u=13}do{if((u|0)==13){s[l>>2]=i;c=t+40|0;s[c>>2]=(s[c>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0){r[t+54>>0]=1;if(o)break}else u=16;if((u|0)==16?o:0)break;s[a>>2]=4;break e}}while(0);s[a>>2]=3;break}if((a|0)==1)s[t+32>>2]=1}}while(0);return}function aa(e,t,i,a,n){e=e|0;t=t|0;i=i|0;a=a|0;n=n|0;var o=0,l=0;do{if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)==(i|0)?(l=t+28|0,(s[l>>2]|0)!=1):0)s[l>>2]=a}else if((e|0)==(s[t>>2]|0)){if((s[t+16>>2]|0)!=(i|0)?(o=t+20|0,(s[o>>2]|0)!=(i|0)):0){s[t+32>>2]=a;s[o>>2]=i;n=t+40|0;s[n>>2]=(s[n>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0)r[t+54>>0]=1;s[t+44>>2]=4;break}if((a|0)==1)s[t+32>>2]=1}}while(0);return}function sa(e,t,i,a,n,o){e=e|0;t=t|0;i=i|0;a=a|0;n=n|0;o=o|0;var l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0;if((e|0)==(s[t+8>>2]|0))Zr(0,t,i,a,n);else{f=t+52|0;h=r[f>>0]|0;p=t+53|0;m=r[p>>0]|0;d=s[e+12>>2]|0;l=e+16+(d<<3)|0;r[f>>0]=0;r[p>>0]=0;ta(e+16|0,t,i,a,n,o);e:do{if((d|0)>1){u=t+24|0;c=e+8|0;d=t+54|0;e=e+24|0;do{if(r[d>>0]|0)break e;if(!(r[f>>0]|0)){if((r[p>>0]|0)!=0?(s[c>>2]&1|0)==0:0)break e}else{if((s[u>>2]|0)==1)break e;if(!(s[c>>2]&2))break e}r[f>>0]=0;r[p>>0]=0;ta(e,t,i,a,n,o);e=e+8|0}while(e>>>0<l>>>0)}}while(0);r[f>>0]=h;r[p>>0]=m}return}function na(e,t,i,r,a,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;if((e|0)==(s[t+8>>2]|0))Zr(0,t,i,r,a);else{e=s[e+8>>2]|0;Jc[s[(s[e>>2]|0)+20>>2]&3](e,t,i,r,a,n)}return}function oa(e,t,i,r,a,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;if((e|0)==(s[t+8>>2]|0))Zr(0,t,i,r,a);return}function la(e){e=e|0;De(12625,12654,1164,12589)}function ua(e){e=e|0;return((e|0)==32|(e+-9|0)>>>0<5)&1|0}function ca(){var e=0;if(!(s[597]|0))e=2644;else e=s[(ut()|0)+60>>2]|0;return e|0}function da(e){e=e|0;var t=0,i=0;t=0;while(1){if((n[12742+t>>0]|0)==(e|0)){i=2;break}t=t+1|0;if((t|0)==87){t=87;e=12830;i=5;break}}if((i|0)==2)if(!t)e=12830;else{e=12830;i=5}if((i|0)==5)while(1){i=e;while(1){e=i+1|0;if(!(r[i>>0]|0))break;else i=e}t=t+-1|0;if(!t)break;else i=5}return e|0}function fa(e,t,i){e=e|0;t=t|0;i=i|0;var a=0.0,o=0,l=0.0,u=0,c=0,f=0.0,h=0,p=0,m=0,b=0.0,g=0.0,v=0,w=0,k=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,I=0,O=0,F=0,$=0,D=0,N=0.0;D=d;d=d+512|0;I=D;switch(t|0){case 0:{$=24;F=-149;E=4;break}case 1:{$=53;F=-1074;E=4;break}case 2:{$=53;F=-1074;E=4;break}default:a=0.0}e:do{if((E|0)==4){A=e+4|0;T=e+100|0;do{t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0}while((ua(t)|0)!=0);t:do{switch(t|0){case 43:case 45:{o=1-(((t|0)==45&1)<<1)|0;t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0;O=o;break t}else{t=ma(e)|0;O=o;break t}}default:O=1}}while(0);o=t;t=0;do{if((o|32|0)!=(r[14634+t>>0]|0))break;do{if(t>>>0<7){o=s[A>>2]|0;if(o>>>0<(s[T>>2]|0)>>>0){s[A>>2]=o+1;o=n[o>>0]|0;break}else{o=ma(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<8);t:do{switch(t|0){case 8:break;case 3:{E=23;break}default:{u=(i|0)!=0;if(u&t>>>0>3)if((t|0)==8)break t;else{E=23;break t}i:do{if(!t){t=0;do{if((o|32|0)!=(r[16477+t>>0]|0))break i;do{if(t>>>0<2){o=s[A>>2]|0;if(o>>>0<(s[T>>2]|0)>>>0){s[A>>2]=o+1;o=n[o>>0]|0;break}else{o=ma(e)|0;break}}}while(0);t=t+1|0}while(t>>>0<3)}}while(0);switch(t|0){case 3:{t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if((t|0)==40)t=1;else{if(!(s[T>>2]|0)){a=y;break e}s[A>>2]=(s[A>>2]|0)+-1;a=y;break e}while(1){o=s[A>>2]|0;if(o>>>0<(s[T>>2]|0)>>>0){s[A>>2]=o+1;o=n[o>>0]|0}else o=ma(e)|0;if(!((o+-48|0)>>>0<10|(o+-65|0)>>>0<26)?!((o|0)==95|(o+-97|0)>>>0<26):0)break;t=t+1|0}if((o|0)==41){a=y;break e}o=(s[T>>2]|0)==0;if(!o)s[A>>2]=(s[A>>2]|0)+-1;if(!u){s[(ca()|0)>>2]=22;pa(e,0);a=0.0;break e}if(!t){a=y;break e}while(1){t=t+-1|0;if(!o)s[A>>2]=(s[A>>2]|0)+-1;if(!t){a=y;break e}}}case 0:{do{if((o|0)==48){t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if((t|32|0)!=120){if(!(s[T>>2]|0)){t=48;break}s[A>>2]=(s[A>>2]|0)+-1;t=48;break}t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0;u=0}else{t=ma(e)|0;u=0}i:while(1){switch(t|0){case 46:{E=74;break i}case 48:break;default:{x=0;c=0;S=0;o=0;h=u;p=0;k=0;f=1.0;u=0;a=0.0;break i}}t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0;u=1;continue}else{t=ma(e)|0;u=1;continue}}if((E|0)==74){t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if((t|0)==48){u=0;o=0;do{t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;u=Wu(u|0,o|0,-1,-1)|0;o=R}while((t|0)==48);x=0;c=0;S=u;h=1;p=1;k=0;f=1.0;u=0;a=0.0}else{x=0;c=0;S=0;o=0;h=u;p=1;k=0;f=1.0;u=0;a=0.0}}while(1){v=t+-48|0;m=t|32;if(v>>>0>=10){w=(t|0)==46;if(!(w|(m+-97|0)>>>0<6)){m=S;v=x;break}if(w)if(!p){w=c;o=x;v=x;p=1;m=k;l=f}else{m=S;v=x;t=46;break}else E=86}else E=86;if((E|0)==86){E=0;t=(t|0)>57?m+-87|0:v;do{if(!((x|0)<0|(x|0)==0&c>>>0<8)){if((x|0)<0|(x|0)==0&c>>>0<14){g=f*.0625;m=k;l=g;a=a+g*+(t|0);break}if((k|0)!=0|(t|0)==0){m=k;l=f}else{m=1;l=f;a=a+f*.5}}else{m=k;l=f;u=t+(u<<4)|0}}while(0);c=Wu(c|0,x|0,1,0)|0;w=S;v=R;h=1}t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;x=v;S=w;t=n[t>>0]|0;k=m;f=l;continue}else{x=v;S=w;t=ma(e)|0;k=m;f=l;continue}}if(!h){t=(s[T>>2]|0)==0;if(!t)s[A>>2]=(s[A>>2]|0)+-1;if(i){if(!t?(q=s[A>>2]|0,s[A>>2]=q+-1,(p|0)!=0):0)s[A>>2]=q+-2}else pa(e,0);a=+(O|0)*0.0;break e}h=(p|0)==0;p=h?c:m;h=h?v:o;if((v|0)<0|(v|0)==0&c>>>0<8){o=v;do{u=u<<4;c=Wu(c|0,o|0,1,0)|0;o=R}while((o|0)<0|(o|0)==0&c>>>0<8)}if((t|32|0)==112){o=Cs(e,i)|0;t=R;if((o|0)==0&(t|0)==-2147483648){if(!i){pa(e,0);a=0.0;break e}if(!(s[T>>2]|0)){o=0;t=0}else{s[A>>2]=(s[A>>2]|0)+-1;o=0;t=0}}}else if(!(s[T>>2]|0)){o=0;t=0}else{s[A>>2]=(s[A>>2]|0)+-1;o=0;t=0}I=Yu(p|0,h|0,2)|0;I=Wu(I|0,R|0,-32,-1)|0;t=Wu(I|0,R|0,o|0,t|0)|0;o=R;if(!u){a=+(O|0)*0.0;break e}if((o|0)>0|(o|0)==0&t>>>0>(0-F|0)>>>0){s[(ca()|0)>>2]=34;a=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break e}I=F+-106|0;P=((I|0)<0)<<31>>31;if((o|0)<(P|0)|(o|0)==(P|0)&t>>>0<I>>>0){s[(ca()|0)>>2]=34;a=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break e}if((u|0)>-1){do{P=!(a>=.5);I=P&1|u<<1;u=I^1;a=a+(P?a:a+-1.0);t=Wu(t|0,o|0,-1,-1)|0;o=R}while((I|0)>-1);c=t;f=a}else{c=t;f=a}t=Qu(32,0,F|0,((F|0)<0)<<31>>31|0)|0;t=Wu(c|0,o|0,t|0,R|0)|0;F=R;if(0>(F|0)|0==(F|0)&$>>>0>t>>>0)if((t|0)<0){t=0;E=127}else E=125;else{t=$;E=125}if((E|0)==125)if((t|0)<53)E=127;else{o=t;l=+(O|0);a=0.0}if((E|0)==127){a=+(O|0);o=t;l=a;a=+va(+Sa(1.0,84-t|0),a)}$=(u&1|0)==0&(f!=0.0&(o|0)<32);a=l*($?0.0:f)+(a+l*+((($&1)+u|0)>>>0))-a;if(!(a!=0.0))s[(ca()|0)>>2]=34;a=+xa(a,c);break e}else t=o}while(0);M=F+$|0;P=0-M|0;u=0;i:while(1){switch(t|0){case 46:{E=138;break i}case 48:break;default:{o=0;m=0;p=0;break i}}t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0;u=1;continue}else{t=ma(e)|0;u=1;continue}}if((E|0)==138){t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if((t|0)==48){o=0;t=0;while(1){o=Wu(o|0,t|0,-1,-1)|0;u=R;t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if((t|0)==48)t=u;else{m=u;u=1;p=1;break}}}else{o=0;m=0;p=1}}s[I>>2]=0;h=t+-48|0;c=(t|0)==46;i:do{if(c|h>>>0<10){C=I+496|0;x=0;w=0;k=c;E=m;v=u;q=p;u=0;c=0;p=0;r:while(1){do{if(k)if(!q){o=x;m=w;q=1}else{m=E;t=x;h=w;break r}else{k=Wu(x|0,w|0,1,0)|0;w=R;S=(t|0)!=48;if((c|0)>=125){if(!S){m=E;x=k;break}s[C>>2]=s[C>>2]|1;m=E;x=k;break}m=I+(c<<2)|0;if(u)h=t+-48+((s[m>>2]|0)*10|0)|0;s[m>>2]=h;u=u+1|0;h=(u|0)==9;m=E;x=k;v=1;u=h?0:u;c=(h&1)+c|0;p=S?k:p}}while(0);t=s[A>>2]|0;if(t>>>0<(s[T>>2]|0)>>>0){s[A>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;h=t+-48|0;k=(t|0)==46;if(!(k|h>>>0<10)){h=q;E=161;break i}else E=m}v=(v|0)!=0;E=169}else{x=0;w=0;v=u;h=p;u=0;c=0;p=0;E=161}}while(0);do{if((E|0)==161){C=(h|0)==0;o=C?x:o;m=C?w:m;v=(v|0)!=0;if(!((t|32|0)==101&v))if((t|0)>-1){t=x;h=w;E=169;break}else{t=x;h=w;E=171;break}h=Cs(e,i)|0;t=R;if((h|0)==0&(t|0)==-2147483648){if(!i){pa(e,0);a=0.0;break}if(!(s[T>>2]|0)){h=0;t=0}else{s[A>>2]=(s[A>>2]|0)+-1;h=0;t=0}}o=Wu(h|0,t|0,o|0,m|0)|0;v=x;m=R;h=w;E=173}}while(0);if((E|0)==169)if(s[T>>2]|0){s[A>>2]=(s[A>>2]|0)+-1;if(v){v=t;E=173}else E=172}else E=171;if((E|0)==171)if(v){v=t;E=173}else E=172;do{if((E|0)==172){s[(ca()|0)>>2]=22;pa(e,0);a=0.0}else if((E|0)==173){t=s[I>>2]|0;if(!t){a=+(O|0)*0.0;break}if(((h|0)<0|(h|0)==0&v>>>0<10)&((o|0)==(v|0)&(m|0)==(h|0))?$>>>0>30|(t>>>$|0)==0:0){a=+(O|0)*+(t>>>0);break}e=(F|0)/-2|0;A=((e|0)<0)<<31>>31;if((m|0)>(A|0)|(m|0)==(A|0)&o>>>0>e>>>0){s[(ca()|0)>>2]=34;a=+(O|0)*1797693134862315708145274.0e284*1797693134862315708145274.0e284;break}e=F+-106|0;A=((e|0)<0)<<31>>31;if((m|0)<(A|0)|(m|0)==(A|0)&o>>>0<e>>>0){s[(ca()|0)>>2]=34;a=+(O|0)*2.2250738585072014e-308*2.2250738585072014e-308;break}if(u){if((u|0)<9){h=I+(c<<2)|0;t=s[h>>2]|0;do{t=t*10|0;u=u+1|0}while((u|0)!=9);s[h>>2]=t}c=c+1|0}if((p|0)<9?(p|0)<=(o|0)&(o|0)<18:0){if((o|0)==9){a=+(O|0)*+((s[I>>2]|0)>>>0);break}if((o|0)<9){a=+(O|0)*+((s[I>>2]|0)>>>0)/+(s[2648+(8-o<<2)>>2]|0);break}e=$+27+(ie(o,-3)|0)|0;t=s[I>>2]|0;if((e|0)>30|(t>>>e|0)==0){a=+(O|0)*+(t>>>0)*+(s[2648+(o+-10<<2)>>2]|0);break}}t=(o|0)%9|0;if(!t){u=0;t=0}else{v=(o|0)>-1?t:t+9|0;h=s[2648+(8-v<<2)>>2]|0;if(c){p=1e9/(h|0)|0;u=0;t=0;m=0;do{T=I+(m<<2)|0;A=s[T>>2]|0;e=((A>>>0)/(h>>>0)|0)+t|0;s[T>>2]=e;t=ie((A>>>0)%(h>>>0)|0,p)|0;e=(m|0)==(u|0)&(e|0)==0;m=m+1|0;o=e?o+-9|0:o;u=e?m&127:u}while((m|0)!=(c|0));if(t){s[I+(c<<2)>>2]=t;c=c+1|0}}else{u=0;c=0}t=0;o=9-v+o|0}i:while(1){w=(o|0)<18;k=(o|0)==18;S=I+(u<<2)|0;do{if(!w){if(!k)break i;if((s[S>>2]|0)>>>0>=9007199){o=18;break i}}h=0;p=c+127|0;while(1){v=p&127;m=I+(v<<2)|0;p=Yu(s[m>>2]|0,0,29)|0;p=Wu(p|0,R|0,h|0,0)|0;h=R;if(h>>>0>0|(h|0)==0&p>>>0>1e9){e=rc(p|0,h|0,1e9,0)|0;p=ac(p|0,h|0,1e9,0)|0;h=e}else h=0;s[m>>2]=p;e=(v|0)==(u|0);c=(v|0)!=(c+127&127|0)|e?c:(p|0)==0?v:c;if(e)break;else p=v+-1|0}t=t+-29|0}while((h|0)==0);u=u+127&127;if((u|0)==(c|0)){e=c+127&127;c=I+((c+126&127)<<2)|0;s[c>>2]=s[c>>2]|s[I+(e<<2)>>2];c=e}s[I+(u<<2)>>2]=h;o=o+9|0}i:while(1){x=c+1&127;S=I+((c+127&127)<<2)|0;while(1){w=(o|0)==18;k=(o|0)>27?9:1;v=w^1;while(1){p=u&127;m=(p|0)==(c|0);do{if(!m){h=s[I+(p<<2)>>2]|0;if(h>>>0<9007199){E=219;break}if(h>>>0>9007199)break;h=u+1&127;if((h|0)==(c|0)){E=219;break}h=s[I+(h<<2)>>2]|0;if(h>>>0<254740991){E=219;break}if(!(h>>>0>254740991|v)){o=p;break i}}else E=219}while(0);if((E|0)==219?(E=0,w):0){E=220;break i}t=t+k|0;if((u|0)==(c|0))u=c;else break}v=(1<<k)+-1|0;w=1e9>>>k;p=u;h=0;m=u;while(1){A=I+(m<<2)|0;e=s[A>>2]|0;u=(e>>>k)+h|0;s[A>>2]=u;h=ie(e&v,w)|0;u=(m|0)==(p|0)&(u|0)==0;m=m+1&127;o=u?o+-9|0:o;u=u?m:p;if((m|0)==(c|0))break;else p=u}if(!h)continue;if((x|0)!=(u|0))break;s[S>>2]=s[S>>2]|1}s[I+(c<<2)>>2]=h;c=x}if((E|0)==220)if(m){s[I+(x+-1<<2)>>2]=0;o=c;c=x}else o=p;a=+((s[I+(o<<2)>>2]|0)>>>0);o=u+1&127;if((o|0)==(c|0)){c=u+2&127;s[I+(c+-1<<2)>>2]=0}g=+(O|0);l=g*(a*1.0e9+ +((s[I+(o<<2)>>2]|0)>>>0));w=t+53|0;m=w-F|0;v=(m|0)<($|0);o=v&1;p=v?(m|0)<0?0:m:$;if((p|0)<53){N=+va(+Sa(1.0,105-p|0),l);f=+ka(l,+Sa(1.0,53-p|0));b=N;a=f;f=N+(l-f)}else{b=0.0;a=0.0;f=l}h=u+2&127;do{if((h|0)==(c|0))l=a;else{h=s[I+(h<<2)>>2]|0;do{if(h>>>0>=5e8){if(h>>>0>5e8){a=g*.75+a;break}if((u+3&127|0)==(c|0)){a=g*.5+a;break}else{a=g*.75+a;break}}else{if((h|0)==0?(u+3&127|0)==(c|0):0)break;a=g*.25+a}}while(0);if((53-p|0)<=1){l=a;break}if(+ka(a,1.0)!=0.0){l=a;break}l=a+1.0}}while(0);a=f+l-b;do{if((w&2147483647|0)>(-2-M|0)){if(+B(+a)>=9007199254740992.0){o=v&(p|0)==(m|0)?0:o;t=t+1|0;a=a*.5}if((t+50|0)<=(P|0)?!(l!=0.0&(o|0)!=0):0)break;s[(ca()|0)>>2]=34}}while(0);a=+xa(a,t)}}while(0);break e}default:{if(s[T>>2]|0)s[A>>2]=(s[A>>2]|0)+-1;s[(ca()|0)>>2]=22;pa(e,0);a=0.0;break e}}}}}while(0);if((E|0)==23){o=(s[T>>2]|0)==0;if(!o)s[A>>2]=(s[A>>2]|0)+-1;if((i|0)!=0&t>>>0>3)do{if(!o)s[A>>2]=(s[A>>2]|0)+-1;t=t+-1|0}while(t>>>0>3)}a=+(O|0)*_}}while(0);d=D;return+a}function ha(e,t,i,a,o){e=e|0;t=t|0;i=i|0;a=a|0;o=o|0;var l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0;e:do{if(t>>>0>36){s[(ca()|0)>>2]=22;o=0;a=0}else{g=e+4|0;b=e+100|0;do{l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0}while((ua(l)|0)!=0);t:do{switch(l|0){case 43:case 45:{u=((l|0)==45)<<31>>31;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0;m=u;break t}else{l=ma(e)|0;m=u;break t}}default:m=0}}while(0);u=(t|0)==0;do{if((t&-17|0)==0&(l|0)==48){l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;if((l|32|0)!=120)if(u){t=8;h=46;break}else{h=32;break}t=s[g>>2]|0;if(t>>>0<(s[b>>2]|0)>>>0){s[g>>2]=t+1;l=n[t>>0]|0}else l=ma(e)|0;if((n[14643+(l+1)>>0]|0)>15){a=(s[b>>2]|0)==0;if(!a)s[g>>2]=(s[g>>2]|0)+-1;if(!i){pa(e,0);o=0;a=0;break e}if(a){o=0;a=0;break e}s[g>>2]=(s[g>>2]|0)+-1;o=0;a=0;break e}else{t=16;h=46}}else{t=u?10:t;if((n[14643+(l+1)>>0]|0)>>>0<t>>>0)h=32;else{if(s[b>>2]|0)s[g>>2]=(s[g>>2]|0)+-1;pa(e,0);s[(ca()|0)>>2]=22;o=0;a=0;break e}}}while(0);if((h|0)==32)if((t|0)==10){t=l+-48|0;if(t>>>0<10){l=0;while(1){u=(l*10|0)+t|0;t=s[g>>2]|0;if(t>>>0<(s[b>>2]|0)>>>0){s[g>>2]=t+1;l=n[t>>0]|0}else l=ma(e)|0;t=l+-48|0;if(!(t>>>0<10&u>>>0<429496729)){t=u;break}else l=u}u=0}else{t=0;u=0}i=l+-48|0;if(i>>>0<10){while(1){c=ic(t|0,u|0,10,0)|0;d=R;f=((i|0)<0)<<31>>31;p=~f;if(d>>>0>p>>>0|(d|0)==(p|0)&c>>>0>~i>>>0){c=t;break}t=Wu(c|0,d|0,i|0,f|0)|0;u=R;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;i=l+-48|0;if(!(i>>>0<10&(u>>>0<429496729|(u|0)==429496729&t>>>0<2576980378))){c=t;break}}if(i>>>0>9){l=c;t=m}else{t=10;h=72}}else{l=t;t=m}}else h=46;t:do{if((h|0)==46){if(!(t+-1&t)){h=r[14900+((t*23|0)>>>5&7)>>0]|0;u=r[14643+(l+1)>>0]|0;i=u&255;if(i>>>0<t>>>0){l=0;while(1){c=i|l<<h;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;u=r[14643+(l+1)>>0]|0;i=u&255;if(!(c>>>0<134217728&i>>>0<t>>>0))break;else l=c}i=0}else{i=0;c=0}d=Gu(-1,-1,h|0)|0;f=R;if((u&255)>>>0>=t>>>0|(i>>>0>f>>>0|(i|0)==(f|0)&c>>>0>d>>>0)){u=i;h=72;break}else l=i;while(1){c=Yu(c|0,l|0,h|0)|0;i=R;c=u&255|c;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;u=r[14643+(l+1)>>0]|0;if((u&255)>>>0>=t>>>0|(i>>>0>f>>>0|(i|0)==(f|0)&c>>>0>d>>>0)){u=i;h=72;break t}else l=i}}u=r[14643+(l+1)>>0]|0;i=u&255;if(i>>>0<t>>>0){l=0;while(1){c=i+(ie(l,t)|0)|0;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;u=r[14643+(l+1)>>0]|0;i=u&255;if(!(c>>>0<119304647&i>>>0<t>>>0))break;else l=c}i=0}else{c=0;i=0}if((u&255)>>>0<t>>>0){h=rc(-1,-1,t|0,0)|0;p=R;f=i;while(1){if(f>>>0>p>>>0|(f|0)==(p|0)&c>>>0>h>>>0){u=f;h=72;break t}i=ic(c|0,f|0,t|0,0)|0;d=R;u=u&255;if(d>>>0>4294967295|(d|0)==-1&i>>>0>~u>>>0){u=f;h=72;break t}c=Wu(u|0,0,i|0,d|0)|0;i=R;l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0;u=r[14643+(l+1)>>0]|0;if((u&255)>>>0>=t>>>0){u=i;h=72;break}else f=i}}else{u=i;h=72}}}while(0);if((h|0)==72)if((n[14643+(l+1)>>0]|0)>>>0<t>>>0){do{l=s[g>>2]|0;if(l>>>0<(s[b>>2]|0)>>>0){s[g>>2]=l+1;l=n[l>>0]|0}else l=ma(e)|0}while((n[14643+(l+1)>>0]|0)>>>0<t>>>0);s[(ca()|0)>>2]=34;u=o;l=a;t=(a&1|0)==0&0==0?m:0}else{l=c;t=m}if(s[b>>2]|0)s[g>>2]=(s[g>>2]|0)+-1;if(!(u>>>0<o>>>0|(u|0)==(o|0)&l>>>0<a>>>0)){if(!((a&1|0)!=0|0!=0|(t|0)!=0)){s[(ca()|0)>>2]=34;a=Wu(a|0,o|0,-1,-1)|0;o=R;break}if(u>>>0>o>>>0|(u|0)==(o|0)&l>>>0>a>>>0){s[(ca()|0)>>2]=34;break}}a=((t|0)<0)<<31>>31;a=Qu(l^t|0,u^a|0,t|0,a|0)|0;o=R}}while(0);R=o;return a|0}function pa(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;s[e+104>>2]=t;i=s[e+4>>2]|0;r=s[e+8>>2]|0;a=r-i|0;s[e+108>>2]=a;if((t|0)!=0&(a|0)>(t|0))s[e+100>>2]=i+t;else s[e+100>>2]=r;return}function ma(e){e=e|0;var t=0,i=0,a=0,o=0,l=0,u=0;i=e+104|0;l=s[i>>2]|0;if((l|0)!=0?(s[e+108>>2]|0)>=(l|0):0)u=4;else{t=ja(e)|0;if((t|0)>=0){o=s[i>>2]|0;i=e+8|0;if(o){a=s[i>>2]|0;l=s[e+4>>2]|0;i=a;o=o-(s[e+108>>2]|0)+-1|0;if((i-l|0)>(o|0))s[e+100>>2]=l+o;else u=9}else{a=s[i>>2]|0;i=a;u=9}if((u|0)==9)s[e+100>>2]=i;i=s[e+4>>2]|0;if(a){e=e+108|0;s[e>>2]=a+1-i+(s[e>>2]|0)}i=i+-1|0;if((n[i>>0]|0|0)!=(t|0))r[i>>0]=t}else u=4}if((u|0)==4){s[e+100>>2]=0;t=-1}return t|0}function ba(e){e=e|0;if(e>>>0>4294963200){s[(ca()|0)>>2]=0-e;e=-1}return e|0}function ga(e,t){e=+e;t=+t;var i=0,r=0;c[h>>3]=e;r=s[h>>2]|0;i=s[h+4>>2]|0;c[h>>3]=t;i=s[h+4>>2]&-2147483648|i&2147483647;s[h>>2]=r;s[h+4>>2]=i;return+ +c[h>>3]}function va(e,t){e=+e;t=+t;return+ +ga(e,t)}function wa(e,t){e=+e;t=+t;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,d=0,f=0,p=0,m=0,b=0;c[h>>3]=e;i=s[h>>2]|0;d=s[h+4>>2]|0;c[h>>3]=t;f=s[h>>2]|0;p=s[h+4>>2]|0;r=Gu(i|0,d|0,52)|0;r=r&2047;l=Gu(f|0,p|0,52)|0;l=l&2047;m=d&-2147483648;o=Yu(f|0,p|0,1)|0;u=R;e:do{if(!((o|0)==0&(u|0)==0)?(n=p&2147483647,!(n>>>0>2146435072|(n|0)==2146435072&f>>>0>0|(r|0)==2047)):0){a=Yu(i|0,d|0,1)|0;n=R;if(!(n>>>0>u>>>0|(n|0)==(u|0)&a>>>0>o>>>0))return+((a|0)==(o|0)&(n|0)==(u|0)?e*0.0:e);if(!r){r=Yu(i|0,d|0,12)|0;a=R;if((a|0)>-1|(a|0)==-1&r>>>0>4294967295){n=r;r=0;do{r=r+-1|0;n=Yu(n|0,a|0,1)|0;a=R}while((a|0)>-1|(a|0)==-1&n>>>0>4294967295)}else r=0;i=Yu(i|0,d|0,1-r|0)|0;a=R}else a=d&1048575|1048576;if(!l){n=Yu(f|0,p|0,12)|0;o=R;if((o|0)>-1|(o|0)==-1&n>>>0>4294967295){l=0;do{l=l+-1|0;n=Yu(n|0,o|0,1)|0;o=R}while((o|0)>-1|(o|0)==-1&n>>>0>4294967295)}else l=0;f=Yu(f|0,p|0,1-l|0)|0;d=R}else d=p&1048575|1048576;u=Qu(i|0,a|0,f|0,d|0)|0;o=R;n=(o|0)>-1|(o|0)==-1&u>>>0>4294967295;t:do{if((r|0)>(l|0)){while(1){if(n)if((i|0)==(f|0)&(a|0)==(d|0))break;else{i=u;a=o}i=Yu(i|0,a|0,1)|0;a=R;r=r+-1|0;u=Qu(i|0,a|0,f|0,d|0)|0;o=R;n=(o|0)>-1|(o|0)==-1&u>>>0>4294967295;if((r|0)<=(l|0))break t}t=e*0.0;break e}}while(0);if(n)if((i|0)==(f|0)&(a|0)==(d|0)){t=e*0.0;break}else{a=o;i=u}if(a>>>0<1048576|(a|0)==1048576&i>>>0<0)do{i=Yu(i|0,a|0,1)|0;a=R;r=r+-1|0}while(a>>>0<1048576|(a|0)==1048576&i>>>0<0);if((r|0)>0){p=Wu(i|0,a|0,0,-1048576)|0;i=R;r=Yu(r|0,0,52)|0;i=i|R;r=p|r}else{r=Gu(i|0,a|0,1-r|0)|0;i=R}s[h>>2]=r;s[h+4>>2]=i|m;t=+c[h>>3]}else b=3}while(0);if((b|0)==3){t=e*t;t=t/t}return+t}function ka(e,t){e=+e;t=+t;return+ +wa(e,t)}function ya(e,t){e=+e;t=t|0;var i=0,r=0,a=0;c[h>>3]=e;i=s[h>>2]|0;r=s[h+4>>2]|0;a=Gu(i|0,r|0,52)|0;a=a&2047;switch(a|0){case 0:{if(e!=0.0){e=+ya(e*18446744073709551616.0,t);i=(s[t>>2]|0)+-64|0}else i=0;s[t>>2]=i;break}case 2047:break;default:{s[t>>2]=a+-1022;s[h>>2]=i;s[h+4>>2]=r&-2146435073|1071644672;e=+c[h>>3]}}return+e}function _a(e,t){e=+e;t=t|0;return+ +ya(e,t)}function Sa(e,t){e=+e;t=t|0;var i=0;if((t|0)>1023){e=e*8988465674311579538646525.0e283;i=t+-1023|0;if((i|0)>1023){i=t+-2046|0;i=(i|0)>1023?1023:i;e=e*8988465674311579538646525.0e283}}else if((t|0)<-1022){e=e*2.2250738585072014e-308;i=t+1022|0;if((i|0)<-1022){i=t+2044|0;i=(i|0)<-1022?-1022:i;e=e*2.2250738585072014e-308}}else i=t;i=Yu(i+1023|0,0,52)|0;t=R;s[h>>2]=i;s[h+4>>2]=t;return+(e*+c[h>>3])}function xa(e,t){e=+e;t=t|0;return+ +Sa(e,t)}function qa(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var n=0,o=0,l=0,u=0,c=0,f=0;c=d;d=d+16|0;n=c;l=(a|0)==0?2680:a;a=s[l>>2]|0;e:do{if(!t)if(!a)a=0;else u=15;else{o=(e|0)==0?n:e;if(!i)a=-2;else{if(!a){a=r[t>>0]|0;n=a&255;if(a<<24>>24>-1){s[o>>2]=n;a=a<<24>>24!=0&1;break}a=n+-194|0;if(a>>>0>50){u=15;break}a=s[2432+(a<<2)>>2]|0;n=i+-1|0;if(n){t=t+1|0;u=9}}else{n=i;u=9}t:do{if((u|0)==9){e=r[t>>0]|0;f=(e&255)>>>3;if((f+-16|f+(a>>26))>>>0>7){u=15;break e}while(1){t=t+1|0;a=(e&255)+-128|a<<6;n=n+-1|0;if((a|0)>=0)break;if(!n)break t;e=r[t>>0]|0;if((e&-64)<<24>>24!=-128){u=15;break e}}s[l>>2]=0;s[o>>2]=a;a=i-n|0;break e}}while(0);s[l>>2]=a;a=-2}}}while(0);if((u|0)==15){s[l>>2]=0;s[(ca()|0)>>2]=84;a=-1}d=c;return a|0}function Ea(e){e=e|0;if(!e)e=1;else e=(s[e>>2]|0)==0;return e&1|0}function Ca(e,t,i){e=e|0;t=t|0;i=i|0;do{if(e){if(t>>>0<128){r[e>>0]=t;e=1;break}if(t>>>0<2048){r[e>>0]=t>>>6|192;r[e+1>>0]=t&63|128;e=2;break}if(t>>>0<55296|(t&-8192|0)==57344){r[e>>0]=t>>>12|224;r[e+1>>0]=t>>>6&63|128;r[e+2>>0]=t&63|128;e=3;break}if((t+-65536|0)>>>0<1048576){r[e>>0]=t>>>18|240;r[e+1>>0]=t>>>12&63|128;r[e+2>>0]=t>>>6&63|128;r[e+3>>0]=t&63|128;e=4;break}else{s[(ca()|0)>>2]=84;e=-1;break}}else e=1}while(0);return e|0}function Ta(e,t){e=e|0;t=t|0;if(!e)e=0;else e=Ca(e,t,0)|0;return e|0}function Aa(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0;p=d;d=d+112|0;h=p+40|0;c=p+24|0;u=p+16|0;n=p;f=p+52|0;a=r[t>>0]|0;if(fs(14909,a<<24>>24,4)|0){i=zs(1144)|0;if(!i)i=0;else{o=i;l=o+112|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(l|0));if(!(bs(t,43)|0))s[i>>2]=a<<24>>24==114?8:4;if(bs(t,101)|0){s[n>>2]=e;s[n+4>>2]=2;s[n+8>>2]=1;xe(221,n|0)|0;a=r[t>>0]|0}if(a<<24>>24==97){s[u>>2]=e;s[u+4>>2]=3;a=xe(221,u|0)|0;if(!(a&1024)){s[c>>2]=e;s[c+4>>2]=4;s[c+8>>2]=a|1024;xe(221,c|0)|0}t=s[i>>2]|128;s[i>>2]=t}else t=s[i>>2]|0;s[i+60>>2]=e;s[i+44>>2]=i+120;s[i+48>>2]=1024;a=i+75|0;r[a>>0]=-1;if((t&8|0)==0?(s[h>>2]=e,s[h+4>>2]=21505,s[h+8>>2]=f,(mt(54,h|0)|0)==0):0)r[a>>0]=10;s[i+32>>2]=14;s[i+36>>2]=4;s[i+40>>2]=5;s[i+12>>2]=2;if(!(s[598]|0))s[i+76>>2]=-1;Ct(2416);a=s[603]|0;s[i+56>>2]=a;if(a)s[a+52>>2]=i;s[603]=i;bt(2416)}}else{s[(ca()|0)>>2]=22;i=0}d=p;return i|0}function Ma(e){e=e|0;var t=0,i=0,a=0;i=(bs(e,43)|0)==0;t=r[e>>0]|0;i=i?t<<24>>24!=114&1:2;a=(bs(e,120)|0)==0;i=a?i:i|128;e=(bs(e,101)|0)==0;e=e?i:i|524288;e=t<<24>>24==114?e:e|64;e=t<<24>>24==119?e|512:e;return(t<<24>>24==97?e|1024:e)|0}function Pa(e){e=e|0;return 0}function Ra(e){e=e|0;return}function Ia(e){e=e|0;var t=0,i=0;t=d;d=d+16|0;i=t;s[i>>2]=s[e+60>>2];e=ba(Tt(6,i|0)|0)|0;d=t;return e|0}function Oa(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0;f=d;d=d+48|0;o=f+16|0;n=f;a=f+32|0;s[a>>2]=t;l=a+4|0;c=e+48|0;h=s[c>>2]|0;s[l>>2]=i-((h|0)!=0&1);u=e+44|0;s[a+8>>2]=s[u>>2];s[a+12>>2]=h;if(!(s[597]|0)){s[o>>2]=s[e+60>>2];s[o+4>>2]=a;s[o+8>>2]=2;a=ba(Ht(145,o|0)|0)|0}else{Oe(13,e|0);s[n>>2]=s[e+60>>2];s[n+4>>2]=a;s[n+8>>2]=2;a=ba(Ht(145,n|0)|0)|0;vt(0)}if((a|0)>=1){l=s[l>>2]|0;if(a>>>0>l>>>0){o=s[u>>2]|0;n=e+4|0;s[n>>2]=o;s[e+8>>2]=o+(a-l);if(!(s[c>>2]|0))a=i;else{s[n>>2]=o+1;r[t+(i+-1)>>0]=r[o>>0]|0;a=i}}}else{s[e>>2]=s[e>>2]|a&48^16;s[e+8>>2]=0;s[e+4>>2]=0}d=f;return a|0}function Fa(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0;a=d;d=d+32|0;n=a;r=a+20|0;s[n>>2]=s[e+60>>2];s[n+4>>2]=0;s[n+8>>2]=t;s[n+12>>2]=r;s[n+16>>2]=i;if((ba(Dt(140,n|0)|0)|0)<0){s[r>>2]=-1;e=-1}else e=s[r>>2]|0;d=a;return e|0}function $a(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0;b=d;d=d+48|0;h=b+16|0;f=b;r=b+32|0;p=e+28|0;a=s[p>>2]|0;s[r>>2]=a;m=e+20|0;a=(s[m>>2]|0)-a|0;s[r+4>>2]=a;s[r+8>>2]=t;s[r+12>>2]=i;u=e+60|0;c=e+44|0;t=2;a=a+i|0;while(1){if(!(s[597]|0)){s[h>>2]=s[u>>2];s[h+4>>2]=r;s[h+8>>2]=t;o=ba(Bt(146,h|0)|0)|0}else{Oe(14,e|0);s[f>>2]=s[u>>2];s[f+4>>2]=r;s[f+8>>2]=t;o=ba(Bt(146,f|0)|0)|0;vt(0)}if((a|0)==(o|0)){a=6;break}if((o|0)<0){a=8;break}a=a-o|0;n=s[r+4>>2]|0;if(o>>>0<=n>>>0)if((t|0)==2){s[p>>2]=(s[p>>2]|0)+o;l=n;t=2}else l=n;else{l=s[c>>2]|0;s[p>>2]=l;s[m>>2]=l;l=s[r+12>>2]|0;o=o-n|0;r=r+8|0;t=t+-1|0}s[r>>2]=(s[r>>2]|0)+o;s[r+4>>2]=l-o}if((a|0)==6){h=s[c>>2]|0;s[e+16>>2]=h+(s[e+48>>2]|0);e=h;s[p>>2]=e;s[m>>2]=e}else if((a|0)==8){s[e+16>>2]=0;s[p>>2]=0;s[m>>2]=0;s[e>>2]=s[e>>2]|32;if((t|0)==2)i=0;else i=i-(s[r+4>>2]|0)|0}d=b;return i|0}function Da(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0;n=d;d=d+80|0;a=n;s[e+36>>2]=4;if((s[e>>2]&64|0)==0?(s[a>>2]=s[e+60>>2],s[a+4>>2]=21505,s[a+8>>2]=n+12,(mt(54,a|0)|0)!=0):0)r[e+75>>0]=-1;a=$a(e,t,i)|0;d=n;return a|0}function Na(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0;r=e+84|0;n=s[r>>2]|0;o=i+256|0;a=fs(n,0,o)|0;a=(a|0)==0?o:a-n|0;i=a>>>0<i>>>0?a:i;Ku(t|0,n|0,i|0)|0;s[e+4>>2]=n+i;t=n+a|0;s[e+8>>2]=t;s[r>>2]=t;return i|0}function La(e){e=e|0;var t=0,i=0;t=e+74|0;i=r[t>>0]|0;r[t>>0]=i+255|i;t=e+20|0;i=e+44|0;if((s[t>>2]|0)>>>0>(s[i>>2]|0)>>>0)Nc[s[e+36>>2]&15](e,0,0)|0;s[e+16>>2]=0;s[e+28>>2]=0;s[t>>2]=0;t=s[e>>2]|0;if(t&20)if(!(t&4))t=-1;else{s[e>>2]=t|32;t=-1}else{t=s[i>>2]|0;s[e+8>>2]=t;s[e+4>>2]=t;t=0}return t|0}function za(e){e=e|0;var t=0,i=0;t=e+74|0;i=r[t>>0]|0;r[t>>0]=i+255|i;t=s[e>>2]|0;if(!(t&8)){s[e+8>>2]=0;s[e+4>>2]=0;t=s[e+44>>2]|0;s[e+28>>2]=t;s[e+20>>2]=t;s[e+16>>2]=t+(s[e+48>>2]|0);t=0}else{s[e>>2]=t|32;t=-1}return t|0}function ja(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;if((s[e+8>>2]|0)==0?(La(e)|0)!=0:0)t=-1;else if((Nc[s[e+32>>2]&15](e,t,1)|0)==1)t=n[t>>0]|0;else t=-1;d=i;return t|0}function Ha(e){e=e|0;var t=0,i=0,r=0;r=(s[e>>2]&1|0)!=0;if(!r){Ct(2416);i=s[e+52>>2]|0;t=e+56|0;if(i)s[i+56>>2]=s[t>>2];t=s[t>>2]|0;if(t)s[t+52>>2]=i;if((s[603]|0)==(e|0))s[603]=t;bt(2416)}t=Ua(e)|0;t=Vc[s[e+12>>2]&31](e)|0|t;i=s[e+92>>2]|0;if(i)js(i);if(!r)js(e);return t|0}function Ba(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Pa(e)|0)==0;e=(s[e>>2]|0)>>>5&1}else e=(s[e>>2]|0)>>>5&1;return e|0}function Ua(e){e=e|0;var t=0,i=0;do{if(e){if((s[e+76>>2]|0)<=-1){t=Ms(e)|0;break}i=(Pa(e)|0)==0;t=Ms(e)|0;if(!i)Ra(e)}else{if(!(s[660]|0))t=0;else t=Ua(s[660]|0)|0;Ct(2416);e=s[603]|0;if(e)do{if((s[e+76>>2]|0)>-1)i=Pa(e)|0;else i=0;if((s[e+20>>2]|0)>>>0>(s[e+28>>2]|0)>>>0)t=Ms(e)|0|t;if(i)Ra(e);e=s[e+56>>2]|0}while((e|0)!=0);bt(2416)}}while(0);return t|0}function Qa(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0;if((s[i+76>>2]|0)>-1)p=Pa(i)|0;else p=0;a=t+-1|0;if((t|0)<2){m=i+74|0;h=r[m>>0]|0;r[m>>0]=h+255|h;if(p)Ra(i);if(!a)r[e>>0]=0;else e=0}else{e:do{if(a){f=i+4|0;h=i+8|0;o=e;while(1){l=s[f>>2]|0;b=l;c=(s[h>>2]|0)-b|0;u=fs(l,10,c)|0;g=(u|0)==0;u=g?c:1-b+u|0;b=u>>>0<a>>>0;u=b?u:a;Ku(o|0,l|0,u|0)|0;l=s[f>>2]|0;c=l+u|0;s[f>>2]=c;t=o+u|0;d=a-u|0;if(!(g&b)){m=18;break e}if(c>>>0<(s[h>>2]|0)>>>0){u=u+1|0;s[f>>2]=l+u;l=n[c>>0]|0}else{a=ja(i)|0;if((a|0)<0)break;u=u+1|0;l=a}a=d+-1|0;o=o+u|0;r[t>>0]=l;if(!((a|0)!=0&(l&255|0)!=10)){t=o;m=18;break e}}if((t|0)!=(e|0)?(s[i>>2]&16|0)!=0:0)m=18;else e=0}else{t=e;m=18}}while(0);if((m|0)==18)if(!e)e=0;else r[t>>0]=0;if(p)Ra(i)}return e|0}function Va(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0;n=d;d=d+32|0;a=n+16|0;i=n;if(fs(14909,r[t>>0]|0,4)|0){o=Ma(t)|0|32768;s[i>>2]=e;s[i+4>>2]=o;s[i+8>>2]=438;i=ba(At(5,i|0)|0)|0;if((i|0)>=0){e=Aa(i,t)|0;if(!e){s[a>>2]=i;Tt(6,a|0)|0;e=0}}else e=0}else{s[(ca()|0)>>2]=22;e=0}d=n;return e|0}function Ya(e,t){e=e|0;t=t|0;return(is(e,ys(e)|0,1,t)|0)+-1|0}function Wa(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var n=0,o=0,l=0,u=0,c=0,d=0;u=ie(i,t)|0;if((s[a+76>>2]|0)>-1)c=Pa(a)|0;else c=0;n=a+74|0;o=r[n>>0]|0;r[n>>0]=o+255|o;n=a+4|0;o=s[n>>2]|0;l=(s[a+8>>2]|0)-o|0;if((l|0)>0){l=l>>>0<u>>>0?l:u;Ku(e|0,o|0,l|0)|0;s[n>>2]=o+l;e=e+l|0;n=u-l|0}else n=u;e:do{if(!n)d=13;else{l=a+32|0;o=n;while(1){if(La(a)|0){i=o;break}n=Nc[s[l>>2]&15](a,e,o)|0;if((n+1|0)>>>0<2){i=o;break}if((o|0)==(n|0)){d=13;break e}else{e=e+n|0;o=o-n|0}}if(c)Ra(a);i=((u-i|0)>>>0)/(t>>>0)|0}}while(0);if((d|0)==13)if(c)Ra(a);return i|0}function Ga(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;if((i|0)==1)t=t-(s[e+8>>2]|0)+(s[e+4>>2]|0)|0;a=e+20|0;r=e+28|0;if((s[a>>2]|0)>>>0>(s[r>>2]|0)>>>0?(Nc[s[e+36>>2]&15](e,0,0)|0,(s[a>>2]|0)==0):0)t=-1;else{s[e+16>>2]=0;s[r>>2]=0;s[a>>2]=0;if((Nc[s[e+40>>2]&15](e,t,i)|0)<0)t=-1;else{s[e+8>>2]=0;s[e+4>>2]=0;s[e>>2]=s[e>>2]&-17;t=0}}return t|0}function Ka(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;if((s[e+76>>2]|0)>-1){r=(Pa(e)|0)==0;t=Ga(e,t,i)|0;if(!r)Ra(e)}else t=Ga(e,t,i)|0;return t|0}function Ja(e,t,i){e=e|0;t=t|0;i=i|0;return Ka(e,t,i)|0}function Xa(e){e=e|0;var t=0;if(!(s[e>>2]&128))t=1;else t=(s[e+20>>2]|0)>>>0>(s[e+28>>2]|0)>>>0?2:1;t=Nc[s[e+40>>2]&15](e,0,t)|0;if((t|0)>=0)t=t-(s[e+8>>2]|0)+(s[e+4>>2]|0)+(s[e+20>>2]|0)-(s[e+28>>2]|0)|0;return t|0}function Za(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Pa(e)|0)==0;e=Xa(e)|0}else e=Xa(e)|0;return e|0}function es(e){e=e|0;return Za(e)|0}function ts(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0;a=i+16|0;n=s[a>>2]|0;if(!n)if(!(za(i)|0)){n=s[a>>2]|0;o=4}else a=0;else o=4;e:do{if((o|0)==4){l=i+20|0;o=s[l>>2]|0;if((n-o|0)>>>0<t>>>0){a=Nc[s[i+36>>2]&15](i,e,t)|0;break}t:do{if((r[i+75>>0]|0)>-1){a=t;while(1){if(!a){n=o;a=0;break t}n=a+-1|0;if((r[e+n>>0]|0)==10)break;else a=n}if((Nc[s[i+36>>2]&15](i,e,a)|0)>>>0<a>>>0)break e;t=t-a|0;e=e+a|0;n=s[l>>2]|0}else{n=o;a=0}}while(0);Ku(n|0,e|0,t|0)|0;s[l>>2]=(s[l>>2]|0)+t;a=a+t|0}}while(0);return a|0}function is(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0;a=ie(i,t)|0;if((s[r+76>>2]|0)>-1){n=(Pa(r)|0)==0;e=ts(e,a,r)|0;if(!n)Ra(r)}else e=ts(e,a,r)|0;if((e|0)!=(a|0))i=(e>>>0)/(t>>>0)|0;return i|0}function rs(e){e=e|0;var t=0;if((s[e+76>>2]|0)>-1){t=(Pa(e)|0)==0;Ga(e,0,0)|0;s[e>>2]=s[e>>2]&-33;if(!t)Ra(e)}else{Ga(e,0,0)|0;s[e>>2]=s[e>>2]&-33}return}function as(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;r=d;d=d+16|0;a=r;s[a>>2]=i;i=us(e,t,a)|0;d=r;return i|0}function ss(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0;l=d;d=d+16|0;r=l;a=zs(240)|0;do{if(a){s[r>>2]=s[i>>2];r=ls(a,240,t,r)|0;if(r>>>0<240){t=Bs(a,r+1|0)|0;s[e>>2]=(t|0)!=0?t:a;break}js(a);if((r|0)>=0?(o=r+1|0,n=zs(o)|0,s[e>>2]=n,(n|0)!=0):0)r=ls(n,o,t,i)|0;else r=-1}else r=-1}while(0);d=l;return r|0}function ns(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0;v=d;d=d+224|0;p=v+80|0;g=v+96|0;b=v;m=v+136|0;a=g;n=a+40|0;do{s[a>>2]=0;a=a+4|0}while((a|0)<(n|0));s[p>>2]=s[i>>2];if((Ps(0,t,p,b,g)|0)<0)i=-1;else{if((s[e+76>>2]|0)>-1)f=Pa(e)|0;else f=0;i=s[e>>2]|0;h=i&32;if((r[e+74>>0]|0)<1)s[e>>2]=i&-33;i=e+48|0;if(!(s[i>>2]|0)){n=e+44|0;o=s[n>>2]|0;s[n>>2]=m;l=e+28|0;s[l>>2]=m;u=e+20|0;s[u>>2]=m;s[i>>2]=80;c=e+16|0;s[c>>2]=m+80;a=Ps(e,t,p,b,g)|0;if(o){Nc[s[e+36>>2]&15](e,0,0)|0;a=(s[u>>2]|0)==0?-1:a;s[n>>2]=o;s[i>>2]=0;s[c>>2]=0;s[l>>2]=0;s[u>>2]=0}}else a=Ps(e,t,p,b,g)|0;i=s[e>>2]|0;s[e>>2]=i|h;if(f)Ra(e);i=(i&32|0)==0?a:-1}d=v;return i|0}function os(e,t,i){e=e|0;t=t|0;i=i|0;var o=0,l=0,f=0,h=0,p=0,m=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,I=0,O=0,F=0,$=0,D=0,N=0,L=0,z=0,j=0,H=0;j=d;d=d+304|0;I=j+16|0;F=j+8|0;O=j+33|0;$=j;x=j+32|0;if((s[e+76>>2]|0)>-1)z=Pa(e)|0;else z=0;o=r[t>>0]|0;e:do{if(o<<24>>24){D=e+4|0;N=e+100|0;P=e+108|0;q=e+8|0;E=O+10|0;C=O+33|0;T=F+4|0;A=O+46|0;M=O+94|0;f=o;o=0;h=t;v=0;l=0;t=0;t:while(1){i:do{if(!(ua(f&255)|0)){f=(r[h>>0]|0)==37;r:do{if(f){b=h+1|0;p=r[b>>0]|0;a:do{switch(p<<24>>24){case 37:break r;case 42:{S=0;p=h+2|0;break}default:{p=(p&255)+-48|0;if(p>>>0<10?(r[h+2>>0]|0)==36:0){s[I>>2]=s[i>>2];while(1){S=(s[I>>2]|0)+(4-1)&~(4-1);f=s[S>>2]|0;s[I>>2]=S+4;if(p>>>0>1)p=p+-1|0;else break}S=f;p=h+3|0;break a}p=(s[i>>2]|0)+(4-1)&~(4-1);S=s[p>>2]|0;s[i>>2]=p+4;p=b}}}while(0);f=r[p>>0]|0;h=f&255;if((h+-48|0)>>>0<10){f=0;while(1){b=(f*10|0)+-48+h|0;p=p+1|0;f=r[p>>0]|0;h=f&255;if((h+-48|0)>>>0>=10)break;else f=b}}else b=0;if(f<<24>>24==109){p=p+1|0;g=r[p>>0]|0;f=(S|0)!=0&1;l=0;t=0}else{g=f;f=0}h=p+1|0;switch(g&255|0){case 104:{_=(r[h>>0]|0)==104;h=_?p+2|0:h;p=_?-2:-1;break}case 108:{_=(r[h>>0]|0)==108;h=_?p+2|0:h;p=_?3:1;break}case 106:{p=3;break}case 116:case 122:{p=1;break}case 76:{p=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{h=p;p=0;break}default:{L=152;break t}}g=n[h>>0]|0;w=(g&47|0)==3;g=w?g|32:g;w=w?1:p;switch(g|0){case 99:{_=v;y=(b|0)<1?1:b;break}case 91:{_=v;y=b;break}case 110:{if(!S){p=v;break i}switch(w|0){case-2:{r[S>>0]=v;p=v;break i}case-1:{a[S>>1]=v;p=v;break i}case 0:{s[S>>2]=v;p=v;break i}case 1:{s[S>>2]=v;p=v;break i}case 3:{p=S;s[p>>2]=v;s[p+4>>2]=((v|0)<0)<<31>>31;p=v;break i}default:{p=v;break i}}}default:{pa(e,0);do{p=s[D>>2]|0;if(p>>>0<(s[N>>2]|0)>>>0){s[D>>2]=p+1;p=n[p>>0]|0}else p=ma(e)|0}while((ua(p)|0)!=0);p=s[D>>2]|0;if(s[N>>2]|0){p=p+-1|0;s[D>>2]=p}_=(s[P>>2]|0)+v+p-(s[q>>2]|0)|0;y=b}}pa(e,y);p=s[D>>2]|0;b=s[N>>2]|0;if(p>>>0<b>>>0)s[D>>2]=p+1;else{if((ma(e)|0)<0){L=152;break t}b=s[N>>2]|0}if(b)s[D>>2]=(s[D>>2]|0)+-1;a:do{switch(g|0){case 91:case 99:case 115:{k=(g|0)==99;s:do{if((g&239|0)==99){Vu(O|0,-1,257)|0;r[O>>0]=0;if((g|0)==115){r[C>>0]=0;r[E>>0]=0;r[E+1>>0]=0;r[E+2>>0]=0;r[E+3>>0]=0;r[E+4>>0]=0}}else{H=h+1|0;v=(r[H>>0]|0)==94;p=v&1;g=v?H:h;h=v?h+2|0:H;Vu(O|0,v&1|0,257)|0;r[O>>0]=0;switch(r[h>>0]|0){case 45:{v=(p^1)&255;r[A>>0]=v;h=g+2|0;break}case 93:{v=(p^1)&255;r[M>>0]=v;h=g+2|0;break}default:v=(p^1)&255}while(1){p=r[h>>0]|0;n:do{switch(p<<24>>24){case 0:{L=152;break t}case 93:break s;case 45:{g=h+1|0;p=r[g>>0]|0;switch(p<<24>>24){case 93:case 0:{p=45;break n}default:{}}h=r[h+-1>>0]|0;if((h&255)<(p&255)){h=h&255;do{h=h+1|0;r[O+h>>0]=v;p=r[g>>0]|0}while((h|0)<(p&255|0));h=g}else h=g;break}default:{}}}while(0);r[O+((p&255)+1)>>0]=v;h=h+1|0}}}while(0);g=k?y+1|0:31;v=(w|0)==1;w=(f|0)!=0;s:do{if(v){if(w){t=zs(g<<2)|0;if(!t){l=0;L=152;break t}}else t=S;s[F>>2]=0;s[T>>2]=0;l=0;n:while(1){b=(t|0)==0;do{o:while(1){p=s[D>>2]|0;if(p>>>0<(s[N>>2]|0)>>>0){s[D>>2]=p+1;p=n[p>>0]|0}else p=ma(e)|0;if(!(r[O+(p+1)>>0]|0))break n;r[x>>0]=p;switch(qa($,x,1,F)|0){case-1:{l=0;L=152;break t}case-2:break;default:break o}}if(!b){s[t+(l<<2)>>2]=s[$>>2];l=l+1|0}}while(!(w&(l|0)==(g|0)));l=g<<1|1;p=Bs(t,l<<2)|0;if(!p){l=0;L=152;break t}H=g;g=l;t=p;l=H}if(!(Ea(F)|0)){l=0;L=152;break t}else{b=l;l=0}}else{if(w){l=zs(g)|0;if(!l){l=0;t=0;L=152;break t}else p=0;while(1){do{t=s[D>>2]|0;if(t>>>0<(s[N>>2]|0)>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if(!(r[O+(t+1)>>0]|0)){b=p;t=0;break s}r[l+p>>0]=t;p=p+1|0}while((p|0)!=(g|0));t=g<<1|1;p=Bs(l,t)|0;if(!p){t=0;L=152;break t}else{H=g;g=t;l=p;p=H}}}if(!S){l=b;while(1){t=s[D>>2]|0;if(t>>>0<l>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if(!(r[O+(t+1)>>0]|0)){b=0;l=0;t=0;break s}l=s[N>>2]|0}}else{l=0;while(1){t=s[D>>2]|0;if(t>>>0<b>>>0){s[D>>2]=t+1;t=n[t>>0]|0}else t=ma(e)|0;if(!(r[O+(t+1)>>0]|0)){b=l;l=S;t=0;break s}r[S+l>>0]=t;b=s[N>>2]|0;l=l+1|0}}}}while(0);p=s[D>>2]|0;if(s[N>>2]|0){p=p+-1|0;s[D>>2]=p}p=p-(s[q>>2]|0)+(s[P>>2]|0)|0;if(!p)break t;if(!((p|0)==(y|0)|k^1))break t;do{if(w)if(v){s[S>>2]=t;break}else{s[S>>2]=l;break}}while(0);if(!k){if(t)s[t+(b<<2)>>2]=0;if(!l){l=0;break a}r[l+b>>0]=0}break}case 120:case 88:case 112:{p=16;L=134;break}case 111:{p=8;L=134;break}case 117:case 100:{p=10;L=134;break}case 105:{p=0;L=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{m=+fa(e,w,0);if((s[P>>2]|0)==((s[q>>2]|0)-(s[D>>2]|0)|0))break t;if(S)switch(w|0){case 0:{u[S>>2]=m;break a}case 1:{c[S>>3]=m;break a}case 2:{c[S>>3]=m;break a}default:break a}break}default:{}}}while(0);a:do{if((L|0)==134){L=0;p=ha(e,p,0,-1,-1)|0;if((s[P>>2]|0)==((s[q>>2]|0)-(s[D>>2]|0)|0))break t;if((S|0)!=0&(g|0)==112){s[S>>2]=p;break}if(S)switch(w|0){case-2:{r[S>>0]=p;break a}case-1:{a[S>>1]=p;break a}case 0:{s[S>>2]=p;break a}case 1:{s[S>>2]=p;break a}case 3:{H=S;s[H>>2]=p;s[H+4>>2]=R;break a}default:break a}}}while(0);o=((S|0)!=0&1)+o|0;p=(s[P>>2]|0)+_+(s[D>>2]|0)-(s[q>>2]|0)|0;break i}}while(0);h=h+(f&1)|0;pa(e,0);f=s[D>>2]|0;if(f>>>0<(s[N>>2]|0)>>>0){s[D>>2]=f+1;f=n[f>>0]|0}else f=ma(e)|0;if((f|0)!=(n[h>>0]|0)){L=21;break t}p=v+1|0}else{while(1){f=h+1|0;if(!(ua(n[f>>0]|0)|0))break;else h=f}pa(e,0);do{f=s[D>>2]|0;if(f>>>0<(s[N>>2]|0)>>>0){s[D>>2]=f+1;f=n[f>>0]|0}else f=ma(e)|0}while((ua(f)|0)!=0);f=s[D>>2]|0;if(s[N>>2]|0){f=f+-1|0;s[D>>2]=f}p=(s[P>>2]|0)+v+f-(s[q>>2]|0)|0}}while(0);h=h+1|0;f=r[h>>0]|0;if(!(f<<24>>24))break e;else v=p}if((L|0)==21){if(s[N>>2]|0)s[D>>2]=(s[D>>2]|0)+-1;if((o|0)!=0|(f|0)>-1)break;else{o=0;L=153}}else if((L|0)==152)if(!o){o=f;L=153}if((L|0)==153){f=o;o=-1}if(f){js(l);js(t)}}else o=0}while(0);if(z)Ra(e);d=j;return o|0}function ls(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var n=0,o=0,l=0,u=0,c=0,f=0,h=0;h=d;d=d+128|0;n=h+112|0;f=h;o=f;l=2684;u=o+112|0;do{s[o>>2]=s[l>>2];o=o+4|0;l=l+4|0}while((o|0)<(u|0));if((t+-1|0)>>>0>2147483646)if(!t){t=1;c=4}else{s[(ca()|0)>>2]=75;t=-1}else{n=e;c=4}if((c|0)==4){c=-2-n|0;c=t>>>0>c>>>0?c:t;s[f+48>>2]=c;e=f+20|0;s[e>>2]=n;s[f+44>>2]=n;t=n+c|0;n=f+16|0;s[n>>2]=t;s[f+28>>2]=t;t=ns(f,i,a)|0;if(c){i=s[e>>2]|0;r[i+(((i|0)==(s[n>>2]|0))<<31>>31)>>0]=0}}d=h;return t|0}function us(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0;n=d;d=d+112|0;r=n;a=r;o=a+112|0;do{s[a>>2]=0;a=a+4|0}while((a|0)<(o|0));s[r+32>>2]=15;s[r+44>>2]=e;s[r+76>>2]=-1;s[r+84>>2]=e;o=os(r,t,i)|0;d=n;return o|0}function cs(e){e=e|0;var t=0,i=0,a=0,s=0;while(1){t=e+1|0;if(!(ua(r[e>>0]|0)|0))break;else e=t}i=r[e>>0]|0;switch(i<<24>>24|0){case 45:{a=1;s=5;break}case 43:{a=0;s=5;break}default:a=0}if((s|0)==5){e=t;i=r[t>>0]|0}t=(i<<24>>24)+-48|0;if(t>>>0<10){i=e;e=0;do{i=i+1|0;e=(e*10|0)-t|0;t=(r[i>>0]|0)+-48|0}while(t>>>0<10)}else e=0;return((a|0)!=0?e:0-e|0)|0}function ds(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0;g=d;d=d+208|0;p=g+8|0;m=g;a=ie(i,t)|0;h=m;s[h>>2]=1;s[h+4>>2]=0;if(a){l=a-i|0;s[p+4>>2]=i;s[p>>2]=i;n=i;t=i;o=2;while(1){t=t+i+n|0;s[p+(o<<2)>>2]=t;if(t>>>0<a>>>0){h=n;n=t;o=o+1|0;t=h}else break}h=0-i|0;u=e+l|0;f=m+4|0;if((l|0)>0){l=u;a=1;o=1;while(1){do{if((a&3|0)==3){Is(e,i,r,o,p);c=s[f>>2]|0;t=c<<30|(s[m>>2]|0)>>>2;s[m>>2]=t;s[f>>2]=c>>>2;o=o+2|0}else{t=o+-1|0;if((s[p+(t<<2)>>2]|0)>>>0<(l-e|0)>>>0)Is(e,i,r,o,p);else Os(e,i,r,m,o,0,p);if((o|0)==1){t=s[m>>2]|0;s[f>>2]=t>>>31|s[f>>2]<<1;t=t<<1;s[m>>2]=t;o=0;break}if(t>>>0>31){a=s[m>>2]|0;s[f>>2]=a;s[m>>2]=0;t=o+-33|0;n=0}else{a=s[f>>2]|0;n=s[m>>2]|0}s[f>>2]=n>>>(32-t|0)|a<<t;t=n<<t;s[m>>2]=t;o=1}}while(0);a=t|1;s[m>>2]=a;t=e+i|0;if(t>>>0>=u>>>0){a=t;break}else e=t}}else{a=e;o=1}Os(a,i,r,m,o,0,p);c=m+4|0;t=s[m>>2]|0;if(!((o|0)==1&(t|0)==1&(s[c>>2]|0)==0)){n=a;while(1){if((o|0)<2){a=t+-1|0;do{if(a){if(!(a&1)){l=a;a=0;do{a=a+1|0;l=l>>>1}while((l&1|0)==0);if(!a)b=24}else b=24;if((b|0)==24){b=0;u=s[f>>2]|0;if(!u){a=64;b=30;break}if(!(u&1)){l=u;a=0}else{e=0;l=u;a=0;break}while(1){e=a+1|0;l=l>>>1;if(l&1){l=e;break}else a=e}if(!l){e=0;l=u;a=0;break}else a=a+33|0}if(a>>>0>31)b=30;else{e=a;l=s[f>>2]|0}}else{a=32;b=30}}while(0);if((b|0)==30){b=0;t=s[f>>2]|0;s[m>>2]=t;s[f>>2]=0;e=a+-32|0;l=0}s[m>>2]=l<<32-e|t>>>e;s[f>>2]=l>>>e;n=n+h|0;a=a+o|0}else{e=t>>>30;u=e|s[f>>2]<<2;a=o+-2|0;s[m>>2]=(t<<1&2147483646|e<<31)^3;s[f>>2]=u>>>1;Os(n+(0-((s[p+(a<<2)>>2]|0)+i))|0,i,r,m,o+-1|0,1,p);u=s[m>>2]|0;s[f>>2]=u>>>31|s[f>>2]<<1;s[m>>2]=u<<1|1;n=n+h|0;Os(n,i,r,m,a,1,p)}t=s[m>>2]|0;if((a|0)==1&(t|0)==1&(s[c>>2]|0)==0)break;else o=a}}}d=g;return}function fs(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0;o=t&255;a=(i|0)!=0;e:do{if(a&(e&3|0)!=0){n=t&255;while(1){if((r[e>>0]|0)==n<<24>>24){l=6;break e}e=e+1|0;i=i+-1|0;a=(i|0)!=0;if(!(a&(e&3|0)!=0)){l=5;break}}}else l=5}while(0);if((l|0)==5)if(a)l=6;else i=0;e:do{if((l|0)==6){n=t&255;if((r[e>>0]|0)!=n<<24>>24){a=ie(o,16843009)|0;t:do{if(i>>>0>3)while(1){o=s[e>>2]^a;if((o&-2139062144^-2139062144)&o+-16843009)break;e=e+4|0;i=i+-4|0;if(i>>>0<=3){l=11;break t}}else l=11}while(0);if((l|0)==11)if(!i){i=0;break}while(1){if((r[e>>0]|0)==n<<24>>24)break e;e=e+1|0;i=i+-1|0;if(!i){i=0;break}}}}}while(0);return((i|0)!=0?e:0)|0}function hs(e,t,i){e=e|0;t=t|0;i=i|0;var a=0;a=t&255;do{if(!i){t=0;break}i=i+-1|0;t=e+i|0}while((r[t>>0]|0)!=a<<24>>24);return t|0}function ps(e,t){e=e|0;t=t|0;var i=0,a=0;i=t;e:do{if(!((i^e)&3)){if(i&3)do{i=r[t>>0]|0;r[e>>0]=i;if(!(i<<24>>24))break e;t=t+1|0;e=e+1|0}while((t&3|0)!=0);i=s[t>>2]|0;if(!((i&-2139062144^-2139062144)&i+-16843009)){a=e;while(1){t=t+4|0;e=a+4|0;s[a>>2]=i;i=s[t>>2]|0;if((i&-2139062144^-2139062144)&i+-16843009)break;else a=e}}a=8}else a=8}while(0);if((a|0)==8){a=r[t>>0]|0;r[e>>0]=a;if(a<<24>>24)do{t=t+1|0;e=e+1|0;a=r[t>>0]|0;r[e>>0]=a}while(a<<24>>24!=0)}return e|0}function ms(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0;n=t;do{if(!((n^e)&3)){a=(i|0)!=0;e:do{if(a&(n&3|0)!=0)while(1){n=r[t>>0]|0;r[e>>0]=n;if(!(n<<24>>24))break e;i=i+-1|0;t=t+1|0;e=e+1|0;a=(i|0)!=0;if(!(a&(t&3|0)!=0)){o=5;break}}else o=5}while(0);if((o|0)==5)if(!a){i=0;break}if(r[t>>0]|0){e:do{if(i>>>0>3)do{a=s[t>>2]|0;if((a&-2139062144^-2139062144)&a+-16843009)break e;s[e>>2]=a;i=i+-4|0;t=t+4|0;e=e+4|0}while(i>>>0>3)}while(0);o=11}}else o=11}while(0);e:do{if((o|0)==11)if(!i)i=0;else while(1){o=r[t>>0]|0;r[e>>0]=o;if(!(o<<24>>24))break e;i=i+-1|0;e=e+1|0;if(!i){i=0;break}else t=t+1|0}}while(0);Vu(e|0,0,i|0)|0;return e|0}function bs(e,t){e=e|0;t=t|0;e=gs(e,t)|0;return((r[e>>0]|0)==(t&255)<<24>>24?e:0)|0}function gs(e,t){e=e|0;t=t|0;var i=0,a=0,n=0;a=t&255;e:do{if(!a)e=e+(ys(e)|0)|0;else{if(e&3){i=t&255;do{n=r[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==i<<24>>24)break e;e=e+1|0}while((e&3|0)!=0)}a=ie(a,16843009)|0;i=s[e>>2]|0;t:do{if(!((i&-2139062144^-2139062144)&i+-16843009))do{n=i^a;if((n&-2139062144^-2139062144)&n+-16843009)break t;e=e+4|0;i=s[e>>2]|0}while(((i&-2139062144^-2139062144)&i+-16843009|0)==0)}while(0);i=t&255;while(1){n=r[e>>0]|0;if(n<<24>>24==0?1:n<<24>>24==i<<24>>24)break;else e=e+1|0}}}while(0);return e|0}function vs(e,t){e=e|0;t=t|0;ps(e,t)|0;return e|0}function ws(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0;n=d;d=d+32|0;a=n;i=r[t>>0]|0;if(i<<24>>24!=0?(r[t+1>>0]|0)!=0:0){s[a>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;s[a+20>>2]=0;s[a+24>>2]=0;s[a+28>>2]=0;do{o=a+(((i&255)>>>5&255)<<2)|0;s[o>>2]=s[o>>2]|1<<(i&31);t=t+1|0;i=r[t>>0]|0}while(i<<24>>24!=0);t=r[e>>0]|0;e:do{if(!(t<<24>>24))i=e;else{i=e;do{if(s[a+(((t&255)>>>5&255)<<2)>>2]&1<<(t&31))break e;i=i+1|0;t=r[i>>0]|0}while(t<<24>>24!=0)}}while(0);i=i-e|0}else i=(gs(e,i<<24>>24)|0)-e|0;d=n;return i|0}function ks(e){e=e|0;var t=0,i=0;i=(ys(e)|0)+1|0;t=zs(i)|0;if(!t)t=0;else Ku(t|0,e|0,i|0)|0;return t|0}function ys(e){e=e|0;var t=0,i=0,a=0;a=e;e:do{if(!(a&3))i=4;else{t=e;e=a;while(1){if(!(r[t>>0]|0))break e;t=t+1|0;e=t;if(!(e&3)){e=t;i=4;break}}}}while(0);if((i|0)==4){while(1){t=s[e>>2]|0;if(!((t&-2139062144^-2139062144)&t+-16843009))e=e+4|0;else break}if((t&255)<<24>>24)do{e=e+1|0}while((r[e>>0]|0)!=0)}return e-a|0}function _s(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,s=0,n=0;a=e+(ys(e)|0)|0;e:do{if(i)while(1){s=r[t>>0]|0;if(!(s<<24>>24))break e;i=i+-1|0;n=a+1|0;r[a>>0]=s;if(!i){a=n;break}else{t=t+1|0;a=n}}}while(0);r[a>>0]=0;return e|0}function Ss(e,t,i){e=e|0;t=t|0;i=i|0;ms(e,t,i)|0;return e|0}function xs(e,t){e=e|0;t=t|0;return hs(e,t,(ys(e)|0)+1|0)|0}function qs(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0;o=d;d=d+32|0;n=o;s[n>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;a=r[t>>0]|0;do{if(!(a<<24>>24))t=0;else{if(!(r[t+1>>0]|0)){t=e;while(1)if((r[t>>0]|0)==a<<24>>24)t=t+1|0;else break;t=t-e|0;break}else{i=t;t=a}do{a=n+(((t&255)>>>5&255)<<2)|0;s[a>>2]=s[a>>2]|1<<(t&31);i=i+1|0;t=r[i>>0]|0}while(t<<24>>24!=0);i=r[e>>0]|0;e:do{if(!(i<<24>>24))t=e;else{t=e;do{if(!(s[n+(((i&255)>>>5&255)<<2)>>2]&1<<(i&31)))break e;t=t+1|0;i=r[t>>0]|0}while(i<<24>>24!=0)}}while(0);t=t-e|0}}while(0);d=o;return t|0}function Es(e,t){e=e|0;t=t|0;var i=0,a=0;if(!e){e=s[699]|0;if(!e)e=0;else{a=e;i=3}}else{a=e;i=3}do{if((i|0)==3){i=qs(a,t)|0;e=a+i|0;if(!(r[e>>0]|0)){s[699]=0;e=0;break}i=(ws(e,t)|0)+i|0;t=a+i|0;s[699]=t;if(!(r[t>>0]|0)){s[699]=0;break}else{s[699]=a+(i+1);r[t>>0]=0;break}}}while(0);return e|0}function Cs(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,o=0,l=0,u=0;l=e+4|0;i=s[l>>2]|0;u=e+100|0;if(i>>>0<(s[u>>2]|0)>>>0){s[l>>2]=i+1;i=n[i>>0]|0}else i=ma(e)|0;switch(i|0){case 43:case 45:{r=(i|0)==45&1;i=s[l>>2]|0;if(i>>>0<(s[u>>2]|0)>>>0){s[l>>2]=i+1;i=n[i>>0]|0}else i=ma(e)|0;if((t|0)!=0&(i+-48|0)>>>0>9?(s[u>>2]|0)!=0:0){s[l>>2]=(s[l>>2]|0)+-1;o=r}else o=r;break}default:o=0}if((i+-48|0)>>>0>9)if(!(s[u>>2]|0)){r=-2147483648;i=0}else{s[l>>2]=(s[l>>2]|0)+-1;r=-2147483648;i=0}else{r=0;do{r=i+-48+(r*10|0)|0;i=s[l>>2]|0;if(i>>>0<(s[u>>2]|0)>>>0){s[l>>2]=i+1;i=n[i>>0]|0}else i=ma(e)|0}while((i+-48|0)>>>0<10&(r|0)<214748364);t=((r|0)<0)<<31>>31;if((i+-48|0)>>>0<10){do{t=ic(r|0,t|0,10,0)|0;r=R;i=Wu(i|0,((i|0)<0)<<31>>31|0,-48,-1)|0;r=Wu(i|0,R|0,t|0,r|0)|0;t=R;i=s[l>>2]|0;if(i>>>0<(s[u>>2]|0)>>>0){s[l>>2]=i+1;i=n[i>>0]|0}else i=ma(e)|0}while((i+-48|0)>>>0<10&((t|0)<21474836|(t|0)==21474836&r>>>0<2061584302));a=r}else a=r;if((i+-48|0)>>>0<10)do{i=s[l>>2]|0;if(i>>>0<(s[u>>2]|0)>>>0){s[l>>2]=i+1;i=n[i>>0]|0}else i=ma(e)|0}while((i+-48|0)>>>0<10);if(s[u>>2]|0)s[l>>2]=(s[l>>2]|0)+-1;e=(o|0)!=0;i=Qu(0,0,a|0,t|0)|0;r=e?R:t;i=e?i:a}R=r;return i|0}function Ts(e){e=e|0;if(!(s[e+68>>2]|0))Ra(e);return}function As(e){e=e|0;if(!(s[e+68>>2]|0))Ra(e);return}function Ms(e){e=e|0;var t=0,i=0,r=0,a=0,n=0,o=0;t=e+20|0;n=e+28|0;if((s[t>>2]|0)>>>0>(s[n>>2]|0)>>>0?(Nc[s[e+36>>2]&15](e,0,0)|0,(s[t>>2]|0)==0):0)t=-1;else{o=e+4|0;i=s[o>>2]|0;r=e+8|0;a=s[r>>2]|0;if(i>>>0<a>>>0)Nc[s[e+40>>2]&15](e,i-a|0,1)|0;s[e+16>>2]=0;s[n>>2]=0;s[t>>2]=0;s[r>>2]=0;s[o>>2]=0;t=0}return t|0}function Ps(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,p=0,m=0,b=0.0,g=0,v=0,w=0,k=0,y=0.0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,I=0,O=0,F=0,$=0,D=0,N=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,V=0,Y=0,W=0,G=0,K=0,J=0,X=0,Z=0,ee=0,te=0,re=0,ae=0,se=0,ne=0,oe=0;oe=d;d=d+624|0;te=oe+24|0;ae=oe+16|0;re=oe+588|0;K=oe+576|0;ee=oe;Y=oe+536|0;ne=oe+8|0;se=oe+528|0;N=(e|0)!=0;L=Y+40|0;V=L;Y=Y+39|0;W=ne+4|0;G=K+12|0;K=K+11|0;J=re;X=G;Z=X-J|0;z=-2-J|0;j=X+2|0;H=te+288|0;B=re+9|0;U=B;Q=re+8|0;u=0;_=t;f=0;t=0;e:while(1){do{if((u|0)>-1)if((f|0)>(2147483647-u|0)){s[(ca()|0)>>2]=75;u=-1;break}else{u=f+u|0;break}}while(0);f=r[_>>0]|0;if(!(f<<24>>24)){D=245;break}else p=_;t:while(1){switch(f<<24>>24){case 37:{f=p;D=9;break t}case 0:{f=p;break t}default:{}}$=p+1|0;f=r[$>>0]|0;p=$}t:do{if((D|0)==9)while(1){D=0;if((r[f+1>>0]|0)!=37)break t;p=p+1|0;f=f+2|0;if((r[f>>0]|0)==37)D=9;else break}}while(0);x=p-_|0;if(N?(s[e>>2]&32|0)==0:0)ts(_,x,e)|0;if((p|0)!=(_|0)){_=f;f=x;continue}g=f+1|0;p=r[g>>0]|0;m=(p<<24>>24)+-48|0;if(m>>>0<10){$=(r[f+2>>0]|0)==36;g=$?f+3|0:g;p=r[g>>0]|0;k=$?m:-1;t=$?1:t}else k=-1;f=p<<24>>24;t:do{if((f&-32|0)==32){m=0;while(1){if(!(1<<f+-32&75913)){v=m;f=g;break t}m=1<<(p<<24>>24)+-32|m;g=g+1|0;p=r[g>>0]|0;f=p<<24>>24;if((f&-32|0)!=32){v=m;f=g;break}}}else{v=0;f=g}}while(0);do{if(p<<24>>24==42){m=f+1|0;p=(r[m>>0]|0)+-48|0;if(p>>>0<10?(r[f+2>>0]|0)==36:0){s[l+(p<<2)>>2]=10;t=1;f=f+3|0;p=s[o+((r[m>>0]|0)+-48<<3)>>2]|0}else{if(t){u=-1;break e}if(!N){S=v;f=m;t=0;$=0;break}t=(s[i>>2]|0)+(4-1)&~(4-1);p=s[t>>2]|0;s[i>>2]=t+4;t=0;f=m}if((p|0)<0){S=v|8192;$=0-p|0}else{S=v;$=p}}else{m=(p<<24>>24)+-48|0;if(m>>>0<10){p=0;do{p=(p*10|0)+m|0;f=f+1|0;m=(r[f>>0]|0)+-48|0}while(m>>>0<10);if((p|0)<0){u=-1;break e}else{S=v;$=p}}else{S=v;$=0}}}while(0);t:do{if((r[f>>0]|0)==46){m=f+1|0;p=r[m>>0]|0;if(p<<24>>24!=42){g=(p<<24>>24)+-48|0;if(g>>>0<10){f=m;p=0}else{f=m;g=0;break}while(1){p=(p*10|0)+g|0;f=f+1|0;g=(r[f>>0]|0)+-48|0;if(g>>>0>=10){g=p;break t}}}m=f+2|0;p=(r[m>>0]|0)+-48|0;if(p>>>0<10?(r[f+3>>0]|0)==36:0){s[l+(p<<2)>>2]=10;f=f+4|0;g=s[o+((r[m>>0]|0)+-48<<3)>>2]|0;break}if(t){u=-1;break e}if(N){f=(s[i>>2]|0)+(4-1)&~(4-1);g=s[f>>2]|0;s[i>>2]=f+4;f=m}else{f=m;g=0}}else g=-1}while(0);w=0;while(1){p=(r[f>>0]|0)+-65|0;if(p>>>0>57){u=-1;break e}m=f+1|0;p=r[15953+(w*58|0)+p>>0]|0;v=p&255;if((v+-1|0)>>>0<8){f=m;w=v}else{F=m;break}}if(!(p<<24>>24)){u=-1;break}m=(k|0)>-1;do{if(p<<24>>24==19)if(m){u=-1;break e}else D=52;else{if(m){s[l+(k<<2)>>2]=v;I=o+(k<<3)|0;O=s[I+4>>2]|0;D=ee;s[D>>2]=s[I>>2];s[D+4>>2]=O;D=52;break}if(!N){u=0;break e}Ds(ee,v,i)}}while(0);if((D|0)==52?(D=0,!N):0){_=F;f=x;continue}k=r[f>>0]|0;k=(w|0)!=0&(k&15|0)==3?k&-33:k;m=S&-65537;O=(S&8192|0)==0?S:m;t:do{switch(k|0){case 110:switch(w|0){case 0:{s[s[ee>>2]>>2]=u;_=F;f=x;continue e}case 1:{s[s[ee>>2]>>2]=u;_=F;f=x;continue e}case 2:{_=s[ee>>2]|0;s[_>>2]=u;s[_+4>>2]=((u|0)<0)<<31>>31;_=F;f=x;continue e}case 3:{a[s[ee>>2]>>1]=u;_=F;f=x;continue e}case 4:{r[s[ee>>2]>>0]=u;_=F;f=x;continue e}case 6:{s[s[ee>>2]>>2]=u;_=F;f=x;continue e}case 7:{_=s[ee>>2]|0;s[_>>2]=u;s[_+4>>2]=((u|0)<0)<<31>>31;_=F;f=x;continue e}default:{_=F;f=x;continue e}}case 112:{w=O|8;g=g>>>0>8?g:8;k=120;D=64;break}case 88:case 120:{w=O;D=64;break}case 111:{m=ee;p=s[m>>2]|0;m=s[m+4>>2]|0;if((p|0)==0&(m|0)==0)f=L;else{f=L;do{f=f+-1|0;r[f>>0]=p&7|48;p=Gu(p|0,m|0,3)|0;m=R}while(!((p|0)==0&(m|0)==0))}if(!(O&8)){p=O;w=0;v=16433;D=77}else{w=V-f+1|0;p=O;g=(g|0)<(w|0)?w:g;w=0;v=16433;D=77}break}case 105:case 100:{p=ee;f=s[p>>2]|0;p=s[p+4>>2]|0;if((p|0)<0){f=Qu(0,0,f|0,p|0)|0;p=R;m=ee;s[m>>2]=f;s[m+4>>2]=p;m=1;v=16433;D=76;break t}if(!(O&2048)){v=O&1;m=v;v=(v|0)==0?16433:16435;D=76}else{m=1;v=16434;D=76}break}case 117:{p=ee;f=s[p>>2]|0;p=s[p+4>>2]|0;m=0;v=16433;D=76;break}case 99:{r[Y>>0]=s[ee>>2];_=Y;p=1;w=0;k=16433;f=L;break}case 109:{f=da(s[(ca()|0)>>2]|0)|0;D=82;break}case 115:{f=s[ee>>2]|0;f=(f|0)!=0?f:16443;D=82;break}case 67:{s[ne>>2]=s[ee>>2];s[W>>2]=0;s[ee>>2]=ne;g=-1;D=86;break}case 83:{if(!g){Ls(e,32,$,0,O);f=0;D=98}else D=86;break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{b=+c[ee>>3];s[ae>>2]=0;c[h>>3]=b;if((s[h+4>>2]|0)>=0)if(!(O&2048)){I=O&1;P=I;I=(I|0)==0?16451:16456}else{P=1;I=16453}else{b=-b;P=1;I=16450}c[h>>3]=b;M=s[h+4>>2]&2146435072;do{if(M>>>0<2146435072|(M|0)==2146435072&0<0){y=+_a(b,ae)*2.0;p=y!=0.0;if(p)s[ae>>2]=(s[ae>>2]|0)+-1;T=k|32;if((T|0)==97){_=k&32;x=(_|0)==0?I:I+9|0;S=P|2;f=12-g|0;do{if(!(g>>>0>11|(f|0)==0)){b=8.0;do{f=f+-1|0;b=b*16.0}while((f|0)!=0);if((r[x>>0]|0)==45){b=-(b+(-y-b));break}else{b=y+b-b;break}}else b=y}while(0);p=s[ae>>2]|0;f=(p|0)<0?0-p|0:p;f=Ns(f,((f|0)<0)<<31>>31,G)|0;if((f|0)==(G|0)){r[K>>0]=48;f=K}r[f+-1>>0]=(p>>31&2)+43;w=f+-2|0;r[w>>0]=k+15;v=(g|0)<1;m=(O&8|0)==0;p=re;while(1){I=~~b;f=p+1|0;r[p>>0]=n[16417+I>>0]|_;b=(b-+(I|0))*16.0;do{if((f-J|0)==1){if(m&(v&b==0.0))break;r[f>>0]=46;f=p+2|0}}while(0);if(!(b!=0.0))break;else p=f}g=(g|0)!=0&(z+f|0)<(g|0)?j+g-w|0:Z-w+f|0;m=g+S|0;Ls(e,32,$,m,O);if(!(s[e>>2]&32))ts(x,S,e)|0;Ls(e,48,$,m,O^65536);f=f-J|0;if(!(s[e>>2]&32))ts(re,f,e)|0;p=X-w|0;Ls(e,48,g-(f+p)|0,0,0);if(!(s[e>>2]&32))ts(w,p,e)|0;Ls(e,32,$,m,O^8192);f=(m|0)<($|0)?$:m;break}f=(g|0)<0?6:g;if(p){p=(s[ae>>2]|0)+-28|0;s[ae>>2]=p;b=y*268435456.0}else{b=y;p=s[ae>>2]|0}M=(p|0)<0?te:H;A=M;p=M;do{C=~~b>>>0;s[p>>2]=C;p=p+4|0;b=(b-+(C>>>0))*1.0e9}while(b!=0.0);m=p;p=s[ae>>2]|0;if((p|0)>0){v=M;while(1){w=(p|0)>29?29:p;g=m+-4|0;do{if(g>>>0<v>>>0)g=v;else{p=0;do{C=Yu(s[g>>2]|0,0,w|0)|0;C=Wu(C|0,R|0,p|0,0)|0;p=R;E=ac(C|0,p|0,1e9,0)|0;s[g>>2]=E;p=rc(C|0,p|0,1e9,0)|0;g=g+-4|0}while(g>>>0>=v>>>0);if(!p){g=v;break}g=v+-4|0;s[g>>2]=p}}while(0);while(1){if(m>>>0<=g>>>0)break;p=m+-4|0;if(!(s[p>>2]|0))m=p;else break}p=(s[ae>>2]|0)-w|0;s[ae>>2]=p;if((p|0)>0)v=g;else break}}else g=M;if((p|0)<0){x=((f+25|0)/9|0)+1|0;q=(T|0)==102;_=g;while(1){S=0-p|0;S=(S|0)>9?9:S;do{if(_>>>0<m>>>0){p=(1<<S)+-1|0;v=1e9>>>S;g=0;w=_;do{C=s[w>>2]|0;s[w>>2]=(C>>>S)+g;g=ie(C&p,v)|0;w=w+4|0}while(w>>>0<m>>>0);p=(s[_>>2]|0)==0?_+4|0:_;if(!g){g=p;break}s[m>>2]=g;g=p;m=m+4|0}else g=(s[_>>2]|0)==0?_+4|0:_}while(0);p=q?M:g;m=(m-p>>2|0)>(x|0)?p+(x<<2)|0:m;p=(s[ae>>2]|0)+S|0;s[ae>>2]=p;if((p|0)>=0){_=g;break}else _=g}}else _=g;do{if(_>>>0<m>>>0){p=(A-_>>2)*9|0;v=s[_>>2]|0;if(v>>>0<10)break;else g=10;do{g=g*10|0;p=p+1|0}while(v>>>0>=g>>>0)}else p=0}while(0);E=(T|0)==103;C=(f|0)!=0;g=f-((T|0)!=102?p:0)+((C&E)<<31>>31)|0;if((g|0)<(((m-A>>2)*9|0)+-9|0)){w=g+9216|0;q=(w|0)/9|0;g=M+(q+-1023<<2)|0;w=((w|0)%9|0)+1|0;if((w|0)<9){v=10;do{v=v*10|0;w=w+1|0}while((w|0)!=9)}else v=10;S=s[g>>2]|0;x=(S>>>0)%(v>>>0)|0;if((x|0)==0?(M+(q+-1022<<2)|0)==(m|0):0)v=_;else D=163;do{if((D|0)==163){D=0;y=(((S>>>0)/(v>>>0)|0)&1|0)==0?9007199254740992.0:9007199254740994.0;w=(v|0)/2|0;do{if(x>>>0<w>>>0)b=.5;else{if((x|0)==(w|0)?(M+(q+-1022<<2)|0)==(m|0):0){b=1.0;break}b=1.5}}while(0);do{if(P){if((r[I>>0]|0)!=45)break;y=-y;b=-b}}while(0);w=S-x|0;s[g>>2]=w;if(!(y+b!=y)){v=_;break}T=w+v|0;s[g>>2]=T;if(T>>>0>999999999){p=_;while(1){v=g+-4|0;s[g>>2]=0;if(v>>>0<p>>>0){p=p+-4|0;s[p>>2]=0}T=(s[v>>2]|0)+1|0;s[v>>2]=T;if(T>>>0>999999999)g=v;else{_=p;g=v;break}}}p=(A-_>>2)*9|0;w=s[_>>2]|0;if(w>>>0<10){v=_;break}else v=10;do{v=v*10|0;p=p+1|0}while(w>>>0>=v>>>0);v=_}}while(0);T=g+4|0;_=v;m=m>>>0>T>>>0?T:m}x=0-p|0;while(1){if(m>>>0<=_>>>0){q=0;T=m;break}g=m+-4|0;if(!(s[g>>2]|0))m=g;else{q=1;T=m;break}}do{if(E){f=(C&1^1)+f|0;if((f|0)>(p|0)&(p|0)>-5){k=k+-1|0;f=f+-1-p|0}else{k=k+-2|0;f=f+-1|0}m=O&8;if(m)break;do{if(q){m=s[T+-4>>2]|0;if(!m){g=9;break}if(!((m>>>0)%10|0)){v=10;g=0}else{g=0;break}do{v=v*10|0;g=g+1|0}while(((m>>>0)%(v>>>0)|0|0)==0)}else g=9}while(0);m=((T-A>>2)*9|0)+-9|0;if((k|32|0)==102){m=m-g|0;m=(m|0)<0?0:m;f=(f|0)<(m|0)?f:m;m=0;break}else{m=m+p-g|0;m=(m|0)<0?0:m;f=(f|0)<(m|0)?f:m;m=0;break}}else m=O&8}while(0);S=f|m;v=(S|0)!=0&1;w=(k|32|0)==102;if(w){p=(p|0)>0?p:0;k=0}else{g=(p|0)<0?x:p;g=Ns(g,((g|0)<0)<<31>>31,G)|0;if((X-g|0)<2)do{g=g+-1|0;r[g>>0]=48}while((X-g|0)<2);r[g+-1>>0]=(p>>31&2)+43;A=g+-2|0;r[A>>0]=k;p=X-A|0;k=A}x=P+1+f+v+p|0;Ls(e,32,$,x,O);if(!(s[e>>2]&32))ts(I,P,e)|0;Ls(e,48,$,x,O^65536);do{if(w){g=_>>>0>M>>>0?M:_;p=g;do{m=Ns(s[p>>2]|0,0,B)|0;do{if((p|0)==(g|0)){if((m|0)!=(B|0))break;r[Q>>0]=48;m=Q}else{if(m>>>0<=re>>>0)break;do{m=m+-1|0;r[m>>0]=48}while(m>>>0>re>>>0)}}while(0);if(!(s[e>>2]&32))ts(m,U-m|0,e)|0;p=p+4|0}while(p>>>0<=M>>>0);do{if(S){if(s[e>>2]&32)break;ts(16485,1,e)|0}}while(0);if((f|0)>0&p>>>0<T>>>0){m=p;while(1){p=Ns(s[m>>2]|0,0,B)|0;if(p>>>0>re>>>0)do{p=p+-1|0;r[p>>0]=48}while(p>>>0>re>>>0);if(!(s[e>>2]&32))ts(p,(f|0)>9?9:f,e)|0;m=m+4|0;p=f+-9|0;if(!((f|0)>9&m>>>0<T>>>0)){f=p;break}else f=p}}Ls(e,48,f+9|0,9,0)}else{w=q?T:_+4|0;if((f|0)>-1){v=(m|0)==0;g=_;do{p=Ns(s[g>>2]|0,0,B)|0;if((p|0)==(B|0)){r[Q>>0]=48;p=Q}do{if((g|0)==(_|0)){m=p+1|0;if(!(s[e>>2]&32))ts(p,1,e)|0;if(v&(f|0)<1){p=m;break}if(s[e>>2]&32){p=m;break}ts(16485,1,e)|0;p=m}else{if(p>>>0<=re>>>0)break;do{p=p+-1|0;r[p>>0]=48}while(p>>>0>re>>>0)}}while(0);m=U-p|0;if(!(s[e>>2]&32))ts(p,(f|0)>(m|0)?m:f,e)|0;f=f-m|0;g=g+4|0}while(g>>>0<w>>>0&(f|0)>-1)}Ls(e,48,f+18|0,18,0);if(s[e>>2]&32)break;ts(k,X-k|0,e)|0}}while(0);Ls(e,32,$,x,O^8192);f=(x|0)<($|0)?$:x}else{w=(k&32|0)!=0;v=b!=b|0.0!=0.0;p=v?0:P;g=p+3|0;Ls(e,32,$,g,m);f=s[e>>2]|0;if(!(f&32)){ts(I,p,e)|0;f=s[e>>2]|0}if(!(f&32))ts(v?w?16477:16481:w?16469:16473,3,e)|0;Ls(e,32,$,g,O^8192);f=(g|0)<($|0)?$:g}}while(0);_=F;continue e}default:{m=O;p=g;w=0;k=16433;f=L}}}while(0);t:do{if((D|0)==64){m=ee;p=s[m>>2]|0;m=s[m+4>>2]|0;v=k&32;if(!((p|0)==0&(m|0)==0)){f=L;do{f=f+-1|0;r[f>>0]=n[16417+(p&15)>>0]|v;p=Gu(p|0,m|0,4)|0;m=R}while(!((p|0)==0&(m|0)==0));D=ee;if((w&8|0)==0|(s[D>>2]|0)==0&(s[D+4>>2]|0)==0){p=w;w=0;v=16433;D=77}else{p=w;w=2;v=16433+(k>>4)|0;D=77}}else{f=L;p=w;w=0;v=16433;D=77}}else if((D|0)==76){f=Ns(f,p,L)|0;p=O;w=m;D=77}else if((D|0)==82){D=0;O=fs(f,0,g)|0;I=(O|0)==0;_=f;p=I?g:O-f|0;w=0;k=16433;f=I?f+g|0:O}else if((D|0)==86){D=0;p=0;f=0;v=s[ee>>2]|0;while(1){m=s[v>>2]|0;if(!m)break;f=Ta(se,m)|0;if((f|0)<0|f>>>0>(g-p|0)>>>0)break;p=f+p|0;if(g>>>0>p>>>0)v=v+4|0;else break}if((f|0)<0){u=-1;break e}Ls(e,32,$,p,O);if(!p){f=0;D=98}else{m=0;g=s[ee>>2]|0;while(1){f=s[g>>2]|0;if(!f){f=p;D=98;break t}f=Ta(se,f)|0;m=f+m|0;if((m|0)>(p|0)){f=p;D=98;break t}if(!(s[e>>2]&32))ts(se,f,e)|0;if(m>>>0>=p>>>0){f=p;D=98;break}else g=g+4|0}}}}while(0);if((D|0)==98){D=0;Ls(e,32,$,f,O^8192);_=F;f=($|0)>(f|0)?$:f;continue}if((D|0)==77){D=0;m=(g|0)>-1?p&-65537:p;p=ee;p=(s[p>>2]|0)!=0|(s[p+4>>2]|0)!=0;if((g|0)!=0|p){p=(p&1^1)+(V-f)|0;_=f;p=(g|0)>(p|0)?g:p;k=v;f=L}else{_=L;p=0;k=v;f=L}}v=f-_|0;p=(p|0)<(v|0)?v:p;g=w+p|0;f=($|0)<(g|0)?g:$;Ls(e,32,f,g,m);if(!(s[e>>2]&32))ts(k,w,e)|0;Ls(e,48,f,g,m^65536);Ls(e,48,p,v,0);if(!(s[e>>2]&32))ts(_,v,e)|0;Ls(e,32,f,g,m^8192);_=F}e:do{if((D|0)==245)if(!e)if(t){u=1;while(1){t=s[l+(u<<2)>>2]|0;if(!t)break;Ds(o+(u<<3)|0,t,i);u=u+1|0;if((u|0)>=10){u=1;break e}}if((u|0)<10)while(1){if(s[l+(u<<2)>>2]|0){u=-1;break e}u=u+1|0;if((u|0)>=10){u=1;break}}else u=1}else u=0}while(0);d=oe;return u|0}function Rs(e,t,i){e=e|0;t=t|0;i=i|0;return Na(e,t,i)|0}function Is(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0;m=d;d=d+240|0;p=m;s[p>>2]=e;e:do{if((r|0)>1){h=0-t|0;n=r;o=e;u=e;c=1;while(1){e=o+h|0;f=n+-2|0;l=o+(0-((s[a+(f<<2)>>2]|0)+t))|0;if((Xc[i&15](u,l)|0)>-1?(Xc[i&15](u,e)|0)>-1:0){r=c;break e}r=c+1|0;o=p+(c<<2)|0;if((Xc[i&15](l,e)|0)>-1){s[o>>2]=l;e=l;n=n+-1|0}else{s[o>>2]=e;n=f}if((n|0)<=1)break e;o=e;u=s[p>>2]|0;c=r}}else r=1}while(0);Fs(t,p,r);d=m;return}function Os(e,t,i,r,a,n,o){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;o=o|0;var l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0;g=d;d=d+240|0;m=g;u=s[r>>2]|0;r=s[r+4>>2]|0;s[m>>2]=e;p=0-t|0;e:do{if((r|0)!=0|(u|0)!=1?(l=e+(0-(s[o+(a<<2)>>2]|0))|0,(Xc[i&15](l,e)|0)>=1):0){n=(n|0)==0;h=l;c=u;f=r;l=1;while(1){if(n&(a|0)>1){r=s[o+(a+-2<<2)>>2]|0;if((Xc[i&15](e+p|0,h)|0)>-1){n=a;r=l;b=20;break e}if((Xc[i&15](e+(0-(r+t))|0,h)|0)>-1){n=a;r=l;b=20;break e}}r=l+1|0;s[m+(l<<2)>>2]=h;n=c+-1|0;do{if(n){if(!(n&1)){e=n;n=0;do{n=n+1|0;e=e>>>1}while((e&1|0)==0);if(!n)b=11}else b=11;if((b|0)==11){b=0;if(!f){n=64;b=16;break}if(!(f&1)){e=f;n=0}else{u=0;e=c;l=f;n=0;break}while(1){l=n+1|0;e=e>>>1;if(e&1){e=l;break}else n=l}if(!e){u=0;e=c;l=f;n=0;break}else n=n+33|0}if(n>>>0>31)b=16;else{u=n;e=c;l=f}}else{n=32;b=16}}while(0);if((b|0)==16){b=0;u=n+-32|0;e=f;l=0}c=l<<32-u|e>>>u;f=l>>>u;n=n+a|0;if(!((f|0)!=0|(c|0)!=1)){e=h;b=20;break e}e=h+(0-(s[o+(n<<2)>>2]|0))|0;if((Xc[i&15](e,s[m>>2]|0)|0)<1){e=h;a=n;n=0;b=19;break}else{u=h;a=n;n=1;h=e;l=r;e=u}}}else{r=1;b=19}}while(0);if((b|0)==19?(n|0)==0:0){n=a;b=20}if((b|0)==20){Fs(t,m,r);Is(e,t,i,n,o)}d=g;return}function Fs(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0;o=d;d=d+256|0;r=o;e:do{if((i|0)>=2?(n=t+(i<<2)|0,s[n>>2]=r,(e|0)!=0):0)while(1){a=e>>>0>256?256:e;Ku(r|0,s[t>>2]|0,a|0)|0;r=0;do{l=t+(r<<2)|0;r=r+1|0;Ku(s[l>>2]|0,s[t+(r<<2)>>2]|0,a|0)|0;s[l>>2]=(s[l>>2]|0)+a}while((r|0)!=(i|0));if((e|0)==(a|0))break e;e=e-a|0;r=s[n>>2]|0}}while(0);d=o;return}function $s(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;r=e+20|0;a=s[r>>2]|0;e=(s[e+16>>2]|0)-a|0;e=e>>>0>i>>>0?i:e;Ku(a|0,t|0,e|0)|0;s[r>>2]=(s[r>>2]|0)+e;return i|0}function Ds(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0.0;e:do{if(t>>>0<=20)do{switch(t|0){case 9:{r=(s[i>>2]|0)+(4-1)&~(4-1);t=s[r>>2]|0;s[i>>2]=r+4;s[e>>2]=t;break e}case 10:{r=(s[i>>2]|0)+(4-1)&~(4-1);t=s[r>>2]|0;s[i>>2]=r+4;r=e;s[r>>2]=t;s[r+4>>2]=((t|0)<0)<<31>>31;break e}case 11:{r=(s[i>>2]|0)+(4-1)&~(4-1);t=s[r>>2]|0;s[i>>2]=r+4;r=e;s[r>>2]=t;s[r+4>>2]=0;break e}case 12:{r=(s[i>>2]|0)+(8-1)&~(8-1);t=r;a=s[t>>2]|0;t=s[t+4>>2]|0;s[i>>2]=r+8;r=e;s[r>>2]=a;s[r+4>>2]=t;break e}case 13:{a=(s[i>>2]|0)+(4-1)&~(4-1);r=s[a>>2]|0;s[i>>2]=a+4;r=(r&65535)<<16>>16;a=e;s[a>>2]=r;s[a+4>>2]=((r|0)<0)<<31>>31;break e}case 14:{a=(s[i>>2]|0)+(4-1)&~(4-1);r=s[a>>2]|0;s[i>>2]=a+4;a=e;s[a>>2]=r&65535;s[a+4>>2]=0;break e}case 15:{a=(s[i>>2]|0)+(4-1)&~(4-1);r=s[a>>2]|0;s[i>>2]=a+4;r=(r&255)<<24>>24;a=e;s[a>>2]=r;s[a+4>>2]=((r|0)<0)<<31>>31;break e}case 16:{a=(s[i>>2]|0)+(4-1)&~(4-1);r=s[a>>2]|0;s[i>>2]=a+4;a=e;s[a>>2]=r&255;s[a+4>>2]=0;break e}case 17:{a=(s[i>>2]|0)+(8-1)&~(8-1);n=+c[a>>3];s[i>>2]=a+8;c[e>>3]=n;break e}case 18:{a=(s[i>>2]|0)+(8-1)&~(8-1);n=+c[a>>3];s[i>>2]=a+8;c[e>>3]=n;break e}default:break e}}while(0)}while(0);return}function Ns(e,t,i){e=e|0;t=t|0;i=i|0;var a=0;if(t>>>0>0|(t|0)==0&e>>>0>4294967295)while(1){a=ac(e|0,t|0,10,0)|0;i=i+-1|0;r[i>>0]=a|48;a=rc(e|0,t|0,10,0)|0;if(t>>>0>9|(t|0)==9&e>>>0>4294967295){e=a;t=R}else{e=a;break}}if(e)while(1){i=i+-1|0;r[i>>0]=(e>>>0)%10|0|48;if(e>>>0<10)break;else e=(e>>>0)/10|0}return i|0}function Ls(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0,l=0;l=d;d=d+256|0;o=l;do{if((i|0)>(r|0)&(a&73728|0)==0){a=i-r|0;Vu(o|0,t|0,(a>>>0>256?256:a)|0)|0;t=s[e>>2]|0;n=(t&32|0)==0;if(a>>>0>255){r=i-r|0;do{if(n){ts(o,256,e)|0;t=s[e>>2]|0}a=a+-256|0;n=(t&32|0)==0}while(a>>>0>255);if(n)a=r&255;else break}else if(!n)break;ts(o,a,e)|0}}while(0);d=l;return}function zs(e){e=e|0;var t=0,i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0,N=0;do{if(e>>>0<245){p=e>>>0<11?16:e+11&-8;e=p>>>3;l=s[756]|0;i=l>>>e;if(i&3){e=(i&1^1)+e|0;r=e<<1;i=3064+(r<<2)|0;r=3064+(r+2<<2)|0;a=s[r>>2]|0;n=a+8|0;o=s[n>>2]|0;do{if((i|0)!=(o|0)){if(o>>>0<(s[760]|0)>>>0)Re();t=o+12|0;if((s[t>>2]|0)==(a|0)){s[t>>2]=i;s[r>>2]=o;break}else Re()}else s[756]=l&~(1<<e)}while(0);N=e<<3;s[a+4>>2]=N|3;N=a+(N|4)|0;s[N>>2]=s[N>>2]|1;N=n;return N|0}o=s[758]|0;if(p>>>0>o>>>0){if(i){r=2<<e;r=i<<e&(r|0-r);r=(r&0-r)+-1|0;u=r>>>12&16;r=r>>>u;a=r>>>5&8;r=r>>>a;n=r>>>2&4;r=r>>>n;i=r>>>1&2;r=r>>>i;e=r>>>1&1;e=(a|u|n|i|e)+(r>>>e)|0;r=e<<1;i=3064+(r<<2)|0;r=3064+(r+2<<2)|0;n=s[r>>2]|0;u=n+8|0;a=s[u>>2]|0;do{if((i|0)!=(a|0)){if(a>>>0<(s[760]|0)>>>0)Re();t=a+12|0;if((s[t>>2]|0)==(n|0)){s[t>>2]=i;s[r>>2]=a;c=s[758]|0;break}else Re()}else{s[756]=l&~(1<<e);c=o}}while(0);N=e<<3;o=N-p|0;s[n+4>>2]=p|3;l=n+p|0;s[n+(p|4)>>2]=o|1;s[n+N>>2]=o;if(c){a=s[761]|0;i=c>>>3;t=i<<1;r=3064+(t<<2)|0;e=s[756]|0;i=1<<i;if(e&i){e=3064+(t+2<<2)|0;t=s[e>>2]|0;if(t>>>0<(s[760]|0)>>>0)Re();else{d=e;f=t}}else{s[756]=e|i;d=3064+(t+2<<2)|0;f=r}s[d>>2]=a;s[f+12>>2]=a;s[a+8>>2]=f;s[a+12>>2]=r}s[758]=o;s[761]=l;N=u;return N|0}e=s[757]|0;if(e){i=(e&0-e)+-1|0;D=i>>>12&16;i=i>>>D;$=i>>>5&8;i=i>>>$;N=i>>>2&4;i=i>>>N;e=i>>>1&2;i=i>>>e;r=i>>>1&1;r=s[3328+(($|D|N|e|r)+(i>>>r)<<2)>>2]|0;i=(s[r+4>>2]&-8)-p|0;e=r;while(1){t=s[e+16>>2]|0;if(!t){t=s[e+20>>2]|0;if(!t){u=i;break}}e=(s[t+4>>2]&-8)-p|0;N=e>>>0<i>>>0;i=N?e:i;e=t;r=N?t:r}n=s[760]|0;if(r>>>0<n>>>0)Re();l=r+p|0;if(r>>>0>=l>>>0)Re();o=s[r+24>>2]|0;i=s[r+12>>2]|0;do{if((i|0)==(r|0)){e=r+20|0;t=s[e>>2]|0;if(!t){e=r+16|0;t=s[e>>2]|0;if(!t){h=0;break}}while(1){i=t+20|0;a=s[i>>2]|0;if(a){t=a;e=i;continue}i=t+16|0;a=s[i>>2]|0;if(!a)break;else{t=a;e=i}}if(e>>>0<n>>>0)Re();else{s[e>>2]=0;h=t;break}}else{a=s[r+8>>2]|0;if(a>>>0<n>>>0)Re();t=a+12|0;if((s[t>>2]|0)!=(r|0))Re();e=i+8|0;if((s[e>>2]|0)==(r|0)){s[t>>2]=i;s[e>>2]=a;h=i;break}else Re()}}while(0);do{if(o){t=s[r+28>>2]|0;e=3328+(t<<2)|0;if((r|0)==(s[e>>2]|0)){s[e>>2]=h;if(!h){s[757]=s[757]&~(1<<t);break}}else{if(o>>>0<(s[760]|0)>>>0)Re();t=o+16|0;if((s[t>>2]|0)==(r|0))s[t>>2]=h;else s[o+20>>2]=h;if(!h)break}e=s[760]|0;if(h>>>0<e>>>0)Re();s[h+24>>2]=o;t=s[r+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Re();else{s[h+16>>2]=t;s[t+24>>2]=h;break}}while(0);t=s[r+20>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Re();else{s[h+20>>2]=t;s[t+24>>2]=h;break}}}while(0);if(u>>>0<16){N=u+p|0;s[r+4>>2]=N|3;N=r+(N+4)|0;s[N>>2]=s[N>>2]|1}else{s[r+4>>2]=p|3;s[r+(p|4)>>2]=u|1;s[r+(u+p)>>2]=u;t=s[758]|0;if(t){n=s[761]|0;i=t>>>3;t=i<<1;a=3064+(t<<2)|0;e=s[756]|0;i=1<<i;if(e&i){t=3064+(t+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Re();else{m=t;b=e}}else{s[756]=e|i;m=3064+(t+2<<2)|0;b=a}s[m>>2]=n;s[b+12>>2]=n;s[n+8>>2]=b;s[n+12>>2]=a}s[758]=u;s[761]=l}N=r+8|0;return N|0}else b=p}else b=p}else if(e>>>0<=4294967231){e=e+11|0;f=e&-8;d=s[757]|0;if(d){i=0-f|0;e=e>>>8;if(e)if(f>>>0>16777215)c=31;else{b=(e+1048320|0)>>>16&8;y=e<<b;m=(y+520192|0)>>>16&4;y=y<<m;c=(y+245760|0)>>>16&2;c=14-(m|b|c)+(y<<c>>>15)|0;c=f>>>(c+7|0)&1|c<<1}else c=0;e=s[3328+(c<<2)>>2]|0;e:do{if(!e){a=0;e=0;y=86}else{o=i;a=0;l=f<<((c|0)==31?0:25-(c>>>1)|0);u=e;e=0;while(1){n=s[u+4>>2]&-8;i=n-f|0;if(i>>>0<o>>>0)if((n|0)==(f|0)){n=u;e=u;y=90;break e}else e=u;else i=o;y=s[u+20>>2]|0;u=s[u+16+(l>>>31<<2)>>2]|0;a=(y|0)==0|(y|0)==(u|0)?a:y;if(!u){y=86;break}else{o=i;l=l<<1}}}}while(0);if((y|0)==86){if((a|0)==0&(e|0)==0){e=2<<c;e=d&(e|0-e);if(!e){b=f;break}e=(e&0-e)+-1|0;h=e>>>12&16;e=e>>>h;d=e>>>5&8;e=e>>>d;m=e>>>2&4;e=e>>>m;b=e>>>1&2;e=e>>>b;a=e>>>1&1;a=s[3328+((d|h|m|b|a)+(e>>>a)<<2)>>2]|0;e=0}if(!a){l=i;u=e}else{n=a;y=90}}if((y|0)==90)while(1){y=0;b=(s[n+4>>2]&-8)-f|0;a=b>>>0<i>>>0;i=a?b:i;e=a?n:e;a=s[n+16>>2]|0;if(a){n=a;y=90;continue}n=s[n+20>>2]|0;if(!n){l=i;u=e;break}else y=90}if((u|0)!=0?l>>>0<((s[758]|0)-f|0)>>>0:0){a=s[760]|0;if(u>>>0<a>>>0)Re();o=u+f|0;if(u>>>0>=o>>>0)Re();n=s[u+24>>2]|0;i=s[u+12>>2]|0;do{if((i|0)==(u|0)){e=u+20|0;t=s[e>>2]|0;if(!t){e=u+16|0;t=s[e>>2]|0;if(!t){p=0;break}}while(1){i=t+20|0;r=s[i>>2]|0;if(r){t=r;e=i;continue}i=t+16|0;r=s[i>>2]|0;if(!r)break;else{t=r;e=i}}if(e>>>0<a>>>0)Re();else{s[e>>2]=0;p=t;break}}else{r=s[u+8>>2]|0;if(r>>>0<a>>>0)Re();t=r+12|0;if((s[t>>2]|0)!=(u|0))Re();e=i+8|0;if((s[e>>2]|0)==(u|0)){s[t>>2]=i;s[e>>2]=r;p=i;break}else Re()}}while(0);do{if(n){t=s[u+28>>2]|0;e=3328+(t<<2)|0;if((u|0)==(s[e>>2]|0)){s[e>>2]=p;if(!p){s[757]=s[757]&~(1<<t);break}}else{if(n>>>0<(s[760]|0)>>>0)Re();t=n+16|0;if((s[t>>2]|0)==(u|0))s[t>>2]=p;else s[n+20>>2]=p;if(!p)break}e=s[760]|0;if(p>>>0<e>>>0)Re();s[p+24>>2]=n;t=s[u+16>>2]|0;do{if(t)if(t>>>0<e>>>0)Re();else{s[p+16>>2]=t;s[t+24>>2]=p;break}}while(0);t=s[u+20>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Re();else{s[p+20>>2]=t;s[t+24>>2]=p;break}}}while(0);e:do{if(l>>>0>=16){s[u+4>>2]=f|3;s[u+(f|4)>>2]=l|1;s[u+(l+f)>>2]=l;t=l>>>3;if(l>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=s[756]|0;t=1<<t;if(i&t){t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Re();else{v=t;w=e}}else{s[756]=i|t;v=3064+(e+2<<2)|0;w=r}s[v>>2]=o;s[w+12>>2]=o;s[u+(f+8)>>2]=w;s[u+(f+12)>>2]=r;break}t=l>>>8;if(t)if(l>>>0>16777215)r=31;else{D=(t+1048320|0)>>>16&8;N=t<<D;$=(N+520192|0)>>>16&4;N=N<<$;r=(N+245760|0)>>>16&2;r=14-($|D|r)+(N<<r>>>15)|0;r=l>>>(r+7|0)&1|r<<1}else r=0;t=3328+(r<<2)|0;s[u+(f+28)>>2]=r;s[u+(f+20)>>2]=0;s[u+(f+16)>>2]=0;e=s[757]|0;i=1<<r;if(!(e&i)){s[757]=e|i;s[t>>2]=o;s[u+(f+24)>>2]=t;s[u+(f+12)>>2]=o;s[u+(f+8)>>2]=o;break}t=s[t>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(l|0)){r=l<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=s[e>>2]|0;if(!i)break;if((s[i+4>>2]&-8|0)==(l|0)){x=i;break t}else{r=r<<1;t=i}}if(e>>>0<(s[760]|0)>>>0)Re();else{s[e>>2]=o;s[u+(f+24)>>2]=t;s[u+(f+12)>>2]=o;s[u+(f+8)>>2]=o;break e}}else x=t}while(0);t=x+8|0;e=s[t>>2]|0;N=s[760]|0;if(e>>>0>=N>>>0&x>>>0>=N>>>0){s[e+12>>2]=o;s[t>>2]=o;s[u+(f+8)>>2]=e;s[u+(f+12)>>2]=x;s[u+(f+24)>>2]=0;break}else Re()}else{N=l+f|0;s[u+4>>2]=N|3;N=u+(N+4)|0;s[N>>2]=s[N>>2]|1}}while(0);N=u+8|0;return N|0}else b=f}else b=f}else b=-1}while(0);i=s[758]|0;if(i>>>0>=b>>>0){t=i-b|0;e=s[761]|0;if(t>>>0>15){s[761]=e+b;s[758]=t;s[e+(b+4)>>2]=t|1;s[e+i>>2]=t;s[e+4>>2]=b|3}else{s[758]=0;s[761]=0;s[e+4>>2]=i|3;N=e+(i+4)|0;s[N>>2]=s[N>>2]|1}N=e+8|0;return N|0}e=s[759]|0;if(e>>>0>b>>>0){D=e-b|0;s[759]=D;N=s[762]|0;s[762]=N+b;s[N+(b+4)>>2]=D|1;s[N+4>>2]=b|3;N=N+8|0;return N|0}do{if(!(s[874]|0)){e=it(30)|0;if(!(e+-1&e)){s[876]=e;s[875]=e;s[877]=-1;s[878]=-1;s[879]=0;s[867]=0;s[874]=(Rt(0)|0)&-16^1431655768;break}else Re()}}while(0);u=b+48|0;l=s[876]|0;c=b+47|0;o=l+c|0;l=0-l|0;d=o&l;if(d>>>0<=b>>>0){N=0;return N|0}e=s[866]|0;if((e|0)!=0?(w=s[864]|0,x=w+d|0,x>>>0<=w>>>0|x>>>0>e>>>0):0){N=0;return N|0}e:do{if(!(s[867]&4)){e=s[762]|0;t:do{if(e){a=3472;while(1){i=s[a>>2]|0;if(i>>>0<=e>>>0?(g=a+4|0,(i+(s[g>>2]|0)|0)>>>0>e>>>0):0){n=a;e=g;break}a=s[a+8>>2]|0;if(!a){y=174;break t}}i=o-(s[759]|0)&l;if(i>>>0<2147483647){a=Ge(i|0)|0;x=(a|0)==((s[n>>2]|0)+(s[e>>2]|0)|0);e=x?i:0;if(x){if((a|0)!=(-1|0)){_=a;m=e;y=194;break e}}else y=184}else e=0}else y=174}while(0);do{if((y|0)==174){n=Ge(0)|0;if((n|0)!=(-1|0)){e=n;i=s[875]|0;a=i+-1|0;if(!(a&e))i=d;else i=d-e+(a+e&0-i)|0;e=s[864]|0;a=e+i|0;if(i>>>0>b>>>0&i>>>0<2147483647){x=s[866]|0;if((x|0)!=0?a>>>0<=e>>>0|a>>>0>x>>>0:0){e=0;break}a=Ge(i|0)|0;x=(a|0)==(n|0);e=x?i:0;if(x){_=n;m=e;y=194;break e}else y=184}else e=0}else e=0}}while(0);t:do{if((y|0)==184){n=0-i|0;do{if(u>>>0>i>>>0&(i>>>0<2147483647&(a|0)!=(-1|0))?(k=s[876]|0,k=c-i+k&0-k,k>>>0<2147483647):0)if((Ge(k|0)|0)==(-1|0)){Ge(n|0)|0;break t}else{i=k+i|0;break}}while(0);if((a|0)!=(-1|0)){_=a;m=i;y=194;break e}}}while(0);s[867]=s[867]|4;y=191}else{e=0;y=191}}while(0);if((((y|0)==191?d>>>0<2147483647:0)?(_=Ge(d|0)|0,S=Ge(0)|0,_>>>0<S>>>0&((_|0)!=(-1|0)&(S|0)!=(-1|0))):0)?(q=S-_|0,E=q>>>0>(b+40|0)>>>0,E):0){m=E?q:e;y=194}if((y|0)==194){e=(s[864]|0)+m|0;s[864]=e;if(e>>>0>(s[865]|0)>>>0)s[865]=e;o=s[762]|0;e:do{if(o){n=3472;do{e=s[n>>2]|0;i=n+4|0;a=s[i>>2]|0;if((_|0)==(e+a|0)){C=e;T=i;A=a;M=n;y=204;break}n=s[n+8>>2]|0}while((n|0)!=0);if(((y|0)==204?(s[M+12>>2]&8|0)==0:0)?o>>>0<_>>>0&o>>>0>=C>>>0:0){s[T>>2]=A+m;N=(s[759]|0)+m|0;D=o+8|0;D=(D&7|0)==0?0:0-D&7;$=N-D|0;s[762]=o+D;s[759]=$;s[o+(D+4)>>2]=$|1;s[o+(N+4)>>2]=40;s[763]=s[878];break}e=s[760]|0;if(_>>>0<e>>>0){s[760]=_;e=_}i=_+m|0;n=3472;while(1){if((s[n>>2]|0)==(i|0)){a=n;i=n;y=212;break}n=s[n+8>>2]|0;if(!n){i=3472;break}}if((y|0)==212)if(!(s[i+12>>2]&8)){s[a>>2]=_;h=i+4|0;s[h>>2]=(s[h>>2]|0)+m;h=_+8|0;h=(h&7|0)==0?0:0-h&7;c=_+(m+8)|0;c=(c&7|0)==0?0:0-c&7;t=_+(c+m)|0;f=h+b|0;p=_+f|0;d=t-(_+h)-b|0;s[_+(h+4)>>2]=b|3;t:do{if((t|0)!=(o|0)){if((t|0)==(s[761]|0)){N=(s[758]|0)+d|0;s[758]=N;s[761]=p;s[_+(f+4)>>2]=N|1;s[_+(N+f)>>2]=N;break}l=m+4|0;i=s[_+(l+c)>>2]|0;if((i&3|0)==1){u=i&-8;n=i>>>3;i:do{if(i>>>0>=256){o=s[_+((c|24)+m)>>2]|0;r=s[_+(m+12+c)>>2]|0;do{if((r|0)==(t|0)){a=c|16;r=_+(l+a)|0;i=s[r>>2]|0;if(!i){r=_+(a+m)|0;i=s[r>>2]|0;if(!i){F=0;break}}while(1){a=i+20|0;n=s[a>>2]|0;if(n){i=n;r=a;continue}a=i+16|0;n=s[a>>2]|0;if(!n)break;else{i=n;r=a}}if(r>>>0<e>>>0)Re();else{s[r>>2]=0;F=i;break}}else{a=s[_+((c|8)+m)>>2]|0;if(a>>>0<e>>>0)Re();e=a+12|0;if((s[e>>2]|0)!=(t|0))Re();i=r+8|0;if((s[i>>2]|0)==(t|0)){s[e>>2]=r;s[i>>2]=a;F=r;break}else Re()}}while(0);if(!o)break;e=s[_+(m+28+c)>>2]|0;i=3328+(e<<2)|0;do{if((t|0)!=(s[i>>2]|0)){if(o>>>0<(s[760]|0)>>>0)Re();e=o+16|0;if((s[e>>2]|0)==(t|0))s[e>>2]=F;else s[o+20>>2]=F;if(!F)break i}else{s[i>>2]=F;if(F)break;s[757]=s[757]&~(1<<e);break i}}while(0);i=s[760]|0;if(F>>>0<i>>>0)Re();s[F+24>>2]=o;t=c|16;e=s[_+(t+m)>>2]|0;do{if(e)if(e>>>0<i>>>0)Re();else{s[F+16>>2]=e;s[e+24>>2]=F;break}}while(0);t=s[_+(l+t)>>2]|0;if(!t)break;if(t>>>0<(s[760]|0)>>>0)Re();else{s[F+20>>2]=t;s[t+24>>2]=F;break}}else{r=s[_+((c|8)+m)>>2]|0;a=s[_+(m+12+c)>>2]|0;i=3064+(n<<1<<2)|0;do{if((r|0)!=(i|0)){if(r>>>0<e>>>0)Re();if((s[r+12>>2]|0)==(t|0))break;Re()}}while(0);if((a|0)==(r|0)){s[756]=s[756]&~(1<<n);break}do{if((a|0)==(i|0))P=a+8|0;else{if(a>>>0<e>>>0)Re();e=a+8|0;if((s[e>>2]|0)==(t|0)){P=e;break}Re()}}while(0);s[r+12>>2]=a;s[P>>2]=r}}while(0);t=_+((u|c)+m)|0;a=u+d|0}else a=d;t=t+4|0;s[t>>2]=s[t>>2]&-2;s[_+(f+4)>>2]=a|1;s[_+(a+f)>>2]=a;t=a>>>3;if(a>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=s[756]|0;t=1<<t;do{if(!(i&t)){s[756]=i|t;$=3064+(e+2<<2)|0;D=r}else{t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0>=(s[760]|0)>>>0){$=t;D=e;break}Re()}}while(0);s[$>>2]=p;s[D+12>>2]=p;s[_+(f+8)>>2]=D;s[_+(f+12)>>2]=r;break}t=a>>>8;do{if(!t)r=0;else{if(a>>>0>16777215){r=31;break}$=(t+1048320|0)>>>16&8;D=t<<$;F=(D+520192|0)>>>16&4;D=D<<F;r=(D+245760|0)>>>16&2;r=14-(F|$|r)+(D<<r>>>15)|0;r=a>>>(r+7|0)&1|r<<1}}while(0);t=3328+(r<<2)|0;s[_+(f+28)>>2]=r;s[_+(f+20)>>2]=0;s[_+(f+16)>>2]=0;e=s[757]|0;i=1<<r;if(!(e&i)){s[757]=e|i;s[t>>2]=p;s[_+(f+24)>>2]=t;s[_+(f+12)>>2]=p;s[_+(f+8)>>2]=p;break}t=s[t>>2]|0;i:do{if((s[t+4>>2]&-8|0)!=(a|0)){r=a<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=s[e>>2]|0;if(!i)break;if((s[i+4>>2]&-8|0)==(a|0)){N=i;break i}else{r=r<<1;t=i}}if(e>>>0<(s[760]|0)>>>0)Re();else{s[e>>2]=p;s[_+(f+24)>>2]=t;s[_+(f+12)>>2]=p;s[_+(f+8)>>2]=p;break t}}else N=t}while(0);t=N+8|0;e=s[t>>2]|0;D=s[760]|0;if(e>>>0>=D>>>0&N>>>0>=D>>>0){s[e+12>>2]=p;s[t>>2]=p;s[_+(f+8)>>2]=e;s[_+(f+12)>>2]=N;s[_+(f+24)>>2]=0;break}else Re()}else{N=(s[759]|0)+d|0;s[759]=N;s[762]=p;s[_+(f+4)>>2]=N|1}}while(0);N=_+(h|8)|0;return N|0}else i=3472;while(1){e=s[i>>2]|0;if(e>>>0<=o>>>0?(t=s[i+4>>2]|0,r=e+t|0,r>>>0>o>>>0):0)break;i=s[i+8>>2]|0}a=e+(t+-39)|0;e=e+(t+-47+((a&7|0)==0?0:0-a&7))|0;a=o+16|0;e=e>>>0<a>>>0?o:e;t=e+8|0;i=_+8|0;i=(i&7|0)==0?0:0-i&7;N=m+-40-i|0;s[762]=_+i;s[759]=N;s[_+(i+4)>>2]=N|1;s[_+(m+-36)>>2]=40;s[763]=s[878];i=e+4|0;s[i>>2]=27;s[t>>2]=s[868];s[t+4>>2]=s[869];s[t+8>>2]=s[870];s[t+12>>2]=s[871];s[868]=_;s[869]=m;s[871]=0;s[870]=t;t=e+28|0;s[t>>2]=7;if((e+32|0)>>>0<r>>>0)do{N=t;t=t+4|0;s[t>>2]=7}while((N+8|0)>>>0<r>>>0);if((e|0)!=(o|0)){n=e-o|0;s[i>>2]=s[i>>2]&-2;s[o+4>>2]=n|1;s[e>>2]=n;t=n>>>3;if(n>>>0<256){e=t<<1;r=3064+(e<<2)|0;i=s[756]|0;t=1<<t;if(i&t){t=3064+(e+2<<2)|0;e=s[t>>2]|0;if(e>>>0<(s[760]|0)>>>0)Re();else{R=t;I=e}}else{s[756]=i|t;R=3064+(e+2<<2)|0;I=r}s[R>>2]=o;s[I+12>>2]=o;s[o+8>>2]=I;s[o+12>>2]=r;break}t=n>>>8;if(t)if(n>>>0>16777215)r=31;else{D=(t+1048320|0)>>>16&8;N=t<<D;$=(N+520192|0)>>>16&4;N=N<<$;r=(N+245760|0)>>>16&2;r=14-($|D|r)+(N<<r>>>15)|0;r=n>>>(r+7|0)&1|r<<1}else r=0;i=3328+(r<<2)|0;s[o+28>>2]=r;s[o+20>>2]=0;s[a>>2]=0;t=s[757]|0;e=1<<r;if(!(t&e)){s[757]=t|e;s[i>>2]=o;s[o+24>>2]=i;s[o+12>>2]=o;s[o+8>>2]=o;break}t=s[i>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(n|0)){r=n<<((r|0)==31?0:25-(r>>>1)|0);while(1){e=t+16+(r>>>31<<2)|0;i=s[e>>2]|0;if(!i)break;if((s[i+4>>2]&-8|0)==(n|0)){O=i;break t}else{r=r<<1;t=i}}if(e>>>0<(s[760]|0)>>>0)Re();else{s[e>>2]=o;s[o+24>>2]=t;s[o+12>>2]=o;s[o+8>>2]=o;break e}}else O=t}while(0);t=O+8|0;e=s[t>>2]|0;N=s[760]|0;if(e>>>0>=N>>>0&O>>>0>=N>>>0){s[e+12>>2]=o;s[t>>2]=o;s[o+8>>2]=e;s[o+12>>2]=O;s[o+24>>2]=0;break}else Re()}}else{N=s[760]|0;if((N|0)==0|_>>>0<N>>>0)s[760]=_;s[868]=_;s[869]=m;s[871]=0;s[765]=s[874];s[764]=-1;t=0;do{N=t<<1;D=3064+(N<<2)|0;s[3064+(N+3<<2)>>2]=D;s[3064+(N+2<<2)>>2]=D;t=t+1|0}while((t|0)!=32);N=_+8|0;N=(N&7|0)==0?0:0-N&7;D=m+-40-N|0;s[762]=_+N;s[759]=D;s[_+(N+4)>>2]=D|1;s[_+(m+-36)>>2]=40;s[763]=s[878]}}while(0);t=s[759]|0;if(t>>>0>b>>>0){D=t-b|0;s[759]=D;N=s[762]|0;s[762]=N+b;s[N+(b+4)>>2]=D|1;s[N+4>>2]=b|3;N=N+8|0;return N|0}}s[(ca()|0)>>2]=12;N=0;return N|0}function js(e){e=e|0;var t=0,i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0;if(!e)return;t=e+-8|0;l=s[760]|0;if(t>>>0<l>>>0)Re();i=s[e+-4>>2]|0;r=i&3;if((r|0)==1)Re();p=i&-8;b=e+(p+-8)|0;do{if(!(i&1)){t=s[t>>2]|0;if(!r)return;u=-8-t|0;d=e+u|0;f=t+p|0;if(d>>>0<l>>>0)Re();if((d|0)==(s[761]|0)){t=e+(p+-4)|0;i=s[t>>2]|0;if((i&3|0)!=3){k=d;n=f;break}s[758]=f;s[t>>2]=i&-2;s[e+(u+4)>>2]=f|1;s[b>>2]=f;return}a=t>>>3;if(t>>>0<256){r=s[e+(u+8)>>2]|0;i=s[e+(u+12)>>2]|0;t=3064+(a<<1<<2)|0;if((r|0)!=(t|0)){if(r>>>0<l>>>0)Re();if((s[r+12>>2]|0)!=(d|0))Re()}if((i|0)==(r|0)){s[756]=s[756]&~(1<<a);k=d;n=f;break}if((i|0)!=(t|0)){if(i>>>0<l>>>0)Re();t=i+8|0;if((s[t>>2]|0)==(d|0))o=t;else Re()}else o=i+8|0;s[r+12>>2]=i;s[o>>2]=r;k=d;n=f;break}o=s[e+(u+24)>>2]|0;r=s[e+(u+12)>>2]|0;do{if((r|0)==(d|0)){i=e+(u+20)|0;t=s[i>>2]|0;if(!t){i=e+(u+16)|0;t=s[i>>2]|0;if(!t){c=0;break}}while(1){r=t+20|0;a=s[r>>2]|0;if(a){t=a;i=r;continue}r=t+16|0;a=s[r>>2]|0;if(!a)break;else{t=a;i=r}}if(i>>>0<l>>>0)Re();else{s[i>>2]=0;c=t;break}}else{a=s[e+(u+8)>>2]|0;if(a>>>0<l>>>0)Re();t=a+12|0;if((s[t>>2]|0)!=(d|0))Re();i=r+8|0;if((s[i>>2]|0)==(d|0)){s[t>>2]=r;s[i>>2]=a;c=r;break}else Re()}}while(0);if(o){t=s[e+(u+28)>>2]|0;i=3328+(t<<2)|0;if((d|0)==(s[i>>2]|0)){s[i>>2]=c;if(!c){s[757]=s[757]&~(1<<t);k=d;n=f;break}}else{if(o>>>0<(s[760]|0)>>>0)Re();t=o+16|0;if((s[t>>2]|0)==(d|0))s[t>>2]=c;else s[o+20>>2]=c;if(!c){k=d;n=f;break}}i=s[760]|0;if(c>>>0<i>>>0)Re();s[c+24>>2]=o;t=s[e+(u+16)>>2]|0;do{if(t)if(t>>>0<i>>>0)Re();else{s[c+16>>2]=t;s[t+24>>2]=c;break}}while(0);t=s[e+(u+20)>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Re();else{s[c+20>>2]=t;s[t+24>>2]=c;k=d;n=f;break}else{k=d;n=f}}else{k=d;n=f}}else{k=t;n=p}}while(0);if(k>>>0>=b>>>0)Re();t=e+(p+-4)|0;i=s[t>>2]|0;if(!(i&1))Re();if(!(i&2)){if((b|0)==(s[762]|0)){w=(s[759]|0)+n|0;s[759]=w;s[762]=k;s[k+4>>2]=w|1;if((k|0)!=(s[761]|0))return;s[761]=0;s[758]=0;return}if((b|0)==(s[761]|0)){w=(s[758]|0)+n|0;s[758]=w;s[761]=k;s[k+4>>2]=w|1;s[k+w>>2]=w;return}n=(i&-8)+n|0;a=i>>>3;do{if(i>>>0>=256){o=s[e+(p+16)>>2]|0;t=s[e+(p|4)>>2]|0;do{if((t|0)==(b|0)){i=e+(p+12)|0;t=s[i>>2]|0;if(!t){i=e+(p+8)|0;t=s[i>>2]|0;if(!t){m=0;break}}while(1){r=t+20|0;a=s[r>>2]|0;if(a){t=a;i=r;continue}r=t+16|0;a=s[r>>2]|0;if(!a)break;else{t=a;i=r}}if(i>>>0<(s[760]|0)>>>0)Re();else{s[i>>2]=0;m=t;break}}else{i=s[e+p>>2]|0;if(i>>>0<(s[760]|0)>>>0)Re();r=i+12|0;if((s[r>>2]|0)!=(b|0))Re();a=t+8|0;if((s[a>>2]|0)==(b|0)){s[r>>2]=t;s[a>>2]=i;m=t;break}else Re()}}while(0);if(o){t=s[e+(p+20)>>2]|0;i=3328+(t<<2)|0;if((b|0)==(s[i>>2]|0)){s[i>>2]=m;if(!m){s[757]=s[757]&~(1<<t);break}}else{if(o>>>0<(s[760]|0)>>>0)Re();t=o+16|0;if((s[t>>2]|0)==(b|0))s[t>>2]=m;else s[o+20>>2]=m;if(!m)break}i=s[760]|0;if(m>>>0<i>>>0)Re();s[m+24>>2]=o;t=s[e+(p+8)>>2]|0;do{if(t)if(t>>>0<i>>>0)Re();else{s[m+16>>2]=t;s[t+24>>2]=m;break}}while(0);t=s[e+(p+12)>>2]|0;if(t)if(t>>>0<(s[760]|0)>>>0)Re();else{s[m+20>>2]=t;s[t+24>>2]=m;break}}}else{r=s[e+p>>2]|0;i=s[e+(p|4)>>2]|0;t=3064+(a<<1<<2)|0;if((r|0)!=(t|0)){if(r>>>0<(s[760]|0)>>>0)Re();if((s[r+12>>2]|0)!=(b|0))Re()}if((i|0)==(r|0)){s[756]=s[756]&~(1<<a);break}if((i|0)!=(t|0)){if(i>>>0<(s[760]|0)>>>0)Re();t=i+8|0;if((s[t>>2]|0)==(b|0))h=t;else Re()}else h=i+8|0;s[r+12>>2]=i;s[h>>2]=r}}while(0);s[k+4>>2]=n|1;s[k+n>>2]=n;if((k|0)==(s[761]|0)){s[758]=n;return}}else{s[t>>2]=i&-2;s[k+4>>2]=n|1;s[k+n>>2]=n}t=n>>>3;if(n>>>0<256){i=t<<1;a=3064+(i<<2)|0;r=s[756]|0;t=1<<t;if(r&t){t=3064+(i+2<<2)|0;i=s[t>>2]|0;if(i>>>0<(s[760]|0)>>>0)Re();else{g=t;v=i}}else{s[756]=r|t;g=3064+(i+2<<2)|0;v=a}s[g>>2]=k;s[v+12>>2]=k;s[k+8>>2]=v;s[k+12>>2]=a;return}t=n>>>8;if(t)if(n>>>0>16777215)a=31;else{g=(t+1048320|0)>>>16&8;v=t<<g;b=(v+520192|0)>>>16&4;v=v<<b;a=(v+245760|0)>>>16&2;a=14-(b|g|a)+(v<<a>>>15)|0;a=n>>>(a+7|0)&1|a<<1}else a=0;t=3328+(a<<2)|0;s[k+28>>2]=a;s[k+20>>2]=0;s[k+16>>2]=0;i=s[757]|0;r=1<<a;e:do{if(i&r){t=s[t>>2]|0;t:do{if((s[t+4>>2]&-8|0)!=(n|0)){a=n<<((a|0)==31?0:25-(a>>>1)|0);while(1){i=t+16+(a>>>31<<2)|0;r=s[i>>2]|0;if(!r)break;if((s[r+4>>2]&-8|0)==(n|0)){w=r;break t}else{a=a<<1;t=r}}if(i>>>0<(s[760]|0)>>>0)Re();else{s[i>>2]=k;s[k+24>>2]=t;s[k+12>>2]=k;s[k+8>>2]=k;break e}}else w=t}while(0);t=w+8|0;i=s[t>>2]|0;v=s[760]|0;if(i>>>0>=v>>>0&w>>>0>=v>>>0){s[i+12>>2]=k;s[t>>2]=k;s[k+8>>2]=i;s[k+12>>2]=w;s[k+24>>2]=0;break}else Re()}else{s[757]=i|r;s[t>>2]=k;s[k+24>>2]=t;s[k+12>>2]=k;s[k+8>>2]=k}}while(0);k=(s[764]|0)+-1|0;s[764]=k;if(!k)t=3480;else return;while(1){t=s[t>>2]|0;if(!t)break;else t=t+8|0}s[764]=-1;return}function Hs(e,t){e=e|0;t=t|0;var i=0;if(e){i=ie(t,e)|0;if((t|e)>>>0>65535)i=((i>>>0)/(e>>>0)|0|0)==(t|0)?i:-1}else i=0;t=zs(i)|0;if(!t)return t|0;if(!(s[t+-4>>2]&3))return t|0;Vu(t|0,0,i|0)|0;return t|0}function Bs(e,t){e=e|0;t=t|0;var i=0,r=0;if(!e){e=zs(t)|0;return e|0}if(t>>>0>4294967231){s[(ca()|0)>>2]=12;e=0;return e|0}i=Us(e+-8|0,t>>>0<11?16:t+11&-8)|0;if(i){e=i+8|0;return e|0}i=zs(t)|0;if(!i){e=0;return e|0}r=s[e+-4>>2]|0;r=(r&-8)-((r&3|0)==0?8:4)|0;Ku(i|0,e|0,(r>>>0<t>>>0?r:t)|0)|0;js(e);e=i;return e|0}function Us(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0;p=e+4|0;m=s[p>>2]|0;u=m&-8;d=e+u|0;l=s[760]|0;i=m&3;if(!((i|0)!=1&e>>>0>=l>>>0&e>>>0<d>>>0))Re();r=e+(u|4)|0;a=s[r>>2]|0;if(!(a&1))Re();if(!i){if(t>>>0<256){e=0;return e|0}if(u>>>0>=(t+4|0)>>>0?(u-t|0)>>>0<=s[876]<<1>>>0:0)return e|0;e=0;return e|0}if(u>>>0>=t>>>0){i=u-t|0;if(i>>>0<=15)return e|0;s[p>>2]=m&1|t|2;s[e+(t+4)>>2]=i|3;s[r>>2]=s[r>>2]|1;Qs(e+t|0,i);return e|0}if((d|0)==(s[762]|0)){i=(s[759]|0)+u|0;if(i>>>0<=t>>>0){e=0;return e|0}h=i-t|0;s[p>>2]=m&1|t|2;s[e+(t+4)>>2]=h|1;s[762]=e+t;s[759]=h;return e|0}if((d|0)==(s[761]|0)){r=(s[758]|0)+u|0;if(r>>>0<t>>>0){e=0;return e|0}i=r-t|0;if(i>>>0>15){s[p>>2]=m&1|t|2;s[e+(t+4)>>2]=i|1;s[e+r>>2]=i;r=e+(r+4)|0;s[r>>2]=s[r>>2]&-2;r=e+t|0}else{s[p>>2]=m&1|r|2;r=e+(r+4)|0;s[r>>2]=s[r>>2]|1;r=0;i=0}s[758]=i;s[761]=r;return e|0}if(a&2){e=0;return e|0}f=(a&-8)+u|0;if(f>>>0<t>>>0){e=0;return e|0}h=f-t|0;n=a>>>3;do{if(a>>>0>=256){o=s[e+(u+24)>>2]|0;n=s[e+(u+12)>>2]|0;do{if((n|0)==(d|0)){r=e+(u+20)|0;i=s[r>>2]|0;if(!i){r=e+(u+16)|0;i=s[r>>2]|0;if(!i){c=0;break}}while(1){a=i+20|0;n=s[a>>2]|0;if(n){i=n;r=a;continue}a=i+16|0;n=s[a>>2]|0;if(!n)break;else{i=n;r=a}}if(r>>>0<l>>>0)Re();else{s[r>>2]=0;c=i;break}}else{a=s[e+(u+8)>>2]|0;if(a>>>0<l>>>0)Re();i=a+12|0;if((s[i>>2]|0)!=(d|0))Re();r=n+8|0;if((s[r>>2]|0)==(d|0)){s[i>>2]=n;s[r>>2]=a;c=n;break}else Re()}}while(0);if(o){i=s[e+(u+28)>>2]|0;r=3328+(i<<2)|0;if((d|0)==(s[r>>2]|0)){s[r>>2]=c;if(!c){s[757]=s[757]&~(1<<i);break}}else{if(o>>>0<(s[760]|0)>>>0)Re();i=o+16|0;if((s[i>>2]|0)==(d|0))s[i>>2]=c;else s[o+20>>2]=c;if(!c)break}r=s[760]|0;if(c>>>0<r>>>0)Re();s[c+24>>2]=o;i=s[e+(u+16)>>2]|0;do{if(i)if(i>>>0<r>>>0)Re();else{s[c+16>>2]=i;s[i+24>>2]=c;break}}while(0);i=s[e+(u+20)>>2]|0;if(i)if(i>>>0<(s[760]|0)>>>0)Re();else{s[c+20>>2]=i;s[i+24>>2]=c;break}}}else{a=s[e+(u+8)>>2]|0;r=s[e+(u+12)>>2]|0;i=3064+(n<<1<<2)|0;if((a|0)!=(i|0)){if(a>>>0<l>>>0)Re();if((s[a+12>>2]|0)!=(d|0))Re()}if((r|0)==(a|0)){s[756]=s[756]&~(1<<n);break}if((r|0)!=(i|0)){if(r>>>0<l>>>0)Re();i=r+8|0;if((s[i>>2]|0)==(d|0))o=i;else Re()}else o=r+8|0;s[a+12>>2]=r;s[o>>2]=a}}while(0);if(h>>>0<16){s[p>>2]=f|m&1|2;t=e+(f|4)|0;s[t>>2]=s[t>>2]|1;return e|0}else{s[p>>2]=m&1|t|2;s[e+(t+4)>>2]=h|3;m=e+(f|4)|0;s[m>>2]=s[m>>2]|1;Qs(e+t|0,h);return e|0}return 0}function Qs(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0;b=e+t|0;i=s[e+4>>2]|0;do{if(!(i&1)){c=s[e>>2]|0;if(!(i&3))return;h=e+(0-c)|0;f=c+t|0;u=s[760]|0;if(h>>>0<u>>>0)Re();if((h|0)==(s[761]|0)){r=e+(t+4)|0;i=s[r>>2]|0;if((i&3|0)!=3){w=h;o=f;break}s[758]=f;s[r>>2]=i&-2;s[e+(4-c)>>2]=f|1;s[b>>2]=f;return}n=c>>>3;if(c>>>0<256){a=s[e+(8-c)>>2]|0;r=s[e+(12-c)>>2]|0;i=3064+(n<<1<<2)|0;if((a|0)!=(i|0)){if(a>>>0<u>>>0)Re();if((s[a+12>>2]|0)!=(h|0))Re()}if((r|0)==(a|0)){s[756]=s[756]&~(1<<n);w=h;o=f;break}if((r|0)!=(i|0)){if(r>>>0<u>>>0)Re();i=r+8|0;if((s[i>>2]|0)==(h|0))l=i;else Re()}else l=r+8|0;s[a+12>>2]=r;s[l>>2]=a;w=h;o=f;break}l=s[e+(24-c)>>2]|0;a=s[e+(12-c)>>2]|0;do{if((a|0)==(h|0)){a=16-c|0;r=e+(a+4)|0;i=s[r>>2]|0;if(!i){r=e+a|0;i=s[r>>2]|0;if(!i){d=0;break}}while(1){a=i+20|0;n=s[a>>2]|0;if(n){i=n;r=a;continue}a=i+16|0;n=s[a>>2]|0;if(!n)break;else{i=n;r=a}}if(r>>>0<u>>>0)Re();else{s[r>>2]=0;d=i;break}}else{n=s[e+(8-c)>>2]|0;if(n>>>0<u>>>0)Re();i=n+12|0;if((s[i>>2]|0)!=(h|0))Re();r=a+8|0;if((s[r>>2]|0)==(h|0)){s[i>>2]=a;s[r>>2]=n;d=a;break}else Re()}}while(0);if(l){i=s[e+(28-c)>>2]|0;r=3328+(i<<2)|0;if((h|0)==(s[r>>2]|0)){s[r>>2]=d;if(!d){s[757]=s[757]&~(1<<i);w=h;o=f;break}}else{if(l>>>0<(s[760]|0)>>>0)Re();i=l+16|0;if((s[i>>2]|0)==(h|0))s[i>>2]=d;else s[l+20>>2]=d;if(!d){w=h;o=f;break}}a=s[760]|0;if(d>>>0<a>>>0)Re();s[d+24>>2]=l;i=16-c|0;r=s[e+i>>2]|0;do{if(r)if(r>>>0<a>>>0)Re();else{s[d+16>>2]=r;s[r+24>>2]=d;break}}while(0);i=s[e+(i+4)>>2]|0;if(i)if(i>>>0<(s[760]|0)>>>0)Re();else{s[d+20>>2]=i;s[i+24>>2]=d;w=h;o=f;break}else{w=h;o=f}}else{w=h;o=f}}else{w=e;o=t}}while(0);u=s[760]|0;if(b>>>0<u>>>0)Re();i=e+(t+4)|0;r=s[i>>2]|0;if(!(r&2)){if((b|0)==(s[762]|0)){v=(s[759]|0)+o|0;s[759]=v;s[762]=w;s[w+4>>2]=v|1;if((w|0)!=(s[761]|0))return;s[761]=0;s[758]=0;return}if((b|0)==(s[761]|0)){v=(s[758]|0)+o|0;s[758]=v;s[761]=w;s[w+4>>2]=v|1;s[w+v>>2]=v;return}o=(r&-8)+o|0;n=r>>>3;do{if(r>>>0>=256){l=s[e+(t+24)>>2]|0;a=s[e+(t+12)>>2]|0;do{if((a|0)==(b|0)){r=e+(t+20)|0;i=s[r>>2]|0;if(!i){r=e+(t+16)|0;i=s[r>>2]|0;if(!i){m=0;break}}while(1){a=i+20|0;n=s[a>>2]|0;if(n){i=n;r=a;continue}a=i+16|0;n=s[a>>2]|0;if(!n)break;else{i=n;r=a}}if(r>>>0<u>>>0)Re();else{s[r>>2]=0;m=i;break}}else{n=s[e+(t+8)>>2]|0;if(n>>>0<u>>>0)Re();i=n+12|0;if((s[i>>2]|0)!=(b|0))Re();r=a+8|0;if((s[r>>2]|0)==(b|0)){s[i>>2]=a;s[r>>2]=n;m=a;break}else Re()}}while(0);if(l){i=s[e+(t+28)>>2]|0;r=3328+(i<<2)|0;if((b|0)==(s[r>>2]|0)){s[r>>2]=m;if(!m){s[757]=s[757]&~(1<<i);break}}else{if(l>>>0<(s[760]|0)>>>0)Re();i=l+16|0;if((s[i>>2]|0)==(b|0))s[i>>2]=m;else s[l+20>>2]=m;if(!m)break}r=s[760]|0;if(m>>>0<r>>>0)Re();s[m+24>>2]=l;i=s[e+(t+16)>>2]|0;do{if(i)if(i>>>0<r>>>0)Re();else{s[m+16>>2]=i;s[i+24>>2]=m;break}}while(0);i=s[e+(t+20)>>2]|0;if(i)if(i>>>0<(s[760]|0)>>>0)Re();else{s[m+20>>2]=i;s[i+24>>2]=m;break}}}else{a=s[e+(t+8)>>2]|0;r=s[e+(t+12)>>2]|0;i=3064+(n<<1<<2)|0;if((a|0)!=(i|0)){if(a>>>0<u>>>0)Re();if((s[a+12>>2]|0)!=(b|0))Re()}if((r|0)==(a|0)){s[756]=s[756]&~(1<<n);break}if((r|0)!=(i|0)){if(r>>>0<u>>>0)Re();i=r+8|0;if((s[i>>2]|0)==(b|0))p=i;else Re()}else p=r+8|0;s[a+12>>2]=r;s[p>>2]=a}}while(0);s[w+4>>2]=o|1;s[w+o>>2]=o;if((w|0)==(s[761]|0)){s[758]=o;return}}else{s[i>>2]=r&-2;s[w+4>>2]=o|1;s[w+o>>2]=o}i=o>>>3;if(o>>>0<256){r=i<<1;n=3064+(r<<2)|0;a=s[756]|0;i=1<<i;if(a&i){i=3064+(r+2<<2)|0;r=s[i>>2]|0;if(r>>>0<(s[760]|0)>>>0)Re();else{g=i;v=r}}else{s[756]=a|i;g=3064+(r+2<<2)|0;v=n}s[g>>2]=w;s[v+12>>2]=w;s[w+8>>2]=v;s[w+12>>2]=n;return}i=o>>>8;if(i)if(o>>>0>16777215)n=31;else{g=(i+1048320|0)>>>16&8;v=i<<g;b=(v+520192|0)>>>16&4;v=v<<b;n=(v+245760|0)>>>16&2;n=14-(b|g|n)+(v<<n>>>15)|0;n=o>>>(n+7|0)&1|n<<1}else n=0;i=3328+(n<<2)|0;s[w+28>>2]=n;s[w+20>>2]=0;s[w+16>>2]=0;r=s[757]|0;a=1<<n;if(!(r&a)){s[757]=r|a;s[i>>2]=w;s[w+24>>2]=i;s[w+12>>2]=w;s[w+8>>2]=w;return}i=s[i>>2]|0;e:do{if((s[i+4>>2]&-8|0)!=(o|0)){n=o<<((n|0)==31?0:25-(n>>>1)|0);while(1){r=i+16+(n>>>31<<2)|0;a=s[r>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(o|0)){i=a;break e}else{n=n<<1;i=a}}if(r>>>0<(s[760]|0)>>>0)Re();s[r>>2]=w;s[w+24>>2]=i;s[w+12>>2]=w;s[w+8>>2]=w;return}}while(0);r=i+8|0;a=s[r>>2]|0;v=s[760]|0;if(!(a>>>0>=v>>>0&i>>>0>=v>>>0))Re();s[a+12>>2]=w;s[r>>2]=w;s[w+8>>2]=a;s[w+12>>2]=i;s[w+24>>2]=0;return}function Vs(e,t,i,a,o,l,f,h,p,m,b,g){e=e|0;t=t|0;i=i|0;a=a|0;o=o|0;l=l|0;f=f|0;h=h|0;p=p|0;m=m|0;b=+b;g=g|0;var v=0,w=0,k=0.0,y=0.0,_=0,S=0,x=0.0,q=0.0,E=0.0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0.0,$=0,D=0,N=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,V=0.0,Y=0.0,W=0.0,G=0.0,K=0,J=0;Q=d;d=d+240|0;S=Q+224|0;_=Q+216|0;T=Q+208|0;C=Q+200|0;v=Q+136|0;L=Q+72|0;j=Q;H=Q+232|0;B=Q+228|0;c[v>>3]=100.0;c[v+8>>3]=100.0;c[v+16>>3]=110.0;c[v+24>>3]=100.0;c[v+32>>3]=110.0;c[v+40>>3]=110.0;c[v+48>>3]=100.0;c[v+56>>3]=110.0;c[L>>3]=+c[m>>3];c[L+8>>3]=+c[m+8>>3];c[L+16>>3]=+c[m+16>>3];c[L+24>>3]=+c[m+24>>3];c[L+32>>3]=+c[m+32>>3];c[L+40>>3]=+c[m+40>>3];c[L+48>>3]=+c[m+48>>3];c[L+56>>3]=+c[m+56>>3];Gs(v,L,j);E=+c[L>>3];Y=+c[L+16>>3];x=E-Y;F=+c[L+8>>3];V=+c[L+24>>3];k=F-V;v=~~(x*x+k*k);k=+c[L+32>>3];x=+c[L+48>>3];G=k-x;y=+c[L+40>>3];q=+c[L+56>>3];W=y-q;L=~~(G*G+W*W);k=Y-k;y=V-y;w=~~(k*k+y*y);E=x-E;F=q-F;z=~~(E*E+F*F);v=~~(+(((L|0)>(v|0)?L:v)|0)*b*b);w=~~(+(((z|0)>(w|0)?z:w)|0)*b*b);if(!e){m=i;while(1)if((m|0)<(a|0)&(ie(m,m)|0)<(v|0))m=m<<1;else break;v=i;while(1)if((v|0)<(a|0)&(ie(v,v)|0)<(w|0))v=v<<1;else break}else{m=i;while(1)if((m|0)<(a|0)&(ie(m<<2,m)|0)<(v|0))m=m<<1;else break;v=i;while(1)if((v|0)<(a|0)&(ie(v<<2,v)|0)<(w|0))v=v<<1;else break}z=(m|0)>(a|0)?a:m;N=(v|0)>(a|0)?a:v;D=(z|0)/(i|0)|0;$=(N|0)/(i|0)|0;k=(1.0-b)*.5*10.0;F=b*10.0;L=ie(i,i)|0;e:do{if(!t){O=L*3|0;m=Hs(O,4)|0;if(!m){en(3,5472,C);kt(1)}do{switch(h|0){case 0:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((ie(w,l)|0)+v|0)*3|0;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+2)>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+1)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 1:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=((ie(w,l)|0)+v|0)*3|0;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+w>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w+1)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w+2)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 2:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+w>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 3:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+w>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|2)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 4:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|1)>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|3)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 5:case 12:case 13:case 14:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=n[o+((ie(w,l)|0)+v)>>0]|0;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+w;v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+w;e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+w}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 6:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=(ie(w,l)|0)+v<<2;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|3)>>0]|0);v=m+(e+1<<2)|0;s[v>>2]=(s[v>>2]|0)+(n[o+(w|2)>>0]|0);e=m+(e+2<<2)|0;s[e>>2]=(s[e>>2]|0)+(n[o+(w|1)>>0]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 7:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){J=ie(w,l)|0;K=(v&65534)+J<<1;Y=+((n[o+K>>0]|0)+-128|0);G=+((n[o+(K+2)>>0]|0)+-128|0);W=+((n[o+(J+v<<1|1)>>0]|0)+-16|0)*298.0820007324219;J=~~(Y*516.4110107421875+W)>>8;K=~~(W-Y*100.29100036621094-G*208.1199951171875)>>8;w=~~(W+G*408.5830078125)>>8;J=(J|0)>0?J:0;e=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;v=m+(e<<2)|0;s[v>>2]=((J|0)<255?J:255)+(s[v>>2]|0);K=(K|0)>0?K:0;v=m+(e+1<<2)|0;s[v>>2]=((K|0)<255?K:255)+(s[v>>2]|0);w=(w|0)>0?w:0;e=m+(e+2<<2)|0;s[e>>2]=((w|0)<255?w:255)+(s[e>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 8:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){w=ie(w,l)|0;K=(v&65534)+w<<1;Y=+((n[o+(K|1)>>0]|0)+-128|0);G=+((n[o+(K+3)>>0]|0)+-128|0);W=+((n[o+(w+v<<1)>>0]|0)+-16|0)*298.0820007324219;v=~~(W+Y*516.4110107421875)>>8;w=~~(W-Y*100.29100036621094-G*208.1199951171875)>>8;K=~~(W+G*408.5830078125)>>8;v=(v|0)>0?v:0;J=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;e=m+(J<<2)|0;s[e>>2]=((v|0)<255?v:255)+(s[e>>2]|0);w=(w|0)>0?w:0;e=m+(J+1<<2)|0;s[e>>2]=((w|0)<255?w:255)+(s[e>>2]|0);K=(K|0)>0?K:0;J=m+(J+2<<2)|0;s[J>>2]=((K|0)<255?K:255)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 9:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;e=m+(J<<2)|0;s[e>>2]=(w<<3&248|4)+(s[e>>2]|0);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;s[e>>2]=(K<<5&224|w>>>3&28|2)+(s[e>>2]|0);J=m+(J+2<<2)|0;s[J>>2]=(K&248|4)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 10:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;w=n[o+(K|1)>>0]|0;J=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;e=m+(J<<2)|0;s[e>>2]=(w<<2&248|4)+(s[e>>2]|0);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;s[e>>2]=(K<<5&224|w>>>3&24|4)+(s[e>>2]|0);J=m+(J+2<<2)|0;s[J>>2]=(K&248|4)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}case 11:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;J=((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)|0)*3|0;e=m+(J<<2)|0;s[e>>2]=(s[e>>2]|0)+((n[o+(K|1)>>0]|0)&240|8);K=n[o+K>>0]|0;e=m+(J+1<<2)|0;s[e>>2]=(K<<4&240|8)+(s[e>>2]|0);J=m+(J+2<<2)|0;s[J>>2]=(K&240|8)+(s[J>>2]|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}break}default:{en(3,4615,T);U=278;break e}}}while(0);w=ie($,D)|0;if(L){v=0;do{r[g+v>>0]=((s[m+(v<<2)>>2]|0)>>>0)/(w>>>0)|0;v=v+1|0}while((v|0)<(O|0))}js(m);m=0}else{m=Hs(L,4)|0;if(!m){en(3,5472,_);kt(1)}t:do{if(h>>>0<2){x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)>0){t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=((ie(w,l)|0)+v|0)*3|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K+1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K+2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0))}}else{if((h&-2|0)==2){x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break;t=(z|0)>0;S=0;while(1){y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<2;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K|1)>>0]|0)+(n[o+K>>0]|0)+(n[o+(K|2)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0;if((S|0)>=(N|0))break t}}if((h&-3|0)==4){x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break;t=(z|0)>0;S=0;while(1){y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<2;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((n[o+(K|2)>>0]|0)+(n[o+(K|1)>>0]|0)+(n[o+(K|3)>>0]|0)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0;if((S|0)>=(N|0))break t}}switch(h|0){case 5:case 12:case 13:case 14:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v)>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}case 7:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v<<1|1)>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}case 8:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=n[o+((ie(w,l)|0)+v<<1)>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+K}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}case 9:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((K<<3&248|4)+(O&248|4)+(O<<5&224|K>>>3&28|2)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}case 10:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;K=n[o+(K|1)>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((K<<2&248|4)+(O&248|4)+(O<<5&224|K>>>3&24|4)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}case 11:{x=k+100.0;q=+(N|0);E=+(z|0);C=j+48|0;T=j+56|0;h=j+64|0;A=j+8|0;M=j+16|0;P=j+24|0;R=j+32|0;I=j+40|0;a=(e|0)==1;if((N|0)<=0)break t;t=(z|0)>0;S=0;do{y=x+F*(+(S|0)+.5)/q;if(t){_=0;do{k=x+F*(+(_|0)+.5)/E;b=+c[h>>3]+(+c[C>>3]*k+y*+c[T>>3]);if(b==0.0){U=278;break e}G=(+c[M>>3]+(k*+c[j>>3]+y*+c[A>>3]))/b;u[H>>2]=G;k=(+c[I>>3]+(k*+c[P>>3]+y*+c[R>>3]))/b;u[B>>2]=k;Cn(p,G,k,H,B)|0;k=+u[H>>2];if(a){v=((~~(k+1.0)|0)/2|0)<<1;w=((~~(+u[B>>2]+1.0)|0)/2|0)<<1}else{v=~~(k+.5);w=~~(+u[B>>2]+.5)}if((v|0)>-1?(w|0)<(f|0)&((w|0)>-1&(v|0)<(l|0)):0){K=(ie(w,l)|0)+v<<1;O=n[o+K>>0]|0;J=m+((ie((S|0)/($|0)|0,i)|0)+((_|0)/(D|0)|0)<<2)|0;s[J>>2]=(s[J>>2]|0)+((((O<<4&240|8)+(O&240|8)+((n[o+(K|1)>>0]|0)&240|8)|0)>>>0)/3|0)}_=_+1|0}while((_|0)<(z|0))}S=S+1|0}while((S|0)<(N|0));break}default:{en(3,4615,S);U=278;break e}}}}while(0);v=ie($,D)|0;if(L){w=0;do{r[g+w>>0]=((s[m+(w<<2)>>2]|0)>>>0)/(v>>>0)|0;w=w+1|0}while((w|0)<(L|0))}js(m);m=0}}while(0);if((U|0)==278){js(m);m=-1}d=Q;return m|0}function Ys(e,t,i,a,o,l,u){e=e|0;t=t|0;i=i|0;a=a|0;o=o|0;l=l|0;u=u|0;var f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0;y=d;d=d+32|0;m=y+24|0;p=y+8|0;k=y;e:do{if((t+-3|0)>>>0>5){s[i>>2]=-1;s[a>>2]=0;c[o>>3]=-1.0;f=-1}else{s[p>>2]=0;w=t+-1|0;s[p+4>>2]=ie(w,t)|0;g=ie(t,t)|0;s[p+8>>2]=g+-1;s[p+12>>2]=w;h=r[e+(s[p>>2]|0)>>0]|0;f=(h&255)>0?h:0;h=(h&255)<255?h:-1;v=r[e+(s[p+4>>2]|0)>>0]|0;f=(v&255)>(f&255)?v:f;h=(v&255)<(h&255)?v:h;v=r[e+(s[p+8>>2]|0)>>0]|0;f=(v&255)>(f&255)?v:f;h=(v&255)<(h&255)?v:h;v=r[e+(s[p+12>>2]|0)>>0]|0;f=((v&255)>(f&255)?v:f)&255;h=((v&255)<(h&255)?v:h)&255;if((f-h|0)<30){s[i>>2]=-1;s[a>>2]=0;c[o>>3]=-1.0;f=-2;break}b=(f+h|0)>>>1;r[m>>0]=(n[e+(s[p>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+1>>0]=(n[e+(s[p+4>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+2>>0]=(n[e+(s[p+8>>2]|0)>>0]|0)>>>0<b>>>0&1;r[m+3>>0]=(n[e+(s[p+12>>2]|0)>>0]|0)>>>0<b>>>0&1;h=0;while(1){f=h+1|0;if(((r[m+h>>0]|0)==1?(r[m+((f|0)%4|0)>>0]|0)==1:0)?(r[m+((h+2|0)%4|0)>>0]|0)==0:0){f=h;h=10;break}if((f|0)<4)h=f;else{h=12;break}}if((h|0)==10)s[a>>2]=f;else if((h|0)==12?(f|0)==4:0){s[i>>2]=-1;s[a>>2]=0;c[o>>3]=-1.0;f=-3;break}if(!g)v=255;else{f=255;h=0;do{v=e+h|0;m=n[v>>0]|0;p=m-b|0;p=(p|0)<0?0-p|0:p;f=(p|0)<(f|0)?p:f;r[v>>0]=m>>>0<b>>>0&1;h=h+1|0}while((h|0)<(g|0));v=f}switch(s[a>>2]|0){case 0:{if((t|0)>0){g=(t|0)==0;h=0;f=0;a=0;do{m=(a|0)==(w|0);b=ie(a,t)|0;if(!g){p=0;do{if((p|a|0)!=0?!(m&((p|0)==0|(p|0)==(w|0))):0){h=Yu(h|0,f|0,1)|0;h=(r[e+(p+b)>>0]|0)!=0|h;f=R}p=p+1|0}while((p|0)!=(t|0))}a=a+1|0}while((a|0)<(t|0))}else{h=0;f=0}break}case 1:{if((t|0)>0){g=(t|0)>0;h=0;f=0;a=0;do{m=(a|0)==0;b=(a|0)==(w|0);if(g){p=w;while(1){_=(p|0)==(w|0);if(!(m&_)?!(b&(_|(p|0)==0)):0){h=Yu(h|0,f|0,1)|0;h=(r[e+((ie(p,t)|0)+a)>>0]|0)!=0|h;f=R}if((p|0)>0)p=p+-1|0;else break}}a=a+1|0}while((a|0)<(t|0))}else{h=0;f=0}break}case 2:{if((t|0)>0){g=(t|0)>0;h=0;f=0;a=w;while(1){b=(a|0)==(w|0)|(a|0)==0;m=ie(a,t)|0;if(g){p=w;while(1){if(!(b&(p|0)==(w|0)|(p|a|0)==0)){h=Yu(h|0,f|0,1)|0;h=(r[e+(p+m)>>0]|0)!=0|h;f=R}if((p|0)>0)p=p+-1|0;else break}}if((a|0)>0)a=a+-1|0;else break}}else{h=0;f=0}break}case 3:{if((t|0)>0){g=(t|0)>0;h=0;f=0;a=w;while(1){m=(a|0)==(w|0);b=(a|0)==0;if(g){p=0;do{if(!(m&(p|0)==0|(p|a|0)==0|b&(p|0)==(w|0))){h=Yu(h|0,f|0,1)|0;h=(r[e+((ie(p,t)|0)+a)>>0]|0)!=0|h;f=R}p=p+1|0}while((p|0)<(t|0))}if((a|0)>0)a=a+-1|0;else break}}else{h=0;f=0}break}default:{h=0;f=0}}c[o>>3]=(v|0)>30?1.0:+(v|0)/30.0;switch(l|0){case 259:{_=r[4551+h>>0]|0;l=_<<24>>24;u=k;s[u>>2]=l;s[u+4>>2]=((l|0)<0)<<31>>31;if(_<<24>>24<0){s[i>>2]=-1;c[o>>3]=-1.0;f=-4;break e}break}case 515:{f=r[4423+h>>0]|0;l=f<<24>>24;_=k;s[_>>2]=l;s[_+4>>2]=((l|0)<0)<<31>>31;if(u)s[u>>2]=n[4487+h>>0];if(f<<24>>24<0){s[i>>2]=-1;c[o>>3]=-1.0;f=-4;break e}break}case 772:case 1028:{f=Ks(l,h,f,0,k)|0;if((f|0)<0){s[i>>2]=-1;c[o>>3]=-1.0;f=-4;break e}if((u|0)!=0&(f|0)>0)s[u>>2]=f;break}default:{_=k;s[_>>2]=h;s[_+4>>2]=f}}s[i>>2]=s[k>>2];f=0}}while(0);d=y;return f|0}function Ws(e,t,i,r,a,o,l){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;o=o|0;l=l|0;var u=0,f=0.0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0,q=0,E=0,C=0,T=0,A=0.0;T=d;d=d+16|0;u=T+8|0;h=T;e:do{if(!e){s[a>>2]=0;s[o>>2]=0;c[l>>3]=-1.0;t=-1}else switch(t|0){case 0:{p=ie(r,r)|0;q=p*3|0;E=zs(p*12|0)|0;if(!E){en(3,5472,h);kt(1)}if(!p)t=0;else{t=0;u=0;do{t=((n[i+u>>0]|0)^255)+t|0;u=u+1|0}while((u|0)<(q|0))}u=(t|0)/(q|0)|0;if(!p)f=0.0;else{h=0;t=0;do{S=((n[i+h>>0]|0)^255)-u|0;s[E+(h<<2)>>2]=S;t=(ie(S,S)|0)+t|0;h=h+1|0}while((h|0)<(q|0));f=+(t|0)}x=+U(+f);if(x/(+(r|0)*1.7320508)<15.0){s[a>>2]=0;s[o>>2]=0;c[l>>3]=-1.0;js(E);t=-2;break e}y=s[e>>2]|0;_=e+12|0;S=e+16|0;if((y|0)>0){k=s[e+8>>2]|0;v=(p|0)==0;h=-1;w=0;f=0.0;u=-1;t=-1;do{t:while(1){h=h+1|0;switch(s[k+(h<<2)>>2]|0){case 0:break;case 2:break t;default:{C=17;break t}}}if((C|0)==17){C=0;m=h<<2;b=s[S>>2]|0;g=0;do{e=g+m|0;if(v)p=0;else{i=s[(s[_>>2]|0)+(e<<2)>>2]|0;r=0;p=0;do{p=(ie(s[i+(r<<2)>>2]|0,s[E+(r<<2)>>2]|0)|0)+p|0;r=r+1|0}while((r|0)<(q|0))}A=+(p|0)/+c[b+(e<<3)>>3]/x;e=A>f;u=e?g:u;t=e?h:t;f=e?A:f;g=g+1|0}while((g|0)!=4)}w=w+1|0}while((w|0)<(y|0))}else{f=0.0;u=-1;t=-1}s[o>>2]=u;s[a>>2]=t;c[l>>3]=f;js(E);t=0;break e}case 1:{q=ie(r,r)|0;E=zs(q<<2)|0;if(!E){en(3,5472,u);kt(1)}if(!q)t=0;else{t=0;u=0;do{t=((n[i+u>>0]|0)^255)+t|0;u=u+1|0}while((u|0)<(q|0))}u=(t|0)/(q|0)|0;if(!q)f=0.0;else{h=0;t=0;do{S=((n[i+h>>0]|0)^255)-u|0;s[E+(h<<2)>>2]=S;t=(ie(S,S)|0)+t|0;h=h+1|0}while((h|0)<(q|0));f=+(t|0)}x=+U(+f);if(x/+(r|0)<15.0){s[a>>2]=0;s[o>>2]=0;c[l>>3]=-1.0;js(E);t=-2;break e}y=s[e>>2]|0;_=e+20|0;S=e+24|0;if((y|0)>0){v=s[e+8>>2]|0;w=(q|0)==0;h=-1;k=0;f=0.0;u=-1;t=-1;do{t:while(1){h=h+1|0;switch(s[v+(h<<2)>>2]|0){case 0:break;case 2:break t;default:{C=37;break t}}}if((C|0)==37){C=0;m=h<<2;b=s[S>>2]|0;g=0;do{e=g+m|0;if(w)p=0;else{i=s[(s[_>>2]|0)+(e<<2)>>2]|0;r=0;p=0;do{p=(ie(s[i+(r<<2)>>2]|0,s[E+(r<<2)>>2]|0)|0)+p|0;r=r+1|0}while((r|0)<(q|0))}A=+(p|0)/+c[b+(e<<3)>>3]/x;e=A>f;u=e?g:u;t=e?h:t;f=e?A:f;g=g+1|0}while((g|0)!=4)}k=k+1|0}while((k|0)<(y|0))}else{f=0.0;u=-1;t=-1}s[o>>2]=u;s[a>>2]=t;c[l>>3]=f;js(E);t=0;break e}default:{t=-1;break e}}}while(0);d=T;return t|0}function Gs(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0,u=0,d=0,f=0,h=0,p=0,m=0;r=nn(8,8)|0;a=nn(8,1)|0;n=nn(8,1)|0;o=s[r>>2]|0;l=s[a>>2]|0;u=0;do{m=e+(u<<4)|0;d=u<<4;c[o+(d<<3)>>3]=+c[m>>3];p=e+(u<<4)+8|0;c[o+((d|1)<<3)>>3]=+c[p>>3];c[o+((d|2)<<3)>>3]=1.0;c[o+((d|3)<<3)>>3]=0.0;c[o+((d|4)<<3)>>3]=0.0;c[o+((d|5)<<3)>>3]=0.0;h=t+(u<<4)|0;c[o+((d|6)<<3)>>3]=-(+c[m>>3]*+c[h>>3]);c[o+((d|7)<<3)>>3]=-(+c[p>>3]*+c[h>>3]);c[o+((d|8)<<3)>>3]=0.0;c[o+((d|9)<<3)>>3]=0.0;c[o+((d|10)<<3)>>3]=0.0;c[o+((d|11)<<3)>>3]=+c[m>>3];c[o+((d|12)<<3)>>3]=+c[p>>3];c[o+((d|13)<<3)>>3]=1.0;f=t+(u<<4)+8|0;c[o+((d|14)<<3)>>3]=-(+c[m>>3]*+c[f>>3]);c[o+((d|15)<<3)>>3]=-(+c[p>>3]*+c[f>>3]);d=u<<1;c[l+(d<<3)>>3]=+c[h>>3];c[l+((d|1)<<3)>>3]=+c[f>>3];u=u+1|0}while((u|0)!=4);mn(r)|0;fn(n,r,a)|0;m=s[n>>2]|0;c[i>>3]=+c[m>>3];c[i+8>>3]=+c[m+8>>3];c[i+16>>3]=+c[m+16>>3];m=s[n>>2]|0;c[i+24>>3]=+c[m+24>>3];c[i+32>>3]=+c[m+32>>3];c[i+40>>3]=+c[m+40>>3];m=s[n>>2]|0;c[i+48>>3]=+c[m+48>>3];c[i+56>>3]=+c[m+56>>3];c[i+64>>3]=1.0;dn(r)|0;dn(a)|0;dn(n)|0;return}function Ks(e,t,i,a,o){e=e|0;t=t|0;i=i|0;a=a|0;o=o|0;var l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,I=0,O=0;O=d;d=d+2320|0;u=O+2304|0;x=O+864|0;k=O+784|0;I=O+704|0;_=O+624|0;y=O+548|0;P=O+40|0;A=O;switch(e|0){case 772:{a=9;l=1;c=3;break}case 1028:{a=5;l=2;c=3;break}case 2830:{E=900;v=1472;T=64;M=120;q=127;C=a;l=9;c=6;break}default:i=-1}if((c|0)==3){e=0;while(1){r[u+e>>0]=t&1;t=Gu(t|0,i|0,1)|0;e=e+1|0;if((e|0)==13)break;else i=R}E=840;v=1408;T=a;M=13;q=15;C=u;c=6}do{if((c|0)==6){g=l<<1;u=1;i=0;while(1){a=y+(u<<2)|0;s[a>>2]=0;e=0;t=0;do{if(r[C+t>>0]|0){e=e^s[E+(((ie(t,u)|0)%(q|0)|0)<<2)>>2];s[a>>2]=e}t=t+1|0}while((t|0)<(M|0));i=(e|0)==0?i:1;s[a>>2]=s[v+(e<<2)>>2];if((u|0)<(g|0))u=u+1|0;else break}S=(i|0)!=0;if(S){s[k>>2]=0;i=s[y+4>>2]|0;s[k+4>>2]=i;s[x>>2]=0;s[x+72>>2]=1;if((g|0)>1){e=1;do{s[x+(e<<2)>>2]=-1;s[x+72+(e<<2)>>2]=0;e=e+1|0}while((e|0)<(g|0))}s[I>>2]=0;s[I+4>>2]=0;s[_>>2]=-1;s[_+4>>2]=0;m=0;b=0;while(1){a=b;b=b+1|0;p=k+(b<<2)|0;if((i|0)==-1){u=a+2|0;s[I+(u<<2)>>2]=m;if((m|0)<0)h=m;else{i=0;while(1){p=x+(b*72|0)+(i<<2)|0;h=s[p>>2]|0;s[x+(u*72|0)+(i<<2)>>2]=h;s[p>>2]=s[v+(h<<2)>>2];if((i|0)<(m|0))i=i+1|0;else{h=m;break}}}}else{e=a;while(1){i=(e|0)>0;if(i&(s[k+(e<<2)>>2]|0)==-1)e=e+-1|0;else break}if(i){t=e;do{i=t;t=t+-1|0;if((s[k+(t<<2)>>2]|0)!=-1)e=(s[_+(e<<2)>>2]|0)<(s[_+(t<<2)>>2]|0)?t:e}while((i|0)>1)}t=I+(e<<2)|0;f=b-e|0;h=f+(s[t>>2]|0)|0;u=a+2|0;h=(m|0)>(h|0)?m:h;s[I+(u<<2)>>2]=h;i=0;do{s[x+(u*72|0)+(i<<2)>>2]=0;i=i+1|0}while((i|0)<(g|0));i=s[t>>2]|0;t=k+(e<<2)|0;if((i|0)>=0){c=0;while(1){a=s[x+(e*72|0)+(c<<2)>>2]|0;if((a|0)!=-1)s[x+(u*72|0)+(f+c<<2)>>2]=s[E+(((a+q+(s[p>>2]|0)-(s[t>>2]|0)|0)%(q|0)|0)<<2)>>2];if((c|0)<(i|0))c=c+1|0;else break}}if((m|0)>=0){i=0;while(1){p=x+(b*72|0)+(i<<2)|0;f=s[p>>2]|0;c=x+(u*72|0)+(i<<2)|0;s[c>>2]=s[c>>2]^f;s[p>>2]=s[v+(f<<2)>>2];if((i|0)<(m|0))i=i+1|0;else break}}}s[_+(u<<2)>>2]=b-h;if((b|0)>=(g|0))break;i=s[y+(u<<2)>>2]|0;if((i|0)==-1)i=0;else i=s[E+(i<<2)>>2]|0;a=k+(u<<2)|0;s[a>>2]=i;if((h|0)>=1){t=1;while(1){e=s[y+(u-t<<2)>>2]|0;if((e|0)!=-1?(w=s[x+(u*72|0)+(t<<2)>>2]|0,(w|0)!=0):0){i=i^s[E+((((s[v+(w<<2)>>2]|0)+e|0)%(q|0)|0)<<2)>>2];s[a>>2]=i}if((t|0)<(h|0))t=t+1|0;else break}}i=s[v+(i<<2)>>2]|0;s[a>>2]=i;if((h|0)>(l|0))break;else m=h}if((h|0)>(l|0)){i=-1;break}if((h|0)>=0){i=0;while(1){_=x+(u*72|0)+(i<<2)|0;s[_>>2]=s[v+(s[_>>2]<<2)>>2];if((i|0)<(h|0))i=i+1|0;else break}}if((h|0)>=1){i=1;while(1){s[A+(i<<2)>>2]=s[x+(u*72|0)+(i<<2)>>2];if((i|0)<(h|0))i=i+1|0;else break}}c=(h|0)<1;i=0;f=1;do{if(c)e=1;else{l=1;e=1;while(1){t=A+(l<<2)|0;a=s[t>>2]|0;if((a|0)!=-1){x=(a+l|0)%(q|0)|0;s[t>>2]=x;e=s[E+(x<<2)>>2]^e}if((l|0)<(h|0))l=l+1|0;else break}}if(!e){s[P+(i<<2)>>2]=q-f;i=i+1|0}f=f+1|0}while((q|0)>=(f|0));if((i|0)!=(h|0)){i=-1;break}if((h|0)>0){i=0;do{A=C+(s[P+(i<<2)>>2]|0)|0;r[A>>0]=n[A>>0]^1;i=i+1|0}while((i|0)<(h|0))}}else u=0;e=o;s[e>>2]=0;s[e+4>>2]=0;e=1;t=0;a=0;l=0;i=M-T|0;while(1){P=ic(n[C+i>>0]|0,0,e|0,t|0)|0;a=Wu(P|0,R|0,a|0,l|0)|0;l=R;P=o;s[P>>2]=a;s[P+4>>2]=l;e=Yu(e|0,t|0,1)|0;i=i+1|0;if((i|0)>=(M|0))break;else t=R}if(S)i=s[I+(u<<2)>>2]|0;else i=0}}while(0);d=O;return i|0}function Js(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0.0;E=d;d=d+32|0;q=E+24|0;n=E+16|0;i=E+8|0;do{if(e){if(!t){en(3,4674,i);i=-1;break}x=e+8|0;a=s[e+4>>2]|0;e:do{if((a|0)>0){r=s[x>>2]|0;i=0;do{if(!(s[r+(i<<2)>>2]|0))break e;i=i+1|0}while((i|0)<(a|0))}else i=0}while(0);if((i|0)!=(a|0)){S=ks(t)|0;if(!S){en(3,4719,n);i=-1;break}g=e+28|0;v=i<<2;w=e+12|0;k=e+20|0;y=e+16|0;_=e+24|0;a=Es(S,4742)|0;r=0;e:while(1){b=r+v|0;m=0;t=0;do{h=(m|0)==0;p=(m|0)==2;n=s[g>>2]|0;if((n|0)>0){f=0;do{if((n|0)>0){u=0;do{if(!a){r=17;break e}n=cs(a)|0;a=Es(0,4742)|0;n=255-n|0;l=(((ie(s[g>>2]|0,f)|0)+u|0)*3|0)+m|0;s[(s[(s[w>>2]|0)+(b<<2)>>2]|0)+(l<<2)>>2]=n;l=(ie(s[g>>2]|0,f)|0)+u|0;o=s[(s[k>>2]|0)+(b<<2)>>2]|0;l=o+(l<<2)|0;if(!h){s[l>>2]=(s[l>>2]|0)+n;if(p){l=o+((ie(s[g>>2]|0,f)|0)+u<<2)|0;s[l>>2]=(s[l>>2]|0)/3|0}}else s[l>>2]=n;t=n+t|0;u=u+1|0;n=s[g>>2]|0}while((u|0)<(n|0))}f=f+1|0}while((f|0)<(n|0))}m=m+1|0}while((m|0)<3);n=s[g>>2]|0;u=(t|0)/(ie(n*3|0,n)|0)|0;if((ie(n*3|0,n)|0)>0){o=s[(s[w>>2]|0)+(b<<2)>>2]|0;l=0;t=0;do{m=o+(l<<2)|0;n=(s[m>>2]|0)-u|0;s[m>>2]=n;t=(ie(n,n)|0)+t|0;l=l+1|0;n=s[g>>2]|0}while((l|0)<(ie(n*3|0,n)|0))}else t=0;C=+U(+ +(t|0));c[(s[y>>2]|0)+(b<<3)>>3]=C==0.0?1.0e-07:C;if(!(ie(n,n)|0))t=0;else{n=s[(s[k>>2]|0)+(b<<2)>>2]|0;o=0;t=0;do{p=n+(o<<2)|0;m=(s[p>>2]|0)-u|0;s[p>>2]=m;t=(ie(m,m)|0)+t|0;o=o+1|0;m=s[g>>2]|0}while((o|0)<(ie(m,m)|0))}C=+U(+ +(t|0));c[(s[_>>2]|0)+(b<<3)>>3]=C==0.0?1.0e-07:C;r=r+1|0;if((r|0)>=4){r=32;break}}if((r|0)==17){en(3,4747,q);js(S);i=-1;break}else if((r|0)==32){js(S);s[(s[x>>2]|0)+(i<<2)>>2]=1;s[e>>2]=(s[e>>2]|0)+1;break}}else i=-1}else{en(3,4649,E);i=-1}}while(0);d=E;return i|0}function Xs(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0,l=0,u=0;u=d;d=d+32|0;l=u+16|0;o=u+8|0;i=u;n=Va(t,4854)|0;do{if(n){Ja(n,0,2)|0;i=es(n)|0;Ja(n,0,0)|0;a=zs(i+1|0)|0;if(!a){en(3,5472,o);Ha(n)|0;i=-1;break}o=Wa(a,i,1,n)|0;Ha(n)|0;if(!o){s[l>>2]=t;en(3,4820,l);js(a);i=-1;break}else{r[a+i>>0]=0;i=Js(e,a)|0;js(a);break}}else{s[i>>2]=t;en(3,4774,i);i=-1}}while(0);d=u;return i|0}function Zs(e,t){e=e|0;t=t|0;t=(s[e+8>>2]|0)+(t<<2)|0;if(!(s[t>>2]|0))t=-1;else{s[t>>2]=0;s[e>>2]=(s[e>>2]|0)+-1;t=1}return t|0}function en(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l+16|0;a=l;s[o>>2]=0;if(((t|0)!=0&(s[496]|0)<=(e|0)?(r[t>>0]|0)!=0:0)?(s[a>>2]=i,n=ss(o,t,a)|0,(n|0)>-1):0){a=s[497]|0;do{if(a){if(!(s[498]|0)){Uc[a&15](s[o>>2]|0);break}i=ut()|0;e=s[500]|0;if((i|0)==(s[499]|0)){if((e|0)>0){Uc[a&15](s[502]|0);s[500]=0;a=s[497]|0}Uc[a&15](s[o>>2]|0);break}a=s[501]|0;if((e|0)<(a|0)){t=(s[502]|0)+e|0;if((n|0)<(-3-e+a|0)){vs(t,s[o>>2]|0)|0;s[500]=(s[500]|0)+n;break}else{r[t>>0]=46;r[t+1>>0]=46;r[t+2>>0]=46;r[t+3>>0]=0;s[500]=s[501];break}}}else Ya(s[o>>2]|0,s[659]|0)|0}while(0);js(s[o>>2]|0)}d=l;return}function tn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,s=0,n=0,o=0;o=0;do{r=e+(o<<5)|0;a=e+(o<<5)+8|0;s=e+(o<<5)+16|0;n=0;do{c[i+(o<<5)+(n<<3)>>3]=+c[r>>3]*+c[t+(n<<3)>>3]+ +c[a>>3]*+c[t+32+(n<<3)>>3]+ +c[s>>3]*+c[t+64+(n<<3)>>3];n=n+1|0}while((n|0)!=4);n=i+(o<<5)+24|0;c[n>>3]=+c[e+(o<<5)+24>>3]+ +c[n>>3];o=o+1|0}while((o|0)!=3);return 0}function rn(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0;l=nn(4,4)|0;i=s[l>>2]|0;r=s[l>>2]|0;a=s[l>>2]|0;n=s[l>>2]|0;o=0;do{u=o<<2;c[i+(u<<3)>>3]=+c[e+(o<<5)>>3];c[r+(1+u<<3)>>3]=+c[e+(o<<5)+8>>3];c[a+(2+u<<3)>>3]=+c[e+(o<<5)+16>>3];c[n+(3+u<<3)>>3]=+c[e+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);i=s[l>>2]|0;r=i+96|0;s[r>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;c[i+120>>3]=1.0;mn(l)|0;i=s[l>>2]|0;r=s[l>>2]|0;a=s[l>>2]|0;n=s[l>>2]|0;o=0;do{u=o<<2;c[t+(o<<5)>>3]=+c[i+(u<<3)>>3];c[t+(o<<5)+8>>3]=+c[r+(1+u<<3)>>3];c[t+(o<<5)+16>>3]=+c[a+(2+u<<3)>>3];c[t+(o<<5)+24>>3]=+c[n+(3+u<<3)>>3];o=o+1|0}while((o|0)!=3);dn(l)|0;return 0}function an(e){e=e|0;switch(e|0){case 1:case 0:{e=3;break}case 6:case 4:case 3:case 2:{e=4;break}case 14:case 13:case 12:case 5:{e=1;break}case 11:case 10:case 9:case 8:case 7:{e=2;break}default:e=0}return e|0}function sn(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var s=0;do{if((e|0)!=0&(t|0)!=0&(i|0)!=0){s=xs(t,47)|0;if(!s){r[e>>0]=0;break}s=s+((a|0)!=0&1)-t|0;if((s+1|0)>>>0<=i>>>0){Ss(e,t,s)|0;r[e+s>>0]=0}else e=0}else e=0}while(0);return e|0}function nn(e,t){e=e|0;t=t|0;var i=0,r=0;i=zs(12)|0;do{if(i){r=zs(ie(e<<3,t)|0)|0;s[i>>2]=r;if(!r){js(i);i=0;break}else{s[i+4>>2]=e;s[i+8>>2]=t;break}}else i=0}while(0);return i|0}function on(e){e=e|0;var t=0;t=nn(s[e+4>>2]|0,s[e+8>>2]|0)|0;if(t){if((cn(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function ln(e,t){e=e|0;t=t|0;var i=0;i=nn(s[e+4>>2]|0,s[t+8>>2]|0)|0;if(i){if((fn(i,e,t)|0)<0){dn(i)|0;i=0}}else i=0;return i|0}function un(e){e=e|0;var t=0;t=nn(s[e+8>>2]|0,s[e+4>>2]|0)|0;if(t){if((bn(t,e)|0)<0){dn(t)|0;t=0}}else t=0;return t|0}function cn(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,d=0,f=0;i=s[e+4>>2]|0;if((i|0)==(s[t+4>>2]|0)?(l=s[e+8>>2]|0,(l|0)==(s[t+8>>2]|0)):0)if((i|0)>0){r=(l|0)>0;d=0;do{a=ie(l,d)|0;if(r){n=s[t>>2]|0;o=s[e>>2]|0;u=0;do{f=a+u|0;c[o+(f<<3)>>3]=+c[n+(f<<3)>>3];u=u+1|0}while((u|0)<(l|0))}d=d+1|0}while((d|0)<(i|0));i=0}else i=0;else i=-1;return i|0}function dn(e){e=e|0;if(e){js(s[e>>2]|0);js(e)}return 0}function fn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0.0,a=0,n=0,o=0,l=0,u=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0;h=s[t+8>>2]|0;if(((h|0)==(s[i+4>>2]|0)?(g=s[e+4>>2]|0,(g|0)==(s[t+4>>2]|0)):0)?(p=s[e+8>>2]|0,(p|0)==(s[i+8>>2]|0)):0){v=(p|0)>0?p:0;if((g|0)>0){m=(p|0)>0;b=(h|0)>0;u=s[e>>2]|0;f=0;while(1){e=ie(h,f)|0;if(m){a=0;d=u;while(1){c[d>>3]=0.0;if(b){r=0.0;n=0;o=(s[t>>2]|0)+(e<<3)|0;l=(s[i>>2]|0)+(a<<3)|0;while(1){r=r+ +c[o>>3]*+c[l>>3];c[d>>3]=r;n=n+1|0;if((n|0)>=(h|0))break;else{o=o+8|0;l=l+(p<<3)|0}}}a=a+1|0;if((a|0)>=(p|0))break;else d=d+8|0}}f=f+1|0;if((f|0)>=(g|0)){e=0;break}else u=u+(v<<3)|0}}else e=0}else e=-1;return e|0}function hn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0,o=0.0,l=0,u=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0.0,v=0,w=0,k=0;b=s[e+4>>2]|0;v=s[e+8>>2]|0;a=(b|0)<(v|0)?b:v;e:do{if(((((!((b|0)<2|(v|0)<2)?(s[t+8>>2]|0)==(v|0):0)?(s[t+4>>2]|0)==(a|0):0)?(w=i+4|0,(s[w>>2]|0)==(a|0)):0)?(n=r+4|0,(s[n>>2]|0)==(v|0)):0)?(k=on(e)|0,(k|0)!=0):0){g=+U(+ +(b|0));p=s[k+4>>2]|0;m=s[k+8>>2]|0;if(!((p|0)<1|(m|0)<1)?(s[n>>2]|0)==(m|0):0){if(m){a=s[r>>2]|0;e=0;do{c[a+(e<<3)>>3]=0.0;e=e+1|0}while((e|0)!=(m|0))}h=s[k>>2]|0;if(p){a=(m|0)==0;e=0;l=h;while(1){if(!a){n=0;u=l;d=s[r>>2]|0;while(1){c[d>>3]=+c[u>>3]+ +c[d>>3];n=n+1|0;if((n|0)==(m|0))break;else{u=u+8|0;d=d+8|0}}}e=e+1|0;if((e|0)==(p|0))break;else l=l+(m<<3)|0}}o=+(p|0);if(m){a=s[r>>2]|0;e=0;do{f=a+(e<<3)|0;c[f>>3]=+c[f>>3]/o;e=e+1|0}while((e|0)!=(m|0))}d=(m|0)>0?m:0;if((p|0)>0){a=(m|0)>0;e=0;l=h;while(1){if(a){n=0;u=l;f=s[r>>2]|0;while(1){c[u>>3]=+c[u>>3]-+c[f>>3];n=n+1|0;if((n|0)>=(m|0))break;else{u=u+8|0;f=f+8|0}}}e=e+1|0;if((e|0)>=(p|0))break;else l=l+(d<<3)|0}}a=ie(v,b)|0;if((a|0)>0){e=0;do{r=h+(e<<3)|0;c[r>>3]=+c[r>>3]/g;e=e+1|0}while((e|0)<(a|0))}a=pn(k,t,i)|0;dn(k)|0;l=s[w>>2]|0;if((l|0)>0){e=s[i>>2]|0;n=0;o=0.0;do{o=o+ +c[e+(n<<3)>>3];n=n+1|0}while((n|0)<(l|0))}else o=0.0;if((l|0)<=0)break;e=s[i>>2]|0;n=0;while(1){i=e+(n<<3)|0;c[i>>3]=+c[i>>3]/o;n=n+1|0;if((n|0)>=(l|0))break e}}dn(k)|0;a=-1}else a=-1}while(0);return a|0}function pn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0.0,u=0,f=0,h=0,p=0,m=0,b=0.0,g=0,v=0,w=0,k=0.0,y=0.0,_=0,S=0.0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0,N=0,L=0,z=0,j=0,H=0,Q=0,V=0,Y=0.0,W=0.0,G=0.0,K=0,J=0;V=d;d=d+16|0;_=V;P=e+4|0;O=s[P>>2]|0;F=e+8|0;$=s[F>>2]|0;H=($|0)<(O|0)?$:O;e:do{if(((!((O|0)<2|($|0)<2)?(j=t+8|0,(s[j>>2]|0)==($|0)):0)?(D=t+4|0,(s[D>>2]|0)==(H|0)):0)?(N=i+4|0,(s[N>>2]|0)==(H|0)):0){Q=nn(H,H)|0;L=Q+4|0;if((s[L>>2]|0)==(H|0)?(z=Q+8|0,(s[z>>2]|0)==(H|0)):0){R=(O|0)<($|0);v=s[P>>2]|0;w=s[F>>2]|0;if(R){if((H|0)!=(v|0)){dn(Q)|0;r=-1;break}n=s[Q>>2]|0;if((H|0)>0){f=(H|0)==0;o=(w|0)>0;h=0;g=n;while(1){u=ie(h,w)|0;if(!f){m=0;v=g;while(1){if((m|0)>=(h|0)){r=s[e>>2]|0;c[v>>3]=0.0;if(o){l=0.0;p=r+(u<<3)|0;r=r+((ie(m,w)|0)<<3)|0;a=0;while(1){l=l+ +c[p>>3]*+c[r>>3];c[v>>3]=l;a=a+1|0;if((a|0)>=(w|0))break;else{p=p+8|0;r=r+8|0}}}}else c[v>>3]=+c[n+((ie(m,H)|0)+h<<3)>>3];m=m+1|0;if((m|0)==(H|0))break;else v=v+8|0}}h=h+1|0;if((h|0)>=(H|0))break;else g=g+(H<<3)|0}}}else{if((H|0)!=(w|0)){dn(Q)|0;r=-1;break}n=s[Q>>2]|0;if((H|0)>0){u=(H|0)==0;o=(v|0)>0;f=0;m=n;while(1){if(!u){p=0;g=m;while(1){if((p|0)>=(f|0)){r=s[e>>2]|0;c[g>>3]=0.0;if(o){l=0.0;h=r+(f<<3)|0;r=r+(p<<3)|0;a=0;while(1){l=l+ +c[h>>3]*+c[r>>3];c[g>>3]=l;a=a+1|0;if((a|0)>=(v|0))break;else{h=h+(H<<3)|0;r=r+(H<<3)|0}}}}else c[g>>3]=+c[n+((ie(p,H)|0)+f<<3)>>3];p=p+1|0;if((p|0)==(H|0))break;else g=g+8|0}}f=f+1|0;if((f|0)>=(H|0))break;else m=m+(H<<3)|0}}}do{if(((H|0)>=2?(s[N>>2]|0)==(H|0):0)?(I=An(H)|0,(I|0)!=0):0){M=H+-1|0;s[_+4>>2]=M;s[_>>2]=(s[I>>2]|0)+8;if((In(Q,i,_)|0)<0){Mn(I)|0;break}C=s[I>>2]|0;c[C>>3]=0.0;if((M|0)>0){T=(H|0)==0;A=M;do{a=A;while(1){if((a|0)<=0)break;y=+B(+ +c[C+(a<<3)>>3]);r=a+-1|0;E=s[i>>2]|0;S=+B(+ +c[E+(r<<3)>>3]);if(y>(S+ +B(+ +c[E+(a<<3)>>3]))*1.0e-06)a=r;else break}x=A;A=A+-1|0;t:do{if((a|0)!=(x|0)){p=C+(x<<3)|0;m=C+(a+1<<3)|0;g=(a|0)<(x|0);q=0;do{if((q|0)>99)break t;q=q+1|0;v=s[i>>2]|0;w=v+(A<<3)|0;_=v+(x<<3)|0;l=+c[_>>3];b=(+c[w>>3]-l)*.5;k=+c[p>>3];k=k*k;y=+U(+(k+b*b));if(g){E=a;b=+c[v+(a<<3)>>3]-l+k/(b+(b<0.0?-y:y));k=+c[m>>3];while(1){l=+B(+b);do{if(!(l>=+B(+k))){y=-b/k;S=1.0/+U(+(y*y+1.0));y=y*S}else{if(!(l>1.0e-16)){y=1.0;S=0.0;break}l=-k/b;S=1.0/+U(+(l*l+1.0));y=S;S=l*S}}while(0);o=v+(E<<3)|0;G=+c[o>>3];h=E;E=E+1|0;u=v+(E<<3)|0;W=+c[u>>3];l=G-W;f=C+(E<<3)|0;Y=S*(S*l+y*2.0*+c[f>>3]);c[o>>3]=G-Y;c[u>>3]=W+Y;if((h|0)>(a|0)){u=C+(h<<3)|0;c[u>>3]=y*+c[u>>3]-k*S}G=+c[f>>3];c[f>>3]=G+S*(y*l-S*2.0*G);o=ie(h,H)|0;u=ie(E,H)|0;if(T)l=k;else{r=s[Q>>2]|0;n=0;do{J=r+(n+o<<3)|0;b=+c[J>>3];K=r+(n+u<<3)|0;l=+c[K>>3];c[J>>3]=y*b-S*l;c[K>>3]=S*b+y*l;n=n+1|0}while((n|0)!=(H|0))}if((h|0)<(A|0)){b=+c[f>>3];J=C+(h+2<<3)|0;l=+c[J>>3];c[J>>3]=y*l;l=-(S*l)}if((E|0)>=(x|0))break;else k=l}}W=+B(+ +c[p>>3]);G=+B(+ +c[w>>3])}while(W>(G+ +B(+ +c[_>>3]))*1.0e-06)}}while(0)}while((x|0)>1)}if(M){u=s[i>>2]|0;f=s[Q>>2]|0;h=(H|0)==0;p=0;do{n=u+(p<<3)|0;b=+c[n>>3];o=p;p=p+1|0;if((p|0)<(H|0)){r=o;a=p;l=b;do{G=+c[u+(a<<3)>>3];J=G>l;l=J?G:l;r=J?a:r;a=a+1|0}while((a|0)<(H|0))}else{r=o;l=b}c[u+(r<<3)>>3]=b;c[n>>3]=l;if(!h){n=0;a=f+((ie(r,H)|0)<<3)|0;r=f+((ie(o,H)|0)<<3)|0;while(1){G=+c[a>>3];c[a>>3]=+c[r>>3];c[r>>3]=G;n=n+1|0;if((n|0)==(H|0))break;else{a=a+8|0;r=r+8|0}}}}while((p|0)!=(M|0))}Mn(I)|0;t:do{if(!R){n=s[t>>2]|0;m=(O|0)>($|0)?$:O;i:do{if((H|0)>0){f=s[i>>2]|0;h=(m|0)==0;r=0;p=s[Q>>2]|0;do{if(+c[f+(r<<3)>>3]<1.0e-16)break i;if(!h){a=0;o=p;u=n;while(1){c[u>>3]=+c[o>>3];a=a+1|0;if((a|0)==(m|0))break;else{o=o+8|0;u=u+8|0}}}p=p+(m<<3)|0;n=n+(m<<3)|0;r=r+1|0}while((r|0)<(H|0))}else r=0}while(0);h=(m|0)>0?m:0;if((r|0)<(H|0)){u=s[i>>2]|0;f=(H|0)>0;while(1){c[u+(r<<3)>>3]=0.0;if(f){a=0;o=n;while(1){c[o>>3]=0.0;a=a+1|0;if((a|0)>=(H|0))break;else o=o+8|0}}r=r+1|0;if((r|0)>=(H|0))break;else n=n+(h<<3)|0}}}else{_=s[P>>2]|0;w=s[F>>2]|0;do{if(!((_|0)<1|(w|0)<1)){if((s[L>>2]|0)!=(_|0))break;if((s[z>>2]|0)!=(_|0))break;if((s[D>>2]|0)!=(_|0))break;if((s[j>>2]|0)!=(w|0))break;if((s[N>>2]|0)!=(_|0))break;a=s[t>>2]|0;i:do{if((_|0)>0){m=s[i>>2]|0;v=(w|0)==0;g=(_|0)==0;r=0;do{l=+c[m+(r<<3)>>3];if(l<1.0e-16)break i;b=1.0/+U(+ +B(+l));f=ie(r,_)|0;if(!v){h=0;p=a;while(1){if(g)l=0.0;else{n=0;o=(s[Q>>2]|0)+(f<<3)|0;u=(s[e>>2]|0)+(h<<3)|0;l=0.0;while(1){l=l+ +c[o>>3]*+c[u>>3];n=n+1|0;if((n|0)==(_|0))break;else{o=o+8|0;u=u+(w<<3)|0}}}c[p>>3]=b*l;h=h+1|0;if((h|0)==(w|0))break;else p=p+8|0}}a=a+(w<<3)|0;r=r+1|0}while((r|0)<(_|0))}else r=0}while(0);h=(w|0)>0?w:0;if((r|0)>=(_|0))break t;u=s[i>>2]|0;f=(w|0)>0;n=a;while(1){c[u+(r<<3)>>3]=0.0;if(f){a=0;o=n;while(1){c[o>>3]=0.0;a=a+1|0;if((a|0)>=(w|0))break;else o=o+8|0}}r=r+1|0;if((r|0)>=(_|0))break t;else n=n+(h<<3)|0}}}while(0);dn(Q)|0;r=-1;break e}}while(0);dn(Q)|0;r=0;break e}}while(0);dn(Q)|0;r=-1;break}dn(Q)|0;r=-1}else r=-1}while(0);d=V;return r|0}function mn(e){e=e|0;var t=0,i=0,r=0,a=0.0,n=0,o=0,l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0.0,S=0;y=d;d=d+2e3|0;k=y;t=s[e>>2]|0;w=s[e+4>>2]|0;e:do{if((w|0)<=500){switch(w|0){case 0:{t=0;break e}case 1:{c[t>>3]=1.0/+c[t>>3];break e}default:{}}if((w|0)>0){e=0;do{s[k+(e<<2)>>2]=e;e=e+1|0}while((e|0)<(w|0))}v=t+(w+-1<<3)|0;if((w|0)>0){f=(w|0)==0;m=(w|0)==1;p=(w|0)==0;h=(w|0)==1;b=v;e=0;g=0;while(1){u=t+((ie(g,w)|0)<<3)|0;if((g|0)<(w|0)){r=g;a=0.0;i=u;while(1){_=+B(+ +c[i>>3]);l=a<_;e=l?r:e;a=l?_:a;r=r+1|0;if((r|0)>=(w|0))break;else i=i+(w<<3)|0}}else a=0.0;if(a<=1.0e-10){t=0;break e}n=k+(e<<2)|0;o=s[n>>2]|0;l=k+(g<<2)|0;s[n>>2]=s[l>>2];s[l>>2]=o;if(!f){i=0;r=t+((ie(e,w)|0)<<3)|0;n=u;while(1){_=+c[r>>3];c[r>>3]=+c[n>>3];c[n>>3]=_;i=i+1|0;if((i|0)==(w|0))break;else{r=r+8|0;n=n+8|0}}}a=+c[u>>3];if(!m){i=1;r=u;do{l=r;r=r+8|0;c[l>>3]=+c[r>>3]/a;i=i+1|0}while((i|0)!=(w|0))}c[b>>3]=1.0/a;if(!p){n=0;o=v;while(1){if((n|0)!=(g|0)){i=t+((ie(n,w)|0)<<3)|0;a=+c[i>>3];if(!h){l=1;r=u;while(1){S=i;i=i+8|0;c[S>>3]=+c[i>>3]-a*+c[r>>3];l=l+1|0;if((l|0)==(w|0))break;else r=r+8|0}}c[o>>3]=-(a*+c[b>>3])}n=n+1|0;if((n|0)==(w|0))break;else o=o+(w<<3)|0}}g=g+1|0;if((g|0)>=(w|0))break;else b=b+(w<<3)|0}}if((w|0)>0){n=(w|0)>0;o=0;do{e=k+(o<<2)|0;t:do{if((o|0)<(w|0)){i=o;do{if((s[e>>2]|0)==(o|0))break t;i=i+1|0;e=k+(i<<2)|0}while((i|0)<(w|0))}else i=o}while(0);s[e>>2]=s[k+(o<<2)>>2];if(n){r=0;e=t+(i<<3)|0;i=t+(o<<3)|0;while(1){_=+c[e>>3];c[e>>3]=+c[i>>3];c[i>>3]=_;r=r+1|0;if((r|0)>=(w|0))break;else{e=e+(w<<3)|0;i=i+(w<<3)|0}}}o=o+1|0}while((o|0)<(w|0))}}else t=0}while(0);d=y;return((t|0)==0)<<31>>31|0}function bn(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,d=0;o=s[e+4>>2]|0;if((o|0)==(s[t+8>>2]|0)?(u=s[e+8>>2]|0,(u|0)==(s[t+4>>2]|0)):0){d=(u|0)>0?u:0;if((o|0)>0){l=(u|0)>0;r=s[e>>2]|0;n=0;while(1){if(l){e=0;i=(s[t>>2]|0)+(n<<3)|0;a=r;while(1){c[a>>3]=+c[i>>3];e=e+1|0;if((e|0)>=(u|0))break;else{i=i+(o<<3)|0;a=a+8|0}}}n=n+1|0;if((n|0)>=(o|0)){e=0;break}else r=r+(d<<3)|0}}else e=0}else e=-1;return e|0}function gn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0.0,n=0.0,o=0;a=+(t|0)/+(s[e>>2]|0);n=+(i|0)/+(s[e+4>>2]|0);s[r>>2]=t;s[r+4>>2]=i;t=0;do{c[r+8+(t<<3)>>3]=a*+c[e+8+(t<<3)>>3];c[r+40+(t<<3)>>3]=n*+c[e+40+(t<<3)>>3];c[r+72+(t<<3)>>3]=+c[e+72+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=s[e+176>>2]|0;switch(t|0){case 4:{c[r+104>>3]=+c[e+104>>3];c[r+112>>3]=+c[e+112>>3];c[r+120>>3]=+c[e+120>>3];c[r+128>>3]=+c[e+128>>3];c[r+136>>3]=a*+c[e+136>>3];c[r+144>>3]=n*+c[e+144>>3];c[r+152>>3]=a*+c[e+152>>3];c[r+160>>3]=n*+c[e+160>>3];c[r+168>>3]=+c[e+168>>3];o=8;break}case 3:{c[r+104>>3]=a*+c[e+104>>3];c[r+112>>3]=n*+c[e+112>>3];c[r+120>>3]=+c[e+120>>3];c[r+128>>3]=+c[e+128>>3];c[r+136>>3]=+c[e+136>>3]/(a*n);c[r+144>>3]=+c[e+144>>3]/(n*(a*a*n));o=8;break}case 2:{c[r+104>>3]=a*+c[e+104>>3];c[r+112>>3]=n*+c[e+112>>3];c[r+120>>3]=+c[e+120>>3];c[r+128>>3]=+c[e+128>>3]/(a*n);c[r+136>>3]=+c[e+136>>3]/(n*(a*a*n));o=8;break}case 1:{c[r+104>>3]=a*+c[e+104>>3];c[r+112>>3]=n*+c[e+112>>3];c[r+120>>3]=+c[e+120>>3];c[r+128>>3]=+c[e+128>>3]/(a*n);o=8;break}default:t=-1}if((o|0)==8){s[r+176>>2]=t;t=0}return t|0}function vn(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,s=0,n=0.0,o=0,l=0.0,u=0,f=0,h=0,p=0.0,m=0.0,b=0,g=0,v=0.0,w=0,k=0,y=0,_=0,S=0.0;s=d;d=d+96|0;a=s;if(!(+c[e+88>>3]>=0.0)){r=0;do{c[a+(r<<5)>>3]=-+c[e+(r<<5)>>3];c[a+(r<<5)+8>>3]=-+c[e+(r<<5)+8>>3];c[a+(r<<5)+16>>3]=-+c[e+(r<<5)+16>>3];c[a+(r<<5)+24>>3]=-+c[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3)}else{r=0;do{c[a+(r<<5)>>3]=+c[e+(r<<5)>>3];c[a+(r<<5)+8>>3]=+c[e+(r<<5)+8>>3];c[a+(r<<5)+16>>3]=+c[e+(r<<5)+16>>3];c[a+(r<<5)+24>>3]=+c[e+(r<<5)+24>>3];r=r+1|0}while((r|0)!=3)}c[t>>3]=0.0;c[t+8>>3]=0.0;c[t+16>>3]=0.0;c[t+24>>3]=0.0;c[t+32>>3]=0.0;c[t+40>>3]=0.0;c[t+48>>3]=0.0;c[t+56>>3]=0.0;c[t+64>>3]=0.0;c[t+72>>3]=0.0;c[t+80>>3]=0.0;c[t+88>>3]=0.0;n=+c[a+64>>3];p=+c[a+72>>3];m=+c[a+80>>3];S=+U(+(n*n+p*p+m*m));e=t+80|0;c[e>>3]=S;S=n/S;y=i+64|0;c[y>>3]=S;p=p/+c[e>>3];w=i+72|0;c[w>>3]=p;m=m/+c[e>>3];b=i+80|0;c[b>>3]=m;h=i+88|0;c[h>>3]=+c[a+88>>3]/+c[e>>3];n=+c[a+32>>3];l=+c[a+40>>3];v=+c[a+48>>3];m=S*n+p*l+m*v;f=t+48|0;c[f>>3]=m;n=n-m*+c[y>>3];l=l-m*+c[w>>3];m=v-m*+c[b>>3];v=+U(+(n*n+l*l+m*m));u=t+40|0;c[u>>3]=v;_=i+32|0;c[_>>3]=n/v;k=i+40|0;c[k>>3]=l/+c[u>>3];g=i+48|0;c[g>>3]=m/+c[u>>3];m=+c[a>>3];l=+c[a+8>>3];v=+c[a+16>>3];n=+c[y>>3]*m+ +c[w>>3]*l+ +c[b>>3]*v;r=t+16|0;c[r>>3]=n;p=+c[_>>3]*m+ +c[k>>3]*l+ +c[g>>3]*v;o=t+8|0;c[o>>3]=p;m=m-p*+c[_>>3]-n*+c[y>>3];l=l-p*+c[k>>3]-n*+c[w>>3];n=v-p*+c[g>>3]-n*+c[b>>3];p=+U(+(m*m+l*l+n*n));c[t>>3]=p;c[i>>3]=m/p;c[i+8>>3]=l/+c[t>>3];c[i+16>>3]=n/+c[t>>3];n=+c[h>>3];l=(+c[a+56>>3]-+c[f>>3]*n)/+c[u>>3];c[i+56>>3]=l;c[i+24>>3]=(+c[a+24>>3]-l*+c[o>>3]-+c[r>>3]*n)/+c[t>>3];r=0;do{_=t+(r<<5)|0;c[_>>3]=+c[_>>3]/+c[e>>3];_=t+(r<<5)+8|0;c[_>>3]=+c[_>>3]/+c[e>>3];_=t+(r<<5)+16|0;c[_>>3]=+c[_>>3]/+c[e>>3];r=r+1|0}while((r|0)!=3);d=s;return 0}function wn(e,t,i,r,a,s){e=e|0;t=+t;i=+i;r=r|0;a=a|0;s=s|0;var n=0.0,o=0.0,l=0.0,u=0.0,d=0.0,f=0.0,h=0.0,p=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0,y=0.0,_=0.0,S=0.0,x=0.0,q=0.0,E=0.0,C=0.0,T=0.0;switch(s|0){case 4:{b=+c[e>>3];g=+c[e+8>>3];v=+c[e+16>>3];w=+c[e+24>>3];x=+c[e+32>>3];y=+c[e+40>>3];_=+c[e+48>>3];S=+c[e+56>>3];k=+c[e+64>>3];m=(t-_)/x;l=(i-S)/y;i=m*m;o=l*l;u=v*2.0;d=w*6.0;f=w*2.0;h=v*6.0;e:do{if(o!=0.0|i!=0.0){s=1;n=m;t=l;while(1){T=o+i;C=b*T+1.0+T*(g*T);q=i*3.0;E=o*q;n=n-(w*(T+i*2.0)+(t*(u*n)+n*C)-m)/(d*n+(u*t+(b*(o+q)+1.0+g*(o*o+(i*(i*5.0)+E)))));q=f*n;t=t-(v*(o*2.0+T)+t*C+t*q-l)/(h*t+(b*(i+o*3.0)+1.0+g*(o*(o*5.0)+(i*i+E)))+q);if((s|0)==4)break e;i=n*n;o=t*t;if(!(o!=0.0|i!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);c[r>>3]=_+x*n/k;c[a>>3]=S+y*t/k;s=0;break}case 3:{m=+c[e>>3];n=(t-m)/+c[e+24>>3];p=e+8|0;t=i-+c[p>>3];l=+c[e+32>>3]/1.0e8;u=+c[e+40>>3]/1.0e8/1.0e5;i=n*n+t*t;d=+U(+i);f=l*3.0;h=u*5.0;e:do{if(d!=0.0){s=1;o=d;while(1){T=o-(o*(1.0-l*i-i*(u*i))-d)/(1.0-f*i-i*(h*i));n=n*T/o;t=t*T/o;if((s|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;c[r>>3]=n/+c[s>>3]+m;c[a>>3]=t/+c[s>>3]+ +c[p>>3];s=0;break}case 2:{m=+c[e>>3];n=t-m;p=e+8|0;t=i-+c[p>>3];l=+c[e+24>>3]/1.0e8;u=+c[e+32>>3]/1.0e8/1.0e5;i=n*n+t*t;d=+U(+i);f=l*3.0;h=u*5.0;e:do{if(d!=0.0){s=1;o=d;while(1){T=o-(o*(1.0-l*i-i*(u*i))-d)/(1.0-f*i-i*(h*i));n=n*T/o;t=t*T/o;if((s|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;c[r>>3]=n/+c[s>>3]+m;c[a>>3]=t/+c[s>>3]+ +c[p>>3];s=0;break}case 1:{f=+c[e>>3];n=t-f;p=e+8|0;t=i-+c[p>>3];l=+c[e+24>>3]/1.0e8;i=n*n+t*t;u=+U(+i);d=l*3.0;e:do{if(u!=0.0){s=1;o=u;while(1){T=o-(o*(1.0-l*i)-u)/(1.0-d*i);n=n*T/o;t=t*T/o;if((s|0)==3)break e;i=n*n+t*t;o=+U(+i);if(!(o!=0.0)){n=0.0;t=0.0;break}else s=s+1|0}}else{n=0.0;t=0.0}}while(0);s=e+16|0;c[r>>3]=n/+c[s>>3]+f;c[a>>3]=t/+c[s>>3]+ +c[p>>3];s=0;break}default:s=-1}return s|0}function kn(e,t,i,r,a,s){e=e|0;t=+t;i=+i;r=r|0;a=a|0;s=s|0;var n=0.0,o=0.0,l=0.0,u=0.0,d=0.0,f=0.0,h=0.0,p=0.0;switch(s|0){case 4:{l=+c[e+16>>3];u=+c[e+24>>3];h=+c[e+32>>3];d=+c[e+40>>3];p=+c[e+48>>3];f=+c[e+56>>3];o=+c[e+64>>3];t=(t-p)*o/h;o=(i-f)*o/d;n=t*t+o*o;i=+c[e>>3]*n+1.0+n*(+c[e+8>>3]*n);c[r>>3]=p+h*(u*(t*(t*2.0)+n)+(l*2.0*t*o+t*i));c[a>>3]=f+d*(u*2.0*t*o+(l*(n+o*(o*2.0))+o*i));s=0;break}case 3:{o=+c[e>>3];p=+c[e+16>>3];n=(t-o)*p;s=e+8|0;t=p*(i-+c[s>>3]);if(n==0.0&t==0.0){c[r>>3]=o;t=+c[s>>3]}else{p=n*n+t*t;p=1.0-p*(+c[e+32>>3]/1.0e8)-p*(p*(+c[e+40>>3]/1.0e8/1.0e5));c[r>>3]=o+ +c[e+24>>3]*(n*p);t=+c[s>>3]+t*p}c[a>>3]=t;s=0;break}case 2:{o=+c[e>>3];p=+c[e+16>>3];n=(t-o)*p;s=e+8|0;t=p*(i-+c[s>>3]);if(n==0.0&t==0.0){c[r>>3]=o;t=+c[s>>3]}else{p=n*n+t*t;p=1.0-p*(+c[e+24>>3]/1.0e8)-p*(p*(+c[e+32>>3]/1.0e8/1.0e5));c[r>>3]=o+n*p;t=+c[s>>3]+t*p}c[a>>3]=t;s=0;break}case 1:{o=+c[e>>3];p=+c[e+16>>3];n=(t-o)*p;s=e+8|0;t=p*(i-+c[s>>3]);if(n==0.0&t==0.0){c[r>>3]=o;t=+c[s>>3]}else{p=1.0-(n*n+t*t)*(+c[e+24>>3]/1.0e8);c[r>>3]=o+n*p;t=+c[s>>3]+t*p}c[a>>3]=t;s=0;break}default:s=-1}return s|0}function yn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0,o=0,l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0.0;v=d;d=d+256|0;h=v+232|0;f=v+224|0;u=v+216|0;l=v+208|0;o=v+200|0;n=v+192|0;a=v+184|0;m=v+240|0;b=v;do{if((e|0)!=0&(t|0)>0&(i|0)!=0){g=Va(e,4854)|0;if(!g){g=ca()|0;s[a>>2]=s[g>>2];s[a+4>>2]=e;en(3,4857,a);e=da(s[g>>2]|0)|0;s[n>>2]=5367;s[n+4>>2]=e;en(3,5361,n);e=-1;break}Ja(g,0,2)|0;e:do{if(!(Ba(g)|0)){n=es(g)|0;rs(g);e=0;do{if((e|0)>=4){p=9;break}a=s[2012+(e<<3)+4>>2]|0;e=e+1|0}while(((n|0)%(a|0)|0|0)!=0);do{if((p|0)==9)if((e|0)==4){en(3,4971,u);e=-1;break e}else{a=s[2012+(0<<3)+4>>2]|0;e=0;break}}while(0);if((Wa(b,a,1,g)|0)!=1){e=ca()|0;s[f>>2]=s[e>>2];en(3,5051,f);e=da(s[e>>2]|0)|0;s[h>>2]=5367;s[h+4>>2]=e;en(3,5361,h);e=-1;break}u=b+176|0;s[u>>2]=e;_n(b);f=(e|0)==1;h=b+120|0;if(f){w=+c[h>>3];l=b+128|0;c[h>>3]=+c[l>>3];c[l>>3]=w}else l=b+128|0;Ku(i|0,b|0,184)|0;s[m>>2]=r;a=i+176|0;if((t|0)>1){o=1;while(1){r=(s[m>>2]|0)+(4-1)&~(4-1);n=s[r>>2]|0;s[m>>2]=r+4;s[n+176>>2]=s[a>>2];if((Wa(b,s[2012+((s[a>>2]|0)+-1<<3)+4>>2]|0,1,g)|0)!=1){e=-1;break e}s[u>>2]=e;_n(b);if(f){w=+c[h>>3];c[h>>3]=+c[l>>3];c[l>>3]=w}Ku(n|0,b|0,184)|0;o=o+1|0;if((o|0)>=(t|0)){e=0;break}}}else e=0}else{e=ca()|0;s[o>>2]=s[e>>2];en(3,4926,o);e=da(s[e>>2]|0)|0;s[l>>2]=5367;s[l+4>>2]=e;en(3,5361,l);e=-1}}while(0);Ha(g)|0}else e=-1}while(0);d=v;return e|0}function _n(e){e=e|0;var t=0,i=0,r=0,a=0,n=0;n=d;d=d+192|0;a=n;xn(e,a);xn(e+4|0,a+4|0);t=0;do{Sn(e+8+(t<<5)|0,a+8+(t<<5)|0);Sn(e+8+(t<<5)+8|0,a+8+(t<<5)+8|0);Sn(e+8+(t<<5)+16|0,a+8+(t<<5)+16|0);Sn(e+8+(t<<5)+24|0,a+8+(t<<5)+24|0);t=t+1|0}while((t|0)!=3);i=e+176|0;r=0;do{Sn(e+104+(r<<3)|0,a+104+(r<<3)|0);r=r+1|0;t=s[i>>2]|0}while((r|0)<(s[2012+(t+-1<<3)>>2]|0));s[a+176>>2]=t;Ku(e|0,a|0,184)|0;d=n;return}function Sn(e,t){e=e|0;t=t|0;r[t>>0]=r[e+7>>0]|0;r[t+1>>0]=r[e+6>>0]|0;r[t+2>>0]=r[e+5>>0]|0;r[t+3>>0]=r[e+4>>0]|0;r[t+4>>0]=r[e+3>>0]|0;r[t+5>>0]=r[e+2>>0]|0;r[t+6>>0]=r[e+1>>0]|0;r[t+7>>0]=r[e>>0]|0;return}function xn(e,t){e=e|0;t=t|0;r[t>>0]=r[e+3>>0]|0;r[t+1>>0]=r[e+2>>0]|0;r[t+2>>0]=r[e+1>>0]|0;r[t+3>>0]=r[e>>0]|0;return}function qn(e,t){e=e|0;t=t|0;var i=0,r=0,a=0.0,n=0,o=0,l=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0.0;S=d;d=d+64|0;w=S+24|0;k=S+16|0;y=S+8|0;_=S;b=zs(208)|0;if(!b){en(3,5472,S+32|0);kt(1)}Ku(b|0,e|0,184)|0;v=t<<1;g=(s[e>>2]|0)+v|0;s[b+192>>2]=g;v=(s[e+4>>2]|0)+v|0;s[b+196>>2]=v;s[b+200>>2]=t;s[b+204>>2]=t;i=ie(g<<3,v)|0;r=zs(i)|0;s[b+184>>2]=r;if(!r){en(3,5472,S+40|0);kt(1)}i=zs(i)|0;s[b+188>>2]=i;if(!i){en(3,5472,S+48|0);kt(1)}m=e+104|0;f=s[e+176>>2]|0;h=(g|0)>0?g<<1:0;if((v|0)>0){p=(g|0)>0;l=0;while(1){a=+(l-t|0);if(p){e=0;n=r;o=i;while(1){x=+(e-t|0);kn(m,x,a,y,_,f)|0;u[n>>2]=+c[y>>3];u[n+4>>2]=+c[_>>3];wn(m,x,a,w,k,f)|0;u[o>>2]=+c[w>>3];u[o+4>>2]=+c[k>>3];e=e+1|0;if((e|0)>=(g|0))break;else{n=n+8|0;o=o+8|0}}}i=i+(h<<2)|0;l=l+1|0;if((l|0)>=(v|0))break;else r=r+(h<<2)|0}}d=S;return b|0}function En(e){e=e|0;var t=0;if((e|0)!=0?(t=s[e>>2]|0,(t|0)!=0):0){js(s[t+184>>2]|0);js(s[(s[e>>2]|0)+188>>2]|0);js(s[e>>2]|0);s[e>>2]=0;t=0}else t=-1;return t|0}function Cn(e,t,i,r,a){e=e|0;t=+t;i=+i;r=r|0;a=a|0;var n=0,o=0,l=0;o=(s[e+16>>2]|0)+~~(t+.5)|0;n=(s[e+20>>2]|0)+~~(i+.5)|0;if(((o|0)>=0?(l=s[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(s[e+12>>2]|0):0){e=s[e>>2]|0;n=(ie(l,n)|0)+o<<1;s[r>>2]=s[e+(n<<2)>>2];s[a>>2]=s[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function Tn(e,t,i,r,a){e=e|0;t=+t;i=+i;r=r|0;a=a|0;var n=0,o=0,l=0;o=(s[e+16>>2]|0)+~~(t+.5)|0;n=(s[e+20>>2]|0)+~~(i+.5)|0;if(((o|0)>=0?(l=s[e+8>>2]|0,!((n|0)<0|(o|0)>=(l|0))):0)?(n|0)<(s[e+12>>2]|0):0){e=s[e+4>>2]|0;n=(ie(l,n)|0)+o<<1;s[r>>2]=s[e+(n<<2)>>2];s[a>>2]=s[e+((n|1)<<2)>>2];n=0}else n=-1;return n|0}function An(e){e=e|0;var t=0,i=0;t=zs(8)|0;do{if(t){i=zs(e<<3)|0;s[t>>2]=i;if(!i){js(t);t=0;break}else{s[t+4>>2]=e;break}}else t=0}while(0);return t|0}function Mn(e){e=e|0;js(s[e>>2]|0);js(e);return 0}function Pn(e){e=e|0;var t=0.0,i=0,r=0.0,a=0,n=0;t=+U(+ +Rn(e,e));if(t!=0.0){a=s[e>>2]|0;r=+c[a>>3];t=r<0.0?-t:t;r=r+t;c[a>>3]=r;r=1.0/+U(+(r*t));e=s[e+4>>2]|0;if((e|0)>0){i=0;do{n=a+(i<<3)|0;c[n>>3]=r*+c[n>>3];i=i+1|0}while((i|0)<(e|0))}}return+-t}function Rn(e,t){e=e|0;t=t|0;var i=0.0,r=0,a=0;a=s[e+4>>2]|0;if((a|0)!=(s[t+4>>2]|0))kt(0);if((a|0)>0){r=s[e>>2]|0;e=s[t>>2]|0;t=0;i=0.0;do{i=i+ +c[r+(t<<3)>>3]*+c[e+(t<<3)>>3];t=t+1|0}while((t|0)<(a|0))}else i=0.0;return+i}function In(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0.0,l=0,u=0,f=0,h=0,p=0,m=0,b=0.0,g=0.0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M+8|0;A=M;_=s[e+8>>2]|0;if(((_|0)==(s[e+4>>2]|0)?(_|0)==(s[t+4>>2]|0):0)?(_|0)==((s[i+4>>2]|0)+1|0):0){q=_+-2|0;E=T+4|0;C=A+4|0;if((_|0)>2){v=_+-1|0;w=0;do{p=ie(w,_)|0;m=s[e>>2]|0;c[(s[t>>2]|0)+(w<<3)>>3]=+c[m+(p+w<<3)>>3];l=_-w+-1|0;s[E>>2]=l;k=w;w=w+1|0;u=m+(p+w<<3)|0;s[T>>2]=u;g=+Pn(T);c[(s[i>>2]|0)+(k<<3)>>3]=g;if(!(g==0.0)){if((w|0)<(_|0)){f=s[t>>2]|0;h=w;do{if((w|0)<(h|0)){r=s[e>>2]|0;a=w;o=0.0;do{g=+c[r+((ie(a,_)|0)+h<<3)>>3];o=o+g*+c[m+(a+p<<3)>>3];a=a+1|0}while((a|0)<(h|0))}else o=0.0;r=ie(h,_)|0;if((h|0)<(_|0)){a=s[e>>2]|0;n=h;do{o=o+ +c[a+(n+r<<3)>>3]*+c[m+(n+p<<3)>>3];n=n+1|0}while((n|0)<(_|0))}c[f+(h<<3)>>3]=o;h=h+1|0}while((h|0)<(_|0))}s[C>>2]=l;s[E>>2]=l;s[T>>2]=u;s[A>>2]=(s[t>>2]|0)+(w<<3);o=+Rn(T,A)*.5;if((v|0)>(k|0)){r=s[t>>2]|0;l=v;do{b=+c[m+(l+p<<3)>>3];a=r+(l<<3)|0;g=+c[a>>3]-o*b;c[a>>3]=g;a=ie(l,_)|0;if((l|0)<(_|0)){n=s[e>>2]|0;u=l;do{h=n+(u+a<<3)|0;c[h>>3]=+c[h>>3]-(b*+c[r+(u<<3)>>3]+g*+c[m+(u+p<<3)>>3]);u=u+1|0}while((u|0)<(_|0))}l=l+-1|0}while((l|0)>(k|0))}}}while((w|0)<(q|0))}if((_|0)<=1){if((_|0)>0){a=0;n=s[e>>2]|0;r=s[t>>2]|0;y=27}}else{y=ie(q,_)|0;n=s[e>>2]|0;r=s[t>>2]|0;c[r+(q<<3)>>3]=+c[n+(y+q<<3)>>3];a=_+-1|0;c[(s[i>>2]|0)+(q<<3)>>3]=+c[n+(a+y<<3)>>3];y=27}if((y|0)==27)c[r+(a<<3)>>3]=+c[n+((ie(a,_)|0)+a<<3)>>3];if((_|0)>0){f=(_|0)>0;m=_;do{i=m;m=m+-1|0;h=ie(m,_)|0;p=s[e>>2]|0;if((i|0)<=(q|0)?(S=_-m+-1|0,x=p+(h+i<<3)|0,(i|0)<(_|0)):0){r=(i|0)<(_|0);l=i;do{s[C>>2]=S;s[E>>2]=S;s[T>>2]=x;a=ie(l,_)|0;s[A>>2]=(s[e>>2]|0)+(a+i<<3);o=+Rn(T,A);if(r){n=s[e>>2]|0;u=i;do{y=n+(u+a<<3)|0;c[y>>3]=+c[y>>3]-o*+c[p+(u+h<<3)>>3];u=u+1|0}while((u|0)<(_|0))}l=l+1|0}while((l|0)<(_|0))}if(f){r=0;do{c[p+(r+h<<3)>>3]=0.0;r=r+1|0}while((r|0)<(_|0))}c[p+(h+m<<3)>>3]=1.0}while((i|0)>1);r=0}else r=0}else r=-1;d=M;return r|0}function On(e,t,i){e=e|0;t=t|0;i=i|0;var r=0.0,a=0.0,s=0.0,n=0.0,o=0.0;s=+c[i>>3];n=+c[i+8>>3];a=+c[i+16>>3];r=+c[t+88>>3]+(s*+c[t+64>>3]+n*+c[t+72>>3]+a*+c[t+80>>3]);if(r==0.0)i=-1;else{o=+c[t+56>>3]+(s*+c[t+32>>3]+n*+c[t+40>>3]+a*+c[t+48>>3]);c[e>>3]=(+c[t+24>>3]+(s*+c[t>>3]+n*+c[t+8>>3]+a*+c[t+16>>3]))/r;c[e+8>>3]=o/r;i=0}return i|0}function Fn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0.0,n=0.0,o=0.0,l=0.0,u=0.0,f=0.0,h=0.0,p=0.0,m=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0.0,_=0,S=0,x=0,q=0,E=0,C=0,T=0.0,A=0.0,M=0.0,P=0.0,R=0.0,I=0.0,O=0.0,F=0.0,$=0.0;C=d;d=d+1072|0;x=C+1056|0;S=C+768|0;_=C+192|0;E=C+48|0;q=C;$=+c[i>>3];P=+c[r>>3];v=$*P;F=+c[i+8>>3];w=r+8|0;M=+c[w>>3];y=F*M;o=+c[i+16>>3];R=+c[r+16>>3];u=o*R;f=+c[i+24>>3];O=+c[i+32>>3];I=+c[i+40>>3];h=M*I;l=+c[i+48>>3];p=R*l;m=+c[i+56>>3];A=+c[i+64>>3];T=+c[i+72>>3];b=M*T;a=+c[i+80>>3];g=R*a;n=+c[i+88>>3];c[S>>3]=v;c[S+8>>3]=$*M;c[S+16>>3]=$*R;c[S+24>>3]=P*F;c[S+32>>3]=y;c[S+40>>3]=R*F;c[S+48>>3]=P*o;c[S+56>>3]=M*o;c[S+64>>3]=u;c[S+72>>3]=$;c[S+80>>3]=F;c[S+88>>3]=o;o=P*O;c[S+96>>3]=o;c[S+104>>3]=M*O;c[S+112>>3]=R*O;c[S+120>>3]=P*I;c[S+128>>3]=h;c[S+136>>3]=R*I;c[S+144>>3]=P*l;c[S+152>>3]=M*l;c[S+160>>3]=p;c[S+168>>3]=O;c[S+176>>3]=I;c[S+184>>3]=l;l=A*P;c[S+192>>3]=l;c[S+200>>3]=M*A;c[S+208>>3]=R*A;c[S+216>>3]=P*T;M=+c[w>>3];c[S+224>>3]=T*M;c[S+232>>3]=R*T;c[S+240>>3]=P*a;c[S+248>>3]=M*a;c[S+256>>3]=g;c[S+264>>3]=A;c[S+272>>3]=T;c[S+280>>3]=a;r=_+64|0;i=_;w=i+64|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=-1.0;r=_+72|0;s[r>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;c[_+104>>3]=1.0;r=_+160|0;i=_+112|0;w=i+48|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=1.0;r=_+240|0;i=_+168|0;w=i+72|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=-1.0;r=_+296|0;i=_+248|0;w=i+48|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=-1.0;r=_+304|0;s[r>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;c[_+336>>3]=1.0;r=_+456|0;i=_+344|0;w=i+112|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=1.0;r=_+512|0;i=_+464|0;w=i+48|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=1.0;r=_+568|0;i=_+520|0;w=i+48|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(w|0));c[r>>3]=1.0;k=0;do{w=0;do{i=E+(k*48|0)+(w<<3)|0;c[i>>3]=0.0;a=0.0;r=0;do{a=a+ +c[S+(k*96|0)+(r<<3)>>3]*+c[_+(r*48|0)+(w<<3)>>3];r=r+1|0}while((r|0)!=12);c[i>>3]=a;w=w+1|0}while((w|0)!=6);k=k+1|0}while((k|0)!=3);F=f+(v+y+u);$=m+(o+h+p);a=n+(l+b+g);n=+c[t>>3];o=+c[t+8>>3];l=+c[t+16>>3];u=+c[t+24>>3]+(F*n+$*o+a*l);f=+c[t+32>>3];h=+c[t+40>>3];p=+c[t+48>>3];m=+c[t+56>>3]+(F*f+$*h+a*p);b=+c[t+64>>3];g=+c[t+72>>3];v=+c[t+80>>3];a=+c[t+88>>3]+(F*b+$*g+a*v);if(a==0.0){en(3,5089,x);r=-1}else{$=a*a;c[q>>3]=(n*a-u*b)/$;c[q+8>>3]=(a*o-u*g)/$;c[q+16>>3]=(a*l-u*v)/$;c[q+24>>3]=(a*f-m*b)/$;c[q+32>>3]=(a*h-m*g)/$;c[q+40>>3]=(a*p-m*v)/$;i=0;do{a=+c[q+(i*24|0)>>3];n=+c[q+(i*24|0)+8>>3];o=+c[q+(i*24|0)+16>>3];r=0;do{x=e+(i*48|0)+(r<<3)|0;c[x>>3]=0.0;$=a*+c[E+(r<<3)>>3]+0.0;c[x>>3]=$;$=$+n*+c[E+48+(r<<3)>>3];c[x>>3]=$;c[x>>3]=$+o*+c[E+96+(r<<3)>>3];r=r+1|0}while((r|0)!=6);i=i+1|0}while((i|0)!=2);r=0}d=C;return r|0}function $n(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0,o=0,l=0;l=d;d=d+48|0;o=l+24|0;n=l+12|0;a=l;s[o+4>>2]=6;s[o+8>>2]=1;s[o>>2]=e;s[n+4>>2]=r;s[n+8>>2]=1;s[n>>2]=t;s[a+4>>2]=r;s[a+8>>2]=6;s[a>>2]=i;t=un(a)|0;do{if(t){e=ln(t,a)|0;if(!e){dn(t)|0;i=-1;break}i=ln(t,n)|0;if(!i){dn(t)|0;dn(e)|0;i=-1;break}if((mn(e)|0)<0){dn(t)|0;dn(e)|0;dn(i)|0;i=-1;break}else{fn(o,e,i)|0;dn(t)|0;dn(e)|0;dn(i)|0;i=0;break}}else i=-1}while(0);d=l;return i|0}function Dn(e,t){e=e|0;t=t|0;var i=0.0,r=0.0,a=0.0,s=0,n=0.0,o=0.0,l=0.0,u=0,f=0,h=0,p=0.0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0.0;h=d;d=d+192|0;u=h+96|0;f=h;n=+c[t>>3];l=+c[t+8>>3];r=+c[t+16>>3];i=n*n+l*l+r*r;if(i==0.0){o=0.0;a=0.0;r=1.0;i=0.0}else{i=+U(+i);o=i;a=r/i;r=n/i;i=l/i}k=+c[t+24>>3];g=+c[t+32>>3];l=+c[t+40>>3];p=+V(+o);n=1.0-p;o=+Y(+o);c[u>>3]=p+r*r*n;w=i*r*n;v=a*o;c[u+8>>3]=w-v;b=r*a*n;m=i*o;c[u+16>>3]=b+m;c[u+24>>3]=k;c[u+32>>3]=w+v;c[u+40>>3]=p+i*i*n;i=i*a*n;o=r*o;c[u+48>>3]=i-o;c[u+56>>3]=g;c[u+64>>3]=b-m;c[u+72>>3]=i+o;c[u+80>>3]=p+a*a*n;c[u+88>>3]=l;s=0;do{i=+c[e+(s<<5)>>3];r=+c[e+(s<<5)+8>>3];a=+c[e+(s<<5)+16>>3];t=0;do{c[f+(s<<5)+(t<<3)>>3]=i*+c[u+(t<<3)>>3]+r*+c[u+32+(t<<3)>>3]+a*+c[u+64+(t<<3)>>3];t=t+1|0}while((t|0)!=4);t=f+(s<<5)+24|0;c[t>>3]=+c[e+(s<<5)+24>>3]+ +c[t>>3];s=s+1|0}while((s|0)!=3);t=0;do{c[e+(t<<5)>>3]=+c[f+(t<<5)>>3];c[e+(t<<5)+8>>3]=+c[f+(t<<5)+8>>3];c[e+(t<<5)+16>>3]=+c[f+(t<<5)+16>>3];c[e+(t<<5)+24>>3]=+c[f+(t<<5)+24>>3];t=t+1|0}while((t|0)!=3);d=h;return 0}function Nn(e){e=e|0;var t=0,i=0;t=zs(136)|0;if(!t)t=0;else{i=0;do{c[t+(i<<5)>>3]=+c[e+(i<<5)>>3];c[t+(i<<5)+8>>3]=+c[e+(i<<5)+8>>3];c[t+(i<<5)+16>>3]=+c[e+(i<<5)+16>>3];c[t+(i<<5)+24>>3]=+c[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3);s[t+96>>2]=10;c[t+104>>3]=.10000000149011612;c[t+112>>3]=.9900000095367432;c[t+120>>3]=4.0;c[t+128>>3]=.5}return t|0}function Ln(e){e=e|0;var t=0;t=s[e>>2]|0;if(!t)t=-1;else{js(t);s[e>>2]=0;t=0}return t|0}function zn(e,t){e=e|0;t=+t;if(!e)e=-1;else{c[e+128>>3]=t;e=0}return e|0}function jn(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0.0,l=0,u=0,f=0.0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0.0,E=0.0;x=d;d=d+176|0;u=x+168|0;l=x+160|0;k=x+48|0;_=x+64|0;y=x;v=t+8|0;n=s[v>>2]|0;do{if((n|0)>=3){S=zs(n*96|0)|0;if(!S){en(3,5109,l);n=-1;break}w=zs(n<<4)|0;if(!w){en(3,5109,u);js(S);n=-1;break}else n=0;do{c[r+(n<<5)>>3]=+c[i+(n<<5)>>3];c[r+(n<<5)+8>>3]=+c[i+(n<<5)+8>>3];c[r+(n<<5)+16>>3]=+c[i+(n<<5)+16>>3];c[r+(n<<5)+24>>3]=+c[i+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);b=t+4|0;u=k+8|0;i=e+104|0;h=e+120|0;p=e+112|0;m=e+96|0;f=0.0;g=0;e:while(1){tn(e,r,_)|0;n=s[v>>2]|0;if((n|0)>0){o=0.0;l=0;do{if((On(k,_,(s[b>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}n=s[t>>2]|0;E=+c[n+(l<<4)>>3]-+c[k>>3];q=+c[n+(l<<4)+8>>3]-+c[u>>3];o=o+(E*E+q*q);n=l<<1;c[w+(n<<3)>>3]=E;c[w+((n|1)<<3)>>3]=q;l=l+1|0;n=s[v>>2]|0}while((l|0)<(n|0))}else o=0.0;o=o/+(n|0);if(o<+c[i>>3]){l=24;break}if(((g|0)>0?o<+c[h>>3]:0)?o/f>+c[p>>3]:0){l=24;break}if((g|0)==(s[m>>2]|0)){l=24;break}if((n|0)>0){l=0;do{if((Fn(S+(l*12<<3)|0,e,r,(s[b>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0;n=s[v>>2]|0}while((l|0)<(n|0))}if(($n(y,w,S,n<<1)|0)<0){l=22;break}Dn(r,y)|0;f=o;g=g+1|0}if((l|0)==10){Hn(S,w);n=-1;break}else if((l|0)==20){Hn(S,w);n=-1;break}else if((l|0)==22){Hn(S,w);n=-1;break}else if((l|0)==24){c[a>>3]=o;js(S);js(w);n=0;break}}else n=-1}while(0);d=x;return n|0}function Hn(e,t){e=e|0;t=t|0;js(e);js(t);return}function Bn(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0.0,l=0,u=0,f=0,h=0,p=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0;R=d;d=d+192|0;h=R+184|0;f=R+176|0;u=R+168|0;n=R+160|0;C=R+48|0;A=R+64|0;T=R;E=t+8|0;l=s[E>>2]|0;do{if((l|0)>=4){p=~~(+(l|0)*+c[e+128>>3])+-1|0;p=(p|0)<3?3:p;P=zs(l*96|0)|0;if(!P){en(3,5109,n);n=-1;break}M=zs(l<<4)|0;if(!M){en(3,5109,u);js(P);n=-1;break}n=l<<3;q=zs(n)|0;if(!q){en(3,5109,f);js(P);js(M);n=-1;break}x=zs(n)|0;if(!x){en(3,5109,h);js(P);js(M);js(q);n=-1;break}else n=0;do{c[r+(n<<5)>>3]=+c[i+(n<<5)>>3];c[r+(n<<5)+8>>3]=+c[i+(n<<5)+8>>3];c[r+(n<<5)+16>>3]=+c[i+(n<<5)+16>>3];c[r+(n<<5)+24>>3]=+c[i+(n<<5)+24>>3];n=n+1|0}while((n|0)!=3);_=t+4|0;S=C+8|0;h=x+(p<<3)|0;i=e+104|0;p=e+120|0;w=e+112|0;k=e+96|0;g=0.0;y=0;e:while(1){tn(e,r,A)|0;n=s[E>>2]|0;if((n|0)>0){l=0;do{if((On(C,A,(s[_>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}n=s[t>>2]|0;b=+c[n+(l<<4)>>3]-+c[C>>3];v=+c[n+(l<<4)+8>>3]-+c[S>>3];n=l<<1;c[M+(n<<3)>>3]=b;c[M+((n|1)<<3)>>3]=v;v=b*b+v*v;c[x+(l<<3)>>3]=v;c[q+(l<<3)>>3]=v;l=l+1|0;n=s[E>>2]|0}while((l|0)<(n|0))}ds(x,n,8,1);v=+c[h>>3]*4.0;v=v<16.0?16.0:v;l=s[E>>2]|0;b=v/6.0;if((l|0)>0){o=0.0;n=0;do{m=+c[x+(n<<3)>>3];if(m>v)m=b;else{m=1.0-m/v;m=b*(1.0-m*(m*m))}o=o+m;n=n+1|0}while((n|0)<(l|0))}else o=0.0;o=o/+(l|0);if(o<+c[i>>3]){l=36;break}if(((y|0)>0?o<+c[p>>3]:0)?o/g>+c[w>>3]:0){l=36;break}if((y|0)==(s[k>>2]|0)){l=36;break}if((l|0)>0){f=0;n=0;do{m=+c[q+(f<<3)>>3];if(m<=v){l=n*6|0;u=P+(l<<3)|0;if((Fn(u,e,r,(s[_>>2]|0)+(f*24|0)|0)|0)<0){l=28;break e}g=1.0-m/v;g=g*g;c[u>>3]=+c[u>>3]*g;u=P+((l|1)<<3)|0;c[u>>3]=+c[u>>3]*g;u=P+(l+2<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+3<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+4<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+5<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+6<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+7<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+8<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+9<<3)|0;c[u>>3]=g*+c[u>>3];u=P+(l+10<<3)|0;c[u>>3]=g*+c[u>>3];l=P+(l+11<<3)|0;c[l>>3]=g*+c[l>>3];l=f<<1;c[M+(n<<3)>>3]=g*+c[M+(l<<3)>>3];c[M+(n+1<<3)>>3]=g*+c[M+((l|1)<<3)>>3];l=s[E>>2]|0;n=n+2|0}f=f+1|0}while((f|0)<(l|0))}else n=0;if((n|0)<6){l=32;break}if(($n(T,M,P,n)|0)<0){l=34;break}Dn(r,T)|0;g=o;y=y+1|0}if((l|0)==14){Un(P,M,q,x);n=-1;break}else if((l|0)==28){Un(P,M,q,x);n=-1;break}else if((l|0)==32){Un(P,M,q,x);n=-1;break}else if((l|0)==34){Un(P,M,q,x);n=-1;break}else if((l|0)==36){c[a>>3]=o;js(P);js(M);js(q);js(x);n=0;break}}else n=-1}while(0);d=R;return n|0}function Un(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;js(e);js(t);js(i);js(r);return}function Qn(e,t){e=e|0;t=t|0;var i=0.0;i=+c[e>>3]-+c[t>>3];return(i<0.0?-1:i>0.0&1)|0}function Vn(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0.0,l=0.0,u=0,f=0.0,h=0.0,p=0,m=0.0,b=0.0,g=0.0,v=0.0,w=0.0,k=0,y=0.0,_=0,S=0,x=0,q=0,E=0.0,C=0,T=0,A=0,M=0.0,P=0.0,R=0.0,I=0.0,O=0.0,F=0.0,$=0.0,D=0.0,N=0.0,L=0.0,z=0.0,j=0.0,H=0.0,B=0.0,Q=0.0,V=0,Y=0,W=0,G=0,K=0,J=0;V=d;d=d+64|0;A=V+48|0;q=V+40|0;x=V+32|0;S=V+24|0;k=V+16|0;p=V+8|0;u=V;e:do{if((r|0)>=4){n=0;while(1){if((n|0)>=(r|0))break;if(+c[i+(n*24|0)+16>>3]!=0.0){n=-1;break e}else n=n+1|0}if((((((((!(+c[e>>3]==0.0)?!(+c[e+32>>3]!=0.0):0)?(C=e+40|0,!(+c[C>>3]==0.0)):0)?!(+c[e+64>>3]!=0.0):0)?!(+c[e+72>>3]!=0.0):0)?!(+c[e+80>>3]!=1.0):0)?!(+c[e+24>>3]!=0.0):0)?!(+c[e+56>>3]!=0.0):0)?!(+c[e+88>>3]!=0.0):0){n=r<<1;T=nn(n,8)|0;if(!T){en(3,5124,u);n=-1;break}_=nn(n,1)|0;if(!_){dn(T)|0;en(3,5150,p);n=-1;break}if(r){n=s[T>>2]|0;u=s[_>>2]|0;p=0;do{J=i+(p*24|0)|0;Y=p<<4;c[n+(Y<<3)>>3]=+c[J>>3];K=i+(p*24|0)+8|0;c[n+((Y|1)<<3)>>3]=+c[K>>3];c[n+((Y|2)<<3)>>3]=1.0;c[n+((Y|3)<<3)>>3]=0.0;c[n+((Y|4)<<3)>>3]=0.0;c[n+((Y|5)<<3)>>3]=0.0;G=t+(p<<4)|0;c[n+((Y|6)<<3)>>3]=-(+c[J>>3]*+c[G>>3]);c[n+((Y|7)<<3)>>3]=-(+c[K>>3]*+c[G>>3]);c[n+((Y|8)<<3)>>3]=0.0;c[n+((Y|9)<<3)>>3]=0.0;c[n+((Y|10)<<3)>>3]=0.0;c[n+((Y|11)<<3)>>3]=+c[J>>3];c[n+((Y|12)<<3)>>3]=+c[K>>3];c[n+((Y|13)<<3)>>3]=1.0;W=t+(p<<4)+8|0;c[n+((Y|14)<<3)>>3]=-(+c[J>>3]*+c[W>>3]);c[n+((Y|15)<<3)>>3]=-(+c[K>>3]*+c[W>>3]);Y=p<<1;c[u+(Y<<3)>>3]=+c[G>>3];c[u+((Y|1)<<3)>>3]=+c[W>>3];p=p+1|0}while((p|0)!=(r|0))}r=un(T)|0;if(!r){dn(T)|0;dn(_)|0;en(3,5176,k);n=-1;break}p=ln(r,T)|0;if(!p){dn(T)|0;dn(_)|0;dn(r)|0;en(3,5202,S);n=-1;break}u=ln(r,_)|0;if(!u){dn(T)|0;dn(_)|0;dn(r)|0;dn(p)|0;en(3,5228,x);n=-1;break}if((mn(p)|0)<0){dn(T)|0;dn(_)|0;dn(r)|0;dn(p)|0;dn(u)|0;en(3,5254,q);n=-1;break}n=ln(p,u)|0;if(!n){dn(T)|0;dn(_)|0;dn(r)|0;dn(p)|0;dn(u)|0;en(3,5280,A);n=-1;break}J=s[n>>2]|0;m=+c[J+48>>3];B=+c[e+48>>3];w=+c[C>>3];o=(+c[J+24>>3]-m*B)/w;v=+c[e+16>>3];Q=+c[e+8>>3];g=+c[e>>3];b=(+c[J>>3]-m*v-o*Q)/g;l=+c[J+56>>3];f=(+c[J+32>>3]-B*l)/w;h=(+c[J+8>>3]-v*l-Q*f)/g;w=(+c[J+40>>3]-B)/w;g=(+c[J+16>>3]-v-Q*w)/g;dn(T)|0;dn(_)|0;dn(r)|0;dn(p)|0;dn(u)|0;dn(n)|0;Q=+U(+(m*m+(o*o+b*b)));v=+U(+(l*l+(f*f+h*h)));b=b/Q;o=o/Q;m=m/Q;h=h/v;f=f/v;l=l/v;v=(Q+v)*.5;g=g/v;Q=1.0/v;if(Q<0.0){z=-o;l=-l;f=-f;m=-m;h=-h;j=-b;B=-g;H=-Q}else{z=o;j=b;B=g;H=w/v}o=l*z-f*m;b=h*m-l*j;g=f*j-h*z;v=+U(+(g*g+(o*o+b*b)));do{if(!(v==0.0)){w=o/v;b=b/v;o=g/v;L=l*m+(f*z+h*j);L=L<0.0?-L:L;L=(+U(+(L+1.0))+ +U(+(1.0-L)))*.5;if(j*b-z*w!=0.0){n=0;M=j;y=z;P=m;O=w;I=b}else{J=j*o-m*w!=0.0;n=J?1:2;M=J?j:m;y=J?m:z;P=J?z:j;O=J?w:o;I=J?o:b;o=J?b:w}g=M*I;v=y*O;b=g-v;if(b==0.0){b=z;o=j;break}R=(y*o-P*I)/b;E=L*I/b;g=v-g;b=(M*o-P*O)/g;g=L*O/g;v=R*R+b*b+1.0;w=R*E+b*g;y=w*w-v*(E*E+g*g+-1.0);if(y<0.0){b=z;o=j;break}N=+U(+y);D=(N-w)/v;P=E+R*D;$=g+b*D;N=(-w-N)/v;R=E+R*N;g=g+b*N;J=(n|0)==1;b=J?I:o;v=J?o:I;F=J?D:$;D=J?$:D;$=J?N:g;I=J?g:N;J=(n|0)==2&(J^1);g=J?O:b;b=J?b:O;N=J?D:P;D=J?P:D;o=J?I:R;O=J?R:I;if(h*v-f*b!=0.0){n=0;M=h;y=f;P=l;I=b;E=v}else{J=h*g-l*b!=0.0;n=J?1:2;M=J?h:l;y=J?l:f;P=J?f:h;I=J?b:g;E=J?g:v;g=J?v:b}v=M*E;w=y*I;b=v-w;if(b==0.0){b=z;o=j;break}R=(y*g-P*E)/b;E=L*E/b;b=w-v;y=(M*g-P*I)/b;b=L*I/b;g=R*R+y*y+1.0;v=R*E+y*b;w=v*v-g*(E*E+b*b+-1.0);if(w<0.0){b=z;o=j;break}w=+U(+w);l=(w-v)/g;j=E+R*l;z=b+y*l;w=(-v-w)/g;m=E+R*w;h=b+y*w;J=(n|0)==1;f=J?l:z;l=J?z:l;y=J?w:h;w=J?h:w;J=(n|0)==2&(J^1);h=J?l:j;l=J?j:l;E=J?w:m;w=J?m:w;m=D*l+(F*f+N*h);m=m<0.0?-m:m;b=D*w+(F*y+N*E);b=b<0.0?-b:b;g=O*l+($*f+o*h);g=g<0.0?-g:g;v=O*w+($*y+o*E);v=v<0.0?-v:v;if(m<b)if(m<g){if(m<v){b=F;m=D;o=N;break}b=$;l=w;f=y;m=O;h=E;break}else{if(g<v){b=$;m=O;break}b=$;l=w;f=y;m=O;h=E;break}else if(b<g){if(b<v){b=F;l=w;f=y;m=D;h=E;o=N;break}b=$;l=w;f=y;m=O;h=E;break}else{if(g<v){b=$;m=O;break}b=$;l=w;f=y;m=O;h=E;break}}else{b=z;o=j}}while(0);N=l*b-f*m;L=h*m-l*o;z=f*o-h*b;j=+U(+(z*z+(N*N+L*L)));c[a>>3]=o;c[a+32>>3]=b;c[a+64>>3]=m;c[a+8>>3]=h;c[a+40>>3]=f;c[a+72>>3]=l;c[a+16>>3]=N/j;c[a+48>>3]=L/j;c[a+80>>3]=z/j;c[a+24>>3]=B;c[a+56>>3]=H;c[a+88>>3]=Q;n=0}else n=-1}else n=-1}while(0);d=V;return n|0}function Yn(e){e=e|0;js(s[e>>2]|0);js(e);return 0}function Wn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return+ +Kn(e,t,i,r,0)}function Gn(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return+ +Kn(e,t,i,r,1)}function Kn(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0.0,o=0,l=0,u=0,f=0,h=0.0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+208|0;q=P+200|0;x=P+192|0;E=P+96|0;C=P;T=r+4|0;m=s[T>>2]|0;b=r+112|0;g=r+120|0;if((m|0)>0){k=s[r>>2]|0;y=(i|0)>0;_=(i|0)>0;S=0;do{if(!(s[k+(S*320|0)+4>>2]|0)){if(y){l=s[k+(S*320|0)>>2]|0;u=0;o=-1;do{if((s[t+(u<<8)+8>>2]|0)==(l|0)?(h=+c[t+(u<<8)+40>>3],!(h<+c[b>>3])):0)if(!((o|0)!=-1?!(+c[t+(o<<8)+40>>3]<h):0))o=u;u=u+1|0}while((u|0)<(i|0))}else o=-1;s[k+(S*320|0)+304>>2]=o;if((o|0)>-1)s[t+(o<<8)+16>>2]=s[t+(o<<8)+20>>2]}else{u=k+(S*320|0)+312|0;f=k+(S*320|0)|0;if(_){p=0;o=-1;do{l=s[t+(p<<8)+12>>2]|0;if((l|0)==0?(w=t+(p<<8)+248|0,v=s[w>>2]|0,w=s[w+4>>2]|0,!((v|0)==0&(w|0)==0)):0){l=u;if((v|0)==(s[l>>2]|0)?(w|0)==(s[l+4>>2]|0):0)M=20}else if((l|0)==(s[f>>2]|0))M=20;if((M|0)==20){M=0;n=+c[t+(p<<8)+48>>3];if(!(n<+c[g>>3]))if(!((o|0)!=-1?!(+c[t+(o<<8)+48>>3]<n):0))o=p}p=p+1|0}while((p|0)<(i|0))}else o=-1;s[k+(S*320|0)+304>>2]=o;if((o|0)>-1)s[t+(o<<8)+16>>2]=s[t+(o<<8)+24>>2]}S=S+1|0}while((S|0)<(m|0))}if((m|0)>0){b=0;o=0;m=0;l=0;while(1){u=s[r>>2]|0;f=s[u+(b*320|0)+304>>2]|0;do{if((f|0)<0)u=m;else{p=t+(f<<8)|0;if(+ku(e,p,+c[u+(b*320|0)+8>>3],C)>4.0){s[(s[r>>2]|0)+(b*320|0)+304>>2]=-1;u=t+(f<<8)+236|0;if(s[u>>2]|0){u=m;break}s[u>>2]=7;u=m;break}u=s[p>>2]|0;if((l|0)==0|(m|0)<(u|0)){o=0;do{c[E+(o<<5)>>3]=+c[C+(o<<5)>>3];c[E+(o<<5)+8>>3]=+c[C+(o<<5)+8>>3];c[E+(o<<5)+16>>3]=+c[C+(o<<5)+16>>3];c[E+(o<<5)+24>>3]=+c[C+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3);o=b}else u=m;l=l+1|0}}while(0);b=b+1|0;if((b|0)>=(s[T>>2]|0))break;else m=u}}else{o=0;l=0}do{if((l|0)!=0?(l|0)>=(s[r+128>>2]|0):0){tn(E,(s[r>>2]|0)+(o*320|0)+112|0,C)|0;m=l<<2;g=zs(l<<6)|0;if(!g){en(3,5472,x);kt(1)}b=zs(l*96|0)|0;if(!b){en(3,5472,q);kt(1)}u=s[T>>2]|0;if((u|0)>0){f=s[r>>2]|0;p=0;o=0;do{l=s[f+(p*320|0)+304>>2]|0;if((l|0)>=0){x=s[t+(l<<8)+16>>2]|0;i=(4-x|0)%4|0;q=o<<3;c[g+(q<<3)>>3]=+c[t+(l<<8)+168+(i<<4)>>3];c[g+((q|1)<<3)>>3]=+c[t+(l<<8)+168+(i<<4)+8>>3];i=(5-x|0)%4|0;c[g+((q|2)<<3)>>3]=+c[t+(l<<8)+168+(i<<4)>>3];c[g+((q|3)<<3)>>3]=+c[t+(l<<8)+168+(i<<4)+8>>3];i=(6-x|0)%4|0;c[g+((q|4)<<3)>>3]=+c[t+(l<<8)+168+(i<<4)>>3];c[g+((q|5)<<3)>>3]=+c[t+(l<<8)+168+(i<<4)+8>>3];x=(7-x|0)%4|0;c[g+((q|6)<<3)>>3]=+c[t+(l<<8)+168+(x<<4)>>3];c[g+((q|7)<<3)>>3]=+c[t+(l<<8)+168+(x<<4)+8>>3];q=o*12|0;c[b+(q<<3)>>3]=+c[f+(p*320|0)+208>>3];c[b+((q|1)<<3)>>3]=+c[f+(p*320|0)+216>>3];c[b+((q|2)<<3)>>3]=+c[f+(p*320|0)+224>>3];c[b+((q|3)<<3)>>3]=+c[f+(p*320|0)+232>>3];c[b+(q+4<<3)>>3]=+c[f+(p*320|0)+240>>3];c[b+(q+5<<3)>>3]=+c[f+(p*320|0)+248>>3];c[b+(q+6<<3)>>3]=+c[f+(p*320|0)+256>>3];c[b+(q+7<<3)>>3]=+c[f+(p*320|0)+264>>3];c[b+(q+8<<3)>>3]=+c[f+(p*320|0)+272>>3];c[b+(q+9<<3)>>3]=+c[f+(p*320|0)+280>>3];x=s[r>>2]|0;c[b+(q+10<<3)>>3]=+c[x+(p*320|0)+288>>3];c[b+(q+11<<3)>>3]=+c[x+(p*320|0)+296>>3];o=o+1|0}p=p+1|0}while((p|0)<(u|0))}f=r+104|0;l=(a|0)!=0;if(!(s[f>>2]|0)){o=r+8|0;n=+_u(e,C,g,b,m,o);if(l&n>=20.0){zn(s[e>>2]|0,.8)|0;n=+Su(e,C,g,b,m,o);if(n>=20.0){zn(s[e>>2]|0,.6)|0;n=+Su(e,C,g,b,m,o);if(n>=20.0){zn(s[e>>2]|0,.4)|0;n=+Su(e,C,g,b,m,o);if(n>=20.0){zn(s[e>>2]|0,0.0)|0;n=+Su(e,C,g,b,m,o)}}}}js(b);js(g)}else{n=+_u(e,C,g,b,m,E);u=r+8|0;h=+_u(e,u,g,b,m,u);o=n<h;do{if(l){if(o){o=0;do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=h;if(n>=20.0){zn(s[e>>2]|0,.8)|0;n=+Su(e,C,g,b,m,E);h=+Su(e,u,g,b,m,u);if(n<h){o=0;do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=h;if(n>=20.0){zn(s[e>>2]|0,.6)|0;n=+Su(e,C,g,b,m,E);h=+Su(e,u,g,b,m,u);if(n<h){o=0;do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=h;if(n>=20.0){zn(s[e>>2]|0,.4)|0;n=+Su(e,C,g,b,m,E);h=+Su(e,u,g,b,m,u);if(n<h){o=0;do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=h;if(n>=20.0){zn(s[e>>2]|0,0.0)|0;n=+Su(e,C,g,b,m,E);h=+Su(e,u,g,b,m,u);if(n<h)o=0;else{n=h;break}do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}}}}}else if(o){o=0;do{c[r+8+(o<<5)>>3]=+c[E+(o<<5)>>3];c[r+8+(o<<5)+8>>3]=+c[E+(o<<5)+8>>3];c[r+8+(o<<5)+16>>3]=+c[E+(o<<5)+16>>3];c[r+8+(o<<5)+24>>3]=+c[E+(o<<5)+24>>3];o=o+1|0}while((o|0)!=3)}else n=h}while(0);js(b);js(g)}if(n<20.0){s[f>>2]=1;break}s[f>>2]=0;f=s[T>>2]|0;if((f|0)>0){o=s[r>>2]|0;u=0;do{l=s[o+(u*320|0)+304>>2]|0;if((l|0)>=0?(A=t+(l<<8)+236|0,(s[A>>2]|0)==0):0)s[A>>2]=8;u=u+1|0}while((u|0)<(f|0))}}else M=38}while(0);if((M|0)==38){s[r+104>>2]=0;n=-1.0}d=P;return+n}function Jn(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0,N=0,L=0,z=0,j=0,H=0,B=0,U=0,Q=0,V=0,Y=0.0,W=0.0;V=d;d=d+2544|0;U=V+208|0;B=V+200|0;R=V+184|0;H=V+176|0;P=V+168|0;M=V+152|0;j=V+144|0;A=V+136|0;N=V+128|0;D=V+120|0;$=V+112|0;T=V+104|0;o=V+96|0;n=V+88|0;a=V+80|0;r=V+72|0;i=V+64|0;I=V;O=V+2280|0;F=V+232|0;q=V+224|0;z=V+220|0;E=V+216|0;C=V+212|0;Q=Va(e,5306)|0;e:do{if(!Q){s[i>>2]=e;en(3,5308,i);i=da(s[(ca()|0)>>2]|0)|0;s[r>>2]=5367;s[r+4>>2]=i;en(3,5361,r);i=0}else{Xn(O,Q);s[a>>2]=z;if((as(O,5368,a)|0)!=1){s[n>>2]=e;en(3,5371,n);Ha(Q)|0;i=0;break}i=s[z>>2]|0;L=zs(i*320|0)|0;if(!L){en(3,5472,o);kt(1)}g=I+8|0;v=I+16|0;w=I+24|0;k=I+32|0;y=I+40|0;_=I+48|0;S=I+56|0;x=(t|0)==0;t:do{if((i|0)>0){i=0;a=0;i:while(1){Xn(O,Q);r=L+(i*320|0)|0;n=L+(i*320|0)+312|0;s[T>>2]=n;s[T+4>>2]=q;if((as(O,5489,T)|0)==1){b=s[n>>2]|0;s[r>>2]=(b&-32768|0)==0&0==0?b&32767:0;s[L+(i*320|0)+4>>2]=1;a=a|2}else{if(x){r=10;break}if(!(sn(F,e,2048,1)|0)){r=12;break}_s(F,O,2047-(ys(F)|0)|0)|0;b=Xs(t,F)|0;s[r>>2]=b;if((b|0)<0){r=14;break}s[L+(i*320|0)+4>>2]=0;a=a|1}Xn(O,Q);r=L+(i*320|0)+8|0;s[A>>2]=r;if((as(O,5785,A)|0)!=1){r=18;break}Xn(O,Q);p=L+(i*320|0)+16|0;m=L+(i*320|0)+24|0;b=L+(i*320|0)+40|0;s[M>>2]=p;s[M+4>>2]=m;s[M+8>>2]=L+(i*320|0)+32;s[M+12>>2]=b;if((as(O,5894,M)|0)!=4){s[P>>2]=E;s[P+4>>2]=C;if((as(O,5910,P)|0)==2)n=0;else{r=21;break}}else n=1;do{Xn(O,Q);s[R>>2]=L+(i*320|0)+16+(n<<5);s[R+4>>2]=L+(i*320|0)+16+(n<<5)+8;s[R+8>>2]=L+(i*320|0)+16+(n<<5)+16;s[R+12>>2]=L+(i*320|0)+16+(n<<5)+24;if((as(O,5894,R)|0)!=4){r=23;break i}n=n+1|0}while((n|0)<3);rn(p,L+(i*320|0)+112|0)|0;W=+c[r>>3];Y=W*-.5;c[I>>3]=Y;W=W*.5;c[g>>3]=W;c[v>>3]=W;c[w>>3]=W;c[k>>3]=W;c[y>>3]=Y;c[_>>3]=Y;c[S>>3]=Y;r=L+(i*320|0)+48|0;n=L+(i*320|0)+56|0;o=L+(i*320|0)+72|0;l=L+(i*320|0)+80|0;u=L+(i*320|0)+88|0;f=L+(i*320|0)+104|0;h=0;do{Y=+c[I+(h<<4)>>3];W=+c[I+(h<<4)+8>>3];c[L+(i*320|0)+208+(h*24|0)>>3]=+c[b>>3]+(+c[p>>3]*Y+ +c[m>>3]*W);c[L+(i*320|0)+208+(h*24|0)+8>>3]=+c[o>>3]+(+c[r>>3]*Y+ +c[n>>3]*W);c[L+(i*320|0)+208+(h*24|0)+16>>3]=+c[f>>3]+(+c[l>>3]*Y+ +c[u>>3]*W);h=h+1|0}while((h|0)!=4);i=i+1|0;if((i|0)>=(s[z>>2]|0))break t}if((r|0)==10){s[$>>2]=e;s[$+4>>2]=O;en(3,5496,$)}else if((r|0)==12){s[D>>2]=e;en(3,5624,D)}else if((r|0)==14){s[N>>2]=e;s[N+4>>2]=F;en(3,5708,N)}else if((r|0)==18){s[j>>2]=e;s[j+4>>2]=i+1;en(3,5789,j)}else if((r|0)==21){s[H>>2]=e;s[H+4>>2]=i+1;en(3,5916,H)}else if((r|0)==23){s[B>>2]=e;s[B+4>>2]=i+1;en(3,5916,B)}Ha(Q)|0;js(L);i=0;break e}else a=0}while(0);Ha(Q)|0;i=zs(136)|0;if(!i){en(3,5472,U);kt(1)}s[i>>2]=L;s[i+4>>2]=s[z>>2];s[i+104>>2]=0;do{if((a&3|0)!=3){r=i+108|0;if(!(a&1)){s[r>>2]=1;break}else{s[r>>2]=0;break}}else s[i+108>>2]=2}while(0);c[i+112>>3]=.5;c[i+120>>3]=.5}}while(0);d=V;return i|0}function Xn(e,t){e=e|0;t=t|0;var i=0,a=0;e:do{if(Qa(e,256,t)|0)while(1){i=ys(e)|0;t:do{if(i)while(1){i=i+-1|0;a=e+i|0;switch(r[a>>0]|0){case 13:case 10:break;default:break t}r[a>>0]=0;if(!i)break t}}while(0);switch(r[e>>0]|0){case 0:case 35:break;default:break e}if(!(Qa(e,256,t)|0))break e}}while(0);return}function Zn(e,t,i,r){e=e|0;t=+t;i=+i;r=r|0;var a=0,n=0.0,o=0.0,l=0,u=0.0,f=0.0,h=0,p=0,m=0,b=0,g=0;g=d;d=d+400|0;h=g+296|0;b=g+200|0;p=g+128|0;m=g;l=s[e>>2]|0;a=s[e+4>>2]|0;if((vn(e+8|0,h,b)|0)<0)en(3,6025,g+392|0);else{o=+(a+-1|0);a=h+32|0;c[a>>3]=o*+c[h+64>>3]-+c[a>>3];a=h+40|0;c[a>>3]=o*+c[h+72>>3]-+c[a>>3];a=h+48|0;c[a>>3]=o*+c[h+80>>3]-+c[a>>3];a=h+56|0;c[a>>3]=o*+c[h+88>>3]-+c[a>>3];n=+c[h+80>>3];a=0;do{c[p+(a*24|0)>>3]=+c[h+(a<<5)>>3]/n;c[p+(a*24|0)+8>>3]=+c[h+(a<<5)+8>>3]/n;c[p+(a*24|0)+16>>3]=+c[h+(a<<5)+16>>3]/n;a=a+1|0}while((a|0)!=3);n=+(l+-1|0);c[m>>3]=+c[p>>3]*2.0/n;c[m+8>>3]=+c[p+8>>3]*2.0/n;c[m+16>>3]=+c[p+16>>3]*2.0/n+-1.0;l=m+24|0;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;c[m+40>>3]=+c[p+32>>3]*2.0/o;c[m+48>>3]=+c[p+40>>3]*2.0/o+-1.0;l=m+56|0;n=i-t;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;s[l+16>>2]=0;s[l+20>>2]=0;c[m+80>>3]=(t+i)/n;c[m+88>>3]=i*-2.0*t/n;l=m+96|0;s[l>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;c[m+112>>3]=1.0;c[m+120>>3]=0.0;n=+c[b+24>>3];o=+c[b+56>>3];i=+c[b+88>>3];l=0;do{t=+c[m+(l<<5)>>3];a=m+(l<<5)+8|0;e=m+(l<<5)+16|0;u=+c[a>>3];f=+c[e>>3];h=0;do{c[r+((h<<2)+l<<3)>>3]=t*+c[b+(h<<3)>>3]+u*+c[b+32+(h<<3)>>3]+f*+c[b+64+(h<<3)>>3];h=h+1|0}while((h|0)!=3);c[r+(l+12<<3)>>3]=+c[m+(l<<5)+24>>3]+(t*n+ +c[a>>3]*o+ +c[e>>3]*i);l=l+1|0}while((l|0)!=4)}d=g;return}function eo(e){e=e|0;s[496]=e;return}function to(){return s[496]|0}function io(e){e=e|0;var t=0,i=0;t=e+212|0;i=s[t>>2]|0;if(i){Fu(i)|0;Xl(s[t>>2]|0)|0;s[t>>2]=0}t=e+224|0;if(s[t>>2]|0){Yl(t)|0;s[t>>2]=0}t=e+192|0;if(s[t>>2]|0){En(t)|0;s[t>>2]=0}return}function ro(e){e=e|0;var t=0,i=0,r=0,a=0,n=0;n=d;d=d+16|0;i=n;s[i>>2]=e;if(!(Qo(2044,i)|0))e=-1;else{a=Vo(2044,i)|0;e=a+196|0;t=s[e>>2]|0;if(t){js(t);s[e>>2]=0;s[a+200>>2]=0}io(a);Nu(s[a+216>>2]|0)|0;Yo(2044,i)|0;i=a+248|0;r=a+252|0;e=s[i>>2]|0;if((s[r>>2]|0)!=(e|0)){t=0;do{Yn(s[e+(t<<3)+4>>2]|0)|0;t=t+1|0;e=s[i>>2]|0}while(t>>>0<(s[r>>2]|0)-e>>3>>>0)}Wo(i);Pr(i);Wo(a+248|0);Pr(a);e=0}d=n;return e|0}function ao(e){e=e|0;var t=0,i=0,a=0,n=0,o=0;o=d;d=d+208|0;n=o+192|0;a=o;i=o+196|0;if(!(r[e>>0]&1))t=e+1|0;else t=s[e+8>>2]|0;if((yn(t,1,a,o+184|0)|0)<0){if(!(r[e>>0]&1))t=e+1|0;else t=s[e+8>>2]|0;s[n>>2]=t;en(3,6093,n);t=-1}else{t=s[521]|0;s[521]=t+1;s[i>>2]=t;Ku(Go(2064,i)|0,a|0,184)|0}d=o;return t|0}function so(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,f=0,h=0;h=d;d=d+48|0;f=h+24|0;u=h+16|0;o=h+8|0;a=h;i=h+32|0;r=h+28|0;s[i>>2]=e;s[r>>2]=t;do{if((Qo(2044,i)|0)!=0?(l=Vo(2044,i)|0,(Ko(2064,r)|0)!=0):0){n=l+8|0;Ku(n|0,Go(2064,r)|0,184)|0;r=s[n>>2]|0;i=l+204|0;t=s[l+12>>2]|0;e=l+208|0;if(!((r|0)==(s[i>>2]|0)?(t|0)==(s[e>>2]|0):0)){s[a>>2]=r;s[a+4>>2]=t;en(2,6152,a);gn(n,s[i>>2]|0,s[e>>2]|0,n)|0}io(l);i=qn(n,15)|0;e=l+192|0;s[e>>2]=i;if(!i){en(3,6199,o);i=-1;break}i=Wl(i)|0;t=l+212|0;s[t>>2]=i;if(!i){en(3,6237,u);i=-1;break}Gl(i,2)|0;u=Ql(n)|0;s[l+224>>2]=u;if(!u){en(3,6274,f);i=-1;break}else{Ou(s[t>>2]|0,s[l+216>>2]|0)|0;Zn(s[e>>2]|0,+c[l+232>>3],+c[l+240>>3],l+264|0);i=0;break}}else i=-1}while(0);d=h;return i|0}function no(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;n=l;i=l+12|0;s[i>>2]=e;if(Qo(2044,i)|0){a=Vo(2044,i)|0;if(!(r[t>>0]&1))t=t+1|0;else t=s[t+8>>2]|0;e=a+216|0;i=Xs(s[e>>2]|0,t)|0;s[a+260>>2]=i;if((i|0)<0){s[n>>2]=t;en(3,6312,n);Nu(s[e>>2]|0)|0;en(3,6358,o);i=-1}}else i=-1;d=l;return i|0}function oo(e,t){e=e|0;t=t|0;var i=0,a=0,n=0,o=0,l=0,u=0,c=0;c=d;d=d+32|0;n=c+16|0;a=c+8|0;i=c+20|0;u=c;s[i>>2]=e;do{if(Qo(2044,i)|0){l=Vo(2044,i)|0;if(!(r[t>>0]&1))i=t+1|0;else i=s[t+8>>2]|0;e=s[l+212>>2]|0;t=l+216|0;o=l+220|0;i=Jn(i,s[t>>2]|0)|0;s[o>>2]=i;if(!i){en(3,6402,a);Nu(s[t>>2]|0)|0;en(3,6429,n);i=-1;break}switch(s[i+108>>2]|0){case 0:{ou(e,0)|0;break}case 1:{ou(e,2)|0;break}default:ou(e,3)|0}e=l+248|0;t=l+252|0;a=s[t>>2]|0;i=a-(s[e>>2]|0)>>3;n=u;s[n>>2]=0;s[n+4>>2]=0;s[u>>2]=i;s[u+4>>2]=s[o>>2];if((a|0)==(s[l+256>>2]|0)){Jo(e,u);break}else{l=u;i=s[l>>2]|0;l=s[l+4>>2]|0;u=a;s[u>>2]=i;s[u+4>>2]=l;s[t>>2]=(s[t>>2]|0)+8;break}}else i=-1}while(0);d=c;return i|0}function lo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0;n=d;d=d+16|0;i=n;s[i>>2]=e;if(((Qo(2044,i)|0)!=0?(r=Vo(2044,i)|0,(t|0)>=0):0)?(a=s[r+248>>2]|0,(s[r+252>>2]|0)-a>>3>>>0>t>>>0):0)i=s[(s[a+(t<<3)+4>>2]|0)+4>>2]|0;else i=-1;d=n;return i|0}function uo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;s[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{t=Vo(2044,t)|0;t=(s[t+252>>2]|0)-(s[t+248>>2]|0)>>3}d=i;return t|0}function co(e,t){e=e|0;t=+t;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;if(Qo(2044,i)|0)c[(Vo(2044,i)|0)+232>>3]=t;d=r;return}function fo(e){e=e|0;var t=0.0,i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;if(!(Qo(2044,i)|0))t=-1.0;else t=+c[(Vo(2044,i)|0)+232>>3];d=r;return+t}function ho(e,t){e=e|0;t=+t;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;if(Qo(2044,i)|0)c[(Vo(2044,i)|0)+240>>3]=t;d=r;return}function po(e){e=e|0;var t=0.0,i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;if(!(Qo(2044,i)|0))t=-1.0;else t=+c[(Vo(2044,i)|0)+240>>3];d=r;return+t}function mo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;i=a+4|0;s[i>>2]=e;if((Qo(2044,i)|0)!=0?(ou(s[(Vo(2044,i)|0)+212>>2]|0,t)|0)==0:0){s[r>>2]=t;en(1,6478,r)}d=a;return}function bo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(cu(s[(Vo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?s[i>>2]|0:-1)|0}return 0}function go(e,t){e=e|0;t=+t;var i=0,r=0,a=0.0,n=0,o=0,l=0;l=d;d=d+16|0;o=l;i=l+8|0;s[i>>2]=e;if((((Qo(2044,i)|0)!=0?(r=Vo(2044,i)|0,!(t<=0.0|t>=1.0)):0)?(a=t,n=s[r+212>>2]|0,(n|0)!=0):0)?(du(n,a)|0)==0:0){c[o>>3]=a;en(1,6513,o)}d=l;return}function vo(e){e=e|0;var t=0,i=0,r=0,a=0;a=d;d=d+16|0;t=a+8|0;r=a;s[t>>2]=e;if((Qo(2044,t)|0)!=0?(i=s[(Vo(2044,t)|0)+212>>2]|0,(i|0)!=0):0){e=(fu(i,r)|0)==0;d=a;return+(e?+c[r>>3]:-1.0)}d=a;return-1.0}function wo(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;if(Qo(2044,i)|0)lu(s[(Vo(2044,i)|0)+212>>2]|0,t)|0;d=r;return}function ko(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=-1;else{uu(s[(Vo(2044,t)|0)+212>>2]|0,i)|0;t=s[i>>2]|0}d=r;return t|0}function yo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;i=a+4|0;s[i>>2]=e;if((Qo(2044,i)|0)!=0?(eu(s[(Vo(2044,i)|0)+212>>2]|0,t)|0)==0:0){s[r>>2]=t;en(1,6544,r)}d=a;return}function _o(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(tu(s[(Vo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?s[i>>2]|0:-1)|0}return 0}function So(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0;n=d;d=d+16|0;a=n;i=n+4|0;s[i>>2]=e;if(((Qo(2044,i)|0)!=0?(r=Vo(2044,i)|0,t>>>0<=255):0)?(iu(s[r+212>>2]|0,t)|0)==0:0){s[a>>2]=t;en(1,6569,a)}d=n;return}function xo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(ru(s[(Vo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?s[i>>2]|0:-1)|0}return 0}function qo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;i=a+4|0;s[i>>2]=e;if((Qo(2044,i)|0)!=0?(Jl(s[(Vo(2044,i)|0)+212>>2]|0,t)|0)==0:0){s[r>>2]=t;en(1,6590,r)}d=a;return}function Eo(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(au(s[(Vo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?s[i>>2]|0:-1)|0}return 0}function Co(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;i=a+4|0;s[i>>2]=e;if(!(Qo(2044,i)|0))t=0;else{e=(t|0)!=0;Kl(s[(Vo(2044,i)|0)+212>>2]|0,e&1)|0;s[r>>2]=e?6616:6620;en(1,6625,r)}d=a;return t|0}function To(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;s[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else t=s[(s[(Vo(2044,t)|0)+212>>2]|0)+4834148>>2]|0;d=i;return t|0}function Ao(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0))t=0;else{Zl(s[(Vo(2044,t)|0)+212>>2]|0,i)|0;t=s[i>>2]|0}d=r;return t|0}function Mo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;i=a+4|0;s[i>>2]=e;if((Qo(2044,i)|0)!=0?(su(s[(Vo(2044,i)|0)+212>>2]|0,t)|0)==0:0){s[r>>2]=t;en(1,6647,r)}d=a;return}function Po(e){e=e|0;var t=0,i=0,r=0;r=d;d=d+16|0;t=r+4|0;i=r;s[t>>2]=e;if(!(Qo(2044,t)|0)){d=r;return-1}else{e=(nu(s[(Vo(2044,t)|0)+212>>2]|0,i)|0)==0;d=r;return(e?s[i>>2]|0:-1)|0}return 0}function Ro(e,t){e=e|0;t=t|0;var i=0;i=0;do{c[t+(i<<5)>>3]=+c[e+(i<<5)>>3];c[t+(i<<5)+8>>3]=+c[e+(i<<5)+8>>3];c[t+(i<<5)+16>>3]=+c[e+(i<<5)+16>>3];c[t+(i<<5)+24>>3]=+c[e+(i<<5)+24>>3];i=i+1|0}while((i|0)!=3);return}function Io(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=Vo(2044,r)|0;e=s[r+212>>2]|0;if((s[e+44>>2]|0)>(t|0)){+ku(s[r+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,+(i|0),264);r=0;break}else{r=s[523]|0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Oo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=Vo(2044,r)|0;e=s[r+212>>2]|0;if((s[e+44>>2]|0)>(t|0)){+yu(s[r+224>>2]|0,(t|0)<0?8:e+48+(t<<8)|0,264,+(i|0),264);r=0;break}else{r=s[523]|0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Fo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){r=s[(Vo(2044,r)|0)+212>>2]|0;if((s[r+44>>2]|0)>(t|0)){s[((t|0)<0?8:r+48+(t<<8)|0)+16>>2]=i;r=0;break}else{r=s[523]|0;break}}else r=s[522]|0}while(0);d=a;return r|0}function $o(e,t){e=e|0;t=t|0;var i=0,r=0,a=0.0,n=0.0,o=0.0,l=0.0,u=0.0,f=0.0,h=0.0,p=0.0;r=d;d=d+16|0;i=r;s[i>>2]=e;do{if(Qo(2044,i)|0){i=s[(Vo(2044,i)|0)+212>>2]|0;if((s[i+44>>2]|0)>(t|0)){i=(t|0)<0?8:i+48+(t<<8)|0;p=+c[33];c[i+168>>3]=p;l=+c[34];c[i+176>>3]=l;h=+c[35];c[i+184>>3]=h;o=+c[36];c[i+192>>3]=o;f=+c[37];c[i+200>>3]=f;n=+c[38];c[i+208>>3]=n;u=+c[39];c[i+216>>3]=u;a=+c[40];c[i+224>>3]=a;c[i+56>>3]=(p+h+f+u)*.25;c[i+64>>3]=(l+o+n+a)*.25;i=0;break}else{i=s[523]|0;break}}else i=s[522]|0}while(0);d=r;return i|0}function Do(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;do{if(Qo(2044,i)|0){i=Vo(2044,i)|0;e=s[i+248>>2]|0;if((t|0)<0?1:(s[i+252>>2]|0)-e>>3>>>0<=t>>>0){i=s[524]|0;break}else{t=s[e+(t<<3)+4>>2]|0;e=s[i+212>>2]|0;+Gn(s[i+224>>2]|0,e+48|0,s[e+44>>2]|0,t);Ro(t+8|0,264);i=0;break}}else i=s[522]|0}while(0);d=r;return i|0}function No(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;do{if(Qo(2044,i)|0){i=Vo(2044,i)|0;e=s[i+248>>2]|0;if((t|0)<0?1:(s[i+252>>2]|0)-e>>3>>>0<=t>>>0){i=s[524]|0;break}else{t=s[e+(t<<3)+4>>2]|0;e=s[i+212>>2]|0;+Wn(s[i+224>>2]|0,e+48|0,s[e+44>>2]|0,t);Ro(t+8|0,264);i=0;break}}else i=s[522]|0}while(0);d=r;return i|0}function Lo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;s[t>>2]=e;if(!(Qo(2044,t)|0))t=s[522]|0;else{t=Vo(2044,t)|0;t=hu(s[t+212>>2]|0,s[t+196>>2]|0)|0}d=i;return t|0}function zo(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=i;s[t>>2]=e;if(!(Qo(2044,t)|0))t=2088;else t=(s[(Vo(2044,t)|0)+212>>2]|0)+44|0;d=i;return s[t>>2]|0}function jo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;a=d;d=d+16|0;r=a;s[r>>2]=e;do{if(Qo(2044,r)|0){e=Vo(2044,r)|0;r=s[e+248>>2]|0;if((t|0)<0?1:(s[e+252>>2]|0)-r>>3>>>0<=t>>>0){r=s[524]|0;break}r=s[r+(t<<3)+4>>2]|0;if((i|0)<0?1:(s[r+4>>2]|0)<=(i|0)){r=s[523]|0;break}else{r=s[r>>2]|0;Ro(r+(i*320|0)+16|0,264);zt(0,s[r+(i*320|0)+304>>2]|0,s[r+(i*320|0)>>2]|0,s[r+(i*320|0)+4>>2]|0,+ +c[r+(i*320|0)+8>>3])|0;r=0;break}}else r=s[522]|0}while(0);d=a;return r|0}function Ho(e,t){e=e|0;t=t|0;var i=0,r=0;r=d;d=d+16|0;i=r;s[i>>2]=e;do{if(Qo(2044,i)|0){i=s[(Vo(2044,i)|0)+212>>2]|0;if((s[i+44>>2]|0)>(t|0)){i=(t|0)<0?8:i+48+(t<<8)|0;Qe(1,s[i>>2]|0,s[i+4>>2]|0,s[i+8>>2]|0,s[i+12>>2]|0,s[i+16>>2]|0,s[i+20>>2]|0,s[i+24>>2]|0,+ +c[i+32>>3],+ +c[i+40>>3],+ +c[i+48>>3],+ +c[i+56>>3],+ +c[i+64>>3],+ +c[i+72>>3],+ +c[i+80>>3],+ +c[i+88>>3],+ +c[i+96>>3],+ +c[i+104>>3],+ +c[i+112>>3],+ +c[i+120>>3],+ +c[i+128>>3],+ +c[i+136>>3],+ +c[i+144>>3],+ +c[i+152>>3],+ +c[i+160>>3],+ +c[i+168>>3],+ +c[i+176>>3],+ +c[i+184>>3],+ +c[i+192>>3],+ +c[i+200>>3],+ +c[i+208>>3],+ +c[i+216>>3],+ +c[i+224>>3],s[i+240>>2]|0)|0;i=0;break}else{i=s[523]|0;break}}else i=s[522]|0}while(0);d=r;return i|0}function Bo(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0,n=0,o=0,l=0;o=d;d=d+16|0;n=o+8|0;a=o+12|0;r=s[525]|0;s[525]=r+1;s[a>>2]=r;a=Vo(2044,a)|0;s[a>>2]=r;s[a+204>>2]=e;s[a+208>>2]=t;l=ie(e<<2,t)|0;t=a+200|0;s[t>>2]=l;e=a+196|0;s[e>>2]=zs(l)|0;l=$u()|0;s[a+216>>2]=l;if(!l)en(3,8285,o);so(r,i)|0;s[n>>2]=s[t>>2];en(1,8322,n);Lt(2,s[a>>2]|0,s[e>>2]|0,s[t>>2]|0,a+264|0,264)|0;d=o;return s[a>>2]|0}function Uo(e){e=e|0;var t=0;e=d;d=d+16|0;t=e;Xo(8591,7);Zo(8597,3);el(8606,2);el(8617,3);tl(8633,4);Zo(8651,4);il(8671,5);Xo(8683,8);tl(8700,5);Xo(8720,9);Xo(8738,10);tl(8760,6);tl(8783,7);Zo(8812,6);Zo(8825,7);Xo(8838,11);tl(8857,8);tl(8867,9);Zo(8880,8);Zo(8893,9);rl(8912,10);al(8924,1);sl(8936,1);nl(8959,1);sl(8982,2);nl(9004,2);ol(9026,1);Zo(9043,10);ol(9060,2);Zo(9073,11);ol(9086,3);Zo(9110,12);ll(9134,3);nl(9147,3);ol(9160,4);Zo(9178,13);ol(9196,5);Zo(9212,14);ol(9228,6);Zo(9245,15);ul(9262,2088);ul(9291,2096);ul(9319,2092);Pt(9352,680,0);Pt(9369,680,1);Pt(9385,680,0);Pt(9407,680,0);Pt(9432,680,1);Pt(9457,680,1);Pt(9482,680,100);Pt(9509,680,0);Pt(9535,680,1);Pt(9561,680,0);Pt(9588,680,0);Pt(9615,680,1);Pt(9641,680,2);Pt(9666,680,3);Pt(9704,680,4);Pt(9741,680,0);Pt(9775,680,0);Pt(9799,680,1);Pt(9825,680,2);Pt(9852,680,2);Pt(9886,680,5);c[t>>3]=.5;cl(9904,t);Pt(9925,680,0);Pt(9944,680,1);Pt(9962,680,2);Pt(9980,680,3);Pt(9999,680,4);Pt(10021,680,3);Pt(10040,680,515);Pt(10069,680,259);Pt(10097,680,4);Pt(10116,680,772);Pt(10146,680,1028);Pt(10176,680,0);Pt(10207,680,1);Pt(10243,680,2);Pt(10277,680,3);Pt(10315,680,0);Pt(10348,680,1);Pt(10395,680,2);Pt(10437,680,3);Pt(10480,680,4);Pt(10532,680,5);Pt(10583,680,6);Pt(10628,680,7);Pt(10667,680,8);Pt(10712,680,9);d=e;return}function Qo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0;i=s[t>>2]|0;a=s[e+4>>2]|0;e:do{if(a){n=a+-1|0;o=(n&a|0)==0;if(o)r=n&i;else r=(i>>>0)%(a>>>0)|0;t=s[(s[e>>2]|0)+(r<<2)>>2]|0;if(t)do{t=s[t>>2]|0;if(!t){t=0;break e}e=s[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(a>>>0)|0;if((e|0)!=(r|0)){t=0;break e}}while((s[t+8>>2]|0)!=(i|0));else t=0}else t=0}while(0);return t|0}function Vo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0;n=d;d=d+32|0;a=n+8|0;r=n;i=Qo(e,t)|0;if(!i){br(a,e,t);gr(r,e,s[a>>2]|0);i=s[r>>2]|0;s[a>>2]=0}d=n;return i+16|0}function Yo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;i=a+4|0;r=a;t=Qo(e,t)|0;if(!t)t=0;else{s[r>>2]=t;s[i>>2]=s[r>>2];pr(e,i)|0;t=1}d=a;return t|0}function Wo(e){e=e|0;var t=0,i=0;i=s[e>>2]|0;if(i){t=e+4|0;e=s[t>>2]|0;if((e|0)!=(i|0)){do{e=e+-8|0}while((e|0)!=(i|0));s[t>>2]=e}Pr(i)}return}function Go(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0;n=d;d=d+32|0;a=n+8|0;r=n;i=Ko(e,t)|0;if(!i){Il(a,e,t);Ol(r,e,s[a>>2]|0);i=s[r>>2]|0;s[a>>2]=0}d=n;return i+16|0}function Ko(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0;i=s[t>>2]|0;a=s[e+4>>2]|0;e:do{if(a){n=a+-1|0;o=(n&a|0)==0;if(o)r=n&i;else r=(i>>>0)%(a>>>0)|0;t=s[(s[e>>2]|0)+(r<<2)>>2]|0;if(t)do{t=s[t>>2]|0;if(!t){t=0;break e}e=s[t+4>>2]|0;if(o)e=e&n;else e=(e>>>0)%(a>>>0)|0;if((e|0)!=(r|0)){t=0;break e}}while((s[t+8>>2]|0)!=(i|0));else t=0}else t=0}while(0);return t|0}function Jo(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0;l=d;d=d+32|0;o=l;n=e+4|0;i=s[e>>2]|0;a=((s[n>>2]|0)-i>>3)+1|0;if(a>>>0>536870911)Ar(e);r=i;i=(s[e+8>>2]|0)-r|0;if(i>>3>>>0<268435455){i=i>>2;i=i>>>0<a>>>0?a:i}else i=536870911;Ml(o,i,(s[n>>2]|0)-r>>3,e+8|0);n=o+8|0;a=s[n>>2]|0;i=t;r=s[i+4>>2]|0;t=a;s[t>>2]=s[i>>2];s[t+4>>2]=r;s[n>>2]=a+8;Pl(e,o);Rl(o);d=l;return}function Xo(e,t){e=e|0;t=t|0;Be(e|0,4,2200,10911,1,t|0);return}function Zo(e,t){e=e|0;t=t|0;Be(e|0,2,2192,10801,10,t|0);return}function el(e,t){e=e|0;t=t|0;Be(e|0,3,2180,10906,12,t|0);return}function tl(e,t){e=e|0;t=t|0;Be(e|0,3,2168,10906,13,t|0);return}function il(e,t){e=e|0;t=t|0;Be(e|0,2,2160,10801,11,t|0);return}function rl(e,t){e=e|0;t=t|0;Be(e|0,2,2152,10797,7,t|0);return}function al(e,t){e=e|0;t=t|0;Be(e|0,1,2148,10794,16,t|0);return}function sl(e,t){e=e|0;t=t|0;Be(e|0,3,2136,10789,1,t|0);return}function nl(e,t){e=e|0;t=t|0;Be(e|0,2,2128,10785,1,t|0);return}function ol(e,t){e=e|0;t=t|0;Be(e|0,3,2116,10780,1,t|0);return}function ll(e,t){e=e|0;t=t|0;Be(e|0,3,2104,10775,2,t|0);return}function ul(e,t){e=e|0;t=t|0;Pt(e|0,680,s[t>>2]|0);return}function cl(e,t){e=e|0;t=t|0;Pt(e|0,720,~~+c[t>>3]>>>0|0);return}function dl(){s[511]=0;s[512]=0;s[513]=0;s[514]=0;u[515]=1.0;St(11,2044,b|0)|0;s[516]=0;s[517]=0;s[518]=0;s[519]=0;u[520]=1.0;St(12,2064,b|0)|0;Uo(0);return}function fl(e){e=e|0;bl(e);return}function hl(e){e=e|0;pl(e);return}function pl(e){e=e|0;var t=0;ml(e,s[e+8>>2]|0);t=s[e>>2]|0;s[e>>2]=0;if(t)Pr(t);return}function ml(e,t){e=e|0;t=t|0;if(t)do{e=t;t=s[t>>2]|0;Pr(e)}while((t|0)!=0);return}function bl(e){e=e|0;var t=0;gl(e,s[e+8>>2]|0);t=s[e>>2]|0;s[e>>2]=0;if(t)Pr(t);return}function gl(e,t){e=e|0;t=t|0;if(t)do{e=t;t=s[t>>2]|0;Wo(e+264|0);Pr(e)}while((t|0)!=0);return}function vl(e,t,i){e=e|0;t=t|0;i=+i;jc[e&3](t,i);return}function wl(e,t,i){e=e|0;t=t|0;i=i|0;Qc[e&7](t,i);return}function kl(e,t){e=e|0;t=t|0;return+ +Hc[e&3](t)}function yl(e,t,i){e=e|0;t=t|0;i=+i;jc[e&3](t,i);return}function _l(e){e=e|0;return Bc[e&1]()|0}function Sl(e,t){e=e|0;t=t|0;Uc[e&15](t);return}function xl(e,t){e=e|0;t=t|0;var i=0,r=0;i=d;d=d+16|0;r=i;ql(r,t);e=Vc[e&31](r)|0;Bu(r);d=i;return e|0}function ql(e,t){e=e|0;t=t|0;Hu(e,t+4|0,s[t>>2]|0);return}function El(e,t,i){e=e|0;t=t|0;i=i|0;return Xc[e&15](t,i)|0}function Cl(e,t,i){e=e|0;t=t|0;i=i|0;var r=0,a=0;r=d;d=d+16|0;a=r;ql(a,i);e=Xc[e&15](t,a)|0;Bu(a);d=r;return e|0}function Tl(e,t){e=e|0;t=t|0;return Vc[e&31](t)|0}function Al(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return Nc[e&15](t,i,r)|0}function Ml(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;s[e+12>>2]=0;s[e+16>>2]=r;if(!t)r=0;else r=Mr(t<<3)|0;s[e>>2]=r;i=r+(i<<3)|0;s[e+8>>2]=i;s[e+4>>2]=i;s[e+12>>2]=r+(t<<3);return}function Pl(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0;r=s[e>>2]|0;n=e+4|0;i=t+4|0;a=(s[n>>2]|0)-r|0;o=(s[i>>2]|0)+(0-(a>>3)<<3)|0;s[i>>2]=o;Ku(o|0,r|0,a|0)|0;a=s[e>>2]|0;s[e>>2]=s[i>>2];s[i>>2]=a;a=t+8|0;r=s[n>>2]|0;s[n>>2]=s[a>>2];s[a>>2]=r;a=e+8|0;e=t+12|0;r=s[a>>2]|0;s[a>>2]=s[e>>2];s[e>>2]=r;s[t>>2]=s[i>>2];return}function Rl(e){e=e|0;var t=0,i=0,r=0;i=s[e+4>>2]|0;r=e+8|0;t=s[r>>2]|0;if((t|0)!=(i|0)){do{t=t+-8|0}while((t|0)!=(i|0));s[r>>2]=t}t=s[e>>2]|0;if(t)Pr(t);return}function Il(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;r=Mr(200)|0;s[r+8>>2]=s[i>>2];Vu(r+16|0,0,184)|0;s[e>>2]=r;e=e+4|0;s[e>>2]=t+8;s[e+4>>2]=257;return}function Ol(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0.0,c=0.0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0;f=s[i+8>>2]|0;v=i+4|0;s[v>>2]=f;g=t+4|0;d=s[g>>2]|0;b=(d|0)==0;e:do{if(!b){h=d+-1|0;p=(h&d|0)==0;if(p)n=h&f;else n=(f>>>0)%(d>>>0)|0;a=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!a)m=12;else while(1){o=s[a>>2]|0;if(!o){m=12;break e}a=s[o+4>>2]|0;if(p)a=a&h;else a=(a>>>0)%(d>>>0)|0;if((a|0)!=(n|0)){m=12;break e}if((s[o+8>>2]|0)==(f|0)){a=0;i=o;break}else a=o}}else{n=0;m=12}}while(0);if((m|0)==12){f=t+12|0;l=+(((s[f>>2]|0)+1|0)>>>0);c=+u[t+16>>2];do{if(b|l>+(d>>>0)*c){if(d>>>0>2)a=(d+-1&d|0)==0;else a=0;o=(a&1|d<<1)^1;a=~~+te(+(l/c))>>>0;fr(t,o>>>0<a>>>0?a:o);o=s[g>>2]|0;a=s[v>>2]|0;n=o+-1|0;if(!(n&o)){d=o;n=n&a;break}else{d=o;n=(a>>>0)%(o>>>0)|0;break}}}while(0);a=s[(s[t>>2]|0)+(n<<2)>>2]|0;if(!a){a=t+8|0;s[i>>2]=s[a>>2];s[a>>2]=i;s[(s[t>>2]|0)+(n<<2)>>2]=a;a=s[i>>2]|0;if(a){a=s[a+4>>2]|0;n=d+-1|0;if(!(n&d))a=a&n;else a=(a>>>0)%(d>>>0)|0;s[(s[t>>2]|0)+(a<<2)>>2]=i}}else{s[i>>2]=s[a>>2];s[a>>2]=i}s[f>>2]=(s[f>>2]|0)+1;a=1}s[e>>2]=i;r[e+4>>0]=a;return}function Fl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u*3|0)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+3|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+6|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function $l(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+10+(m<<5&224)+(b>>>3&28)+(b<<3&248)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Dl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<2)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+1>>0]|0)+(n[v>>0]|0)+(n[v+2>>0]|0)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+4|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+8|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Nl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){b=n[v>>0]|0;do{if(((b&240)+24+(b<<4&240)+((n[v+1>>0]|0)&240)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Ll(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<1)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){m=n[v>>0]|0;b=n[v+1>>0]|0;do{if(((m&248)+12+(m<<5&224)+(b>>>3&24)+(b<<2&248)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+2|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+4|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function zl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;m=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=m;h=m+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=o*3|0;q=t+-1|0;if((i|0)>0){u=0;o=m;f=m+(q<<1)|0;while(1){a[f>>1]=0;a[o>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{o=o+(t<<1)|0;f=f+(t<<1)|0}}}f=l+1179664|0;u=t+1|0;_=0-t|0;k=1-t|0;y=~t;e:do{if((C|0)>1){S=(q|0)>1;p=(s[l+4>>2]|0)+u|0;x=1;h=e+(u<<2)|0;e=m+(u<<1)|0;o=0;t:while(1){if(S){u=p;w=1;v=h;g=o;while(1){do{if(((n[v+2>>0]|0)+(n[v+1>>0]|0)+(n[v+3>>0]|0)|0)>(E|0)){r[u>>0]=-1;o=a[e+(_<<1)>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}p=a[e+(k<<1)>>1]|0;m=p<<16>>16;o=a[e+(y<<1)>>1]|0;b=o<<16>>16;h=o<<16>>16>0;if(p<<16>>16<=0){if(h){a[e>>1]=o;o=b*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-3<<2)|0;if((s[h>>2]|0)<(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=a[e+-2>>1]|0;if(o<<16>>16>0){a[e>>1]=o;o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;o=l+1310736+(o+-3<<2)|0;if((s[o>>2]|0)>=(w|0)){o=g;break}s[o>>2]=w;o=g;break}else{o=g+1|0;if((g|0)>32767)break t;a[e>>1]=o;s[l+1179664+(g<<2)>>2]=o<<16>>16;g=g*7|0;s[l+1310736+(g<<2)>>2]=1;s[l+1310736+(g+1<<2)>>2]=w;s[l+1310736+(g+2<<2)>>2]=x;s[l+1310736+(g+3<<2)>>2]=w;s[l+1310736+(g+4<<2)>>2]=w;s[l+1310736+(g+5<<2)>>2]=x;s[l+1310736+(g+6<<2)>>2]=x;break}}if(h){o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+(b+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;b=l+1310736+(o+-5<<2)|0;s[b>>2]=(s[b>>2]|0)+x;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}h=a[e+-2>>1]|0;if(h<<16>>16<=0){a[e>>1]=p;o=m*7|0;h=l+1310736+(o+-7<<2)|0;s[h>>2]=(s[h>>2]|0)+1;h=l+1310736+(o+-6<<2)|0;s[h>>2]=(s[h>>2]|0)+w;h=l+1310736+(o+-5<<2)|0;s[h>>2]=(s[h>>2]|0)+x;h=l+1310736+(o+-4<<2)|0;if((s[h>>2]|0)>(w|0))s[h>>2]=w;s[l+1310736+(o+-1<<2)>>2]=x;o=g;break}o=s[l+1179664+(m+-1<<2)>>2]|0;m=s[l+1179664+((h<<16>>16)+-1<<2)>>2]|0;if((o|0)>(m|0)){a[e>>1]=m;if((g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(o|0))s[p>>2]=m;h=h+1|0;if((h|0)>=(g|0)){o=m;break}else p=p+4|0}}else o=m}else{a[e>>1]=o;if((o|0)<(m|0)&(g|0)>0){h=0;p=f;while(1){if((s[p>>2]|0)==(m|0))s[p>>2]=o;h=h+1|0;if((h|0)>=(g|0))break;else p=p+4|0}}}o=(o<<16>>16)*7|0;b=l+1310736+(o+-7<<2)|0;s[b>>2]=(s[b>>2]|0)+1;b=l+1310736+(o+-6<<2)|0;s[b>>2]=(s[b>>2]|0)+w;o=l+1310736+(o+-5<<2)|0;s[o>>2]=(s[o>>2]|0)+x;o=g}else{a[e>>1]=0;r[u>>0]=0;o=g}}while(0);w=w+1|0;h=v+4|0;e=e+2|0;u=u+1|0;if((w|0)>=(q|0))break;else{v=h;g=o}}}else u=p;x=x+1|0;if((x|0)>=(C|0)){m=o;A=52;break e}else{p=u+2|0;h=h+8|0;e=e+4|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){e=l+12|0;if((m|0)<1)o=1;else{h=1;o=1;while(1){u=s[f>>2]|0;if((u|0)==(h|0)){u=o;o=o+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[f>>2]=u;if((h|0)<(m|0)){h=h+1|0;f=f+4|0}else break}}p=l+8|0;u=o+-1|0;s[p>>2]=u;if(u){Vu(e|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((o|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[p>>2]|0))}if((m|0)>0){e=0;do{f=(s[l+1179664+(e<<2)>>2]|0)+-1|0;h=e*7|0;u=l+12+(f<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(h<<2)>>2]|0);u=f<<1;o=l+655376+(u<<3)|0;c[o>>3]=+c[o>>3]+ +(s[l+1310736+(h+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(h+2<<2)>>2]|0);f=f<<2;u=l+131084+(f<<2)|0;o=s[l+1310736+(h+3<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;u=l+131084+((f|1)<<2)|0;o=s[l+1310736+(h+4<<2)>>2]|0;if((s[u>>2]|0)<(o|0))s[u>>2]=o;u=l+131084+((f|2)<<2)|0;o=s[l+1310736+(h+5<<2)>>2]|0;if((s[u>>2]|0)>(o|0))s[u>>2]=o;o=l+131084+((f|3)<<2)|0;u=s[l+1310736+(h+6<<2)>>2]|0;if((s[o>>2]|0)<(u|0))s[o>>2]=u;e=e+1|0}while((e|0)<(m|0))}if((s[p>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[p>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function jl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+u|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}else{a[p>>1]=0;r[u>>0]=0;f=v}}while(0);k=k+1|0;e=w+1|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+2|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Hl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w+1>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}else{a[p>>1]=0;r[u>>0]=0;f=v}}while(0);k=k+1|0;e=w+2|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+4|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Bl(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;u=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;m=(s[l+4>>2]|0)+u|0;q=1;e=e+(u<<1)|0;p=p+(u<<1)|0;f=0;t:while(1){if(x){u=m;k=1;w=e;v=f;while(1){do{if((n[w>>0]|0|0)>(o|0)){r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}else{a[p>>1]=0;r[u>>0]=0;f=v}}while(0);k=k+1|0;e=w+2|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}else u=m;q=q+1|0;if((q|0)>=(C|0)){b=f;A=52;break e}else{m=u+2|0;e=e+4|0;p=p+4|0}}en(3,3904,T);u=-1}else{b=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((b|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(b|0)){e=e+1|0;h=h+4|0}else break}}m=l+8|0;u=f+-1|0;s[m>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[m>>2]|0))}if((b|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(b|0))}if((s[m>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[m>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Ul(e,t,i,o,l){e=e|0;t=t|0;i=i|0;o=o|0;l=l|0;var u=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0;M=d;d=d+16|0;T=M;p=s[l>>2]|0;C=i+-1|0;if((t|0)>0){u=0;f=p;h=p+((ie(C,t)|0)<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(t|0))break;else{f=f+2|0;h=h+2|0}}}E=t+-1|0;if((i|0)>0){u=0;f=p;h=p+(E<<1)|0;while(1){a[h>>1]=0;a[f>>1]=0;u=u+1|0;if((u|0)>=(i|0))break;else{f=f+(t<<1)|0;h=h+(t<<1)|0}}}h=l+1179664|0;f=t+1|0;S=0-t|0;y=1-t|0;_=~t;e:do{if((C|0)>1){x=(E|0)>1;u=(s[l+4>>2]|0)+f|0;q=1;e=e+f|0;p=p+(f<<1)|0;o=o+f|0;f=0;t:while(1){if(x){k=1;w=e;v=f;while(1){do{if((n[w>>0]|0)>(n[o>>0]|0)){r[u>>0]=-1;f=a[p+(S<<1)>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}m=a[p+(y<<1)>>1]|0;b=m<<16>>16;f=a[p+(_<<1)>>1]|0;g=f<<16>>16;e=f<<16>>16>0;if(m<<16>>16<=0){if(e){a[p>>1]=f;f=g*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-3<<2)|0;if((s[e>>2]|0)<(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=a[p+-2>>1]|0;if(f<<16>>16>0){a[p>>1]=f;f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;f=l+1310736+(f+-3<<2)|0;if((s[f>>2]|0)>=(k|0)){f=v;break}s[f>>2]=k;f=v;break}else{f=v+1|0;if((v|0)>32767)break t;a[p>>1]=f;s[l+1179664+(v<<2)>>2]=f<<16>>16;v=v*7|0;s[l+1310736+(v<<2)>>2]=1;s[l+1310736+(v+1<<2)>>2]=k;s[l+1310736+(v+2<<2)>>2]=q;s[l+1310736+(v+3<<2)>>2]=k;s[l+1310736+(v+4<<2)>>2]=k;s[l+1310736+(v+5<<2)>>2]=q;s[l+1310736+(v+6<<2)>>2]=q;break}}if(e){f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+(g+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;g=l+1310736+(f+-5<<2)|0;s[g>>2]=(s[g>>2]|0)+q;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}e=a[p+-2>>1]|0;if(e<<16>>16<=0){a[p>>1]=m;f=b*7|0;e=l+1310736+(f+-7<<2)|0;s[e>>2]=(s[e>>2]|0)+1;e=l+1310736+(f+-6<<2)|0;s[e>>2]=(s[e>>2]|0)+k;e=l+1310736+(f+-5<<2)|0;s[e>>2]=(s[e>>2]|0)+q;e=l+1310736+(f+-4<<2)|0;if((s[e>>2]|0)>(k|0))s[e>>2]=k;s[l+1310736+(f+-1<<2)>>2]=q;f=v;break}f=s[l+1179664+(b+-1<<2)>>2]|0;b=s[l+1179664+((e<<16>>16)+-1<<2)>>2]|0;if((f|0)>(b|0)){a[p>>1]=b;if((v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(f|0))s[m>>2]=b;e=e+1|0;if((e|0)>=(v|0)){f=b;break}else m=m+4|0}}else f=b}else{a[p>>1]=f;if((f|0)<(b|0)&(v|0)>0){e=0;m=h;while(1){if((s[m>>2]|0)==(b|0))s[m>>2]=f;e=e+1|0;if((e|0)>=(v|0))break;else m=m+4|0}}}f=(f<<16>>16)*7|0;g=l+1310736+(f+-7<<2)|0;s[g>>2]=(s[g>>2]|0)+1;g=l+1310736+(f+-6<<2)|0;s[g>>2]=(s[g>>2]|0)+k;f=l+1310736+(f+-5<<2)|0;s[f>>2]=(s[f>>2]|0)+q;f=v}else{a[p>>1]=0;r[u>>0]=0;f=v}}while(0);k=k+1|0;e=w+1|0;o=o+1|0;p=p+2|0;u=u+1|0;if((k|0)>=(E|0))break;else{w=e;v=f}}}q=q+1|0;if((q|0)>=(C|0)){m=f;A=52;break e}else{u=u+2|0;e=e+2|0;p=p+4|0;o=o+2|0}}en(3,3904,T);u=-1}else{m=0;A=52}}while(0);if((A|0)==52){p=l+12|0;if((m|0)<1)f=1;else{e=1;f=1;while(1){u=s[h>>2]|0;if((u|0)==(e|0)){u=f;f=f+1|0}else u=s[l+1179664+(u+-1<<2)>>2]|0;s[h>>2]=u;if((e|0)<(m|0)){e=e+1|0;h=h+4|0}else break}}o=l+8|0;u=f+-1|0;s[o>>2]=u;if(u){Vu(p|0,0,u<<2|0)|0;Vu(l+655376|0,0,u<<4|0)|0;if((f|0)>1){u=0;do{A=u<<2;s[l+131084+(A<<2)>>2]=t;s[l+131084+((A|1)<<2)>>2]=0;s[l+131084+((A|2)<<2)>>2]=i;s[l+131084+((A|3)<<2)>>2]=0;u=u+1|0}while((u|0)<(s[o>>2]|0))}if((m|0)>0){p=0;do{h=(s[l+1179664+(p<<2)>>2]|0)+-1|0;e=p*7|0;u=l+12+(h<<2)|0;s[u>>2]=(s[u>>2]|0)+(s[l+1310736+(e<<2)>>2]|0);u=h<<1;f=l+655376+(u<<3)|0;c[f>>3]=+c[f>>3]+ +(s[l+1310736+(e+1<<2)>>2]|0);u=l+655376+((u|1)<<3)|0;c[u>>3]=+c[u>>3]+ +(s[l+1310736+(e+2<<2)>>2]|0);h=h<<2;u=l+131084+(h<<2)|0;f=s[l+1310736+(e+3<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;u=l+131084+((h|1)<<2)|0;f=s[l+1310736+(e+4<<2)>>2]|0;if((s[u>>2]|0)<(f|0))s[u>>2]=f;u=l+131084+((h|2)<<2)|0;f=s[l+1310736+(e+5<<2)>>2]|0;if((s[u>>2]|0)>(f|0))s[u>>2]=f;f=l+131084+((h|3)<<2)|0;u=s[l+1310736+(e+6<<2)>>2]|0;if((s[f>>2]|0)<(u|0))s[f>>2]=u;p=p+1|0}while((p|0)<(m|0))}if((s[o>>2]|0)>0){u=0;do{t=l+12+(u<<2)|0;i=u<<1;A=l+655376+(i<<3)|0;c[A>>3]=+c[A>>3]/+(s[t>>2]|0);i=l+655376+((i|1)<<3)|0;c[i>>3]=+c[i>>3]/+(s[t>>2]|0);u=u+1|0}while((u|0)<(s[o>>2]|0));u=0}else u=0}else u=0}d=M;return u|0}function Ql(e){e=e|0;return Vl(e+8|0)|0}function Vl(e){e=e|0;var t=0,i=0;i=d;d=d+16|0;t=zs(4)|0;if(!t){en(3,5472,i);kt(1)}e=Nn(e)|0;s[t>>2]=e;if(!e){js(t);t=0}d=i;return t|0}function Yl(e){e=e|0;var t=0;t=s[e>>2]|0;if(!t)t=-1;else{Ln(t)|0;js(s[e>>2]|0);s[e>>2]=0;t=0}return t|0}function Wl(e){e=e|0;var t=0,i=0,r=0;i=d;d=d+16|0;t=zs(7062432)|0;if(!t){en(3,5472,i);kt(1)}s[t>>2]=0;s[t+4834148>>2]=0;s[t+7062408>>2]=0;s[t+4>>2]=-1;s[t+8>>2]=0;s[t+12>>2]=1;s[t+16>>2]=100;s[t+20>>2]=0;s[t+24>>2]=0;s[t+28>>2]=2;c[t+7062416>>3]=.5;s[t+7062424>>2]=3;s[t+32>>2]=e;r=s[e>>2]|0;s[t+36>>2]=r;e=s[e+4>>2]|0;s[t+40>>2]=e;s[t+44>>2]=0;s[t+15408>>2]=0;s[t+4834152>>2]=0;s[t+4818296>>2]=0;e=zs(ie(r<<1,e)|0)|0;s[t+4834144>>2]=e;if(!e){en(3,5472,i+8|0);kt(1)}else{s[t+7062384>>2]=0;Gl(t,2)|0;Kl(t,0)|0;s[t+7062388>>2]=-1;Jl(t,0)|0;s[t+7062392>>2]=7;s[t+7062396>>2]=0;d=i;return t|0}return 0}function Gl(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0;n=d;d=d+16|0;i=n;e:do{if(e){r=e+4|0;if((s[r>>2]|0)!=(t|0)){switch(t|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{a=0;break}case 14:case 13:case 12:case 5:{a=1;break}default:{s[i>>2]=t;en(3,3936,i);i=-1;break e}}s[r>>2]=t;s[e+8>>2]=an(t)|0;i=e+7062408|0;t=s[i>>2]|0;if(t){qu(t);s[i>>2]=xu(s[e+36>>2]|0,s[e+40>>2]|0,s[r>>2]|0,0)|0}i=e+24|0;t=s[i>>2]|0;if(!a)switch(t|0){case 1:{s[i>>2]=4;i=0;break e}case 4:{s[i>>2]=3;i=0;break e}default:{i=0;break e}}else switch(t|0){case 0:{s[i>>2]=1;i=0;break e}case 3:{s[i>>2]=4;i=0;break e}default:{i=0;break e}}}else i=0}else i=-1}while(0);d=n;return i|0}function Kl(e,t){e=e|0;t=t|0;var i=0,r=0,a=0;a=d;d=d+16|0;r=a;do{if(e)if((s[e>>2]|0)!=(t|0)){s[e>>2]=t;if(!t){i=e+4834148|0;js(s[i>>2]|0);s[i>>2]=0;i=0;break}t=zs(ie(s[e+40>>2]|0,s[e+36>>2]|0)|0)|0;s[e+4834148>>2]=t;if(!t){en(3,5472,r);kt(1)}else i=0}else i=0;else i=-1}while(0);d=a;return i|0}function Jl(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0;l=d;d=d+16|0;o=l+8|0;a=l;if(e){n=e+7062388|0;if((s[n>>2]|0)!=(t|0)){i=e+7062408|0;r=s[i>>2]|0;if(r){qu(r);s[i>>2]=0}switch(t|0){case 3:case 2:case 1:{s[i>>2]=xu(s[e+36>>2]|0,s[e+40>>2]|0,s[e+4>>2]|0,0)|0;break}case 4:{s[e+7062404>>2]=1;s[e+7062400>>2]=1;t=4;break}case 0:{t=0;break}default:{en(3,3985,a);t=0}}s[n>>2]=t;if((s[e>>2]|0)==1){s[o>>2]=s[760+(t<<2)>>2];en(3,4059,o);t=0}else t=0}else t=0}else t=-1;d=l;return t|0}function Xl(e){e=e|0;var t=0,i=0;if(!e)t=-1;else{t=e+7062408|0;i=s[t>>2]|0;if(i){qu(i);s[t>>2]=0}js(s[e+4834144>>2]|0);js(s[e+4834148>>2]|0);js(e);t=0}return t|0}function Zl(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e>>2];e=0}else e=-1;return e|0}function eu(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){s[e+12>>2]=t;e=0}else e=-1;return e|0}function tu(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+12>>2];e=0}else e=-1;return e|0}function iu(e,t){e=e|0;t=t|0;if((e|0)==0|t>>>0>255)e=-1;else{s[e+16>>2]=t;e=0}return e|0}function ru(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+16>>2];e=0}else e=-1;return e|0}function au(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+7062388>>2];e=0}else e=-1;return e|0}function su(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<2){s[e+20>>2]=t;e=0}else e=-1;return e|0}function nu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[t>>2]=s[e+20>>2];e=0}return e|0}function ou(e,t){e=e|0;t=t|0;if((e|0)!=0&t>>>0<5){s[e+24>>2]=t;e=0}else e=-1;return e|0}function lu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[e+7062424>>2]=t;e=0}return e|0}function uu(e,t){e=e|0;t=t|0;if((e|0)!=0&(t|0)!=0){s[t>>2]=s[e+7062424>>2];e=0}else e=-1;return e|0}function cu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{s[t>>2]=s[e+24>>2];e=0}return e|0}function du(e,t){e=e|0;t=+t;if((e|0)!=0?!(t<=0.0|t>=1.0):0){c[e+7062416>>3]=t;e=0}else e=-1;return e|0}function fu(e,t){e=e|0;t=t|0;if(!e)e=-1;else{c[t>>3]=+c[e+7062416>>3];e=0}return e|0}function hu(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,o=0.0,l=0,u=0,f=0,h=0.0,p=0.0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0,N=0,L=0,z=0.0,j=0,H=0,B=0.0,U=0.0;H=d;d=d+80|0;N=H+32|0;R=H+24|0;q=H;x=H+52|0;A=H+40|0;D=H+64|0;j=e+44|0;s[j>>2]=0;F=e+7062388|0;r=s[F>>2]|0;e:do{if((r|0)==4){O=e+7062396|0;i=s[O>>2]|0;do{if((i|0)>0){r=4;i=i+-1|0}else{T=e+16|0;P=s[T>>2]|0;M=e+7062400|0;E=(s[M>>2]|0)+P|0;E=(E|0)>255?255:E;s[x>>2]=E;I=e+7062404|0;C=P-(s[I>>2]|0)|0;C=(C|0)<0?0:C;s[x+4>>2]=C;s[x+8>>2]=P;i=e+36|0;r=e+40|0;a=e+4|0;l=e+12|0;u=e+20|0;f=e+4834144|0;m=e+15416|0;b=e+15408|0;g=e+7062384|0;v=e+24|0;w=e+32|0;k=e+7062416|0;y=e+48|0;_=e+7062424|0;S=0;do{if((Iu(t,s[i>>2]|0,s[r>>2]|0,s[a>>2]|0,s[e>>2]|0,s[l>>2]|0,s[x+(S<<2)>>2]|0,s[u>>2]|0,f,0)|0)<0){i=-1;break e}if((mu(s[i>>2]|0,s[r>>2]|0,f,s[u>>2]|0,1e6,70,1.0,m,b)|0)<0){i=-1;break e}if((wu(t,s[i>>2]|0,s[r>>2]|0,s[a>>2]|0,m,s[b>>2]|0,s[g>>2]|0,s[u>>2]|0,s[v>>2]|0,(s[w>>2]|0)+184|0,+c[k>>3],y,j,s[_>>2]|0)|0)<0){i=-1;break e}s[A+(S<<2)>>2]=s[j>>2];S=S+1|0}while((S|0)<3);if((s[e>>2]|0)==1){L=s[A+4>>2]|0;a=s[A+8>>2]|0;r=s[A>>2]|0;s[q>>2]=C;s[q+4>>2]=L;s[q+8>>2]=P;s[q+12>>2]=a;s[q+16>>2]=E;s[q+20>>2]=r;en(3,4153,q)}else{r=s[A>>2]|0;a=s[A+8>>2]|0}i=s[A+4>>2]|0;if((r|0)>(a|0)|(i|0)>(a|0)){r=(r|0)>=(i|0)?E:C;s[T>>2]=r;i=r-P|0;if((i|0)>0){s[M>>2]=i;i=1}else{s[M>>2]=1;i=0-i|0}s[I>>2]=i;if((s[e>>2]|0)==1){s[R>>2]=r;en(3,4229,R)}r=s[F>>2]|0;i=s[e+7062392>>2]|0;break}i=s[M>>2]|0;r=s[I>>2]|0;do{if((i|0)>=(r|0))if((i|0)>(r|0)){s[I>>2]=r+1;break}else{i=i+1|0;s[M>>2]=i;s[I>>2]=r+1;break}else{i=i+1|0;s[M>>2]=i}}while(0);if((i+P|0)>254){s[M>>2]=1;i=1}if((P|0)<=(i|0))s[I>>2]=1;s[O>>2]=s[e+7062392>>2];L=47;break e}}while(0);s[O>>2]=i;L=30}else L=30}while(0);e:do{if((L|0)==30){t:do{switch(r|0){case 3:{r=e+7062408|0;i=Ru(s[r>>2]|0,t,9,-7)|0;if((i|0)<0)break e;i=s[r>>2]|0;r=e+4834144|0;i=Iu(s[i>>2]|0,s[i+8>>2]|0,s[i+12>>2]|0,5,s[e>>2]|0,s[e+12>>2]|0,0,0,r,s[i+4>>2]|0)|0;if((i|0)<0)break e;i=e+36|0;a=e+40|0;l=e+20|0;break}case 2:case 1:{a=e+7062396|0;i=s[a>>2]|0;if((i|0)>0){s[a>>2]=i+-1;L=44;break t}i=s[e+7062408>>2]|0;if((r|0)==1)i=Mu(i,t,D)|0;else i=Pu(i,t,D)|0;if((i|0)<0)break e;i=e+16|0;if((s[e>>2]|0)==1?($=n[D>>0]|0,(s[i>>2]|0)!=($|0)):0){s[N>>2]=(s[F>>2]|0)==1?4281:4288;s[N+4>>2]=$;en(3,4293,N)}s[i>>2]=n[D>>0];s[a>>2]=s[e+7062392>>2];L=44;break}default:L=44}}while(0);if((L|0)==44){i=e+36|0;a=e+40|0;l=e+20|0;r=e+4834144|0;if((Iu(t,s[i>>2]|0,s[a>>2]|0,s[e+4>>2]|0,s[e>>2]|0,s[e+12>>2]|0,s[e+16>>2]|0,s[l>>2]|0,r,0)|0)<0){i=-1;break}}u=e+15416|0;f=e+15408|0;if((mu(s[i>>2]|0,s[a>>2]|0,r,s[l>>2]|0,1e6,70,1.0,u,f)|0)>=0?(wu(t,s[i>>2]|0,s[a>>2]|0,s[e+4>>2]|0,u,s[f>>2]|0,s[e+7062384>>2]|0,s[l>>2]|0,s[e+24>>2]|0,(s[e+32>>2]|0)+184|0,+c[e+7062416>>3],e+48|0,j,s[e+7062424>>2]|0)|0)>=0:0)L=47;else i=-1}}while(0);e:do{if((L|0)==47){w=e+28|0;if((s[w>>2]|0)==1){pu(e);i=0;break}k=e+4818296|0;g=e+24|0;b=s[k>>2]|0;if((b|0)>0){v=0;do{r=s[j>>2]|0;a=e+4818304+(v*264|0)+56|0;l=e+4818304+(v*264|0)+64|0;if((r|0)>0){p=+(s[e+4818304+(v*264|0)>>2]|0);i=-1;u=0;h=.5;while(1){o=+(s[e+48+(u<<8)>>2]|0);B=p/o;if(!(B<.7|B>1.43)?(B=+c[e+48+(u<<8)+56>>3]-+c[a>>3],z=+c[e+48+(u<<8)+64>>3]-+c[l>>3],z=(B*B+z*z)/o,z<h):0){i=u;o=z}else o=h;u=u+1|0;if((u|0)>=(r|0)){m=i;break}else h=o}}else m=-1;t:do{if((m|0)>-1){f=s[g>>2]|0;switch(f|0){case 2:case 1:case 0:break;case 4:case 3:{a=e+48+(m<<8)+40|0;o=+c[e+4818304+(v*264|0)+40>>3];if(!(+c[a>>3]<o)){i=e+48+(m<<8)+48|0;r=e+4818304+(v*264|0)+48|0;if(!(+c[i>>3]<+c[r>>3]))break t}else{r=e+4818304+(v*264|0)+48|0;i=e+48+(m<<8)+48|0}c[a>>3]=o;s[e+48+(m<<8)+8>>2]=s[e+4818304+(v*264|0)+8>>2];c[i>>3]=+c[r>>3];s[e+48+(m<<8)+12>>2]=s[e+4818304+(v*264|0)+12>>2];i=-1;h=1.0e8;a=0;while(1){o=0.0;r=0;do{t=(r+a|0)%4|0;p=+c[e+4818304+(v*264|0)+168+(r<<4)>>3]-+c[e+48+(m<<8)+168+(t<<4)>>3];B=+c[e+4818304+(v*264|0)+168+(r<<4)+8>>3]-+c[e+48+(m<<8)+168+(t<<4)+8>>3];o=o+(p*p+B*B);r=r+1|0}while((r|0)!=4);r=o<h;i=r?a:i;a=a+1|0;if((a|0)==4)break;else h=r?o:h}t=4-i|0;s[e+48+(m<<8)+20>>2]=(t+(s[e+4818304+(v*264|0)+20>>2]|0)|0)%4|0;s[e+48+(m<<8)+24>>2]=(t+(s[e+4818304+(v*264|0)+24>>2]|0)|0)%4|0;break t}default:{i=-1;break e}}i=e+48+(m<<8)+32|0;p=+c[e+4818304+(v*264|0)+32>>3];if(+c[i>>3]<p){c[i>>3]=p;u=s[e+4818304+(v*264|0)+4>>2]|0;s[e+48+(m<<8)+4>>2]=u;a=e+4818304+(v*264|0)+16|0;i=-1;h=1.0e8;l=0;while(1){o=0.0;r=0;do{t=(r+l|0)%4|0;U=+c[e+4818304+(v*264|0)+168+(r<<4)>>3]-+c[e+48+(m<<8)+168+(t<<4)>>3];B=+c[e+4818304+(v*264|0)+168+(r<<4)+8>>3]-+c[e+48+(m<<8)+168+(t<<4)+8>>3];o=o+(U*U+B*B);r=r+1|0}while((r|0)!=4);if(o<h)i=(4-l+(s[a>>2]|0)|0)%4|0;else o=h;l=l+1|0;if((l|0)==4)break;else h=o}s[e+48+(m<<8)+16>>2]=i;if(f>>>0<2){s[e+48+(m<<8)+8>>2]=u;c[e+48+(m<<8)+40>>3]=p;s[e+48+(m<<8)+20>>2]=i;break}else{s[e+48+(m<<8)+12>>2]=u;c[e+48+(m<<8)+48>>3]=p;s[e+48+(m<<8)+24>>2]=i;break}}}}while(0);v=v+1|0}while((v|0)<(b|0))}pu(e);if((s[k>>2]|0)>0){a=0;i=0;do{r=e+4818304+(a*264|0)|0;L=e+4818304+(a*264|0)+256|0;t=(s[L>>2]|0)+1|0;s[L>>2]=t;if((t|0)<4){if((a|0)!=(i|0))Ku(e+4818304+(i*264|0)|0,r|0,264)|0;i=i+1|0}a=a+1|0}while((a|0)<(s[k>>2]|0))}else i=0;s[k>>2]=i;i=s[j>>2]|0;t:do{if((i|0)>0){f=0;do{l=e+48+(f<<8)|0;a=s[e+48+(f<<8)+4>>2]|0;if((a|0)>=0){u=s[k>>2]|0;i:do{if((u|0)>0){r=0;do{if((s[e+4818304+(r*264|0)+4>>2]|0)==(a|0))break i;r=r+1|0}while((r|0)<(u|0))}else r=0}while(0);if((r|0)==(u|0)){if((u|0)==60)break t;s[k>>2]=u+1}Ku(e+4818304+(r*264|0)|0,l|0,256)|0;s[e+4818304+(r*264|0)+256>>2]=1}f=f+1|0;i=s[j>>2]|0}while((f|0)<(i|0))}}while(0);if((s[w>>2]|0)!=2?(s[k>>2]|0)>0:0){u=0;while(1){a=e+4818304+(u*264|0)+56|0;l=e+4818304+(u*264|0)+64|0;t:do{if((i|0)>0){h=+(s[e+4818304+(u*264|0)>>2]|0);r=0;do{o=+(s[e+48+(r<<8)>>2]|0);U=h/o;if(!(U<.7|U>1.43)?(B=+c[e+48+(r<<8)+56>>3]-+c[a>>3],U=+c[e+48+(r<<8)+64>>3]-+c[l>>3],(B*B+U*U)/o<.5):0)break t;r=r+1|0}while((r|0)<(i|0))}else r=0}while(0);if((r|0)==(i|0)){Ku(e+48+(i<<8)|0,e+4818304+(u*264|0)|0,256)|0;i=(s[j>>2]|0)+1|0;s[j>>2]=i}u=u+1|0;if((u|0)>=(s[k>>2]|0)){i=0;break}}}else i=0}}while(0);d=H;return i|0}function pu(e){e=e|0;var t=0,i=0,r=0,a=0;switch(s[e+24>>2]|0){case 1:case 0:{i=s[e+44>>2]|0;if((i|0)>0){r=0;do{t=e+48+(r<<8)+4|0;if((s[t>>2]|0)>-1?+c[e+48+(r<<8)+32>>3]<.5:0){s[e+48+(r<<8)+8>>2]=-1;s[t>>2]=-1;s[e+48+(r<<8)+236>>2]=6}r=r+1|0}while((r|0)<(i|0))}break}case 2:{i=s[e+44>>2]|0;if((i|0)>0){r=0;do{t=e+48+(r<<8)+4|0;if((s[t>>2]|0)>-1?+c[e+48+(r<<8)+32>>3]<.5:0){s[e+48+(r<<8)+12>>2]=-1;s[t>>2]=-1;s[e+48+(r<<8)+236>>2]=6}r=r+1|0}while((r|0)<(i|0))}break}default:{r=s[e+44>>2]|0;if((r|0)>0){a=0;do{t=e+48+(a<<8)+8|0;if((s[t>>2]|0)>-1?+c[e+48+(a<<8)+40>>3]<.5:0){s[t>>2]=-1;i=0}else i=1;t=e+48+(a<<8)+12|0;if(((s[t>>2]|0)>-1?+c[e+48+(a<<8)+48>>3]<.5:0)?(s[t>>2]=-1,(i|0)==0):0)s[e+48+(a<<8)+236>>2]=6;a=a+1|0}while((a|0)<(r|0))}}}return}function mu(e,t,i,r,a,n,o,l,u){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;o=+o;l=l|0;u=u|0;var f=0.0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0,N=0.0;D=d;d=d+96|0;P=D+56|0;I=D+48|0;R=D+8|0;O=D;$=(r|0)==1;if($){e=(e|0)/2|0;t=(t|0)/2|0;a=(a|0)/4|0;n=(n|0)/4|0}s[u>>2]=0;T=i+8|0;A=e+-2|0;q=t+-2|0;E=i+1179664|0;e:do{if((s[T>>2]|0)>0){C=0;while(1){_=i+12+(C<<2)|0;x=s[_>>2]|0;t:do{if(((((!((x|0)<(n|0)|(x|0)>(a|0))?(M=i+131084+(C<<4)|0,(s[M>>2]|0)!=1):0)?(s[i+131084+(C<<4)+4>>2]|0)!=(A|0):0)?(s[i+131084+(C<<4)+8>>2]|0)!=1:0)?(s[i+131084+(C<<4)+12>>2]|0)!=(q|0):0)?(bu(s[i>>2]|0,e,0,E,C+1|0,M,l+((s[u>>2]|0)*80048|0)|0)|0)>=0:0){w=s[_>>2]|0;S=s[u>>2]|0;k=l+(S*80048|0)+28|0;t=s[k>>2]|0;y=l+(S*80048|0)+40028|0;h=s[y>>2]|0;x=l+(S*80048|0)+24|0;p=(s[x>>2]|0)+-1|0;if((p|0)>1){g=0;v=1;r=0;while(1){m=(s[l+(S*80048|0)+28+(v<<2)>>2]|0)-t|0;m=ie(m,m)|0;b=(s[l+(S*80048|0)+40028+(v<<2)>>2]|0)-h|0;m=(ie(b,b)|0)+m|0;b=(m|0)>(g|0);r=b?v:r;v=v+1|0;if((v|0)>=(p|0))break;else g=b?m:g}}else r=0;f=+(w|0)/.75*.01*o;s[I>>2]=0;s[O>>2]=0;i:do{if((gu(k,y,0,r,f,P,I)|0)>=0?(gu(k,y,r,(s[x>>2]|0)+-1|0,f,R,O)|0)>=0:0){t=s[I>>2]|0;h=s[O>>2]|0;do{if((t|0)==1&(h|0)==1){t=s[R>>2]|0;h=s[P>>2]|0}else{if((t|0)>1&(h|0)==0){t=(r|0)/2|0;s[O>>2]=0;s[I>>2]=0;if((gu(k,y,0,t,f,P,I)|0)<0)break i;if((gu(k,y,t,r,f,R,O)|0)<0)break i;if(!((s[I>>2]|0)==1&(s[O>>2]|0)==1))break i;t=r;h=s[P>>2]|0;r=s[R>>2]|0;break}if(!((t|0)==0&(h|0)>1))break i;t=(r+-1+(s[x>>2]|0)|0)/2|0;s[O>>2]=0;s[I>>2]=0;if((gu(k,y,r,t,f,P,I)|0)<0)break i;if((gu(k,y,t,(s[x>>2]|0)+-1|0,f,R,O)|0)<0)break i;if(!((s[I>>2]|0)==1&(s[O>>2]|0)==1))break i;t=s[R>>2]|0;h=r;r=s[P>>2]|0}}while(0);s[l+(S*80048|0)+80028>>2]=0;s[l+(S*80048|0)+80032>>2]=h;s[l+(S*80048|0)+80036>>2]=r;s[l+(S*80048|0)+80040>>2]=t;s[l+(S*80048|0)+80044>>2]=(s[x>>2]|0)+-1;s[l+((s[u>>2]|0)*80048|0)>>2]=s[_>>2];x=s[u>>2]|0;c[l+(x*80048|0)+8>>3]=+c[i+655376+(C<<4)>>3];c[l+(x*80048|0)+16>>3]=+c[i+655376+(C<<4)+8>>3];x=x+1|0;s[u>>2]=x;if((x|0)==60){r=60;break e}else break t}}while(0)}}while(0);C=C+1|0;if((C|0)>=(s[T>>2]|0)){F=4;break}}}else F=4}while(0);if((F|0)==4)r=s[u>>2]|0;if((r|0)>0){p=0;do{e=p;p=p+1|0;n=l+(e*80048|0)+16|0;h=l+(e*80048|0)|0;if((p|0)<(r|0)){o=+c[l+(e*80048|0)+8>>3];a=p;do{N=o-+c[l+(a*80048|0)+8>>3];f=+c[n>>3]-+c[l+(a*80048|0)+16>>3];f=N*N+f*f;r=s[h>>2]|0;e=l+(a*80048|0)|0;t=s[e>>2]|0;if((r|0)>(t|0)){if(f<+((r|0)/4|0|0))s[e>>2]=0}else if(f<+((t|0)/4|0|0))s[h>>2]=0;a=a+1|0;r=s[u>>2]|0}while((a|0)<(r|0))}}while((p|0)<(r|0))}if((r|0)>0){a=0;do{if(!(s[l+(a*80048|0)>>2]|0)){e=a+1|0;if((e|0)<(r|0)){r=a;t=e;while(1){Ku(l+(r*80048|0)|0,l+(t*80048|0)|0,80048)|0;r=s[u>>2]|0;e=t+1|0;if((e|0)<(r|0)){r=t;t=e}else break}}r=r+-1|0;s[u>>2]=r}a=a+1|0}while((a|0)<(r|0))}if($&(r|0)>0){t=0;while(1){s[l>>2]=s[l>>2]<<2;r=l+8|0;c[r>>3]=+c[r>>3]*2.0;r=l+16|0;c[r>>3]=+c[r>>3]*2.0;r=l+24|0;if((s[r>>2]|0)>0){e=0;do{$=l+28+(e<<2)|0;s[$>>2]=s[$>>2]<<1;$=l+40028+(e<<2)|0;s[$>>2]=s[$>>2]<<1;e=e+1|0}while((e|0)<(s[r>>2]|0))}t=t+1|0;if((t|0)>=(s[u>>2]|0))break;else l=l+80048|0}}d=D;return 0}function bu(e,t,i,r,n,o,l){e=e|0;t=t|0;i=i|0;r=r|0;n=n|0;o=o|0;l=l|0;var u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0;_=d;d=d+80032|0;m=_+16|0;p=_+8|0;c=_;k=_+40024|0;y=_+24|0;w=s[o+8>>2]|0;i=s[o>>2]|0;o=s[o+4>>2]|0;e:do{if((i|0)<=(o|0)){u=i;i=e+((ie(w,t)|0)+i<<1)|0;while(1){v=a[i>>1]|0;if(v<<16>>16>0?(s[r+((v<<16>>16)+-1<<2)>>2]|0)==(n|0):0){h=u;break}if((u|0)<(o|0)){u=u+1|0;i=i+2|0}else{S=6;break e}}b=l+24|0;s[b>>2]=1;g=l+28|0;s[g>>2]=h;v=l+40028|0;s[v>>2]=w;r=w;f=h;u=1;i=5;while(1){o=(i+5|0)%8|0;i=0;while(1){n=s[776+(o<<2)>>2]|0;c=s[808+(o<<2)>>2]|0;if((a[e+(c+f+(ie(n+r|0,t)|0)<<1)>>1]|0)>0){i=n;n=o;break}i=i+1|0;o=(o+1|0)%8|0;if((i|0)>=8){S=11;break}}if((S|0)==11){S=0;if((i|0)==8){S=13;break}c=s[808+(o<<2)>>2]|0;i=s[776+(o<<2)>>2]|0;n=o}s[l+28+(u<<2)>>2]=c+f;o=s[b>>2]|0;s[l+40028+(o<<2)>>2]=i+(s[l+40028+(o+-1<<2)>>2]|0);i=s[b>>2]|0;o=l+28+(i<<2)|0;if((s[o>>2]|0)==(h|0)?(s[l+40028+(i<<2)>>2]|0)==(w|0):0){r=i;S=16;break}u=i+1|0;s[b>>2]=u;if((u|0)==9999){S=19;break}r=s[l+40028+(i<<2)>>2]|0;f=s[o>>2]|0;i=n}if((S|0)==13){en(3,4347,p);i=-1;break}else if((S|0)==16){if((r|0)>1){c=0;n=1;o=0;while(1){i=(s[l+28+(n<<2)>>2]|0)-h|0;i=ie(i,i)|0;u=(s[l+40028+(n<<2)>>2]|0)-w|0;i=(ie(u,u)|0)+i|0;u=(i|0)>(c|0);o=u?n:o;n=n+1|0;if((n|0)>=(r|0))break;else c=u?i:c}}else o=0;if((o|0)>0){i=0;do{s[k+(i<<2)>>2]=s[l+28+(i<<2)>>2];s[y+(i<<2)>>2]=s[l+40028+(i<<2)>>2];i=i+1|0}while((i|0)<(o|0))}if((o|0)<(r|0)){i=o;do{w=i-o|0;s[l+28+(w<<2)>>2]=s[l+28+(i<<2)>>2];s[l+40028+(w<<2)>>2]=s[l+40028+(i<<2)>>2];i=i+1|0}while((i|0)<(s[b>>2]|0))}if((o|0)>0){i=0;do{w=i-o|0;s[l+28+((s[b>>2]|0)+w<<2)>>2]=s[k+(i<<2)>>2];s[l+40028+((s[b>>2]|0)+w<<2)>>2]=s[y+(i<<2)>>2];i=i+1|0}while((i|0)<(o|0))}s[l+28+(s[b>>2]<<2)>>2]=s[g>>2];s[l+40028+(s[b>>2]<<2)>>2]=s[v>>2];s[b>>2]=(s[b>>2]|0)+1;i=0;break}else if((S|0)==19){en(3,4354,m);i=-1;break}}else S=6}while(0);if((S|0)==6){en(3,4340,c);i=-1}d=_;return i|0}function gu(e,t,i,r,a,n,o){e=e|0;t=t|0;i=i|0;r=r|0;a=+a;n=n|0;o=o|0;var l=0,u=0.0,c=0.0,d=0,f=0.0,h=0,p=0.0,m=0,b=0,g=0,v=0.0;l=s[t+(r<<2)>>2]|0;b=s[t+(i<<2)>>2]|0;p=+(l-b|0);d=s[e+(i<<2)>>2]|0;g=s[e+(r<<2)>>2]|0;f=+(d-g|0);c=+((ie(g,b)|0)-(ie(d,l)|0)|0);l=i+1|0;if((l|0)<(r|0)){u=0.0;d=l;do{v=c+(p*+(s[e+(d<<2)>>2]|0)+f*+(s[t+(d<<2)>>2]|0));v=v*v;g=v>u;u=g?v:u;l=g?d:l;d=d+1|0}while((d|0)<(r|0))}else u=0.0;if(u/(p*p+f*f)>a)if(((gu(e,t,i,l,a,n,o)|0)>=0?(h=s[o>>2]|0,(h|0)<=5):0)?(s[n+(h<<2)>>2]=l,s[o>>2]=(s[o>>2]|0)+1,(gu(e,t,l,r,a,n,o)|0)>=0):0)m=7;else l=-1;else m=7;if((m|0)==7)l=0;return l|0}function vu(e,t,i,r,a,n,o){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;o=o|0;var l=0,f=0.0,h=0,p=0.0,m=0.0,b=0,g=0,v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0;x=d;d=d+16|0;w=x+4|0;k=x;y=An(2)|0;_=An(2)|0;S=nn(2,2)|0;b=0;e:while(1){g=b;b=b+1|0;v=s[r+(b<<2)>>2]|0;l=s[r+(g<<2)>>2]|0;m=+(v+1-l|0)*.05+.5;l=~~(+(l|0)+m);v=~~(+(v|0)-m)-l|0;h=v+1|0;i=nn(h,2)|0;if((v|0)>-1){v=0;do{q=v+l|0;if((Tn(a,+(s[e+(q<<2)>>2]|0),+(s[t+(q<<2)>>2]|0),w,k)|0)<0){l=10;break e}q=v<<1;E=s[i>>2]|0;c[E+(q<<3)>>3]=+u[w>>2];c[E+((q|1)<<3)>>3]=+u[k>>2];v=v+1|0}while((v|0)<(h|0))}if((hn(i,S,y,_)|0)<0){l=10;break}E=s[S>>2]|0;p=+c[E+8>>3];c[n+(g*24|0)>>3]=p;m=-+c[E>>3];c[n+(g*24|0)+8>>3]=m;E=s[_>>2]|0;c[n+(g*24|0)+16>>3]=-(p*+c[E>>3]+ +c[E+8>>3]*m);dn(i)|0;if((b|0)>=4){l=7;break}}e:do{if((l|0)==7){dn(S)|0;Mn(_)|0;Mn(y)|0;b=0;while(1){i=(b+3|0)%4|0;l=n+(i*24|0)|0;f=+c[n+(b*24|0)+8>>3];h=n+(b*24|0)|0;p=+c[n+(i*24|0)+8>>3];m=+c[l>>3]*f-+c[h>>3]*p;if(+B(+m)<.0001){i=-1;break e}E=n+(b*24|0)+16|0;q=n+(i*24|0)+16|0;c[o+(b<<4)>>3]=(p*+c[E>>3]-f*+c[q>>3])/m;c[o+(b<<4)+8>>3]=(+c[h>>3]*+c[q>>3]-+c[l>>3]*+c[E>>3])/m;b=b+1|0;if((b|0)>=4){i=0;break}}}else if((l|0)==10){dn(i)|0;dn(S)|0;Mn(_)|0;Mn(y)|0;i=-1}}while(0);d=x;return i|0}function wu(e,t,i,r,a,n,o,l,f,h,p,m,b,g){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;o=o|0;l=l|0;f=f|0;h=h|0;p=+p;m=m|0;b=b|0;g=g|0;var v=0,w=0,k=0,y=0,_=0,S=0,x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0;P=d;d=d+16|0;A=P+4|0;M=P;q=f>>>0<2;E=(f|0)==2;if((n|0)>0){T=0;v=0;do{s[m+(v<<8)>>2]=s[a+(T*80048|0)>>2];if((Tn(h,+c[a+(T*80048|0)+8>>3],+c[a+(T*80048|0)+16>>3],A,M)|0)>=0?(c[m+(v<<8)+56>>3]=+u[A>>2],c[m+(v<<8)+64>>3]=+u[M>>2],C=m+(v<<8)+168|0,(vu(a+(T*80048|0)+28|0,a+(T*80048|0)+40028|0,s[a+(T*80048|0)+24>>2]|0,a+(T*80048|0)+80028|0,h,m+(v<<8)+72|0,C)|0)>=0):0){w=m+(v<<8)+8|0;k=m+(v<<8)+20|0;y=m+(v<<8)+40|0;_=m+(v<<8)+12|0;S=m+(v<<8)+24|0;x=m+(v<<8)+48|0;switch(Lu(o,l,f,e,t,i,r,h,C,p,w,k,y,_,S,x,g,m+(v<<8)+240|0,m+(v<<8)+248|0)|0){case 0:{s[m+(v<<8)+236>>2]=0;break}case-1:{s[m+(v<<8)+236>>2]=2;break}case-2:{s[m+(v<<8)+236>>2]=3;break}case-3:{s[m+(v<<8)+236>>2]=4;break}case-4:{s[m+(v<<8)+236>>2]=5;break}case-5:{s[m+(v<<8)+236>>2]=9;break}case-6:{s[m+(v<<8)+236>>2]=1;break}default:{}}if(!q){if(E){s[m+(v<<8)+4>>2]=s[_>>2];s[m+(v<<8)+16>>2]=s[S>>2];c[m+(v<<8)+32>>3]=+c[x>>3]}}else{s[m+(v<<8)+4>>2]=s[w>>2];s[m+(v<<8)+16>>2]=s[k>>2];c[m+(v<<8)+32>>3]=+c[y>>3]}v=v+1|0}T=T+1|0}while((T|0)<(n|0))}else v=0;s[b>>2]=v;d=P;return 0}function ku(e,t,i,r){e=e|0;t=t|0;i=+i;r=r|0;var a=0,n=0,o=0,l=0,u=0,f=0,h=0.0,p=0,m=0;l=d;d=d+288|0;f=l+200|0;u=l+104|0;a=l+264|0;o=l+8|0;n=l;p=s[t+16>>2]|0;m=(4-p|0)%4|0;c[f>>3]=+c[t+168+(m<<4)>>3];c[f+8>>3]=+c[t+168+(m<<4)+8>>3];m=(5-p|0)%4|0;c[f+16>>3]=+c[t+168+(m<<4)>>3];c[f+24>>3]=+c[t+168+(m<<4)+8>>3];m=(6-p|0)%4|0;c[f+32>>3]=+c[t+168+(m<<4)>>3];c[f+40>>3]=+c[t+168+(m<<4)+8>>3];p=(7-p|0)%4|0;c[f+48>>3]=+c[t+168+(p<<4)>>3];c[f+56>>3]=+c[t+168+(p<<4)+8>>3];h=i*-.5;c[u>>3]=h;i=i*.5;c[u+8>>3]=i;c[u+16>>3]=0.0;c[u+24>>3]=i;c[u+32>>3]=i;c[u+40>>3]=0.0;c[u+48>>3]=i;c[u+56>>3]=h;c[u+64>>3]=0.0;c[u+72>>3]=h;c[u+80>>3]=h;c[u+88>>3]=0.0;s[a>>2]=f;s[a+4>>2]=u;s[a+8>>2]=4;if((Vn(s[e>>2]|0,f,u,4,o)|0)<0)i=1.0e8;else{m=(jn(s[e>>2]|0,a,o,r,n)|0)<0;i=m?1.0e8:+c[n>>3]}d=l;return+i}function yu(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=+r;a=a|0;var n=0,o=0,l=0,u=0,f=0,h=0.0,p=0,m=0;o=d;d=d+192|0;f=o+104|0;u=o+8|0;l=o+168|0;n=o;p=s[t+16>>2]|0;m=(4-p|0)%4|0;c[f>>3]=+c[t+168+(m<<4)>>3];c[f+8>>3]=+c[t+168+(m<<4)+8>>3];m=(5-p|0)%4|0;c[f+16>>3]=+c[t+168+(m<<4)>>3];c[f+24>>3]=+c[t+168+(m<<4)+8>>3];m=(6-p|0)%4|0;c[f+32>>3]=+c[t+168+(m<<4)>>3];c[f+40>>3]=+c[t+168+(m<<4)+8>>3];p=(7-p|0)%4|0;c[f+48>>3]=+c[t+168+(p<<4)>>3];c[f+56>>3]=+c[t+168+(p<<4)+8>>3];h=r*-.5;c[u>>3]=h;r=r*.5;c[u+8>>3]=r;c[u+16>>3]=0.0;c[u+24>>3]=r;c[u+32>>3]=r;c[u+40>>3]=0.0;c[u+48>>3]=r;c[u+56>>3]=h;c[u+64>>3]=0.0;c[u+72>>3]=h;c[u+80>>3]=h;c[u+88>>3]=0.0;s[l>>2]=f;s[l+4>>2]=u;s[l+8>>2]=4;t=(jn(s[e>>2]|0,l,i,a,n)|0)<0;d=o;return+(t?1.0e8:+c[n>>3])}function _u(e,t,i,r,a,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;var o=0,l=0,u=0,f=0,h=0,p=0,m=0;m=d;d=d+32|0;f=m+20|0;h=m;o=zs(a<<4)|0;s[f>>2]=o;if(!o){en(3,5472,m+8|0);kt(1)}l=zs(a*24|0)|0;u=f+4|0;s[u>>2]=l;if(!l){en(3,5472,m+16|0);kt(1)}if((a|0)>0){p=0;do{c[o+(p<<4)>>3]=+c[i+(p<<4)>>3];c[o+(p<<4)+8>>3]=+c[i+(p<<4)+8>>3];c[l+(p*24|0)>>3]=+c[r+(p*24|0)>>3];c[l+(p*24|0)+8>>3]=+c[r+(p*24|0)+8>>3];c[l+(p*24|0)+16>>3]=+c[r+(p*24|0)+16>>3];p=p+1|0}while((p|0)<(a|0))}s[f+8>>2]=a;if((jn(s[e>>2]|0,f,t,n,h)|0)<0)c[h>>3]=1.0e8;js(s[f>>2]|0);js(s[u>>2]|0);d=m;return+ +c[h>>3]}function Su(e,t,i,r,a,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;n=n|0;var o=0,l=0,u=0,f=0,h=0,p=0,m=0;m=d;d=d+32|0;f=m+20|0;h=m;o=zs(a<<4)|0;s[f>>2]=o;if(!o){en(3,5472,m+8|0);kt(1)}l=zs(a*24|0)|0;u=f+4|0;s[u>>2]=l;if(!l){en(3,5472,m+16|0);kt(1)}if((a|0)>0){p=0;do{c[o+(p<<4)>>3]=+c[i+(p<<4)>>3];c[o+(p<<4)+8>>3]=+c[i+(p<<4)+8>>3];c[l+(p*24|0)>>3]=+c[r+(p*24|0)>>3];c[l+(p*24|0)+8>>3]=+c[r+(p*24|0)+8>>3];c[l+(p*24|0)+16>>3]=+c[r+(p*24|0)+16>>3];p=p+1|0}while((p|0)<(a|0))}s[f+8>>2]=a;if((Bn(s[e>>2]|0,f,t,n,h)|0)<0)c[h>>3]=1.0e8;js(s[f>>2]|0);js(s[u>>2]|0);d=m;return+ +c[h>>3]}function xu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0;a=zs(2080)|0;e:do{if(a){s[a+2068>>2]=i;t:do{if(!r){switch(i|0){case 5:case 12:case 13:case 14:break;default:{n=4;break t}}s[a+2076>>2]=0}else n=4}while(0);do{if((n|0)==4){n=zs(ie(t,e)|0)|0;s[a>>2]=n;if(!n){js(a);a=0;break e}else{s[a+2076>>2]=1;break}}}while(0);s[a+2072>>2]=r;s[a+4>>2]=0;s[a+8>>2]=e;s[a+12>>2]=t}}while(0);return a|0}function qu(e){e=e|0;if(e){if(s[e+2076>>2]|0)js(s[e>>2]|0);js(s[e+4>>2]|0);js(e)}return}function Eu(e,t){e=e|0;t=t|0;var i=0,a=0,o=0,l=0,u=0,c=0,f=0;u=d;d=d+16|0;a=u;i=s[e+2068>>2]|0;e:do{switch(i|0){case 5:case 12:case 13:case 14:if(!(s[e+2072>>2]|0)){s[e>>2]=t;i=0;break e}else{Ku(s[e>>2]|0,t|0,ie(s[e+12>>2]|0,s[e+8>>2]|0)|0)|0;i=0;break e}default:{if((i&-2|0)==2){i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(s[e>>2]|0)+o>>0]=(((n[t+(l|1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l|2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break e}else l=l+4|0}}if((i&-3|0)==4){i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(s[e>>2]|0)+o>>0]=(((n[t+(l|2)>>0]|0)+(n[t+(l|1)>>0]|0)+(n[t+(l|3)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break e}else l=l+4|0}}if(i>>>0<2){i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(s[e>>2]|0)+o>>0]=(((n[t+(l+1)>>0]|0)+(n[t+l>>0]|0)+(n[t+(l+2)>>0]|0)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break e}else l=l+3|0}}switch(i|0){case 8:{i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(s[e>>2]|0)+o>>0]=r[t+l>>0]|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 7:{i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){r[(s[e>>2]|0)+o>>0]=r[t+(l|1)>>0]|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 9:{i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){f=n[t+l>>0]|0;c=n[t+(l|1)>>0]|0;r[(s[e>>2]|0)+o>>0]=(((f&248)+10+(f<<5&224)+(c>>>3&28)+(c<<3&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 10:{i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){c=n[t+l>>0]|0;f=n[t+(l|1)>>0]|0;r[(s[e>>2]|0)+o>>0]=(((c&248)+12+(c<<5&224)+(f>>>3&24)+(f<<2&248)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}case 11:{i=e+8|0;a=e+12|0;if(!(ie(s[a>>2]|0,s[i>>2]|0)|0)){i=0;break e}else{o=0;l=0}while(1){f=n[t+l>>0]|0;r[(s[e>>2]|0)+o>>0]=(((f&240)+24+(f<<4&240)+((n[t+(l|1)>>0]|0)&240)|0)>>>0)/3|0;o=o+1|0;if(o>>>0>=(ie(s[a>>2]|0,s[i>>2]|0)|0)>>>0){i=0;break}else l=l+2|0}break}default:{en(3,4361,a);i=-1;break e}}}}}while(0);d=u;return i|0}function Cu(e,t){e=e|0;t=t|0;var i=0,r=0;if((e|0)!=0&(t|0)!=0?(Eu(e,t)|0)>=0:0){Vu(e+16|0,0,1024)|0;t=s[e>>2]|0;r=ie(s[e+12>>2]|0,s[e+8>>2]|0)|0;i=t+r|0;if((r|0)>0){do{r=e+16+((n[t>>0]|0)<<2)|0;s[r>>2]=(s[r>>2]|0)+1;t=t+1|0}while(t>>>0<i>>>0);t=0}else t=0}else t=-1;return t|0}function Tu(e,t){e=e|0;t=t|0;var i=0;t=Cu(e,t)|0;if((t|0)>=0){t=0;i=0;do{t=(s[e+16+(i<<2)>>2]|0)+t|0;s[e+1040+(i<<2)>>2]=t;i=i+1|0}while((i|0)!=256);t=0}return t|0}function Au(e,t,i,a){e=e|0;t=t|0;i=+i;a=a|0;var n=0,o=0,l=0;if(!(i<0.0|i>1.0)){t=Tu(e,t)|0;if((t|0)>=0){l=~~(+(ie(s[e+12>>2]|0,s[e+8>>2]|0)|0)*i)>>>0;t=0;while(1){o=t&255;n=s[e+1040+(o<<2)>>2]|0;if(n>>>0<l>>>0)t=t+1<<24>>24;else break}if((n|0)==(l|0))do{t=t+1<<24>>24}while((s[e+1040+((t&255)<<2)>>2]|0)==(l|0));r[a>>0]=((t&255)+o|0)>>>1;t=0}}else t=-1;return t|0}function Mu(e,t,i){e=e|0;t=t|0;i=i|0;return Au(e,t,.5,i)|0}function Pu(e,t,i){e=e|0;t=t|0;i=i|0;var a=0.0,n=0,o=0.0,l=0.0,u=0.0,c=0.0,d=0,f=0.0,h=0.0;t=Cu(e,t)|0;if((t|0)>=0){t=1;a=0.0;do{a=a+ +((ie(s[e+16+(t<<2)>>2]|0,t)|0)>>>0);t=t+1|0}while((t|0)!=256);c=+(ie(s[e+12>>2]|0,s[e+8>>2]|0)|0);d=0;o=0.0;t=0;u=0.0;f=0.0;while(1){n=s[e+16+(d<<2)>>2]|0;f=f+ +(n>>>0);if(f!=0.0){l=c-f;if(l==0.0)break;o=o+ +((ie(d,n)|0)>>>0);h=o/f-(a-o)/l;l=h*(f*l*h);if(l>u)t=d&255;else l=u}else l=u;if((d&255)<<24>>24==-1)break;else{d=d+1|0;u=l}}r[i>>0]=t;t=0}return t|0}function Ru(e,t,i,a){e=e|0;t=t|0;i=i|0;a=a|0;var o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0,b=0,g=0,v=0,w=0,k=0;t=Cu(e,t)|0;do{if((t|0)>=0){w=e+4|0;if(!(s[w>>2]|0)){t=e+8|0;o=e+12|0;v=zs(ie(s[o>>2]|0,s[t>>2]|0)|0)|0;s[w>>2]=v;if(!v){t=-1;break}else v=t}else{v=e+8|0;o=e+12|0}b=i>>1;g=0-b|0;t=s[o>>2]|0;if((t|0)>0){h=(b|0)<(g|0);p=(b|0)<(g|0);m=0;do{t=s[v>>2]|0;if((t|0)>0){f=0;do{if(h){l=0;i=0}else{l=0;d=g;i=0;while(1){u=d+m|0;if(((u|0)>=0?(u|0)<(s[o>>2]|0):0)?(k=ie(t,u)|0,!p):0){c=g;while(1){u=c+f|0;if((u|0)>-1&(u|0)<(t|0)){l=l+1|0;i=(n[(s[e>>2]|0)+(k+u)>>0]|0)+i|0}if((c|0)<(b|0))c=c+1|0;else break}}if((d|0)<(b|0))d=d+1|0;else break}}d=(ie(t,m)|0)+f|0;r[(s[w>>2]|0)+d>>0]=(i|0)/(l|0)|0;f=f+1|0;t=s[v>>2]|0}while((f|0)<(t|0))}m=m+1|0;t=s[o>>2]|0}while((m|0)<(t|0))}if((a|0)!=0?(ie(t,s[v>>2]|0)|0)>0:0){t=0;do{e=(s[w>>2]|0)+t|0;r[e>>0]=(n[e>>0]|0)+a;t=t+1|0}while((t|0)<(ie(s[o>>2]|0,s[v>>2]|0)|0));t=0}else t=0}}while(0);return t|0}function Iu(e,t,i,r,a,s,n,o,l,u){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;s=s|0;n=n|0;o=o|0;l=l|0;u=u|0;var c=0;e:do{switch(a|0){case 0:{switch(s|0){case 1:{if(u){c=zi(e,t,i,u,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){c=Pi(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=Ii(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=$i(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=Di(e,t,i,n,l)|0;break e}case 8:{c=Li(e,t,i,n,l)|0;break e}case 7:{c=Ni(e,t,i,n,l)|0;break e}case 9:{c=Ri(e,t,i,n,l)|0;break e}case 10:{c=Fi(e,t,i,n,l)|0;break e}case 11:{c=Oi(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){c=_i(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=xi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=Ci(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=Ti(e,t,i,n,l)|0;break e}case 8:{c=Mi(e,t,i,n,l)|0;break e}case 7:{c=Ai(e,t,i,n,l)|0;break e}case 9:{c=Si(e,t,i,n,l)|0;break e}case 10:{c=Ei(e,t,i,n,l)|0;break e}case 11:{c=qi(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(u){c=sr(e,t,i,u,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){c=Ki(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=Xi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=tr(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=ir(e,t,i,n,l)|0;break e}case 8:{c=ar(e,t,i,n,l)|0;break e}case 7:{c=rr(e,t,i,n,l)|0;break e}case 9:{c=Ji(e,t,i,n,l)|0;break e}case 10:{c=er(e,t,i,n,l)|0;break e}case 11:{c=Zi(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){c=ji(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=Bi(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=Vi(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=Yi(e,t,i,n,l)|0;break e}case 8:{c=Gi(e,t,i,n,l)|0;break e}case 7:{c=Wi(e,t,i,n,l)|0;break e}case 9:{c=Hi(e,t,i,n,l)|0;break e}case 10:{c=Qi(e,t,i,n,l)|0;break e}case 11:{c=Ui(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}case 1:{switch(s|0){case 1:{if(u){c=ri(e,t,i,u,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){c=Wt(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=Kt(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=Zt(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=ei(e,t,i,n,l)|0;break e}case 8:{c=ii(e,t,i,n,l)|0;break e}case 7:{c=ti(e,t,i,n,l)|0;break e}case 9:{c=Gt(e,t,i,n,l)|0;break e}case 10:{c=Xt(e,t,i,n,l)|0;break e}case 11:{c=Jt(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){c=nr(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=lr(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=dr(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=Qt(e,t,i,n,l)|0;break e}case 8:{c=Yt(e,t,i,n,l)|0;break e}case 7:{c=Vt(e,t,i,n,l)|0;break e}case 9:{c=or(e,t,i,n,l)|0;break e}case 10:{c=cr(e,t,i,n,l)|0;break e}case 11:{c=ur(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}case 0:{if(u){c=Ul(e,t,i,u,l)|0;break e}switch(o|0){case 0:{if(r>>>0<2){c=Fl(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=Dl(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=zl(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=jl(e,t,i,n,l)|0;break e}case 8:{c=Bl(e,t,i,n,l)|0;break e}case 7:{c=Hl(e,t,i,n,l)|0;break e}case 9:{c=$l(e,t,i,n,l)|0;break e}case 10:{c=Ll(e,t,i,n,l)|0;break e}case 11:{c=Nl(e,t,i,n,l)|0;break e}default:kt(0)}break}case 1:{if(r>>>0<2){c=ai(e,t,i,n,l)|0;break e}if((r&-2|0)==2){c=ni(e,t,i,n,l)|0;break e}if((r&-3|0)==4){c=ui(e,t,i,n,l)|0;break e}switch(r|0){case 5:case 12:case 13:case 14:{c=ci(e,t,i,n,l)|0;break e}case 8:{c=fi(e,t,i,n,l)|0;break e}case 7:{c=di(e,t,i,n,l)|0;break e}case 9:{c=si(e,t,i,n,l)|0;break e}case 10:{c=li(e,t,i,n,l)|0;break e}case 11:{c=oi(e,t,i,n,l)|0;break e}default:kt(0)}break}default:kt(0)}break}default:kt(0)}break}default:kt(0)}}while(0);return c|0}function Ou(e,t){e=e|0;t=t|0;var i=0;if((e|0)!=0?(i=e+7062384|0,(s[i>>2]|0)==0):0){s[i>>2]=t;i=0}else i=-1;return i|0}function Fu(e){e=e|0;var t=0;if((e|0)!=0?(t=e+7062384|0,(s[t>>2]|0)!=0):0){s[t>>2]=0;t=0}else t=-1;return t|0}function $u(){return Du(16,50)|0}function Du(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,n=0,o=0,l=0,u=0,c=0,f=0,h=0,p=0,m=0,b=0,g=0;g=d;d=d+64|0;b=g+56|0;m=g+48|0;l=g+40|0;o=g+32|0;n=g+24|0;a=g+16|0;r=g+8|0;i=g;e:do{if(!((e+-16|0)>>>0>48|(t|0)<1)){h=zs(32)|0;if(!h){en(3,5472,i);kt(1)}s[h>>2]=0;s[h+4>>2]=t;s[h+28>>2]=e;f=zs(t<<2)|0;s[h+8>>2]=f;if(!f){en(3,5472,r);kt(1)}i=t<<4;c=zs(i)|0;s[h+12>>2]=c;if(!c){en(3,5472,a);kt(1)}a=zs(i)|0;u=h+20|0;s[u>>2]=a;if(!a){en(3,5472,n);kt(1)}i=t<<5;n=zs(i)|0;s[h+16>>2]=n;if(!n){en(3,5472,o);kt(1)}o=zs(i)|0;s[h+24>>2]=o;if(!o){en(3,5472,l);kt(1)}r=ie(e,e)|0;i=r*12|0;r=r<<2;if((t|0)>0){e=0;t:while(1){s[f+(e<<2)>>2]=0;a=e<<2;o=0;while(1){if((o|0)>=4)break;l=zs(i)|0;n=o+a|0;s[c+(n<<2)>>2]=l;if(!l){i=18;break t}l=zs(r)|0;s[(s[u>>2]|0)+(n<<2)>>2]=l;if(!l){i=20;break t}else o=o+1|0}e=e+1|0;if((e|0)>=(t|0)){p=h;break e}}if((i|0)==18){en(3,5472,m);kt(1)}else if((i|0)==20){en(3,5472,b);kt(1)}}else p=h}else p=0}while(0);d=g;return p|0}function Nu(e){e=e|0;var t=0,i=0,r=0,a=0,n=0,o=0,l=0;if(!e)t=-1;else{t=e+4|0;i=e+8|0;r=e+12|0;a=e+20|0;if((s[t>>2]|0)>0){n=0;do{if(s[(s[i>>2]|0)+(n<<2)>>2]|0)Zs(e,n)|0;o=n<<2;js(s[(s[r>>2]|0)+(o<<2)>>2]|0);js(s[(s[a>>2]|0)+(o<<2)>>2]|0);l=1+o|0;js(s[(s[r>>2]|0)+(l<<2)>>2]|0);js(s[(s[a>>2]|0)+(l<<2)>>2]|0);l=2+o|0;js(s[(s[r>>2]|0)+(l<<2)>>2]|0);js(s[(s[a>>2]|0)+(l<<2)>>2]|0);o=3+o|0;js(s[(s[r>>2]|0)+(o<<2)>>2]|0);js(s[(s[a>>2]|0)+(o<<2)>>2]|0);n=n+1|0}while((n|0)<(s[t>>2]|0))}js(e);t=0}return t|0}function Lu(e,t,i,a,o,l,u,f,h,p,m,b,g,v,w,k,y,_,S){e=e|0;t=t|0;i=i|0;a=a|0;o=o|0;l=l|0;u=u|0;f=f|0;h=h|0;p=+p;m=m|0;b=b|0;g=g|0;v=v|0;w=w|0;k=k|0;y=y|0;_=_|0;S=S|0;var x=0,q=0,E=0,C=0,T=0,A=0,M=0,P=0,R=0,I=0,O=0,F=0,$=0,D=0;D=d;d=d+12448|0;E=D+12440|0;q=D+8|0;F=D;O=D+12312|0;$=D+24|0;do{if((i+-2|0)>>>0<3){if((y|0)!=2830){x=y&255;if((Vs(t,2,x,x*3|0,a,o,l,u,f,h,p,$)|0)<0){s[v>>2]=-1;x=-6;break}x=Ys($,x,v,w,k,y,_)|0;if(!S)break;s[S>>2]=0;s[S+4>>2]=0;break}if((Vs(t,2,14,42,a,o,l,u,f,h,.875,$)|0)<0){s[v>>2]=-1;x=-6;break}s[q>>2]=0;s[q+4>>2]=182;s[q+8>>2]=195;s[q+12>>2]=13;y=r[$+(s[q>>2]|0)>>0]|0;x=(y&255)>0?y:0;y=(y&255)<255?y:-1;I=r[$+(s[q+4>>2]|0)>>0]|0;x=(I&255)>(x&255)?I:x;y=(I&255)<(y&255)?I:y;I=r[$+(s[q+8>>2]|0)>>0]|0;x=(I&255)>(x&255)?I:x;y=(I&255)<(y&255)?I:y;I=r[$+(s[q+12>>2]|0)>>0]|0;x=((I&255)>(x&255)?I:x)&255;y=((I&255)<(y&255)?I:y)&255;e:do{if((x-y|0)>=30){I=(x+y|0)>>>1;r[E>>0]=(n[$+(s[q>>2]|0)>>0]|0)>>>0<I>>>0&1;r[E+1>>0]=(n[$+(s[q+4>>2]|0)>>0]|0)>>>0<I>>>0&1;r[E+2>>0]=(n[$+(s[q+8>>2]|0)>>0]|0)>>>0<I>>>0&1;r[E+3>>0]=(n[$+(s[q+12>>2]|0)>>0]|0)>>>0<I>>>0&1;y=0;while(1){x=y+1|0;if(((r[E+y>>0]|0)==1?(r[E+((x|0)%4|0)>>0]|0)==1:0)?(r[E+((y+2|0)%4|0)>>0]|0)==0:0){R=y;break}if((x|0)<4)y=x;else{R=x;break}}switch(R|0){case 4:{s[w>>2]=0;c[k>>3]=-1.0;x=-3;y=0;q=0;break e}case 0:{q=119;x=255;y=0;do{A=y+-3|0;C=(y&-2|0)==12;T=y*14|0;E=0;do{if(((E+-3|A)>>>0>=8?(P=E&-2,(E|y)>>>0>=2):0)?!(C&((P|0)==0|(P|0)==12)):0){M=(n[$+(E+T)>>0]|0)-I|0;r[O+q>>0]=M>>>31;M=(M|0)>-1?M:0-M|0;q=q+-1|0;x=(M|0)<(x|0)?M:x}E=E+1|0}while((E|0)!=14);y=y+1|0}while((y|0)!=14);break}case 1:{q=119;x=255;y=0;do{A=y+-3|0;T=y&-2;C=(T|0)==0;T=(T|0)==12;E=13;while(1){if(((E+-3|A)>>>0>=8?(M=(E&-2|0)==12,!(C&M)):0)?!(T&(E>>>0<2|M)):0){P=(n[$+((E*14|0)+y)>>0]|0)-I|0;r[O+q>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;q=q+-1|0;x=(P|0)<(x|0)?P:x}if((E|0)>0)E=E+-1|0;else break}y=y+1|0}while((y|0)!=14);break}case 2:{y=119;x=255;A=13;while(1){C=A+-3|0;T=A>>>0<2|(A&-2|0)==12;E=A*14|0;q=13;while(1){if((q+-3|C)>>>0>=8?!((q|A)>>>0<2|T&(q&-2|0)==12):0){P=(n[$+(q+E)>>0]|0)-I|0;r[O+y>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;y=y+-1|0;x=(P|0)<(x|0)?P:x}if((q|0)>0)q=q+-1|0;else break}if((A|0)>0)A=A+-1|0;else break}break}case 3:{y=119;x=255;A=13;while(1){T=A+-3|0;C=A&-2;E=(C|0)==12;C=(C|0)==0;q=0;do{if(((q+-3|T)>>>0>=8?!(E&q>>>0<2|(q|A)>>>0<2):0)?!(C&(q&-2|0)==12):0){P=(n[$+((q*14|0)+A)>>0]|0)-I|0;r[O+y>>0]=P>>>31;P=(P|0)>-1?P:0-P|0;y=y+-1|0;x=(P|0)<(x|0)?P:x}q=q+1|0}while((q|0)!=14);if((A|0)>0)A=A+-1|0;else break}break}default:x=255}s[w>>2]=R;c[k>>3]=(x|0)>30?1.0:+(x|0)/30.0;x=Ks(2830,0,0,O,F)|0;if((x|0)<0){x=-4;y=0;q=0}else{if(_)s[_>>2]=x;q=F;x=0;y=s[q>>2]|0;q=s[q+4>>2]|0}}else{s[w>>2]=0;c[k>>3]=-1.0;x=-2;y=0;q=0}}while(0);if((x|0)<0){s[v>>2]=-1;break}if((y|0)==-1&(q|0)==-1){s[v>>2]=-1;x=-5;break}s[v>>2]=(y&-32768|0)==0&0==0?y&32767:0;if(!S)x=0;else{x=S;s[x>>2]=y;s[x+4>>2]=q;x=0}}else x=1}while(0);e:do{switch(i|0){case 0:case 1:case 3:case 4:{if(!e){s[m>>2]=-1;y=-1;break e}y=e+28|0;q=s[y>>2]|0;E=q<<2;switch(i|0){case 0:case 3:if((Vs(t,0,q,E,a,o,l,u,f,h,p,$)|0)<0){s[m>>2]=-1;y=-6;break e}else{y=Ws(e,0,$,s[y>>2]|0,m,b,g)|0;break e}default:if((Vs(t,1,q,E,a,o,l,u,f,h,p,$)|0)<0){s[m>>2]=-1;y=-6;break e}else{y=Ws(e,1,$,s[y>>2]|0,m,b,g)|0;break e}}}default:y=1}}while(0);if((x|0)!=1){if((y|0)!=1)x=(y&x|0)<0?y:0}else x=y;d=D;return x|0}function zu(e){e=e|0;var t=0,i=0,r=0,a=0,n=0,o=0,l=0,u=0;u=d;d=d+16|0;t=u+8|0;o=u+4|0;i=u;s[o>>2]=e;do{if(e>>>0>=212){n=(e>>>0)/210|0;r=n*210|0;s[i>>2]=e-r;t=(ju(3712,3904,i,t)|0)-3712>>2;a=t;t=(s[3712+(t<<2)>>2]|0)+r|0;e:while(1){r=5;while(1){if(r>>>0>=47){r=211;l=8;break}i=s[3520+(r<<2)>>2]|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=106;break e}if((t|0)==(ie(e,i)|0))break;else r=r+1|0}t:do{if((l|0)==8)while(1){l=0;i=(t>>>0)/(r>>>0)|0;if(i>>>0<r>>>0){l=105;break e}if((t|0)==(ie(i,r)|0))break t;i=r+10|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+12|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+16|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+18|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+22|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+28|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+30|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+36|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+40|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+42|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+46|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+52|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+58|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+60|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+66|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+70|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+72|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+78|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+82|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+88|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+96|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+100|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+102|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+106|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+108|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+112|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+120|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+126|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+130|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+136|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+138|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+142|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+148|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+150|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+156|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+162|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+166|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+168|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+172|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+178|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+180|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+186|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+190|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+192|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+196|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+198|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break t;i=r+208|0;e=(t>>>0)/(i>>>0)|0;if(e>>>0<i>>>0){l=105;break e}if((t|0)==(ie(e,i)|0))break;else{r=r+210|0;l=8}}}while(0);r=a+1|0;t=(r|0)==48;r=t?0:r;t=(t&1)+n|0;a=r;n=t;t=(s[3712+(r<<2)>>2]|0)+(t*210|0)|0}if((l|0)==105){s[o>>2]=t;break}else if((l|0)==106){s[o>>2]=t;break}}else t=s[(ju(3520,3712,o,t)|0)>>2]|0}while(0);d=u;return t|0}function ju(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0;a=s[i>>2]|0;r=e;i=t-e>>2;e:while(1){while(1){if(!i)break e;e=(i|0)/2|0;if((s[r+(e<<2)>>2]|0)>>>0<a>>>0)break;else i=e}r=r+(e+1<<2)|0;i=i+-1-e|0}return r|0}function Hu(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0;if(i>>>0>4294967279)la(e);if(i>>>0<11){r[e>>0]=i<<1;e=e+1|0}else{n=i+16&-16;a=Mr(n)|0;s[e+8>>2]=a;s[e>>2]=n|1;s[e+4>>2]=i;e=a}Ku(e|0,t|0,i|0)|0;r[e+i>>0]=0;return}function Bu(e){e=e|0;if(r[e>>0]&1)Pr(s[e+8>>2]|0);return}function Uu(){}function Qu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;r=t-r-(i>>>0>e>>>0|0)>>>0;return(R=r,e-i>>>0|0)|0}function Vu(e,t,i){e=e|0;t=t|0;i=i|0;var a=0,n=0,o=0,l=0;a=e+i|0;if((i|0)>=20){t=t&255;o=e&3;l=t|t<<8|t<<16|t<<24;n=a&~3;if(o){o=e+4-o|0;while((e|0)<(o|0)){r[e>>0]=t;e=e+1|0}}while((e|0)<(n|0)){s[e>>2]=l;e=e+4|0}}while((e|0)<(a|0)){r[e>>0]=t;e=e+1|0}return e-i|0}function Yu(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){R=t<<i|(e&(1<<i)-1<<32-i)>>>32-i;return e<<i}R=e<<i-32;return 0}function Wu(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;i=e+i>>>0;return(R=t+r+(i>>>0<e>>>0|0)>>>0,i|0)|0}function Gu(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){R=t>>>i;return e>>>i|(t&(1<<i)-1)<<32-i}R=0;return t>>>i-32|0}function Ku(e,t,i){e=e|0;t=t|0;i=i|0;var a=0;if((i|0)>=4096)return Xe(e|0,t|0,i|0)|0;a=e|0;if((e&3)==(t&3)){while(e&3){if(!i)return a|0;r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;i=i-1|0}while((i|0)>=4){s[e>>2]=s[t>>2];e=e+4|0;t=t+4|0;i=i-4|0}}while((i|0)>0){r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;i=i-1|0}return a|0}function Ju(e,t,i){e=e|0;t=t|0;i=i|0;if((i|0)<32){R=t>>i;return e>>>i|(t&(1<<i)-1)<<32-i}R=(t|0)<0?-1:0;return t>>i-32|0}function Xu(e){e=e|0;var t=0;t=r[m+(e&255)>>0]|0;if((t|0)<8)return t|0;t=r[m+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=r[m+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(r[m+(e>>>24)>>0]|0)+24|0}function Zu(e,t){e=e|0;t=t|0;var i=0,r=0,a=0,s=0;s=e&65535;a=t&65535;i=ie(a,s)|0;r=e>>>16;e=(i>>>16)+(ie(a,r)|0)|0;a=t>>>16;t=ie(a,s)|0;return(R=(e>>>16)+(ie(a,r)|0)+(((e&65535)+t|0)>>>16)|0,e+t<<16|i&65535|0)|0}function ec(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,s=0,n=0,o=0,l=0,u=0;u=t>>31|((t|0)<0?-1:0)<<1;l=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;s=r>>31|((r|0)<0?-1:0)<<1;a=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;o=Qu(u^e,l^t,u,l)|0;n=R;e=s^u;t=a^l;return Qu((sc(o,n,Qu(s^i,a^r,s,a)|0,R,0)|0)^e,R^t,e,t)|0}function tc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0,o=0,l=0,u=0,c=0;a=d;d=d+16|0;l=a|0;o=t>>31|((t|0)<0?-1:0)<<1;n=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;c=r>>31|((r|0)<0?-1:0)<<1;u=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;e=Qu(o^e,n^t,o,n)|0;t=R;sc(e,t,Qu(c^i,u^r,c,u)|0,R,l)|0;r=Qu(s[l>>2]^o,s[l+4>>2]^n,o,n)|0;i=R;d=a;return(R=i,r)|0}function ic(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,s=0;a=e;s=i;i=Zu(a,s)|0;e=R;return(R=(ie(t,s)|0)+(ie(r,a)|0)+e|e&0,i|0|0)|0}function rc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return sc(e,t,i,r,0)|0}function ac(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0,n=0;n=d;d=d+16|0;a=n|0;sc(e,t,i,r,a)|0;d=n;return(R=s[a+4>>2]|0,s[a>>2]|0)|0}function sc(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;var n=0,o=0,l=0,u=0,c=0,d=0,f=0,h=0,p=0,m=0;d=e;u=t;c=u;o=i;h=r;l=h;if(!c){n=(a|0)!=0;if(!l){if(n){s[a>>2]=(d>>>0)%(o>>>0);s[a+4>>2]=0}h=0;a=(d>>>0)/(o>>>0)>>>0;return(R=h,a)|0}else{if(!n){h=0;a=0;return(R=h,a)|0}s[a>>2]=e|0;s[a+4>>2]=t&0;h=0;a=0;return(R=h,a)|0}}n=(l|0)==0;do{if(o){if(!n){n=(ae(l|0)|0)-(ae(c|0)|0)|0;if(n>>>0<=31){f=n+1|0;l=31-n|0;t=n-31>>31;o=f;e=d>>>(f>>>0)&t|c<<l;t=c>>>(f>>>0)&t;n=0;l=d<<l;break}if(!a){h=0;a=0;return(R=h,a)|0}s[a>>2]=e|0;s[a+4>>2]=u|t&0;h=0;a=0;return(R=h,a)|0}n=o-1|0;if(n&o){l=(ae(o|0)|0)+33-(ae(c|0)|0)|0;m=64-l|0;f=32-l|0;u=f>>31;p=l-32|0;t=p>>31;o=l;e=f-1>>31&c>>>(p>>>0)|(c<<f|d>>>(l>>>0))&t;t=t&c>>>(l>>>0);n=d<<m&u;l=(c<<m|d>>>(p>>>0))&u|d<<f&l-33>>31;break}if(a){s[a>>2]=n&d;s[a+4>>2]=0}if((o|0)==1){p=u|t&0;m=e|0|0;return(R=p,m)|0}else{m=Xu(o|0)|0;p=c>>>(m>>>0)|0;m=c<<32-m|d>>>(m>>>0)|0;return(R=p,m)|0}}else{if(n){if(a){s[a>>2]=(c>>>0)%(o>>>0);s[a+4>>2]=0}p=0;m=(c>>>0)/(o>>>0)>>>0;return(R=p,m)|0}if(!d){if(a){s[a>>2]=0;s[a+4>>2]=(c>>>0)%(l>>>0)}p=0;m=(c>>>0)/(l>>>0)>>>0;return(R=p,m)|0}n=l-1|0;if(!(n&l)){if(a){s[a>>2]=e|0;s[a+4>>2]=n&c|t&0}p=0;m=c>>>((Xu(l|0)|0)>>>0);return(R=p,m)|0}n=(ae(l|0)|0)-(ae(c|0)|0)|0;if(n>>>0<=30){t=n+1|0;l=31-n|0;o=t;e=c<<l|d>>>(t>>>0);t=c>>>(t>>>0);n=0;l=d<<l;break}if(!a){p=0;m=0;return(R=p,m)|0}s[a>>2]=e|0;s[a+4>>2]=u|t&0;p=0;m=0;return(R=p,m)|0}}while(0);if(!o){c=l;u=0;l=0}else{f=i|0|0;d=h|r&0;c=Wu(f|0,d|0,-1,-1)|0;i=R;u=l;l=0;do{r=u;u=n>>>31|u<<1;n=l|n<<1;r=e<<1|r>>>31|0;h=e>>>31|t<<1|0;Qu(c,i,r,h)|0;m=R;p=m>>31|((m|0)<0?-1:0)<<1;l=p&1;e=Qu(r,h,p&f,(((m|0)<0?-1:0)>>31|((m|0)<0?-1:0)<<1)&d)|0;t=R;o=o-1|0}while((o|0)!=0);c=u;u=0}o=0;if(a){s[a>>2]=e;s[a+4>>2]=t}p=(n|0)>>>31|(c|o)<<1|(o<<1|n>>>31)&0|u;m=(n<<1|0>>>31)&-2|l;return(R=p,m)|0}function nc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;return Nc[e&15](t|0,i|0,r|0)|0}function oc(e,t,i,r,a,s){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;s=s|0;Lc[e&3](t|0,i|0,r|0,a|0,s|0)}function lc(e,t,i){e=e|0;t=t|0;i=i|0;return+zc[e&1](t|0,i|0)}function uc(e,t,i){e=e|0;t=t|0;i=+i;jc[e&3](t|0,+i)}function cc(e,t){e=e|0;t=t|0;return+Hc[e&3](t|0)}function dc(e){e=e|0;return Bc[e&1]()|0}function fc(e,t){e=e|0;t=t|0;Uc[e&15](t|0)}function hc(e,t,i){e=e|0;t=t|0;i=i|0;Qc[e&7](t|0,i|0)}function pc(e,t){e=e|0;t=t|0;return Vc[e&31](t|0)|0}function mc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;Yc[e&1](t|0,i|0,r|0)}function bc(e){e=e|0;Wc[e&0]()}function gc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=+r;Gc[e&3](t|0,i|0,+r)}function vc(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;return Kc[e&1](t|0,i|0,r|0,a|0)|0}function wc(e,t,i,r,a,s,n){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;s=s|0;n=n|0;Jc[e&3](t|0,i|0,r|0,a|0,s|0,n|0)}function kc(e,t,i){e=e|0;t=t|0;i=i|0;return Xc[e&15](t|0,i|0)|0}function yc(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;Zc[e&3](t|0,i|0,r|0,a|0)}function _c(e,t,i){e=e|0;t=t|0;i=i|0;se(0);return 0}function Sc(e,t,i,r,a){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;se(1)}function xc(e,t){e=e|0;t=t|0;se(2);return 0.0}function qc(e,t){e=e|0;t=+t;se(3)}function Ec(e){e=e|0;se(4);return 0.0}function Cc(){se(5);return 0}function Tc(e){e=e|0;se(6)}function Ac(e,t){e=e|0;t=t|0;se(7)}function Mc(e){e=e|0;se(8);return 0}function Pc(e,t,i){e=e|0;t=t|0;i=i|0;se(9)}function Rc(){se(10)}function Ic(e,t,i){e=e|0;t=t|0;i=+i;se(11)}function Oc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;se(12);return 0}function Fc(e,t,i,r,a,s){e=e|0;t=t|0;i=i|0;r=r|0;a=a|0;s=s|0;se(13)}function $c(e,t){e=e|0;t=t|0;se(14);return 0}function Dc(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;se(15)}var Nc=[_c,Qr,Vr,$s,$a,Fa,Da,Bo,Fo,Io,Oo,jo,Cl,El,Oa,Rs];var Lc=[Sc,aa,ra,ea];var zc=[xc,kl];var jc=[qc,co,ho,go];var Hc=[Ec,fo,po,vo];var Bc=[Cc,to];var Uc=[Tc,Rr,Ir,Nr,jr,Lr,zr,Hr,Br,Ur,eo,fl,hl,Ts,As,Tc];var Qc=[Ac,qo,So,mo,wo,yo,Mo,Sl];var Vc=[Mc,Or,Ia,ro,uo,ao,Lo,zo,Ao,To,Eo,xo,bo,ko,_o,Po,_l,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc,Mc];var Yc=[Pc,wl];var Wc=[Rc];var Gc=[Ic,yl,vl,Ic];var Kc=[Oc,Al];var Jc=[Fc,oa,na,sa];var Xc=[$c,Qn,no,oo,lo,$o,No,Do,Ho,Co,Tl,xl,$c,$c,$c,$c];var Zc=[Dc,Wr,Gr,Jr];return{_i64Subtract:Qu,_fflush:Ua,_i64Add:Wu,_memset:Vu,_malloc:zs,_memcpy:Ku,___getTypeName:kr,_bitshift64Lshr:Gu,_free:js,___errno_location:ca,_bitshift64Shl:Yu,__GLOBAL__sub_I_ARToolKitJS_cpp:dl,__GLOBAL__sub_I_bind_cpp:_r,runPostSets:Uu,stackAlloc:hi,stackSave:pi,stackRestore:mi,establishStackSpace:bi,setThrew:gi,setTempRet0:ki,getTempRet0:yi,dynCall_iiii:nc,dynCall_viiiii:oc,dynCall_dii:lc,dynCall_vid:uc,dynCall_di:cc,dynCall_i:dc,dynCall_vi:fc,dynCall_vii:hc,dynCall_ii:pc,dynCall_viii:mc,dynCall_v:bc,dynCall_viid:gc,dynCall_iiiii:vc,dynCall_viiiiii:wc,dynCall_iii:kc,dynCall_viiii:yc}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module["_i64Subtract"]=asm["_i64Subtract"],__GLOBAL__sub_I_bind_cpp=Module["__GLOBAL__sub_I_bind_cpp"]=asm["__GLOBAL__sub_I_bind_cpp"],_fflush=Module["_fflush"]=asm["_fflush"],__GLOBAL__sub_I_ARToolKitJS_cpp=Module["__GLOBAL__sub_I_ARToolKitJS_cpp"]=asm["__GLOBAL__sub_I_ARToolKitJS_cpp"],_i64Add=Module["_i64Add"]=asm["_i64Add"],_memset=Module["_memset"]=asm["_memset"],runPostSets=Module["runPostSets"]=asm["runPostSets"],_malloc=Module["_malloc"]=asm["_malloc"],_memcpy=Module["_memcpy"]=asm["_memcpy"],___getTypeName=Module["___getTypeName"]=asm["___getTypeName"],_bitshift64Lshr=Module["_bitshift64Lshr"]=asm["_bitshift64Lshr"],_free=Module["_free"]=asm["_free"],___errno_location=Module["___errno_location"]=asm["___errno_location"],_bitshift64Shl=Module["_bitshift64Shl"]=asm["_bitshift64Shl"],dynCall_iiii=Module["dynCall_iiii"]=asm["dynCall_iiii"],dynCall_viiiii=Module["dynCall_viiiii"]=asm["dynCall_viiiii"],dynCall_dii=Module["dynCall_dii"]=asm["dynCall_dii"],dynCall_vid=Module["dynCall_vid"]=asm["dynCall_vid"],dynCall_di=Module["dynCall_di"]=asm["dynCall_di"],dynCall_i=Module["dynCall_i"]=asm["dynCall_i"],dynCall_vi=Module["dynCall_vi"]=asm["dynCall_vi"],dynCall_vii=Module["dynCall_vii"]=asm["dynCall_vii"],dynCall_ii=Module["dynCall_ii"]=asm["dynCall_ii"],dynCall_viii=Module["dynCall_viii"]=asm["dynCall_viii"],dynCall_v=Module["dynCall_v"]=asm["dynCall_v"],dynCall_viid=Module["dynCall_viid"]=asm["dynCall_viid"],dynCall_iiiii=Module["dynCall_iiiii"]=asm["dynCall_iiiii"],dynCall_viiiiii=Module["dynCall_viiiiii"]=asm["dynCall_viiiiii"],dynCall_iii=Module["dynCall_iii"]=asm["dynCall_iii"],dynCall_viiii=Module["dynCall_viiii"]=asm["dynCall_viiii"],initialStackTop;function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Runtime.stackAlloc=asm["stackAlloc"],Runtime.stackSave=asm["stackSave"],Runtime.stackRestore=asm["stackRestore"],Runtime.establishStackSpace=asm["establishStackSpace"],Runtime.setTempRet0=asm["setTempRet0"],Runtime.getTempRet0=asm["getTempRet0"],ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var preloadStartTime=null,calledMain=!1;function run(e){function t(){Module["calledRun"]||(Module["calledRun"]=!0,ABORT||(ensureInitRuntime(),preMain(),Module["onRuntimeInitialized"]&&Module["onRuntimeInitialized"](),Module["_main"]&&shouldRunNow&&Module["callMain"](e),postRun()))}e=e||Module["arguments"],null===preloadStartTime&&(preloadStartTime=Date.now()),runDependencies>0||(preRun(),runDependencies>0||Module["calledRun"]||(Module["setStatus"]?(Module["setStatus"]("Running..."),setTimeout((function(){setTimeout((function(){Module["setStatus"]("")}),1),t()}),1)):t()))}function exit(e,t){if(!t||!Module["noExitRuntime"])throw Module["noExitRuntime"]||(ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),Module["onExit"]&&Module["onExit"](e)),ENVIRONMENT_IS_NODE?(process["stdout"]["once"]("drain",(function(){process["exit"](e)})),console.log(" "),setTimeout((function(){process["exit"](e)}),500)):ENVIRONMENT_IS_SHELL&&"function"===typeof quit&&quit(e),new ExitStatus(e)}dependenciesFulfilled=function e(){Module["calledRun"]||run(),Module["calledRun"]||(dependenciesFulfilled=e)},Module["callMain"]=Module.callMain=function(e){assert(0==runDependencies,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called"),e=e||[],ensureInitRuntime();var t=e.length+1;function i(){for(var e=0;e<3;e++)r.push(0)}var r=[allocate(intArrayFromString(Module["thisProgram"]),"i8",ALLOC_NORMAL)];i();for(var a=0;a<t-1;a+=1)r.push(allocate(intArrayFromString(e[a]),"i8",ALLOC_NORMAL)),i();r.push(0),r=allocate(r,"i32",ALLOC_NORMAL);try{var s=Module["_main"](t,r,0);exit(s,!0)}catch(n){if(n instanceof ExitStatus)return;if("SimulateInfiniteLoop"==n)return void(Module["noExitRuntime"]=!0);throw n&&"object"===typeof n&&n.stack&&Module.printErr("exception thrown: "+[n,n.stack]),n}finally{calledMain=!0}},Module["run"]=Module.run=run,Module["exit"]=Module.exit=exit;var abortDecorators=[];function abort(e){void 0!==e?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.",i="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach((function(t){i=t(i,e)})),i}if(Module["abort"]=Module.abort=abort,Module["preInit"]){"function"==typeof Module["preInit"]&&(Module["preInit"]=[Module["preInit"]]);while(Module["preInit"].length>0)Module["preInit"].pop()()}var shouldRunNow=!0;Module["noInitialRun"]&&(shouldRunNow=!1),run(),function(){"use strict";var e=function(e,i,r){var a=e,s=i;if(this.orientation="landscape",this.listeners={},"number"!==typeof e){var n=e;r=i,a=n.videoWidth||n.width,s=n.videoHeight||n.height,this.image=n}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.videoWidth=a,this.videoHeight=s,"string"===typeof r){var o=this;this.cameraParam=new t(r,(function(){o._initialize()}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))}else this.cameraParam=r,this._initialize()};e.prototype.dispose=function(){for(var e in i.teardown(this.id),this)this[e]=null},e.prototype.process=function(e){this.detectMarker(e);var t,r,a=this.getMarkerNum();for(t in this.patternMarkers)r=this.patternMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(t in this.barcodeMarkers)r=this.barcodeMarkers[t],r.inPrevious=r.inCurrent,r.inCurrent=!1;for(var s=0;s<a;s++){var n=this.getMarker(s),o=i.UNKNOWN_MARKER,l=this.trackPatternMarkerId(-1);n.idPatt>-1&&(n.id===n.idPatt||-1===n.idMatrix)?(l=this.trackPatternMarkerId(n.idPatt),o=i.PATTERN_MARKER,n.dir!==n.dirPatt&&this.setMarkerInfoDir(s,n.dirPatt)):n.idMatrix>-1&&(l=this.trackBarcodeMarkerId(n.idMatrix),o=i.BARCODE_MARKER,n.dir!==n.dirMatrix&&this.setMarkerInfoDir(s,n.dirMatrix)),o!==i.UNKNOWN_MARKER&&l.inPrevious?this.getTransMatSquareCont(s,l.markerWidth,l.matrix,l.matrix):this.getTransMatSquare(s,l.markerWidth,l.matrix),l.inCurrent=!0,this.transMatToGLMat(l.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:s,type:o,marker:n,matrix:this.transform_mat}})}var u=this.getMultiMarkerCount();for(s=0;s<u;s++){var c=this.getMultiMarkerPatternCount(s);l=!1;i.getTransMatMultiSquareRobust(this.id,s),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var d=0;d<c;d++){var f=this.getMultiEachMarker(s,d);if(f.visible>=0){l=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:s,matrix:this.transform_mat}});break}}if(l)for(d=0;d<c;d++){f=this.getMultiEachMarker(s,d);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:s,markerIndex:d,marker:f,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},e.prototype.trackPatternMarkerId=function(e,t){var i=this.patternMarkers[e];return i||(this.patternMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.trackBarcodeMarkerId=function(e,t){var i=this.barcodeMarkers[e];return i||(this.barcodeMarkers[e]=i={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:t||this.defaultMarkerWidth}),t&&(i.markerWidth=t),i},e.prototype.getMultiMarkerCount=function(){return i.getMultiMarkerCount(this.id)},e.prototype.getMultiMarkerPatternCount=function(e){return i.getMultiMarkerNum(this.id,e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this.listeners[e]){var i=this.listeners[e].indexOf(t);i>-1&&this.listeners[e].splice(i,1)}},e.prototype.dispatchEvent=function(e){var t=this.listeners[e.name];if(t)for(var i=0;i<t.length;i++)t[i].call(this,e)},e.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},e.prototype.loadMarker=function(e,t,r){return i.addMarker(this.id,e,t,r)},e.prototype.loadMultiMarker=function(e,t,r){return i.addMultiMarker(this.id,e,t,r)},e.prototype.getTransMatSquare=function(e,t,r){return i.getTransMatSquare(this.id,e,t),r.set(this.marker_transform_mat),r},e.prototype.getTransMatSquareCont=function(e,t,r,a){return this.marker_transform_mat.set(r),i.getTransMatSquareCont(this.id,e,t),a.set(this.marker_transform_mat),a},e.prototype.getTransMatMultiSquare=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.getTransMatMultiSquareRobust=function(e,t){return i.getTransMatMultiSquare(this.id,e),t.set(this.marker_transform_mat),t},e.prototype.transMatToGLMat=function(e,t,i){return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=0,t[7]=0,t[11]=0,t[15]=1,void 0!=i&&0!==i&&(t[12]*=i,t[13]*=i,t[14]*=i),t},e.prototype.detectMarker=function(e){return this._copyImageToHeap(e)?i.detectMarker(this.id):-99},e.prototype.getMarkerNum=function(){return i.getMarkerNum(this.id)},e.prototype.getMarker=function(e){if(0===i.getMarker(this.id,e))return i.markerInfo},e.prototype.setMarkerInfoVertex=function(e,t){for(var r=0;r<t.length;r++)this.marker_transform_mat[2*r+0]=t[r][0],this.marker_transform_mat[2*r+1]=t[r][1];return i.setMarkerInfoVertex(this.id,e)},e.prototype.cloneMarkerInfo=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.getMultiEachMarker=function(e,t){if(0===i.getMultiEachMarker(this.id,e,t))return i.multiEachMarkerInfo},e.prototype.getTransformationMatrix=function(){return this.transform_mat},e.prototype.getCameraMatrix=function(){return this.camera_mat},e.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},e.prototype.setDebugMode=function(e){return i.setDebugMode(this.id,e)},e.prototype.getDebugMode=function(){return i.getDebugMode(this.id)},e.prototype.getProcessingImage=function(){return i.getProcessingImage(this.id)},e.prototype.setLogLevel=function(e){return i.setLogLevel(e)},e.prototype.getLogLevel=function(){return i.getLogLevel()},e.prototype.setMarkerInfoDir=function(e,t){return i.setMarkerInfoDir(this.id,e,t)},e.prototype.setProjectionNearPlane=function(e){return i.setProjectionNearPlane(this.id,e)},e.prototype.getProjectionNearPlane=function(){return i.getProjectionNearPlane(this.id)},e.prototype.setProjectionFarPlane=function(e){return i.setProjectionFarPlane(this.id,e)},e.prototype.getProjectionFarPlane=function(){return i.getProjectionFarPlane(this.id)},e.prototype.setThresholdMode=function(e){return i.setThresholdMode(this.id,e)},e.prototype.getThresholdMode=function(){return i.getThresholdMode(this.id)},e.prototype.setThreshold=function(e){return i.setThreshold(this.id,e)},e.prototype.getThreshold=function(){return i.getThreshold(this.id)},e.prototype.setPatternDetectionMode=function(e){return i.setPatternDetectionMode(this.id,e)},e.prototype.getPatternDetectionMode=function(){return i.getPatternDetectionMode(this.id)},e.prototype.setMatrixCodeType=function(e){return i.setMatrixCodeType(this.id,e)},e.prototype.getMatrixCodeType=function(){return i.getMatrixCodeType(this.id)},e.prototype.setLabelingMode=function(e){return i.setLabelingMode(this.id,e)},e.prototype.getLabelingMode=function(){return i.getLabelingMode(this.id)},e.prototype.setPattRatio=function(e){return i.setPattRatio(this.id,e)},e.prototype.getPattRatio=function(){return i.getPattRatio(this.id)},e.prototype.setImageProcMode=function(e){return i.setImageProcMode(this.id,e)},e.prototype.getImageProcMode=function(){return i.getImageProcMode(this.id)},e.prototype.debugDraw=function(){var e=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),t=new ImageData(e,this.canvas.width,this.canvas.height);this.ctx.putImageData(t,0,0);for(var i=this.getMarkerNum(),r=0;r<i;r++)this._debugMarker(this.getMarker(r))},e.prototype._initialize=function(){this.id=i.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var e=i.frameMalloc;this.framepointer=e.framepointer,this.framesize=e.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,e.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,e.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var t=this;setTimeout((function(){t.onload&&t.onload(),t.dispatchEvent({name:"load",target:t})}),1)},e.prototype._copyImageToHeap=function(e){if(!e||"undefined"===typeof e)return!1;if("IMG"===e.nodeName&&e.width>e.height||"VIDEO"===e.nodeName&&e.videoWidth>e.videoHeight)this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.canvas.height/this.canvas.width,i=this.canvas.width*t,r=this.canvas.height*t,a=(this.canvas.width-r)/2;this.ctx.drawImage(e,a,0,r,i)}if(0===this.canvas.width||0===this.canvas.height)return!1;var s=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=s.data;return!!this.dataHeap&&(this.dataHeap.set(n),!0)},e.prototype._debugMarker=function(e){var t,i;t=e.vertex;var r=this.ctx;r.strokeStyle="red",r.beginPath(),r.moveTo(t[0][0],t[0][1]),r.lineTo(t[1][0],t[1][1]),r.stroke(),r.beginPath(),r.moveTo(t[2][0],t[2][1]),r.lineTo(t[3][0],t[3][1]),r.stroke(),r.strokeStyle="green",r.beginPath(),r.lineTo(t[1][0],t[1][1]),r.lineTo(t[2][0],t[2][1]),r.stroke(),r.beginPath(),r.moveTo(t[3][0],t[3][1]),r.lineTo(t[0][0],t[0][1]),r.stroke(),i=e.pos,r.beginPath(),r.arc(i[0],i[1],8,0,2*Math.PI),r.fillStyle="red",r.fill()},e.getUserMedia=function(e){var t=e.facingMode||"environment",i=e.onSuccess,r=e.onError||function(e){console.error("ARController.getUserMedia",e)},a=document.createElement("video"),s=function(){0!==this.videoWidth&&i(a)},n=!1,o=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],l=function(e){n&&(a.play(),a.paused||o.forEach((function(e){window.removeEventListener(e,l,!0)})))};o.forEach((function(e){window.addEventListener(e,l,!0)}));var u=function(e){a.addEventListener("loadedmetadata",s,!1),a.src=window.URL.createObjectURL(e),n=!0,l()},c={},d={};e.width&&(d.width=e.width,"object"===typeof e.width?(e.width.max&&(c.maxWidth=e.width.max),e.width.min&&(c.minWidth=e.width.max)):c.maxWidth=e.width),e.height&&(d.height=e.height,"object"===typeof e.height?(e.height.max&&(c.maxHeight=e.height.max),e.height.min&&(c.minHeight=e.height.max)):c.maxHeight=e.height),d.facingMode=t,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f={audio:!1,video:{mandatory:c}};return navigator.getUserMedia?navigator.getUserMedia(f,u,r):r("navigator.getUserMedia is not supported on your browser"),a},e.getUserMediaARController=function(i){var r={};for(var a in i)r[a]=i[a];var s=i.onSuccess,n=i.cameraParam;r.onSuccess=function(){new t(n,(function(){var t=this,r=i.maxARVideoSize||Math.max(o.videoWidth,o.videoHeight),a=r/Math.max(o.videoWidth,o.videoHeight),n=a*o.videoWidth,l=a*o.videoHeight;if(o.videoWidth<o.videoHeight){var u=n;n=l,l=u}var c=new e(n,l,t);c.image=o,o.videoWidth<o.videoHeight?(c.orientation="portrait",c.videoWidth=o.videoHeight,c.videoHeight=o.videoWidth):(c.orientation="landscape",c.videoWidth=o.videoWidth,c.videoHeight=o.videoHeight),s(c,t)}),(function(e){console.error("ARController: Failed to load ARCameraParam",e)}))};var o=this.getUserMedia(r);return o};var t=function(e,t,i){this.id=-1,this._src="",this.complete=!1,this.onload=t,this.onerror=i,e&&this.load(e)};t.prototype.load=function(e){if(""!==this._src)throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=e,e){var t=this;i.loadCamera(e,(function(e){t.id=e,t.complete=!0,t.onload()}),(function(e){t.onerror(e)}))}},Object.defineProperty(t.prototype,"src",{set:function(e){this.load(e)},get:function(){return this._src}}),t.prototype.dispose=function(){-1!==this.id&&i.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var i={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:f,addMarker:n,addMultiMarker:c},r=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function a(){for(var e in r.forEach((function(e){i[e]=Module[e]})),Module)e.match(/^AR/)&&(i[e]=Module[e])}var s=0;function n(e,t,i){var r="/marker_"+s++;m(t,r,(function(){var t=Module._addMarker(e,r);i&&i(t)}))}function o(e){return String.fromCharCode.apply(String,e)}function l(e){var t=o(e),i=t.split("\n"),r=[],a=0;return i.forEach((function(e){if(e=e.trim(),e&&!e.startsWith("#"))switch(a){case 0:return+e,void(a=1);case 1:e.match(/^\d+$/)||r.push(e);case 2:case 3:case 4:return void a++;case 5:return void(a=1)}})),r}var u=0;function c(e,t,i){var r="/multi_marker_"+u++;m(t,r,(function(a){var s=l(a);function n(){var t=Module._addMultiMarker(e,r),a=Module.getMultiMarkerNum(e,t);i&&i(t,a)}if(!s.length)return n();var o=t.split("/").slice(0,-1).join("/");s=s.map((function(e){return"patt.hiro"===e||"patt.kanji"===e||"patt2.hiro"===e||"patt2.kanji"===e?["http://127.0.0.1:8080/data/data/"+e,e]:[o+"/"+e,e]})),b(s,n)}))}var d=0;function f(e,t){var i="/camera_param_"+d++,r=function(){var e=Module._loadCamera(i);t&&t(e)};"object"===typeof e?p(i,e,r):e.indexOf("\n")>-1?h(i,e,r):m(e,i,r)}function h(e,t,i){for(var r=new Uint8Array(t.length),a=0;a<r.length;a++)r[a]=255&t.charCodeAt(a);p(e,r,i)}function p(e,t,i){FS.writeFile(e,t,{encoding:"binary"}),i(t)}function m(e,t,i){var r=new XMLHttpRequest;r.open("GET",e,!0),console.log(e),r.responseType="arraybuffer",r.onload=function(e){console.log("before buffer");var a=r.response,s=new Uint8Array(a);p(t,s,i)},r.send()}function b(e,t){var i=e.pop();i?m(i[0],i[1],(function(){b(e,t)})):t()}window.artoolkit=i,window.ARController=e,window.ARCameraParam=t,window.Module?a():window.Module={onRuntimeInitialized:function(){a()}}}();var AR=AR||{};AR.Marker=function(e,t){this.id=e,this.corners=t},AR.Detector=function(){this.grey=new CV.Image,this.thres=new CV.Image,this.homography=new CV.Image,this.binary=[],this.contours=[],this.polys=[],this.candidates=[]},AR.Detector.prototype.detect=function(e){return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,.2*e.width,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)},AR.Detector.prototype.findCandidates=function(e,t,i,r){var a,s,n,o=[],l=e.length;for(this.polys=[],n=0;n<l;++n)a=e[n],a.length>=t&&(s=CV.approxPolyDP(a,a.length*i),this.polys.push(s),4===s.length&&CV.isContourConvex(s)&&CV.minEdgeLength(s)>=r&&o.push(s));return o},AR.Detector.prototype.clockwiseCorners=function(e){var t,i,r,a,s,n,o=e.length;for(n=0;n<o;++n)t=e[n][1].x-e[n][0].x,r=e[n][1].y-e[n][0].y,i=e[n][2].x-e[n][0].x,a=e[n][2].y-e[n][0].y,t*a-r*i<0&&(s=e[n][1],e[n][1]=e[n][3],e[n][3]=s);return e},AR.Detector.prototype.notTooNear=function(e,t){var i,r,a,s,n,o,l=[],u=e.length;for(s=0;s<u;++s)for(n=s+1;n<u;++n){for(i=0,o=0;o<4;++o)r=e[s][o].x-e[n][o].x,a=e[s][o].y-e[n][o].y,i+=r*r+a*a;i/4<t*t&&(CV.perimeter(e[s])<CV.perimeter(e[n])?e[s].tooNear=!0:e[n].tooNear=!0)}for(s=0;s<u;++s)e[s].tooNear||l.push(e[s]);return l},AR.Detector.prototype.findMarkers=function(e,t,i){var r,a,s,n=[],o=t.length;for(s=0;s<o;++s)r=t[s],CV.warp(e,this.homography,r,i),CV.threshold(this.homography,this.homography,CV.otsu(this.homography)),a=this.getMarker(this.homography,r),a&&n.push(a);return n},AR.Detector.prototype.getMarker=function(e,t){var i,r,a,s,n,o=e.width/7>>>0,l=o*o>>1,u=[],c=[],d=[];for(s=0;s<7;++s)for(a=0===s||6===s?1:6,n=0;n<7;n+=a)if(i={x:n*o,y:s*o,width:o,height:o},CV.countNonZero(e,i)>l)return null;for(s=0;s<5;++s)for(u[s]=[],n=0;n<5;++n)i={x:(n+1)*o,y:(s+1)*o,width:o,height:o},u[s][n]=CV.countNonZero(e,i)>l?1:0;for(c[0]=u,d[0]=this.hammingDistance(c[0]),r={first:d[0],second:0},s=1;s<4;++s)c[s]=this.rotate(c[s-1]),d[s]=this.hammingDistance(c[s]),d[s]<r.first&&(r.first=d[s],r.second=s);return 0!==r.first?null:new AR.Marker(this.mat2id(c[r.second]),this.rotate2(t,4-r.second))},AR.Detector.prototype.hammingDistance=function(e){var t,i,r,a,s,n=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],o=0;for(r=0;r<5;++r){for(i=1/0,a=0;a<4;++a){for(t=0,s=0;s<5;++s)t+=e[r][s]===n[a][s]?0:1;t<i&&(i=t)}o+=i}return o},AR.Detector.prototype.mat2id=function(e){var t,i=0;for(t=0;t<5;++t)i<<=1,i|=e[t][1],i<<=1,i|=e[t][3];return i},AR.Detector.prototype.rotate=function(e){var t,i,r=[],a=e.length;for(t=0;t<a;++t)for(r[t]=[],i=0;i<e[t].length;++i)r[t][i]=e[e[t].length-i-1][t];return r},AR.Detector.prototype.rotate2=function(e,t){var i,r=[],a=e.length;for(i=0;i<a;++i)r[i]=e[(t+i)%a];return r};var CV=CV||{};CV.Image=function(e,t,i){this.width=e||0,this.height=t||0,this.data=i||[]},CV.grayscale=function(e,t){for(var i=e.data,r=t.data,a=i.length,s=0,n=0;s<a;s+=4)r[n++]=.299*i[s]+.587*i[s+1]+.114*i[s+2]+.5&255;return t.width=e.width,t.height=e.height,t},CV.threshold=function(e,t,i){var r,a=e.data,s=t.data,n=a.length,o=[];for(r=0;r<256;++r)o[r]=r<=i?0:255;for(r=0;r<n;++r)s[r]=o[a[r]];return t.width=e.width,t.height=e.height,t},CV.adaptiveThreshold=function(e,t,i,r){var a,s=e.data,n=t.data,o=s.length,l=[];for(CV.stackBoxBlur(e,t,i),a=0;a<768;++a)l[a]=a-255<=-r?255:0;for(a=0;a<o;++a)n[a]=l[s[a]-n[a]+255];return t.width=e.width,t.height=e.height,t},CV.otsu=function(e){var t,i,r,a=e.data,s=a.length,n=[],o=0,l=0,u=0,c=0,d=0,f=0;for(r=0;r<256;++r)n[r]=0;for(r=0;r<s;++r)n[a[r]]++;for(r=0;r<256;++r)l+=n[r]*r;for(r=0;r<256;++r)if(c+=n[r],0!==c){if(d=s-c,0===d)break;u+=n[r]*r,t=u/c-(l-u)/d,i=c*d*t*t,i>f&&(f=i,o=r)}return o},CV.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265],CV.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13],CV.BlurStack=function(){this.color=0,this.next=null},CV.stackBoxBlur=function(e,t,i){var r,a,s,n,o,l,u,c,d,f,h=e.data,p=t.data,m=e.height,b=e.width,g=m-1,v=b-1,w=i+i+1,k=i+1,y=CV.stackBoxBlurMult[i],_=CV.stackBoxBlurShift[i];for(r=a=new CV.BlurStack,f=1;f<w;++f)r=r.next=new CV.BlurStack;for(r.next=a,o=0,d=0;d<m;++d){for(l=o,s=h[o],n=k*s,r=a,f=0;f<k;++f)r.color=s,r=r.next;for(f=1;f<k;++f)r.color=h[o+f],n+=r.color,r=r.next;for(r=a,c=0;c<b;++c)p[o++]=n*y>>>_,u=c+k,u=l+(u<v?u:v),n-=r.color-h[u],r.color=h[u],r=r.next}for(c=0;c<b;++c){for(o=c,l=o+b,s=p[o],n=k*s,r=a,f=0;f<k;++f)r.color=s,r=r.next;for(f=1;f<k;++f)r.color=p[l],n+=r.color,r=r.next,l+=b;for(r=a,d=0;d<m;++d)p[o]=n*y>>>_,u=d+k,u=c+(u<g?u:g)*b,n-=r.color-p[u],r.color=p[u],r=r.next,o+=b}return t},CV.gaussianBlur=function(e,t,i,r){var a=CV.gaussianKernel(r);return t.width=e.width,t.height=e.height,i.width=e.width,i.height=e.height,CV.gaussianBlurFilter(e,i,a,!0),CV.gaussianBlurFilter(i,t,a,!1),t},CV.gaussianBlurFilter=function(e,t,i,r){var a,s,n,o,l,u=e.data,c=t.data,d=e.height,f=e.width,h=0,p=i.length>>1;for(n=0;n<d;++n)for(o=0;o<f;++o){for(s=0,l=-p;l<=p;++l)r?(a=h+l,o+l<0?a=h:o+l>=f&&(a=h)):(a=h+l*f,n+l<0?a=h:n+l>=d&&(a=h)),s+=i[p+l]*u[a];c[h++]=r?s:s+.5&255}return t},CV.gaussianKernel=function(e){var t,i,r,a,s,n,o=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]],l=[];if(e<=7&&e%2===1)l=o[e>>1];else{for(t=.5*(e-1),i=.8+.3*(t-1),r=-.5/(i*i),a=0,n=0;n<e;++n)s=n-t,a+=l[n]=Math.exp(r*s*s);for(a=1/a,n=0;n<e;++n)l[n]*=a}return l},CV.findContours=function(e,t){var i,r,a,s,n,o,l,u,c,d=e.width,f=e.height,h=[];for(i=CV.binaryBorder(e,t),r=CV.neighborhoodDeltas(d+2),a=d+3,n=1,u=0;u<f;++u,a+=2)for(c=0;c<d;++c,++a)s=i[a],0!==s&&(o=l=!1,1===s&&0===i[a-1]?o=!0:s>=1&&0===i[a+1]&&(l=!0),(o||l)&&(++n,h.push(CV.borderFollowing(i,a,n,{x:c,y:u},l,r))));return h},CV.borderFollowing=function(e,t,i,r,a,s){var n,o,l,u,c,d=[];d.hole=a,u=c=a?0:4;do{if(u=u-1&7,n=t+s[u],0!==e[n])break}while(u!==c);if(u===c)e[t]=-i,d.push({x:r.x,y:r.y});else{o=t,4^u;while(1){c=u;do{l=o+s[++u]}while(0===e[l]);if(u&=7,u-1>>>0<c>>>0?e[o]=-i:1===e[o]&&(e[o]=i),d.push({x:r.x,y:r.y}),u,r.x+=CV.neighborhood[u][0],r.y+=CV.neighborhood[u][1],l===t&&o===n)break;o=l,u=u+4&7}}return d},CV.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]],CV.neighborhoodDeltas=function(e){for(var t=[],i=CV.neighborhood.length,r=0;r<i;++r)t[r]=CV.neighborhood[r][0]+CV.neighborhood[r][1]*e;return t.concat(t)},CV.approxPolyDP=function(e,t){var i,r,a,s,n,o,l,u,c,d,f,h={start_index:0,end_index:0},p={start_index:0,end_index:0},m=[],b=[],g=e.length;for(t*=t,f=0,c=0;c<3;++c)for(n=0,f=(f+p.start_index)%g,r=e[f],++f===g&&(f=0),d=1;d<g;++d)i=e[f],++f===g&&(f=0),l=i.x-r.x,u=i.y-r.y,s=l*l+u*u,s>n&&(n=s,p.start_index=d);n<=t?m.push({x:r.x,y:r.y}):(h.start_index=f,h.end_index=p.start_index+=h.start_index,p.start_index-=p.start_index>=g?g:0,p.end_index=h.start_index,p.end_index<p.start_index&&(p.end_index+=g),b.push({start_index:p.start_index,end_index:p.end_index}),b.push({start_index:h.start_index,end_index:h.end_index}));while(0!==b.length){if(h=b.pop(),a=e[h.end_index%g],r=e[f=h.start_index%g],++f===g&&(f=0),h.end_index<=h.start_index+1)o=!0;else{for(n=0,l=a.x-r.x,u=a.y-r.y,c=h.start_index+1;c<h.end_index;++c)i=e[f],++f===g&&(f=0),s=Math.abs((i.y-r.y)*l-(i.x-r.x)*u),s>n&&(n=s,p.start_index=c);o=n*n<=t*(l*l+u*u)}o?m.push({x:r.x,y:r.y}):(p.end_index=h.end_index,h.end_index=p.start_index,b.push({start_index:p.start_index,end_index:p.end_index}),b.push({start_index:h.start_index,end_index:h.end_index}))}return m},CV.warp=function(e,t,i,r){var a,s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k,y,_,S,x,q,E,C=e.data,T=t.data,A=e.width,M=e.height,P=0;for(b=CV.getPerspectiveTransform(i,r-1),g=b[8],v=b[2],w=b[5],q=0;q<r;++q)for(g+=b[7],v+=b[1],w+=b[4],k=g,y=v,_=w,E=0;E<r;++E)k+=b[6],y+=b[0],_+=b[3],S=y/k,x=_/k,a=S>>>0,s=a===A-1?a:a+1,n=S-a,o=1-n,l=x>>>0,u=l===M-1?l:l+1,c=x-l,d=1-c,f=h=l*A,p=m=u*A,T[P++]=d*(o*C[f+a]+n*C[h+s])+c*(o*C[p+a]+n*C[m+s])&255;return t.width=r,t.height=r,t},CV.getPerspectiveTransform=function(e,t){var i=CV.square2quad(e);return i[0]/=t,i[1]/=t,i[3]/=t,i[4]/=t,i[6]/=t,i[7]/=t,i},CV.square2quad=function(e){var t,i,r,a,s,n,o,l=[];return t=e[0].x-e[1].x+e[2].x-e[3].x,i=e[0].y-e[1].y+e[2].y-e[3].y,0===t&&0===i?(l[0]=e[1].x-e[0].x,l[1]=e[2].x-e[1].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y,l[4]=e[2].y-e[1].y,l[5]=e[0].y,l[6]=0,l[7]=0,l[8]=1):(r=e[1].x-e[2].x,a=e[3].x-e[2].x,s=e[1].y-e[2].y,n=e[3].y-e[2].y,o=r*n-a*s,l[6]=(t*n-a*i)/o,l[7]=(r*i-t*s)/o,l[8]=1,l[0]=e[1].x-e[0].x+l[6]*e[1].x,l[1]=e[3].x-e[0].x+l[7]*e[3].x,l[2]=e[0].x,l[3]=e[1].y-e[0].y+l[6]*e[1].y,l[4]=e[3].y-e[0].y+l[7]*e[3].y,l[5]=e[0].y),l},CV.isContourConvex=function(e){var t,i,r,a,s,n,o,l,u=0,c=!0,d=e.length,f=0,h=0;for(i=e[d-1],t=e[0],s=t.x-i.x,n=t.y-i.y;f<d;++f){if(++h===d&&(h=0),i=t,t=e[h],o=t.x-i.x,l=t.y-i.y,r=o*n,a=l*s,u|=a>r?1:a<r?2:3,3===u){c=!1;break}s=o,n=l}return c},CV.perimeter=function(e){for(var t,i,r=e.length,a=0,s=r-1,n=0;a<r;s=a++)t=e[a].x-e[s].x,i=e[a].y-e[s].y,n+=Math.sqrt(t*t+i*i);return n},CV.minEdgeLength=function(e){for(var t,i,r,a=e.length,s=0,n=a-1,o=1/0;s<a;n=s++)i=e[s].x-e[n].x,r=e[s].y-e[n].y,t=i*i+r*r,t<o&&(o=t);return Math.sqrt(o)},CV.countNonZero=function(e,t){var i,r,a=e.data,s=t.height,n=t.width,o=t.x+t.y*e.width,l=e.width-n,u=0;for(i=0;i<s;++i){for(r=0;r<n;++r)0!==a[o++]&&++u;o+=l}return u},CV.binaryBorder=function(e,t){var i,r,a=e.data,s=e.height,n=e.width,o=0,l=0;for(r=-2;r<n;++r)t[l++]=0;for(i=0;i<s;++i){for(t[l++]=0,r=0;r<n;++r)t[l++]=0===a[o++]?0:1;t[l++]=0}for(r=-2;r<n;++r)t[l++]=0;return t};var POS=POS||{};POS.Posit=function(e,t){this.objectPoints=this.buildModel(e),this.focalLength=t,this.objectVectors=[],this.objectNormal=[],this.objectMatrix=[[],[],[]],this.init()},POS.Posit.prototype.buildModel=function(e){var t=e/2;return[[-t,t,0],[t,t,0],[t,-t,0],[-t,-t,0]]},POS.Posit.prototype.init=function(){var e,t=this.objectPoints.length,i=[],r=[],a=0,s=2;for(e=0;e<t;++e)this.objectVectors[e]=[this.objectPoints[e][0]-this.objectPoints[0][0],this.objectPoints[e][1]-this.objectPoints[0][1],this.objectPoints[e][2]-this.objectPoints[0][2]],i[e]=[this.objectVectors[e][0],this.objectVectors[e][1],this.objectVectors[e][2]];while(0===a)r[0]=this.objectVectors[1][1]*this.objectVectors[s][2]-this.objectVectors[1][2]*this.objectVectors[s][1],r[1]=this.objectVectors[1][2]*this.objectVectors[s][0]-this.objectVectors[1][0]*this.objectVectors[s][2],r[2]=this.objectVectors[1][0]*this.objectVectors[s][1]-this.objectVectors[1][1]*this.objectVectors[s][0],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),++s;for(e=0;e<3;++e)this.objectNormal[e]=r[e]/a;POS.pseudoInverse(i,t,this.objectMatrix)},POS.Posit.prototype.pose=function(e){var t,i,r,a,s,n,o=[[],[],[]],l=[[],[],[]],u=[],c=[[],[],[]],d=[[],[],[]],f=[],h=[];for(this.pos(e,o,l,u),r=this.isValid(o,u),t=r?this.iterate(e,o,u,c,f):{euclidean:-1,pixels:-1,maximum:-1},a=this.isValid(l,u),i=a?this.iterate(e,l,u,d,h):{euclidean:-1,pixels:-1,maximum:-1},s=0;s<3;++s)for(n=0;n<3;++n)r&&(f[s]-=c[s][n]*this.objectPoints[0][n]),a&&(h[s]-=d[s][n]*this.objectPoints[0][n]);return t.euclidean<i.euclidean?new POS.Pose(t.pixels,c,f,i.pixels,d,h):new POS.Pose(i.pixels,d,h,t.pixels,c,f)},POS.Posit.prototype.pos=function(e,t,i,r){var a,s,n,o,l,u,c,d,f,h,p=this.objectPoints.length,m=[],b=[],g=[],v=[],w=[],k=[],y=[],_=[];for(f=0;f<p;++f)m[f]=[e[f].x-e[0].x,e[f].y-e[0].y];for(f=0;f<3;++f)for(b[f]=0,g[f]=0,h=0;h<p;++h)b[f]+=this.objectMatrix[f][h]*m[h][0],g[f]+=this.objectMatrix[f][h]*m[h][1];for(a=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],s=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],n=b[0]*g[0]+b[1]*g[1]+b[2]*g[2],o=(s-a)*(s-a)+n*n*4,l=s-a>=0?(s-a+Math.sqrt(o))/2:(s-a-Math.sqrt(o))/2,l>=0?(u=Math.sqrt(l),c=0===u?0:-n/u):(u=Math.sqrt(-n*n/l),c=0===u?Math.sqrt(a-s):-n/u),f=0;f<3;++f)v[f]=b[f]+u*this.objectNormal[f],w[f]=g[f]+c*this.objectNormal[f];for(d=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]),f=0;f<3;++f)k[f]=v[f]/d,y[f]=w[f]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],f=0;f<3;++f)t[0][f]=k[f],t[1][f]=y[f],t[2][f]=_[f];for(f=0;f<3;++f)v[f]=b[f]-u*this.objectNormal[f],w[f]=g[f]-c*this.objectNormal[f];for(f=0;f<3;++f)k[f]=v[f]/d,y[f]=w[f]/d;for(_[0]=k[1]*y[2]-k[2]*y[1],_[1]=k[2]*y[0]-k[0]*y[2],_[2]=k[0]*y[1]-k[1]*y[0],f=0;f<3;++f)i[0][f]=k[f],i[1][f]=y[f],i[2][f]=_[f];r[0]=e[0].x/d,r[1]=e[0].y/d,r[2]=this.focalLength/d},POS.Posit.prototype.isValid=function(e,t){for(var i,r=this.objectPoints.length,a=1/0,s=0;s<r;++s)i=t[2]+(e[2][0]*this.objectVectors[s][0]+e[2][1]*this.objectVectors[s][1]+e[2][2]*this.objectVectors[s][2]),i<a&&(a=i);return a>=0},POS.Posit.prototype.iterate=function(e,t,i,r,a){var s,n,o,l,u,c,d,f,h,p=this.objectPoints.length,m=[],b=[],g=[[],[],[]],v=[[],[],[]],w=[],k=[],y=!1,_=0;for(f=0;f<p;++f)m[f]={x:e[f].x,y:e[f].y};for(f=0;f<3;++f){for(h=0;h<3;++h)r[f][h]=t[f][h];a[f]=i[f]}for(f=0;f<p;++f){for(o=0,h=0;h<3;++h)o+=this.objectVectors[f][h]*r[2][h]/a[2];b[f]={x:(1+o)*e[f].x,y:(1+o)*e[f].y}}for(n=0,f=0;f<p;++f)n+=Math.abs(b[f].x-m[f].x),n+=Math.abs(b[f].y-m[f].y);for(f=0;f<3;++f)w[f]=a[f]-(r[f][0]*this.objectPoints[0][0]+r[f][1]*this.objectPoints[0][1]+r[f][2]*this.objectPoints[0][2]);l=u=this.error(e,r,w),y=0===u.pixels||n<.01;while(_++<100&&!y){for(f=0;f<p;++f)m[f].x=b[f].x,m[f].y=b[f].y;for(this.pos(b,g,v,a),f=0;f<3;++f)w[f]=a[f]-(g[f][0]*this.objectPoints[0][0]+g[f][1]*this.objectPoints[0][1]+g[f][2]*this.objectPoints[0][2]),k[f]=a[f]-(v[f][0]*this.objectPoints[0][0]+v[f][1]*this.objectPoints[0][1]+v[f][2]*this.objectPoints[0][2]);if(u=this.error(e,g,w),c=this.error(e,v,k),u.euclidean>=0&&c.euclidean>=0)if(c.euclidean<u.euclidean)for(l=c,f=0;f<3;++f)for(h=0;h<3;++h)r[f][h]=v[f][h];else for(l=u,f=0;f<3;++f)for(h=0;h<3;++h)r[f][h]=g[f][h];if(u.euclidean<0&&c.euclidean>=0)for(l=c,f=0;f<3;++f)for(h=0;h<3;++h)r[f][h]=v[f][h];if(c.euclidean<0&&u.euclidean>=0)for(l=u,f=0;f<3;++f)for(h=0;h<3;++h)r[f][h]=g[f][h];for(f=0;f<p;++f){for(o=0,h=0;h<3;++h)o+=this.objectVectors[f][h]*r[2][h]/a[2];b[f].x=(1+o)*e[f].x,b[f].y=(1+o)*e[f].y}for(s=n,n=0,f=0;f<p;++f)n+=Math.abs(b[f].x-m[f].x),n+=Math.abs(b[f].y-m[f].y);d=Math.abs(n-s),y=0===l.pixels||d<.01}return l},POS.Posit.prototype.error=function(e,t,i){var r,a,s,n=this.objectPoints.length,o=[],l=[],u=[],c=0,d=0,f=0;if(!this.isValid(t,i))return{euclidean:-1,pixels:-1,maximum:-1};for(r=0;r<n;++r)for(o[r]=[],a=0;a<3;++a)o[r][a]=i[a];for(r=0;r<n;++r)for(a=0;a<3;++a)for(s=0;s<3;++s)o[r][a]+=t[a][s]*this.objectPoints[r][s];for(r=0;r<n;++r)for(l[r]=[],a=0;a<2;++a)l[r][a]=this.focalLength*o[r][a]/o[r][2];for(r=0;r<n;++r)u[r]=[l[r][0]-e[r].x,l[r][1]-e[r].y];for(r=0;r<n;++r)c+=Math.sqrt(u[r][0]*u[r][0]+u[r][1]*u[r][1]),d+=Math.abs(Math.round(l[r][0])-Math.round(e[r].x))+Math.abs(Math.round(l[r][1])-Math.round(e[r].y)),Math.abs(u[r][0])>f&&(f=Math.abs(u[r][0])),Math.abs(u[r][1])>f&&(f=Math.abs(u[r][1]));return{euclidean:c/n,pixels:d,maximum:f}},POS.pseudoInverse=function(e,t,i){var r,a,s,n=[],o=[[],[],[]],l=[[],[],[]],u=0,c=0;for(SVD.svdcmp(e,t,3,n,o),r=0;r<3;++r)n[r]>u&&(u=n[r]);for(u*=.01,r=0;r<3;++r)n[r]<u&&(n[r]=0);for(a=0;a<3;++a)if(0===n[a])for(++c,s=a;s<2;++s){for(r=0;r<t;++r)e[r][s]=e[r][s+1];for(r=0;r<3;++r)o[r][s]=o[r][s+1]}for(a=0;a<2;++a)0===n[a]&&(n[a]=n[a+1]);for(r=0;r<3;++r)for(a=0;a<3-c;++a)l[r][a]=o[r][a]/n[a];for(r=0;r<3;++r)for(a=0;a<t;++a)for(i[r][a]=0,s=0;s<3-c;++s)i[r][a]+=l[r][s]*e[a][s]},POS.Pose=function(e,t,i,r,a,s){this.bestError=e,this.bestRotation=t,this.bestTranslation=i,this.alternativeError=r,this.alternativeRotation=a,this.alternativeTranslation=s};var SVD=SVD||{};SVD.svdcmp=function(e,t,i,r,a){var s,n,o,l,u,c,d,f,h,p,m,b,g,v,w,k=0,y=0,_=0,S=[];for(n=0;n<i;++n){if(d=n+1,S[n]=_*y,y=b=_=0,n<t){for(c=n;c<t;++c)_+=Math.abs(e[c][n]);if(0!==_){for(c=n;c<t;++c)e[c][n]/=_,b+=e[c][n]*e[c][n];for(p=e[n][n],y=-SVD.sign(Math.sqrt(b),p),m=p*y-b,e[n][n]=p-y,l=d;l<i;++l){for(b=0,c=n;c<t;++c)b+=e[c][n]*e[c][l];for(p=b/m,c=n;c<t;++c)e[c][l]+=p*e[c][n]}for(c=n;c<t;++c)e[c][n]*=_}}if(r[n]=_*y,y=b=_=0,n<t&&n!==i-1){for(c=d;c<i;++c)_+=Math.abs(e[n][c]);if(0!==_){for(c=d;c<i;++c)e[n][c]/=_,b+=e[n][c]*e[n][c];for(p=e[n][d],y=-SVD.sign(Math.sqrt(b),p),m=p*y-b,e[n][d]=p-y,c=d;c<i;++c)S[c]=e[n][c]/m;for(l=d;l<t;++l){for(b=0,c=d;c<i;++c)b+=e[l][c]*e[n][c];for(c=d;c<i;++c)e[l][c]+=b*S[c]}for(c=d;c<i;++c)e[n][c]*=_}}k=Math.max(k,Math.abs(r[n])+Math.abs(S[n]))}for(n=i-1;n>=0;--n){if(n<i-1){if(0!==y){for(l=d;l<i;++l)a[l][n]=e[n][l]/e[n][d]/y;for(l=d;l<i;++l){for(b=0,c=d;c<i;++c)b+=e[n][c]*a[c][l];for(c=d;c<i;++c)a[c][l]+=b*a[c][n]}}for(l=d;l<i;++l)a[n][l]=a[l][n]=0}a[n][n]=1,y=S[n],d=n}for(n=Math.min(i,t)-1;n>=0;--n){for(d=n+1,y=r[n],l=d;l<i;++l)e[n][l]=0;if(0!==y){for(y=1/y,l=d;l<i;++l){for(b=0,c=d;c<t;++c)b+=e[c][n]*e[c][l];for(p=b/e[n][n]*y,c=n;c<t;++c)e[c][l]+=p*e[c][n]}for(l=n;l<t;++l)e[l][n]*=y}else for(l=n;l<t;++l)e[l][n]=0;++e[n][n]}for(c=i-1;c>=0;--c)for(o=1;o<=30;++o){for(s=!0,d=c;d>=0;--d){if(f=d-1,Math.abs(S[d])+k===k){s=!1;break}if(Math.abs(r[f])+k===k)break}if(s)for(h=0,b=1,n=d;n<=c;++n){if(p=b*S[n],Math.abs(p)+k===k)break;for(y=r[n],m=SVD.pythag(p,y),r[n]=m,m=1/m,h=y*m,b=-p*m,l=1;l<=t;++l)v=e[l][f],w=e[l][n],e[l][f]=v*h+w*b,e[l][n]=w*h-v*b}if(w=r[c],d===c){if(w<0)for(r[c]=-w,l=0;l<i;++l)a[l][c]=-a[l][c];break}if(30===o)return!1;for(g=r[d],f=c-1,v=r[f],y=S[f],m=S[c],p=((v-w)*(v+w)+(y-m)*(y+m))/(2*m*v),y=SVD.pythag(p,1),p=((g-w)*(g+w)+m*(v/(p+SVD.sign(y,p))-m))/g,h=b=1,l=d;l<=f;++l){for(n=l+1,y=S[n],v=r[n],m=b*y,y*=h,w=SVD.pythag(p,m),S[l]=w,h=p/w,b=m/w,p=g*h+y*b,y=y*h-g*b,m=v*b,v*=h,u=0;u<i;++u)g=a[u][l],w=a[u][n],a[u][l]=g*h+w*b,a[u][n]=w*h-g*b;for(w=SVD.pythag(p,m),r[l]=w,0!==w&&(w=1/w,h=p*w,b=m*w),p=h*y+b*v,g=h*v-b*y,u=0;u<t;++u)v=e[u][l],w=e[u][n],e[u][l]=v*h+w*b,e[u][n]=w*h-v*b}S[d]=0,S[c]=p,r[c]=g}return!0},SVD.pythag=function(e,t){var i,r=Math.abs(e),a=Math.abs(t);return r>a?(i=a/r,r*Math.sqrt(1+i*i)):0===a?0:(i=r/a,a*Math.sqrt(1+i*i))},SVD.sign=function(e,t){return t>=0?Math.abs(e):-Math.abs(e)};var THREEx=THREEx||{};THREEx.ArucoContext=function(e){e=e||{},this.parameters={debug:void 0!==e.debug&&e.debug,canvasWidth:void 0!==e.canvasWidth?e.canvasWidth:640,canvasHeight:void 0!==e.canvasHeight?e.canvasHeight:480},this.canvas=document.createElement("canvas"),this.detector=new AR.Detector,this.debug=null,1==e.debug&&(this.debug=new THREEx.ArucoDebug(this)),this.setSize(this.parameters.canvasWidth,this.parameters.canvasHeight)},THREEx.ArucoContext.prototype.setSize=function(e,t){this.canvas.width=e,this.canvas.height=t,null!==this.debug&&this.debug.setSize(e,t)},THREEx.ArucoContext.prototype.detect=function(e){var t=this.canvas,i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height);var r=i.getImageData(0,0,t.width,t.height),a=this.detector.detect(r);return a},THREEx.ArucoContext.prototype.updateObject3D=function(e,t,i,r){for(var a=r.corners,s=this.canvas,n=new Array(a.length),o=0;o<a.length;++o){var l=a[o];n[o]={x:l.x-s.width/2,y:-l.y+s.height/2}}var u=t.pose(n),c=u.bestRotation,d=u.bestTranslation;e.position.x=d[0],e.position.y=d[1],e.position.z=-d[2],e.rotation.x=-Math.asin(-c[1][2]),e.rotation.y=-Math.atan2(c[0][2],c[2][2]),e.rotation.z=Math.atan2(c[1][0],c[1][1]),e.scale.x=i,e.scale.y=i,e.scale.z=i};var THREEx=THREEx||{};AR.Detector.prototype.detect=function(e){var t=this.datGUIOptions;return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,t.adaptativeThreshold.kernelSize,t.adaptativeThreshold.threshold),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,e.width*t.candidates.minSize,t.candidates.epsilon,t.candidates.minLength),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,t.notTooNear.minDist),this.findMarkers(this.grey,this.candidates,t.findMarkers.warpSize)},AR.Detector.prototype.datGUIOptions={adaptativeThreshold:{kernelSize:2,threshold:7},candidates:{minSize:.2,epsilon:.05,minLength:10},notTooNear:{minDist:10},findMarkers:{warpSize:49}},THREEx.addArucoDatGui=function(e,t){e.detector.datGUIOptions;var i={resolution:"640x480"},r=function(){var t=i.resolution.match(/(\d+)x(\d+)/),r=parseInt(t[1]),a=parseInt(t[2]);e.setSize(r,a)};r(),t.add(i,"resolution",["320x240","640x480"]).onChange(r);var a=t.addFolder("Adaptative Threshold");a.open(),a.add(e.detector.datGUIOptions.adaptativeThreshold,"kernelSize").min(0).step(1).onChange(r),a.add(e.detector.datGUIOptions.adaptativeThreshold,"threshold").min(0).step(1).onChange(r);a=t.addFolder("Candidates");a.open(),a.add(e.detector.datGUIOptions.candidates,"minSize").min(0).max(1).onChange(r),a.add(e.detector.datGUIOptions.candidates,"epsilon").min(0).onChange(r),a.add(e.detector.datGUIOptions.candidates,"minLength").min(0).step(1).onChange(r);a=t.addFolder("notTooNear");a.open(),a.add(e.detector.datGUIOptions.notTooNear,"minDist").min(0).step(1).onChange(r);a=t.addFolder("findMarkers");a.open(),a.add(e.detector.datGUIOptions.findMarkers,"warpSize").min(0).step(1).onChange(r)};var THREEx=THREEx||{};THREEx.ArucoDebug=function(e){this.arucoContext=e,this.canvasElement=document.createElement("canvas"),this.canvasElement.width=this.arucoContext.canvas.width,this.canvasElement.height=this.arucoContext.canvas.height},THREEx.ArucoDebug.prototype.setSize=function(e,t){this.canvasElement.width!==e&&(this.canvasElement.width=e),this.canvasElement.height!==t&&(this.canvasElement.height=t)},THREEx.ArucoDebug.prototype.clear=function(){var e=this.canvasElement,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},THREEx.ArucoDebug.prototype.drawContoursContours=function(){var e=this.arucoContext.detector.contours,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(e){return e?"magenta":"blue"}))},THREEx.ArucoDebug.prototype.drawContoursPolys=function(){var e=this.arucoContext.detector.polys,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"green"}))},THREEx.ArucoDebug.prototype.drawContoursCandidates=function(){var e=this.arucoContext.detector.candidates,t=this.canvasElement;this.drawContours(e,0,0,t.width,t.height,(function(){return"red"}))},THREEx.ArucoDebug.prototype.drawContours=function(e,t,i,r,a,s){var n,o,l,u=e.length,c=this.canvasElement,d=c.getContext("2d");d.save();while(u--){for(o=e[u],d.strokeStyle=s(o.hole),d.beginPath(),n=0;n<o.length;++n)l=o[n],d.moveTo(t+l.x,i+l.y),l=o[(n+1)%o.length],d.lineTo(t+l.x,i+l.y);d.stroke(),d.closePath()}d.restore()},THREEx.ArucoDebug.prototype.drawDetectorGrey=function(){var e=arucoContext.detector.grey;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawDetectorThreshold=function(){var e=arucoContext.detector.thres;this.drawCVImage(e)},THREEx.ArucoDebug.prototype.drawCVImage=function(e){this.arucoContext.detector;var t=this.canvasElement,i=t.getContext("2d"),r=i.createImageData(t.width,t.height);this.copyCVImage2ImageData(e,r),i.putImageData(r,0,0)},THREEx.ArucoDebug.prototype.copyCVImage2ImageData=function(e,t){var i=e.data.length,r=4*i+3;while(i--)t.data[r-=4]=255,t.data[r-1]=t.data[r-2]=t.data[r-3]=e.data[i];return t},THREEx.ArucoDebug.prototype.drawVideo=function(e){var t=this.canvasElement,i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height)},THREEx.ArucoDebug.prototype.drawMarkerIDs=function(e){var t,i,r,a,s,n,o=this.canvasElement,l=o.getContext("2d");for(l.save(),l.strokeStyle="blue",l.lineWidth=1,s=0;s!==e.length;++s){for(t=e[s].corners,r=1/0,a=1/0,n=0;n!==t.length;++n)i=t[n],r=Math.min(r,i.x),a=Math.min(a,i.y);l.strokeText(e[s].id,r,a)}l.restore()},THREEx.ArucoDebug.prototype.drawMarkerCorners=function(e){var t,i,r,a,s=this.canvasElement,n=s.getContext("2d");for(n.save(),n.lineWidth=3,r=0;r<e.length;++r){for(t=e[r].corners,n.strokeStyle="red",n.beginPath(),a=0;a<t.length;++a)i=t[a],n.moveTo(i.x,i.y),i=t[(a+1)%t.length],n.lineTo(i.x,i.y);n.stroke(),n.closePath(),n.strokeStyle="green",n.strokeRect(t[0].x-2,t[0].y-2,4,4)}n.restore()};var THREEx=THREEx||{};THREEx.ArucoMarkerGenerator=function(){},THREEx.ArucoMarkerGenerator.createSVG=function(e,t){var i=document.createElement("div");return i.innerHTML=new ArucoMarker(e).toSVG(t),i},THREEx.ArucoMarkerGenerator.createImage=function(e,t){var i=this.createCanvas(e,t),r=i.toDataURL(),a=document.createElement("img");return a.src=r,a},THREEx.ArucoMarkerGenerator.createCanvas=function(e,t){var i=document.createElement("canvas"),r=i.getContext("2d");i.width=t,i.height=t;var a=new ArucoMarker(e),s=a.markerMatrix(),n=.1*i.width,o=t-2*n,l=o/7;r.fillStyle="white",r.fillRect(0,0,i.width,i.height),r.fillStyle="black",r.fillRect(n,n,i.width-2*n,i.height-2*n);for(var u=0;u<5;u++)for(var c=0;c<5;c++)1===s[c][u]&&(r.fillStyle="white",r.fillRect(n+(c+1)*l,n+(u+1)*l,l+1,l+1));return i};var THREE=THREE||__webpack_require__("5a89");THREE.WebAR={},THREE.WebAR.MAX_FLOAT32_VALUE=34028e34,THREE.WebAR.VRPointCloud=function(e){this._vrDisplay=e,this._numberOfPointsInLastPointCloud=0,this._bufferGeometry=new THREE.BufferGeometry,this._bufferGeometry.frustumCulled=!1;var t=null;e?(this._pointCloud=new VRPointCloud,e.getPointCloud(this._pointCloud,!1,0,!1),t=this._pointCloud.points):t=new Float32Array([-1,1,-2,1,1,-2,1,-1,-2,-1,-1,-2]);for(var i=new Float32Array(t.length),r=new THREE.Color,a=0;a<i.length;a+=3)e&&(t[a]=THREE.WebAR.MAX_FLOAT32_VALUE,t[a+1]=THREE.WebAR.MAX_FLOAT32_VALUE,t[a+2]=THREE.WebAR.MAX_FLOAT32_VALUE),r.setRGB(1,1,1),i[a]=r.r,i[a+1]=r.g,i[a+2]=r.b;return this._positions=new THREE.BufferAttribute(t,3),this._bufferGeometry.addAttribute("position",this._positions),this._colors=new THREE.BufferAttribute(i,3),this._bufferGeometry.addAttribute("color",this._colors),this._bufferGeometry.computeBoundingSphere(),this},THREE.WebAR.VRPointCloud.prototype.getBufferGeometry=function(){return this._bufferGeometry},THREE.WebAR.VRPointCloud.prototype.update=function(e,t,i){this._vrDisplay&&(this._vrDisplay.getPointCloud(this._pointCloud,!e,"number"===typeof t?t:0,!!i),e&&this._pointCloud.numberOfPoints>0&&(this._positions.needsUpdate=!0))},THREE.WebAR.getIndexFromOrientation=function(e){var t=0;switch(e){case 90:t=1;break;case 180:t=2;break;case 270:t=3;break;default:t=0;break}return t},THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations=function(e){var t=screen.orientation.angle,i=e?e.getSeeThroughCamera():null,r=i?i.orientation:0,a=THREE.WebAR.getIndexFromOrientation(r),s=THREE.WebAR.getIndexFromOrientation(t);return ret=s-a,ret<0&&(ret+=4),ret%4},THREE.WebAR.createVRSeeThroughCameraMesh=function(e,t){var i=new THREE.BufferGeometry;if(e){var r=e.getSeeThroughCamera();if(!r)throw"ERROR: Could not get the see through camera!";n=r,n.readyState=2,n.HAVE_CURRENT_DATA=2;var a=r.width/r.textureWidth,s=r.height/r.textureHeight;i.WebAR_textureCoords=[new Float32Array([0,0,0,s,a,0,a,s]),new Float32Array([a,0,0,0,a,s,0,s]),new Float32Array([a,s,a,0,0,s,0,0]),new Float32Array([0,s,a,s,0,0,a,0])]}else{var n=document.createElement("video");n.src="string"===typeof t?t:"../../resources/videos/sintel.webm",n.play(),i.WebAR_textureCoords=[new Float32Array([0,0,0,1,1,0,1,1]),new Float32Array([1,0,0,0,1,1,0,1]),new Float32Array([1,1,1,0,0,1,0,0]),new Float32Array([0,1,1,1,0,0,1,0])]}i.addAttribute("position",new THREE.BufferAttribute(new Float32Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]),3)),i.setIndex(new THREE.BufferAttribute(new Uint16Array([0,1,2,2,1,3]),1)),i.WebAR_textureCoordIndex=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);var o=i.WebAR_textureCoords[i.WebAR_textureCoordIndex];i.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(o),2)),i.computeBoundingSphere();var l,u=new THREE.VideoTexture(n);if(u.minFilter=THREE.NearestFilter,u.magFilter=THREE.NearestFilter,u.format=THREE.RGBFormat,u.flipY=!1,e){var c=["attribute vec3 position;","attribute vec2 uv;","","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","","varying vec2 vUV;","","void main(void) {","    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","    vUV = uv;","}"],d=["#extension GL_OES_EGL_image_external : require","precision mediump float;","","varying vec2 vUV;","","uniform samplerExternalOES map;","","void main(void) {","   gl_FragColor = texture2D(map, vUV);","}"];l=new THREE.RawShaderMaterial({uniforms:{map:{type:"t",value:u}},vertexShader:c.join("\r\n"),fragmentShader:d.join("\r\n"),side:THREE.DoubleSide})}else l=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:u});var f=new THREE.Mesh(i,l);return f},THREE.WebAR.updateCameraMeshOrientation=function(e,t){var i=THREE.WebAR.getIndexFromScreenAndSeeThroughCameraOrientations(e);if(i!=t.geometry.WebAR_textureCoordIndex){var r=t.geometry.getAttribute("uv"),a=t.geometry.WebAR_textureCoords[i];t.geometry.WebAR_textureCoordIndex=i;for(var s=0;s<r.length;s++)r.array[s]=a[s];r.needsUpdate=!0}},THREE.WebAR.createVRSeeThroughCamera=function(e,t,i){var r=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,t,i);return e&&THREE.WebAR.resizeVRSeeThroughCamera(e,r),r},THREE.WebAR.resizeVRSeeThroughCamera=function(e,t){if(t.aspect=window.innerWidth/window.innerHeight,e){var i=window.innerWidth>window.innerHeight,r=e.getSeeThroughCamera();if(r){var a=r.width>r.height,s=!(i&&a),n=s?r.height:r.width,o=s?r.width:r.height,l=s?r.focalLengthY:r.focalLengthX,u=s?r.focalLengthX:r.focalLengthY,c=s?r.pointY:r.pointX,d=s?r.pointX:r.pointY,f=t.near/l,h=t.near/u,p=(c-n/2)*f,m=-(d-o/2)*h,b=f*-n/2-p,g=f*n/2-p,v=h*-o/2-m,w=h*o/2-m;t.projectionMatrix.makePerspective(b,g,w,v,t.near,t.far),t.fov=2*THREE.Math.radToDeg(Math.atan(w*t.zoom/t.near))}}else t.updateProjectionMatrix()},THREE.WebAR._worldUp=new THREE.Vector3(0,1,0),THREE.WebAR._normalY=new THREE.Vector3,THREE.WebAR._normalZ=new THREE.Vector3,THREE.WebAR._rotationMatrix=new THREE.Matrix4,THREE.WebAR._planeNormal=new THREE.Vector3,THREE.WebAR.rotateObject3D=function(e,t,i){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown normal1 type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}if(t instanceof THREE.Vector3||t instanceof THREE.Vector4)THREE.WebAR._normalZ.set(t.x,t.y,t.z);else{if(!(e instanceof Float32Array))throw"Unknown normal2 type.";THREE.WebAR._normalZ.set(t[0],t[1],t[2])}THREE.WebAR._normalY.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalZ).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalZ.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalY.z,i.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.rotateObject3DWithPickingPlane=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)THREE.WebAR._planeNormal.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown plane type.";THREE.WebAR._planeNormal.set(e[0],e[1],e[2])}THREE.WebAR._normalY.set(0,1,0);var i=.5;Math.abs(THREE.WebAR._planeNormal.dot(THREE.WebAR._worldUp))>i&&THREE.WebAR._normalY.set(0,0,1),THREE.WebAR._normalZ.crossVectors(THREE.WebAR._planeNormal,THREE.WebAR._normalY).normalize(),THREE.WebAR._normalY.crossVectors(THREE.WebAR._normalZ,THREE.WebAR._planeNormal).normalize(),THREE.WebAR._rotationMatrix.elements[0]=THREE.WebAR._planeNormal.x,THREE.WebAR._rotationMatrix.elements[1]=THREE.WebAR._planeNormal.y,THREE.WebAR._rotationMatrix.elements[2]=THREE.WebAR._planeNormal.z,THREE.WebAR._rotationMatrix.elements[4]=THREE.WebAR._normalY.x,THREE.WebAR._rotationMatrix.elements[5]=THREE.WebAR._normalY.y,THREE.WebAR._rotationMatrix.elements[6]=THREE.WebAR._normalY.z,THREE.WebAR._rotationMatrix.elements[8]=THREE.WebAR._normalZ.x,THREE.WebAR._rotationMatrix.elements[9]=THREE.WebAR._normalZ.y,THREE.WebAR._rotationMatrix.elements[10]=THREE.WebAR._normalZ.z,t.quaternion.setFromRotationMatrix(THREE.WebAR._rotationMatrix)},THREE.WebAR.positionObject3DWithPickingPoint=function(e,t){if(e instanceof THREE.Vector3||e instanceof THREE.Vector4)t.position.set(e.x,e.y,e.z);else{if(!(e instanceof Float32Array))throw"Unknown point type.";t.position.set(e[0],e[1],e[2])}},THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud=function(e,t,i){THREE.WebAR.rotateObject3DWithPickingPlane(e.plane,t),THREE.WebAR.positionObject3DWithPickingPoint(e.point,t),t.position.add(THREE.WebAR._planeNormal.multiplyScalar(i))},THREE.WebAR.positionAndRotateObject3D=function(e,t,i,r,a){THREE.WebAR.rotateObject3D(t,i,r),THREE.WebAR.positionObject3DWithPickingPoint(e,r),r.position.add(THREE.WebAR._planeNormal.multiplyScalar(a))},function(e,t){__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(){return{WebAR:THREE.WebAR,THREEx:THREEx}})),function(e){function t(e,t,i,r,a){this._listener=t,this._isOnce=i,this.context=r,this._signal=e,this._priority=a||0}function i(e,t){if("function"!==typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}var r={VERSION:"0.7.4"};t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.Signal=function(){this._bindings=[],this._prevParams=null},r.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,i,r,a){var s=this._indexOfListener(e,r);if(-1!==s){if(e=this._bindings[s],e.isOnce()!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,i,r,a),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===e&&i.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,r){return i(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return i(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){i(e,"remove");var r=this._indexOfListener(e,t);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,i=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=i),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(i))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function(e){this.id=THREEx.ArBaseControls.id++,this.object3d=e,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(e){this._sourceElement=e;var t=parseInt(e.style.width),i=parseInt(e.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,t/i,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var e=this._sourceElement,t=this._cameraPicking,i=parseInt(e.style.width),r=parseInt(e.style.height);t.aspect=i/r,t.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(e,t){var i=this._sourceElement,r=this._cameraPicking,a=new THREE.Vector3;a.x=e.layerX/parseInt(i.style.width)*2-1,a.y=-e.layerY/parseInt(i.style.height)*2+1;var s=new THREE.Raycaster;s.setFromCamera(a,r);var n=s.intersectObjects(t);return n},THREEx.ARClickability.prototype.update=function(){},THREEx.ARClickability.tangoPickingPointCloud=function(e,t,i){var r=e._tangoContext.vrDisplay;if(null===r)return null;var a=r.getPickingPointAndPlaneInPointCloud(t,i);if(null==a)return console.warn("Could not retrieve the correct point and plane."),null;var s=.01,n=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(a,n,s),n.rotateZ(-Math.PI/2);var o={};return o.position=n.position,o.quaternion=n.quaternion,o};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(e){var t=!0,i=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),r=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:e},opacity:{value:.5}},defines:{updateInShaderEnabled:t?1:0}}),a=new THREE.Mesh(i,r);a.rotation.x=-Math.PI/2,this.object3d=a;for(var s=-.65,n=.65,o=.75,l=1.05,u=[[]],c=0;c<a.geometry.faces.length;c++)u[0][c]=[],u[0][c][0]=new THREE.Vector2,u[0][c][1]=new THREE.Vector2,u[0][c][2]=new THREE.Vector2;for(var d=0;d<a.geometry.parameters.heightSegments/2;d++)u[0][4*d+0][0].set(s/2+.5,l/2+.5),u[0][4*d+0][1].set(s/2+.5,o/2+.5),u[0][4*d+0][2].set(n/2+.5,l/2+.5),u[0][4*d+1][0].set(s/2+.5,o/2+.5),u[0][4*d+1][1].set(n/2+.5,o/2+.5),u[0][4*d+1][2].set(n/2+.5,l/2+.5),u[0][4*d+2][0].set(s/2+.5,o/2+.5),u[0][4*d+2][1].set(s/2+.5,l/2+.5),u[0][4*d+2][2].set(n/2+.5,o/2+.5),u[0][4*d+3][0].set(s/2+.5,l/2+.5),u[0][4*d+3][1].set(n/2+.5,l/2+.5),u[0][4*d+3][2].set(n/2+.5,o/2+.5);!0===t&&(a.geometry.faceVertexUvs=u,a.geometry.uvsNeedUpdate=!0);var f=[];f.push(new THREE.Vector3(s,l,0)),f.push(new THREE.Vector3(n,l,0)),f.push(new THREE.Vector3(s,o,0)),f.push(new THREE.Vector3(n,o,0));r=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),i=new THREE.PlaneGeometry(1,1);var h=new THREE.Mesh(i,r);return this.orthoMesh=h,void(this.update=function(e,i){m(e,i),!1===t&&p(e,i)});function p(e,t){var i=new THREE.Vector3;u[0].forEach((function(r,s){r.forEach((function(r,n){i.x=2*r.x-1,i.y=2*r.y-1,i.z=0,i.applyMatrix4(e),i.applyMatrix4(t),i.x/=i.z,i.y/=i.z,i.x=i.x/2+.5,i.y=i.y/2+.5,a.geometry.faceVertexUvs[0][s][n].set(i.x,i.y)}))})),a.geometry.uvsNeedUpdate=!0}function m(e,t){var i=[];f.forEach((function(r,a){var s=r.clone();s.applyMatrix4(e),s.applyMatrix4(t),s.x/=s.z,s.y/=s.z,i.push(s)}));for(var r=0;r<i.length;r++)h.geometry.vertices[r].copy(i[r]);h.geometry.computeBoundingSphere(),h.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction="\n        vec2 transformUvToMarkerSpace(vec2 originalUv){\n                vec3 transformedUv;\n                // set transformedUv - from UV coord to clip coord\n                transformedUv.x = originalUv.x * 2.0 - 1.0;\n                transformedUv.y = originalUv.y * 2.0 - 1.0;\n                transformedUv.z = 0.0;\n\n\t\t// apply modelViewMatrix and projectionMatrix\n                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;\n\n\t\t// apply perspective\n\t\ttransformedUv.x /= transformedUv.z;\n\t\ttransformedUv.y /= transformedUv.z;\n\n                // set back from clip coord to Uv coord\n                transformedUv.x = transformedUv.x / 2.0 + 0.5;\n                transformedUv.y = transformedUv.y / 2.0 + 0.5;\n\n                // return the result\n                return transformedUv.xy;\n        }",THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+"\tvarying vec2 vUv;\n\n\tvoid main(){\n                // pass the UV to the fragment\n                #if (updateInShaderEnabled == 1)\n\t\t        vUv = transformUvToMarkerSpace(uv);\n                #else\n\t\t        vUv = uv;\n                #endif\n\n                // compute gl_Position\n\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}",THREEx.ArMarkerCloak.fragmentShader="\n\tvarying vec2 vUv;\n\tuniform sampler2D texture;\n\tuniform float opacity;\n\n\tvoid main(void){\n\t\tvec3 color = texture2D( texture, vUv ).rgb;\n\n\t\tgl_FragColor = vec4( color, opacity);\n\t}";var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function(e,t,i){var r=this;THREEx.ArBaseControls.call(this,t),this.context=e,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6};var a=["pattern","barcode","unknown"];console.assert(-1!==a.indexOf(this.parameters.type),"illegal value",this.parameters.type);a=["modelViewMatrix","cameraTransformMatrix"];function s(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){var a=r.parameters[t];void 0!==a?r.parameters[t]=i:console.warn("THREEx.ArMarkerControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArMarkerControls: '"+t+"' parameter is undefined.")}}console.assert(-1!==a.indexOf(this.parameters.changeMatrixMode),"illegal value",this.parameters.changeMatrixMode),this.object3d=t,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,s(i),e.addMarker(this),"artoolkit"===r.context.parameters.trackingBackend?this._initArtoolkit():"aruco"===r.context.parameters.trackingBackend?this._arucoPosit=new POS.Posit(this.parameters.size,r.context.arucoContext.canvas.width):"tango"===r.context.parameters.trackingBackend?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function(e){var t=this.object3d;if(t.visible=!0,"artoolkit"===this.context.parameters.trackingBackend){var i=(new THREE.Matrix4).copy(this.context._artoolkitProjectionAxisTransformMatrix);i.multiply(e),e.copy(i)}else"aruco"===this.context.parameters.trackingBackend||"tango"===this.context.parameters.trackingBackend||console.assert(!1);if("tango"!==this.context.parameters.trackingBackend){var r=(new THREE.Matrix4).makeRotationX(Math.PI/2);e.multiply(r)}"modelViewMatrix"===this.parameters.changeMatrixMode?t.matrix.copy(e):"cameraTransformMatrix"===this.parameters.changeMatrixMode?t.matrix.getInverse(e):console.assert(!1),t.matrix.decompose(t.position,t.quaternion,t.scale),this.dispatchEvent({type:"markerFound"})},ARjs.MarkerControls.prototype.name=function(){var e="";if(e+=this.parameters.type,"pattern"===this.parameters.type){var t=this.parameters.patternUrl,i=t.replace(/^.*\//g,"");e+=" - "+i}else"barcode"===this.parameters.type?e+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return e},ARjs.MarkerControls.prototype._initArtoolkit=function(){var e=this,t=null,i=setInterval((function(){var t=e.context.arController;null!==t&&(clearInterval(i),i=null,r())}),20);return;function r(){var i=e.context.arController;console.assert(null!==i),"pattern"===e.parameters.type?i.loadMarker(e.parameters.patternUrl,(function(r){t=r,i.trackPatternMarkerId(t,e.parameters.size)})):"barcode"===e.parameters.type?(t=e.parameters.barcodeValue,i.trackBarcodeMarkerId(t,e.parameters.size)):"unknown"===e.parameters.type?t=null:console.log(!1,"invalid marker type",e.parameters.type),i.addEventListener("getMarker",(function(i){if(i.data.type===artoolkit.PATTERN_MARKER&&"pattern"===e.parameters.type){if(null===t)return;i.data.marker.idPatt===t&&a(i)}else if(i.data.type===artoolkit.BARCODE_MARKER&&"barcode"===e.parameters.type){if(null===t)return;i.data.marker.idMatrix===t&&a(i)}else i.data.type===artoolkit.UNKNOWN_MARKER&&"unknown"===e.parameters.type&&a(i)}))}function a(t){if(!(t.data.type===artoolkit.PATTERN_MARKER&&t.data.marker.cfPatt<e.parameters.minConfidence)&&!(t.data.type===artoolkit.BARCODE_MARKER&&t.data.marker.cfMatt<e.parameters.minConfidence)){var i=(new THREE.Matrix4).fromArray(t.data.matrix);e.updateWithModelViewMatrix(i)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(e){this.object3d=new THREE.Group;var t=new THREE.AxisHelper;this.object3d.add(t);var i=e.id,r=document.createElement("canvas");r.width=64,r.height=64;var a=r.getContext("2d"),s=new THREE.CanvasTexture(r);a.font="48px monospace",a.fillStyle="rgba(192,192,255, 0.5)",a.fillRect(0,0,r.width,r.height),a.fillStyle="darkblue",a.fillText(i,r.width/4,3*r.height/4),s.needsUpdate=!0;var n=new THREE.PlaneGeometry(1,1),o=new THREE.MeshBasicMaterial({map:s,transparent:!0});t=new THREE.Mesh(n,o);t.rotation.x=-Math.PI/2,this.object3d.add(t)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(e,t){var i=this;function r(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var a=i.parameters[t];void 0!==a?i.parameters[t]=r:console.warn("THREEx.ArSmoothedControls: '"+t+"' is not a property of this material.")}else console.warn("THREEx.ArSmoothedControls: '"+t+"' parameter is undefined.")}}THREEx.ArBaseControls.call(this,e),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,t=t||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},r(t)},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(e){var t=this.object3d,i=this.parameters,r=t.visible,a=performance.now()/1e3;if(!1===e.visible&&(this._visibleStartedAt=null),!0===e.visible&&(this._unvisibleStartedAt=null),!0===e.visible&&null===this._visibleStartedAt&&(this._visibleStartedAt=a),!1===e.visible&&null===this._unvisibleStartedAt&&(this._unvisibleStartedAt=a),!1===r&&!0===e.visible){var s=a-this._visibleStartedAt;s>=this.parameters.minVisibleDelay&&(t.visible=!0,u())}if(!0===r&&!1===e.visible){var n=a-this._unvisibleStartedAt;n>=this.parameters.minUnvisibleDelay&&(t.visible=!1)}if(null===this._lastLerpStepAt)c(),this._lastLerpStepAt=a;else for(var o=Math.floor((a-this._lastLerpStepAt)/this.parameters.lerpStepDelay),l=0;l<o;l++)c(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;return this.object3d.updateMatrix(),!1===r&&!0===t.visible&&this.dispatchEvent({type:"becameVisible"}),void(!0===r&&!1===t.visible&&this.dispatchEvent({type:"becameUnVisible"}));function u(){t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale)}function c(){t.position.lerp(e.position,i.lerpPosition),t.quaternion.slerp(e.quaternion,i.lerpQuaternion),t.scale.lerp(e.scale,i.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var a=t.parameters[i];void 0!==a?t.parameters[i]=r:console.warn("THREEx.ArToolkitContext: '"+i+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitContext: '"+i+"' parameter is undefined.")}}t._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,imageSmoothingEnabled:!1},console.assert(-1!==["artoolkit","aruco","tango"].indexOf(this.parameters.trackingBackend),"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(-1!==["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode),"invalid parameter detectionMode",this.parameters.detectionMode),this.arController=null,this.arucoContext=null,t.initialized=!1,this._arMarkersControls=[],i(e)},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="1.6.2",ARjs.Context.createDefaultCamera=function(e){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),"artoolkit"===e)var t=new THREE.Camera;else if("aruco"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else if("tango"===e)t=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return t},ARjs.Context.prototype.init=function(e){var t=this;return void("artoolkit"===this.parameters.trackingBackend?this._initArtoolkit(i):"aruco"===this.parameters.trackingBackend?this._initAruco(i):"tango"===this.parameters.trackingBackend?this._initTango(i):console.assert(!1));function i(){t.dispatchEvent({type:"initialized"}),t.initialized=!0,e&&e()}},ARjs.Context.prototype.update=function(e){if("artoolkit"===this.parameters.trackingBackend&&null===this.arController)return!1;var t=performance.now();return!(null!==this._updatedAt&&t-this._updatedAt<1e3/this.parameters.maxDetectionRate)&&(this._updatedAt=t,this._arMarkersControls.forEach((function(e){e.object3d.visible=!1})),"artoolkit"===this.parameters.trackingBackend?this._updateArtoolkit(e):"aruco"===this.parameters.trackingBackend?this._updateAruco(e):"tango"===this.parameters.trackingBackend?this._updateTango(e):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(e)},ARjs.Context.prototype.removeMarker=function(e){console.assert(e instanceof THREEx.ArMarkerControls);var t=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(t!==t),this._arMarkersControls.splice(t,1)},ARjs.Context.prototype._initArtoolkit=function(e){var t=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply((new THREE.Matrix4).makeRotationZ(Math.PI));var i=new ARCameraParam(t.parameters.cameraParametersUrl,(function(){var r=new ARController(t.parameters.canvasWidth,t.parameters.canvasHeight,i);t.arController=r,r.ctx.mozImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.webkitImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.msImageSmoothingEnabled=t.parameters.imageSmoothingEnabled,r.ctx.imageSmoothingEnabled=t.parameters.imageSmoothingEnabled,!0===t.parameters.debug&&(r.debugSetup(),r.canvas.style.position="absolute",r.canvas.style.top="0px",r.canvas.style.opacity="0.6",r.canvas.style.pointerEvents="none",r.canvas.style.zIndex="-1");var a={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},s=a[t.parameters.detectionMode];console.assert(void 0!==s),r.setPatternDetectionMode(s);var n={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},o=n[t.parameters.matrixCodeType];console.assert(void 0!==o),r.setMatrixCodeType(o),r.setPattRatio(t.parameters.patternRatio),e()}));return this},ARjs.Context.prototype.getProjectionMatrix=function(e){console.assert("artoolkit"===this.parameters.trackingBackend),console.assert(this.arController,"arController MUST be initialized to call this function");var t=this.arController.getCameraMatrix(),i=(new THREE.Matrix4).fromArray(t);return i.multiply(this._artoolkitProjectionAxisTransformMatrix),i},ARjs.Context.prototype._updateArtoolkit=function(e){this.arController.process(e)},ARjs.Context.prototype._initAruco=function(e){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var t=this.arucoContext.canvas.getContext("2d");t.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,t.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout((function(){e()}),0)},ARjs.Context.prototype._updateAruco=function(e){var t=this,i=this._arMarkersControls,r=this.arucoContext.detect(e);r.forEach((function(e){for(var r=null,a=0;a<i.length;a++)if(console.assert("barcode"===i[a].parameters.type),i[a].parameters.barcodeValue===e.id){r=i[a];break}if(null!==r){var s=new THREE.Object3D;t.arucoContext.updateObject3D(s,r._arucoPosit,r.parameters.size,e),s.updateMatrix(),r.updateWithModelViewMatrix(s.matrix)}}))},ARjs.Context.prototype._initTango=function(e){var t=this;navigator.getVRDisplays||(navigator.getVRDevices?alert("Your browser supports WebVR but not the latest version. See <a href='http://webvr.info'>webvr.info</a> for more info."):alert("Your browser does not support WebVR. See <a href='http://webvr.info'>webvr.info</a> for assistance.")),this._tangoContext={vrDisplay:null,vrPointCloud:null,frameData:new VRFrameData},navigator.getVRDisplays().then((function(i){0===i.length&&alert("no vrDisplays available");var r=t._tangoContext.vrDisplay=i[0];console.log("vrDisplays.displayName :",r.displayName),"Tango VR Device"===r.displayName&&(t._tangoContext.vrPointCloud=new THREE.WebAR.VRPointCloud(r,!0)),e()}))},ARjs.Context.prototype._updateTango=function(e){var t=this,i=(this._arMarkersControls,this._tangoContext,this._tangoContext.vrDisplay);if(null!==i){if("Tango VR Device"===i.displayName){var r=!0,a=0;t._tangoContext.vrPointCloud.update(r,a,!0)}if(0!==this._arMarkersControls.length){var s=this._arMarkersControls[0],n=this._tangoContext.frameData;if(i.getFrameData(n),null!==n.pose.position&&null!==n.pose.orientation){var o=(new THREE.Vector3).fromArray(n.pose.position),l=(new THREE.Quaternion).fromArray(n.pose.orientation),u=new THREE.Vector3(1,1,1),c=(new THREE.Matrix4).compose(o,l,u),d=new THREE.Matrix4;d.getInverse(c),s.updateWithModelViewMatrix(d)}}}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var e=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return!0===e?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(e){return"default"===e&&(e=this._guessPerformanceLabel()),"desktop-fast"===e?(this.contextParameters.canvasWidth=1920,this.contextParameters.canvasHeight=1440,this.contextParameters.maxDetectionRate=30):"desktop-normal"===e?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):"phone-normal"===e?(this.contextParameters.canvasWidth=320,this.contextParameters.canvasHeight=240,this.contextParameters.maxDetectionRate=30):"phone-slow"===e?(this.contextParameters.canvasWidth=240,this.contextParameters.canvasHeight=180,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+e),this},ARjs.Profile.prototype.defaultMarker=function(e){return e=e||this.contextParameters.trackingBackend,"artoolkit"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro"):"aruco"===e?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):"tango"===e?(this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(e){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.sourceImage=function(e){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=e,this},ARjs.Profile.prototype.trackingBackend=function(e){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=e,this},ARjs.Profile.prototype.changeMatrixMode=function(e){return this.defaultMarkerParameters.changeMatrixMode=e,this},ARjs.Profile.prototype.trackingMethod=function(e){var t=ARjs.Utils.parseTrackingMethod(e);return this.defaultMarkerParameters.markersAreaEnabled=t.markersAreaEnabled,this.contextParameters.trackingBackend=t.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return"tango"===this.contextParameters.trackingBackend&&this.sourceImage(THREEx.ArToolkitContext.baseURL+"../data/images/img.jpg"),this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var a=t.parameters[i];void 0!==a?t.parameters[i]=r:console.warn("THREEx.ArToolkitSource: '"+i+"' is not a property of this material.")}else console.warn("THREEx.ArToolkitSource: '"+i+"' parameter is undefined.")}}this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},i(e)},ARjs.Source.prototype.init=function(e,t){var i=this;if("image"===this.parameters.sourceType)var r=this._initSourceImage(a,t);else if("video"===this.parameters.sourceType)r=this._initSourceVideo(a,t);else if("webcam"===this.parameters.sourceType)r=this._initSourceWebcam(a,t);else console.assert(!1);return this.domElement=r,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this;function a(){document.body.appendChild(i.domElement),i.ready=!0,e&&e()}},ARjs.Source.prototype._initSourceImage=function(e){var t=document.createElement("img");t.src=this.parameters.sourceUrl,t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var i=setInterval((function(){t.naturalWidth&&(e(),clearInterval(i))}),20);return t},ARjs.Source.prototype._initSourceVideo=function(e){var t=document.createElement("video");t.src=this.parameters.sourceUrl,t.style.objectFit="initial",t.autoplay=!0,t.webkitPlaysinline=!0,t.controls=!1,t.loop=!0,t.muted=!0,document.body.addEventListener("click",(function e(){document.body.removeEventListener("click",e),t.play()})),t.width=this.parameters.sourceWidth,t.height=this.parameters.sourceHeight,t.style.width=this.parameters.displayWidth+"px",t.style.height=this.parameters.displayHeight+"px";var i=setInterval((function(){t.videoWidth&&(e(),clearInterval(i))}),20);return t},ARjs.Source.prototype._initSourceWebcam=function(e,t){var i=this;t=t||function(e){alert("Webcam Error\nName: "+e.name+"\nMessage: "+e.message)};var r=document.createElement("video");if(r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.setAttribute("playsinline",""),r.style.width=this.parameters.displayWidth+"px",r.style.height=this.parameters.displayHeight+"px",void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.enumerateDevices||void 0===navigator.mediaDevices.getUserMedia){if(void 0===navigator.mediaDevices)var a="navigator.mediaDevices";else if(void 0===navigator.mediaDevices.enumerateDevices)a="navigator.mediaDevices.enumerateDevices";else if(void 0===navigator.mediaDevices.getUserMedia)a="navigator.mediaDevices.getUserMedia";else console.assert(!1);return t({name:"",message:"WebRTC issue-! "+a+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then((function(a){var s={audio:!1,video:{facingMode:"environment",width:{ideal:i.parameters.sourceWidth},height:{ideal:i.parameters.sourceHeight}}};null!==i.parameters.deviceId&&(s.video.deviceId={exact:i.parameters.deviceId}),navigator.mediaDevices.getUserMedia(s).then((function(t){r.srcObject=t,document.body.addEventListener("click",(function(){r.play()}));var i=setInterval((function(){r.videoWidth&&(e(),clearInterval(i))}),20)})).catch((function(e){t({name:e.name,message:e.message})}))})).catch((function(e){t({message:e.message})})),r},ARjs.Source.prototype.hasMobileTorch=function(){var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream===!1)return!1;void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0];if(void 0===t.getCapabilities)return!1;var i=t.getCapabilities();return!!i.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(!0===this.hasMobileTorch());var e=arToolkitSource.domElement.srcObject;if(e instanceof MediaStream!==!1){void 0===this._currentTorchStatus&&(this._currentTorchStatus=!1);var t=e.getVideoTracks()[0],i=t.getCapabilities();i.torch?(this._currentTorchStatus=!1===this._currentTorchStatus,t.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch((function(e){console.log(e)}))):alert("no mobile torch is available on your camera")}else alert("enabling mobile torch is available only on webcam")},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var e=window.innerWidth,t=window.innerHeight;if(console.assert(0===arguments.length),"IMG"===this.domElement.nodeName)var i=this.domElement.naturalWidth,r=this.domElement.naturalHeight;else if("VIDEO"===this.domElement.nodeName)i=this.domElement.videoWidth,r=this.domElement.videoHeight;else console.assert(!1);var a=i/r,s=e/t;if(s<a){var n=a*t;this.domElement.style.width=n+"px",this.domElement.style.marginLeft=-(n-e)/2+"px",this.domElement.style.height=t+"px",this.domElement.style.marginTop="0px"}else{var o=1/(a/e);this.domElement.style.height=o+"px",this.domElement.style.marginTop=-(o-t)/2+"px",this.domElement.style.width=e+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function(e){window.innerWidth>window.innerHeight?(e.style.width=this.domElement.style.width,e.style.height=this.domElement.style.height,e.style.marginLeft=this.domElement.style.marginLeft,e.style.marginTop=this.domElement.style.marginTop):(e.style.height=this.domElement.style.height,e.style.width=4*parseInt(e.style.height)/3+"px",e.style.marginLeft=(window.innerWidth-parseInt(e.style.width))/2+"px",e.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(e,t,i){if(3!==arguments.length)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var r=e.parameters.trackingBackend;if("artoolkit"===r){this.onResizeElement();var a=!!t.domElement.dataset.aframeCanvas;!1===a&&this.copyElementSizeTo(t.domElement),null!==e.arController&&this.copyElementSizeTo(e.arController.canvas)}else"aruco"===r?(this.onResizeElement(),this.copyElementSizeTo(t.domElement),this.copyElementSizeTo(e.arucoContext.canvas)):"tango"===r?t.setSize(window.innerWidth,window.innerHeight):console.assert(!1,"unhandled trackingBackend "+r);if("artoolkit"===r)null!==e.arController&&i.projectionMatrix.copy(e.getProjectionMatrix());else if("aruco"===r)i.aspect=t.domElement.width/t.domElement.height,i.updateProjectionMatrix();else if("tango"===r){var s=e._tangoContext.vrDisplay;s&&"Tango VR Device"===s.displayName&&THREE.WebAR.resizeVRSeeThroughCamera(s,i)}else console.assert(!1,"unhandled trackingBackend "+r)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(e){var t=new THREE.PlaneGeometry(2,2),i=new THREE.MeshBasicMaterial({map:e}),r=new THREE.Mesh(t,i);this.object3d=r,this.update=function(e){e.updateMatrixWorld(!0);var t=new THREE.Vector3(-0,0,-20);t=new THREE.Vector3(-0,0,-20);r.position.copy(t),e.localToWorld(r.position),e.matrixWorld.decompose(e.position,e.quaternion,e.scale),r.quaternion.copy(e.quaternion);var i=2*THREE.Math.radToDeg(Math.atan(1/e.projectionMatrix.elements[5])),a=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),s=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),n=a/s;r.scale.y=Math.tan(THREE.Math.DEG2RAD*i/2)*t.length(),r.scale.x=r.scale.y*n}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(e){this._sourceElement=e,this._pickingScene=new THREE.Scene;var t=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),i=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(t,i),this._pickingScene.add(this._pickingPlane);var r=parseInt(e.style.width),a=parseInt(e.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,r/a,.1,30)},THREEx.HitTestingPlane.prototype.update=function(e,t,i){if(this.onResize(),"modelViewMatrix"===i){var r=this._pickingPlane;t.parent.updateMatrixWorld(),r.matrix.copy(t.parent.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale)}else if("cameraTransformMatrix"===i){var a=this._pickingCamera;e.updateMatrixWorld(),a.matrix.copy(e.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var e=this._sourceElement,t=this._pickingCamera,i=parseInt(e.style.width),r=parseInt(e.style.height);t.aspect=i/r,t.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(e,t){e=2*(e-.5),t=2*-(t-.5),this._pickingScene.updateMatrixWorld(!0);var i=new THREE.Raycaster,r=new THREE.Vector3(e,t,1);i.setFromCamera(r,this._pickingCamera);var a=i.intersectObjects([this._pickingPlane]);if(0===a.length)return null;var s=this._pickingPlane.worldToLocal(a[0].point.clone()),n=new THREE.Quaternion,o=new THREE.Vector3(1,1,1);return{position:s,quaternion:n,scale:o}},THREEx.HitTestingPlane.prototype.renderDebug=function(e){e.render(this._pickingScene,this._pickingCamera)};var THREEx=THREEx||{};THREEx.HitTestingTango=function(e){this._arContext=e,this.boundingSphereRadius=.01,this.resultScale=new THREE.Vector3(1,1,1).multiplyScalar(1)},THREEx.HitTestingTango.prototype.update=function(){},THREEx.HitTestingTango.prototype.test=function(e,t){var i=this._arContext._tangoContext.vrDisplay;if(null===i)return null;if("Tango VR Device"!==i.displayName)return null;var r=i.getPickingPointAndPlaneInPointCloud(e,t);if(null==r)return console.warn("Could not retrieve the correct point and plane."),null;var a=new THREE.Object3D;THREE.WebAR.positionAndRotateObject3DWithPickingPointAndPlaneInPointCloud(r,a,this.boundingSphereRadius),a.rotateZ(-Math.PI/2);var s={position:a.position,quaternion:a.quaternion,scale:this.resultScale};return s};var ARjs=ARjs||{};ARjs.Anchor=function(e,t){var i=this,r=e.arContext,a=e.parameters.scene,s=e.parameters.camera;this.arSession=e,this.parameters=t,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",t.markersAreaEnabled);var n=new THREE.Group;if(a.add(n),"modelViewMatrix"===t.changeMatrixMode)var o=n;else if("cameraTransformMatrix"===t.changeMatrixMode)o=s;else console.assert(!1);if(!1===t.markersAreaEnabled){var l=new THREEx.ArMarkerControls(r,o,t);this.controls=l}else{if(console.assert("artoolkit"===r.parameters.trackingBackend||"aruco"===r.parameters.trackingBackend),!0===location.hash.substring(1).startsWith("markers-page-resolution=")){var u=location.hash.substring(1),c=u.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(3===c.length);var d=parseInt(c[1]),f=parseInt(c[2]);r=e.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(r.parameters.trackingBackend,d,f)}null===localStorage.getItem("ARjsMultiMarkerFile")&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(r.parameters.trackingBackend),console.assert(null!==localStorage.getItem("ARjsMultiMarkerFile"));var h=localStorage.getItem("ARjsMultiMarkerFile");if("modelViewMatrix"===t.changeMatrixMode)var p=a;else if("cameraTransformMatrix"===t.changeMatrixMode)p=s;else console.assert(!1);var m=ARjs.MarkersAreaControls.fromJSON(r,p,o,h);this.controls=m,m.parameters.changeMatrixMode=t.changeMatrixMode;var b=[];m.subMarkersControls.forEach((function(e){var t=new THREEx.ArMarkerHelper(e);t.object3d.visible=!1,e.object3d.add(t.object3d),b.push(t)})),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(e){b.forEach((function(t){t.object3d.visible=e}))}}this.object3d=new THREE.Group;var g=!0;if("tango"===r.parameters.trackingBackend&&(g=!1),!0===g){var v=new THREE.Group;a.add(v);var w=new THREEx.ArSmoothedControls(v);v.add(this.object3d)}else n.add(this.object3d);this.update=function(){i.object3d.visible=i.object3d.parent.visible,void 0!==w&&(void 0!==m&&m.updateSmoothedControls(w),w.update(n))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(e,t){var i=e.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var r=document.createElement("span");if(r.style.display="block",this.domElement.appendChild(r),r.innerHTML="<b>trackingBackend</b> : "+i,ARjs.SessionDebugUI.AugmentedWebsiteURL){r=document.createElement("a");r.innerHTML="Share on augmented-websites",r.style.display="block",r.href=ARjs.SessionDebugUI.AugmentedWebsiteURL+"?"+location.href,this.domElement.appendChild(r)}if("tango"===i&&t){r=document.createElement("button");this.domElement.appendChild(r),r.id="buttonTangoTogglePointCloud",r.innerHTML="toggle-point-cloud",r.href="javascript:void(0)",r.addEventListener("click",(function(){var i=e.parameters.scene;t.object3d.parent?i.remove(t.object3d):i.add(t.object3d)}))}},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function(e){var t=e.arSession,i=t.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var r=document.createElement("span");if(r.style.display="block",this.domElement.appendChild(r),r.innerHTML="<b>markersAreaEnabled</b> :"+e.parameters.markersAreaEnabled,e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonToggleMarkerHelpers",r.innerHTML="toggle-marker-helper",r.href="javascript:void(0)";var a=!1;r.addEventListener("click",(function(){a=!a,e.markersArea.setSubMarkersVisibility(a)}))}if(e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonMarkersAreaLearner",r.innerHTML="Learn-new-marker-area",r.href="javascript:void(0)",r.addEventListener("click",(function(){if(null!==ARjs.AnchorDebugUI.MarkersAreaLearnerURL)var e=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else e=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(e,i)}))}if(e.parameters.markersAreaEnabled){r=document.createElement("button");r.style.display="block",this.domElement.appendChild(r),r.id="buttonMarkersAreaReset",r.innerHTML="Reset-marker-area",r.href="javascript:void(0)",r.addEventListener("click",(function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(i),location.reload()}))}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function(e){var t=this,i=e.arContext,r=i.parameters.trackingBackend;this.enabled=!0,this._arSession=e,this._hitTestingPlane=null,this._hitTestingTango=null,"tango"===r?t._hitTestingTango=new THREEx.HitTestingTango(i):t._hitTestingPlane=new THREEx.HitTestingPlane(e.arSource.domElement)},ARjs.HitTesting.prototype.update=function(e,t,i){!1!==this.enabled&&(null!==this._hitTestingTango?this._hitTestingTango.update():null!==this._hitTestingPlane?this._hitTestingPlane.update(e,t,i):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(e){var t=this._arSession.arContext.parameters.trackingBackend,i=this._arSession.arSource;if(!1===this.enabled)return[];if("tango"===t)var r=e.pageX/window.innerWidth,a=e.pageY/window.innerHeight;else r=e.clientX/i.domElementWidth(),a=e.clientY/i.domElementHeight();return this.test(r,a)},ARjs.HitTesting.prototype.test=function(e,t){var i=this._arSession.arContext,r=i.parameters.trackingBackend,a=[];if(!1===this.enabled)return[];var s=null;if("tango"===r)s=this._hitTestingTango.test(e,t);else s=this._hitTestingPlane.test(e,t);if(null===s)return a;var n=new ARjs.HitTesting.Result(s.position,s.quaternion,s.scale);return a.push(n),a},ARjs.HitTesting.Result=function(e,t,i){this.position=e,this.quaternion=t,this.scale=i},ARjs.HitTesting.Result.prototype.apply=function(e){e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function(e){return e.position.copy(this.position),e.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function(e){return e.quaternion.copy(this.quaternion),e.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function(e){var t=this;function i(e){if(void 0!==e)for(var i in e){var r=e[i];if(void 0!==r){var a=t.parameters[i];void 0!==a?t.parameters[i]=r:console.warn("THREEx.Session: '"+i+"' is not a property of this material.")}else console.warn("THREEx.Session: '"+i+"' parameter is undefined.")}}this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},this.signals={sourceReady:new signals.Signal,contextInitialized:new signals.Signal},i(e),console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",e.contextParameters.trackingBackend);var r=t.arSource=new ARjs.Source(e.sourceParameters);r.init((function(){r.onResize(a,t.parameters.renderer,t.parameters.camera),t.signals.sourceReady.dispatch()})),window.addEventListener("resize",(function(){r.onResize(a,t.parameters.renderer,t.parameters.camera)}));var a=t.arContext=new ARjs.Context(e.contextParameters);t.arContext.init(),a.addEventListener("initialized",(function(e){r.onResize(a,t.parameters.renderer,t.parameters.camera),t.signals.contextInitialized.dispatch()})),this.update=function(){!1!==r.ready&&a.update(r.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.TangoPointCloud=function(e){var t=this,i=e.arContext;this.object3d=new THREE.Group,console.warn("Work only on cameraTransformMatrix - fix me - useless limitation"),i.addEventListener("initialized",(function(e){var r=i._tangoContext.vrPointCloud,a=r.getBufferGeometry(),s=new THREE.PointsMaterial({size:.01,depthWrite:!1}),n=new THREE.Points(a,s);n.frustumCulled=!1,n.renderDepth=0,t.object3d.add(n)}))};var ARjs=ARjs||{};ARjs.TangoVideoMesh=function(e){var t=e.arContext,i=e.renderer,r=null,a=null,s=new THREE.Scene,n=new THREE.OrthographicCamera(-1,1,1,-1,0,100);this._sceneOrtho=s,this._cameraOrtho=n,t.addEventListener("initialized",(function(e){console.assert("tango"===t.parameters.trackingBackend),a=t._tangoContext.vrDisplay,console.assert(a,"vrDisplay MUST be defined"),"Tango VR Device"===a.displayName&&(r=THREE.WebAR.createVRSeeThroughCameraMesh(a),s.add(r))})),this.update=function(){console.assert("tango"===t.parameters.trackingBackend),null!==r&&THREE.WebAR.updateCameraMeshOrientation(a,r)},this.render=function(){console.assert("tango"===t.parameters.trackingBackend),i.render(s,n),i.clearDepth()}};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(e){var t=this.parseTrackingMethod(e).trackingBackend;if("artoolkit"===t)var i=new THREE.Camera;else if("aruco"===t)i=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else if("tango"===t)i=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+t);return i},ARjs.Utils.isTango=function(){var e=null!==navigator.userAgent.match("Chrome/57.0.2987.5");return e},ARjs.Utils.parseTrackingMethod=function(e){return"best"===e&&(e=ARjs.Utils.isTango()?"tango":"area-artoolkit"),e.startsWith("area-")?{trackingBackend:e.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:e,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(e,t,i){var r=this;THREEx.ArBaseControls.call(this,t),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:i.subMarkersControls,subMarkerPoses:i.subMarkerPoses,changeMatrixMode:void 0!==i.changeMatrixMode?i.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,e.addEventListener("sourceProcessed",(function(){r._onSourceProcessed()}))},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var e=this,t={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},i=e.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach((function(r,a){var s=r.object3d;if(!1!==s.visible){var n=s.matrix.clone(),o=e.parameters.subMarkerPoses[a];n.multiply((new THREE.Matrix4).getInverse(o));var l=new THREE.Vector3,u=new THREE.Quaternion,c=new THREE.Vector3;n.decompose(l,u,c),t.count++,ARjs.MarkersAreaControls.averageVector3(t.position.sum,l,t.count,t.position.average),ARjs.MarkersAreaControls.averageQuaternion(t.quaternion.sum,u,i,t.count,t.quaternion.average),ARjs.MarkersAreaControls.averageVector3(t.scale.sum,c,t.count,t.scale.average)}})),t.count>0?e.object3d.visible=!0:e.object3d.visible=!1,t.count>0){var r=new THREE.Matrix4;r.compose(t.position.average,t.quaternion.average,t.scale.average),"modelViewMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.copy(r):"cameraTransformMatrix"===this.parameters.changeMatrixMode?e.object3d.matrix.getInverse(r):console.assert(!1),e.object3d.matrix.decompose(e.object3d.position,e.object3d.quaternion,e.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(e,t,i,r,a){return a=a||new THREE.Quaternion,console.assert(i instanceof THREE.Quaternion===!0),t.dot(i)>0&&(t=new THREE.Quaternion(-t.x,-t.y,-t.z,-t.w)),e.x+=t.x,e.y+=t.y,e.z+=t.z,e.w+=t.w,a.x=e.x/r,a.y=e.y/r,a.z=e.z/r,a.w=e.w/r,a.normalize(),a},ARjs.MarkersAreaControls.averageVector3=function(e,t,i,r){return r=r||new THREE.Vector3,e.x+=t.x,e.y+=t.y,e.z+=t.z,r.x=e.x/i,r.y=e.y/i,r.z=e.z/i,r},ARjs.MarkersAreaControls.computeCenter=function(e){var t=JSON.parse(e),i={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},r=new THREE.Quaternion;t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),a=new THREE.Vector3,s=new THREE.Quaternion,n=new THREE.Vector3;t.decompose(a,s,n),i.count++,ARjs.MarkersAreaControls.averageVector3(i.position.sum,a,i.count,i.position.average),ARjs.MarkersAreaControls.averageQuaternion(i.quaternion.sum,s,r,i.count,i.quaternion.average),ARjs.MarkersAreaControls.averageVector3(i.scale.sum,n,i.count,i.scale.average)}));var a=new THREE.Matrix4;return a.compose(i.position.average,i.quaternion.average,i.scale.average),a},ARjs.MarkersAreaControls.computeBoundingBox=function(e){var t=JSON.parse(e),i=new THREE.Box3;return t.subMarkersControls.forEach((function(e){var t=(new THREE.Matrix4).fromArray(e.poseMatrix),r=new THREE.Vector3,a=new THREE.Quaternion,s=new THREE.Vector3;t.decompose(r,a,s),i.expandByPoint(r)})),i},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(e,t){void 0===t&&(t=[[.4,.1,.3],[.5,.1,.4],[.5,.2,.5],[.6,.2,.7],[.6,.2,.7]]);var i=0;if(this.parameters.subMarkersControls.forEach((function(e,t){var r=e.object3d;!0===r.visible&&i++})),void 0!==t[i-1])var r=t[i-1];else r=t[t.length-1];e.parameters.lerpPosition=r[0],e.parameters.lerpQuaternion=r[1],e.parameters.lerpScale=r[2]},ARjs.MarkersAreaControls.fromJSON=function(e,t,i,r,a){var s=JSON.parse(r),n=[],o=[];a=a||{},s.subMarkersControls.forEach((function(i){var r=new THREE.Object3D;t.add(r);var a=new THREEx.ArMarkerControls(e,r,i.parameters);n.push(a),o.push((new THREE.Matrix4).fromArray(i.poseMatrix))})),a.subMarkersControls=n,a.subMarkerPoses=o;var l=new THREEx.ArMultiMarkerControls(e,i,a);return l};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(e,t){var i=this;this._arToolkitContext=e,this.subMarkersControls=t,this.enabled=!0,e.addEventListener("sourceProcessed",(function(){i._onSourceProcessed()}))},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var e=this.subMarkersControls[0].object3d.quaternion;if(!1!==this.enabled)for(var t=this.subMarkersControls.filter((function(e){return!0===e.object3d.visible})),i=Object.keys(t).length,r=new THREE.Vector3,a=new THREE.Quaternion,s=new THREE.Vector3,n=new THREE.Matrix4,o=0;o<i;o++)for(var l=t[o],u=0;u<i;u++){var c=t[u];if(o!==u){void 0===l.object3d.userData.seenCouples&&(l.object3d.userData.seenCouples={});var d=l.object3d.userData.seenCouples;void 0===d[c.id]&&(d[c.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),n.getInverse(l.object3d.matrix),n.multiply(c.object3d.matrix),n.decompose(r,a,s);var f=d[c.id];f.count++,THREEx.ArMultiMarkerControls.averageVector3(f.position.sum,r,f.count,f.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(f.quaternion.sum,a,e,f.count,f.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(f.scale.sum,s,f.count,f.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var e=this,t=this.subMarkersControls[0];this.deleteResult(),t.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var i=!1;this.subMarkersControls.forEach((function(t){var r=t.object3d.userData.result,a=void 0!==r&&r.confidenceFactor>=1;if(!0!==a){var s=e._getLearnedCoupleStats(t);if(null!==s){var n=e._getSubMarkerControlsByID(s),o=t.object3d.userData.seenCouples[s],l=new THREE.Matrix4;l.compose(o.position.average,o.quaternion.average,o.scale.average);var u=n.object3d.userData.result.averageMatrix,c=(new THREE.Matrix4).getInverse(u).multiply(l);c=(new THREE.Matrix4).getInverse(c),console.assert(void 0===t.object3d.userData.result),t.object3d.userData.result={averageMatrix:c,confidenceFactor:1},i=!0}}}))}while(!0===i)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(e){if(void 0===e.object3d.userData.seenCouples)return null;for(var t=e.object3d.userData.seenCouples,i=Object.keys(t).map(Number),r=0;r<i.length;r++){var a=i[r],s=this._getSubMarkerControlsByID(a),n=s.object3d.userData.result,o=void 0!==n&&n.confidenceFactor>=1;if(!1!==o)return a}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(e){for(var t=0;t<this.subMarkersControls.length;t++){var i=this.subMarkersControls[t];if(i.id===e)return i}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var e={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:(new Date).toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},t=this.subMarkersControls[0];(new THREE.Matrix4).getInverse(t.object3d.matrix);this.subMarkersControls.forEach((function(t,i){if(void 0!==t.object3d.userData.result){var r=t.object3d.userData.result.averageMatrix;console.assert(r instanceof THREE.Matrix4);var a={parameters:{},poseMatrix:r.toArray()};"pattern"===t.parameters.type?(a.parameters.type=t.parameters.type,a.parameters.patternUrl=t.parameters.patternUrl):"barcode"===t.parameters.type?(a.parameters.type=t.parameters.type,a.parameters.barcodeValue=t.parameters.barcodeValue):console.assert(!1),e.subMarkersControls.push(a)}}));var i=JSON.stringify(e,null,"\t"),r=!1;if(!0===r){var a=JSON.parse(i);a.subMarkersControls.forEach((function(e){e.poseMatrix=e.poseMatrix.map((function(e){var t=100;return Math.round(e*t)/t}))})),i=JSON.stringify(a,null,"\t")}return i},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach((function(e){delete e.object3d.userData.seenCouples}))},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach((function(e){delete e.object3d.userData.result}))};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(e,t){var i={backURL:location.href,trackingBackend:t,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(t)};location.href=e+"?"+encodeURIComponent(JSON.stringify(i))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(e){var t=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(e);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(t))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(e){console.assert(e);var t=document.createElement("a");t.href=ARjs.Context.baseURL;var i=t.href,r={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]};return r.subMarkersControls[0]={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(0,0,0).toArray()},"artoolkit"===e?(r.subMarkersControls[0].parameters.type="pattern",r.subMarkersControls[0].parameters.patternUrl=i+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):"aruco"===e?(r.subMarkersControls[0].parameters.type="barcode",r.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),r},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(e){var t=document.createElement("a");t.href=ARjs.Context.baseURL;var i=t.href;if("artoolkit"===e)var r=[{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:i+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if("aruco"===e)r=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return r},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function(e,t,i){var r=this.buildMarkersAreaFileFromResolution(e,t,i);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(r))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function(e,t,i){var r={meta:{createdBy:"AR.js - Augmented Website",createdAt:(new Date).toJSON()},trackingBackend:e,subMarkersControls:[]},a=.1;if(t>i)var s=.4*i;else if(t<i)s=.4*t;else if(t===i)s=.33*t;else console.assert(!1);var n=s*(1-2*a),o=(t-s)/2/n,l=(i-s)/2/n,u=c("center",0,0);r.subMarkersControls.push(u);u=c("topleft",-o,-l);r.subMarkersControls.push(u);u=c("topright",+o,-l);r.subMarkersControls.push(u);u=c("bottomleft",-o,+l);r.subMarkersControls.push(u);u=c("bottomright",+o,+l);return r.subMarkersControls.push(u),r;function c(t,i,r){console.log("buildSubMarkerControls",t,i,r);var a={parameters:{},poseMatrix:(new THREE.Matrix4).makeTranslation(i,0,r).toArray()};return"artoolkit"===e?d(a.parameters,t):"aruco"===e?f(a.parameters,t):console.assert(!1),a}function d(e,t){var i=document.createElement("a");i.href=ARjs.Context.baseURL;var r=i.href,a={center:s(r+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:s(r+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:s(r+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:s(r+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:s(r+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};return console.assert(void 0!==a[t]),e.type="pattern",void(e.patternUrl=a[t]);function s(e){var t=document.createElement("a");return t.href=e,t.href}}function f(e,t){var i={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(i[t]),e.type="barcode",e.barcodeValue=i[t]}}}).call(this,__webpack_require__("227d"),"/",__webpack_require__("b639").Buffer)},"8f39":function(e,t,i){"use strict";var r=i("96e2"),a=i.n(r);a.a},"96e2":function(e,t,i){},ae4c:function(e,t,i){},b3c5:function(e,t,i){"use strict";var r=i("77df"),a=i.n(r);a.a},b650:function(e,t,i){"use strict";var r=i("ae4c"),a=i.n(r);a.a},c840:function(e,t,i){"use strict";var r=i("21ca"),a=i.n(r);a.a},cf83:function(e){e.exports=JSON.parse('[{"label":"Afghanistan","value":"AFG"},{"label":"Åland Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaçao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"United States of America","value":"USA"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},da67:function(e,t,i){},e030:function(e){e.exports=JSON.parse('[{"code":"magnifier","label":"Magnifier","animationShow":"slideInUp","animationHide":"slideOutDown"},{"code":"code-scanner","label":"CodeScanner","animationShow":"FadeIn","animationHide":"FadeOut"}]')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"}]')},f78a:function(e,t,i){"use strict";var r=i("da67"),a=i.n(r);a.a},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')}});