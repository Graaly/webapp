(function(e){function t(t){for(var s,o,i=t[0],l=t[1],c=t[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var i=a[o];0!==n[i]&&(s=!1)}s&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},o={1:0},n={1:0},r=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{2:"10e7fdce"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={2:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{2:"0cf6c528"}[e]+".css",n=l.p+s,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var c=r[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===s||u===n))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],u=c.getAttribute("data-href");if(u===s||u===n)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var s=t&&t.target&&t.target.src||n,r=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=s,delete o[e],p.parentNode.removeChild(p),a(r)},p.href=n;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){o[e]=0})));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",d.name="ChunkLoadError",d.type=s,d.request=o,a[1](d)}n[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;r.push([0,0]),a()})({0:function(e,t,a){e.exports=a("2f39")},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"help","icon":"question","title":"HelpStep","description":"HelpStepDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"increment-counter","icon":"plus-square","title":"IncrementCounter","description":"IncrementCounterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":false,"nbTrials":0,"passOption":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":120,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":false},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-over-flow","icon":"layer-group","title":"ImageOverFlow","description":"ImageOverFlowDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"portrait-robot","icon":"user-circle","title":"PortraitRobot","description":"PortraitRobotDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":true},{"category":"enigma","code":"binocular","icon":"binoculars","title":"Binocular","description":"BinocularDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"phone-call","icon":"phone-volume","title":"PhoneCall","description":"PhoneCallDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"trigger-event","icon":"bolt","title":"TriggerEvent","description":"TriggerEventDesc","showTrick":"no","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"wait-for-event","icon":"bolt","title":"WaitForEvent","description":"WaitForEventDesc","showTrick":"yes","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true}]')},"029c":function(e,t,a){},"038f":function(e,t,a){},"0c5ef":function(e,t,a){"use strict";var s=a("3104"),o=a.n(s);o.a},"0c6c":function(e,t,a){"use strict";var s=a("b002"),o=a.n(s);o.a},1:function(e,t){},"143b":function(e,t,a){"use strict";var s=a("22f2"),o=a.n(s);o.a},"1fa7":function(e,t,a){"use strict";var s=a("ee35"),o=a.n(s);o.a},2:function(e,t){},"20d2":function(e,t,a){"use strict";var s=a("db16"),o=a.n(s);o.a},"22ae":function(e){e.exports=JSON.parse('[{"label":"red","value":"#FF0000"},{"label":"pink","value":"#FFC0CB"},{"label":"purple","value":"#800080"},{"label":"green","value":"#008000"},{"label":"blue","value":"#0000FF"},{"label":"yellow","value":"#FFFF00"},{"label":"orange","value":"#FFA500"},{"label":"black","value":"#000000"},{"label":"white","value":"#FFFFFF"},{"label":"gray","value":"#808080"}]')},"22f2":function(e,t,a){},"23d1":function(e,t,a){},"2aa4":function(e,t,a){},"2c1a":function(e,t,a){"use strict";var s=a("7a89"),o=a.n(s);o.a},"2d2d":function(e,t,a){"use strict";var s=a("fdef"),o=a.n(s);o.a},"2f04":function(e){e.exports=JSON.parse('[{"code":"keypad","step":"wait-for-event"},{"code":"joystick","step":"wait-for-event"},{"code":"distance","step":"wait-for-event"},{"code":"pot","step":"wait-for-event"},{"code":"escapebox","step":"wait-for-event"},{"code":"button","step":"wait-for-event"},{"code":"lcd","step":"trigger-event"},{"code":"buzzer","step":"trigger-event"},{"code":"chest","step":"trigger-event"},{"code":"relay","step":"trigger-event"}]')},"2f39":function(e,t,a){"use strict";a.r(t);var s=a("deb5"),o=a.n(s),n=(a("a481"),a("96cf"),a("f44b")),r=a.n(n),i=(a("7d6e"),a("e54f"),a("a4b7"),a("573e"),a("4848"),a("c382"),a("4a8e"),a("58af"),a("b828"),a("7713"),a("3c1c"),a("e046"),a("62f2"),a("7e6d"),a("2b0e")),l=a("b3f7"),c=a("b05d"),u=a("cb32"),d=a("54e1"),p=a("58a8"),m=a("9c40"),h=a("f20b"),g=a("e7a9"),f=a("f09f"),b=a("4b7e"),v=a("a370"),y=a("880c"),w=a("32a7"),q=a("62cd"),x=a("8f8e"),C=a("b047"),S=a("b498"),k=a("52ee"),P=a("24e8"),_=a("9404"),T=a("3b73"),I=a("8572"),A=a("0378"),$=a("0016"),O=a("068f"),M=a("ef35"),z=a("27f9"),N=a("66e5"),R=a("0170"),j=a("4074"),D=a("4d5a"),F=a("1c1c"),L=a("9f0a"),E=a("09e3"),Q=a("9989"),B=a("de5e"),U=a("639d"),Y=a("7cbe"),G=a("6b1d"),H=a("3786"),W=a("7bbf"),V=a("daf4"),J=a("ed5e"),K=a("ddd8"),Z=a("eb85"),X=a("c1d0"),ee=a("293e"),te=a("2c91"),ae=a("0d59"),se=a("8380"),oe=a("06d5"),ne=a("9569"),re=a("f7ac"),ie=a("f531"),le=a("87fe"),ce=a("b19c"),ue=a("eaac"),de=a("bd08"),pe=a("db86"),me=a("357e"),he=a("7460"),ge=a("429b"),fe=a("823b"),be=a("adad"),ve=a("9564"),ye=a("65c6"),we=a("6ac5"),qe=a("05c0"),xe=a("7f67"),Ce=a("714f"),Se=a("4396"),ke=a("75c3"),Pe=a("12c5"),_e=a("436b"),Te=a("f5084"),Ie=a("2a19"),Ae=a("7518");i["a"].use(c["a"],{config:{cordova:{backButtonExit:!1},loading:{delay:500}},iconSet:l["a"],components:{QAvatar:u["a"],QBanner:d["a"],QBadge:p["a"],QBtn:m["a"],QBtnDropdown:h["a"],QBtnGroup:g["a"],QCard:f["a"],QCardActions:b["a"],QCardSection:v["a"],QCarousel:y["a"],QCarouselControl:w["a"],QCarouselSlide:q["a"],QCheckbox:x["a"],QChip:C["a"],QColor:S["a"],QDate:k["a"],QDialog:P["a"],QDrawer:_["a"],QExpansionItem:T["a"],QField:I["a"],QForm:A["a"],QIcon:$["a"],QImg:O["a"],QInfiniteScroll:M["a"],QInput:z["a"],QItem:N["a"],QItemLabel:R["a"],QItemSection:j["a"],QLayout:D["a"],QList:F["a"],QOptionGroup:L["a"],QPageContainer:E["a"],QPage:Q["a"],QPageSticky:B["a"],QParallax:U["a"],QPopupProxy:Y["a"],QLinearProgress:G["a"],QRadio:H["a"],QRange:W["a"],QRating:V["a"],QScrollObserver:J["a"],QSelect:K["a"],QSeparator:Z["a"],QSlider:X["a"],QSkeleton:ee["a"],QSpace:te["a"],QSpinner:ae["a"],QSpinnerDots:se["a"],QSpinnerPuff:oe["a"],QSpinnerRadio:ne["a"],QSpinnerOrbit:re["a"],QStepper:ie["a"],QStep:le["a"],QStepperNavigation:ce["a"],QTable:ue["a"],QTr:de["a"],QTd:pe["a"],QTh:me["a"],QTab:he["a"],QTabs:ge["a"],QTabPanel:fe["a"],QTabPanels:be["a"],QToggle:ve["a"],QToolbar:ye["a"],QToolbarTitle:we["a"],QTooltip:qe["a"]},directives:{ClosePopup:xe["a"],Ripple:Ce["a"],Scroll:Se["a"],TouchPan:ke["a"],TouchSwipe:Pe["a"]},plugins:{Dialog:_e["a"],Loading:Te["a"],Notify:Ie["a"],BottomSheet:Ae["a"]}});var $e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"q-app-safari":e.isIOs||e.isSafari},attrs:{id:"q-app"}},[a("router-view")],1)},Oe=[],Me=(a("28a5"),a("34ef"),a("6762"),a("2fdb"),a("551c"),a("ff57")),ze=a.n(Me),Ne=(a("ac4d"),a("8a81"),a("ac6a"),a("6b54"),a("06db"),a("3b2b"),a("2f62")),Re=a("0e44"),je=a("a78e"),De=a("bc3a"),Fe=a.n(De),Le="https://api.graaly.com",Ee=Fe.a.create({baseURL:Le,validateStatus:function(e){return!0}});Ee.defaults.timeout=5e3,Ee.interceptors.request.use((function(e){var t=localStorage.getItem("jwt");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var Qe=function(){return Ee},Be={checkEmail:function(e){return Qe().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return Qe().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,a){return Qe().post("login/facebook",{id:e,token:t}).then((function(e){a(!1,e)}))},playAnonymous:function(e){return Qe().post("user/create/anonymous/"+e).catch((function(e){return console.log(e.request)}))},logout:function(){return Qe().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return Qe().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?Qe().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):Qe().post("account",{}).catch((function(e){return console.log(e.request)}))},createAccount:function(e){return Qe().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return Qe().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return Qe().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return Qe().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,a){return Qe().post("user/forgottenpassword/code/validate",{email:e,password:t,code:a}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e,t){return Qe().post("user/forgottenpassword/code/generate/"+t,{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return Qe().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};i["a"].use(Ne["a"]);var Ue,Ye={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[],mediaStreams:[],chatMessages:[],chatNotification:0,networkMode:"online",forceOnline:!1},Ge={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]},addMediaStream:function(e,t){e.mediaStreams.push(t)},clearMediaStreams:function(e){var t=!0,a=!1,s=void 0;try{for(var o,n=e.mediaStreams[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var r=o.value;r&&r.getTracks&&r.getTracks().forEach((function(e){return e.stop()}))}}catch(i){a=!0,s=i}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}e.mediaStreams=[]},setChatMessage:function(e,t){e.chatMessages=t},setChatNotification:function(e,t){e.chatNotification=t},updateChatNotification:function(e,t){e.chatNotification++},setNetworkMode:function(e,t){e.networkMode=t},setForceOnline:function(e,t){e.forceOnline=t}},He={login:function(){var e=r()(o.a.mark((function e(t,a){var s,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,s("loginStart"),e.next=4,Be.login(a.email,a.password);case 4:return n=e.sent,200===n.status&&(s("loginSuccess",n.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),logout:function(){var e=r()(o.a.mark((function e(t){var a,s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,Be.logout();case 3:return s=e.sent,a("logout"),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var a=e.commit;return a("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var a=e.commit,s=e.state;if(null===t){var o=s.questSteps.geolocation.drawDirectionInterval;null!==o&&window.clearInterval(o)}a("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var a=e.commit;return a("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var a=e.commit;return a("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var a=e.commit;return a("setErrorMessage",t)},setCurrentRun:function(e,t){var a=e.commit;return a("setCurrentRun",t)},addTimeoutId:function(e,t){var a=e.commit;return a("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var a=e.commit;return a("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")},addMediaStream:function(e,t){var a=e.commit;return a("addMediaStream",t)},clearMediaStreams:function(e){var t=e.commit;return t("clearMediaStreams")},setNetworkMode:function(e,t){var a=e.commit;return a("setNetworkMode",t)},setForceOnline:function(e,t){var a=e.commit;return a("setForceOnline",t)}},We={},Ve=new Ne["a"].Store({state:Ye,getters:We,actions:He,mutations:Ge,plugins:[Object(Re["a"])({getState:function(e){return je["getJSON"](e)},setState:function(e,t){je["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),Je=a("8c4f"),Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[a("q-page-container",[a("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),a("div",{attrs:{id:"screen-too-large"}},[a("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},Ze=[],Xe={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":navigator.language&&"es"===navigator.language.substr(0,2)||navigator.userLanguage&&"es"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="es":this.$i18n.locale="en"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":navigator.language&&"es"===navigator.language.substr(0,2)||navigator.userLanguage&&"es"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="es":this.$i18n.locale="en"}},methods:{}},et=Xe,tt=a("2877"),at=Object(tt["a"])(et,Ke,Ze,!1,null,null,null),st=at.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[a("q-page-container",[a("router-view",{key:e.$route.fullPath,staticStyle:{height:"calc(100vh - 61px)"},attrs:{id:"menu-view"}})],1),a("home-menu",{attrs:{color:"accent"}}),a("div",{attrs:{id:"screen-too-large"}},[a("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},nt=[],rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-menu",style:e.cssVars},[a("div",{staticClass:"menu-transparent"}),a("q-list",{staticClass:"nav flex justify-between no-wrap"},[a("q-item",{staticClass:"q-pa-none menu-btn graaly",attrs:{clickable:"","manual-focus":"",active:"graaly"===e.link,"active-class":"active"},on:{click:function(t){return e.goToHome()}}},[a("q-item-section",{staticClass:"flex justify-center items-center"},[a("q-avatar",{attrs:{size:"lg"}},[a("img",{attrs:{src:"graaly"===e.link?"statics/icons/app-logo/icon-48x48.png":"statics/new/graaly-icon-white.png"}})])],1)],1),a("q-item",{staticClass:"q-pa-none menu-btn",attrs:{clickable:"","manual-focus":"",active:"search"===e.link,"active-class":"active"},on:{click:function(t){return e.openSearch()}}},[a("q-item-section",{staticClass:"flex justify-center items-center"},[a("q-icon",{staticClass:"btn-icon",attrs:{name:"search"}})],1)],1),a("q-item",{staticClass:"q-pa-none menu-btn-center",attrs:{clickable:"","manual-focus":"",active:"scan"===e.link,"active-class":"active"},on:{click:function(t){return e.startScanQRCode()}}},[a("q-item-section",{staticClass:"flex justify-center items-center"},[a("div",{staticClass:"square-shadow"}),a("div",{staticClass:"square-icon flex items-center justify-center"},[a("q-icon",{staticClass:"btn-icon",attrs:{name:"qr_code_scanner"}})],1)])],1),a("q-item",{staticClass:"q-pa-none menu-btn right",attrs:{clickable:"","manual-focus":"",active:"create"===e.link,"active-class":"active"},on:{click:function(t){return e.buildQuest()}}},[a("q-item-section",{staticClass:"flex justify-center items-center"},[a("q-icon",{staticClass:"btn-icon material-icons-outlined",attrs:{name:"extension"}})],1)],1),a("q-item",{staticClass:"q-pa-none menu-btn right",attrs:{clickable:"","manual-focus":"",active:"profil"===e.link,"active-class":"active"},on:{click:function(t){return e.openProfile()}}},[a("q-item-section",{staticClass:"flex justify-center items-center"},[a("q-icon",{staticClass:"btn-icon material-icons-outlined",attrs:{name:"badge"}})],1)],1),a("q-item",{staticClass:"admin-icon"},[e.$store.state.user.isAdmin?a("icon-btn-square",{attrs:{color:e.color,icon:"admin_panel_settings",fill:"admin"!==e.link},nativeOn:{click:function(t){return e.openAdminPage()}}}):e._e()],1),a("q-item",{staticClass:"back-icon"},["graaly"!==e.link?a("icon-btn-square",{attrs:{color:e.color,icon:"arrow_back",fill:""},nativeOn:{click:function(t){return e.back()}}}):e._e()],1)],1)],1)},it=[],lt=(a("b54a"),a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative-position",class:e.label?"q-mb-lg":"",style:e.cssVars},[a("q-btn",{staticClass:"btn",attrs:{flat:"",disable:e.disable}},[a("div",{staticClass:"square-shadow"}),a("div",{staticClass:"square-icon flex items-center justify-center"},[a("q-icon",{staticClass:"btn-icon",attrs:{name:e.icon}})],1)]),e.label?a("div",{staticClass:"btn-label"},[e._v(e._s(e.label))]):e._e()],1)}),ct=[],ut=(a("6c7b"),{name:"iconBtnSquare",props:{color:String,icon:String,fill:{type:Boolean,default:!1},rotation:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},label:{type:String,default:null}},data:function(){return{}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},iconRotation:function(){return this.rotation?"-135deg":"-45deg"},cssVars:function(){return this.fill?{"--bg-color":"white","--text-color":this.bgColor,"--icon-rotation":this.iconRotation}:{"--bg-color":this.bgColor,"--text-color":"white","--icon-rotation":this.iconRotation}}}}),dt=ut,pt=(a("a2c9"),Object(tt["a"])(dt,lt,ct,!1,null,"c25b2974",null)),mt=pt.exports,ht=a("872f"),gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"createProfilDialog",staticStyle:{"max-width":"400px"}},[a("q-card",{staticClass:"login-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n      "+e._s(e.$t("label.StartCreation"))+"\n      "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[e._v("\n      "+e._s(e.$t("label.DoYouWantToCreateAnAccount"))+"\n      "),a("div",[a("text-btn-square",{staticClass:"q-mb-lg q-mt-lg",attrs:{title:e.$t("label.CreateAccount"),color:"accent",icon:"done"},nativeOn:{click:function(t){return e.onOKClick()}}})],1)])],1)],1)},ft=[],bt={name:"createProfilDialog",components:{textBtnSquare:ht["a"],iconBtnSquare:mt},methods:{show:function(){this.$refs.createProfilDialog.show()},hide:function(){this.$refs.createProfilDialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onCancelClick:function(){this.hide()}}},vt=bt,yt=Object(tt["a"])(vt,gt,ft,!1,null,"aa6866cc",null),wt=yt.exports,qt={name:"homeMenu",components:{iconBtnSquare:mt,textBtnSquare:ht["a"],createProfilDialog:wt},props:{color:{type:String,default:"rgb(214,11,81)"}},data:function(){return{link:"graaly",offline:{available:window.cordova,show:!1,active:!1,quest:null}}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor}}},mounted:function(){switch(this.$route.name){case"home":this.link="graaly";break;case"search":this.link="search";break;case"buildhome":this.link="create";break;case"profile":this.link="profil";break;case"admin":this.link="admin";break;case"scanCode":this.link="scan";break;default:this.link="other";break}},watch:{$route:function(e,t){switch(e.name){case"home":this.link="graaly";break;case"search":this.link="search";break;case"buildhome":this.link="create";break;case"profile":this.link="profil";break;case"admin":this.link="admin";break;case"scanCode":this.link="scan";break;default:this.link="other";break}}},methods:{back:function(){this.$router.go(-1)},startScanQRCode:function(){this.offline.active||this.$router.push({name:"scanCode",params:{login:"false"}})},openAdminPage:function(){this.offline.active||this.$router.push("/admin")},openSearch:function(){this.offline.active||this.$router.push("/search/quest/around")},goToHome:function(){this.$router.push("/home")},openProfile:function(e){this.offline.active||(e||(e=this.$store.state.user.id),this.$router.push("/profile/"+e))},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},buildQuest:function(){this.userIsConnected()?this.$router.push("/quest/create/welcome"):this.createProfilDialog()},userIsConnected:function(){return"-"!==this.$store.state.user.name},createProfilDialog:function(){var e=this;this.$q.dialog({component:wt,parent:this}).onOk((function(){e.openUpdateProfilePage()}))}}},xt=qt,Ct=(a("e7ec"),Object(tt["a"])(xt,rt,it,!1,null,"0932887a",null)),St=Ct.exports,kt={name:"menu",components:{homeMenu:St},data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":navigator.language&&"es"===navigator.language.substr(0,2)||navigator.userLanguage&&"es"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="es":this.$i18n.locale="en"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":navigator.language&&"es"===navigator.language.substr(0,2)||navigator.userLanguage&&"es"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="es":this.$i18n.locale="en"}},methods:{}},Pt=kt,_t=Object(tt["a"])(Pt,ot,nt,!1,null,"0a56764f",null),Tt=_t.exports,It={},At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",class:e.showNonHybridQRReader?"bg-transparent":"background-home"},[a("div",{staticClass:"home q-pa-md"},[e.showNonHybridQRReader?e._e():a("div",{staticClass:"teaser"},[!e.offline.active&&e.bestQuest?a("q-carousel",{staticClass:"bg-transparent q-pa-none q-mb-lg carousel",attrs:{"transition-prev":"slide-right","transition-next":"slide-left","control-color":e.slide%2?"secondary":e.slide%3?"accent":"primary",swipeable:"",animated:"",navigation:"",infinite:"",height:"400px",autoplay:e.autoplay},on:{mouseenter:function(t){e.autoplay=!1},mouseleave:function(t){e.autoplay=!0}},model:{value:e.slide,callback:function(t){e.slide=t},expression:"slide"}},e._l(e.bestQuest,(function(e,t){return a("q-carousel-slide",{key:t,staticClass:"column no-wrap flex-center q-pa-none",attrs:{name:t}},[a("quest-card",{staticClass:"q-mb-xl",attrs:{quest:e,color:t%2?"secondary":t%3?"accent":"primary",direction:t%2?"right":"left"}})],1)})),1):a("div",{staticClass:"q-pb-lg",staticStyle:{"max-width":"100%"}},[a("q-skeleton",{attrs:{height:"250px",square:"",bordered:""}}),a("div",{staticClass:"row items-start no-wrap q-mt-sm"},[a("div",{staticClass:"col q-pl-sm"},[a("q-skeleton",{attrs:{type:"text",square:"",width:"30%"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px",width:"75%"}})],1)])],1),e.offline.active?a("div",{staticClass:"q-pt-lg"},[a("div",{staticClass:"q-pa-md no-internet-connection text-white"},[a("q-icon",{attrs:{name:"cloud_off"}}),a("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():a("div",{staticClass:"q-pa-md text-white"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?a("div",[a("quest-card",{staticClass:"q-mb-xl",attrs:{quest:e.questList[0],color:"primary",direction:"left"}}),e.warnings.noNetwork?a("div",{staticClass:"centered bg-warning q-pa-sm text-white"},[a("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n          ")],1):e._e(),a("quest-list",{attrs:{quests:e.questList,title:e.$t("label.CachedQuests"),icon:"cloud_off",color:"#757575"}})],1):e._e()]):e._e(),e.warnings.noNetwork?a("div",{staticClass:"centered bg-warning q-px-sm q-py-md"},[a("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n      ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?a("div",[!e.warnings.noNetwork&&e.warnings.noServerReponse?a("div",{staticClass:"centered bg-warning q-px-sm q-py-md"},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e()]):e._e(),!e.offline.active&&e.invitationQuests&&e.invitationQuests.length>0?a("div",[a("quest-list",{attrs:{quests:e.invitationQuests,title:e.$t("label.Invitations"),icon:"badge",color:"primary"}})],1):e._e(),e.offline.active?e._e():a("div",[a("quest-list",{attrs:{quests:e.nearestQuests,title:e.$t("label.AroundYou"),icon:"explore",readMore:"",color:"accent",around:""},on:{readMore:e.readMoreAroundYou}})],1),e.offline.active?e._e():a("div",[a("quest-list",{attrs:{quests:e.onTopQuests,title:e.$t("label.OnTopGames"),icon:"grade",color:"secondary"}})],1),!e.offline.active&&e.extraQuests&&e.extraQuests.items&&e.extraQuests.items.length>0?a("div",[a("quest-list",{attrs:{quests:e.extraQuests.items,title:e.$t("label.shortLang"),icon:"auto_awesome",color:"accent"}})],1):e._e(),e.offline.active||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country?e._e():a("text-btn-square",{staticClass:"q-mb-xl",attrs:{outlined:"",title:e.$t("label.WeNeedMoreInformationAboutYou"),color:"accent",icon:"face"},nativeOn:{click:function(t){return e.openUpdateProfilePage()}}}),e.offline.active||e.friendQuests&&!(e.friendQuests.length>0)?e._e():a("div",[a("quest-list",{attrs:{quests:e.friendQuests,title:e.$t("label.FriendsQuests"),icon:"group",color:"secondary"}})],1),e.offline.active||e.users&&!(e.users.length>0)?e._e():a("div",[a("creator-list",{attrs:{creators:e.users,color:"primary",title:"",horizontal:""},on:{readMore:e.readMoreAllCreators}})],1),e.offline.active?e._e():a("text-btn-square",{staticClass:"q-mb-xl",attrs:{title:e.$t("label.StartCreation"),color:"accent",icon:"extension"},nativeOn:{click:function(t){return e.buildQuest()}}})],1),e.offline.active?e._e():a("text-btn-square",{staticClass:"q-mb-xl",attrs:{title:e.$t("label.OpenTheMap"),color:"secondary",outlined:"",icon:"public"},nativeOn:{click:function(t){return e.openMap()}}}),e.offline.active?e._e():a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)])},$t=[],Ot={listNearest:function(e,t){return t||(t="default"),Qe().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/0/lang/"+t).catch((function(e){return console.log(e.request)}))},listNearestSync:function(e,t,a,s){return t||(t="default"),Qe().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/"+a+"/lang/"+t).then((function(e){s(!1,e)}))},listHomeQuests:function(e,t){return t||(t="default"),Qe().get("quests/home/"+e.lng+"-"+e.lat+"/lang/"+t).catch((function(e){return console.log(e.request)}))},listAllForCountry:function(){return Qe().get("quests/country/FR").catch((function(e){return console.log(e.request)}))},listFriendQuests:function(e){return e||(e="default"),Qe().get("quests/friends/played/0/lang/"+e).catch((function(e){return console.log(e.request)}))},listFriendQuestsync:function(e,t,a){return e||(e="default"),Qe().get("quests/friends/played/"+t+"/lang/"+e).then((function(e){a(!1,e)}))},getByIdForStep:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i,l;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(window.cordova){o.next=5;break}return o.next=3,s.getByIdOnline(e,t,a);case 3:return r=o.sent,o.abrupt("return",r.data);case 5:return o.next=7,s.isCached(e);case 7:if(i=o.sent,i||"online"!==Ve.state.networkMode){o.next=23;break}return o.prev=9,o.next=12,s.getByIdOnline(e,t,a);case 12:return l=o.sent,o.abrupt("return",l.data);case 16:if(o.prev=16,o.t0=o["catch"](9),!Ve.state.forceOnline){o.next=21;break}throw console.error("getByIdForStep(): could not retrieve quest data (online mode)",o.t0),o.t0;case 21:Ve.commit("setNetworkMode","offline"),console.log("switch to offline mode");case 23:return o.abrupt("return",s.getByIdOffline(e,a));case 24:case"end":return o.stop()}}),n,null,[[9,16]])})))()},getByIdOnline:function(e){var t=arguments;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>1&&void 0!==t[1]?t[1]:"999",n=t.length>2&&void 0!==t[2]?t[2]:"default",a.next=4,Qe().get("quest/"+e+"/version/"+s+"/lang/"+n).catch((function(e){return console.log(e.request)}));case 4:return r=a.sent,a.abrupt("return",r);case 6:case"end":return a.stop()}}),a)})))()},getByIdOffline:function(e,t){return r()(o.a.mark((function a(){var s,n,r,i,l,c,u;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,uu.readFile(e,"quest_"+e+".json");case 2:if(s=a.sent,s){a.next=5;break}throw new Error("Could not load quest with Id '"+e+"' from cache");case 5:return s=JSON.parse(s),a.next=8,uu.readBinaryFile(e,s.picture[t]);case 8:if(n=a.sent,n&&(s.picture=n),!s.customization||!s.customization.logo||""===s.customization.logo){a.next=15;break}return a.next=13,uu.readBinaryFile(e,s.customization.logo);case 13:r=a.sent,r&&(s.customization.logo=r);case 15:if(!s.customization||!s.customization.audio){a.next=29;break}if(i=s.mainLanguage,!s.customization.audio[t]||""===s.customization.audio[t]){a.next=24;break}return a.next=20,uu.readBinaryFile(e,s.customization.audio[t]);case 20:l=a.sent,l&&(s.customization.audio[t]=l),a.next=29;break;case 24:if(t===i||!s.customization.audio[i]||""===s.customization.audio[i]){a.next=29;break}return a.next=27,uu.readBinaryFile(e,s.customization.audio[i]);case 27:c=a.sent,c&&(s.customization.audio[i]=c);case 29:if(!s.customization||!s.customization.character||""===s.customization.character){a.next=34;break}return a.next=32,uu.readBinaryFile(e,s.customization.character);case 32:u=a.sent,u&&(s.customization.character=u);case 34:return a.abrupt("return",s);case 35:case"end":return a.stop()}}),a)})))()},getSize:function(e,t){return Qe().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.getByIdOnline(e,999,t)},find:function(e,t,a){return a||(a="default"),Qe().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/0/lang/"+a)},findSync:function(e,t,a,s,o){return a||(a="default"),Qe().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/"+s+"/lang/"+a).then((function(e){o(!1,e)}))},create:function(e,t,a,s){return Qe().post("quest/create/"+s+"/"+t+"/"+a,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return Qe().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return Qe().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return Qe().delete("quest/"+e+"/version/"+t+"/remove")},clone:function(e,t){return Qe().post("quest/"+e+"/version/"+t+"/clone")},createFromSample:function(e,t,a,s){return Qe().post("quest/"+e+"/version/"+t+"/createfromsample/"+a+"/"+(s?"pro":"individual"))},closePrivate:function(e,t){return Qe().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return Qe().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return Qe().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return Qe().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return Qe().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e,t){return t||(t="default"),Qe().get("user/"+e+"/quests/created/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e,t){return t||(t="default"),Qe().get("user/"+e+"/quests/played/0/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUserSync:function(e,t,a,s){return t||(t="default"),Qe().get("user/"+e+"/quests/played/"+a+"/lang/"+t).then((function(e){s(!1,e)}))},listMedia:function(e,t,a){return a||(a="all"),Qe().get("quest/"+e+"/version/"+t+"/media/"+a+"/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,a){return Qe().delete("quest/"+e+"/version/"+t+"/media/"+a+"/remove")},listObjectFiles:function(e,t){return Qe().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,a){return Qe().get("quest/"+e+"/version/"+t+"/statistics/"+a).catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return Qe().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return Qe().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAudio:function(e){return Qe().post("/quest/audio/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacter:function(e){return Qe().post("/quest/character/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacterOnMap:function(e){return Qe().post("/quest/characteronmap/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return Qe().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return Qe().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadSnapshot:function(e,t){return Qe().post("/quest/"+t+"/gamesnapshot/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return Qe().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return Qe().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},checkTierPayment:function(e){return Qe().get("quest/"+e+"/payment/tier/check").catch((function(e){return console.log(e.request)}))},printQRCodes:function(e){return Qe().get("quest/"+e+"/payment/tier/print").catch((function(e){return console.log(e.request)}))},createTierPayment:function(e,t){return Qe().post("quest/"+e+"/payment/tier/add",{price:t}).catch((function(e){return console.log(e.request)}))},removeTierPayment:function(e,t){return Qe().delete("quest/"+e+"/payment/tier/remove/"+t).catch((function(e){return console.log(e.request)}))},listTierPayments:function(e){return Qe().get("quest/"+e+"/payment/tier/list").catch((function(e){return console.log(e.request)}))},useTierPaymentCode:function(e,t){return Qe().post("quest/"+e+"/payment/tier/use",{code:t}).catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return Qe().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return Qe().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return Qe().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Qe().get("quest/"+e+"/connectandplay/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},checkQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Qe().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return Qe().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return Qe().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,a){return Qe().put("quest/"+e+"/version/"+t+"/editor/add/"+a).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,a){return Qe().delete("quest/"+e+"/version/"+t+"/editor/remove/"+a)},listInvitees:function(e,t){return Qe().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,a){return Qe().put("quest/"+e+"/version/"+t+"/invitee/add/"+a).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,a){return Qe().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+a)},isCached:function(e){return!!window.cordova&&uu.checkIfFileExists(e,"quest_"+e+".json")},removeFromCache:function(e){return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.removeDirectory(e);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://graaly-upload.s3-accelerate.amazonaws.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.jpg"}},Mt={listFriends:function(e,t,a){return Qe().get("user/"+e+"/friends/list/"+t+"/"+a).catch((function(e){return console.log(e.request)}))},listFriendsSync:function(e,t,a,s){return Qe().get("user/"+e+"/friends/list/"+t+"/"+a).then((function(e){s(!1,e)}))},listSuggestions:function(e,t){return Qe().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/0").catch((function(e){return console.log(e.request)}))},listSuggestionsSync:function(e,t,a,s){return Qe().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/"+a).then((function(e){s(!1,e)}))},getCreatorFromId:function(e){return Qe().get("user/creatorFromId/"+e).then((function(e){done(!1,e)}))},listFollowersSync:function(e,t,a){return Qe().get("user/followers/"+e+"/"+t).then((function(e){a(!1,e)}))},find:function(e,t){return Qe().get("user/type/"+e+"/filter/"+t+"/0").catch((function(e){return console.log(e.request)}))},findSync:function(e,t,a,s){return Qe().get("user/type/"+e+"/filter/"+t+"/"+a).then((function(e){s(!1,e)}))},listNews:function(e,t,a){return Qe().get("user/friends/news/list/"+e+"/"+t).then((function(e){a(!1,e)}))},likeNews:function(e){return Qe().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return Qe().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return Qe().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRangeRanking:function(e){return Qe().get("ranking/"+e).catch((function(e){return console.log(e.request)}))},getRewards:function(e,t){return Qe().get("user/"+e+"/reward/list/"+t).catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return Qe().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return Qe().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return Qe().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return Qe().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return Qe().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?Qe().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?Qe().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):Qe().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return Qe().delete("user/friend/remove/"+e)},checkContacts:function(e){return Qe().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},addCredits:function(e,t){return Qe().post("admin/user/"+e+"/credits/add",t).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return Qe().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},zt={launchpopup:function(){var e=this;AppRate.preferences.useLanguage="fr",AppRate.preferences.storeAppURL={ios:"id1448284225",android:"market://details?id=graaly.app"},AppRate.preferences.reviewType={ios:"InAppReview",android:"InAppReview"},AppRate.preferences.simpleMode=!0,AppRate.preferences.callbacks.onButtonClicked=function(t){switch(console.log("onButtonClicked -> "+t),t){case 1:e.addAlreadyAskedForRating();break;case 2:e.addLater(7);break;case 3:break;default:break}},AppRate.promptForRating()},initLocalStorage:function(){null===window.localStorage.getItem("alreadyAsked")&&window.localStorage.setItem("alreadyAsked","false"),null===window.localStorage.getItem("futuredate")&&window.localStorage.setItem("futuredate","")},addAlreadyAskedForRating:function(){window.localStorage.setItem("alreadyAsked","true")},addLater:function(e){var t=new Date,a=new Date;a.setDate(t.getDate()+e),window.localStorage.setItem("alreadyAsked","later"),window.localStorage.setItem("futuredate",a.toString())},hasAlreadyHavePopup:function(){var e=window.localStorage.getItem("alreadyAsked");if("true"===e||"false"===e)return console.log("has already awensered"),e;if("later"===e){var t=window.localStorage.getItem("futuredate");return new Date(t)<new Date?"false":"true"}},resetAlreadyAsked:function(){window.localStorage.setItem("alreadyAsked","false"),window.localStorage.setItem("futuredate","")}},Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isSupported&&e.isActive?e._e():a("div",{staticClass:"geolocation-layer"},[!e.isActive&&e.nbFails>=2?a("div",[a("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[a("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"},on:{click:function(t){e.showHelp=!0}}})],1)],1):e._e(),a("q-dialog",{model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[a("q-card",[a("q-card-section",{staticClass:"popup-header centered"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.LocationSearching"))+"\n        "),e.askUserToEnableGeolocation?a("div",[a("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.CouldNotRetrieveYourPosition"))+"\n          ")]),a("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.PossibleReasons"))+"\n            "),a("ul",[a("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),a("li",[e._v("\n                "+e._s(e.$t("label.GeolocationDisabled"))+"\n                "),e.nativeSettingsIsEnabled?a("span",[a("br"),a("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():a("div",[e.isChrome?a("div",[a("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():a("div",[a("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])])]):e._e(),e.isSupported?e._e():a("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n          "+e._s(e.$t("label.GeolocationNotSupported"))+"\n        ")])])],1)],1)],1)},Rt=[],jt=(a("4917"),a("c5f6"),{props:{maximumAge:{type:Number,default:0}},data:function(){return{isSupported:!0,isActive:!1,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:5e3,nbFails:0,disabled:!1,alreadyWorked:!1,showHelp:!1,method:uu.isIOS()?"getCurrentPosition":"watchPosition",geolocationWatchId:null,timeoutIds:[],positionHistory:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,a=t.vendor,s=t.userAgent.indexOf("Edge")>-1,o=t.userAgent.match("CriOS");return!!o||null!==e&&"undefined"!==typeof e&&"Google Inc."===a&&!1===s},askUserToEnableGeolocation:function(){return this.nbFails>=2&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||(this.stopTracking(),"watchPosition"===this.method?(this.isActive=!0,this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge})):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(console.warn("Could not get location",e),!this.disabled&&(this.isSupported=!0,this.isActive=!1,this.nbFails++,window.cordova||(this.userDeniedGeolocation=1===e.code),this.$emit("error",!this.alreadyWorked),"getCurrentPosition"===this.method)){var t=setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);this.timeoutIds.push(t)}},locationSuccess:function(e){if(!this.disabled&&(this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1,this.$emit("success",{coords:{accuracy:e.coords&&e.coords.accuracy?e.coords.accuracy:10,altitude:e.coords?e.coords.altitude:null,speed:e.coords?e.coords.speed:null,latitude:e.coords.latitude,longitude:e.coords.longitude}}),"getCurrentPosition"===this.method)){var t=setTimeout(this.startTracking,1e3);this.timeoutIds.push(t)}},stopTracking:function(){if("watchPosition"===this.method&&null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null),this.timeoutIds.length>0){var e=!0,t=!1,a=void 0;try{for(var s,o=this.timeoutIds[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var n=s.value;clearTimeout(n)}}catch(r){t=!0,a=r}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}this.timeoutIds=[]}},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),Dt=jt,Ft=(a("4de3"),Object(tt["a"])(Dt,Nt,Rt,!1,null,"06d0716c",null)),Lt=Ft.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card",class:e.info?"":"cursor-pointer",style:e.cssVars,on:{click:function(t){!e.info&&e.$router.push("/quest/play/"+e.quest.questId)}}},[e.quest?a("div",[a("q-card-section",{staticClass:"q-pa-none relative-position section-up",style:"background: url("+e.getThumbImage()+" ) center center /cover no-repeat; height: 250px;"},[a("div",{staticClass:"quest-rating"},[e.ratingValue&&0!=e.ratingValue?a("q-rating",{attrs:{size:"1em",max:5,color:e.color,readonly:"",icon:"star_border","icon-selected":"star","icon-half":"star_half"},model:{value:e.ratingValue,callback:function(t){e.ratingValue=t},expression:"ratingValue"}}):e._e(),a("p",{staticClass:"quest-price"},[e._v(" "+e._s(e.getPrice())+" ")])],1),a("div",{staticClass:"inter-bar",class:"left"===e.direction?"left":"right"}),a("creator-badge",{staticClass:"creator-badge",class:"left"===e.direction?"left":"right",attrs:{color:e.bgColor,creator:e.creator,custom:e.customization}}),!e.quest.availablePoints||!e.quest.availablePoints.maxPts||e.quest.customization&&e.quest.customization.removeScoring?e._e():a("div",{staticClass:"score-badge flex items-center justify-center",class:"right"===e.direction?"right":"left",on:{click:function(t){return e.$emit("showRewards")}}},[a("div",{staticClass:"text-white"},[e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+"\n        ")])])],1),e.info?e._e():a("q-card-section",{staticClass:"section-down",staticStyle:{"padding-top":"30px"}},[a("div",{staticClass:"card-title"},[e._v(e._s(e.quest.title))]),a("div",{staticClass:"card-city"},[e._v(" "+e._s(e.quest.location.town)+" "+e._s(e.quest.location.zipcode))]),a("div",{staticClass:"card-stats flex"},[e.quest.duration&&e.quest.duration<999?a("div",{staticClass:"card-time q-mr-md"},[e._v(e._s(e.$t("label.EstimateTime"))+" : "+e._s(e.quest.duration)+" min")]):e._e(),a("div",{staticClass:"card-difficult"},[e._v(e._s(e.$t("label.Difficulty"))+" : "+e._s(e.getDifficult()))])])]),e.info?a("q-card-section",{staticClass:"section-info"},[a("div",{staticClass:"q-mt-lg q-mb-md info-title"},[e._v(e._s(""===e.quest.title?e.$t("label.NoTitle"):e.quest.title))]),a("div",{staticClass:"info-description",domProps:{innerHTML:e._s(e.quest.description)}}),e.isUserTooFar&&!e.quest.allowRemotePlay?a("div",{staticClass:"q-pt-md"},[a("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.$t("label.QuestIsFarFromUser"))}})],1):e._e()]):e._e(),e.info?a("q-card-section",{staticClass:"section-down"},[e.quest&&e.quest.status?a("div",{staticClass:"text-white"},[e.warning.lowBattery?a("div",{staticClass:"bg-warning q-pa-sm shadow-5"},[a("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n        ")],1):e._e(),e.warning.tooMuchUsers?a("div",{staticClass:"bg-warning q-pa-sm shadow-5"},[a("q-icon",{attrs:{name:"warning"}}),e._v(" "+e._s(e.$t("label.TooMuchUsersCurrently"))+"\n        ")],1):e._e(),"published"!==e.quest.status?a("div",{staticClass:"info-quest shadow-5 centered q-pa-sm q-mb-md"},[e._v("\n          "+e._s(e.$t("label."+("quest"===e.quest.type?"QuestDraftVersion":"PageDraftVersion")))+"\n        ")]):e._e(),e.languages.length>1?a("div",{staticClass:"q-pt-md text-subtitle1"},[e._v("\n          "+e._s(e.$t("label.ChooseYourLanguage"))+" \n          "),e.isLanguage("en")?a("img",{class:"en"===e.language?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}):e._e(),e._v(" \n          "),e.isLanguage("fr")?a("img",{class:"fr"===e.language?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}}):e._e(),e._v(" \n          "),e.isLanguage("es")?a("img",{class:"es"===e.language?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-es.png"},on:{click:function(t){return e.switchLanguage("es")}}}):e._e()]):e._e(),a("div",{staticClass:"row q-pt-md text-subtitle1 properties-bar"},[a("div",{staticClass:"q-mr-lg"},[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/difficulty.svg"}}),e._v(e._s(e.$t("label.Difficulty"+e.quest.level))+"\n          ")]),e.quest.duration&&e.quest.duration<999?a("div",{staticClass:"q-mr-lg"},[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/duration.svg"}}),e.quest.duration&&e.quest.duration<60?a("span",[e._v(e._s(e.quest.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),e.quest.duration&&e.quest.duration>=60?a("span",[e._v(e._s(Math.floor(e.quest.duration/60))+e._s(e.$t("label.hoursSimplified"))+e._s(e.quest.duration%60>0?e.quest.duration%60:""))]):e._e()]):e._e(),"quest"===e.quest.type?a("div",{staticClass:"q-mr-lg"},[e.quest.premiumPrice.tier||"free"!==e.shop.premiumQuest.priceCode||"quest"!==e.quest.type?e._e():a("span",[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),e.shop.premiumQuest.alreadyPayed?e._e():a("span",[e._v(e._s(e.$t("label.Free")))]),e.shop.premiumQuest.alreadyPayed?a("span",[e._v(e._s(e.$t("label.AlreadyPaied")))]):e._e()]),"free"!==e.shop.premiumQuest.priceCode&&"quest"===e.quest.type?a("span",[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),a("span",[e._v(e._s("0"===e.shop.premiumQuest.priceValue?e.quest.premiumPrice&&e.quest.premiumPrice.prices&&e.quest.premiumPrice.prices.fr?e.quest.premiumPrice.prices.fr:"...":e.shop.premiumQuest.priceValue))])]):e._e()]):e._e()]),"room"===e.quest.type&&e.quest.premiumPrice.manual?a("div",[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),a("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.premiumPrice.tier&&"quest"===e.quest.type&&e.quest.premiumPrice.manual&&"free"===e.shop.premiumQuest.priceCode?a("div",[a("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),a("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.location&&e.quest.location.address?a("div",{staticClass:"text-subtitle1 q-mt-sm quest-location"},[e._v("\n           "+e._s(e.quest.location.address)+"\n        ")]):e._e(),e.quest.warning?a("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning",on:{click:function(t){return e.openWarningLink()}}},[a("q-icon",{attrs:{color:"secondary",name:"warning"}}),a("u",[e._v(e._s(e.getTranslatedData(e.quest.warning)))])],1):e._e(),e.quest.playersNumber&&e.quest.playersNumber>1?a("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning"},[a("q-icon",{attrs:{color:"secondary",name:"group"}}),e._v(" "+e._s(e.$t("label.YouNeedToBeXPlayers",{nb:e.quest.playersNumber}))+"\n        ")],1):e._e(),a("div",{staticClass:"text-subtitle1 q-mt-sm quest-ranking",staticStyle:{cursor:"pointer"}},[a("a",{staticClass:"concertone",on:{click:function(t){return e.$router.push("/user/ranking/ranking/"+e.quest.questId)}}},[e._v(e._s(e.$t("label.Ranking")))])])]):e._e()]):e._e()],1):a("div",{staticClass:"flex items-center justify-center full-height"},[a("q-spinner-dots",{attrs:{color:e.color,size:"2em"}})],1)])},Qt=[],Bt=a("bc78"),Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"badge",style:e.cssVars,on:{click:function(t){return e.openProfile(e.creator._id)}}},[e.list?a("div",{staticClass:"title"},[e._v(e._s(e.creator.name))]):e._e()])},Yt=[],Gt={name:"creatorBadge",props:{creator:Object,list:{type:Boolean,default:!1},color:{type:String,default:"accent"},custom:{type:Boolean,default:!1}},data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor,"--bg-darken":Bt["a"].lighten(this.bgColor,-20),"--bg-image":"url("+this.getBackgroundImage(this.custom?"quest":"profile",this.creator?this.creator.picture:null)+" )",border:this.list?"2px solid "+this.bgColor:"4px solid "+this.bgColor}}},methods:{getBackgroundImage:function(e,t){return t&&"_"===t[0]?"statics/images/profile/"+t:t&&-1!==t.indexOf("blob:")?t:t?this.uploadUrl+"/upload/"+e+"/"+t:"statics/images/icon/profile-small.png"},openProfile:function(e){this.custom||this.$router.push("/profile/"+e)}}},Ht=Gt,Wt=(a("d1f9"),Object(tt["a"])(Ht,Ut,Yt,!1,null,"36ac635c",null)),Vt=Wt.exports,Jt=(a("f751"),function(e,t,a,s,o){window.cordova;var n,r={position:"top"};switch(t){case"positive":n={icon:"check_circle",color:o||"positive",timeout:s||4e3};break;case"warning":n={icon:"warning",color:o||"orange",timeout:s||8e3};break;case"error":n={icon:"report_problem",color:o||"negative",timeout:s||8e3};break;case"rightAnswer":n={color:o||"positive",timeout:s||6e3,multiLine:!0};break;case"wrongAnswer":n={color:o||"orange",timeout:s||5e3,multiLine:!0};break;case"readMore":n={icon:"info",color:o||"positive",timeout:0,position:"bottom"},r.actions=[{icon:"close"}];break;default:n={icon:"info",color:o||"info",timeout:s||3e3};break}a&&(n.actions=a);var i=Ie["a"].create(Object.assign({message:e},r,n));return"readMore"!==t&&uu.clearAllNotifications(),uu.notificationsArr.push(i),i}),Kt={name:"questCard",components:{creatorBadge:Vt},props:{quest:Object,warning:Object,shop:Object,language:null,languages:null,color:{type:String,default:"primary"},direction:{type:String,default:"left"},info:{type:Boolean,default:!1},isUserTooFar:{type:Boolean,default:!1}},data:function(){return{ratingValue:0,creator:null,customization:!1,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.quest&&this.quest.rating.value&&(this.ratingValue=this.quest.rating.value),this.getCreator()},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor,"--bg-darken":Bt["a"].lighten(this.bgColor,-20),"--height":this.info?"inherit":"350px"}}},methods:{getCreator:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.getFriend(e.quest.authorUserId);case 2:a=t.sent,e.creator=a.data,e.quest.customization.logo&&(e.creator.picture=e.quest.customization.logo,e.customization=!0);case 5:case"end":return t.stop()}}),t)})))()},getPrice:function(){return!this.quest.premiumPrice||this.quest.premiumPrice.androidId&&this.quest.premiumPrice.active||this.quest.premiumPrice.manual?this.$t("label.Paying"):this.$t("label.Free")},getDifficult:function(){return 3===this.quest.level?this.$t("label.Hard"):2===this.quest.level?this.$t("label.Normal"):this.$t("label.Easy")},getThumbImage:function(){return this.quest?(this.quest.thumb&&(this.quest.thumb[this.lang]?e=this.quest.thumb[this.lang]:this.quest.thumb[this.quest.mainLanguage]&&(e=this.quest.thumb[this.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.jpg"):"statics/images/quest/default-quest-picture.jpg";var e},switchLanguage:function(e){var t=this;this.$emit("changeLanguage",e),e!==this.$store.state.user.language&&this.$q.dialog({message:this.$t("label.UserLanguageNotTheOneOfTheGame"),ok:this.$t("label.Edit"),cancel:this.$t("label.Cancel")}).onOk((function(){t.changeUserLanguage(e)})).onCancel((function(){return!1}))},changeUserLanguage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={language:e},t.$q.loading.show(),a.next=4,Be.modifyAccount(s);case 4:n=a.sent,t.$q.loading.hide(),n.status>=300&&n.data&&n.data.message?Jt(t.$t("label."+n.data.message),"warning"):Jt(t.$t("label.AccountModified"),"positive"),t.$i18n.locale=e;case 8:case"end":return a.stop()}}),a)})))()},isLanguage:function(e){if(this.languages&&this.languages.length>0)for(var t=0;t<this.languages.length;t++)if(this.languages[t].lang===e)return!0;return!1}}},Zt=Kt,Xt=(a("43ca"),Object(tt["a"])(Zt,Et,Qt,!1,null,"795d6a0b",null)),ea=Xt.exports,ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pb-lg"},[e.title?a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:e.icon}}),a("span",[e._v(e._s(e.title))])],1),e.readMore?a("div",{staticStyle:{"font-size":"12px","text-decoration":"underline"},on:{click:function(t){return e.readMoreBtn()}}},[e._v(e._s(e.$t("label.SeeMore")))]):e._e()]):e._e(),a("div",{staticClass:"quest-list"},[e._l(e.quests,(function(t,s){return s<e.maxShow?a("mini-quest-card",{key:t._id,staticClass:"q-mb-sm",attrs:{quest:t,direction:s%2===0?"left":"right",color:"allColors"===e.color?e.allColors(s+1):e.color,"no-rating":e.noRating,"no-price":e.noPrice}}):e._e()})),e.quests?e._e():a("div",{staticClass:"flex items-center justify-center full-height"},[a("q-card",{staticClass:"full-width q-pa-none",staticStyle:{background:"transparent","border-radius":"10px"},attrs:{flat:""}},[a("div",{staticClass:"row items-start no-wrap q-pa-sm"},[a("q-skeleton",{attrs:{size:"56px",square:""}}),a("div",{staticClass:"col q-pl-sm"},[a("q-skeleton",{attrs:{type:"text",square:"",width:"30%"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px",width:"75%"}})],1)],1)])],1)],2),e.title&&e.quests&&0===e.quests.length?a("div",[a("div",{staticClass:"centered q-pa-md text-white"},[e.around?a("span",[e._v(e._s(e.$t("label.NoQuestAroundYou")))]):e._e(),a("div",[a("a",{staticClass:"small",on:{click:function(t){return e.$router.push("/quest/create/welcome")}}},[e._v(e._s(e.$t("label.CreateYourQuest")))])])])]):e._e()])},aa=[],sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card",style:e.cssVars,on:{click:function(t){return e.$router.push("/quest/play/"+e.quest.questId)}}},[a("div",{staticClass:"flex items-center"},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{background:"#fff","border-radius":"10px 0 0 10px"}},[a("div",{staticClass:"relative-position section-left"},[a("div",{staticClass:"full-height flex"},[e.noPrice?e._e():a("p",{staticClass:"quest-price self-end"},[e._v(" "+e._s(e.getPrice())+" ")])]),a("div",{staticClass:"inter-bar",class:"left"===e.direction?"left":"right"})])]),a("q-card-section",{staticClass:"section-right"},[e.noRating||0==e.ratingValue?e._e():a("q-rating",{staticClass:"quest-rating",attrs:{size:"1em",max:5,color:"white",readonly:"",icon:"star_border","icon-selected":"star","icon-half":"star_half"},model:{value:e.ratingValue,callback:function(t){e.ratingValue=t},expression:"ratingValue"}}),a("div",{staticClass:"card-title"},[e._v(e._s(e.quest.title))]),a("div",{staticClass:"card-city"},[e._v(" "+e._s(e.quest.location.town)+" "),e.quest.location.zipcode?a("span",[e._v("("+e._s(e.quest.location.zipcode)+")")]):e._e()]),a("div",{staticClass:"card-stats"},[e.quest.duration&&e.quest.duration<999?a("div",{staticClass:"q-mr-lg"},[a("div",{staticClass:"card-time q-mr-md"},[e._v(e._s(e.$t("label.EstimateTime"))+" : "+e._s(e.quest.duration)+" min")])]):e._e(),a("div",{staticClass:"card-difficult"},[e._v(e._s(e.$t("label.Difficulty"))+" : "+e._s(e.getDifficult()))])])],1)],1)])},oa=[],na={name:"miniQuestCard",components:{creatorBadge:Vt},props:{quest:Object,color:{type:String,default:"primary"},direction:{type:String,default:"left"},noRating:{type:Boolean,default:!1},noPrice:{type:Boolean,default:!1}},data:function(){return{ratingValue:this.quest.rating&&this.quest.rating.value?this.quest.rating.value:0,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor,"--bg-darken":Bt["a"].lighten(this.bgColor,-20),"--bg-image":"url("+this.getThumbImage()+")"}}},methods:{getPrice:function(){return!this.quest.premiumPrice||this.quest.premiumPrice.androidId&&this.quest.premiumPrice.active||this.quest.premiumPrice.manual?this.$t("label.Paying"):this.$t("label.Free")},getDifficult:function(){return 3===this.quest.level?this.$t("label.Hard"):2===this.quest.level?this.$t("label.Normal"):this.$t("label.Easy")},getThumbImage:function(){return this.quest?(this.quest.thumb&&(e=this.quest.thumb[this.lang]?this.quest.thumb[this.lang]:this.quest.thumb[this.quest.mainLanguage]?this.quest.thumb[this.quest.mainLanguage]:this.quest.languages&&this.quest.languages[0].lang?this.quest.thumb[this.quest.languages[0].lang]:this.quest.thumb),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.jpg"):"statics/images/quest/default-quest-picture.jpg";var e}}},ra=na,ia=(a("61c8"),Object(tt["a"])(ra,sa,oa,!1,null,"07d932c2",null)),la=ia.exports,ca={name:"questList",components:{miniQuestCard:la},props:{quests:Array,maxShow:{type:Number,default:5},title:String,icon:String,readMore:{type:Boolean,default:!1},color:{type:String,default:"primary"},noRating:{type:Boolean,default:!1},noPrice:{type:Boolean,default:!1},around:{type:Boolean,default:!1}},methods:{readMoreBtn:function(){this.$emit("readMore")},allColors:function(e){return e%3===0?"accent":e%2===0?"secondary":"primary"}}},ua=ca,da=(a("c287"),Object(tt["a"])(ua,ta,aa,!1,null,"f03757aa",null)),pa=da.exports,ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pb-lg"},[e.title?a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"extension"}}),a("span",[e._v(e._s(e.$t("label.Designers")))])],1),a("div",{staticStyle:{"font-size":"12px","text-decoration":"underline"},on:{click:function(t){return e.readMoreBtn()}}},[e._v(e._s(e.$t("label.SeeMore")))])]):e._e(),e.creators?e._e():a("div",{staticClass:"full-width"},[e.search?a("div",{staticClass:"text-center text-white",staticStyle:{margin:"0 auto"}},[e._v("\n      "+e._s(e.$t("label.SearchForStart"))+"\n    ")]):a("q-card",{staticClass:"q-pa-none",staticStyle:{background:"transparent",width:"100px",height:"120px"},attrs:{flat:""}},[a("div",{staticClass:"q-pa-sm"},[a("q-skeleton",{staticStyle:{margin:"0 auto"},attrs:{size:"80px",type:"QAvatar"}}),a("q-skeleton",{attrs:{type:"text",square:""}})],1)])],1),e.horizontal?a("div",{staticClass:"creator-list horizontal-scroll-wrapper users-horizontal-scroll-wrapper q-pl-sm"},e._l(e.creators,(function(t,s){return a("creator-badge",{key:s,attrs:{creator:t,list:"",color:e.color}})})),1):a("div",{staticClass:"creator-list q-pl-sm flex justify-center"},e._l(e.creators,(function(t,s){return a("creator-badge",{key:s,staticClass:"q-px-none q-mb-xl",attrs:{creator:t,list:"",color:e.color}})})),1)])},ha=[],ga={name:"creatorList",components:{creatorBadge:Vt},props:{creators:Array,color:{type:String,default:"primary"},title:Boolean,search:{type:Boolean,default:!1},horizontal:{type:Boolean,default:!1}},data:function(){return{}},methods:{readMoreBtn:function(){this.$emit("readMore")},openProfile:function(e){this.$router.push("/profile/"+e)}}},fa=ga,ba=(a("686a"),Object(tt["a"])(fa,ma,ha,!1,null,"6c0da6b0",null)),va=ba.exports,ya=function(e){return e>=3e3?{level:9,next:9,max:15e3,progress:(e-3e3)/12e3}:e>=1500?{level:8,next:9,max:3e3,progress:(e-1500)/1500}:e>=800?{level:7,next:8,max:1500,progress:(e-800)/700}:e>=400?{level:6,next:7,max:800,progress:(e-400)/400}:e>=200?{level:5,next:6,max:400,progress:(e-200)/200}:e>=100?{level:4,next:5,max:200,progress:(e-100)/100}:e>=30?{level:3,next:4,max:100,progress:(e-30)/70}:e>=15?{level:2,next:3,max:30,progress:(e-15)/15}:{level:1,next:2,max:15,progress:e/15}},wa={components:{QInfiniteScroll:M["a"],QSpinnerDots:se["a"],geolocation:Lt,homeMenu:St,questCard:ea,questList:pa,creatorList:va,iconBtnSquare:mt,textBtnSquare:ht["a"]},data:function(){return{bestQuest:null,nearestQuests:null,invitationQuests:null,onTopQuests:null,extraQuests:null,friendQuests:null,users:null,search:{quests:[],text:""},user:{position:null,positionType:null,proposeAQuest:!0},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",showSearch:!1,warnings:{noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{ranking:[]},profile:{level:{},organization:{},progress:.1,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},isMounted:!1,mainQuestListFormat:"big",isHybrid:window.cordova,showNonHybridQRReader:!1,isQuestsLoaded:!1,suggestQuest:{show:!1},innerWidth:window.innerWidth,slide:0,autoplay:!0,createProfilDialog:!1,QuestService:Ot}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1),document.body.style.background="#323232"},mounted:function(){var e=this;if(this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name){if(this.$q&&this.$q.platform&&this.$q.platform.is&&this.$q.platform.is.desktop&&(this.mainQuestListFormat="small"),window.cordova){zt.initLocalStorage();var t=this.$store.state.user.statistics.nbQuestsSuccessful;t>=1&&"false"===zt.hasAlreadyHavePopup()&&(console.log("the user has done at least one quest"),zt.launchpopup())}this.initPage(),this.$nextTick((function(){e.isMounted=!0}))}else this.backToLogin();this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide()},methods:{initPage:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkIfProfileIsComplete(),uu.clearAllRunningProcesses(),t.next=4,e.checkNetwork();case 4:return e.profile.level=ya(e.$store.state.user.score),t.next=7,e.getFriendQuests();case 7:case"end":return t.stop()}}),t)})))()},checkIfProfileIsComplete:function(){18!==this.$store.state.user.story.step||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.openUpdateProfilePage()},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},onLocationSuccess:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log("NOUVELLE POSITION"),console.log(e),t.$set(t.user,"position",e.coords),!1!==t.isQuestsLoaded&&"defaultProfilePosition"!==t.user.positionType||t.offline.active){a.next=6;break}return a.next=6,t.loadQuests();case 6:if(null!==t.users){a.next=9;break}return a.next=9,t.getCreators();case 9:t.user.positionType="userCurrentLocation",t.$refs["geolocation-component"].stopTracking();case 11:case"end":return a.stop()}}),a)})))()},checkNetwork:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.offline.active,a=uu.isNetworkAvailable(),e.warnings.noNetwork=!a,e.offline.active=!a,e.questList=[],t.next=7,e.loadQuests();case 7:uu.setTimeout(e.checkNetwork,5e3);case 8:case"end":return t.stop()}}),t)})))()},loadQuests:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noServerReponse=!1,t.next=3,e.getQuests();case 3:case"end":return t.stop()}}),t)})))()},getQuests:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isQuestsLoaded=null,e.showBottomMenu=!1,e.offline.active){t.next=15;break}return null===e.user.position&&(Jt(e.$t("label.LocationSearching"),"warning"),e.isQuestsLoaded=!1),t.next=6,Ot.listHomeQuests({lng:e.user.position?e.user.position.longitude:0,lat:e.user.position?e.user.position.latitude:0});case 6:if(a=t.sent,a&&a.data){t.next=11;break}return Jt(e.$t("label.TechnicalIssue"),"error"),e.isQuestsLoaded=!1,t.abrupt("return");case 11:e.isQuestsLoaded=!0,a.data.message&&"No quest"===a.data.message||(a.data.best&&(e.bestQuest=[],e.bestQuest.push(a.data.best[0])),a.data.nearests?e.nearestQuests=a.data.nearests:e.nearestQuests=[],a.data.topQuests?e.onTopQuests=a.data.topQuests:e.onTopQuests=[],a.data.invitations&&(e.invitationQuests=a.data.invitations),a.data.extra&&(e.extraQuests=a.data.extra)),t.next=42;break;case 15:return t.next=17,uu.readFile("","quests.json");case 17:if(s=t.sent,!s){t.next=40;break}if(n=JSON.parse(s),!n||!n.list){t.next=38;break}if(r=n.list,!(r.length>0)){t.next=36;break}i=0;case 24:if(!(i<r.length)){t.next=32;break}return t.next=27,uu.readBinaryFile(r[i].questId,r[i].picture[e.$t("label.shortLang")]);case 27:l=t.sent,r[i].picture=l||"_default-quest-picture.jpg";case 29:i++,t.next=24;break;case 32:e.questList=r,e.offline.active=!0,t.next=38;break;case 36:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 38:t.next=42;break;case 40:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 42:case"end":return t.stop()}}),t)})))()},getFriendQuests:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.listFriendQuests();case 2:if(a=t.sent,e.friendQuests=[],a&&a.data)for(s=0;s<a.data.length;s++)e.friendQuests.push({questId:a.data[s].questId,picture:a.data[s].questData.picture,title:a.data[s].questData.title,location:{town:a.data[s].questData.town},userPicture:a.data[s].userData.picture,userName:a.data[s].userData.name,playStatus:a.data[s].status?a.data[s].status:"succeeded",points:a.data[s].stars});case 5:case"end":return t.stop()}}),t)})))()},getCreators:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.listSuggestions({lng:e.user.position.longitude,lat:e.user.position.latitude},10);case 2:if(a=t.sent,a&&a.data){t.next=6;break}return Jt(e.$t("label.TechnicalIssue"),"error"),t.abrupt("return");case 6:a.data.message&&"No users"===a.data.message||(e.users=a.data);case 7:case"end":return t.stop()}}),t)})))()},backToLogin:function(){this.$router.push("/user/login")},trackCallBackFunction:function(){return!1},onLocationError:function(e){var t=this;return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.user.location&&t.$store.state.user.location.geometry&&t.$store.state.user.location.geometry.coordinates&&0!==t.$store.state.user.location.geometry.coordinates[0]&&null===t.user.position&&t.$set(t.user,"position",{longitude:t.$store.state.user.location.geometry.coordinates[0],latitude:t.$store.state.user.location.geometry.coordinates[1]}),null===t.user.position||t.offline.active){e.next=10;break}if(!1!==t.isQuestsLoaded){e.next=5;break}return e.next=5,t.loadQuests();case 5:if(null!==t.users){e.next=8;break}return e.next=8,t.getCreators();case 8:t.user.positionType="defaultProfilePosition",t.$refs["geolocation-component"].stopTracking();case 10:case"end":return e.stop()}}),e)})))()},playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){var e=this;this.userIsConnected()?this.$router.push("/quest/create/welcome"):this.$q.dialog({component:wt,parent:this}).onOk((function(){e.openUpdateProfilePage()}))},userIsConnected:function(){return"-"!==this.$store.state.user.name},readMore:function(){Jt(this.$t("label.QuestDownloadFinished"),"positive")},readMoreAroundYou:function(){this.$router.push("/search/quest/around")},readMoreFriendsGames:function(){this.$router.push("/search/quest/friends")},readMoreAllCreators:function(){this.$router.push("/user/"+this.$store.state.user.id+"/friends")},openMap:function(){this.offline.active||this.$router.push("/map")}}},qa=wa,xa=(a("e79e"),Object(tt["a"])(qa,At,$t,!1,null,null,null)),Ca=xa.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"div-column",staticClass:"column"},[null!==e.user.position?a("div",{ref:"map",staticClass:"row fullscreen",staticStyle:{"z-index":"20"}},[e.isMounted?a("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,s){return a("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(a){return e.openQuestSummary(t,s)}}})})),e.map.loaded?a("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}):e._e(),a("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[a("div",{staticClass:"infoWindow"},[a("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),a("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?a("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?a("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?a("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?a("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?a("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?a("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?a("p",[e._v("\n              "+e._s(e.currentQuest.displayPrice)+"\n            ")]):e._e(),a("text-btn-square",{attrs:{color:"primary",title:e.$t("label.Play"),icon:"play_arrow"},nativeOn:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}})],1)])],2):e._e()],1):e._e(),a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}})],1)},ka=[],Pa=(a("cadf"),a("456d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"back-bar",style:e.relative?"":"fixed-top q-py-lg q-px-lg"},[a("div",{staticStyle:{"max-width":"400px",margin:"0 auto"}},[a("icon-btn-square",{attrs:{color:e.color,icon:"arrow_back",fill:""},nativeOn:{click:function(t){return e.back()}}})],1)])}),_a=[],Ta={name:"backBar",components:{iconBtnSquare:mt},props:{route:{type:String,default:"none"},color:{type:String,default:"primary"},relative:{type:Boolean,default:!1}},methods:{back:function(){"none"==this.route?this.$router.go(-1):this.$router.push("/"+this.route)}}},Ia=Ta,Aa=(a("7f7d"),Object(tt["a"])(Ia,Pa,_a,!1,null,"52098d8f",null)),$a=Aa.exports,Oa=a("755e"),Ma={components:{geolocation:Lt,backBar:$a,textBtnSquare:ht["a"]},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},user:{position:null},currentQuestIndex:null,currentQuest:null,questList:[],isMounted:!1}},computed:{google:Oa["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.initPage(),this.$nextTick((function(){e.isMounted=!0}))},methods:{initPage:function(){return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uu.clearAllRunningProcesses();case 1:case"end":return e.stop()}}),e)})))()},onNewUserPosition:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.map.loaded){a.next=4;break}return a.next=4,t.reloadMap();case 4:case"end":return a.stop()}}),a)})))()},centerOnUserPosition:function(){null!==this.user.position?(this.centerMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):Notification(this.$t("label.LocationSearching"),"warning")},centerMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var a=this.map.infoWindow,s={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=s,this.currentQuestIndex!==t||!a.isOpen){var o=this.$refs.questMarkers[t].$markerObject;o.setAnimation(google.maps.Animation.BOUNCE),uu.setTimeout((function(){o.setAnimation(null)}),700)}if(this.currentQuestIndex===t?a.isOpen=!a.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",a.isOpen=!0,this.panTo(s)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){var n={premiumprice1:"0,99 ",premiumprice2:"1,99 ",premiumprice3:"2,99 ",premiumprice5:"4,99 ",premiumprice8:"7,99 ",premiumprice10:"9,99 ",premiumprice20:"19,99 "};this.currentQuest.displayPrice=n[e.premiumPrice.androidId]}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},reloadMap:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.map.loaded=null,e.$q.loading.show(),t.next=4,e.getQuests();case 4:e.closeInfoWindows(),e.$refs.mapRef?(e.questList.length>0?e.$refs.mapRef.$mapPromise.then((function(t){var a=new google.maps.LatLngBounds,s=!0,o=!1,n=void 0;try{for(var r,i=e.questList[Symbol.iterator]();!(s=(r=i.next()).done);s=!0){var l=r.value;a.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(c){o=!0,n=c}finally{try{s||null==i.return||i.return()}finally{if(o)throw n}}a.extend({lng:e.user.position.longitude,lat:e.user.position.latitude}),t.fitBounds(a)})):e.centerOnUserPosition(),e.map.loaded=!0):(e.centerOnUserPosition(),e.map.loaded=!0),e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},getQuests:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==t.user.position){a.next=3;break}return Notification(t.$t("label.LocationSearching"),"warning"),a.abrupt("return");case 3:return t.map.filter=e||"all",t.$q.loading.show(),a.next=7,Ot.listAllForCountry();case 7:if(s=a.sent,t.$q.loading.hide(),s&&s.data){a.next=12;break}return Notification(t.$t("label.TechnicalIssue"),"error"),a.abrupt("return");case 12:if(s.data.message&&"No quest"===s.data.message||(t.questList=s.data),0!==t.questList.length||"world"===t.map.filter){a.next=15;break}return a.abrupt("return",t.getQuests("world"));case 15:case"end":return a.stop()}}),a)})))()},getQuestLevelName:function(e){var t=uu.getById(questLevels,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),a=e.lng();this.map.center.lat===t&&this.map.center.lng===a||(this.map.centerTmp={lng:a,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},setMapIcon:function(e){return e?{url:"statics/images/icon/place.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:30}}:{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},trackCallBackFunction:function(){return!1},onUserPositionError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},backToHome:function(){this.$router.push("/home")}}},za=Ma,Na=(a("1fa7"),Object(tt["a"])(za,Sa,ka,!1,null,"a6afb188",null)),Ra=Na.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("qr-code-stream",{attrs:{color:"accent"},on:{QrCodeResult:e.checkCode}}),a("div",{staticStyle:{"max-width":"350px",margin:"0 auto"}},[e.fromLogin?a("back-bar",{attrs:{color:"accent"}}):e._e()],1)],1)},Da=[],Fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.isHybrid?"q-pa-md":"full-height"},[e.isHybrid?a("div",[a("div",{staticClass:"qrcode-target-mobile"}),a("div",{staticClass:"absolute-bottom q-mr-lg",style:(e.menu,"bottom: 125px;")},[a("div",{staticClass:"code-btn flex justify-between"},[a("icon-btn-square",{staticClass:"q-ml-lg",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?e.color:"primary",icon:e.isLight?"flashlight_off":"flashlight_on",disable:e.torchNotSupported},nativeOn:{click:function(t){return e.toggleLight(t)}}}),a("icon-btn-square",{attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?e.color:"primary",icon:"cameraswitch"},nativeOn:{click:function(t){return e.changeCamera(t)}}})],1)])]):a("div",{class:e.isLoaded?"":"bg-center"},[e.start?e._e():a("div",{staticClass:"qrcode-target-desktop"}),a("qrcode-stream",{staticClass:"camera-not-hybrid",attrs:{camera:e.camera,torch:e.torchActive},on:{decode:e.onDecode,init:e.onInit}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showScanConfirmation,expression:"showScanConfirmation"}],staticClass:"scan-confirmation"},[a("q-spinner",{attrs:{color:"primary",size:"5em",thickness:2}})],1),a("div",{staticClass:"absolute-center over-qrcode-target",staticStyle:{width:"90vw","max-width":"300px"}},[e.start&&(e.isIOs||e.isSafari)?a("text-btn-square",{attrs:{loading:!e.isLoaded,disable:!e.isLoaded,title:e.isLoaded?"Dmarrer le scanner":"loading",color:e.color&&"primary"!==e.color&&""!==e.color?e.color:"primary",icon:e.isLoaded?"qr_code_scanner":""},nativeOn:{click:function(t){e.start=!e.start}}}):e._e()],1)]),a("div",{staticClass:"absolute-top q-mx-lg over-qrcode-target",staticStyle:{top:"25px"}},[a("div",{staticClass:"code-btn",staticStyle:{"max-width":"800px",margin:"0 auto"}},[a("div",{staticClass:"flex justify-end"},[a("icon-btn-square",{staticClass:"q-mr-lg",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?e.color:"primary",icon:e.isLight?"flashlight_off":"flashlight_on",disable:e.torchNotSupported},nativeOn:{click:function(t){!e.torchNotSupported&&(e.torchActive=!e.torchActive)}}}),a("icon-btn-square",{attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?e.color:"primary",icon:"cameraswitch"},nativeOn:{click:function(t){return e.switchCamera(t)}}})],1)])])],1)])},La=[],Ea=a("bb6f"),Qa={name:"qrCodeStream",components:{QrcodeStream:Ea["QrcodeStream"],iconBtnSquare:mt,textBtnSquare:ht["a"]},props:{color:String,menu:{type:Boolean,default:!1}},data:function(){return{result:"",isLight:!1,timeOutId:null,usedCamera:0,isHybrid:null,camera:"rear",noRearCamera:!1,noFrontCamera:!1,torchActive:!1,torchNotSupported:!0,showScanConfirmation:!1,start:!1,isIOs:uu.isIOS(),isSafari:uu.isSafari(),isLoaded:!1}},created:function(){this.isHybrid=window.cordova},methods:{isDone:function(e,t){e&&console.log(e),this.usedCamera=t.currentCamera,t.authorized?setTimeout(this.scan,500):Jt(this.$t("qrCode.unauthorized"),"error")},scan:function(){QRScanner.scan(this.displayResult)},toggleLight:function(){var e=this;QRScanner.getStatus((function(t){t.canEnableLight&&(t.lightEnabled?QRScanner.disableLight((function(){e.isLight=!1})):QRScanner.enableLight((function(){e.isLight=!0})))}))},changeCamera:function(){var e=this;0===this.usedCamera?(this.usedCamera=1,this.torchNotSupported=!0):(this.usedCamera=0,QRScanner.getStatus((function(t){t.canEnableLight&&(e.torchNotSupported=!1)}))),QRScanner.useCamera(this.usedCamera)},displayResult:function(e,t){e?Jt(this.$t("qrCode.scanError"),"error"):(this.result=t,this.$emit("QrCodeResult",this.result),this.timeOutId=setTimeout(this.scan,4e3))},onDecode:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e;case 2:return t.result=a.sent,s=t.camera,t.pause(),a.next=7,t.timeout(1e3);case 7:return a.next=9,t.$emit("QrCodeResult",t.result);case 9:return a.next=11,t.timeout(1e3);case 11:t.unpause(s);case 12:case"end":return a.stop()}}),a)})))()},unpause:function(e){this.camera=e},pause:function(){this.camera="off"},timeout:function(e){return new Promise((function(t){window.setTimeout(t,e)}))},switchCamera:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!1,t.t0=e.camera,t.next="front"===t.t0?4:"rear"===t.t0?6:8;break;case 4:return e.camera="rear",t.abrupt("break",8);case 6:return e.camera="front",t.abrupt("break",8);case 8:case"end":return t.stop()}}),t)})))()},onInit:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.start="off"!==t.camera,a.next=3,e;case 3:t.torchNotSupported=!0,t.showScanConfirmation="off"===t.camera,t.isLoaded=!0;case 6:case"end":return a.stop()}}),a)})))()},prepareScanner:function(){document.body.style.backgroundColor="transparent",document.body.style.background="transparent",QRScanner.prepare(this.isDone)},closeQRCodeReader:function(){this.$emit("CloseQRCodeReader")}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid&&(QRScanner.destroy(),setTimeout(e.prepareScanner,1e3));case 1:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.isHybrid?(document.body.style.backgroundColor="#323232",QRScanner.destroy(),null!==this.timeOutId&&clearTimeout(this.timeOutId)):this.camera="off"}},Ba=Qa,Ua=(a("8de4"),Object(tt["a"])(Ba,Fa,La,!1,null,"9830f3d6",null)),Ya=Ua.exports,Ga={name:"scanCode",components:{qrCodeStream:Ya,backBar:$a},data:function(){return{fromLogin:!0}},mounted:function(){"false"===this.$route.params.login&&(this.fromLogin=!1)},methods:{checkCode:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(3!=e.length){a.next=3;break}return Jt(t.$t("label.QRCodeIsNotStartingOne"),"error"),a.abrupt("return");case 3:if(-1===e.indexOf("teamplay_")){a.next=8;break}s=e.replace("teamplay_",""),-1===s.indexOf("_")?t.$router.push({path:"/teamplay/"+s+"/"+t.$t("label.shortLang"),query:{redirect:"/user/login"}}):(n=s.split("_"),t.$router.push({path:"/teamplay/"+n[0]+"/"+t.$t("label.shortLang")+"/individual-firstandlast-checklastname/"+n[1],query:{redirect:"/user/login"}})),a.next=20;break;case 8:if(e=uu.removeUnusedUrl(e),!t.fromLogin){a.next=16;break}return a.next=12,Ot.checkLoginQRCode(e,t.$t("label.shortLang"));case 12:r=a.sent,r&&r.data&&"ok"===r.data.status&&r.data.user?(window.localStorage.setItem("jwt",r.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.data.user.jwt),-1===e.indexOf("_score")?-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?r.data.questId?t.$router.push("/quest/play/"+r.data.questId):t.$router.push("/quest/play/"+e):t.$q.dialog({message:t.$t("label.UniqueUsageQRCodeWarning"),ok:t.$t("label.Ok")}).onOk((function(a){r.data.questId?t.$router.push("/quest/play/"+r.data.questId):t.$router.push("/quest/play/"+e)})):t.$router.push("/quest/"+e.substring(0,24)+"/end")):-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?Jt(t.$t("label.QRCodeIsNotWorking"),"error"):Jt(t.$t("label.QRCodeAlreadyUsed"),"error"),a.next=20;break;case 16:return a.next=18,Ot.checkQRCode(e,t.$t("label.shortLang"));case 18:i=a.sent,i&&i.data&&"ok"===i.data.status?-1===e.indexOf("_score")?i.data.questId?t.$router.push("/quest/play/"+i.data.questId):t.$router.push("/quest/play/"+e):t.$router.push("/quest/"+e.substring(0,24)+"/end"):-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?Jt(t.$t("label.QRCodeIsNotWorking"),"error"):Jt(t.$t("label.QRCodeAlreadyUsed"),"error");case 20:case"end":return a.stop()}}),a)})))()}}},Ha=Ga,Wa=Object(tt["a"])(Ha,ja,Da,!1,null,"42bf9e6a",null),Va=Wa.exports,Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll",class:e.multiplayer.showScanner||e.shop.showScanner?"bg-transparent":"background-quest"},[e.multiplayer.showScanner?a("div",[a("div",{staticClass:"absolute-bottom text-white bg-primary q-py-md q-px-lg flex justify-between items-center",staticStyle:{"z-index":"99"}},[a("span",{staticClass:"subtitle5 text-uppercase"},[e._v(e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera")))]),a("icon-btn-square",{attrs:{color:"accent",icon:"close",fill:""},nativeOn:{click:function(t){return e.closeMultiplayerQRCodeReader(t)}}})],1),a("qr-code-stream",{attrs:{color:"accent"},on:{QrCodeResult:e.checkTeamCode}})],1):e._e(),e.shop.showScanner?a("div",[a("div",{staticClass:"text-white bg-primary q-pt-xl q-pl-md q-pb-sm"},[a("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeTierPaymentQRCode}},[a("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),a("qr-code-stream",{on:{QrCodeResult:e.checkTierPaymentCode}})],1):e._e(),a("div",{staticClass:"quest"},[this.quest.invalidQuest?a("div",{staticClass:"q-pt-lg"},[a("div",{staticClass:"centered q-pa-lg text-white"},[e._v("\n        "+e._s(e.$t("label.InvalidQuest"))+"\n        "),a("div",{staticClass:"q-pa-md q-mt-lg"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)])]):e._e(),this.quest.invalidQuest||e.shop.showScanner||e.multiplayer.showScanner?e._e():a("div",{staticClass:"reduce-window-size-desktop q-px-md",class:{loaded:e.pageReady},attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():a("div",{staticClass:"centered q-pa-lg"},[e._v("\n        "+e._s(e.$t("label.Loading"))+"\n        "),a("div",{staticClass:"q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?a("div",{staticClass:"centered q-pa-lg"},[e._v("\n        "+e._s(e.$t("label.QuestNeedNetwork"))+"\n        "),a("div",[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),a("back-bar",{staticClass:"q-py-md",attrs:{color:"primary",route:"home",relative:""}}),e.quest&&e.quest.status?a("quest-card",{staticClass:"q-mb-lg",attrs:{quest:e.quest,warning:e.warning,shop:e.shop,language:e.language,languages:e.getLanguages(),color:"primary",direction:"left",info:"","is-user-too-far":e.isUserTooFar},on:{showRewards:e.showRewards,changeLanguage:e.changeLanguage}}):e._e(),a("div",{staticClass:"quest-home-button q-pt-xl"},[a("div",{staticClass:"text-center q-pt-md"},["yes"===e.canReplay?a("div",[!e.isQuestOpen.status||"quest"!==e.quest.type||e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)||e.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||!e.getAllLanguages()||e.isAdmin?e._e():a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"secondary",title:e.continueQuest?e.$t("label.ContinueTheQuest"):e.isRunFinished?e.$t("label.SolveAgainThisQuest"):e.$t("label.SolveThisQuest"),icon:e.continueQuest?"skip_next":e.isRunFinished?"replay":"play_arrow"},nativeOn:{click:function(t){return e.playQuest(e.quest.questId,e.language)}}}),e.continueQuest?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"secondary",title:e.$t("label.SolveAgainThisQuest"),icon:"replay"},nativeOn:{click:function(t){return e.restartGame(t)}}}):e._e(),"room"===e.quest.type&&e.quest.readMoreLink&&""!==e.quest.readMoreLink?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"secondary",title:e.$t("label.Book"),icon:"event"},nativeOn:{click:function(t){return e.openReadMoreLink(t)}}}):e._e(),!e.isQuestOpen.status||e.isRunPlayable||e.isUserTooFar&&!e.quest.allowRemotePlay?e._e():a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"accent",title:e.$t("label.BuyCoinsToPlay"),icon:"bolt"},nativeOn:{click:function(t){return e.buyCoins()}}}),e.isQuestOpen.status&&e.isUserTooFar&&!e.quest.allowRemotePlay?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{disable:"",color:"accent",title:e.$t("label.GetCloserToStartingPoint")+e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m",icon:"wrong_location"}}):e._e(),e.isAdmin||e.isQuestOpen.status&&e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)&&"notplayableonweb"!==e.shop.premiumQuest.priceCode&&(!e.isUserTooFar||e.quest.allowRemotePlay)?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"primary",title:e.$t("label.SolveThisQuest"),icon:"play_arrow"},nativeOn:{click:function(t){return e.playQuest(e.quest.questId,e.language)}}}):e._e(),!e.isQuestOpen.status||"notplayableonweb"!==e.shop.premiumQuest.priceCode||e.isAdmin||e.isOwner?e._e():a("text-btn-square",{staticClass:"q-mb-lg",attrs:{disable:"",color:"primary",title:e.$t("label.QuestPlayableOnMobile"),icon:"phone_iphone"},nativeOn:{click:function(t){return e.playQuest(e.quest.questId,e.language)}}}),e.isQuestOpen.status&&"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"primary",title:e.$t("label.TestYourQuest"),icon:"bug_report"},nativeOn:{click:function(t){return e.playQuest(e.quest.questId,e.language)}}}):e._e(),e.isQuestOpen.status?e._e():a("span",[e.isQuestOpen.status&&"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"primary",title:e.$t("label.OpeningHours"),icon:"schedule"},nativeOn:{click:function(t){e.isQuestOpen.displayHours=!0}}}):e._e(),a("div",{staticClass:"q-mb-lg text-white"},[e._v(e._s(e.$t("label.QuestIsNotPlayableNow")))])],1)],1):e._e(),"yes"!==e.canReplay?a("p",["no"===e.canReplay?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{disable:"",color:"primary",title:e.$t("label.YouCanNotPlayAgainThisGame"),icon:"disabled_by_default"}}):e._e(),"nottoday"===e.canReplay?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{disable:"",color:"primary",title:e.$t("label.YouCanNotPlayAgainThisGameToday"),icon:"disabled_by_default"}}):e._e()],1):e._e()])]),e.isOwner||e.isAdmin?a("div",{staticClass:"subtitle5 centered text-white"},[a("div",{staticClass:"q-mb-lg"},[a("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("\n          "),a("span",{domProps:{innerHTML:e._s(e.$t("label.YouAreQuestOwnerDesc"))}})],1),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{color:"accent",title:e.$t("label.Modify"),icon:"edit",outlined:""},nativeOn:{click:function(t){return e.modifyQuest()}}})],1):e._e(),"room"===e.quest.type?a("div",{staticClass:"q-pa-md subtitle5"},[e._v("\n        "+e._s(e.$t("label.RoomDataWarning"))+"\n      ")]):e._e(),e.quest.snapshots&&e.quest.snapshots.length>0?a("div",[a("div",{staticClass:"row"},[e.quest.snapshots.length>0?a("div",{staticClass:"col-4 centered q-pa-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[0]}})]):e._e(),e.quest.snapshots.length>1?a("div",{staticClass:"col-4 centered q-pa-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[1]}})]):e._e(),e.quest.snapshots.length>2?a("div",{staticClass:"col-4 centered q-pa-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.questId+"/snapshot/"+e.quest.snapshots[2]}})]):e._e()])]):e._e()],1),this.quest.invalidQuest||e.multiplayer.showScanner?e._e():a("div",{staticClass:"centered text-grey text-subtitle1 arial q-mb-md"},[e._v("\n        "+e._s(e.$t("label.Version")+" "+e.quest.version)+"\n      ")]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreloaderPopup,expression:"showPreloaderPopup"}],staticClass:"panel-bottom background-dark"},[a("div",{staticClass:"reduce-window-size-desktop"},[a("div",{staticClass:"centered q-pa-lg title2 text-primary background-lighter"},[a("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.InProgressPreparation")))]),a("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),e.offline.show?a("div",{staticClass:"centered"},[a("offlineLoader",{attrs:{quest:this.quest,design:"prepare",lang:e.language},on:{end:function(t){return e.showCalibrationAndStartQuest()}}})],1):e._e(),a("div",[e.quest.customization&&e.quest.customization.removeWarning?e._e():a("div",[a("div",{staticClass:"q-px-lg q-pb-lg q-pt-md centered subtitle2"},[e._v("\n                "+e._s(e.$t("label.Warnings"))+"\n              ")]),a("div",{staticClass:"q-pa-md subtitle5"},[a("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.$t("label.GeneralWarning"))}})],1)]),e.isRunFinished?a("div",{staticClass:"q-pa-md subtitle5"},[a("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.$t("label.YouAlreadyDidThisQuest"))}})],1):e._e()]),a("gpscalibration",{ref:"gpscal",on:{end:function(t){return e.startQuest(e.quest.questId,e.language)}}})],1)])]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.multiplayer.show,expression:"multiplayer.show"}],staticClass:"panel-bottom background-quest"},[a("div",{staticClass:"reduce-window-size-desktop q-pt-lg",staticStyle:{"max-width":"450px"}},[a("div",{staticClass:"bottom-margin-for-keypad"},[a("div",{staticClass:"q-pb-lg centered subtitle2 text-white text-uppercase"},[e._v("\n              "+e._s(e.$t("label.ThisIsAMultiplayerGame"))+"\n            ")]),a("div",{staticClass:"q-pa-md text-center"},[a("div",{staticClass:"text-h6 text-white q-pb-md text-uppercase"},[e._v(e._s(e.$t("label.JoinATeam")))]),a("text-btn-square",{attrs:{title:e.$t("label.ScanTheLeaderQRCode"),color:"primary",icon:"qr_code_2"},nativeOn:{click:function(t){return e.scanMultiplayerQRCode()}}})],1),a("div",{staticClass:"centered text-white text-uppercase"},[e._v("\n              -\n              "),a("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n              -\n            ")]),a("div",{staticClass:"q-px-md"},[a("q-card",{staticClass:"my-card bg-transparent",attrs:{flat:""}},[a("q-card-section",{staticClass:"bg-transparent text-white centered text-uppercase"},[a("div",{staticClass:"text-h6 q-pb-none"},[e._v(e._s(e.$t("label.CreateATeam")))])]),a("q-card-section",{staticClass:"subtitle5 centered"},[""===e.multiplayer.qrcode?a("div",{staticClass:"centered q-pb-md"},[a("q-input",{attrs:{dark:"",type:"text",label:e.$t("label.TeamName"),"bottom-slots":"",counter:"",maxlength:"20"},model:{value:e.multiplayer.team,callback:function(t){e.$set(e.multiplayer,"team",t)},expression:"multiplayer.team"}}),a("text-btn-square",{attrs:{title:e.$t("label.CreateTeam"),color:"primary",icon:"add"},nativeOn:{click:function(t){return e.createTeam()}}})],1):e._e(),a("icon-btn-square",{staticClass:"q-mt-md",attrs:{color:"primary",icon:"arrow_back"},nativeOn:{click:function(t){e.multiplayer.show=!1}}}),""!==e.multiplayer.qrcode?a("div",{staticClass:"centered text-white"},[a("div",[e._v(e._s(e.$t("label.OtherPlayersMustScanThisQRCode")))]),a("div",{staticClass:"q-pa-md"},[a("img",{attrs:{src:e.uploadUrl+"/upload/teams/"+e.multiplayer.qrcode+".png"}})]),a("div",[a("text-btn-square",{attrs:{title:e.$t("label.MyTeamIsCompleteLetsGo"),color:"primary",icon:"arrow_forward"},nativeOn:{click:function(t){return e.checkTeamAndStart()}}})],1)]):e._e()],1)],1)],1)])])])]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.shop.show,expression:"shop.show"}],staticClass:"panel-bottom background-quest"},[a("div",{staticClass:"reduce-window-size-desktop",staticStyle:{"max-width":"450px"}},[a("div",{staticClass:"q-pa-lg centered subtitle2 text-white"},[e._v("\n            "+e._s(e.$t("label.BuyThisQuest"))+"\n          ")]),e.quest.premiumPrice&&e.quest.premiumPrice.tier?a("div",{staticClass:"q-pa-md"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.YouHaveReceivedAQrCodeFrom",{author:e.quest.author.name})))])]),a("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[a("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanTierPaymentQRCode}},[a("span",[e._v(e._s(e.$t("label.ScanTheUniqueQRCode")))])])],1)],1)],1):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&e.quest.premiumPrice.active?a("div",{staticClass:"centered"},[e._v("\n            -\n            "),a("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n            -\n          ")]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.active?a("div",{staticClass:"q-pa-md"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.BuyInOneClick")))])]),a("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():a("q-btn",{staticClass:"glossy large-button text-primary bg-white",attrs:{disabled:!e.shop.premiumQuest.buyable},on:{click:function(t){return e.buyQuest()}}},[a("span",[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?e.quest.premiumPrice&&e.quest.premiumPrice.prices&&e.quest.premiumPrice.prices.fr?e.quest.premiumPrice.prices.fr:"...":e.shop.premiumQuest.priceValue)+")")])])],1)],1)],1):e._e(),a("div",{staticClass:"centered"},[a("text-btn-square",{attrs:{title:e.$t("label.Cancel"),color:"primary",icon:"close"},nativeOn:{click:function(t){return e.closeShop()}}})],1)])])]),a("q-dialog",{model:{value:e.showRewardsPopup,callback:function(t){e.showRewardsPopup=t},expression:"showRewardsPopup"}},[a("q-card",[a("q-card-section",{staticClass:"popup-header centered"},[e._v("\n          "+e._s(e.$t("label.ScoreAndBadges"))+"\n          "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"subtitle5"},[e._v("\n          "+e._s(e.$t("label.OnThisEscapeGameYouCanWin"))+"\n          "),a("ul",[e.quest.availablePoints&&e.quest.availablePoints.minPts&&e.quest.availablePoints.maxPts?a("li",[e._v(e._s(e.$t("label.ScoreRange",{min:e.quest.availablePoints.minPts,max:e.quest.availablePoints.maxPts})))]):e._e(),e.quest.rewardPicture&&""!==e.quest.rewardPicture?a("li",[e._v(e._s(e.$t("label.OneBadge")))]):e._e()])])],1)],1),a("q-dialog",{model:{value:e.isQuestOpen.displayHours,callback:function(t){e.$set(e.isQuestOpen,"displayHours",t)},expression:"isQuestOpen.displayHours"}},[a("q-card",[a("q-card-section",{staticClass:"popup-header centered"},[e._v("\n          "+e._s(e.$t("label.OpeningHours"))+"\n          "),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"subtitle5"},[e.quest.scheduling&&e.quest.scheduling.length>0?a("div",[a("div",{staticClass:"centered q-pb-md"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.quest.scheduling,(function(t,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+s)))]),a("div",{staticClass:"col"},[e._v("\n                "+e._s(e.$t("label.From"))+" "+e._s(t[0])+"h\n              ")]),a("div",{staticClass:"col"},[e._v("\n                "+e._s(e.$t("label.To"))+" "+e._s(t[1])+"h\n              ")])])}))],2):e._e()])],1)],1),e.geolocationIsSupported?e._e():a("div",{staticClass:"fixed-bottom over-map"},[a("div",{staticClass:"centered bg-warning q-pa-sm"},[a("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n      ")],1)])],1)])},Ka=[],Za={getById:function(e){return Qe().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){return Qe().get("run/quest/"+e).catch((function(e){return console.log(e.request)}))},listScoresForThisQuest:function(e){return Qe().get("run/quest/"+e+"/ranking/scores").catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return Qe().get("run/quest/"+e+"/ranking/friends").catch((function(e){return console.log(e.request)}))},checkNumberOfPlayers:function(e){return Qe().get("run/quest/"+e+"/players/number").catch((function(e){return console.log(e.request)}))},checkIfAlreadyPlayingAGame:function(e){return Qe().get("run/quest/"+e+"/checkifalreadyplaying").catch((function(e){return console.log(e.request)}))},getRankingForAQuest:function(e){return Qe().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return Qe().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e,t,a){return Qe().post("run/"+e+"/step/next/player/"+t,a).catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t,a){return Qe().get("run/"+e+"/marker/"+t+"/next/player/"+a).catch((function(e){return console.log(e.request)}))},listWonObjects:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().get("quest/"+e+"/runs/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()},getHint:function(e,t,a,s){return r()(o.a.mark((function n(){var r;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s||(s="default"),o.next=3,Qe().get("run/"+e+"/step/"+t+"/version/"+a+"/hint/lang/"+s);case 3:return r=o.sent,o.abrupt("return",r.data);case 5:case"end":return o.stop()}}),n)})))()},init:function(e,t,a,s,o,n){return o||(o="noteamnamedefined"),Qe().post("run/quest/"+e+"/version/"+t+"/init/"+a+"/remote/"+s+"/team/"+o+"/datashared/"+n).catch((function(e){return console.log(e.request)}))},initTeamPlay:function(e,t,a,s,o){return Qe().post("run/teamplay/quest/"+e+"/init/"+t+"/"+a+"/"+s+"/"+o).catch((function(e){return console.log(e.request)}))},addTeamPlayer:function(e){return Qe().post("run/join/"+e).catch((function(e){return console.log(e.request)}))},createATeam:function(e,t){return Qe().post("run/quest/"+questId+"/version/"+version+"/init/"+lang+"/remote/"+remotePlay).catch((function(e){return console.log(e.request)}))},checkTeamIsReady:function(e){return Qe().get("run/"+e+"/check/team/ready").catch((function(e){return console.log(e.request)}))},endRun:function(e,t,a,s,o){return Qe().put("run/"+e+"/quest/"+a+"/version/"+s+"/lang/"+o+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t,a){return Qe().put("run/"+e+"/passstep/"+t+"/player/"+a).catch((function(e){return console.log(e.request)}))},SetReadMoreAsRead:function(e,t){return Qe().put("run/"+e+"/step/"+t+"/readmore/viewed").catch((function(e){return console.log(e.request)}))},closeInProgressRuns:function(e){return Qe().post("run/quest/"+e+"/close").catch((function(e){return console.log(e.request)}))},createMultiplayerRunForTesters:function(e){return Qe().post("run/quest/"+e+"/test/create").catch((function(e){return console.log(e.request)}))}},Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'nergie est gratuite !")]),a("q-list",{attrs:{highlight:""}},[a("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),a("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0 (Beta)")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),a("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0 (Beta)")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),a("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0 (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?a("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),a("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},es=[],ts={data:function(){return{coinsWon:0}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.coinsWon=0;case 1:case"end":return t.stop()}}),t)})))()},methods:{buy:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.coinsWon=0,a.next=3,Mt.buy(e);case 3:s=a.sent,s&&s.data&&s.data.coins?(t.coinsWon=s.data.coins,t.$store.state.user.coins+=t.coinsWon):Jt(t.$t("label.ErrorStandardMessage"),"error"),setTimeout(t.resetCoinsWon,2e3);case 6:case"end":return a.stop()}}),a)})))()},resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},as=ts,ss=Object(tt["a"])(as,Xa,es,!1,null,null,null),os=ss.exports,ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.offline.progress>0&&e.offline.progress<1?a("div",{staticClass:"centered q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():a("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():a("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.Downloading")))]),e.error.raised?e._e():a("div",{staticClass:"q-pa-md"},[a("q-linear-progress",{staticStyle:{height:"5px"},attrs:{color:"primary","track-color":"grey-1",value:e.offline.progress}}),e.isIOs?a("div",{staticClass:"centered"},[e._v("\n        "+e._s(parseInt(100*e.offline.progress,10))+" %\n      ")]):e._e(),a("div",{staticClass:"text-primary centered"},[e._v(e._s(e.$t("label.Loading2"))+" : "+e._s(e.loadingItem))])],1),e.error.raised&&e.error.nb<2?a("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?a("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+"\n    ")]):e._e()]):e._e()])},rs=[],is={listForAQuest:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a||(a="default"),s.next=3,Qe().get("quest/"+e+"/version/"+t+"/steps/lang/"+a).catch((function(e){return console.log(e.request)}));case 3:return n=s.sent,s.abrupt("return",n);case 5:case"end":return s.stop()}}),s)})))()},listForAChapter:function(e,t,a,s){return r()(o.a.mark((function n(){var r;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s||(s="default"),o.next=3,Qe().get("quest/"+e+"/version/"+a+"/chapter/"+t+"/steps/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return r=o.sent,o.abrupt("return",r);case 5:case"end":return o.stop()}}),n)})))()},listWonObjects:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().get("quest/"+e+"/version/"+a+"/steps/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()},getById:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a||(a="default"),s.next=3,Qe().get("step/"+e+"/version/"+t+"/lang/"+a).catch((function(e){return console.log(e.request)}));case 3:return n=s.sent,s.abrupt("return",n);case 5:case"end":return s.stop()}}),s)})))()},getChapterById:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i,l;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,s.isCached(e);case 2:if(r=o.sent,(r||"online"!==store.state.networkMode)&&window.cordova){o.next=10;break}return o.next=6,Qe().get("chapter/"+t+"/version/"+a+"/lang/"+lang).catch((function(e){return console.log(e.request)}));case 6:return i=o.sent,o.abrupt("return",i);case 10:return o.next=12,uu.readFile(e,"chapter_"+t+".json");case 12:return l=o.sent,o.abrupt("return",JSON.parse(l));case 14:case"end":return o.stop()}}),n)})))()},isCached:function(e){return!!window.cordova&&uu.checkIfFileExists(e,"quest_"+e+".json")},checkAnswer:function(e,t,a,s,n,i){return r()(o.a.mark((function r(){var l;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Qe().post("quest/"+e+"/version/"+a+"/step/"+t+"/check/"+s+"/player/"+i,n).catch((function(e){return console.log(e.request)}));case 2:return l=o.sent,o.abrupt("return",l);case 4:case"end":return o.stop()}}),r)})))()},countForAQuest:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().get("quest/"+e+"/version/"+t+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()},listChapters:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().get("quest/"+e+"/version/"+t+"/lang/"+a+"/chapter/list").catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()},save:function(e){return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qe().put("quest/"+e.questId+"/version/"+e.version+"/step/"+e.stepId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,Ot.removeFromCache(e.questId);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},modifyChapter:function(e){return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qe().put("quest/"+e.questId+"/version/"+e.version+"/chapter/"+e.chapterId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,Ot.removeFromCache(e.questId);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},remove:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().delete("quest/"+e+"/version/"+a+"/step/"+t+"/remove");case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},removeChapter:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().delete("quest/"+e+"/version/"+a+"/chapter/"+t+"/remove");case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},move:function(e,t,a,s){return r()(o.a.mark((function n(){var r;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Qe().put("quest/"+e+"/version/"+t+"/step/"+a+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return r=o.sent,o.next=5,Ot.removeFromCache(e);case 5:return o.abrupt("return",r);case 6:case"end":return o.stop()}}),n)})))()},moveChapter:function(e,t,a,s){return r()(o.a.mark((function n(){var r;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Qe().put("quest/"+e+"/version/"+t+"/chapter/"+a+"/move/"+s).catch((function(e){return console.log(e.request)}));case 2:return r=o.sent,o.next=5,Ot.removeFromCache(e);case 5:return o.abrupt("return",r);case 6:case"end":return o.stop()}}),n)})))()},duplicate:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().put("quest/"+e+"/version/"+a+"/step/"+t+"/clone").catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},uploadBackgroundImage:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/background/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadAudio:function(e,t){return Qe().post("/quest/"+e+"/step/audio/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAnswerImage:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/choose-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadMemoryImage:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/memory/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadCodeAnswerImage:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/code-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadVideo:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/video/upload",t,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadPuzzleImage:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().post("/quest/"+e+"/step/jigsaw-puzzle/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=a.sent,a.next=5,Ot.removeFromCache(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},uploadItemImage:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().post("/quest/"+e+"/step/"+t+"/upload",a,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},uploadImageBelow:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().post("/quest/"+e+"/step/"+t+"/upload",a,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},uploadItemObject:function(e,t,a){return r()(o.a.mark((function t(){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qe().post("/quest/"+e+"/step/3dobject/upload",a,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,Ot.removeFromCache(e);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e,t,a){return r()(o.a.mark((function t(){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Qe().post("/quest/"+e+"/step/character/upload",a,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,Ot.removeFromCache(e);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},uploadAlternativeImage:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().post("/quest/"+e+"/step/"+t+"/upload",a,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.next=5,Ot.removeFromCache(e);case 5:return s.abrupt("return",n);case 6:case"end":return s.stop()}}),s)})))()},uploadSnapshot:function(e,t,a,s){return r()(o.a.mark((function n(){return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!s||!s._boundary){o.next=4;break}return o.abrupt("return",Qe().post("/quest/"+e+"/snapshot/upload/"+t+"/"+a,s,{timeout:6e5,headers:{"Content-Type":"multipart/form-data; boundary=".concat(s._boundary)}}));case 4:return o.abrupt("return",Qe().post("/quest/"+e+"/snapshot/upload/"+t+"/"+a,s,{timeout:6e5,headers:{"Content-Type":"multipart/form-data"}}));case 5:case"end":return o.stop()}}),n)})))()},generateTextsExportFile:function(e,t,a){return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Qe().get("quest/"+e+"/version/"+t+"/"+a+"/export/texts").catch((function(e){return console.log(e.request)}));case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()}},ls={props:["quest","design","lang"],watch:{quest:function(){var e=r()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},loadingItem:"",isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.saveOfflineQuest(e.quest);case 4:case"end":return t.stop()}}),t)})))()},methods:{saveOfflineQuest:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.error.raised=!1,s.next=3,Ot.isCached(e.questId);case 3:if(n=s.sent,a.offline.progress=.1,n&&(!t||0===t)){s.next=11;break}return s.next=8,a.saveQuestData(e,t);case 8:if(r=s.sent,r){s.next=11;break}return s.abrupt("return");case 11:a.offline.progress=1,i=a,setTimeout((function(){i.$emit("end")}),3e3);case 14:case"end":return s.stop()}}),s)})))()},addQuestInOfflineList:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,uu.checkIfFileExists("","quests.json");case 2:if(s=a.sent,!s){a.next=8;break}return a.next=6,uu.readFile("","quests.json");case 6:r=a.sent,n=JSON.parse(r);case 8:for(s&&n&&n.list||(n={list:[]}),i=!1,l=0;l<n.list.length;l++)n.list[l].questId===e&&(i=!0);return i||n.list.push(t.quest),a.next=14,uu.writeInFile("","quests.json",JSON.stringify(n),!0);case 14:case"end":return a.stop()}}),a)})))()},saveQuestData:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,i,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P,_,T,I,A,$,O,M;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t||(t=0),n=a,uu.setTimeout(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.cancelSavingTooLong(n.quest.questId);case 2:case"end":return e.stop()}}),e)}))),42e4),a.loadingItem=a.$t("label.Configuration"),s.next=6,is.listForAQuest(e.questId,e.version,a.lang);case 6:for(i=s.sent,l=i.data.steps,c=i.data.chapters,a.quest.steps=[],u=0;u<l.length;u++)a.quest.steps.push(l[u].stepId);for(a.quest.chapters=[],u=0;u<c.length;u++)a.quest.chapters.push(c[u].chapterId);if(a.error.raised){s.next=240;break}if(0!=t){s.next=23;break}return s.next=17,uu.writeInFile(e.questId,"quest_"+e.questId+".json",JSON.stringify(e),!0);case 17:if(d=s.sent,d){s.next=21;break}return a.throwSaveError("Could not create quest file for quest "+e.questId,0),s.abrupt("return",!1);case 21:return s.next=23,a.addQuestInOfflineList(e.questId);case 23:if(a.error.raised){s.next=237;break}if(a.offline.progress=.2,0!=t||!e.picture||!e.picture[a.lang]||""===e.picture[a.lang]){s.next=32;break}return s.next=28,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/",e.picture[a.lang]);case 28:if(p=s.sent,p){s.next=32;break}return a.throwSaveError("Could not create quest picture for quest "+e.questId,0),s.abrupt("return",!1);case 32:if(a.offline.progress+=.1,0!=t||!e.customization||!e.customization.character||""===e.customization.character){s.next=36;break}return s.next=36,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/",e.customization.character);case 36:if(0!=t||!e.customization||!e.customization.logo||""===e.customization.logo){s.next=39;break}return s.next=39,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/",e.customization.logo);case 39:if(0!=t||!e.customization||!e.customization.characterOnMap||""===e.customization.characterOnMap){s.next=42;break}return s.next=42,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/",e.customization.characterOnMap);case 42:if(!(0==t&&e.customization&&e.customization.audio&&e.customization.audio[a.lang]&&""!==e.customization.audio[a.lang])){s.next=45;break}return s.next=45,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/",e.customization.audio[a.lang]);case 45:if(!i||!i.data){s.next=234;break}m=.7/l.length,u=t;case 48:if(!(u<l.length)){s.next=221;break}if(a.loadingItem=a.$t("label.Step")+" "+(u+1)+"/"+l.length,!a.error.raised){s.next=52;break}return s.abrupt("return",!1);case 52:return h=l[u],s.next=55,uu.writeInFile(e.questId,"step_"+h.stepId+".json",JSON.stringify(h),!0);case 55:if(g=s.sent,g){s.next=59;break}return a.throwSaveError("Could not save step file for quest "+e.questId+" and step "+h.stepId,u),s.abrupt("return",!1);case 59:if(!h.backgroundImage||!h.backgroundImage[a.lang]||""===h.backgroundImage[a.lang]){s.next=66;break}return s.next=62,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/background/",h.backgroundImage[a.lang]);case 62:if(f=s.sent,f){s.next=66;break}return a.throwSaveError("Could not save background image for quest "+e.questId+" and step "+h.stepId,u),s.abrupt("return",!1);case 66:if(!h.videoStream||!h.videoStream[a.lang]||""===h.videoStream[a.lang]){s.next=74;break}return a.loadingItem=a.$t("label.Step")+" "+(u+1)+"/"+l.length+" ("+a.$t("label.Video")+")",s.next=70,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/video/",h.videoStream[a.lang]);case 70:if(b=s.sent,b){s.next=74;break}return a.throwSaveError("Could not save video for quest "+e.questId+" and step "+h.stepId,u),s.abrupt("return",!1);case 74:if(!h.audioStream||!h.audioStream[a.lang]||""===h.audioStream[a.lang]){s.next=82;break}return a.loadingItem=a.$t("label.Step")+" "+(u+1)+"/"+l.length+" ("+a.$t("label.Audio")+")",s.next=78,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/audio/",h.audioStream[a.lang]);case 78:if(v=s.sent,v){s.next=82;break}return a.throwSaveError("Could not save audio for quest "+e.questId+" and step "+h.stepId,u),s.abrupt("return",!1);case 82:if("choose"!==h.type||!h.options||!h.options.items){s.next=96;break}y=!0,w=0;case 85:if(!(w<h.options.items.length)){s.next=96;break}if(!h.options.items[w].imagePath){s.next=93;break}return s.next=89,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/choose-image/",h.options.items[w].imagePath);case 89:if(y=s.sent,y){s.next=93;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "choose-image" '+h.stepId,u),s.abrupt("return",!1);case 93:w++,s.next=85;break;case 96:if("memory"!==h.type||!h.options||!h.options.items){s.next=110;break}q=!0,w=0;case 99:if(!(w<h.options.items.length)){s.next=110;break}if(!h.options.items[w].imagePath){s.next=107;break}return s.next=103,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/memory/",h.options.items[w].imagePath);case 103:if(q=s.sent,q){s.next=107;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "memory" '+h.stepId,u),s.abrupt("return",!1);case 107:w++,s.next=99;break;case 110:if(!("code-image"===h.type&&h.options&&h.options[a.lang]&&h.options[a.lang].images)){s.next=131;break}x=!0,w=0;case 113:if(!(w<h.options[a.lang].images.length)){s.next=124;break}if(!h.options[a.lang].images[w].imagePath){s.next=121;break}return s.next=117,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/",h.options[a.lang].images[w].imagePath);case 117:if(x=s.sent,x){s.next=121;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "code-image" '+h.stepId,u),s.abrupt("return",!1);case 121:w++,s.next=113;break;case 124:if(!h.options.imageBelow){s.next=131;break}return s.next=127,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/",h.options.imageBelow);case 127:if(C=s.sent,C){s.next=131;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "code image" '+h.stepId,u),s.abrupt("return",!1);case 131:if("write-text"!==h.type){s.next=139;break}if(!h.options.imageBelow){s.next=139;break}return s.next=135,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/write-text/",h.options.imageBelow);case 135:if(S=s.sent,S){s.next=139;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "code image" '+h.stepId,u),s.abrupt("return",!1);case 139:if(!("jigsaw-puzzle"===h.type&&h.options&&h.options.picture&&h.options.picture[a.lang]&&""!==h.options.picture[a.lang])){s.next=146;break}return s.next=142,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/",h.options.picture[a.lang]);case 142:if(k=s.sent,k){s.next=146;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "jigsaw-puzzle" '+h.stepId,u),s.abrupt("return",!1);case 146:if("geolocation"!==h.type||!h.options||!h.options.locator||""===h.options.locator){s.next=153;break}return s.next=149,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/geolocation/",h.options.locator);case 149:if(P=s.sent,P){s.next=153;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "geolocation" '+h.stepId,u),s.abrupt("return",!1);case 153:if("new-item"!==h.type||!h.options||!h.options.picture||""===h.options.picture){s.next=165;break}if(-1!==h.options.picture.indexOf("statics")){s.next=165;break}if(void 0,!h.options.pictures||!h.options.pictures[a.lang]||""===h.options.pictures[a.lang]){s.next=162;break}return s.next=159,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/",h.options.pictures[a.lang]);case 159:s.sent,s.next=165;break;case 162:return s.next=164,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/",h.options.picture);case 164:s.sent;case 165:if("character"!==h.type||!h.options||!h.options.character||""===h.options.character||"usequestcharacter"===h.options.character){s.next=182;break}if(!(h.options.character.length>3)){s.next=182;break}return s.next=169,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/character/",h.options.character);case 169:if(_=s.sent,_){s.next=173;break}return a.throwSaveError("Could not save image for quest "+e.questId+' and step "character" '+h.stepId,u),s.abrupt("return",!1);case 173:if(!(h.options.multiple&&h.options.multiple.length>0)){s.next=182;break}T=0;case 175:if(!(T<h.options.multiple.length)){s.next=182;break}if(!(h.options.multiple[T]&&h.options.multiple[T].picture&&h.options.multiple[T].picture.length>3)){s.next=179;break}return s.next=179,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/character/",h.options.multiple[T].picture);case 179:T++,s.next=175;break;case 182:if("find-item"!==h.type&&"use-item"!==h.type||!h.options||!h.options.altFile||""===h.options.altFile){s.next=190;break}if(!(h.options.altFile.length>3)){s.next=190;break}return s.next=186,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/background/",h.options.altFile);case 186:if(I=s.sent,I){s.next=190;break}return a.throwSaveError("Could not save background image for quest "+e.questId+" and step "+h.stepId,u),s.abrupt("return",!1);case 190:if("locate-item-ar"!==h.type||!h.options){s.next=215;break}if(!h.options.picture||""===h.options.picture){s.next=198;break}return s.next=194,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/",h.options.picture);case 194:if(A=s.sent,A){s.next=198;break}return a.throwSaveError("Could not save 2D image for quest "+e.questId+' and step "locate-item-ar" '+h.stepId,u),s.abrupt("return",!1);case 198:if(!h.options.is3D){s.next=215;break}if(a.loadingItem=a.$t("label.Step")+" "+(u+1)+"/"+l.length+" ("+a.$t("label.3DObject")+")",!h.options.customModel){s.next=209;break}return s.next=203,uu.saveBinaryFile(e.questId,a.uploadUrl+"/upload/quest/"+e.questId+"/step/3dobject/",h.options.customModel+".glb");case 203:if($=s.sent,$){s.next=207;break}return a.throwSaveError("Could not save custom 3D model for quest "+e.questId+' and step "locate-item-ar" '+h.stepId,u),s.abrupt("return",!1);case 207:s.next=215;break;case 209:return s.next=211,uu.saveBinaryFile(e.questId,a.serverUrl+"/statics/3d-models/",h.options.model+".glb");case 211:if(O=s.sent,O){s.next=215;break}return a.throwSaveError("Could not save standard 3D model for quest "+e.questId+' and step "locate-item-ar" '+h.stepId,u),s.abrupt("return",!1);case 215:if(!a.error.raised){s.next=217;break}return s.abrupt("return",!1);case 217:a.offline.progress+=m;case 218:u++,s.next=48;break;case 221:u=0;case 222:if(!(u<c.length)){s.next=234;break}if(!a.error.raised){s.next=225;break}return s.abrupt("return",!1);case 225:return s.next=227,uu.writeInFile(e.questId,"chapter_"+c[u].chapterId+".json",JSON.stringify(c[u]),!0);case 227:if(M=s.sent,M){s.next=231;break}return a.throwSaveError("Could not save chapter "+c[u].chapterId+" for quest "+e.questId),s.abrupt("return",!1);case 231:u++,s.next=222;break;case 234:return s.abrupt("return",!0);case 237:return s.abrupt("return",!1);case 238:s.next=241;break;case 240:return s.abrupt("return",!1);case 241:case"end":return s.stop()}}),s)})))()},throwSaveError:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.error("OfflineLoader error: "+e),Jt(a.$t("label.ErrorOfflineSaving"),"error"),a.error.raised=!0,a.error.nb++,t&&0!==t){s.next=7;break}return s.next=7,a.removeOfflineData(a.quest.questId);case 7:a.offline.progress=0,n=a,a.$q.dialog({dark:!0,message:n.$t("label.ErrorDownloadNeedsToRestart"),ok:!0,cancel:!0}).onCancel((function(){n.$router.push({path:"/quest/play/"+a.quest.questId,query:{timestamp:Date.now()}})})).onOk(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.saveOfflineQuest(a.quest,t);case 2:case"end":return e.stop()}}),e)}))));case 10:case"end":return s.stop()}}),s)})))()},cancelSavingTooLong:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.offline.progress||1===e.offline.progress||e.error.raised||(Jt(e.$t("label.ErrorOfflineSaving"),"error"),e.error.raised=!0,e.error.nb++);case 1:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,uu.removeDirectory(e);case 2:return s=a.sent,a.next=5,t.removeQuestFromOfflineList(e);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},removeQuestFromOfflineList:function(e){return r()(o.a.mark((function t(){var a,s,n,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.checkIfFileExists("","quests.json");case 2:if(a=t.sent,!a){t.next=13;break}return t.next=6,uu.readFile("","quests.json");case 6:for(n=t.sent,s=JSON.parse(n),r=-1,i=0;i<s.list.length;i++)s.list[i].questId===e&&(r=i);return-1!==r&&s.list.splice(r,1),t.next=13,uu.writeInFile("","quests.json",JSON.stringify(s),!0);case 13:case"end":return t.stop()}}),t)})))()}}},cs=ls,us=Object(tt["a"])(cs,ns,rs,!1,null,null,null),ds=us.exports,ps=a("b06b"),ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{model:{value:e.geolocationshowCalibration,callback:function(t){e.geolocationshowCalibration=t},expression:"geolocationshowCalibration"}},[a("div",{staticClass:"bg-black centered q-pa-md"},[a("img",{staticStyle:{width:"100%","max-width":"500px"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),a("div",{staticClass:"text-white"},[e._v("\n      "+e._s(e.$t("label.WaveThePhoneForGPSPrecision"))+"\n    ")])])])},hs=[],gs={data:function(){return{geolocationshowCalibration:!1}},methods:{askUserToCalibrateGPS:function(e){var t=this;this.geolocationshowCalibration=!0,setTimeout((function(){t.closeGPSCalibration(e)}),5500)},closeGPSCalibration:function(e){this.geolocationshowCalibration=!1,null!==e&&void 0!==e&&"locate-item-ar"===e?this.$emit("endvertical"):this.$emit("end")}}},fs=gs,bs=Object(tt["a"])(fs,ms,hs,!1,null,null,null),vs=bs.exports,ys=a("b047c"),ws=a.n(ys),qs={components:{shop:os,qrCodeStream:Ya,offlineLoader:ds,gpscalibration:vs,questCard:ea,textBtnSquare:ht["a"],iconBtnSquare:mt,backBar:$a},data:function(){return{quest:{},ranking:{show:!1,items:[]},playStep:0,shop:{show:!1,showScanner:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1,alreadyPayed:!1}},offline:{active:!1,show:!1},warning:{questNotLoaded:!1,lowBattery:!1,tooMuchUsers:!1},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isQuestOpen:{status:!0,displayHours:!1},isSharedWithPartners:!1,isOwner:!1,isAdmin:!1,showRewardsPopup:!1,showPreloaderPopup:!1,multiplayer:{showScanner:!1,show:!1,team:"",qrcode:""},geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,continueQuestId:"",canReplay:"yes",distanceFromStart:0,pageReady:!1,isHybrid:window.cordova,isIOs:uu.isIOS(),language:"fr",ratingValue:0}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uu.clearAllRunningProcesses(),window.addEventListener("batterystatus",e.checkBattery,!1),t.next=4,e.initQuest();case 4:e.quest&&e.quest.rating.value&&(e.ratingValue=e.quest.rating.value),e.$store.state.history={items:[],index:0},e.$store.commit("setNetworkMode","online"),e.$store.commit("setForceOnline",!1),e.language=e.getLanguage();case 9:case"end":return t.stop()}}),t)})))()},updated:ws()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),methods:{getPrice:function(){return 0===this.quest.price?"GRATUIT":this.quest.price+" "},checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*uu.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),uu.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0}),(function(){e.geolocationIsSupported=!1,uu.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3)}),{timeout:1e4,maximumAge:0}):(this.geolocationIsSupported=!1,uu.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3))},checkIfQuestIsOpened:function(){if(this.quest.scheduling&&this.quest.scheduling.length>0&&!this.isAdmin&&!this.isOwner){var e=new Date,t=e.getDay();if(this.quest.scheduling[t]&&2===this.quest.scheduling[t].length){var a=e.getHours();this.quest.scheduling[t][0]<=a&&this.quest.scheduling[t][1]>a?this.isQuestOpen.status=!0:this.isQuestOpen.status=!1}}},initQuest:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.getByIdOnline(t.$route.params.id,"999",e);case 2:if(s=a.sent,s&&s.data){a.next=9;break}return a.next=6,uu.checkIfFileExists(t.$route.params.id,"quest_"+t.$route.params.id+".json");case 6:return n=a.sent,!t.isOwner&&n&&t.quest.languages.length<2&&t.startQuest(t.$route.params.id,t.$route.params.lang),a.abrupt("return");case 9:if(t.quest=s.data,t.quest.questId){a.next=13;break}return t.quest.invalidQuest=!0,a.abrupt("return");case 13:if(t.$store.commit("setForceOnline",!(!t.quest.hasOwnProperty("customization")||!t.quest.customization.hasOwnProperty("forceOnline"))&&t.quest.customization.forceOnline),"undefined"===typeof t.quest.authorUserId){a.next=19;break}return a.next=17,Be.getAccount(t.quest.authorUserId);case 17:r=a.sent,r&&r.data&&t.$set(t.quest,"author",r.data);case 19:if(i=window.cordova?CdvPurchase.store:{},window.cordova&&t.quest.premiumPrice&&t.quest.premiumPrice.androidId&&i.products&&i.products.length>0&&t.$router.go(0),t.checkUserIsCloseFromStartingPoint(),t.$store.state.user.isAdmin&&(t.isAdmin=!0),t.quest.editorsUserId&&t.quest.editorsUserId.length)for(l=0;l<t.quest.editorsUserId.length;l++)t.quest.editorsUserId[l]===t.$store.state.user._id&&(t.isOwner=!0);else t.$store.state.user._id===t.quest.authorUserId&&(t.isOwner=!0);return t.checkIfQuestIsOpened(),(t.isOwner||t.isAdmin)&&t.$store.commit("setForceOnline",!0),a.next=28,t.getRun();case 28:return a.next=30,t.checkUserCanPlay();case 30:return a.next=32,t.initPay();case 32:return a.next=34,t.checkSimultaneousPlayers();case 34:case"end":return a.stop()}}),a)})))()},showCalibrationAndStartQuest:function(){this.quest.hasGeolocationSteps?this.$refs.gpscal.askUserToCalibrateGPS():this.startQuest(this.quest.questId,this.language)},getRun:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Za.listForAQuest(e.quest.questId);case 2:if(a=t.sent,!(a&&a.data&&a.data.length>0)){t.next=13;break}for(s=0;s<a.data.length;s++)"finished"===a.data[s].status&&(e.isRunFinished=!0,e.quest.customization&&e.quest.customization.userReplay&&"no"===e.quest.customization.userReplay&&(e.canReplay="no"),e.quest.customization&&e.quest.customization.userReplay&&"onceaday"===e.quest.customization.userReplay&&(n=new Date,r=new Date(a.data[s].dateCreated),uu.getFullDate(r)===uu.getFullDate(n)&&(e.canReplay="nottoday"))),"in-progress"===a.data[s].status&&a.data[s].currentStep&&(e.isRunStarted=!0,e.continueQuestId=a.data[s]._id);if(!e.isRunStarted){t.next=11;break}return e.continueQuest=!0,t.next=9,uu.checkIfFileExists(e.quest.questId,"quest_"+e.quest.questId+".json");case 9:i=t.sent,!e.isOwner&&i&&e.quest.languages.length<2&&e.startQuest(e.quest.questId,e.$route.params.lang);case 11:t.next=17;break;case 13:return t.next=15,Ot.isCached(e.quest.questId);case 15:l=t.sent,l&&(e.continueQuest=!0);case 17:case"end":return t.stop()}}),t)})))()},checkSimultaneousPlayers:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.quest.limitNumberOfPlayer){t.next=5;break}return t.next=3,Za.checkNumberOfPlayers(e.quest.questId);case 3:a=t.sent,a&&a.data&&parseInt(a.data,10)>=e.quest.limitNumberOfPlayer&&(e.warning.tooMuchUsers=!0);case 5:return t.next=7,uu.writeInFile(e.quest.questId,"run_"+e.quest.questId+".json",JSON.stringify({}),!1);case 7:case"end":return t.stop()}}),t)})))()},checkBattery:function(e){e.level<50?this.warning.lowBattery=!0:this.warning.lowBattery=!1},checkUserCanPlay:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRunStarted&&!e.isRunFinished){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(e.quest.price>e.$store.state.user.coins)||e.isAdmin||e.isOwner){t.next=5;break}return e.isRunPlayable=!1,t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=2;break}return t.abrupt("return","free");case 2:if(e.quest.premiumPrice.active){t.next=4;break}return t.abrupt("return","free");case 4:if(window.cordova){t.next=8;break}return e.isAdmin||e.isOwner||Jt(e.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),e.shop.premiumQuest.priceCode="notplayableonweb",t.abrupt("return");case 8:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=11;break}return Jt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("return");case 11:return t.next=13,Ot.hasPayed(e.quest.questId);case 13:if(a=t.sent,!(a&&a.data&&a.data.status&&"paied"===a.data.status)){t.next=18;break}return e.shop.premiumQuest.priceCode="free",e.shop.premiumQuest.alreadyPayed=!0,t.abrupt("return","free");case 18:e.shop.premiumQuest.priceCode=e.quest.premiumPrice.androidId,s=CdvPurchase.store,n=CdvPurchase.ProductType,i=CdvPurchase.Platform,s.register([{id:e.quest.premiumPrice.androidId,type:n.CONSUMABLE,platform:i.APPLE_APPSTORE},{id:e.quest.premiumPrice.androidId,type:n.CONSUMABLE,platform:i.GOOGLE_PLAY}]),s.error((function(e){Jt(e.message+"(code: "+e.code+")","error")})),s.when().approved((function(e){return e.verify()})).verified(function(){var t=r()(o.a.mark((function t(a){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a,a.price=e.shop.premiumQuest.priceValue,t.next=4,e.savePurchase(a);case 4:s=t.sent,s?a.finish():Jt(e.$t("label.ErrorStandardMessage"),"error");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finished((function(e){return console.log("Products owned: "+e.products.map((function(e){return e.id})).join(","))})).productUpdated((function(t){return e.displayPrice(t)})),s.initialize([i.APPLE_APPSTORE,i.GOOGLE_PLAY]).then((function(){console.log("Store Ready!")}));case 26:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.shop.premiumQuest.priceValue=e.pricing.price,e.canPurchase&&(this.shop.premiumQuest.buyable=!0)},savePurchase:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.purchasePremium(t.quest.questId,e);case 2:if(s=a.sent,!(s&&s.data&&s.data.status&&"ok"===s.data.status)){a.next=7;break}return t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang),a.abrupt("return",!0);case 7:return a.abrupt("return",!1);case 8:case"end":return a.stop()}}),a)})))()},buyQuest:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:CdvPurchase.store.get(e.quest.premiumPrice.androidId).getOffer().order();case 1:case"end":return t.stop()}}),t)})))()},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t=this.getLanguages();if(t&&t.length>0){for(var a="",s=0;s<t.length;s++)t[s].lang===this.$store.state.user.language&&(a=this.$store.state.user.language);""===a&&t.length>0&&(a=t[0].lang)}else e.languages.length>0&&(a=e.languages[0].lang);return a},getLanguages:function(){var e;return e=this.isOwner||this.isAdmin?this.quest.languages:this.quest.languages.filter((function(e){return e.published})),e},changeLanguage:function(e){this.language=e,this.initQuest(e),this.getBackgroundImage()},getTranslatedData:function(e){var t=this.language;return e[t]?e[t]:(this.quest.warning=null,"")},openWarningLink:function(){this.quest&&this.quest.warning&&this.quest.warning.link&&uu.openExternalLink(this.quest.warning.link)},goToLocationWithMaps:function(e,t){Object(ps["a"])("https://maps.google.com/?daddr=".concat(t,",").concat(e))},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},restartGame:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){a.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.continueQuestId){t.next=3;break}return t.next=3,Za.endRun(e.continueQuestId,null,e.quest.questId,e.quest.version,e.$route.params.lang);case 3:return t.next=5,uu.removeDirectory(e.quest.questId);case 5:e.playQuest(e.quest.questId,e.$route.params.lang);case 6:case"end":return t.stop()}}),t)})))()},playQuest:function(e,t){var a=this;return r()(o.a.mark((function s(){return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.quest.forcePlayerToHaveAccount||"-"!==a.$store.state.user.name){s.next=3;break}return a.$q.dialog({message:a.$t("label.YouNeedToCreateYourAccountToPlay"),ok:a.$t("label.Ok"),cancel:a.$t("label.Cancel")}).onOk((function(){a.$router.push("/profile/"+a.$store.state.user.id)})).onCancel((function(){return!1})),s.abrupt("return",!1);case 3:if(!a.quest.shareUserDataWithCreator||"-"===a.$store.state.user.name||a.isSharedWithPartners){s.next=7;break}a.$q.dialog({message:a.$t("label.PartnerAskForYouData"),options:{type:"checkbox",model:[],items:[{label:a.$t("label.ShareDataWithPartner"),value:"ok"}]},ok:a.$t("label.Ok"),cancel:a.$t("label.Cancel")}).onOk((function(s){s.length>0&&"ok"===s[0]&&(a.isSharedWithPartners=!0),a.playQuestLaunch(e,t)})).onCancel((function(){return!1})),s.next=9;break;case 7:return s.next=9,a.playQuestLaunch(e,t);case 9:case"end":return s.stop()}}),s)})))()},playQuestLaunch:function(e,t){var a=this;return r()(o.a.mark((function t(){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==a.playStep||!a.quest.premiumPrice||!a.quest.premiumPrice.tier&&!a.quest.premiumPrice.active||a.isAdmin||a.isOwner||a.isRunFinished||a.isRunStarted){t.next=11;break}if(!a.quest.premiumPrice.tier){t.next=8;break}return t.next=4,Ot.checkTierPayment(e);case 4:s=t.sent,200===s.status?a.startPreloader():a.shop.show=!0,t.next=9;break;case 8:a.shop.show=!0;case 9:t.next=12;break;case 11:a.playStep<=1&&a.quest.playersNumber>1&&!a.continueQuest?(a.shop.show=!1,a.multiplayer.show=!0):a.startPreloader();case 12:case"end":return t.stop()}}),t)})))()},startPreloader:function(){if(this.shop.show=!1,this.multiplayer.show=!1,this.showPreloaderPopup=!0,!this.isHybrid||this.quest.customization&&this.quest.customization.forceOnline){var e=this;setTimeout((function(){e.showCalibrationAndStartQuest()}),3e3)}else this.offline.show=!0},openProfile:function(e){this.$router.push("/profile/"+e)},scanMultiplayerQRCode:function(){this.multiplayer.showScanner=!0,this.multiplayer.show=!1},closeMultiplayerQRCodeReader:function(){this.multiplayer.showScanner=!1},scanTierPaymentQRCode:function(){this.shop.showScanner=!0,this.shop.show=!1},closeTierPaymentQRCode:function(){this.shop.showScanner=!1},checkTeamCode:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Za.addTeamPlayer(e);case 2:s=a.sent,200===s.status?(t.playStep=2,t.playQuest(t.quest.questId,t.$route.params.lang)):Jt(t.$t("label.ErrorMessageForNewTeamMember"),"error");case 4:case"end":return a.stop()}}),a)})))()},checkTierPaymentCode:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.useTierPaymentCode(t.quest.questId,e);case 2:s=a.sent,200===s.status?(t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang)):Jt(t.$t("label.TechnicalIssueOrCodeAlreadyUsed"),"error");case 4:case"end":return a.stop()}}),a)})))()},createTeam:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multiplayer.team||""===e.multiplayer.team){t.next=7;break}return t.next=3,Za.init(e.quest.questId,e.quest.version,e.$route.params.lang,e.isUserTooFar,e.multiplayer.team,e.isSharedWithPartners);case 3:a=t.sent,200===a.status&&a.data&&a.data._id?(e.multiplayer.runId=a.data._id,e.multiplayer.qrcode=a.data._id):Jt(e.$t("label.ErrorStandardMessage"),"error"),t.next=8;break;case 7:Jt(e.$t("label.PleaseEnterYourTeamName"),"error");case 8:case"end":return t.stop()}}),t)})))()},checkTeamAndStart:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Za.checkTeamIsReady(e.multiplayer.runId);case 2:a=t.sent,200===a.status?(e.playStep=2,e.playQuest(e.quest.questId,e.$route.params.lang)):a.data&&a.data.members&&a.data.members.length>0?(s=a.data.members.join(", "),Jt(e.$t("label.YouNeedMoreMembersToPlay",{nb:e.quest.playersNumber,members:s}),"warning")):Jt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},openReadMoreLink:function(){uu.openExternalLink(this.quest.readMoreLink)},startQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar+"&sharepartner="+this.isSharedWithPartners)},showRewards:function(){this.showRewardsPopup=!0},backToTheMap:function(){this.$router.push("/home")},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){var e,t=this.language;return this.quest.picture&&(this.quest.picture[t]?e=this.quest.picture[t]:this.quest.picture[this.quest.mainLanguage]&&(e=this.quest.picture[this.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.jpg"}}},xs=qs,Cs=(a("b6d9"),Object(tt["a"])(xs,Ja,Ka,!1,null,"08c38753",null)),Ss=Cs.exports,ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reduce-window-size-desktop no-select"},[e.warnings.questDataMissing||e.warnings.stepDataMissing||e.warnings.runDataMissing?a("div",{staticClass:"centered full-height bg-primary q-pa-sm",staticStyle:{margin:"auto"},on:{click:function(t){return e.initData()}}},[a("q-card",{staticClass:"my-card"},[a("q-card-section",[a("div",{staticClass:"centered q-pt-lg"},[a("q-spinner-radio",{attrs:{color:"primary",size:"2em"}})],1),a("div",{staticClass:"centered q-py-lg"},[e._v(e._s(e.$t("label.NetwordkErrorReloadPage")))]),e.warnings.questDataMissing?a("div",{staticClass:"text-grey"},[e._v("Error 103.21")]):e._e(),e.warnings.stepDataMissing?a("div",{staticClass:"text-grey"},[e._v("Error 103.22")]):e._e(),e.warnings.runDataMissing?a("div",{staticClass:"text-grey"},[e._v("Error 103.23")]):e._e()])],1)],1):e._e(),e.warnings.isNetworkLow?a("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?a("div",{staticClass:"bg-white centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?a("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():a("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),a("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio?a("audio",{attrs:{id:"background-music",autoplay:"",loop:""}},[a("source",{attrs:{src:e.info.audio,type:"audio/mpeg"}})]):e._e(),a("div",{class:{fit:"image-over-flow"!==e.step.type}},[e.startDate.enabled?e._e():a("stepPlay",{attrs:{step:e.step,runId:e.runId,inventory:e.inventory,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,customization:e.info.quest.customization?e.info.quest.customization:{color:"primary"},answer:e.offline.answer,nbTryAlreadyPlayed:e.nbTry,player:e.player,timer:e.countDownTime,quest:e.info.quest,offline:e.offline.active},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,retry:e.trackStepRetry,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.nextStep(!0)},suggestNext:e.alertOnNext,hideButtons:e.hideFooterButtons,showButtons:e.showFooterButtons,openInventory:e.zoomOrUse,readMoreRead:e.setReadMoreAsRead,msg:e.trackMessage}})],1),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[a("div",{staticClass:"q-pa-md"},[a("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[a("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),a("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():a("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),a("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,s){return a("div",{key:s,staticClass:"inventory-item"},[a("img",{attrs:{src:-1!==t.picture.indexOf("statics/")||-1!==t.picture.indexOf("blob:")?t.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture},on:{click:function(a){return e.zoomOrUse(t)}}}),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?a("div",[e._v(e._s(t.titles[e.lang]))]):e._e(),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?e._e():a("div",[e._v(e._s(t.title))]),a("q-btn-group",[a("q-btn",{attrs:{padding:"xs",size:"md",color:"primary",icon:"zoom_in"},on:{click:function(a){return e.zoomItem(t)}}}),"use-item"===e.step.type?a("q-btn",{attrs:{padding:"xs",size:"md",color:"primary",icon:"done"},on:{click:function(a){return e.useItem(t)}}}):e._e(),!(e.inventory.items.length>0&&"simple"!==e.info.quest.editorMode)||e.info.quest.customization&&e.info.quest.customization.hideObjectCombination?e._e():a("q-btn",{attrs:{padding:"xs",size:"md",color:-1===e.inventory.selectedItems.indexOf(t.picture)?"primary":"secondary",icon:"merge_type"},on:{click:function(a){return e.selectItem(t)}}})],1)],1)})),0),a("div",{staticClass:"centered q-pt-md"},[e.inventory.selectedItems.length>0?a("q-btn",{staticClass:"glossy normal-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{disabled:1===e.inventory.selectedItems.length,color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:function(t){return e.combineItems()}}},[a("div",[e._v(e._s(e.$t("label.CombineItems")))])]):e._e()],1)])])]),a("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[a("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?a("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?a("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[a("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?a("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[a("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),a("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),a("q-btn",{staticClass:"glossy normal-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[a("div",[e._v(e._s(e.$t("label.Close")))])]),a("div",[a("q-btn-group",{attrs:{outline:""}},[a("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),a("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),a("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),a("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}],staticClass:"reduce-window-size-desktop"},[e.warnings.questDataMissing?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():a("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) #000000 center center / cover no-repeat "},[a("q-toolbar",{staticClass:"dark-banner text-white"},[e.info&&e.info.quest&&e.info.quest.availablePoints?a("q-toolbar-title",[e._v("\n            "+e._s(e.$t("label.GoodAnswersNumber"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions)+"\n          ")]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"play"===e.sound.status?a("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_up"},on:{click:e.cutSound}}):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"pause"===e.sound.status?a("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_off"},on:{click:e.cutSound}}):e._e(),e.offline.active?a("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_off"}}):e._e(),e.offline.active?e._e():a("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_done"}})],1),a("div",{staticClass:"text-center dark-banner q-pb-xl q-pt-md fixed-bottom"},[a("p",{staticClass:"title"},[e._v("\n            "+e._s(e.info.quest&&e.info.quest.title?e.info.quest.title:e.$t("label.NoTitle"))+"\n          ")]),e.run&&e.run.team&&e.run.team.name?a("p",[e._v("\n            "+e._s(e.$t("label.Team"))+" : "+e._s(e.run.team.name)+"\n          ")]):e._e(),a("p",[e.info.quest&&e.info.quest.customization&&(e.info.quest.customization.removeScoring||e.info.quest.customization.userCanNotQuit)?e._e():a("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[a("span",[e._v("\n                "+e._s(e.$t("label.LeaveQuest"))+"\n              ")])])],1),a("p",[e.info.quest&&e.info.quest.playersNumber&&e.info.quest.playersNumber<2&&(!e.info.quest.customization||"yes"==e.info.quest.customization.userReplay)?a("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.restartGame}},[a("span",[e._v("\n                "+e._s(e.$t("label.RestartQuest"))+"\n              ")])]):e._e()],1),a("p",[e.offline.active?e._e():a("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[a("span",[e._v("\n                "+e._s(e.$t("label.Feedback"))+"\n              ")])])],1),a("p",{staticClass:"q-pb-xl"},[a("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.openInfo}},[a("span",[e._v("\n                "+e._s(e.$t("label.BackToQuest"))+"\n              ")])])],1),a("p",{staticClass:"q-pb-lg"})])],1)])]),e.hint.isOpened?a("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[a("story",{attrs:{step:"hint",color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?e.info.quest.customization.color:"primary",data:{hint:e.hint.label,character:e.info.quest.customization&&e.info.quest.customization.character&&""!==e.info.quest.customization.character?-1===e.info.quest.customization.character.indexOf("blob:")?e.uploadUrl+"/upload/quest/"+e.info.quest.customization.character:e.info.quest.customization.character:"3"}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?a("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[a("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.countDownTime.enabled,expression:"countDownTime.enabled"}],staticClass:"fadein-message",staticStyle:{"font-size":"48px"}},[a("q-icon",{attrs:{color:"white",name:"timer"}}),e._v(" "+e._s(e.$t("label.ItRemainsMinutes",{time:Math.ceil(e.countDownTime.remainingMinutes)})))],1),a("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[a("div",{staticClass:"bg-white q-pa-md reduce-window-size-desktop"},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),a("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[a("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),a("div",{staticClass:"q-pa-md q-gutter-sm centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),a("div",{staticClass:"q-pt-md"},[a("a",{staticClass:"dark",on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Cancel")))])])],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu step-menu-fixed fixed-bottom"},[a("div",{staticClass:"row white-buttons",class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:""},[a("div",{staticClass:"col centered"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():a("div",{staticClass:"q-py-sm"},[a("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}},[this.$store.state.chatNotification>0?a("q-badge",{attrs:{color:"accent",rounded:"",floating:""}},[e._v(e._s(this.$store.state.chatNotification))]):e._e()],1)],1),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?a("q-btn",{staticStyle:{"padding-top":"0 !important"},attrs:{flat:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[a("q-avatar",{attrs:{size:"60px"}},[a("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),a("div",{staticClass:"col centered q-py-sm"},[e.info.quest.customization&&e.info.quest.customization.hideInventory?e._e():a("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}},[this.step&&this.step.hint?a("q-badge",{attrs:{color:"secondary",floating:""}},[e._v(e._s(this.hint.remainingNumber))]):e._e()],1)],1),a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",disable:0===e.$store.state.history.index,icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.step.id&&(e.next.enabled||e.next.canPass),expression:"step.id && (next.enabled || next.canPass)"}],class:{flashing:e.next.suggest,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])]),e.step&&e.step.options&&(e.step.options.displayTime||e.step.options.displayGoodAnswers)?a("div",{staticClass:"subtitle-5",staticStyle:{position:"absolute",left:"0",bottom:"70px","background-color":"#000",color:"#fff"}},[e.step.options.displayTime?a("span",[e._v(e._s(e.currentDate)+"")]):e._e(),e.step.options.displayGoodAnswers?a("span",[e._v(""+e._s(e.$t("label.Score"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions))]):e._e()]):e._e()],1)},Ps=[],_s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat"},[a("div",{staticClass:"subtitle3 q-pb-lg",on:{click:e.scrollBottom}},[e._v("Demande d'aide")]),e.arrayOfMessages.length>0?a("q-scroll-area",{ref:"scroll",staticClass:"q-pb-md row messages"},e._l(e.arrayOfMessages,(function(t){return a("q-intersection",{key:t.id,attrs:{transition:"scale",once:""}},[a("q-chat-message",{attrs:{name:t.admin?"Admin":"Vous",text:[t.content],stamp:e.timeMessage(t),sent:!t.admin,"bg-color":t.admin?"secondary":"accent","text-color":"white"}})],1)})),1):e._e(),a("q-input",{staticClass:"q-mb-sm input-message",staticStyle:{width:"calc(100% - 20px)","max-width":"550px"},attrs:{rounded:"",outlined:"",dense:"",label:"Ecrire un message"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SendChatMessage(t)}},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",color:e.writeMessage?"primary":"grey",disabled:!e.writeMessage,icon:"send"},on:{click:e.SendChatMessage}})]},proxy:!0}]),model:{value:e.messageToSend,callback:function(t){e.messageToSend=t},expression:"messageToSend"}})],1)},Ts=[],Is={getUserMessages:function(e){return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Fe.a.get("https://gmdash.api-graaly.com:3001/messages/".concat(e)).then((function(e){return e.data})).catch((function(e){return e})));case 1:case"end":return t.stop()}}),t)})))()}},As=a("e7fc"),$s={Connect:function(e){Ue=As.connect("wss://test.mosquitto.org:8081");var t="graaly/".concat(e,"/#");console.log("Connecting to mqtt"),Ue.on("connect",(function(){console.log("connected to Mqtt"),Ue.subscribe(t,(function(e){console.log("Subscribed to topic : "+t),e&&console.error(e)}))})),Ue.on("message",(function(e,t){var a=JSON.parse(t.toString());a.userId===Ve.state.user.id&&(Is.getUserMessages(a.userId).then((function(e){Ve.commit("setChatMessage",e)})),a.admin&&Ve.commit("updateChatNotification"))}))},Send:function(e,t){var a="graaly/".concat(e,"/injest/");console.log("publishing on topic : "+a),Ue.publish(a,JSON.stringify(t))},SendChat:function(e,t){var a="graaly/".concat(e,"/chat/");console.log("publishing on topic : "+a),Ue.publish(a,JSON.stringify(t))}},Os=$s,Ms=a("c72b"),zs=a("8169"),Ns=a("ad56"),Rs=a("4983"),js={name:"chat",components:{QChatMessage:zs["a"],QIntersection:Ns["a"],QScrollArea:Rs["a"]},props:{questId:String,isOpened:Boolean},data:function(){return{messageToSend:"",writeMessage:!1}},computed:{player:function(){return this.$store.state.user.name},arrayOfMessages:function(){return this.$store.state.chatMessages}},watch:{isOpened:function(){this.scrollBottom()},messageToSend:function(e){e.length>=3?this.writeMessage=!0:this.writeMessage=!1},arrayOfMessages:function(){this.scrollBottom()}},methods:{SendChatMessage:function(){var e={ts:new Date,questId:this.questId,userId:this.$store.state.user.id,name:this.player,admin:!1,content:this.messageToSend};Os.SendChat(this.questId,e),this.messageToSend="",this.scrollBottom()},timeMessage:function(e){return Object(Ms["a"])(e.ts,"FR-fr")},scrollBottom:function(){var e=this;setTimeout((function(){var t=e.$refs.scroll;if(t){var a=t.getScrollTarget(),s=300;t.setScrollPosition(a.scrollHeight,s)}}),200)}},mounted:function(){var e=this;Os.Connect(this.questId),Is.getUserMessages(this.$store.state.user.id).then((function(t){e.$store.commit("setChatMessage",t)}))}},Ds=function(e,t,a){return[[" l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][t]};Object(Ms["b"])("FR-fr",Ds);var Fs=js,Ls=(a("e2bf"),Object(tt["a"])(Fs,_s,Ts,!1,null,"5a8aed5a",null)),Es=Ls.exports,Qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit",class:{"bg-black":!e.showNonHybridQRReader&&"locate-marker"===e.step.type||"sensor"===e.step.id,loaded:e.pageReady,"bg-transparent":e.showNonHybridQRReader||"image-over-flow"===e.step.type},attrs:{id:"play-view"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"image-over-flow"!==e.step.type&&"locate-marker"!==e.step.type,expression:"(step.type !== 'image-over-flow' && step.type !== 'locate-marker')"}],staticClass:"step-background",class:{"effect-kenburns":e.step.options&&e.step.options.kenBurnsEffect,"effect-blur":e.step.options&&e.step.options.blurEffect,"effect-shaking":e.step.options&&e.step.options.shakingEffect,opacity0:"locate-item-ar"===e.step.type&&!e.stepPlayed,fadeIn:"locate-item-ar"===e.step.type&&e.stepPlayed},attrs:{id:"background-image"}}),e.showNonHybridQRReader?a("div",[a("div",{staticClass:"qrcode-target-desktop"}),a("div",{staticClass:"text-white q-pt-xl q-pl-md q-pb-sm over-qrcode-target",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:""},[a("div",{staticClass:"float-right no-underline close-btn q-pa-sm",on:{click:e.closeQRCodeReader}},[a("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),e.showNonHybridQRReader?a("qr-code-stream",{attrs:{color:e.customization&&e.customization.color&&""!==e.customization.color?e.customization.color:"primary"},on:{QrCodeResult:e.checkAnswer}}):e._e()],1):e._e(),e.showNonHybridQRReader?e._e():a("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden",style:"color: "+e.customization.fontColor},[e.timer&&e.timer.enabled?a("div",[e.isIOs?e._e():a("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:Math.abs(e.timer.remaining),color:e.timer.remaining<0?"negative":e.timer.remaining<.25?"warning":"positive"}},[a("div",{staticClass:"absolute-full flex flex-center"},[e.timer.remainingMinutes>=1?a("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(Math.abs(e.timer.remainingMinutes),10)+" "+e.$t("label.minutes")}}):e._e(),e.timer.remainingMinutes<1?a("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(Math.abs(60*e.timer.remainingMinutes),10)+" "+e.$t("label.seconds")}}):e._e()],1)]),e.isIOs?a("div",{staticClass:"text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type,"bg-positive":e.timer.remaining>.25,"bg-warning":e.timer.remaining<=.25&&e.timer.remaining>0,"bg-negative":e.timer.remaining<=0},staticStyle:{height:"25px",position:"relative"}},[a("strong",[e._v(e._s(parseInt(Math.abs(e.timer.remainingMinutes),10)+" "+e.$t("label.minutes")))])]):e._e()],1):e._e(),null!==e.step.countDownTime&&void 0!==e.step.countDownTime&&!0===e.step.countDownTime.enabled&&this.countdowntimeleft>0?a("div",[e.isIOs?e._e():a("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:e.map(this.countdowntimeleft,0,this.step.countDownTime.time,0,1),color:"primary"}},[a("div",{staticClass:"absolute-full flex flex-center"},[a("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")}})],1)]),e.isIOs?a("div",{staticClass:"bg-positive text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},staticStyle:{height:"25px",position:"relative"}},[a("strong",[e._v(e._s(parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")))])]):e._e()],1):e._e(),e.geolocation.lowCompassAccuracy||e.geolocation.lowGpsAccuracy?a("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[a("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"}},[e.geolocation.persistentLowAccuracy?e._e():a("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.WarningLowGpsAccuracy")))]),e.geolocation.persistentLowAccuracy?a("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.PersistentLowGpsAccuracyPleaseSkipStep")))]):e._e()],1)],1):e._e(),e.audio&&e.audio.file&&""!==e.audio.file?a("div",[a("audio",{attrs:{id:"step-music",autoplay:""}},[a("source",{attrs:{src:e.audio.file,type:"audio/mpeg"}})]),a("div",{staticStyle:{position:"absolute",top:"4px",right:"10px","z-index":"99"}},[a("q-btn-group",{class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},staticStyle:{color:"#fff"},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:""}},[a("div",{staticStyle:{padding:"4px"}},[e._v(e._s(e.$t("label.Audio")))]),a("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"replay_circle_filled"},on:{click:e.replayAudioSound}}),!e.audio.play||e.step.options&&e.step.options.hideSoundPause?e._e():a("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"pause_circle"},on:{click:e.switchAudioSound}}),e.audio.play||e.step.options&&e.step.options.hideSoundPause?e._e():a("q-icon",{staticStyle:{"font-size":"2em"},attrs:{name:"play_circle"},on:{click:e.switchAudioSound}})],1)],1)]):e._e(),e.isNetworkLow?a("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type||"help"==e.step.type?a("div",{staticClass:"info"},[e.showTools&&""!=e.getTranslatedText()?a("div",{class:{grow:!e.step.videoStream||!e.step.videoStream[e.lang]},attrs:{id:"info-clickable"}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"help"===e.step.type||"info-video"===e.step.type||e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1),e.step.videoStream&&e.step.videoStream[e.lang]?a("div",{staticClass:"video"},[e.step.options&&e.step.options.rotateVideo?e._e():a("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[a("source",{attrs:{src:e.step.videoStream&&e.step.videoStream[e.lang]&&-1!==e.step.videoStream[e.lang].indexOf("blob:")?e.step.videoStream[e.lang]:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream[e.lang],type:"video/mp4"}})]),e.step.options&&e.step.options.rotateVideo?a("video",{staticStyle:{position:"absolute",transform:"rotate(90deg)","transform-origin":"bottom left",width:"100vh",height:"100vw","margin-top":"-100vw","object-fit":"cover","z-index":"4",visibility:"visible"},attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[a("source",{attrs:{src:e.step.videoStream&&e.step.videoStream[e.lang]&&-1!==e.step.videoStream[e.lang].indexOf("blob:")?e.step.videoStream[e.lang]:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream[e.lang],type:"video/mp4"}})]):e._e()]):e._e()]):e._e(),"help"==e.step.type?a("div",{class:"text font-"+e.customization.font,staticStyle:{overflow:"auto","margin-bottom":"80px"}},[""==e.getTranslatedText()?a("p",{staticClass:"text help-text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessage"))}}):e._e(),e.step.options&&e.step.options.helpNext?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:"",size:"lg",icon:"arrow_forward"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.HelpStepMessageNextMessage")))])],1)],1):e._e(),e.step.options&&e.step.options.helpPrevious?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:"",size:"lg",icon:"arrow_back"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.HelpStepMessagePreviousMessage")))])],1)],1):e._e(),e.step.options&&e.step.options.helpInventory?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:"",size:"lg",icon:"work"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.HelpStepMessageInventoryMessage")))])],1)],1):e._e(),e.step.options&&e.step.options.helpHint?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:"",size:"lg",icon:"lightbulb"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.HelpStepMessageHintMessage")))])],1)],1):e._e(),e.step.options&&e.step.options.helpCombinate?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:e.customization&&e.customization.color&&""!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{rounded:"",size:"lg",icon:"merge_type"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.HelpStepMessageCombinateMessage")))])],1)],1):e._e(),a("p",{staticClass:"text help-text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageEnd"))}})],1):e._e(),"new-item"!=e.step.type||this.step.options&&this.step.options.addInventoryAndPass?e._e():a("div",{staticClass:"new-item"},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"item"},[a("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture},on:{click:function(t){return e.openInventory(e.step.options)}}}),""!=e.step.options.title&&" "!=e.step.options.title?a("p",[a("span",[e._v(e._s(e.step.options.title))])]):e._e()])]),"end-chapter"==e.step.type?a("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"increment-counter"==e.step.type?a("div",{staticClass:"end-of-chapter"},[e._v("\n        "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n      ")]):e._e(),"character"==e.step.type?a("div",{staticClass:"character"},[e.character.numberOfBubble>0&&e.character.show?a("div",{staticClass:"fixed-bottom-character story",on:{click:function(t){return e.nextCharacterBubbleText()}}},[e._m(0),a("div",{staticClass:"bubble-middle",staticStyle:{"font-size":"0.9em",background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[e.character.needToScroll?a("div",{staticClass:"scroll-indicator"},[a("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),!(e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber].text)||e.step.options&&e.step.options.html?e._e():a("p",{ref:"bubbleText",staticClass:"carrier-return small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"}},[e._v(e._s(e.character.bubbleText[e.character.bubbleNumber].text))]),e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber].text&&e.step.options&&e.step.options.html?a("p",{ref:"bubbleTextHtml",staticClass:"text small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"},domProps:{innerHTML:e._s(e.character.bubbleText[e.character.bubbleNumber].text)}}):e._e(),e.character.bubbleNumber<e.character.numberOfBubble-1?a("p",{staticClass:"text-grey small-margin"},[e._v(e._s(e.$t("label.ReadNext")))]):e._e()]),a("div",{staticClass:"bubble-bottom"},[a("img",{attrs:{src:"statics/icons/story/sticker-bottom-"+e.character.bubbleText[e.character.bubbleNumber].position+".png"}})]),"left"===e.character.bubbleText[e.character.bubbleNumber].position?a("div",{staticClass:"character",style:"text-align: left; min-height: 100px;"},[e.character.bubbleText[e.character.bubbleNumber].picture.length<3?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:"statics/icons/story/character"+e.character.bubbleText[e.character.bubbleNumber].picture+"_attitude1.png"}}):e._e(),e.character.bubbleText[e.character.bubbleNumber].picture.length>2&&"usequestcharacter"!==e.step.options.character?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:-1!==e.character.bubbleText[e.character.bubbleNumber].picture.indexOf("blob:")?e.step.options.character:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.character.bubbleText[e.character.bubbleNumber].picture}}):e._e(),"usequestcharacter"===e.character.bubbleText[e.character.bubbleNumber].picture?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:-1===e.customization.character.indexOf("blob:")?e.uploadUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]):e._e(),"right"===e.character.bubbleText[e.character.bubbleNumber].position?a("div",{staticClass:"character",style:"text-align: right; min-height: 100px;"},[e.character.bubbleText[e.character.bubbleNumber].picture.length<3?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:"statics/icons/story/character"+e.character.bubbleText[e.character.bubbleNumber].picture+"_attitude1.png"}}):e._e(),e.character.bubbleText[e.character.bubbleNumber].picture.length>2&&"usequestcharacter"!==e.step.options.character?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:-1!==e.character.bubbleText[e.character.bubbleNumber].picture.indexOf("blob:")?e.step.options.character:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.character.bubbleText[e.character.bubbleNumber].picture}}):e._e(),"usequestcharacter"===e.character.bubbleText[e.character.bubbleNumber].picture?a("img",{style:"vertical-align:bottom; width:"+(e.step.options&&e.step.options.characterSize?e.step.options.characterSize:"60%"),attrs:{src:-1===e.customization.character.indexOf("blob:")?e.uploadUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]):e._e(),e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?a("div",{staticClass:"full-width",class:e.step.options&&e.step.options.characterBarColor?"":"bg-black",style:"height: 68px; "+(e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?"background-color: "+e.step.options.characterBarColor:"")}):e._e(),e.step.options&&e.step.options.characterBarColor&&""!==e.step.options.characterBarColor?e._e():a("div",{staticClass:"full-width",staticStyle:{height:"68px"}})]):e._e()]):e._e(),"choose"==e.step.type?a("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),"text"===e.answerType?a("div",{staticClass:"answers-text q-mt-lg",class:{"compact-mode":e.step.options.items.length>4,"ultracompact-mode":e.step.options.items.length>6||e.step.options.items.length>4&&e.step.options.multipleAnswers}},e._l(e.step.options.items,(function(t,s){return a("q-btn",{key:s,staticClass:"full-width",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+s},on:{click:function(t){return e.chooseSelectValue(s)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():a("span",{class:"font-"+e.customization.font},[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?a("span",{class:"font-"+e.customization.font},[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?a("div",{staticClass:"answers-images"},[a("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,s){return a("div",{key:s,class:t.class,attrs:{"test-id":"answer-image-"+s},on:{click:function(t){return e.chooseSelectValue(s)}}},[a("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?a("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e(),e.step.options.multipleAnswers?a("div",{staticClass:"q-pa-md centered"},[a("q-btn",{staticClass:"glossy",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1]},on:{click:function(t){return e.checkAnswer()}}},[a("div",[e._v(e._s(e.$t("label.Confirm")))])])],1):e._e(),e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-keypad"==e.step.type?a("div",{staticClass:"code",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"typed-code"},[a("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[a("tr",e._l(e.playerCode,(function(t,s){return a("td",{key:s,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)]),e.rightAnswer?a("table",{staticClass:"shadow-8 right"},[a("tr",e._l(e.rightAnswer,(function(t,s){return a("td",{key:s,staticClass:"typed"},[e._v(e._s(t))])})),0)]):e._e()]),a("div",{staticClass:"keypad"},[a("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,s){return a("div",{key:s},e._l(t,(function(t,s){return a("q-btn",{key:s,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(a){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mb-md q-px-md"},[a("div",[a("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[a("div",[e._v("\n                  "+e._s(e.$t("label.Clear"))+"\n                ")])]),a("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[a("div",[e._v("\n                  "+e._s(e.$t("label.Confirm"))+"\n                ")])])],1)]),e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-color"==e.step.type?a("div",{staticClass:"code code-color",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"color-bubbles",staticStyle:{"margin-top":"10px"}},e._l(e.playerCode,(function(t,s){return a("div",{key:s,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[s],attrs:{"test-id":"color-code-"+s},on:{click:function(t){return e.changeColorForCode(s)}}},[e._v("")])})),0),e.rightAnswer?a("div",{staticClass:"color-bubbles"},e._l(e.rightAnswer,(function(t,s){return a("div",{key:s,staticClass:"shadow-8 right",style:"background-color: "+t},[e._v("")])})),0):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mx-md"},[a("div",[a("q-btn",{staticClass:"glossy large-button q-mb-md",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[a("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-image"==e.step.type?a("div",{staticClass:"code code-image",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("table",[a("tr",e._l(e.playerCode,(function(t,s){return a("td",{key:s,staticClass:"text-center q-pb-sm"},[a("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+s},on:{click:function(t){return e.previousCodeAnswer(s)}}})],1)})),0),a("tr",e._l(e.playerCode,(function(t,s){return a("td",{key:s},[e.step.options[e.lang]&&e.step.options[e.lang].images&&e.step.options[e.lang].images[t]?a("img",{attrs:{id:"image-code-"+s,src:-1!==e.step.options[e.lang].images[t].imagePath.indexOf("blob:")?e.step.options[e.lang].images[t].imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options[e.lang].images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(s)}}}):e._e()])})),0),a("tr",{directives:[{name:"show",rawName:"v-show",value:e.rightAnswer,expression:"rightAnswer"}]},e._l(e.rightAnswer,(function(t,s){return a("td",{key:s,staticClass:"right"},[e.step.options[e.lang]&&e.step.options[e.lang].images&&e.step.options[e.lang].images[t]?a("img",{attrs:{src:-1!==e.step.options[e.lang].images[t].imagePath.indexOf("blob:")?e.step.options[e.lang].images[t].imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options[e.lang].images[t].imagePath}}):e._e()])})),0),a("tr",e._l(e.playerCode,(function(t,s){return a("td",{key:s,staticClass:"text-center"},[a("q-btn",{staticStyle:{"margin-top":"0px"},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+s},on:{click:function(t){return e.nextCodeAnswer(s)}}})],1)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-ma-md"},[a("div",[a("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[a("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.codeImage.imageBelow?a("div",[a("img",{staticStyle:{width:"80%"},attrs:{src:e.codeImage.imageBelow.indexOf("statics/")>-1||-1!==e.codeImage.imageBelow.indexOf("blob:")?e.codeImage.imageBelow:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.codeImage.imageBelow}})]):e._e(),e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1),e.step.options&&e.step.options.hideEnlargeMessage?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:""}},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))])],1)]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"geolocation"==e.step.type?a("div",{staticClass:"geolocation"},[a("div",{class:e.geolocation.mode+"mode"},[!e.geolocation.showText||""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),e.geolocation.showText&&""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.getTranslatedText().length>75?a("p",{staticClass:"centered"},[e.geolocation.showText?a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.geolocation.showText=!1}}}):e._e(),e.geolocation.showText?e._e():a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.geolocation.showText=!0}}})],1):e._e(),e.step.showDistanceToTarget?a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:0==e.geolocation.GPSdistance||null==e.geolocation.GPSdistance?"...":Math.round(e.geolocation.GPSdistance)})))]):e._e()]),e.customization.disableGeolocation?e._e():a("geolocationStepMap",{directives:[{name:"show",rawName:"v-show",value:"map"===e.geolocation.mode&&null===e.playerResult,expression:"geolocation.mode === 'map' && playerResult === null"}],staticClass:"geolocation-step-map",class:"font-"+e.customization.font,attrs:{"target-position":e.geolocation.destinationPosition,"player-position":e.geolocation.playerPosition}}),e.step.options.switchmode?a("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{id:"mode-switch",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:e.getGeolocationStepSwitchButtonIcon(),round:"",size:"lg"},on:{click:function(t){return e.switchModeForGeolocationStep()}}}):e._e()],1):e._e(),"gpssensor"==e.step.id&&"sensor"===e.geolocation.mode?a("div",{staticClass:"background-map full-width full-height q-pa-md centered"},[e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?a("div",[e._v(e._s(e.customization.geolocationMessage[e.lang]))]):e._e(),e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?e._e():a("div",[e._v(e._s(e.$t("label.FindAllLocationsToStartSteps")))]),a("div",{staticClass:"q-mt-xl centered"},[a("q-spinner-orbit",{attrs:{color:e.geolocation.colorIndicator,size:"50vw"}})],1),e._v("\n        "+e._s(e.$t("label.ColorIndicatorExplaination",{distance:e.geolocation.closestDistance}))+"\n      ")]):e._e(),"gpssensor"==e.step.id&&"map"===e.geolocation.mode?a("div",{staticClass:"background-map full-width full-height q-pa-md centered"},[a("geolocationStepMap",{staticClass:"geolocation-step-map",class:"font-"+e.customization.font,attrs:{"target-position":e.geolocation.destinationPosition,"player-position":e.geolocation.playerPosition}})],1):e._e(),"write-text"==e.step.type?a("div",{staticClass:"write-text",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"answer-text q-pa-md col-9"},[a("input",{class:{right:!0===e.playerResult,wrong:!1===e.playerResult},staticStyle:{height:"55px"},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),e.rightAnswer?a("input",{staticClass:"right",attrs:{disabled:""},domProps:{value:e.rightAnswer}}):e._e()]),a("div",{staticClass:"col-3"},[a("q-btn",{staticClass:"glossy",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer",icon:"done"},on:{click:function(t){return e.checkAnswer()}}})],1)]),e.step.options&&e.step.options.hideHideButton?e._e():a("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1),e.writetext.imageBelow?a("div",{staticStyle:{opacity:"0.99"}},[a("img",{staticStyle:{width:"80%"},attrs:{src:e.writetext.imageBelow.indexOf("statics/")>-1||-1!==e.writetext.imageBelow.indexOf("blob:")?e.writetext.imageBelow:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/write-text/"+e.writetext.imageBelow}})]):e._e()]):e._e(),e.showTools?e._e():a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"jigsaw-puzzle"===e.step.type?a("div",{staticClass:"puzzle"},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return a("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(a){return e.movePieceWithClick(t.pos)}}},[a("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),a("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),e.step.options.hidePuzzleNotWorkingMessage?e._e():a("div",{staticClass:"q-mt-lg background-lighter4 q-pa-md"},[e.puzzle&&"drag"===e.puzzle.mode?a("div",{staticClass:"centered arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpText"))+"\n          ")]):e._e(),"click"===e.puzzle.mode?a("div",{staticClass:"centered text-primary q-pt-lg arial"},[e._v("\n            "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n          ")]):e._e(),e.puzzle&&"drag"===e.puzzle.mode?a("div",{staticClass:"centeredq-pt-sm"},[a("a",{staticClass:"text-black",on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()])]):e._e(),"memory"===e.step.type?a("div",{staticClass:"puzzle",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"row memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,s){return a("div",{key:s,staticClass:"col-3 q-pa-sm"},[a("div",{staticClass:"card",class:{open:t.isClicked,closed:!t.isClicked,disabled:t.isFound},style:e.step.options&&e.step.options.memoryCardColor&&""!==e.step.options.memoryCardColor?"background: "+e.step.options.memoryCardColor:"",on:{click:function(t){return e.selectMemoryCard(s)}}},[t.imagePath?a("img",{staticStyle:{display:"block",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"},attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}}):e._e()])])})),0)]):e._e(),"portrait-robot"===e.step.type?a("div",{staticClass:"portrait-robot",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"relative-position"},[e.portrait.face?a("div",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/face-"+e.portrait.face.position+".png"}})]):e._e(),e.portrait.eye?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-"+e.portrait.eye.position+".png"}})]):e._e(),e.portrait.mouth?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-"+e.portrait.mouth.position+".png"}})]):e._e(),e.portrait.nose?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-"+e.portrait.nose.position+".png"}})]):e._e(),e.portrait.hair?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-"+e.portrait.hair.position+".png"}})]):e._e(),e.portrait.beard?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-"+e.portrait.beard.position+".png"}})]):e._e(),e.portrait.glass?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-"+e.portrait.glass.position+".png"}})]):e._e(),e.portrait.hat?a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-"+e.portrait.hat.position+".png"}})]):e._e()]),a("table",{staticClass:"portrait-parts relative-position"},[a("tr",[e.portrait.face?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/face-0.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]):e._e(),e.portrait.eye?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-0.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]):e._e(),e.portrait.mouth?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-0.png"},on:{click:function(t){return e.changePortraitPart("mouth")}}})]):e._e(),e.portrait.nose?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-0.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]):e._e(),e.portrait.hair?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-0.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]):e._e(),e.portrait.beard?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-0.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]):e._e(),e.portrait.glass?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-0.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]):e._e(),e.portrait.hat?a("td",[a("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-0.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})]):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mx-md",staticStyle:{"padding-bottom":"100px"}},[a("div",[a("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done"},on:{click:function(t){return e.checkAnswer()}}},[a("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)])]):e._e(),"binocular"===e.step.type?a("div",{staticClass:"binocular"},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"relative-position"},[a("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[a("img",{staticStyle:{width:"400%"},attrs:{src:e.getBackgroundImage()}})]),a("div",{staticClass:"absolute no-mouse-event",staticStyle:{top:"0px",width:"100%"}},[e.step.options.shape&&"binocular"!==e.step.options.shape?e._e():a("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/binoculars.png"}}),e.step.options.shape&&"flashlight"===e.step.options.shape?a("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/flashlight.png"}}):e._e(),e.step.options.shape&&"keyhole"===e.step.options.shape?a("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/keyhole.png"}}):e._e()])]),a("div",{staticClass:"absolute text-white centered",staticStyle:{width:"100%",left:"0px",right:"0px",bottom:"130px"}},[e._v("\n          "+e._s(e.$t("label.MovePictureWithFingerFor"+(e.step.options.shape?e.step.options.shape:"binocular")))+"\n        ")])]):e._e(),"phone-call"===e.step.type?a("div",{staticClass:"phone-call fit"},[a("div",{staticClass:"fit bg-black"},[a("div",{staticClass:"q-pb-xxl"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{staticClass:"fixed-bottom q-pb-xxl q-pl-xl q-pr-xl"},[a("q-btn",{attrs:{round:"",color:"positive",icon:"call"},on:{click:function(t){return e.phoneCall()}}}),a("q-btn",{staticClass:"float-right",attrs:{round:"",color:"negative",icon:"call_end"},on:{click:function(t){return e.cancelPhoneCall()}}})],1)])]):e._e(),"use-item"==e.step.type?a("div",{staticClass:"use-item"},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.useItem.imageHeight+"px;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.checkUseItem(t)}}},[a("img",{style:"position: relative; z-index: 500; width: "+e.useItem.crossSize+"px; height: "+e.useItem.crossSize+"px; display: none;",attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?a("p",{staticClass:"inventory-btn"},[a("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"}},[a("q-avatar",[e.itemUsed&&e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?a("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e(),!e.itemUsed||e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?e._e():a("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}})])],1),e._v("\n        "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n      ")],1):e._e(),"find-item"==e.step.type?a("div",{staticClass:"find-item",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),a("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.findItem.imageHeight+"px;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.checkFindItem(t)}}},[a("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play0",src:"statics/icons/game/find-item-locator.png"}}),a("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play1",src:"statics/icons/game/find-item-locator.png"}}),a("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play2",src:"statics/icons/game/find-item-locator.png"}}),a("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play3",src:"statics/icons/game/find-item-locator.png"}}),a("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play4",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"===e.step.type?a("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs["geolocation-component"]&&e.$refs["geolocation-component"].isActive,expression:"$refs['geolocation-component'] && $refs['geolocation-component'].isActive"}],staticClass:"locate-item-ar"},[e.noSensorFound?a("div",{staticClass:"text text-center",class:"font-"+e.customization.font},[a("p",{staticClass:"q-mb-lg"},[e._v(e._s(e.$t("label.noSensorFound")))]),a("q-icon",{staticClass:"q-mb-lg",attrs:{size:"3em",name:"sensors_off"}}),a("p",[e._v(e._s(e.$t("label.noSensorNext")))])],1):a("div",[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&e.geolocation.active&&null===e.playerResult,expression:"cameraStreamEnabled && geolocation.active && playerResult === null"}],ref:"camera-stream-for-locate-item-ar"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&(this.geolocation.active||e.isIOs),expression:"playerResult === null && (this.geolocation.active || isIOs)"}],staticClass:"q-mt-xl"},[a("div",{staticClass:"text",class:"font-"+e.customization.font,on:{click:e.resetBackgroundImage}},[e.step.options&&e.step.options.html?e._e():a("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?a("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.geolocation.active?e._e():a("p",[e._v(e._s(e.$t("label.PleaseWaitLoadingAndGPSInit")))]),e.step.showDistanceToTarget&&e.geolocation.active?a("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:0==e.geolocation.GPSdistance||null==e.geolocation.GPSdistance?"...":Math.round(e.geolocation.GPSdistance)})))]):e._e(),!e.geolocation.canSeeTarget&&e.geolocation.active?a("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]):e._e(),e.geolocation.canTouchTarget&&e.geolocation.active?a("p",{staticStyle:{color:"#f00"}},[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&e.geolocation.active?a("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||null!==e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult !== null && step.options && step.options.is3D)"}],staticClass:"target-view"},[a("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})]),a("q-dialog",{ref:"raVerticallyDialog"},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",{staticClass:"bg-negative text-white q-pa-sm"},[e._v("\n                ATTENTION\n              ")]),a("q-card-section",[a("p",{staticClass:"q-pt-md q-ma-none"},[e._v(e._s(e.$t("label.holdVerticaly")))])])],1)],1)],1)]):e._e(),"image-over-flow"==e.step.type?a("super-impose-image-camera-step",{attrs:{quest:e.quest,step:e.step,runId:e.runId,customization:e.customization},on:{showButtons:function(t){return e.$emit("showButtons")},hideButtons:function(t){return e.$emit("hideButtons")}}}):e._e(),"locate-marker"==e.step.type||"sensor"==e.step.id?a("div",{staticClass:"locate-marker"},[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():a("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?a("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()])]),null===e.playerResult?a("div",{staticClass:"text-white centered q-mt-md q-pt-xl"},[e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?a("div",[e._v(e._s(e.customization.qrCodeMessage[e.lang]))]):e._e(),e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?e._e():a("div",[e._v(e._s(e.$t("label.ScanTheMarkersLikeThat")))]),e._m(1),e._v("\n          "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n          "),a("div",[a("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.startScanQRCode()}}},[a("div",[e._v(e._s(e.$t("label.LaunchTheScanner")))])])],1)]):e._e(),a("div",{staticClass:"text-center"},[e.playerResult&&e.step.options&&"scan"==e.step.options.mode?a("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e()]),e.locateMarker.showHelp?a("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font,staticStyle:{height:"100%"}},[a("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&e.step.options&&"scan"===e.step.options.mode?"FindMarkerHelp":"TouchObjectOnMarkerHelp"}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e(),"wait-for-event"==e.step.type?a("div",[a("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"distance"===e.step.options.object&&null!==e.iot.distance?a("h2",{staticClass:"centered big q-pb-lg",class:{right:!0===e.playerResult}},[e._v("\n            "+e._s(e.iot.distance)+" cm\n          ")]):e._e(),"pot"===e.step.options.object&&null!==e.iot["pot1"]?a("div",e._l([1,2,3],(function(t){return a("q-linear-progress",{key:t,staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["pot"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})})),1):e._e(),"keypad"===e.step.options.object?a("div",[a("p",[e._v(e._s(e.$t("label.KeypadInput")))]),a("p",{ref:"iot-keypad",staticClass:"iot-keypad",class:{right:!0===e.playerResult,wrong:!1===e.playerResult,shake:!1===e.playerResult}},[e._v(e._s(e.iot.keypadAnswer))])]):e._e(),"joystick"===e.step.options.object&&null!==e.iot["axisX"]?a("div",e._l(["X","Y"],(function(t){return a("div",{key:t},[a("p",[e._v(e._s("X"===t?e.$t("label.Horizontal"):e.$t("label.Vertical")))]),a("q-linear-progress",{staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["axis"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})],1)})),0):e._e(),"button"===e.step.options.object&&!0===e.playerResult?a("div",[a("p",{staticClass:"right q-pb-md q-px-md q-my-md"},[e._v(e._s(this.step.options.message))])]):e._e()])]):e._e(),"trigger-event"==e.step.type?a("div",{staticClass:"trigger-event"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"},domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"chest"!==e.step.options.object||"relay"===e.step.options.object?a("div",[e.step.options.triggerMode&&"manual"===e.step.options.triggerMode?a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.TriggerTheEvent"),size:"xl",disable:null===e.bluetooth.deviceId},on:{click:function(t){return e.triggerIotEvent()}}}):e._e()],1):e._e(),"chest"===e.step.options.object?a("div",[a("p",[e._v(e._s(e.$t("label.ChestActions")))]),a("div",{staticStyle:{display:"flex"}},[a("q-btn",{staticStyle:{"flex-grow":"1","margin-right":"1rem"},attrs:{color:"primary",label:e.$t("label.Open"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("open")}}}),a("q-btn",{staticStyle:{"flex-grow":"1"},attrs:{color:"primary",label:e.$t("label.Close"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("close")}}})],1)]):e._e(),"bluetooth"===e.step.options.protocol&&null===e.bluetooth.deviceId?a("p",[e._v(e._s(e.$t("label.SearchingBluetoothDevice")))]):e._e()]):e._e(),null!==e.story.step&&"end"!==e.story.step?a("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font},[a("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"waiting"==e.step.id,expression:"step.id == 'waiting'"}],staticClass:"panel-bottom background-dark"},[a("div",{staticClass:"centered q-pa-lg title4 text-primary"},[a("div",{staticClass:"q-pa-lg text-uppercase",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.WaitingForOtherUsersActions")))]),a("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),a("div",[a("div",{staticClass:"q-pa-lg centered"},[e._v("\n              "+e._s(e.$t("label.WaitingForOtherUsersActionsDesc"))+"\n            ")])])])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type&&"compass"===e.geolocation.mode||"locate-item-ar"==e.step.type&&e.deviceHasGyroscope)&&e.step.showDirectionToTarget&&null===e.playerResult&&(e.geolocation.active||e.isIOs),expression:"((step.type == 'geolocation' && geolocation.mode === 'compass') || (step.type == 'locate-item-ar' && deviceHasGyroscope)) && step.showDirectionToTarget && playerResult === null && (geolocation.active || isIOs)"}],staticClass:"direction-helper"},[a("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:"geolocation"==e.step.type&&!0===e.playerResult,expression:"step.type == 'geolocation' && playerResult === true"}],staticClass:"direction-helper centered"},[a("q-avatar",{staticStyle:{margin:"auto","margin-bottom":"30px"},attrs:{size:"140px","font-size":"52px",color:"positive","text-color":"white",icon:"thumb_up"}})],1),a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"===e.step.type||"locate-item-ar"===e.step.type)&&e.$refs["geolocation-component"]&&(e.$refs["geolocation-component"].userDeniedGeolocation||!e.$refs["geolocation-component"].isActive),expression:"(step.type === 'geolocation' || step.type === 'locate-item-ar') && $refs['geolocation-component'] && ($refs['geolocation-component'].userDeniedGeolocation || !$refs['geolocation-component'].isActive)"}],staticClass:"geolocation-issue"},[a("div",[a("p",{staticClass:"bg-warning"},[e._v(e._s(e.$t("label.GeolocationCouldNotBeRetrieved")))]),a("p",[e._v(e._s(e.$t("label.GeolocationIssuePleaseSkipThisStep")))])])]),a("orientation",{ref:"orientation-component",attrs:{disabled:!e.quest.hasGeolocationSteps},on:{success:function(t){return e.onNewDeviceOrientation(t)},error:function(t){return e.onDeviceOrientationError(t)}}}),!0===e.playerResult&&e.displaySuccessIcon&&e.step&&e.step.options&&e.step.options.successIcon&&"block"!==e.step.options.successIcon?a("div",{staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[a("q-icon",{attrs:{color:"white",name:e.step.options.successIcon}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.geolocation.foundStep,expression:"geolocation.foundStep"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[a("q-icon",{attrs:{color:"white",name:"check_box"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),a("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:60===this.countdowntimeleft||30===this.countdowntimeleft||15===this.countdowntimeleft||10===this.countdowntimeleft||5===this.countdowntimeleft,expression:"\n        this.countdowntimeleft === 60 ||\n        this.countdowntimeleft === 30 ||\n        this.countdowntimeleft === 15 ||\n        this.countdowntimeleft === 10 ||\n        this.countdowntimeleft === 5\n        "}],staticClass:"fadein-message text-center"},[a("div",{staticStyle:{"font-size":"0.6em"}},[e._v(e._s(e.$t("label.ItRemains")))]),e._v("\n        "+e._s(this.countdowntimeleft)+" "+e._s(e.$t("label.s"))+"\n    ")]),null!==e.story.step&&"end"!==e.story.step?a("div",{staticClass:"fixed-bottom over-map"},[a("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),a("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[a("div",{staticClass:"bg-white centered q-pa-md"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[a("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),a("gpscalibration",{ref:"gpscal"}),a("holdphonevertically",{attrs:{show:e.geolocation.showARHelp}})],1)},Bs=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bubble-top"},[a("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mt-md"},[a("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],Us=(a("5df3"),a("1c4c"),a("f576"),a("14b9"),{storeTimeLeft:function(e,t,a){var s={runid:e,stepid:t,timeleft:a};s=JSON.stringify(s),localStorage.setItem("timer-"+e+"-"+t,s)},allStorage:function(){for(var e=[],t=0,a=localStorage.length;t<a;t++){var s=localStorage.key(t),o=localStorage[s];if(s.includes("timer-")){var n={key:s,value:o};e.push(n)}}return e},getTimeLeft:function(e,t){var a=this.allStorage(),s=!0,o=!1,n=void 0;try{for(var r,i=a[Symbol.iterator]();!(s=(r=i.next()).done);s=!0){var l=r.value,c=JSON.parse(l.value);if(c.runid===e&&c.stepid===t)return c.timeleft<0&&(c.timeleft=0),c.timeleft}}catch(u){o=!0,n=u}finally{try{s||null==i.return||i.return()}finally{if(o)throw n}}return null},clearStoredTimers:function(){var e=this.allStorage();e.forEach((function(e){localStorage.removeItem(e.key)}))}}),Ys=a("22ae"),Gs=a("3ba6"),Hs=a("2f04"),Ws=a("e08c"),Vs=a("025e"),Js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Ks=[],Zs={props:{disabled:{type:Boolean,default:!1}},data:function(){return{status:"stopped",sensor:{start:function(){},stop:function(){},onreading:function(){},onerror:function(){}},deviceHasGyroscope:null,gyroscopeDetectionCounter:0,initialBearingAngle:null,noSensorFound:!1,isHybrid:window.cordova,isIOs:uu.isIOS(),isSafari:uu.isSafari()}},watch:{disabled:function(e,t){!0===e&&"started"===this.status?this.stopSensor():!1===e&&"stopped"===this.status&&this.startSensor()}},mounted:function(){var e=this;this.$nextTick((function(){e.startSensor()}))},beforeDestroy:function(){this.stopSensor()},methods:{absoluteOrientationSensorError:function(e){console.error("Could not get orientation",e.error),this.stopSensor(),this.$emit("error",e.error)},absoluteOrientationSensorSuccess:function(){this.$emit("success",this.sensor)},handleDeviceOrientationEvent:function(e){this.$emit("success",e)},startSensor:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.disabled&&"started"!==e.status){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.detectGyroscope();case 4:if(!e.isHybrid||e.isIOs||e.isSafari||e.deviceHasGyroscope){t.next=8;break}window.addEventListener("deviceorientationabsolute",e.handleDeviceOrientationEvent,!0),t.next=38;break;case 8:if(t.prev=8,!("AbsoluteOrientationSensor"in window)){t.next=16;break}e.sensor=new AbsoluteOrientationSensor({frequency:30}),e.sensor.onerror=e.absoluteOrientationSensorError,e.sensor.onreading=e.absoluteOrientationSensorSuccess,e.sensor.start(),t.next=33;break;case 16:if(!e.isSafari){t.next=25;break}if(console.log("IS SAFARI"),"undefined"!==typeof DeviceMotionEvent){t.next=21;break}return e.noSensorFound=!0,t.abrupt("return");case 21:e.sensor={stop:e.stopAlternateAbsoluteOrientationSensor},window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1),t.next=33;break;case 25:return e.sensor={stop:e.stopAlternateAbsoluteOrientationSensor},t.next=28,uu.requestDeviceOrientationPermission();case 28:if(a=t.sent,"granted"===a){t.next=32;break}return Notification(e.$t("label.PleaseAcceptDeviceOrientationPermissionRequest"),"error"),t.abrupt("return");case 32:window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1);case 33:t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](8),console.error(t.t0);case 38:e.status="started";case 39:case"end":return t.stop()}}),t,null,[[8,35]])})))()},stopSensor:function(){"started"===this.status&&(this.deviceHasGyroscope?this.sensor.stop():window.removeEventListener("deviceorientationabsolute",this.handleDeviceOrientationEvent,!0),this.status="stopped")},eventAlternateAbsoluteOrientationSensor:function(e){null===this.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.initialBearingAngle+e.alpha)%360:e.alpha,a=e.beta,s=e.gamma,o=Math.PI/180,n=a?a*o:0,r=s?s*o:0,i=t?t*o:0,l=Math.cos(n/2),c=Math.cos(r/2),u=Math.cos(i/2),d=Math.sin(n/2),p=Math.sin(r/2),m=Math.sin(i/2),h=l*c*u-d*p*m,g=d*c*u-l*p*m,f=l*p*u+d*c*m,b=l*c*m+d*p*u;this.sensor.quaternion=[g,f,b,h],this.absoluteOrientationSensorSuccess()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},detectGyroscope:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isIOs&&!e.isSafari){t.next=4;break}e.deviceHasGyroscope=!0,t.next=7;break;case 4:return window.addEventListener("devicemotion",e.handleMotionEventToDetectGyroscope,!0),t.next=7,e.waitForGyroscopeDetection();case 7:case"end":return t.stop()}}),t)})))()},waitForGyroscopeDetection:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.abrupt("return",new Promise((function(t,s){null!==e.deviceHasGyroscope?(e.gyroscopeDetectionCounter=0,t()):e.gyroscopeDetectionCounter>40?t():(e.gyroscopeDetectionCounter++,uu.setTimeout(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.waitForGyroscopeDetection();case 2:t();case 3:case"end":return e.stop()}}),e)}))),250))})));case 2:case"end":return t.stop()}}),t)})))()},handleMotionEventToDetectGyroscope:function(e){null!==this.deviceHasGyroscope||this.isIOs||(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha,window.removeEventListener("devicemotion",this.handleMotionEvent,!0))}}},Xs=Zs,eo=Object(tt["a"])(Xs,Js,Ks,!1,null,null,null),to=eo.exports,ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{model:{value:e.showPhoneAnimation,callback:function(t){e.showPhoneAnimation=t},expression:"showPhoneAnimation"}},[a("div",{staticClass:"bg-black centered q-pa-md"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),a("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])},so=[],oo={props:["show"],watch:{show:function(){var e=r()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:!0!==t&&"true"!==t||(uu.setTimeout(this.closeHandleMobileVertically,5e3),this.showPhoneAnimation=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},data:function(){return{showPhoneAnimation:!1}},methods:{closeHandleMobileVertically:function(){this.showPhoneAnimation=!1}}},no=oo,ro=Object(tt["a"])(no,ao,so,!1,null,null,null),io=ro.exports,lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?a("div",{staticClass:"story fit reduce-window-size-desktop",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"},on:{click:e.closeBubble}},[a("div",{staticClass:"fixed-story",style:"position: fixed; z-index: 10000; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),a("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?a("div",{staticClass:"scroll-indicator"},[a("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),a("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),a("div",{staticClass:"text-right font-standard"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?a("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v(" \n        "),e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button2")?a("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary"},on:{click:e.buttonAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.label))+"\n        ")]):e._e(),e._v(" \n        "),a("q-btn",{staticClass:"glossy normal-button",style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary"},on:{click:e.next}},[a("div",[e._v(e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>"))])])],1)]),e._m(1),e.showCharacter?a("div",{staticClass:"character"},[-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")&&-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?a("img",{staticStyle:{"min-height":"30vh","vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}}):e._e(),-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")||-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?a("img",{staticStyle:{"min-height":"20vh","max-height":"30vh","vertical-align":"bottom"},attrs:{src:e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character}}):e._e()]):e._e(),e.steps[e.currentStep.id].allowSkip?a("div",{staticClass:"fixed-bottom-left q-pa-md font-standard"},[a("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},co=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bubble-top"},[a("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bubble-bottom"},[a("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],uo={props:["step","data","color"],data:function(){return{steps:{hint:{discussions:[{character:this.data&&this.data.character?this.data.character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:this.data.help,button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null,button:{label:"Yes"},button2:{label:"No",action:"closeall"}},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:this.data&&this.data.character?this.data.character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks",action:"close"}}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0,showCharacter:!0}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentStep.id=e.step,e.steps[e.currentStep.id]){t.next=4;break}return e.hideStory(),t.abrupt("return");case 4:return e.currentStep.discussionId=0,e.nextStep=e.step,e.hide=!1,e.moreToValidStep(),t.next=10,e.saveStepPassed();case 10:uu.setTimeout(e.checkIfTextIsHidden,500);case 11:case"end":return t.stop()}}),t)})))()},methods:{next:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.needToScroll=!1,!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")||!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.hasOwnProperty("action")){t.next=6;break}e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.action),uu.setTimeout(e.checkIfTextIsHidden,500),t.next=8;break;case 6:return t.next=8,e.closeStory();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:a=e.$refs.bubbleText.clientHeight,a>"140"&&(e.needToScroll=!0);case 4:case"end":return t.stop()}}),t)})))()},moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("nextStep")){t.next=5;break}return e.nextStep=e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].nextStep,e.$store.state.user.story.step=e.nextStep,t.next=5,Mt.nextStoryStep(e.nextStep);case 5:case"end":return t.stop()}}),t)})))()},skipTutorial:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,e.$q.dialog({title:e.$t("label.SkipTutorial"),message:e.$t("label.SkipTutorialDesc"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk((function(){e.nextStep=17,Mt.nextStoryStep(e.nextStep),e.$store.state.user.story.step=e.nextStep,e.hideStory()})).onCancel((function(){console.log("cancel"),e.hide=!1}));case 2:case"end":return t.stop()}}),t)})))()},closeStory:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveStepPassed();case 2:e.steps[e.currentStep.id].discussions.length-1>e.currentStep.discussionId?(e.currentStep.discussionId++,e.moreToValidStep()):e.hideStory();case 3:case"end":return t.stop()}}),t)})))()},hideStory:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,setTimeout(e.emitNext,500);case 2:case"end":return t.stop()}}),t)})))()},emitNext:function(){this.$emit("next",this.nextStep)},closeBubble:function(){},showCharacterPicture:function(){this.showCharacter=!0},linkAction:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action?e.hideStory():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},buttonAction:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.hideStory():"closeall"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.skipTutorial():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}},po=uo,mo=Object(tt["a"])(po,lo,co,!1,null,null,null),ho=mo.exports,go=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"geolocation-step-map"},[e.isMounted?a("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)}}},[e._l(e.position.target,(function(t,s){return e.position.target&&e.position.target.length>0?a("gmap-marker",{key:s,attrs:{position:t.coords,icon:e.getNextDestinationMapIcon(t.marker)}}):e._e()})),e.position.target&&e.position.target.coords&&!e.position.target.length?a("gmap-marker",{attrs:{position:{lng:e.position.target.coords.lng,lat:e.position.target.coords.lat},icon:e.getNextDestinationMapIcon(e.position.target.marker)}}):e._e(),e.position.player&&e.position.player.coords?a("gmap-marker",{attrs:{position:{lng:e.position.player.coords.longitude,lat:e.position.player.coords.latitude},icon:e.getUserMapIcon(e.position.player.marker)}}):e._e()],2):e._e()],1)},fo=[],bo={props:["targetPosition","playerPosition"],watch:{targetPosition:function(e,t){null!==e&&e!==t&&(this.position.target=e),this.reloadMap()},playerPosition:function(e,t){null!==e&&e!==t&&(this.position.player=e),this.reloadMap()}},data:function(){return{map:{zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},loaded:!1,positionned:!1},position:{player:{coords:{longitude:0,latitude:0},marker:""},target:{coords:{lng:0,lat:0}}},isMounted:!1}},computed:{google:Oa["gmapApi"]},mounted:function(){var e=this;this.$nextTick((function(){e.position.target=e.targetPosition,e.isMounted=!0,e.reloadMap(),e.position.player=e.playerPosition}))},methods:{getUserMapIcon:function(e){return console.log("-"+e+"-"),e&&""!==e?{url:e,size:{width:150,height:150,f:"px",b:"px"},scaledSize:{width:50,height:50,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:25,y:25}}:{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},getNextDestinationMapIcon:function(e){return e&&""!==e?{url:e,size:{width:150,height:150,f:"px",b:"px"},scaledSize:{width:50,height:50,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:25,y:25}}:{url:"statics/icons/game/target.png",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},reloadMap:function(){var e=this;this.map.loaded=null,this.$refs.mapRef?this.$refs.mapRef.$mapPromise.then((function(t){var a=new google.maps.LatLngBounds;if(e.targetPosition)if(e.targetPosition.length>0)for(var s=0;s<e.targetPosition.length;s++)a.extend(e.targetPosition[s].coords);else a.extend(e.targetPosition.coords);e.position.player&&e.position.player.coords&&a.extend({lng:e.position.player.coords.longitude,lat:e.position.player.coords.latitude}),t.fitBounds(a),e.map.positionned=!0})):(this.centerOnUserPosition(),this.map.loaded=!0),this.map.positionned||setTimeout(this.reloadMap,2e3)},centerOnUserPosition:function(){this.position.player&&this.position.player.coords&&(this.$data.map.center={lat:this.position.player.coords.latitude,lng:this.position.player.coords.longitude}),this.map.zoom=14},updateCenter:function(e){var t=e.lat(),a=e.lng();this.map.center.lat===t&&this.map.center.lng===a||(this.map.centerTmp={lng:a,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp}}},vo=bo,yo=Object(tt["a"])(vo,go,fo,!1,null,null,null),wo=yo.exports,qo=a("5a89"),xo=a("22b5"),Co=a("34ad"),So=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"image-over-flow"==e.step.type?a("div",{staticClass:"image-over-flow"},[a("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-image-over-flow",staticClass:"full-height full-width"}),a("div",[e.takingSnapshot?e._e():a("div",{staticStyle:{position:"absolute",bottom:"100px",right:"8px","z-index":"1990"}},[a("div",[e.step.options&&e.step.options.snapshotAllowed?a("q-btn",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"photo_camera"},on:{click:function(t){return e.prepareSnapshot()}}}):e._e()],1),a("div",{staticClass:"q-pt-md"},[a("q-btn",{staticClass:"text-white q-mr-sm",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"flip_camera_ios"},on:{click:function(t){return e.switchCamera()}}})],1)]),a("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{position:"absolute",top:"0",left:"0",height:"100vh",width:"100vw","z-index":"1980"},attrs:{id:"snapshotImage"}}),a("div",[""===e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():a("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!==e.getTranslatedText()&&e.step.options&&e.step.options.html?a("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),e.step.options&&(e.step.options.fullWidthPicture||e.step.options.redFilter||e.step.options.fullHeightPicture)?e._e():a("div",{ref:"ImageOverFlowPicture",staticClass:"image",style:"overflow: hidden; background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw; z-index: 1985;"}),e.step.options&&e.step.options.fullWidthPicture&&!e.step.options.redFilter?a("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",height:"100vh",width:"100vw","z-index":"1985"},attrs:{crossorigin:"anonymous",src:e.getBackgroundImage()}}):e._e(),e.step.options&&!e.step.options.fullWidthPicture&&e.step.options.fullHeightPicture&&!e.step.options.redFilter?a("img",{staticStyle:{position:"absolute",top:"50%",bottom:"0",height:"100vh",width:"auto","z-index":"1985",left:"50%","-webkit-transform":"translateY(-50%) translateX(-50%)"},attrs:{crossorigin:"anonymous",src:e.getBackgroundImage()}}):e._e(),e.isIOs&&""!==e.imageOverFlow.snapshot?a("img",{staticStyle:{"object-fit":"cover",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100vw",height:"100vh","z-index":"1970"},attrs:{src:e.imageOverFlow.snapshot}}):e._e(),(e.isIOs&&""!==e.imageOverFlow.snapshot||!e.isIOs)&&e.step.options&&e.step.options.redFilter?a("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1975","mix-blend-mode":"multiply",opacity:"0.8"},attrs:{src:"statics/images/background/red.png"}}):e._e(),e.isIOs&&e.step.options&&e.step.options.redFilter?a("div",{staticClass:"centered",staticStyle:{background:"transparent",position:"absolute",bottom:"200px",width:"100%","z-index":"1980"}},[a("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.takeVideoSnapShot()}}},[e._v(e._s(e.$t("label.ApplyRedFilter")))]),""!==e.imageOverFlow.snapshot?a("q-btn",{attrs:{flat:""},on:{click:function(t){return e.cancelTakeVideoSnapShot()}}},[e._v(e._s(e.$t("label.Cancel")))]):e._e()],1):e._e()])]):e._e()},ko=[],Po={drawImageProp:function(e,t,a,s,o,n,r,i){2===arguments.length&&(a=s=0,o=e.canvas.width,n=e.canvas.height),r="number"===typeof r?r:.5,i="number"===typeof i?i:.5,r<0&&(r=0),i<0&&(i=0),r>1&&(r=1),i>1&&(i=1);var l,c,u,d,p=t.naturalWidth,m=t.naturalHeight,h=Math.min(o/p,n/m),g=p*h,f=m*h,b=1;g<o&&(b=o/g),Math.abs(b-1)<1e-14&&f<n&&(b=n/f),g*=b,f*=b,u=p/(g/o),d=m/(f/n),l=(p-u)*r,c=(m-d)*i,l<0&&(l=0),c<0&&(c=0),u>p&&(u=p),d>m&&(d=m),e.drawImage(t,l,c,u,d,a,s,o,n)}},_o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{ref:"snapshotDialog",attrs:{persistent:"",maximized:"",position:"bottom"}},[a("q-card",{staticClass:"full-height"},[a("q-card-section",{staticClass:"row items-center q-pb-none q-mt-lg"},[a("div",{staticClass:"text-h6"}),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.onCancelClick}})],1),a("q-card-section",[a("q-img",{staticStyle:{"max-width":"80%","max-height":"80%",margin:"0 auto",display:"block"},attrs:{src:e.dataURL,"spinner-color":"white"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",label:e.$t("snapshot.share")},on:{click:e.shareWithFriend}}),a("q-btn",{style:e.color&&"primary"!==e.color&&""!==e.color?"background-color: "+e.color:"",attrs:{color:e.color&&"primary"!==e.color&&""!==e.color?"":"primary",label:e.$t("snapshot.save")},on:{click:e.saveAndDownload}})],1)],1)],1)},To=[],Io={name:"snapshotDialogComponent",props:["snapshotFilename","blob","quest","step","isHybrid","color","runId"],data:function(){return{dataURL:null,fileEntry:null,isIOs:uu.isIOS(),isSafari:uu.isSafari(),fileName:this.snapshotFilename}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.blobToBase64(e.blob);case 2:e.dataURL=t.sent,e.isHybrid&&e.createFileEntry();case 4:case"end":return t.stop()}}),t)})))()},methods:{saveAndDownload:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isHybrid){t.next=4;break}e.saveToGallery(e.blob),t.next=7;break;case 4:return t.next=6,uu.downloadDataUrl(e.dataURL,e.snapshotFilename);case 6:e.$q.notify({message:e.$t("snapshot.fileDownload"),color:"positive"});case 7:return t.next=9,e.saveSnapshotOnServer(e.blob,e.snapshotFilename);case 9:case"end":return t.stop()}}),t)})))()},shareWithFriend:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,new File([e.blob],"capture"+Date.now()+".jpg",{type:"image/jpeg"});case 3:s=t.sent,a.push(s),e.isHybrid?window.plugins.socialsharing.share(null,null,e.fileEntry.nativeURL,null,(function(){console.log("SUCCESS SHARE")}),(function(){console.log("ERROR SHARE")})):navigator.share&&navigator.canShare({files:a})?navigator.share({files:[s]}):e.$q.notify({message:e.$t("snapshot.notSupported"),color:"negative"});case 6:case"end":return t.stop()}}),t)})))()},saveToGallery:function(){var e=this,t=function(){e.$q.notify({message:e.$t("snapshot.imageSavedToGallery"),color:"positive"}),e.saveSnapshotOnServer(e.blob,e.snapshotFilename)},a=function(t){console.log(t),e.$q.notify({message:e.$t("snapshot.imageSavedFailed"),color:"negative"})};cordova.plugins.imagesaver.saveImageToGallery(this.fileEntry.nativeURL,t,a)},createFileEntry:function(){var e=this;window.resolveLocalFileSystemURL(cordova.file.dataDirectory,(function(a){var s=e.fileName.replace(/[-:]/g,"");t(a,s,e.blob)}));var t=function(e,t,s){e.getFile(t,{create:!0,exclusive:!1},(function(e){a(e,s)}),(function(e){console.log(e)}))},a=function(t,a){t.createWriter((function(s){s.onerror=function(e){console.log("Error on Write file"),console.log(e)},s.write(a),e.fileEntry=t}))}},saveSnapshotOnServer:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.quest.customization||!a.quest.customization.saveSelfieOnServer){s.next=14;break}return console.log("save to server"),s.prev=2,n=new FormData,n.append("image",e,t),s.next=7,is.uploadSnapshot(a.step.questId,a.runId,a.step.stepId,n);case 7:Jt(a.$t("label.SnapshotTaken"),"info"),s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](2),console.error(s.t0),Jt(a.$t("label.ErrorTakingSnapshot"),"error");case 14:case"end":return s.stop()}}),s,null,[[2,10]])})))()},blobToBase64:function(e){return new Promise((function(t,a){var s=new FileReader;s.onloadend=function(){return t(s.result)},s.readAsDataURL(e)}))},show:function(){this.$refs.snapshotDialog.show()},hide:function(){this.$refs.snapshotDialog.hide()},onCancelClick:function(){this.hide(),this.$emit("hide")}},beforeDestroy:function(){this.fileEntry=null,this.dataURL=null}},Ao=Io,$o=Object(tt["a"])(Ao,_o,To,!1,null,"03b9e6f7",null),Oo=$o.exports,Mo={name:"SuperImposeImageCameraStep",props:["quest","step","customization","runId"],data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",cameraStreamEnabled:!1,imageCapture:null,cameraUsed:"user",iOSCameraUsed:"",takingSnapshot:!1,isHybrid:window.cordova,isIOs:uu.isIOS(),isSafari:uu.isSafari(),imageOverFlow:{snapshot:""},backGroundImg:null}},methods:{switchCamera:function(){"environment"===this.cameraUsed?this.cameraUsed="user":this.cameraUsed="environment",this.isIOs&&CameraPreview?CameraPreview.switchCamera():(this.clearAllCameraStreams(),this.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0))},prepareSnapshot:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,i,l,c,u,d,p,m;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$q.loading.show(),setTimeout((function(){e.$q.loading.hide()}),5e3),e.takingSnapshot=!0,e.isIOs&&e.step.options&&e.step.options.redFilter||e.$emit("hideButtons"),a=document.getElementById("snapshotImage"),s=new Date,n=s.toISOString().substring(0,19).replace(":","-"),i="snapshot-".concat(n,".jpg"),t.prev=8,l=e.getScreenWidth(),c=e.getScreenHeight(),!e.isIOs||!CameraPreview){t.next=15;break}CameraPreview.takePicture({quality:85},(function(e){var t="data:image/jpeg;base64,"+e;a.src=t})),t.next=29;break;case 15:if(!e.isSafari){t.next=25;break}u=e.$refs["camera-stream-for-image-over-flow"],d=document.createElement("canvas"),d.width=u.videoWidth,d.height=u.videoHeight,p=d.getContext("2d"),p.drawImage(u,0,0,u.videoWidth,u.videoHeight),d.toBlob((function(e){a.src=URL.createObjectURL(e)}),"image/png"),t.next=29;break;case 25:return t.next=27,e.imageCapture.takePhoto();case 27:m=t.sent,a.src=URL.createObjectURL(m);case 29:a.onload=r()(o.a.mark((function t(){var s,n,u,d;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.createElement("canvas"),n=s.getContext("2d"),s.height=c,s.width=l,s.style.display="none",Po.drawImageProp(n,a),null==e.getBackgroundImage()){t.next=13;break}u=new Image,u.onload=r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{Po.drawImageProp(n,u)}catch(o){console.log("picture missing")}return t.next=3,new Promise((function(e){return s.toBlob(e,"image/jpeg")}));case 3:a=t.sent,e.takingSnapshot=!1,e.$q.loading.hide(),e.isHybrid?e.openDialog(!0,a,i,s):e.openDialog(!1,a,i,s);case 7:case"end":return t.stop()}}),t)}))),u.crossOrigin="anonymous",u.src=e.getBackgroundImage(),t.next=19;break;case 13:return t.next=15,new Promise((function(e){return s.toBlob(e,"image/jpeg")}));case 15:d=t.sent,e.takingSnapshot=!1,e.$q.loading.hide(),e.isHybrid?e.openDialog(!0,d,i,s):e.openDialog(!1,d,i,s);case 19:case"end":return t.stop()}}),t)}))),t.next=39;break;case 32:t.prev=32,t.t0=t["catch"](8),Jt(e.$t("label.SnapshotTakenIssue"),"error"),console.error(t.t0),console.log(t.t0.stack),e.$q.loading.hide(),e.$emit("showButtons");case 39:case"end":return t.stop()}}),t,null,[[8,32]])})))()},openDialog:function(e,t,a,s){var n=this;this.$q.dialog({component:Oo,parent:this,snapshotFilename:a,blob:t,isHybrid:e,quest:this.quest,step:this.step,runId:this.runId,color:this.customization&&this.customization.color&&""!==this.customization.color?this.customization.color:"primary"}).onCancel(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$emit("showButtons"),n.cancelTakeVideoSnapShot(),s.remove();case 3:case"end":return e.stop()}}),e)}))))},takeVideoSnapShot:function(){var e=this;CameraPreview.takePicture({quality:85},(function(t){e.imageOverFlow.snapshot="data:image/jpeg;base64,"+t}))},cancelTakeVideoSnapShot:function(){this.imageOverFlow.snapshot=""},launchVideoStreamForAndroid:function(e,t){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cameraUsed,o=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:s},audio:!1}).then((function(e){if(o.setAttribute("muted",!0),o.setAttribute("playsinline",!0),o.srcObject=e,o.play(),a.$store.dispatch("addMediaStream",e),a.cameraStreamEnabled=!0,t){var s=e.getVideoTracks()[0];a.imageCapture=new ImageCapture(s)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),o},launchVideoStreamForIphone:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:e.iOSCameraUsed?e.iOSCameraUsed:CameraPreview.CAMERA_DIRECTION.FRONT,toBack:!0,tapPhoto:!0,tapFocus:!1,previewDrag:!1,storeToFile:!1,disableExifHeaderStripping:!1},e.$q.loading.show(),setTimeout(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,CameraPreview.startCamera(a,(function(){setTimeout((function(){e.$q.loading.hide()}),1e3),e.cameraStreamEnabled=!0}),(function(){setTimeout((function(){e.$q.loading.hide()}),1e3)}));case 2:case"end":return t.stop()}}),t)}))),2e3);case 3:case"end":return t.stop()}}),t)})))()},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera((function(){console.log("CAMERA STOP")})):this.$store.dispatch("clearMediaStreams"),this.cameraStreamEnabled=!1},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,a=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",a.getMonth()+1+"."+a.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return e},getScreenHeight:function(){var e=window.innerHeight;return e},getBackgroundImage:function(){if(!this.step.backgroundImage)return null;var e=this.step.backgroundImage[this.lang]?this.step.backgroundImage[this.lang]:this.step.backgroundImage[this.quest.mainLanguage];return e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:null!=e?this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/background/"+e:null}},created:function(){},mounted:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isIOs||!CameraPreview){t.next=6;break}return e.step.options.cameraUsed&&"environment"==e.step.options.cameraUsed?e.iOSCameraUsed=CameraPreview.CAMERA_DIRECTION.BACK:e.iOSCameraUsed=CameraPreview.CAMERA_DIRECTION.FRONT,t.next=4,e.launchVideoStreamForIphone();case 4:t.next=9;break;case 6:return e.step.options.cameraUsed&&"environment"==e.step.options.cameraUsed?e.cameraUsed="environment":e.cameraUsed="user",t.next=9,e.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0);case 9:a=new Image,a.crossOrigin="anonymous",a.src=e.getBackgroundImage(),s=e,a.onload=function(){s.$refs["ImageOverFlowPicture"].style.backgroundImage="url("+this.src+")"};case 14:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.clearAllCameraStreams()}},zo=Mo,No=(a("6466"),Object(tt["a"])(zo,So,ko,!1,null,"ee48d852",null)),Ro=No.exports,jo=a("e7fc"),Do=(a("6e23"),{props:["step","runId","reload","itemUsed","lang","answer","nbTryAlreadyPlayed","customization","player","inventory","timer","quest","offline"],components:{holdphonevertically:io,gpscalibration:vs,geolocation:Lt,orientation:to,story:ho,geolocationStepMap:wo,qrCodeStream:Ya,SuperImposeImageCameraStep:Ro},watch:{reload:function(){var e=r()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),itemUsed:function(){var e=r()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.step&&"use-item"===this.step.type&&this.step.options&&this.step.options.hasOwnProperty("touchLocation")&&!1===this.step.options.touchLocation&&this.checkUseItem();case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){uu.setTimeout(this.checkIfDataAreInit,5e3)},updated:ws()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),beforeDestroy:function(){this.resetEvents()},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,imageCapture:null,takingSnapshot:!1,cameraUsed:"environment",serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,showNonHybridQRReader:!1,showGeolocationIssueMessage:!1,isIOs:uu.isIOS(),isSafari:uu.isSafari(),isPageInit:!1,isNetworkLow:!1,isTimeUp:!1,displaySuccessIcon:!1,rightAnswer:null,audio:{file:null,play:!0},noSensorFound:!1,character:{bubbleText:[],numberOfBubble:0,bubbleNumber:0,needToScroll:!1,show:!0},answerType:"text",playerCode:[],choose:{answers:[]},keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],showTools:!0,codeColors:{},geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},playerPosition:{coords:{longitude:0,latitude:0},marker:""},destinationPosition:[],target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:Bt["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1,gpsAccuracy:null,lowGpsAccuracyCeiling:15,lowGpsAccuracy:!1,lowCompassAccuracy:!1,persistentLowAccuracy:!1,persistentLowAccuracyTimeout:null,gpsAccuracyTimeout:null,showARHelp:!1,playerTouchedArObject:!1,currentIndex:0,foundStep:!1,mode:"compass",colorIndicator:"blue-2",closestDistance:100,isCalibrationWatched:!1,showText:!0},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:5},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationInterval:null},deviceHasGyroscope:null,locateMarker:{markerControls:{},playerAnswer:"",flash:!1,showHelp:!1},writetext:{playerAnswer:"",imageBelow:null},codeImage:{imageBelow:null},puzzle:{pieces:[],picture:"statics/icons/game/card-back.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},imageOverFlow:{snapshot:""},portrait:{face:{position:1,number:4},eye:{position:1,number:16},mouth:{position:1,number:1},nose:{position:1,number:5},hair:{position:1,number:26},beard:{position:1,number:31},glass:{position:1,number:5},hat:{position:1,number:4},type:"portrait-robot"},findItem:{nbItemsFound:0,crossSize:30,imageWidth:900,imageHeight:1200},useItem:{crossSize:30,imageWidth:900,imageHeight:1200},readMoreNotif:null,itemUsedComputed:null,mqttClient:null,bluetooth:{enabled:!1,deviceId:null},iotObject:null,iot:{distance:null,pot1:null,pot2:null,pot3:null,keypadAnswer:null,axisX:null,axisY:null,chest:{disableActionButtons:!1},relay:{disableActionButtons:!1}},story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null,pageReady:!1,countdowntimeleft:0}},resetData:function(){var e=this.initialState();this.playerResult=e.playerResult,this.stepPlayed=e.stepPlayed,this.cameraStreamEnabled=e.cameraStreamEnabled,this.imageCapture=e.imageCapture,this.takingSnapshot=e.takingSnapshot,this.nbTry=e.nbTry,this.score=e.score,this.reward=e.reward,this.controlsAreDisplayed=e.controlsAreDisplayed,this.isNetworkLow=e.isNetworkLow,this.isTimeUp=e.isTimeUp,this.displaySuccessIcon=e.displaySuccessIcon,this.character=e.character,this.playerCode=e.playerCode,this.geolocation=e.geolocation,this.deviceMotion=e.deviceMotion,this.locateMarker=e.locateMarker,this.writetext=e.writetext,this.codeImage=e.codeImage,this.puzzle=e.puzzle,this.choose=e.choose,this.memory=e.memory,this.portrait=e.portrait,this.nbItemsFound=e.nbItemsFound,this.readMoreNotif=e.readMoreNotif,this.itemUsedComputed=e.itemUsedComputed,this.mqttClient=e.mqttClient,this.bluetooth=e.bluetooth,this.iotObject=e.iotObject,this.iot=e.iot,this.story=e.story,this.enlargePicture=e.enlargePicture,this.latestRequestAnimationId=e.latestRequestAnimationId,this.countdowntimeleft=e.countdowntimeleft,this.pageReady=e.pageReady,this.showTools=e.showTools,this.rightAnswer=e.rightAnswer,this.audio=e.audio,this.showNonHybridQRReader=e.showNonHybridQRReader,this.showGeolocationIssueMessage=e.showGeolocationIssueMessage},resetEvents:function(){if(this.clearAllCameraStreams(),this.stopLatestAnimation(),window.removeEventListener("deviceorientation",this.checkPhoneVertically),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),null!==this.deviceMotion.idleAccelerationInterval&&clearInterval(this.deviceMotion.idleAccelerationInterval),xo["a"].removeAll(),null!==this.mqttClient){var e=this;this.mqttClient.end(!1,{},(function(){e.mqttClient=null}))}if(this.bluetooth.enabled&&this.bluetoothDisconnect(this.bluetooth.deviceId),this.step.countDownTime&&this.step.countDownTime.enabled||this.stopcountdown(),["geolocation","locate-item-ar"].includes(this.step.type)&&this.geolocation.isCalibrationWatched)try{cordova.plugins.headingcalibration.stopWatchCalibration(),this.geolocation.isCalibrationWatched=!1}catch(t){}},getBackgroundImage:function(){if(!this.step.backgroundImage)return"";var e=this.step.backgroundImage[this.lang]?this.step.backgroundImage[this.lang]:this.step.backgroundImage[this.quest.mainLanguage];return e&&"_"===e[0]?"statics/images/quest/"+e:e?-1!==e.indexOf("blob:")?e:this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/background/"+e:""},resetBackgroundImage:function(){return r()(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById("play-view");case 2:return t=e.sent,t.style.background="none",t.style.backgroundColor="transparent",document.body.style.background="none",document.body.style.backgroundColor="transparent",e.next=9,document.getElementById("background-image");case 9:a=e.sent,a&&(a.style.background="none",a.style.backgroundImage="none",a.style.backgroundColor="transparent");case 11:case"end":return e.stop()}}),e)})))()},initData:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resetEvents(),e.resetData(),e.isPageInit=!0,t.next=5,e.resetBackgroundImage();case 5:xo["a"].removeAll(),e.$nextTick(r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P,_,T,I,A;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=document.getElementById("play-view"),e.step.backgroundImage?"find-item"===e.step.type||"use-item"===e.step.type||"binocular"===e.step.type||"phone-call"===e.step.type?(a.style.background="none",a.style.backgroundColor="#000",e.showControls()):"image-over-flow"===e.step.type||"locate-marker"===e.step.type||"sensor"===e.step.id?(e.showControls(),a.style.background="none",a.style.backgroundColor="transparent",document.body.style.backgroundColor="transparent"):"jigsaw-puzzle"===e.step.type?(s=e.getBackgroundImage(),a.style.background='#fff url("'+s+'") center/cover no-repeat',e.showControls()):(n=e.getBackgroundImage(),r=document.getElementById("background-image"),r&&(n?r.style.background='#fff url("'+n+'") center/cover no-repeat':(r.style.background="transparent",document.body.style.background="none",document.body.style.backgroundColor="transparent")),e.step.options&&e.step.options.hasOwnProperty("initDuration")?uu.setTimeout(e.showControls,1e3*parseInt(e.step.options.initDuration,10)):uu.setTimeout(e.showControls,1e3)):(e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type&&"sensor"!==e.step.id&&"image-over-flow"!==e.step.type?(a.style.background="none",a.style.backgroundColor="#fff",document.body.style.backgroundColor="#323232"):(a.style.background="none",a.style.backgroundColor="transparent",document.body.style.backgroundColor="transparent","locate-item-ar"===e.step.type&&(i=document.getElementById("background-image"),i&&(i.style.background="none",i.style.backgroundColor="transparent"))),e.showControls()),e.getAudioSound(),e.resetDrawDirectionInterval(),e.resetSuccessIcon(),e.nbTry=e.nbTryAlreadyPlayed?e.nbTryAlreadyPlayed:0,l=e,"end-chapter"!==e.step.type&&"increment-counter"!==e.step.type||e.checkAnswer(),"choose"===e.step.type&&(e.answerType=Array.isArray(e.step.options.items)&&e.step.options.items[0].hasOwnProperty("imagePath")&&null!==e.step.options.items[0].imagePath?"image":"text"),"character"===e.step.type)if(e.step&&e.step.options&&e.step.options.multiple&&e.step.options.multiple.length>0){for(c=0;c<e.step.options.multiple.length;c++)for(u=e.step.options.multiple[c].text[e.lang].split("|"),d=0;d<u.length;d++)e.character.bubbleText.push({text:u[d],picture:e.step.options.multiple[c].picture,position:e.step.options.multiple[c].position});e.character.numberOfBubble=e.character.bubbleText.length,1===e.character.numberOfBubble&&e.checkAnswer()}else if(e.step.text&&""!==e.step.text){for(p=e.step.text.split("|"),m=0;m<p.length;m++)e.character.bubbleText.push({text:p[m],picture:e.step.options.character,position:"right"});e.character.numberOfBubble=e.character.bubbleText.length,1===e.character.numberOfBubble&&e.checkAnswer(),uu.setTimeout(e.checkIfTextIsHidden,1500)}else e.character.numberOfBubble=1,e.checkAnswer();if("code-keypad"===e.step.type&&e.resetKeypadCode(),"code-color"===e.step.type){if(e.step.options.colors)for(e.codeColors=[],h=0;h<e.step.options.colors.length;h++)e.codeColors.push(e.step.options.colors[h].value);else e.codeColors=Ys;e.resetColorCode()}if("code-image"===e.step.type&&(e.resetImageCode(),e.codeImage.imageBelow=e.step.options.imageBelow),"write-text"===e.step.type&&(e.writetext.imageBelow=e.step.options.imageBelow),"find-item"===e.step.type&&uu.setTimeout(e.initFindItemElements,600),"use-item"===e.step.type&&uu.setTimeout(e.initUseItemElements,600),"new-item"!==e.step.type){t.next=24;break}if(!e.step.options.hasOwnProperty("addInventoryAndPass")||!e.step.options.addInventoryAndPass){t.next=22;break}return t.next=20,e.checkAnswer();case 20:uu.setTimeout(e.forceNextStep,1e3),e.step.type="none";case 22:e.step.options.hasOwnProperty("pictures")&&e.step.options.pictures[e.lang]&&(e.step.options.picture=e.step.options.pictures[e.lang]),e.step.options.hasOwnProperty("titles")&&e.step.options.titles[e.lang]&&(e.step.options.title=e.step.options.titles[e.lang]);case 24:if("jigsaw-puzzle"!==e.step.type){t.next=28;break}return t.next=27,e.initPuzzle();case 27:e.$emit("pass");case 28:if("memory"===e.step.type&&(e.initMemory(),e.$emit("pass")),"binocular"===e.step.type&&(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&Jt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")),"phone-call"===e.step.type&&e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&Jt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),"portrait-robot"===e.step.type&&e.step.options&&e.step.options.customize&&(e.portrait=e.step.options.customize),"geolocation"===e.step.type&&(e.step.options.hasOwnProperty("mode")&&["compass","map"].includes(e.step.options.mode)?e.geolocation.mode=e.step.options.mode:e.geolocation.mode="compass",e.customization&&e.customization.characterOnMap&&""!==e.customization.characterOnMap&&(e.geolocation.playerPosition.marker=-1!==e.customization.characterOnMap.indexOf("blob:")?e.customization.characterOnMap:e.uploadUrl+"/upload/quest/"+e.customization.characterOnMap)),"gpssensor"===e.step.id){if(e.step.visibles&&e.step.visibles.length>0)for(e.geolocation.mode="map",h=0;h<e.step.visibles.length;h++)e.geolocation.destinationPosition.push({marker:-1!==e.step.visibles[h].marker.indexOf("blob:")||""===e.step.visibles[h].marker?e.step.visibles[h].marker:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/geolocation/"+e.step.visibles[h].marker,coords:e.step.visibles[h].coords});else e.geolocation.mode="sensor";e.customization&&e.customization.characterOnMap&&""!==e.customization.characterOnMap&&(e.geolocation.playerPosition.marker=-1!==e.customization.characterOnMap.indexOf("blob:")?e.customization.characterOnMap:e.uploadUrl+"/upload/quest/"+e.customization.characterOnMap)}if("geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type){t.next=61;break}if(e.noSensorFound=e.$refs["orientation-component"].noSensorFound,e.deviceHasGyroscope=e.$refs["orientation-component"].deviceHasGyroscope,!(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop)){t.next=41;break}"0"===e.runId?(Jt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")):(e.$emit("pass"),e.$emit("forceMoveNext")),t.next=58;break;case 41:if(e.$emit("pass"),e.deviceHasGyroscope&&window.addEventListener("devicemotion",e.handleMotionEvent,!0),"geolocation"!==e.step.type||!e.isHybrid||e.isIOs||e.isSafari||e.deviceHasGyroscope||Jt(e.$t("label.PleaseHoldYourDeviceFlat")),"locate-item-ar"!==e.step.type){t.next=58;break}if(e.isHybrid){t.next=50;break}return t.next=48,e.callPermissionsEvent();case 48:f=t.sent,console.log(f);case 50:return e.geolocation.showARHelp=e.$refs["geolocation-component"].isActive,t.next=53,uu.requestDeviceMotionPermission();case 53:if(g=t.sent,"granted"===g){t.next=57;break}return Jt(e.$t("label.PleaseAcceptDeviceMotionPermissionRequest"),"error"),t.abrupt("return");case 57:e.deviceHasGyroscope||Jt(e.$t("label.CouldNotEnableAR"),"warning");case 58:if(e.$store.dispatch("setDrawDirectionInterval",window.setInterval(e.drawDirectionArrow,100)),e.isHybrid&&!e.isIOs)try{cordova.plugins.headingcalibration.watchCalibration((function(t){e.geolocation.isCalibrationWatched=!0,t<=1?(l.geolocation.lowCompassAccuracy=!0,null!==l.geolocation.gpsAccuracyTimeout||l.geolocation.showCalibration||l.geolocation.persistentLowAccuracy||(l.geolocation.gpsAccuracyTimeout=uu.setTimeout((function(){l.step.options&&!0===l.step.options.hideAnimation||l.$refs.gpscal.askUserToCalibrateGPS(),null!==l.geolocation.gpsAccuracyTimeout&&(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===l.geolocation.persistentLowAccuracyTimeout&&(l.geolocation.persistentLowAccuracyTimeout=uu.setTimeout((function(){l.persistentLowAccuracy=!0,l.$emit("msg","suggestNext"),null!==l.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(l.geolocation.lowCompassAccuracy=!1,null===l.geolocation.gpsAccuracyTimeout||l.geolocation.lowGpsAccuracy||(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null,clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null,l.geolocation.persistentLowAccuracy=!1))}),(function(e){console.error("watch calibration: failure",e)}))}catch(o){console.log("calibration tests not working")}e.$refs["geolocation-component"].startTracking();case 61:if("locate-item-ar"!==e.step.type||e.playerResult){t.next=114;break}if(window.addEventListener("deviceorientation",e.checkPhoneVertically),!e.deviceHasGyroscope&&e.step.backgroundImage||(e.isIOs&&CameraPreview?(b={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!0,previewDrag:!1},CameraPreview.startCamera(b),CameraPreview.show()):e.launchVideoStreamForAndroid("camera-stream-for-locate-item-ar",!0)),v=document.getElementById("target-canvas"),e.geolocation.target={scene:new qo["Scene"],camera:new qo["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new qo["WebGLRenderer"]({canvas:v,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new qo["Clock"]},e.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),y=e.geolocation.target,w=y.scene,e.addDefaultLightTo3DScene(w),!e.step.options.is3D){t.next=84;break}return t.next=73,e.loadAndPrepare3DModel(e.step.options.customModel?e.step.options.customModel:e.step.options.model,e.step.questId,e.step.options.customModel||!1);case 73:C=t.sent,q=C.object,x=C.animations,S=(new qo["Box3"]).setFromObject(q),k=(S.max.z-S.min.z)/2,q.applyMatrix4((new qo["Matrix4"]).makeTranslation(0,0,k)),y.size=Math.max(S.max.x-S.min.x,S.max.y-S.min.y,S.max.z-S.min.z),x.length>0&&(P=new qo["AnimationMixer"](q),P.clipAction(x[0]).play(),e.geolocation.target.mixers.push(P)),e.geolocation.target.renderer.outputEncoding=qo["sRGBEncoding"],t.next=106;break;case 84:_="",_=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/locate-item-ar/"+e.step.options.picture,e.$refs["item-image"].src=_,y.size=e.step.options.objectSize||1,T=new qo["PlaneGeometry"](y.size,y.size),t.prev=89,I=(new qo["TextureLoader"]).load(_),I.anisotropy=0,I.magFilter=qo["NearestFilter"],I.minFilter=qo["NearestFilter"],t.next=101;break;case 96:return t.prev=96,t.t0=t["catch"](89),console.error("Error while loading image:",t.t0),Jt(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 101:A=new qo["MeshBasicMaterial"]({map:I}),A.transparent=!0,q=new qo["Mesh"](T,A),q.position.y=0,q.position.z=1.5;case 106:q.name="targetObject",q.up=new qo["Vector3"](0,0,1),q.visible=!1,w.add(q),e.geolocation.target.camera.up=new qo["Vector3"](0,0,1),e.geolocation.target.camera.lookAt(new qo["Vector3"](0,1,0)),e.geolocation.target.camera.position.z=1.5,e.animateTargetCanvas();case 114:if("image-over-flow"===e.step.type&&e.$emit("pass"),"locate-marker"!==e.step.type&&"sensor"!==e.step.id||e.playerResult||("sensor"===e.step.id?e.step.options={mode:"scan",layerCode:"magnifier"}:e.$emit("pass"),e.initQRCodes()),"wait-for-event"!==e.step.type&&"trigger-event"!==e.step.type){t.next=134;break}if(e.iotObject=e.getIotObjectFromCode(e.step.options.object),"keypad"===e.step.options.object&&(e.iot.keypadAnswer="_".repeat(e.step.options.answer.length)),"mqtt"!==e.step.options.protocol){t.next=126;break}e.mqttClient=jo["connect"]("wss://api.graaly.com:9001"),e.mqttClient.on("connect",(function(){console.log("Successfully connected to MQTT server wss://api.graaly.com:9001"),"wait-for-event"===l.step.type&&l.mqttClient.subscribe("Graaly",(function(e){e?console.error("Error when subscribing to topic Graaly:",e):console.log("Successfully subscribed to MQTT topic Graaly")}))})),e.mqttClient.on("error",(function(e){console.error("Error connecting to MQTT server wss://api.graaly.com:9001","connack=",e)})),"wait-for-event"===l.step.type&&e.mqttClient.on("message",(function(e,t){console.log("Received MQTT message (topic "+e+"): ",t.toString());try{t=JSON.parse(t)}catch(a){console.error("Could not read MQTT message. Error:",a)}t.macAddress===l.step.options.boardMacAddress&&(console.log("*** MAC ADDRESSES MATCHED ***",l.step.stepId),console.log("matching codes?",t.code,l.step.options.code),t.code===l.step.options.code&&(console.log("*** CODES MATCHED, CHECK ANSWER ***"),Jt(l.step.options.successMessage,"positive"),l.checkAnswer()))})),t.next=131;break;case 126:if("bluetooth"!==e.step.options.protocol){t.next=130;break}e.isHybrid?ble.enable(e.bluetoothEnableSuccess,e.bluetoothEnableFailure):console.warn("Webapp mode => no bluetooth support."),t.next=131;break;case 130:throw new Error("Unsupported IoT step protocol: "+e.step.options.protocol);case 131:e.$emit("pass"),t.next=136;break;case 134:null!==e.mqttClient&&e.mqttClient.end(!1,{},(function(){l.mqttClient=null})),e.bluetooth&&e.bluetooth.enabled&&e.bluetoothDisconnect(e.bluetooth.deviceId);case 136:if(!e.isTimerAvailable()){t.next=139;break}return t.next=139,e.startCountdown();case 139:case"end":return t.stop()}}),t,null,[[89,96]])}))));case 7:case"end":return t.stop()}}),t)})))()},callPermissionsEvent:function(){var e=this;return new Promise((function(t,a){"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?e.$q.dialog({title:e.$t("label.arDialogTitle"),message:e.$t("label.arDialogMessage"),persistent:!0}).onOk((function(){DeviceMotionEvent.requestPermission().then((function(e){console.log("devicePermissions",e),t(e)})).catch((function(e){return a(e)}))})).onCancel((function(){a(new Error("User canceled authorization for device motion event"))})).onDismiss((function(){a(new Error("User dismissed authorization for device motion event"))})):t()}))},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},initQRCodes:function(){for(var e=1;e<=60;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"help"!==this.step.type&&"image-over-flow"!==this.step.type&&"binocular"!==this.step.type&&"new-item"!==this.step.type&&"trigger-event"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},resetSuccessIcon:function(){this.step.options&&!this.step.options.successIcon&&(this.step.options.successIcon="thumb_up")},checkIfDataAreInit:function(){this.isPageInit||this.initData()},sendAnswer:function(e,t,a,s,n){var i=this;return r()(o.a.mark((function r(){var l,c,u,d,p,m;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i.offline){o.next=23;break}return n&&i.$q.loading.show(),l=i,c=uu.setTimeout((function(){l.isNetworkLow=!0}),8e3),o.next=6,is.checkAnswer(e,t,i.step.version,a,s,i.player,{retries:0});case 6:if(u=o.sent,clearTimeout(c),i.isNetworkLow=!1,!u||!u.data){o.next=16;break}return n&&i.$q.loading.hide(),d=u.data,"0"===i.runId&&(d.remainingTrial=i.step.nbTrial-i.nbTry-1),o.abrupt("return",d);case 16:return n&&i.$q.loading.hide(),o.next=19,i.checkOfflineAnswer(s.answer);case 19:return p=o.sent,o.abrupt("return",p);case 21:o.next=28;break;case 23:return is.checkAnswer(e,t,i.step.version,a,s,i.player,{retries:0}),o.next=26,i.checkOfflineAnswer(s.answer);case 26:return m=o.sent,o.abrupt("return",m);case 28:case"end":return o.stop()}}),r)})))()},checkOfflineAnswer:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l,c;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.step.type,"info-text"!==s&&"info-video"!==s&&"new-item"!==s&&"character"!==s&&"help"!==s&&"image-over-flow"!==s&&"binocular"!==s&&"phone-call"!==s){a.next=5;break}return a.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("geolocation"!==s&&"locate-item-ar"!==s&&"jigsaw-puzzle"!==s&&"gpssensor"!==t.step.id){a.next=9;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 9:if("use-item"!==s){a.next=25;break}if(!0!==t.isTimeUp){a.next=12;break}return a.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 12:if(!t.step.options||!t.step.options.hasOwnProperty("touchLocation")||!1!==t.step.options.touchLocation){a.next=17;break}if(t.answer.item!==e.item){a.next=15;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 15:a.next=23;break;case 17:if(n=e&&e.windowWidth?e.windowWidth:t.getFindItemPictureSize()/100,r={left:Math.round(t.answer.coordinates.left/100*100*n),top:Math.round(t.answer.coordinates.top/100*133*n)},i=Math.round(8*e.windowWidth),l=Math.sqrt(Math.pow(r.left-e.posX,2)+Math.pow(r.top-e.posY,2)),!(l<=i&&t.answer.item===e.item)){a.next=23;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 23:a.next=72;break;case 25:if("find-item"!==s){a.next=31;break}if(!0!==t.isTimeUp){a.next=28;break}return a.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 28:return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 31:if("write-text"!==s){a.next=41;break}c=0;case 33:if(!(c<t.answer.length)){a.next=39;break}if(uu.removeAccents(e)!==uu.removeAccents(t.answer[c])){a.next=36;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 36:c++,a.next=33;break;case 39:a.next=72;break;case 41:if("memory"!==s){a.next=45;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 45:if("portrait-robot"!==s){a.next=50;break}if(JSON.stringify(e)!==JSON.stringify(t.answer)){a.next=48;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 48:a.next=72;break;case 50:if("code-color"!==s){a.next=60;break}if(!t.step.options||!t.step.options.orderHaveNotToBeRespected){a.next=56;break}if(uu.orderCharactersOfString(e)!==uu.orderCharactersOfString(t.answer)){a.next=54;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 54:a.next=58;break;case 56:if(e!==t.answer){a.next=58;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 58:a.next=72;break;case 60:if("code-image"!==s){a.next=70;break}if(!t.step.options||!t.step.options.orderIsNotImportant){a.next=66;break}if(uu.orderCharactersOfString(e)!==uu.orderCharactersOfString(t.answer)){a.next=64;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 64:a.next=68;break;case 66:if(e!==t.answer){a.next=68;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 68:a.next=72;break;case 70:if(e!=t.answer){a.next=72;break}return a.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 72:if(!(!t.isTimeUp&&t.step.nbTrial&&t.step.nbTrial>0&&t.nbTry+1<t.step.nbTrial)){a.next=76;break}return a.abrupt("return",{result:!1,remainingTrial:t.step.nbTrial-t.nbTry-1,offline:!0});case 76:return a.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 77:case"end":return a.stop()}}),a)})))()},checkAnswer:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null===t.playerResult){a.next=3;break}return"locate-marker"===t.step.type&&Jt(t.$t("label.qrCodeAlreadyGood"),"info"),a.abrupt("return");case 3:if("sensor"!==t.step.id){a.next=9;break}if(t.locateMarker.markerControls[e]){a.next=7;break}return Jt(t.$t("label.QRCodeIsNotPlayingOne"),"error"),a.abrupt("return");case 7:return t.locateMarker.markerControls[e].detected?Jt(t.$t("label.qrCodeAlreadyScan"),"info"):(t.locateMarker.flash=!1,t.locateMarker.flash=!0,t.locateMarker.markerControls[e].detected=!0,t.$emit("played",e)),a.abrupt("return");case 9:if("gpssensor"!==t.step.id){a.next=15;break}return a.next=12,t.sendAnswer(t.step.questId,e.stepId,t.runId,{answer:e.position,isTimeUp:t.isTimeUp},!1);case 12:return s=a.sent,t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0,e.position,e.stepId),a.abrupt("return");case 15:a.t0=t.step.type,a.next="info-text"===a.t0||"info-video"===a.t0||"new-item"===a.t0||"help"===a.t0||"end-chapter"===a.t0||"increment-counter"===a.t0||"character"===a.t0||"image-over-flow"===a.t0||"binocular"===a.t0||"phone-call"===a.t0||"trigger-event"===a.t0?18:"choose"===a.t0?23:"geolocation"===a.t0?30:"code-keypad"===a.t0?35:"code-color"===a.t0?40:"code-image"===a.t0?45:"jigsaw-puzzle"===a.t0?50:"memory"===a.t0?55:"portrait-robot"===a.t0?60:"write-text"===a.t0?66:"use-item"===a.t0?72:"find-item"===a.t0?81:"locate-item-ar"===a.t0||"locate-marker"===a.t0?103:"wait-for-event"===a.t0?118:135;break;case 18:return a.next=20,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{},!1);case 20:return s=a.sent,t.submitGoodAnswer(0,s.offline,!1),a.abrupt("break",136);case 23:return e=t.choose.answers.sort(),n=e.join("|"),a.next=27,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:n,isTimeUp:t.isTimeUp},!0);case 27:if(s=a.sent,!0===s.result){for(r=0;r<e.length;r++)l=t.step.options.items[e[r]],!1!==t.step.displayRightAnswer||t.step.options.rightAnswerMessage&&t.step.options.rightAnswerMessage[t.lang]&&""!==t.step.options.rightAnswerMessage[t.lang]?(l.icon="done",l.class="right"):l.class="rightorwrong",i["a"].set(t.step.options.items,e[r],l);t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,n)}else{if(!t.isTimeUp)for(r=0;r<e.length;r++)c=t.step.options.items[e[r]],!1!==t.step.displayRightAnswer||t.step.options.rightAnswerMessage&&t.step.options.rightAnswerMessage[t.lang]&&""!==t.step.options.rightAnswerMessage[t.lang]?(c.icon="clear",c.class="wrong"):c.class="rightorwrong",i["a"].set(t.step.options.items,e[r],c);if(t.isTimeUp&&(s.remainingTrial=0),!0===t.step.displayRightAnswer&&(s.answer||0===s.answer)&&!s.remainingTrial)for(u=(s.answer+"").split("|"),r=0;r<u.length;r++)d=t.step.options.items[u[r]],d.icon="done",d.class="right",i["a"].set(t.step.options.items,u[r],d);t.increaseNbTry(),s.remainingTrial>0?t.submitRetry(s.remainingTrial):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,n)}return a.abrupt("break",136);case 30:return a.next=32,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 32:return s=a.sent,t.isTimeUp?t.submitWrongAnswer(s.offline,!0,e):!0===s.result&&t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0,e),a.abrupt("break",136);case 35:return a.next=37,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join(""),isTimeUp:t.isTimeUp},!0);case 37:return s=a.sent,!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,t.playerCode.join("")):(t.isTimeUp&&(s.remainingTrial=0),!0===t.step.displayRightAnswer&&(!s.answer&&0!==s.answer||s.remainingTrial||(t.rightAnswer=s.answer)),t.increaseNbTry(),s.remainingTrial>0?(t.resetKeypadCode(),t.submitRetry(s.remainingTrial)):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,t.playerCode.join(""))),a.abrupt("break",136);case 40:return a.next=42,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 42:return s=a.sent,!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(s.remainingTrial=0),!0===t.step.displayRightAnswer&&(!s.answer&&0!==s.answer||s.remainingTrial||(t.rightAnswer=s.answer.split("|"))),t.increaseNbTry(),s.remainingTrial>0?t.submitRetry(s.remainingTrial):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),a.abrupt("break",136);case 45:return a.next=47,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 47:return s=a.sent,!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(s.remainingTrial=0),!0===t.step.displayRightAnswer&&(!s.answer&&0!==s.answer||s.remainingTrial||(t.rightAnswer=s.answer.split("|"))),t.increaseNbTry(),s.remainingTrial>0?t.submitRetry(s.remainingTrial):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),a.abrupt("break",136);case 50:return a.next=52,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!(!0===t.isTimeUp),isTimeUp:t.isTimeUp},!0);case 52:return s=a.sent,!0===t.isTimeUp?t.submitWrongAnswer(s.offline,!0):!0===s.result&&t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0),a.abrupt("break",136);case 55:return a.next=57,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!(!0===t.isTimeUp),isTimeUp:t.isTimeUp},!1);case 57:return s=a.sent,!0===t.isTimeUp?t.submitWrongAnswer(s.offline,!0):!0===s.result&&t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0),a.abrupt("break",136);case 60:return p={items:{type:1,face:t.portrait.face?t.portrait.face.position:0,eye:t.portrait.eye?t.portrait.eye.position:0,mouth:t.portrait.mouth?t.portrait.mouth.position:0,nose:t.portrait.nose?t.portrait.nose.position:0,hair:t.portrait.hair?t.portrait.hair.position:0,beard:t.portrait.beard?t.portrait.beard.position:0,glass:t.portrait.glass?t.portrait.glass.position:0,hat:t.portrait.hat?t.portrait.hat.position:0}},a.next=63,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:p,isTimeUp:t.isTimeUp},!1);case 63:return s=a.sent,!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,JSON.stringify(p)):(t.isTimeUp&&(s.remainingTrial=0),t.increaseNbTry(),s.remainingTrial>0?t.submitRetry(s.remainingTrial):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,JSON.stringify(p))),a.abrupt("break",136);case 66:return t.writetext.playerAnswer=t.writetext.playerAnswer.trim(),a.next=69,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.writetext.playerAnswer,isTimeUp:t.isTimeUp},!0);case 69:return s=a.sent,!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer,t.writetext.playerAnswer):(t.isTimeUp&&(s.remainingTrial=0),!0===t.step.displayRightAnswer&&(!s.answer&&0!==s.answer||s.remainingTrial||(t.rightAnswer=s.answer[0])),t.increaseNbTry(),s.remainingTrial>0?(t.writetext.playerAnswer="",t.submitRetry(s.remainingTrial)):t.submitWrongAnswer(s.offline,t.step.displayRightAnswer,t.writetext.playerAnswer)),a.abrupt("break",136);case 72:return a.next=74,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 74:if(s=a.sent,!t.isTimeUp){a.next=79;break}if(t.inventory&&t.inventory.items&&Array.isArray(t.inventory.items)){a.next=78;break}throw new Error("Could not retrieve inventory items. Inventory content: ",t.inventory);case 78:Array.from(t.inventory.items).forEach((function(e){var a=e.originalPicture?e.originalPicture:e.picture;a===s.answer.item&&(t.itemUsedComputed=e)}));case 79:return!0===s.result?(t.step.displayRightAnswer&&t.showItemLocation(s.answer.coordinates.left,s.answer.coordinates.top),t.step.options&&t.step.options.altFile&&(t.step.backgroundImage[t.lang]=t.step.options.altFile),t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer)):(t.isTimeUp&&(s.remainingTrial=0),t.increaseNbTry(),s.remainingTrial>0?Jt(t.$t("label.UseItemNothingHappens"),"warning"):(t.step.displayRightAnswer&&t.showItemLocation(s.answer.coordinates.left,s.answer.coordinates.top),t.submitWrongAnswer(s.offline,t.step.displayRightAnswer))),a.abrupt("break",136);case 81:if(m=t.findItemIsFound(e),!m.all){a.next=90;break}return a.next=85,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!0,isTimeUp:t.isTimeUp},!0);case 85:s=a.sent,t.step.options&&t.step.options.altFile&&(t.step.backgroundImage[t.lang]=t.step.options.altFile,t.hideAllFindItemLocation()),t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,t.step.displayRightAnswer),a.next=102;break;case 90:if(h=t.isTimeUp?0:t.step.nbTrial-t.nbTry-1,m.one){a.next=102;break}if(t.increaseNbTry(),!(h>0)){a.next=97;break}t.step.options.wrongLocationMessage&&t.step.options.wrongLocationMessage[t.lang]&&""!==t.step.options.wrongLocationMessage[t.lang]?Jt(t.step.options.wrongLocationMessage[t.lang],"warning"):Jt(t.$t("label.FindItemNothingHappens"),"warning"),a.next=102;break;case 97:return a.next=99,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:!1,isTimeUp:t.isTimeUp},!0);case 99:s=a.sent,t.step.options&&t.step.options.altFile?(t.step.backgroundImage[t.lang]=t.step.options.altFile,t.hideAllFindItemLocation()):t.showAllFindItemLocation(),t.submitWrongAnswer(!1,t.step.displayRightAnswer);case 102:return a.abrupt("break",136);case 103:if(!("locate-item-ar"===t.step.type||"locate-marker"===t.step.type&&t.step.options&&"touch"===t.step.options.mode)){a.next=110;break}return a.next=106,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 106:s=a.sent,s&&s.hasOwnProperty("result")&&("locate-item-ar"===t.step.type&&(t.deviceHasGyroscope&&window.removeEventListener("devicemotion",t.handleMotionEvent,!0),window.removeEventListener("deviceorientation",t.checkPhoneVertically)),t.isIOs&&CameraPreview&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),xo["a"].removeAll(),"locate-item-ar"===t.step.type&&t.step.options&&t.step.options.is3D||"locate-marker"===t.step.type?(g="locate-item-ar"===t.step.type?t.geolocation.target:t.locateMarker,f=g.camera,b=g.scene.getObjectByName("targetObject"),b.visible=!0,v=(new qo["Box3"]).setFromObject(b),y=new qo["Vector3"],v.getSize(y),w=2*Math.max(y.x,y.y,y.z),q=Object.assign({},b.scale),x=new xo["a"].Tween(b.scale).to({x:0,y:0,z:0},1e3).easing(xo["a"].Easing.Back.In).onComplete((function(){f.position.set(0,0,2*w/3),f.lookAt(new qo["Vector3"](0,w,y.z/2)),b.scale.set(0,0,0),b.position.set(0,w,y.z/2),b.rotation.set(0,0,0),!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0):t.submitWrongAnswer(s.offline,!0)})),C=new xo["a"].Tween(b.scale).to({x:q.x,y:q.y,z:q.z},1e3).easing(xo["a"].Easing.Back.Out),S=new xo["a"].Tween(b.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),x.chain(C,S).start()):!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0):t.submitWrongAnswer(s.offline,!0)),a.next=117;break;case 110:if(k=!1,t.locateMarker.markerControls[e]&&!t.locateMarker.markerControls[e].detected?(t.locateMarker.markerControls[e].detected=!0,k=!0):Jt(t.$t("label.qrCodeAlreadyScan"),"info"),!k){a.next=117;break}return a.next=115,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 115:s=a.sent,!0===s.result?(t.submitGoodAnswer(s.score,s.offline,!0),t.locateMarker.playerAnswer=e):(t.increaseNbTry(),2===t.nbTry||t.isTimeUp?t.submitWrongAnswer(s.offline,!0):t.submitRetry(1));case 117:return a.abrupt("break",136);case 118:return a.next=120,t.stopBluetoothNotification();case 120:return a.next=122,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 122:if(s=a.sent,t.isTimeUp?t.submitWrongAnswer(s.offline,!0):!0===s.result?t.submitGoodAnswer(s&&s.score?s.score:0,s.offline,!0):Jt(t.$t("label.TechnicalIssue"),"error"),"mqtt"!==t.step.options.protocol){a.next=129;break}P=t,t.mqttClient.end(!1,{},(function(){P.mqttClient=null})),a.next=134;break;case 129:if("bluetooth"!==t.step.options.protocol){a.next=133;break}t.bluetoothDisconnect(t.bluetooth.deviceId),a.next=134;break;case 133:throw new Error("Unknown IoT protocol '"+t.step.options.protocol+"'");case 134:return a.abrupt("break",136);case 135:console.log("checkAnswer(): Step type "+t.step.type+" not supported.");case 136:t.score=s&&s.score?s.score:0,t.reward=s&&s.reward?s.reward:0;case 138:case"end":return a.stop()}}),a)})))()},increaseNbTry:function(){this.nbTry++,this.$emit("retry",!0,this.nbTry)},submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),uu.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,a,s,o){if(this.playerResult=!0,void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled){var n=this.getStepType(this.step.type);"enigma"===n.category&&(this.step.countDownTime.enabled=!1,this.stopcountdown())}if(this.stepPlayed=!0,this.$emit("success",e,t,a,s,o),this.$emit("played"),a||this.step.options&&this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang])switch(this.step.type){case"character":case"new-item":case"info-text":case"help":case"end-chapter":case"increment-counter":case"info-video":case"image-over-flow":case"binocular":case"phone-call":break;case"choose":case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"),!0,!1,!0);break;case"write-text":case"jigsaw-puzzle":case"memory":case"portrait-robot":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"),!0,!1,!0);break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem"),!0,!1,!0):this.displaySuccessMessage(!0,this.$t("label.WellDone"),!0,!1,!0);break;case"wait-for-event":this.displaySuccessMessage(!0,this.$t("label.WellDone"),!0,!1,!0);break}this.displayReadMoreAlert(),!1!==this.step.displayRightAnswer||this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang]||this.forceNextStep(),this.step.options&&this.step.options.moveToNextStepAutomatically&&(this.step.options.moveToNextStepAutomaticallyDuration?uu.setTimeout(this.forceNextStep,1e3*parseInt(this.step.options.moveToNextStepAutomaticallyDuration,10)):uu.setTimeout(this.forceNextStep,3e3))},submitWrongAnswer:function(e,t,a){this.step.countDownTime&&(this.step.countDownTime.enabled=!1,this.stopcountdown()),this.playerResult=!1,this.stepPlayed=!0,this.$emit("fail",e,t,a),this.$emit("played"),!0===this.isTimeUp?this.displaySuccessMessage(!1,this.$t("label.CountDownPopupfail"),!1,!1,!0):(t||this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang])&&this.displaySuccessMessage(!1,this.$t("label.WrongAnswer"),!0,!1,!0),this.displayReadMoreAlert(),!1!==this.step.displayRightAnswer||this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang]?this.step.options&&this.step.options.moveToNextStepAutomatically?uu.setTimeout(this.forceNextStep,3e3):uu.setTimeout(this.alertToPassToNextStep,15e3):this.forceNextStep()},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"),!1,!1,!1)},displayReadMoreAlert:function(){var e=this;if(this.step.extraText){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=Jt("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(e){e>40?this.displaySuccessMessage(!1,this.$t("label.WrongAnswer"),!0,!1,!1):1===e?this.displaySuccessMessage(!1,this.$t("label.SecondTryOnTry",{nb:e}),!1,!1,!1):this.displaySuccessMessage(!1,this.$t("label.SecondTry",{nb:e}),!1,!1,!1)},forceNextStep:function(){this.$emit("forceMoveNext")},nextCharacterBubbleText:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.character.bubbleNumber<e.character.numberOfBubble-1&&(e.character.bubbleText[e.character.bubbleNumber].position!=e.character.bubbleText[e.character.bubbleNumber+1].position&&(e.character.show=!1),e.character.bubbleNumber++,e.character.needToScroll=!1,uu.setTimeout(e.checkIfTextIsHidden,500)),!(e.character.bubbleNumber>=e.character.numberOfBubble-1)){t.next=8;break}if(e.stepPlayed){t.next=7;break}return t.next=5,e.checkAnswer();case 5:t.next=8;break;case 7:e.forceNextStep();case 8:a=e,uu.setTimeout((function(){a.character.show=!0}),150);case 10:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:a=e.$refs.bubbleText?e.$refs.bubbleText.clientHeight:0,s=e.$refs.bubbleTextHtml?e.$refs.bubbleTextHtml.clientHeight:0,n=Math.max(a,s),n>"177"&&(e.character.needToScroll=!0);case 6:case"end":return t.stop()}}),t)})))()},chooseSelectValue:function(e){this.step.options&&this.step.options&&this.step.options.multipleAnswers?-1===this.choose.answers.indexOf(e)?(i["a"].set(this.step.options.items[e],"class","right"),this.choose.answers.push(e)):(i["a"].set(this.step.options.items[e],"class",""),this.choose.answers.splice(this.choose.answers.indexOf(e),1)):(this.choose.answers=[e],this.checkAnswer(e))},resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(this.codeColors[0])},resetImageCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;if(this.step.options&&!this.step.options.displaySameDefaultImage)this.playerCode=Array(e).fill(0);else{this.playerCode.length=0;for(var t=0,a=this.getNbImageUploadedForCode(),s=0;s<(this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4);s++)this.playerCode.push(t),t<a-1?t++:t=0,this.forceImageRefresh(s)}},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e),this.$forceUpdate()},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e),this.$forceUpdate()},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options[this.lang].images[this.playerCode[e]].imagePath&&-1!==this.step.options[this.lang].images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options[this.lang].images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options[this.lang].images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options[this.lang].images.length;t++)this.step.options[this.lang].images[t]&&this.step.options[this.lang].images[t].imagePath&&e++;return e},addCodeChar:function(e){if(this.playerCode){var t=this.playerCode.indexOf("");-1!==t&&i["a"].set(this.playerCode,t,e)}},clearLastCodeChar:function(){if(this.playerCode){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||i["a"].set(this.playerCode,e,"")}},changeColorForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),a=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[a])}},changeImageForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),a=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[a])}},launchVideoStreamForAndroid:function(e,t,a){var s=this;a||(a=this.cameraUsed);var o=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:a},audio:!1}).then((function(e){if(o.setAttribute("muted",!0),o.setAttribute("playsinline",!0),o.srcObject=e,o.play(),s.cameraStreamEnabled=!0,s.$store.dispatch("addMediaStream",e),t){var a=e.getVideoTracks()[0];s.imageCapture=new ImageCapture(a)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),o},stopVideoTracks:function(e){this.$refs[e]&&this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),a=e.width,s=e.height,o=Math.round(a/2),n=Math.round(s/2);t.save(),t.clearRect(0,0,a,s),t.translate(o,n),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,this.customization&&this.customization.color&&""!==this.customization.color?(t.fillStyle=this.customization.color,t.strokeStyle=this.customization.color):(t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor),t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),s>25&&t.arc(0,0,Math.round(s/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(uu.degreesToRadians(this.geolocation.direction));var r=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(s/2.5)),t.lineTo(-20,45-Math.round(s/2.5)),t.lineTo(-r,45-Math.round(s/2.5)),t.lineTo(-r,Math.round(s/2.5)-25),t.lineTo(r,Math.round(s/2.5)-25),t.lineTo(r,45-Math.round(s/2.5)),t.lineTo(20,45-Math.round(s/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l,c,u,d,p,m,h,g,f,b,v;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("gpssensor"!==t.step.id&&"map"!==t.step.id){a.next=24;break}t.geolocation.gpsAccuracy=e.coords.accuracy,t.geolocation.playerPosition.coords=e.coords,t.geolocation.active=!0,s=e.coords,n=1e3,r=5,i=0;case 8:if(!(i<t.step.locations.length)){a.next=20;break}if(l={lat:t.step.locations[i].lat,lng:t.step.locations[i].lng},t.geolocation.GPSdistance=1e3*uu.distanceInKmBetweenEarthCoordinates(l.lat,l.lng,s.latitude,s.longitude),n=Math.min(n,parseInt(t.geolocation.GPSdistance,10)),r=t.step.locations[i].distance?t.step.locations[i].distance:5,!(t.geolocation.GPSdistance<=r)){a.next=17;break}return t.geolocation.active=!1,a.next=17,t.checkAnswer({stepId:t.step.steps[i],position:s});case 17:i++,a.next=8;break;case 20:t.geolocation.closestDistance=n,t.updateDistanceIndicatorColor(n),a.next=68;break;case 24:if("geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type||null!==t.playerResult||t.geolocation.playerTouchedArObject){a.next=68;break}if(t.geolocation.gpsAccuracy=e.coords.accuracy,t.geolocation.active=!0,t.geolocation.playerPosition.coords=e.coords,c=e.coords,0===t.step.options.lat&&parseInt(t.step.options.lng,10)===t.step.options.lng&&(0===t.step.options.lng?"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+5e-5,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+5e-4,t.step.options.lng=c.longitude+5e-4):"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+1e-5*t.step.options.lng,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+1e-4*t.step.options.lng,t.step.options.lng=c.longitude+1e-4*t.step.options.lng)),u=t.step.options,"undefined"!==typeof u){a.next=34;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),a.abrupt("return");case 34:if(t.geolocation.gpsAccuracy>t.geolocation.lowGpsAccuracyCeiling?(t.geolocation.lowGpsAccuracy=!0,d=t,null!==t.geolocation.gpsAccuracyTimeout||t.geolocation.showCalibration||t.geolocation.persistentLowAccuracy||(t.geolocation.gpsAccuracyTimeout=uu.setTimeout((function(){d.step.options&&!0===d.step.options.hideAnimation||d.$refs.gpscal.askUserToCalibrateGPS(),null!==d.geolocation.gpsAccuracyTimeout&&(clearTimeout(d.geolocation.gpsAccuracyTimeout),d.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===t.geolocation.persistentLowAccuracyTimeout&&(t.geolocation.persistentLowAccuracyTimeout=uu.setTimeout((function(){t.geolocation.persistentLowAccuracy=!0,t.$emit("msg","suggestNext"),null!==t.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(t.geolocation.lowGpsAccuracy=!1,null===t.geolocation.gpsAccuracyTimeout||t.geolocation.lowCompassAccuracy||(clearTimeout(t.geolocation.gpsAccuracyTimeout),t.geolocation.gpsAccuracyTimeout=null,clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null,t.geolocation.persistentLowAccuracy=!1)),p={lat:u.lat,lng:u.lng},"geolocation"===t.step.type&&u.locations&&u.locations.length>0&&(p.lat=u.locations[t.geolocation.currentIndex].lat,p.lng=u.locations[t.geolocation.currentIndex].lng),t.geolocation.destinationPosition={coords:p},t.step.options.locator&&""!==t.step.options.locator&&(t.geolocation.destinationPosition.marker=-1!==t.step.options.locator.indexOf("blob:")?t.step.options.locator:t.uploadUrl+"/upload/quest/"+t.step.questId+"/step/geolocation/"+t.step.options.locator),t.geolocation.GPSdistance=1e3*uu.distanceInKmBetweenEarthCoordinates(p.lat,p.lng,c.latitude,c.longitude),m=uu.bearingBetweenEarthCoordinates(c.latitude,c.longitude,p.lat,p.lng),t.geolocation.rawDirection=m,h=uu.degreesToRadians(m),t.deviceHasGyroscope||(h=0,g=2+(null!==t.geolocation.target?t.geolocation.target.size:0),t.geolocation.GPSdistance=Math.max(g,t.geolocation.GPSdistance)),t.deviceMotion.isAccelerationIdle||(t.geolocation.position.x=Math.sin(h)*t.geolocation.GPSdistance,t.geolocation.position.y=Math.cos(h)*t.geolocation.GPSdistance),"locate-item-ar"!==t.step.type||null===t.geolocation.target||null===t.geolocation.target.scene){a.next=55;break}if(f=t.geolocation.target,b=f.scene,v=b.getObjectByName("targetObject"),t.geolocation.canSeeTarget=null===f.size||t.geolocation.GPSdistance<40*f.size,"undefined"!==typeof v){a.next=52;break}return a.abrupt("return");case 52:v.visible||(v.position.x=t.geolocation.position.x,v.position.y=t.geolocation.position.y,v.visible=!0),new xo["a"].Tween(v.position).to({x:t.geolocation.position.x,y:t.geolocation.position.y},1e3).easing(xo["a"].Easing.Quadratic.InOut).start(),t.updatePlayerCanTouchTarget();case 55:if("geolocation"!==t.step.type||t.stepPlayed||!(u.distance&&t.geolocation.GPSdistance<=parseInt(u.distance,10)||!u.distance&&t.geolocation.GPSdistance<=20)){a.next=68;break}if(!(u.locations&&u.locations.length>0&&t.geolocation.currentIndex+1<u.locations.length)){a.next=63;break}Jt(t.$t("label.CheckpointReached"),"info"),t.geolocation.foundStep=!1,t.geolocation.foundStep=!0,t.geolocation.currentIndex++,a.next=68;break;case 63:return t.stepPlayed=!0,t.geolocation.active=!1,t.resetDrawDirectionInterval(),a.next=68,t.checkAnswer(c);case 68:case"end":return a.stop()}}),a)})))()},onUserPositionError:function(e){console.error("UserPositionError",e)},updateDistanceIndicatorColor:function(e){var t=this.getColorIndicator(10);e<100&&(t=this.getColorIndicator(9)),e<50&&(t=this.getColorIndicator(8)),e<40&&(t=this.getColorIndicator(7)),e<30&&(t=this.getColorIndicator(6)),e<20&&(t=this.getColorIndicator(5)),e<17&&(t=this.getColorIndicator(4)),e<15&&(t=this.getColorIndicator(3)),e<13&&(t=this.getColorIndicator(2)),e<10&&(t=this.getColorIndicator(1)),this.geolocation.colorIndicator=t},getColorIndicator:function(e){var t=["red-7","red-4","red-3","red-2","red-1","blue-1","blue-2","blue-3","blue-4","blue-5"];return t[e-1]},switchModeForGeolocationStep:function(){"compass"===this.geolocation.mode?this.geolocation.mode="map":this.geolocation.mode="compass"},getGeolocationStepSwitchButtonIcon:function(){return"compass"===this.geolocation.mode?"map":"explore"},checkUseItem:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0!==t.playerResult){a.next=2;break}return a.abrupt("return");case 2:if(null!==t.itemUsed){a.next=6;break}return Jt(t.$t("label.PleaseSelectAnItemFirst"),"error"),t.$emit("msg","suggestInventory"),a.abrupt("return");case 6:return s=t.getUseItemPictureSize()/100,n={windowWidth:s,item:t.itemUsed.originalPicture?t.itemUsed.originalPicture:t.itemUsed.picture},e&&(n.posX=e.offsetX,n.posY=e.offsetY),a.next=11,t.checkAnswer(n);case 11:case"end":return a.stop()}}),a)})))()},showItemLocation:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i,l,c,u,d;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=a.getUseItemPictureSize()/100,r={left:Math.round(e/100*100*n),top:Math.round(t/100*133*n)},i=a.useItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=r.top-i+"px",l.style.left=r.left-i+"px",l.style.display="block",c=l.src,u=null!==a.itemUsedComputed?a.itemUsedComputed:a.itemUsed,d=a,uu.setInterval((function(){l.src===c&&d.step.answers&&d.step.answers.item?(u.pictures&&u.pictures[d.lang]&&""!==u.pictures[d.lang]?l.src=u.picture.indexOf("statics/")>-1||-1!==u.picture.indexOf("blob:")?u.picture:d.uploadUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+u.picture:l.src=d.step.answers.item.indexOf("statics/")>-1||-1!==d.step.answers.item.indexOf("blob:")?d.step.answers.item:d.uploadUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+d.step.answers.item,l.style.borderRadius="50%"):(l.src=c,l.style.borderRadius="0")}),1e3);case 11:case"end":return s.stop()}}),s)})))()},initUseItemElements:function(){this.useItem.imageWidth=this.getUseItemPictureSize(),this.useItem.crossSize=this.useItem.imageWidth/8,this.useItem.imageHeight=4*this.useItem.imageWidth/3},getUseItemPictureSize:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},checkFindItem:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0!==t.playerResult){a.next=2;break}return a.abrupt("return");case 2:return s=t.getFindItemPictureSize()/100,n={windowWidth:s,posX:e.offsetX,posY:e.offsetY},a.next=6,t.checkAnswer(n);case 6:case"end":return a.stop()}}),a)})))()},initFindItemElements:function(){this.findItem.imageWidth=this.getFindItemPictureSize(),this.findItem.crossSize=this.findItem.imageWidth/8,this.findItem.imageHeight=4*this.findItem.imageWidth/3},getFindItemPictureSize:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},prepareSnapshot:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,i,l,c,u,d,p,m,h;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.takingSnapshot=!0,e.$q.loading.show(),e.$emit("hideButtons"),a=e,s=document.getElementById("snapshotImage"),n=new Date,i=n.toISOString().substring(0,19).replaceAll(":","-"),l="snapshot-".concat(i,".jpg"),t.prev=8,c=a.getScreenWidth(),u=a.getScreenHeight(),!e.isIOs||!CameraPreview){t.next=17;break}return Jt(a.$t("label.SnapshotManualOnIOs"),"error"),e.$q.loading.hide(),t.abrupt("return",!1);case 17:if(!e.isSafari){t.next=27;break}d=a.$refs["camera-stream-for-image-over-flow"],p=document.createElement("canvas"),p.width=d.videoWidth,p.height=d.videoHeight,m=p.getContext("2d"),m.drawImage(d,0,0,d.videoWidth,d.videoHeight),p.toBlob((function(e){s.src=URL.createObjectURL(e)}),"image/png"),t.next=31;break;case 27:return t.next=29,e.imageCapture.takePhoto();case 29:h=t.sent,s.src=URL.createObjectURL(h);case 31:s.onload=r()(o.a.mark((function e(){var t,n,i,d;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.$q.loading.hide(),t=document.createElement("canvas"),n=t.getContext("2d"),t.height=u,t.width=c,t.style.display="none",draw.drawImageProp(n,s),i=a.$refs["imageOverflowForCapture"],draw.drawImageProp(n,i),!a.isHybrid){e.next=13;break}a.isIOs&&CameraPreview||(console.log("Save picture in Android Library"),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(e){e.root.getDirectory("Graaly",{create:!0},(function(e){e.getFile(l,{create:!0,exclusive:!1},(function(e){e.createWriter(function(){var e=r()(o.a.mark((function e(s){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return t.toBlob(e,"image/jpeg")}));case 2:d=e.sent,s.onwriteend=function(){var e=r()(o.a.mark((function e(s){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.remove(),e.next=3,a.saveSnapshotOnServer(d,l);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.onerror=function(e){console.error("Failed file write: ",e)},s.write(d);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),(function(e){Jt(a.$t("label.TechnicalIssue"),"error"),console.error("Could not create snapshot file on device filesystem",e)}))}),(function(e){Jt(a.$t("label.TechnicalIssue"),"error"),console.error("Could not access Graaly directory on device filesystem",e)}))}),(function(e){Jt(a.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",e)}))),e.next=17;break;case 13:return e.next=15,new Promise((function(e){return t.toBlob(e,"image/jpeg")}));case 15:d=e.sent,a.$q.dialog({component:snapshotDialogComponent,parent:a,snapshotFilename:l,canvas:t,blob:d}).onCancel(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.$emit("showButtons"),a.takingSnapshot=!1,e.next=4,a.saveSnapshotOnServer(d,l);case 4:t.remove();case 5:case"end":return e.stop()}}),e)}))));case 17:case"end":return e.stop()}}),e)}))),t.next=41;break;case 34:t.prev=34,t.t0=t["catch"](8),Jt(a.$t("label.SnapshotTakenIssue"),"error"),console.error(t.t0),console.log(t.t0.stack),e.$q.loading.hide(),e.$emit("showButtons");case 41:case"end":return t.stop()}}),t,null,[[8,34]])})))()},takeIOsSnapshot:function(){var e=this;this.$q.loading.hide(),navigator.screenshot.save((function(t,a){if(t)console.error(t),Jt(e.$t("label.ErrorTakingSnapshot"),"info");else{var s=cordova.plugins.permissions;s.requestPermission(s.READ_EXTERNAL_STORAGE,(function(t){t.hasPermission?e.saveIOsSnapshot(a):Jt(e.$t("label.ErrorTakingSnapshot"),"info")}),alert)}e.takingSnapshot=!1,e.$emit("showButtons")}))},saveIOsSnapshot:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,new Promise((function(t){return window.resolveLocalFileSystemURL("file://"+e.filePath,t,(function(e){console.log("Error "+e)}))}));case 3:return s=a.sent,a.next=6,new Promise((function(e,t){return s.file((function(t){var a=new FileReader;a.onloadend=function(t){e(a.result)},a.readAsArrayBuffer(t)}))}));case 6:return n=a.sent,r=new Blob([new Uint8Array(n)],{type:"image/jpg"}),i=new FormData,i.append("image",r),a.next=12,is.uploadSnapshot(t.step.questId,t.runId,t.step._id,i);case 12:a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),Jt(t.$t("label.ErrorTakingSnapshot"),"error"),console.log("Error: "+a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},saveSnapshotOnServer:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.quest.customization||!a.quest.customization.saveSelfieOnServer){s.next=15;break}return s.prev=1,n=new FormData,n.append("image",e,t),s.next=6,is.uploadSnapshot(a.step.questId,a.runId,a.step._id,n);case 6:Jt(a.$t("label.SnapshotTaken"),"info"),s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](1),console.error(s.t0),Jt(a.$t("label.ErrorTakingSnapshot"),"error");case 13:s.next=15;break;case 15:a.takingSnapshot=!1,a.$emit("showButtons");case 17:case"end":return s.stop()}}),s,null,[[1,9]])})))()},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,a=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",a.getMonth()+1+"."+a.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return e},getScreenHeight:function(){var e=window.innerHeight;return e},showFoundLocation:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i,l;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=a.getFindItemPictureSize()/100,r={left:Math.round(e/100*100*n),top:Math.round(t/100*133*n)},i=a.findItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=r.top-i+"px",l.style.left=r.left-i+"px",l.style.display="block";case 7:case"end":return s.stop()}}),s)})))()},checkPuzzle:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.comparePuzzlePiecePositions(),a&&e.checkAnswer(),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})))()},comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d,p,m,h,g;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.step.options.picture&&e.step.options.picture[e.lang]?e.step.options.picture[e.lang]:e.step.options.picture[e.quest.mainLanguage],s=a&&-1!==a.indexOf("blob:")?a:a&&-1===a.indexOf("upload/")?e.uploadUrl+"/upload/quest/"+e.step.questId+"/step/jigsaw-puzzle/"+a:e.uploadUrl+a,t.next=4,uu.loadImage(s);case 4:for(e.puzzle.picture=s,n=parseInt(e.step.options.level||2,10),r=e.puzzle.colsByLevel[n],i=Math.pow(r,2),l=document.getElementById("pieces").clientWidth-1,c=l,u=Math.floor(c/r),d=Math.floor(l/r),p=0;p<i;p++)m=d*(p%r)+"px",h=u*Math.floor(p/r)+"px",e.puzzle.pieces[p]={pos:p,backSize:100*r,backXPos:m,backYPos:h,width:d,height:u,classes:"piece"};g=!0;while(g)e.puzzle.pieces=e.shuffle(e.puzzle.pieces),g=e.comparePuzzlePiecePositions();return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})))()},shuffle:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[a],e[a]=s}return e},handleDragStart:function(e){if(this.puzzle&&"drag"===this.puzzle.mode)return e.target.className&&-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0;this.puzzle.dragSrcEl=null,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},handleDragOver:function(e){this.puzzle&&"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),a=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(a,t)}return!0}},switchPieces:function(e,t){var a=0,s=0;if(t!==e){for(var o=0;o<this.puzzle.pieces.length;o++)this.puzzle.pieces[o].pos===t&&(a=o),this.puzzle.pieces[o].pos===e&&(s=o);var n=this.puzzle.pieces[a];i["a"].set(this.puzzle.pieces,a,this.puzzle.pieces[s]),i["a"].set(this.puzzle.pieces,s,n),this.checkPuzzle()}},changePuzzleMode:function(){this.puzzle&&"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if(this.puzzle.dragSrcEl=null,this.puzzle&&"click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var a=this.puzzle.pieces[t];i["a"].set(this.puzzle.pieces,t,a)}}else{if(this.puzzle.clickModeSelected===e)return;for(var s=0;s<this.puzzle.pieces.length;s++)this.puzzle.pieces[s].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var a=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!a.single||t<this.step.options.items.length)&&(e[t]={imagePath:a.imagePath,isClicked:!1,isFound:!1,isUnique:a.single})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,i["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){if(this.step.options.lastIsSingle){this.memory.disabled=!0;for(var a=0;a<this.memory.items.length;a++)this.memory.items[a].isUnique?(this.memory.items[a].isClicked=!0,t.memory.items[a].isFound=!0):(this.memory.items[a].isClicked=!1,t.memory.items[a].isFound=!1),i["a"].set(this.memory.items,a,this.memory.items[a])}else for(var s=0;s<this.memory.items.length;s++)this.memory.items[s].isFound||(this.memory.items[s].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,i["a"].set(this.memory.items,s,this.memory.items[s]));this.checkAnswer()}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,i["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),i["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,uu.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,i["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),i["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},changePortraitPart:function(e){i["a"].set(this.portrait[e],"position",this.portrait[e].position+1),this.portrait[e].position>this.portrait[e].number&&i["a"].set(this.portrait[e],"position",1)},phoneCall:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.step.options.number,cordova.plugins.phonedialer.dial(a,(function(e){console.log("Dialing succeeded")}),(function(e){"empty"===e?console.log("Unknown phone number"):console.log("Dialer Error:"+e)}),!1),e.checkAnswer();case 3:case"end":return t.stop()}}),t)})))()},cancelPhoneCall:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkAnswer();case 2:e.forceNextStep();case 3:case"end":return t.stop()}}),t)})))()},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,a=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&a.lookAt(e.camera.position),t.length>0)for(var s=0;s<t.length;s++)t[s].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(a.position),e.renderer.render(e.scene,e.camera),xo["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onNewDeviceOrientation:function(e){var t=this;if(!1!==e.activated)if(this.deviceHasGyroscope){var a=(new qo["Quaternion"]).fromArray(e.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&!this.geolocation.playerTouchedArObject&&(this.geolocation.target.camera.quaternion=a),!this.geolocation.waitForNextQuaternionRead){var s=(new qo["Euler"]).setFromQuaternion(a,"ZXY"),o=(new qo["Euler"]).setFromQuaternion(a,"XZY"),n=s.x<Math.PI/4?s.z:o.y,r=JSON.stringify((360-uu.radiansToDegrees(n))%360);this.geolocation.direction=(this.geolocation.rawDirection-r+360)%360,this.geolocation.waitForNextQuaternionRead=!0,uu.setTimeout((function(){t.geolocation.waitForNextQuaternionRead=!1}),100)}}else this.geolocation.direction=(this.geolocation.rawDirection+e.alpha)%360;else console.warn("sensor is not activated")},onDeviceOrientationError:function(e){Jt(this.$t("label.CouldNotEnableAR"),"warning")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var a=t.scene.getObjectByName("targetObject"),s=new qo["Vector2"];s.x=e.clientX/t.renderer.domElement.clientWidth*2-1,s.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var o=new qo["Raycaster"];o.setFromCamera(s,t.camera);var n=o.intersectObject(a,!0),r="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(n.length>0&&r){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.geolocation.active=!1,this.geolocation.playerTouchedArObject=!0);var i="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(i),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i,l,c,u,d,p,m;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=4,i=Gs[e],o.prev=2,o.next=5,s.ModelLoaderAsync(e,t,a);case 5:l=o.sent,o.next=13;break;case 8:return o.prev=8,o.t0=o["catch"](2),console.error("Error while loading 3D model:",o.t0),Jt(s.$t("label.CouldNotDisplayObject"),"error"),o.abrupt("return");case 13:return c=l.scene,i&&(i.rotation=i.rotation||{},i.rotation.hasOwnProperty("x")&&c.rotateX(uu.degreesToRadians(i.rotation.x)),i.rotation.hasOwnProperty("y")&&c.rotateY(uu.degreesToRadians(i.rotation.y)),i.rotation.hasOwnProperty("z")&&c.rotateZ(uu.degreesToRadians(i.rotation.z)),u=(i.scale||1)*r,c.scale.set(u,u,u)),d=(new qo["Box3"]).setFromObject(c),p=d.getCenter(new qo["Vector3"]),p.multiplyScalar(-1),m=new qo["Object3D"],c.applyMatrix4((new qo["Matrix4"]).makeTranslation(p.x,p.y,p.z)),m.add(c),m.up=new qo["Vector3"](0,0,1),c=m,i&&i.translation&&"locate-item-ar"===s.step.type&&(i.translation.hasOwnProperty("x")&&(c.position.x+=i.translation.x*r),i.translation.hasOwnProperty("y")&&(c.position.y+=i.translation.y*r),i.translation.hasOwnProperty("z")&&(c.position.z+=i.translation.z*r)),o.abrupt("return",{object:c,animations:l.animations});case 25:case"end":return o.stop()}}),n,null,[[2,8]])})))()},ModelLoaderAsync:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=console.log,o.next=3,uu.readBinaryFile(t,e+".glb");case 3:return i=o.sent,o.abrupt("return",new Promise((function(o,n){var l=new Co["a"];e&&-1!==e.indexOf("blob:")?l.load(e,o,r,n):i?l.load(i,o,r,n):a?l.load(s.uploadUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",o,r,n):l.load(s.serverUrl+"/statics/3d-models/"+e+".glb",o,r,n)})));case 5:case"end":return o.stop()}}),n)})))()},addDefaultLightTo3DScene:function(e){var t=new qo["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new qo["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,a,s,o){var n,r=this,i="",l=!1;this.displaySuccessIcon=!0,e?(a&&this.step.options&&this.step.options.rightAnswerMessage&&this.step.options.rightAnswerMessage[this.lang]&&""!==this.step.options.rightAnswerMessage[this.lang]?(i=this.step.options.rightAnswerMessage[this.lang],i.length>40&&(l=2e4)):i=t,n=this.step.options.rightAnswerColor):(a&&this.step.options&&this.step.options.wrongAnswerMessage&&this.step.options.wrongAnswerMessage[this.lang]&&""!==this.step.options.wrongAnswerMessage[this.lang]?(i=this.step.options.wrongAnswerMessage[this.lang],i.length>40&&(l=2e4)):i=t,n=this.step.options.wrongAnswerColor),s&&""!==s||!o||(s=[{icon:"arrow_forward",handler:function(){r.forceNextStep()}}]),Jt(i,e?"rightAnswer":"wrongAnswer",s,l,n)},readMore:function(){this.step.extraText&&(this.$emit("readMoreRead"),this.story.step=6,this.story.data={readMore:uu.replaceBreakByBR(this.step.extraText),character:this.customization&&this.customization.character&&""!==this.customization.character?-1===this.customization.character.indexOf("blob:")?this.uploadUrl+"/upload/quest/"+this.customization.character:this.customization.character:"2"})},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera():this.$store.dispatch("clearMediaStreams")},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t=this.deviceMotion,a=!0;if((!this.deviceHasGyroscope||null===this.geolocation.GPSdistance||isNaN(this.geolocation.position.x)||isNaN(this.geolocation.position.y))&&(a=!1),!a)return t.acceleration.avgData={x:[],y:[],z:[]},t.velocity={x:0,y:0},void(t.dateLatestEvent=null);null===t.idleAccelerationInterval&&(t.idleAccelerationInterval=uu.setInterval((function(){t.isAccelerationIdle=!0}),1e3));var s=e.acceleration,o=new qo["Vector3"](s.x,s.y,s.z);t.acceleration.raw=o,t.acceleration.avgData.x.push(t.acceleration.raw.x),t.acceleration.avgData.y.push(t.acceleration.raw.y),t.acceleration.avgData.z.push(t.acceleration.raw.z),t.acceleration.avgData.x.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.x.shift(),t.acceleration.avgData.y.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.y.shift(),t.acceleration.avgData.z.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.z.shift(),t.acceleration.filtered.x=uu.arrayAverage(t.acceleration.avgData.x),t.acceleration.filtered.y=uu.arrayAverage(t.acceleration.avgData.y),t.acceleration.filtered.z=uu.arrayAverage(t.acceleration.avgData.z),t.isAccelerationIdle=t.isAccelerationIdle&&Math.pow(t.acceleration.filtered.x,2)+Math.pow(t.acceleration.filtered.y,2)+Math.pow(t.acceleration.filtered.z,2)<.5},checkPhoneVertically:function(e){this.$refs&&this.$refs.raVerticallyDialog&&this.$refs["geolocation-component"].isActive&&(e.beta<50||e.beta>130?this.$refs.raVerticallyDialog.show():this.$refs.raVerticallyDialog.hide())},updatePlayerCanTouchTarget:function(){var e=10;this.step.options.hasOwnProperty("touchDistance")&&"number"===typeof this.step.options.touchDistance&&this.step.options.touchDistance>0&&(e=this.step.options.touchDistance),!this.geolocation.canTouchTarget&&this.geolocation.GPSdistance<=e&&(this.geolocation.canTouchTarget=!0)},enlargeThePicture:function(e){if(!this.step.options||!this.step.options.hideEnlargeMessage){this.enlargePicture.show=!0;var t=this.step.options[this.lang].images[this.playerCode[e]].imagePath;this.enlargePicture.url=t&&-1!==t.indexOf("blob:")?t:this.uploadUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t}},triggerIotEvent:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("mqtt"!==t.step.options.protocol){a.next=4;break}t.mqttClient.publish("Graaly",JSON.stringify({macAddress:t.step.options.boardMacAddress,code:t.step.options.code})),a.next=31;break;case 4:if("bluetooth"!==t.step.options.protocol){a.next=30;break}a.t0=t.step.options.object,a.next="lcd"===a.t0?8:"buzzer"===a.t0?10:"chest"===a.t0?12:"relay"===a.t0?15:18;break;case 8:return s=t.step.options.message,a.abrupt("break",19);case 10:return s=t.step.options.duration+","+t.step.options.frequency,a.abrupt("break",19);case 12:return t.iot.chest.disableActionButtons=!0,s=e,a.abrupt("break",19);case 15:return t.iot.relay.disableActionButtons=!0,s=e,a.abrupt("break",19);case 18:throw new Error("Object '"+t.step.options.object+"' not supported");case 19:if(t.sendMessageToBluetoothServer(t.step.options.object+":"+s),"chest"!==t.step.options.object){a.next=24;break}return a.next=23,uu.sleep(2e3);case 23:t.iot.chest.disableActionButtons=!1;case 24:if("relay"!==t.step.options.object){a.next=28;break}return a.next=27,uu.sleep(2e3);case 27:t.iot.relay.disableActionButtons=!1;case 28:a.next=31;break;case 30:throw new Error("IoT protocol not supported: "+t.step.options.protocol);case 31:case"end":return a.stop()}}),a)})))()},bluetoothEnableSuccess:function(){console.log("Bluetooth is enabled"),this.bluetooth.enabled=!0,this.searchForBluetoothPeripheral()},bluetoothDisconnect:function(e){if(this.isHybrid){console.log("Disconnecting BLE");var t=this;ble.disconnect(e,(function(){t.bluetooth.enabled=!1,t.bluetooth.deviceId=null}))}},bluetoothEnableFailure:function(){console.log("The user did *not* enable Bluetooth"),Jt("Bluetooth could not be enabled","error")},searchForBluetoothPeripheral:function(){console.log("Searching for BT peripherals..."),ble.startScan([],this.bluetoothScanResult)},bluetoothScanResult:function(){var e=r()(o.a.mark((function e(t){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Device discovered",t),console.log(this.step.options.deviceid),t.name!==this.step.options.deviceid){e.next=8;break}return e.next=5,this.stopBluetoothScan();case 5:console.log("Graaly IoT BT device discovered"),this.bluetooth.deviceId=t.id,ble.connect(t.id,this.bluetoothDeviceConnected,this.bluetoothDeviceDisonnected);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceConnected:function(){var e=r()(o.a.mark((function e(t){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("BT device connected",t),e.next=3,this.sendMessageToBluetoothServer("cm:"+this.step.options.object);case 3:"wait-for-event"===this.step.type&&(console.log("Start notification listening"),ble.startNotification(t.id,this.iotObject.bleServiceId,this.iotObject.bleCharacteristicId,this.onBluetoothNotification,(function(e){return console.error(e)}))),"trigger-event"!==this.step.type||this.step.options.triggerMode&&"auto"!==this.step.options.triggerMode||("chest"===this.step.options.object||"relay"===this.step.options.object?this.triggerIotEvent("open"):this.triggerIotEvent(""));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceDisonnected:function(e){console.log("BT device disconnected",e)},onBluetoothNotification:function(){var e=r()(o.a.mark((function e(t){var a,s,n,r,i,l,c,u,d,p,m;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=uu.bytesToString(t),console.log("Received BT notification: "+a),this.lastReceivedValue=a,null===this.playerResult){e.next=5;break}return e.abrupt("return");case 5:e.t0=this.step.options.object,e.next="keypad"===e.t0?8:"joystick"===e.t0?22:"distance"===e.t0?30:"pot"===e.t0?33:"button"===e.t0?40:"escapebox"===e.t0?45:46;break;case 8:if(!(a.length<8)){e.next=10;break}throw new Error("Invalid data retrieved from IoT device (keypad mode): "+a);case 10:if(this.iot.keypadAnswer=uu.replaceStringAt(this.iot.keypadAnswer,this.iot.keypadAnswer.indexOf("_"),a.charAt(7)),-1!==this.iot.keypadAnswer.indexOf("_")){e.next=21;break}if(this.iot.keypadAnswer!==this.step.options.answer){e.next=16;break}this.checkAnswer(),e.next=21;break;case 16:return this.playerResult=!1,e.next=19,uu.sleep(1e3);case 19:this.iot.keypadAnswer="_".repeat(this.step.options.answer.length),this.playerResult=null;case 21:return e.abrupt("break",47);case 22:if(n=a.match(new RegExp("(\\d+)","g")),s=!0,2===n.length){e.next=26;break}throw new Error("Invalid length for array 'axisValues'");case 26:for(n={X:n[1],Y:n[0]},r=0,i=["X","Y"];r<i.length;r++)l=i[r],c=parseInt(n[l],10),this.iot["axis"+l]=c/255,(c<this.step.options["range"+l].min||c>this.step.options["range"+l].max)&&(s=!1);return s&&this.checkAnswer(),e.abrupt("break",47);case 30:return this.iot.distance=parseInt(a.substring(9),10),this.iot.distance>=this.step.options.range.min&&this.iot.distance<=this.step.options.range.max&&this.checkAnswer(),e.abrupt("break",47);case 33:if(u=a.match(new RegExp("(\\d+)","g")),s=!0,3===u.length){e.next=37;break}throw new Error("Invalid length for array 'potValues'");case 37:for(d=0;d<3;d++)p=parseInt(u[d],10),this.iot["pot"+(d+1)]=p/255,(p<this.step.options["range"+(d+1)].min||p>this.step.options["range"+(d+1)].max)&&(s=!1);return s&&this.checkAnswer(),e.abrupt("break",47);case 40:if(!(a.length<8)){e.next=42;break}throw new Error("Invalid data retrieved from IoT device (button mode): "+a);case 42:return m=a.substring(7),"pressed"===m&&this.checkAnswer(),e.abrupt("break",47);case 45:return e.abrupt("break",47);case 46:throw new Error("Unknown IoT object code '"+this.step.options.object+"'");case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendMessageToBluetoothServer:function(e){var t=this;return new Promise((function(a,s){t.bluetooth.enabled&&null!==t.bluetooth.deviceId?(console.log("sendMessageToBluetoothServer: "+e),ble.writeWithoutResponse(t.bluetooth.deviceId,Ws.baseServiceID,t.createIotCara(t.bluetooth.deviceId),uu.stringToBytes(e),(function(e){console.log("BLE write success",e),a()}),(function(e){console.log("BLE write failure",e),s(e)}))):s(new Error("Bluetooth device not connected"))}))},stopBluetoothScan:function(){var e=r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ble.stopScan((function(){console.log("BT Scan stopped")}),(function(e){console.log("Could not stop BT scan",e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stopBluetoothNotification:function(){if(this.isHybrid){var e=this;return new Promise((function(t,a){ble.stopNotification(e.bluetooth.deviceId,Ws.baseServiceID,e.createIotCara(e.bluetooth.deviceId),(function(){t()}),(function(e){a(new Error("Could not stop bluetooth notifications. error: "+e))}))}))}},getIotObjectFromCode:function(e){var t=!0,a=!1,s=void 0;try{for(var o,n=Hs[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var r=o.value;if(r.code===e)return r}}catch(i){a=!0,s=i}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}throw new Error("Unknown object code '"+e+"'")},createIotCara:function(e){var t=Ws.baseCara+e.toLowerCase().replaceAll(":","");return t},isTimerAvailable:function(){return!!(this.step&&void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled&&uu.timeStringToSeconds(this.step.countDownTime.time)>0)},startCountdown:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==e.isTimerAvailable()){t.next=11;break}if(a=0,s=Us.getTimeLeft(e.runId,e.step._id),a=null===s?uu.timeStringToSeconds(e.step.countDownTime.time):s,!(a<0&&e.step.countDownTime)){t.next=9;break}e.step.countDownTime.enabled=!1,t.next=11;break;case 9:return t.next=11,e.manageCountDown(a,e.step._id);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("error in countdown()",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},manageCountDown:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=a,a.step.countDownTime&&a.step.countDownTime.enabled&&t===a.step._id&&setTimeout(r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e<=0)){a.next=5;break}return a.next=3,n.handleTimeUp();case 3:a.next=10;break;case 5:return e--,n.countdowntimeleft=e,e%2===0&&"0"!==n.runId&&Us.storeTimeLeft(n.runId,n.step._id,e),a.next=10,n.manageCountDown(e,t);case 10:case"end":return a.stop()}}),a)}))),1e3);case 2:case"end":return s.stop()}}),s)})))()},handleTimeUp:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTimeUp=!0,e.stopcountdown(),e.step.countDownTime&&(e.step.countDownTime.enabled=!1),a=e.getStepType(e.step.type),e.$emit("closeAllPanels"),"enigma"!==a.category){t.next=8;break}return t.next=8,e.checkAnswer();case 8:case"end":return t.stop()}}),t)})))()},stopcountdown:function(){this.step.countDownTime&&(this.step.countDownTime.enabled=!1)},map:function(e,t,a,s,o){var n=uu.map(e,t,uu.timeStringToSeconds(a),s,o);return n},getStepType:function(e){var t=!0,a=!1,s=void 0;try{for(var o,n=Vs[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var r=o.value;if(r.code===e)return r}}catch(i){a=!0,s=i}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},findItemIsFound:function(e){for(var t=!1,a=!1,s=e&&e.windowWidth?e.windowWidth:this.getFindItemPictureSize()/100,o=0;o<this.step.options.coordinates.length;o++)if(!this.step.options.coordinates[o].found){var n={left:Math.round(this.step.options.coordinates[o].left/100*100*s),top:Math.round(this.step.options.coordinates[o].top/100*133*s)},r=Math.round(8*s),i=e?Math.sqrt(Math.pow(n.left-e.posX,2)+Math.pow(n.top-e.posY,2)):100;i<=r?(this.step.options.coordinates[o].found=!0,a=!0,document.getElementById("cross-play"+o).style.left=n.left-r+"px",document.getElementById("cross-play"+o).style.top=n.top-r+"px",document.getElementById("cross-play"+o).style.display="block"):t=!0}return{all:!t,one:a}},getAudioSound:function(){var e=this.quest.mainLanguage,t=this.lang,a=this.step.audioStream&&this.step.audioStream[this.lang]&&""!==this.step.audioStream[this.lang],s=this.step.audioStream&&this.step.audioStream[e]&&""!==this.step.audioStream[e];a||s?(!a&&s&&e!==this.lang&&(t=e),-1!==this.step.audioStream[t].indexOf("blob:")?this.audio.file=this.step.audioStream[t]:this.audio.file=this.uploadUrl+"/upload/quest/"+this.step.questId+"/audio/"+this.step.audioStream[t]):this.audio.file=null},switchAudioSound:function(){var e=document.getElementById("step-music");e&&(this.audio.play?(e.pause(),this.audio.play=!1):(e.play(),this.audio.play=!0))},replayAudioSound:function(){var e=document.getElementById("step-music");e&&(e.currentTime=0,e.play(),this.audio.play=!0)},openInventory:function(e){this.$emit("openInventory",e)},showAllFindItemLocation:function(){for(var e=this.getFindItemPictureSize()/100,t=0;t<this.step.options.coordinates.length;t++){var a={left:Math.round(this.step.options.coordinates[t].left/100*100*e),top:Math.round(this.step.options.coordinates[t].top/100*133*e)},s=this.useItem.crossSize/2,o=document.getElementById("cross-play"+t);o.style.top=a.top-s+"px",o.style.left=a.left-s+"px",o.style.display="block"}},hideAllFindItemLocation:function(){for(var e=0;e<5;e++){var t=document.getElementById("cross-play"+e);t.style.display="none"}}}}),Fo=Do,Lo=(a("565f"),Object(tt["a"])(Fo,Qs,Bs,!1,null,"6ffb3385",null)),Eo=Lo.exports,Qo=a("c1df"),Bo=a.n(Qo),Uo={components:{stepPlay:Eo,story:ho,chat:Es,Notify:Ie["a"]},data:function(){return this.initialState()},mounted:function(){uu.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake(),this.isHybrid&&"android"===cordova.platformId&&StatusBar.show()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1},selectedItems:[]},hint:{isOpened:!1,isFirst:!0,label:"",suggest:!1,show:!1,used:!1,number:0,remainingNumber:0},info:{isOpened:!1,score:0,quest:{},audio:""},chat:{isOpened:!1},next:{suggest:!1,enabled:!1,canPass:!1},sound:{status:"play",tempMute:!1},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},navigatingToStepId:null,story:{step:null,data:null},loadStepData:!1,run:{currentChapter:0},runId:0,player:"P1",isMultiplayer:!1,isRunFinished:!1,remotePlay:!1,dataSharedWithPartner:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!0,answer:null,steps:[],force:!1},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,runDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:uu.isIOS(),countDownTime:{remaining:0,start:null},selectedItem:null,currentDate:null,score:{nbGoodAnwers:0,nbQuestions:0}}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.next=e.next,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectedItem,this.loadStepData=e.loadStepData,this.startDate=e.startDate,this.footer=e.footer},initData:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.prev=1,t.next=4,Ot.getByIdForStep(e.questId,999,e.lang);case 4:e.info.quest=t.sent,t.next=14;break;case 7:return t.prev=7,t.t0=t["catch"](1),console.error(t.t0),e.$q.loading.hide(),e.warnings.questDataMissing=!0,e.reloadPageInAWhile(),t.abrupt("return");case 14:return e.isMultiplayer=e.info.quest.playersNumber&&e.info.quest.playersNumber>1,e.initOfflineMode(),e.getAudioSound(),e.startFullScreen(),e.loadStepData=!1,t.next=21,e.getRun();case 21:return t.next=23,e.getPlayer();case 23:return e.player=t.sent,t.next=26,e.getStep();case 26:if(e.sendStepIdToParent(),e.updateHistory(),e.startCountDown(),e.checkIfAlreadyPlayed(),"use-item"!==e.step.type){t.next=33;break}return t.next=33,e.fillInventory();case 33:e.$q.loading.hide(),e.isHintAvailable()&&(uu.setTimeout(e.alertOnHint,12e3),e.hint.show=!0),uu.setTimeout(e.alertOnNext,18e4),e.loadStepData=!0,e.refreshCurrentDate();case 38:case"end":return t.stop()}}),t,null,[[1,7]])})))()},moveToStep:function(e,t){var a=this;return r()(o.a.mark((function s(){return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.navigatingToStepId=e,uu.clearAllRunningProcesses(),a.resetData(),a.$q.loading.show(),"undefined"===a.lang&&(a.lang=a.$t("label.shortLang")),a.loadStepData=!1,s.next=8,a.getRun();case 8:return s.next=10,a.getPlayer();case 10:return a.player=s.sent,s.next=13,a.getStep(e,t);case 13:if(a.sendStepIdToParent(),a.updateHistory(),a.manageAudio(),a.checkIfAlreadyPlayed(),"use-item"!==a.step.type){s.next=20;break}return s.next=20,a.fillInventory();case 20:a.$q.loading.hide(),a.isHintAvailable()&&(uu.setTimeout(a.alertOnHint,12e3),a.hint.show=!0),uu.setTimeout(a.alertOnNext,18e4),a.loadStepData=!0,a.refreshCurrentDate(),a.computeGoodAnswers(),a.hint.isFirst=!0;case 27:case"end":return s.stop()}}),s)})))()},getRun:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.runDataMissing=!1,a=!!e.$route.query.hasOwnProperty("remoteplay")&&e.$route.query.remoteplay,s=e.$route.query.hasOwnProperty("sharepartner")&&"true"===e.$route.query.sharepartner,t.next=5,e.checkIfRunIsAlreadyLoaded(e.questId);case 5:if(r=t.sent,!r){t.next=10;break}return t.next=9,e.loadOfflineRun(e.questId);case 9:n=t.sent;case 10:if(e.offline.active&&(0!==e.run.currentChapter||e.offline.force)){t.next=70;break}return t.next=13,Za.listForAQuest(e.questId);case 13:if(i=t.sent,!i||!i.data){t.next=63;break}l=0;case 16:if(!(l<i.data.length)){t.next=37;break}if(i.data[l]&&i.data[l].status&&"finished"===i.data[l].status&&(e.isRunFinished=!0),!i.data[l]||!i.data[l].status||"in-progress"!==i.data[l].status){t.next=34;break}if(e.run=i.data[l],e.runId=e.run._id,!r){t.next=34;break}if(!(n.dateUpdated>e.run.dateUpdated)){t.next=31;break}return c=e.run._id,e.run=n,e.run._id||(e.run._id=c,e.runId=c),e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=29,Za.updateFromOffline(e.run);case 29:t.next=34;break;case 31:return e.run.answers=n.answers,t.next=34,e.updateOfflineRun(e.questId);case 34:l++,t.next=16;break;case 37:if(0!==e.run.currentChapter){t.next=60;break}return t.next=40,Za.init(e.questId,e.questVersion,e.$route.params.lang,a,null,s);case 40:if(u=t.sent,!(u&&200===u.status&&u.data&&u.data._id)){t.next=55;break}if(!r){t.next=51;break}return e.run=n,e.run._id=u.data._id,e.runId=e.run._id,e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=49,Za.updateFromOffline(e.run);case 49:t.next=53;break;case 51:e.run=u.data,e.runId=e.run._id;case 53:t.next=57;break;case 55:e.warnings.runDataMissing=!0,e.reloadPageInAWhile();case 57:e.info.score=0,t.next=61;break;case 60:e.info.score=e.run.tempScore;case 61:t.next=68;break;case 63:return e.offline.active=!0,e.offline.force=!0,e.warnings.runDataMissing=!0,e.reloadPageInAWhile(),t.abrupt("return",!1);case 68:t.next=81;break;case 70:if(e.isHybrid){t.next=75;break}e.warnings.runDataMissing=!0,e.reloadPageInAWhile(),t.next=81;break;case 75:if(!r){t.next=79;break}n&&(e.run=n,e.run._id&&(e.runId=e.run._id),e.info.score=e.run.tempScore,Za.updateFromOffline(e.run)),t.next=81;break;case 79:return t.next=81,e.updateOfflineRun(e.questId);case 81:case"end":return t.stop()}}),t)})))()},getPlayer:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.run.team||!e.run.team.members){t.next=8;break}a=0;case 2:if(!(a<e.run.team.members.length)){t.next=8;break}if(e.run.team.members[a]._id!==e.$store.state.user._id){t.next=5;break}return t.abrupt("return",e.run.team.members[a].player);case 5:a++,t.next=2;break;case 8:return t.abrupt("return","P1");case 9:case"end":return t.stop()}}),t)})))()},getStep:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P,_,T;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!a.warnings.questDataMissing&&!a.warnings.runDataMissing){s.next=2;break}return s.abrupt("return",!1);case 2:if(a.warnings.stepDataMissing=!1,"undefined"===typeof e||null===e){s.next=10;break}if(n=e,"locationMarker"!==n){s.next=8;break}return a.step={id:"sensor"},s.abrupt("return",!1);case 8:s.next=67;break;case 10:if(a.offline.active){s.next=42;break}return s.next=13,Za.getNextStep(a.questId,a.player,t);case 13:if(r=s.sent,!r||!r.data||200!==r.status){s.next=39;break}if(r.data.extra&&r.data.extra.chapter&&a.stopChapterCountDown(),r.data.extra&&r.data.extra.timer&&a.startChapterCountDown(r.data.extra.timer),!r.data.next){s.next=34;break}if("locationMarker"!==r.data.next){s.next=23;break}return a.step={id:"sensor"},s.abrupt("return",!1);case 23:if("geolocation"!==r.data.next){s.next=28;break}return a.step={id:"gpssensor",locations:r.data.extra.locations,steps:r.data.extra.geosteps,visibles:r.data.extra.visibles,questId:a.questId,version:a.questVersion},s.abrupt("return",!1);case 28:if(n=r.data.next,!t||"combine"!==t.type){s.next=31;break}return s.abrupt("return",n);case 31:r.data.extra&&"removehistory"===r.data.extra&&a.removeHistory(),s.next=37;break;case 34:return a.isMultiplayer&&a.showWaitingPage(),a.getPreviousStep(),s.abrupt("return",!1);case 37:s.next=40;break;case 39:r&&r.data&&"app_quest_data_is_obsolete"===r.data.message?a.$q.dialog({title:a.$t("label.QuestUpdated"),message:a.$t("label.PleaseRestartQuest")}).onOk((function(){a.$router.push("/quest/play/"+a.questId)})):a.$q.dialog({title:a.$t("label.TechnicalProblem")}).onOk((function(){a.$router.push("/quest/play/"+a.questId)}));case 40:s.next=67;break;case 42:return s.next=44,a.getNextOfflineStep(a.questId,null,a.player,t);case 44:if(i=s.sent,i&&i.id){s.next=51;break}return a.isMultiplayer&&a.showWaitingPage(),a.getPreviousStep(),s.abrupt("return",!1);case 51:if(n=i.id,""!==n){s.next=57;break}return s.next=55,a.getNextOfflineStep(a.questId,null,a.player);case 55:i=s.sent,i&&i.id&&(n=i.id);case 57:if(!t||"combine"!==t.type){s.next=59;break}return s.abrupt("return",n);case 59:if(i&&i.extra&&i.extra.chapter&&a.stopChapterCountDown(),i.extra&&i.extra.timer&&a.startChapterCountDown(i.extra.timer),"locationMarker"!==n){s.next=64;break}return a.step={id:"sensor"},s.abrupt("return",!1);case 64:if("geolocation"!==n){s.next=67;break}return a.step={id:"gpssensor",locations:i.extra.locations,steps:i.extra.geosteps,visibles:i.extra.visibles,questId:a.questId,version:a.questVersion},s.abrupt("return",!1);case 67:if("end"!==n){s.next=69;break}return s.abrupt("return",a.$router.push("/quest/"+a.questId+"/end"));case 69:if(a.offline.active){s.next=92;break}return s.next=72,is.getById(n,a.questVersion,a.lang);case 72:if(l=s.sent,!l||!l.data||200!==l.status){s.next=87;break}if(!l.data.message||"Step not yet available"!==l.data.message){s.next=78;break}a.showStepBlockedMessage(l.data.startDate),s.next=85;break;case 78:if(a.step=l.data,a.step.id=a.step.stepId,!t||"combine"!==t.type){s.next=82;break}return s.abrupt("return",a.step.stepId);case 82:return a.getPreviousStep(),a.step.hint&&(a.hint.remainingNumber=a.step.hint.length),s.abrupt("return",!0);case 85:s.next=90;break;case 87:return a.warnings.stepDataMissing=!0,a.reloadPageInAWhile(),s.abrupt("return",!1);case 90:s.next=219;break;case 92:return s.next=94,uu.readFile(a.questId,"step_"+n+".json");case 94:if(c=s.sent,c){s.next=99;break}a.$q.dialog({title:a.$t("label.TechnicalProblem")}).onOk((function(){a.$router.push("/quest/play/"+a.questId)})),s.next=219;break;case 99:return u=JSON.parse(c),u.hint&&(a.hint.remainingNumber=u.hint.length),s.next=103,a.offlineCheckAccess(u);case 103:if(d=s.sent,d&&d.message&&"Step not yet available"===d.message&&a.showStepBlockedMessage(d.date),!u.backgroundImage||!u.backgroundImage[a.lang]){s.next=110;break}return s.next=108,uu.readBinaryFile(a.questId,u.backgroundImage[a.lang]);case 108:p=s.sent,p?u.backgroundImage[a.lang]=p:a.warnings.stepDataMissing=!0;case 110:if(!u.videoStream||!u.videoStream[a.lang]||""===u.videoStream[a.lang]){s.next=115;break}return s.next=113,uu.readBinaryFile(a.questId,u.videoStream[a.lang]);case 113:m=s.sent,m?u.videoStream[a.lang]=m:a.warnings.stepDataMissing=!0;case 115:if(!u.audioStream){s.next=129;break}if(h=a.info.quest.mainLanguage,!u.audioStream[a.lang]||""===u.audioStream[a.lang]){s.next=124;break}return s.next=120,uu.readBinaryFile(a.questId,u.audioStream[a.lang]);case 120:g=s.sent,g?u.audioStream[a.lang]=g:a.warnings.stepDataMissing=!0,s.next=129;break;case 124:if(a.lang===h||!u.audioStream[h]||""===u.audioStream[h]){s.next=129;break}return s.next=127,uu.readBinaryFile(a.questId,u.audioStream[h]);case 127:f=s.sent,f?u.audioStream[h]=f:a.warnings.stepDataMissing=!0;case 129:if("choose"!==u.type||!u.options){s.next=140;break}b=0;case 131:if(!(b<u.options.items.length)){s.next=140;break}if(!u.options.items[b].imagePath){s.next=137;break}return s.next=135,uu.readBinaryFile(a.questId,u.options.items[b].imagePath);case 135:v=s.sent,v?u.options.items[b].imagePath=v:a.warnings.stepDataMissing=!0;case 137:b++,s.next=131;break;case 140:if("memory"!==u.type||!u.options||!u.options.items){s.next=151;break}b=0;case 142:if(!(b<u.options.items.length)){s.next=151;break}if(!u.options.items[b].imagePath){s.next=148;break}return s.next=146,uu.readBinaryFile(a.questId,u.options.items[b].imagePath);case 146:y=s.sent,y?u.options.items[b].imagePath=y:a.warnings.stepDataMissing=!0;case 148:b++,s.next=142;break;case 151:if(!("code-image"===u.type&&u.options&&u.options[a.lang]&&u.options[a.lang].images)){s.next=167;break}b=0;case 153:if(!(b<u.options[a.lang].images.length)){s.next=162;break}if(!u.options[a.lang].images[b].imagePath){s.next=159;break}return s.next=157,uu.readBinaryFile(a.questId,u.options[a.lang].images[b].imagePath);case 157:w=s.sent,w?u.options[a.lang].images[b].imagePath=w:a.warnings.stepDataMissing=!0;case 159:b++,s.next=153;break;case 162:if(!u.options.imageBelow){s.next=167;break}return s.next=165,uu.readBinaryFile(a.questId,u.options.imageBelow);case 165:q=s.sent,q?u.options.imageBelow=q:a.warnings.stepDataMissing=!0;case 167:if("write-text"!==u.type){s.next=173;break}if(!u.options.imageBelow){s.next=173;break}return s.next=171,uu.readBinaryFile(a.questId,u.options.imageBelow);case 171:x=s.sent,x?u.options.imageBelow=x:a.warnings.stepDataMissing=!0;case 173:if(!("jigsaw-puzzle"===u.type&&u.options&&u.options.picture&&u.options.picture[a.lang]&&""!==u.options.picture[a.lang])){s.next=178;break}return s.next=176,uu.readBinaryFile(a.questId,u.options.picture[a.lang]);case 176:C=s.sent,C?u.options.picture[a.lang]=C:a.warnings.stepDataMissing=!0;case 178:if("geolocation"!==u.type||!u.options||!u.options.locator||""===u.options.locator){s.next=183;break}return s.next=181,uu.readBinaryFile(a.questId,u.options.locator);case 181:S=s.sent,S?u.options.locator=S:a.warnings.stepDataMissing=!0;case 183:if("new-item"!==u.type||!u.options||!u.options.picture||""===u.options.picture){s.next=194;break}if(!u.options.pictures||!u.options.pictures[a.lang]||""===u.options.pictures[a.lang]){s.next=190;break}return s.next=187,uu.readBinaryFile(a.questId,u.options.pictures[a.lang]);case 187:k=s.sent,s.next=193;break;case 190:return s.next=192,uu.readBinaryFile(a.questId,u.options.picture);case 192:k=s.sent;case 193:k&&(u.options.picture=k,u.options.hasOwnProperty("pictures")&&u.options.pictures[a.lang]&&(u.options.pictures[a.lang]=k));case 194:if("character"!==u.type||!u.options||!u.options.character||""===u.options.character||"usequestcharacter"===u.options.character){s.next=208;break}return s.next=197,uu.readBinaryFile(a.questId,u.options.character);case 197:if(P=s.sent,P&&(u.options.character=P),!(u.options.multiple&&u.options.multiple.length>0)){s.next=208;break}_=0;case 201:if(!(_<u.options.multiple.length)){s.next=208;break}if(!u.options.multiple[_]||!u.options.multiple[_].picture){s.next=205;break}return s.next=205,uu.readBinaryFile(a.questId,u.options.multiple[_].picture);case 205:_++,s.next=201;break;case 208:if("find-item"!==u.type&&"use-item"!==u.type||!u.options||!u.options.altFile||""===u.options.altFile){s.next=213;break}return s.next=211,uu.readBinaryFile(a.questId,u.options.altFile);case 211:T=s.sent,T&&(u.options.altFile=T);case 213:return a.step=u,a.step.id=a.step.stepId,a.nbTry=a.getNbTry(),a.getPreviousStep(),a.offline.answer=a.step.answers,s.abrupt("return",!0);case 219:case"end":return s.stop()}}),s)})))()},getNbTry:function(){if(this.run.answers&&this.run.answers.length>1)for(var e=0;e<this.run.answers.length;e++)if(this.run.answers[e]&&this.run.answers[e].stepId&&null!==this.run.answers[e].stepId&&this.run.answers[e].stepId===this.step.stepId)return this.run.answers[e].nbTry;return 0},sendStepIdToParent:function(){try{window.self!==window.top&&window.parent.postMessage(this.step.id,"https://graaly.com")}catch(e){console.log(e)}},refreshCurrentDate:function(){var e=new Date;this.currentDate=Bo()(e).format("DD/MM/YYYY, k:mm")},showWaitingPage:function(){var e=this;this.step={id:"waiting"},this.next.enabled=!1,this.next.canPass=!1,setTimeout(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.moveToStep();case 1:case"end":return t.stop()}}),t)}))),15e3)},checkIfAlreadyPlayed:function(){var e=this.run.conditionsDone;e&&"undefined"!==typeof this.step.stepId&&-1!==e.indexOf("stepDone_"+this.step.stepId)&&(this.next.canPass=!0)},updateHistory:function(){this.$store.state.history&&this.$store.state.history.items||this.removeHistory(),-1===this.$store.state.history.items.indexOf(this.step.stepId)&&this.step.stepId&&this.$store.state.history.items.push(this.step.stepId)},removeHistory:function(){this.$store.state.history={items:[],index:0}},getPreviousStep:function(){(this.step.conditions&&this.step.conditions.length>0||"waiting"===this.step.id)&&(this.previousStepId="ok")},startCountDown:function(){if(this.info.quest.countDownTime&&this.info.quest.countDownTime.enabled){var e=uu.getDurationFromNow(this.run.dateCreated),t=this.info.quest.duration-e.m;if(this.countDownTime.enabled=!0,this.countDownTime.remainingMinutes=t,this.countDownTime.remaining=t/this.info.quest.duration,setTimeout(this.startCountDown,6e4),t<=0&&this.info.quest.countDownTime.stopGame)return this.$router.push("/quest/"+this.questId+"/end")}},startChapterCountDown:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e?t.countDownTime={enabled:!0,duration:e,remainingMinutes:e,remaining:1,start:new Date}:(t.countDownTime.remainingMinutes=t.countDownTime.duration-uu.getDurationFromNow(t.countDownTime.start,"m"),t.countDownTime.remaining=t.countDownTime.remainingMinutes/t.countDownTime.duration),!0!==t.countDownTime.enabled){a.next=9;break}if(!(t.countDownTime.remaining<=.016)){a.next=8;break}return t.countDownTime.enabled=!1,a.next=6,t.moveToNextStep(null,{type:"chapterCounterOver"});case 6:a.next=9;break;case 8:setTimeout(t.startChapterCountDown,1e3);case 9:case"end":return a.stop()}}),a)})))()},stopChapterCountDown:function(){this.countDownTime.enabled=!1},trackStepSuccess:function(e,t,a,s,n){var i=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a&&(i.info.score+=e),"image-over-flow"!==i.step.type&&"binocular"!==i.step.type&&i.hideHint(),t.next=4,i.saveOfflineAnswer(!0,s,!1,n);case 4:!1!==i.step.displayRightAnswer||i.step.options.rightAnswerMessage&&""!==i.step.options.rightAnswerMessage||i.nextStep();case 5:case"end":return t.stop()}}),t)})))()},trackStepPlayed:function(e,t){var a=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("sensor"!==a.step.id){t.next=5;break}return t.next=3,a.getMarkerStep(e);case 3:t.next=19;break;case 5:if("gpssensor"!==a.step.id){t.next=10;break}return t.next=8,a.getNextGPSStep();case 8:t.next=19;break;case 10:if("waiting"!==a.step.id){t.next=15;break}return t.next=13,a.getMarkerStep(e);case 13:t.next=19;break;case 15:a.next.enabled=!0,"image-over-flow"!==a.step.type&&"binocular"!==a.step.type&&(a.next.suggest=!0,a.hint.show=!1,a.hint.suggest=!1),a.inventory.show=!1,a.footer.tabSelected="next";case 19:case"end":return t.stop()}}),t)})))()},trackStepPass:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(!e.step.canPass&&!1!==e.step.canPass||!0===e.step.canPass)&&(e.next.canPass=!0);case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(e,t,a){var s=this;return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.hideHint(),e.next=3,s.saveOfflineAnswer(!1,a,!1);case 3:!1!==s.step.displayRightAnswer||s.step.options.wrongAnswerMessage&&""!==s.step.options.wrongAnswerMessage||s.nextStep();case 4:case"end":return e.stop()}}),e)})))()},trackStepRetry:function(e,t){var a=this;return r()(o.a.mark((function e(){var s,n,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=!1,a.run.answers&&a.run.answers.length>1)for(n=0;n<a.run.answers.length;n++)a.run.answers[n]&&a.run.answers[n].stepId&&null!==a.run.answers[n].stepId&&a.run.answers[n].stepId===a.step.stepId&&(a.run.answers[n].nbTry=t,s=!0);return s||(r={stepId:a.step.stepId,stepNumber:a.step.number,nbTry:t,date:new Date,online:!0},a.run.answers.push(r)),e.next=5,a.saveOfflineRun(a.questId,a.run,new Date);case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))()},trackMessage:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.next.suggest=!0);case 1:case"end":return a.stop()}}),a)})))()},getMarkerStep:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.offline.active){a.next=4;break}return a.next=3,Za.getMarkerNextStep(t.questId,e,t.player);case 3:n=a.sent;case 4:if(!n||!n.data){a.next=8;break}n.data.next?s=n.data.next:Jt(t.$t("label.NothingOccurs"),"info"),a.next=12;break;case 8:return a.next=10,t.getNextOfflineStep(t.questId,e,t.player);case 10:r=a.sent,r&&(s=r.id);case 12:if(!s){a.next=26;break}if("end"!==s){a.next=25;break}if(!t.$store.state.user.isAdmin){a.next=18;break}return a.abrupt("return",t.$router.push("/admin/validate/"+t.questId));case 18:if(t.$store.state.user._id!==t.info.quest.authorUserId){a.next=22;break}return a.abrupt("return",t.$router.push("/quest/builder/"+t.questId));case 22:return a.abrupt("return",t.$router.push("/quest/"+t.questId+"/end"));case 23:a.next=26;break;case 25:t.moveToStep(s);case 26:case"end":return a.stop()}}),a)})))()},getNextGPSStep:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Za.getNextStep(e.questId,e.player);case 3:s=t.sent;case 4:if(!s||!s.data){t.next=8;break}s.data.next?a=s.data.next:Jt(e.$t("label.NothingOccurs"),"info"),t.next=12;break;case 8:return t.next=10,e.getNextOfflineStep(e.questId,null,e.player);case 10:n=t.sent,n&&(a=n.id);case 12:if(!a){t.next=26;break}if("end"!==a){t.next=25;break}if(!e.$store.state.user.isAdmin){t.next=18;break}return t.abrupt("return",e.$router.push("/admin/validate/"+e.questId));case 18:if(e.$store.state.user._id!==e.info.quest.authorUserId){t.next=22;break}return t.abrupt("return",e.$router.push("/quest/builder/"+e.questId));case 22:return t.abrupt("return",e.$router.push("/quest/"+e.questId+"/end"));case 23:t.next=26;break;case 25:e.moveToStep(a);case 26:case"end":return t.stop()}}),t)})))()},hideHint:function(){this.step.hint={}},getBackgroundImage:function(){var e;return this.info.quest.picture&&(this.info.quest.picture[this.lang]?e=this.info.quest.picture[this.lang]:this.info.quest.picture[this.info.quest.mainLanguage]&&(e=this.info.quest.picture[this.info.quest.mainLanguage])),e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/quest/"+e:""},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.uploadUrl+"/upload/quest/"+this.info.quest.customization.logo},getMapCharacterMarkerImage:function(){return this.info.quest.customization&&this.info.quest.customization.characterOnMap&&-1!==this.info.quest.customization.characterOnMap.indexOf("blob:")?this.info.quest.customization.characterOnMap:this.serverUrl+"/upload/quest/"+this.info.quest.customization.characterOnMap},getAudioSound:function(){var e=this.info.quest.mainLanguage,t=this.lang,a=this.info.quest.customization&&this.info.quest.customization.audio&&this.info.quest.customization.audio[this.lang]&&""!==this.info.quest.customization.audio[this.lang],s=this.info.quest.customization&&this.info.quest.customization.audio&&this.info.quest.customization.audio[e]&&""!==this.info.quest.customization.audio[e];a||s?(!a&&s&&e!==this.lang&&(t=e),-1!==this.info.quest.customization.audio[t].indexOf("blob:")?this.info.audio=this.info.quest.customization.audio[t]:this.info.audio=this.uploadUrl+"/upload/quest/"+this.info.quest.customization.audio[t]):this.info.audio=null},nextStep:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.step&&t.step.id){a.next=2;break}return a.abrupt("return",!1);case 2:if(t.$store.state.history.index++,!(t.$store.state.history.items&&t.$store.state.history.index<t.$store.state.history.items.length)){a.next=7;break}return a.next=6,t.moveToStep(t.$store.state.history.items[t.$store.state.history.index]);case 6:return a.abrupt("return");case 7:if(t.loadStepData=!1,!t.next.enabled){a.next=13;break}return a.next=11,t.moveToNextStep("success");case 11:a.next=20;break;case 13:if(!t.next.canPass){a.next=20;break}if(!e){a.next=19;break}return a.next=17,t.passStep();case 17:a.next=20;break;case 19:t.$q.dialog({dark:!0,message:t.$t("label.ConfirmPass"),ok:t.$t("label.Ok"),cancel:t.$t("label.Cancel")}).onOk(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.passStep();case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){}));case 20:case"end":return a.stop()}}),a)})))()},passStep:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=3;break}return t.next=3,Za.passStep(e.runId,e.step.id,e.player);case 3:return t.next=5,e.passOfflineStep(e.step.id);case 5:return t.next=7,e.moveToNextStep("pass");case 7:case"end":return t.stop()}}),t)})))()},moveToNextStep:function(e,t){var a=this;return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.saveOfflineRun(a.questId,a.run,!1);case 2:a.next.enabled=!1,a.next.suggest=!1,a.next.canPass=!1,"locate-item-ar"!==a.step.type&&"image-over-flow"!==a.step.type||a.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),a.moveToStep(null,t);case 7:case"end":return e.stop()}}),e)})))()},previousStep:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!0,e.$store.state.history.index--,e.$store.state.history.index<0?(e.$store.state.history.index=0,a=!1):e.$store.state.history.items&&e.$store.state.history.index>e.$store.state.history.items.length&&(e.$store.state.history.index=e.$store.state.history.items.length),!a){t.next=6;break}return t.next=6,e.moveToStep(e.$store.state.history.items[e.$store.state.history.index]);case 6:case"end":return t.stop()}}),t)})))()},askForHint:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(e.hint.suggest=!1,!e.hint.isOpened){t.next=7;break}e.closeAllPanels(),t.next=23;break;case 7:if(!e.$store.state.user.bonus||!e.$store.state.user.bonus.name||"infinitehint"!==e.$store.state.user.bonus.name){t.next=12;break}return t.next=10,e.getHint();case 10:t.next=23;break;case 12:if(!e.info.quest.customization||!e.info.quest.customization.doNotPreventUserForHint){t.next=17;break}return t.next=15,e.getHint();case 15:t.next=23;break;case 17:if(!e.hint.isFirst){t.next=21;break}e.$q.dialog({dark:!0,message:e.$t("label.ConfirmHint"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHint();case 2:e.hint.isFirst=!1;case 3:case"end":return t.stop()}}),t)})))),t.next=23;break;case 21:return t.next=23,e.getHint();case 23:case"end":return t.stop()}}),t)})))()},getHint:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Za.getHint(e.runId,e.step.stepId,e.run.version);case 3:a=t.sent;case 4:a&&a.hint?e.hint.label=a.hint:e.hint.label=e.step.hint[e.hint.number],e.step.hint&&e.hint.number<e.step.hint.length-1?e.hint.number++:e.hint.number=0,e.hint.used=!0,e.closeAllPanels(),e.hint.isOpened=!0,e.footer.tabSelected="hint",e.hint.remainingNumber>0&&e.hint.remainingNumber--;case 11:case"end":return t.stop()}}),t)})))()},closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none"},hideFooterButtons:function(){this.footer.show=!1},showFooterButtons:function(){this.footer.show=!0},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.warnings.inventoryMissing=!1,e.offline.active){t.next=5;break}return t.next=4,Za.listWonObjects(e.questId,e.runId);case 4:a=t.sent;case 5:if(!a||!a.data){t.next=10;break}for(e.inventory.items.length=0,s=0;s<a.data.length;s++)e.inventory.items.push({picture:a.data[s].pictures&&a.data[s].pictures[e.lang]?a.data[s].pictures[e.lang]:a.data[s].picture,title:a.data[s].title}),a.data[s].titles&&(e.inventory.items[s].titles=a.data[s].titles);t.next=14;break;case 10:return t.next=12,e.listWonObjects();case 12:n=t.sent,n?e.inventory.items=n:e.warnings.inventoryMissing=!0;case 14:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.inventory.items||0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.footer.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},openInfo:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.info.quest.customization||!e.info.quest.customization.hideMenu){t.next=2;break}return t.abrupt("return",!1);case 2:e.info.isOpened?(e.closeAllPanels(),e.footer.show=!0):(e.closeAllPanels(),e.info.isOpened=!0,e.footer.show=!1);case 3:case"end":return t.stop()}}),t)})))()},backToMap:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$router.push("/home"));case 1:case"end":return t.stop()}}),t)})))()},restartGame:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){a.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Za.endRun(e.runId,null,e.questId,e.questVersion,e.info.quest.mainLanguage);case 2:return t.next=4,uu.removeDirectory(e.questId);case 4:return t.next=6,e.removeQuestFromOfflineList(e.questId);case 6:e.$router.push("/quest/play/"+e.questId);case 7:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return r()(o.a.mark((function t(){var a,s,n,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.checkIfFileExists("","quests.json");case 2:if(a=t.sent,!a){t.next=13;break}return t.next=6,uu.readFile("","quests.json");case 6:for(n=t.sent,s=JSON.parse(n),r=-1,i=0;i<s.list.length;i++)s.list[i].questId===e&&(r=i);return-1!==r&&s.list.splice(r,1),t.next=13,uu.writeInFile("","quests.json",JSON.stringify(s),!0);case 13:case"end":return t.stop()}}),t)})))()},showStepBlockedMessage:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.startDate.enabled=!0,t.startDate.date=e,uu.setTimeout(t.computeRemainingTime,1e3);case 3:case"end":return a.stop()}}),a)})))()},computeRemainingTime:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=new Date,s=new Date(e.startDate.date.substr(0,4),parseInt(e.startDate.date.substr(5,2),10)-1,e.startDate.date.substr(8,2),0,0,0),n=(s-a.getTime())/1e3,!(n<0)){t.next=7;break}return t.next=6,e.initData();case 6:return t.abrupt("return");case 7:e.startDate.remainingDays=Math.floor(n/86400),e.startDate.remainingHours=Math.floor((n-86400*e.startDate.remainingDays)/3600),e.startDate.remainingMinutes=Math.floor((n-86400*e.startDate.remainingDays-3600*e.startDate.remainingHours)/60),e.startDate.remainingSeconds=Math.floor(n%60),uu.setTimeout(e.computeRemainingTime,1e3);case 12:case"end":return t.stop()}}),t)})))()},zoomOrUse:function(e){"use-item"===this.step.type?this.useItem(e):this.zoomItem(e)},useItem:function(e){"use-item"===this.step.type&&(this.selectedItem=e,this.closeAllPanels())},selectItem:function(e){-1===this.inventory.selectedItems.indexOf(e.picture)?this.inventory.selectedItems.push(e.picture):this.inventory.selectedItems.splice(this.inventory.selectedItems.indexOf(e.picture),1)},zoomItem:function(e){this.inventory.detail.zoom=1,this.inventory.detail.isOpened=!0,this.inventory.detail.url=-1!==e.picture.indexOf("statics/")||-1!==e.picture.indexOf("blob:")?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.lang]&&""!==e.titles[this.lang]?this.inventory.detail.title=e.titles[this.lang]:this.inventory.detail.title=e.title},combineItems:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getStep(null,{type:"combine",items:e.inventory.selectedItems});case 2:if(a=t.sent,!a){t.next=12;break}if("end"!==a){t.next=8;break}return t.abrupt("return",e.$router.push("/quest/"+e.questId+"/end"));case 8:e.inventory.isOpened=!1,e.moveToStep(a);case 10:t.next=13;break;case 12:Jt(e.$t("label.NothingOccurs"),"info");case 13:case"end":return t.stop()}}),t)})))()},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},inventoryZoom:function(e){i["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.sendFeedback(e.feedback.message,{questId:e.questId,stepId:e.step.stepId});case 2:a=t.sent,a?(Jt(e.$t("label.YourMessageHasBeenSent"),"info"),e.feedback.isOpened=!1):Jt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return!!(this.step&&this.step.hint&&""!==this.step.hint&&this.step.hint.length>0)},alertOnHint:function(){this.hint.suggest=!0},alertOnNext:function(){this.next.suggest=!0},checkIfRunIsAlreadyLoaded:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(window.cordova){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,uu.checkIfFileExists(t.questId,"run_"+e+".json");case 4:if(s=a.sent,!s){a.next=9;break}return a.abrupt("return",!0);case 9:return a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()},loadOfflineRun:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isMultiplayer){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,uu.readFile(t.questId,"run_"+e+".json");case 4:if(s=a.sent,s){a.next=9;break}return a.abrupt("return",!1);case 9:return a.abrupt("return",JSON.parse(s));case 10:case"end":return a.stop()}}),a)})))()},updateOfflineRun:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isMultiplayer){a.next=2;break}return a.abrupt("return",!1);case 2:return t.run&&t.run.questId||(t.run={_id:t.runId,userId:t.$store.state.user._id,questId:e,version:t.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:t.remotePlay,dataSharedWithPartner:t.dataSharedWithPartner,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:t.info.quest.picture,thumb:t.info.quest.thumb||"default-quest-thumb.png",title:t.info.quest.title,type:t.info.quest.type,zipcode:t.info.quest.location.zipcode,town:t.info.quest.location.town,country:t.info.quest.location.country},language:t.lang,userData:{name:t.$store.state.user.name,picture:t.$store.state.user.picture,location:t.$store.state.user.location},history:[],historyIndex:0}),a.next=5,t.saveOfflineRun(e,t.run,!1);case 5:case"end":return a.stop()}}),a)})))()},saveOfflineAnswer:function(e,t,a,s){var n=this;return r()(o.a.mark((function r(){var i,l,c,u,d,p,m,h;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!n.isMultiplayer){o.next=2;break}return o.abrupt("return",!1);case 2:return o.next=4,n.checkIfStepIsAlreadyPlayedInRun(n.step.stepId,n.player);case 4:if(i=o.sent,l=n.run.conditionsDone,c=!1,u=0,e?(l=s?n.updateConditions(l,s,!0,"",!0,n.player,t):n.updateConditions(l,n.step.stepId,!0,n.step.type,!0,n.player,t),c=!0,u=n.hint.used||n.nbTry>1?n.step.points/2:n.step.points,d="success"):(c=!0,d="fail",l=s?n.updateConditions(l,s,!1,"",!0,n.player,t):n.updateConditions(l,n.step.stepId,!1,n.step.type,!0,n.player,t)),t={stepId:n.step.stepId,stepNumber:n.step.number,nbTry:t&&t.nbTry?t.nbTry:1,ended:c,score:u,reward:0,status:d,useHint:!1,date:new Date,online:!1},"new-item"===n.step.type&&(n.run.inventory?n.run.inventory.push(n.step.answers):n.run.inventory=[n.step.answers],-1===l.indexOf("objectWon_"+n.step.stepId)&&l.push("objectWon_"+n.step.stepId)),!i){if(p=!1,n.run.answers&&n.run.answers.length>1)for(m=0;m<n.run.answers.length;m++)n.run.answers[m]&&n.run.answers[m].stepId&&null!==n.run.answers[m].stepId&&n.run.answers[m].stepId===n.step.stepId&&(p=!0,t.nbTry=n.run&&n.run.answers[m]?n.run.answers[m].nbTry+1:1,t.useHint=n.run.answers[m].useHint,n.run.answers[m]=t);p||(n.run.answers||(n.run.answers=[]),n.run.answers.push(t))}return n.run.conditionsDone=l,o.next=15,n.saveOfflineRun(n.questId,n.run,a);case 15:if(h=o.sent,!h){o.next=18;break}return o.abrupt("return",!0);case 18:return o.abrupt("return",!1);case 19:case"end":return o.stop()}}),r)})))()},setReadMoreAsRead:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=0;a<e.run.answers.length;a++)e.run.answers[a]&&e.run.answers[a].stepId&&null!==e.run.answers[a].stepId&&e.run.answers[a].stepId===e.step.stepId&&(e.run.answers[a].readMoreRead=!0);return t.next=3,Za.SetReadMoreAsRead(e.runId,e.step.stepId);case 3:case"end":return t.stop()}}),t)})))()},passOfflineStep:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isMultiplayer){a.next=2;break}return a.abrupt("return",!1);case 2:return t.run.conditionsDone=t.updateConditions(t.run.conditionsDone,e,!1,t.step.type,!0,t.player),a.next=5,t.saveOfflineRun(t.questId,t.run,!0);case 5:case"end":return a.stop()}}),a)})))()},offlineCheckAccess:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isMultiplayer){a.next=2;break}return a.abrupt("return",!1);case 2:if(!(e&&e.startDate&&e.startDate.enabled&&e.startDate.date)){a.next=7;break}if(s=new Date,n=Date.UTC(e.startDate.date.substr(0,4),parseInt(e.startDate.date.substr(5,2),10)-1,e.startDate.date.substr(8,2),0,0,0),!(s.getTime()<n)){a.next=7;break}return a.abrupt("return",{message:"Step not yet available",date:e.startDate.date});case 7:return a.abrupt("return",!0);case 8:case"end":return a.stop()}}),a)})))()},saveOfflineRun:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!s.isMultiplayer){o.next=2;break}return o.abrupt("return",!1);case 2:return a&&(t.dateUpdated=new Date),o.next=5,uu.writeInFile(s.questId,"run_"+e+".json",JSON.stringify(t),!0);case 5:if(r=o.sent,!r){o.next=10;break}return o.abrupt("return",!0);case 10:return o.abrupt("return",!1);case 11:case"end":return o.stop()}}),n)})))()},getNextOfflineStep:function(e,t,a,s){var n=this;return r()(o.a.mark((function r(){var i,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P,_,T,I,A,$,O,M,z,N,R,j;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=n.run.conditionsDone||[],a||(a="P1"),o.next=4,n.updateOfflineRun(e);case 4:if(!(n.run.history&&n.run.historyIndex<n.run.history.length)){o.next=9;break}return n.run.historyIndex++,o.next=8,n.saveOfflineRun(e,n.run,!0);case 8:return o.abrupt("return",{id:n.run.history[n.run.historyIndex-1],extra:s});case 9:if(!(n.info.quest.steps&&n.offline.steps.length<1)){o.next=19;break}l=0;case 11:if(!(l<n.info.quest.steps.length)){o.next=19;break}return o.next=14,uu.readFile(e,"step_"+n.info.quest.steps[l]+".json");case 14:c=o.sent,n.offline.steps.push(JSON.parse(c));case 16:l++,o.next=11;break;case 19:if(u=n.run.currentChapter,u){o.next=26;break}if(!(n.info.quest.chapters&&n.info.quest.chapters.length>0)){o.next=25;break}u=n.info.quest.chapters[0],o.next=26;break;case 25:return o.abrupt("return",!1);case 26:if(!t){o.next=66;break}return o.next=29,n.listSpecificTypeForAChapter(n.offline.steps,u,"locate-marker");case 29:if(d=o.sent,p=[],!(d&&d.length>0)){o.next=52;break}l=0;case 33:if(!(l<d.length)){o.next=52;break}if(!t||d[l].answers===t){o.next=36;break}return o.abrupt("continue",49);case 36:if(!n.run.conditionsDone||-1!==n.run.conditionsDone.indexOf("stepDone"+a+"_"+d[l].stepId)){o.next=49;break}if(!(d[l].conditions&&d[l].conditions.length>0)){o.next=48;break}m=0;case 39:if(!(m<d[l].conditions.length)){o.next=45;break}if(-1!==n.run.conditionsDone.indexOf(d[l].conditions[m])){o.next=42;break}return o.abrupt("continue",49);case 42:m++,o.next=39;break;case 45:p.push({id:d[l].stepId,nbConditions:d[l].conditions.length}),o.next=49;break;case 48:p.push({id:d[l].stepId,nbConditions:0});case 49:l++,o.next=33;break;case 52:if(0!==p.length){o.next=54;break}return o.abrupt("return",{id:"",extra:s});case 54:for(h=0,l=0;l<p.length;l++)p[l].nbConditions>=h&&(g=p[l].id,h=p[l].nbConditions);if("simple"!==n.info.quest.editorMode){o.next=61;break}return o.next=59,n.saveOfflineAnswer("success",!1,!0);case 59:o.next=65;break;case 61:i.push("stepDone_"+g.toString()),i.push("stepDone"+n.player+"_"+g.toString()),n.run.conditionDone=i,n.run.currentStep=g;case 65:t=!1;case 66:return o.next=68,n.listForAChapter(n.offline.steps,u,a);case 68:for(f=o.sent,b=!1,v=!1,y=0,w=0;w<i.length;w++)-1!==i[w].indexOf("counterIncrement_")&&y++;if(!(f&&f.length>0)){o.next=202;break}q=0,l=0;case 76:if(!(l<f.length)){o.next=202;break}if(q=0,!i||-1!==i.indexOf("stepDone"+a+"_"+f[l].stepId)){o.next=199;break}if(!(f[l].conditions&&f[l].conditions.length>0)){o.next=126;break}m=0;case 81:if(!(m<f[l].conditions.length)){o.next=124;break}if(!s||"chapterCounterOver"!==s.type){o.next=87;break}if("chapterTimerOver"===f[l].conditions[m]){o.next=85;break}return o.abrupt("continue",199);case 85:s.oldType="chapterCounterOver",delete s.type;case 87:if(-1!==f[l].conditions[m].indexOf("countergreater_")||-1!==f[l].conditions[m].indexOf("counterlower_")||-1!==f[l].conditions[m].indexOf("haveobject_")||-1!==f[l].conditions[m].indexOf("nothaveobject_")||-1!==f[l].conditions[m].indexOf("combineobject_")||"chapterTimerOver"===f[l].conditions[m]){o.next=92;break}if(-1!==i.indexOf(f[l].conditions[m])){o.next=90;break}return o.abrupt("continue",199);case 90:o.next=121;break;case 92:if(-1===f[l].conditions[m].indexOf("countergreater_")){o.next=96;break}if(x=parseInt(f[l].conditions[m].replace("countergreater_",""),10),!(y<=x)){o.next=96;break}return o.abrupt("continue",199);case 96:if(-1===f[l].conditions[m].indexOf("counterlower_")){o.next=100;break}if(C=parseInt(f[l].conditions[m].replace("counterlower_",""),10),!(y>=C)){o.next=100;break}return o.abrupt("continue",199);case 100:if(-1===f[l].conditions[m].indexOf("nothaveobject_")){o.next=106;break}if(S=f[l].conditions[m].replace("nothaveobject_",""),-1===i.indexOf("objectWon_"+S)){o.next=104;break}return o.abrupt("continue",199);case 104:o.next=110;break;case 106:if(-1===f[l].conditions[m].indexOf("haveobject_")){o.next=110;break}if(k=f[l].conditions[m].replace("haveobject_",""),-1!==i.indexOf("objectWon_"+k)){o.next=110;break}return o.abrupt("continue",199);case 110:if(-1===f[l].conditions[m].indexOf("combineobject_")){o.next=119;break}if(!s||"combine"!==s.type){o.next=118;break}if(P=f[l].conditions[m].replace("combineobject_",""),-1!==s.items.indexOf(P)){o.next=115;break}return o.abrupt("continue",199);case 115:q++,o.next=119;break;case 118:return o.abrupt("continue",199);case 119:if("chapterTimerOver"!==f[l].conditions[m]||s&&"chapterCounterOver"===s.oldType){o.next=121;break}return o.abrupt("continue",199);case 121:m++,o.next=81;break;case 124:o.next=128;break;case 126:if(!s||"chapterCounterOver"!==s.type){o.next=128;break}return o.abrupt("continue",199);case 128:if("geolocation"!==f[l].type){o.next=136;break}if(!n.info.quest||"advanced"!==n.info.quest.editorMode){o.next=136;break}return v=!0,s||(s={}),s.geosteps||(s.geosteps=[]),s.geosteps.push(f[l].stepId),f[l].options&&f[l].options.locations&&f[l].options.locations.length>0&&(s.locations||(s.locations=[],s.visibles=[]),s.locations.push({lat:f[l].options.locations[0].lat,lng:f[l].options.locations[0].lng,distance:f[l].options.distance}),f[l].options&&f[l].options.mode&&"map"===f[l].options.mode&&s.visibles.push({marker:f[l].options.locator?f[l].options.locator:"",coords:{lat:f[l].options.locations[0].lat,lng:f[l].options.locations[0].lng,distance:f[l].options.distance}})),o.abrupt("continue",199);case 136:if("locate-marker"!==f[l].type){o.next=143;break}if(!n.info.quest||"advanced"!==n.info.quest.editorMode){o.next=143;break}return b=!0,s||(s={}),s.steps||(s.steps=[]),s.steps.push(f[l].stepId),o.abrupt("continue",199);case 143:if("increment-counter"!==f[l].type){o.next=159;break}return i.push("counterIncrement_"+f[l].stepId.toString()),i.push("stepDone_"+f[l].stepId.toString()),i.push("stepDone"+a+"_"+f[l].stepId.toString()),n.run.conditionDone=i,y++,o.next=151,n.findStepForCounterValueOffline(n.offline.steps,e,n.run.version,y);case 151:if(_=o.sent,_){o.next=158;break}return o.next=155,n.getNextOfflineStep(e,t,a,s);case 155:T=o.sent,_=T.id,s=T.extra;case 158:return o.abrupt("return",{id:_,extra:s});case 159:if("end-chapter"!==f[l].type||s&&"combine"===s.type){o.next=191;break}if(f[l].options&&f[l].options.resetHistory&&n.removeHistory(),I=void 0,!f[l].options||!f[l].options.resetChapterProgression){o.next=166;break}n.removeAllConditionsOfAChapter(n.offline.steps,i,f[l].chapterId),o.next=176;break;case 166:if(f[l].options&&f[l].options.resetChapterProgressionAndMoveNext&&n.removeAllConditionsOfAChapter(n.offline.steps,i,f[l].chapterId),!f[l].options||!f[l].options.chapterId||""==f[l].options.chapterId){o.next=173;break}return o.next=170,n.moveToChapter(f[l].options.chapterId);case 170:I=o.sent,o.next=176;break;case 173:return o.next=175,n.moveToNextChapter();case 175:I=o.sent;case 176:if("end"===I){o.next=188;break}return f[l].options&&f[l].options.resetChapterProgression||(i.push("stepDone_"+f[l].stepId.toString()),i.push("stepDone"+n.player+"_"+f[l].stepId.toString()),n.run.conditionDone=i),o.next=180,n.getNextOfflineStep(e,t,a,s);case 180:return A=o.sent,I=A.id,s=A.extra,s||(s={}),o.next=186,n.getOfflineChapterTimer(n.run.version);case 186:s.timer=o.sent,s.chapter="new";case 188:return o.abrupt("return",{id:I,extra:s});case 191:if(!s||"combine"!==s.type){o.next=197;break}if(!(q>1)){o.next=195;break}return $=f[l].stepId,o.abrupt("return",{id:$,extra:s});case 195:o.next=199;break;case 197:return O=f[l].stepId,o.abrupt("return",{id:O,extra:s});case 199:l++,o.next=76;break;case 202:if(!n.info.quest||"simple"!==n.info.quest.editorMode||b||s&&"combine"===s.type){o.next=212;break}return o.next=205,n.moveToNextChapter();case 205:if(M=o.sent,"end"===M){o.next=211;break}return o.next=209,n.getNextOfflineStep(e,t,a,s);case 209:z=o.sent,M=z.id;case 211:return o.abrupt("return",{id:M,extra:s});case 212:if(!b||v||!n.info.quest||"advanced"!==n.info.quest.editorMode){o.next=218;break}if(1!==s.steps.length){o.next=217;break}return o.abrupt("return",{id:s.steps[0],extra:s});case 217:return o.abrupt("return",{id:"locationMarker",extra:s});case 218:if(!v||!n.info.quest||"advanced"!==n.info.quest.editorMode){o.next=224;break}if(1!==s.geosteps.length){o.next=223;break}return o.abrupt("return",{id:s.geosteps[0],extra:""});case 223:return o.abrupt("return",{id:"geolocation",extra:s});case 224:if(!("advanced"===n.info.quest.editorMode&&f&&f.length>0)){o.next=229;break}for(N=[],R=0;R<f.length;R++)f[R].conditions.length>0&&-1!==f[R].conditions[0].indexOf("stepRandom_")&&i&&-1===i.indexOf("stepDone"+a+"_"+f[R].stepId)&&f[R].conditions.length>0&&(j=f[R].conditions[0].replace("stepRandom_",""),-1!==i.indexOf("stepDone"+a+"_"+j)&&N.push(f[R].stepId));if(!(N.length>0)){o.next=229;break}return o.abrupt("return",{id:N[Math.floor(Math.random()*N.length)],extra:s});case 229:return o.abrupt("return",{id:"",extra:s});case 230:case"end":return o.stop()}}),r)})))()},listSpecificTypeForAChapter:function(e,t,a){return r()(o.a.mark((function s(){var n,r;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=[],e)for(r=0;r<e.length;r++)e[r].chapterId.toString()===t.toString()&&e[r].type.toString()===a.toString()&&n.push(e[r]);return s.abrupt("return",n);case 3:case"end":return s.stop()}}),s)})))()},listForAChapter:function(e,t,a){return r()(o.a.mark((function s(){var n,r;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=[],e)for(r=0;r<e.length;r++)e[r].chapterId!==t||"All"!==e[r].player&&e[r].player!==a&&a||n.push(e[r]);return s.abrupt("return",n);case 3:case"end":return s.stop()}}),s)})))()},listWonObjects:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],!(e.run.conditionsDone&&e.run.conditionsDone.length>0)){t.next=29;break}s=0;case 3:if(!(s<e.run.conditionsDone.length)){t.next=29;break}if(-1===e.run.conditionsDone[s].indexOf("objectWon_")){t.next=26;break}return n=e.run.conditionsDone[s].replace("objectWon_",""),t.next=8,uu.readFile(e.questId,"step_"+n+".json");case 8:if(r=t.sent,!r){t.next=26;break}if(i=JSON.parse(r),!(i.options&&i.options.picture&&i.options.title)){t.next=26;break}if(-1!==i.options.picture.indexOf("statics")){t.next=24;break}if(!i.options.pictures||!i.options.pictures[e.lang]||""===i.options.pictures[e.lang]){t.next=19;break}return t.next=16,uu.readBinaryFile(e.questId,i.options.pictures[e.lang]);case 16:l=t.sent,t.next=22;break;case 19:return t.next=21,uu.readBinaryFile(e.questId,i.options.picture);case 21:l=t.sent;case 22:t.next=25;break;case 24:l=i.options.pictures&&i.options.pictures[e.lang]&&""!==i.options.pictures[e.lang]?i.options.pictures[e.lang]:i.options.picture;case 25:a.push({step:n,picture:l,originalPicture:i.options.picture,title:i.options.title,pictures:i.options.pictures,titles:i.options.titles});case 26:s++,t.next=3;break;case 29:return t.abrupt("return",a);case 30:case"end":return t.stop()}}),t)})))()},checkIfStepIsAlreadyPlayedInRun:function(e,t){var a=this;return r()(o.a.mark((function s(){return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(a.run&&a.run.conditionsDone&&a.run.conditionsDone.length>0)){s.next=3;break}if(-1===a.run.conditionsDone.indexOf("stepDone"+t+"_"+e)){s.next=3;break}return s.abrupt("return",!0);case 3:return s.abrupt("return",!1);case 4:case"end":return s.stop()}}),s)})))()},findStepForCounterValueOffline:function(e,t,a,s){return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.length)){t.next=7;break}if(-1===e[a].conditions.indexOf("counter_"+s)){t.next=4;break}return t.abrupt("return",e[a].stepId);case 4:a++,t.next=1;break;case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},updateConditions:function(e,t,a,s,o,n,r){if(!t)return e;"undefined"===typeof e&&(e=[]),-1===e.indexOf("stepDone_"+t)&&o&&e.push("stepDone_"+t),-1===e.indexOf("stepDone"+n+"_"+t)&&o&&e.push("stepDone"+n+"_"+t);var i=["info-text","info-video","new-item","character","help","end-chapter"];return-1===i.indexOf(s)&&-1===e.indexOf("stepFail_"+t)&&-1===e.indexOf("stepSuccess_"+t)&&(a?(e.push("stepSuccess_"+t),e.push("stepSuccess"+n+"_"+t)):(e.push("stepFail_"+t),e.push("stepFail"+n+"_"+t))),"choose"==s&&-1===e.indexOf("stepAnswerNb_"+t+"_"+r)&&e.push("stepAnswerNb_"+t+"_"+(parseInt(r,10)+1)),e},removeStepFromConditions:function(e,t){if(!e)return e;for(var a=[],s=0;s<e.length;s++)-1!==e[s].indexOf("_"+t)&&a.push(s);for(s=a.length-1;s>=0;s--)e.splice(a[s],1);return e},removeConditionsUntilLastMarker:function(e,t,a){var s=this;return r()(o.a.mark((function a(){var n,r,i,l,c,u;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=[t],r=0;case 2:if(!(r<7)){a.next=18;break}return a.next=5,uu.readFile(s.questId,"step_"+t+".json");case 5:if(l=a.sent,l&&(i=JSON.parse(l)),"locate-marker"!==i.type){a.next=9;break}return a.abrupt("break",18);case 9:if(c=!1,i.conditions&&i.conditions.length>0)for(u=0;u<i.conditions.length;u++)-1!==i.conditions[u].indexOf("stepDone_")&&(t=i.conditions[u].replace("stepDone_",""),n.push(t),c=!0);if(c){a.next=13;break}return a.abrupt("return",{found:!1,updatedCondition:e});case 13:if(6!==r){a.next=15;break}return a.abrupt("return",{found:!1,updatedCondition:e});case 15:r++,a.next=2;break;case 18:for(u=0;u<n.length;u++)e=s.removeStepFromConditions(e,n[u]);return a.abrupt("return",{found:!0,updatedCondition:e});case 20:case"end":return a.stop()}}),a)})))()},removeAllConditionsOfAChapter:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,s.listForAChapter(e,a);case 2:if(r=o.sent,r&&r.length>0)for(i=0;i<r.length;i++)t=s.removeStepFromConditions(t,r[i].stepId);s.run.conditionsDone=t;case 5:case"end":return o.stop()}}),n)})))()},moveToNextChapter:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=0,e.info.quest.chapters&&e.info.quest.chapters.length>0)if(e.run.currentChapter&&0!==e.run.currentChapter)for(s=0;s<e.info.quest.chapters.length;s++)e.info.quest.chapters[s]===e.run.currentChapter&&(a=s<e.info.quest.chapters.length-1?e.info.quest.chapters[s+1]:"end");else a=e.info.quest.chapters[0];return e.run.currentChapter=a,t.t0=e,t.next=6,e.getOfflineChapterTimer();case 6:return t.t1=t.sent,t.t0.startChapterCountDown.call(t.t0,t.t1),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))()},moveToChapter:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.run.currentChapter=e,a.t0=t,a.next=4,t.getOfflineChapterTimer();case 4:return a.t1=a.sent,a.t0.startChapterCountDown.call(a.t0,a.t1),a.abrupt("return",e);case 7:case"end":return a.stop()}}),a)})))()},getOfflineChapterTimer:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,is.getChapterById(t.questId,t.run.currentChapter,e);case 2:if(s=a.sent,s&&s.countDownTime){a.next=5;break}return a.abrupt("return",0);case 5:return a.abrupt("return",s.countDownTime);case 6:case"end":return a.stop()}}),a)})))()},cutSound:function(){var e=document.getElementById("background-music");e&&(this.sound&&this.sound.status&&"play"===this.sound.status?(e.pause(),this.sound.status="pause"):(e.play(),this.sound.status="play",this.sound.tempMute=!1))},reduceVolume:function(){var e=document.getElementById("background-music");e&&(e.volume=.2)},resetVolume:function(){var e=document.getElementById("background-music");e&&(e.volume=1)},manageAudio:function(){var e=this.step.audioStream&&(this.step.audioStream[this.lang]&&""!==this.step.audioStream[this.lang]||this.step.audioStream[this.info.quest.mainLanguage]&&""!==this.step.audioStream[this.info.quest.mainLanguage]);this.resetVolume(),"info-video"===this.step.type||e?this.reduceVolume():this.sound.tempMute&&this.cutSound()},swithFullscreenMode:function(){AndroidFullScreen.immersiveMode()},startFullScreen:function(){this.info.quest.customization&&this.info.quest.customization.hideFullScreen||document.addEventListener("deviceready",this.swithFullscreenMode,!1)},reloadPageInAWhile:function(){var e=this;setTimeout((function(){e.moveToStep(e.navigatingToStepId)}),15e3)},initOfflineMode:function(){var e=this.info.quest.customization&&this.info.quest.customization.forceOnline,t=this.$store.state.user._id===this.info.quest.authorUserId,a=Array.isArray(this.info.quest.editorsUserId)&&this.info.quest.editorsUserId.includes(this.$store.state.user._id);this.offline.active=!(this.isMultiplayer||e||!this.isHybrid||t||a||this.$store.state.user.isAdmin)},computeGoodAnswers:function(){if(this.run.conditionsDone){for(var e=this.run.conditionsDone,t=0,a=0,s=0;s<e.length;s++)-1!==e[s].indexOf("stepSuccess_")?(t++,a++):-1!==e[s].indexOf("stepFail_")&&t++;this.score.nbQuestions=t,this.score.nbGoodAnwers=a}}},computed:{chatNotification:function(){return this.$store.state.chatNotification}},watch:{}},Yo=Uo,Go=(a("c195"),Object(tt["a"])(Yo,ks,Ps,!1,null,"159f08f2",null)),Ho=Go.exports,Wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll text-white",class:e.quest&&e.quest.customization&&e.quest.customization.endColor?"":"background-dark",staticStyle:{height:"100vh"},style:e.quest&&e.quest.customization&&e.quest.customization.endColor&&""!==e.quest.customization.endColor?"background-color: "+e.quest.customization.endColor:""},[e.warnings.noNetwork?a("div",[a("div",{staticClass:"bg-primary"},[a("div",{staticClass:"centered q-pa-lg"},[a("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),a("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),!e.warnings.noNetwork&&e.quest&&e.quest.customization&&e.quest.customization.removeScoring?a("div",{staticClass:"q-ma-md rounded background-lighter2"},[a("div",{staticClass:"q-pa-md",class:"font-"+e.quest.customization.font},[e.quest.customization&&e.quest.customization.endMessage&&e.quest.customization.endMessage[e.lang]&&(e.nbGoodAnwers!==e.nbQuestions||e.quest.customization.endMessageForPerfectScore&&e.quest.customization.endMessageForPerfectScore[e.lang]&&""===e.quest.customization.endMessageForPerfectScore[e.lang])?a("div",{staticClass:"text-h4",domProps:{innerHTML:e._s(e.quest.customization.endMessage[e.lang])}}):e._e(),e.quest.customization&&e.quest.customization.endMessage&&e.nbGoodAnwers===e.nbQuestions&&e.quest.customization.endMessageForPerfectScore&&e.quest.customization.endMessageForPerfectScore[e.lang]&&""!==e.quest.customization.endMessageForPerfectScore[e.lang]?a("div",{staticClass:"text-h4",domProps:{innerHTML:e._s(e.quest.customization.endMessageForPerfectScore[e.lang])}}):e._e(),!e.quest.customization||!e.quest.customization.endMessage||!e.quest.customization.endMessage[e.lang]||e.quest.customization.endMessage[e.lang]&&""===e.quest.customization.endMessage[e.lang]?a("div",{staticClass:"text-h4"},[e._v(e._s(e.$t("label.ThanksForPlaying")))]):e._e(),a("div",[e._v(e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions))])]),e.isUserAuthor?a("div",{staticClass:"back centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?a("div",{staticClass:"back centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.openValidation(e.questId,e.quest.version)}}})],1):e._e()]):e._e(),e.quest&&e.quest.customization&&e.quest.customization.endMessage&&e.quest.customization.endMessage[e.lang]&&""!==e.quest.customization.endMessage[e.lang]?a("div",{staticClass:"q-px-md text-grey align-right",staticStyle:{"font-size":"0.8em","margin-top":"-10px"}},[e._v("\n    "+e._s(e.endDate)+" "+e._s(e.ranking.total)+"\n  ")]):e._e(),e.isUserAuthor?a("div",{staticClass:"back centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():a("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?a("div",[a("div",{staticClass:"relative-position header-point-box"},[a("div",{staticClass:"full-width centered header-point absolute"},[a("img",{attrs:{src:"statics/images/icon/wonpoint.png"}}),a("div",[e._v("+"+e._s(e.run.stars))])]),a("div",{staticStyle:{"padding-top":"100px"}},[a("div",{staticClass:"rounded background-lighter2 centered full-width",staticStyle:{"padding-top":"35px"}},[a("h2",{staticClass:"text-center title2 q-mt-xl q-mb-sm q-mx-xl text-uppercase"},[e._v(e._s(e.$t("label.YouWin")))]),e.quest.customization&&e.quest.customization.hideUserProgressionOnEnd?e._e():a("div",{staticClass:"relative-position progress-box"},[a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(Math.floor(100*e.level.progress))+"%\n                ")])]),a("div",{staticClass:"rank-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])]),e.run&&e.run.duration?a("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourTime"))+": "+e._s(e.run.duration.h)+"h "+e._s(e.run.duration.m)+"m\n            ")]):e._e(),e.run&&e.run.score&&e.run.score>0?a("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourScore"))+": "+e._s(e.run.score)+" "+e._s(e.$t("label.pts"))+"\n            ")]):e._e(),e.run&&e.ranking&&e.ranking.position&&"-"!==e.ranking.position?a("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.YourRanking"))+": "+e._s(e.ranking.position)+"\n            ")]):e._e(),e.run?a("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions)+"\n            ")]):e._e()])])]),e.unlockedQuest.show?a("div",{staticClass:"centered q-mt-md subtitle5"},[a("span",{staticClass:"text-primary"},[e._v(e._s(e.$t("label.YouWonNewGame")))]),a("div",{staticClass:"centered q-pa-md"},[a("q-btn",{staticClass:"glossy",attrs:{color:"primary",label:e.$t("label.SolveThisQuest")},on:{click:function(t){return e.$router.push("/quest/play/"+e.unlockedQuest.id)}}})],1)]):e._e(),e.quest.customization&&e.quest.customization.hideAuthorOnEnd?e._e():a("div",[a("div",{staticClass:"centered q-mt-md subtitle5"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),a("div",{staticClass:"centered q-px-md"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.quest&&"discovery"!==e.quest.type&&e.run.score>0&&e.quest&&"public"===e.quest.access,expression:"quest && quest.type !== 'discovery' && run.score > 0 && quest && quest.access === 'public'"}]},[a("a",{staticClass:"small",on:{click:e.openChallengeBox}},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),a("span",{staticClass:"secondary-font-very-small"},[e._v(" "+e._s(e.$t("label.or"))+" ")])]),a("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])]),e.author?a("div",{staticClass:"centered q-mt-lg"},[a("div",{staticClass:"user-card user-card-small relative-position",staticStyle:{margin:"0px"}},[a("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.author.statistics&&e.author.statistics.nbQuestsCreated&&e.author.statistics.nbQuestsCreated>0?a("div",{staticClass:"profile-item-creator"},[a("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.author.statistics&&e.author.statistics.nbQuestsSuccessful&&e.author.statistics.nbQuestsSuccessful>0?a("div",{staticClass:"profile-item-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.author.level+".svg"}})]):e._e()])]),a("div",{staticClass:"centered subtitle3"},[e._v("\n            "+e._s(e.author.name)+"\n          ")]),e.$store.state.user.id!==e.author._id?a("div",{staticClass:"centered q-pt-sm"},[e.author.status&&"friend"===e.author.status?e._e():a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.author.status&&"friend"===e.author.status?a("div",{staticClass:"centered"},[a("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n                "+e._s(e.$t("label.Followed"))+"\n              ")])],1):e._e()],1):e._e()]):e._e()]),a("q-dialog",{attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[a("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1):e._e()]),e.warnings.noNetwork?e._e():a("div",{staticClass:"q-pa-md"},[a("div",[e.quest&&"discovery"!==e.quest.type&&e.showAddReview?a("div",{staticClass:"q-mx-md q-mt-xl q-pa-sm centered"},[a("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),a("div",{staticClass:"q-py-sm"},[a("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"white",disable:e.reviewSent},on:{click:function(t){e.showReviewText=!0}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1)]):e._e(),a("q-dialog",{staticClass:"over-map",model:{value:e.showReviewText,callback:function(t){e.showReviewText=t},expression:"showReviewText"}},[a("div",{staticClass:"q-pa-md q-pt-lg centered bg-grey"},[a("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),a("div",{staticClass:"q-py-sm"},[a("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"secondary",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),a("div",{staticClass:"subtitle6 q-pt-lg"},[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width q-my-sm",attrs:{placeholder:e.$t("label.Feedback"),rows:"4",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}}),a("div",{staticClass:"q-pa-md"},[a("a",{on:{click:function(t){e.showReviewText=!1}}},[e._v(e._s(e.$t("label.Cancel")))])])],1)]),e.showReward&&e.run&&e.run.questData?a("div",{staticClass:"q-pa-md q-mt-lg centered rounded background-lighter2"},[a("div",{staticClass:"subtitle4 q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),a("div",{staticClass:"q-pt-md"},[a("img",{staticClass:"badge-alone",attrs:{src:e.uploadUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),a("div",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e()],1)]),e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():a("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}]},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),a("div",[e._v(e._s(e.$t("label.RankingEndIntro")))]),e._l(e.ranking.items,(function(t){return a("div",{key:t.id,staticClass:"q-py-md rank-box"},[a("div",[a("userCard",{attrs:{user:t,size:"medium"}})],1),a("div",{staticClass:"full-width"},["-"!==t.name?a("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?a("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?a("div",{staticClass:"subtitle6"},[t.location.postalCode?a("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?a("span",[e._v(", ")]):e._e(),t.location.country?a("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),a("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[a("div",{staticClass:"col-6 centered"},[a("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                "+e._s(t.stars)+"\n              ")]),a("div",{staticClass:"col-6 centered"},[a("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                "+e._s(t.position)+"\n              ")])])])])}))],2),a("div",{staticClass:"back centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/home")}}})],1),e.isUserAdmin?a("div",{staticClass:"back centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.version)}}})],1):e._e()]):e._e(),e.warnings.noNetwork?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md bg-graaly-blue-dark"},[a("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[a("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),a("div",{staticClass:"subtitle3 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?a("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?a("div",[a("div",{staticClass:"q-pa-md centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),a("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?a("div",[a("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return a("q-item",{key:t.friendId},[a("q-item-section",[a("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?a("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?a("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():a("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),a("q-item-label",[e._v(e._s(t.name))]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],staticClass:"normal-button glossy",attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(a){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),a("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?a("div",{staticClass:"panel-bottom q-pa-md"},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg centered"},[e._v(e._s(e.$t("label.YouWonABonus")))]),a("div",{staticClass:"q-pa-md text-primary"},[a("q-card",{staticClass:"q-ma-sm"},[a("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),a("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")]),a("q-card-section",[a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.closeBonus}},[a("div",[e._v(e._s(e.$t("label.Close")))])])],1)],1)],1)]):e._e()])],1)},Vo=[],Jo={add:function(e,t,a,s,o){return Qe().put("review/add",{questId:e,version:t,runId:a,text:s,rating:o}).catch((function(e){return console.log(e.request)}))},list:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Qe().get("review/list",{params:{filter:JSON.stringify(e),options:JSON.stringify(t)}});case 2:if(s=a.sent,200===s.status){a.next=5;break}throw new Error("Request "+s.config.url+" failed with code "+s.status+"/"+s.statusText+". Data returned: "+s.data);case 5:return a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()}},Ko=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pt-lg"},[a("div",{staticClass:"q-pa-md bg-grey-8"},[a("div",{staticClass:"subtitle4 centered"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),a("div",{staticClass:"subtitle6 q-py-md"},[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),a("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[a("q-input",{attrs:{dark:"",label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))])],1),a("div",{staticClass:"centered q-pt-md"},[a("a",{on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),a("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)])])},Zo=[],Xo={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.submitSuggestion(e.place);case 2:a=t.sent,a&&a.data&&"ok"===a.data.status?(Jt(e.$t("label.ThankYouForYourProposal"),"positive"),e.emitClose()):Jt(e.$t("label.TechnicalIssue"),"error");case 4:case"end":return t.stop()}}),t)})))()}}},en=Xo,tn=Object(tt["a"])(en,Ko,Zo,!1,null,null,null),an=tn.exports,sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative-position q-mr-md user-card",class:"user-card-"+e.size+(e.showName?" user-"+e.size+"-with-title":""),on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[a("div",{style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "}),e.showName?a("div",{staticClass:"centered subtitle6 user-card-name"},[e._v("\n    "+e._s(e.user.name)+"\n  ")]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?a("div",{staticClass:"profile-item-creator"},[a("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?a("div",{staticClass:"profile-item-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()])},on=[],nn={props:["user","size","showName"],data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},rn=nn,ln=Object(tt["a"])(rn,sn,on,!1,null,null,null),cn=ln.exports,un={components:{suggest:an,userCard:cn},data:function(){return{title:"Enqute russie",lang:"",rating:0,comment:"",ranking:{show:!1,items:[],position:"-",total:""},score:{},nbQuestions:0,nbGoodAnwers:0,level:{color:"white",upgraded:!1},run:{score:0,stars:1},endDate:"",quest:null,friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},unlockedQuest:{show:!1,id:0},author:null,questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,showReviewText:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},isHybrid:window.cordova,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.lang=e.$t("label.shortLang"),uu.clearAllRunningProcesses(),t.next=4,e.loadData();case 4:e.isHybrid&&"android"===cordova.platformId&&StatusBar.hide(),a=new Date,e.endDate=Bo()(a).format("DD/MM/YYYY, k:mm"),e.isUserAuthor||e.isUserAdmin||uu.setTimeout(e.showNotationBox,7e3);case 8:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noNetwork=!1,a=!1,e.$q.loading.show(),t.next=5,Za.listForAQuest(e.questId);case 5:if(s=t.sent,!s){t.next=58;break}if(s&&s.data&&s.data.length>0)for(n=0;n<s.data.length;n++)"finished"===s.data[n].status&&(e.run=s.data[n]),"in-progress"===s.data[n].status&&(e.run=s.data[n],a=!0);if(!e.run||!e.run.version){t.next=14;break}return t.next=11,Ot.getByIdOnline(e.questId,e.run.version);case 11:r=t.sent,t.next=17;break;case 14:return t.next=16,Ot.getLastById(e.questId);case 16:r=t.sent;case 17:if(r&&r.data&&(e.quest=r.data),!r||!r.data){t.next=25;break}return e.isUserAuthor=e.$store.state.user._id===e.quest.authorUserId,t.next=22,Jo.list({questId:e.questId,userId:e.$store.state.user._id,version:e.run.version},{limit:1});case 22:i=t.sent,l=i.data&&i.data.length>=1,e.showAddReview=!e.isUserAdmin&&!e.isUserAuthor&&!l;case 25:return e.score.old=e.$store.state.user.points,e.score.old||(e.score.old=0),e.initProgression(),t.next=30,e.getOfflineRunData();case 30:return c=t.sent,c&&(e.run=c),t.next=34,e.computeGoodAnswers();case 34:return t.next=36,Za.endRun(e.run._id,c,e.questId,e.quest.version,e.quest.mainLanguage);case 36:if(u=t.sent,!u||!u.data){t.next=44;break}return e.quest.customization&&e.quest.customization.removeScoring||(e.run.score=u.data.score,e.run.reward=u.data.reward,e.run.stars=u.data.stars,u.data.newBonus&&""!==u.data.newBonus&&(e.run.bonus=u.data.newBonus,e.showBonus=!0),e.run.questData&&e.run.questData.rewardPicture&&""!==e.run.questData.rewardPicture&&(e.showReward=!0)),u.data.unlockedQuest&&(e.unlockedQuest.show=!0,e.unlockedQuest.id=u.data.unlockedQuest),t.next=42,e.removeOfflineData();case 42:t.next=45;break;case 44:e.warnings.noNetwork=!0;case 45:if(e.run._id){t.next=50;break}return t.next=48,Za.listForAQuest(e.questId);case 48:s=t.sent,s&&s.data&&s.data.length>0&&(e.run=s.data[0]);case 50:return e.quest.customization&&e.quest.customization.removeScoring||(e.score.new=a?e.score.old+e.run.stars:e.score.old,e.$store.state.user.points=e.score.new,uu.setTimeout(e.updateProgression,3e3)),t.next=53,e.getRanking();case 53:d=uu.getDurationFromNow(e.run.dateCreated),e.run.duration={h:d.h,m:d.m},e.getAuthorProfile(),t.next=59;break;case 58:e.warnings.noNetwork=!0;case 59:e.$q.loading.hide();case 60:case"end":return t.stop()}}),t)})))()},initProgression:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.level=ya(e.score.old);case 1:case"end":return t.stop()}}),t)})))()},updateProgression:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge||e.showBonus?uu.setTimeout(e.updateProgression,2e3):(a=ya(e.score.new),a.level>e.level.level?(e.level.progress=1,e.$store.state.user.level=a.level,e.level=a,e.level.progress=.1,e.level.upgraded=!0):e.level=a);case 1:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===e.questId){t.next=5;break}return t.next=3,Za.listPlayersForThisQuest(e.questId);case 3:a=t.sent,a&&a.data&&(a.data.position?e.ranking.position=a.data.position:e.ranking.position=a.data,a.data.total&&(e.ranking.total=a.data.total));case 5:case"end":return t.stop()}}),t)})))()},showRanking:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.ranking.show=!0,a=!1,s=0;s<e.ranking.items.length;s++)e.ranking.items[s].id===e.$store.state.user._id&&(a=!0);a||(e.ranking.items.push({id:e.$store.state.user._id,score:e.run.score,name:e.$store.state.user.name,picture:e.$store.state.user.picture,position:e.ranking.items.length+1,isFriend:!0,className:"selected"}),uu.setTimeout(e.updateRanking,3e3));case 4:case"end":return t.stop()}}),t)})))()},updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],a=this.ranking.items[e-1];this.$set(this.ranking.items,e,a),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),uu.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.$router.push("/user/updateprofile"),t.next=9;break;case 4:return e.showChallenge=!0,t.next=7,Mt.listFriends(e.$store.state.user._id,0,100);case 7:a=t.sent,a&&a.data&&a.data.length>0&&(e.friends=a.data,e.filteredFriends=e.friends);case 9:case"end":return t.stop()}}),t)})))()},closeChallenge:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge=!1;case 1:case"end":return t.stop()}}),t)})))()},challenge:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Mt.challengeFriend(e.friendId,t.run._id);case 2:for(s=0;s<t.filteredFriends.length;s++)t.filteredFriends[s].friendId===e.friendId&&(t.filteredFriends[s].isChallenged=!0,i["a"].set(t.filteredFriends,s,t.filteredFriends[s]));case 3:case"end":return a.stop()}}),a)})))()},challengeAll:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.challengeFriend("all",e.run._id);case 2:case"end":return t.stop()}}),t)})))()},closeBonus:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showBonus=!1;case 1:case"end":return t.stop()}}),t)})))()},closeReward:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showReward=!1;case 1:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.getFriend(e.quest.authorUserId);case 2:a=t.sent,a&&a.data&&"friend"!==a.data.status&&(e.author=a.data);case 4:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){return this.author.picture&&-1!==this.author.picture.indexOf("http")?this.author.picture:this.author.picture?this.uploadUrl+"/upload/profile/"+this.author.picture:"statics/images/icon/profile-small.png"},follow:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"===e.$store.state.user.name){t.next=5;break}return t.next=3,Mt.addFriend(e.quest.authorUserId);case 3:a=t.sent,a?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?Jt(e.$t("label.InvitationSent"),"success"):Jt(e.$t("label.FriendsAdded"),"success"),i["a"].set(e.author,"status","friend")):Jt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},openValidation:function(e,t){this.$router.push("/admin/validate/"+e+"/version/"+t)},showNotationBox:function(){this.showReviewText=!0},addReview:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.rating){t.next=3;break}return Jt(e.$t("label.PleaseRateTheQuest"),"warning"),t.abrupt("return",!1);case 3:return e.$q.loading.show(),t.next=6,Jo.add(e.questId,e.run.version,e.run._id,e.comment,e.rating);case 6:e.$q.loading.hide(),e.reviewSent=!0,e.showReviewText=!1,Jt(e.$t("label.ReviewSent"),"positive");case 10:case"end":return t.stop()}}),t)})))()},computeGoodAnswers:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=e.run.conditionsDone,s=0,n=0,r=0;r<a.length;r++)-1!==a[r].indexOf("stepSuccess_")?(s++,n++):-1!==a[r].indexOf("stepFail_")&&s++;e.nbQuestions=s,e.nbGoodAnwers=n;case 6:case"end":return t.stop()}}),t)})))()},getOfflineRunData:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.readFile(e.questId,"run_"+e.questId+".json");case 2:if(a=t.sent,a){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",JSON.parse(a));case 8:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.removeDirectory(e.questId);case 2:return a=t.sent,t.next=5,e.removeQuestFromOfflineList(e.questId);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return r()(o.a.mark((function t(){var a,s,n,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.checkIfFileExists("","quests.json");case 2:if(a=t.sent,!a){t.next=13;break}return t.next=6,uu.readFile("","quests.json");case 6:for(n=t.sent,s=JSON.parse(n),r=-1,i=0;i<s.list.length;i++)s.list[i].questId===e&&(r=i);return-1!==r&&s.list.splice(r,1),t.next=13,uu.writeInFile("","quests.json",JSON.stringify(s),!0);case 13:case"end":return t.stop()}}),t)})))()}}},dn=un,pn=Object(tt["a"])(dn,Wo,Vo,!1,null,null,null),mn=pn.exports,hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper background-team"},[a("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[a("div",{staticClass:"q-pa-md team"},[a("div",{staticClass:"centered title2 q-mb-lg text-white"},[e._v(e._s(e.$t("label.Welcome")))]),a("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[a("div",[this.$route.params.teamId&&"none"!==this.$route.params.teamId?e._e():a("q-input",{attrs:{outlined:"",label:e.$t("label.TeamID"),error:e.$v.form.teamId.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamId.$touch},model:{value:e.form.teamId,callback:function(t){e.$set(e.form,"teamId",t)},expression:"form.teamId"}}),-1===e.options.indexOf("individual")?a("q-input",{attrs:{outlined:"",label:e.$t("label.TeamName"),error:e.$v.form.teamName.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamName.$touch},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}}):e._e(),-1===e.options.indexOf("firstandlast")?a("q-input",{attrs:{outlined:"",label:e.$t("label.YourFullName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),-1!==e.options.indexOf("firstandlast")?a("q-input",{attrs:{outlined:"",label:e.$t("label.FirstAndLastName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e()],1),a("div",{staticClass:"text-center"},[a("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.Start"),loading:e.submitting}}),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{type:"submit",loading:e.submitting,title:e.$t("label.Start"),color:"primary",icon:"arrow_forward"}})],1),e.$route.query.redirect&&""!==e.$route.query.redirect?a("div",{staticClass:"text-center"},[a("q-btn",{staticClass:"large-btn",attrs:{flat:"",color:"primary",label:e.$t("label.Back")},on:{click:function(t){return e.redirect()}}}),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.Back"),color:"secondary",icon:"arrow_back"},nativeOn:{click:function(t){return e.redirect()}}})],1):e._e()]),a("div",{staticClass:"centered smaller version secondary-font"},[e._v("\n          Version "+e._s(e.version)+" -\n          "),a("img",{attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n          "),a("img",{attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}}),a("img",{attrs:{src:"statics/icons/game/flag-es.png"},on:{click:function(t){return e.switchLanguage("es")}}})])])])])},gn=[],fn=a("b5ae"),bn={data:function(){return{questId:this.$route.params.id,lang:this.$route.params.lang,option:this.$route.params.option?this.$route.params.option:"none",options:[],form:{teamId:"",teamName:"",name:""},isHybrid:window.cordova,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",submitting:!1,version:"2.3.35"}},mounted:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.$store&&e.$store.state&&e.$store.state.user&&e.$store.state.user.name&&"-"===e.$store.state.user.name)){t.next=5;break}return t.next=3,Za.checkIfAlreadyPlayingAGame(e.questId);case 3:a=t.sent,a&&a.data&&a.data.status&&e.$router.push("/quest/play/"+e.questId);case 5:e.options=e.option.split("-"),-1!==e.options.indexOf("individual")&&(e.form.teamName=uu.randomId()),e.$route.params.teamId&&"none"!==e.$route.params.teamId&&(e.form.teamId=e.$route.params.teamId),e.switchLanguage(e.lang);case 9:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.submitting=!0,-1===e.options.indexOf("checklastname")){t.next=8;break}if(a=e.form.name.split(" "),!(a.length<2)){t.next=8;break}return Jt(e.$t("label.PleaseEnterFirstNameAndLastName"),"error"),e.submitting=!1,t.abrupt("return",!1);case 8:return t.next=10,Be.playAnonymous(e.$t("label.shortLang"));case 10:if(s=t.sent,!s||!s.data||"ok"!==s.data.status){t.next=25;break}if(!s.data.user){t.next=21;break}return window.localStorage.setItem("jwt",s.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),t.next=17,Za.initTeamPlay(e.questId,e.lang,e.form.teamId,e.form.teamName,e.form.name);case 17:n=t.sent,n&&n.data&&(n.data.message?(Jt(e.$t("label."+n.data.message),"error"),e.submitting=!1):e.$router.push("/quest/play/"+e.questId+"/version/"+n.data.version+"/step/0/"+e.lang+"?remoteplay=false")),t.next=23;break;case 21:Jt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 23:t.next=27;break;case 25:Jt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 27:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e},redirect:function(){this.$router.push(this.$route.query.redirect)}},validations:{form:{teamId:{required:fn["required"]},teamName:{required:fn["required"]},name:{required:fn["required"]}}}},vn=bn,yn=(a("c078"),Object(tt["a"])(vn,hn,gn,!1,null,"365bd27b",null)),wn=yn.exports,qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},xn=[],Cn={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},Sn=Cn,kn=Object(tt["a"])(Sn,qn,xn,!1,null,null,null),Pn=kn.exports,_n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-welcome"},[a("div",{staticClass:"welcome"},[a("q-tab-panels",{staticClass:"bg-transparent q-mb-xl",attrs:{animated:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[a("q-tab-panel",{attrs:{name:"first"}},[a("div",{staticClass:"text-center"},[a("q-img",{staticClass:"login-logo-top",attrs:{src:"statics/new/logo-color-white.png"}}),a("div",{staticClass:"subtitle text-accent text-uppercase"},[e._v(e._s(e.$t("label.CreationStudio")))])],1),a("div",{staticClass:"q-px-lg"},[a("div",{staticClass:"q-mb-lg"},[e._v(e._s(e.$t("label.BuilderChooseUserType")))]),a("div",{staticClass:"flex no-wrap items-start"},[a("text-btn-square",{staticClass:"q-mb-lg q-mr-sm",attrs:{title:e.$t("label.AProfessional"),color:"secondary",icon:"business_center"},nativeOn:{click:function(t){return e.selectType("pro")}}}),a("q-btn",{staticStyle:{"max-width":"50px","border-radius":"12px"},attrs:{icon:"info",color:"secondary"},on:{click:function(t){return e.popupType("pro")}}})],1),a("div",{staticClass:"flex no-wrap items-start"},[a("text-btn-square",{staticClass:"q-mb-lg q-mr-sm",attrs:{title:e.$t("label.AnIndividual"),color:"primary",icon:"family_restroom"},nativeOn:{click:function(t){return e.selectType("individual")}}}),a("q-btn",{staticStyle:{"max-width":"50px","border-radius":"12px"},attrs:{icon:"info",color:"primary"},on:{click:function(t){return e.popupType("individual")}}})],1),a("div",{staticClass:"flex no-wrap items-start"},[a("text-btn-square",{staticClass:"q-mb-lg q-mr-sm",attrs:{title:e.$t("label.Education"),color:"accent",icon:"school",disable:""},nativeOn:{click:function(t){return e.selectType("education")}}}),a("q-btn",{staticStyle:{"max-width":"50px","border-radius":"12px"},attrs:{icon:"info",color:"accent"},on:{click:function(t){return e.popupType("education")}}})],1)])]),a("q-tab-panel",{attrs:{name:"second"}},[a("q-card",{staticClass:"new-dialog bg-transparent",attrs:{flat:""}},[a("q-card-section",{staticClass:"dialog-title flex justify-between items-center"},[a("icon-btn-square",{attrs:{color:"education"===e.userType?"secondary":"accent",fill:"",icon:"navigate_before"},nativeOn:{click:function(t){e.panel="first"}}}),a("q-space"),"pro"===e.userType?a("span",[e._v(e._s(e.$t("label.AProfessional")))]):e._e(),"individual"===e.userType?a("span",[e._v(e._s(e.$t("label.AnIndividual")))]):e._e(),"education"===e.userType?a("span",[e._v(e._s(e.$t("label.Education")))]):e._e()],1),"pro"===e.userType?a("q-card-section",[a("div",[a("div",{staticClass:"centered"},[a("div",{staticClass:"dialog-title"},[e._v(e._s(e.$t("label.PrivateQuest"))+" "),a("span",{staticClass:"dialog-subtitle"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])])]),a("div",{staticClass:"dialog-text q-mb-md"},[a("div",{domProps:{innerHTML:e._s(e.$t("label.PrivateProQuestDesc1"))}})]),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.TryForFree"),color:"education"===e.userType?"secondary":"accent",icon:"play_arrow"},nativeOn:{click:function(t){return e.selectAccess("private")}}})],1),a("div",[a("div",{staticClass:"centered"},[a("div",{staticClass:"dialog-title"},[e._v(e._s(e.$t("label.PublicQuest"))+" "),a("span",{staticClass:"dialog-subtitle"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])])]),a("div",{staticClass:"dialog-text q-mb-md"},[a("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc1"))}}),e.readMorePublicProQuest?a("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc2"))}}):e._e()]),a("text-btn-square",{staticClass:"q-mb-md",attrs:{title:e.$t("label.TryForFree"),color:"education"===e.userType?"secondary":"accent",icon:"play_arrow"},nativeOn:{click:function(t){return e.selectAccess("public")}}})],1)]):e._e(),"individual"===e.userType?a("q-card-section",[a("div",[a("div",{staticClass:"dialog-text"},[e._v(e._s(e.$t("label.BuilderIntro")))]),a("div",{staticClass:"centered"},[a("div",{staticClass:"dialog-title"},[e._v(e._s(e.$t("label.PrivateQuest")))])]),a("div",{staticClass:"dialog-text q-mb-md"},[a("div",[e._v(e._s(e.$t("label.PrivateQuestDesc1")))]),a("div",[e._v(e._s(e.$t("label.AnIndividualDesc1")))])]),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.CreatePrivateQuest"),color:"education"===e.userType?"secondary":"accent",icon:"play_arrow"},nativeOn:{click:function(t){return e.selectAccess("private")}}})],1)]):e._e()],1)],1),a("q-tab-panel",{attrs:{name:"last"}},[a("q-card",{staticClass:"new-dialog bg-transparent",attrs:{flat:""}},[a("q-card-section",{staticClass:"dialog-title flex justify-between items-center"},[a("icon-btn-square",{attrs:{color:"education"===e.userType?"secondary":"accent",fill:"",icon:"navigate_before"},nativeOn:{click:function(t){e.panel="second"}}}),a("q-space"),"pro"===e.userType?a("span",{staticClass:"text-right"},[e._v(e._s(e.$t("label.AProfessional"))),a("br"),e._v(e._s("private"===e.access?e.$t("label.PrivateQuest"):e.$t("label.PublicQuest")))]):e._e(),"individual"===e.userType?a("span",{staticClass:"text-right"},[e._v(e._s(e.$t("label.AnIndividual"))),a("br"),e._v(e._s("private"===e.access?e.$t("label.PrivateQuest"):e.$t("label.PublicQuest")))]):e._e(),"education"===e.userType?a("span",{staticClass:"text-right"},[e._v(e._s(e.$t("label.Education"))),a("br"),e._v(e._s("private"===e.access?e.$t("label.PrivateQuest"):e.$t("label.PublicQuest")))]):e._e()],1),"public"===e.access?a("q-card-section",[a("span",{staticClass:"dialog-text",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.AcceptTheRules"),color:"education"===e.userType?"secondary":"accent",icon:"done"},nativeOn:{click:function(t){return e.createNewQuest()}}})],1):e._e(),"private"===e.access?a("q-card-section",["pro"===e.userType?a("span",{staticClass:"dialog-text",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateProWelcomeMessage"))}}):e._e(),"individual"===e.userType?a("span",{staticClass:"dialog-text",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}):e._e(),"pro"===e.userType?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.AcceptTheRules"),color:"education"===e.userType?"secondary":"accent",icon:"done"},nativeOn:{click:function(t){return e.createNewQuest()}}}):e._e(),"individual"===e.userType?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.AcceptTheRules"),color:"education"===e.userType?"secondary":"accent",icon:"done"},nativeOn:{click:function(t){return e.buyPrivateQuest()}}}):e._e()],1):e._e()],1)],1)],1),a("q-dialog",{attrs:{position:"right"},model:{value:e.infoPopup,callback:function(t){e.infoPopup=t},expression:"infoPopup"}},[a("q-card",{staticClass:"new-dialog q-mx-md",class:["pro"===e.infoType?"bg-secondary":"individual"===e.infoType?"bg-primary":"bg-accent"]},[a("q-card-section",{staticClass:"dialog-title flex justify-between items-center"},["pro"===e.infoType?a("span",[e._v(e._s(e.$t("label.AProfessional")))]):e._e(),"individual"===e.infoType?a("span",[e._v(e._s(e.$t("label.AnIndividual")))]):e._e(),"education"===e.infoType?a("span",[e._v(e._s(e.$t("label.Education")))]):e._e(),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"education"===e.infoType?"secondary":"accent",icon:"close",rotation:"",fill:""}})],1),"pro"===e.infoType?a("q-card-section",[e._v("\n          "+e._s(e.$t("label.AProfessionalDesc1"))+"\n        ")]):e._e(),"individual"===e.infoType?a("q-card-section",[e._v("\n          "+e._s(e.$t("label.AnIndividualDesc1"))+"\n        ")]):e._e(),"education"===e.infoType?a("q-card-section",[e._v("\n          "+e._s(e.$t("label.EducationDesc"))+"\n        ")]):e._e()],1)],1)],1)])},Tn=[],In={components:{iconBtnSquare:mt,textBtnSquare:ht["a"],backBar:$a},data:function(){return{userType:null,access:null,questType:"quest",readMorePublicProQuest:!1,privateQuest:{price:"-",buyable:!1,computed:!1},panel:"first",infoPopup:!1,infoType:"pro",infoColor:"secondary"}},mounted:function(){return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{selectType:function(e){this.userType=e,this.panel="second"},popupType:function(e){this.infoType=e,this.infoPopup=!0},selectAccess:function(e){this.access=e,this.panel="last"},changeUserType:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.userType=e,t.moveToTop(),"individual"!==e){a.next=5;break}return a.next=5,t.initPay();case 5:case"end":return a.stop()}}),a)})))()},changeAccess:function(e){this.access=e,this.moveToTop()},changeQuestType:function(e){this.questType=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.createNewQuest();case 1:case"end":return t.stop()}}),t)})))()},createNewQuest:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={title:{}},t.next=3,Ot.create(a,e.access,e.userType,e.questType);case 3:s=t.sent,s&&s.data&&s.data.questId?e.$router.push("/quest/builder/"+s.data.questId):Jt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:if(!e.privateQuest.computed){t.next=4;break}return t.abrupt("return");case 4:e.privateQuest.computed=!0,store.products.byId["privatequestprice"]?(a=store.get("privatequestprice"),e.displayPrice(a)):store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){Jt(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(e.displayPrice),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var t=r()(o.a.mark((function t(a){var s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(a);case 2:s=t.sent,s?a.finish():Jt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 11:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.privateQuest.price=e.price,e.canPurchase&&(this.privateQuest.buyable=!0)},savePurchase:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.purchasePrivateQuest(null,e);case 2:if(s=a.sent,!(s&&s.data&&s.data.status&&"ok"===s.data.status)){a.next=7;break}return a.next=6,t.createNewQuest();case 6:return a.abrupt("return",!0);case 7:return a.abrupt("return",!1);case 8:case"end":return a.stop()}}),a)})))()},cancel:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/profile/me");case 1:case"end":return t.stop()}}),t)})))()},backToUserType:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userType=null,e.access=null;case 2:case"end":return t.stop()}}),t)})))()}}},An=In,$n=(a("2d2d"),Object(tt["a"])(An,_n,Tn,!1,null,"0a252c11",null)),On=$n.exports,Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll row",class:{"bg-white":!e.chapters.showNewStepOverview}},[a("div",{staticClass:"col bg-white",class:{"desktop-only":e.chapters.showNewStepOverview},staticStyle:{"min-width":"260px"}},[a("div",{staticClass:"settings-bar background-dark",class:{"desktop-only":e.chapters.showNewStepOverview}},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn q-pa-sm",attrs:{to:{path:"/profile/me"}}},[a("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e.readOnly&&"rejected"===e.quest.status?a("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.YourQuestHasNotBeenPublished"))+"\n      ")]):e._e(),!e.readOnly&&!this.isAdmin||"published"!==e.quest.status&&"unpublished"!==e.quest.status&&"rejected"!==e.quest.status?e._e():a("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n      ")]),a("div",{staticClass:"q-pa-md full-width"},[e.tabs.progress>0?a("span",[e.form.fields.title[e.languages.current]?a("span",[e.form.fields.title[e.languages.current].length<=30?a("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?a("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():a("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?a("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?a("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):a("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),a("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",class:{"desktop-only":e.chapters.showNewStepOverview},model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[a("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:"quest"===e.quest.type?e.$t("label.Intro")+" ("+e.languages.current+")":e.$t("label.YourRoom"),default:""}}),"quest"===e.quest.type?a("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}):e._e(),a("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier?a("q-tab",{attrs:{name:"payments",icon:e.getTabIcon(5),label:e.$t("label.Payments")},on:{click:e.listPayments}}):e._e(),e.isEdition?a("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(6),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?a("q-tab",{attrs:{name:"results",icon:e.getTabIcon(7),label:e.$t("label.Results")}}):e._e()],1),a("q-separator"),"settings"===e.tabs.selected?a("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[this.quest.languages&&0!==this.quest.languages.length?e._e():a("div",[a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"add_circle"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),e._l(e.form.languages,(function(t){return a("div",{key:t.code},[a("q-btn",{staticClass:"glossy full-width q-mt-sm",attrs:{disabled:e.readOnly,color:"primary"},on:{click:function(a){return e.selectLanguage(t.value)}}},[e._v(e._s(t.label))])],1)}))],2)],1),a("div",{staticClass:"centered q-mt-md"},[a("strong",[e._v(e._s(e.$t("label.Or")))])]),a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"content_copy"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.UseAModel")))]),e._l(e.samples.list,(function(t){return a("q-card",{key:t.questId,staticClass:" q-mt-md my-card"},[a("q-card-section",{staticClass:"bg-secondary text-white"},[a("div",{staticClass:"text-h6"},[e._v(e._s(t.name))])]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:""},on:{click:function(a){return e.selectSample(t.questId)}}},[e._v(e._s(e.$t("label.Select")))])],1)],1)}))],2)],1)],1),this.quest.languages.length>0?a("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?a("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")]):e._e(),"public"===this.quest.access?a("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")]):e._e(),this.quest.isPremium?a("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")]):e._e(),a("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),a("div",{staticClass:"outline q-pa-md q-my-sm"},[a("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}})],1),"quest"===e.quest.type?a("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.QuestType"))+"\n          "),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),a("div",{staticClass:"q-gutter-md"},[a("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),a("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode&&this.quest.isPremium?a("div",[a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PlayersNumber"),options:e.form.players,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestMultiplayer")}}})]},proxy:!0}],null,!1,3064096794),model:{value:e.form.fields.playersNumber,callback:function(t){e.$set(e.form.fields,"playersNumber",t)},expression:"form.fields.playersNumber"}})],1):e._e()],1):e._e(),a("div",{staticClass:"outline q-pa-md q-my-sm"},[a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}})],1),a("div",{staticClass:"outline q-pa-md q-my-sm"},[a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShowCountDown")},model:{value:e.form.fields.countDownTime.enabled,callback:function(t){e.$set(e.form.fields.countDownTime,"enabled",t)},expression:"form.fields.countDownTime.enabled"}}),a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.StopGameAfterCountDown")},model:{value:e.form.fields.countDownTime.stopGame,callback:function(t){e.$set(e.form.fields.countDownTime,"stopGame",t)},expression:"form.fields.countDownTime.stopGame"}})],1),a("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.StartingPointOfTheQuest"))+"\n          "),e.isIOs?e._e():a("div",[a("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():a("div",{staticClass:"location-address"},[a("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?a("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest"),value:e.form.fields.startingPlace},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}}):e._e()],1),a("a",{on:{click:function(t){return e.getCurrentLocation()}}},[a("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?a("div",[a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),a("table",[a("tr",[a("td",[a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}})],1),a("td",[a("q-btn",{staticClass:"q-ma-md",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])],1)])])],1):e._e()]),"room"===this.quest.type?a("div",{staticClass:"outline q-pa-md q-my-sm"},[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ReadMoreLink")},model:{value:e.form.fields.readMoreLink,callback:function(t){e.$set(e.form.fields,"readMoreLink",t)},expression:"form.fields.readMoreLink"}})],1):e._e(),a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GameAvailability"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.LimitNumberOfPlayerInOneHour")},model:{value:e.form.fields.limitNumberOfPlayer,callback:function(t){e.$set(e.form.fields,"limitNumberOfPlayer",t)},expression:"form.fields.limitNumberOfPlayer"}})],1),e.form.fields.scheduling&&0===e.form.fields.scheduling.length?a("q-btn",{staticClass:"full-width",on:{click:e.startSchedule}},[e._v(e._s(e.$t("label.ScheduleGame")))]):e._e(),e.form.fields.scheduling&&e.form.fields.scheduling.length>0?a("div",[a("div",{staticClass:"centered"},[a("strong",[e._v(e._s(e.$t("label.GameSchedule")))])]),a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.form.fields.scheduling,(function(t,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+s)))]),a("div",{staticClass:"col"},[a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.From"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[0],callback:function(a){e.$set(t,0,a)},expression:"schedule[0]"}})],1),a("div",{staticClass:"col"},[a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.To"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[1],callback:function(a){e.$set(t,1,a)},expression:"schedule[1]"}})],1)])})),a("q-btn",{staticClass:"full-width",attrs:{flat:""},on:{click:e.resetSchedule}},[e._v(e._s(e.$t("label.Reset")))])],2):e._e(),e.form.fields.customization?a("div",["quest"===e.quest.type?a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.UserCanReplayGame"),options:e.form.userReplays,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.customization.userReplay,callback:function(t){e.$set(e.form.fields.customization,"userReplay",t)},expression:"form.fields.customization.userReplay"}}):e._e(),a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.UserCanNotQuit")},model:{value:e.form.fields.customization.userCanNotQuit,callback:function(t){e.$set(e.form.fields.customization,"userCanNotQuit",t)},expression:"form.fields.customization.userCanNotQuit"}})],1):e._e()],1)]),a("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GamePayment"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnMobile")},model:{value:e.showPaymentBox,callback:function(t){e.showPaymentBox=t},expression:"showPaymentBox"}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnMobileHelp")}}}),e.showPaymentBox?a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}):e._e(),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnYourSide")},nativeOn:{click:function(t){return e.displayTierPaymentWarning(t)}},model:{value:e.showTierPaymentBox,callback:function(t){e.showTierPaymentBox=t},expression:"showTierPaymentBox"}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnYourSideHelp")}}})],1),e.showTierPaymentBox?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.tierPriceForPlayer,callback:function(t){e.$set(e.form.fields,"tierPriceForPlayer",t)},expression:"form.fields.tierPriceForPlayer"}}),a("div",[e._v("\n                  "+e._s(e.$t("label.qrCodeUsageDescription"))+"\n                  "),a("q-radio",{attrs:{disable:e.readOnly,val:"onetime",label:e.$t("label.QRCodeValidOneTime")},model:{value:e.form.fields.customization.qrCodeValidity,callback:function(t){e.$set(e.form.fields.customization,"qrCodeValidity",t)},expression:"form.fields.customization.qrCodeValidity"}}),a("q-radio",{attrs:{disable:e.readOnly,val:"oneday",label:e.$t("label.QRCodeValidOneDay")},model:{value:e.form.fields.customization.qrCodeValidity,callback:function(t){e.$set(e.form.fields.customization,"qrCodeValidity",t)},expression:"form.fields.customization.qrCodeValidity"}}),a("q-radio",{attrs:{disable:e.readOnly,val:"onemonth",label:e.$t("label.QRCodeValidOneMonth")},model:{value:e.form.fields.customization.qrCodeValidity,callback:function(t){e.$set(e.form.fields.customization,"qrCodeValidity",t)},expression:"form.fields.customization.qrCodeValidity"}})],1)],1):e._e(),e.form.fields.customization?a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HidePaiement")},model:{value:e.form.fields.customization.hidePaymentBox,callback:function(t){e.$set(e.form.fields.customization,"hidePaymentBox",t)},expression:"form.fields.customization.hidePaymentBox"}})],1):e._e()],1)]):e._e(),a("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.UserData"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ForcePlayerToHaveAccount")},model:{value:e.form.fields.forcePlayerToHaveAccount,callback:function(t){e.$set(e.form.fields,"forcePlayerToHaveAccount",t)},expression:"form.fields.forcePlayerToHaveAccount"}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ForcePlayerToHaveAccountHelp")}}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShareUserDataWithCreator")},model:{value:e.form.fields.shareUserDataWithCreator,callback:function(t){e.$set(e.form.fields,"shareUserDataWithCreator",t)},expression:"form.fields.shareUserDataWithCreator"}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ShareUserDataWithCreatorHelp")}}})],1)])]):e._e(),a("q-separator"),a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameIntroduction"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"description"},[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),"quest"===e.quest.type?a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}):e._e(),e.form.fields.customization?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.CustomizeYourName")},model:{value:e.form.fields.customization.authorName,callback:function(t){e.$set(e.form.fields.customization,"authorName",t)},expression:"form.fields.customization.authorName"}})],1):e._e(),null!==e.form.fields.picture?a("div",[a("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),a("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.picture[e.languages.current]}})]):e._e(),e.isIOs?e._e():a("div",[e.readOnly?e._e():a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["picturefile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),a("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?a("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),a("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),null!==e.form.fields.thumb?a("div",[a("p",[e._v(e._s(e.$t("label.SmallPicture"))+" :")]),a("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.thumb[e.languages.current]}})]):e._e(),e.isIOs?e._e():a("div",[e.readOnly?e._e():a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["thumbfile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),a("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadThumb}})],1),e.isIOs?a("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),a("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadThumb}})]):e._e(),!e.form.fields.snapshots||e.form.fields.snapshots.length<3?a("div",[e.isIOs?e._e():a("div",[e.readOnly?e._e():a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["snapshot"].click()}}},[e._v(e._s(e.$t("label.AddAGameSnapshot")))]),a("input",{ref:"snapshot",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadSnapshot}})],1),e.isIOs?a("div",[e._v("\n                  "+e._s(e.$t("label.AddAGameSnapshot"))+":\n                  "),a("input",{ref:"snapshot",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadSnapshot}})]):e._e()]):e._e(),e.form.fields.snapshots&&e.form.fields.snapshots.length>0?a("div",[a("div",[e._v(e._s(e.$t("label.Snapshots"))+":")]),a("div",{staticClass:"row"},[e.form.fields.snapshots.length>0?a("div",{staticClass:"col-4 centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[0]}}),a("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(0)}}})],1):e._e(),e.form.fields.snapshots.length>1?a("div",{staticClass:"col-4 centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[1]}}),a("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(1)}}})],1):e._e(),e.form.fields.snapshots.length>2?a("div",{staticClass:"col-4 centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/snapshot/"+e.form.fields.snapshots[2]}}),a("q-btn",{attrs:{icon:"delete"},on:{click:function(t){return e.removeSnapshot(2)}}})],1):e._e()])]):e._e(),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.MyGameIsIndoorRemoveWarningsOnStart")},model:{value:e.form.fields.customization.removeWarning,callback:function(t){e.$set(e.form.fields.customization,"removeWarning",t)},expression:"form.fields.customization.removeWarning"}})],1)],1)]),a("q-separator"),a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameInterface"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[this.quest.isPremium&&e.form.fields.customization&&e.form.fields.customization.audio&&e.form.fields.customization.audio[e.languages.current]&&""!==e.form.fields.customization.audio[e.languages.current]?a("div",[a("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.form.fields.customization.audio[e.languages.current]))]),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!this.quest.isPremium||e.isIOs||e.readOnly?e._e():a("div",[a("q-btn-group",{staticClass:"full-width"},[a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["audiofile"].click()}}},[e._v(e._s(e.$t("label.AddAnAudioFile")))])],1),a("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3",hidden:""},on:{change:e.uploadAudio}})],1),this.quest.isPremium&&e.isIOs&&!e.readOnly?a("div",[e._v("\n                "+e._s(e.$t("label.AddAnAudioFile"))+":\n                "),a("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]):e._e(),e.form.fields.customization?a("div",["quest"===e.quest.type?a("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.FontFamily"),options:e.form.fonts,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"option",fn:function(t){var s=t.itemProps,o=t.itemEvents,n=t.opt;return[a("q-item",e._g(e._b({},"q-item",s,!1),o),[a("q-item-section",[a("q-item-label",{class:"font-"+n.value,domProps:{innerHTML:e._s(n.label)}})],1)],1)]}}],null,!1,597358429),model:{value:e.form.fields.customization.font,callback:function(t){e.$set(e.form.fields.customization,"font",t)},expression:"form.fields.customization.font"}}):e._e()],1):e._e(),e.form.fields.customization?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TextColor"),placeholder:"#000000"},model:{value:e.form.fields.customization.fontColor,callback:function(t){e.$set(e.form.fields.customization,"fontColor",t)},expression:"form.fields.customization.fontColor"}})],1):e._e(),e.form.fields.customization?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),this.quest.isPremium&&"quest"===this.quest.type?a("div",[e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?a("div",[a("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),a("img",{staticClass:"limit-size-desktop",attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.logo}}),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeLogo}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():a("div",[a("q-btn-group",{staticClass:"full-width"},[a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["logofile"].click()}}},[e._v(e._s(e.$t("label.AddALogo")))]),a("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),a("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?a("div",[e._v("\n                  "+e._s(e.$t("label.AddALogo"))+":\n                  "),a("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e()]):e._e(),e.form.fields.customization&&e.form.fields.customization.character&&""!==e.form.fields.customization.character?a("div",[a("p",[e._v(e._s(e.$t("label.YourCharacter"))+" :")]),a("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"max-width":"400px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.character}}),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeCharacter}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():a("div",[a("q-btn-group",{staticClass:"full-width"},[a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacter")))]),a("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1),a("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacter}})],1),e.isIOs&&!e.readOnly?a("div",[e._v("\n                "+e._s(e.$t("label.AddACustomCharacter"))+":\n                "),a("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacter}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1):e._e(),e.form.fields.customization&&e.form.fields.customization.characterOnMap&&""!==e.form.fields.customization.characterOnMap?a("div",[a("p",[e._v(e._s(e.$t("label.YourCharacterOnMap"))+" :")]),a("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"max-width":"200px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.customization.characterOnMap}}),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeCharacterOnMap}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():a("div",[a("q-btn-group",{staticClass:"full-width"},[a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterOnMapfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacterOnMap")))]),a("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacterOnMap")}}})],1),a("input",{ref:"characterOnMapfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterOnMap}})],1),e.isIOs&&!e.readOnly?a("div",[e._v("\n                "+e._s(e.$t("label.AddACustomCharacterOnMap"))+":\n                "),a("input",{ref:"characterOnMapfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterOnMap}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacterOnMap")}}})],1):e._e(),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideInventory")},model:{value:e.form.fields.customization.hideInventory,callback:function(t){e.$set(e.form.fields.customization,"hideInventory",t)},expression:"form.fields.customization.hideInventory"}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.DoNotUserGeolocation")},model:{value:e.form.fields.customization.disableGeolocation,callback:function(t){e.$set(e.form.fields.customization,"disableGeolocation",t)},expression:"form.fields.customization.disableGeolocation"}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideObjectCombination")},model:{value:e.form.fields.customization.hideObjectCombination,callback:function(t){e.$set(e.form.fields.customization,"hideObjectCombination",t)},expression:"form.fields.customization.hideObjectCombination"}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.DoNotPreventUserForHint")},model:{value:e.form.fields.customization.doNotPreventUserForHint,callback:function(t){e.$set(e.form.fields.customization,"doNotPreventUserForHint",t)},expression:"form.fields.customization.doNotPreventUserForHint"}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideFullScreen")},model:{value:e.form.fields.customization.hideFullScreen,callback:function(t){e.$set(e.form.fields.customization,"hideFullScreen",t)},expression:"form.fields.customization.hideFullScreen"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.QRCodeMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.qrCodeMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.qrCodeMessage,e.languages.current,t)},expression:"form.fields.customization.qrCodeMessage[languages.current]"}}),a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.GeolocationMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.geolocationMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.geolocationMessage,e.languages.current,t)},expression:"form.fields.customization.geolocationMessage[languages.current]"}})],1):e._e()])]),a("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeEndOfGame"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[a("div",{staticClass:"q-pa-md"},[e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture&&!e.form.fields.customization.removeScoring?a("div",[a("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),a("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"background-color":"#f00"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),a("div",[e._v(e._s(e.$t("label.RewardPictureWarning")))]),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeReward}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!e.isIOs||e.readOnly||e.form.fields.customization.removeScoring?e._e():a("div",{staticClass:"q-mt-md"},[e._v("\n                "+e._s(e.$t("label.AddAReward"))+":\n                "),a("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),a("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),e.isIOs||e.readOnly||e.form.fields.customization.removeScoring?e._e():a("div",{staticClass:"q-mt-md"},[a("q-btn-group",{staticClass:"full-width"},[a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["rewardfile"].click()}}},[e._v(e._s(e.$t("label.AddAReward")))]),a("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),a("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.RemoveScoringAndRating")},model:{value:e.form.fields.customization.removeScoring,callback:function(t){e.$set(e.form.fields.customization,"removeScoring",t)},expression:"form.fields.customization.removeScoring"}})],1),e.form.fields.customization.removeScoring?a("div",[a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessage")+" "+e.currentLanguageForLabels,type:"textarea"},model:{value:e.form.fields.customization.endMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.endMessage,e.languages.current,t)},expression:"form.fields.customization.endMessage[languages.current]"}}),a("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessageForPerfectScore")+" "+e.currentLanguageForLabels,type:"textarea"},model:{value:e.form.fields.customization.endMessageForPerfectScore[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.endMessageForPerfectScore,e.languages.current,t)},expression:"form.fields.customization.endMessageForPerfectScore[languages.current]"}})],1):e._e(),a("div",[a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideUserProgressionOnEnd")},model:{value:e.form.fields.customization.hideUserProgressionOnEnd,callback:function(t){e.$set(e.form.fields.customization,"hideUserProgressionOnEnd",t)},expression:"form.fields.customization.hideUserProgressionOnEnd"}}),a("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideAuthorOnEnd")},model:{value:e.form.fields.customization.hideAuthorOnEnd,callback:function(t){e.$set(e.form.fields.customization,"hideAuthorOnEnd",t)},expression:"form.fields.customization.hideAuthorOnEnd"}})],1)])]):e._e()],1),a("div",[e._v("\n          "+e._s(e.$t("label.Version"))+": "+e._s(e.quest.version)+"\n        ")]),a("div",{staticClass:"centered"},[e.readOnly?e._e():a("q-btn",{staticClass:"glossy large-button q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),"published"!==e.quest.status?a("p",{staticClass:"centered q-pa-md"},[a("q-btn",{attrs:{flat:"",color:"negative",size:"md",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]):e._e(),"steps"===e.tabs.selected?a("div",{staticClass:"q-pa-md arial scroll-on-desktop-80",class:{"desktop-only":e.chapters.showNewStepOverview}},[e.warnings.stepsMissing?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.quest.size.limit<e.quest.size.current?a("div",{staticClass:"text-primary q-pa-md"},[e._v("\n        "+e._s(e.$t("label.OverQuotaMessage"))+"\n        "),a("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.$t("label.RemoveFiles")))])],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?a("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?a("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),a("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return a("li",{key:t._id,staticClass:"list-group-item step-hover"},[e.readOnly?e._e():a("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),a("div",{staticStyle:{"line-height":"3rem",padding:"4px"}},[a("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),a("span",{staticStyle:{"margin-top":"4px"},on:{click:function(a){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():a("q-btn",{staticClass:"float-right",on:{click:function(a){return e.removeStep(t.stepId)}}},[a("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():a("q-btn",{staticClass:"float-right",on:{click:function(a){return e.modifyStep(t)}}},[a("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():a("p",{staticClass:"centered q-mt-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}},[e._v(e._s(e.$t("label.AddAStep")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?a("p",{staticClass:"centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?a("div",{staticClass:"smaller"},[a("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),a("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e(),"advanced"===e.form.fields.editorMode?a("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():a("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),a("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t,s){return a("li",{key:t._id,staticClass:"step-list list-group-item align-top"},[e.readOnly?e._e():a("q-icon",{staticClass:"handle",staticStyle:{"font-size":"1.3rem"},attrs:{name:"reorder"}}),a("div",[a("p",{staticClass:"bigger",staticStyle:{"margin-bottom":"8px"}},[e._v("\n                "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n                "),e.readOnly?e._e():a("q-icon",{staticClass:"float-right q-mt-sm q-ml-md size-1",attrs:{name:"add_box"},nativeOn:{click:function(a){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():a("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(a){return e.removeChapter(t.chapterId)}}}),!e.readOnly&&s>0?a("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"schedule",color:t.countDownTime&&0!=t.countDownTime?"secondary":"black"},nativeOn:{click:function(a){return e.modifyChapterTimer(t.chapterId)}}}):e._e(),e.readOnly?e._e():a("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(a){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?a("q-icon",{staticClass:"float-right q-mt-sm a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(a){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():a("div",[e._v("\n                "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n              ")]),e._l(t.steps,(function(s){return a("div",{key:s._id,staticClass:"step-hover",staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[a("div",{staticClass:"step-text"},[a("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===s.level},attrs:{color:"grey",name:e.getIconFromStepType(s.type)}}),e.readOnly||s.error?e._e():a("span",{on:{click:function(t){return e.playStep(s)}}},["All"!==s.player?a("q-badge",{attrs:{color:"primary",align:"top"}},[e._v(e._s(s.player))]):e._e(),e._v(" "+e._s(s.title[e.languages.current]||s.title[e.quest.mainLanguage]))],1),!e.readOnly&&s.error?a("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(s.error)}}},[a("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                    "+e._s(s.title[e.languages.current]||s.title[e.quest.mainLanguage])+"\n                  ")],1):e._e(),e.readOnly?a("span",[e._v(e._s(s.title[e.languages.current]||s.title[e.quest.mainLanguage]))]):e._e()],1),a("div",{staticClass:"step-button"},[e.readOnly?e._e():a("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(s)}}},[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.insertStep(t.chapterId,s.stepId)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.duplicateStep(s.stepId)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"content_copy"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.Duplicate")))])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(s.stepId)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"delete"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():a("p",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.addChapter()}}},[e._v(e._s(e.$t("label.AddASChapter")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?a("p",{staticClass:"centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?a("div",{staticClass:"smaller"},[a("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),a("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e()]):e._e(),"publish"===e.tabs.selected?a("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["old"===e.quest.status?a("div",[a("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n        ")]),"room"!==e.quest.type?a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),a("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e()],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?a("div",["tovalidate"===e.quest.status?a("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestUnderValidation"))+"\n        ")]):e._e(),"rejected"===e.quest.status?a("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestPublicationRejected"))+"\n        ")]):e._e(),e.chapters.items.length>100?a("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n        ")]):e._e(),"quest"===e.quest.type?a("p",{staticClass:"centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),"room"===e.quest.type?a("p",{staticClass:"centered q-pa-md"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.SeeYourQuestPage")))])],1):e._e(),"tovalidate"!==e.quest.status?a("div",[a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label."+("quest"===e.quest.type?"public"===e.quest.access?"LanguagesPublished":"LanguagesPublishedForPrivate":"PageLanguagesPublished"))))])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.selectLanguageForPublishing,expression:"!selectLanguageForPublishing"}],staticClass:"centered"},[a("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.publish()}}},[e._v(e._s(e.$t("label."+(e.form.fields.languages.length<=1?"AskToPublish":"PublishInAllLanguages"))))]),e.form.fields.languages.length>1?a("div",{staticClass:"centered"},[a("a",{staticClass:"cursor-pointer text-primary",on:{click:function(t){e.selectLanguageForPublishing=!e.selectLanguageForPublishing}}},[e._v(e._s(e.$t("label.SelectLanguageForPublishing")))])]):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.selectLanguageForPublishing,expression:"selectLanguageForPublishing"}],staticClass:"q-px-lg"},[e._l(e.form.fields.languages,(function(t){return a("p",{key:t.lang},[a("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(a){return e.publish(t.lang)}},model:{value:t.published,callback:function(a){e.$set(t,"published",a)},expression:"lang.published"}})],1)})),"public"===e.quest.access&&"quest"===e.quest.type?a("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?a("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1):e._e(),a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?a("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return a("p",{key:t.id},[a("q-toggle",{attrs:{label:t.name},on:{input:function(a){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?a("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),a("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.EditorIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteEditorsHelp"))+"\n              ")]},proxy:!0}],null,!1,658616356),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),"quest"===e.quest.type?a("div",{staticClass:"q-pt-md"},[a("div",{domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest"))}}),a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"_qrcode.png"}})]):e._e(),"room"===e.quest.type?a("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.SaveQuestResultsMarker",{url1:e.uploadUrl+"/upload/quest/"+e.questId+"_score1_qrcode.png",url2:e.uploadUrl+"/upload/quest/"+e.questId+"_score2_qrcode.png",url3:e.uploadUrl+"/upload/quest/"+e.questId+"_score3_qrcode.png"}))}}):e._e()],1)],1),a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"file_download"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Downloads")))]),"quest"===e.quest.type?a("div",[e.isHybrid?e._e():a("div",[a("q-btn",{attrs:{color:"primary",flat:"",type:"a",href:"statics/markers/all.pdf",download:""}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1),e.isHybrid?a("div",[a("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadMarkers()}}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1):e._e(),e.isHybrid?e._e():a("div",[a("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadTexts()}}},[e._v(e._s(e.$t("label.ExportTexts")))])],1)]):e._e()],1)],1),"room"!==e.quest.type?a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),a("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e(),"published"!==e.quest.status?a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),a("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"negative"},on:{click:function(t){return e.removeQuest()}}},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),e._v("\n            "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n          ")],1)],1):e._e(),"published"===e.quest.status?a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),a("q-item-section",[e._v("\n            "+e._s(e.$t("label.YouNeedToUnpublishYourQuestToRemoveIt"))+"\n          ")])],1):e._e()],1):e._e()]):e._e(),"payments"===e.tabs.selected&&e.isEdition?a("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[this.paymentIsLoading?a("div",[e._v("\n        "+e._s(e.$t("label.creationOfQRCodes"))+" ...\n      ")]):e._e(),this.paymentIsLoading?e._e():a("div",[a("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.payments,(function(t){return a("q-item",{key:t._id},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{rounded:""}},[a("img",{attrs:{src:e.uploadUrl+"/upload/tiers/"+t.qrCode+".png"}})])],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.qrCode.replace("tierplay_","")))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("status."+t.status))+" - "+e._s(e._f("formatDate")(t.dateUpdate,e.$store.state.user.language)))])],1),a("q-item-section",{attrs:{side:""}},[a("q-btn-dropdown",{attrs:{icon:"cloud_upload",split:"",dense:""},on:{click:function(a){return e.downloadQRCode(t.qrCode)}}},[a("q-list",["new"===t.status?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.removeCode(t._id)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"delete"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1):e._e(),"new"===t.status?a("q-item",[a("q-item-section",{attrs:{avatar:""}},[e._v("\n                      URL :\n                    ")]),a("q-item-section",[a("q-item-label",[a("input",{domProps:{value:"https://app.graaly.com/webapp/#/quest/play/"+e.questId+"/"+t.qrCode}})])],1)],1):e._e()],1)],1)],1)],1)})),1),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.createNewPaymentQRCode}},[a("span",[e._v(e._s(e.$t("label.CreateNewQRCodeForPlay")))])]),a("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(10)}}},[a("span",[e._v(e._s(e.$t("label.Create10NewQRCodeForPlay")))])]),a("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(50)}}},[a("span",[e._v(e._s(e.$t("label.Create50NewQRCodeForPlay")))])]),a("q-btn",{staticClass:"glossy large-button",attrs:{flat:"",color:"primary"},on:{click:e.printQRCode}},[a("span",[e._v(e._s(e.$t("label.PrintQRCodePages")))])])],1)],1)]):e._e(),"reviews"===e.tabs.selected&&e.isEdition?a("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))])],1):e._e()],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sellings?a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalSellings")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(parseInt(85*e.statistics.statistics.sellings)/100)+" ")])])],1):e._e(),a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalNumberOfPlayers")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.totalPlays)),e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>0?a("span",{staticClass:"smaller",class:{"text-red":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays<=e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished,"text-grey":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished}},[e._v("/"+e._s(e.quest.limitations.nbPlays))]):e._e()]),a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers)+" ")])])],1),a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.NumberOfOngoingPlay")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.onGoing)+"\n          ")])])],1),999!==e.quest.limitations.plan&&9999!==e.quest.limitations.plan&&99999!==e.quest.limitations.plan&&e.quest.limitations.plan>50?a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.NumberOfAllowedPlay")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.quest.limitations.plan)+"\n          ")]),a("div",{staticClass:"centered"},[a("a",{staticClass:"text-primary",attrs:{href:"mailto:sales@graaly.com"}},[e._v(e._s(e.$t("label.ContactUsForMorePlays")))])])])],1):e._e(),999!==e.quest.limitations.plan&&9999!==e.quest.limitations.plan&&99999!==e.quest.limitations.plan&&e.quest.limitations.plan>50?a("q-card",{staticClass:"my-card q-mb-md",class:{"bg-secondary":e.statistics.statistics.remainingPlays<10},attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.NumberOfRemainingPlay")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.remainingPlays)+"\n          ")])])],1):e._e(),a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageScore")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageScore)))]),a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MaxScore"))+e._s(e.$t("label.colons"))+e._s(e.quest.availablePoints.score)+" ")])])],1),a("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[a("q-card-section",[a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageDuration")))])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageDuration)))])])],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?a("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersByAge")}},[a("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return a("q-item",{key:t._id},[t&&!t._id?a("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?a("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?a("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersBySex")}},[a("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return a("q-item",{key:t._id},[a("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),e.reviews.length>0?a("q-item",[a("q-item-section",{attrs:{side:"",top:""}},[a("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1)],1):e._e(),a("q-item",[a("q-item-section",[a("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),a("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return a("q-item",{key:t._id},[a("q-item-section",{attrs:{avatar:""}},[t.userId&&t.userId.picture?a("q-avatar",[a("img",{attrs:{src:e.getAvatar(t.userId.picture)}})]):e._e()],1),a("q-item-section",[t.userId?a("q-item-label",[e._v("\n                    "+e._s(t.userId.name)+"\n                  ")]):e._e(),a("q-item-label",{attrs:{caption:""}},[a("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(a){e.$set(t,"rating",a)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                  ")],1),a("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?a("q-item",[a("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1)],1):e._e(),"results"===e.tabs.selected&&e.isEdition&&"private"===e.quest.access?a("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["published"===e.quest.status?a("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?a("div",[a("q-list",e._l(e.ranking.items,(function(t,s){return a("q-item",{key:s},[a("q-item-section",{attrs:{top:"",avatar:""}},[a("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?a("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?a("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():a("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.userData.name))]),"finished"===t.status?a("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?a("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?a("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n        ")]):e._e(),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),a("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?a("div",[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?a("div",[e._v("\n          "+e._s(e.$t("label.FinalRankingIntro"))+"\n          "),a("q-list",e._l(e.ranking.items,(function(t,s){return a("q-item",{key:s},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[e._v("\n                  "+e._s(s+1)+"\n                ")])],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.userData.name))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),a("q-item-section",{attrs:{side:"",top:"",avatar:""}},[a("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?a("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?a("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():a("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?a("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n        ")]):e._e()]):e._e()]):e._e(),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white hint panel-bottom q-pa-md"},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,s){return a("q-list",{key:t.id},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(s)}}},[a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),a("q-item-section",[e._v(e._s(t.size)+" Ko")]),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{icon:"delete"},on:{click:function(a){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?a("div",[e._v("\n          "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n        ")]):e._e(),a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),a("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),a("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[a("div",{staticClass:"q-pa-md"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),a("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),a("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():a("div",{staticClass:"centered"},[a("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"q-mb-sm glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?a("div",{staticClass:"over-map mobile-fit",class:"font-"+e.form.fields.customization.font},[a("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1),a("div",{staticClass:"col-auto"},[e.chapters.showNewStepPageSettings||e.chapters.showNewStepOverview||e.chapters.showNewStepPage?e._e():a("div",{staticClass:"desktop-only background-dark arial full-page-div full-height"},[a("div",{staticClass:"q-pa-xl",domProps:{innerHTML:e._s(e.$t("label.CreationStudioHelp"))}})]),e.chapters.showNewStepPage?a("div",{staticClass:"bg-white arial full-page-div"},[a("div",{staticClass:"scroll"},[a("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[a("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),a("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),a("div",[a("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),a("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return a("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[a("div",{staticClass:"centered q-pa-sm"},[a("div",[e._v(e._s(e.$t("stepType."+t.description)))]),a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(a){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),a("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),a("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return a("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[a("div",{staticClass:"centered q-pa-sm"},[a("div",[e._v(e._s(e.$t("stepType."+t.description)))]),a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(a){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),a("div",{staticClass:"q-pa-md centered"},[a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]):e._e(),e.chapters.showNewStepPageSettings?a("div",{staticClass:"bg-white arial full-page-div scroll-on-desktop-100"},[a("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1):e._e(),e.chapters.showNewStepOverview?a("div",{staticClass:"fullscreen-mobile",staticStyle:{background:"none","background-color":"transparent"}},[a("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",customization:e.quest.customization?e.quest.customization:{color:"primary"},inventory:e.inventory,itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current,quest:e.quest,offline:!1},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.closeOverview()}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu step-menu-fixed"},[a("div",{staticClass:"row white-buttons",class:{"bg-primary":!e.quest.customization||!e.quest.customization.color||""===e.quest.customization.color},style:e.quest.customization&&e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:""},[a("div",{staticClass:"col centered"},[e.quest.customization.logo&&""!==e.quest.customization.logo?a("q-btn",{staticStyle:{"padding-top":"0 !important"},attrs:{flat:"",size:"lg"}},[a("q-avatar",{attrs:{size:"60px"}},[a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),a("div",{staticClass:"col centered q-py-sm"},[e.quest.customization&&e.quest.customization.hideInventory?e._e():a("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),a("div",{staticClass:"col centered q-py-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{flat:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])]),e.chapters.newStep.overviewData&&e.chapters.newStep.overviewData.options&&(e.chapters.newStep.overviewData.options.displayTime||e.chapters.newStep.overviewData.options.displayGoodAnswers)?a("div",{staticClass:"subtitle-5",staticStyle:{position:"absolute",left:"0",bottom:"70px","background-color":"#000",color:"#fff"}},[e.chapters.newStep.overviewData.options.displayTime?a("span",[e._v(e._s(e.currentDate)+"")]):e._e(),e.chapters.newStep.overviewData.options.displayGoodAnswers?a("span",[e._v(""+e._s(e.$t("label.Score"))+" "+e._s(e.score.nbGoodAnwers)+"/"+e._s(e.score.nbQuestions))]):e._e()]):e._e()],1):e._e(),a("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[a("div",{staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[a("div",{staticClass:"q-pa-md"},[a("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[a("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),a("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n          ")],1):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"===e.chapters.newStep.overviewData.type?a("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"!==e.chapters.newStep.overviewData.type?a("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryZoom")))]):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():a("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),a("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,s){return a("div",{key:s,staticClass:"inventory-item",on:{click:function(a){return e.selectItem(t)}}},[a("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?a("p",[e._v(e._s(t.titles[e.languages.current]))]):e._e(),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?e._e():a("p",[e._v(e._s(t.title))])])})),0)])])]),a("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[a("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?a("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?a("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[a("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?a("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[a("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),a("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[a("div",[e._v(e._s(e.$t("label.Close")))])]),a("div",[a("q-btn-group",{attrs:{outline:""}},[a("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),a("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),a("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),a("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),a("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[a("div",{staticClass:"hint panel-bottom q-pa-md"},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?a("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?a("p",{domProps:{innerHTML:e._s(e.hint.label[e.hint.number])}}):e._e(),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"q-mb-xl glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[a("div",[e._v(e._s(e.$t("label.Close")))])])],1)])])],1)])},zn=[],Nn=a("53fe"),Rn=a.n(Nn),jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-white arial step-setting"},[a("div",{staticClass:"q-pa-md background-dark"},[a("a",{staticClass:"float-right no-underline clickable",attrs:{color:"grey"},on:{click:e.close}},[a("q-icon",{staticClass:"subtitle4",attrs:{name:"close"}})],1),null!==e.selectedStep.type?a("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e()]),a("div",{staticClass:"q-pa-md q-pt-md q-mt-lg bottom-margin-for-keypad"},[a("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code&&"character"!==e.options.type.code?a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"","test-id":"step-text"},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[a("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n        "+e._s(e.$t("label.AddABackgroundImage")+" "+e.currentLanguageForLabels)+"\n      ")]),e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?a("div",[a("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?a("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]}}):e._e(),a("br"),a("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.type.code?a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),a("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?a("div",[e._v("\n        "+e._s(e.$t("label.UploadAVideo"))+":\n        "),a("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),a("div",[a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.videoStream||!e.selectedStep.form.videoStream[e.lang]||""===e.selectedStep.form.videoStream[e.lang],expression:"!selectedStep.form.videoStream || !selectedStep.form.videoStream[lang] || selectedStep.form.videoStream[lang] === ''"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),e.selectedStep.form.videoStream&&e.selectedStep.form.videoStream[e.lang]&&""!==e.selectedStep.form.videoStream[e.lang]?a("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[a("source",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream[e.lang],type:"video/mp4"}})]):e._e()]),a("div",[a("q-toggle",{attrs:{label:e.$t("label.RotateVideo")},model:{value:e.selectedStep.form.options.rotateVideo,callback:function(t){e.$set(e.selectedStep.form.options,"rotateVideo",t)},expression:"selectedStep.form.options.rotateVideo"}})],1)]):e._e(),"new-item"==e.options.type.code?a("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():a("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,s){return a("div",{key:s,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(s)}}},[a("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[s].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():a("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),a("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?a("div",[e._v("\n          "+e._s(e.$t("label.UploadTheItemPicture")+" "+e.currentLanguageForLabels)+":\n          "),a("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),a("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?a("div",[a("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),a("div",{staticClass:"centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),a("a",{staticClass:"dark",on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),a("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?a("div",[a("div",[e._v(e._s(e.$t("label.SplitMessageWithPipe")))]),e.config.character&&e.config.character.multiple.length>0?a("div",e._l(e.config.character.multiple,(function(t,s){return a("div",{staticClass:"row centered"},["left"===t.position?a("div",{staticClass:"col-3"},[a("div",{staticClass:"clickable",on:{click:function(t){e.config.character.showUploadBox=!0}}},[t.picture.length>2&&"usequestcharacter"!=t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/character/"+t.picture}}):e._e(),t.picture.length<=2&&"usequestcharacter"!=t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/story/character"+t.picture+"_attitude1.png"}}):e._e(),"usequestcharacter"===t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.character}}):e._e()]),a("q-btn-group",[a("q-btn",{attrs:{size:"md",padding:"sm",icon:"delete"},on:{click:function(t){return e.removeCharacter(s)}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.Remove"))+"\n                ")])],1),a("q-btn",{attrs:{size:"md",padding:"sm",icon:"face"},on:{click:function(t){e.config.character.currentScene=s,e.config.character.showUploadBox=!0}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.ChangeCharacter"))+"\n                ")])],1),a("q-btn",{attrs:{size:"md",padding:"sm",icon:"arrow_right"},on:{click:function(t){return e.moveCharacter(s,"right")}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.MoveRight"))+"\n                ")])],1)],1)],1):e._e(),a("div",{staticClass:"col-9 selected q-pa-md"},[a("q-input",{staticClass:"full-width",attrs:{type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:""},model:{value:e.config.character.multiple[s].text[e.lang],callback:function(t){e.$set(e.config.character.multiple[s].text,e.lang,t)},expression:"config.character.multiple[index].text[lang]"}})],1),"right"===t.position?a("div",{staticClass:"col-3 centered"},[a("div",{staticClass:"clickable",on:{click:function(t){e.config.character.showUploadBox=!0}}},[t.picture.length>2&&"usequestcharacter"!=t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/character/"+t.picture}}):e._e(),t.picture.length<=2&&"usequestcharacter"!=t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/story/character"+t.picture+"_attitude1.png"}}):e._e(),"usequestcharacter"===t.picture?a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.character}}):e._e()]),a("q-btn-group",[a("q-btn",{attrs:{size:"md",padding:"sm",icon:"arrow_left"},on:{click:function(t){return e.moveCharacter(s,"left")}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.MoveLeft"))+"\n                ")])],1),a("q-btn",{attrs:{size:"md",padding:"sm",icon:"face"},on:{click:function(t){e.config.character.currentScene=s,e.config.character.showUploadBox=!0}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.ChangeCharacter"))+"\n                ")])],1),a("q-btn",{attrs:{size:"md",padding:"sm",icon:"delete"},on:{click:function(t){return e.removeCharacter(s)}}},[a("q-tooltip",[e._v("\n                  "+e._s(e.$t("label.Remove"))+"\n                ")])],1)],1)],1):e._e()])})),0):e._e(),a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.AddAnotherCharacter")},on:{click:e.addAnotherCharacter}})],1),a("q-dialog",{attrs:{id:"choose-character-modal"},model:{value:e.config.character.showUploadBox,callback:function(t){e.$set(e.config.character,"showUploadBox",t)},expression:"config.character.showUploadBox"}},[a("q-card",[a("q-card-section",[a("a",{staticClass:"q-mt-sm float-right no-underline clickable",attrs:{color:"grey"},on:{click:function(t){e.config.character.showUploadBox=!1}}},[a("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.OrSelectACharacter")))])]),a("q-card-section",[e.quest.customization.character&&""!==e.quest.customization.character?a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 clickable",class:{selected:e.config.character.multiple.length>e.config.character.currentScene&&"usequestcharacter"==e.config.character.multiple[e.config.character.currentScene].picture},on:{click:function(t){return e.selectCharacter("usequestcharacter")}}},[a("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.quest.customization.character}})])]):e._e(),a("div",{staticClass:"row"},e._l(6,(function(t){return a("div",{key:t,staticClass:"answer col-3 clickable",on:{click:function(a){return e.selectCharacter(t)}}},[a("img",{class:{selected:e.config.character.multiple.length>e.config.character.currentScene&&t.toString()==e.config.character.multiple[e.config.character.currentScene].picture},staticStyle:{width:"100%"},attrs:{src:"statics/icons/story/character"+t+"_attitude1.png"}})])})),0),a("q-list",{attrs:{bordered:""}},[a("q-expansion-item",{attrs:{label:e.$t("label.OtherCharacters")}},[a("div",{staticClass:"row"},e._l(34,(function(t){return a("div",{key:t,staticClass:"answer col-2 clickable",on:{click:function(a){return e.selectCharacter(t+6)}}},[a("img",{class:{selected:e.config.character.multiple.length>e.config.character.currentScene&&t+6==e.config.character.multiple[e.config.character.currentScene].picture},staticStyle:{width:"100%"},attrs:{src:"statics/icons/story/character"+(t+6)+"_attitude1.png"}})])})),0)])],1),a("div",{staticClass:"q-mb-sm",staticStyle:{margin:"auto"}},[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),a("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?a("div",{staticClass:"centered"},[e._v("\n                "+e._s(e.$t("label.UploadACharacter"))+":\n                "),a("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),e.config.character.multiple[e.config.character.currentScene].picture&&e.config.character.multiple[e.config.character.currentScene].picture.length>2&&"usequestcharacter"!==e.config.character.multiple[e.config.character.currentScene].picture?a("div",{staticClass:"row centered"},[a("div",{staticClass:"col-3 selected"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/character/"+e.config.character.multiple[e.config.character.currentScene].picture}})])]):e._e()])],1),a("q-card-actions",[a("div",{staticClass:"centered"},[a("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.config.character.showUploadBox=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)])],1)],1)],1):e._e(),"geolocation"===e.options.type.code?a("div",{staticClass:"location-gps"},[a("h2",[e._v(e._s(e.$t("label.DefaultMode")))]),a("div",{staticClass:"fields-group"},[a("q-list",[a("q-item",[a("q-item-section",[a("q-radio",{attrs:{val:"compass",label:e.$t("label.CompassMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),a("q-item-section",[a("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("CompassMode")}}})],1)],1),a("q-item",[a("q-item-section",[a("q-radio",{attrs:{val:"map",label:e.$t("label.MapMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),a("q-item-section",[a("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("MapMode")}}})],1)],1)],1)],1),a("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),e._l(e.selectedStep.form.options.locations,(function(t,s){return a("div",{key:s,staticClass:"fields-group"},[a("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),a("div",{staticClass:"location-gps-inputs"},[a("div",[a("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lat,expression:"location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"ex. 45,49812",step:"any"},domProps:{value:t.lat},on:{input:function(a){a.target.composing||e.$set(t,"lat",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}})]),a("div",[a("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lng,expression:"location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"ex. 5,65487",step:"any"},domProps:{value:t.lng},on:{input:function(a){a.target.composing||e.$set(t,"lng",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),a("div",[a("a",{staticClass:"dark clickable",on:{click:function(t){return e.openGeolocationPopin(s)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))]),e.selectedStep.form.options.locations.length>1?a("span",[e._v(" - "),a("a",{staticClass:"dark clickable",on:{click:function(t){return e.removeGPSLocation(s)}}},[e._v(e._s(e.$t("label.RemoveGPSLocation")))])]):e._e()])])])})),a("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddAnGPSLocation")},on:{click:function(t){return e.addGPSLocation()}}})],2):e._e(),"choose"==e.options.type.code?a("div",[a("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),a("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),a("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),a("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),e._l(e.selectedStep.form.options.items,(function(t,s){return a("div",{key:s,staticClass:"answer"},[a("q-checkbox",{attrs:{val:s,"test-id":"radio-answer-"+s},model:{value:e.config.choose.answers,callback:function(t){e.$set(e.config.choose,"answers",t)},expression:"config.choose.answers"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+s},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[s].text.$touch}},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[s].text.required?a("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[s].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),a("p",["image"===e.config.choose.answerType&&null!==t.imagePath?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():a("span",[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][s].click()}}}),a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+s},on:{change:function(t){return e.uploadAnswerImage(s,t)}}})],1),e.isIOs?a("span",[a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+s},on:{change:function(t){return e.uploadAnswerImage(s,t)}}})]):e._e(),a("q-btn",{attrs:{"test-id":"delete-answer-"+s},on:{click:function(t){return e.deleteAnswer(s)}}},[a("q-icon",{attrs:{name:"clear"}})],1)],1)})),a("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnAnswer"))+"\n      ")])],2):e._e(),"write-text"==e.options.type.code?a("div",[e._l(e.selectedStep.form.answers,(function(t,s){return a("div",{key:s},[a("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.answers[s],callback:function(t){e.$set(e.selectedStep.form.answers,s,t)},expression:"selectedStep.form.answers[index]"}})],1)})),a("q-btn",{staticClass:"full-width",on:{click:function(t){return e.addWriteTextAnswer()}}},[e._v(e._s(e.$t("label.AddAnAnswer")))]),a("div",[e._v(e._s(e.$t("label.WriteTextWarning")))])],2):e._e(),"code-keypad"==e.options.type.code?a("div",[a("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"10","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?a("div",{staticClass:"code-color"},[a("h2",[e._v(e._s(e.$t("label.AvailableColors")))]),a("q-list",e._l(e.config.colorCode.colorsForCode,(function(t,s){return a("q-item",{key:s,style:"background-color: "+t.value},[a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.label))])],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{staticClass:"bg-white",on:{click:function(t){return e.deleteColor(s)}}},[a("q-icon",{attrs:{name:"clear"}})],1)],1)],1)})),1),a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{staticClass:"q-pa-md",attrs:{dense:"",icon:"playlist_add",label:e.$t("label.AddNewColor")}},[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCodeName"),maxlength:"15"},model:{value:e.config.colorCode.newColor.label,callback:function(t){e.$set(e.config.colorCode.newColor,"label",t)},expression:"config.colorCode.newColor.label"}}),a("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCode"),maxlength:"7"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-color",{model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}})],1)],1)]},proxy:!0}],null,!1,2730844002),model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}}),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"secondary"},on:{click:function(t){return e.addColor()}}},[e._v("\n              "+e._s(e.$t("label.Add"))+"\n            ")])],1)],1)],1),a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),a("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),a("table",[a("tr",e._l(e.unformatedAnswer,(function(t,s){return a("td",{key:s},[a("q-select",{ref:"colorSelect"+s,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+s},model:{value:e.unformatedAnswer[s],callback:function(t){e.$set(e.unformatedAnswer,s,t)},expression:"unformatedAnswer[index]"}})],1)})),0),a("tr",e._l(e.unformatedAnswer,(function(t,s){return a("td",{key:s},[a("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[s],on:{click:function(t){return e.triggerClickOnColorSelect(s)}}},[e._v("")])])})),0)]),e.selectedStep.form.options?a("div",{staticClass:"q-pb-md"},[a("q-toggle",{attrs:{label:e.$t("label.OrderHaveNotToBeRespected")},model:{value:e.selectedStep.form.options.orderHaveNotToBeRespected,callback:function(t){e.$set(e.selectedStep.form.options,"orderHaveNotToBeRespected",t)},expression:"selectedStep.form.options.orderHaveNotToBeRespected"}})],1):e._e()],1):e._e(),"code-image"==e.options.type.code&&e.selectedStep.form.options&&e.selectedStep.form.options[e.lang]&&e.selectedStep.form.options[e.lang].images?a("div",{staticClass:"code-image"},[a("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options[e.lang].images,(function(t,s){return a("div",{key:s,staticClass:"answer"},[a("p",[t.imagePath?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():a("span",[a("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][s].click()}}}),a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+s},on:{change:function(t){return e.uploadCodeAnswerImage(s,t)}}})],1),e.isIOs?a("span",[a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+s},on:{change:function(t){return e.uploadCodeAnswerImage(s,t)}}})]):e._e(),a("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(s)}}},[a("q-icon",{attrs:{name:"clear"}})],1)],1)})),a("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnImage"))+"\n      ")]),e.selectedStep.form.options[e.lang]&&e.selectedStep.form.options[e.lang].images&&e.selectedStep.form.options[e.lang].images.length>0&&e.selectedStep.form.options[e.lang].images[0].imagePath?a("div",[a("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),a("table",[a("tr",e._l(e.unformatedAnswer,(function(t,s){return a("td",{key:s,staticClass:"text-center",attrs:{"test-id":"previous-image-"+s},on:{click:function(t){return e.previousCodeAnswer(s)}}},[a("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),a("tr",e._l(e.unformatedAnswer,(function(t,s){return a("td",{key:s},[a("img",{attrs:{id:"image-code-setting-"+s,src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options[e.lang].images[t].imagePath}})])})),0),a("tr",e._l(e.unformatedAnswer,(function(t,s){return a("td",{key:s,staticClass:"text-center",attrs:{"test-id":"next-image-"+s},on:{click:function(t){return e.nextCodeAnswer(s)}}},[a("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"jigsaw-puzzle"===e.options.type.code?a("div",[a("div",{staticClass:"background-upload"},[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),a("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?a("div",[e._v("\n          "+e._s(e.$t("label.UploadThePuzzlePicture")+" "+e.currentLanguageForLabels)+":\n          "),a("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture[e.lang]?e._e():a("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture[e.lang]?a("div",[a("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),a("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture[e.lang]}})]):e._e()]),a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?a("div",[a("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,s){return a("div",{key:s,staticClass:"answer"},[a("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),a("p",[null!==t.imagePath?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():a("span",[a("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][s].click()}}}),a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+s},on:{change:function(t){return e.uploadMemoryImage(s,t)}}})],1),e.isIOs?a("span",[a("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+s},on:{change:function(t){return e.uploadMemoryImage(s,t)}}})]):e._e(),a("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(s)}}},[a("q-icon",{attrs:{name:"clear"}})],1)],1)})),a("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddACardPair"))+"\n      ")])],2):e._e(),"phone-call"==e.options.type.code?a("div",[a("q-input",{attrs:{label:e.$t("label.PhoneNumber"),"min-length":"2","max-length":"10","bottom-slots":""},model:{value:e.selectedStep.form.options.number,callback:function(t){e.$set(e.selectedStep.form.options,"number",t)},expression:"selectedStep.form.options.number"}})],1):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]?a("div",{staticClass:"find-item"},[a("p",[a("q-toggle",{attrs:{label:e.$t("label.ObjectNeedToBeAppliedOnPicture")},model:{value:e.selectedStep.form.options.touchLocation,callback:function(t){e.$set(e.selectedStep.form.options,"touchLocation",t)},expression:"selectedStep.form.options.touchLocation"}})],1),a("div",[a("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),a("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.useItem.imageHeight+"px; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[e.selectedStep.form.options.touchLocation?a("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: "+e.config.useItem.crossSize+"px; height: "+e.config.useItem.crossSize+"px;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}}):e._e()])])]):e._e(),"use-item"==e.options.type.code?a("div",{staticClass:"inventory"},[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:function(t){e.$v.selectedStep.form.answerItem.$touch}},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?a("div",[e._v("\n        "+e._s(e.$t("label.SelectedObject"))+" :\n        "),a("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e(),e.selectedStep.form.answerItem?a("div",[a("q-toggle",{attrs:{label:e.$t("label.RemoveObjectFromInventoryAfterUse")},model:{value:e.selectedStep.form.options.removeObjectAfterUse,callback:function(t){e.$set(e.selectedStep.form.options,"removeObjectAfterUse",t)},expression:"selectedStep.form.options.removeObjectAfterUse"}})],1):e._e(),a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),a("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?a("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),a("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?a("div",{staticClass:"centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"find-item"===e.options.type.code&&e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]?a("div",{staticClass:"find-item"},[a("q-select",{attrs:{label:e.$t("label.AreasNumber"),options:e.config.findItem.numberOfAreas,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},on:{input:e.changeNbAreas},model:{value:e.selectedStep.form.options.nbAreas,callback:function(t){e.$set(e.selectedStep.form.options,"nbAreas",t)},expression:"selectedStep.form.options.nbAreas"}}),a("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),e.selectedStep&&e.selectedStep.form&&e.selectedStep.form.answers?a("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden;background-image: url("+e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.findItem.imageHeight+"px; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinatesFindItem(t)}}},[a("img",{style:"position: absolute; z-index: 500; top: 100px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross0",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(0)}}}),a("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross1",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(1)}}}),a("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross2",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(2)}}}),a("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 200px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross3",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(3)}}}),a("img",{style:"display: none; position: absolute; z-index: 500; top: 300px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross4",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(4)}}})]):e._e(),a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),a("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?a("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),a("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?a("div",{staticClass:"centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"locate-item-ar"===e.options.type.code?a("div",{staticClass:"locate-item-ar"},[a("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),a("div",{staticClass:"fields-group"},[a("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),a("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),a("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?a("div",[e._v("\n            "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n            "),a("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?a("div",[a("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),a("div",[a("p",[e._v(e._s(e.$t("label.ObjectSize")))]),e.selectedStep.form.options.hasOwnProperty("objectSize")?a("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),a("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?a("div",[e._v("\n              "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n              "),a("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),a("div",{attrs:{id:"target-canvas"}}),a("div",{staticClass:"q-mb-md"},[e._v("\n            "+e._s(e.$t("label.TouchAndDragObject"))+"\n          ")])],1):e._e(),e.selectedStep.form.options.hasOwnProperty("touchDistance")?a("div",[a("p",[e._v(e._s(e.$t("label.TouchDistance")))]),a("q-slider",{attrs:{min:5,max:100,step:1,"label-always":"","label-value":(e.selectedStep.form.options.touchDistance||10)+"m"},model:{value:e.selectedStep.form.options.touchDistance,callback:function(t){e.$set(e.selectedStep.form.options,"touchDistance",t)},expression:"selectedStep.form.options.touchDistance"}})],1):e._e()],1),a("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),a("div",{staticClass:"fields-group"},[a("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),a("div",{staticClass:"location-gps-inputs"},[a("div",[a("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),a("div",[a("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),a("div",[a("a",{staticClass:"dark",on:{click:function(t){return e.openGeolocationPopin(-1)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])])]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?a("div",{staticClass:"locate-marker"},[a("h2",[e._v(e._s(e.$t("label.Marker")))]),a("p",[a("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),a("span",[e._v(e._s(e.selectedStep.form.answers))]),a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary","test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}},[e._v("\n          "+e._s(e.$t("label.Choose"))+"\n        ")])],1),a("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),a("q-card-section",e._l(e.markersList,(function(t,s){return a("q-btn",{key:s,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(a){return e.selectMarker(t)}}},[a("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),a("span",[e._v(e._s(t))])])})),1),a("q-card-actions",[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),"binocular"===e.options.type.code?a("div",{staticClass:"binocular"},[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Shape"),options:e.config.binocular.options},model:{value:e.selectedStep.form.options.shape,callback:function(t){e.$set(e.selectedStep.form.options,"shape",t)},expression:"selectedStep.form.options.shape"}})],1):e._e(),"portrait-robot"===e.options.type.code&&e.selectedStep.form.answers&&e.selectedStep.form.answers.items?a("div",{staticClass:"portrait-robot"},[a("h2",[e._v(e._s(e.$t("label.BuildThePortraitRobot")))]),a("div",{staticClass:"relative-position"},[a("div",[a("img",{attrs:{src:"statics/portrait-robot/face-"+e.selectedStep.form.answers.items.face+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/eye-"+e.selectedStep.form.answers.items.eye+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/mouth-"+e.selectedStep.form.answers.items.mouth+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/nose-"+e.selectedStep.form.answers.items.nose+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/hair-"+e.selectedStep.form.answers.items.hair+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/beard-"+e.selectedStep.form.answers.items.beard+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/glass-"+e.selectedStep.form.answers.items.glass+".png"}})]),a("div",{staticClass:"absolute"},[a("img",{attrs:{src:"statics/portrait-robot/hat-"+e.selectedStep.form.answers.items.hat+".png"}})])]),a("table",{staticClass:"portrait-parts"},[a("tr",[a("td",[a("img",{attrs:{src:"statics/portrait-robot/face-1.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/eye-1.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/nose-1.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/hair-1.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/beard-2.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/glass-2.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),a("td",[a("img",{attrs:{src:"statics/portrait-robot/hat-4.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])])]):e._e(),"end-chapter"===e.options.type.code?a("q-list",{attrs:{bordered:""}},[a("div",{staticClass:"q-pa-md"},[a("q-toggle",{attrs:{label:e.$t("label.RedirectToNextChapter")},model:{value:e.config.endChapter.moveToNextStep,callback:function(t){e.$set(e.config.endChapter,"moveToNextStep",t)},expression:"config.endChapter.moveToNextStep"}}),e.config.endChapter.moveToNextStep?e._e():a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.RedirectToChapter"),options:e.selectedStep.chapters},model:{value:e.selectedStep.form.options.chapterId,callback:function(t){e.$set(e.selectedStep.form.options,"chapterId",t)},expression:"selectedStep.form.options.chapterId"}})],1)],1)]):e._e(),"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Protocol"),options:e.config.iot.protocols},model:{value:e.selectedStep.form.options.protocol,callback:function(t){e.$set(e.selectedStep.form.options,"protocol",t)},expression:"selectedStep.form.options.protocol"}}),a("q-input",{attrs:{"emit-value":"","map-options":"",label:"DeviceID (plug the device in)",options:e.config.iot.triggerEvent.modes,mask:"NN:NN:NN:NN:NN:NN","fill-mask":"",value:"00:00:00:00:00:00"},model:{value:e.selectedStep.form.options.deviceid,callback:function(t){e.$set(e.selectedStep.form.options,"deviceid",t)},expression:"selectedStep.form.options.deviceid"}}),"wait-for-event"===e.options.type.code?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.waitForEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.triggerEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.TriggerMode"),options:e.config.iot.triggerEvent.modes},model:{value:e.selectedStep.form.options.triggerMode,callback:function(t){e.$set(e.selectedStep.form.options,"triggerMode",t)},expression:"selectedStep.form.options.triggerMode"}}):e._e(),"distance"===e.selectedStep.form.options.object?a("div",[a("h2",[e._v(e._s(e.$t("label.SuccessRange")))]),a("q-range",{attrs:{min:0,max:200,"left-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.min+"cm":"","right-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.max+"cm":"","label-always":""},model:{value:e.selectedStep.form.options.range,callback:function(t){e.$set(e.selectedStep.form.options,"range",t)},expression:"selectedStep.form.options.range"}})],1):e._e(),"pot"===e.selectedStep.form.options.object?a("div",[a("h2",[e._v(e._s(e.$t("label.SuccessRanges")))]),e._l([1,2,3],(function(t){return a("q-range",{key:t,staticClass:"q-my-md",attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].min:"","right-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].max:"","label-always":""},model:{value:e.selectedStep.form.options["range"+t],callback:function(a){e.$set(e.selectedStep.form.options,"range"+t,a)},expression:"selectedStep.form.options['range' + index]"}})}))],2):e._e(),"keypad"===e.selectedStep.form.options.object?a("div",[a("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.selectedStep.form.options.answer,callback:function(t){e.$set(e.selectedStep.form.options,"answer",t)},expression:"selectedStep.form.options.answer"}})],1):e._e(),"joystick"===e.selectedStep.form.options.object?a("div",[a("h2",{staticStyle:{"line-height":"1.5rem"}},[e._v(e._s(e.$t("label.SuccessRanges")))]),a("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Horizontal")))]),a("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.min:"","right-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.max:"","label-always":""},model:{value:e.selectedStep.form.options.rangeX,callback:function(t){e.$set(e.selectedStep.form.options,"rangeX",t)},expression:"selectedStep.form.options.rangeX"}}),a("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Vertical")))]),a("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.min+"":"","right-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.max+"":"","label-always":""},model:{value:e.selectedStep.form.options.rangeY,callback:function(t){e.$set(e.selectedStep.form.options,"rangeY",t)},expression:"selectedStep.form.options.rangeY"}})],1):e._e(),"button"===e.selectedStep.form.options.object?a("div",[a("q-input",{attrs:{type:"textarea",label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:300},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"lcd"===e.selectedStep.form.options.object?a("div",[a("q-input",{attrs:{label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:16},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"buzzer"===e.selectedStep.form.options.object?a("div",[a("h2",[e._v(e._s(e.$t("label.Duration")))]),a("q-slider",{attrs:{min:0,max:3e3,"label-value":e.selectedStep.form.options.duration?e.selectedStep.form.options.duration+"ms":"","label-always":""},model:{value:e.selectedStep.form.options.duration,callback:function(t){e.$set(e.selectedStep.form.options,"duration",t)},expression:"selectedStep.form.options.duration"}}),a("h2",[e._v(e._s(e.$t("label.Frequency")))]),a("q-slider",{attrs:{min:100,max:1e4,"label-value":e.selectedStep.form.options.frequency?e.selectedStep.form.options.frequency+"Hz":"","label-always":""},model:{value:e.selectedStep.form.options.frequency,callback:function(t){e.$set(e.selectedStep.form.options,"frequency",t)},expression:"selectedStep.form.options.frequency"}})],1):e._e()],1):e._e(),e.quest.playersNumber>1?a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Player"),options:e.players},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpPlayer")}}})]},proxy:!0}],null,!1,3443813941),model:{value:e.selectedStep.form.player,callback:function(t){e.$set(e.selectedStep.form,"player",t)},expression:"selectedStep.form.player"}})],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?a("q-list",{attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[a("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?a("q-list",{attrs:{highlight:""}},[a("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,s){return a("q-item",{key:s},[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(s)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?a("div",[e._v("\n            "+e._s(e.$t("label.NoCondition"))+"\n          ")]):e._e(),e.selectedStep.newConditionForm?e._e():a("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?a("div",[a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),"counter"!==e.selectedStep.newCondition.selectedType&&"countergreater"!==e.selectedStep.newCondition.selectedType&&"counterlower"!==e.selectedStep.newCondition.selectedType&&"combineobject"!==e.selectedStep.newCondition.selectedType&&"haveobject"!==e.selectedStep.newCondition.selectedType&&"nothaveobject"!==e.selectedStep.newCondition.selectedType&&"chapterTimerOver"!==e.selectedStep.newCondition.selectedType?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}):e._e(),"combineobject"===e.selectedStep.newCondition.selectedType&&"new-item"===e.options.type.code?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectCombined"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"combineobject"===e.selectedStep.newCondition.selectedType&&"new-item"!==e.options.type.code?a("div",[e._v(e._s(e.$t("label.YouCanOnlyUseThisFeatureInNewItemStep")))]):e._e(),"haveobject"===e.selectedStep.newCondition.selectedType?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectInInventory"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"nothaveobject"===e.selectedStep.newCondition.selectedType?a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectNotInInventory"),options:e.config.useItem.questItemsAsOptions},model:{value:e.selectedStep.newCondition.selectedObject,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedObject",t)},expression:"selectedStep.newCondition.selectedObject"}}):e._e(),"counter"===e.selectedStep.newCondition.selectedType||"countergreater"===e.selectedStep.newCondition.selectedType||"counterlower"===e.selectedStep.newCondition.selectedType?a("q-input",{attrs:{label:e.$t("label.CounterValue")},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}):e._e(),"stepAnswerNb"===e.selectedStep.newCondition.selectedType?a("q-input",{attrs:{label:e.$t("label.AnswerNumber")},model:{value:e.selectedStep.newCondition.answerNumber,callback:function(t){e.$set(e.selectedStep.newCondition,"answerNumber",t)},expression:"selectedStep.newCondition.answerNumber"}}):e._e(),a("div",{staticClass:"centered"},[a("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),a("q-btn",{staticClass:"q-mx-md",attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?a("q-list",{attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Chapters")}},[a("div",{staticClass:"q-pa-md"},[a("div",[e._v("\n            "+e._s(e.$t("label.ChapterChangeWarning"))+"\n          ")]),a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Chapter"),options:e.selectedStep.chapters},on:{input:e.changeChapter},model:{value:e.selectedStep.form.chapterId,callback:function(t){e.$set(e.selectedStep.form,"chapterId",t)},expression:"selectedStep.form.chapterId"}})],1)])],1):e._e(),a("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[a("div",{staticClass:"q-pa-sm"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code&&e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter' && options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[a("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n              "+e._s(e.$t("label.AddABackgroundImage"))+"\n            ")]),e.selectedStep.form.backgroundImage&&e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?a("div",[a("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?a("img",{staticClass:"full-width",attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage[e.lang]}}):e._e(),a("br"),a("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"write-text"===e.options.type.code||"code-image"===e.options.type.code,expression:"options.type.code === 'write-text' || options.type.code === 'code-image'"}],staticClass:"background-upload"},[a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadImageBelowButton")},on:{click:function(t){return e.$refs["imageBelowfile"].click()}}}),a("input",{ref:"imageBelowfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImageBelowButton}})],1),e.isIOs?a("div",[e._v("\n                "+e._s(e.$t("label.UploadImageBelowButton"))+":\n                "),a("input",{ref:"imageBelowfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImageBelowButton}})]):e._e()]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.imageBelow&&null!==e.selectedStep.form.options.imageBelow?a("div",[a("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),a("div",{staticClass:"centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.imageBelow.indexOf("statics/")?e.selectedStep.form.options.imageBelow:e.uploadUrl+"/upload/quest/"+e.questId+"/step/"+e.options.type.code+"/"+e.selectedStep.form.options.imageBelow}})])]):e._e()]),"geolocation"===e.options.type.code?a("div",{staticClass:"background-upload"},[a("div",[e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheLocatorPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),a("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLocatorImage}})],1),e.isIOs?a("div",[e._v("\n                "+e._s(e.$t("label.UploadTheLocatorPicture"))+":\n                "),a("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLocatorImage}})]):e._e(),a("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.locator&&null!==e.selectedStep.form.options.locator?a("div",[a("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),a("div",{staticClass:"centered"},[a("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.locator.indexOf("statics/")?e.selectedStep.form.options.locator:e.uploadUrl+"/upload/quest/"+e.questId+"/step/geolocation/"+e.selectedStep.form.options.locator}})])]):e._e()]):e._e(),e.options.type.nbTrials>0?a("div",[a("q-input",{attrs:{label:e.$t("label.NbTrials")},model:{value:e.selectedStep.form.nbTrial,callback:function(t){e.$set(e.selectedStep.form,"nbTrial",t)},expression:"selectedStep.form.nbTrial"}})],1):e._e(),e.options.type.passOption>0?a("div",[a("q-toggle",{attrs:{label:e.$t("label.UserCanPass")},model:{value:e.selectedStep.form.canPass,callback:function(t){e.$set(e.selectedStep.form,"canPass",t)},expression:"selectedStep.form.canPass"}})],1):e._e(),"memory"==e.options.type.code||"locate-item-ar"==e.options.type.code||"jigsaw-puzzle"==e.options.type.code||"use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code||"portrait-robot"==e.options.type.code?a("div",{staticClass:"q-pb-md"},[e.options&&e.options.mode&&"advanced"===e.options.mode?a("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}}):e._e(),e.selectedStep.form.options.rightAnswerMessage?a("q-input",{attrs:{label:e.$t("label.CustomizeRightAnswerMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.rightAnswerMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.rightAnswerMessage,e.lang,t)},expression:"selectedStep.form.options.rightAnswerMessage[lang]"}}):e._e(),e.selectedStep.form.options.wrongAnswerMessage?a("q-input",{attrs:{label:e.$t("label.CustomizeWrongAnswerMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.wrongAnswerMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.wrongAnswerMessage,e.lang,t)},expression:"selectedStep.form.options.wrongAnswerMessage[lang]"}}):e._e(),a("q-input",{attrs:{label:e.$t("label.CustomizeRightAnswerColor"),placeholder:"yellow-4"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:function(t){e.colors.showPopin=!0}}})]},proxy:!0}],null,!1,862916511),model:{value:e.selectedStep.form.options.rightAnswerColor,callback:function(t){e.$set(e.selectedStep.form.options,"rightAnswerColor",t)},expression:"selectedStep.form.options.rightAnswerColor"}}),a("q-input",{attrs:{label:e.$t("label.CustomizeWrongAnswerColor"),placeholder:"Red-6"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help"},on:{click:function(t){e.colors.showPopin=!0}}})]},proxy:!0}],null,!1,862916511),model:{value:e.selectedStep.form.options.wrongAnswerColor,callback:function(t){e.$set(e.selectedStep.form.options,"wrongAnswerColor",t)},expression:"selectedStep.form.options.wrongAnswerColor"}}),a("q-select",{attrs:{label:e.$t("label.IconForSuccess"),options:e.successIcon.options},scopedSlots:e._u([{key:"selected",fn:function(){return[a("q-icon",{attrs:{name:e.selectedStep.form.options.successIcon}})]},proxy:!0},{key:"option",fn:function(t){return[a("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.opt}})],1),a("q-item-section",["block"!==t.opt?a("q-item-label",[e._v(e._s(e.$t("label.SelectThisIcon")))]):e._e(),"block"===t.opt?a("q-item-label",[e._v(e._s(e.$t("label.NoIcon")))]):e._e()],1)],1)]}}],null,!1,1223828950),model:{value:e.selectedStep.form.options.successIcon,callback:function(t){e.$set(e.selectedStep.form.options,"successIcon",t)},expression:"selectedStep.form.options.successIcon"}})],1):e._e(),a("q-toggle",{attrs:{label:e.$t("label.MoveToNextStepAutomatically")},model:{value:e.selectedStep.form.options.moveToNextStepAutomatically,callback:function(t){e.$set(e.selectedStep.form.options,"moveToNextStepAutomatically",t)},expression:"selectedStep.form.options.moveToNextStepAutomatically"}}),e.selectedStep.form.options.moveToNextStepAutomatically?a("div",[a("q-input",{attrs:{label:e.$t("label.MoveToNextStepAutomaticallyDuration")},model:{value:e.selectedStep.form.options.moveToNextStepAutomaticallyDuration,callback:function(t){e.$set(e.selectedStep.form.options,"moveToNextStepAutomaticallyDuration",t)},expression:"selectedStep.form.options.moveToNextStepAutomaticallyDuration"}})],1):e._e(),!e.options||"info-text"!=e.options.type.code&&"code-image"!=e.options.type.code&&"code-color"!=e.options.type.code&&"code-keypad"!=e.options.type.code&&"choose"!=e.options.type.code&&"write-text"!=e.options.type.code?e._e():a("div",{staticClass:"q-pb-md"},[a("q-toggle",{attrs:{label:e.$t("label.HideHideButton")},model:{value:e.selectedStep.form.options.hideHideButton,callback:function(t){e.$set(e.selectedStep.form.options,"hideHideButton",t)},expression:"selectedStep.form.options.hideHideButton"}})],1),e.options&&"code-image"==e.options.type.code?a("div",{staticClass:"q-pb-md"},[a("q-toggle",{attrs:{label:e.$t("label.DisplayFirstImageAsDefault")},model:{value:e.selectedStep.form.options.displaySameDefaultImage,callback:function(t){e.$set(e.selectedStep.form.options,"displaySameDefaultImage",t)},expression:"selectedStep.form.options.displaySameDefaultImage"}})],1):e._e(),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?a("div",{staticClass:"location-gps"},[a("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),a("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}}),a("q-toggle",{attrs:{label:e.$t("label.HideMake8Animation")},model:{value:e.selectedStep.form.options.hideAnimation,callback:function(t){e.$set(e.selectedStep.form.options,"hideAnimation",t)},expression:"selectedStep.form.options.hideAnimation"}})],1):e._e(),"geolocation"==e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.AllowToSwitchGeolocationMode")},model:{value:e.selectedStep.form.options.switchmode,callback:function(t){e.$set(e.selectedStep.form.options,"switchmode",t)},expression:"selectedStep.form.options.switchmode"}}),a("q-input",{attrs:{label:e.$t("label.DistanceToWin")},model:{value:e.selectedStep.form.options.distance,callback:function(t){e.$set(e.selectedStep.form.options,"distance",t)},expression:"selectedStep.form.options.distance"}})],1):e._e(),"character"==e.options.type.code?a("div",[a("q-input",{attrs:{label:e.$t("label.CharacterSize")},model:{value:e.selectedStep.form.options.characterSize,callback:function(t){e.$set(e.selectedStep.form.options,"characterSize",t)},expression:"selectedStep.form.options.characterSize"}}),a("q-input",{attrs:{label:e.$t("label.CharacterBarColor")},model:{value:e.selectedStep.form.options.characterBarColor,callback:function(t){e.$set(e.selectedStep.form.options,"characterBarColor",t)},expression:"selectedStep.form.options.characterBarColor"}})],1):e._e(),"new-item"==e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.AddToInventoryAndPass")},model:{value:e.selectedStep.form.options.addInventoryAndPass,callback:function(t){e.$set(e.selectedStep.form.options,"addInventoryAndPass",t)},expression:"selectedStep.form.options.addInventoryAndPass"}})],1):e._e(),"memory"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}}),a("q-input",{attrs:{label:e.$t("label.CustomizedMemoryCardColor")},model:{value:e.selectedStep.form.options.memoryCardColor,callback:function(t){e.$set(e.selectedStep.form.options,"memoryCardColor",t)},expression:"selectedStep.form.options.memoryCardColor"}})],1):e._e(),"jigsaw-puzzle"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.HidePuzzleNotWorkingMessage")},model:{value:e.selectedStep.form.options.hidePuzzleNotWorkingMessage,callback:function(t){e.$set(e.selectedStep.form.options,"hidePuzzleNotWorkingMessage",t)},expression:"selectedStep.form.options.hidePuzzleNotWorkingMessage"}})],1):e._e(),"code-image"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.HideEnlargeMessage")},model:{value:e.selectedStep.form.options.hideEnlargeMessage,callback:function(t){e.$set(e.selectedStep.form.options,"hideEnlargeMessage",t)},expression:"selectedStep.form.options.hideEnlargeMessage"}}),a("q-toggle",{attrs:{label:e.$t("label.OrderIsNotImportant")},model:{value:e.selectedStep.form.options.orderIsNotImportant,callback:function(t){e.$set(e.selectedStep.form.options,"orderIsNotImportant",t)},expression:"selectedStep.form.options.orderIsNotImportant"}})],1):e._e(),"help"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageInventory")},model:{value:e.selectedStep.form.options.helpInventory,callback:function(t){e.$set(e.selectedStep.form.options,"helpInventory",t)},expression:"selectedStep.form.options.helpInventory"}}),a("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageHint")},model:{value:e.selectedStep.form.options.helpHint,callback:function(t){e.$set(e.selectedStep.form.options,"helpHint",t)},expression:"selectedStep.form.options.helpHint"}}),a("q-toggle",{attrs:{label:e.$t("label.HelpStepMessagePrevious")},model:{value:e.selectedStep.form.options.helpPrevious,callback:function(t){e.$set(e.selectedStep.form.options,"helpPrevious",t)},expression:"selectedStep.form.options.helpPrevious"}}),a("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageNext")},model:{value:e.selectedStep.form.options.helpNext,callback:function(t){e.$set(e.selectedStep.form.options,"helpNext",t)},expression:"selectedStep.form.options.helpNext"}}),a("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageCombinate")},model:{value:e.selectedStep.form.options.helpCombinate,callback:function(t){e.$set(e.selectedStep.form.options,"helpCombinate",t)},expression:"selectedStep.form.options.helpCombinate"}})],1):e._e(),"image-over-flow"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullWidth")},model:{value:e.selectedStep.form.options.fullWidthPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullWidthPicture",t)},expression:"selectedStep.form.options.fullWidthPicture"}}),a("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullHeight")},model:{value:e.selectedStep.form.options.fullHeightPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullHeightPicture",t)},expression:"selectedStep.form.options.fullHeightPicture"}}),a("q-toggle",{attrs:{label:e.$t("label.PlayerCanTakeSnapshot")},model:{value:e.selectedStep.form.options.snapshotAllowed,callback:function(t){e.$set(e.selectedStep.form.options,"snapshotAllowed",t)},expression:"selectedStep.form.options.snapshotAllowed"}}),a("q-toggle",{attrs:{label:e.$t("label.ReplacePictureByRedFilter")},model:{value:e.selectedStep.form.options.redFilter,callback:function(t){e.$set(e.selectedStep.form.options,"redFilter",t)},expression:"selectedStep.form.options.redFilter"}}),a("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.CameraUsed"),options:e.config.imageOverFlow.cameraOptions},model:{value:e.selectedStep.form.options.cameraUsed,callback:function(t){e.$set(e.selectedStep.form.options,"cameraUsed",t)},expression:"selectedStep.form.options.cameraUsed"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?a("div",[a("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),"find-item"===e.options.type.code?a("div",[e.selectedStep.form.options.wrongLocationMessage?a("q-input",{attrs:{label:e.$t("label.WrongLocationMessage")+" "+e.currentLanguageForLabels},model:{value:e.selectedStep.form.options.wrongLocationMessage[e.lang],callback:function(t){e.$set(e.selectedStep.form.options.wrongLocationMessage,e.lang,t)},expression:"selectedStep.form.options.wrongLocationMessage[lang]"}}):e._e()],1):e._e(),"end-chapter"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.ResetHistoryAfter")},model:{value:e.selectedStep.form.options.resetHistory,callback:function(t){e.$set(e.selectedStep.form.options,"resetHistory",t)},expression:"selectedStep.form.options.resetHistory"}}),a("q-toggle",{attrs:{label:e.$t("label.RestartChapterAfterStep")},model:{value:e.selectedStep.form.options.resetChapterProgression,callback:function(t){e.$set(e.selectedStep.form.options,"resetChapterProgression",t)},expression:"selectedStep.form.options.resetChapterProgression"}}),a("q-toggle",{attrs:{label:e.$t("label.ResetChapterProgression")},model:{value:e.selectedStep.form.options.resetChapterProgressionAndMoveNext,callback:function(t){e.$set(e.selectedStep.form.options,"resetChapterProgressionAndMoveNext",t)},expression:"selectedStep.form.options.resetChapterProgressionAndMoveNext"}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter'"}]},[e.selectedStep.form.audioStream[e.lang]&&""!==e.selectedStep.form.audioStream[e.lang]?a("div",[a("div",[e._v(e._s(e.$t("label.YourAudioFile")+" "+e.currentLanguageForLabels)+" : "+e._s(e.selectedStep.form.audioStream[e.lang]))]),a("div",{staticClass:"centered"},[a("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.selectedStep.form.audioStream[e.lang]&&""!==e.selectedStep.form.audioStream[e.lang]?e._e():a("div",[e._v("\n              "+e._s(e.$t("label.AddAnAudioFile")+" "+e.currentLanguageForLabels)+":\n              "),a("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]),a("div",[a("q-toggle",{attrs:{label:e.$t("label.hideSoundPause")},model:{value:e.selectedStep.form.options.hideSoundPause,callback:function(t){e.$set(e.selectedStep.form.options,"hideSoundPause",t)},expression:"selectedStep.form.options.hideSoundPause"}}),a("br")],1)]),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.KenBurnsEffect")},model:{value:e.selectedStep.form.options.kenBurnsEffect,callback:function(t){e.$set(e.selectedStep.form.options,"kenBurnsEffect",t)},expression:"selectedStep.form.options.kenBurnsEffect"}}),a("br"),a("q-toggle",{attrs:{label:e.$t("label.BlurEffect")},model:{value:e.selectedStep.form.options.blurEffect,callback:function(t){e.$set(e.selectedStep.form.options,"blurEffect",t)},expression:"selectedStep.form.options.blurEffect"}}),a("q-toggle",{attrs:{label:e.$t("label.ShakingEffect")},model:{value:e.selectedStep.form.options.shakingEffect,callback:function(t){e.$set(e.selectedStep.form.options,"shakingEffect",t)},expression:"selectedStep.form.options.shakingEffect"}})],1):e._e(),"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code?a("div",[a("q-toggle",{attrs:{label:e.$t("label.UseHtmlInDescription")},model:{value:e.selectedStep.form.options.html,callback:function(t){e.$set(e.selectedStep.form.options,"html",t)},expression:"selectedStep.form.options.html"}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter' && options.type.code !== 'increment-counter'"}]},[a("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel")+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}}),a("q-toggle",{attrs:{label:e.$t("label.DisplayTime")},model:{value:e.selectedStep.form.options.displayTime,callback:function(t){e.$set(e.selectedStep.form.options,"displayTime",t)},expression:"selectedStep.form.options.displayTime"}}),a("q-toggle",{attrs:{label:e.$t("label.DisplayGoodAnswers")},model:{value:e.selectedStep.form.options.displayGoodAnswers,callback:function(t){e.$set(e.selectedStep.form.options,"displayGoodAnswers",t)},expression:"selectedStep.form.options.displayGoodAnswers"}})],1)],1)])],1),a("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hints")}},[a("div",{staticClass:"q-pa-sm"},[e.selectedStep.form.hint&&e.selectedStep.form.hint[e.lang]&&e.selectedStep.form.hint[e.lang].length>0?a("div",e._l(e.selectedStep.form.hint[e.lang],(function(t,s){return a("div",{key:s},[a("q-btn",{staticClass:"float-right",on:{click:function(t){return e.removeHint(s)}}},[a("q-icon",{attrs:{name:"delete"}})],1),a("q-btn",{staticClass:"float-right q-mr-sm",on:{click:function(t){return e.updateHint(s)}}},[a("q-icon",{attrs:{name:"mode_edit"}})],1),a("div",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("label.Hint")+" "+(s+1)+" "+e.currentLanguageForLabels))]),e._v("\n              "+e._s(t)+"\n            ")],1)})),0):e._e(),a("div",[a("q-input",{attrs:{label:e.$t("label.NewHint")},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"check"},on:{click:function(t){return e.addHint()}}})]},proxy:!0}]),model:{value:e.newHint,callback:function(t){e.newHint=t},expression:"newHint"}})],1)])])],1),a("q-list",{attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[a("div",{staticClass:"q-pa-sm"},[a("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),a("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),a("q-list",{directives:[{name:"show",rawName:"v-show",value:"enigma"===e.options.type.category&&"image-over-flow"!==e.options.type.code&&!["image-over-flow","trigger-event"].includes(e.options.type.code),expression:"options.type.category === 'enigma' && options.type.code !== 'image-over-flow' && !['image-over-flow', 'trigger-event'].includes(options.type.code)"}],attrs:{bordered:""}},[a("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.CountDownLabel")}},[a("div",{staticClass:"q-pa-sm"},[a("q-toggle",{attrs:{label:e.$t("label.CountDownLabel")},on:{input:e.activateCountDown},model:{value:e.selectedStep.form.countDownTime.enabled,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"enabled",t)},expression:"selectedStep.form.countDownTime.enabled"}}),a("q-input",{attrs:{filled:"",label:e.$t("label.CountDownIsActive"),mask:"##h##m##s","fill-mask":"",value:"00h00m00s"},model:{value:e.selectedStep.form.countDownTime.time,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"time",t)},expression:"selectedStep.form.countDownTime.time"}})],1)])],1),a("div",[a("q-toggle",{attrs:{label:e.$t("label.UpdateClones")},model:{value:e.updateClones,callback:function(t){e.updateClones=t},expression:"updateClones"}})],1),a("div",{staticClass:"centered q-pa-md q-pt-lg q-pb-sm"},[a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:function(t){return e.checkAndSubmit(!0)}}},[e._v(e._s(e.$t("label.SaveAndTestThisStep")))])],1),a("div",{staticClass:"centered q-px-md q-pb-xl"},[a("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.checkAndSubmit(!1)}}},[e._v(e._s(e.$t("label.SaveThisStep")))])],1)],1),a("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[a("q-card",[a("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),a("q-card-actions",[a("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.checkAndSubmit(!1)}}}),a("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),a("q-dialog",{attrs:{maximized:""},model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[a("div",{staticClass:"q-pa-md"},[a("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),a("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.colors.showPopin,expression:"colors.showPopin"}],staticClass:"bg-white panel-bottom q-pa-md"},[a("div",{staticClass:"q-pa-md centered"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors1.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors2.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors3.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors4.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors5.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors6.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors7.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors8.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors9.png"}})]),a("div",{staticClass:"col-4 col-12-sm"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"statics/colors/colors10.png"}})])]),a("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.colors.showPopin=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)])]),"geolocation"===e.options.type.code||"locate-item-ar"===e.options.type.code?a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}):e._e(),a("q-dialog",{model:{value:e.config.geolocation.showPopin,callback:function(t){e.$set(e.config.geolocation,"showPopin",t)},expression:"config.geolocation.showPopin"}},[a("q-card",[a("q-card-section",[a("h1",[e._v(e._s(e.$t("label.CurrentLocation")))]),a("p",[e._v(e._s(e.$t("label.Latitude"))+" : "+e._s(e.config.geolocation.position.latitude))]),a("p",[e._v(e._s(e.$t("label.Longitude"))+" : "+e._s(e.config.geolocation.position.longitude))]),a("p",{class:{warning:e.config.geolocation.position.accuracy>10}},[e._v(e._s(e.$t("label.Accuracy"))+" : "+e._s(Math.round(10*e.config.geolocation.position.accuracy)/10)+" "+e._s(e.$t("label.Meters")))])]),a("q-card-section",{staticClass:"warning",style:{visibility:e.config.geolocation.position.accuracy>10?"visible":"hidden"},domProps:{innerHTML:e._s(e.$t("label.MyLocationWarning"))}}),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary",disable:e.config.geolocation.position.accuracy>10},on:{click:function(t){return e.saveMyGPSLocation()}}},[e._v(e._s(e.$t("label.Save")))]),a("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary"},on:{click:function(t){e.config.geolocation.showPopin=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1)],1)],1),a("transition",{attrs:{name:"slideInBottom"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white panel-bottom q-pa-md"},[a("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.AddABackgroundImage")))]),e.isIOs?e._e():a("div",[a("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$refs["backgroundfile"].click()}}},[a("q-icon",{attrs:{name:"cloud_upload"}}),a("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),a("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?a("div",[e._v("\n        "+e._s(e.$t("label.UploadABackgroundImage"))+":\n        "),a("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),e.media.isSimulated?a("div",{staticClass:"centered"},[a("div",{style:"width: 105px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),a("div",{style:"width: 84px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),a("div",{style:"width: 135px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block;"})]):e._e(),e.media.isSimulated?a("div",[a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyBackgroundPictureImageDisplaysOnMobiles")))]),a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.MyPictureIsNotDisplayedWell")}},[a("q-card",[a("q-card-section",[a("span",{domProps:{innerHTML:e._s(e.$t("label.MyPictureIsNotDisplayedWellDesc"))}})])],1)],1)],1)],1):e._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage&&!e.selectedStep.form.backgroundImage[e.lang]||e.media.isSimulated?e._e():a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.WarningImageResize")))]),e.media&&e.media.items&&e.media.items.length>0&&!e.media.isSimulated?a("div",[a("div",{staticClass:"centered q-pa-md"},[e._v(e._s(e.$t("label.OrSelectAnImageInTheList")))]),e._l(e.media.items,(function(t,s){return a("img",{key:t.id,staticStyle:{width:"30vw","max-width":"300px",height:"40vw","max-height":"400px"},attrs:{src:e.uploadUrl+"/upload/quest/"+e.questId+t.type+t.file},on:{click:function(t){return e.selectMedia(s)}}})}))],2):e._e(),a("div",{staticClass:"centered q-ma-md"},[a("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1)])])],1)},Dn=[],Fn=(a("7514"),a("d442")),Ln=a.n(Fn),En=a("547f"),Qn=a("57e4"),Bn=a("6397"),Un=a.n(Bn),Yn="demoObject",Gn={props:["quest","stepId","lang","options"],components:{geolocation:Lt},watch:{stepId:function(){var e=r()(o.a.mark((function e(t,a){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,updateClones:!1,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},backgroundImage:{},extraText:{},player:"All",options:{},hint:{},nbTrial:0,canPass:!0,chapterId:"0",conditions:[],startDate:{enabled:!1},countDownTime:{enabled:!1},audioStream:{}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"},{label:this.$t("label.StepAnswerNb"),value:"stepAnswerNb"},{label:this.$t("label.StepRandom"),value:"stepRandom"},{label:this.$t("label.StepCounter"),value:"counter"},{label:this.$t("label.StepCounterGreater"),value:"countergreater"},{label:this.$t("label.StepCounterLower"),value:"counterlower"},{label:this.$t("label.StepCombineObject"),value:"combineobject"},{label:this.$t("label.StepHaveObject"),value:"haveobject"},{label:this.$t("label.StepNotHaveObject"),value:"nothaveobject"},{label:this.$t("label.StepChapterTimerOver"),value:"chapterTimerOver"}],selectedValue:"",selectedObject:"",answerNumber:0,values:[]},chapters:[]},media:{isOpened:!1,isSimulated:!1,simulationPicture:"",items:[],detail:{isOpened:!1,index:0}},players:[],stepTypes:Vs,objectsList:En,markersList:Qn,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:15,answers:[]},character:{multiple:[],showUploadBox:!1,currentScene:0},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],colorsForCode:this.getColorsForCodeOptions(),newColor:{label:"",value:""}},geolocation:{currentIndex:0,showPopin:!1,position:{latitude:null,longitude:null,accuracy:null}},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions(),maxNbAnswers:10},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[],crossSize:40,imageHeight:1200,imageWidth:900,stepsOfItems:[]},findItem:{numberOfAreas:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],currentArea:0,crossSize:40,imageHeight:1200,imageWidth:900},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1},imageOverFlow:{cameraOptions:[{label:this.$t("label.FaceCamera"),value:"user"},{label:this.$t("label.BackCamera"),value:"environment"}]},binocular:{shape:"binocular",options:[{label:this.$t("label.Binoculars"),value:"binocular"},{label:this.$t("label.FlashLight"),value:"flashlight"},{label:this.$t("label.KeyHole"),value:"keyhole"}]},portrait:{face:{number:4},eye:{number:16},mouth:{number:1},nose:{number:5},hair:{number:26},beard:{number:31},glass:{number:5},hat:{number:4}},endChapter:{moveToNextStep:!0},iot:{triggerEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("trigger-event"),modes:[{label:this.$t("label.TriggerModeAuto"),value:"auto"},{label:this.$t("label.TriggerModeManual"),value:"manual"}]},waitForEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("wait-for-event")},DeviceID:"0000000000",protocols:[{label:"MQTT",value:"mqtt"},{label:"Bluetooth",value:"bluetooth"}]}},newHint:"",successIcon:{options:["thumb_up","block","favorite","star","check_circle","emoji_emotions","auto_awesome","local_fire_department","light_mode","local_police"]},questItems:[],colors:{showPopin:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("0"!==e.stepId){t.next=3;break}return t.next=3,e.initData();case 3:case"end":return t.stop()}}),t)})))()},methods:{getStepId:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.stepId&&"0"!==e.stepId?(e.selectedStep.id=e.stepId,e.selectedStep.isNew=!1):(e.selectedStep.id=0,e.selectedStep.isNew=!0);case 1:case"end":return t.stop()}}),t)})))()},resetStep:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateClones=!1,e.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:{},videoStream:{},audioStream:{},answerPointerCoordinates:{top:50,left:50},answerItem:null,player:"All",nbTrial:0,canPass:!0,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},countDownTime:{enabled:!1},number:null},e.config.character&&(e.config.character.multiple.length=0),e.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value="")}));case 4:case"end":return t.stop()}}),t)})))()},initData:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d,p,m,h,g;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.questId=e.quest.questId,e.resetStep(),!e.stepId||-1!==e.stepId){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getStepId();case 6:if(e.selectedStep.isNew){t.next=14;break}return t.next=9,is.getById(e.stepId,e.quest.version,"all");case 9:a=t.sent,a&&a.data?Object.assign(e.selectedStep.form,a.data):Jt(e.$t("label.ErrorStandardMessage"),"error"),e.options.chapterId=a.data&&a.data.chapterId?a.data.chapterId:0,t.next=17;break;case 14:e.selectedStep.form.type=e.options.type.code,e.selectedStep.form.chapterId=e.options.chapterId,0!==e.options.previousStepId&&e.selectedStep.form.conditions.push("stepDone_"+e.options.previousStepId);case 17:if(e.selectedStep.type=e.getStepType(e.selectedStep.form.type),e.selectedStep.form.nbTrial&&0!==e.selectedStep.form.nbTrial||(e.selectedStep.form.nbTrial=e.selectedStep.type.nbTrials),null!==e.selectedStep.form.number){t.next=24;break}return t.next=22,is.countForAQuest(e.questId,e.quest.version);case 22:s=t.sent,e.selectedStep.form.number=s&&s.data&&s.data.count?s.data.count+1:1;case 24:if(e.selectedStep.form.title[e.lang]&&""!==e.selectedStep.form.title[e.lang]||(n=e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.title[e.quest.mainLanguage]?e.selectedStep.form.title[e.quest.mainLanguage]:e.$t("label.Step")+" "+e.selectedStep.form.number,e.$set(e.selectedStep.form.title,e.lang,n)),e.selectedStep.form.text[e.lang]&&""!==e.selectedStep.form.text[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.text[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.text,e.lang,e.selectedStep.form.text[e.quest.mainLanguage]),e.selectedStep.form.extraText[e.lang]&&""!==e.selectedStep.form.extraText[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.extraText[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.extraText,e.lang,e.selectedStep.form.extraText[e.quest.mainLanguage]),e.selectedStep.form.backgroundImage[e.lang]&&""!==e.selectedStep.form.backgroundImage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.backgroundImage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.backgroundImage,e.lang,e.selectedStep.form.backgroundImage[e.quest.mainLanguage]),e.selectedStep.form.videoStream[e.lang]&&""!==e.selectedStep.form.videoStream[e.lang]||e.lang!==e.quest.mainLanguage&&e.selectedStep.form.videoStream[e.quest.mainLanguage]&&""!==e.selectedStep.form.videoStream[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.videoStream,e.lang,e.selectedStep.form.videoStream[e.quest.mainLanguage]),(!e.selectedStep.form.hint[e.lang]||""===e.selectedStep.form.hint[e.lang])&&e.lang!==e.quest.mainLanguage&&e.selectedStep.form.hint[e.quest.mainLanguage]&&e.selectedStep.form.hint[e.quest.mainLanguage].length>0)for(e.selectedStep.form.hint[e.lang]=[],r=0;r<e.selectedStep.form.hint[e.quest.mainLanguage].length;r++)e.selectedStep.form.hint[e.lang].push(e.selectedStep.form.hint[e.quest.mainLanguage][r]);for(e.selectedStep.form.options.rightAnswerMessage?e.selectedStep.form.options.rightAnswerMessage[e.lang]&&""!==e.selectedStep.form.options.rightAnswerMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.rightAnswerMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.rightAnswerMessage,e.lang,e.selectedStep.form.options.rightAnswerMessage[e.quest.mainLanguage]):e.selectedStep.form.options.rightAnswerMessage={},e.selectedStep.form.options.successIcon||(e.selectedStep.form.options.successIcon="thumb_up"),e.selectedStep.form.options.wrongAnswerMessage?e.selectedStep.form.options.wrongAnswerMessage[e.lang]&&""!==e.selectedStep.form.options.wrongAnswerMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.wrongAnswerMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.wrongAnswerMessage,e.lang,e.selectedStep.form.options.wrongAnswerMessage[e.quest.mainLanguage]):e.selectedStep.form.options.wrongAnswerMessage={},e.selectedStep.form.options.wrongLocationMessage?e.selectedStep.form.options.wrongLocationMessage[e.lang]&&""!==e.selectedStep.form.options.wrongLocationMessage[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.options.wrongLocationMessage[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.options.wrongLocationMessage,e.lang,e.selectedStep.form.options.wrongLocationMessage[e.quest.mainLanguage]):e.selectedStep.form.options.wrongLocationMessage={},"info-text"!==e.options.type.code&&"info-video"!==e.options.type.code&&"new-item"!==e.options.type.code&&"character"!==e.options.type.code&&"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code&&"increment-counter"!==e.options.type.code||e.players.push({label:e.$t("label.All"),value:"All"}),i=0;i<e.quest.playersNumber;i++)e.players.push({label:e.$t("label.Player")+" "+(i+1),value:"P"+(i+1)});return e.selectedStep.form.options.hasOwnProperty("kenBurnsEffect")||(e.selectedStep.form.options.kenBurnsEffect=!1),e.selectedStep.form.options.hasOwnProperty("blurEffect")||(e.selectedStep.form.options.blurEffect=!1),e.selectedStep.form.options.hasOwnProperty("html")||(e.selectedStep.form.options.html=!1),t.next=41,e.getQuestItemsAsOptions();case 41:if(e.getUnderstandableConditions(),"choose"!==e.options.type.code){t.next=46;break}if(e.selectedStep.form.options&&e.selectedStep.form.options.items&&Array.isArray(e.selectedStep.form.options.items)){if(e.config.choose.answers=(e.selectedStep.form.answers+"").split("|").map((function(e){return parseInt(e,10)})),e.config.choose.answerType=e.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==e.selectedStep.form.options.items[0].imagePath?"image":"text","text"===e.config.choose.answerType)for(c=0;c<e.selectedStep.form.options.items.length;c++)e.selectedStep.form.options.items[c].textLanguage&&e.selectedStep.form.options.items[c].textLanguage[e.lang]&&(e.selectedStep.form.options.items[c].text=e.selectedStep.form.options.items[c].textLanguage[e.lang])}else for(e.config.choose.answerType="text",e.selectedStep.form.options={items:[],hideHideButton:!0},e.config.choose.answers=[0],l=0;l<e.config.choose.defaultNbAnswers;l++)e.selectedStep.form.options.items.push({text:e.$t("label.AnswerNb",{nb:l+1}),imagePath:null});t.next=144;break;case 46:if("help"!==e.options.type.code){t.next=50;break}e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("helpInventory")||(e.selectedStep.form.options.helpHint=!0,e.selectedStep.form.options.helpInventory=!0,e.selectedStep.form.options.helpNext=!0,e.selectedStep.form.options.helpPrevious=!0,e.selectedStep.form.options.helpCombinate=!1),t.next=144;break;case 50:if("code-color"!==e.options.type.code){t.next=57;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=Array(4).fill("#FF0000"),e.selectedStep.form.options.colors&&(e.config.colorCode.colorsForCode=e.selectedStep.form.options.colors),e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),t.next=144;break;case 57:if("code-image"!==e.options.type.code){t.next=63;break}if(!e.selectedStep.form.options||!e.selectedStep.form.options[e.lang]||!e.selectedStep.form.options[e.lang].images)for(e.selectedStep.form.options||(e.selectedStep.form.options={hideHideButton:!0}),e.selectedStep.form.options[e.lang]={images:[]},e.$forceUpdate(),u=0;u<e.config.imageCode.defaultNbAnswers;u++)e.selectedStep.form.options[e.lang].images.push({imagePath:null});e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=[0,0,0,0],t.next=144;break;case 63:if("code-keypad"!==e.options.type.code){t.next=68;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),"string"!==typeof e.selectedStep.form.answers&&(e.selectedStep.form.answers=""),t.next=144;break;case 68:if("write-text"!==e.options.type.code){t.next=73;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),"object"===ze()(e.selectedStep.form.answers)&&e.selectedStep.form.answers.length||(e.selectedStep.form.answers=[],e.selectedStep.form.answers.push("")),t.next=144;break;case 73:if("info-text"!==e.options.type.code&&"character"!==e.options.type.code&&"choose"!==e.options.type.code&&"write-text"!==e.options.type.code&&"code-keypad"!==e.options.type.code){t.next=79;break}e.selectedStep.form.options.hasOwnProperty("hideHideButton")||(e.selectedStep.form.options.hideHideButton=!0),e.selectedStep.form.options.hasOwnProperty("initDuration")||(e.selectedStep.form.options.initDuration=1),"character"===e.options.type.code&&(e.selectedStep.form.options.multiple&&e.selectedStep.form.options.multiple.length>0?e.config.character.multiple=e.selectedStep.form.options.multiple:e.selectedStep.form.options.character?(e.config.character.multiple.push({picture:e.selectedStep.form.options.character,text:{},position:"right"}),e.config.character.multiple[e.config.character.multiple.length-1].text=e.selectedStep.form.text):(e.config.character.multiple.push({picture:"1",text:{},position:"right"}),e.config.character.multiple[e.config.character.multiple.length-1].text[e.lang]="")),t.next=144;break;case 79:if("find-item"!==e.options.type.code){t.next=84;break}e.selectedStep.form.options.hasOwnProperty("nbAreas")?e.$nextTick((function(){this.initFindItemElements(),this.positionFindItemPointer()})):(e.selectedStep.form.options.nbAreas=1,e.selectedStep.form.options.coordinates=[{top:50,left:50}]),e.selectedStep.form.options||(e.selectedStep.form.options={}),t.next=144;break;case 84:if("use-item"!==e.options.type.code){t.next=90;break}e.selectedStep.form.answers.hasOwnProperty("coordinates")&&(e.selectedStep.form.answerPointerCoordinates=e.selectedStep.form.answers.coordinates,e.$nextTick((function(){this.initUseItemElements(),this.positionUseItemPointer()}))),e.selectedStep.form.answers&&e.selectedStep.form.answers.item&&(e.selectedStep.form.answerItem=e.selectedStep.form.answers.item),e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("touchLocation")||(e.selectedStep.form.options={touchLocation:!0}),t.next=144;break;case 90:if("new-item"!==e.options.type.code){t.next=94;break}e.selectedStep.form.options.hasOwnProperty("picture")?(e.selectedStep.form.options.hasOwnProperty("pictures")&&e.selectedStep.form.options.pictures[e.lang]&&(e.selectedStep.form.options.picture=e.selectedStep.form.options.pictures[e.lang]),e.selectedStep.form.options.hasOwnProperty("titles")&&e.selectedStep.form.options.titles[e.lang]&&(e.selectedStep.form.options.title=e.selectedStep.form.options.titles[e.lang])):e.selectedStep.form.options={picture:null,title:"",pictures:{fr:"",en:"",es:""},titles:{fr:"",en:"",es:""}},t.next=144;break;case 94:if("jigsaw-puzzle"!==e.options.type.code){t.next=98;break}e.selectedStep.form.options.hasOwnProperty("picture")||(e.selectedStep.form.options={picture:null,level:2}),t.next=144;break;case 98:if("binocular"!==e.options.type.code){t.next=102;break}e.selectedStep.form.options.shape||(e.selectedStep.form.options.shape="binocular"),t.next=144;break;case 102:if("memory"!==e.options.type.code){t.next=106;break}if(!e.selectedStep.form.options.hasOwnProperty("items")){for(d=[],p=0;p<8;p++)d.push({imagePath:null,single:!1});e.$set(e.selectedStep.form.options,"items",d)}t.next=144;break;case 106:if("portrait-robot"!==e.options.type.code){t.next=110;break}e.selectedStep.form.answers.hasOwnProperty("items")||e.$set(e.selectedStep.form.answers,"items",{type:1,face:1,eye:1,mouth:1,nose:1,hair:1,beard:1,glass:1,hat:1}),t.next=144;break;case 110:if("end-chapter"!==e.options.type.code){t.next=114;break}e.selectedStep.form.options.hasOwnProperty("chapterId")&&""!=e.selectedStep.form.options.chapterId?e.config.endChapter.moveToNextStep=!1:e.config.endChapter.moveToNextStep=!0,t.next=144;break;case 114:if("phone-call"!==e.options.type.code){t.next=118;break}e.selectedStep.form.options.hasOwnProperty("number")||e.$set(e.selectedStep.form.options,"number","000000000"),t.next=144;break;case 118:if("geolocation"!==e.options.type.code){t.next=125;break}e.selectedStep.form.options.hasOwnProperty("distance")||e.$set(e.selectedStep.form.options,"distance","20"),e.selectedStep.form.options.hasOwnProperty("showHelp")||e.$set(e.selectedStep.form.options,"showHelp",!0),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","compass"),e.selectedStep.form.options.hasOwnProperty("locations")||e.$set(e.selectedStep.form.options,"locations",[{lat:"",lng:"",destination:""}]),t.next=144;break;case 125:if("locate-item-ar"!==e.options.type.code){t.next=143;break}for(m in e.selectedStep.form.options.hasOwnProperty("picture")||e.$set(e.selectedStep.form.options,"picture",null),e.selectedStep.form.options.hasOwnProperty("objectSize")||e.$set(e.selectedStep.form.options,"objectSize",1),e.selectedStep.form.options.hasOwnProperty("touchDistance")||e.$set(e.selectedStep.form.options,"touchDistance",10),e.selectedStep.form.options.hasOwnProperty("is3D")||e.$set(e.selectedStep.form.options,"is3D",!1),Gs)e.config.locateItem.selectModel3DOptions.push({label:Gs[m].name[e.$store.state.user.language],value:m});if(e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),!e.selectedStep.form.options.is3D){t.next=141;break}if(!e.selectedStep.form.options.customModel){t.next=139;break}return t.next=137,e.displayARObject(e.selectedStep.form.options.customModel,e.questId);case 137:t.next=141;break;case 139:return t.next=141,e.displayARObject(e.selectedStep.form.options.model);case 141:t.next=144;break;case 143:if("locate-marker"===e.options.type.code){for(h in"string"!==typeof e.selectedStep.form.answers&&e.$set(e.selectedStep.form,"answers",Qn[0]),Gs)e.config.locateItem.selectModel3DOptions.push({label:Gs[h].name[e.$store.state.user.language],value:h});e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","scan")}else"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?(e.selectedStep.form.options.hasOwnProperty("protocol")||e.$set(e.selectedStep.form.options,"protocol","bluetooth"),e.selectedStep.form.options.hasOwnProperty("object")||("wait-for-event"===e.options.type.code?e.$set(e.selectedStep.form.options,"object","distance"):e.$set(e.selectedStep.form.options,"object","lcd"),e.updateIotStepOptions()),"trigger-event"!==e.options.type.code||e.selectedStep.form.options.hasOwnProperty("triggerMode")||e.$set(e.selectedStep.form.options,"triggerMode","auto")):"image-over-flow"===e.options.type.code&&(g={fullWidthPicture:!1,fullHeightPicture:!1,snapshotAllowed:!1,redFilter:!1},e.selectedStep.form.options=Object.assign(g,e.selectedStep.form.options));case 144:return e.originalStepData=uu.clone(e.selectedStep.form),t.next=147,e.changeNewConditionType();case 147:return t.next=149,e.listChapters(e.questId,e.quest.version,e.lang);case 149:case"end":return t.stop()}}),t)})))()},checkAndSubmit:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.checkMainTextLength(t.selectedStep.form.text[t.lang])){a.next=5;break}return a.next=3,t.submitStep(e);case 3:a.next=6;break;case 5:t.$q.dialog({dark:!0,message:t.$t("label.TextTooLongForStep",{nb:t.mainTextMaxLength}),cancel:!0}).onOk(function(){var a=r()(o.a.mark((function a(s){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.submitStep(e);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).onCancel((function(){return!1}));case 6:case"end":return a.stop()}}),a)})))()},submitStep:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l,c,u,d;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$v.selectedStep.form.$touch(),!t.$v.selectedStep.form.$error){a.next=4;break}return Jt(t.$t("label.StepSettingsFormError"),"error"),a.abrupt("return");case 4:if("choose"!==t.options.type.code){a.next=13;break}if("text"===t.config.choose.answerType){for(s=0;s<t.selectedStep.form.options.items.length;s++)t.selectedStep.form.options&&t.selectedStep.form.options.items&&t.selectedStep.form.options.items[s]&&t.selectedStep.form.options.items[s].textLanguage?t.selectedStep.form.options.items[s].textLanguage[t.lang]=t.selectedStep.form.options.items[s].text:(n={},n[t.lang]=t.selectedStep.form.options.items[s].text,t.selectedStep.form.options.items[s].textLanguage=n);t.selectedStep.form.options.items=t.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}if(t.selectedStep.form.answers=t.config.choose.answers.sort().join("|"),!(t.config.choose.answers.length<1)){a.next=12;break}return Jt(t.$t("label.StepSettingsFormError"),"error"),a.abrupt("return");case 12:t.config.choose.answers.length>1?t.selectedStep.form.options.multipleAnswers=!0:t.selectedStep.form.options.multipleAnswers=!1;case 13:if("character"===t.options.type.code&&(t.selectedStep.form.options.multiple=t.config.character.multiple),"code-keypad"===t.options.type.code&&(t.selectedStep.form.options.codeLength=t.selectedStep.form.answers.length),"code-color"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|"),t.selectedStep.form.options.colors=t.config.colorCode.colorsForCode),"code-image"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|")),"write-text"===t.options.type.code)for(r=0;r<t.selectedStep.form.answers.length;r++)t.selectedStep.form.answers[r]=uu.removeAccents(t.selectedStep.form.answers[r].trim());return"jigsaw-puzzle"===t.options.type.code&&(i=parseInt(t.selectedStep.form.options.level,10),l=t.config.jigsaw.nbPiecesByLevel[i],c=uu.buildIncrementalArray(Math.pow(l,2)),c=uu.shuffle(c),t.selectedStep.form.answers=c.join("|")),"memory"===t.options.type.code&&Array.isArray(t.selectedStep.form.options.items)&&t.selectedStep.form.options.items.length>0&&(t.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),t.selectedStep.form.options.lastIsSingle&&(t.selectedStep.form.options.items[t.selectedStep.form.options.items.length-1].single=!0)),t.options.type.code,"end-chapter"===t.options.type.code&&t.config.endChapter.moveToNextStep&&(t.selectedStep.form.options.chapterId=""),t.options.type.code,"use-item"===t.options.type.code&&(t.selectedStep.form.answers={coordinates:t.selectedStep.form.answerPointerCoordinates,item:t.selectedStep.form.answerItem},t.selectedStep.form.options.removeObjectAfterUse&&(t.selectedStep.form.options.stepOfObjectToRemove=t.config.useItem.stepsOfItems[t.selectedStep.form.answerItem])),"new-item"===t.options.type.code&&(t.selectedStep.form.options.titles||(t.selectedStep.form.options.titles={}),t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures||(t.selectedStep.form.options.pictures={}),t.selectedStep.form.options.pictures[t.lang]||(t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture)),u=Object.assign(t.selectedStep.form,{questId:t.questId,updateClones:t.updateClones,version:t.quest.version,chapterId:t.options.chapterId,type:t.options.type.code}),t.$q.loading.show(),a.next=29,is.save(u);case 29:d=a.sent,t.$q.loading.hide(),!0===e?d&&d.data&&d.data.stepId?(u.id=d.data.stepId,u.stepId=d.data.stepId,t.$emit("change",u)):Jt(t.$t("label.TechnicalIssue"),"error"):!1===e&&(Jt(t.$t("label.StepSaved"),"success"),t.$emit("close"));case 32:case"end":return a.stop()}}),a)})))()},addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?Jt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?Jt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options[this.lang].images.length>=this.config.imageCode.maxNbAnswers?Jt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.imageCode.maxNbAnswers}),"error"):this.selectedStep.form.options[this.lang].images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?Jt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):(this.selectedStep.form.options.items.splice(e,1),-1!==this.config.choose.answers.indexOf(e)&&this.config.choose.answers.splice(this.config.choose.answers.indexOf(e),1))},deleteCodeAnswer:function(e){if(this.selectedStep.form.options[this.lang].images.length<=this.config.choose.minNbAnswers)Jt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options[this.lang].images.splice(e,1),this.$forceUpdate()}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("#FF0000")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.uploadUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options[this.lang].images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.uploadUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options[this.lang].images[this.unformatedAnswer[e]].imagePath},changePortraitPart:function(e){this.selectedStep.form.answers.items&&(i["a"].set(this.selectedStep.form.answers.items,e,this.selectedStep.form.answers.items[e]+1),this.selectedStep.form.answers.items[e]>this.config.portrait[e].number&&i["a"].set(this.selectedStep.form.answers.items,e,1))},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options[this.lang].images.length;t++)this.selectedStep.form.options[this.lang].images[t]&&this.selectedStep.form.options[this.lang].images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.formatedConditions.length=0,a=0;case 2:if(!(a<e.selectedStep.form.conditions.length)){t.next=20;break}if(s=e.selectedStep.form.conditions[a],n=s.split("_"),"stepDone"!==n[0]&&"stepSuccess"!==n[0]&&"stepFail"!==n[0]&&"stepAnswerNb"!==n[0]&&"stepRandom"!==n[0]){t.next=10;break}return t.next=8,is.getById(n[1],e.quest.version,"all");case 8:r=t.sent,r&&r.data&&r.data.hasOwnProperty("title")?(i=r.data.title[e.lang]?r.data.title[e.lang]:r.data.title[Object.keys(r.data.title)[0]],"stepDone"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.FollowStep")+" <i>"+i+"</i>"),"stepSuccess"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepSuccess")+" <i>"+i+"</i>"),"stepFail"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepFail")+" <i>"+i+"</i>"),"stepAnswerNb"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.AnswerNumber")+" "+n[2]+" "+e.$t("label.To")+" <i>"+i+"</i>"),"stepRandom"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepRandom")+" <i>"+i+"</i>")):e.selectedStep.formatedConditions.push(e.$t("label.InvalidCondition"));case 10:if("counter"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounter")+" <i>"+n[1]+"</i>"),"countergreater"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounterGreater")+" <i>"+n[1]+"</i>"),"counterlower"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCounterLower")+" <i>"+n[1]+"</i>"),"combineobject"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepCombineObject")+" <i><img src='"+(-1!==n[1].indexOf("statics/")?n[1]:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+n[1])+"' style='width: 40px' /></i>"),"chapterTimerOver"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepChapterTimerOver")),"haveobject"===n[0]){for(c in l=!1,e.config.useItem.stepsOfItems)e.config.useItem.stepsOfItems[c]===n[1]&&(e.selectedStep.formatedConditions.push(e.$t("label.StepHaveObject")+" <i><img src='"+(-1!==c.indexOf("statics/")?c:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+c)+"' style='width: 40px' /></i>"),l=!0);l||e.selectedStep.formatedConditions.push(e.$t("label.StepHaveObject"))}if("nothaveobject"===n[0]){for(d in u=!1,e.config.useItem.stepsOfItems)e.config.useItem.stepsOfItems[d]===n[1]&&(e.selectedStep.formatedConditions.push(e.$t("label.StepNotHaveObject")+" <i><img src='"+(-1!==d.indexOf("statics/")?d:e.uploadUrl+"/upload/quest/"+e.questId+"/step/new-item/"+d)+"' style='width: 40px' /></i>"),u=!0);u||e.selectedStep.formatedConditions.push(e.$t("label.StepNotHaveObject"))}case 17:a++,t.next=2;break;case 20:case"end":return t.stop()}}),t)})))()},deleteCondition:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedStep.form.conditions.splice(e,1),t.selectedStep.formatedConditions.splice(e,1);case 2:case"end":return a.stop()}}),a)})))()},changeNewConditionType:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedStep.newCondition.values.length=0,a=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","jigsaw-puzzle","memory"],"stepDone"!==e.selectedStep.newCondition.selectedType&&"stepSuccess"!==e.selectedStep.newCondition.selectedType&&"stepFail"!==e.selectedStep.newCondition.selectedType&&"stepRandom"!==e.selectedStep.newCondition.selectedType){t.next=7;break}return t.next=5,is.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 5:if(s=t.sent,s&&s.data&&s.data.length>0)for(n=0;n<s.data.length;n++)s.data[n].stepId.toString()!==e.stepId.toString()&&("stepDone"!==e.selectedStep.newCondition.selectedType&&"stepRandom"!==e.selectedStep.newCondition.selectedType&&-1===a.indexOf(s.data[n].type)||(r=s.data[n].title[e.lang]?s.data[n].title[e.lang]:s.data[n].title[Object.keys(s.data[n].title)[0]],e.selectedStep.newCondition.values.push({label:r,value:s.data[n].stepId})));case 7:if("stepAnswerNb"!==e.selectedStep.newCondition.selectedType){t.next=12;break}return t.next=10,is.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 10:if(i=t.sent,i&&i.data&&i.data.length>0)for(n=0;n<i.data.length;n++)i.data[n].stepId.toString()!==e.stepId.toString()&&"choose"==i.data[n].type&&(l=i.data[n].title[e.lang]?i.data[n].title[e.lang]:i.data[n].title[Object.keys(i.data[n].title)[0]],e.selectedStep.newCondition.values.push({label:l,value:i.data[n].stepId}));case 12:case"end":return t.stop()}}),t)})))()},saveNewCondition:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""===e.selectedStep.newCondition.selectedType||""===e.selectedStep.newCondition.selectedValue&&""===e.selectedStep.newCondition.selectedObject||("stepDone"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepDone_"+e.selectedStep.newCondition.selectedValue),"stepSuccess"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepSuccess_"+e.selectedStep.newCondition.selectedValue),"stepFail"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepFail_"+e.selectedStep.newCondition.selectedValue),"stepAnswerNb"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepAnswerNb_"+e.selectedStep.newCondition.selectedValue+"_"+e.selectedStep.newCondition.answerNumber),"stepRandom"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepRandom_"+e.selectedStep.newCondition.selectedValue),"counter"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("counter_"+e.selectedStep.newCondition.selectedValue),"countergreater"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("countergreater_"+e.selectedStep.newCondition.selectedValue),"counterlower"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("counterlower_"+e.selectedStep.newCondition.selectedValue),"combineobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("combineobject_"+e.selectedStep.newCondition.selectedObject),"haveobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("haveobject_"+e.config.useItem.stepsOfItems[e.selectedStep.newCondition.selectedObject]),"nothaveobject"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("nothaveobject_"+e.config.useItem.stepsOfItems[e.selectedStep.newCondition.selectedObject])),"chapterTimerOver"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("chapterTimerOver"),e.getUnderstandableConditions(),t.next=5,e.resetNewConditionForm();case 5:e.selectedStep.newConditionForm=!1;case 6:case"end":return t.stop()}}),t)})))()},resetNewConditionForm:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.newCondition.selectedType="stepDone",t.next=3,e.changeNewConditionType();case 3:e.selectedStep.newCondition.selectedValue="";case 4:case"end":return t.stop()}}),t)})))()},listChapters:function(e,t,a){var s=this;return r()(o.a.mark((function n(){var r,i;return o.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,is.listChapters(e,t,a);case 2:if(r=o.sent,r&&r.data)for(i=0;i<r.data.length;i++)s.selectedStep.chapters.push({label:r.data[i].title,value:r.data[i].chapterId});case 4:case"end":return o.stop()}}),n)})))()},changeChapter:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(i["a"].set(t.selectedStep.form,"chapterId",e),i["a"].set(t.options,"chapterId",e),t.$forceUpdate(),s=0;s<t.selectedStep.form.conditions.length;s++)t.deleteCondition(0);case 4:case"end":return a.stop()}}),a)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},uploadBackgroundImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadBackgroundImage(t.questId,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.selectedStep.form.backgroundImage[t.lang]=r.data.file,t.displayBackgroundImageSize(t.selectedStep.form.backgroundImage[t.lang])):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},displayBackgroundImageSize:function(e){this.media.isSimulated=!0,this.media.simulationPicture=this.uploadUrl+"/upload/quest/"+this.questId+"/step/background/"+e},resetBackgroundImage:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.backgroundImage[e.lang]=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value="");case 2:case"end":return t.stop()}}),t)})))()},uploadVideo:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.selectedStep.form.videoStream[t.lang]=null,t.$q.loading.show(),n=new FormData,n.append("video",s[0]),a.next=9,is.uploadVideo(t.questId,n);case 9:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.selectedStep.form.videoStream||(t.selectedStep.form.videoStream={}),t.selectedStep.form.videoStream[t.lang]=r.data.file,t.$forceUpdate()):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 12:case"end":return a.stop()}}),a)})))()},uploadImageToRecognize:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadImageToRecognize(t.questId,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?t.selectedStep.form.answers=r.data.file:r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadAnswerImage:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t.target.files,n[0]){s.next=3;break}return s.abrupt("return");case 3:return a.$q.loading.show(),r=new FormData,r.append("image",n[0]),s.next=8,is.uploadAnswerImage(a.questId,r);case 8:i=s.sent,i&&i.hasOwnProperty("data")?i.data.file?a.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?Jt(a.$t("label.FileTooLarge"),"error"):Jt(a.$t("label.UnknowUploadError"),"error"):Jt(a.$t("label.ErrorStandardMessage"),"error"),a.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadMemoryImage:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t.target.files,n[0]){s.next=3;break}return s.abrupt("return");case 3:return a.$q.loading.show(),r=new FormData,r.append("image",n[0]),s.next=8,is.uploadMemoryImage(a.questId,r);case 8:i=s.sent,i&&i.hasOwnProperty("data")?i.data.file?a.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?Jt(a.$t("label.FileTooLarge"),"error"):Jt(a.$t("label.UnknowUploadError"),"error"):Jt(a.$t("label.ErrorStandardMessage"),"error"),a.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?Jt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t.target.files,n[0]){s.next=3;break}return s.abrupt("return");case 3:return a.$q.loading.show(),r=new FormData,r.append("image",n[0]),s.next=8,is.uploadCodeAnswerImage(a.questId,r);case 8:i=s.sent,i&&i.hasOwnProperty("data")?i.data.file?(a.selectedStep.form.options[a.lang].images[e].imagePath=i.data.file,a.$forceUpdate()):i.data.message&&"Error: File too large"===i.data.message?Jt(a.$t("label.FileTooLarge"),"error"):Jt(a.$t("label.UnknowUploadError"),"error"):Jt(a.$t("label.ErrorStandardMessage"),"error"),a.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadPuzzleImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadPuzzleImage(t.questId,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.selectedStep.form.options.picture||(t.selectedStep.form.options.picture={}),i["a"].set(t.selectedStep.form.options.picture,t.lang,r.data.file)):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadItemImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadItemImage(t.questId,t.options.type.code,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(i["a"].set(t.selectedStep.form.options,"picture",r.data.file),t.selectedStep.form.options.pictures&&(t.selectedStep.form.options.pictures[t.lang]=r.data.file)):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadLocatorImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadItemImage(t.questId,t.options.type.code,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?i["a"].set(t.selectedStep.form.options,"locator",r.data.file):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadImageBelowButton:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadImageBelow(t.questId,t.options.type.code,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?i["a"].set(t.selectedStep.form.options,"imageBelow",r.data.file):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadItemObject:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadItemObject(t.questId,t.options.type.code,n);case 8:if(r=a.sent,!r||!r.hasOwnProperty("data")){a.next=19;break}if(!r.data.file){a.next=16;break}return t.selectedStep.form.options.customModel=r.data.file,a.next=14,t.displayARObject(t.selectedStep.form.options.customModel,t.questId);case 14:a.next=17;break;case 16:r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error");case 17:a.next=20;break;case 19:Jt(t.$t("label.ErrorStandardMessage"),"error");case 20:t.$q.loading.hide();case 21:case"end":return a.stop()}}),a)})))()},changeObjectInList:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.form.options.picture="",e.selectedStep.form.options.customModel=null,t.next=4,e.displayARObject(e.selectedStep.form.options.model);case 4:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadCharacterImage(t.questId,t.options.type.code,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?i["a"].set(t.config.character.multiple[t.config.character.currentScene],"picture",r.data.file):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadAlternativeImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",s[0]),a.next=8,is.uploadAlternativeImage(t.questId,t.options.type.code,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?i["a"].set(t.selectedStep.form.options,"altFile",r.data.file):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},loadAndPrepare3DModel:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i,l,c;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a.$q.loading.show(),s.next=4,a.ModelLoaderAsync(e,t);case 4:n=s.sent,a.$q.loading.hide(),s.next=13;break;case 8:return s.prev=8,s.t0=s["catch"](0),console.error("Error while loading 3D model:",s.t0),Jt(a.$t("label.CouldNotDisplayObject"),"error"),s.abrupt("return");case 13:return r=n.scene,i=(new qo["Box3"]).setFromObject(r),l=i.getCenter(new qo["Vector3"]),l.multiplyScalar(-1),c=new qo["Object3D"],r.applyMatrix4((new qo["Matrix4"]).makeTranslation(l.x,l.y,l.z)),c.add(r),c.up=new qo["Vector3"](0,0,1),r=c,r.rotation.z=Math.PI/4,s.abrupt("return",{object:r,animations:n.animations});case 24:case"end":return s.stop()}}),s,null,[[0,8]])})))()},ModelLoaderAsync:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=console.log,s.abrupt("return",new Promise((function(s,o){var r=new Co["a"];-1!==e.indexOf("blob:")?r.load(e,s,n,o):t?r.load(a.uploadUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",s,n,o):r.load(a.serverUrl+"/statics/3d-models/"+e+".glb",s,n,o)})));case 2:case"end":return s.stop()}}),s)})))()},displayARObject:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(null!==a.config.locateItem.object){s.next=5;break}n=a,a.$nextTick(r()(o.a.mark((function a(){var s,r,i,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=document.getElementById("target-canvas"),s){a.next=3;break}throw new Error("missing 3D canvas");case 3:return n.config.locateItem.scene=new qo["Scene"],r=new qo["PerspectiveCamera"](70,1.333,.001,1e3),r.up=new qo["Vector3"](0,0,1),r.rotation.x=Math.PI/2,r.lookAt(new qo["Vector3"](0,0,0)),n.config.locateItem.camera=r,i=new qo["WebGLRenderer"]({alpha:!0,antialias:!0}),s.appendChild(i.domElement),n.config.locateItem.renderer=i,n.config.locateItem.renderer.setSize(Math.round(s.clientWidth),Math.round(.8*s.clientWidth)),n.config.locateItem.renderer.gammaOutput=!0,n.config.locateItem.controls=new Un.a(r,i.domElement),l=new qo["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),n.config.locateItem.scene.add(l),n.config.locateItem.scene.add(new qo["AmbientLight"](11579568)),a.next=21,n.displayARObjectEnd(e,t);case 21:n.animateModelPreview();case 22:case"end":return a.stop()}}),a)})))),s.next=9;break;case 5:return i=a.config.locateItem.scene.getObjectByName(Yn),a.config.locateItem.scene.remove(i),s.next=9,a.displayARObjectEnd(e,t);case 9:case"end":return s.stop()}}),s)})))()},displayARObjectEnd:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i,l;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.loadAndPrepare3DModel(e,t);case 2:n=s.sent,r=n.object,r.up=new qo["Vector3"](0,0,1),r.visible=!0,r.name=Yn,a.config.locateItem.scene.add(r),i=(new qo["Box3"]).setFromObject(r),l=new qo["Vector3"],i.getSize(l),a.config.locateItem.zoom=1.5*Math.max(l.x,l.y,l.z),a.config.locateItem.camera.position.set(0,-a.config.locateItem.zoom,0),a.config.locateItem.controls.update(),a.config.locateItem.object=r;case 15:case"end":return s.stop()}}),s)})))()},animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.changeObjectInList();case 2:case"end":return t.stop()}}),t)})))()},selectObject:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedStep.form.options.title=t.objectsList[e].name[t.lang],t.selectedStep.form.options.picture="statics/images/object/"+t.objectsList[e].file,t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture;case 4:case"end":return a.stop()}}),a)})))()},getColorsForCodeOptions:function(){var e=this,t=[];return Ys.forEach((function(a){t.push({value:a.value,label:e.$t("color."+a.label)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},deleteColor:function(e){this.config.colorCode.colorsForCode.splice(e,1)},addColor:function(){this.config.colorCode.colorsForCode.push({value:this.config.colorCode.newColor.value,label:this.config.colorCode.newColor.label}),this.config.colorCode.newColor={label:"",value:""}},removeHint:function(e){this.selectedStep.form.hint[this.lang].splice(e,1),this.$forceUpdate()},updateHint:function(e){var t=this;this.$q.dialog({dark:!0,message:this.$t("label.ModifyTheHint"),prompt:{model:this.selectedStep.form.hint[this.lang][e],type:"text"},cancel:!0}).onOk(function(){var a=r()(o.a.mark((function a(s){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedStep.form.hint[t.lang][e]=s,t.$forceUpdate();case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).onCancel((function(){}))},addHint:function(){this.selectedStep.form.hint&&this.selectedStep.form.hint[this.lang]||(this.selectedStep.form.hint||(this.selectedStep.form.hint={}),this.selectedStep.form.hint[this.lang]=[]),this.selectedStep.form.hint[this.lang].push(this.newHint),this.newHint=""},getQuestItemsAsOptions:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,is.listWonObjects(e.questId,e.stepId,e.quest.version);case 2:a=t.sent,a&&a.data?(e.questItems=a.data,s=[],e.questItems.forEach((function(t){s.push({value:t.picture,label:t.title}),e.config.useItem.stepsOfItems[t.picture]=t.step})),s.sort((function(e,t){return e.label>t.label?1:-1})),e.config.useItem.questItemsAsOptions=s):Jt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,s=e.clientY-t.top,o=this.getUseItemPictureWidth();this.selectedStep.form.answerPointerCoordinates.left=Math.round(100*a/o),this.selectedStep.form.answerPointerCoordinates.top=Math.round(75*s/o),this.positionUseItemPointer()},getClickCoordinatesFindItem:function(e){var t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,s=e.clientY-t.top,o=this.getFindItemPictureWidth();this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].left=Math.round(100*a/o),this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].top=Math.round(75*s/o),this.positionFindItemPointer()},positionFindItemPointer:function(){for(var e=this.getFindItemPictureWidth()/100,t=this.config.findItem.crossSize/2,a=0;a<5;a++)document.getElementById("cross"+a)&&(a<this.selectedStep.form.options.nbAreas?(document.getElementById("cross"+a).style.display="block",document.getElementById("cross"+a).style.left=Math.round(this.selectedStep.form.options.coordinates[a].left*e-t)+"px",document.getElementById("cross"+a).style.top=Math.round(this.selectedStep.form.options.coordinates[a].top*(4*e/3)-t)+"px"):document.getElementById("cross"+a).style.display="none")},getFindItemPictureWidth:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},initFindItemElements:function(){this.config.findItem.imageWidth=this.getFindItemPictureWidth(),this.config.findItem.crossSize=this.config.findItem.imageWidth/8,this.config.findItem.imageHeight=4*this.config.findItem.imageWidth/3},getUseItemPictureWidth:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},initUseItemElements:function(){this.config.useItem.imageWidth=this.getUseItemPictureWidth(),this.config.useItem.crossSize=this.config.useItem.imageWidth/8,this.config.useItem.imageHeight=4*this.config.useItem.imageWidth/3},positionUseItemPointer:function(){var e=this.getUseItemPictureWidth()/100,t=this.config.useItem.crossSize/2;document.getElementById("cross").style.left=Math.round(this.selectedStep.form.answerPointerCoordinates.left*e-t)+"px",document.getElementById("cross").style.top=Math.round(this.selectedStep.form.answerPointerCoordinates.top*(4*e/3)-t)+"px"},openGeolocationPopin:function(e){this.config.geolocation.showPopin=!0,this.config.geolocation.currentIndex=e},saveMyGPSLocation:function(){var e=this.config.geolocation.currentIndex,t=this.config.geolocation.position;-1!==e&&this.selectedStep.form.options.locations&&this.selectedStep.form.options.locations.length>0?(this.$set(this.selectedStep.form.options.locations[e],"lat",t.latitude),this.$set(this.selectedStep.form.options.locations[e],"lng",t.longitude)):(this.$set(this.selectedStep.form.options,"lat",t.latitude),this.$set(this.selectedStep.form.options,"lng",t.longitude),this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch()),Jt(this.$t("label.LocationSaved"),"success"),this.config.geolocation.showPopin=!1},onNewUserPosition:function(e){this.$set(this.config.geolocation,"position",e.coords)},onUserPositionError:function(e){console.error("UserPositionError",e)},addGPSLocation:function(){this.selectedStep.form.options.locations?this.selectedStep.form.options.locations.push({lat:"",lng:"",destination:""}):this.selectedStep.form.options.locations=[{lat:"",lng:"",destination:""}]},removeGPSLocation:function(e){this.selectedStep.form.options.locations.splice(e,1)},checkMainTextLength:function(e){var t=11,a=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=a&&(e.match(/\n/g)||[]).length<=t},addWriteTextAnswer:function(){this.selectedStep.form.answers.push("")},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){Ln()(this.originalStepData)!==Ln()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,a=!1,s=void 0;try{for(var o,n=Vs[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var r=o.value;if(r.code===e)return r}}catch(i){a=!0,s=i}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},showMedia:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia("background");case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},selectMedia:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedStep.form.backgroundImage[t.lang]=t.media.items[e].file,t.hideMedia();case 2:case"end":return a.stop()}}),a)})))()},loadMedia:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.listMedia(t.quest.questId,t.quest.version,e);case 2:s=a.sent,s&&s.data&&(t.media.items=s.data);case 4:case"end":return a.stop()}}),a)})))()},hideMedia:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.media.isOpened=!1,e.media.isSimulated=!1,"use-item"===e.options.type.code&&uu.setTimeout(e.initUseItemElements,2e3),"find-item"===e.options.type.code&&uu.setTimeout(e.initFindItemElements,2e3);case 4:case"end":return t.stop()}}),t)})))()},getIotObjectsAsOptions:function(e){var t=this;if(!["wait-for-event","trigger-event"].includes(e))throw new Error("Unsupported step type: "+e);var a=[];return Hs.forEach((function(s){s.step===e&&a.push({value:s.code,label:t.$t("iotObjects."+s.code)})})),a.sort((function(e,t){return e.label>t.label?1:-1})),a},updateIotStepOptions:function(){for(var e=["range","rangeX","rangeY","message","answer"],t=1;t<=3;t++)e.push("range"+t);for(var a=0,s=e;a<s.length;a++){var o=s[a];delete this.selectedStep.form.options[o]}switch(this.selectedStep.form.options.object){case"keypad":this.$set(this.selectedStep.form.options,"answer","");break;case"joystick":this.$set(this.selectedStep.form.options,"rangeX",{min:100,max:200}),this.$set(this.selectedStep.form.options,"rangeY",{min:100,max:200});break;case"distance":this.$set(this.selectedStep.form.options,"range",{min:50,max:150});break;case"pot":for(var n=1;n<=3;n++)this.$set(this.selectedStep.form.options,"range"+n,{min:100,max:200});break;case"escapebox":break;case"lcd":this.$set(this.selectedStep.form.options,"message","");break;case"buzzer":this.$set(this.selectedStep.form.options,"duration",1e3),this.$set(this.selectedStep.form.options,"frequency",440);break;case"chest":break;case"relay":break;default:throw new Error("unknown IoT object code '"+this.selectedStep.form.options.object+"'")}},activateCountDown:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t,!0===e&&t.$q.dialog({dark:!0,message:t.$t("label.CountDownWarning"),ok:!0,cancel:!0}).onCancel(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.selectedStep.form.countDownTime.enabled=!1;case 1:case"end":return e.stop()}}),e)}))));case 2:case"end":return a.stop()}}),a)})))()},selectFindItemArea:function(e){for(var t=0;t<this.selectedStep.form.options.nbAreas;t++)document.getElementById("cross"+t)&&(document.getElementById("cross"+t).style.opacity=.5);document.getElementById("cross"+e)&&(document.getElementById("cross"+e).style.opacity=1),this.config.findItem.currentArea=e},changeNbAreas:function(){if(this.selectedStep.form.options&&this.selectedStep.form.options.coordinates)if(this.selectedStep.form.options.coordinates.length<this.selectedStep.form.options.nbAreas){for(var e=this.selectedStep.form.options.coordinates.length;e<this.selectedStep.form.options.nbAreas;e++)this.selectedStep.form.options.coordinates.push({top:50,left:50});this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1,this.selectFindItemArea(this.config.findItem.currentArea-1)}else this.selectedStep.form.options.coordinates.length=this.selectedStep.form.options.nbAreas,this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1;return this.positionFindItemPointer(),!0},showGeolocationModeHelp:function(e){this.$q.dialog({title:this.$t("label."+e),message:this.$t("label."+e+"Help")})},uploadAudio:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("audio",s[0]),a.next=8,is.uploadAudio(t.quest.questId,n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(Jt(t.$t("label.UploadSucessful"),"positive"),t.$set(t.selectedStep.form.audioStream,t.lang,r.data.file)):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeAudio:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.audioStream[e.lang]="";case 1:case"end":return t.stop()}}),t)})))()},selectCharacter:function(e){i["a"].set(this.config.character.multiple[this.config.character.currentScene],"picture",e.toString())},addAnotherCharacter:function(){this.config.character.multiple.push({picture:"1",text:{fr:"",en:""},position:"right"})},moveCharacter:function(e,t){this.config.character.multiple[e].position=t},removeCharacter:function(e){this.config.character.multiple.splice(e,1)}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:fn["required"]},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:fn["required"]},imagePath:{}}:{text:{},imagePath:{required:fn["required"]}}}};break;case"code-keypad":e.answers={required:fn["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,10})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:fn["required"]};break;case"geolocation":break;case"info-video":e.videoStream={required:fn["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:fn["required"]}};break;case"new-item":e.options={picture:{required:fn["required"]},title:{required:fn["required"]}};break;case"use-item":e.backgroundImage={required:fn["required"]},e.answerItem={required:fn["required"]};break;case"write-text":e.answers={required:fn["required"]};break;case"locate-item-ar":e.options={lat:{required:fn["required"]},lng:{required:fn["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:fn["required"]}:e.options.picture={required:fn["required"]};break;case"touch-object-on-marker":e.options={model:{required:fn["required"]}};break;case"wait-for-event":e.options={protocol:{required:fn["required"]},object:{required:fn["required"]}};break}return{selectedStep:{form:e}}}},Hn=Gn,Wn=(a("441c"),a("b650"),Object(tt["a"])(Hn,jn,Dn,!1,null,"9a63d844",null)),Vn=Wn.exports,Jn=a("fb4c"),Kn=a("534a"),Zn=a("e18e");i["a"].directive("sortable",{inserted:function(e,t){return new Rn.a(e,t.value||{})}});var Xn={components:{stepSettings:Vn,stepPlay:Eo,story:ho},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},samples:{selected:"",list:[{questId:"61b315e6826fe25856cb573d",name:this.$t("samples.sample1")},{questId:"61bcfe7713927b4a5e2cca59",name:this.$t("samples.sample2")},{questId:"61b1dba8826fe25856cb56f7",name:this.$t("samples.sample3")}]},form:{fields:{title:{},category:"",priceForPlayer:"",tierPriceForPlayer:"",premiumPrice:{},playersNumber:1,description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,snapshots:[],town:"",country:"",zipcode:"",editorMode:"simple",customization:{audio:{},color:"",logo:"",character:"",removeScoring:!1,endMessage:{fr:"",en:""},endMessageForPerfectScore:{fr:"",en:""},font:"standard",fontColor:"#000000",qrCodeMessage:{fr:"",en:""},geolocationMessage:{fr:"",en:""},hideInventory:!1,disableGeolocation:!1,hideFullScreen:!1,authorName:"",userReplay:"yes",qrCodeValidity:"onetime"},rewardPicture:"",readMoreLink:"",limitNumberOfPlayer:0,scheduling:[],forcePlayerToHaveAccount:!1,shareUserDataWithCreator:!1,countDownTime:{enabled:!1,stopGame:!1}},categories:uu.buildOptionsForSelect(Jn,{valueField:"id",labelField:"name"},this.$t),languages:uu.buildOptionsForSelect(Zn,{valueField:"code",labelField:"name"},this.$t),levels:uu.buildOptionsForSelect(Kn,{valueField:"id",labelField:"name"},this.$t),prices:[{label:"0,99 ",value:"premiumprice1"},{label:"1,99 ",value:"premiumprice2"},{label:"2,99 ",value:"premiumprice3"},{label:"4,99 ",value:"premiumprice5"},{label:"7,99 ",value:"premiumprice8"},{label:"9,99 ",value:"premiumprice10"},{label:"14,99 ",value:"premiumprice15"},{label:"19,99 ",value:"premiumprice20"}],fonts:[{label:"Standard",value:"standard",class:"font-standard"},{label:"Arial",value:"arial",class:"font-arial"},{label:"Garamond",value:"garamond",class:"font-garamond"},{label:"Courrier New",value:"courrier",class:"font-courrier"},{label:"Brush script",value:"brush",class:"font-brush"}],userReplays:[{label:this.$t("label.Yes"),value:"yes"},{label:this.$t("label.No"),value:"no"},{label:this.$t("label.OnceADay"),value:"onceaday"}],players:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],times:[{label:"00h",value:0},{label:"01h",value:1},{label:"02h",value:2},{label:"03h",value:3},{label:"04h",value:4},{label:"05h",value:5},{label:"06h",value:6},{label:"07h",value:7},{label:"08h",value:8},{label:"09h",value:9},{label:"10h",value:10},{label:"11h",value:11},{label:"12h",value:12},{label:"13h",value:13},{label:"14h",value:14},{label:"15h",value:15},{label:"16h",value:16},{label:"17h",value:17},{label:"18h",value:18},{label:"19h",value:19},{label:"20h",value:20},{label:"21h",value:21},{label:"22h",value:22},{label:"23h",value:23},{label:"24h",value:24}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120},{label:"180 "+this.$t("label.minutes"),value:180},{label:"240 "+this.$t("label.minutes"),value:240},{label:"300 "+this.$t("label.minutes"),value:300},{label:"360 "+this.$t("label.minutes"),value:360},{label:"420 "+this.$t("label.minutes"),value:420},{label:"480 "+this.$t("label.minutes"),value:480},{label:this.$t("label.DoNotDisplay"),value:999}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1}},selectedItem:null,hint:{isOpened:!1,label:"",suggest:!1,number:0},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],payments:[],statistics:[],canMoveNextStep:!1,canPass:!1,showPaymentBox:!1,showTierPaymentBox:!1,paymentIsLoading:!1,selectLanguageForPublishing:!1,storage:"",itemUsed:null,isIOs:uu.isIOS(),serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",titleMaxLength:50,isHybrid:!1,isAdmin:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1},currentDate:null,score:{nbGoodAnwers:0,nbQuestions:0}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uu.clearAllRunningProcesses(),e.$route.params.questId&&""!==e.$route.params.questId?("undefined"!==typeof window.cordova&&(e.isHybrid=!0),e.loadQuestData()):e.$router.push("/quest/create/welcome"),e.$store.state.user.isAdmin&&(e.isAdmin=!0),e.refreshCurrentDate();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadQuestData:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.questId=e.$route.params.questId,t.next=3,Ot.getLastById(e.questId,"all");case 3:if(a=t.sent,!a){t.next=55;break}if(e.quest=a.data,"draft"===e.quest.status||e.isAdmin||(e.readOnly=!0),e.editor.initMode=e.quest.editorMode,e.quest.languages&&e.quest.languages.length>0&&"fr"===e.languages.current)for(e.languages.current=e.quest.languages[0].lang,s=0;s<e.quest.languages.length;s++)e.languages.available.push({label:e.$t("language."+e.quest.languages[s].lang),value:e.quest.languages[s].lang});return e.quest.description[e.languages.current]&&""!==e.quest.description[e.languages.current]||(e.quest.description[e.languages.current]=e.quest.description[e.quest.mainLanguage]),e.quest.picture[e.languages.current]&&""!==e.quest.picture[e.languages.current]||(e.quest.picture[e.languages.current]=e.quest.picture[e.quest.mainLanguage]),e.form.fields.questId=e.quest.questId,e.quest.title&&Object.keys(e.quest.title).length>0?e.form.fields.title=e.quest.title:(e.form.fields.title={},e.form.fields.title[e.languages.current]="-"),e.form.fields.description=e.quest.description,e.form.fields.category=e.quest.category,e.form.fields.location=e.quest.location,e.form.fields.languages=e.quest.languages,e.form.fields.mainLanguage=e.quest.mainLanguage,e.form.fields.level=e.quest.level,e.form.fields.duration=e.quest.duration,e.form.fields.picture=e.quest.picture,e.form.fields.thumb=e.quest.thumb,e.form.fields.snapshots=e.quest.snapshots,e.form.fields.editorMode=e.quest.editorMode,e.form.fields.customization=Object.assign(e.form.fields.customization,e.quest.customization),e.form.fields.rewardPicture=e.quest.rewardPicture,e.form.fields.readMoreLink=e.quest.readMoreLink,e.form.fields.limitNumberOfPlayer=e.quest.limitNumberOfPlayer,e.form.fields.scheduling=e.quest.scheduling,e.form.fields.forcePlayerToHaveAccount=e.quest.forcePlayerToHaveAccount||!1,e.form.fields.shareUserDataWithCreator=e.quest.shareUserDataWithCreator||!1,e.form.fields.playersNumber=e.quest.playersNumber,e.form.fields.startingPlace=e.form.fields.location.address||"",e.form.fields.zipcode=e.form.fields.location&&e.form.fields.location.zipcode?e.form.fields.location.zipcode:"",e.form.fields.town=e.form.fields.location&&e.form.fields.location.town?e.form.fields.location.town:"",e.form.fields.country=e.form.fields.location&&e.form.fields.location.country?e.form.fields.location.country:"",e.quest.countDownTime&&(e.form.fields.countDownTime=Object.assign(e.form.fields.countDownTime,e.quest.countDownTime)),"room"===e.quest.type?e.form.fields.priceForPlayer=e.quest.premiumPrice.manual:"quest"===e.quest.type&&(e.quest.premiumPrice||(e.form.fields.premiumPrice={}),e.quest.premiumPrice.androidId&&(e.form.fields.priceForPlayer=e.quest.premiumPrice.androidId),e.quest.premiumPrice.active?e.showPaymentBox=!0:e.showPaymentBox=!1,e.quest.premiumPrice.tier?(e.form.fields.tierPriceForPlayer=e.quest.premiumPrice.manual,e.showTierPaymentBox=!0):e.showTierPaymentBox=!1),e.form.fields.location.hasOwnProperty("coordinates")&&2===e.form.fields.location.coordinates.length&&(n=e.form.fields.location.coordinates,e.form.fields.location={lng:n[0],lat:n[1]}),e.tabs.progress=e.quest.creationStep,e.tabs.progress<=3&&(e.tabs.selected=e.tabs.list[Math.min(e.tabs.progress,2)]),t.next=43,e.refreshStepsList();case 43:return t.next=45,e.listEditors();case 45:return t.next=47,e.listInvitees();case 47:return t.next=49,e.listReviews();case 49:return t.next=51,e.getStatistics();case 51:e.quest.access&&"private"===e.quest.access&&e.getPrivateRanking(),e.getReadableStorageUsage(),t.next=56;break;case 55:Jt(e.$t("label.ErrorStandardMessage"),"error");case 56:case"end":return t.stop()}}),t)})))()},movePremium:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=11;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=11;break}return t.next=4,Ot.CheckIfCanBeMovedPremium(e.questId);case 4:if(a=t.sent,!(a&&a.data&&a.data.canBePremium)){t.next=10;break}return t.next=8,Ot.MoveToPremium(e.questId);case 8:s=t.sent,s&&s.data&&s.data.status&&"ok"===s.data.status?(e.quest.isPremium=!0,e.quest.size.limit=6e8):Jt(e.$t("label.ErrorStandardMessage"),"error");case 10:e.premium.isOpened=!1;case 11:case"end":return t.stop()}}),t)})))()},openPremiumBox:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=7;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=6;break}return t.next=4,Ot.CheckIfCanBeMovedPremium(e.questId);case 4:a=t.sent,a&&a.data&&a.data.canBePremium&&(e.premium.canMovePremium=!0);case 6:e.premium.isOpened=!0;case 7:case"end":return t.stop()}}),t)})))()},uploadReward:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadReward(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.form.fields.rewardPicture=r.data.file,t.$forceUpdate()):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeReward:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.rewardPicture=null;case 1:case"end":return t.stop()}}),t)})))()},changeEditorMode:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("advanced"!==e.form.fields.editorMode){t.next=4;break}e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:case"end":return t.stop()}}),t)})))).onCancel(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.editorMode="simple";case 1:case"end":return t.stop()}}),t)})))),t.next=6;break;case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})))()},refreshCurrentDate:function(){var e=new Date;this.currentDate=Bo()(e).format("DD/MM/YYYY, k:mm")},refreshStepsList:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r,i,l,c,u,d,p,m,h,g,f,b,v,y,w,q,x,C,S,k,P,_,T,I,A,$,O,M;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.stepsMissing=!1,e.$q.loading.show(),t.next=4,is.listForAQuest(e.questId,e.quest.version,"all");case 4:if(a=t.sent,!a||!a.data){t.next=84;break}if(e.chapters.items=a.data.chapters,s=a.data.steps,"simple"!==e.form.fields.editorMode){t.next=12;break}e.chapters.items&&e.chapters.items.length>0&&(e.chapters.items[0].steps=s),t.next=70;break;case 12:n=0;case 13:if(!(n<e.chapters.items.length)){t.next=70;break}for(e.chapters.items[n].warnings=[],r=!1,i=[],l=[],c=[],u=[],d=0;d<s.length;d++)s[d].chapterId.toString()===e.chapters.items[n].chapterId.toString()&&(e.chapters.items[n].steps||(e.chapters.items[n].steps=[]),"end-chapter"===s[d].type&&(r=!0),c.push(s[d]));if(e.chapters.items[n].countDownTime&&e.chapters.items[n].countDownTime>0&&1!==e.chapters.items[n].order){for(p=!1,m=0;m<s.length;m++)if(s[m].chapterId.toString()===e.chapters.items[n].chapterId.toString())for(h=0;h<s[m].conditions.length;h++)"chapterTimerOver"===s[m].conditions[h]&&(p=!0);p||e.chapters.items[n].warnings.push({noCountDownTimerCondition:!0})}for(g=[],f=0;f<c.length;f++)g.push(c[f].stepId.toString());b=[],v=0;case 26:if(!(g.length>0&&v<1e3)){t.next=60;break}v++,y=0;case 29:if(!(y<c.length)){t.next=58;break}if(w=c[y].stepId.toString(),-1!==b.indexOf(w)){t.next=55;break}if(c[y].conditions&&0===c[y].conditions.length&&(b.unshift(w),g.splice(g.indexOf(w),1),i.push(c[y].title[e.languages.current])),!(c[y].conditions&&c[y].conditions.length>0)){t.next=55;break}q=0,x=0;case 36:if(!(x<c[y].conditions.length)){t.next=53;break}if(-1!==c[y].conditions[x].indexOf("counter")||-1!==c[y].conditions[x].indexOf("combineobject")||-1!==c[y].conditions[x].indexOf("haveobject")||-1!==c[y].conditions[x].indexOf("nothaveobject")||"chapterTimerOver"===c[y].conditions[x]){t.next=50;break}if(C=c[y].conditions[x].replace("stepDone_",""),C=C.replace("stepSuccess_",""),C=C.replace("stepFail_",""),C=C.replace("stepRandom_",""),-1!==C.indexOf("stepAnswerNb")&&(S=C.split("_"),C=S[1]),-1!==b.indexOf(C)){t.next=48;break}return-1===g.indexOf(C)&&(l.push(w),g.splice(g.indexOf(w),1),b.push(w)),t.abrupt("continue",55);case 48:k=b.indexOf(C),k>q&&(q=k);case 50:x++,t.next=36;break;case 53:b.length>=q&&-1===c[y].conditions.indexOf("chapterTimerOver")?b.splice(q+1,0,w):b.push(w),g.splice(g.indexOf(w),1);case 55:y++,t.next=29;break;case 58:t.next=26;break;case 60:for(P=0;P<b.length;P++)for(_=0;_<c.length;_++)b[P]===c[_].stepId.toString()&&(-1!==l.indexOf(c[_].stepId.toString())&&(c[_].error="FollowingStepsHaveInvalidCondition"),0===P||0===c[_].conditions.length||c[_].conditions.length>1||"locate-marker"===c[_].type||"geolocation"===c[_].type||-1!==c[_].conditions.indexOf("chapterTimerOver")?c[_].level=1:c[_].level=2,e.chapters.items[n].steps.push(c[_]));for(T=!1,I=0;I<c.length;I++){for(T=!1,A=0;A<b.length;A++)b[A]===c[I].stepId.toString()&&(T=!0);T||(c[I].error="FollowingStepsHaveInvalidCondition",c[I].level=1,e.chapters.items[n].steps.push(c[I]))}r||e.chapters.items[n].warnings.push({noEndOfChapter:!0}),i.length>1&&e.chapters.items[n].warnings.push({moreThan1StepWithNoCondition:i}),u.length>0&&e.chapters.items[n].warnings.push({stepsWithMissingParent:u}),l.length>0&&e.chapters.items[n].warnings.push({stepWithNoParent:l});case 67:n++,t.next=13;break;case 70:s&&s.length>0&&e.tabs.progress<2&&(e.tabs.progress=2),$=!1,O=0;case 73:if(!(O<s.length)){t.next=81;break}if(M=s[O],"locate-marker"!==M.type){t.next=78;break}return $=!0,t.abrupt("break",81);case 78:O++,t.next=73;break;case 81:e.quest.hasLocateMarkerSteps=$,t.next=85;break;case 84:e.warnings.stepsMissing=!0;case 85:e.$q.loading.hide();case 86:case"end":return t.stop()}}),t)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",a=0;a<e.length;a++)if(e[a].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[a].hasOwnProperty("noCountDownTimerCondition")&&(t+=this.$t("label.YourChapterHasTimerButNoCountDonwTimerCondition")+". "),e[a].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[a].moreThan1StepWithNoCondition.join(", ")+". "),e[a].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[a].hasOwnProperty("stepsWithMissingParent")){for(var s in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[a].stepsWithMissingParent)for(var o=0;o<this.chapters.items.length;o++)for(var n=0;n<this.chapters.items[o].steps.length;n++)this.chapters.items[o].steps[n].stepId.toString()===s&&(t+=this.chapters.items[o].steps[n].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("public"!==e.quest.access||0!==e.form.fields.location.lat&&0!==e.form.fields.location.lng){t.next=3;break}return Jt(e.$t("label.YouMustDefineStartLocation"),"warning"),t.abrupt("return");case 3:if(e.$v.form.fields.$touch(),e.$v.form.fields.$error){t.next=17;break}return a={languages:[e.form.fields.mainLanguage],version:e.quest.version,type:e.quest.type,location:{type:"Point",coordinates:[e.form.fields.location.lng,e.form.fields.location.lat],town:e.form.fields.town,country:e.form.fields.country,zipcode:e.form.fields.zipcode,address:e.form.fields.startingPlace}},e.form.fields.premiumPrice||(e.form.fields.premiumPrice={}),e.showPaymentBox&&(e.form.fields.premiumPrice.active=!0),e.showTierPaymentBox&&(e.form.fields.premiumPrice.tier=!0),s=Object.assign({},e.form.fields,a),s.questId||(s.questId=e.questId),e.$q.loading.show(),t.next=14,Ot.save(s);case 14:n=t.sent,e.$q.loading.hide(),n&&n.data?(e.quest.playersNumber=e.form.fields.playersNumber,e.tabs.progress<1&&("quest"===e.quest.type?(e.tabs.progress=1,e.tabs.selected="steps"):(e.tabs.progress=2,e.tabs.selected="publish")),Jt(e.$t("label.QuestSaved"),"info")):Jt(e.$t("label.ErrorStandardMessage"),"error");case 17:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadPicture(n);case 8:return r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?t.form.fields.picture[t.languages.current]=r.data.file:r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),a.next=12,Ot.uploadThumb(n);case 12:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?t.form.fields.thumb[t.languages.current]=i.data.file:i.data.message&&"Error: File too large"===i.data.message&&Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 15:case"end":return a.stop()}}),a)})))()},uploadThumb:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadThumb(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?t.form.fields.thumb[t.languages.current]=r.data.file:r.data.message&&"Error: File too large"===r.data.message&&Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadSnapshot:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(t.form.fields.snapshots&&t.form.fields.snapshots.length>2)){a.next=2;break}return a.abrupt("return",!1);case 2:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=6;break}return a.abrupt("return");case 6:return n=new FormData,n.append("image",s[0]),a.next=10,Ot.uploadSnapshot(n,t.questId);case 10:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?t.form.fields.snapshots.push(r.data.file):r.data.message&&"Error: File too large"===r.data.message&&Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 13:case"end":return a.stop()}}),a)})))()},removeSnapshot:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.quest.snapshots.splice(e,1);case 1:case"end":return a.stop()}}),a)})))()},uploadLogo:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadLogo(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.form.fields.customization.logo=r.data.file,t.$forceUpdate()):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeLogo:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.logo=null;case 1:case"end":return t.stop()}}),t)})))()},uploadAudio:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("audio",s[0]),a.next=8,Ot.uploadAudio(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(Jt(t.$t("label.UploadSucessful"),"positive"),t.form.fields.customization.audio||(t.form.fields.customization.audio={}),t.$set(t.form.fields.customization.audio,t.languages.current,r.data.file)):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeAudio:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.audio[e.languages.current]="";case 1:case"end":return t.stop()}}),t)})))()},uploadCharacter:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadCharacter(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.form.fields.customization.character=r.data.file,t.$forceUpdate()):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeCharacter:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.character=null;case 1:case"end":return t.stop()}}),t)})))()},uploadCharacterOnMap:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),s=e.target.files,s[0]){a.next=4;break}return a.abrupt("return");case 4:return n=new FormData,n.append("image",s[0]),a.next=8,Ot.uploadCharacterOnMap(n);case 8:r=a.sent,r&&r.hasOwnProperty("data")?r.data.file?(t.form.fields.customization.characterOnMap=r.data.file,t.$forceUpdate()):r.data.message&&"Error: File too large"===r.data.message?Jt(t.$t("label.FileTooLarge"),"error"):Jt(t.$t("label.UnknowUploadError"),"error"):Jt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},removeCharacterOnMap:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.characterOnMap=null;case 1:case"end":return t.stop()}}),t)})))()},startStory:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.countForUser(e.$store.state.user._id);case 2:a=t.sent,a.data&&a.data<2&&(e.story.active=!0,null===e.story.step&&"settings"===e.tabs.selected&&(e.story.step=17));case 4:case"end":return t.stop()}}),t)})))()},getCurrentLocation:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),navigator.geolocation.getCurrentPosition(e.fillLocation,e.getLocationError,{timeout:5e3,maximumAge:0});case 2:case"end":return t.stop()}}),t)})))()},getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var a=new google.maps.Geocoder;a.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,a){t.$q.loading.hide(),"OK"===a&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),Jt(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.form.fields.location={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},t.form.fields.town=t.getCity(e),t.form.fields.country=t.getCountry(e),t.form.fields.zipcode=t.getZipcode(e),t.form.fields.startingPlace=e.formatted_address||"";case 5:case"end":return a.stop()}}),a)})))()},getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var a=0;a<e.address_components[t].types.length;a++)if("postal_code"===e.address_components[t].types[a])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var a=0;a<e.address_components[t].types.length;a++)if("locality"===e.address_components[t].types[a])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var a=0;a<e.address_components[t].types.length;a++)if("country"===e.address_components[t].types[a])return e.address_components[t].short_name;return""},onChapterListUpdate:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,is.moveChapter(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:s=a.sent,s&&t.chapters.items.splice(e.newIndex,0,t.chapters.items.splice(e.oldIndex,1)[0]);case 4:case"end":return a.stop()}}),a)})))()},onStepListUpdate:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,is.move(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:s=a.sent,s&&t.chapters.items[0].steps.splice(e.newIndex,0,t.chapters.items[0].steps.splice(e.oldIndex,1)[0]);case 4:case"end":return a.stop()}}),a)})))()},publish:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,i,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.checkIfTestable();case 2:if(s=a.sent,!s){a.next=41;break}if(!e){a.next=37;break}for(n="unpublish",i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].lang&&t.form.fields.languages[i].lang===e&&t.form.fields.languages[i].published&&(n="publish");if("publish"!==n){a.next=29;break}if("unpublished"!==t.quest.status&&"draft"!==t.quest.status){a.next=22;break}if("private"!==t.quest.access||t.quest.isPremium){a.next=17;break}return t.$q.loading.show(),a.next=13,Ot.publish(t.questId,e);case 13:t.$q.loading.hide(),t.quest.status="published",a.next=19;break;case 17:l=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l.$q.loading.show(),t.next=3,Ot.publish(l.questId,e);case 3:l.$q.loading.hide(),l.quest.status="tovalidate";case 5:case"end":return t.stop()}}),t)})))).onCancel(r()(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=0;t<l.form.fields.languages.length;t++)l.form.fields.languages[t].published=!1;case 1:case"end":return e.stop()}}),e)}))));case 19:t.readOnly=!0,a.next=26;break;case 22:return t.$q.loading.show(),a.next=25,Ot.publish(t.questId,e);case 25:t.$q.loading.hide();case 26:t.tabs.progress=3,a.next=35;break;case 29:return t.$q.loading.show(),a.next=32,Ot.unpublish(t.questId,e);case 32:t.$q.loading.hide(),t.quest.status="unpublished",t.tabs.progress=2;case 35:a.next=39;break;case 37:l=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l.$q.loading.show(),e.next=3,Ot.publish(l.questId,"all");case 3:l.$q.loading.hide(),l.quest.status="tovalidate";case 5:case"end":return e.stop()}}),e)}))));case 39:a.next=43;break;case 41:for(Jt(t.$t("label.YourQuestContainsErrorsInSteps"),"error"),i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].published=!1;case 43:case"end":return a.stop()}}),a)})))()},isReadOnly:function(){return!(this.isAdmin||"disabled"!==this.quest.status&&"tovalidate"!==this.quest.status)},unpublish:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="unpublished",e.$q.loading.show(),t.next=4,Ot.unpublish(e.questId);case 4:e.$q.loading.hide(),Jt(e.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return t.stop()}}),t)})))()},testQuest:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfTestable();case 2:a=t.sent,a&&(e.isHybrid?e.$router.push("/quest/play/"+e.questId):e.$q.dialog({dark:!0,message:e.$t("label.TestWithSimulatorWarning"),ok:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/quest/play/"+e.questId);case 1:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t)})))()},checkIfTestable:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.chapters.items.length)){t.next=8;break}if(!(e.chapters.items[a].warnings&&e.chapters.items[a].warnings.length>0)){t.next=5;break}return Jt(e.$t("label.YourQuestContainsErrorsInSteps"),"error"),t.abrupt("return",!1);case 5:a++,t.next=1;break;case 8:if(!(e.editor.items&&e.quest.playersNumber&&e.editor.items.length>=e.quest.playersNumber)){t.next=18;break}return t.next=11,Za.closeInProgressRuns(e.questId);case 11:if(!(e.quest.playersNumber>1)){t.next=16;break}return t.next=14,Za.createMultiplayerRunForTesters(e.questId);case 14:if(s=t.sent,s){for(n=[],a=0;a<e.editor.items.length;a++)n.push(e.editor.items[a].name);Jt(e.$t("label.HereAreTheTesters",{nameList:n.join(", ")}),"info")}case 16:t.next=20;break;case 18:return Jt(e.$t("label.YouNeedAtLeastXEditorsToTest",{nb:e.quest.playersNumber}),"error"),t.abrupt("return",!1);case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})))()},removeQuest:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.remove(a.questId,a.quest.version);case 2:e.$router.push("/home");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},duplicateQuest:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.clone(e.questId,e.quest.version);case 2:a=t.sent,a&&a.data&&a.data.newId&&(s=a.data.newId,n=e,e.$q.dialog({dark:!0,message:e.$t("label.DoYouWantToOpenClonedQuest"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$router.push("/quest/settings/"+s);case 1:case"end":return e.stop()}}),e)})))));case 4:case"end":return t.stop()}}),t)})))()},removeStep:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t,t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,is.remove(s.questId,e,s.quest.version);case 2:return t.next=4,s.refreshStepsList();case 4:case"end":return t.stop()}}),t)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})))()},createNewVersion:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.quest.status="waiting",e.$q.dialog({dark:!0,message:e.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="draft",t.next=3,Ot.createNewVersion(a.questId);case 3:e.$router.push("/quest/builder/"+a.questId);case 4:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})))()},removeChapter:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t,n=0;case 2:if(!(n<t.chapters.items.length)){a.next=10;break}if(t.chapters.items[n].chapterId.toString()!==e){a.next=7;break}if(!(t.chapters.items[n].steps&&t.chapters.items[n].steps.length>0)){a.next=7;break}return Jt(t.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),a.abrupt("return",!1);case 7:n++,a.next=2;break;case 10:t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function a(){var n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,is.removeChapter(s.questId,e,s.quest.version);case 2:return n=s.chapters.items.map((function(e){return e.chapterId})).indexOf(e),s.chapters.items.splice(n,1),a.next=6,t.refreshStepsList();case 6:case"end":return a.stop()}}),a)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return a.stop()}}),a)})))()},modifyChapter:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(s=t,n={name:"",position:0},i=0;i<t.chapters.items.length;i++)t.chapters.items[i].chapterId.toString()===e&&(n.name=t.chapters.items[i].title[t.languages.current]?t.chapters.items[i].title[t.languages.current]:"",n.position=i);t.$q.dialog({dark:!0,message:t.$t("label.ModifyTheChapter"),prompt:{model:n.name,type:"text"},cancel:!0}).onOk(function(){var t=r()(o.a.mark((function t(a){var r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r[s.languages.current]=a,t.next=4,is.modifyChapter({questId:s.questId,version:s.quest.version,chapterId:e,title:r});case 4:s.chapters.items[n.position].title[s.languages.current]=a;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return a.stop()}}),a)})))()},modifyChapterTimer:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(s=t,n={countDownTime:"",position:0},i=0;i<t.chapters.items.length;i++)t.chapters.items[i].chapterId.toString()===e&&(n.countDownTime=t.chapters.items[i].countDownTime,n.position=i);t.$q.dialog({dark:!0,message:t.$t("label.ModifyTheChapterTimer"),prompt:{model:n.countDownTime,type:"number",min:0,max:400},cancel:!0}).onOk(function(){var t=r()(o.a.mark((function t(a){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,is.modifyChapter({questId:s.questId,version:s.quest.version,chapterId:e,countDownTime:a});case 2:s.chapters.items[n.position].countDownTime=a;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return a.stop()}}),a)})))()},addChapter:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.$q.dialog({dark:!0,message:e.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var t=r()(o.a.mark((function t(s){var n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n[a.languages.current]=s,t.next=4,is.modifyChapter({questId:a.questId,version:a.quest.version,chapterId:"0",title:n});case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},modifyStep:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.chapters.showNewStepPageSettings=!0,e&&e.stepId&&(s=t,setTimeout((function(){s.stepId=e.stepId,s.chapters.newStep.type=s.getStepTypeInformations(e.type),s.chapters.newStep.chapterId=e.chapterId,s.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),t.closeAllPanels(),t.closeStepTypePage(),t.chapters.showNewStepOverview=!1,t.chapters.showNewStep=!1,t.chapters.reloadStepPlay=!1,t.moveToTop();case 8:case"end":return a.stop()}}),a)})))()},playStep:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.chapters.reloadStepPlay=!1,e&&e.stepId&&(t.stepId=e.stepId,e.id=e.stepId,t.chapters.newStep.type=t.getStepTypeInformations(e.type),t.chapters.newStep.chapterId=e.chapterId,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop),t.closeAllPanels(),a.next=5,is.getById(t.stepId,t.quest.version,t.languages.current);case 5:s=a.sent,s&&s.data?(t.chapters.newStep.overviewData=s.data,t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!0,t.hint.number=0,t.moveToTop(),n=t,setTimeout((function(){n.chapters.reloadStepPlay=!0}),300),t.computeGoodAnswers()):Jt(t.$t("label.ErrorStandardMessage"),"error");case 7:case"end":return a.stop()}}),a)})))()},moveToPosition:function(e){return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.scrollTo(0,e);case 1:case"end":return t.stop()}}),t)})))()},closeOverview:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resetStepData(),e.closeAllPanels(),e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.showNewStepOverview=!1,e.tabs.selected="steps",uu.clearAllNotifications(),e.story.active&&7===e.countSteps()&&(e.story.step=22);case 7:case"end":return t.stop()}}),t)})))()},resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1,this.hint.number=0},closeStepSettingsPage:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:return e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.newStep.type={},e.stepId=-1,e.chapters.showNewStepPageSettings=!1,e.tabs.selected="steps",t.next=9,e.refreshMediaSize();case 9:case"end":return t.stop()}}),t)})))()},addStep:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e||(e=t.chapters.items[0].chapterId),t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepOverview=!1,t.chapters.showNewStepPage=!0,t.chapters.newStep.chapterId=e,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop,s=0,n=0;case 8:if(!(n<t.chapters.items.length)){a.next=16;break}if(t.chapters.items[n].chapterId.toString()!==e||!t.chapters.items[n].steps){a.next=13;break}return r=t.chapters.items[n].steps.length,r>0&&(s=t.chapters.items[n].steps[r-1].stepId),a.abrupt("break",16);case 13:n++,a.next=8;break;case 16:t.chapters.newStep.previousStepId=s;case 17:case"end":return a.stop()}}),a)})))()},insertStep:function(e,t){var a=this;return r()(o.a.mark((function s(){return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e||(e=a.chapters.items[0].chapterId),a.chapters.showNewStepPage=!0,a.chapters.showNewStepPageSettings=!1,a.chapters.showNewStepOverview=!1,a.chapters.newStep.chapterId=e,a.chapters.newStep.previousStepId=t;case 6:case"end":return s.stop()}}),s)})))()},duplicateStep:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,is.duplicate(t.questId,e,t.quest.version);case 2:return a.next=4,t.refreshStepsList();case 4:case"end":return a.stop()}}),a)})))()},selectLanguage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.languages.current=e,s=!1,t.quest.languages)for(n=0;n<t.quest.languages.length;n++)t.quest.languages[n].lang===e&&(s=!0);if(s){a.next=6;break}return a.next=6,Ot.addLanguage(t.questId,e);case 6:return a.next=8,t.loadQuestData();case 8:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]),t.story.active&&(t.story.step=18);case 10:case"end":return a.stop()}}),a)})))()},changeLanguage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.languages.current=e,s=!1,t.quest.languages)for(n=0;n<t.quest.languages.length;n++)t.quest.languages[n].lang===e&&(s=!0);if(s){a.next=8;break}i=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.addLanguage(i.questId,e);case 2:return a.next=4,t.loadQuestData();case 4:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 5:case"end":return a.stop()}}),a)})))).onCancel(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.languages.current=i.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),a.next=12;break;case 8:return a.next=10,t.loadQuestData();case 10:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]),t.languages.current=e;case 12:case"end":return a.stop()}}),a)})))()},closePrivateQuest:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,e.$q.dialog({dark:!0,message:e.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot.closePrivate(a.questId,a.quest.version);case 2:return a.quest.status="old",e.next=5,a.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getPrivateRanking:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Za.listScoresForThisQuest(e.questId);case 2:a=t.sent,a&&a.data&&(e.ranking.items=a.data,e.ranking.items.sort(e.compareScore),e.refreshPosition());case 4:case"end":return t.stop()}}),t)})))()},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return Vs.filter((function(a){return a.category===e&&a.enabled&&!(("end-chapter"===a.code||"increment-counter"===a.code)&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.chapters.newStep.type=e,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!1,t.stepId="0",t.chapters.showNewStepPageSettings=!0,t.moveToTop(),0===t.countSteps()&&t.story.active&&(t.story.step=20);case 7:case"end":return a.stop()}}),a)})))()},countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,"end-chapter"!==e.type&&"increment-counter"!==e.type){a.next=8;break}return a.next=5,t.closeOverview();case 5:return a.next=7,t.refreshStepsList();case 7:return a.abrupt("return",!1);case 8:return t.chapters.showNewStepOverview=!0,t.stepId=e.id,a.next=12,is.getById(t.stepId,t.quest.version,t.languages.current);case 12:if(s=a.sent,!s||!s.data){a.next=28;break}return t.chapters.newStep.overviewData=s.data,t.moveToTop(),n=t,setTimeout((function(){n.chapters.reloadStepPlay=!0}),300),t.story.active&&0===t.countSteps()&&(t.story.step=21),a.next=21,t.refreshMediaSize();case 21:return a.next=23,t.refreshStepsList();case 23:if("use-item"!==t.chapters.newStep.overviewData.type){a.next=26;break}return a.next=26,t.fillInventory();case 26:a.next=29;break;case 28:Jt(t.$t("label.ErrorStandardMessage"),"error");case 29:case"end":return a.stop()}}),a)})))()},trackStepPlayed:function(e){var t=this;return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0;case 1:case"end":return e.stop()}}),e)})))()},trackStepSuccess:function(e){var t=this;return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0,"image-over-flow"!==t.chapters.newStep.overviewData.type&&"binocular"!==t.chapters.newStep.overviewData.type&&t.hideHint();case 2:case"end":return e.stop()}}),e)})))()},trackStepPass:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.canPass=!0;case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hideHint();case 1:case"end":return t.stop()}}),t)})))()},trackMessage:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.canMoveNextStep=!0);case 1:case"end":return a.stop()}}),a)})))()},addEditor:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,Ot.addEditor(e.questId,e.quest.version,e.editor.new.email);case 3:if(a=t.sent,e.$q.loading.hide(),!a||403===a.status){t.next=12;break}return t.next=8,e.listEditors();case 8:e.editor.new.email="",e.editor.new.isExisting=!0,t.next=13;break;case 12:e.editor.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listEditors:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.editorsMissing=!1,t.next=3,Ot.listEditors(e.questId,e.quest.version);case 3:if(a=t.sent,a&&a.data)for(e.editor.items=a.data,s=0;s<e.editor.items.length;s++)e.editor.items[s].checked=!0;else e.warnings.editorsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeEditor:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$q.loading.show(),a.next=3,Ot.removeEditor(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),a.next=6,t.listEditors();case 6:case"end":return a.stop()}}),a)})))()},addInvitee:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,Ot.addInvitee(e.questId,e.quest.version,e.invitee.new.email);case 3:if(a=t.sent,e.$q.loading.hide(),!a||403===a.status){t.next=12;break}return t.next=8,e.listInvitees();case 8:e.invitee.new.email="",e.invitee.new.isExisting=!0,t.next=13;break;case 12:e.invitee.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listInvitees:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inviteeMissing=!1,t.next=3,Ot.listInvitees(e.questId,e.quest.version);case 3:if(a=t.sent,a&&a.data)for(e.invitee.items=a.data,s=0;s<e.invitee.items.length;s++)e.invitee.items[s].checked=!0;else e.warnings.inviteeMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeInvitee:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$q.loading.show(),a.next=3,Ot.removeInvitee(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),a.next=6,t.listInvitees();case 6:case"end":return a.stop()}}),a)})))()},hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<Vs.length;t++)if(Vs[t].code===e)return"fas fa-"+Vs[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<Vs.length;t++)if(Vs[t].code===e)return Vs[t];return""},fillInventory:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inventoryMissing=!1,e.$q.loading.show(),t.next=4,is.listWonObjects(e.questId,e.stepId,e.quest.version);case 4:a=t.sent,a&&a.data?e.inventory.items=a.data:e.warnings.inventoryMissing=!0,e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.overview.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},selectItem:function(e){this.inventory.detail.zoom=1,"use-item"!==this.chapters.newStep.overviewData.type?(this.inventory.detail.isOpened=!0,e.pictures&&e.pictures[this.languages.current]&&""!==e.pictures[this.languages.current]?this.inventory.detail.url=e.picture.indexOf("statics/")>-1||-1!==e.picture.indexOf("blob:")?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture:this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.uploadUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.languages.current]&&""!==e.titles[this.languages.current]?this.inventory.detail.title=e.titles[this.languages.current]:this.inventory.detail.title=e.title):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},displayTierPaymentWarning:function(){this.showTierPaymentBox&&this.showHelpPopup("PaymentOnYourSideWarning")},inventoryZoom:function(e){i["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},askForHint:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(!e.hint.isOpened){t.next=8;break}e.closeAllPanels(),e.hint.number++,e.hint.number>=e.hint.label.length&&(e.hint.number=0),t.next=12;break;case 8:return t.next=10,Za.getHint(0,e.stepId,e.quest.version,e.languages.current);case 10:a=t.sent,a&&a.hint?(e.hint.label=a.hint,e.closeAllPanels(),e.hint.isOpened=!0,e.overview.tabSelected="hint"):Jt(e.$t("label.ErrorStandardMessage"),"error");case 12:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&""!==this.chapters.newStep.overviewData.hint&&this.chapters.newStep.overviewData.hint.length>0},getMyGPSLocation:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),a=e,navigator.geolocation.getCurrentPosition((function(e){a.$q.loading.hide(),a.form.fields.location.lat=e.coords.latitude,a.form.fields.location.lng=e.coords.longitude}),e.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return t.stop()}}),t)})))()},moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=uu.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=uu.humanReadableFileSize(this.quest.size.limit,!0,this.$t);this.storage=this.$t("label.UsedOver",{current:e,limit:t})}},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia();case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},loadMedia:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.listMedia(e.questId,e.quest.version);case 2:a=t.sent,a&&a.data&&(e.media.items=a.data);case 4:case"end":return t.stop()}}),t)})))()},refreshMediaSize:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.getSize(e.questId,e.quest.version);case 2:a=t.sent,a&&a.data&&(e.quest.size=a.data.size);case 4:case"end":return t.stop()}}),t)})))()},removeMedia:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.removeMedia(t.questId,t.quest.version,e);case 2:if(s=a.sent,s){a.next=7;break}t.$q.dialog({message:t.$t("label.TechnicalIssue")}),a.next=9;break;case 7:return a.next=9,t.loadMedia();case 9:case"end":return a.stop()}}),a)})))()},zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshMediaSize();case 2:e.media.isOpened=!1;case 3:case"end":return t.stop()}}),t)})))()},startSchedule:function(){this.form.fields.scheduling=[[0,24],[0,24],[0,24],[0,24],[0,24],[0,24],[0,24]]},resetSchedule:function(){this.form.fields.scheduling=[]},downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var a=new XMLHttpRequest;a.open("GET","statics/markers/all.pdf",!0),a.responseType="blob",a.onload=function(a){if(200!==this.status)return Jt(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var s=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(s)}))}),(function(t){Jt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},a.send()}),(function(t){Jt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},downloadTexts:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,is.generateTextsExportFile(e.questId,e.quest.version,e.languages.current);case 3:if(a=t.sent,a.hasOwnProperty("data")&&a.data.hasOwnProperty("result")){t.next=6;break}throw new Error("Could not retrieve texts from server");case 6:s="data:text/csv;charset=utf-8,"+a.data.result,n=encodeURI(s),r=document.createElement("a"),r.setAttribute("href",n),r.setAttribute("download","texts_"+e.languages.current+".csv"),document.body.appendChild(r),r.click(),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),console.error(t.t0),Jt(e.$t("label.TechnicalIssue"),"error");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},createNewPaymentQRCode:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.paymentIsLoading=!0,t.next=3,Ot.createTierPayment(e.questId,e.quest.premiumPrice.manual);case 3:return t.next=5,e.listPayments();case 5:e.paymentIsLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},createMultipleNewPaymentQRCode:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=0;case 1:if(!(s<e)){a.next=7;break}return a.next=4,Ot.createTierPayment(t.questId,t.quest.premiumPrice.manual);case 4:s++,a.next=1;break;case 7:return a.next=9,t.listPayments();case 9:case"end":return a.stop()}}),a)})))()},printQRCode:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.printQRCodes(e.questId);case 2:t.sent,setTimeout(e.openQRCodesPrinted,2e3);case 4:case"end":return t.stop()}}),t)})))()},openQRCodesPrinted:function(){window.open(this.serverUrl+"/upload/tiers/print/"+this.questId+".pdf","_self")},listPayments:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier)){t.next=5;break}return t.next=3,Ot.listTierPayments(e.questId);case 3:a=t.sent,e.payments=a.data;case 5:case"end":return t.stop()}}),t)})))()},downloadQRCode:function(e){uu.openExternalLink(this.uploadUrl+"/upload/tiers/"+e+".png")},removeCode:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToRemoveThisTierCode"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Ot.removeTierPayment(t.questId,e);case 2:return a.next=4,t.listPayments();case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},listReviews:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Jo.list({questId:e.questId,version:e.quest.version});case 2:a=t.sent,e.reviews=a.data;case 4:case"end":return t.stop()}}),t)})))()},getStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Date,t.next=3,Ot.getStatistics(e.questId,e.quest.version,a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate());case 3:s=t.sent,e.statistics=s.data,e.statistics.statistics.totalPlays=(e.statistics.statistics.nbPlayers?e.statistics.statistics.nbPlayers:0)+(e.statistics.statistics.notFinished?e.statistics.statistics.notFinished:0),e.statistics.statistics.remainingPlays=Math.max(0,(e.quest.limitations.plan?e.quest.limitations.plan:50)-e.statistics.statistics.totalPlays);case 7:case"end":return t.stop()}}),t)})))()},getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.uploadUrl+"/upload/profile/"+e:"statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],a="check_circle";return this.isEdition||"quest"!==this.quest.type?"img:":e<=this.tabs.progress?a:t},trackCallBackFunction:function(){return!1},selectSample:function(e){var t=this;return r()(o.a.mark((function a(){var s,n;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ot.remove(t.questId,t.quest.version);case 3:return a.next=5,Ot.createFromSample(e,1,t.quest.access,t.quest.isPremium);case 5:s=a.sent,s&&s.data&&s.data.newId&&(n=s.data.newId,t.$router.push("/quest/settings/"+n)),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),console.error(a.t0),Jt(t.$t("label.ErrorStandardMessage"),"error");case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},computeGoodAnswers:function(){if(this.run&&this.run.conditionsDone){for(var e=this.run.conditionsDone,t=0,a=0,s=0;s<e.length;s++)-1!==e[s].indexOf("stepSuccess_")?(t++,a++):-1!==e[s].indexOf("stepFail_")&&t++;this.score.nbQuestions=t,this.score.nbGoodAnwers=a}}},validations:{form:{fields:{title:{required:fn["required"]},category:{required:fn["required"]}}}}},er=Xn,tr=(a("74f2"),Object(tt["a"])(er,Mn,zn,!1,null,null,null)),ar=tr.exports,sr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background-login wrapper"},[a("div",{staticClass:"login"},[e.showPage?a("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),a("div",{staticClass:"q-pa-lg login-form"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[a("div",[a("q-input",{ref:"loginemail",attrs:{id:"loginemail",outlined:"",type:"email",label:e.$t("label.YourEmail"),error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),"forgottenpassword"!==e.step?a("q-input",{attrs:{id:"loginPass",outlined:"",type:"password",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"forgottenpassword"!==e.step?a("p",{staticClass:"centered q-mt-sm q-mb-lg"},[a("a",{on:{click:function(t){return e.openPasswordForgottenPopup()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?a("div",[a("p",{staticClass:"code-square"},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),a("q-input",{staticClass:"q-pb-md",attrs:{outlined:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?a("div",[a("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),a("div",{staticClass:"text-center q-mb-lg q-mt-lg"},[a("text-btn-square",{attrs:{submit:"",loading:e.submitting,title:e.$t("label.SignIn"),color:"secondary",icon:"face"}})],1),a("div",{staticClass:"text-center q-mb-xl"},[a("text-btn-square",{attrs:{title:e.$t("label.Subscribe"),color:"primary",icon:"add_circle"},nativeOn:{click:function(t){return e.goToSubscribe()}}})],1)]),a("div",{staticClass:"q-py-md text-center"},[a("text-btn-square",{attrs:{title:e.$t("label.ScanA"),color:"accent",icon:"qr_code_2"},nativeOn:{click:function(t){return e.startScanQRCode()}}})],1),a("div",{staticClass:"q-py-md text-center"},[a("text-btn-square",{attrs:{title:e.$t("label.LetsPlayWithoutAccount"),color:"accent",icon:"no_accounts"},nativeOn:{click:function(t){return e.validateTerms()}}})],1),a("div",{staticClass:"q-py-md text-center"},[a("text-btn-square",{attrs:{title:e.$t("label.TeamPlay"),outlined:"",color:"accent",icon:"supervised_user_circle"},nativeOn:{click:function(t){e.teamPlayPopup=!e.teamPlayPopup}}})],1)]),a("div",{staticClass:"centered text-white q-pt-lg"},[e._v("\n        Version "+e._s(e.version)+" -\n        "),a("img",{class:"en"===e.$i18n.locale?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n        "),a("img",{class:"fr"===e.$i18n.locale?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}}),e._v(" -\n        "),a("img",{class:"es"===e.$i18n.locale?"":"lang-opacity",attrs:{src:"statics/icons/game/flag-es.png"},on:{click:function(t){return e.switchLanguage("es")}}})])]):e._e()]),a("q-dialog",{model:{value:e.passwordForgottenPopup,callback:function(t){e.passwordForgottenPopup=t},expression:"passwordForgottenPopup"}},[a("q-card",{staticClass:"login-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n        "+e._s(e.$t("label.ForgottenPassword"))+"\n        "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-separator"),a("q-card-section",[a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.Ok"),color:"primary",icon:"forward_to_inbox"},nativeOn:{click:function(t){return e.sendForgottenPasswordCode()}}})],1)],1)],1),a("q-dialog",{model:{value:e.terms.show,callback:function(t){e.$set(e.terms,"show",t)},expression:"terms.show"}},[a("q-card",{staticClass:"login-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n        "+e._s(e.$t("label.LetsPlayWithoutAccount"))+"\n        "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[a("q-item",{attrs:{dense:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-checkbox",{attrs:{dark:"",color:"accent"},model:{value:e.terms.usage,callback:function(t){e.$set(e.terms,"usage",t)},expression:"terms.usage"}})],1),a("q-item-section",[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.terms.usageError?a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])],1),a("q-item",{staticClass:"q-mb-lg",attrs:{dense:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-checkbox",{attrs:{dark:"",color:"accent"},model:{value:e.terms.privacy,callback:function(t){e.$set(e.terms,"privacy",t)},expression:"terms.privacy"}})],1),a("q-item-section",[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.terms.privacyError?a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])],1),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.Confirm"),color:"accent",icon:"done"},nativeOn:{click:function(t){return e.playAnonymous()}}})],1)],1)],1),a("q-dialog",{staticStyle:{"max-width":"400px"},model:{value:e.teamPlayPopup,callback:function(t){e.teamPlayPopup=t},expression:"teamPlayPopup"}},[a("q-card",{staticClass:"login-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n        "+e._s(e.$t("label.JoinATeam"))+"\n        "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[e._v("\n        "+e._s(e.$t("label.TypeTeamPlayId"))+"\n        "),a("q-input",{staticClass:"q-my-md",attrs:{outlined:"",type:"email",label:e.$t("label.TeamID"),"bottom-slots":""},model:{value:e.teamPlayId,callback:function(t){e.teamPlayId=t},expression:"teamPlayId"}}),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.Confirm"),color:"accent",icon:"done"},nativeOn:{click:function(t){return e.playAnonymous()}}})],1)],1)],1)],1)},or=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"centered"},[a("img",{staticClass:"login-logo-top",attrs:{src:"statics/new/logo-color-white.png"}})])}],nr=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},rr={components:{iconBtnSquare:mt,textBtnSquare:ht["a"]},data:function(){return{step:"password",form:{email:"",password:"",newPassword:"",code:""},showPage:!0,terms:{show:!1,usage:!1,usageError:!1,privacy:!1,privacyError:!1},passwordForgottenPopup:!1,teamPlayPopup:!1,teamPlayId:"",isHybrid:window.cordova,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",submitting:!1,version:"2.3.35"}},mounted:function(){var e=this;uu.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),this.$route.query.qrcode&&(this.showPage=!1,this.checkCode(this.$route.query.qrcode)),window.cordova&&(this.showSocialLogin.facebook=!0),this.$nextTick((function(){e.$refs["loginemail"].focus()}))},methods:{formSubmit:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$v.$touch(),e.submitting=!0,t.t0=e.step,t.next="password"===t.t0?5:"forgottenpassword"===t.t0?10:16;break;case 5:return t.next=7,e.signIn(e.form.email,e.form.password);case 7:return a=t.sent,a&&a.status?("success"===a.status&&(window.localStorage.setItem("jwt",a.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.user.jwt),e.$router.push(e.defineRedirection())),"failed"===a.status&&Jt(e.$t("label.IncorrectLoginPleaseRetry"),"warning")):Jt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("break",16);case 10:if(e.$v.form.newPassword.$error){t.next=15;break}return t.next=13,Be.changePassword(e.form.email,e.form.newPassword,e.form.code);case 13:s=t.sent,s&&s.status&&200===s.status?s.data&&s.data.user?(window.localStorage.setItem("jwt",s.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),e.$router.push(e.defineRedirection())):Jt(e.$t("label.ErrorStandardMessage"),"error"):s.data&&"You have tries too much codes"===s.data.message?Jt(e.$t("label.YourAccountIsBlocked"),"warning"):Jt(e.$t("label.IncorrectCodePleaseRetry"),"warning");case 15:return t.abrupt("break",16);case 16:e.submitting=!1;case 17:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Be.login(e,t);case 2:if(s=a.sent,!s||200!==s.status){a.next=7;break}return a.abrupt("return",{status:"success",user:s.data.user});case 7:if(!s||401!==s.status){a.next=11;break}return a.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return a.abrupt("return",{error:"technical issue"});case 12:case"end":return a.stop()}}),a)})))()},validateAccount:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Be.validateAccount(e,t);case 2:n=s.sent,n&&n.status>=300&&n.data&&n.data.message?Jt(n.data.message,"warning"):Jt(a.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return s.stop()}}),s)})))()},defineRedirection:function(){var e="/home";return this.$route&&this.$route.query&&this.$route.query.hasOwnProperty("redirect")&&this.$route.query.redirect&&(e=this.$route.query.redirect),e},startScanQRCode:function(){this.$router.push({name:"scanCode",params:{login:"true"}})},validateTerms:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.terms.show=!0;case 1:case"end":return t.stop()}}),t)})))()},playAnonymous:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a.terms.usageError=!1,a.terms.privacyError=!1,!1!==a.terms.usage||e){s.next=6;break}a.terms.usageError=!0,s.next=14;break;case 6:if(!1!==a.terms.privacy||e){s.next=10;break}a.terms.privacyError=!0,s.next=14;break;case 10:return s.next=12,Be.playAnonymous(a.$t("label.shortLang"));case 12:n=s.sent,n&&n.data&&"ok"===n.data.status&&n.data.user?(window.localStorage.setItem("jwt",n.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(n.data.user.jwt),t||a.$router.push(a.defineRedirection())):Jt(a.$t("label.ErrorStandardMessage"),"error");case 14:case"end":return s.stop()}}),s)})))()},checkCode:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(3!=e.length){a.next=2;break}return a.abrupt("return");case 2:if(t.playAnonymous(!0,!0),-1===e.indexOf("teamplay_")){a.next=8;break}s=e.replace("teamplay_",""),-1===s.indexOf("_")?t.$router.push({path:"/teamplay/"+s+"/"+t.$t("label.shortLang"),query:{redirect:"/user/login"}}):(n=s.split("_"),t.$router.push({path:"/teamplay/"+n[0]+"/"+t.$t("label.shortLang")+"/individual-firstandlast-checklastname/"+n[1],query:{redirect:"/user/login"}})),a.next=13;break;case 8:return e=uu.removeUnusedUrl(e),a.next=11,Ot.checkLoginQRCode(e,t.$t("label.shortLang"));case 11:r=a.sent,r&&r.data&&"ok"===r.data.status&&r.data.user?(window.localStorage.setItem("jwt",r.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(r.data.user.jwt),-1===e.indexOf("_score")?-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?r.data.questId?t.$router.push("/quest/play/"+r.data.questId):t.$router.push("/quest/play/"+e):t.$q.dialog({message:t.$t("label.UniqueUsageQRCodeWarning"),ok:t.$t("label.Ok")}).onOk((function(a){r.data.questId?t.$router.push("/quest/play/"+r.data.questId):t.$router.push("/quest/play/"+e)})):t.$router.push("/quest/"+e.substring(0,24)+"/end")):-1===e.indexOf("-slash-")&&-1===e.indexOf("tierplay_")?Jt(t.$t("label.QRCodeIsNotWorking"),"error"):Jt(t.$t("label.QRCodeAlreadyUsed"),"error");case 13:case"end":return a.stop()}}),a)})))()},goToSubscribe:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:"/user/createAccount/generic",query:{redirect:e.$route.query.redirect}});case 1:case"end":return t.stop()}}),t)})))()},openPasswordForgottenPopup:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.passwordForgottenPopup=!0;case 1:case"end":return t.stop()}}),t)})))()},sendForgottenPasswordCode:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Be.sendForgottenPasswordCode(e.form.email,e.$t("label.shortLang"));case 3:a=t.sent,a&&200===a.status?(e.step="forgottenpassword",e.passwordForgottenPopup=!1):Jt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e},teamPlay:function(e){this.$router.push({path:"/teamplay/"+e+"/"+this.$t("label.shortLang"),query:{redirect:"/user/login"}})}},validations:{form:{email:{required:fn["required"],email:fn["email"]},newPassword:{required:fn["required"],minLength:Object(fn["minLength"])(8),checkPasswordComplexity:nr}}}},ir=rr,lr=(a("143b"),Object(tt["a"])(ir,sr,or,!1,null,"757fcd3a",null)),cr=lr.exports,ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},dr=[],pr={mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logout");case 2:window.localStorage.removeItem("jwt"),delete Fe.a.defaults.headers.common["Authorization"],e.$router.push("/user/login");case 5:case"end":return t.stop()}}),t)})))()}},mr=pr,hr=Object(tt["a"])(mr,ur,dr,!1,null,null,null),gr=hr.exports,fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-profil"},[a("div",{staticClass:"profil"},[a("div",{staticClass:"flex no-wrap items-end justify-start"},[a("div",{staticClass:"profil-photo-top",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[a("icon-btn-square",{staticClass:"absolute",staticStyle:{top:"-10px",right:"-25px"},attrs:{color:"secondary",fill:"",icon:"camera_alt"},nativeOn:{click:function(t){return e.$refs["uploadfile"].click()}}}),a("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),a("div",[""!==e.profile.form.name?a("div",[a("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n              "+e._s(e.profile.form.name)+"\n            ")])]):e._e()])]),a("q-form",{ref:"form",staticClass:"q-mt-lg",on:{submit:e.saveProfileChanges}},[a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:"person"}}),e.newAccount?e._e():a("span",[e._v(e._s(e.$t("label.ModifyAccount")))]),e.newAccount?a("span",[e._v(e._s(e.$t("label.WeNeedMoreInformationAboutYou")))]):e._e()],1)]),a("div",{staticClass:"flex no-wrap justify-between items-center"},[a("div",{staticClass:"full-width q-pr-md"},[a("q-input",{attrs:{dark:"",label:e.$t("label.YourName")+" *",placeholder:"John Doe","bottom-slots":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourName")}]},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.YourEmail")+" *",placeholder:"john.doe@gmail.com","bottom-slots":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourEmailAddress")},function(t){return e.$v.profile.form.email.email||e.$t("label.PleaseEnterAValidEmailAddress")},e.displayPassword?e.emailRules:""]},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?a("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword")+" *","bottom-slots":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourPassword")},function(t){return t&&t.length>=8||e.$t("label.YourPasswordMustBe8digitsLength")},function(t){return e.checkPasswordComplexity(t)||e.$t("label.PasswordComplexityRule")}]},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),a("q-input",{attrs:{dark:"",label:e.$t("label.YourPresentation"),"bottom-slots":"",type:"textarea","min-rows":3},model:{value:e.profile.form.description,callback:function(t){e.$set(e.profile.form,"description",t)},expression:"profile.form.description"}})],1)]),a("div",{staticClass:"flex no-wrap justify-between items-center"},[a("div",{staticClass:"full-width q-pr-md"},[a("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry")+" *",options:e.countries,"emit-value":"","map-options":"","bottom-slots":""},on:{blur:e.getLocation},model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),a("q-select",{attrs:{dark:"",label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),a("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":""},model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),a("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":""},on:{blur:e.$v.profile.form.age.$touch},model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),a("q-input",{attrs:{dark:"",label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}})],1)]),e.newAccount?a("div",{staticClass:"row q-pt-md"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{dark:""},model:{value:e.profile.form.terms,callback:function(t){e.$set(e.profile.form,"terms",t)},expression:"profile.form.terms"}})],1),a("div",{staticClass:"col secondary-font-small text-white"},[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.profile.form.terms.$error?a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),e.newAccount?a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{dark:""},model:{value:e.profile.form.privacy,callback:function(t){e.$set(e.profile.form,"privacy",t)},expression:"profile.form.privacy"}})],1),a("div",{staticClass:"col secondary-font-small text-white"},[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.profile.form.privacy.$error?a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),""===e.profile.form.name?a("div",{staticClass:"row q-pt-md"},[e._v("\n          "+e._s(e.$t("label.HowWeUseYourData"))+"\n          "),a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help",size:"md"},on:{click:e.helpFields}})],1):e._e(),e.newAccount?a("div",{staticClass:"flex no-wrap q-pt-md"},[a("text-btn-square",{staticClass:"q-mb-lg",attrs:{disable:!e.profile.form.terms||!e.profile.form.privacy,type:"submit",title:e.$t("label.CreateAccount"),color:"accent",icon:"person_add",submit:""}})],1):e._e(),e.newAccount?e._e():a("div",{staticClass:"flex no-wrap q-pt-md"},[a("text-btn-square",{staticClass:"q-mb-lg",attrs:{type:"submit",title:e.$t("label.ModifyAccount"),color:"accent",icon:"person_add",submit:""}})],1)]),e.displayPassword?e._e():a("form",{staticClass:"q-mt-lg"},[a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:"lock"}}),a("span",[e._v(e._s(e.$t("label.ChangeYourPassword")))])],1)]),a("div",{staticClass:"q-px-lg"},[a("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.CurrentPassword"),"bottom-slots":"",error:e.$v.profile.form.oldPassword.$error,"error-message":e.$v.profile.form.oldPassword.checkPasswordComplexity?e.$v.profile.form.oldPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.oldPassword.$touch},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),a("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.NewPassword"),"bottom-slots":"",error:e.$v.profile.form.newPassword.$error,"error-message":e.$v.profile.form.newPassword.checkPasswordComplexity?e.$v.profile.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.newPassword.$touch},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),a("div",[a("text-btn-square",{staticClass:"q-mb-lg",attrs:{type:"submit",title:e.$t("label.Save"),color:"primary",icon:"save"},nativeOn:{click:function(t){return e.submitChangePassword(t)}}})],1)],1)]),e.displayPassword?e._e():a("div",{staticClass:"q-mt-lg q-pa-md q-ma-md"},[a("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RemoveYourAccount")))]),a("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.RemoveYourAccount"),color:"#DB2828",icon:"delete"},nativeOn:{click:function(t){return e.removeAccount()}}})],1),a("div",{staticClass:"q-pb-xl"},[a("div",{staticClass:"centered q-mt-lg q-mb-sm cursor-pointer"},[a("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),a("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),a("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})])],1),a("gmap-autocomplete",{staticClass:"col q-input-target text-left",staticStyle:{opacity:"0"},attrs:{id:"destination",placeholder:e.$t("label.Address")},on:{input:function(t){e.value=t.target.value}}}),a("q-dialog",{model:{value:e.showHelpPopup,callback:function(t){e.showHelpPopup=t},expression:"showHelpPopup"}},[a("q-card",{staticClass:"help-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n          "+e._s(e.$t("label.HowWeUseYourData"))+"\n          "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[a("ul",[a("li",[e._v(e._s(e.$t("label.DataCountry")))]),a("li",[e._v(e._s(e.$t("label.DataZipcode")))]),a("li",[e._v(e._s(e.$t("label.DataSex")))]),a("li",[e._v(e._s(e.$t("label.DataAge")))]),a("li",[e._v(e._s(e.$t("label.DataPhone")))])])])],1)],1),a("q-dialog",{model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("q-card",{staticClass:"help-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n          "+e._s(e.$t("label.ConfirmDeleteAccount"))+"\n          "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[a("div",[e._v(e._s(e.$t("label.AreYouSureYouWantToRemoveYourAccount")))])]),a("q-card-section",[a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.RemoveYourAccount"),color:"#DB2828",icon:"delete"},nativeOn:{click:function(t){return e.confirmDelete()}}})],1)],1)],1)],1)},br=[],vr=a("4c18"),yr=a("cf83"),wr=a("9ac9"),qr={components:{iconBtnSquare:mt,textBtnSquare:ht["a"]},data:function(){return{step:1,profile:{form:{name:"",description:"",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:"",oldPassword:"",newPassword:"",terms:!1,privacy:!1}},newAccount:!1,position:null,countries:"fr"===this.$i18n.locale?vr:"es"===this.$i18n.locale?wr:yr,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:uu.buildOptionsForSelect(Zn,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,showHelpPopup:!1,deleteDialog:!1,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",isBadMail:!1,errorStepOne:!1,errorStepTwo:!0}},mounted:function(){this.profile.form={name:this.$store.state.user.name?"-"===this.$store.state.user.name?"":this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email&&-1===this.$store.state.user.email.indexOf("dummyuser")?this.$store.state.user.email:"",password:"",description:this.$store.state.user.description?this.$store.state.user.description:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language,terms:!1,privacy:!1},this.newAccount=""===this.profile.form.name,this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{checkStepOne:function(){return this.displayPassword?this.$v.profile.form.name.$error||this.$v.profile.form.email.$error||this.$v.profile.form.password.$error||this.isBadMail?(this.errorStepOne=!0,!1):(this.errorStepOne=!1,!0):""!==this.profile.form.name&&""!==this.profile.form.email?(this.errorStepOne=!1,!0):(this.errorStepOne=!0,!1)},checkStepTwo:function(){return!(this.$v.profile.form.country.$error||this.$v.profile.form.zipCode.$error||this.$v.profile.form.age.$error)},nextStep:function(){this.$v.profile.form.name.$touch(),this.$v.profile.form.email.$touch(),this.displayPassword&&this.$v.profile.form.password.$touch(),this.checkStepOne()&&(this.step=2)},validationStep:function(){this.displayPassword&&(this.$v.profile.form.country.$touch(),this.$v.profile.form.zipCode.$touch(),this.$v.profile.form.age.$touch(),this.checkStepTwo()&&(this.step=3))},checkPasswordComplexity:function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},emailRules:function(){var e=this;return new Promise(function(){var t=r()(o.a.mark((function t(a,s){var n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkUserIsExisting(e.profile.form.email);case 2:n=t.sent,n&&n.status&&("active"===n.status?(Jt(e.$t("label.EmailAlreadyUsed"),"error"),e.isBadMail=!0,a(e.$t("label.RejectedEmail"))):"blocked"===n.status?(Jt(e.$t("label.YourAccountIsBlocked"),"warning"),e.isBadMail=!0,a(e.$t("label.RejectedEmail"))):(e.isBadMail=!1,a(!0)));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},checkUserIsExisting:function(e){return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Be.checkEmail(e);case 2:if(a=t.sent,!(a&&a.data&&a.data.hasOwnProperty("existing")&&!0===a.data.existing)){t.next=7;break}return t.abrupt("return",{status:a.data.status});case 7:if(!(a&&a.data&&a.data.hasOwnProperty("existing")&&!1===a.data.existing)){t.next=11;break}return t.abrupt("return",{status:"missing"});case 11:return t.abrupt("return",{error:"technical issue"});case 12:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){return this.profile.form.picture&&-1!==this.profile.form.picture.indexOf("http")?this.profile.form.picture:this.profile.form.picture?this.uploadUrl+"/upload/profile/"+this.profile.form.picture:"statics/images/icon/profile-small.png"},saveProfileChanges:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={name:e.profile.form.name,email:e.profile.form.email,description:e.profile.form.description,password:e.profile.form.password,phone:e.profile.form.phone?e.profile.form.phone:"",zipCode:e.profile.form.zipCode,country:e.profile.form.country,language:e.profile.form.language,age:e.profile.form.age,sex:e.profile.form.sex},e.position&&(a.position=e.position),e.$q.loading.show(),t.next=5,Be.modifyAccount(a);case 5:s=t.sent,e.$q.loading.hide(),s.status>=300&&s.data&&s.data.message?Jt(e.$t("label."+s.data.message),"warning"):(Jt(e.$t("label.AccountModified"),"positive"),e.backToProfile());case 8:case"end":return t.stop()}}),t)})))()},createNewAccount:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.profile.form.terms&&e.profile.form.privacy){t.next=2;break}return t.abrupt("return");case 2:return a={name:e.profile.form.name,email:e.profile.form.email,description:e.profile.form.description,password:e.profile.form.password,phone:e.profile.form.phone?e.profile.form.phone:"",zipCode:e.profile.form.zipCode,country:e.profile.form.country,language:e.profile.form.language,age:e.profile.form.age,sex:e.profile.form.sex},e.position&&(a.position=e.position),e.$q.loading.show(),t.next=7,Be.modifyAccount(a);case 7:s=t.sent,e.$q.loading.hide(),s.status>=300&&s.data&&s.data.message?Jt(e.$t("label."+s.data.message),"warning"):(Jt(e.$t("label.AccountCreated"),"positive"),e.backToProfile());case 10:case"end":return t.stop()}}),t)})))()},getLocation:function(){var e=this;if(this.profile.form.zipCode&&""!==this.profile.form.zipCode&&this.profile.form.country&&""!==this.profile.form.country){var t=new google.maps.Geocoder;t.geocode({address:this.profile.form.zipCode+" "+this.profile.form.country},(function(t,a){e.$q.loading.hide(),"OK"===a&&t[0].geometry&&(e.position={},e.position.lat=t[0].geometry.location.lat(),e.position.lng=t[0].geometry.location.lng())}))}},submitChangePassword:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.oldPassword.$touch(),e.$v.profile.form.newPassword.$touch(),e.$v.profile.form.oldPassword.$error||e.$v.profile.form.newPassword.$error){t.next=10;break}return a={oldPassword:e.profile.form.oldPassword,newPassword:e.profile.form.newPassword},e.$q.loading.show(),t.next=7,Be.modifyAccount(a);case 7:s=t.sent,e.$q.loading.hide(),s.status>=300&&s.data&&s.data.message?Jt(e.$t("label."+s.data.message),"warning"):(Jt(e.$t("label.PasswordChangeSuccess"),"positive"),e.profile.form.oldPassword=null,e.profile.form.newPassword=null,e.$v.$reset());case 10:case"end":return t.stop()}}),t)})))()},backToProfile:function(){""===this.profile.form.name?this.$router.push("/home"):this.$router.push("/profile/"+this.$store.state.user.id)},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},helpFields:function(){this.showHelpPopup=!0},uploadImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return n=new FormData,n.append("image",s[0]),t.$q.loading.show(),a.next=8,Be.uploadAccountPicture(n);case 8:r=a.sent,r&&r.data&&(r.data.file?t.profile.form.picture=r.data.file:r.data.message&&"Error: File too large"===r.data.message&&Jt(t.$t("label.FileTooLarge"),"error")),t.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},disconnect:function(){this.$router.push("/user/logout")},removeAccount:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.deleteDialog=!0;case 1:case"end":return t.stop()}}),t)})))()},confirmDelete:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,Be.removeAccount();case 3:if(s=t.sent,!s){t.next=10;break}return Jt(a.$t("label.YourAccountIsRemoved"),"info"),t.next=8,a.disconnect();case 8:t.next=11;break;case 10:Jt(a.$t("label.ErrorStandardMessage"),"error");case 11:case"end":return t.stop()}}),t)})))()}},validations:{profile:{form:{email:{required:fn["required"],email:fn["email"]},name:{required:fn["required"],minLength:Object(fn["minLength"])(2)},country:{required:fn["required"]},zipCode:{required:fn["required"]},password:{required:fn["required"],minLength:Object(fn["minLength"])(8),checkPasswordComplexity:nr},oldPassword:{required:fn["required"],minLength:Object(fn["minLength"])(8),checkPasswordComplexity:nr},newPassword:{required:fn["required"],minLength:Object(fn["minLength"])(8),checkPasswordComplexity:nr},age:{required:fn["required"]},terms:{sameAs:Object(fn["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(fn["sameAs"])((function(){return!0}))}}}}},xr=qr,Cr=(a("e3e5"),Object(tt["a"])(xr,fr,br,!1,null,"fe38e5da",null)),Sr=Cr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll ranking"},[a("div",{staticClass:"q-pb-xl",staticStyle:{"max-width":"400px",margin:"0 auto"},attrs:{id:"teaser"}},[a("div",{style:"padding-top: "+("level"===e.tab?160:"ranking"===e.tab?130:100)+"px;"},[a("transition",{attrs:{name:"slideInTop"}},["level"===e.tab?a("div",{staticClass:"text-white"},e._l(e.levels,(function(t){return a("div",{key:t.number,staticClass:"q-ma-md level-to-reach",class:{"level-not-reached":e.$store.state.user.points<t.minPoints},style:"background-image: url(statics/images/icon/level"+t.number+".svg)"},[e.$store.state.user.points<t.minPoints?a("div",{},[e._v(e._s(e.$t("label.PointsToReachLevel",{score:t.minPoints})))]):e._e(),e.$store.state.user.points>=t.minPoints?a("div",{},[e._v(e._s(e.$t("label.LevelReached")))]):e._e()])})),0):e._e()]),a("transition",{attrs:{name:"slideInTop"}},["ranking"===e.tab?a("div",[e._l(e.ranking,(function(t,s){return"quest"!==e.range&&e.ranking&&e.ranking.length>0?a("div",{key:s,staticClass:"q-pa-md rank-box text-white"},[a("div",[a("userCard",{attrs:{user:t,size:"medium"},on:{click:e.openProfile}})],1),a("div",{staticClass:"full-width text-white"},["-"!==t.name?a("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?a("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?a("div",{staticClass:"subtitle6"},[t.location.postalCode?a("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?a("span",[e._v(", ")]):e._e(),t.location.country?a("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),a("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[a("div",{staticClass:"col-6 centered"},[a("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.points)+"\n                ")]),a("div",{staticClass:"col-6 centered"},[a("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(s+1)+"\n                ")])])])]):e._e()})),"quest"===e.range&&e.ranking&&e.ranking.length>0?a("div",{staticClass:"subtitle3 q-pa-md text-white"},[e._v("\n            "+e._s(e.ranking[0].questData.title.fr)+"\n          ")]):e._e(),e._l(e.ranking,(function(t,s){return"quest"===e.range&&e.ranking&&e.ranking.length>0?a("div",{key:s,staticClass:"q-pa-md rank-box text-white"},[a("div",[a("userCard",{attrs:{user:t.userData,size:"small"},on:{click:function(a){return e.openProfile(t.userId[0])}}})],1),a("div",{staticClass:"full-width text-white"},[a("div",{staticClass:"subtitle5"},[e._v(e._s(t.userData.name))]),t.userData.location&&(t.userData.location.country||t.userData.location.postalCode)?a("div",{staticClass:"subtitle6"},[t.userData.location.postalCode?a("span",[e._v(e._s(t.userData.location.postalCode))]):e._e(),t.userData.location.postalCode&&t.userData.location.country?a("span",[e._v(", ")]):e._e(),t.userData.location.country?a("span",[e._v(e._s(t.userData.location.country))]):e._e()]):e._e(),a("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[a("div",{staticClass:"col-4 centered"},[a("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.stars)+"\n                ")]),a("div",{staticClass:"col-4 centered"},[a("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(s+1)+"\n                ")]),t.duration?a("div",{staticClass:"col-4 centered",staticStyle:{"font-size":"0.8em","line-height":"0.7em","padding-top":"8px"}},[e._v("\n                  "+e._s(t.duration)),a("br"),e._v("min\n                ")]):e._e()])])]):e._e()})),e.ranking&&0===e.ranking.length?a("div",{staticClass:"centered text-white"},[e._v("\n            "+e._s(e.$t("label.NoRanking"))+"\n          ")]):e._e()],2):e._e()]),a("transition",{attrs:{name:"slideInTop"}},["news"===e.tab?a("div",[a("q-infinite-scroll",{on:{load:e.loadNews}},[a("q-list",[e._l(e.news.items,(function(t,s){return a("q-item",{key:t._id,staticClass:"text-white"},[a("q-item-section",{staticClass:"q-pl-md",attrs:{avatar:""}},[a("userCard",{attrs:{user:t.data,size:"medium"},on:{click:e.openProfile}})],1),a("q-item-section",{staticClass:"force-justify-start"},[t.data&&t.data.userId?a("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(t.data.name))]):e._e(),a("q-item-label",{staticClass:"grey-round-box subtitle6 q-pa-sm"},["standard"===t.type?a("div",[e._v("\n                      "+e._s(t.title)+"\n                    ")]):e._e(),"standard"!==t.type?a("div",[a("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?a("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),a("div",{staticClass:"q-pt-sm"},[e._v("\n                      "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                      "),"friends"===t.destination?a("span",[e._v("\n                        -\n                        "),e.isLiked(t)?e._e():a("a",{on:{click:function(t){return e.like(s)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?a("a",{on:{click:function(t){return e.unlike(s)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?a("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])])],1)],1)})),0===e.news.items.length?a("q-item",[a("q-item-label",{staticClass:"text-white"},[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),a("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[a("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e()])],1),a("div",{staticClass:"q-py-sm q-px-md dark-banner header-ranking fixed-top"},[a("div",{staticStyle:{"max-width":"400px",margin:"0 auto"}},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-4",class:{"tab-unselected":"level"!==e.tab},on:{click:function(t){return e.selectTab("level")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n              "+e._s(e.$t("label.Level"))+"\n            ")])]),a("div",{staticClass:"col-4",class:{"tab-unselected":"ranking"!==e.tab},on:{click:function(t){return e.selectTab("ranking")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n              "+e._s(e.$t("label.Ranking"))+"\n            ")])]),a("div",{staticClass:"col-4",class:{"tab-unselected":"news"!==e.tab},on:{click:function(t){return e.selectTab("news")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n              "+e._s(e.$t("label.News"))+"\n            ")])])]),"level"===e.tab?a("div",[a("div",{staticClass:"relative-position progress-box"},[a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),a("div",{staticClass:"value"},[e._v("\n                "+e._s(Math.floor(100*e.level.progress))+"%\n              ")])]),a("div",{staticClass:"score subtitle6"},[e._v("\n              "+e._s(e.$t("label.YouHaveReachAScore",{score:e.$store.state.user.points}))+"\n            ")]),a("div",{staticClass:"rank-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])])]):e._e(),"ranking"===e.tab?a("div",[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-3",class:{"tab-unselected":"world"!==e.range},on:{click:function(t){return e.selectRange("world")}}},[a("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n                "+e._s(e.$t("label.World"))+"\n              ")])]),a("div",{staticClass:"col-3",class:{"tab-unselected":"country"!==e.range},on:{click:function(t){return e.selectRange("country")}}},[a("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n                "+e._s(e.$t("label.MyCountry"))+"\n              ")])]),a("div",{staticClass:"col-3",class:{"tab-unselected":"city"!==e.range},on:{click:function(t){return e.selectRange("city")}}},[a("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n                "+e._s(e.$t("label.MyCity"))+"\n              ")])]),a("div",{staticClass:"col-3",class:{"tab-unselected":"friends"!==e.range},on:{click:function(t){return e.selectRange("friends")}}},[a("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n                "+e._s(e.$t("label.Friends"))+"\n              ")])])])]):e._e()])])])])},Pr=[],_r={components:{userCard:cn},data:function(){return{tab:"level",range:"world",news:{limit:20,skip:0,items:[]},levels:[{number:9,minPoints:3e3,maxPoints:15e3},{number:8,minPoints:1500,maxPoints:3e3},{number:7,minPoints:800,maxPoints:1500},{number:6,minPoints:400,maxPoints:800},{number:5,minPoints:200,maxPoints:400},{number:4,minPoints:100,maxPoints:200},{number:3,minPoints:30,maxPoints:100},{number:2,minPoints:15,maxPoints:30},{number:1,minPoints:0,maxPoints:15}],ranking:null,level:{progress:.04},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.$store.state.user.points||(this.$store.state.user.points=0),this.selectTab(this.$route.params.type)},methods:{selectTab:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.tab=e,"level"===t.tab&&(t.range=null,t.computeProgression()),"ranking"!==t.tab){a.next=10;break}if(24!==t.$route.params.subtype.length){a.next=8;break}return a.next=6,t.selectRange(t.$route.params.subtype);case 6:a.next=10;break;case 8:return a.next=10,t.selectRange();case 10:case"end":return a.stop()}}),a)})))()},selectRange:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e="world"),t.range=e,a.next=4,t.getRanking(e);case 4:case"end":return a.stop()}}),a)})))()},openProfile:function(e){this.$router.push("/profile/"+e)},backToTheMap:function(){this.$router.back()},computeProgression:function(){this.level=ya(this.$store.state.user.points)},loadNews:function(e,t){var a=this;Mt.listNews(this.news.limit,this.news.skip,(function(e,s){a.news.skip+=a.news.limit,e&&t(e),s&&s.data&&s.data.length>0&&(a.news.items=a.news.items.concat(s.data),t())}))},like:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$q.loading.show(),t.news.items[e].likes.push({userId:t.$store.state.user._id,date:new Date}),a.next=4,Mt.likeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return a.stop()}}),a)})))()},unlike:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(t.$q.loading.show(),s=0;s<t.news.items[e].likes.length;s++)t.news.items[e].likes[s].userId===t.$store.state.user._id&&t.news.items[e].likes.splice(s,1);return a.next=4,Mt.unlikeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return a.stop()}}),a)})))()},isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},getRanking:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$q.loading.show(),"world"!==e&&"country"!==e&&"city"!==e&&"friends"!==e){a.next=7;break}return a.next=4,Mt.getRangeRanking(e);case 4:s=a.sent,a.next=11;break;case 7:return a.next=9,Za.getRankingForAQuest(e);case 9:s=a.sent,t.range="quest";case 11:s&&s.data?s.data.users?t.ranking=s.data.users:t.ranking=s.data:t.ranking=[],t.$q.loading.hide();case 13:case"end":return a.stop()}}),a)})))()}}},Tr=_r,Ir=(a("714d"),Object(tt["a"])(Tr,kr,Pr,!1,null,"2498b9aa",null)),Ar=Ir.exports,$r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-quests"},[a("div",{staticClass:"quests q-pa-md",attrs:{id:"teaser"}},[a("div",{staticStyle:{"margin-top":"80px"}},["played"===e.tab?a("q-infinite-scroll",{attrs:{offset:10},on:{load:e.loadPlayed}},[a("quest-list",{attrs:{quests:e.quests.played,title:e.$t("label.SolvedQuests"),icon:"task_alt",color:"#1a4567","max-show":100,"no-price":""}})],1):e._e(),"created"===e.tab&&e.$route.params.id!==e.$store.state.user.id?a("div",[a("quest-list",{attrs:{quests:e.quests.built,title:e.$t("label.SolvedQuests"),icon:"task_alt",color:"accent","no-rating":"","no-price":"","max-show":1e3}})],1):e._e(),"created"===e.tab&&e.$route.params.id===e.$store.state.user.id?a("div",[e.quests.built&&e.quests.built.rejected&&e.quests.built.rejected.length>0?a("div",[a("quest-list",{attrs:{quests:e.quests.built.rejected,title:e.$t("label.YourRejectedQuests"),icon:"block",color:"#DB2828","max-show":1e3}})],1):e._e(),e.quests.built&&e.quests.built.tovalidate&&e.quests.built.tovalidate.length>0?a("div",[a("quest-list",{attrs:{quests:e.quests.built.tovalidate,title:e.$t("label.YourUnderValidationQuests"),icon:"checklist",color:"secondary","max-show":1e3}})],1):e._e(),e.quests.built&&e.quests.built.draft?a("div",[a("quest-list",{attrs:{quests:e.quests.built.draft,title:e.$t("label.YourDraftQuests"),icon:"edit",color:"accent","max-show":1e3}})],1):e._e(),e.quests.built&&e.quests.built.published&&e.quests.built.published.length>0?a("div",[a("quest-list",{attrs:{quests:e.quests.built.published,title:e.$t("label.YourPublishedQuests"),icon:"task_alt",color:"primary","max-show":1e3}})],1):e._e()]):e._e(),"played"===e.tab&&e.quests.played&&0===e.quests.played.length?a("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestPlayed"))+"\n      ")]):e._e(),"created"===e.tab&&e.quests.built&&0===e.quests.built.length?a("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e()],1),a("div",{staticClass:"q-py-sm q-px-md fixed-top quests-component"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6",class:{"tab-unselected":"played"!==e.tab},on:{click:function(t){return e.selectTab("played")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsSuccessful"))+"\n          ")])]),a("div",{staticClass:"col-6",class:{"tab-unselected":"created"!==e.tab},on:{click:function(t){return e.selectTab("created")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsCreated"))+"\n          ")])])])])])])},Or=[],Mr={components:{questList:pa,backBar:$a},data:function(){return{quests:{played:null,built:null},skip:0,limit:12,tab:"played",serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.selectTab(this.$route.params.type)},methods:{loadPlayed:function(e,t){var a=this;return r()(o.a.mark((function e(){var s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=a,Ot.ListPlayedByAUserSync(a.$route.params.id,null,a.skip,(function(e,a){if(s.skip+=s.limit,e&&t(e),a&&a.data&&a.data.length>0){s.quests.played=[];for(var o=0;o<a.data.length;o++)s.quests.played.push({questId:a.data[o].questId,picture:a.data[o].questData.picture,thumb:a.data[o].questData.thumb,title:a.data[o].questData.title,location:{town:a.data[o].questData.town},playStatus:a.data[o].status&&""!==a.data[o].status?a.data[o].status:"finished",points:a.data[o].stars});t()}}));case 2:case"end":return e.stop()}}),e)})))()},loadCreated:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e||(e=t.$store.state.user.id),a.next=3,Ot.ListCreatedByAUser(e);case 3:if(s=a.sent,e===t.$store.state.user.id&&(t.quests.built={rejected:[],tovalidate:[],draft:[],published:[]}),s&&s.data){if(s.data.length>0)if(t.quests.createdNb=s.data.length,e===t.$store.state.user.id)for(n=0;n<s.data.length;n++)r=s.data[n],"published"===r.status?t.quests.built["published"].push(r):"rejected"===r.status?t.quests.built["rejected"].push(r):"tovalidate"===r.status?t.quests.built["tovalidate"].push(r):t.quests.built["draft"].push(r);else t.quests.built=s.data}else t.quests.built=[];case 6:case"end":return a.stop()}}),a)})))()},selectTab:function(e){this.tab=e,this.skip=0,"created"===e&&this.loadCreated(this.$route.params.id)},backToTheMap:function(){this.$router.back()}}},zr=Mr,Nr=(a("a8ed"),Object(tt["a"])(zr,$r,Or,!1,null,"e531c71c",null)),Rr=Nr.exports,jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-friends"},[a("div",{staticClass:"friends",attrs:{id:"teaser"}},[a("div",{staticStyle:{"margin-top":"80px"}},["follow"===e.tab?a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadFriends}},[a("user-list",{attrs:{users:e.users,color:"accent"}})],1):e._e(),"suggestion"===e.tab&&null!==e.user.position?a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadSuggestions}},[a("user-list",{attrs:{users:e.suggestions,color:"accent"}})],1):e._e(),"suggestion"===e.tab&&null===e.user.position?a("div",{staticClass:"text-white"},[e._v("\n        "+e._s(e.$t("label.WeNeedYourPositionForThisFeature"))+"\n      ")]):e._e()],1),a("div",{staticClass:"q-py-sm q-px-md friends-component fixed-top"},[e.$store.state.user.id===e.$route.params.id?a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6",class:{"tab-unselected":"follow"!==e.tab},on:{click:function(t){return e.selectTab("follow")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.YouFollowThem"))+"\n          ")])]),a("div",{staticClass:"col-6",class:{"tab-unselected":"suggestion"!==e.tab},on:{click:function(t){return e.selectTab("suggestion")}}},[a("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Suggestions"))+"\n          ")])])]):e._e(),e.$store.state.user.id!==e.$route.params.id?a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n          "+e._s(e.$t("label.FollowedPeople"))+"\n        ")])]):e._e()])]),a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},Dr=[],Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pl-md"},[e.users?e._e():a("div",{staticClass:"user-card-small relative-position"},[a("div",{staticClass:"centered q-pt-lg"},[a("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),"scroll"===e.format&&(e.users&&e.users.length>0||e.add)?a("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},[e.add?a("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[a("div",{staticClass:"user-add-button"},[a("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return a("div",{key:t._id,staticClass:"cursor-pointer"},[a("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),"list"===e.format&&(e.users&&e.users.length>0||e.add)?a("div",{staticClass:"row justify-around q-pt-sm"},[e.add?a("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[a("div",{staticClass:"user-add-button"},[a("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return a("div",{key:t._id,staticClass:"cursor-pointer"},[a("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),a("q-dialog",{model:{value:e.addFriend.show,callback:function(t){e.$set(e.addFriend,"show",t)},expression:"addFriend.show"}},[a("q-card",[a("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.FollowYourFriends"))+"\n        "),a("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),a("q-separator"),a("q-card-section",{staticClass:"subtitle5"},[a("newfriend",{on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},Lr=[],Er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",["suggestions"===e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?a("div",[e.loadingContacts?a("div",{staticClass:"centered"},[a("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n            "+e._s(e.$t("label.LoadingContacts"))+"\n          ")],1):e._e(),null===e.loadingContacts?a("div",{staticClass:"centered"},[a("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?a("div",[a("q-list",{attrs:{highlight:""}},[e._l(e.validatedContacts,(function(t){return a("q-item",{key:t._id},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?a("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?a("img",{attrs:{src:e.uploadUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():a("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.name))]),a("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(a){return e.addFriend(t._id)}}})],1)],1)})),a("q-item",[a("q-item-section",{attrs:{avatar:""}}),a("q-item-section",[a("q-item-label",[a("a",{on:{click:function(t){e.newFriendMode="addFriend"}}},[e._v(e._s(e.$t("label.AddFriendManually")))])])],1)],1)],2)],1):e._e()]):e._e(),"addFriend"!==e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?e._e():a("div",[a("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[a("div",{staticClass:"q-pb-lg"},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"mail"}}),e._v(e._s(e.$t("label.FindWithEmail"))+"\n              "),a("div",{staticClass:"flex justify-between items-center no-wrap"},[a("div",{staticClass:"full-width relative-position"},[a("q-input",{attrs:{dark:"",color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?a("div",{staticClass:"absolute"},[e.$v.form.email.email?e._e():a("div",{staticClass:"text-negative",staticStyle:{"font-size":"14px"}},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),a("icon-btn-square",{staticClass:"q-ml-md",attrs:{color:"secondary",icon:"search",fill:""},nativeOn:{click:function(t){return e.formSubmit(t)}}})],1)],1),a("div",{staticClass:"q-pb-lg"},[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"phone"}}),e._v(e._s(e.$t("label.FindWithPhone"))+"\n            "),a("div",{staticClass:"flex justify-between items-center no-wrap"},[a("div",{staticClass:"full-width relative-position"},[a("q-input",{attrs:{dark:"",color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?a("div",{staticClass:"absolute"},[e.$v.form.phone.checkPhone?e._e():a("div",{staticClass:"text-negative",staticStyle:{"font-size":"14px"}},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),a("icon-btn-square",{staticClass:"q-ml-md",attrs:{color:"secondary",icon:"search",fill:""},nativeOn:{click:function(t){return e.formSubmit(t)}}})],1)],1)])])])])},Qr=[],Br=function(e){var t=e.match(/\d/g);return 10===t.length},Ur={components:{iconBtnSquare:mt},data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com",submitting:!1,loadingContacts:null,console:"",newFriendMode:"suggestions",isHybrid:window.cordova}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid||(e.newFriendMode="addFriend");case 1:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error&&e.$v.form.phone.$error){t.next=5;break}return t.next=3,Mt.addFriend({email:e.form.email,phone:e.form.phone});case 3:a=t.sent,a?200===a.status?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?Jt(e.$t("label.InvitationSent"),"success"):(Jt(e.$t("label.FriendsAdded"),"success"),e.$emit("friendadded")),e.form.email="",e.form.phone=""):a.data&&"Friend not found"===a.data.message?Jt(e.$t("label.FriendNotFound"),"error"):a.data&&"Too much friends"===a.data.message?Jt(e.$t("label.TooMuchFriends"),"error"):a.data&&"User can not be friend with him"===a.data.message?Jt(e.$t("label.UserCanNotBeFriendWithHim"),"error"):a.data&&"Already friends"===a.data.message?Jt(e.$t("label.AlreadyFriends"),"error"):Jt(e.$t("label.ErrorStandardMessage"),"error"):Jt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.target.files,s[0]){a.next=3;break}return a.abrupt("return");case 3:return n=new FormData,n.append("image",s[0]),a.next=7,AuthService.uploadAccountPicture(n);case 7:r=a.sent,r&&r.data&&(r.data.file?t.$store.state.user.picture=r.data.file:r.data.message&&"Error: File too large"===r.data.message&&Jt(t.$t("label.FileTooLarge"),"error"));case 9:case"end":return a.stop()}}),a)})))()},getContacts:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.cordova?(e.loadingContacts=!0,a=new ContactFindOptions,a.filter="",a.multiple=!0,s=["displayName","emails","phoneNumbers"],navigator.contacts.find(s,e.checkContacts,e.onError,a),e.loadingContacts=!1):e.newFriendMode="addFriend";case 1:case"end":return t.stop()}}),t)})))()},checkContacts:function(e){for(var t=[],a=0;a<e.length;a++)if(e[a].emails&&e[a].emails.length>0){var s=e[a].emails[0].value;s=s.toLowerCase(),t.push({name:e[a].displayName,email:s})}else if(e[a].phoneNumbers&&e[a].phoneNumbers.length>0){var o=e[a].phoneNumbers[0].value,n=o.match(/\d/g);t.push({name:e[a].displayName,phone:n.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Mt.checkContacts(e);case 2:return s=a.sent,s&&s.data&&s.data.contacts&&(t.validatedContacts=s.data.contacts),a.next=6,t.hideContactsAlreadyfriends();case 6:case"end":return a.stop()}}),a)})))()},hideContactsAlreadyfriends:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.listFriends();case 2:for(a=t.sent,s=a.data,n=e.validatedContacts.length-1;n>=0;n--)for(r=0;r<s.length;r++)e.validatedContacts.length>n&&e.validatedContacts[n]._id===s[r].friendId&&e.validatedContacts.splice(n,1);case 5:case"end":return t.stop()}}),t)})))()},hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Mt.addFriend(e);case 2:s=a.sent,s?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?Jt(t.$t("label.InvitationSent"),"success"):(Jt(t.$t("label.FriendsAdded"),"success"),t.$emit("friendadded")),t.hideUserFromValidatedContacts(e)):Jt(t.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return a.stop()}}),a)})))()},onError:function(e){Jt(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:fn["email"]},phone:{checkPhone:Br}}}},Yr=Ur,Gr=Object(tt["a"])(Yr,Er,Qr,!1,null,null,null),Hr=Gr.exports,Wr={components:{newfriend:Hr,userCard:cn},props:["users","add","format"],data:function(){return{addFriend:{show:!1}}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriend.show=!0},closeAddFriends:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addFriend.show=!1;case 1:case"end":return t.stop()}}),t)})))()},updateFriendsActivity:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh");case 1:case"end":return t.stop()}}),t)})))()}}},Vr=Wr,Jr=Object(tt["a"])(Vr,Fr,Lr,!1,null,null,null),Kr=Jr.exports,Zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pb-lg"},[e.title?a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:e.icon}}),a("span",[e._v(e._s(e.title))])],1)]):e._e(),e.users?e.users&&0===e.users.length&&e.canAddFriend?a("div",[a("q-btn",{attrs:{round:"",color:e.color,icon:"add",size:"xl"},on:{click:function(t){return e.openFriendAddPopup()}}})],1):a("div",{staticClass:"users-list"},[e.horizontal?a("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper",staticStyle:{"overflow-x":"scroll"}},e._l(e.users,(function(t,s){return a("user-badge",{key:s,attrs:{user:t,color:e.color},nativeOn:{click:function(a){return e.openProfile(t._id)}}})})),1):a("div",e._l(e.users,(function(t,s){return a("user-card",{key:s,attrs:{user:t,color:e.color},nativeOn:{click:function(a){return e.openProfile(t._id)}}})})),1)]):a("div",{staticClass:"full-width"},[e.search?a("div",{staticClass:"text-center text-white",staticStyle:{margin:"0 auto"}},[e._v("\n        "+e._s(e.$t("label.SearchForStart"))+"\n      ")]):e.search||e.horizontal?a("q-card",{staticClass:"q-pa-none",staticStyle:{background:"transparent",width:"100px",height:"120px"},attrs:{flat:""}},[a("div",{staticClass:"q-pa-sm"},[a("q-skeleton",{staticStyle:{margin:"0 auto"},attrs:{size:"80px",type:"QAvatar"}}),a("q-skeleton",{attrs:{type:"text",square:""}})],1)]):a("q-card",{staticClass:"full-width q-pa-none",staticStyle:{background:"transparent","border-radius":"10px"},attrs:{flat:""}},[a("div",{staticClass:"row items-start no-wrap q-pa-sm"},[a("q-skeleton",{attrs:{size:"56px",type:"QAvatar"}}),a("div",{staticClass:"col q-pl-sm"},[a("q-skeleton",{attrs:{type:"text",square:"",width:"30%"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px"}}),a("q-skeleton",{attrs:{type:"text",square:"",height:"12px",width:"75%"}})],1)],1)])],1),a("q-dialog",{staticStyle:{"max-width":"400px"},model:{value:e.addFriendPopup,callback:function(t){e.addFriendPopup=t},expression:"addFriendPopup"}},[a("q-card",{staticClass:"friend-dialog-card"},[a("q-card-section",{staticClass:"row items-center"},[e._v("\n          "+e._s(e.$t("label.FollowYourFriends"))+"\n          "),a("q-space"),a("icon-btn-square",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",icon:"close",rotation:"",fill:""}})],1),a("q-card-section",[a("newfriend",{on:{close:function(t){e.addFriendPopup=!1},friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},Xr=[],ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card q-mb-md",style:e.cssVars,attrs:{flat:""}},[a("div",{staticClass:"flex items-center"},[a("q-card-section",{staticClass:"q-pa-none section-left",staticStyle:{"border-radius":"10px 0 0 10px"},style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?a("div",{staticClass:"item-creator"},[a("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e()]),a("q-card-section",{staticClass:"section-right"},[a("div",[e._v(e._s(e.user.name))]),a("div",{staticClass:"flex justify-start items-center"},[e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?a("div",{staticClass:"item-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e(),a("div",[e._v("Score : "+e._s(e.user.score))])])])],1)])},ti=[],ai={name:"userCard",props:{user:Object,color:{type:String,default:"primary"}},data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor,"--bg-darken":Bt["a"].lighten(this.bgColor,-20),"--bg-image":"url("+this.getBackgroundImage()+")"}}}},si=ai,oi=(a("20d2"),Object(tt["a"])(si,ei,ti,!1,null,"c96d3b24",null)),ni=oi.exports,ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-badge",on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[a("div",{staticClass:"user-badge-img",style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?a("div",{staticClass:"badge-creator"},[a("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?a("div",{staticClass:"badge-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()]),a("div",{staticClass:"user-badge-name text-center"},[e._v("\n    "+e._s(e.user.name)+"\n  ")])])},ii=[],li={name:"userBadge",props:{user:Object,color:String},data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.uploadUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},ci=li,ui=(a("0c6c"),Object(tt["a"])(ci,ri,ii,!1,null,"688f086b",null)),di=ui.exports,pi={name:"userList",components:{userCard:ni,userBadge:di,iconBtnSquare:mt,newfriend:Hr},props:{users:Array,title:String,icon:String,horizontal:{type:Boolean,default:!1},color:{type:String,default:"primary"},canAddFriend:Boolean,search:{type:Boolean,default:!1}},data:function(){return{addFriendPopup:!1}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriendPopup=!0},updateFriendsActivity:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh");case 1:case"end":return t.stop()}}),t)})))()}}},mi=pi,hi=(a("6026"),Object(tt["a"])(mi,Zr,Xr,!1,null,"006f69f6",null)),gi=hi.exports,fi={components:{usersList:Kr,geolocation:Lt,userList:gi},data:function(){return{users:null,user:{position:null},suggestions:null,suggestionType:"followers",skip:0,limit:12,tab:"suggestion",serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){},methods:{reloadFriends:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skip=0,t.next=3,e.loadFriends(0,(function(){}));case 3:case"end":return t.stop()}}),t)})))()},loadFriends:function(e,t){var a=this;return r()(o.a.mark((function e(){var s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=a,Mt.listFriendsSync(0,a.skip,a.limit,(function(e,a){null===s.users&&(s.users=[]),e&&t(e),a&&a.data&&a.data.length>0&&(s.skip+=s.limit,s.users=s.users.concat(a.data),t())}));case 2:case"end":return e.stop()}}),e)})))()},loadSuggestions:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=a,"near"===a.suggestionType?Mt.listSuggestionsSync({lng:a.user.position.longitude,lat:a.user.position.latitude},a.limit,a.skip,(function(e,a){n.skip+=n.limit,null===n.suggestions&&(n.suggestions=[]),e&&t(e),a&&a.data&&a.data.length>0&&(n.suggestions=n.suggestions.concat(a.data),t())})):Mt.listFollowersSync(a.limit,a.skip,(function(a,s){null===n.suggestions&&(n.suggestions=[]),a&&t(a),s&&s.data&&s.data.length>0&&(n.skip+=s.data.length,n.suggestions=n.suggestions.concat(s.data),t()),s&&s.data&&s.data.length>0&&!(s.data.length<n.limit)||(n.suggestionType="near",n.loadSuggestions(e,t))}));case 2:case"end":return s.stop()}}),s)})))()},onLocationSuccess:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$set(t.user,"position",e.coords);case 1:case"end":return a.stop()}}),a)})))()},onLocationError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},selectTab:function(e){this.tab=e,this.skip=0,"suggestion"===e&&null===this.suggestions&&this.loadSuggestions(0,(function(){}))},backToTheMap:function(){this.$router.back()}}},bi=fi,vi=(a("96a5"),Object(tt["a"])(bi,jr,Dr,!1,null,"12fb4a2a",null)),yi=vi.exports,wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-dark"},[a("div",{attrs:{id:"teaser q-mb-lg"}},[a("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n      "+e._s(e.$t("label."+(e.$store.state.user.id===e.$route.params.id?"YourBadges":"Badges")))+"\n    ")]),a("badgesList",{attrs:{format:e.$store.state.user.id===e.$route.params.id?"bytown":"list",badges:e.badges}}),a("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[a("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1)],1)])},qi=[],xi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pl-md"},[e.badges?e._e():a("div",{staticClass:"badge relative-position"},[a("div",{staticClass:"centered q-pt-lg"},[a("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.badges&&0===e.badges.length?a("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):e._e(),"scroll"===e.format&&e.badges&&e.badges.length>0?a("div",{staticClass:"horizontal-scroll-wrapper badges-horizontal-scroll-wrapper"},e._l(e.badges,(function(t){return a("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.questData.rewardPicture}}),a("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"list"===e.format&&e.badges&&e.badges.length>0?a("div",{staticClass:"row justify-around"},e._l(e.badges,(function(t){return a("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.questData.rewardPicture}}),a("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"bytown"===e.format&&e.badges&&e.badges.length>0?a("div",[e._l(e.badges,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"subtitle4 q-pb-md"},[e._v(e._s(t.city))]),a("div",{staticClass:"row justify-around"},e._l(t.rewards,(function(t,s){return a("div",{key:s,staticClass:"badge relative-position q-mr-md",on:{click:function(a){return e.openQuest(t.questId)}}},[a("img",{class:{reward:!0,disabled:!t.won},attrs:{src:e.uploadUrl+"/upload/quest/"+t.image}}),t.won?a("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(t.title)+"\n          ")]):e._e(),t.won?e._e():a("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(e.$t("label.NotWon"))+"\n          ")])])})),0)])})),e._v("\n    "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n  ")],2):e._e()])},Ci=[],Si={props:["badges","format"],data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},methods:{openQuest:function(e){this.$router.push("/quest/play/"+e)}}},ki=Si,Pi=Object(tt["a"])(ki,xi,Ci,!1,null,null,null),_i=Pi.exports,Ti={components:{badgesList:_i},data:function(){return{badges:null,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadBadges()},methods:{loadBadges:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.getRewards(e.$route.params.id,"all");case 2:a=t.sent,a&&a.data&&(e.badges=a.data);case 4:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.$router.back()}}},Ii=Ti,Ai=Object(tt["a"])(Ii,wi,qi,!1,null,null,null),$i=Ai.exports,Oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-profil"},[e.$store.state.user.id!==e.userId?a("div",{staticClass:"profil friends"},[a("div",{staticClass:"profil-photo-center",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "}),a("div",{staticClass:"flex column items-center justify-center text-center q-mt-lg"},[e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?a("div",{staticClass:"item-level"},[a("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e(),a("div",{staticClass:"subtitle3"},[e._v(e._s(e.user.name))]),e.user.email?a("div",{staticClass:"subtitle4"},[e._v(e._s(e.user.email))]):e._e(),a("div",[e._v("Score : "+e._s(e.user.score))]),e.user.description?a("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n          "+e._s(e.user.description)+"\n        ")]):e._e()]),a("div",{staticStyle:{"max-width":"300px",margin:"24px auto 0"}},[e.user.status&&"friend"===e.user.status?a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.DoNotFollowAnymore"),color:"accent",icon:"done"},nativeOn:{click:function(t){return e.removeFriend()}}}):a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.Follow"),color:"accent",icon:"done"},nativeOn:{click:function(t){return e.follow()}}})],1),e.isAdmin?a("user-credits",{attrs:{credits:e.user.credits,canAdd:e.isAdmin,userId:e.userId},on:{refresh:e.refresh}}):e._e(),e.$store.state.user.id!==e.userId&&e.quests&&e.quests.built&&e.quests.built.length>0?a("div",[a("quest-list",{attrs:{quests:e.quests.built,title:e.$t("label.EscapeGame"),icon:"extension","max-show":250,color:"accent"}})],1):e._e()],1):a("div",{staticClass:"profil q-px-md q-pb-lg"},[a("icon-btn-square",{staticClass:"float-right q-pa-md q-pb-lg",attrs:{icon:"settings",color:"accent",fill:""},nativeOn:{click:function(t){return e.updateProfile()}}}),a("icon-btn-square",{staticClass:"float-right q-pa-md q-pb-lg",attrs:{icon:"military_tech",color:"primary",fill:""},nativeOn:{click:function(t){return e.$router.push("/user/ranking/level/world")}}}),a("div",{staticClass:"float-left no-wrap items-end justify-start q-pb-md"},[a("div",{staticClass:"profil-photo-top",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "})]),a("div",{staticClass:"q-pt-md"},[""!==e.user.name?a("div",[a("div",{staticClass:"subtitle3 q-mt-lg q-pl-md"},[e._v("\n              "+e._s(e.user.name)+"\n            ")])]):e._e(),e.user.description?a("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.user.description)+"\n          ")]):e._e(),"eric@graaly.com"===e.user.email?a("div",[a("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[a("a",{on:{click:function(t){return e.$router.push("/testpayment")}}},[e._v("test payment")])])]):e._e()]),a("div",{staticStyle:{clear:"both"}}),a("div",[e.warnings.listCreatedQuestsMissing?a("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[a("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e()]),e.user.credits&&e.user.credits.paid&&e.user.credits.paid>0&&(e.isOwner||e.isAdmin)?a("user-credits",{attrs:{credits:e.user.credits,userId:e.userId},on:{refresh:e.refresh}}):e._e(),e.$store.state.user.id===e.userId?a("div",[a("quest-list",{attrs:{quests:e.quests.built,title:e.$t("label.EscapeGames"),icon:"extension","read-more":"",color:"secondary"},on:{readMore:function(t){return e.readMoreQuestPublished()}}})],1):e._e(),a("text-btn-square",{staticClass:"q-mb-lg",attrs:{title:e.$t("label.CreateANewQuest"),color:"secondary",icon:"extension"},nativeOn:{click:function(t){return e.buildQuest()}}}),null===e.badges||e.badges.length>0?a("div",[a("badge-list",{attrs:{badges:e.badges,title:e.$t("label.Badges"),icon:"military_tech"}})],1):e._e(),null===e.quests.played||e.quests.played.length>0?a("div",[a("quest-list",{attrs:{quests:e.quests.played,title:e.$t("label.SolvedQuests"),icon:"task_alt","read-more":"",color:"#1a4567","no-rating":"","no-price":""},on:{readMore:function(t){return e.readMoreQuestPlayed()}}})],1):e._e(),null===e.friends.list||e.friends.list.length>0&&e.$store.state.user.id===e.userId?a("div",[a("user-list",{attrs:{users:e.friends.list,horizontal:"",color:"accent",title:e.$t("label.YouFollowThem"),icon:"group"}})],1):e._e(),e.$store.state.user.id===e.userId?a("div",[a("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[a("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),a("div",{staticClass:"centered q-mb-sm cursor-pointer"},[a("a",{on:{click:function(t){return e.removeOfflineData()}}},[e._v(e._s(e.$t("label.RemoveOfflineData")))])]),a("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),a("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})]):e._e()],1)])},Mi=[],zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pb-lg",style:e.cssVars},[e.title?a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:e.icon}}),a("span",[e._v(e._s(e.title))])],1)]):e._e(),e.badges?e.badges&&0===e.badges.length?a("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):a("div",{staticClass:"badge-list horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},e._l(e.badges,(function(e,t){return a("profil-badge",{key:t,attrs:{badge:e}})})),1):a("div",{staticClass:"full-width"},[a("q-card",{staticClass:"q-pa-none",staticStyle:{background:"transparent",width:"100px",height:"120px"},attrs:{flat:""}},[a("div",{staticClass:"q-pa-sm"},[a("q-skeleton",{staticStyle:{margin:"0 auto"},attrs:{size:"80px",square:""}}),a("q-skeleton",{attrs:{type:"text",square:""}})],1)])],1)])},Ni=[],Ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"badge-self"},[a("q-img",{staticClass:"badge-img shadow-5",attrs:{src:e.uploadUrl+"/upload/quest/"+e.badge.questData.rewardPicture}}),a("div",{staticClass:"text-center badge-text"},[e._v("\r\n    "+e._s(e.badge.questData.title)+"\r\n  ")])],1)},ji=[],Di={name:"profilBadge",props:{badge:Object},data:function(){return{serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}}},Fi=Di,Li=(a("9419"),Object(tt["a"])(Fi,Ri,ji,!1,null,"30ef1588",null)),Ei=Li.exports,Qi={name:"badgeList",components:{profilBadge:Ei},props:{badges:Array,title:String,icon:String,color:{type:String,default:"primary"}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},cssVars:function(){return{"--bg-color":this.bgColor,"--bg-darken":Bt["a"].lighten(this.bgColor,-20)}}}},Bi=Qi,Ui=Object(tt["a"])(Bi,zi,Ni,!1,null,"5ea92fe6",null),Yi=Ui.exports,Gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"title flex justify-between items-center q-mb-md"},[a("div",{staticClass:"flex items-center",staticStyle:{"text-transform":"uppercase"}},[a("q-icon",{staticClass:"q-mr-sm material-icons-outlined",attrs:{name:"savings"}}),a("span",[e._v(e._s(e.$t("label.Credits")))])],1)]),a("div",{staticClass:"q-pa-md row items-start q-gutter-md"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-secondary text-white"},[50!==e.credits.paid?a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.CreditsBought")))]):e._e(),50===e.credits.paid?a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.CreditsOffered")))]):e._e(),a("div",{staticClass:"text-h6"},[e._v(e._s(e.credits.paid))])])],1),a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-secondary text-white"},[a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.CreditsUsed")))]),a("div",{staticClass:"text-h6"},[e._v(e._s(e.credits.used))])])],1),e.credits.toPay&&e.credits.toPay<0?a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-secondary text-white"},[a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.CreditsRemaining")))]),a("div",{staticClass:"text-h6"},[e._v(e._s(-1*e.credits.toPay))])])],1):e._e(),e.credits.toPay&&e.credits.toPay>0?a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.$t("label.CreditsToPay")))]),a("div",{staticClass:"text-h6"},[e._v(e._s(e.credits.toPay))])])],1):e._e(),e.canAdd?a("q-card",{staticClass:"my-card clickable",on:{click:function(t){e.addCreditsPopup=!0}}},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-h6 centered"},[e._v("+")]),a("div",{staticClass:"text-subtitle2"},[e._v("Add credits")])])],1):e._e()],1),a("q-dialog",{model:{value:e.addCreditsPopup,callback:function(t){e.addCreditsPopup=t},expression:"addCreditsPopup"}},[a("div",{staticClass:"bg-white centered q-pa-md"},[a("div",[a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",type:"number",label:"Credits to add"},model:{value:e.formData.credits,callback:function(t){e.$set(e.formData,"credits",t)},expression:"formData.credits"}})],1),a("div",[a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",label:"Invoice number"},model:{value:e.formData.invoice,callback:function(t){e.$set(e.formData,"invoice",t)},expression:"formData.invoice"}})],1),a("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.addCredits()}}},[a("div",[e._v("Add credits")])]),a("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.addCreditsPopup=!1}}},[a("div",[e._v(e._s(e.$t("label.Close")))])])],1)])],1)},Hi=[],Wi={name:"userCredits",props:{credits:{},canAdd:Boolean,userId:String},data:function(){return{addCreditsPopup:!1,formData:{credits:0,invoice:""}}},methods:{addCredits:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.addCredits(e.userId,e.formData);case 2:e.$emit("refresh"),e.addCreditsPopup=!1,e.formData={credits:0,invoice:""};case 5:case"end":return t.stop()}}),t)})))()}}},Vi=Wi,Ji=Object(tt["a"])(Vi,Gi,Hi,!1,null,"dc0bcf76",null),Ki=Ji.exports,Zi={components:{iconBtnSquare:mt,textBtnSquare:ht["a"],questList:pa,badgeList:Yi,userList:gi,userCredits:Ki},data:function(){return{user:{position:null,proposeAQuest:!0},userId:null,isOwner:!1,isAdmin:!1,friends:{list:null,show:!1},quests:{played:null,built:null,createdNb:0},badges:null,warnings:{listCreatedQuestsMissing:!1,listFriendsMissing:!1},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.refresh()},methods:{refresh:function(){"me"===this.$route.params.id?this.userId=this.$store.state.user.id:this.userId=this.$route.params.id,this.$store.state.user.id===this.userId&&(this.isOwner=!0),this.$store.state.user.isAdmin&&(this.isAdmin=!0),this.getProfile(),this.listCreatedQuests(),this.listPlayedQuests(),this.loadFriends(),this.loadBadges()},getProfile:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId!==e.$store.state.user.id){t.next=5;break}e.user={name:e.$store.state.user.name,email:e.$store.state.user.email,description:e.$store.state.user.description,phone:e.$store.state.user.phone?e.$store.state.user.phone:"",picture:e.$store.state.user.picture,zipCode:e.$store.state.user.location.postalCode,country:e.$store.state.user.location.country,language:e.$store.state.user.language,statistics:e.$store.state.user.statistics,level:e.$store.state.user.level,credits:e.$store.state.user.credits},"-"===e.user.name&&e.updateProfile(),t.next=9;break;case 5:return t.next=7,Mt.getFriend(e.userId);case 7:a=t.sent,a&&a.data&&(e.user=a.data);case 9:case"end":return t.stop()}}),t)})))()},listCreatedQuests:function(e){var t=this;return r()(o.a.mark((function e(){var a,s,n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.warnings.listCreatedQuestsMissing=!1,e.next=3,Ot.ListCreatedByAUser(t.userId);case 3:if(a=e.sent,t.quests.built=[],a&&a.data){if(a.data.length>0)for(t.quests.createdNb=a.data.length,s=[],t.quests.built=[],n=0;n<a.data.length;n++)-1===s.indexOf(a.data[n].questId)&&(t.quests.built.push(a.data[n]),s.push(a.data[n].questId))}else t.warnings.listCreatedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e)})))()},listPlayedQuests:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ot.ListPlayedByAUser(e.userId);case 2:a=t.sent,a&&a.data&&(e.quests.played=e.formatRunResults(a.data));case 4:case"end":return t.stop()}}),t)})))()},formatRunResults:function(e){for(var t=[],a=0;a<e.length;a++)t.push({questId:e[a].questId,picture:e[a].questData.picture,thumb:e[a].questData.thumb,title:e[a].questData.title,location:{town:e[a].questData.town},playStatus:e[a].status?e[a].status:"succeeded",points:e[a].stars});return t},loadFriends:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.listFriendsMissing=!1,t.next=3,Mt.listFriends(e.userId,0,10);case 3:a=t.sent,a&&a.data?e.friends.list=a.data:e.warnings.listFriendsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},loadBadges:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.getRewards(e.userId,"won");case 2:a=t.sent,a&&a.data&&(e.badges=a.data);case 4:case"end":return t.stop()}}),t)})))()},loadOrganization:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.user.organizationId){t.next=5;break}return t.next=3,Mt.getOrganization();case 3:a=t.sent,a&&(e.user.organization=a.data);case 5:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.updateProfile(),t.next=8;break;case 4:return t.next=6,Mt.addFriend(e.userId);case 6:a=t.sent,a?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?Jt(e.$t("label.InvitationSent"),"success"):Jt(e.$t("label.FriendsAdded"),"success"),i["a"].set(e.user,"status","friend")):Jt(e.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return t.stop()}}),t)})))()},readMoreQuestPublished:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/created");case 1:case"end":return t.stop()}}),t)})))()},readMoreQuestPlayed:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/played");case 1:case"end":return t.stop()}}),t)})))()},readMoreBadges:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/badges");case 1:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.userId===this.$store.state.user.id?this.$router.push("/home"):this.$router.back()},readMoreAllFriends:function(){this.$router.push("/user/"+this.userId+"/friends")},getProfileImage:function(){return this.user.picture&&-1!==this.user.picture.indexOf("http")?this.user.picture:this.user.picture?this.uploadUrl+"/upload/profile/"+this.user.picture:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")},updateProfile:function(){this.$router.push("/user/updateprofile")},disconnect:function(){this.$router.push("/user/logout")},removeOfflineData:function(){var e=this;return r()(o.a.mark((function t(){var a,s,n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,uu.readFile("","quests.json");case 2:if(a=t.sent,!a){t.next=17;break}if(s=JSON.parse(a),!s||!s.list){t.next=15;break}if(n=s.list,!(n.length>0)){t.next=15;break}r=0;case 9:if(!(r<n.length)){t.next=15;break}return t.next=12,uu.removeDirectory(n[r].questId);case 12:r++,t.next=9;break;case 15:return t.next=17,uu.writeInFile("","quests.json",JSON.stringify({}),!0);case 17:e.$q.dialog({dark:!0,message:e.$t("label.DataHaveBeenRemoved")});case 18:case"end":return t.stop()}}),t)})))()},removeFriend:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.userId,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt.removeFriend(a);case 2:i["a"].set(e.user,"status","normal");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()}}},Xi=Zi,el=(a("d4d2"),Object(tt["a"])(Xi,Oi,Mi,!1,null,"60cacd38",null)),tl=el.exports,al=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-search"},[a("q-scroll-observer",{on:{scroll:e.onScroll}}),a("div",{staticClass:"search-component q-pa-md dark-banner fixed-top"},[a("div",{staticClass:"flex no-wrap justify-around items-center q-pb-sm"},[a("icon-btn-square",{attrs:{label:e.$t("label.EscapeGame"),icon:"casino",color:"primary",fill:"quest"!==e.type},nativeOn:{click:function(t){return e.selectType("quest")}}}),a("icon-btn-square",{attrs:{label:e.$t("label.Designers"),icon:"extension",color:"secondary",fill:"designer"!==e.type},nativeOn:{click:function(t){return e.selectType("designer")}}}),a("icon-btn-square",{attrs:{label:e.$t("label.Players"),icon:"face",color:"accent",fill:"player"!==e.type},nativeOn:{click:function(t){return e.selectType("player")}}})],1),"quest"===e.type?a("div",[a("div",{staticClass:"q-pa-md"},[a("q-btn-group",{attrs:{spread:"",rounded:""}},[a("q-btn",{attrs:{color:"secondary",outline:"around"!==e.subtype,label:e.$t("label.AroundYou"),icon:"o_explore",size:"sm"},on:{click:function(t){return e.selectSubtype("around")}}}),a("q-btn",{attrs:{color:"secondary",outline:"friends"!==e.subtype,label:e.$t("label.FriendsQuests"),icon:"o_groups",size:"sm"},on:{click:function(t){return e.selectSubtype("friends")}}})],1)],1)]):e._e(),a("div",{staticClass:"q-px-md"},[a("q-input",{attrs:{dark:"",dense:"","bottom-slots":"",debounce:"500",label:e.$t("label.Search")},on:{input:function(t){return e.find()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{color:"primary",name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.search.text="",e.selectSubtype("around"),e.results.players=null,e.results.designers=null}}})]},proxy:!0},{key:"hint",fn:function(){return[""!==e.search.text&&e.search.text.length<3?a("div",{staticClass:"text-negative q-pt-sm"},[e._v("\n            "+e._s(e.$t("label.ThreeLetterMin"))+"\n          ")]):e._e(),a("div",[e.search.text.length>2&&"quest"===e.type&&e.results.quests?a("div",{staticClass:"text-right q-pt-sm"},[e._v("\n              "+e._s(e.results.quests.length)+" "+e._s(e.$t("label.Result"))),e.results.quests.length>1?a("span",[e._v("s")]):e._e()]):e._e(),e.search.text.length>2&&"designer"===e.type&&e.results.designers?a("div",{staticClass:"text-right q-pt-sm"},[e._v("\n              "+e._s(e.results.designers.length)+" "+e._s(e.$t("label.Result"))),e.results.designers.length>1?a("span",[e._v("s")]):e._e()]):e._e(),e.search.text.length>2&&"player"===e.type&&e.results.players?a("div",{staticClass:"text-right q-pt-sm"},[e._v("\n              "+e._s(e.results.players.length)+" "+e._s(e.$t("label.Result"))),e.results.players.length>1?a("span",[e._v("s")]):e._e()]):e._e()])]},proxy:!0}]),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1)]),a("div",{staticClass:"search",attrs:{id:"teaser"}},[a("div",{staticClass:"q-px-md quest-list",style:"quest"===e.type?"top: 250px":"top: 200px"},["quest"===e.type?a("div",[a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherQuests}},[a("quest-list",{attrs:{color:"allColors",quests:e.results.quests,"max-show":1e3}})],1)],1):e._e(),"designer"===e.type?a("div",[a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[a("creator-list",{attrs:{creators:e.results.designers,search:""}})],1)],1):e._e(),"player"===e.type?a("div",[a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[a("user-list",{attrs:{users:e.results.players,search:""}})],1)],1):e._e(),"quest"===e.type&&e.search.text.length>2&&e.results.quests&&0===e.results.quests.length?a("div",{staticClass:"centered q-pa-md text-white",nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[a("q-icon",{attrs:{name:"explore",size:"2rem"}}),e._v("\n        "+e._s(e.$t("label.NoQuestForThisSearch"))+"\n        "),a("div",[a("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1):e._e(),"designer"===e.type&&e.results.designers&&0===e.results.designers.length?a("div",{staticClass:"centered q-pa-md text-white"},[e._v("\n        "+e._s(e.$t("label.NoDesignerForThisSearch"))+"\n      ")]):e._e(),"player"===e.type&&e.results.players&&0===e.results.players.length?a("div",{staticClass:"centered q-pa-md text-white"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisSearch"))+"\n      ")]):e._e()])]),a("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},sl=[],ol=(a("386d"),{components:{UserList:gi,CreatorList:va,geolocation:Lt,questList:pa,usersList:Kr,iconBtnSquare:mt},data:function(){return{type:"quest",subtype:null,results:{quests:null,designers:null,players:null},search:{text:"",limit:10,skip:0},user:{position:null},scrollInfo:{},findQuestWhenLocationIsKnown:!0,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.$route.params.subtype&&(this.subtype=this.$route.params.subtype),this.$route.params.type&&(this.type=this.$route.params.type),"around"!==this.subtype&&this.find()},methods:{selectType:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.type=e,t.subtype="quest"===e?"around":"none",a.next=4,t.find();case 4:case"end":return a.stop()}}),a)})))()},selectSubtype:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.subtype=e,t.search.text="",t.search.skip=0,a.next=5,t.find();case 5:case"end":return a.stop()}}),a)})))()},find:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("quest"!==e.type){t.next=5;break}return t.next=3,e.findQuests();case 3:t.next=14;break;case 5:if("player"!==e.type){t.next=11;break}return e.search.skip=0,t.next=9,e.findUser("player");case 9:t.next=14;break;case 11:return e.search.skip=0,t.next=14,e.findUser("designer");case 14:case"end":return t.stop()}}),t)})))()},findUser:function(e){var t=this;return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!(t.search.text.length>2)){a.next=8;break}return t.subtype="keyword",t.$q.loading.show(),a.next=6,Mt.find(e,t.search.text);case 6:s=a.sent,s&&s.data?"player"===e?t.results.players=s.data:t.results.designers=s.data:t.displayNetworkIssueMessage();case 8:t.$q.loading.hide(),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0),t.$q.loading.hide();case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()},loadOtherUsers:function(e,t){if(this.search.skip>=10){var a=this;Mt.find(this.type,this.search.text,this.search.skip,(function(e,s){a.search.skip+=a.search.limit,e&&t(e),s&&s.data&&s.data.length>0&&("player"===type?a.results.players=a.results.players.concat(s.data):a.results.designers=a.results.designers.concat(s.data),t())}))}},findQuests:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!("keyword"!==e.subtype||e.search.text.length>2)){t.next=22;break}if(e.search.text.length>2&&(e.subtype="keyword"),e.$q.loading.show(),a=e.user.position,"keyword"!==e.subtype){t.next=11;break}return t.next=8,Ot.find(e.search.text,a,0,10);case 8:s=t.sent,t.next=21;break;case 11:if("around"!==e.subtype){t.next=17;break}return t.next=14,Ot.listNearest(a,0);case 14:s=t.sent,t.next=21;break;case 17:if("friends"!==e.subtype){t.next=21;break}return t.next=20,Ot.listFriendQuests();case 20:s=t.sent;case 21:s&&s.data?("friends"===e.subtype?e.results.quests=e.formatRunResults(s.data):e.results.quests=s.data,e.search.skip=s.data.length,e.user.position&&(e.results.quests=e.results.quests.map((function(e){var t=6378.137,s=e.location.coordinates[1]*Math.PI/180-a.latitude*Math.PI/180,o=e.location.coordinates[0]*Math.PI/180-a.longitude*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),r=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return e.distance=Math.floor(t*r),e})))):e.displayNetworkIssueMessage();case 22:e.$q.loading.hide(),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0),e.$q.loading.hide();case 29:case"end":return t.stop()}}),t,null,[[0,25]])})))()},loadOtherQuests:function(e,t){if(this.user.position&&this.search.skip>=10){var a=this;"around"===this.subtype?Ot.listNearestSync(this.user.position,null,this.search.skip,(function(e,s){a.search.skip+=a.search.limit,e&&t(e),s&&s.data&&s.data.length>0&&(a.results.quests=a.results.quests.concat(s.data),t())})):"friends"===this.subtype?Ot.listFriendQuestsync(null,this.search.skip,(function(e,s){a.search.skip+=a.search.limit,e&&t(e),s&&s.data&&s.data.length>0&&(a.results.quests=a.results.quests.concat(this.formatRunResults(s.data)),t())})):Ot.findSync(this.search.text,this.user.position,null,this.search.skip,(function(e,s){a.search.skip+=a.search.limit,e&&t(e),s&&s.data&&s.data.length>0&&(a.results.quests=a.results.quests.concat(s.data),t())}))}},formatRunResults:function(e){for(var t=[],a=0;a<e.length;a++)t.push({questId:e[a].questId,picture:e[a].questData.picture,title:e[a].questData.title,location:{town:e[a].questData.town},playStatus:e[a].status?e[a].status:"succeeded",points:e[a].stars});return t},displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},onLocationSuccess:function(e){var t=this;return r()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$set(t.user,"position",e.coords),!t.findQuestWhenLocationIsKnown){a.next=5;break}return t.findQuestWhenLocationIsKnown=!1,a.next=5,t.find();case 5:case"end":return a.stop()}}),a)})))()},onLocationError:function(e){this.$refs["geolocation-component"].alreadyWorked||(this.user.position=null)},onScroll:function(e){this.scrollInfo=e},backToTheMap:function(){this.$router.back()}}}),nl=ol,rl=(a("b92e"),Object(tt["a"])(nl,al,sl,!1,null,"e561eb62",null)),il=rl.exports,ll=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scroll background-admin"},[a("div",[a("q-tabs",{staticClass:"bg-primary text-white",attrs:{"indicator-color":"accent","active-bg-color":"accent"},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[a("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Validation",default:""}}),a("q-tab",{attrs:{name:"earnings",icon:"euro",label:"paying games"}}),a("q-tab",{attrs:{name:"missingcredits",icon:"euro",label:"Missing credits"}}),a("q-tab",{attrs:{name:"needtopay",icon:"euro",label:"Need to pay"}}),a("q-tab",{attrs:{name:"statisticsMonth",icon:"bar_chart",label:"Best games (month)"}}),a("q-tab",{attrs:{name:"statisticsYear",icon:"bar_chart",label:"Best games (year)"}}),a("q-tab",{attrs:{name:"statistics",icon:"bar_chart",label:"Best games"}}),a("q-tab",{attrs:{name:"limitations",icon:"pan_tool",label:"Limitations"}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[a("q-tab-panel",{attrs:{name:"validation"}},[a("validate-quest-panel")],1),a("q-tab-panel",{attrs:{name:"rejected"}},[a("rejected-quest-panel")],1),a("q-tab-panel",{attrs:{name:"earnings"}},[a("earning-quest-panel")],1),a("q-tab-panel",{attrs:{name:"missingcredits"}},[a("missing-credits-panel")],1),a("q-tab-panel",{attrs:{name:"needtopay"}},[a("need-to-pay-quest-panel")],1),a("q-tab-panel",{attrs:{name:"statistics"}},[a("statistic-quest-panel")],1),a("q-tab-panel",{attrs:{name:"statisticsYear"}},[a("statistic-year-quest-panel")],1),a("q-tab-panel",{attrs:{name:"statisticsMonth"}},[a("statistic-month-quest-panel")],1),a("q-tab-panel",{attrs:{name:"limitations"}},[a("limitation-quest-panel")],1),a("q-tab-panel",{attrs:{name:"disabled"}},[a("disabled-quest-panel")],1)],1)],1)])},cl=[],ul=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:e.$t("label.AwaitingGames"),data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),a("q-th",{attrs:{"auto-width":""}},[e._v(e._s(e.$t("label.AdminPlay")))]),a("q-th",{attrs:{"auto-width":""}},[e._v(e._s(e.$t("label.AdminValid")))])],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{attrs:{"auto-width":""}},[a("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():a("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),a("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]),a("q-td",{key:"author",attrs:{"auto-width":""},on:{click:function(a){return e.openProfilePage(t.row.authorUserId)}}},[e._v(e._s(t.row.author)),a("br"),a("span",{staticClass:"text-secondary",staticStyle:{"font-size":"10px"}},[e._v(e._s(t.row.authorUserId))])]),a("q-td",{key:"mail",attrs:{"auto-width":""}},[t.row.userMail?a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(a){return e.copy(t.row.userMail)}}},[a("q-tooltip",[e._v("\n          "+e._s(t.row.userMail.length>0?t.row.userMail:"-- Pas de mail --")+"\n        ")])],1):e._e()],1),a("q-td",{key:"access",attrs:{"auto-width":""}},[e._v(e._s(t.row.access))]),a("q-td",{key:"premium",attrs:{"auto-width":""}},[e._v(e._s(t.row.isPremium?"Premium":"Individual"))]),a("q-td",{staticClass:"text-center",attrs:{"auto-width":""}},[a("q-btn",{attrs:{size:"md",color:"accent",glossy:"",icon:"play_arrow"},nativeOn:{click:function(a){return e.$router.push("/quest/play/"+t.row.questId)}}})],1),a("q-td",{staticClass:"text-center",attrs:{"auto-width":""}},[a("q-btn",{attrs:{size:"md",color:"primary",glossy:"",icon:"done"},on:{click:function(a){return e.validate(t.row.questId,t.row.version)}}})],1)],1)]}}])})},dl=[],pl={ListQuestsToValidate:function(){return Qe().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return Qe().get("admin/quests/rejected")},ListTowns:function(){return Qe().get("admin/towns")},ListBestGames:function(){return Qe().get("admin/bestgames")},ListBestGamesForMonth:function(){return Qe().get("admin/bestgames/month")},ListBestGamesForYear:function(){return Qe().get("admin/bestgames/year")},ListNeedToPay:function(){return Qe().get("admin/needtopay")},ListEarnings:function(){return Qe().get("admin/earnings")},ListMissingCredits:function(){return Qe().get("admin/missingcredits")},ListLimitations:function(){return Qe().get("admin/limitations")},countQuestDisabled:function(){return Qe().get("admin/quests/countDisabled")},ListQuestDisabled:function(e,t){return Qe().get("admin/quests/disabled/"+e+"/"+t)},publish:function(e,t){return Qe().get("admin/quests/publish/"+e+"/nbplays/"+t)},increaseNumberOfPlaysAllowed:function(e,t){return Qe().get("admin/quests/"+e+"/nbplays/"+t)},getUserMail:function(e){return Qe().get("/user/"+e+"/profile/private")},CreateTown:function(e){return Qe().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return Qe().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return Qe().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},deleteFolder:function(e){return Qe().delete("/admin/delete/quest/"+e)}},ml={name:"validateQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","author","mail","access","premium"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"author",required:!0,label:this.$t("label.AdminAuthor"),align:"left",sortable:!0,field:"author"},{name:"mail",label:this.$t("label.AdminMail"),sortable:!0,align:"left",field:"userMail"},{name:"access",label:this.$t("label.AdminAccess"),align:"left",sortable:!0,field:"access"},{name:"premium",label:this.$t("label.AdminPremium"),align:"left",sortable:!0,field:function(e){return e.isPremium?"Premium":"Individual"}}],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadQuestsToValidate()},methods:{loadQuestsToValidate:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListQuestsToValidate();case 2:a=t.sent,e.items=a.data.quests,e.items.forEach((function(e){pl.getUserMail(e.authorUserId).then((function(t){200===t.status?e.userMail=t.data.email:e.userMail="No User"}))})),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},validate:function(e,t){var a=this;return r()(o.a.mark((function s(){return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a.$router.push("/admin/validate/"+e+"/version/"+t);case 1:case"end":return s.stop()}}),s)})))()},copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)},openProfilePage:function(e){this.$router.push("/profile/"+e)}}},hl=ml,gl=Object(tt["a"])(hl,ul,dl,!1,null,"5c3a91b0",null),fl=gl.exports,bl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:e.$t("label.RejectedGames"),data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])}))],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{attrs:{"auto-width":""}},[a("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():a("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),a("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]),a("q-td",{key:"author",attrs:{"auto-width":""}},[e._v(e._s(t.row.author)),a("br"),a("span",{staticClass:"text-secondary",staticStyle:{"font-size":"10px"}},[e._v(e._s(t.row.authorUserId))])]),a("q-td",{key:"mail",attrs:{"auto-width":""}},[t.row.userMail?a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(a){return e.copy(t.row.userMail)}}},[a("q-tooltip",[e._v("\n          "+e._s(t.row.userMail?t.row.userMail:"-- Pas de mail --")+"\n        ")])],1):e._e()],1),a("q-td",{key:"access",attrs:{"auto-width":""}},[e._v(e._s(t.row.access))]),a("q-td",{key:"premium",attrs:{"auto-width":""}},[e._v(e._s(t.row.isPremium?"Premium":"Individual"))])],1)]}}])})},vl=[],yl={name:"rejectedQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","author","mail","access","premium"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"author",required:!0,label:this.$t("label.AdminAuthor"),align:"left",sortable:!0,field:"author"},{name:"mail",label:this.$t("label.AdminMail"),sortable:!0,align:"left",field:"userMail"},{name:"access",label:this.$t("label.AdminAccess"),align:"left",sortable:!0,field:"access"},{name:"premium",label:this.$t("label.AdminPremium"),align:"left",sortable:!0,field:function(e){return e.isPremium?"Premium":"Individual"}}],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadQuestsRejected()},methods:{loadQuestsRejected:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListQuestsRejected();case 2:a=t.sent,e.items=a.data.quests,e.items.forEach((function(t){pl.getUserMail(t.authorUserId).then((function(a){200===a.status?t.userMail=a.data.email:t.userMail="No User",e.loading=!1}))}));case 5:case"end":return t.stop()}}),t)})))()},copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)}}},wl=yl,ql=Object(tt["a"])(wl,bl,vl,!1,null,"40245918",null),xl=ql.exports,Cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:e.$t("label.EarningsGames"),data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[t.row.title.fr?a("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr))]):e._e(),t.row.premiumPrice.prices?a("q-td",{key:"price",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.premiumPrice.prices.fr?t.row.premiumPrice.prices.fr:t.row.premiumPrice.prices.en)),a("br"),e._v(e._s(t.row.premiumPrice.manual&&""!==t.row.premiumPrice.manual?"manual : "+t.row.premiumPrice.manual:""))]):a("q-td",{key:"price",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(e.$t("label.NotPrice")))]),a("q-td",{key:"qrcode",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.premiumPrice.tier?t.row.tierEarnings:"--"))]),a("q-td",{key:"earnings",staticClass:"text-right",attrs:{"auto-width":""}},[e._v(e._s(t.row.earnings.toFixed(2))+" ")])],1)]}}])})},Sl=[],kl={name:"earningQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","price","mail","qrcode","earnings"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"price",label:this.$t("label.AdminPrice"),sortable:!1,align:"center",field:function(e){return e.premiumPrice.prices.fr}},{name:"qrcode",label:this.$t("label.AdminQRCodeUsed"),align:"center",sortable:!0,field:"tierEarnings"},{name:"earnings",label:this.$t("label.AdminEarning"),align:"right",sortable:!0,field:"earnings"}],initialPagination:{sortBy:"earnings",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadEarnings()},methods:{loadEarnings:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListEarnings();case 2:a=t.sent,e.items=a.data.earnings,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()},copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)}}},Pl=kl,_l=Object(tt["a"])(Pl,Cl,Sl,!1,null,"16b7e729",null),Tl=_l.exports,Il=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:"Best games of the year",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{"auto-width":""},nativeOn:{click:function(a){return e.$router.push("/quest/play/"+t.row._id.questId)}}},[e._v(e._s(t.row._id.questData.fr))]),a("q-td",{key:"limit",attrs:{"auto-width":""}},[e._v(e._s(t.row._id.nbPlaysAllowed))]),a("q-td",{key:"nb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.nb))])],1)]}}])})},Al=[],$l={name:"needToPayQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","limit","nb"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e._id.questData.fr}},{name:"Limit",required:!0,label:"Limit",align:"left",sortable:!0,field:function(e){return e._id.nbPlaysAllowed}},{name:"nb",label:"Parties joues",sortable:!0,align:"center",field:"nb"}],initialPagination:{sortBy:"nb",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadStatistics()},methods:{loadStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListNeedToPay();case 2:a=t.sent,e.items=a.data.games,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},Ol=$l,Ml=Object(tt["a"])(Ol,Il,Al,!1,null,"ec36d7a6",null),zl=Ml.exports,Nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:"Missing credits",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.name)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{"auto-width":""},nativeOn:{click:function(a){return e.$router.push("/profile/"+t.row._id)}}},[e._v(e._s(t.row.name))]),a("q-td",{key:"paid",attrs:{"auto-width":""}},[e._v(e._s(t.row.credits.paid))]),a("q-td",{key:"topay",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.credits.toPay))])],1)]}}])})},Rl=[],jl={name:"needToPayQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","paid","topay"],columns:[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:function(e){return e.name}},{name:"paid",required:!0,label:"Paid",align:"left",sortable:!0,field:function(e){return e.credits.paid}},{name:"topay",label:"To pay",sortable:!0,align:"center",field:function(e){return e.credits.topay}}],initialPagination:{sortBy:"name",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadStatistics()},methods:{loadStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListMissingCredits();case 2:a=t.sent,e.items=a.data.users,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},Dl=jl,Fl=Object(tt["a"])(Dl,Nl,Rl,!1,null,"20ae9d72",null),Ll=Fl.exports,El=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:"Best games",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{"auto-width":""},nativeOn:{click:function(a){return e.$router.push("/quest/play/"+t.row._id.questId)}}},[e._v(e._s(t.row._id.questData.fr))]),a("q-td",{key:"nb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.nb))])],1)]}}])})},Ql=[],Bl={name:"statisticMonthQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","nb"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e._id.questData.fr}},{name:"nb",label:"Parties joues",sortable:!0,align:"center",field:"nb"}],initialPagination:{sortBy:"nb",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadStatistics()},methods:{loadStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListBestGames();case 2:a=t.sent,e.items=a.data.games,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},Ul=Bl,Yl=Object(tt["a"])(Ul,El,Ql,!1,null,"27bae540",null),Gl=Yl.exports,Hl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:"Best games of the year",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{"auto-width":""},nativeOn:{click:function(a){return e.$router.push("/quest/play/"+t.row._id.questId)}}},[e._v(e._s(t.row._id.questData.fr))]),a("q-td",{key:"yearNb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.yearNb))])],1)]}}])})},Wl=[],Vl={name:"statisticYearQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","yearNb"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e._id.questData.fr}},{name:"yearNb",label:"Parties cette anne",sortable:!0,align:"center",field:"yearNb"}],initialPagination:{sortBy:"yearNb",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadStatistics()},methods:{loadStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListBestGamesForYear();case 2:a=t.sent,e.items=a.data.games,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},Jl=Vl,Kl=Object(tt["a"])(Jl,Hl,Wl,!1,null,"019c7578",null),Zl=Kl.exports,Xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:"Best games of the month",data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",attrs:{"auto-width":""},nativeOn:{click:function(a){return e.$router.push("/quest/play/"+t.row._id.questId)}}},[e._v(e._s(t.row._id.questData.fr))]),a("q-td",{key:"weekNb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.weekNb))]),a("q-td",{key:"monthNb",staticClass:"text-center",attrs:{"auto-width":""}},[e._v(e._s(t.row.monthNb))]),a("q-td",{key:"rating",staticClass:"text-center",attrs:{"auto-width":""}},[t.row.rating?a("q-rating",{attrs:{size:"1em",color:"accent",readonly:""},model:{value:t.row.rating,callback:function(a){e.$set(t.row,"rating",a)},expression:"props.row.rating"}}):a("q-rating",{attrs:{value:0,size:"1em",color:"accent",readonly:""}})],1)],1)]}}])})},ec=[],tc={name:"statisticQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","weekNb","monthNb","rating"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e._id.questData.fr}},{name:"weekNb",label:this.$t("label.AdminPlayedWeekly"),sortable:!0,align:"center",field:"weekNb"},{name:"monthNb",label:this.$t("label.AdminPlayedMonthly"),align:"center",sortable:!0,field:"monthNb"},{name:"rating",label:this.$t("label.AdminRating"),align:"center",sortable:!0,field:"rating"}],initialPagination:{sortBy:"monthNb",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadStatistics()},methods:{loadStatistics:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListBestGamesForMonth();case 2:a=t.sent,e.items=a.data.games,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},ac=tc,sc=Object(tt["a"])(ac,Xl,ec,!1,null,"642a794c",null),oc=sc.exports,nc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:e.$t("label.LimitationGames"),data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.initialPagination,"no-data-label":e.$t("label.FindNothing")}})},rc=[],ic={name:"limitationQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","stats","remaining"],columns:[{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"stats",label:this.$t("label.AdminPlayLimit"),sortable:!0,align:"right",field:function(e){return e.nbPlayers+"/"+e.limitations.nbPlays}},{name:"remaining",label:this.$t("label.AdminRemainingCredit"),sortable:!0,align:"right",field:function(e){return e.limitations.nbPlays-e.nbPlayers}}],initialPagination:{sortBy:"monthNb",descending:!0,page:1,rowsPerPage:10},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.loadLimitations()},methods:{loadLimitations:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.ListLimitations();case 2:a=t.sent,e.items=a.data.limitations,e.loading=!1;case 5:case"end":return t.stop()}}),t)})))()}}},lc=ic,cc=Object(tt["a"])(lc,nc,rc,!1,null,"5be22322",null),uc=cc.exports,dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"container",attrs:{title:e.$t("label.NotPublishedGames"),data:e.items,columns:e.columns,"visible-columns":e.visible,"row-key":"id",loading:e.loading,pagination:e.pagination,"no-data-label":e.$t("label.FindNothing")},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),a("q-th",{attrs:{"auto-width":""}},[e._v(e._s(e.$t("label.AdminDelete")))])],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{attrs:{"auto-width":""}},[a("q-avatar",{attrs:{square:""}},[t.row.thumb.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.thumb.fr}}):t.row.picture.fr?a("img",{attrs:{src:e.uploadUrl+"/upload/quest/"+t.row.picture.fr}}):e._e(),t.row.picture?e._e():a("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),a("q-td",{key:"name",attrs:{"auto-width":""}},[e._v(e._s(t.row.title.fr)),a("br"),a("span",{staticClass:"text-primary"},[e._v(e._s(t.row.questId))])]),a("q-td",{key:"mail",attrs:{"auto-width":""}},[t.row.userMail?a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"8px",flat:"",round:"",color:"accent",icon:"content_copy"},on:{click:function(a){return e.copy(t.row.userMail)}}},[a("q-tooltip",[e._v("\n          "+e._s(!1!==t.row.userMail?t.row.userMail:"-- Pas de mail --")+"\n        ")])],1):e._e()],1),a("q-td",{key:"status",attrs:{"auto-width":""}},[e._v(e._s(t.row.status))]),a("q-td",{key:"nbStep",attrs:{"auto-width":""}},[e._v("  dfinir ")]),a("q-td",{key:"version",attrs:{"auto-width":""}},[e._v(e._s(t.row.version))]),a("q-td",{key:"size",attrs:{"auto-width":""}},[e._v(e._s(e.goodSize(t.row.size.current)))]),a("q-td",{key:"dateUpdated",attrs:{"auto-width":""}},[e._v(e._s(t.row.dateUpdated))]),a("q-td",{staticClass:"text-center",attrs:{"auto-width":""}},[a("q-btn",{attrs:{size:"md",color:"accent",glossy:"",icon:"delete"},on:{click:function(a){return e.openDeleteDialog(t.row.questId,t.row.version,t.row.title.fr?t.row.title.fr:t.row.title.en)}}}),a("q-dialog",{ref:"adminDeleteDialog"},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",{staticClass:"bg-primary"},[e._v("\n              ATTENTION !!!\n            ")]),a("q-card-section",[a("p",{staticClass:"q-ma-none q-py-md"},[e._v(e._s(e.$t("label.AreYouSureYouWantToRemoveThisQuest"))+" "),a("br"),a("span",{staticClass:"text-primary"},[e._v(e._s(e.deleteQ.title))]),e._v(" en version : "),a("span",{staticClass:"text-primary"},[e._v(e._s(e.deleteQ.version))]),a("br")]),a("p",{staticClass:"q-ma-none"},[e._v("ID : "+e._s(e.deleteQ.questId))])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"accent",label:e.$t("label.AdminDelete")},on:{click:function(t){return e.confirmDeleteQuest()}}}),a("q-btn",{attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.cancelDeleteDialog()}}})],1)],1)],1)],1)],1)]}}])})},pc=[],mc=a("8e72"),hc=a.n(mc),gc={name:"disabledQuestPanel",data:function(){return{loading:!0,items:[],visible:["name","mail","status","nbStep","version","lastUpdate"],columns:[{name:"id",label:"ID",field:"questId"},{name:"name",required:!0,label:this.$t("label.AdminName"),align:"left",sortable:!0,field:function(e){return e.title.fr}},{name:"mail",label:this.$t("label.AdminMail"),sortable:!0,align:"left",field:"userMail"},{name:"status",required:!0,label:this.$t("label.Status"),align:"left",sortable:!0,field:"status"},{name:"nbRun",required:!0,label:this.$t("label.AdminRunCount"),align:"left",sortable:!0,field:"creationStep"},{name:"version",required:!0,label:this.$t("label.Version"),align:"left",sortable:!0,field:"version"},{name:"size",required:!0,label:this.$t("label.AdminSize"),align:"left",sortable:!0,field:function(e){return e.size.current}},{name:"lastUpdate",required:!0,label:this.$t("label.AdminLastUpdate"),align:"left",sortable:!0,field:"dateUpdated"}],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:50},deleteQ:{questId:null,version:null,title:null},serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){this.onRequest({pagination:this.pagination})},methods:{copy:function(e){this.$q.notify({message:"copied : "+e}),navigator.clipboard.writeText(e)},goodSize:function(e){if(!e)return"No data";var t=e.toLocaleString();return t.length>8?t.slice(-t.length,-8)+" Mo":t.length>4?t.slice(-t.length,-4)+" Ko":t.length<4?"- de 1 Ko":void 0},loadDisabledQuest:function(e,t){return r()(o.a.mark((function a(){var s;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,pl.ListQuestDisabled(e,t);case 2:return s=a.sent,a.abrupt("return",s.data.disabledQuest);case 4:case"end":return a.stop()}}),a)})))()},getDisabledQuestNumber:function(){return r()(o.a.mark((function e(){var t;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,pl.countQuestDisabled();case 2:return t=e.sent,e.abrupt("return",t.data.questCount);case 4:case"end":return e.stop()}}),e)})))()},onRequestAll:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0;case 1:case"end":return t.stop()}}),t)})))()},onRequest:function(e){var t=this;return r()(o.a.mark((function a(){var s,n,r,i,l,c,u,d;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.pagination,r=n.page,i=n.rowsPerPage,t.loading=!0,a.next=4,t.getDisabledQuestNumber();case 4:return l=a.sent,t.pagination.rowsNumber=l,c=0===i?t.pagination.rowsNumber:i,u=r,a.next=10,t.loadDisabledQuest(u,c);case 10:d=a.sent,(s=t.items).splice.apply(s,[0,t.items.length].concat(hc()(d))),t.pagination.page=r,t.pagination.rowsPerPage=i,t.loading=!1;case 15:case"end":return a.stop()}}),a)})))()},openDeleteDialog:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pas de titre";this.deleteQ.questId=e,this.deleteQ.version=t,this.deleteQ.title=a,this.$refs.adminDeleteDialog.show()},cancelDeleteDialog:function(){this.$refs.adminDeleteDialog.hide(),this.deleteQ.questId=null,this.deleteQ.version=null,this.deleteQ.title=null},confirmDeleteQuest:function(){var e=this;return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("delete quest : "+e.deleteQ.questId+" - version : "+e.deleteQ.version),t.next=3,pl.deleteFolder(e.deleteQ.questId);case 3:return a=t.sent,console.log(a),200===a.status?Jt(e.$t("label.DeleteQuestAndFolder"),"positive"):(console.error(a),Jt(e.$t("label.TechnicalProblem"),"negative")),e.$refs.adminDeleteDialog.hide(),e.deleteQ.questId=null,e.deleteQ.version=null,e.deleteQ.title=null,t.next=12,e.onRequest({pagination:e.pagination});case 12:case"end":return t.stop()}}),t)})))()}}},fc=gc,bc=Object(tt["a"])(fc,dc,pc,!1,null,"c8ef10fa",null),vc=bc.exports,yc={components:{validateQuestPanel:fl,rejectedQuestPanel:xl,earningQuestPanel:Tl,needToPayQuestPanel:zl,missingCreditsPanel:Ll,statisticQuestPanel:Gl,statisticYearQuestPanel:Zl,statisticMonthQuestPanel:oc,limitationQuestPanel:uc,disabledQuestPanel:vc},data:function(){return{adminTab:"validation"}}},wc=yc,qc=(a("f4ba"),Object(tt["a"])(wc,ll,cl,!1,null,null,null)),xc=qc.exports,Cc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[e.quest?a("div",{staticClass:"page-content top-padding-middle bg-white q-pa-md"},[a("p",[e._v("\n      Validation of the quest "),a("strong",[e._v(e._s(e.quest.title))])]),a("p",[a("q-input",{attrs:{type:"text",label:"Number of plays allowed"},model:{value:e.numberOfPlaysAllowed,callback:function(t){e.numberOfPlaysAllowed=t},expression:"numberOfPlaysAllowed"}}),e._v("\n      9999 = Shared revenues game / 99999 = No limit\n    ")],1),a("p",[a("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),a("p",[a("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),a("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the\n      quest is rejected\n    ")])]):e._e()])},Sc=[],kc={data:function(){return{quest:{},numberOfPlaysAllowed:50,serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.questId,e.$route.params.version);case 2:case"end":return t.stop()}}),t)})))()},methods:{getQuest:function(e,t){var a=this;return r()(o.a.mark((function s(){var n;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ot.getByIdOnline(e,t);case 2:n=s.sent,a.quest=n.data,a.quest&&a.quest.limitations&&a.quest.limitations.plan&&(a.numberOfPlaysAllowed=a.quest.limitations.plan);case 5:case"end":return s.stop()}}),s)})))()},publish:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.publish(e.$route.params.questId,e.numberOfPlaysAllowed);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},reject:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.reject(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()}}},Pc=kc,_c=Object(tt["a"])(Pc,Cc,Sc,!1,null,null,null),Tc=_c.exports,Ic=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"page-content top-padding-middle"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[a("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),a("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),a("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),a("div",[a("q-icon",{attrs:{name:"explore"}}),a("p",[e._v("GPS location bottom left")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),a("div",[a("q-icon",{attrs:{name:"explore"}}),a("p",[e._v("GPS location top right")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,s){return a("div",{key:s},[a("q-icon",{attrs:{name:"place"}}),a("p",[e._v("Place")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"place.name"}})],1),a("div",{staticClass:"col"},[e.isIOs?e._e():a("div",[""===t.picture?a("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+s].click()}}}):e._e(),a("input",{ref:"placepicture"+s,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(s,t)}}})],1),e.isIOs?a("div",[a("q-icon",{attrs:{name:"cloud_upload"}}),a("input",{ref:"placepicture"+s,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(s,t)}}})],1):e._e(),""!==t.picture?a("div",[a("img",{staticStyle:{width:"50px"},attrs:{src:e.uploadUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),a("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"place.type"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(a){e.$set(t.location,"lng",a)},expression:"place.location.lng"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(a){e.$set(t.location,"lat",a)},expression:"place.location.lat"}})],1)])],1)})),a("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),a("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},Ac=[],$c={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:uu.isIOS(),serverUrl:"https://api.graaly.com",uploadUrl:"https://graaly-upload.s3-accelerate.amazonaws.com"}},mounted:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlace();case 1:case"end":return t.stop()}}),t)})))()},methods:{configureTown:function(){var e=this;return r()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pl.CreateTown(e.form.fields);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(e,t){var a=this;return r()(o.a.mark((function s(){var n,r,i;return o.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a.$q.loading.show(),n=t.target.files,n[0]){s.next=4;break}return s.abrupt("return");case 4:return r=new FormData,r.append("image",n[0]),s.next=8,pl.uploadPlaceImage(r);case 8:i=s.sent,i&&i.hasOwnProperty("data")&&(a.form.fields.places[e].picture=i.data.file,a.$q.loading.hide());case 10:case"end":return s.stop()}}),s)})))()}},validations:{form:{fields:{name:{required:fn["required"]},zipcode:{required:fn["required"]}}}}},Oc=$c,Mc=Object(tt["a"])(Oc,Ic,Ac,!1,null,null,null),zc=Mc.exports,Nc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-white"},[e._v("\n  HELLO\n  "),a("div",[a("pre",[e._v("      Gold: "+e._s(e._f("0")(e.goldCoins))+"\n\n      Product.state: "+e._s(e.myTransaction?e.myTransaction.state:"")+"\n             .title: "+e._s(e.myProduct?e.myProduct.title:"")+"\n             .descr: "+e._s(e.myProduct?e.myProduct.description:"")+"\n             .price: "+e._s(e.myProduct?e.myProduct.pricing.price:"")+"\n\n    ")]),e.myProduct&&e.myProduct.canPurchase?a("button",{on:{click:function(t){e.myProduct.getOffer().order()}}},[e._v("Purchase")]):e._e()])])},Rc=[],jc={data:function(){return{goldCoins:0,myTransaction:!1,myProduct:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=CdvPurchase,t=e.store,a=(e.ProductType,e.Platform);console.log("test1"),this.refreshUI(),console.log("test2"),t.register([{type:CdvPurchase.CONSUMABLE,id:"premiumprice5",platform:a.GOOGLE_PLAY}]),console.log("test3"),t.when().productUpdated(this.refreshUI).approved(this.finishPurchase),console.log("test4"),t.initialize([a.GOOGLE_PLAY]),console.log("test5")},methods:{finishPurchase:function(e){console.log("test6"),this.goldCoins=this.goldCoins+10,console.log("test7"),e.finish(),console.log("test8"),this.refreshUI(),console.log("test9")},refreshUI:function(){var e=CdvPurchase,t=e.store,a=(e.ProductType,e.Platform);console.log("test10"),this.myProduct=t.get("premiumprice5",a.GOOGLE_PLAY),console.log("test11"),this.myTransaction=t.findInLocalReceipts(this.myProduct),console.log("test12")}}},Dc=jc,Fc=Object(tt["a"])(Dc,Nc,Rc,!1,null,null,null),Lc=Fc.exports,Ec=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper background-login"},[a("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),a("div",{staticClass:"login-form q-pa-md"},[a("create-profil-stepper"),a("div",{staticClass:"centered q-mt-lg q-mb-lg"},[a("a",{on:{click:function(t){return e.goToSignIn()}}},[e._v(e._s(e.$t("label.IAlreadyHaveAnAccount")))])])],1)])])},Qc=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"centered"},[a("img",{staticClass:"login-logo-top",attrs:{src:"statics/new/logo-color-white.png"}})])}],Bc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-form",{ref:"form",on:{submit:e.createNewUser}},[a("q-input",{staticClass:"q-pb-lg",attrs:{outlined:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourName")}],"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("q-input",{staticClass:"q-pb-lg",attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourEmailAddress")},function(t){return e.$v.form.email.email||e.$t("label.PleaseEnterAValidEmailAddress")},e.emailRules]},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("q-input",{staticClass:"q-pb-lg",attrs:{outlined:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourPassword")},function(t){return t&&t.length>=8||e.$t("label.YourPasswordMustBe8digitsLength")},function(t){return e.checkPasswordComplexity(t)||e.$t("label.PasswordComplexityRule")}],"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),a("q-select",{attrs:{outlined:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"","test-id":"sex"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}),a("q-select",{attrs:{outlined:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"","test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}),a("q-select",{attrs:{outlined:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"","test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}),a("q-input",{attrs:{outlined:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",rules:[function(t){return t&&t.length>0||e.$t("label.PleaseEnterYourZipCode")}],"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{dark:"","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),a("div",{staticClass:"col secondary-font-small text-white"},[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.termsOk?e._e():a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])])])]),a("div",{staticClass:"row q-mb-lg"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{dark:"","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),a("div",{staticClass:"col secondary-font-small text-white"},[a("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.termsOk?e._e():a("div",{staticClass:"q-field-bottom"},[a("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])])])]),a("text-btn-square",{attrs:{icon:"done",color:"primary",title:"Create",submit:""}})],1)],1)},Uc=[],Yc={name:"createProfilStepper",components:{textBtnSquare:ht["a"],iconBtnSquare:mt},data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,formDisabled:!0,countries:"fr"===this.$i18n.locale?vr:"es"===this.$i18n.locale?wr:yr,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],isBadMail:!0,termsOk:!0}},mounted:function(){uu.clearAllRunningProcesses()},methods:{emailRules:function(){var e=this;return new Promise(function(){var t=r()(o.a.mark((function t(a,s){var n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkUserIsExisting(e.form.email);case 2:n=t.sent,n&&n.status&&("active"===n.status?(Jt(e.$t("label.EmailAlreadyUsed"),"error"),e.isBadMail=!0,a(e.$t("label.RejectedEmail"))):"blocked"===n.status?(Jt(e.$t("label.YourAccountIsBlocked"),"warning"),e.isBadMail=!0,a(e.$t("label.RejectedEmail"))):(e.isBadMail=!1,a(!0)));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},createNewUser:function(){var e=this;return r()(o.a.mark((function t(){var a,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.terms&&e.form.privacy){t.next=3;break}return e.termsOk=!1,t.abrupt("return",!1);case 3:return a={name:e.form.name,email:e.form.email,sex:e.form.sex,age:e.form.age,password:e.form.password,zipcode:e.form.zipCode,country:e.form.country,language:e.$i18n.locale},t.next=6,Be.createAccount(a);case 6:s=t.sent,s.status&&200===s.status&&s.data&&s.data.user?(window.localStorage.setItem("jwt",s.data.user.jwt),Fe.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),e.openHome()):Jt(e.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return t.stop()}}),t)})))()},checkPasswordComplexity:function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},openHome:function(){var e="/home";this.$route&&this.$route.query&&this.$route.query.hasOwnProperty("redirect")&&this.$route.query.redirect&&(e=this.$route.query.redirect),this.$router.push(e)},checkUserIsExisting:function(e){return r()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Be.checkEmail(e);case 2:if(a=t.sent,!(a&&a.data&&a.data.hasOwnProperty("existing")&&!0===a.data.existing)){t.next=7;break}return t.abrupt("return",{status:a.data.status});case 7:if(!(a&&a.data&&a.data.hasOwnProperty("existing")&&!1===a.data.existing)){t.next=11;break}return t.abrupt("return",{status:"missing"});case 11:return t.abrupt("return",{error:"technical issue"});case 12:case"end":return t.stop()}}),t)})))()}},validations:{form:{email:{required:fn["required"],email:fn["email"]},name:{required:fn["required"]},country:{required:fn["required"]},zipCode:{required:fn["required"]},age:{required:fn["required"]},terms:{sameAs:Object(fn["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(fn["sameAs"])((function(){return!0}))},password:{required:fn["required"],minLength:Object(fn["minLength"])(8)}}}},Gc=Yc,Hc=Object(tt["a"])(Gc,Bc,Uc,!1,null,"01de0034",null),Wc=Hc.exports,Vc={components:{createProfilStepper:Wc},methods:{goToSignIn:function(){this.$router.push("/user/login")}}},Jc=Vc,Kc=(a("f5dc"),Object(tt["a"])(Jc,Ec,Qc,!1,null,"c46faacc",null)),Zc=Kc.exports,Xc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background-error"},[a("div",{staticClass:"absolute-center text-center",staticStyle:{"max-width":"450px"}},[a("q-icon",{attrs:{name:"warning",size:"100px",color:"negative"}}),"upgraderequired"===e.errorType&&e.isHybrid?a("h4",{staticClass:"centered"},[e._v("\n      "+e._s(e.$t("label.UpgradeRequired"))+"\n    ")]):e._e(),"upgraderequired"!==e.errorType||e.isHybrid?e._e():a("h4",{staticClass:"centered"},[e._v("\n      "+e._s(e.$t("label.RefreshCacheRequired"))+"\n    ")]),null===e.errorType?a("h4",[e._v("\n      "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n    ")]):e._e(),null!==e.errorMessage?a("p",[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]):e._e(),null===e.errorType?a("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()],1)])},eu=[],tu={data:function(){return{errorMessage:null,errorType:null,isHybrid:window.cordova}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},au=tu,su=(a("2c1a"),Object(tt["a"])(au,Xc,eu,!1,null,"610d612b",null)),ou=su.exports,nu=[{path:"/",component:st,children:[{path:"",name:"none",redirect:"/home",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",redirect:"/user/login",meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang",name:"teamplayold",component:It.TEAM_PLAY?It.TEAM_PLAY:wn,meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang/:option/:teamId",name:"teamplay",component:It.TEAM_PLAY?It.TEAM_PLAY:wn,meta:{requiresAuth:!1}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:It.QUEST_PLAY_HOME?It.QUEST_PLAY_HOME:Ss,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})/:qrcode",name:"playhomewithcode",component:Ss,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:It.QUEST_PLAY_STEP?It.QUEST_PLAY_STEP:Ho,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:It.QUEST_PLAY_END?It.QUEST_PLAY_END:mn,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:Pn,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:ar,meta:{requiresAuth:!0}},{path:"user/createAccount/:step",name:"signup",component:Zc,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:It.LOGIN_PAGE?It.LOGIN_PAGE:cr,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:gr,meta:{requiresAuth:!0}},{path:"user/:id/badges",name:"badges",component:$i,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:ou,meta:{requiresAuth:!1}}]},{path:"/",component:Tt,children:[{path:"home",name:"home",component:It.HOME?It.HOME:Ca,meta:{requiresAuth:!0}},{path:"search/:type/:subtype",name:"search",component:il,meta:{requiresAuth:!0}},{path:"profile/:id",name:"profile",component:tl,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"updateprofile",component:Sr,meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:On,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:xc,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:Tc,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:zc,meta:{requiresAuth:!0}},{path:"map",name:"map",component:Ra,meta:{requiresAuth:!0}},{path:"scanCode",name:"scanCode",component:Va,meta:{requiresAuth:!1}},{path:"user/:id/quests/:type",name:"quests",component:Rr,meta:{requiresAuth:!0}},{path:"user/:id/friends",name:"friends",component:yi,meta:{requiresAuth:!0}},{path:"user/ranking/:type/:subtype",name:"ranking",component:Ar,meta:{requiresAuth:!0}},{path:"testpayment",name:"testpayment",component:Lc,meta:{requiresAuth:!0}}]},{path:"*",component:function(){return a.e(2).then(a.bind(null,"ee5d"))}}];i["a"].use(Je["a"]);var ru=new Je["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:nu}),iu=ru,lu=a("3452"),cu={notificationsArr:[],handleError:function(e){Ve.dispatch("setErrorMessage",e),iu.push("/error")},buildOptionsForSelect:function(e,t,a){var s=[];return e.forEach((function(e){s.push({value:e[t.valueField],label:a("label."+e[t.labelField])})})),s},getById:function(e,t){for(var a=0;a<e.length;a++)if(e[a].id===t)return e[a];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,a,s){var o=6371,n=cu.degreesToRadians(a-e),r=cu.degreesToRadians(s-t);e=cu.degreesToRadians(e),a=cu.degreesToRadians(a);var i=Math.sin(n/2)*Math.sin(n/2)+Math.sin(r/2)*Math.sin(r/2)*Math.cos(e)*Math.cos(a),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return o*l},bearingBetweenEarthCoordinates:function(e,t,a,s){var o=cu.degreesToRadians(s-t),n=cu.degreesToRadians(e),r=cu.degreesToRadians(a),i=Math.sin(o)*Math.cos(r),l=Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(o),c=cu.radiansToDegrees(Math.atan2(i,l));return(c+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),a={a:"[]",ae:"",c:"",e:"[]",i:"[]",n:"",o:"[]",oe:"",u:"[]",y:"[]"};for(var s in a)t=t.replace(new RegExp(a[s],"g"),s);return t},shuffle:function(e){var t,a,s;for(s=e.length-1;s>0;s--)t=Math.floor(Math.random()*(s+1)),a=e[s],e[s]=e[t],e[t]=a;return e},buildIncrementalArray:function(e){for(var t=[],a=1;a<=e;a++)t.push(a);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var a=setTimeout(e,t);return Ve.dispatch("addTimeoutId",a),a})),clearAllTimeouts:function(){var e=!0,t=!1,a=void 0;try{for(var s,o=Ve.state.runningTimeoutsIds[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var n=s.value;clearTimeout(n)}}catch(r){t=!0,a=r}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}Ve.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var a=setInterval(e,t);return Ve.dispatch("addIntervalId",a),a})),clearAllIntervals:function(){var e=!0,t=!1,a=void 0;try{for(var s,o=Ve.state.runningIntervalIds[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var n=s.value;clearInterval(n)}}catch(r){t=!0,a=r}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}Ve.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},getDurationFromNow:function(e,t){var a=new Date(e),s=new Date,o=s.getTime()-a.getTime();return t&&"all"!==t?"m"===t?o/6e4:void 0:{h:parseInt(o/36e5%24),m:parseInt(o/6e4%60)}},getFullDate:function(e){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==ze()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e["isActiveClone"]=null,t[a]=this.clone(e[a]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,a){var s=t?1e3:1024,o=a("label.byteCharacter");if(Math.abs(e)<s)return e+" "+o;var n=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],r=-1;n=n.map((function(e){return e+o}));do{e/=s,++r}while(Math.abs(e)>=s&&r<n.length-1);return e.toFixed(1)+" "+n[r]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<16;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},initFileStorage:function(e,t,a){return new Promise((function(s,o){window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,0,(function(o){e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:a,exclusive:!1},(function(e){s(e)}),(function(){s(!1)}))}),(function(){s(!1)})):o.root.getFile(t,{create:a,exclusive:!1},(function(e){s(e)}),(function(){s(!1)}))}),(function(){s(!1)}))}))},checkIfFileExists:function(e,t,a){return new Promise((function(s,o){window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,0,(function(o){e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:a,exclusive:!1},(function(e){s(!0)}),(function(){s(!1)}))}),(function(){s(!1)})):o.root.getFile(t,{create:a,exclusive:!1},(function(e){s(!0)}),(function(){s(!1)}))}),(function(){s(!1)}))}))},writeInFile:function(e,t,a,s){var o=this;return new Promise((function(n,r){window.cordova||n(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:s,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){n(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),n(!1)},a||(a=new Blob(["some file data"],{type:"text/plain"}));var t=o.gcrypt(a,"Gr44lyCryp7");e.write(t)}))}),(function(){n(!1)}))}),(function(){n(!1)})):r.root.getFile(t,{create:s,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){n(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),n(!1)},a||(a=new Blob(["some file data"],{type:"text/plain"}));var t=o.gcrypt(a,"Gr44lyCryp7");e.write(t)}))}),(function(){n(!1)}))}),(function(){n(!1)}))}))},readFile:function(e,t){var a=this;return new Promise((function(s,o){t||s(!1),window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,0,(function(o){o||s(!1),e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||s(!1),e.file((function(e){e||s(!1);var t=new FileReader;t.onloadend=function(){var e=a.gcrypt(this.result,"Gr44lyCryp7",!0);s(e)},t.readAsText(e)}),(function(){s(!1)}))}),(function(){s(!1)}))}),(function(){s(!1)})):o.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||s(!1),e.file((function(e){e||s(!1);var t=new FileReader;t.onloadend=function(){var e=a.gcrypt(this.result,"Gr44lyCryp7",!0);s(e)},t.readAsText(e)}),(function(){s(!1)}))}),(function(){s(!1)}))}),(function(){s(!1)}))}))},saveBinaryFile:function(e,t,a){return new Promise((function(s,o){window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(o){var n=new XMLHttpRequest;n.open("GET",t+a,!0),t.includes("https://api.graaly.com")||n.setRequestHeader("Cache-Control","no-cache"),n.responseType="blob",n.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(a,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),s(!1)},e.write(t)}))}),(function(){s(!1)}))}),(function(){s(!1)})):o.root.getFile(a,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){s(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),s(!1)},e.write(t)}))}),(function(){s(!1)}))}else s(!1)},n.send()}),(function(){s(!1)}))}))},readBinaryFile:function(e,t){var a=this;return new Promise((function(s,o){t||s(!1),window.cordova||s(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(o){o||s(!1),e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||s(!1),e.file((function(e){e||s(!1);var o=new FileReader;o.onloadend=function(){var e=a.getMimeType(t),o=new Blob([new Uint8Array(this.result)],{type:e});s(window.URL.createObjectURL(o))},o.readAsArrayBuffer(e)}),(function(){s(!1)}))}),(function(){s(!1)}))}),(function(){s(!1)})):o.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||s(!1),e.file((function(e){e||s(!1);var o=new FileReader;o.onloadend=function(){var e=a.getMimeType(t),o=new Blob([new Uint8Array(this.result)],{type:e});s(window.URL.createObjectURL(o))},o.readAsArrayBuffer(e)}),(function(){s(!1)}))}),(function(){s(!1)}))}),(function(){s(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,a){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(a){a||t(!1),a.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",a=e.substr(-4);switch(a){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,a){return a?lu["AES"].decrypt(e,t).toString(lu["enc"].Utf8):lu["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},openExternalLink:function(e){window.cordova?navigator.app.loadUrl(e,{openExternal:!0}):window.open(e,"_blank")},removeUnusedUrl:function(e){if(-1!==e.indexOf("gc=")){var t=e.indexOf("gc=");return e.substring(t+3)}return e},loadImage:function(e){return new Promise((function(t,a){var s=new Image;s.onload=function(){t(s)},s.onerror=a,s.src=e}))},isIOS:function(){return window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId},isSafari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},requestDeviceMotionPermission:function(){return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceMotionEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},requestDeviceOrientationPermission:function(){return r()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceOrientationEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},stringToBytes:function(e){for(var t=new Uint8Array(e.length),a=0,s=e.length;a<s;a++)t[a]=e.charCodeAt(a);return t.buffer},bytesToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},replaceStringAt:function(e,t,a){return e.substr(0,t)+a+e.substr(t+a.length)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},timeStringToSeconds:function(e){var t=e.split("h"),a=t[1].split("m"),s=a[1].split("s"),o=3600*t[0],n=60*a[0],r=1*s[0],i=o+n+r;return i},secondsToTimeString:function(e){var t=Math.floor(e/3600);e%=3600;var a=Math.floor(e/60),s=e%60;return t+"h"+a+"m"+s+"s"},map:function(e,t,a,s,o){return(e-t)*(o-s)/(a-t)+s},compareVersions:function(e,t){for(var a,s=/(\.0+)+$/,o=e.replace(s,"").split("."),n=t.replace(s,"").split("."),r=Math.min(o.length,n.length),i=0;i<r;i++)if(a=parseInt(o[i],10)-parseInt(n[i],10),a)return a;return o.length-n.length},downloadDataUrl:function(e,t){return new Promise((function(a,s){try{var o=document.createElement("a");document.body.appendChild(o),o.style="display: none",o.href=e,o.download=t,o.click(),window.URL.revokeObjectURL(e),a()}catch(n){s(n)}}))},orderCharactersOfString:function(e){return e.split("").sort().join("")}},uu=cu,du={name:"App",data:function(){return{isIOs:uu.isIOS(),isSafari:uu.isSafari()}}},pu=du,mu=Object(tt["a"])(pu,$e,Oe,!1,null,null,null),hu=mu.exports,gu=function(){return fu.apply(this,arguments)};function fu(){return fu=r()(o.a.mark((function e(){var t,a,s;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Ve){e.next=6;break}return e.next=3,Ve({Vue:i["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Ve;case 7:if(t=e.t0,"function"!==typeof iu){e.next=14;break}return e.next=11,iu({Vue:i["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=iu;case 15:return a=e.t1,t.$router=a,s={router:a,store:t,render:function(e){return e(hu)}},s.el="#q-app",e.abrupt("return",{app:s,store:t,router:a});case 20:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}var bu=a("9483");Object(bu["a"])("service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var vu,yu=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(Bo.a.locale(t),e)return Bo()(String(e)).fromNow()}))},wu=a("a925"),qu=a("3013"),xu=a.n(qu),Cu=function(e){var t=e.app,a=e.Vue;a.use(wu["a"]),t.i18n=new wu["a"]({locale:"fr",messages:xu.a}),vu=t.i18n},Su=a("9224"),ku=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=r()(o.a.mark((function e(t,a,s){var n,r,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=13;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Ve.state.user||(Ve.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,points:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),s(),e.next=11;break;case 7:return e.next=9,Be.getAccount();case 9:n=e.sent,n&&n.data&&n.data.name?(r=Su.version,n.data.clientSupportedVersion&&uu.compareVersions(n.data.clientSupportedVersion,r)>0?s({path:"/error/upgraderequired"}):(Ve.state.user=n.data,s())):Ve.state.user?n&&n.status&&200!==n.status?(401===n.status?Jt(vu.t("label.SessionExpired"),"error"):Jt(vu.t("label.AuthCheckError"),"error"),s({path:"/user/login",query:"/"===a.path?null:{redirect:t.fullPath}})):s():(i=je["get"]("firstusage"),i&&"ok"===i?s({path:"/user/login",query:"/"===a.path?null:{redirect:t.fullPath}}):(je["set"]("firstusage","ok",{expires:36500,secure:!0}),s({path:"/firstusage"})));case 11:e.next=14;break;case 13:s();case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("Error in RouterAuthentication:",e.t0),s();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a,s){return e.apply(this,arguments)}}())},Pu=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var a=e.hash.split("/");"quest"===a[1]&&a.length>2&&"play"===a[2]&&(a.length>4?t.push("/quest/play/"+a[3]+"/"+a[4]):t.push("/quest/play/"+a[3]))}}))}}),!1)},_u=function(e){var t=e.Vue;t.use(Oa,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},Tu=a("1dce"),Iu=a.n(Tu),Au=function(e){var t=e.Vue;t.use(Iu.a)};function $u(){return Ou.apply(this,arguments)}function Ou(){return Ou=r()(o.a.mark((function e(){var t,a,s,n,r,l,c,u,d;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,gu();case 2:t=e.sent,a=t.app,s=t.store,n=t.router,r=!0,l=function(e){r=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[yu,ku,Pu,_u,Cu,Au,It],d=0;case 11:if(!(!0===r&&d<u.length)){e.next=29;break}if("function"===typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:a,router:n,store:s,Vue:i["a"],ssrContext:null,redirect:l,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==r){e.next=31;break}return e.abrupt("return");case 31:new i["a"](a);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),Ou.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&a.e(0).then(a.t.bind(null,"a0db",7)),$u()},3:function(e,t){},3013:function(e,t){var a="https://graaly.com",s="sales@graaly.com",o={privacy:{en:a+"/privacy-policy/",fr:a+"/fr/confidentialite/"},terms:{en:a+"/terms/",fr:a+"/fr/cgu/"}};e.exports={en:{color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White",gray:"Gray",pink:"Pink",purple:"Purple",orange:"Orange",yellow:"Yellow",brown:"Brown"},news:{newQuestWon:"Has won the game <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the game <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your game <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on game <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the games you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in games during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video & text",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Geolocation",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",ImageOverFlow:"superimpose image and camera / Souvenir photo",ImageOverFlowDesc:"superimpose transparent image and camera flow",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Scan a QR Code",LocateMarkerDesc:"Player has to find a QR code.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"Redirection / End of chapter",EndOfChapterDesc:"This transition send player to a new chapter",TriggerEvent:"Graaly -> your material",TriggerEventDesc:"Graaly physical a physical action (using an electronic board)",WaitForEvent:"Your material -> Graaly",WaitForEventDesc:"A physical action activate a step (using an electronic card)",HelpStep:"Help page",HelpStepDesc:"How to use Graaly, presentation of the buttons for the players.",PortraitRobot:"Composite picture",PortraitRobotDesc:"Create suspect face based on face items",PhoneCall:"Phone call",PhoneCallDesc:"Launch a phone call to a defined number",Binocular:"Binoculars",BinocularDesc:"Search in a picture using binoculars",IncrementCounter:"Increment counter",IncrementCounterDesc:"Increment a counter that you can use for your steps trigger"},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French",es:"Spanish"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected",new:"new",used:"used",reused:"used twice",rereused:"used 3 times"},story:{hint:"Hint: <br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!"},iotObjects:{keypad:"Keypad",joystick:"Joystick",distance:"Distance",pot:"Potentiometers",lcd:"LCD display",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Chest",button:"Button",relay:"Relay"},days:{day0:"Sunday",day1:"Monday",day2:"Tuesday",day3:"Wednesday",day4:"Thursday",day5:"Friday",day6:"Saturday"},snapshot:{share:"share",save:"save",shareTitle:"Share with friends",fileDownload:"Cette image a t tlcharge",notSupported:"This function is not supported with this device",imageSavedToGallery:"This image is saved in your photo gallery",imageSavedFailed:"Something went wrong while saving your photo"},samples:{sample1:"Simple linear treasure hunt",sample2:"Escape game with QR codes to flash",sample3:"Advanced escape game"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",RejectedEmail:"This email address is already in use and/or blocked",CreateAccount:"Create an account",AccountInfo:"Information",ModifyAccount:"Modify your account",ValidateAccount:"Validation",ErrorAccount:"Please complete all fields with a *",AccountCreated:"Your account was created",AccountModified:"Your account has been changed",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How your personal data is used",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",BackToMap:"Back",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the games near your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (It can takes up to 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error has occured, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again oin one hour",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be at least 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",PasswordChangeSuccess:"Your password has been changed",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you are using Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful games",QuestsCreated:"Created games",CreateANewQuest:"Create a new game",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No game created",NoQuestPlayed:"No game played",NoQuestPlayedLong:"No game played. To play a game, return to the home page!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",MyProfile:"My profile",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to ?",ReachScoreOf:"Reach a score of {score} to unlock new games",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play",ContinueTheQuest:"Continue the game",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",km:"km",NoQuestForThisSearch:"No game for this search",NoPlayerForThisSearch:"No player for this search",NoDesignerForThisSearch:"No designer for this search",WhyDontYouCreateAQuest:"Why don't you create a game?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",InventoryZoom:"Touch an objet to zoom",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this game",YouAlreadyStartThisQuest:"You have already played this game, do you want to continue where you last left it?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",Hints:"Hints",CreateYourQuest:"New game",CreateYourPrivateQuest:"Create your private game!",CreateYourPublicQuest:"Create your public game!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</p><p>The story of your game must not undermine living or dead people</li><li>Your game must concern a location where no game has already be done, except if the content is different enough.</li><li>Your game must have more than 6 steps. We advise you to have less than 70 steps</li><li>Our moderation team will check if your game respects these rules, and if the quality level is enough. If not, you will be asked to improve your game, or your game will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 30 invitees (for more, please contact us)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 200 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny game to challenge players and win points!",BuilderProIntro:"Create your game on Graaly",BuilderChooseUserType:"Are you:",BuilderAddRoomMessage:"<p>By adding your room, you can benefit from services for free: <ul><li>Visibility in our directory</li><li>Statistics</li><li>Link to your reservation page</li><li>Suggestion of your room to our community</li></ul></p><p>Your customers can benefit also from free services: <ul><li>Find your rooms around them</li><li>Follow escape games played by their friends and challenge them on your rooms</li><li>Save their results and win points to challenge their friends</li></ul></p>",AProfessional:"professional",AProfessionalDesc1:"As a professional, you can use advanced Graaly features (statistics, advanced customization, monetization, easy start QR code ...).",AnIndividual:"individual",AnIndividualDesc1:"As an individual, you can also create public and private games, with all Graaly features you need. You are limited to 30 players.",TryForFree:"Test for free",FromPrice:"From",PaymentOnUsage:"Pay as you go",NewQuest:"New game",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the game",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",Spanish:"Spanish",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your game is published",YourQuestIsUnpublished:"Your game is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your game",PublishYourQuest:"Publish your game",UnpublishYourQuest:"Unpublish your game",SelectedLanguage:"I create my game in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Game",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload an image",AddABackgroundImage:"Add a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of what should be found",UploadTheObjectToFind:"Upload the GLB file of the 3D object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step without testing",SaveAndTestThisStep:"Save and test this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Wrong answer. You have {nb} tries left",SecondTryOnTry:"Wrong answer. You can have one more try",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your game",AddYourChapters:"Create a first chapter and add first steps of your game inside",ActivateTheLanguageVisible:"Activate the languages playable for your game",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your game",LanguagesPublished:"Publish game in",LanguagesPublishedForPrivate:"Publish game for invitees (or with QR code below)",PageLanguagesPublished:"Publish page in",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave the game",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you points. Are you sure to use it?",YouWin:"You have won",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review it",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this game in the past",ResolveOtherQuestsToWinPoints:"Play new games to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have no friend yet",YourRanking:"Your ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this game?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",LocationToFind:"Location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the games of a city to win all the rewards",NoRankingYet:"Your rank is not yet calculated, it id calculated once a day",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your game is now read only. Your game will be validated by our game master. This can take a few days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email explaning why",QuestPublicationRejected:"Your game has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"You found it! Touch it now!",ObjectSize:"Object size",TouchDistance:"Object can be touched nearer than...",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the game",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step.",YourQuestMustContainAtLeast6Steps:"Your game is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your game is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Your battery is low, please consider charging it",WarningNoNetwork:"Waiting for network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the game element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this game",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this game? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type the email address of the editor you want to invite",InviteInviteesHelp:"Type the email address of the person you want to invite",UserIsNotAGraalyUser:"No more invitee allowed or this person need to create a Graaly account.",EditorIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text",NewHint:"Next hint","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a game",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",FriendsAdded:"You follow this person now",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove this friend ?",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"Create your profile!",WeNeedMoreInformationAboutYouDesc:"It's simple and it unlocks nice features",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",ConfirmDeleteAccount:"Confirm account deletion",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",CreateMyAccount:"Create my account",IAlreadyHaveAnAccount:"I already have an account",Reviews:"Reviews",CommentThisQuest:"Comments for game author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the game before sending your review",QuestNotReviewed:"This game has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery game",contactUsPro:'You can find our professional services on <a href="'.concat(a,'" target="_blank">').concat(a,'</a> or contact us at <a href="mailto:').concat(s,'">').concat(s,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",NetwordkErrorReloadPage:"Network issue! We will try to reload page in 15 seconds.",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again from the start",BackToQuest:"Back to the game",min:"min",pts:"pts",SportQuest:"Nature game",DiscoveryQuest:"Discovery game",CulturalQuest:"Cultural game",ChildQuest:"Children's game",TransportQuest:"Game by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night game",ExtremQuest:"Extreme game",CulinarQuest:"Culinary game",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, it will still be avaible in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before the text appear above the background image (in seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this game (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your gender",PleaseSelectYourAge:"Please select your age range",RankingIntro:"Here are the best players for this game",CloseQuestRanking:"Back to the game",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to the end of the game",NoFriendsLong:"You do not follow people yet",IAgreeTheTermsAndConditions:'I agree with the <a class="text-primary" href="javascript:(navigator.app ? navigator.app.loadUrl(\''.concat(o.terms.en,"', { openExternal: true }) : window.open('").concat(o.terms.en,"'))\">terms & conditions</a>"),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:'I agree with the <a class="text-primary" href="javascript:(navigator.app ? navigator.app.loadUrl(\''.concat(o.privacy.en,"', { openExternal: true }) : window.open('").concat(o.privacy.en,"'))\">privacy policy</a>"),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(o.terms.en,"', { openExternal: true }) : window.open('").concat(o.terms.en,"'))\">Terms & conditions</a>"),PrivacyPolicyLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(o.privacy.en,"', { openExternal: true }) : window.open('").concat(o.privacy.en,"'))\">Privacy policy</a>"),DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",StepRandom:"(BETA) Randomly after",StepCounter:"(BETA) Counter has the value",StepCounterGreater:"(BETA) Counter is greater than ",StepCounterLower:"(BETA) Counter is lower than ",StepCombineObject:"(BETA) Object combined ",StepHaveObject:"(BETA) Object is in inventory ",StepNotHaveObject:"(BETA) Object is not in inventory ",StepAnswerNb:"(BETA) Answer Nb to the question",StepChapterTimerOver:"(BETA) chapter timer is over",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have an 'End of chapter' step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the 'introduction step' of a chapter can have no triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe the following step has been removed, or you created circular conditions)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues in your game",IssuesInYourStep:"Issues in your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a QR code, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occured.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this game. If your game is already published, players will play the published version, until you will publish this new game version.",ClickHereToCreateANewQuestVersion:"To edit your game, click here",YourUnderValidationQuests:"currently reviewed",YourRejectedQuests:"Your rejected",YourDraftQuests:"Your drafts",YourPublishedQuests:"Your published",QuestDraftVersion:"Non published version of the game",PageDraftVersion:"Non published page",PrivateQuest:"Private game",PublicQuest:"Public game",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your game, do you want to add it?",Results:"Results",Result:"Result",ClosePrivateQuest:"Close the game",ClosePrivateQuestDesc:"After clicking here, your game will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this game? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this game",NoPlayersYetForThisQuest:"No player yet for this game",PrivateQuestDesc1:"Your game is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a game to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your game will be visible and playable by every body",PublicProQuestDesc1:"Your game is playable by all Graaly players. As such, we are more demanding on the quality of the game at the time of its publication (visuals, sounds, characters, puzzles, ...).",PublicProQuestDesc2:"<p>If your game is not free, you can either use the in-app payment, or manage the payment your self</p><p>For the in-app payment, Google/Apple take 30% of the revenues</p><p>In all cases, Graaly takes 30% of the revenues</p><p>The rest is for you, so from 40% to 70% of the net revenues.</p><p>Graaly will send you money monthly</p><p>If your game is free for the end users, Graaly will charge you monthly 0,25  (excl. taxes) per player</p><p>You can disable your game when you want</p><p>Please contact us at contact@graaly.com for more details</p>",PrivateProQuestDesc1:"You invite your players via a generic QR code, or a single-use QR code per participant.",CreatePrivateQuest:"Create a private game",BuyPrivateQuest:"Buy a private game",OnlyBuyableOnMobile:"Only buyable on mobile",AcceptAndBuyAPrivateQuest:"Accept and buy a private game",CreatePublicQuest:"Create a public game",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this game",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your game is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Game type",helpQuestType:"A chain of clues game is a list of enigmas that follows each other. A game is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first game, we advise you to start with a chain of clues game. You can change a chain of clues game in a game, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Game files",YouDoNotUseAnyMediaYetInYourQuest:"You do not use any media yet in your game",Feedback:"Your feedback",Back:"Back",FeedbackTitle:"Send feedback",FeedbackIntroduction:"To send feedback to this game author, or rate this game, please wait for the end of the game. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your game builder",OrDownloadAFile:"Or download your own picture",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your game...",ErrorOfflineSaving:"Technical issue, you can not play this game without a network connection",QuestNeedNetwork:"You need network to launch this game. Activate your device network, and click on the button when you have network to launch the game",ReloadQuest:"Reload game",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Loading ...",Loading:"Loading ...",YouAreOfflineNoQuestsAvailable:"Sorry, we could not find any game playable offline.",ButtonsColor:"Buttons bar color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",byteCharacter:"B",AvailableTomorrow:"Available tomorrow",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You already follow this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not follow more than 150 people",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this game without a network connection.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro game",MovePremium:"Move this game to pro mode",PremiumDefinition1:"Give your game more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized game to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable game</u>: you can sell your game to players</li><li>You can access the statistics of your game</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, have a look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your game to premium mode (look at your game settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of game played",NumberOfPlayersYesterday:"Yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by gender",AverageScore:"Average score",AverageDuration:"Average duration (min)",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro games",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro game(s) more",YouCanNotCreateNewQuests:"Yon can not create new pro games. Subscribe to our professional offers on <a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(a,"', { openExternal: true }) : window.open('").concat(a,"'))\">").concat(a,'</a> or by email at  <a href="mailto:').concat(s,'">').concat(s,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Paying:"Paying",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of game on a mobile device",QuestPlayableOnMobile:"This game is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Game loading failed. You can play the game online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the game. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a game",SuggestANewQuest:"Suggest a new game",YouLikedThisQuest:"You liked this game?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested games to contact the responsible of this place. You will be warned if a game is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Game has been updated",PleaseRestartQuest:"Please restart the game from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code",ScanQRCode:"Scan a QR Code",MarkersToPrint:"Game's QR Codes",MarkersToStartQuest:"Players can start your game by scanning this QR code on the login page",SaveQuestResultsMarker:"Your player can scan a QR Code to save their score with Graaly (scan it on login page or home page). For the players who exited the room in time:<br /><img src='{url3}' /><br />For players who were close to exit the room in time:<br /><img src='{url2}' /><br />For players that did not exit the room<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other games around",UnknowUploadError:"An error occured. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screen. Depending on the screen sizes, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your game. This will motivate them to play your game. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",CreateYourAccountMsg:"Create your account to save your score and play with your friends!",MaybeLater:"Maybe later!",LetsPlay:"Play",NewAccount:"New account",PleaseAcceptDeviceMotionPermissionRequest:"Please allow the application to detect the motion of your device, in order to play this part of the game",PleaseAcceptDeviceOrientationPermissionRequest:"Please allow the application to detect the orientation of your device, in order to play this part of the game",DoYouWantToCreateAnAccount:"To build a game, you need to create an account. Do you agree to create your account?",UserWithSameEmailAlreadyExisting:"An account already exists with this email address",PasswordTooWeak:"Your password must be more complex (8 caracters and a capital leter and one digit)",AreYouSureYouWantToPublishThisQuest:"Are you sure you want to ask for publishing? You will not be allowed to make changes until Graaly team validate your request",YourCharacter:"Custom character",AddACustomCharacter:"Add a character",helpQuestCharacter:"This character will show up when a player ask for a hint or a Read More message",AvailableColors:"Available colors",TypeColorCode:"Type color code. Ex: #ff55cc",TypeColorCodeName:"Type the color name. Ex: Red",AddNewColor:"Add a new color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>You are far from this game</b>.<br />By solving this game afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this game</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are editor of this game, you will not win any point, and you will not play it with offline mode",GeneralWarning:"<b>For your safety</b>, do not play the game driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",RemoveScoringAndRating:"Replace end screen by a text",TypeEndMessage:"Text replacing the scoring and rating final screen",TypeEndMessageForPerfectScore:"Customized text if user has all answers right",ThanksForPlaying:"Thanks for playing this game. See you later with new games!",EnlargePictureToFullWidth:"Enlarge the picture to full screen",EnlargePictureToFullHeight:"Enlarge the picture to full height",PlayerCanTakeSnapshot:"Player can take pictures",SnapshotTaken:"Screenshot saved on your mobile",SnapshotTakenIssue:"Error with the automatic screenshot. You can make a manual screenshot.",NbTrials:"Trials number",UserCanPass:"Player can pass this step",Welcome:"Welcome!",SignIn:"Sign-in",Subscribe:"Subscribe",EmailAlreadyUsed:"This email address is already used. Please sign-in or ask to modify your password",AroundYou:"Close to you",SeeMore:"See more",AllQuests:"All your games",SearchForStart:"Use search to get started",Designers:"Designers",Difficulty1:"Easy",Difficulty2:"Normal",Difficulty3:"Hard",ClosestQuestToYou:"The game closest to you",YouAreNearThisQuest:"You are close to this game",YouAreInvitedToThisQuest:"You are invited to this game",CreatedByGraaly:"Cres avec Graaly",FriendsQuests:"Played by friends",ScoreAndBadges:"Score & badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"With this game, you can win:",ScoreRange:"Between {min} and {max} points",InProgressPreparation:"Preparation in progress",Warnings:"Warnings",Follow:"Follow",Followed:"Followed",SolvedQuests:"Solved games",Creations:"Creations",CreationStudio:"Creation studio",Badges:"Badges",FollowYourFriends:"Follow your friends",CreatedYourFirstQuest:"Create your first game",DoNotFollowAnymore:"Stop following",AllTheseDataAreOptional:"These informations are not mandatory:",DataCountry:"Your country: used to display the relevant games for you",DataZipcode:"Your zip code: used to display the relevant games for you",DataSex:"Your sex: used to display the relevant games for you",DataAge:"Your age: used to hide games not adapted to your age",DataPhone:"Your phone number: used to connect you with your friends",EscapeGame:"Game",EscapeGames:"Your Games",Players:"Players",YouHaveReachAScore:"You have reached {score} points",LevelReached:"Level reached!",PointsToReachLevel:"{score} points to reach",Friends:"Friends",World:"World",MyCountry:"My country",MyCity:"My city",NoRanking:"No ranking yet",Invitations:"Invitations",YouFollowThem:"You follow",AddYourRoomInTheDirectory:"Add your room in the directory",AddYourRoom:"Add your room",ProAddYourRoom:"You can add you rooms and benefit from many free services",YourRoom:"Your room",PriceFrom:"Price per player from",ReadMoreLink:"Link to the booking page",SmallPicture:"Small picture",SeeYourQuestPage:"Preview the page",FromPricePerPlayer:"From {price} per player or game",Book:"Book",YourBadges:"Your badges",YouDoNotHaveBadgesYet:"You do not have badges yet. To win badges, you need to play games with rewards.",FollowedPeople:"Followed people",WeNeedYourPositionForThisFeature:"We need your position for this feature",OtherCharacters:"Other characters",BackToTheMap:"Home",or:"or",RefreshCacheRequired:"The application cached on your browser is too old. Please use private navigation to update your cached files",FindFriendManually:"Find friends manually",NoQuestAroundYou:"We did not find games close to you",CachedQuests:"Already loaded",YourPresentation:"Introduce yourself",DuplicateThisQuest:"Clone this game",DoYouWantToOpenClonedQuest:"Do you want to edit the duplicated game now?",OpenTheMap:"games map",ReplacePictureByRedFilter:"Replace picture by red filter",TotalNumberOfPlaysNotFinished:"Number of games in progress",RoomDataWarning:"Some information can be obsolete, do not hesitate to look at the escape game web site for more information",AnonymousUser:"Anonymous user",NotWon:"To be won",OnTopGames:"Featured games",ThisStepOnlyWorkOnMobile:"The QR code scan only works on the mobile app",YourQuestHasNotBeenPublished:"Your game is not published",OnDesktopDisplayMessage:"On computer, you need to reduce your the size of your browser window.",EventCode:"Event code",BoardMacAddress:"Board Mac address",SuccessMessage:"Success message",YourTime:"Your time",LimitNumberOfPlayerInOneHour:"Limit the number of players by hour (0 = unlimited)",TooMuchUsersCurrently:"Too much users are playing currently",OrSelectAnImageInTheList:"Or pick a picture in the list",IotObject:"IoT object",Protocol:"Protocol",SuccessRange:"Success range",SuccessRanges:"Success ranges",WriteTextWarning:"Accents and capital letters are not necessary",DistanceToWin:"Player wins when he is closer to the GPS location than (m)",SplitMessageWithPipe:"Add pipes '|' if you want to split your text in several bubbles",ClickHere:"Click here",FollowTheCreator:"Follow the creator",PlayersNumber:"(BETA) Number of smartphone to play",helpQuestMultiplayer:"This define the minimum number of players to play the game. Each player will have his phone, and should have specific missions in the game. For more information about multiplayer, please watch our Youtube tutorials",ThisIsAMultiplayerGame:"This game is multiplayer",JoinATeam:"Join a team",ScanTheLeaderQRCode:"Scan the leader QR Code",CreateATeam:"Create a new team",TeamName:"Team name",CreateTeam:"Create the team",OtherPlayersMustScanThisQRCode:"Other players must scan this QR Code to join your team",ThisIsNotATeamQRCodeValid:"This code is not valid! You must scan a code displayed on the mobile of the person who create the team",MyTeamIsCompleteLetsGo:"Team has scanned, let's go!",YouNeedMoreMembersToPlay:"You need {nb} members to start this game. Current member(s): {members}",Team:"Team",WaitingForOtherUsersActions:"Waiting for other players",WaitingForOtherUsersActionsDesc:"You can not go forward until other players solve their puzzles",Player:"Player",All:"All",YouNeedToBeXPlayers:"You need to be at least {nb} to play",YouNeedAtLeastXEditorsToTest:"You need at least {nb} ditors to test this multiplayer game (see Publish tab)",HereAreTheTesters:"This is a multiplayer game. It will be tester by: {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Display of your picture on diffent screen sizes",MyPictureIsNotDisplayedWell:"The display is not correct",MyPictureIsNotDisplayedWellDesc:"<b>If your picture is not correct for all sizes</b>: You need to have a picture with 900 pixels width and 1200 pixels height.<br /><b>If your picture is not correct with the smaller size</b>: You need to add a not useful border of 100px. You can add a black border of 100 pixels to your picture for example",RestartQuest:"Restart game",AreYouSureToRestartThisQuest:"Are you sure to restart this game? You will not gain any point by restarting.",PaymentOnMobile:"Payment on mobile",PaymentOnMobileHelp:"The payment is really simple for players, in one touch. Meanwhile, the Apple / Google stores will take 15% of the revenues.",PaymentOnYourSide:"Payment managed by you",PaymentOnYourSideHelp:"You can manage the payment in your store. The players will need a single usage QR code that you will generate in the Payment tab that will appear in this page",Payments:"Payments",CreateNewQRCodeForPlay:"Create a new unique QR Code for a player",Create10NewQRCodeForPlay:"Create 10 new unique QR Codes",Create50NewQRCodeForPlay:"Create 50 new unique QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Are you sure to remove this code? If you have sent this code to a player, he will not be able to play any more!",BuyThisQuest:"Buy this game",YouHaveReceivedAQrCodeFrom:"You have received a QR code from {author}",ScanTheUniqueQRCode:"Scan the single use QR code",BuyInOneClick:"Buy in one clic",TechnicalIssueOrCodeAlreadyUsed:"This QR code is already used by another account. Please sign-in or contact the creator of this game to have a new code.",ChangeTheBackgroundImageOnceClicked:"Change background picture when player has clicked",Message:"Message",Frequency:"Frequency",TriggerTheEvent:"Trigger the event",SearchingBluetoothDevice:"Searching Bluetooth device...",KeypadInput:"Keypad input",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Open",ChestActions:"Chest actions",TriggerMode:"Triggering mode",TriggerModeAuto:"Auto (at step loading)",TriggerModeManual:"Manual (player must touch a button)",helpPlayer:"For each step of a multiplayer game, you need to select the player who will see the step. Other players will not see it, and will have a waiting message until the player solve the enigma. You can display a transition step for all player, but an enigma can only be display for one player. If you need an enigma to be solved by all users, you need to create a step for each player. For more information, please watch our Youtube tutos.",ErrorMessageForNewTeamMember:"Technical issue or number of players reached",YouNeedToUnpublishYourQuestToRemoveIt:"You need to unpublish your game to remove it",PleaseEnterYourTeamName:"Please enter your team name",Version:"Version",CountDownLabel:"Time limit for this step",CountDownIsActive:"Activate the time limit",CountDownWarning:"Are you sure you want to activate the timer ? Make sure that there are no risks for the player, like a road to cross!",CountDownPopupfail:"Time is up !",MaxScore:"Max score",YouMustTestThisStepOnMobile:"You must test this step on a mobile device",AreasNumber:"Number of areas to find",ItRemains:"It remains",s:"s",LetsPlayWithoutAccount:"Play without account",ErrorDownloadNeedsToRestart:"Error while downloading. Please check your internet connexion and restart loading!",StartCreation:"Start creation?",ErrorTakingSnapshot:"Snapshot has not been taken",YourAudioFile:"Your background music",AddAnAudioFile:"Add a background music",ObjectNeedToBeAppliedOnPicture:"The object is applied on a picture area",ReadNext:"READ MORE",AlreadyPaied:"Purchased",HelpStepMessageInventory:"Display Inventory button help",HelpStepMessageHint:"Display Hint button help",HelpStepMessagePrevious:"Display Previous button help",HelpStepMessageNext:"Display Next button help",HelpStepMessage:"Welcome to this game!\n\nTo participate, just follow the indications on screen.",HelpStepMessageInventoryMessage:"With the suitcase, you can access and use the objects won during the game.",HelpStepMessageHintMessage:"With the light bulb, you can access the hints.",HelpStepMessagePreviousMessage:"Press the back button to move back to the previous step.",HelpStepMessageNextMessage:"Press the next button to move to the next step.",HelpStepMessageEnd:"If any problem, do not hesitate to close the application, you will restart to the latest step you played.",KenBurnsEffect:"Zoom out effect on picture",Show:"Show",Hide:"Hide",TotalSellings:"Game sells",RevenuesPayedFloor:"Revenues payed when over 50",QRCodeMessage:"Message displayed when user needs to scan a QR code (escape game mode)",GeolocationMessage:"Message displayed when user to find several geolocalized places (escape game mode)",TeamID:"Team ID",PleaseFillThisForm:"Please fill this field",Zoom:"Zoom",ScheduleGame:"Schedule the game",GameSchedule:"Game schedule",Reset:"Reset",SchedulingDescription:"The game is playable :",From:"From",To:"To",QuestIsNotPlayableNow:"The game is not playable now",OpeningHours:"Opening hours",CreationStudioHelp:"<h3>Help</h3>We propose you several resources to help you using the creation studio:<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Builder guide (fr)</a></li><li>Some <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>video tutorials (fr)</a> to build steps of your game</li></ul><div class='text-accent'>New ! Join the <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>Graaly game designer Facebook group</a> to ask your questions to other game designers and to Graaly developers!</div><br />To test your game, we advise you to:<ul><li>test on your phone with the Graaly app</li><li>test on your web browser <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>developer mode</a> (to make it short, click on f12 key, and on the tablet icon). Warning: some steps are not working on this mode (Augmented reality, geolocation, QR code flashing, superimpose image and camera)</li></ul>",TestWithSimulatorWarning:"You will test with the simulator. Some step types are not working on it. For a real test, please use the Graaly mobile application",FontFamily:"Font used for texts",ExportTexts:"Game's texts",Downloads:"Downloads",ForcePlayerToHaveAccount:"Force player to create a Graaly account",ForcePlayerToHaveAccountHelp:"If not activated, users can play your game without creating an account",ShareUserDataWithCreator:"Ask player to share his data with you",ShareUserDataWithCreatorHelp:"A user that plays Graaly accept to share his data with Graaly. You can ask players to share the data with you also. To motivate them, we advise you to make them win something (organize a draw, give a voucher, ...)",YouNeedToCreateYourAccountToPlay:"You need to create your account to play this game",ShareDataWithPartner:"Share your data with the game creator",PartnerAskForYouData:"The creator of this game want to access your data (email address, name). The reason can be to organize a draw, or a competition, or to give you a voucher. Please read the game description for more information",UseHtmlInDescription:"Use HTML tags in the question",DoNotDisplay:"Do not display",AddAnGPSLocation:"Add a GPS location",BuildThePortraitRobot:"Build the picture to find",Education:"Education",EducationDesc:"We do not have an education plan yet, but you can use the professional mode and contact us at contact@graaly.com.",Call:"Call",BlurEffect:"Blur effect",CheckpointReached:"You have reached a checkpoint! The map now shows the next target's position.",DefaultMode:"Default display mode",CompassMode:"Classic",CompassModeHelp:"Shows a direction arrow and the remaining distance to reach the target",MapMode:"Map",MapModeHelp:"Shows a Google map with player & target positions",AllowToSwitchGeolocationMode:"Button to switch display mode",ApplyRedFilter:"Apply red filter",Chapters:"Chapters",Chapter:"Chapter",ChapterChangeWarning:"Changing the chapter will remove his triggers and create inconsistencies in triggers. You will need to update the steps that depend on it.",ResetHistoryAfter:"Prevent back button after this step",RestartChapterAfterStep:"Restart chapter after this step",HideInventory:"Do not use inventory",ShowCountDown:"Display countdown timer",StopGameAfterCountDown:"Stop game when time ends",ItRemainsMinutes:"It remains {time} minutes",CustomizeEndOfGame:"Customize the end of the game",CustomizeGameInterface:"Customize game interface",GameAvailability:"Game availability",GamePayment:"Game payment",UserData:"User data",CustomizeGameIntroduction:"Customize game presentation",RemoveGPSLocation:"Remove this location",OverQuotaMessage:"You reach the file storage limit",RemoveFiles:"Remove files",InvalidTeamID:"Invalid team ID",HideFullScreen:"Do not display full screen (Android)",YourFullName:"Your full name",TextColor:"Text color",GoodAnswersNumber:"Right answers",PleaseEnterFirstNameAndLastName:"Please type your first name and last name",PassTheQRCodeInFrontOfYourCamera:"Pass the QR code in front of your camera",HideHideButton:"Hide show/hide button",PleaseHoldYourDeviceFlat:"Please hold your device flat",MyLocationWarning:"Current GPS coordinates are not accurate enough. To get the GPS position, please use Google Maps (by clicking on a location, a popup is displayed with latitude and longitude), the 'My GPS position' app on Android or iPhone.",FindAllLocationsToStartSteps:"Move and find each location!",ColorIndicatorExplaination:"You are {distance}m from the nearest place",YouWonNewGame:"Congratulations! You unlocked a new game!",WarningLowGpsAccuracy:"Warning: low GPS accuracy",PersistentLowGpsAccuracyPleaseSkipStep:"GPS accuracy is still too low after one minute. We advise to skip this step (bottom right button).",LocationSaved:"Current location set as goal position.",CurrentLocation:"Current GPS location",Accuracy:"Accuracy",Meters:"meters",secondes:"seconde(s)",ScanA:"Scan a code",OnceADay:"Once a day",UserCanReplayGame:"User can play again",CustomizeYourName:"Customize the author's name",YouCanNotPlayAgainThisGame:"You can not play again this game",YouCanNotPlayAgainThisGameToday:"You can play again tomorrow",CustomizeRightAnswerMessage:"Custom right answer message",CustomizeWrongAnswerMessage:"Custom wrong answer message",RotateVideo:"Rotate the video 90",UploadSucessful:"Upload successful",RemoveObjectFromInventoryAfterUse:"Remove object from inventory after use",ModifyTheHint:"Modify the hint",AddAGameSnapshot:"Add a game snapshot",Snapshots:"Snapshot(s)",CounterValue:"Counter value",CharacterBarColor:"Color of the bar below the character",HideMake8Animation:"Hide animation if GPS is weak",HideEnlargeMessage:"Hide button to enlarge thumbs",CustomizedMemoryCardColor:"Customized color for the cards",HidePuzzleNotWorkingMessage:"Hide button when puzzle is not working",SnapshotManualOnIOs:"To make a screenshot on iPhone/iPad, press the side button and the volume up button at the same time",MovePictureWithFingerForbinocular:"Move the binoculars with your finger to observe the whole picture",MovePictureWithFingerForflashlight:"Move the light with your finger to observe the whole picture",MovePictureWithFingerForkeyhole:"Move the key hole with your finger to observe the whole picture",InvalidCondition:"Invalid trigger, please remove",WrongLocationMessage:"Message when user click wrong location",MoveToNextStepAutomatically:"Move to next step automatically",Duplicate:"Duplicate",PleaseWaitLoadingAndGPSInit:"PLEASE WAIT, DATA AND GPS INITIALIZATION",MoveToNextStepAutomaticallyDuration:"Seconds before moving to next step",UseAModel:"I use a model",AddToInventoryAndPass:"Add in inventory without showing this step",holdVerticaly:"For the best experience with augmented reality, please hold your phone upright.",startScan:"Start Scan",noSensorFound:"No sensors found on your device",noSensorNext:"You can go directly to the next step by clicking on the arrow at the bottom right",UniqueUsageQRCodeWarning:"Please note that this code can not be used with another Graaly account. To use it on another device, you need to use the same Graaly account.",arDialogTitle:"Authorization",arDialogMessage:"To continue, please authorize the application to use features of your device",qrCodeAlreadyScan:"You have already tried this QR Code",qrCodeAlreadyGood:"You have already scanned the correct QR Code, go to the next step",Audio:"Audio",TeamPlay:"Team game",TypeTeamPlayId:"Type the game ID if you received one.",OrderIsNotImportant:"Picture order is not important",DoNotPreventUserForHint:"Do not display a warning message when user call a hint",DeleteQuestAndFolder:"Quest And Files are delete",TextTooLongForStep:"Your text is too long and could impact readability on small screens. We recommend {nb} characters for this kind of step. Do you still want to save ?",FirstAndLastName:"Your first and last name",IconForSuccess:"Icon displayed on success",SelectThisIcon:"Select this icon",NoIcon:"No icon",CustomizeRightAnswerColor:"Customize right answer message color",CustomizeWrongAnswerColor:"Customize wrong answer message color",Binoculars:"Binoculars",FlashLight:"Flashlight",KeyHole:"Key hole",Shape:"Shape",DataHaveBeenRemoved:"Data have been removed",Private:"Private",WarningInvitees:"The invitees will be able to play when your game will be published",RemoveOfflineData:"Remove offline games data",DisplayTime:"Display time",DisplayGoodAnswers:"Display number of good answers",FaceCamera:"Front camera",BackCamera:"Back camera",CameraUsed:"Camera used",Error404:"Page not found",ThreeLetterMin:"3 letters minimum",NotPublishedGames:"Not Published Games",EarningsGames:"Reanings Games",AwaitingGames:"Games awaiting validation",RejectedGames:"Rejected Games",StatisticGames:"Games Statistics",LimitationGames:"Games with limitation",FindNothing:"I didn't find anything for you",AdminDelete:"Delete",AdminName:"Quest Name",AdminAuthor:"Author",AdminAccess:"Access",AdminPremium:"Premium",AdminMail:"Email",AdminRunCount:"Run Count",AdminSize:"Total Size",AdminLastUpdate:"Last Update",AdminPrice:"Price",AdminNotPrice:"Not Price",AdminQRCodeUsed:"QRCode used",AdminEarning:"Earnings",AdminPlayLimit:"Played/Limit",AdminRemainingCredit:"Remaining credit",AdminPlayedWeekly:"Played Weekly",AdminPlayedMonthly:"Played Monthly",AdminRating:"Rating",AdminPlay:"Play",AdminValid:"Validate",EstimateTime:"Estimated time",RedirectToNextChapter:"Redirect to next chapter",RedirectToChapter:"Redirect to chapter",ObjectCombined:"Object combined",CombineItems:"Combiner the items",MyGameIsIndoorRemoveWarningsOnStart:"My game is indoor without any risks, remove warnings on startup",YouCanOnlyUseThisFeatureInNewItemStep:"You can use this feature only in New Object steps",YourCharacterOnMap:"Character on the interactive map",AddACustomCharacterOnMap:"Add a character on the map",helpQuestCharacterOnMap:"This customize the marker that show the user position on the interactive map",UploadTheLocatorPicture:"Upload a picture for the map",ObjectInInventory:"Object is in inventory",ObjectNotInInventory:"Object is not in inventory",ResetChapterProgression:"Reset progression for this chapter",GeolocationCouldNotBeRetrieved:"Unknown player location",GeolocationIsDeniedPleaseSkipThisStep:"This part of the game requires your geographical location, but it seems that you denied access to your location to the app. Therefore, this step cannot be shown. Please use the right arrow button to play the next step.",HidePaiement:"Hide the price (communicated to players outside of Graaly)",QRCodeAlreadyUsed:"This QR code is already used by another account. Please sign-in or contact the creator of this game to have a new code.",GeolocationIssuePleaseSkipThisStep:"This part of the game requires your geographical location, but Graaly could not retrieve it, either due to a permission issue or an accuracy issue. Please ensure that you have allowed Graaly application to access to your location (by checking your device settings) and that your GPS is enabled and calibrated (to calibrate, move your device in a figure-8 motion a few times). Currently, this game step cannot be shown. Please use the right arrow button to play the next step.",PrintQRCodePages:"Print QR Codes",AnswerNumber:"Number of the answer",QRCodeIsNotStartingOne:"This is not the right QR code. Look for the QR code to start the game!",QRCodeIsNotPlayingOne:"This is not the right QR code",Loading2:"Loading",Configuration:"Settings",Video:"Video",UserCanNotQuit:"Players can not quit game",CharacterSize:"Picture size (% of screen size)? 60% by default.",HideUserProgressionOnEnd:"Hide user progression bar",HideAuthorOnEnd:"Hide author",HideObjectCombination:"Hide option to combine objects in inventory",ShakingEffect:"Shaking effect",HelpStepMessageCombinate:"Display the object combination help",HelpStepMessageCombinateMessage:"In the inventory, you can combine objects with this button",OrderHaveNotToBeRespected:"Order has not to be respected",PaymentOnYourSideWarning:"Warning: by activating this option, you can not use the QR code of the Publish tab. You need to create a QR code by player in the Payment tab. If you want to use a single QR code for all players, you can create a private game and do not activate this option.",MoveLeft:"Move left",MoveRight:"Move right",OrSelectACharacter:"Or select a character",AddAnotherCharacter:"Add an other scene",ChangeCharacter:"Changer the character",UploadImageBelowButton:"Display an image below the button",UpdateClones:"Update cloned steps",ModifyTheChapterTimer:"Set the chapter countdown in minutes (0 = no timer)",YourChapterHasTimerButNoCountDonwTimerCondition:"You have set a timer for this chapter but not created a step with a condition for the end of the timer",seconds:"second(s)",DisplayFirstImageAsDefault:"Do not display first picture as defaut one",DoNotUserGeolocation:"Disable geolocation",qrCodeUsageDescription:"You must print a one-time use QR code for each player in the Payment tab that will appear. This QR code will be valid:",QRCodeValidOneTime:"Only once (or 2 if players need to restart the game on another phone)",QRCodeValidOneDay:"As many times as desired for 1 day (from the first scan of the QR code)",NumberOfOngoingPlay:"Number of games in progress",ChooseYourLanguage:"Choose the language",hideSoundPause:"Hide audio player pause button",InvalidQuest:"This game does not exist, has not yet been published or has been deactivated.",creationOfQRCodes:"QR codes creation",UserLanguageNotTheOneOfTheGame:"This is not the language of your Graaly account. Would you like to change the language of your account?",PublishInAllLanguages:"Publish in all languages",SelectLanguageForPublishing:"Choose the language to publish",AskToPublish:"Ask for publication",QRCodeValidOneMonth:"As many times as desired for 1 month (from the first scan of the QR code)",NumberOfRemainingPlay:"Number of games remaining",NumberOfAllowedPlay:"Number of games allowed",ContactUsForMorePlays:"Please contact us to increase the number of games allowed.",Credits:"Credits (available games)",CreditsBought:"Credits bought",CreditsOffered:"Credits Offered",CreditsUsed:"Credits used",CreditsRemaining:"Credits remaining",CreditsToPay:"Credits to pay"}},es:{color:{red:"Rojo",green:"Verde",blue:"Azul",black:"Negro",white:"Blanco",gray:"Gris",pink:"Rosa",purple:"Morado",orange:"Naranja",yellow:"Amarillo",brown:"Marrn"},news:{newQuestWon:"Ha ganado la partida <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Ha creado el juego <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Su juego <a href='/#/quest/play/{questId}'>{quest}</a> se publicar en breve",challenge:"Ha sido desafiado en el juego <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Puntuacin x 2",scorex2Desc:"La puntuacin de las partidas que ejecute durante los 3 das siguientes se duplica",rewardx2:"Energa x 2",rewardx2Desc:"La energa que gane durante los prximos 3 das se duplica",infinitehint:"Pistas ilimitadas",infinitehintDesc:"Tiene pistas ilimitadas en los juegos durante 1 da","100coins":"+100 de energa","100coinsDesc":"Gana +100 de energa extra","10coins":"+10 de energa","10coinsDesc":"Gana +10 de energa extra"},stepType:{ImageAndText:"Imagen y texto",ImageAndTextDesc:"Una imagen de fondo y algo de texto",Video:"Vdeo y texto",VideoDesc:"Un vdeo",NewObject:"Nuevo objeto",NewObjectDesc:"Aadir un nuevo objeto en el inventario",FindALocation:"Geolocalizacin",FindALocationDesc:"Dirija a los jugadores a un lugar",ChoiceQuestion:"Preguntas de opcin mltiple",ChoiceQuestionDesc:"Compruebe la respuesta correcta en una lista de textos o imgenes",TextQuestion:"Respuesta textual",TextQuestionDesc:"Preguntar y solicitar una respuesta textual",FindTheCode:"Cdigo del teclado",FindTheCodeDesc:"El jugador tiene que encontrar un cdigo",FindTheColorCode:"Cdigo de colores",FindTheColorCodeDesc:"El jugador tiene que encontrar el cdigo de color",FindTheImageCode:"Cdigo con imgenes",FindTheImageCodeDesc:"El jugador tiene que encontrar el cdigo basndose en las imgenes",ImageOverFlow:"superponer imagen y cmara / Foto de recuerdo",ImageOverFlowDesc:"superponer imagen transparente y flujo de cmara",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Juegue a un rompecabezas basado en su foto",Memory:"Memoria",MemoryDesc:"Encuentre las imgenes similares",FindAnItem:"Buscar en una imagen",FindAnItemDesc:"El jugador tiene que tocar una parte de su imagen",UseAnItem:"Utilizar un elemento",UseAnItemDesc:"El jugador utiliza un objeto de su inventario en una parte de un cuadro",LocateItemAR:"Realidad aumentada",LocateItemARDesc:"El jugador tiene que encontrar un objeto geolocalizado, visible en su smartphone cuando est cerca.",LocateMarker:"Escanear un cdigo QR",LocateMarkerDesc:"El jugador tiene que encontrar un cdigo QR.",GraalyCharacter:"Carcter",GraalyCharacterDesc:"Hacer hablar a un personaje",EndOfChapter:"Redireccin / Fin de captulo",EndOfChapterDesc:"Esta transicin enva al jugador a un nuevo captulo",TriggerEvent:"Graaly -> su material",TriggerEventDesc:"Graaly fsica una accin fsica (utilizando un tablero electrnico)",WaitForEvent:"Su material -> Graaly",WaitForEventDesc:"Una accin fsica activa un paso (utilizando una tarjeta electrnica)",HelpStep:"Pgina de ayuda",HelpStepDesc:"Cmo utilizar Graaly, presentacin de los botones para los jugadores.",PortraitRobot:"Cuadro compuesto",PortraitRobotDesc:"Crear un rostro sospechoso basndose en los elementos del rostro",PhoneCall:"Llamada telefnica",PhoneCallDesc:"Lanzar una llamada telefnica a un nmero definido",Binocular:"Prismticos",BinocularDesc:"Buscar en una imagen con prismticos",IncrementCounter:"Contador de incrementos",IncrementCounterDesc:"Incrementa un contador que puede utilizar para su activador de pasos"},layersForMarkers:{Magnifier:"Lupa",CodeScanner:"Lector de cdigos"},language:{en:"Ingls",fr:"Francs",es:"Espaol"},status:{published:"publicado",draft:"borrador",old:"antiguo",tovalidate:"bajo validacin",unpublished:"indito",rejected:"rechazado",new:"nuevo",used:"usado",reused:"utilizado dos veces",rereused:"utilizado 3 veces"},story:{hint:"Pista: <br /><b>{pista}</b>",readMore:"{leerMs}",FindMarkerHelp:"Apunte al cdigo QR correcto con la cmara de su telfono. Buena suerte.",TouchObjectOnMarkerHelp:"Dirija la cmara de su telfono hacia el cdigo QR correcto. Un cdigo QR es una imagen cuadrada con puntos oscuros. Buena suerte."},iotObjects:{keypad:"Teclado",joystick:"Joystick",distance:"Distancia",pot:"Potencimetros",lcd:"Pantalla LCD",buzzer:"Zumbador",escapebox:"Caja de Escape",chest:"Pecho",button:"Botn",relay:"Rel"},days:{day0:"Domingo",day1:"Lunes",day2:"Martes",day3:"Mircoles",day4:"Jueves",day5:"Viernes",day6:"Sbado"},snapshot:{share:"compartir",save:"guardar",shareTitle:"Compartir con amigos",fileDownload:"Esta imagen ha sido descargada",notSupported:"Esta funcin no es compatible con este dispositivo",imageSavedToGallery:"Esta imagen se guarda en su galera de fotos",imageSavedFailed:"Algo ha ido mal al guardar su foto"},samples:{sample1:"Bsqueda del tesoro lineal y sencilla",sample2:"Juego de escape con cdigos QR para flashear",sample3:"Juego de escape avanzado"},label:{shortLang:"es",letsGo:"Vamos!",YourEmail:"Su correo electrnico",PleaseEnterYourEmailAddress:"Introduzca su direccin de correo electrnico",PleaseEnterAValidEmailAddress:"Introduzca una direccin de correo electrnico vlida",RejectedEmail:"Esta direccin de correo electrnico ya est en uso y/o bloqueada",CreateAccount:"Crear una cuenta",AccountInfo:"Informacin",ModifyAccount:"Modificar su cuenta",ValidateAccount:"Validacin",ErrorAccount:"Rellene todos los campos con *",AccountCreated:"Su cuenta ha sido creada",AccountModified:"Su cuenta ha sido modificada",orSignInWith:"O regstrese con",IncorrectLoginPleaseRetry:"Nombre de usuario o contrasea incorrectos, intntelo de nuevo!",ForgottenPassword:"Ha olvidado su contrasea?",YourPassword:"Su contrasea",tellUsAboutYou:"Hblenos de usted",HowWeUseYourData:"Cmo se utilizan sus datos personales",Male:"Hombre",Female:"Mujer",YourName:"Su nombre",YourSex:"Sexo",YourAge:"Edad",BackToMap:"Volver",PleaseEnterYourName:"Por favor, introduzca su nombre",YourCountry:"Su pas",PleaseSelectYourCountry:"Seleccione su pas",YourZipCode:"Su cdigo postal",PleaseEnterYourZipCode:"Por favor, introduzca su cdigo postal (se utiliza para listar los juegos cercanos a su ubicacin)",PleaseEnterYourPassword:"Por favor, introduzca su contrasea",EnterTheCodeYouReceivedByEmail:"Introduzca el cdigo que ha recibido por correo electrnico (Puede tardar hasta 5 minutos)",IncorrectCodePleaseRetry:"Cdigo incorrecto, por favor intntelo de nuevo",SignOutInProgress:"Firma de salida en curso ...",ErrorStandardMessage:"Se ha producido un error, por favor compruebe su red y pngase en contacto con el servicio de asistencia si el problema se repite.",YourAccountIsBlocked:"Su cuenta est bloqueada. Por favor, intntelo de nuevo en una hora",YourNewPassword:"Su nueva contrasea",NewCode:"Obtener un nuevo cdigo",ANewCodeHasBeenSent:"Se ha enviado un nuevo cdigo",YourPasswordMustBe8digitsLength:"Su contrasea debe tener al menos 8 dgitos",PasswordComplexityRule:"Su contrasea debe contener al menos 1 letra mayscula y 1 nmero",PasswordChangeSuccess:"Su contrasea ha sido modificada",YourAccountIsNowValidated:"Su cuenta ya est validada",IfYouUseGraalyForTheFirstTime:"Bienvenido a Graaly! Si es la primera vez que utiliza Graaly, le aconsejamos que siga el breve tutorial (5 min.)",YourScore:"Su puntuacin",YourRevenues:"Sus ingresos",QuestsSuccessful:"Juegos de xito",QuestsCreated:"Juegos creados",CreateANewQuest:"Crear un nuevo juego",PublishedSince:"Publique",Unpublished:"Sin publicar",NoQuestCreated:"No se ha creado ningn juego",NoQuestPlayed:"No se ha jugado",NoQuestPlayedLong:"No se ha jugado ninguna partida. Para jugar una partida, vuelva a la pgina de inicio!",PlayedOn:"Jugado",Succeeded:"Lo ha conseguido!",ContinueThisQuest:"No lo ha terminado. Continuar?",MyProfile:"Mi perfil",News:"Noticias",Edit:"Edite",EditYourInformations:"Editar mis informaciones",emailExample:"your.name@mailbox.com",Save:"Guarde",ChangeYourPassword:"Cambiar mi contrasea",CurrentPassword:"Contrasea actual",NewPassword:"Nueva contrasea",AccountModifiedLong:"Su cuenta ha sido modificada. Si ha modificado su direccin de correo electrnico, se ha enviado un nuevo mensaje para confirmar esta direccin.",SignOut:"Cierre de sesin",HowTo:"Cmo?",ReachScoreOf:"Alcanza una puntuacin de {score} para desbloquear nuevos juegos",MyLevel:"Mi nivel",Difficulty:"Dificultad",Normal:"Normal",Easy:"Fcil",Hard:"Duro",VeryHard:"Muy duro",Play:"Jugar",CouldNotRetrieveYourPosition:"Esta parte del juego requiere su localizacin, pero no ha podido ser recuperada.",PossibleReasons:"Posibles razones:",ClosedEnvironment:"Seal GPS dbil: trasldese a una zona abierta al aire libre",GeolocationDisabled:"La geolocalizacin est desactivada en su dispositivo",HowToActivateGeolocationOnChrome:"Vaya a <strong>Ajustes del sistema</strong>, luego en <strong>Seguridad y localizacin</strong>, despus <strong>Localizacin</strong>, y active la opcin <strong>Habilitada</strong>. Esto puede cambiar ligeramente dependiendo de su versin de Android.",HowToActivateGeolocationOnIOs:"Vaya a <strong>Configuracin</strong>, luego en <strong>Privacidad</strong>, despus <strong>Servicios de localizacin</strong>, y active la opcin <strong>Servicios de localizacin</strong> y compruebe que la localizacin est activada para la aplicacin Graaly en la lista que aparece a continuacin. Esto puede cambiar ligeramente dependiendo de su versin de IOS.",Author:"Autor",nbPointsToWin:"Gane {nb} puntos",SolveThisQuest:"Jugar",ContinueTheQuest:"Continuar el juego",Language:"Idioma",StartingPoint:"Ubicacin",Duration:"Duracin",minutes:"minuto(s)",Languages:"Idiomas",ScrollForMoreDetails:"Leer ms",km:"km",NoQuestForThisSearch:"No hay juego para esta bsqueda",NoPlayerForThisSearch:"Ningn jugador para esta bsqueda",NoDesignerForThisSearch:"No hay diseador para esta bsqueda",WhyDontYouCreateAQuest:"Por qu no crea un juego?",Inventory:"Inventario",InventoryUsage:"Toque un objeto para utilizarlo",InventoryZoom:"Toque un objeto para ampliarlo",noItemInInventory:"An no hay ningn artculo en su inventario",ContinueThisStep:"Continuar este juego",YouAlreadyStartThisQuest:"Ya ha jugado a este juego, quiere continuar donde lo dej por ltima vez?",Restart:"Reinicie",Continue:"Contine en",NoHintForThisStep:"No hay pistas para este paso",Hint:"Sugerencia",Hints:"Sugerencias",CreateYourQuest:"Nuevo juego",CreateYourPrivateQuest:"Cree su juego privado!",CreateYourPublicQuest:"Cree su juego pblico",andWin:"y ganar",Start:"Inicie",AcceptTheRules:"Acepte las normas",SomeMoney:"Algo de dinero",BuilderWelcomeMessage:"<p>Al pulsar el botn de inicio, usted acepta estas reglas:<ul><li>Esta aplicacin puede ser utilizada por jvenes, no debe contener referencias a violencia, sexo, horror, desnudos, drogas, alcohol, tabaco, ...</li><li>Si usted no es el propietario del lugar del juego, no pida a los jugadores que toquen, muevan o degraden las cosas.</p><p>La historia de su juego no debe menoscabar a personas vivas o muertas</li><li>Su juego debe referirse a un lugar en el que no se haya hecho ya ningn juego, excepto si el contenido es lo suficientemente diferente.</li><li>Su juego debe tener ms de 6 pasos. Le aconsejamos que tenga menos de 70 pasos</li><li>Nuestro equipo de moderacin comprobar si su juego respeta estas normas y si el nivel de calidad es suficiente. Si no es as, se le pedir que mejore su juego, o su juego ser rechazado</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>Al pulsar el botn de inicio, acepta estas reglas:<ul><li>Si no es el propietario del lugar de la partida, no pida a los jugadores que toquen, muevan o degraden las cosas.</li><li>La historia de su partida no debe menoscabar a personas vivas o muertas</li><li>Est limitado a 30 invitados (para ms, pngase en contacto con nosotros)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>Al pulsar el botn de inicio, acepta estas reglas:<ul><li>Si no es el propietario del lugar de la partida, no pida a los jugadores que toquen, muevan o degraden las cosas.</li><li>La historia de su partida no debe menoscabar a personas vivas o muertas</li><li>Est limitado a 200 invitados (para ms, pngase en contacto con nosotros)</li></ul></p>",BuilderIntro:"Graaly le ayuda a crear juegos divertidos para retar a los jugadores y ganar puntos!",BuilderProIntro:"Cree su juego en Graaly",BuilderChooseUserType:"Es usted:",BuilderAddRoomMessage:"<p>Al aadir su habitacin, podr beneficiarse de servicios de forma gratuita: <ul><li>Visibilidad en nuestro directorio</li><li>Estadsticas</li><li>Enlace a su pgina de reservas</li><li>Sugerencia de su sala a nuestra comunidad</li></ul></p><p>Sus clientes pueden beneficiarse tambin de servicios gratuitos: <ul><li>Encontrar sus habitaciones a su alrededor</li><li>Seguir los juegos de escape jugados por sus amigos y retarles en sus habitaciones</li><li>Guardar sus resultados y ganar puntos para retar a sus amigos</li></ul></p>",AProfessional:"profesional",AProfessionalDesc1:"Como profesional, podr utilizar las funciones avanzadas de Graaly (estadsticas, personalizacin avanzada, monetizacin, cdigo QR de inicio fcil...).",AnIndividual:"individual",AnIndividualDesc1:"Como particular, tambin puede crear partidas pblicas y privadas, con todas las funciones de Graaly que necesite. Est limitado a 30 jugadores.",TryForFree:"Pruebe gratis",FromPrice:"En",PaymentOnUsage:"Pague a medida que avanza",NewQuest:"Nuevo juego",Intro:"Introduccin",Steps:"Pasos",Publish:"Publique",Title:"Ttulo",PleaseEnterATitle:"Introduzca un ttulo",Category:"Categora",PleaseSelectACategory:"Seleccione una categora",Description:"Descripcin",StartingPointOfTheQuest:"Lugar de inicio de la partida",MainLanguage:"Lengua principal",UploadAPicture:"Subir una foto",YourPicture:"Su foto",Museum:"Museo",CityOrDistrict:"Ciudad o distrito",Countryside:"Campo",Other:"Otros",French:"Francs",English:"Ingls",Spanish:"Espaol",QuestSaved:"Sus modificaciones se guardan",YourQuestIsPublished:"Su juego se publica",YourQuestIsUnpublished:"Su juego es indito",DoYouWantToRemoveThisStep:"Realmente desea eliminar este paso?",AddAStep:"Aadir un paso",TestYourQuest:"Pruebe su juego",PublishYourQuest:"Publique su juego",UnpublishYourQuest:"Anule la publicacin de su juego",SelectedLanguage:"Creo mi juego en:",Close:"Cerrar",ChooseTheStepType:"Elija el tipo de paso",Transition:"Transicin",Quest:"Juego",UseThisGame:"Utilice esta plantilla",NoneImmediate:"Ninguno (inmediato)",NoneLocationAndDirection:"Ubicacin (y direccin)",DateTime:"Fecha / hora",NoneNextStep:"Ninguno (pasar al siguiente paso)",Medium:"Medio",Text:"Texto",Level:"Nivel",AnswerNb:"Respuesta {nb}",YouCantAddMoreThanNbAnswers:"No puede aadir ms de {nb} respuestas",YouMustDefineAtLeastNbAnswers:"Debe aadir al menos {nb} respuestas",KeepEnigmaQuestionsShort:"Por favor, mantenga su texto corto para que sea sencillo de leer. Si necesita ms espacio para el texto, le aconsejamos que aada un paso 'Imagen y texto' antes de ste.",CodeKeypadFormatError:"En este campo obligatorio, escriba entre 2 y 6 caracteres (slo dgitos y caracteres '*', '#').",StepSettingsFormError:"Por favor, revise el formulario e intente enviarlo de nuevo.",PleaseUploadAFile:"Por favor, cargue un archivo.",RequiredField:"Este campo es obligatorio.",Question:"Pregunta",UploadABackgroundImage:"Cargar una imagen",AddABackgroundImage:"Aadir una imagen de fondo",WarningImageResize:"La imagen se redimensionar con un tamao mvil (orientacin vertical)",UploadAVideo:"Cargar un vdeo",NoVideoUploaded:"Sin vdeo",Remove:"Elimine",remove:"elimine",DisplayDistanceBetweenUserAndLocation:"Mostrar la distancia entre el jugador y el lugar",DisplayDirectionArrow:"Mostrar la flecha de direccin",ResponseTypes:"Tipos de respuesta",PossibleAnswers:"Respuestas disponibles",Texts:"Textos",Pictures:"Fotos",SelectTheGoodAnswer:"Seleccione la respuesta correcta",NoPictureUploaded:"No se ha subido ninguna foto",AddAnAnswer:"Aadir una respuesta",ExpectedAnswer:"Respuesta esperada",Code:"Cdigo",ExpectedColorCodeAnswer:"Cdigo de color esperado:",ImagesUsedForCode:"Aada las imgenes utilizadas para el cdigo",AddAnImage:"Aadir una imagen",ExpectedCode:"Cdigo esperado",UploadThePictureOfTheObjectToFind:"Suba la foto de lo que debe encontrar",UploadTheObjectToFind:"Cargue el archivo GLB del objeto 3D",UploadedPicture:"Imagen subida",UploadThePuzzlePicture:"Suba la foto del puzzle",WarningImageSizeSquare:"Su imagen se recortar para que tenga la misma altura y anchura",YourPuzzlePicture:"Cuadro rompecabezas",ClickOnTheLocationTheItemMustBeUsed:"Seleccione la parte de la imagen en la que debe utilizarse el elemento",UploadTheItemPicture:"Cargue la foto de su artculo",YourItemPicture:"La foto de su artculo",ObjectName:"Nombre del artculo",ObjectToUse:"Objeto a utilizar",SelectedObject:"Artculo seleccionado",ClickOnTheItemThatIsToFind:"Seleccione la parte de la imagen que el jugador tiene que encontrar",StepSaved:"Paso guardado",TechnicalIssue:"Problema tcnico, vuelva a intentarlo ms tarde",TechnicalProblem:"Problema tcnico",SaveThisStep:"Guarde este paso sin probar",SaveAndTestThisStep:"Guarde y pruebe este paso",GraalyIsOptimizedForSmallerScreens:"La aplicacin est optimizada para dispositivos mviles. Por favor, utilice su mvil en vertical, o cambie el tamao de su pantalla",Overview:"Visin general",Submit:"Enviar",GoodAnswer:"Buena respuesta!",WrongAnswer:"Respuesta equivocada!",Next:"Siguiente",SecondTry:"Respuesta incorrecta. Le quedan {nb} intentos",SecondTryOnTry:"Respuesta incorrecta. Puede intentarlo una vez ms",Clear:"Claro",Confirm:"Confirme",WrongGoodCodeWas:"Incorrecto! El cdigo correcto era:",TheScreenCaptureWillAppearInThisBox:"La captura de pantalla aparecer en este cuadro",Cancel:"Cancelar",Check:"Compruebe",TakeThePicture:"Tome la foto",WellDone:"Bien hecho!",PhotosDoesntMatch:"Lamentablemente, las fotos no coinciden.",DistanceInMeters:"Distancia con el lugar a encontrar: {distancia} metros",YouHaveFoundThePlace:"Bien hecho! Lo ha encontrado",points:"puntos",Pass:"Saltar",YourAnswer:"Su respuesta",ConfirmTheAnswer:"Confirme la respuesta",PleaseSelectAnItemFirst:"Seleccione un objeto de su inventario (botn de la parte inferior izquierda) y pulse la imagen para utilizarlo.",UseItemNothingHappens:"No ocurre nada, por favor, intntelo en otro lugar o utilice otro objeto.",FindItemNothingHappens:"No ocurre nada, por favor, intntelo en otra ubicacin.",NoTitle:"Sin ttulo",AddYourSteps:"Cree un primer paso para su juego",AddYourChapters:"Cree un primer captulo y aada los primeros pasos de su juego en su interior",ActivateTheLanguageVisible:"Active los idiomas jugables para su juego",ActivateTheLanguageVisiblePrivate:"Active los idiomas para que sus invitados puedan jugar a su juego",LanguagesPublished:"Publicar juego en",LanguagesPublishedForPrivate:"Publique el juego para los invitados (o con el cdigo QR de abajo)",PageLanguagesPublished:"Publicar pgina en",ModifyThePicture:"Modificar la imagen",Picture:"Imagen",LeaveQuest:"Abandone el juego",YouHaveWinANewItem:"Ha encontrado un nuevo artculo",YouCanNotUseAnItemInThisStep:"No puede utilizar un artculo aqu",Ok:"Ok",ConfirmHint:"La pista le costar puntos. Est seguro de utilizarla?",YouWin:"Ha ganado",WhatCanYouDoWithThesePoints:"Qu puede hacer con estos puntos?",ReviewThisQuest:"Revselo",ShareYourSuccess:"Comparta su xito!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Usted ya gan los puntos de este juego en el pasado",ResolveOtherQuestsToWinPoints:"Juegue a nuevos juegos para ganar puntos",ChallengeYourFriends:"Desafe a sus amigos!",ConfirmPass:"Est seguro de saltarse este paso y no ganar ningn punto?",TouchWhereYouUseThisItem:"Toque donde utiliza este artculo",YourLanguage:"Su lengua",NoFriend:"An no tiene ningn amigo",YourRanking:"Su clasificacin",Ranking:"Clasificacin",Like:"Como",NoNews:"An no hay noticias",BuyCoinsToPlay:"Comprar energa para jugar",YourRatingHasNotBeenSaved:"Su valoracin no se ha guardado. Quiz ya ha valorado este juego?",YourRatingHasBeenSaved:"Su valoracin ha sido guardada",GetCloserToStartingPoint:"Acercarse al punto de partida",OpenLocationSettings:"Abrir los ajustes de ubicacin",LocationToFind:"Localizacin",Address:"Direccin",OrDefineGPSLocation:"O defina la ubicacin GPS",DefineGPSLocation:"Definir la ubicacin GPS",Latitude:"Latitud",Longitude:"Longitud",PleaseUploadAFileInPNGFormat:"Por favor, cargue un archivo en formato PNG con transparencia alfa.",GPSCoordinates:"Coordenadas GPS",TerritoriesWon:"Conquista de territorios",YourWorldRanking:"Mi clasificacin global",YourCityRanking:"Mi rango en mi ciudad",PlayAllQuestsInACityToWin:"Juegue a todos los juegos de una ciudad para ganar todas las recompensas",NoRankingYet:"Su rango an no est calculado, se calcula una vez al da",Challenge:"Desafo",ChallengeAllFriends:"Desafe a todos sus amigos",TypeNameOrAddressOfYourFriends:"Escriba el correo electrnico o el nombre de sus amigos",Or:"O",Select:"Seleccione",Add:"Aada",Administrate:"Pgina de administracin",QuestUnderValidation:"Su partida es ahora de slo lectura. Su partida ser validada por nuestro maestro de juego. Esto puede tardar unos das. Por favor, compruebe su buzn de correo para ms informacin",PublicationRequested:"Publicacin solicitada",PublicationRejected:"Publicacin rechazada. Recibir un correo electrnico explicando el motivo",QuestPublicationRejected:"Su juego no ha sido publicado. Recibir un correo electrnico para explicarle cmo actualizarlo para que se publique.",TouchTheObject:"Lo ha encontrado! Tquelo ahora!",ObjectSize:"Tamao del objeto",TouchDistance:"El objeto puede tocarse ms cerca de...",YouWonABonus:"Ha ganado una bonificacin",AddATown:"Aadir una ciudad",Shop:"Tienda",Coins:"Energa",coins:"energa",Choose3DModel:"Elija un modelo 3D",ObjectIsTooFar:"El objeto est demasiado lejos para ser visible en la pantalla. Intente acercarse.",LastItemIsUniq:"La ltima foto es nica (no hay gemelos en el juego)",YouMustDefineStartLocation:"Debe definir la ubicacin del punto de partida del juego",ClickOnArrowToMoveToNextStep:"Toque la flecha derecha para pasar al siguiente paso.",YourQuestMustContainAtLeast6Steps:"Su juego es demasiado corto, debe crear al menos 3 pasos",YourQuestMustContainLessThan50Steps:"Su juego es demasiado largo, debe crear menos de 100 pasos",WarningNoLocation:"Buscando su ubicacin...",WarningLowBattery:"Su batera est baja, por favor considere cargarla",WarningNoNetwork:"A la espera de la red...",WarningLowNetwork:"Red baja, por favor espere...",CouldNotDisplayObject:"Lo sentimos, se ha producido un error al cargar el objeto a buscar, por lo que no se puede visualizar. Reinicie la aplicacin, si el problema persiste omita este paso.",CouldNotEnableAR:"No hemos podido detectar la orientacin de su dispositivo. Que no cunda el pnico. An puede encontrar el elemento de juego.",Step:"Paso",EasyLongDesc:"Fcil, para todos, incluso para un nio",NormalLongDesc:"Normal, sin grandes dificultades",HardLongDesc:"Experto, para jugadores",RemoveThisQuest:"Eliminar este juego",AreYouSureYouWantToRemoveThisQuest:"Est seguro de eliminar este juego? Ser eliminado permanentemente!",Modify:"Modifique",Editors:"Editores",InviteEditors:"Invitar a un editor",InvitePeople:"Invitar a un jugador",InviteEditorsHelp:"Escriba la direccin de correo electrnico del editor al que desea invitar",InviteInviteesHelp:"Escriba la direccin de correo electrnico de la persona a la que desea invitar",UserIsNotAGraalyUser:"No se permiten ms invitados o esta persona necesita crear una cuenta en Graaly.",EditorIsNotAGraalyUser:"No se permite ms editor o esta persona necesita crear una cuenta en Graaly.",OtherOptions:"Otras opciones",SelectPictureInTheList:"Seleccione el objeto es la lista",HintText:"Texto de sugerencia",NewHint:"Siguiente pista","2DPicture":"Imagen plana","3DObject":"Objeto 3D",ObjectFormat:"Formato del objeto",ImagesUsedForCards:"Fotos de tarjetas",OkThanks:"Vale, gracias!",CreateAQuest:"Crear un juego",NoThanks:"No, gracias",Character:"Carcter",Rankings:"Clasificaciones",UseMyCurrentGPSLocation:"Utilizar la ubicacin GPS actual de mi telfono",MarkersFile:"Cdigos QR",ChooseTheMarker:"Elija el smbolo",Download:"Descargar",Marker:"Smbolo",Choose:"Elija...",ExtraTextFieldLabel:"'Descripcin 'Saber ms",ReadMore:"Leer ms",ClickHereToKnowMore:"Pulse aqu para saber ms",FriendsAdded:"Ahora sigue a esta persona",InvitationSent:"Invitacin enviada",Email:"Correo electrnico",EmailIsNotValid:"Correo electrnico no vlido",PhoneNumber:"Nmero de telfono",InvalidPhoneNumber:"Nmero de telfono no vlido",AreYouSureYouWantToRemoveThisFriend:"Est seguro de que desea eliminar a este amigo?",Suggestions:"Sugerencias",FindWithEmail:"Encontrar amigo con correo electrnico",FindWithPhone:"Encontrar amigo con nmero de telfono",YourPhoneNumber:"Su nmero de telfono",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"Usted es un profesional",StorekeeperDesc:"Y quiere atraer a una clientela cualificada con una experiencia de juego nica",TransparentImageAboveCameraStream:"Imagen transparente sobre el flujo de la cmara",GeolocationFailed:"Fall la geolocalizacin",GeolocationFailedDesc:"No podemos localizarle, o no tiene red, o ha bloqueado la localizacin para esta app",NumberOfColorsInTheCode:"Nmero de colores en el cdigo",NumberOfImagesInTheCode:"Nmero de imgenes en el cdigo",FindMarkerHelp:"Apunte al cdigo QR correcto con la cmara de su telfono. Buena suerte.",TouchObjectOnMarkerHelp:"Dirija la cmara de su telfono hacia el cdigo QR correcto. Un cdigo QR es una imagen cuadrada con puntos oscuros. Buena suerte.",LocationSearching:"Buscando su puesto...",ConfirmSaveChanges:"Guardar cambios?",Yes:"S",No:"No",WeNeedMoreInformationAboutYou:"Cree su perfil",WeNeedMoreInformationAboutYouDesc:"Es sencillo y desbloquea buenas funciones",RemoveYourAccountDesc:"Al eliminar su cuenta, perder su puntuacin, todos los artculos que haya comprado y su progresin, y no podr volver a conectarse a la aplicacin.",RemoveYourAccount:"Eliminar su cuenta",IConfirmIWantToRemoveMyAccount:"Confirmo que deseo eliminar mi cuenta",ConfirmDeleteAccount:"Confirmar la eliminacin de la cuenta",AreYouSureYouWantToRemoveYourAccount:"Est seguro de eliminar su cuenta y no utilizar ms Graaly? Estas acciones no se pueden cancelar!",YourAccountIsRemoved:"Su cuenta ha sido eliminada",CreateMyAccount:"Crear mi cuenta",IAlreadyHaveAnAccount:"Ya tengo una cuenta",Reviews:"Reseas",CommentThisQuest:"Comentarios para el autor del juego",Send:"Enve",ReviewSent:"Resea enviada al autor. Gracias.",Optional:"opcional",Colon:":",Rating:"Clasificacin",PleaseRateTheQuest:"Por favor, valore el juego antes de enviar su crtica",QuestNotReviewed:"Este juego an no ha sido revisado.",ClickHereToStartDiscoveryQuest:"Pulse aqu para iniciar el juego de descubrimiento",contactUsPro:"Puede encontrar nuestros servicios profesionales en <a href=''{websiteBaseURL}' target='_blank'>'{websiteBaseURL}</a> o ponerse en contacto con nosotros en <a href='mailto:'{salesEmail}'>'{salesEmail}</a>.",GeolocationNotSupported:"Lo sentimos, su dispositivo no admite la geolocalizacin.",TechnicalErrorReloadPage:"Problema tcnico, pulse para actualizar",NetwordkErrorReloadPage:"Problema en la red! Intentaremos recargar la pgina en 15 segundos.",TechnicalProblemNetworkIssue:"Por favor, compruebe su red o intntelo de nuevo ms tarde",Search:"Busque en",CurrentScore:"Puntuacin actual",SolveAgainThisQuest:"Volver a jugar desde el principio",BackToQuest:"Volver al juego",min:"min",pts:"pts",SportQuest:"Juego de la naturaleza",DiscoveryQuest:"Juego de descubrimiento",CulturalQuest:"Juego cultural",ChildQuest:"Juego de nios",TransportQuest:"Juego en coche u otro medio de transporte",ShopQuest:"Descubrir la tienda",EnterpriseQuest:"Empresa",NightQuest:"Juego nocturno",ExtremQuest:"Juego extremo",CulinarQuest:"Juego culinario",SkipTutorial:"Saltar tutorial",SkipTutorialDesc:"El tutorial le ayudar a entender cmo se juega al Graaly. Puede saltarse el tutorial ahora, seguir estando disponible en su perfil",Tutorial:"Tutorial",IWantToRestartTutorial:"Reinicie el tutorial",DurationBeforeTextAppearAbovePicture:"Duracin antes de que el texto aparezca sobre la imagen de fondo (en segundos)",pointsToWin:"puntos para ganar",YouAlreadyPlayedThisQuest:"Ya ha jugado a este juego (no hay puntos para ganar)",YourLevel:"Su nivel",MyScore:"Mi puntuacin",Score:"Puntuacin",PleaseSelectYourSex:"Seleccione su sexo",PleaseSelectYourAge:"Seleccione su rango de edad",RankingIntro:"stos son los mejores jugadores para este partido",CloseQuestRanking:"Volver al juego",RankingEndIntro:"Esta es su clasificacin entre sus amigos",CloseEndRanking:"Volver al final del juego",NoFriendsLong:"An no sigue a la gente",IAgreeTheTermsAndConditions:"Estoy de acuerdo con la <a class='text-primary' href='javascript:(navigator.app ? navigator.app.loadUrl(\"' {URLs.terms.en}\", { openExternal: true }) : window.open(\"'{URLs.terms.es}\"))'>trminos y condiciones</a>",PleaseAgreeTheTermsAndConditions:"Por favor, acepte los trminos y condiciones aplicables a los usuarios de Graaly",IAgreeThePrivacyPolicy:"Estoy de acuerdo con la <a class='text-primary' href='javascript:(navigator.app ? navigator.app.loadUrl(\"' {URLs.es}\", { openExternal: true }) : window.open(\"'{URLs.privacy.es}\"))'>poltica de privacidad</a>",PleaseAgreeThePrivacyPolicy:"Por favor, acepte la poltica de privacidad para utilizar Graaly",TermsAndConditionsLink:"<a href='javascript:(navigator.app ? navigator.app.loadUrl(\"' {URLs.terms.es}\", { openExternal: true }) : window.open(\"'{URLs.terms.es}\"))'>Trminos y condiciones</a>",PrivacyPolicyLink:"<a href='javascript:(navigator.app ? navigator.app.loadUrl(\"' {URLs.es}\", { openExternal: true }) : window.open(\"'{URLs.privacy.es}\"))'>Poltica de privacidad</a>","//YourPhoneIsNotCompliantWithThisStepType":"Su dispositivo no es compatible actualmente con este tipo de paso. Disculpe las molestias, por favor pase al siguiente paso",DoYouWantToRemoveThisChapter:"Est seguro de eliminar este captulo? No debe contener ningn paso",FollowStep:"Siga el paso",StepSuccess:"Respuesta correcta sobre el paso",StepFail:"Respuesta incorrecta en el paso",StepRandom:"(BETA) Aleatoriamente despus de",StepCounter:"(BETA) El contador tiene el valor",StepCounterGreater:"(BETA) El contador es mayor que ",StepCounterLower:"(BETA) Contador es inferior a ",StepCombineObject:"(BETA) Objeto combinado ",StepHaveObject:"(BETA) El objeto est en el inventario ",StepNotHaveObject:"(BETA) El objeto no est en el inventario ",StepAnswerNb:"(BETA) Responda Nb a la pregunta",StepChapterTimerOver:"(BETA) el temporizador del captulo ha terminado",NoCondition:"Sin condicin (comience al principio del captulo)",Conditions:"Disparadores",AddACondition:"Aadir un activador",ConditionType:"Tipo de disparador",ConditionValue:"Valor de activacin",YourStepCanOnlyFollowOneStep:"Su paso slo puede seguir un paso",ThisStepIsTriggeredWhen:"Este paso aparece cuando",YouCanNotRemoveAChapterWithSteps:"No puede eliminar un captulo con escalones. Por favor, elimine los pasos antes.",ModifyTheChapter:"Editar el captulo",NewChapter:"Nuevo captulo",AddASChapter:"Aadir un captulo",SelectANewObject:"Seleccionar un nuevo objeto",ThisStepIsNotShowToPlayers:"Este paso no se muestra a los jugadores, puede pasar al siguiente paso",By:"Por",YourChapterMustHaveAEndOfChapterStep:"Debe tener un paso de 'Fin de captulo' en cada captulo para que el jugador pase al captulo siguiente",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Los pasos siguientes no tienen desencadenantes. Slo el 'paso de introduccin' de un captulo puede no tener desencadenantes",FollowingStepsHaveInvalidCondition:"Algunos pasos tienen una condicin no vlida (quizs se ha eliminado el paso siguiente, o ha creado condiciones circulares)",FollowingStepsHaveNoValidParent:"Los siguientes pasos tienen activacin invlida",IssuesInYouQuest:"Problemas en su juego",IssuesInYourStep:"Cuestiones a su paso",DisplayRightAnswer:"Mostrar la respuesta correcta",Mode:"Modo",TouchA3DObjectOnTheMarker:"Toque un objeto 3D en el marcador",ScanTheMarker:"Escanee el marcador (dos intentos)",NothingOccurs:"No ocurre nada, pruebe otra cosa",ClickOnButtonToAddStep:"Pulse el botn + para aadir un paso en este captulo",ScanTheMarkersLikeThat:"La marca para encontrar y escanear con su cmara es similar a",ScanTheMarkersLikeThat2:"Para escanear un cdigo QR, pulse a continuacin",LaunchTheScanner:"Inicie el escner",RedirectionPleaseWait:"Redireccin, por favor espere ...",UpgradeRequired:"Necesita actualizar su aplicacin Graaly para seguir utilizndola",SorryAnErrorOccurs:"Lo sentimos, se ha producido un error.",PleaseContactTheSupport:"Pngase en contacto con el servicio de asistencia",CreateNewVersionDescription:"Crear una nueva versin preliminar para este juego. Si su juego ya est publicado, los jugadores jugarn con la versin publicada, hasta que usted publique esta nueva versin del juego.",ClickHereToCreateANewQuestVersion:"Para editar su juego, haga clic aqu",YourUnderValidationQuests:"actualmente en revisin",YourRejectedQuests:"Su rechazado",YourDraftQuests:"Sus borradores",YourPublishedQuests:"Su publicacin",QuestDraftVersion:"Versin no publicada del juego",PageDraftVersion:"Pgina no publicada",PrivateQuest:"Juego privado",PublicQuest:"Juego pblico",Invitees:"Invitados",YouHaveInvitations:"{nb} invitacin(es)",AreYouSureToAddThisNewLanguage:"Este idioma an no est configurado para su juego, desea aadirlo?",Results:"Resultados",Result:"Resultado",ClosePrivateQuest:"Cerrar el juego",ClosePrivateQuestDesc:"Despus de hacer clic aqu, su partida dejar de ser jugable. Acceder a las puntuaciones y a la clasificacin de los jugadores.",ClosePrivateQuestAlert:"Est seguro de cerrar este juego? Ya no se podr jugar",NoPlayerForThisQuest:"Nadie ha jugado a este juego",NoPlayersYetForThisQuest:"An no hay jugadores para este juego",PrivateQuestDesc1:"Su juego est dedicado a sus amigos o personas elegidas, no es jugable por otros",PublicQuestDesc1:"Quiere crear un juego para presentar un lugar, una actividad, una empresa.",PublicQuestDesc2:"Una vez validado por nuestro game master, su juego ser visible y jugable por todo el mundo.",PublicProQuestDesc1:"Su juego puede ser jugado por todos los jugadores de Graaly. Como tal, somos ms exigentes con la calidad del juego en el momento de su publicacin (visuales, sonidos, personajes, puzzles, ...).",PublicProQuestDesc2:"<p>Si su juego no es gratuito, puede utilizar el pago in-app, o gestionar el pago usted mismo</p><p>Para el pago in-app, Google/Apple se llevan el 30% de los ingresos</p><p>En todos los casos, Graaly se lleva el 30% de los ingresos</p><p>El resto es para usted, as que del 40% al 70% de los ingresos netos.</p><p>Graaly le enviar dinero mensualmente</p><p>Si su juego es gratuito para los usuarios finales, Graaly le cobrar mensualmente 0,25  (sin impuestos) por jugador</p><p>Puede desactivar su juego cuando lo desee</p><p>Por favor, pngase en contacto con nosotros en contact@graaly.com para ms detalles</p><p>.",PrivateProQuestDesc1:"Puede invitar a sus jugadores mediante un cdigo QR genrico o un cdigo QR de un solo uso por participante.",CreatePrivateQuest:"Crear una partida privada",BuyPrivateQuest:"Comprar una partida privada",OnlyBuyableOnMobile:"Slo se puede comprar en el mvil",AcceptAndBuyAPrivateQuest:"Aceptar y comprar una partida privada",CreatePublicQuest:"Crear una partida pblica",CurrentlyPlaying:"Est jugando actualmente",FinalRanking:"Clasificacin final",FinalRankingIntro:"Estos son los resultados de este partido",YourQuestIsClosedAndCanNotBePublishedAnymore:"Su juego est cerrado y ya no se puede publicar",YourQuestContainsErrorsInSteps:"Hay errores en la pestaa Pasos. Por favor, corrjalos e intntelo de nuevo",QuestType:"Tipo de juego",helpQuestType:"Un juego de cadena de enigmas es una lista de enigmas que se suceden unos a otros. Un juego se compone de enigmas que pueden resolverse en diferentes rdenes, la resolucin de algunos enigmas desbloquea otros enigmas. Para su primera partida, le aconsejamos que empiece con un juego de cadena de enigmas. Puede cambiar un juego de cadena de enigmas en una partida, pero no al contrario.",basicEditor:"Cadena de pistas (editor bsico)",advancedEditor:"Juego de escape (editor avanzado)",UsedOver:"{actual} de {lmite} utilizado",QuestMedia:"Archivos del juego",YouDoNotUseAnyMediaYetInYourQuest:"An no utiliza ningn medio en su juego",Feedback:"Su opinin",Back:"Volver",FeedbackTitle:"Enviar comentarios",FeedbackIntroduction:"Para enviar comentarios al autor de este juego, o puntuar este juego, por favor espere a que termine el juego. Si desea ponerse en contacto con el equipo de Graaly, para informar de un contenido inapropiado, escriba su mensaje a continuacin:",YourMessageHasBeenSent:"Su mensaje ha sido enviado",BackToBuilder:"Vuelva a su constructor de juegos",OrDownloadAFile:"O descargue su propia imagen",UploadACharacter:"Cargar un personaje",LoadingQuestDataForOfflineMode:"Preparando su juego...",ErrorOfflineSaving:"Problema tcnico, no se puede jugar a este juego sin conexin a la red",QuestNeedNetwork:"Necesita red para lanzar este juego. Active la red de su dispositivo, y haga clic en el botn cuando tenga red para lanzar el juego.",ReloadQuest:"Recargar el juego",ConnectToComputeScore:"Estoy conectado, calcule mi puntuacin!",ToSaveYouScoreYouNeedToConnect:"Para guardar su progresin y su puntuacin, debe conectarse a la red wifi o mvil, y despus pulsar el botn",DownloadForOfflineUse:"Jugar sin conexin",Downloading:"Cargando ...",Loading:"Cargando ...",YouAreOfflineNoQuestsAvailable:"Lo sentimos, no hemos podido encontrar ningn juego al que se pueda jugar sin conexin.",ButtonsColor:"Color de la barra de botones (opcional)",AddALogo:"Aada su logotipo",YourLogo:"Su logotipo",byteCharacter:"B",AvailableTomorrow:"Disponible maana",MoveCloserToTheObject:"Acercarse al objeto para tocarlo",AddACardPair:"Aadir un par de tarjetas",AlreadyFriends:"Usted ya sigue a esta persona",UserCanNotBeFriendWithHim:"No puede aadirse como amigo",TooMuchFriends:"No puede seguir a ms de 150 personas",FriendNotFound:"Esta persona an no es usuario de Graaly",YouHaveWin:"Ha ganado!",AreYouSureYouWantToMoveToAdvancedMode:"Est seguro de pasar al modo avanzado? No podr volver al modo simple ms adelante",Country:"Pas",Town:"Ciudad",ZipCode:"Cdigo postal",QuestDownloadFinished:"Descarga finalizada. Ahora puede jugar a este juego sin conexin a la red.",GoToQuestValidation:"Ir a validacin",SessionExpired:"Su sesin ha expirado, por favor inicie sesin.",AuthCheckError:"Se ha producido un error, pngase en contacto con el servicio de asistencia.",NoInternetConnection:"Sin conexin a Internet",FileTooLarge:"Su archivo es demasiado grande, por favor reduzca su tamao",PremiumQuest:"Juego profesional",MovePremium:"Mueva este juego al modo profesional",PremiumDefinition1:"D ms valor a su juego",PremiumDefinition2:"Moving pro le ofrece varias ventajas : <ul><li><u>Un juego ms personalizado a sus necesidades</u>: puede utilizar sus propios objetos y personajes en 3D, puede mostrar su logotipo y adaptar las pantallas con sus colores, .... </li><li><u>Un juego rentable</u>: puede vender su juego a los jugadores</li><li>Puede acceder a las estadsticas de su juego</li><li>Puede contar con el apoyo de nuestro equipo</li></ul>",PremiumDefinition3:"Para comprar crditos pro, eche un vistazo a <a href='https://graaly.com'>nuestro sitio web</a> o pngase en contacto con nosotros en sales@graaly.com.",PremiumWarning:"Para utilizar esta funcin, tiene que pasar su juego al modo Premium (mire en los ajustes de su juego)",Statistics:"Estadsticas",colons:" : ",TotalNumberOfPlayers:"Nmero total de partidas jugadas",NumberOfPlayersYesterday:"Ayer",NumberOfPlayersByAge:"Nmero de jugadores por edad",NumberOfPlayersBySex:"Nmero de jugadores por sexo",AverageScore:"Puntuacin media",AverageDuration:"Duracin media (min)",Age1325:"Entre 13 y 25 aos",Age2639:"Entre 26 y 39 aos",Age4049:"Entre 40 y 49 aos",Age5064:"Entre 50 y 64 aos",Age65:"Mayores de 65 aos",male:"Hombre",female:"Mujeres",ReviewsAndStats:"Reseas y estadsticas",YourOrganizationSubscribeAProAccount:"Su organizacin ({nombre}) suscribi una cuenta pro en Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Los miembros de su organizacin han creado juegos profesionales",Status:"Estado",YouCanCreateNbPremiumQuests:"Puede crear {nb} juego(s) profesional(es) ms",YouCanNotCreateNewQuests:"Yon no puede crear nuevas partidas profesionales. Suscrbase a nuestras ofertas profesionales en <a href='javascript:(navigator.app ? navigator.app.loadUrl(\"'{websiteBaseURL}\",{ openExternal: true}) : window.open(\"'{websiteBaseURL}\"))'>'{websiteBaseURL}</a> o por correo electrnico a <a href='mailto:'{salesEmail}'>'{salesEmail}</a>.",PriceForPlayer:"Precio para los jugadores",Free:"Gratis",Paying:"Pagar",Buy:"Comprar",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"Debe jugar a este tipo de juegos en un dispositivo mvil",QuestPlayableOnMobile:"Este juego slo se puede jugar en el mvil",PuzzleHelpText:"Mueva las piezas para reconstruir el cuadro",ClickToEnlargePictures:"Pulse las imgenes para ampliarlas",WaveThePhoneForGPSPrecision:"Agite el telfono con un movimiento en forma de 8 durante 3 segundos para una mayor precisin del GPS",TakeMobileVertically:"Maneje su mvil en vertical y busque",null:"Sin definir",TooMuchOfflineLoadingErrors:"Fallo en la carga del juego. Puede jugar al juego en lnea si siempre dispone de red. Pulse aqu para cerrar",CancelOfflineWarning:"Ha cancelado la carga del juego. No funcionar si pierde la red",TouchAndDragObject:"Toque y arrastre el objeto para girarlo. Utilice dos dedos para hacer zoom.",SuggestAQuest:"Sugerir un juego",SuggestANewQuest:"Sugerir un nuevo juego",YouLikedThisQuest:"Le ha gustado este juego?",SuggestAQuestDesc:"Desea utilizar Graaly para descubrir un lugar jugando o para motivar a sus hijos o alumnos? Proponga este lugar, nosotros hacemos el resto!",NameOfThePlace:"Nombre del lugar",NameOfThePlaceExample:"Museo Britnico",SuggestContactInformation:"responsable (si lo tiene)",SuggestContactInformationExample:"Nombre, correo electrnico o nmero de telfono",ThankYouForYourProposal:"Gracias por su propuesta",SuggestWarningMessage:"Rellenando este formulario, nos ayuda a encontrar los juegos ms solicitados para contactar con los responsables de este lugar. Se le avisar si se crea un juego en este lugar.",InsertAStepAfter:"Inserte un paso a continuacin",QuestUpdated:"El juego ha sido actualizado",PleaseRestartQuest:"Por favor, reinicie el juego desde el principio.",StartOnDate:"Fecha de publicacin",StepIsOnlyVisibleOnThisDate:"Este paso slo es jugable a partir de esta fecha",ThisStepIsAvailableIn:"Este paso estar disponible en",TimeRemainingHoursMin:"{da} d {hora} h {min} m {seg} s",PuzzleChangeMode:"El rompecabezas no funciona?",PuzzleHelpTextClick:"Pulse sobre la pieza que desea mover y luego sobre el lugar para moverla",QRCodeIsNotWorking:"No se reconoce el cdigo QR",ScanQRCodeToStartQuest:"Escanear un cdigo QR",ScanQRCode:"Escanear un cdigo QR",MarkersToPrint:"Cdigos QR del juego",MarkersToStartQuest:"Los jugadores pueden comenzar su partida escaneando este cdigo QR en la pgina de inicio de sesin",SaveQuestResultsMarker:"Su jugador puede escanear un cdigo QR para guardar su puntuacin con Graaly (escanelo en la pgina de inicio de sesin o en la pgina de inicio). Para los jugadores que salieron de la sala a tiempo:<br /><img src='{url3}' <br /><br />Para los jugadores que estuvieron cerca de salir de la sala a tiempo:<br /><img src='{url2}' /><br />Para los jugadores que no salieron de la sala<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Estas acciones no se pueden cancelar",AddAReward:"Subir una recompensa",Reward:"Recompensa",Rewards:"Bagdes",RewardPictureWarning:"Advertencia: si el fondo de su foto no es rojo, suba una foto con fondo transparente. Si una parte de su foto est recortada, suba una foto de formato cuadrado",YouWonAReward:"Enhorabuena, ha ganado una insignia",WonOtherRewardByPlayingOtherGamesInCity:"Puede ganar otras recompensas jugando a otros juegos alrededor de",UnknowUploadError:"Se ha producido un error. Puede que su archivo sea demasiado grande o no tenga el formato adecuado. Por favor, intntelo de nuevo con una imagen ms pequea",helpQuestLogo:"Su logotipo aparecer en una burbuja en la parte inferior de la pantalla del juego. Dependiendo del tamao de la pantalla, la burbuja puede ser pequea, por favor utilice una imagen con pocos detalles.",helpQuestReward:"El jugador ganar una insignia como recompensa al final de su juego. Esto les motivar a jugar a su juego. Para crear esta insignia, suba una imagen de esta recompensa, con un fondo transparente (formato .gif o .png)",LoadingContacts:"Carga de contactos",LoadContactsFromPhone:"Buscar en mi libreta de direcciones",NoMoreContactFound:"No se han encontrado ms contactos",CreateYourAccountMsg:"Cree su cuenta para guardar su puntuacin y jugar con sus amigos!",MaybeLater:"Quizs ms tarde!",LetsPlay:"Jugar",NewAccount:"Nueva cuenta",PleaseAcceptDeviceMotionPermissionRequest:"Por favor, permita que la aplicacin detecte el movimiento de su dispositivo, para poder jugar a esta parte del juego",PleaseAcceptDeviceOrientationPermissionRequest:"Por favor, permita que la aplicacin detecte la orientacin de su dispositivo, para poder jugar a esta parte del juego",DoYouWantToCreateAnAccount:"Para crear un juego, necesita crear una cuenta. Est de acuerdo en crear su cuenta?",UserWithSameEmailAlreadyExisting:"Ya existe una cuenta con esta direccin de correo electrnico",PasswordTooWeak:"Su contrasea debe ser ms compleja (8 caracteres y una letra mayscula y un dgito)",AreYouSureYouWantToPublishThisQuest:"Est seguro de que desea solicitar la publicacin? No podr realizar cambios hasta que el equipo de Graaly valide su solicitud",YourCharacter:"Carcter personalizado",AddACustomCharacter:"Aadir un personaje",helpQuestCharacter:"Este personaje aparecer cuando un jugador pida una pista o un mensaje Leer ms",AvailableColors:"Colores disponibles",TypeColorCode:"Escriba el cdigo de color. Ej: #ff55cc",TypeColorCodeName:"Escriba el nombre del color. Ej: Rojo",AddNewColor:"Aadir un nuevo color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Usted est lejos de este juego</b>.<br />Al resolver este juego a distancia, se perder muchas pistas y tantos puntos",YouAlreadyDidThisQuest:"<b>Ya ha completado este juego</b>. Puede volver a jugarla, pero <b>esto no le dar puntos de nuevo</b>.",YouAreQuestOwnerDesc:"Usted es editor de este juego, no ganar ningn punto, y no lo jugar con el modo offline",GeneralWarning:"<b>Por su seguridad</b>, no juegue al juego conduciendo o montando en bicicleta, est siempre atento a lo que ocurre a su alrededor, no entre en propiedades privadas sin permiso, siga las normas de seguridad cuando se desplace.",RemoveScoringAndRating:"Sustituir pantalla final por un texto",TypeEndMessage:"Texto que sustituye a la pantalla final de puntuacin y calificacin",TypeEndMessageForPerfectScore:"Texto personalizado si el usuario tiene todas las respuestas correctas",ThanksForPlaying:"Gracias por jugar a este juego. Nos vemos ms tarde con nuevos juegos!",EnlargePictureToFullWidth:"Ampliar la imagen a pantalla completa",EnlargePictureToFullHeight:"Ampliar la imagen a toda su altura",PlayerCanTakeSnapshot:"El jugador puede hacer fotos",SnapshotTaken:"Captura de pantalla guardada en su mvil",SnapshotTakenIssue:"Error con la captura de pantalla automtica. Puede hacer una captura de pantalla manual.",NbTrials:"Nmero de ensayos",UserCanPass:"El jugador puede superar este paso",Welcome:"Bienvenido!",SignIn:"Iniciar sesin",Subscribe:"Crear cuenta nueva",EmailAlreadyUsed:"Esta direccin de correo electrnico ya est utilizada. Por favor, inicie sesin o solicite modificar su contrasea",AroundYou:"Cerca de usted",SeeMore:"Ver ms",AllQuests:"Todos sus juegos",SearchForStart:"Utilice la bsqueda para empezar",Designers:"Diseadores",Difficulty1:"Fcil",Difficulty2:"Normal",Difficulty3:"Duro",ClosestQuestToYou:"El juego ms cercano a usted",YouAreNearThisQuest:"Usted est cerca de este juego",YouAreInvitedToThisQuest:"Est invitado a este juego",CreatedByGraaly:"Creados con Graaly",FriendsQuests:"Jugado por amigos",ScoreAndBadges:"Puntuacin e insignias",OneBadge:"1 placa",OnThisEscapeGameYouCanWin:"Con este juego, puede ganar:",ScoreRange:"Entre los puntos {min} y {max}",InProgressPreparation:"Preparacin en curso",Warnings:"Advertencias",Follow:"Siga",Followed:"Sigui",SolvedQuests:"Juegos resueltos",Creations:"Creaciones",CreationStudio:"Estudio de creacin",Badges:"Insignias",FollowYourFriends:"Siga a sus amigos",CreatedYourFirstQuest:"Cree su primer juego",DoNotFollowAnymore:"Deje de seguir",AllTheseDataAreOptional:"Estas informaciones no son obligatorias:",DataCountry:"Su pas: se utiliza para mostrar los juegos relevantes para usted",DataZipcode:"Su cdigo postal: se utiliza para mostrarle los juegos relevantes para usted",DataSex:"Su sexo: se utiliza para mostrar los juegos relevantes para usted",DataAge:"Su edad: se utiliza para ocultar juegos no adaptados a su edad",DataPhone:"Su nmero de telfono: se utiliza para ponerle en contacto con sus amigos",EscapeGame:"Juego",EscapeGames:"Sus juegos",Players:"Jugadores",YouHaveReachAScore:"Ha alcanzado {score} puntos",LevelReached:"Nivel alcanzado!",PointsToReachLevel:"{score} puntos para alcanzar",Friends:"Amigos",World:"Mundo",MyCountry:"Mi pas",MyCity:"Mi ciudad",NoRanking:"An no hay clasificacin",Invitations:"Invitaciones",YouFollowThem:"Usted sigue",AddYourRoomInTheDirectory:"Aada su sala en el directorio",AddYourRoom:"Aada su habitacin",ProAddYourRoom:"Puede aadir sus habitaciones y beneficiarse de muchos servicios gratuitos",YourRoom:"Su habitacin",PriceFrom:"Precio por jugador a partir de",ReadMoreLink:"Enlace a la pgina de reservas",SmallPicture:"Foto pequea",SeeYourQuestPage:"Vista previa de la pgina",FromPricePerPlayer:"A partir de {precio} por jugador o partida",Book:"Reserve",YourBadges:"Sus insignias",YouDoNotHaveBadgesYet:"An no tiene insignias. Para ganar insignias, necesita jugar partidas con recompensas.",FollowedPeople:"Personas seguidas",WeNeedYourPositionForThisFeature:"Necesitamos su posicin para esta funcin",OtherCharacters:"Otros personajes",BackToTheMap:"Inicio",or:"o",RefreshCacheRequired:"La aplicacin almacenada en cach en su navegador es demasiado antigua. Por favor, utilice la navegacin privada para actualizar sus archivos en cach",FindFriendManually:"Buscar amigos manualmente",NoQuestAroundYou:"No encontramos juegos cerca de usted",CachedQuests:"Ya cargado",YourPresentation:"Presntese",DuplicateThisQuest:"Clone este juego",DoYouWantToOpenClonedQuest:"Quiere editar ahora la partida duplicada?",OpenTheMap:"mapa de juegos",ReplacePictureByRedFilter:"Sustituir imagen por filtro rojo",TotalNumberOfPlaysNotFinished:"Nmero de partidas en curso",RoomDataWarning:"Alguna informacin puede estar obsoleta, no dude en consultar la pgina web del juego de escape para obtener ms informacin",AnonymousUser:"Usuario annimo",NotWon:"Para ganar",OnTopGames:"Juegos destacados",ThisStepOnlyWorkOnMobile:"El escaneado del cdigo QR slo funciona en la aplicacin mvil",YourQuestHasNotBeenPublished:"Su juego no est publicado",OnDesktopDisplayMessage:"En el ordenador, debe reducir el tamao de la ventana de su navegador.",EventCode:"Cdigo del evento",BoardMacAddress:"Direccin Mac de la Junta",SuccessMessage:"Mensaje de xito",YourTime:"Su tiempo",LimitNumberOfPlayerInOneHour:"Limitar el nmero de jugadores por hora (0 = ilimitado)",TooMuchUsersCurrently:"Demasiados usuarios estn jugando actualmente",OrSelectAnImageInTheList:"O elija una imagen de la lista",IotObject:"Objeto IoT",Protocol:"Protocolo",SuccessRange:"Rango de xito",SuccessRanges:"Rangos de xito",WriteTextWarning:"Los acentos y las maysculas no son necesarios",DistanceToWin:"El jugador gana cuando est ms cerca de la localizacin GPS que (m)",SplitMessageWithPipe:"Aada tubos '|' si desea dividir su texto en varias burbujas",ClickHere:"Pulse aqu",FollowTheCreator:"Siga al creador",PlayersNumber:"(BETA) Nmero de smartphone para jugar",helpQuestMultiplayer:"Esto define el nmero mnimo de jugadores para jugar al juego. Cada jugador tendr su telfono, y deber tener misiones especficas en el juego. Para ms informacin sobre el modo multijugador, vea nuestros tutoriales en Youtube",ThisIsAMultiplayerGame:"Este juego es multijugador",JoinATeam:"nase a un equipo",ScanTheLeaderQRCode:"Escanee el cdigo QR del lder",CreateATeam:"Crear un nuevo equipo",TeamName:"Nombre del equipo",CreateTeam:"Crear el equipo",OtherPlayersMustScanThisQRCode:"Otros jugadores deben escanear este cdigo QR para unirse a su equipo",ThisIsNotATeamQRCodeValid:"Este cdigo no es vlido! Debe escanear un cdigo que aparece en el mvil de la persona que crea el equipo",MyTeamIsCompleteLetsGo:"El equipo se ha escaneado, vamos!",YouNeedMoreMembersToPlay:"Necesita {nb} miembros para iniciar este juego. Miembro(s) actual(es): {members}",Team:"Equipo",WaitingForOtherUsersActions:"A la espera de otros jugadores",WaitingForOtherUsersActionsDesc:"No puede avanzar hasta que otros jugadores resuelvan sus rompecabezas","//CheckIfICanMoveFoward":"Compruebe si puedo avanzar ahora",Player:"Jugador",All:"Todos",YouNeedToBeXPlayers:"Necesita tener al menos {nb} para jugar",YouNeedAtLeastXEditorsToTest:"Necesita al menos {nb} ditores para probar este juego multijugador (vase la pestaa Publicar)",HereAreTheTesters:"Se trata de un juego multijugador. Ser probado por {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Visualizacin de su imagen en diferentes tamaos de pantalla",MyPictureIsNotDisplayedWell:"La visualizacin no es correcta",MyPictureIsNotDisplayedWellDesc:"<b>Si su foto no es correcta para todos los tamaos</b>: Necesita tener una imagen con 900 pixeles de ancho y 1200 pixeles de alto.<br /><b>Si su imagen no es correcta con el tamao ms pequeo</b>: Necesita aadir un borde no til de 100px. Puede aadir un borde negro de 100 pixeles a su imagen por ejemplo",RestartQuest:"Reiniciar el juego",AreYouSureToRestartThisQuest:"Est seguro de reiniciar el juego? No ganar ningn punto reiniciando.",PaymentOnMobile:"Pago por mvil",PaymentOnMobileHelp:"El pago es realmente sencillo para los jugadores, en un solo toque. Mientras tanto, las tiendas de Apple / Google se llevarn el 15% de los ingresos.",PaymentOnYourSide:"Pago gestionado por usted",PaymentOnYourSideHelp:"Puede gestionar el pago en su tienda. Los jugadores necesitarn un cdigo QR de un solo uso que generar en la pestaa Pago que aparecer en esta pgina",Payments:"Pagos",CreateNewQRCodeForPlay:"Crear un nuevo cdigo QR nico para un jugador",Create10NewQRCodeForPlay:"Cree 10 nuevos cdigos QR nicos",Create50NewQRCodeForPlay:"Cree 50 nuevos cdigos QR nicos",AreYouSureYouWantToRemoveThisTierCode:"Est seguro de eliminar este cdigo? Si ha enviado este cdigo a un jugador, ya no podr jugar!",BuyThisQuest:"Comprar este juego",YouHaveReceivedAQrCodeFrom:"Ha recibido un cdigo QR de {autor}",ScanTheUniqueQRCode:"Escanee el cdigo QR de un solo uso",BuyInOneClick:"Compre en un clic",TechnicalIssueOrCodeAlreadyUsed:"Este cdigo QR ya est siendo utilizado por otra cuenta. Por favor, inicie sesin o pngase en contacto con el creador de este juego para obtener un nuevo cdigo.",ChangeTheBackgroundImageOnceClicked:"Cambiar la imagen de fondo cuando el jugador ha hecho clic",Message:"Mensaje",Frequency:"Frecuencia",TriggerTheEvent:"Activar el evento",SearchingBluetoothDevice:"Buscando dispositivo Bluetooth...",KeypadInput:"Entrada de teclado",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Abra",ChestActions:"Acciones en el pecho",TriggerMode:"Modo de disparo",TriggerModeAuto:"Auto (en carga escalonada)",TriggerModeManual:"Manual (el jugador debe tocar un botn)",helpPlayer:"Para cada paso de una partida multijugador, debe seleccionar el jugador que ver el paso. Los dems jugadores no lo vern y tendrn un mensaje de espera hasta que el jugador resuelva el enigma. Puede mostrar un paso de transicin para todos los jugadores, pero un enigma slo puede ser mostrado por un jugador. Si necesita que un enigma sea resuelto por todos los usuarios, deber crear un paso para cada jugador. Para ms informacin, vea nuestros tutos en Youtube.",ErrorMessageForNewTeamMember:"Cuestin tcnica o nmero de jugadores alcanzado",YouNeedToUnpublishYourQuestToRemoveIt:"Necesita despublicar su juego para eliminarlo",PleaseEnterYourTeamName:"Por favor, introduzca el nombre de su equipo",Version:"Versin",CountDownLabel:"Lmite de tiempo para este paso",CountDownIsActive:"Activar el lmite de tiempo",CountDownWarning:"Est seguro de que quiere activar el temporizador? Asegrese de que no hay riesgos para el jugador, como una carretera que cruzar!",CountDownPopupfail:"Se acab el tiempo!",MaxScore:"Puntuacin mxima",YouMustTestThisStepOnMobile:"Debe probar este paso en un dispositivo mvil",AreasNumber:"Nmero de zonas a encontrar",ItRemains:"Sigue siendo",s:"s",LetsPlayWithoutAccount:"Jugar sin cuenta",ErrorDownloadNeedsToRestart:"Error al descargar. Compruebe su conexin a Internet y reinicie la carga.",StartCreation:"Empezar la creacin?",ErrorTakingSnapshot:"No se ha tomado la instantnea",YourAudioFile:"Su msica de fondo",AddAnAudioFile:"Aada una msica de fondo",ObjectNeedToBeAppliedOnPicture:"El objeto se aplica sobre un rea de imagen",ReadNext:"LEER MS",AlreadyPaied:"Comprado",HelpStepMessageInventory:"Mostrar la ayuda del botn Inventario",HelpStepMessageHint:"Mostrar la ayuda del botn Hint",HelpStepMessagePrevious:"Mostrar la ayuda del botn Anterior",HelpStepMessageNext:"Mostrar la ayuda del botn Siguiente",HelpStepMessage:"Bienvenido a este juego!\n\nPara participar, slo tiene que seguir las indicaciones que aparecen en pantalla.",HelpStepMessageInventoryMessage:"Con la maleta, podr acceder y utilizar los objetos ganados durante el juego.",HelpStepMessageHintMessage:"Con la bombilla podr acceder a las pistas.",HelpStepMessagePreviousMessage:"Pulse el botn de retroceso para volver al paso anterior.",HelpStepMessageNextMessage:"Pulse el botn siguiente para pasar al siguiente paso.",HelpStepMessageEnd:"Si tiene algn problema, no dude en cerrar la aplicacin, se reiniciar al ltimo paso que haya jugado.",KenBurnsEffect:"Efecto zoom out en la imagen",Show:"Mostrar",Hide:"Ocultar",TotalSellings:"El juego vende",RevenuesPayedFloor:"Ingresos pagados cuando superan los 50",QRCodeMessage:"Mensaje que aparece cuando el usuario tiene que escanear un cdigo QR (modo de juego de escape)",GeolocationMessage:"Mensaje mostrado cuando el usuario encuentra varios lugares geolocalizados (modo juego de escape)",TeamID:"Identificacin del equipo",PleaseFillThisForm:"Por favor, rellene este campo",Zoom:"Zoom",ScheduleGame:"Programar el juego",GameSchedule:"Calendario de juegos",Reset:"Reinicie",SchedulingDescription:"El juego es jugable :",From:"En",To:"A",QuestIsNotPlayableNow:"El juego no es jugable ahora",OpeningHours:"Horario de apertura",CreationStudioHelp:"<h3>Ayuda</h3>Le proponemos varios recursos para ayudarle a utilizar el estudio de creacin:<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Gua del constructor (fr)</a></li><li>Algunos <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>videotutoriales (fr)</a> para construir etapas de su juego</li></ul><div class='text-accent'>Nuevo! nase al grupo de Facebook <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>Graaly game designer</a> para hacer sus preguntas a otros game designers y a los desarrolladores de Graaly!</div><br />Para probar su juego, le aconsejamos:<ul><li>probar en su telfono con la aplicacin Graaly</li><li>probar en su navegador web <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>modo desarrollador</a> (para abreviar, haga clic en la tecla f12, y en el icono de la tableta). Atencin: algunos pasos no funcionan en este modo (realidad aumentada, geolocalizacin, cdigo QR parpadeante, superponer imagen y cmara)</li></ul>",TestWithSimulatorWarning:"Realice pruebas con el simulador. Algunos tipos de paso no funcionan en l. Para una prueba real, utilice la aplicacin mvil Graaly",FontFamily:"Fuente utilizada para los textos",ExportTexts:"Textos del juego",Downloads:"Descargas",ForcePlayerToHaveAccount:"Obligar al jugador a crear una cuenta en Graaly",ForcePlayerToHaveAccountHelp:"Si no est activado, los usuarios podrn jugar a su juego sin crear una cuenta",ShareUserDataWithCreator:"Pida al jugador que comparta sus datos con usted",ShareUserDataWithCreatorHelp:"Un usuario que juega con Graaly acepta compartir sus datos con Graaly. Tambin puede pedir a los jugadores que compartan sus datos con usted. Para motivarlos, le aconsejamos que les haga ganar algo (organice un sorteo, regale un vale, ...)",YouNeedToCreateYourAccountToPlay:"Necesita crear su cuenta para jugar a este juego",ShareDataWithPartner:"Comparta sus datos con el creador del juego",PartnerAskForYouData:"El creador de este juego quiere acceder a sus datos (direccin de correo electrnico, nombre). El motivo puede ser organizar un sorteo, un concurso o entregarle un vale. Lea la descripcin del juego para obtener ms informacin",UseHtmlInDescription:"Utilice etiquetas HTML en la pregunta",DoNotDisplay:"No mostrar",AddAnGPSLocation:"Aadir una ubicacin GPS",BuildThePortraitRobot:"Construya el cuadro para encontrar",Education:"Educacin",EducationDesc:"An no disponemos de un plan educativo, pero puede utilizar el modo profesional y ponerse en contacto con nosotros en contact@graaly.com.",Call:"Llame a",BlurEffect:"Efecto difuminado",CheckpointReached:"Ha alcanzado un punto de control! El mapa muestra ahora la posicin del prximo objetivo.",DefaultMode:"Modo de visualizacin por defecto",CompassMode:"Clsico",CompassModeHelp:"Muestra una flecha de direccin y la distancia restante para alcanzar el objetivo",MapMode:"Mapa",MapModeHelp:"Muestra un mapa de Google con las posiciones de los jugadores y los objetivos",AllowToSwitchGeolocationMode:"Botn para cambiar el modo de visualizacin",ApplyRedFilter:"Aplicar filtro rojo",Chapters:"Captulos",Chapter:"Captulo",ChapterChangeWarning:"Cambiar el captulo eliminar sus desencadenantes y crear incoherencias en los desencadenantes. Deber actualizar los pasos que dependan de l.",ResetHistoryAfter:"Evite el botn de retroceso despus de este paso",RestartChapterAfterStep:"Reinicie el captulo despus de este paso",HideInventory:"No utilice el inventario",ShowCountDown:"Mostrar temporizador de cuenta atrs",StopGameAfterCountDown:"Detener el juego cuando termine el tiempo",ItRemainsMinutes:"Permanece {tiempo} minutos",CustomizeEndOfGame:"Personalizar el final del juego",CustomizeGameInterface:"Personalizar la interfaz del juego",GameAvailability:"Disponibilidad del juego",GamePayment:"Pago del juego",UserData:"Datos del usuario",CustomizeGameIntroduction:"Personalizar la presentacin del juego",RemoveGPSLocation:"Eliminar esta ubicacin",OverQuotaMessage:"Alcanza el lmite de almacenamiento de archivos",RemoveFiles:"Eliminar archivos",InvalidTeamID:"ID de equipo no vlida",HideFullScreen:"No mostrar a pantalla completa (Android)",YourFullName:"Su nombre completo",TextColor:"Color del texto",GoodAnswersNumber:"Respuestas correctas",PleaseEnterFirstNameAndLastName:"Por favor, escriba su nombre y apellidos",PassTheQRCodeInFrontOfYourCamera:"Pase el cdigo QR delante de su cmara",HideHideButton:"Ocultar botn mostrar/ocultar",PleaseHoldYourDeviceFlat:"Por favor, mantenga su dispositivo plano",MyLocationWarning:"Las coordenadas GPS actuales no son lo suficientemente precisas. Para obtener la posicin GPS, utilice Google Maps (al hacer clic en un lugar, aparece una ventana emergente con la latitud y la longitud), la aplicacin 'Mi posicin GPS' en Android o iPhone.",FindAllLocationsToStartSteps:"Muvase y encuentre cada lugar",ColorIndicatorExplaination:"Se encuentra a {distancia}m del lugar ms cercano",YouWonNewGame:"Enhorabuena! Ha desbloqueado un nuevo juego!",WarningLowGpsAccuracy:"Advertencia: baja precisin del GPS",PersistentLowGpsAccuracyPleaseSkipStep:"La precisin del GPS sigue siendo demasiado baja despus de un minuto. Le aconsejamos que omita este paso (botn inferior derecho).",LocationSaved:"Ubicacin actual fijada como posicin objetivo.",CurrentLocation:"Localizacin GPS actual",Accuracy:"Precisin",Meters:"metros",secondes:"seconde(s)",ScanA:"Escanear un cdigo QR",OnceADay:"Una vez al da",UserCanReplayGame:"El usuario puede volver a jugar",CustomizeYourName:"Personalizar el nombre del autor",YouCanNotPlayAgainThisGame:"No se puede volver a jugar a este juego",YouCanNotPlayAgainThisGameToday:"Puede volver a jugar maana",CustomizeRightAnswerMessage:"Mensaje personalizado de respuesta correcta",CustomizeWrongAnswerMessage:"Mensaje personalizado de respuesta incorrecta",RotateVideo:"Girar el vdeo 90",UploadSucessful:"Carga correcta",RemoveObjectFromInventoryAfterUse:"Eliminar el objeto del inventario tras su uso",ModifyTheHint:"Modificar la pista",AddAGameSnapshot:"Aadir una instantnea del juego",Snapshots:"Instantnea(s)",CounterValue:"Valor del contador",CharacterBarColor:"Color de la barra situada debajo del carcter",HideMake8Animation:"Ocultar la animacin si el GPS es dbil",HideEnlargeMessage:"Ocultar el botn para ampliar los pulgares",CustomizedMemoryCardColor:"Color personalizado para las tarjetas",HidePuzzleNotWorkingMessage:"Ocultar el botn cuando el puzzle no funciona",SnapshotManualOnIOs:"Para hacer una captura de pantalla en iPhone/iPad, pulse el botn lateral y el botn de subir volumen al mismo tiempo",MovePictureWithFingerForbinocular:"Mueva los prismticos con el dedo para observar toda la imagen",MovePictureWithFingerForflashlight:"Mueva la luz con el dedo para observar toda la imagen",MovePictureWithFingerForkeyhole:"Mueva el ojo de la cerradura con el dedo para observar toda la imagen",InvalidCondition:"Activador no vlido, por favor, elimnelo",WrongLocationMessage:"Mensaje cuando el usuario hace clic en una ubicacin incorrecta",MoveToNextStepAutomatically:"Pasar al siguiente paso automticamente",Duplicate:"Duplicar",PleaseWaitLoadingAndGPSInit:"POR FAVOR ESPERE, INICIALIZACIN DE DATOS Y GPS",MoveToNextStepAutomaticallyDuration:"Segundos antes de pasar al siguiente paso",UseAModel:"Utilizo un modelo",AddToInventoryAndPass:"Aadir en el inventario y pasar este paso",holdVerticaly:"Para disfrutar de la mejor experiencia con la realidad aumentada, sostenga el telfono en posicin vertical.",startScan:"Iniciar exploracin",noSensorFound:"No se han encontrado sensores en su dispositivo",noSensorNext:"Puede ir directamente al siguiente paso pulsando en la flecha de la parte inferior derecha",UniqueUsageQRCodeWarning:"Tenga en cuenta que este cdigo no se puede utilizar con otra cuenta Graaly. Para utilizarlo en otro dispositivo, deber utilizar la misma cuenta Graaly.",arDialogTitle:"Autorizacin",arDialogMessage:"Para continuar, autorice a la aplicacin a utilizar funciones de su dispositivo",qrCodeAlreadyScan:"Ya ha probado este cdigo QR",qrCodeAlreadyGood:"Ya ha escaneado el cdigo QR correcto, vaya al paso siguiente",Audio:"Audio",TeamPlay:"Juego en equipo",TypeTeamPlayId:"Escriba el ID del juego si ha recibido uno.",OrderIsNotImportant:"El orden de las imgenes no es importante",DoNotPreventUserForHint:"No mostrar un mensaje de advertencia cuando el usuario llama a una sugerencia",DeleteQuestAndFolder:"La bsqueda y los archivos se eliminan",TextTooLongForStep:"Su texto es demasiado largo y podra afectar a la legibilidad en pantallas pequeas. Recomendamos {nb} caracteres para este tipo de paso. An desea guardar ?",FirstAndLastName:"Su nombre y apellidos",IconForSuccess:"Icono mostrado en caso de xito",SelectThisIcon:"Seleccione este icono",NoIcon:"Sin icono",CustomizeRightAnswerColor:"Personalice el color del mensaje de respuesta correcta",CustomizeWrongAnswerColor:"Personalizar el color del mensaje de respuesta incorrecta",Binoculars:"Prismticos",FlashLight:"Linterna",KeyHole:"Agujero de la llave",Shape:"Forma",DataHaveBeenRemoved:"Se han eliminado los datos",Private:"Privado",WarningInvitees:"Los invitados podrn jugar cuando se publique su partida",RemoveOfflineData:"Eliminar datos de juegos offline",DisplayTime:"Tiempo de visualizacin",DisplayGoodAnswers:"Mostrar el nmero de buenas respuestas",FaceCamera:"Cmara frontal",BackCamera:"Cmara trasera",CameraUsed:"Cmara utilizada",Error404:"Pgina no encontrada",ThreeLetterMin:"3 letras como mnimo",NotPublishedGames:"Juegos no publicados",EarningsGames:"Juegos Reanings",AwaitingGames:"Juegos pendientes de validacin",RejectedGames:"Juegos rechazados",StatisticGames:"Estadsticas de juegos",LimitationGames:"Juegos con limitacin",FindNothing:"No he encontrado nada para usted",AdminDelete:"Borrar",AdminName:"Nombre de la bsqueda",AdminAuthor:"Autor",AdminAccess:"Acceda a",AdminPremium:"Premium",AdminMail:"Correo electrnico",AdminRunCount:"Recuento de carreras",AdminSize:"Tamao total",AdminLastUpdate:"ltima actualizacin",AdminPrice:"Precio",AdminNotPrice:"No Precio",AdminQRCodeUsed:"QRCode utilizado",AdminEarning:"Ganancias",AdminPlayLimit:"Jugado/Lmite",AdminRemainingCredit:"Crdito restante",AdminPlayedWeekly:"Jugadas semanales",AdminPlayedMonthly:"Jugado mensualmente",AdminRating:"Clasificacin",AdminPlay:"Jugar",AdminValid:"Valide",EstimateTime:"Tiempo estimado",RedirectToNextChapter:"Redirigir al captulo siguiente",RedirectToChapter:"Redirigir al captulo",ObjectCombined:"Objeto combinado",CombineItems:"Combinar los artculos",MyGameIsIndoorRemoveWarningsOnStart:"Mi juego es de interior sin ningn riesgo, eliminar las advertencias en el arranque",YouCanOnlyUseThisFeatureInNewItemStep:"Slo puede utilizar esta funcin en los pasos de Nuevo objeto",YourCharacterOnMap:"Personaje en el mapa interactivo",AddACustomCharacterOnMap:"Aadir un personaje en el mapa",helpQuestCharacterOnMap:"Esto personaliza el marcador que muestra la posicin del usuario en el mapa interactivo",UploadTheLocatorPicture:"Suba una imagen para el mapa",ObjectInInventory:"El objeto est en el inventario",ObjectNotInInventory:"El objeto no est en el inventario",ResetChapterProgression:"Restablecimiento de la progresin para este captulo",GeolocationCouldNotBeRetrieved:"Ubicacin desconocida del jugador",GeolocationIsDeniedPleaseSkipThisStep:"Esta parte del juego requiere su ubicacin geogrfica, pero parece que ha denegado el acceso a su ubicacin a la aplicacin. Por lo tanto, este paso no puede mostrarse. Por favor, utilice el botn de la flecha derecha para jugar al siguiente paso.",HidePaiement:"Ocultar el precio (comunicado a los jugadores fuera de Graaly)",QRCodeAlreadyUsed:"Este cdigo QR ya est siendo utilizado por otra cuenta. Por favor, inicie sesin o pngase en contacto con el creador de este juego para obtener un nuevo cdigo.",GeolocationIssuePleaseSkipThisStep:"Esta parte del juego requiere su ubicacin geogrfica, pero Graaly no ha podido recuperarla, ya sea por un problema de permisos o de precisin. Por favor, asegrese de que ha permitido a la aplicacin Graaly acceder a su localizacin (comprobando los ajustes de su dispositivo) y de que su GPS est activado y calibrado (para calibrarlo, mueva su dispositivo en un movimiento de figura-8 unas cuantas veces). Actualmente, este paso del juego no se puede mostrar. Por favor, utilice el botn de flecha derecha para jugar al siguiente paso.",PrintQRCodePages:"Imprimir cdigos QR",AnswerNumber:"Nmero de la respuesta",QRCodeIsNotStartingOne:"Este no es el cdigo QR correcto. Busque el cdigo QR para iniciar el juego!",QRCodeIsNotPlayingOne:"Este no es el cdigo QR correcto",Loading2:"Cargando",Configuration:"Ajustes",Video:"Vdeo",UserCanNotQuit:"Los jugadores no pueden abandonar el juego",CharacterSize:"Tamao de la imagen (% del tamao de la pantalla)? 60% por defecto.",HideUserProgressionOnEnd:"Ocultar la barra de progresin del usuario",HideAuthorOnEnd:"Ocultar autor",HideObjectCombination:"Ocultar la opcin de combinar objetos en el inventario",ShakingEffect:"Efecto sacudida",HelpStepMessageCombinate:"Mostrar la ayuda de la combinacin de objetos",HelpStepMessageCombinateMessage:"En el inventario, puede combinar objetos con este botn",OrderHaveNotToBeRespected:"No hay que respetar el orden",PaymentOnYourSideWarning:"Atencin: al activar esta opcin, no podr utilizar el cdigo QR de la pestaa Publicar. Debe crear un cdigo QR por jugador en la pestaa Pago. Si desea utilizar un nico cdigo QR para todos los jugadores, puede crear una partida privada y no activar esta opcin.",MoveLeft:"Mover a la izquierda",MoveRight:"Muvase a la derecha",OrSelectACharacter:"O seleccione un carcter",AddAnotherCharacter:"Aadir otra escena",ChangeCharacter:"Cambiar el carcter",UploadImageBelowButton:"Mostrar una imagen debajo del botn",UpdateClones:"Actualizar pasos clonados",ModifyTheChapterTimer:"Ajuste la cuenta atrs del captulo en minutos (0 = sin temporizador)",YourChapterHasTimerButNoCountDonwTimerCondition:"Ha establecido un temporizador para este captulo pero no ha creado un paso con una condicin para el final del temporizador",seconds:"segundo(s)",DisplayFirstImageAsDefault:"No mostrar la primera imagen como la defaut",DoNotUserGeolocation:"Desactivar la geolocalizacin",qrCodeUsageDescription:"Debe imprimir un cdigo QR de un solo uso para cada jugador en la pestaa Pago que aparecer. Este cdigo QR ser vlido:",QRCodeValidOneTime:"Slo una vez (o 2 si los jugadores tienen que reiniciar el juego en otro telfono)",QRCodeValidOneDay:"Tantas veces como se desee durante 1 da (desde el primer escaneo del cdigo QR)",NumberOfOngoingPlay:"Nmero de juegos en curso",ChooseYourLanguage:"Elija su idioma",hideSoundPause:"Ocultar el botn de pausa del reproductor de audio",InvalidQuest:"Este juego no existe, an no ha sido publicado o ha sido desactivado.",creationOfQRCodes:"Creacin de cdigos QR",UserLanguageNotTheOneOfTheGame:"Este no es el idioma de tu cuenta Graaly. Quieres cambiar el idioma de tu cuenta?",PublishInAllLanguages:"Publicar en todos los idiomas",SelectLanguageForPublishing:"Elija el idioma de publicacin",AskToPublish:"Solicitar publicacin",QRCodeValidOneMonth:"Tantas veces como se desee durante 1 mes (desde el primer escaneo del cdigo QR)",NumberOfRemainingPlay:"Nmero de partidos restantes",NumberOfAllowedPlay:"Nmero de partidos permitidos",ContactUsForMorePlays:"Pngase en contacto con nosotros para aumentar el nmero de juegos permitidos",Credits:"Crditos (juegos disponibles)",CreditsBought:"Crditos comprados",CreditsOffered:"Crditos ofrecidos",CreditsUsed:"Crditos utilizados",CreditsRemaining:"Crditos restantes",CreditsToPay:"Crditos por pagar"}},fr:{color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc",gray:"Gris",pink:"Rose",purple:"Violet",orange:"Orange",yellow:"Jaune",brown:"Marron"},news:{newQuestWon:"A russi le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A cr le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre jeu <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous dfie sur le jeu <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos jeux durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est double durant 3 jours",infinitehint:"Indices illimits",infinitehintDesc:"Vous bnficiez d'indices infinis durant 1 jour","100coins":"+100 d'nergie","100coinsDesc":"Vous gagnez +100 en nergie","10coins":"+10 nergie","10coinsDesc":"Vous gagnez +10 en nergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vido",VideoDesc:"Vido d'explication, de prsentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Golocalisation",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question  choix multiples",ChoiceQuestionDesc:"Cocher la bonne rponse (texte ou image)",TextQuestion:"Rponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Code numrique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code compos d'images",ImageOverFlow:"Superposer image et camra / Photo souvenir",ImageOverFlowDesc:"Superposer une image transparente avec la camra",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pices",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser un objet",UseAnItemDesc:"Utiliser un objet de l'inventaire sur une image",LocateItemAR:"Ralit augmente",LocateItemARDesc:"Le joueur doit trouver un objet golocalis et visible sur l'cran de son smartphone lorsqu'il se trouve  proximit.",LocateMarker:"Scanner un QR Code",LocateMarkerDesc:"Le joueur doit trouver un QR Code.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Redirection / Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur  un nouveau chapitre",TriggerEvent:"Graaly -> Votre matriel",TriggerEventDesc:"Graaly dclenche une action sur votre matriel physique (utilisation d'une carte lectronique)",WaitForEvent:"Votre matriel -> Graaly",WaitForEventDesc:"Votre matriel active une tape Graaly (utilisation d'une carte lectronique)",HelpStep:"Page d'aide",HelpStepDesc:"Aide  l'utilisation de Graaly, prsentation des boutons.",PortraitRobot:"Portrait robot",PortraitRobotDesc:"Reconstituez le visage des suspects",PhoneCall:"Appel tlphonique",PhoneCallDesc:"Lancez un appel tlphonique vers un numro dfini",Binocular:"Jumelles",BinocularDesc:"Rechercher dans une image en utilisant des jumelles",IncrementCounter:"Incrmenter le compteur",IncrementCounterDesc:"Incrmenter un compteur que vous pouvez utiliser pour dclencher des tapes"},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Franais",es:"Espagnol"},status:{published:"publi",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dpubli",rejected:"rejet",new:"nouveau",used:"utilis",reused:"utilis 2x",rereused:"utilis 3x"},story:{hint:"Indice :<br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Visez le bon QR code avec la camra de votre tlphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la camra de votre tlphone. Un QR code est une figure carre compose de point noirs. Bonne chance !"},iotObjects:{keypad:"Digicode",joystick:"Joystick",distance:"Distance",pot:"Potentiomtres",lcd:"Afficheur LCD",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Coffre",button:"Bouton",relay:"Relais"},days:{day0:"Dimanche",day1:"Lundi",day2:"Mardi",day3:"Mercredi",day4:"Jeudi",day5:"Vendredi",day6:"Samedi"},snapshot:{share:"Partager",save:"Tlcharger",shareTitle:"Partage avec tes amis",fileDownload:"Cette image a t tlcharge",notSupported:"Cette fonctionnalit n'est pas supporte sur cette plateforme",imageSavedToGallery:"Cette image est enregistre dans votre galerie de photos",imageSavedFailed:"Une erreur s'est produite lors de l'enregistrement de votre photo"},samples:{sample1:"Jeu de piste linaire et simple",sample2:"Escape game avec des QR codes  trouver",sample3:"Escape game avanc"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",RejectedEmail:"Cette adresse email est dj utilise et/ou bloque",CreateAccount:"Crer un compte",AccountInfo:"Informations",ModifyAccount:"Modifier votre compte",ValidateAccount:"Validation",ErrorAccount:"Veuillez remplir tous les champs qui ont une *",AccountCreated:"Votre compte a ete cr",AccountModified:"Votre compte a ete modifi",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez ressayer",ForgottenPassword:"Mot de passe oubli ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Comment sont utilises vos donnes personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez slectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (ncessaire pour lister les jeux  proximit de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez ressayer",SignOutInProgress:"Dconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vrifier que vous avez du rseau et contacter le support si le problme persiste",YourAccountIsBlocked:"Votre compte est bloqu. Veuillez ressayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Gnrer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a t envoy",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractres min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",PasswordChangeSuccess:"Votre mot de passe  bien t modifi",YourAccountIsNowValidated:"Votre compte est maintenant valid",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte prsentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Jeux rsolus",QuestsCreated:"Jeux crs",CreateANewQuest:"Crer un nouveau jeu",PublishedSince:"Publi",Unpublished:"Non publi",NoQuestCreated:"Aucun jeu cr",NoQuestPlayed:"Aucun jeu rsolu",NoQuestPlayedLong:"Aucun jeu rsolu. Pour rsoudre un jeu, retournez  l'accueil !",PlayedOn:"Rsolue",Succeeded:"Russi !",ContinueThisQuest:"Vous n'tes pas all au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a t modifi. Si vous avez modifi votre adresse email, un message vient de vous tre envoy sur cette adresse pour la confirmer.",SignOut:"Dconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour dbloquer de nouvelles nigmes",MyLevel:"Mon niveau",Difficulty:"Difficult",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Trs difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position gographique, mais elle n'a pas pu tre rcupre.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : dplacez vous vers une zone dgage  l'extrieur",GeolocationDisabled:"Golocalisation dsactive sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramtres Systme</strong>, allez dans <strong>Scurit et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activ</strong>. Ceci peut changer lgrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Rglages</strong>, allez dans <strong>Confidentialit</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vrifiez que la localisation est active pour l'application Graaly dans la liste du dessous. Ceci peut changer lgrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points  gagner",SolveThisQuest:"Jouer",ContinueTheQuest:"Continuer le jeu",Language:"Langue",StartingPoint:"Lieu de dpart",Duration:"Dure",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",km:"km",NoQuestForThisSearch:"Aucun jeu ne correspond  votre recherche",NoPlayerForThisSearch:"Aucun joueur ne correspond  votre recherche",NoDesignerForThisSearch:"Aucun crateur ne correspond  votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas crer ce jeu ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",InventoryZoom:"Touchez un objet pour zoomer",noItemInInventory:"Encore aucun lment dans votre inventaire",ContinueThisStep:"Continuer ce jeu",YouAlreadyStartThisQuest:"Vous avez dj commenc ce jeu, voulez vous continuer  l'tape o vous vous tiez arrt ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette nigme",Hint:"Indice",Hints:"Indices",CreateYourQuest:"Nouveau jeu",CreateYourPrivateQuest:"Crez votre jeu prive !",CreateYourPublicQuest:"Crez votre jeu publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les rgles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Dmarrer, vous acceptez les rgles suivantes :<ul><li>Cette application peut tre utilise par un jeune public, votre jeu ne doit pas contenir de la violence, des images effrayantes, ou des rfrences au sexe, aux drogues,  l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, dplacer, dgrader les lieux visits</li><li>L'histoire de votre jeu ne doit pas porter atteinte  des personnes vivantes ou ayant exist</li><li>Votre jeu ne doit pas concerner un lieu pour lequel un jeu existe dj, sauf si le thme est suffisamment diffrent</li><li>Votre jeu doit faire plus de 6 tapes. Nous vous conseillons d'en crer moins de 70.</li><li>Vous devez possder les droits des images, vidos et sons que vous utilisez.</li><li>Les visuels doivent tre homognes (photos ralistes, desssins, ...).</li><li>Notre quipe de modrateurs validera si votre jeu respecte ces rgles et atteint un niveau de qualit suffisant. Dans le cas contraire, il vous sera demand d'amliorer votre jeu, ou il sera refus</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Dmarrer, vous acceptez les rgles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, dplacer, dgrader les lieux visits</li><li>L'histoire de votre jeu ne doit pas porter atteinte  des personnes vivantes ou ayant exist</li><li>Vous tes limit  30 invits (pour plus d'invits, veuillez nous contacter)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>En appuyant sur le bouton Dmarrer, vous acceptez les rgles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, dplacer, dgrader les lieux visits</li><li>L'histoire de votre jeu ne doit pas porter atteinte  des personnes vivantes ou ayant exist</li><li>Vous tes limit  200 invits (pour plus d'invits, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de crer trs simplement, et pas  pas, des jeux ludiques pour les autres joueurs. Ces jeux peuvent tre des jeux de piste ou des escape games",BuilderProIntro:"Crez votre jeu avec Graaly",BuilderChooseUserType:"Etes-vous :",BuilderAddRoomMessage:"<p>En ajoutant votre salle, vous pouvez bnficier gratuitement des services suivants :<ul><li>Visibilit dans notre annuaire</li><li>Statistiques</li><li>Lien vers votre page de rservation</li><li>Suggestion de votre salle  notre communaut</li></ul></p><p>Vos clients bnficient aussi de services gratuits : <ul><li>Trouvez vos salles autour d'eux</li><li>Suivre les escape games jous par leurs amis et les dfier sur vos salles</li><li>Sauver leurs succs pour gagner des points et dfier leurs amis</li></ul></p>",AProfessional:"professionnel",AProfessionalDesc1:"En tant que professionnel, vous avez accs  des fonctionnalits avances de Graaly (statistiques, personnalisation avance, montisation, QR code de dmarrage rapide ...)",AnIndividual:"particulier",AnIndividualDesc1:"En tant que particulier, vous pouvez aussi crer des jeux, avec tous les types d'nigmes Graaly, mais vous tes limit  30 participants.",TryForFree:"Tester gratuitement",FromPrice:"A partir de",PaymentOnUsage:"Paiement  l'usage",NewQuest:"Nouveau jeu",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catgorie",PleaseSelectACategory:"Veuillez slectionner une catgorie",Description:"Description",StartingPointOfTheQuest:"Adresse de dpart du jeu",MainLanguage:"Langue principale",UploadAPicture:"Tlcharger une photo",YourPicture:"Votre photo",Museum:"Muse",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Franais",English:"Anglais",Spanish:"Espagnol",QuestSaved:"Vos modifications sont enregistres",YourQuestIsPublished:"Votre jeu est publi",YourQuestIsUnpublished:"Votre jeu est repass en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette tape ?",AddAStep:"Ajouter une tape",TestYourQuest:"Tester votre jeu",PublishYourQuest:"Publier votre jeu",UnpublishYourQuest:"Dpublier votre jeu",SelectedLanguage:"Je cre mon jeu en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'tape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modle",NoneImmediate:"Aucun (immdiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer  l'tape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Rponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} rponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} rponses",KeepEnigmaQuestionsShort:"Le texte doit tre court pour tre facile  lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une tape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2  6 caractres (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez  nouveau.",PleaseUploadAFile:"Veuillez tlcharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Tlcharger une image",AddABackgroundImage:"Ajouter une image de fond",WarningImageResize:"L'image sera redimensionne au format d'un tlphone (format portrait)",UploadAVideo:"Tlcharger une vido",NoVideoUploaded:"Aucune vido tlcharge",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flches de direction",ResponseTypes:"Types de rponse",PossibleAnswers:"Rponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne rponse",NoPictureUploaded:"Aucune image tlcharge",AddAnAnswer:"Ajouter une rponse",ExpectedAnswer:"Rponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Tlchargez l'image de la chose  trouver",UploadTheObjectToFind:"Tlchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image tlcharge",UploadThePuzzlePicture:"Tlcharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadre pour tre carre",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Slectionnez la partie de l'image o l'objet doit tre utilis",UploadTheItemPicture:"Tlcharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet  utiliser",SelectedObject:"Objet slectionn",ClickOnTheItemThatIsToFind:"Slectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistre",TechnicalIssue:"Problme technique, veuillez vrifier que vous avez du rseau et r-essayer plus tard",TechnicalProblem:"Problme technique",SaveThisStep:"Enregistrer cette tape sans tester",SaveAndTestThisStep:"Enregistrer et tester cette tape",GraalyIsOptimizedForSmallerScreens:"L'application est optimise pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperu",Submit:"Valider",GoodAnswer:"Bonne rponse !",WrongAnswer:"Mauvaise rponse !",Next:"Suivant",SecondTry:"Mauvaise rponse. Il vous reste {nb} essai(s)",SecondTryOnTry:"Mauvaise rponse. Il vous reste 1 essai",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Rat ! Le bon code tait :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparatra dans cette case",Cancel:"Annuler",Check:"Vrifier",TakeThePicture:"Prendre la photo",WellDone:"Bien jou !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu  trouver : {distance} mtres",YouHaveFoundThePlace:"Bravo ! Vous avez trouv",points:"points",Pass:"Passer",YourAnswer:"Votre rponse",ConfirmTheAnswer:"Valider la rponse",PleaseSelectAnItemFirst:"Slectionnez un objet dans votre inventaire d'abord (bouton en bas  gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par crer une tape pour votre jeu",AddYourChapters:"Commencez par crer un chapitre, et ajoutez y les premires pages de votre nigme",ActivateTheLanguageVisible:"Activez les langues pour que votre jeu soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invits puissent jouer",LanguagesPublished:"Publier le jeu en",LanguagesPublishedForPrivate:"Publier le jeu pour les invits (ou via le QR code ci-dessous)",PageLanguagesPublished:"Publier la fiche en",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter le jeu",YouHaveWinANewItem:"Vous avez trouv un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette nigme",Ok:"Ok",ConfirmHint:"En utilisant l'indice, vous gagnerez moins de points, tes-vous sr(e) de vouloir l'utiliser ?",YouWin:"Vous avez gagn",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Donnez votre avis",ShareYourSuccess:"Partagez votre russite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez dj gagn prcedemment les points de ce jeu",ResolveOtherQuestsToWinPoints:"Rsolvez de nouveaux jeux pour gagner des points",ChallengeYourFriends:"Dfiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette tape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit o vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Votre classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualit pour le moment",BuyCoinsToPlay:"Acheter de l'nergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu tre pris en compte. Peut-tre avez vous dj not ce jeu",YourRatingHasBeenSaved:"Votre vote a t pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de dpart",OpenLocationSettings:"Ouvrir les paramtres de localisation",LocationToFind:"Lieu  trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnes GPS",DefineGPSLocation:"Tapez les coordonnes GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez tlcharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnes GPS",TerritoriesWon:"Conqute de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Russissez tous les jeux d'une ville pour obtenir toutes les rcompenses",NoRankingYet:"Votre classement n'est pas encore calcul, veuillez attendre demain",Challenge:"Dfier",ChallengeAllFriends:"Dfier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre jeu n'est plus modifiable. Votre jeu va tre valid par nos game masters. Cela peut prendre quelques jours. Veuillez vrifier votre bote mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejete. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre jeu n'a pas t publie. Vous allez recevoir un email vous expliquant comment l'amliorer pour permettre sa publication",TouchTheObject:"Vous y tes ! Levez votre tlphone et touchez l'lment  trouver",ObjectSize:"Taille de l'objet",TouchDistance:"L'objet peut tre touch  moins de...",YouWonABonus:"Vous avez gagn un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modle 3D",ObjectIsTooFar:"L'objet est trop loign pour tre visible  l'cran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernire image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez dfinir l'adresse du point de dpart du jeu",ClickOnArrowToMoveToNextStep:"Appuyez sur la flche en bas  droite pour passer  l'tape suivante.",YourQuestMustContainAtLeast6Steps:"Votre jeu est trop court, vous devez crer au moins 3 tapes",YourQuestMustContainLessThan50Steps:"Votre jeu est trop long, vous devez crer moins de 100 tapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez  charger votre mobile pour jouer",WarningNoNetwork:"En attente du rseau ...",WarningLowNetwork:"Rseau faible, veuillez patienter ...",CouldNotDisplayObject:"Dsol, une erreur est survenue au chargement de l'objet  trouver, il ne peut donc pas tre affich. Veuillez redmarrez l'application. Si le problme persiste, passez cette tape.",CouldNotEnableAR:"Nous n'avons pas pu dtecter l'orientation de votre tlphone.",Step:"Etape",EasyLongDesc:"Facile, tout public mme jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficults",HardLongDesc:"Expert, pour les fans d'nigmes",RemoveThisQuest:"Supprimer ce jeu",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sr(e) de supprimer ce jeu ? Il sera dfinivement supprim.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un diteur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'diteur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dpasse ou cette personne doit crer un compte Graaly.",EditorIsNotAGraalyUser:"Limite dpasse ou cette personne doit crer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Slectionner l'objet dans la liste",HintText:"Texte de l'indice",NewHint:"Indice supplmentaire","2DPicture":"Image  plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Crer un jeu",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnes GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Tlcharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complmentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",FriendsAdded:"Vous suivez cettte personne maintenant",InvitationSent:"Invitation envoye",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numro de tlphone",InvalidPhoneNumber:"Numro invalide",AreYouSureYouWantToRemoveThisFriend:"tes-vous certain(e) de ne plus vouloir le/la suivre",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de tlephone",YourPhoneNumber:"Votre numro de tlphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous tes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux camra",GeolocationFailed:"Impossible de vous golocaliser",GeolocationFailedDesc:"Nous n'avons pas russi  vous golocaliser, soit vous n'avez pas de rseau, soit vous avez bloqu la golocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon QR code avec la camra de votre tlphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la camra de votre tlphone. Un QR code est une figure carre compose de point noirs. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Crez votre profil !",WeNeedMoreInformationAboutYouDesc:"C'est simple et a vous dbloque des fonctionnalits utiles",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres donnes, et vous ne pourrez plus vous connecter  l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",ConfirmDeleteAccount:"Confirmer la suppression",AreYouSureYouWantToRemoveYourAccount:"tes-vous srs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprim",CreateMyAccount:"Crer mon compte",IAlreadyHaveAnAccount:"J'ai dj un compte",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoy  l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note au jeu avant d'envoyer votre avis.",QuestNotReviewed:"Ce jeu n'a pas encore reu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour dmarrer le jeu de dcouverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(a,'" target="_blank">').concat(a,'</a> ou nous contacter  <a href="mailto:').concat(s,'">').concat(s,"</a>."),GeolocationNotSupported:"Dsol, votre appareil ne permet pas la golocalisation.",TechnicalErrorReloadPage:"Problme technique, appuyez pour relancer",NetwordkErrorReloadPage:"Problme rseau ! Nous allons essayer de recharger la page dans 15 secondes.",TechnicalProblemNetworkIssue:"Veuillez vrifier que vous avez du rseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Rejouer du dbut",BackToQuest:"Retour au jeu",min:"min",pts:"pts",SportQuest:"jeu nature",DiscoveryQuest:"jeu dcouverte",CulturalQuest:"jeu culturel",ChildQuest:"jeu pour enfants",TransportQuest:"jeu en moyen de transport",ShopQuest:"Dcouverte de commerces",EnterpriseQuest:"Dcouverte d'entreprise",NightQuest:"jeu nocturne",ExtremQuest:"jeu extrme",CulinarQuest:"jeu culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la ractiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redmarrer l'aide",DurationBeforeTextAppearAbovePicture:"Dure avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s)  gagner",YouAlreadyPlayedThisQuest:"Vous avez dj russi ce jeu (aucun point  gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour ce jeu",CloseQuestRanking:"Retour au jeu",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour au jeu",NoFriendsLong:"Vous ne suivez encore personne",IAgreeTheTermsAndConditions:'Je suis d\'accord avec les <a class="text-primary" href="javascript:(navigator.app ? navigator.app.loadUrl(\''.concat(o.terms.fr,"', { openExternal: true }) : window.open('").concat(o.terms.fr,"'))\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:'Je suis d\'accord avec la <a class="text-primary" href="javascript:(navigator.app ? navigator.app.loadUrl(\''.concat(o.privacy.fr,"', { openExternal: true }) : window.open('").concat(o.privacy.fr,"'))\">politique d'utilisation des donnes personnelles</a>"),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialit pour utiliser Graaly",TermsAndConditionsLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(o.terms.fr,"', { openExternal: true }) : window.open('").concat(o.terms.fr,"'))\">Conditions d'utilisation</a>"),PrivacyPolicyLink:"<a href=\"javascript:(navigator.app ? navigator.app.loadUrl('".concat(o.privacy.fr,"', { openExternal: true }) : window.open('").concat(o.privacy.fr,"'))\">Politique d'utilisation des donnes personnelles</a>"),DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune tape ?",FollowStep:"Suit l'tape",StepSuccess:"Bonne rponse ",StepFail:"Mauvaise rponse ",StepRandom:"Alatoirement aprs",StepCounter:"Le compteur  la valeur ",StepCounterGreater:"Le compteur est suprieur  ",StepCounterLower:"Le compteur est infrieur  ",StepCombineObject:"(BETA) Objet combin ",StepHaveObject:"(BETA) Objet est dans l'inventaire ",StepNotHaveObject:"(BETA) Objet n'est pas dans l'inventaire ",StepAnswerNb:"(BETA) Rponse N au QCM",StepChapterTimerOver:"(BETA) Le compte  rebours du chapitre est fini",NoCondition:"Aucune condition (dmarre au dbut du chapitre)",Conditions:"Dclencheurs",AddACondition:"Ajouter un dclencheur",ConditionType:"Type de dclencheur",ConditionValue:"Valeur du dclencheur",YourStepCanOnlyFollowOneStep:"Votre tape ne peut suivre qu'une seule autre tape",ThisStepIsTriggeredWhen:"Cette tape est affiche quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des tapes. Veuillez supprimer les tapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette tape n'est pas visible par les joueurs. Vous pouvez passer  l'tape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez crer une tape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les tapes suivantes n'ont pas de dclencheur. Seul la premire tape d'un chapitre peut ne pas avoir de dclencheur",FollowingStepsHaveInvalidCondition:"Des tapes ont des conditions invalides (dpendent probablement d'tapes manquantes, ou vous avez cr une chane impossible, comme une condition circulaire)",FollowingStepsHaveNoValidParent:"Les tapes suivantes ont un dclencheur incorrect",IssuesInYouQuest:"Problmes de votre jeu",IssuesInYourStep:"Problmes de votre tape",DisplayRightAnswer:"Afficher la bonne rponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une tape dans ce chapitre",ScanTheMarkersLikeThat:"La marque  trouver et  scanner avec votre tlphone a une forme similaire ",ScanTheMarkersLikeThat2:"Pour scanner un QR code, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre  jour votre application Graaly pour continuer  l'utiliser",SorryAnErrorOccurs:"Dsol, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez crer un nouveau brouillon pour ce jeu. Si votre jeu est dj publi, cette version restera accessible aux joueurs, jusqu' ce que vous publiiez cette nouvelle version de votre jeu.",ClickHereToCreateANewQuestVersion:"Pour modifier votre jeu, cliquez ici",YourUnderValidationQuests:"Vos jeux en cours de validation",YourRejectedQuests:"Vos jeux rejets",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos jeux publis",QuestDraftVersion:"Version du jeu non publie",PageDraftVersion:"Page non publie",PrivateQuest:"Jeu priv",PublicQuest:"Jeu public",Invitees:"Invits",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configure pour votre jeu, voulez-vous l'ajouter ?",Results:"Rsultats",Result:"Rsultat",ClosePrivateQuest:"Clore le jeu",ClosePrivateQuestDesc:"En cliquant ici, votre jeu ne sera plus jouable. Vous aurez alors accs aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sr(e) de clore ce jeu ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a jou  ce jeu",NoPlayersYetForThisQuest:"Encore aucun joueur pour ce jeu",PrivateQuestDesc1:"Votre jeu est destin  votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous crez un jeu pour faire dcouvrir un lieu, une activit, une entreprise.",PublicQuestDesc2:"Une fois valid par les games masters, ce jeu sera visible et jouable par tous",PublicProQuestDesc1:"Votre jeu est jouable par tous les joueurs Graaly. A ce titre, nous sommes plus exigeants sur la qualit du jeu au moment de sa publication (visuels, sons, personnages, nigmes, ...).",PublicProQuestDesc2:"<p>Si votre jeu est payant pour les joueurs, vous pouvez soit utiliser le systme de paiement intgr  Graaly soit grer vous mme le paiement</p><p>Concernant le systme de paiement intgr, Google/Apple prennent 30% des revenus</p><p>Dans tous les cas Graaly conserve 30% des revenus</p><p>Le reste est pour vous, soit de 40%  70% des revenus.</p><p>Graaly vous reverse votre part mensuellement</p><p>Si votre jeu est gratuit pour les joueurs, Graaly vous facture mensuellement 0,25  HT par joueur, soit moins que le facicule papier que vous devrier acheter sans application mobile</p><p>Vous pouvez dsactiver votre jeu  tout moment</p><p>Contactez-nous  contact@graaly.com pour plus d'information</p>",PrivateProQuestDesc1:"C'est vous qui invitez vos joueurs, via un QR code gnrique, ou un QR code  usage unique par participant.",CreatePrivateQuest:"Crer un jeu priv",BuyPrivateQuest:"Acheter un jeu priv",OnlyBuyableOnMobile:"Seulement disponible sur mobile",AcceptAndBuyAPrivateQuest:"Acheter un jeu priv",CreatePublicQuest:"Crer un jeu public",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour ce jeu",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre jeu est clos, et ne peut plus tre publie",YourQuestContainsErrorsInSteps:"Votre jeu prsente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type de jeu",helpQuestType:"Un jeu de piste comporte une liste d'nigme qui se suivent de faon linaire. Un jeu propose des nigmes qui peuvent tre rsolue dans un ordre non dfini, la rsolution de plusieurs nigmes dbloquent d'autres nigmes. Si vous tes nouveau sur Graaly, nous vous conseillons de commencer par un jeu de type jeu de piste. Vous pouvez transformer un jeu de piste en escape game, mais pas le contraire.",basicEditor:"Jeu de piste (diteur simple)",advancedEditor:"Escape game (diteur avanc)",UsedOver:"{current} utiliss sur {limit}",QuestMedia:"Fichiers du jeu",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre jeu",Feedback:"Vos commentaires",Back:"Retour",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire  l'auteur du jeu, ou noter le jeu, attendez la page de fin du jeu. Si vous souhaitez contacter l'quipe Graaly, pour par exemple signaler un contenu inappropri dans ce jeu, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a t envoy",BackToBuilder:"Retour  la cration du jeu",OrDownloadAFile:"Ou tlchargez votre image",UploadACharacter:"Tlcharger un personnage",LoadingQuestDataForOfflineMode:"Prparation de votre jeu ...",ErrorOfflineSaving:"Problme technique, vous ne pourrez pas jouer ce jeu sans rseau",QuestNeedNetwork:"Il vous faut du rseau mobile pour lancer ce jeu. Recherchez du rseau, et cliquez sur le bouton ci-dessous pour relancer le chargement du jeu",ReloadQuest:"Recharger le jeu",ConnectToComputeScore:"Je suis connect, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre russite et votre score, vous devez vous reconnecter au rseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans rseau",Downloading:"Chargement ...",Loading:"Chargement ...",YouAreOfflineNoQuestsAvailable:"Dsol, il n'y a pas de jeu disponible pour tre jou hors ligne.",ButtonsColor:"Couleur de la barre de boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible ds demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous suivez dj cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas tre ami avec vous mme",TooMuchFriends:"Vous ne pouvez pas suivre plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagn !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avanc. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Tlchargement termin. Vous pouvez dsormais jouer ce jeu sans rseau.",GoToQuestValidation:"Aller  la validation",SessionExpired:"Votre session a expir, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez rduire sa taille",PremiumQuest:"jeu Pro",MovePremium:"Passer ce jeu en mode pro",PremiumDefinition1:"Donnez plus de valeur  votre jeu !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Un jeu plus personnalis  vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser le jeu avec votre logo et vos couleurs, ... </li><li><u>Un jeu rentable</u> : Vous pouvez gagner de l'argent en rendant votre jeu payante</li><li>Vous pouvez accder aux statistiques de votre jeu</li><li>Vous bnficiez du support de notre quipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos jeux en mode pro, contactez nous  sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalit, vous devez passer ce jeu en mode premium (voir dans les paramtres de votre jeu)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de parties joues",NumberOfPlayersYesterday:"Hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",AverageDuration:"Dure moyenne (min)",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont cr des jeux pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore crer {nb} jeu(s) pro(s)",YouCanNotCreateNewQuests:'Vous ne pouvez plus crer des jeux pro. Souscrivez  nos offres professionnelles sur <a href="'.concat(a,'" target="_blank">').concat(a,'</a> ou contactez-nous  <a href="mailto:').concat(s,'">').concat(s,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Paying:"Payant",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer ce jeu sur un appareil mobile",QuestPlayableOnMobile:"Ce jeu se joue sur mobile",PuzzleHelpText:"Dplacez les pices pour les rordonner",ClickToEnlargePictures:"Appuyez sur les images pour les largir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre tlphone pendant 3 secondes pour une meilleure prcision GPS",TakeMobileVertically:"Tenez votre tlphone verticalement et recherchez",null:"Indfini",TooMuchOfflineLoadingErrors:"Le chargement du jeu n'a pas fonctionn. Vous pouvez jouer le jeu si le rseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annul le chargement du jeu, le jeu ne fonctionnera pas si vous perdez le rseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggrer un jeu",SuggestANewQuest:"Suggrer un nouveau jeu",YouLikedThisQuest:"Vous avez aim ce jeu ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour dcouvrir un lieu en jouant, ou pour motiver vos enfants ou lves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Muse du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou tlphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En compltant ce formulaire, vous nous aidez  identifier les jeux les plus demandes pour contacter les responsables des lieux concerns. Vous serez ensuite inform si un jeu est cre sur ce lieu.",InsertAStepAfter:"Insrer une tape aprs",QuestUpdated:"Le jeu a t modifi",PleaseRestartQuest:"Merci de rejouer le jeu depuis le dbut.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette tape n'est jouable qu' partir de cette date",ThisStepIsAvailableIn:"Cette tape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pice  bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scanner un QR Code",ScanQRCode:"Scanner un QR Code",MarkersToPrint:"QR Codes du jeu",MarkersToStartQuest:"Les joueurs peuvent jouer en scannant ce QR Code sur la page de login de Graaly",SaveQuestResultsMarker:"Vos joueurs peuvent scanner un QR Code pour enregistrer leur score dans Graaly (sur la page de login ou sur la page d'accueil). Pour les joueurs qui sont sortis de la salle dans les temps<br /><img src='{url3}' /><br />Pour les joueurs qui sont presque sortis dans les temps<br /><img src='{url2}' /><br />Pour les joueurs qui ne sont pas sortis<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Cette action ne peut tre annule",AddAReward:"Tlcharger une rcompense",Reward:"Rcompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit tre en rouge, sinon pensez  utiliser une image avec un fond transparent. Si une partie de votre image est coupe, tlchargez une image au format carr.",YouWonAReward:"Bravo, vous avez gagn un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres rcompenses en jouant aux autres jeux dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut tre trop gros ou n'a pas le bon format. Veuillez ressayer avec une image plus petite",helpQuestLogo:"Votre logo apparatra dans un bulle en bas de l'cran de jeu. Suivant les crans, la bulle peut tre assez petite, choisissez une image avec peu de dtails.",helpQuestReward:"Les joueurs pourront gagner un badge  la fin du jeu. Cela les motive  jouer  votre jeu. Pour proposer un badge en rcompense, tlchargez une image reprsentant le badge, avec un fond transparent (format .gif ou .png)",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouv",CreateYourAccountMsg:"Crez votre compte pour sauvegarder votre score et jouer avec vos amis !",MaybeLater:"Peut-tre plus tard !",LetsPlay:"Jouez",NewAccount:"Nouveau compte",PleaseAcceptDeviceMotionPermissionRequest:"Veuillez accepter que l'application accde aux mesures des mouvements de votre appareil, afin de pouvoir jouer cette partie du jeu",PleaseAcceptDeviceOrientationPermissionRequest:"Veuillez accepter que l'application accde aux mesures de l'orientation de votre appareil, afin de pouvoir jouer cette partie du jeu",DoYouWantToCreateAnAccount:"Pour crer un jeu, vous devez crer votre compte. Souhaitez-vous crer votre compte Graaly ?",UserWithSameEmailAlreadyExisting:"Un compte existe dj avec cet email",PasswordTooWeak:"Votre mot de passe doit etre au 8 caractres, contenir une majuscule et un chiffre",AreYouSureYouWantToPublishThisQuest:"Etes-vous sr de demander la publication de votre jeu ? Vous ne pourrez plus faire aucun changement jusqu' ce que l'quipe Graaly confirme votre demande",YourCharacter:"Personnage personnalis",AddACustomCharacter:"Ajouter un personnage",helpQuestCharacter:"Ce personnage s'affichera quand un joueur demandera un indice ou affichera un En savoir plus",AvailableColors:"Couleurs disponibles",TypeColorCode:"Entrez le code couleur. Ex: #ff55cc",TypeColorCodeName:"Entrez le nom de la couleur. Ex: Rouge",AddNewColor:"Ajoutez une nouvelle couleur",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Vous n'tes pas sur le lieu du jeu</b>.<br />En rsolvant ce jeu  distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez dj russi ce jeu</b>. Vous pouvez le rsoudre  nouveau, mais il ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous tes diteur de ce jeu, il ne vous rapportera aucun point, et vous ne pourrez pas y jouer en mode offline",GeneralWarning:"<b>Pour votre scurit</b>, ne jouez pas au jeu en conduisant ou quand votre vlo est en mouvement, soyez toujours vigilant  ce qui se passe autour de vous, ne pntrez pas dans des proprits prives sans autorisation, respectez les rgles de scurit quand vous vous dplacez.",RemoveScoringAndRating:"Remplacer l'cran de fin par un texte",TypeEndMessage:"Texte de fin qui remplace l'cran de score et de notation",TypeEndMessageForPerfectScore:"Texte de fin personnalis si le joueur a toutes les bonnes rponses",ThanksForPlaying:"Merci d'avoir jou  ce jeu. A bientt pour d'autres jeux !",EnlargePictureToFullWidth:"Elargir l'image en plein cran (dformer)",EnlargePictureToFullHeight:"Elargir l'image en pleine hauteur",PlayerCanTakeSnapshot:"Le joueur peut prendre des photos",SnapshotTaken:"Capture enregistre dans vos photos",SnapshotTakenIssue:"Impossible de faire une capture automatique. Vous pouvez faire une capture d'cran manuellement avec votre appareil.",NbTrials:"Nombre d'essais",UserCanPass:"Le joueur peut passer l'tape",Welcome:"Bienvenue !",SignIn:"Connexion",Subscribe:"S'inscrire",EmailAlreadyUsed:"Cette adresse email est dj utilise. Connectez-vous ou demandez une modification de votre mot de passe",AroundYou:"Autour de vous",SeeMore:"Voir plus",AllQuests:"Tous vos jeux",SearchForStart:"Utilisez la recherche pour commencer",Designers:"Crateurs",Difficulty1:"Simple",Difficulty2:"Normal",Difficulty3:"Difficile",ClosestQuestToYou:"Jeu proche de vous",YouAreNearThisQuest:"Jeu le plus proche de vous",YouAreInvitedToThisQuest:"Vous tes invit  ce jeu",CreatedByGraaly:"Cres avec Graaly",FriendsQuests:"Jous par amis",ScoreAndBadges:"Score et badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"Sur ce jeu, vous pouvez gagner :",ScoreRange:"Entre {min} et {max} points",InProgressPreparation:"Prparation en cours",Warnings:"Mises en garde",Follow:"Suivre",Followed:"Suivi(e)",SolvedQuests:"Jeux rsolus",Creations:"Crations",CreationStudio:"Studio de cration",Badges:"Badges",FollowYourFriends:"Suivre vos amis",CreatedYourFirstQuest:"Crez votre premier jeu",DoNotFollowAnymore:"Ne plus suivre",AllTheseDataAreOptional:"Toutes ces donnes sont optionnelles",DataCountry:"Votre pays : utilis pour afficher les bons jeux pour vous",DataZipcode:"Votre code postal : utilis pour afficher les bons jeux pour vous",DataSex:"Votre sexe : utilis pour afficher les bons jeux pour vous",DataAge:"Votre age : utilis pour viter certains jeux non adapts  votre age",DataPhone:"Votre numro de tlphone : utilis pour vous connecter avec vos amis",EscapeGame:"Escape game",EscapeGames:"Vos Escape games",Players:"Joueurs",YouHaveReachAScore:"Vous avez un score de {score} points",LevelReached:"Niveau atteint !",PointsToReachLevel:"{score} points  atteindre",Friends:"Amis",World:"Mondial",MyCountry:"Mon pays",MyCity:"Ma ville",NoRanking:"Encore aucun classement",Invitations:"Invitations",YouFollowThem:"Vous suivez",AddYourRoomInTheDirectory:"Rfrencez votre salle dans l'annuaire",AddYourRoom:"Ajoutez votre salle",ProAddYourRoom:"Vous pouvez ajouter vos salles dans Graaly et bnficier de nombreux services gratuits",YourRoom:"Votre salle",PriceFrom:"Prix par joueur  partir de",ReadMoreLink:"Lien vers la page de rservation",SmallPicture:"Petite image",SeeYourQuestPage:"Visualiser la page",FromPricePerPlayer:"A partir de {price} par joueur ou partie",Book:"Rserver",YourBadges:"Vos badges",YouDoNotHaveBadgesYet:"Vous n'avez pas encore de badges. Pour gagner des badges, il vous faut rsoudre des jeux qui proposent des rcompenses.",FollowedPeople:"Personnes suivies",WeNeedYourPositionForThisFeature:"Nous avons besoin de votre position pour cette fonctionnalit",OtherCharacters:"Autres personnages",BackToTheMap:"Accueil",or:"ou",RefreshCacheRequired:"L'application en cache sur votre navigateur est obsolte. Veuillez passez en navigation prive pour rafraichir votre cache",FindFriendManually:"Trouvez vos amis manuellement",NoQuestAroundYou:"Nous n'avons trouv aucun jeu autour de vous",CachedQuests:"Dj tlcharg(s)",YourPresentation:"Prsentez-vous",DuplicateThisQuest:"Dupliquer ce jeu",DoYouWantToOpenClonedQuest:"Voulez-vous modifier le nouveau jeu maintenant ?",OpenTheMap:"Carte des jeux",ReplacePictureByRedFilter:"Remplacer l'image par un filtre rouge",TotalNumberOfPlaysNotFinished:"Nombre de parties en cours",RoomDataWarning:"Certaines informations peuvent tre obsoltes, n'hsitez pas  aller sur le site de l'escape game pour plus d'informations",AnonymousUser:"Joueur anonyme",NotWon:"A gagner",OnTopGames:"Jeux du moment",ThisStepOnlyWorkOnMobile:"Le scan de QR code ne fonctionne que sur l'application mobile",YourQuestHasNotBeenPublished:"Votre escape n'a pas t publi",OnDesktopDisplayMessage:"Sur ordinateur, vous devez rduire la taille de votre cran. Vous pouvez taper sur la touche F12 pour cela.",EventCode:"Code de l'vnement",BoardMacAddress:"Adresse Mac de la carte",SuccessMessage:"Message de russite",YourTime:"Votre temps",LimitNumberOfPlayerInOneHour:"Limiter le nombre de joueurs par heure (0 = illimit)",TooMuchUsersCurrently:"Trop de joueurs actuellement",OrSelectAnImageInTheList:"Ou slectionnez une image dans la liste",IotObject:"Objet connect",Protocol:"Protocole",SuccessRange:"Plage de succs",SuccessRanges:"Plages de succs",WriteTextWarning:"Accents et majuscules ne sont pas ncessaires",DistanceToWin:"Le joueur gagne quand il est  la distance suivante du lieu (m)",SplitMessageWithPipe:"Ajouter le signe '|' pour sparer votre texte dans plusieurs bulles",ClickHere:"Cliquez ici",FollowTheCreator:"Suivez le crateur",PlayersNumber:"(BETA) Nombre de tlphones requis pour jouer",helpQuestMultiplayer:"Cela dfini le nombre de joueur minimum pour que le jeu soit jouable. Chaque joueur devra avoir un tlphone, et aura un rle diffrent dans le jeu. Pour plus d'informations sur le mode multijoueur, regardez nos tutos Youtube",ThisIsAMultiplayerGame:"Ce jeu se joue en quipe",JoinATeam:"Rejoindre une quipe",ScanTheLeaderQRCode:"Scanner le QR Code du leader",CreateATeam:"Crer une nouvelle quipe",TeamName:"Nom de l'quipe",CreateTeam:"Crer l'quipe",OtherPlayersMustScanThisQRCode:"Les autres joueurs doivent scanner ce QR Code pour rejoindre votre quipe",ThisIsNotATeamQRCodeValid:"Ce code n'est pas valide ! Vous devez scanner le code qui s'affiche sur le smartphone de la personne qui a cr l'quipe",MyTeamIsCompleteLetsGo:"L'quipe est au complet, allons-y !",YouNeedMoreMembersToPlay:"Votre quipe doit tre compose au minimum de {nb} membres. Membre(s) actuel(s) : {members}",Team:"Equipe",WaitingForOtherUsersActions:"En attente des autres joueurs",WaitingForOtherUsersActionsDesc:"Vous ne pouvez pas avancer tant que les autres joueurs n'ont pas russi leurs nigmes",Player:"Joueur",All:"Tous",YouNeedToBeXPlayers:"Vous devez tre au moins {nb} pour jouer",YouNeedAtLeastXEditorsToTest:"Vous devez avoir {nb} diteurs pour tester ce jeu multijoueur (voir onglet Mise en ligne)",HereAreTheTesters:"Ce jeu est multijoueur, il sera test par : {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Affichage de mon image sur diffrents types de tlphones",MyPictureIsNotDisplayedWell:"Mon image s'affiche mal",MyPictureIsNotDisplayedWellDesc:"<b>Si votre image est mal cadre sur toutes les tailles</b>: Il faut que votre image soit dans un format 900 pixels par 1200 pixels.<br /><b>Votre image n'est pas correcte sur la taille du centre</b>: Il faut que votre image prsente une partie non utile sur 100 pixels  droite et  gauche de votre image. Vous pouvez ajouter une bordure noire de 100 pixels autour de votre image par exemple",RestartQuest:"Redmarrer le jeu",AreYouSureToRestartThisQuest:"Etes-vous sr de redmarrer ce jeu ? Vous ne gagnerez aucun point en redmarrant le jeu.",PaymentOnMobile:"Paiement sur mobile",PaymentOnMobileHelp:"Le paiement est trs simple pour les joueurs, juste en pressant un bouton. Cependant Google / Apple prennent 15% des revenus de votre jeu.",PaymentOnYourSide:"Paiement ralis par vous",PaymentOnYourSideHelp:"Vous pouvez collecter le paiement dans votre boutique. Pour dmarrer les joueurs devront scanner un QR code  usage unique, que vous gnrez via l'onglet Paiement qui apparaitra dans cette page aprs validation",Payments:"Paiements",CreateNewQRCodeForPlay:"Crer un nouveau QR Code pour un joueur qui a pay",Create10NewQRCodeForPlay:"Crer 10 nouveaux QR Codes",Create50NewQRCodeForPlay:"Crer 50 nouveaux QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Etes-vous sr de supprimer ce code ? Si vous avez envoy ce code  un joueur, il ne pourra plus jouer !",BuyThisQuest:"Acheter ce jeu",YouHaveReceivedAQrCodeFrom:"Vous avez reu un QR code de {author}",ScanTheUniqueQRCode:"Scanner le QR code  usage unique",BuyInOneClick:"Achetez en un clic",TechnicalIssueOrCodeAlreadyUsed:"Ce QR code a dj t utilis par un autre compte. Veuillez vous connecter ou contacter le crateur du jeu pour obtenir un autre code.",ChangeTheBackgroundImageOnceClicked:"Changez l'image de fond quand le joueur a cliqu",Message:"Message",Frequency:"Frquence",TriggerTheEvent:"Dclencher l'action",SearchingBluetoothDevice:"Recherche de l'appareil Bluetooth...",KeypadInput:"Saisie digicode",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Ouvrir",ChestActions:"Actions sur le coffre",TriggerMode:"Mode de dclenchement",TriggerModeAuto:"Auto (au chargement de l'tape)",TriggerModeManual:"Manuel (le joueur doit toucher un bouton)",helpPlayer:"Pour chaque tape d'un jeu multijoueur, vous devez slectionner le joueur qui verra cette tape. Les autres joueurs ne le verront pas, et auront un message d'attente jusqu' que le joueur rsolve l'nigme. Vous pouvez afficher une tape de type transition pour tous les joueurs, mais vous ne pouvez afficher une nigme que pour un joueur. Si vous souhaitez que tous les joueurs rsolvent la mme nigme, vous devez crer une tape pour chaque joueur. Pour plus d'information, regardez nos tutos Youtube.",ErrorMessageForNewTeamMember:"Problme technique ou nombre de joueurs atteint",YouNeedToUnpublishYourQuestToRemoveIt:"Vous devez dpublier vote jeu pour le supprimer",PleaseEnterYourTeamName:"Veuillez entrer le nom de votre quipe",Version:"Version",CountDownLabel:"Limite de temps de lnigme",CountDownIsActive:"Entrez la limite de dure pour cette nigme",CountDownWarning:"Etes-vous certain(e) d'activer un compte  rebours ? Assurez-vous qu'il n'y a aucun risque pour le joueur, comme une route  traverser !",CountDownPopupfail:"Temps coul !",MaxScore:"Score maxi",YouMustTestThisStepOnMobile:"Vous devez tester ce type d'tape sur un appareil mobile",AreasNumber:"Nombre de zones  trouver",ItRemains:"Il reste",s:"s",LetsPlayWithoutAccount:"Jouer sans compte",ErrorDownloadNeedsToRestart:"Erreur lors du telechargement de l'enquete. Veuillez vrifier votre connexion internet pour relancer le tlchargement !",StartCreation:"Devenir crateur ?",ErrorTakingSnapshot:"Impossible de faire la capture d'cran",YourAudioFile:"Votre musique de fond",AddAnAudioFile:"Ajouter une musique de fond",ObjectNeedToBeAppliedOnPicture:"L'objet est appliqu sur une partie de l'image",ReadNext:"LIRE LA SUITE",AlreadyPaied:"Achet",HelpStepMessageInventory:"Afficher l'aide pour le bouton Inventaire",HelpStepMessageHint:"Afficher l'aide pour le bouton Indice",HelpStepMessagePrevious:"Afficher l'aide pour le bouton Retour",HelpStepMessageNext:"Afficher l'aide pour le bouton Suivant",HelpStepMessage:"Bienvenue dans ce jeu !\n\nPour participer, il vous suffira de suivre les indications  l'cran.",HelpStepMessageInventoryMessage:"La valise vous sert  utiliser des objets que vous avez rcuprs durant le jeu.",HelpStepMessageHintMessage:"L'ampoule vous sert  obtenir des indices.",HelpStepMessagePreviousMessage:"Pour revenir  l'tape prcdente, appuyez sur la flche de gauche.",HelpStepMessageNextMessage:"Pour passer  l'tape suivante, appuyez sur la flche de droite.",HelpStepMessageEnd:"En cas de problme, n'hsitez pas  fermer l'application et  la redmarrer, vous reviendrez  la dernire tape russie.",KenBurnsEffect:"Effet de zoom arrire sur l'image",Show:"Montrer",Hide:"Masquer",TotalSellings:"Ventes du jeu",RevenuesPayedFloor:"Paiement quand gains > 50",QRCodeMessage:"Message affich quand le joueur doit flasher un QR code (mode Escape game)",GeolocationMessage:"Message affich quand le joueur doit rechercher plusieurs lieux en golocalisation (mode Escape game)",TeamID:"Identifiant quipe",PleaseFillThisForm:"Veuillez complter ce champ",Zoom:"Zoom",ScheduleGame:"Planifier le jeu",GameSchedule:"Planification du jeu",Reset:"Rinitialiser",SchedulingDescription:"Le jeu est jouable sur les crneaux :",From:"De",To:"A",QuestIsNotPlayableNow:"Le jeu n'est pas disponible actuellement",OpeningHours:"Heures d'ouverture",CreationStudioHelp:"<h3>Aide</h3>Nous vous proposons plusieurs ressources pour vous aider  utiliser le studio de cration :<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Guide d'utilisation du studio</a></li><li>Des <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>tutoriels vido</a> d'utilisation du studio de cration</li></ul><div class='text-accent'>Nouveau ! Rejoignez le <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>groupe Facebook des crateurs de jeux Graaly</a> pour changer sur vos problmatiques avec les autres utilisateurs et avec nos dveloppeurs !</div><br />Pour tester votre jeu, nous vous conseillons de :<ul><li>tester sur votre tlphone avec l'application Graaly</li><li>tester dans votre navigateur en <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>mode dveloppeur</a> (pour faire simple, cliquez sur la touche f12, puis sur l'icne en forme de tablette). Attention, certaines tapes ne fonctionnent pas dans ce mode (ralit augmente, golocalisation, scanne de QR code, superposition image et camra)</li></ul>",TestWithSimulatorWarning:"Vous allez tester avec le simulateur. Certains types d'tapes ne sont pas fonctionnels. Pour un vrai test, utilisez l'application mobile Graaly",FontFamily:"Police de caractre pour les textes",ExportTexts:"Textes du jeu",Downloads:"Tlchargements",ForcePlayerToHaveAccount:"Forcer les joueurs  crer un compte Graaly",ForcePlayerToHaveAccountHelp:"Si cette option n'est pas active, les utilisateurs peuvent jouer anonymement",ShareUserDataWithCreator:"Demander aux joueurs de partager leurs donnes avec vous",ShareUserDataWithCreatorHelp:"Un joueur accepte de partager ses donnes avec Graaly. Vous pouvez demander aux joueurs de partager leurs donnes avec vous, nous vous conseillons pour les motiver de faire gagner quelque chose (jeu concours, tirage au sort, bon de rduction, ...)",YouNeedToCreateYourAccountToPlay:"Vous devez crer votre compte pour joueur  ce jeu",ShareDataWithPartner:"Partager vos donnes avec le crateur du jeu",PartnerAskForYouData:"Le crateur du jeu souhaiterait accder  vos donnes (adresse email, nom). Cela peut tre pour vous permettre de participer  un tirage au sort, un jeu concours ou vous faire gagner un bon de rduction. Veuillez lire la description du jeu pour en savoir plus",UseHtmlInDescription:"Utiliser des balises HTML dans la question",DoNotDisplay:"Ne pas afficher",AddAnGPSLocation:"Ajouter un point GPS",BuildThePortraitRobot:"Construisez le portrait  trouver",Education:"Education",EducationDesc:"Nous ne proposons pas encore d'offre ducation, mais vous pouvez utiliser le mode professionnel, et nous contacter  contact@graaly.com pour plus d'information.",Call:"Appeler",BlurEffect:"Effet de flou",CheckpointReached:"Vous avez atteint un objectif intermdiaire ! La carte montre dsormais le prochain lieu  atteindre.",DefaultMode:"Mode d'affichage par dfaut",CompassMode:"Classique",CompassModeHelp:"Affichage d'une flche de direction et de la distance  l'objectif",MapMode:"Carte",MapModeHelp:"Affiche une carte Google Maps avec les positions du joueur et de l'objectif",AllowToSwitchGeolocationMode:"Bouton pour changer le mode d'affichage",ApplyRedFilter:"Appliquer le filtre rouge",Chapters:"Chapitres",Chapter:"Chapitre",ChapterChangeWarning:"Attention, si vous changez le chapitre, vous supprimez tous ses dclencheurs et risquez d'avoir des incohrences au niveau des dclencheurs des autres tapes. Il faudra les modifier aussi dans les tapes qui en dpendent.",ResetHistoryAfter:"Empcher le retour arrire aprs cette tape",RestartChapterAfterStep:"Redmarrer le chapitre aprs cette tape",HideInventory:"Ne pas utiliser l'inventaire",ShowCountDown:"Afficher compte  rebours",StopGameAfterCountDown:"Arrter le jeu quand le temps est fini",ItRemainsMinutes:"Il vous reste {time} minutes",CustomizeEndOfGame:"Personnaliser la fin du jeu",CustomizeGameInterface:"Personnaliser l'interface de jeu",GameAvailability:"Disponibilit du jeu",GamePayment:"Paiement du jeu",UserData:"Donnes utilisateurs",CustomizeGameIntroduction:"Personnaliser l'intro du jeu",RemoveGPSLocation:"Supprimer cette localisation",OverQuotaMessage:"Vous avez atteind la limite de stockage",RemoveFiles:"Supprimer des fichiers",InvalidTeamID:"Identifiant d'quipe invalide",HideFullScreen:"Ne pas afficher en plein cran (Android)",YourFullName:"Votre nom complet",TextColor:"Couleur du texte",GoodAnswersNumber:"Rponses correctes",PleaseEnterFirstNameAndLastName:"Veuillez entrer votre prnom et votre nom",PassTheQRCodeInFrontOfYourCamera:"Passez le QR code devant votre camra",HideHideButton:"Cacher le bouton montrer/cacher",PleaseHoldYourDeviceFlat:"Veuillez tenir votre appareil  plat",MyLocationWarning:"La prcision de la position GPS n'est pas assez fiable. Pour rcuprer les coordonnes GPS, utilisez Google Maps (en cliquant sur un lieu, une bulle s'affiche avec la latitude et longitude), l'application 'Ma position GPS' sur Android ou l'application 'Mes coordonnes GPS' sur iPhone.",FindAllLocationsToStartSteps:"Dplacez-vous et trouvez chaque lieu !",ColorIndicatorExplaination:"Vous tes  {distance}m d'un des lieux",YouWonNewGame:"Bravo ! Vous avez dbloqu un nouveau jeu !",WarningLowGpsAccuracy:"Attention: prcision GPS faible",PersistentLowGpsAccuracyPleaseSkipStep:"La prcision GPS est toujours faible aprs plus d'une minute. Nous vous recommandons de passer cette tape (bouton en bas  droite).",LocationSaved:"Position de l'objectif mise  jour  partir de la position GPS de l'appareil.",CurrentLocation:"Position GPS actuelle",Accuracy:"Prcision",Meters:"mtres",secondes:"seconde(s)",ScanA:"Scanner un code",OnceADay:"Une fois par jour",UserCanReplayGame:"Le joueur peu rejouer",CustomizeYourName:"Personnaliser le nom de l'auteur",YouCanNotPlayAgainThisGame:"Vous ne pouvez rejouer  ce jeu",YouCanNotPlayAgainThisGameToday:"Vous pouvez rejouer demain",CustomizeRightAnswerMessage:"Message de bonne rponse personnalis",CustomizeWrongAnswerMessage:"Message de mauvaise rponse personnalis",RotateVideo:"Tourner la vido de 90",UploadSucessful:"Fichier charg sur le serveur avec succs",RemoveObjectFromInventoryAfterUse:"Supprimer l'objet de l'inventaire aprs",ModifyTheHint:"Modifier l'indice",AddAGameSnapshot:"Ajouter une capture du jeu",Snapshots:"Capture(s)",CounterValue:"Valeur du compteur",CharacterBarColor:"Couleur de la barre sous le personnage",HideMake8Animation:"Cacher l'animation en cas de mauvais GPS",HideEnlargeMessage:"Cacher le bouton pour largir les vignettes",CustomizedMemoryCardColor:"Couleur personnalise pour le dos des cartes",HidePuzzleNotWorkingMessage:"Cacher le bouton quand le puzzle ne fonctionne pas",SnapshotManualOnIOs:"Pour faire une capture sur iPhone/iPad, appuyez simultanement sur le bouton latral et le bouton du volume",MovePictureWithFingerForbinocular:"Dplacez les jumelles avec le doigt pour observer d'autres endroits",MovePictureWithFingerForflashlight:"Dplacez la lumire avec le doigt pour observer d'autres endroits",MovePictureWithFingerForkeyhole:"Dplacez la serrure avec le doigt pour observer d'autres endroits",InvalidCondition:"Condition invalide  supprimer",WrongLocationMessage:"Message quand on appuie au mauvais endroit",MoveToNextStepAutomatically:"Passer  l'tape suivante automatiquement",Duplicate:"Dupliquer",PleaseWaitLoadingAndGPSInit:"CHARGEMENT DES DONNEES ET GPS EN COURS ...",MoveToNextStepAutomaticallyDuration:"Secondes avant de passer  l'tape suivante",UseAModel:"J'utilise un modle :",AddToInventoryAndPass:"Ajouter  l'inventaire sans afficher cette tape",holdVerticaly:"Pour une meilleure exprience avec la ralit augmente, merci de tenir votre tlphone  la verticale.",startScan:"Dmarrer",noSensorFound:"Pas de capteurs trouvs sur votre appareil",noSensorNext:"Vous pouvez directement passer  l'tape suivante en cliquant sur la flche en bas  droite",UniqueUsageQRCodeWarning:"Attention, ce code est  usage unique. Vous ne pourrez pas l'utiliser avec un autre compte Graaly. Pour l'utiliser sur un autre appareil, vous devrez utiliser le mme compte Graaly.",arDialogTitle:"Autorisation",arDialogMessage:"Pour continuer, veuillez autoriser l'application  utiliser certaines fonctionnalits de votre appareil",qrCodeAlreadyScan:"Vous avez dj essay ce QR Code",qrCodeAlreadyGood:"Vous avez dj scanner le bon QR Code, passez  l'tape suivante",Audio:"Audio",TeamPlay:"Jeu d'quipe",TypeTeamPlayId:"Tapez l'ID du jeu si vous en avez reu un.",OrderIsNotImportant:"L'ordre des images n'est pas important",DoNotPreventUserForHint:"Ne pas afficher de message d'alerte quand le joueur utilise un indice",DeleteQuestAndFolder:"L'enqute et ses fichiers ont t supprims",TextTooLongForStep:"Votre texte est trop long ou contient trop de sauts de lignes, et risque de mal s'afficher sur des petits crans ! Nous conseillons {nb} caractres pour ce type d'tape. Souhaitez vous enregistrer quand mme ?",FirstAndLastName:"Votre nom et prnom",IconForSuccess:"Icone affich quand on gagne",SelectThisIcon:"Slectionner cette icne",NoIcon:"Aucune icne",CustomizeRightAnswerColor:"Personnaliser la couleur du message de bonne rponse",CustomizeWrongAnswerColor:"Personnaliser la couleur du message de mauvaise rponse",Binoculars:"Jumelles",FlashLight:"Lampe de poche",KeyHole:"Trou de serrure",Shape:"Forme",DataHaveBeenRemoved:"Les donnes ont t supprimes",Private:"Priv",WarningInvitees:"Les invits ne pourront jouer que quand votre jeu sera publi",RemoveOfflineData:"Supprimer les donnes offline des jeux",DisplayTime:"Afficher l'heure",DisplayGoodAnswers:"Afficher le nombre de bonnes rponses",FaceCamera:"Camera de face",BackCamera:"Camera arrire",CameraUsed:"Camera utilise",Error404:"Cette page n'existe pas",ThreeLetterMin:"3 lettres minimum",NotPublishedGames:"Jeux non publis",EarningsGames:"Gains des jeux",AwaitingGames:"Jeux en attente de validation",RejectedGames:"Jeux rejets",StatisticGames:"Statistiques des jeux",LimitationGames:"Jeux avec limitation",FindNothing:"Je n'ai rien trouv pour vous",AdminDelete:"Supprimer",AdminName:"Nom de la qute",AdminAuthor:"Auteur",AdminAccess:"Accs",AdminPremium:"Premium",AdminMail:"Email",AdminRunCount:"Nombre de Run",AdminSize:"Taille totale",AdminLastUpdate:"Dernire mise  jour",AdminPrice:"Prix",AdminNotPrice:"Pas de prix",AdminQRCodeUsed:"QRCode utilis",AdminEarning:"Gains",AdminPlayLimit:"Jouer/Limite",AdminRemainingCredit:"Crdit restant",AdminPlayedWeekly:"Joue cette semaine",AdminPlayedMonthly:"Joue ce mois",AdminRating:"Note",AdminPlay:"Jouer",AdminValid:"Valider",EstimateTime:"Temps estim",RedirectToNextChapter:"Rediriger vers le chapitre qui suit",RedirectToChapter:"Rediriger vers le chapitre",ObjectCombined:"Objet combin",CombineItems:"Combiner les objets",MyGameIsIndoorRemoveWarningsOnStart:"Mon jeu est en intrieur sans risque, supprimer les avertissements au lancement",YouCanOnlyUseThisFeatureInNewItemStep:"Vous ne pouvez utiliser cette fonctionnalit que dans les tapes Nouvel Objet",YourCharacterOnMap:"Personnage sur la carte interactive",AddACustomCharacterOnMap:"Ajouter un personnage sur la carte",helpQuestCharacterOnMap:"Cela permet de personnaliser le marqueur qui reprsente le joueur sur la carte interactive",UploadTheLocatorPicture:"Tlcharger une image pour la carte",ObjectInInventory:"L'objet est dans l'inventaire",ObjectNotInInventory:"L'objet n'est pas dans l'inventaire",ResetChapterProgression:"Supprimer la progression de ce chapitre",GeolocationCouldNotBeRetrieved:"Position du joueur inconnue",GeolocationIsDeniedPleaseSkipThisStep:"Cette partie du jeu ncessite un accs  votre position, cependant soit vous avez refus cette permission, soit aucun signal GPS n'est disponible. Si rien ne se dbloque dans quelques secondes, passez  tape suivante.",HidePaiement:"Cacher le prix (communiqu aux joueurs hors de Graaly)",QRCodeAlreadyUsed:"Ce QR code a dj t utilis par un autre compte. Veuillez vous connecter ou contacter le crateur du jeu pour obtenir un autre code.",GeolocationIssuePleaseSkipThisStep:"Cette partie du jeu ncessite un accs  votre position, mais Graaly n'a pas pu la rcuprer, soit  cause d'un problme de permissions ou de prcision. Vrifiez que votre GPS est activ faisant, faites des \"8\" plusieurs fois). Si rien ne s'arrange, passez  l'tape suivante !",PrintQRCodePages:"Imprimer les QR Codes",AnswerNumber:"Numro de la rponse",QRCodeIsNotStartingOne:"Ce n'est pas le bon QR code. Recherchez le QR code de dmarrage du jeu !",QRCodeIsNotPlayingOne:"Ce n'est pas le bon QR code",Loading2:"Chargement",Configuration:"Configuration",Video:"Vido",UserCanNotQuit:"Le joueur ne peut pas quitter",CharacterSize:"Taille image (% de l'cran). Par dfaut : 60%.",HideUserProgressionOnEnd:"Cacher la barre de progression du joueur",HideAuthorOnEnd:"Cacher l'auteur du jeu",HideObjectCombination:"Cacher l'option de combinaison d'objets",ShakingEffect:"Effet de tremblement",HelpStepMessageCombinate:"Afficher le bouton pour combinaison d'objets",HelpStepMessageCombinateMessage:"Dans l'inventaire, vous pouvez combiner des objets avec ce bouton",OrderHaveNotToBeRespected:"L'ordre n'a pas  tre respect",PaymentOnYourSideWarning:"Attention : en activant cette option, vous ne pouvez plus utiliser le QR code de l'onglet Mise en ligne. Vous devez gnrer un QR code par joueur dans l'onglet Paiement. Si vous souhaitez plutt utiliser un seul QR code pour tous les joueurs, vous pouvez crer un jeu priv et ne pas activer cette option.",MoveLeft:"Dplacer  gauche",MoveRight:"Dplacer  droite",OrSelectACharacter:"Ou slectionnez un personnage",AddAnotherCharacter:"Ajouter une autre scne",ChangeCharacter:"Changer le personnage",UploadImageBelowButton:"Ajouter une image sous le bouton",UpdateClones:"Mettre  jour les tapes clones",ModifyTheChapterTimer:"Dfinir le compte  rebours du chapitre en minutes (0 = pas de compte  rebours)",YourChapterHasTimerButNoCountDonwTimerCondition:"Vous avez dfini un compte  rebours dans le chapitre, mais aucune tape avec un dclencheur de fin de compte  rebours",seconds:"seconde(s)",DisplayFirstImageAsDefault:"Ne pas afficher la premire image par dfaut",DoNotUserGeolocation:"Dsactiver la golocalisation",qrCodeUsageDescription:"Vous devez imprimer un QR code  usage unique pour chaque joueur dans l'onglet Paiement qui va apparatre. Ce QR code sera valide : ",QRCodeValidOneTime:"Une seule fois (ou 2 si les joueurs doivent relancer le jeu sur un autre tlphone)",QRCodeValidOneDay:"Autant de fois que souhait pendant 1 jour ( partir du premier scan du QR code)",NumberOfOngoingPlay:"Nombre de parties en cours",ChooseYourLanguage:"Choisissez la langue",hideSoundPause:"Cacher le bouton de pause du lecteur audio",InvalidQuest:"Ce jeu n'existe pas, n'est pas encore publi ou a t dsactiv",creationOfQRCodes:"Cration de QR codes",UserLanguageNotTheOneOfTheGame:"Cette langue n'est pas celle de votre compte Graaly. Voulez-vous changer la langue de votre compte ?",PublishInAllLanguages:"Publier dans toutes les langues",SelectLanguageForPublishing:"Choisir la langue de publication",AskToPublish:"Demander la publication",QRCodeValidOneMonth:"Autant de fois que souhait pendant 1 mois ( partir du premier scan du QR code)",NumberOfRemainingPlay:"Nombre de parties encore jouables",NumberOfAllowedPlay:"Nombre de parties autorises",ContactUsForMorePlays:"Veuillez nous contacter pour augmenter le nombre de parties autorises",Credits:"Crdits (parties)",CreditsBought:"Crdits achets",CreditsOffered:"Crdits offerts",CreditsUsed:"Crdits utiliss",CreditsRemaining:"Crdits restants",CreditsToPay:"Crdits  acheter"}}}},3104:function(e,t,a){},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac  dos","en":"Backpack"},"author":"Alex SAFFY Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candlabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex SAFFY Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Cl","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe  ptrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine tlphonique","en":"Phone booth"},"author":"Dave Sutton","url":"https://www.cgtrader.com/free-3d-models/exterior/other/telephone-box"},"phone-rotary":{"name":{"fr":"Tlphone  cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},"43ca":function(e,t,a){"use strict";var s=a("038f"),o=a.n(s);o.a},"441c":function(e,t,a){"use strict";var s=a("c4d8"),o=a.n(s);o.a},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id="4678"},4766:function(e,t,a){},"4c18":function(e){e.exports=JSON.parse('[{"label":"France","value":"FRA"},{"label":"Belgique","value":"BEL"},{"label":"Suisse","value":"CHE"},{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbadjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahren","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzgovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brsil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Blarus","value":"BLR"},{"label":"Bnin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (Rpublique dmocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Cte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythre","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"Fdration Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guine Franaise","value":"GUF"},{"label":"Guine quatoriale","value":"GNQ"},{"label":"Guine","value":"GIN"},{"label":"Guine-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Gorgie du Sud et les les Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et les McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Camans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Fro","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caques","value":"TCA"},{"label":"Iles Vierges (tats-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures loignes des tats-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'le de nol","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les les Cook","value":"COK"},{"label":"Les les Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronsie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niou","value":"NIU"},{"label":"Norvge","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zlande","value":"NZL"},{"label":"Npal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbkistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (tat de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guine","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Franaise","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Prou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"Rpublique Dominicaine","value":"DOM"},{"label":"Rpublique Tchque","value":"CZE"},{"label":"Rpublique arabe syrienne","value":"SYR"},{"label":"Rpublique centrafricaine","value":"CAF"},{"label":"Rpublique de Core","value":"KOR"},{"label":"Rpublique populaire dmocratique de Core","value":"PRK"},{"label":"Runion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthlemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Nivs","value":"KNA"},{"label":"Saint-Sige","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hlne, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa amricaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tom et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovnie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suriname","value":"SUR"},{"label":"Sude","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sngal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes franaises","value":"ATF"},{"label":"Territoire britannique de l\'ocan Indien","value":"IOT"},{"label":"Thalande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinit-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkmnistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},"4de3":function(e,t,a){"use strict";var s=a("8948"),o=a.n(s);o.a},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pices","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Cl","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac  dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Boue de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fuse","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Tlphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Tlvision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle cl","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"565f":function(e,t,a){"use strict";var s=a("e6d1"),o=a.n(s);o.a},5724:function(e,t,a){},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},6026:function(e,t,a){"use strict";var s=a("bcc9"),o=a.n(s);o.a},"61c8":function(e,t,a){"use strict";var s=a("b8e1"),o=a.n(s);o.a},6466:function(e,t,a){"use strict";var s=a("ed18"),o=a.n(s);o.a},"67c5":function(e,t,a){},"686a":function(e,t,a){"use strict";var s=a("d9f2"),o=a.n(s);o.a},"6bcb":function(e,t,a){},"714d":function(e,t,a){"use strict";var s=a("4766"),o=a.n(s);o.a},"74f2":function(e,t,a){"use strict";var s=a("7da1"),o=a.n(s);o.a},"7a89":function(e,t,a){},"7da1":function(e,t,a){},"7e6d":function(e,t,a){},"7f7d":function(e,t,a){"use strict";var s=a("67c5"),o=a.n(s);o.a},"7fae":function(e,t,a){},"872f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-btn",{staticClass:"btn",class:e.outlined?"outlined":"",style:e.cssVars,attrs:{type:e.submit?"submit":"button",loading:e.loading,disable:e.disable},scopedSlots:e._u([{key:"loading",fn:function(){return[a("div",{staticClass:"square-shadow"}),a("div",{staticClass:"square-icon flex items-center justify-center"},[a("q-spinner-dots",{staticClass:"btn-loading btn-icon",staticStyle:{width:"35px",height:"35px"}})],1),a("span",{staticClass:"btn-loading"},[e._v(e._s(e.loadingText))])]},proxy:!0}])},[a("div",{staticClass:"square-shadow"}),a("div",{staticClass:"square-icon"},[a("q-icon",{staticClass:"btn-icon",attrs:{name:e.icon}})],1),a("p",{staticClass:"btn-title"},[e._v(e._s(e.title))])])},o=[],n=(a("6c7b"),a("bc78")),r={name:"textBtnSquare",props:{color:String,icon:String,title:String,outlined:{type:Boolean,default:!1},rotation:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},submit:{type:Boolean,default:!1}},data:function(){return{}},computed:{bgColor:function(){return"primary"===this.color?"rgb(238,102,8)":"secondary"===this.color?"rgb(243,146,0)":"accent"===this.color?"rgb(214,11,81)":this.color},iconRotation:function(){return this.rotation?"-135deg":"-45deg"},cssVars:function(){return this.fill?{"--bg-color":"white","--text-color":this.bgColor,"--icon-rotation":this.iconRotation,"--bg-darken":n["a"].lighten("rgb(255,255,255)",-20)}:{"--bg-color":this.bgColor,"--text-color":"white","--icon-rotation":this.iconRotation,"--bg-darken":n["a"].lighten(this.bgColor,-20)}}}},i=r,l=(a("0c5ef"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"4ee4615d",null);t["a"]=c.exports},8948:function(e,t,a){},"8a24":function(e,t,a){},"8de4":function(e,t,a){"use strict";var s=a("5724"),o=a.n(s);o.a},9224:function(e){e.exports=JSON.parse('{"name":"graaly-frontend","version":"2.2.0","description":"Graaly Frontend","productName":"Graaly","cordovaId":"graaly.app","author":"Eric Mathieu <eric.mathieu13@gmail.com>, Maxime Pacary <maxime.pacary@gmail.com>","private":true,"scripts":{"lint":"eslint --ext .js,.vue src","start:dev":"quasar dev"},"dependencies":{"@babel/core":"^7.4.5","@quasar/babel-preset-app":"^1.2.0","@quasar/extras":"^1.15.1","@tweenjs/tween.js":"^18.3.1","ajv":"^6.9.1","autoprefixer":"^9.5.0","axios":"^0.21.1","axios-cookiejar-support":"^0.4.2","cordova":"^9.0.0","core-js":"^2.5.7","crypto-js":"^3.1.9-1","image-capture":"^0.4.0","js-cookie":"^2.2.0","moment":"^2.22.2","mqtt":"^3.0.0","object-hash":"^1.3.1","quasar":"^1.19.5","sortablejs":"^1.7.0","three":"^0.125.0","three-orbitcontrols":"^2.102.2","timeago.js":"^4.0.2","tough-cookie":"^3.0.1","vue":"^2.6.10","vue-i18n":"^7.8.1","vue-qrcode-reader":"^3.0.1","vue2-google-maps":"^0.10.6","vuelidate":"^0.7.4","vuex":"^3.0.1","vuex-persistedstate":"^2.5.4","webpack":"^4.29.6"},"devDependencies":{"@babel/cli":"^7.4.4","@quasar/app":"^1.9.6","babel-eslint":"^8.2.1","chalk":"^2.4.2","eslint":"^4.18.2","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.9.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.3.0","start-server-and-test":"^1.11.5","strip-ansi":"^3.0.1","vue-template-compiler":"^2.6.10"},"engines":{"node":">= 8.9.0","npm":">= 5.6.0","yarn":">= 1.6.0"},"browserslist":["> 1%","last 2 versions","not ie <= 10"]}')},9419:function(e,t,a){"use strict";var s=a("fc87"),o=a.n(s);o.a},"96a5":function(e,t,a){"use strict";var s=a("b240"),o=a.n(s);o.a},"97c2":function(e,t,a){},"9ac9":function(e){e.exports=JSON.parse('[{"label":"Estados Unidos","value":"USA"},{"label":"Reino Unido","value":"GBR"},{"label":"Afganistn","value":"AFG"},{"label":"land","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Argelia","value":"DZA"},{"label":"Samoa Americana","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antrtida","value":"ATA"},{"label":"Antigua y Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaiyn","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Barin","value":"BHR"},{"label":"Banglads","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Bielorrusia","value":"BLR"},{"label":"Blgica","value":"BEL"},{"label":"Belice","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermudas","value":"BMU"},{"label":"Butn","value":"BTN"},{"label":"Bolivia","value":"BOL"},{"label":"Bonaire, San Eustaquio y Saba","value":"BES"},{"label":"Bosnia y Herzegovina","value":"BIH"},{"label":"Botsuana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brasil","value":"BRA"},{"label":"Territorio Britnico del Ocano ndico","value":"IOT"},{"label":"Bruni","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Camboya","value":"KHM"},{"label":"Camern","value":"CMR"},{"label":"Canad","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Islas Caimn","value":"CYM"},{"label":"Repblica Centroafricana","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Isla de Navidad","value":"CXR"},{"label":"Islas Cocos","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoras","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Islas Cook","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croacia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curazao","value":"CUW"},{"label":"Chipre","value":"CYP"},{"label":"Chequia","value":"CZE"},{"label":"Dinamarca","value":"DNK"},{"label":"Yibuti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Repblica Dominicana","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egipto","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Espaa","value":"ESP"},{"label":"Guinea Ecuatorial","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Etiopa","value":"ETH"},{"label":"Islas Malvinas","value":"FLK"},{"label":"Islas Feroe","value":"FRO"},{"label":"Fiyi","value":"FJI"},{"label":"Finlandia","value":"FIN"},{"label":"Francia","value":"FRA"},{"label":"Guayana Francesa","value":"GUF"},{"label":"Polinesia Francesa","value":"PYF"},{"label":"Territorios Australes Franceses","value":"ATF"},{"label":"Gabn","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Alemania","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grecia","value":"GRC"},{"label":"Groenlandia","value":"GRL"},{"label":"Granada","value":"GRD"},{"label":"Guadalupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Hait","value":"HTI"},{"label":"Islas Heard y McDonald","value":"HMD"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungra","value":"HUN"},{"label":"Islandia","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Irn","value":"IRN"},{"label":"Irak","value":"IRQ"},{"label":"Irlanda","value":"IRL"},{"label":"Isla de Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italia","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japn","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordania","value":"JOR"},{"label":"Kazajistn","value":"KAZ"},{"label":"Kenia","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Corea del Sur","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kirguistn","value":"KGZ"},{"label":"Laos","value":"LAO"},{"label":"Letonia","value":"LVA"},{"label":"Lbano","value":"LBN"},{"label":"Lesoto","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libia","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituania","value":"LTU"},{"label":"Luxemburgo","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malasia","value":"MYS"},{"label":"Maldivas","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Islas Marshall","value":"MHL"},{"label":"Martinica","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauricio","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mxico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldavia","value":"MDA"},{"label":"Mnaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Marruecos","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Pases Bajos","value":"NLD"},{"label":"Nueva Caledonia","value":"NCL"},{"label":"Nueva Zelanda","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"NIsla Norfolk","value":"NFK"},{"label":"Islas Marianas del Norte","value":"MNP"},{"label":"Noruega","value":"NOR"},{"label":"Omn","value":"OMN"},{"label":"Pakistn","value":"PAK"},{"label":"Palaos","value":"PLW"},{"label":"Palestina, State of","value":"PSE"},{"label":"Panam","value":"PAN"},{"label":"Papa Nueva Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Per","value":"PER"},{"label":"Filipinas","value":"PHL"},{"label":"Islas Pitcairn","value":"PCN"},{"label":"Polonia","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Catar","value":"QAT"},{"label":"Reunin","value":"REU"},{"label":"Rumania","value":"ROU"},{"label":"Rusia","value":"RUS"},{"label":"Ruanda","value":"RWA"},{"label":"San Bartolom","value":"BLM"},{"label":"Santa Elena","value":"SHN"},{"label":"San Cristbal y Nieves","value":"KNA"},{"label":"Santa Luca","value":"LCA"},{"label":"San Martn","value":"MAF"},{"label":"San Pedro y Miqueln","value":"SPM"},{"label":"San Vicente y las Granadinas","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Santo Tom y Prncipe","value":"STP"},{"label":"Arabia Saudita","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leona","value":"SLE"},{"label":"Singapur","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Eslovaquia","value":"SVK"},{"label":"Eslovenia","value":"SVN"},{"label":"Islas Salomn","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"Sudfrica","value":"ZAF"},{"label":"Islas Georgias del Sur y Sandwich del Sur","value":"SGS"},{"label":"Sudn del Sur","value":"SSD"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudn","value":"SDN"},{"label":"Surinam","value":"SUR"},{"label":"Svalbard y Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Suecia","value":"SWE"},{"label":"Suiza","value":"CHE"},{"label":"Siria","value":"SYR"},{"label":"Taiwn","value":"TWN"},{"label":"Tayikistn","value":"TJK"},{"label":"Tanzania","value":"TZA"},{"label":"Tailandia","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad y Tobago","value":"TTO"},{"label":"Tnez","value":"TUN"},{"label":"Turqua","value":"TUR"},{"label":"Turkmenistn","value":"TKM"},{"label":"Islas Turcas y Caicos","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ucrania","value":"UKR"},{"label":"Emiratos rabes Unidos","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistn","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Islas Vrgenes Britnicas","value":"VGB"},{"label":"Islas Vrgenes de los Estados Unidos","value":"VIR"},{"label":"allis y Futuna","value":"WLF"},{"label":"Sahara Occidental","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabue","value":"ZWE"}]')},a1ec:function(e,t,a){},a2c9:function(e,t,a){"use strict";var s=a("c7a9"),o=a.n(s);o.a},a8ed:function(e,t,a){"use strict";var s=a("7fae"),o=a.n(s);o.a},ae4c:function(e,t,a){},b002:function(e,t,a){},b240:function(e,t,a){},b26c:function(e,t,a){},b650:function(e,t,a){"use strict";var s=a("ae4c"),o=a.n(s);o.a},b6d9:function(e,t,a){"use strict";var s=a("d756"),o=a.n(s);o.a},b8e1:function(e,t,a){},b92e:function(e,t,a){"use strict";var s=a("ce03"),o=a.n(s);o.a},bcc9:function(e,t,a){},c078:function(e,t,a){"use strict";var s=a("029c"),o=a.n(s);o.a},c195:function(e,t,a){"use strict";var s=a("23d1"),o=a.n(s);o.a},c287:function(e,t,a){"use strict";var s=a("fa1a"),o=a.n(s);o.a},c4d8:function(e,t,a){},c7a9:function(e,t,a){},ce03:function(e,t,a){},cebe:function(e,t,a){},cf83:function(e){e.exports=JSON.parse('[{"label":"United States of America","value":"USA"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"Afghanistan","value":"AFG"},{"label":"land Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},d1f9:function(e,t,a){"use strict";var s=a("a1ec"),o=a.n(s);o.a},d4d2:function(e,t,a){"use strict";var s=a("6bcb"),o=a.n(s);o.a},d756:function(e,t,a){},d9f2:function(e,t,a){},db16:function(e,t,a){},e08c:function(e){e.exports=JSON.parse('{"baseServiceID":"4fafc201-1fb5-459e-8fcc-c5c9c331914b","baseCara":"beb5483e-36e1-4688-b7f5-"}')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"}]')},e2bf:function(e,t,a){"use strict";var s=a("2aa4"),o=a.n(s);o.a},e3e5:function(e,t,a){"use strict";var s=a("8a24"),o=a.n(s);o.a},e6d1:function(e,t,a){},e79e:function(e,t,a){"use strict";var s=a("fa03"),o=a.n(s);o.a},e7ec:function(e,t,a){"use strict";var s=a("97c2"),o=a.n(s);o.a},ed18:function(e,t,a){},ee35:function(e,t,a){},f4ba:function(e,t,a){"use strict";var s=a("b26c"),o=a.n(s);o.a},f5dc:function(e,t,a){"use strict";var s=a("cebe"),o=a.n(s);o.a},fa03:function(e,t,a){},fa1a:function(e,t,a){},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')},fc87:function(e,t,a){},fdef:function(e,t,a){}});