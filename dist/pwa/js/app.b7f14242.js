(function(e){function t(t){for(var a,o,i=t[0],l=t[1],c=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(n.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},r={1:0},n=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{2:"5af11629"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.e=function(e){var t=[],s=r[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=r[e]=[t,a]}));t.push(s[2]=a);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=o(e);var c=new Error;n=function(t){l.onerror=l.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",c.name="ChunkLoadError",c.type=a,c.request=n,s[1](c)}r[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:l})}),12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;n.push([0,0]),s()})({0:function(e,t,s){e.exports=s("2f39")},"025e":function(e){e.exports=JSON.parse('[{"category":"transition","code":"info-text","icon":"file-image","title":"ImageAndText","description":"ImageAndTextDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"info-video","icon":"file-video","title":"Video","description":"VideoDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"new-item","icon":"briefcase","title":"NewObject","description":"NewObjectDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"character","icon":"user","title":"GraalyCharacter","description":"GraalyCharacterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"help","icon":"question","title":"HelpStep","description":"HelpStepDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"transition","code":"end-chapter","icon":"step-forward","title":"EndOfChapter","description":"EndOfChapterDesc","showTrick":"no","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"geolocation","icon":"map-marker","title":"FindALocation","description":"FindALocationDesc","showTrick":"yes","textRules":{"maxNbChars":180,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-item-ar","icon":"cube","title":"LocateItemAR","description":"LocateItemARDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"locate-marker","icon":"qrcode","title":"LocateMarker","description":"LocateMarkerDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":3},"hasBackgroundImage":"no","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"choose","icon":"list","title":"ChoiceQuestion","description":"ChoiceQuestionDesc","showTrick":"yes","textRules":{"maxNbChars":240,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":false},{"category":"enigma","code":"write-text","icon":"font","title":"TextQuestion","description":"TextQuestionDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-keypad","icon":"calculator","title":"FindTheCode","description":"FindTheCodeDesc","showTrick":"yes","textRules":{"maxNbChars":90,"maxNbCarriageReturns":2},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-color","icon":"paint-brush","title":"FindTheColorCode","description":"FindTheColorCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"code-image","icon":"images","title":"FindTheImageCode","description":"FindTheImageCodeDesc","showTrick":"yes","textRules":{"maxNbChars":150,"maxNbCarriageReturns":4},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"image-over-flow","icon":"layer-group","title":"ImageOverFlow","description":"ImageOverFlowDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"find-item","icon":"search","title":"FindAnItem","description":"FindAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"use-item","icon":"wrench","title":"UseAnItem","description":"UseAnItemDesc","showTrick":"yes","textRules":{"maxNbChars":50,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":2,"passOption":false},{"category":"enigma","code":"jigsaw-puzzle","icon":"puzzle-piece","title":"JigsawPuzzle","description":"JigsawPuzzleDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"hasBackgroundImage":"option","enabled":true,"hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"memory","icon":"clone","title":"Memory","description":"MemoryDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true},{"category":"enigma","code":"portrait-robot","icon":"user-circle","title":"PortraitRobot","description":"PortraitRobotDesc","showTrick":"yes","textRules":{"maxNbChars":100,"maxNbCarriageReturns":1},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":1,"passOption":true},{"category":"enigma","code":"binocular","icon":"binoculars","title":"Binocular","description":"BinocularDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"phone-call","icon":"phone-volume","title":"PhoneCall","description":"PhoneCallDesc","showTrick":"yes","enabled":true,"hasBackgroundImage":"main","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"trigger-event","icon":"bolt","title":"TriggerEvent","description":"TriggerEventDesc","showTrick":"no","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":false},{"category":"enigma","code":"wait-for-event","icon":"bolt","title":"WaitForEvent","description":"WaitForEventDesc","showTrick":"yes","textRules":{"maxNbChars":250,"maxNbCarriageReturns":5},"enabled":true,"hasBackgroundImage":"option","hasOptions":true,"nbTrials":0,"passOption":true}]')},"0a65":function(e,t,s){"use strict";var a=s("d521"),r=s.n(a);r.a},1:function(e,t){},"17eb":function(e,t,s){"use strict";var a=s("9593"),r=s.n(a);r.a},2:function(e,t){},"22ae":function(e){e.exports=JSON.parse('[{"label":"red","value":"#FF0000"},{"label":"pink","value":"#FFC0CB"},{"label":"purple","value":"#800080"},{"label":"green","value":"#008000"},{"label":"blue","value":"#0000FF"},{"label":"yellow","value":"#FFFF00"},{"label":"orange","value":"#FFA500"},{"label":"black","value":"#000000"},{"label":"white","value":"#FFFFFF"},{"label":"gray","value":"#808080"}]')},"2f04":function(e){e.exports=JSON.parse('[{"code":"keypad","step":"wait-for-event"},{"code":"joystick","step":"wait-for-event"},{"code":"distance","step":"wait-for-event"},{"code":"pot","step":"wait-for-event"},{"code":"escapebox","step":"wait-for-event"},{"code":"button","step":"wait-for-event"},{"code":"lcd","step":"trigger-event"},{"code":"buzzer","step":"trigger-event"},{"code":"chest","step":"trigger-event"},{"code":"relay","step":"trigger-event"}]')},"2f39":function(e,t,s){"use strict";s.r(t);var a=s("deb5"),r=s.n(a),n=(s("a481"),s("96cf"),s("f44b")),o=s.n(n),l=(s("7d6e"),s("e54f"),s("573e"),s("4848"),s("c382"),s("4a8e"),s("58af"),s("b828"),s("7713"),s("3c1c"),s("e046"),s("62f2"),s("7e6d"),s("2b0e")),c=s("b3f7"),u=s("b05d"),d=s("cb32"),p=s("54e1"),m=s("58a8"),h=s("9c40"),f=s("f20b"),g=s("e7a9"),b=s("f09f"),v=s("4b7e"),w=s("a370"),y=s("880c"),q=s("32a7"),k=s("62cd"),x=s("8f8e"),C=s("b047"),S=s("b498"),_=s("52ee"),T=s("24e8"),P=s("9404"),I=s("3b73"),$=s("8572"),A=s("0016"),O=s("068f"),M=s("ef35"),z=s("27f9"),N=s("66e5"),F=s("0170"),D=s("4074"),R=s("4d5a"),L=s("1c1c"),j=s("9f0a"),E=s("09e3"),Q=s("9989"),B=s("de5e"),U=s("639d"),Y=s("7cbe"),H=s("6b1d"),G=s("3786"),W=s("7bbf"),V=s("daf4"),J=s("ed5e"),K=s("ddd8"),Z=s("eb85"),X=s("c1d0"),ee=s("2c91"),te=s("0d59"),se=s("8380"),ae=s("06d5"),re=s("9569"),ne=s("f7ac"),oe=s("7460"),ie=s("429b"),le=s("823b"),ce=s("adad"),ue=s("9564"),de=s("65c6"),pe=s("6ac5"),me=s("05c0"),he=s("7f67"),fe=s("714f"),ge=s("4396"),be=s("75c3"),ve=s("12c5"),we=s("436b"),ye=s("f5084"),qe=s("2a19");l["a"].use(u["a"],{config:{cordova:{backButtonExit:!1},loading:{delay:500}},iconSet:c["a"],components:{QAvatar:d["a"],QBanner:p["a"],QBadge:m["a"],QBtn:h["a"],QBtnDropdown:f["a"],QBtnGroup:g["a"],QCard:b["a"],QCardActions:v["a"],QCardSection:w["a"],QCarousel:y["a"],QCarouselControl:q["a"],QCarouselSlide:k["a"],QCheckbox:x["a"],QChip:C["a"],QColor:S["a"],QDate:_["a"],QDialog:T["a"],QDrawer:P["a"],QExpansionItem:I["a"],QField:$["a"],QIcon:A["a"],QImg:O["a"],QInfiniteScroll:M["a"],QInput:z["a"],QItem:N["a"],QItemLabel:F["a"],QItemSection:D["a"],QLayout:R["a"],QList:L["a"],QOptionGroup:j["a"],QPageContainer:E["a"],QPage:Q["a"],QPageSticky:B["a"],QParallax:U["a"],QPopupProxy:Y["a"],QLinearProgress:H["a"],QRadio:G["a"],QRange:W["a"],QRating:V["a"],QScrollObserver:J["a"],QSelect:K["a"],QSeparator:Z["a"],QSlider:X["a"],QSpace:ee["a"],QSpinner:te["a"],QSpinnerDots:se["a"],QSpinnerPuff:ae["a"],QSpinnerRadio:re["a"],QSpinnerOrbit:ne["a"],QTab:oe["a"],QTabs:ie["a"],QTabPanel:le["a"],QTabPanels:ce["a"],QToggle:ue["a"],QToolbar:de["a"],QToolbarTitle:pe["a"],QTooltip:me["a"]},directives:{ClosePopup:he["a"],Ripple:fe["a"],Scroll:ge["a"],TouchPan:be["a"],TouchSwipe:ve["a"]},plugins:{Dialog:we["a"],Loading:ye["a"],Notify:qe["a"]}});var ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"q-app"}},[s("router-view")],1)},xe=[],Ce={name:"App"},Se=Ce,_e=s("2877"),Te=Object(_e["a"])(Se,ke,xe,!1,null,null,null),Pe=Te.exports,Ie=(s("ac4d"),s("8a81"),s("ac6a"),s("2f62")),$e=s("0e44"),Ae=s("a78e"),Oe=(s("551c"),s("06db"),s("bc3a")),Me=s.n(Oe),ze=s("04ac"),Ne=s.n(ze),Fe="https://api.graaly.com",De=Me.a.create({baseURL:Fe,validateStatus:function(e){return!0}});De.defaults.timeout=4500,Ne()(De,{retries:10,retryCondition:function(e){return e.code&&"ECONNABORTED"===e.code},shouldResetTimeout:!0,retryDelay:function(){return 5e3}}),De.interceptors.request.use((function(e){var t=localStorage.getItem("jwt");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var Re=function(){return De},Le={checkEmail:function(e){return Re().get("check/email/"+e).catch((function(e){console.log("checkEmail error: "+e)}))},login:function(e,t){return Re().post("login",{email:e,password:t}).catch((function(e){return console.log(e.request)}))},checkFacebookToken:function(e,t,s){return Re().post("login/facebook",{id:e,token:t}).then((function(e){s(!1,e)}))},playAnonymous:function(e){return Re().post("user/create/anonymous/"+e).catch((function(e){return console.log(e.request)}))},logout:function(){return Re().post("logout").catch((function(e){return console.log(e.request)}))},removeAccount:function(){return Re().post("account/remove").catch((function(e){return console.log(e.request)}))},getAccount:function(e){return e&&"me"!==e?Re().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)})):Re().post("account",{}).catch((function(e){return console.log(e.request)}))},createAccount:function(e){return Re().post("user/create",e).catch((function(e){return console.log(e.request)}))},modifyAccount:function(e){return Re().post("user/modify",e).catch((function(e){return console.log(e.request)}))},uploadAccountPicture:function(e){return Re().post("/user/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},validateAccount:function(e,t){return Re().post("account/validate",{email:e,code:t}).catch((function(e){return console.log(e.request)}))},changePassword:function(e,t,s){return Re().post("user/forgottenpassword/code/validate",{email:e,password:t,code:s}).catch((function(e){return console.log(e.request)}))},sendForgottenPasswordCode:function(e){return Re().post("user/forgottenpassword/code/generate",{email:e}).catch((function(e){return console.log(e.request)}))},generateANewValidationCode:function(e){return Re().post("user/validate/code/new",{email:e}).catch((function(e){return console.log(e.request)}))}};l["a"].use(Ie["a"]);var je={isLoggedIn:!!localStorage.getItem("isLoggedIn"),loginPending:!1,questSteps:{geolocation:{drawDirectionInterval:null}},lastLoadedRoute:null,user:null,currentEditedQuest:null,currentEditedStep:null,errorMessage:null,currentRun:null,runningIntervalIds:[],runningTimeoutsIds:[],mediaStreams:[],chatMessages:[],chatNotification:0},Ee={loginStart:function(e){e.loginPending=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.loginPending=!1,e.user=t},logout:function(e){e.user=null},setLastLoadedRoute:function(e,t){e.lastLoadedRoute=t},setDrawDirectionInterval:function(e,t){e.questSteps.geolocation.drawDirectionInterval=t},setCurrentEditedQuest:function(e,t){e.currentEditedQuest=t},setCurrentEditedStep:function(e,t){e.currentEditedStep=t},setErrorMessage:function(e,t){e.errorMessage=t},setCurrentRun:function(e,t){e.currentRun=t},addTimeoutId:function(e,t){e.runningTimeoutsIds.push(t)},clearTimeoutIds:function(e){e.runningTimeoutsIds=[]},addIntervalId:function(e,t){e.runningIntervalIds.push(t)},clearIntervalIds:function(e){e.runningIntervalIds=[]},addMediaStream:function(e,t){e.mediaStreams.push(t)},clearMediaStreams:function(e){var t=!0,s=!1,a=void 0;try{for(var r,n=e.mediaStreams[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;o&&o.getTracks&&o.getTracks().forEach((function(e){return e.stop()}))}}catch(i){s=!0,a=i}finally{try{t||null==n.return||n.return()}finally{if(s)throw a}}e.mediaStreams=[]},setChatMessage:function(e,t){e.chatMessages=t},setChatNotification:function(e,t){e.chatNotification=t},updateChatNotification:function(e,t){e.chatNotification++}},Qe={login:function(){var e=o()(r.a.mark((function e(t,s){var a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,a("loginStart"),e.next=4,Le.login(s.email,s.password);case 4:return n=e.sent,200===n.status&&(a("loginSuccess",n.data.user),localStorage.setItem("isLoggedIn",!0)),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));function t(t,s){return e.apply(this,arguments)}return t}(),logout:function(){var e=o()(r.a.mark((function e(t){var s,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.next=3,Le.logout();case 3:return a=e.sent,s("logout"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setLastLoadedRoute:function(e,t){var s=e.commit;return s("setLastLoadedRoute",t)},setDrawDirectionInterval:function(e,t){var s=e.commit,a=e.state;if(null===t){var r=a.questSteps.geolocation.drawDirectionInterval;null!==r&&window.clearInterval(r)}s("setDrawDirectionInterval",t)},setCurrentEditedQuest:function(e,t){var s=e.commit;return s("setCurrentEditedQuest",t)},setCurrentEditedStep:function(e,t){var s=e.commit;return s("setCurrentEditedStep",t)},setErrorMessage:function(e,t){var s=e.commit;return s("setErrorMessage",t)},setCurrentRun:function(e,t){var s=e.commit;return s("setCurrentRun",t)},addTimeoutId:function(e,t){var s=e.commit;return s("addTimeoutId",t)},clearTimeoutIds:function(e){var t=e.commit;return t("clearTimeoutIds")},addIntervalId:function(e,t){var s=e.commit;return s("addIntervalId",t)},clearIntervalIds:function(e){var t=e.commit;return t("clearIntervalIds")},addMediaStream:function(e,t){var s=e.commit;return s("addMediaStream",t)},clearMediaStreams:function(e){var t=e.commit;return t("clearMediaStreams")}},Be={},Ue=new Ie["a"].Store({state:je,getters:Be,actions:Qe,mutations:Ee,plugins:[Object($e["a"])({getState:function(e){return Ae["getJSON"](e)},setState:function(e,t){Ae["set"](e,t,{expires:parseInt(30,10),secure:!0})}})]}),Ye=s("8c4f"),He=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh lpr lfr","right-breakpoint":1100}},[s("q-page-container",[s("router-view",{key:e.$route.fullPath,attrs:{id:"main-view"}})],1),s("div",{attrs:{id:"screen-too-large"}},[s("h5",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("label.GraalyIsOptimizedForSmallerScreens"))+"\n    ")])])],1)},Ge=[],We={data:function(){return{user:{name:"--",picture:"",id:"",team:{currentId:0,profile:{score:{total:0,members:0}}}}}},mounted:function(){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"},watch:{$route:function(e){this.$store.state.user&&this.$store.state.user.language?this.$i18n.locale=this.$store.state.user.language:navigator.language&&"fr"===navigator.language.substr(0,2)||navigator.userLanguage&&"fr"===navigator.userLanguage.substr(0,2)?this.$i18n.locale="fr":this.$i18n.locale="en"}},methods:{}},Ve=We,Je=Object(_e["a"])(Ve,He,Ge,!1,null,null,null),Ke=Je.exports,Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[e.showNonHybridQRReader?s("div",[s("q-toolbar",[s("q-toolbar-title",[e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeQRCodeReader}})],1),s("qrcode-stream",{on:{decode:e.checkCode}})],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{staticClass:"teaser"},[e.offline.active?e._e():s("mainQuest",{attrs:{quest:e.bestQuest}}),e.offline.active?s("div",{staticClass:"q-pt-lg"},[s("div",{staticClass:"q-pa-md no-internet-connection"},[s("q-icon",{attrs:{name:"cloud_off"}}),s("p",[e._v(e._s(e.$t("label.NoInternetConnection")))])],1),e.questList.length?e._e():s("div",{staticClass:"q-pa-md"},[e._v(e._s(e.$t("label.YouAreOfflineNoQuestsAvailable")))]),e.questList.length?s("div",[s("mainQuest",{attrs:{quest:e.questList[0]}}),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n        ")],1):e._e(),s("titleBar",{attrs:{title:{text:e.$t("label.CachedQuests"),type:"key"}}}),s("questsList",{attrs:{format:"small",quests:e.questList}})],1):e._e()]):e._e(),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-radio",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoNetwork"))+"\n    ")],1):e._e(),e.warnings.noNetwork||e.warnings.noServerReponse?s("div",[!e.warnings.noNetwork&&e.warnings.noServerReponse?s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]):e._e(),!e.offline.active&&e.invitationQuests&&e.invitationQuests.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Invitations"),type:"key"}}}),s("questsList",{attrs:{format:"small",quests:e.invitationQuests}})],1):e._e(),!e.offline.active&&e.onTopQuests&&e.onTopQuests.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.OnTopGames"),type:"key"}}}),s("questsList",{attrs:{format:"small",quests:e.onTopQuests}})],1):e._e(),!e.offline.active&&e.extraQuests&&e.extraQuests.items&&e.extraQuests.items.length>0?s("div",[e.extraQuests.title&&e.extraQuests.title[e.$t("label.shortLang")]?s("titleBar",{attrs:{title:{text:e.extraQuests.title[e.$t("label.shortLang")],type:"key"}}}):e._e(),s("questsList",{attrs:{format:"small",quests:e.extraQuests.items}})],1):e._e(),e.offline.active?e._e():s("div",{staticClass:"q-px-md q-pt-lg cursor-pointer"},[s("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/scan-button.png)"},on:{click:e.startScanQRCode}},[e._v("\n        "+e._s(e.$t("label.ScanQRCode"))+"\n      ")])]),e.offline.active?e._e():s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.AroundYou"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAroundYou}}),!e.nearestQuests||e.nearestQuests.length>0?s("div",[s("questsList",{attrs:{format:"small",quests:e.nearestQuests}})],1):e._e(),e.nearestQuests&&0===e.nearestQuests.length?s("div",[s("div",{staticClass:"centered q-pa-md"},[e._v("\n          "+e._s(e.$t("label.NoQuestAroundYou"))+"\n          "),s("div",[s("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])])])]):e._e()],1),e.offline.active||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country?e._e():s("div",{staticClass:"q-px-md q-pt-lg"},[s("div",{staticClass:"image-button",staticStyle:{"background-image":"url(statics/images/icon/profile-button.png)"},on:{click:e.openUpdateProfilePage}},[e._v("\n        "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n      ")])]),e.offline.active||e.friendQuests&&!(e.friendQuests.length>0)?e._e():s("div",[s("titleBar",{attrs:{format:"small",title:{text:e.$t("label.FriendsQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreFriendsGames}}),s("questsList",{attrs:{format:"small",quests:e.friendQuests}})],1),e.offline.active||e.users&&!(e.users.length>0)?e._e():s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Designers"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllCreators}}),s("usersList",{attrs:{format:"scroll",users:e.users}})],1),e.offline.active?e._e():s("div",{staticClass:"q-ma-md relative-position creator-button cursor-pointer",on:{click:e.buildQuest}},[s("img",{staticClass:"full-width",attrs:{src:"statics/images/other/creator.jpg"}}),s("div",{staticClass:"bg-accent subtitle2 q-pa-md full-width",staticStyle:{bottom:"0px",position:"absolute","line-height":"0.8em"}},[e._m(0),s("span",[e._v(e._s(e.$t("label.StartCreation")))])])]),e.offline.active?e._e():s("div",{staticClass:"q-px-md q-py-lg"},[s("div",{staticClass:"image-button cursor-pointer",staticStyle:{"background-image":"url(statics/images/icon/locator-button.png)"},on:{click:e.openMap}},[e._v("\n        "+e._s(e.$t("label.OpenTheMap"))+"\n      ")])]),s("div",{staticClass:"fixed-top"},[s("div",{staticClass:"home-header row no-wrap",class:{disabled:e.offline.active}},[s("img",{staticClass:"logo",attrs:{src:"statics/images/logo/logo-header-color.png"}}),s("q-space"),e.$store.state.user.isAdmin?s("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/tools.png"},on:{click:e.openAdminPage}}):e._e(),s("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/search.svg"},on:{click:e.openSearch}}),s("img",{staticClass:"header-button q-mr-md cursor-pointer",attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"},on:{click:e.openRanking}}),s("q-avatar",{staticClass:"cursor-pointer",on:{click:function(t){return e.openProfile()}}},[s("img",{attrs:{src:e.getProfileImage()}})])],1)]),e.offline.active?e._e():s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}}),s("q-dialog",{staticClass:"over-map",attrs:{maximized:""},model:{value:e.ranking.show,callback:function(t){e.$set(e.ranking,"show",t)},expression:"ranking.show"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.YourRanking")))]),s("q-space"),s("q-btn",{attrs:{icon:"close",flat:"",round:"",dense:""}})],1),e.warnings.rankingMissing?s("q-card-section",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.getRanking}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),s("q-card-section",[s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Level")))]),s("q-item",{attrs:{multiline:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"trending_up",color:"primary"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.MyLevel"))+": "+e._s(e.$store.state.user.level)+" ("+e._s(e.$store.state.user.score)+" "+e._s(e.$t("label.points"))+")")]),s("q-linear-progress",{staticClass:"q-my-sm",staticStyle:{height:"18px"},attrs:{rounded:"",value:e.profile.level.progress,color:"primary"}}),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ReachScoreOf",{score:e.profile.level.max})))])],1)],1)],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings?s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.Rankings")))]),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"public",color:"primary"}})],1),s("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourWorldRanking"))+" : \n                "),e.$store.state.user.statistics.rankings.world?s("span",[e._v(e._s(e.$store.state.user.statistics.rankings.world))]):e._e(),e.$store.state.user.statistics.rankings.world?e._e():s("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"home",color:"primary"}})],1),s("q-item-label",[e._v("\n                "+e._s(e.$t("label.YourCityRanking"))+" :\n                "),e.$store.state.user.statistics.rankings.town?s("span",[e._v(e._s(e.$store.state.user.statistics.rankings.town))]):e._e(),e.$store.state.user.statistics.rankings.town?e._e():s("span",[e._v(e._s(e.$t("label.AvailableTomorrow")))])])],1)],1):e._e(),e.success.ranking&&e.success.ranking.length>0?s("div",[s("h1",{staticClass:"size-3 q-pl-md"},[e._v(e._s(e.$t("label.Rewards")))]),e._l(e.success.ranking,(function(t,a){return s("q-list",{key:a},[s("q-item-label",{attrs:{header:""}},[e._v(e._s(t.city))]),s("q-item",{staticStyle:{"flex-wrap":"wrap"}},e._l(t.rewards,(function(t,a){return s("img",{key:a,class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}})})),0)],1)})),e._v("\n            "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n          ")],2):e._e()],1),e.$store.state.user&&e.$store.state.user.statistics&&e.$store.state.user.statistics.rankings||e.success.ranking&&e.success.ranking.length>0?e._e():s("q-card-section",[e._v("\n          "+e._s(e.$t("label.NoRankingYet"))+"\n        ")])],1)],1),e.offline.active?e._e():s("div",{staticClass:"fixed-bottom over-map"},[e.offline.show?s("div",[s("offlineLoader",{attrs:{quest:e.offline.quest,design:"download",lang:e.$t("label.shortLang")},on:{end:function(t){return e.questLoadedInCache()}}})],1):e._e()]),s("q-dialog",{staticClass:"over-map bg-white",attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[s("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1)])},Xe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"float-right"},[s("img",{staticStyle:{width:"32px"},attrs:{src:"statics/images/icon/puzzle-big.svg"}})])}],et=(s("7f7f"),s("28a5"),s("34ef"),s("ff57")),tt=s.n(et),st=(s("6b54"),s("3b2b"),s("5a89")),at=s("3452"),rt={notificationsArr:[],handleError:function(e){Ue.dispatch("setErrorMessage",e),Do.push("/error")},buildOptionsForSelect:function(e,t,s){var a=[];return e.forEach((function(e){a.push({value:e[t.valueField],label:s("label."+e[t.labelField])})})),a},getById:function(e,t){for(var s=0;s<e.length;s++)if(e[s].id===t)return e[s];return null},degreesToRadians:function(e){return e*Math.PI/180},radiansToDegrees:function(e){return 180*e/Math.PI},distanceInKmBetweenEarthCoordinates:function(e,t,s,a){var r=6371,n=rt.degreesToRadians(s-e),o=rt.degreesToRadians(a-t);e=rt.degreesToRadians(e),s=rt.degreesToRadians(s);var i=Math.sin(n/2)*Math.sin(n/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(e)*Math.cos(s),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return r*l},bearingBetweenEarthCoordinates:function(e,t,s,a){var r=rt.degreesToRadians(a-t),n=rt.degreesToRadians(e),o=rt.degreesToRadians(s),i=Math.sin(r)*Math.cos(o),l=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(r),c=rt.radiansToDegrees(Math.atan2(i,l));return(c+360)%360},replaceBreakByBR:function(e){return e&&"string"===typeof e&&(e=e.replace(/\r\n/gi,"<br />"),e=e.replace(/\n/gi,"<br />"),e=e.replace(/\r/gi,"<br />")),e},removeAccents:function(e){var t=e.toLowerCase(),s={a:"[àáâãäå]",ae:"æ",c:"ç",e:"[èéêë]",i:"[ìíîï]",n:"ñ",o:"[òóôõö]",oe:"œ",u:"[ùúûűü]",y:"[ýÿ]"};for(var a in s)t=t.replace(new RegExp(s[a],"g"),a);return t},shuffle:function(e){var t,s,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),s=e[a],e[a]=e[t],e[t]=s;return e},buildIncrementalArray:function(e){for(var t=[],s=1;s<=e;s++)t.push(s);return t},isValidEmail:function(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return!(!e||!t.test(e))},setTimeout:function(e){function t(t,s){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var s=setTimeout(e,t);return Ue.dispatch("addTimeoutId",s),s})),clearAllTimeouts:function(){var e=!0,t=!1,s=void 0;try{for(var a,r=Ue.state.runningTimeoutsIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var n=a.value;clearTimeout(n)}}catch(o){t=!0,s=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}Ue.dispatch("clearTimeoutIds")},setInterval:function(e){function t(t,s){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var s=setInterval(e,t);return Ue.dispatch("addIntervalId",s),s})),clearAllIntervals:function(){var e=!0,t=!1,s=void 0;try{for(var a,r=Ue.state.runningIntervalIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var n=a.value;clearInterval(n)}}catch(o){t=!0,s=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}Ue.dispatch("clearIntervalIds")},clearAllNotifications:function(){if(this.notificationsArr){for(var e=0;e<this.notificationsArr.length;e++)this.notificationsArr[e]();this.notificationsArr.length=0}},clearAllRunningProcesses:function(){this.clearAllTimeouts(),this.clearAllIntervals(),this.clearAllNotifications()},getDurationFromNow:function(e){var t=new Date(e),s=new Date,a=s.getTime()-t.getTime();return{h:parseInt(a/36e5%24),m:parseInt(a/6e4%60)}},clearCameraStream:function(e){e.getTracks().forEach((function(e){return e.stop()}))},clone:function(e){if(null===e||"object"!==tt()(e)||"isActiveClone"in e)return e;var t=e instanceof Date?new e.constructor:e.constructor();for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e["isActiveClone"]=null,t[s]=this.clone(e[s]),delete e["isActiveClone"]);return t},humanReadableFileSize:function(e,t,s){var a=t?1e3:1024,r=s("label.byteCharacter");if(Math.abs(e)<a)return e+" "+r;var n=t?["K","M","G","T","P","E","Z","Y"]:["Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"],o=-1;n=n.map((function(e){return e+r}));do{e/=a,++o}while(Math.abs(e)>=a&&o<n.length-1);return e.toFixed(1)+" "+n[o]},randomId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<16;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},detachObject3D:function(e,t,s){e.applyMatrix(t.matrixWorld),t.remove(e),s.add(e)},attachObject3D:function(e,t,s){e.applyMatrix((new st["Matrix4"]).getInverse(t.matrixWorld)),s.remove(e),t.add(e)},initFileStorage:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:s,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:s,exclusive:!1},(function(e){a(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},checkIfFileExists:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:s,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:s,exclusive:!1},(function(e){a(!0)}),(function(){a(!1)}))}),(function(){a(!1)}))}))},writeInFile:function(e,t,s,a){var r=this;return new Promise((function(n,o){window.cordova||n(!1),window.requestFileSystem(window.TEMPORARY,0,(function(o){e&&""!==e?o.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){n(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),n(!1)},s||(s=new Blob(["some file data"],{type:"text/plain"}));var t=r.gcrypt(s,"Gr44lyCryp7");e.write(t)}))}),(function(){n(!1)}))}),(function(){n(!1)})):o.root.getFile(t,{create:a,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){n(!0)},e.onerror=function(e){var t="Failed file write: "+e.toString();console.log(t),n(!1)},s||(s=new Blob(["some file data"],{type:"text/plain"}));var t=r.gcrypt(s,"Gr44lyCryp7");e.write(t)}))}),(function(){n(!1)}))}),(function(){n(!1)}))}))},readFile:function(e,t){var s=this;return new Promise((function(a,r){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,0,(function(r){r||a(!1),e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=s.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var t=new FileReader;t.onloadend=function(){var e=s.gcrypt(this.result,"Gr44lyCryp7",!0);a(e)},t.readAsText(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},saveBinaryFile:function(e,t,s){return new Promise((function(a,r){window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,5242880,(function(r){var n=new XMLHttpRequest;n.open("GET",t+s,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var t=new Blob([this.response],{type:"image/png"});e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(s,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(s,{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(){a(!0)},e.onerror=function(e){console.log("Failed file write: "+e.toString()),a(!1)},e.write(t)}))}),(function(){a(!1)}))}else a(!1)},n.send()}),(function(){a(!1)}))}))},readBinaryFile:function(e,t){var s=this;return new Promise((function(a,r){t||a(!1),window.cordova||a(!1),window.requestFileSystem(window.TEMPORARY,20971520,(function(r){r||a(!1),e&&""!==e?r.root.getDirectory(e,{create:!0},(function(e){e.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var r=new FileReader;r.onloadend=function(){var e=s.getMimeType(t),r=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(r))},r.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)})):r.root.getFile(t,{create:!1,exclusive:!1},(function(e){e||a(!1),e.file((function(e){e||a(!1);var r=new FileReader;r.onloadend=function(){var e=s.getMimeType(t),r=new Blob([new Uint8Array(this.result)],{type:e});a(window.URL.createObjectURL(r))},r.readAsArrayBuffer(e)}),(function(){a(!1)}))}),(function(){a(!1)}))}),(function(){a(!1)}))}))},removeDirectory:function(e){return new Promise((function(t,s){window.cordova||t(!1),window.requestFileSystem(window.TEMPORARY,0,(function(s){s||t(!1),s.root.getDirectory(e,{create:!1},(function(e){e.removeRecursively((function(){t(!0)}),(function(){t(!1)}))}),(function(){t(!1)}))}),(function(){t(!1)}))}))},getMimeType:function(e){var t="image/png",s=e.substr(-4);switch(s){case".avi":t="video/x-msvideo";break;case".gif":t="image/gif";break;case".jpg":case"jpeg":t="image/jpeg";break;case"mpeg":t="video/mpeg";break;case".mp4":t="video/mp4";break;case".svg":t="image/svg+xml";break;case"webm":t="video/webm";break;case".glb":t="model/gltf-binary";break}return t},gcrypt:function(e,t,s){return s?at["AES"].decrypt(e,t).toString(at["enc"].Utf8):at["AES"].encrypt(e,t).toString()},arrayAverage:function(e){var t=e.reduce((function(e,t){return e+t}));return t/e.length},isNetworkAvailable:function(){return"undefined"===typeof navigator.connection||"undefined"===typeof navigator.connection.type||("undefined"===typeof Connection&&(window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"}),navigator.connection.type!==Connection.NONE)},openExternalLink:function(e){window.cordova?navigator.app.loadUrl(e,{openExternal:!0}):window.open(e,"_blank")},removeUnusedUrl:function(e){if(-1!==e.indexOf("gc=")){var t=e.indexOf("gc=");return e.substring(t+3)}return e},loadImage:function(e){return new Promise((function(t,s){var a=new Image;a.onload=function(){t(a)},a.onerror=s,a.src=e}))},isIOS:function(){return window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId},requestDeviceMotionPermission:function(){return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceMotionEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},requestDeviceOrientationPermission:function(){return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof DeviceOrientationEvent.requestPermission){e.next=4;break}return e.abrupt("return",DeviceMotionEvent.requestPermission());case 4:return e.abrupt("return",Promise.resolve("granted"));case 5:case"end":return e.stop()}}),e)})))()},stringToBytes:function(e){for(var t=new Uint8Array(e.length),s=0,a=e.length;s<a;s++)t[s]=e.charCodeAt(s);return t.buffer},bytesToString:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},replaceStringAt:function(e,t,s){return e.substr(0,t)+s+e.substr(t+s.length)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},timeStringToSeconds:function(e){var t=e.split("h"),s=t[1].split("m"),a=s[1].split("s"),r=3600*t[0],n=60*s[0],o=1*a[0],i=r+n+o;return i},secondsToTimeString:function(e){var t=Math.floor(e/3600);e%=3600;var s=Math.floor(e/60),a=e%60;return t+"h"+s+"m"+a+"s"},map:function(e,t,s,a,r){return(e-t)*(r-a)/(s-t)+a},compareVersions:function(e,t){for(var s,a=/(\.0+)+$/,r=e.replace(a,"").split("."),n=t.replace(a,"").split("."),o=Math.min(r.length,n.length),i=0;i<o;i++)if(s=parseInt(r[i],10)-parseInt(n[i],10),s)return s;return r.length-n.length}},nt=rt,ot={listNearest:function(e,t){return t||(t="default"),Re().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/0/lang/"+t).catch((function(e){return console.log(e.request)}))},listNearestSync:function(e,t,s,a){return t||(t="default"),Re().get("quests/nearest/"+e.longitude+"-"+e.latitude+"/"+s+"/lang/"+t).then((function(e){a(!1,e)}))},listHomeQuests:function(e,t){return t||(t="default"),Re().get("quests/home/"+e.lng+"-"+e.lat+"/lang/"+t).catch((function(e){return console.log(e.request)}))},listAllForCountry:function(){return Re().get("quests/country/FR").catch((function(e){return console.log(e.request)}))},listFriendQuests:function(e){return e||(e="default"),Re().get("quests/friends/played/0/lang/"+e).catch((function(e){return console.log(e.request)}))},listFriendQuestsync:function(e,t,s){return e||(e="default"),Re().get("quests/friends/played/"+t+"/lang/"+e).then((function(e){s(!1,e)}))},getById:function(e,t,s){return s||(s="default"),Re().get("quest/"+e+"/version/"+t+"/lang/"+s).catch((function(e){return console.log(e.request)}))},getSize:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/size").catch((function(e){return console.log(e.request)}))},getLastById:function(e,t){return t||(t="default"),Re().get("quest/"+e+"/version/999/lang/"+t).catch((function(e){return console.log("getLastById(): could not retrieve quest data",e)}))},find:function(e,t,s){return s||(s="default"),Re().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/0/lang/"+s)},findSync:function(e,t,s,a,r){return s||(s="default"),Re().get("quests/find/"+e+"/nearest/"+t.longitude+"-"+t.latitude+"/"+a+"/lang/"+s).then((function(e){r(!1,e)}))},create:function(e,t,s,a){return Re().post("quest/create/"+a+"/"+t+"/"+s,e).catch((function(e){return console.log(e.request)}))},createNewVersion:function(e){return Re().post("quest/"+e+"/clone/draft").catch((function(e){return console.log(e.request)}))},save:function(e){return Re().put("quest/"+e.questId+"/version/"+e.version+"/update",e).catch((function(e){return console.log(e.request)}))},remove:function(e,t){return Re().delete("quest/"+e+"/version/"+t+"/remove")},clone:function(e,t){return Re().post("quest/"+e+"/version/"+t+"/clone")},closePrivate:function(e,t){return Re().post("quest/"+e+"/version/"+t+"/close")},addLanguage:function(e,t){return Re().put("quest/"+e+"/lang/add/"+t).catch((function(e){return console.log("addLanguage(): could not retrieve quest data",e)}))},publish:function(e,t){return Re().put("quest/"+e+"/publish/"+t).catch((function(e){return console.log(e.request)}))},unpublish:function(e,t){return Re().put("quest/"+e+"/unpublish/"+t).catch((function(e){return console.log(e.request)}))},countForUser:function(e){return Re().get("user/"+e+"/quests/created/count").catch((function(e){return console.log(e.request)}))},ListCreatedByAUser:function(e,t){return t||(t="default"),Re().get("user/"+e+"/quests/created/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUser:function(e,t){return t||(t="default"),Re().get("user/"+e+"/quests/played/0/lang/"+t).catch((function(e){return console.log(e.request)}))},ListPlayedByAUserSync:function(e,t,s,a){return t||(t="default"),Re().get("user/"+e+"/quests/played/"+s+"/lang/"+t).then((function(e){a(!1,e)}))},listMedia:function(e,t,s){return s||(s="all"),Re().get("quest/"+e+"/version/"+t+"/media/"+s+"/list").catch((function(e){return console.log(e.request)}))},removeMedia:function(e,t,s){return Re().delete("quest/"+e+"/version/"+t+"/media/"+s+"/remove")},listObjectFiles:function(e,t){return Re().get("quest/"+t+"/offline/object/"+e+"/files").catch((function(e){return console.log(e.request)}))},getStatistics:function(e,t,s){return Re().get("quest/"+e+"/version/"+t+"/statistics/"+s).catch((function(e){return console.log(e.request)}))},uploadPicture:function(e){return Re().post("/quest/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadLogo:function(e){return Re().post("/quest/logo/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAudio:function(e){return Re().post("/quest/audio/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadCharacter:function(e){return Re().post("/quest/character/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadReward:function(e){return Re().post("/quest/reward/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadThumb:function(e){return Re().post("/quest/thumb/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},CheckIfCanBeMovedPremium:function(e){return Re().get("quest/"+e+"/premium/check").catch((function(e){return console.log(e.request)}))},MoveToPremium:function(e){return Re().post("quest/"+e+"/premium/set").catch((function(e){return console.log(e.request)}))},checkTierPayment:function(e){return Re().get("quest/"+e+"/payment/tier/check").catch((function(e){return console.log(e.request)}))},createTierPayment:function(e,t){return Re().post("quest/"+e+"/payment/tier/add",{price:t}).catch((function(e){return console.log(e.request)}))},removeTierPayment:function(e,t){return Re().delete("quest/"+e+"/payment/tier/remove/"+t).catch((function(e){return console.log(e.request)}))},listTierPayments:function(e){return Re().get("quest/"+e+"/payment/tier/list").catch((function(e){return console.log(e.request)}))},useTierPaymentCode:function(e,t){return Re().post("quest/"+e+"/payment/tier/use",{code:t}).catch((function(e){return console.log(e.request)}))},purchasePremium:function(e,t){return Re().post("quest/"+e+"/premium/buy",t).catch((function(e){return console.log(e.request)}))},purchasePrivateQuest:function(e,t){return Re().post("quest/"+e+"/private/buy",t).catch((function(e){return console.log(e.request)}))},hasPayed:function(e){return Re().get("quest/"+e+"/premium/ispayed").catch((function(e){return console.log(e.request)}))},checkLoginQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Re().get("quest/"+e+"/connectandplay/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},checkQRCode:function(e,t){return e=e.replace(/\//g,"-slash-"),Re().get("quest/"+e+"/play/qrcode/lang/"+t).catch((function(e){return console.log(e.request)}))},submitSuggestion:function(e){return Re().post("quest/suggest",e).catch((function(e){return console.log(e.request)}))},listEditors:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/editor/list").catch((function(e){return console.log(e.request)}))},addEditor:function(e,t,s){return Re().put("quest/"+e+"/version/"+t+"/editor/add/"+s).catch((function(e){return console.log(e.request)}))},removeEditor:function(e,t,s){return Re().delete("quest/"+e+"/version/"+t+"/editor/remove/"+s)},listInvitees:function(e,t){return Re().get("quest/"+e+"/version/"+t+"/invitee/list").catch((function(e){return console.log(e.request)}))},addInvitee:function(e,t,s){return Re().put("quest/"+e+"/version/"+t+"/invitee/add/"+s).catch((function(e){return console.log(e.request)}))},removeInvitee:function(e,t,s){return Re().delete("quest/"+e+"/version/"+t+"/invitee/remove/"+s)},isCached:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(window.cordova){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,nt.checkIfFileExists(e,"quest_"+e+".json");case 4:if(a=s.sent,a){s.next=7;break}return s.abrupt("return",!1);case 7:if(nt.isNetworkAvailable()){s.next=9;break}return s.abrupt("return",!0);case 9:return s.t0=JSON,s.next=12,nt.readFile(e,"quest_"+e+".json");case 12:return s.t1=s.sent,n=s.t0.parse.call(s.t0,s.t1),s.next=16,t.getLastById(e);case 16:if(o=s.sent,o){s.next=19;break}return s.abrupt("return",!1);case 19:return o=o.data,s.abrupt("return",o.version===n.version);case 21:case"end":return s.stop()}}),s)})))()},removeFromCache:function(e){return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.removeDirectory(e);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(e){return e.picture&&"_"===e.picture[0]?"statics/images/quest/"+e.picture:e.picture&&-1!==e.picture.indexOf("blob:")?e.picture:e.picture?"https://api.graaly.com/upload/quest/"+e.picture:"statics/images/quest/default-quest-picture.png"}},it={listFriends:function(e,t,s){return Re().get("user/"+e+"/friends/list/"+t+"/"+s).catch((function(e){return console.log(e.request)}))},listFriendsSync:function(e,t,s,a){return Re().get("user/"+e+"/friends/list/"+t+"/"+s).then((function(e){a(!1,e)}))},listSuggestions:function(e,t){return Re().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/0").catch((function(e){return console.log(e.request)}))},listSuggestionsSync:function(e,t,s,a){return Re().get("user/suggestions/"+e.lng+"-"+e.lat+"/"+t+"/"+s).then((function(e){a(!1,e)}))},listFollowersSync:function(e,t,s){return Re().get("user/followers/"+e+"/"+t).then((function(e){s(!1,e)}))},find:function(e,t){return Re().get("user/type/"+e+"/filter/"+t+"/0").catch((function(e){return console.log(e.request)}))},findSync:function(e,t,s,a){return Re().get("user/type/"+e+"/filter/"+t+"/"+s).then((function(e){a(!1,e)}))},listNews:function(e,t,s){return Re().get("user/friends/news/list/"+e+"/"+t).then((function(e){s(!1,e)}))},likeNews:function(e){return Re().put("user/friends/news/"+e+"/like").catch((function(e){return console.log(e.request)}))},unlikeNews:function(e){return Re().put("user/friends/news/"+e+"/unlike").catch((function(e){return console.log(e.request)}))},getFriend:function(e){return Re().get("user/"+e+"/profile").catch((function(e){return console.log(e.request)}))},getRangeRanking:function(e){return Re().get("ranking/"+e).catch((function(e){return console.log(e.request)}))},getRewards:function(e,t){return Re().get("user/"+e+"/reward/list/"+t).catch((function(e){return console.log(e.request)}))},challengeFriend:function(e,t){return Re().post("user/friend/"+e+"/challenge/"+t).catch((function(e){return console.log(e.request)}))},getBestFriends:function(){return Re().get("user/bestfriends").catch((function(e){return console.log(e.request)}))},getOrganization:function(){return Re().get("user/organization").catch((function(e){return console.log(e.request)}))},buy:function(e){return Re().post("user/buy/offer/"+e).catch((function(e){return console.log(e.request)}))},nextStoryStep:function(e){return Re().post("user/story/step/"+e).catch((function(e){return console.log(e.request)}))},addFriend:function(e){return e.email&&e.email.length>0?Re().post("user/friends/add/email/"+e.email).catch((function(e){return console.log(e.request)})):e.phone&&e.phone.length>0?Re().post("user/friends/add/phone/"+e.phone).catch((function(e){return console.log(e.request)})):Re().post("user/friend/add/"+e).catch((function(e){return console.log(e.request)}))},removeFriend:function(e){return Re().delete("user/friend/remove/"+e)},checkContacts:function(e){return Re().post("user/friends/contacts/check",{contacts:e}).catch((function(e){return console.log(e.request)}))},sendFeedback:function(e,t){return Re().post("user/feedback/send",{message:e,context:t}).catch((function(e){return console.log(e.request)}))}},lt={launchpopup:function(){var e=this;AppRate.preferences.useLanguage="fr",AppRate.preferences.storeAppURL={ios:"id1448284225",android:"market://details?id=graaly.app"},AppRate.preferences.reviewType={ios:"InAppReview",android:"InAppReview"},AppRate.preferences.simpleMode=!0,AppRate.preferences.callbacks.onButtonClicked=function(t){switch(console.log("onButtonClicked -> "+t),t){case 1:e.addAlreadyAskedForRating();break;case 2:e.addLater(7);break;case 3:break;default:break}},AppRate.promptForRating()},initLocalStorage:function(){null===window.localStorage.getItem("alreadyAsked")&&window.localStorage.setItem("alreadyAsked","false"),null===window.localStorage.getItem("futuredate")&&window.localStorage.setItem("futuredate","")},addAlreadyAskedForRating:function(){window.localStorage.setItem("alreadyAsked","true")},addLater:function(e){var t=new Date,s=new Date;s.setDate(t.getDate()+e),window.localStorage.setItem("alreadyAsked","later"),window.localStorage.setItem("futuredate",s.toString())},hasAlreadyHavePopup:function(){var e=window.localStorage.getItem("alreadyAsked");if("true"===e||"false"===e)return console.log("has already awensered"),e;if("later"===e){var t=window.localStorage.getItem("futuredate");return new Date(t)<new Date?"false":"true"}},resetAlreadyAsked:function(){window.localStorage.setItem("alreadyAsked","false"),window.localStorage.setItem("futuredate","")}},ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSupported&&e.isActive?e._e():s("div",{staticClass:"geolocation-layer"},[!e.isActive&&e.nbFails>=2?s("div",[s("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[s("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"},on:{click:function(t){e.showHelp=!0}}})],1)],1):e._e(),s("q-dialog",{model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.LocationSearching"))+"\n        "),e.askUserToEnableGeolocation?s("div",[s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.CouldNotRetrieveYourPosition"))+"\n          ")]),s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n            "+e._s(e.$t("label.PossibleReasons"))+"\n            "),s("ul",[s("li",[e._v(e._s(e.$t("label.ClosedEnvironment")))]),s("li",[e._v("\n                "+e._s(e.$t("label.GeolocationDisabled"))+"\n                "),e.nativeSettingsIsEnabled?s("span",[s("br"),s("q-btn",{attrs:{color:"primary"},on:{click:e.openLocationSettings}},[e._v(e._s(e.$t("label.OpenLocationSettings")))])],1):e._e()])]),e.nativeSettingsIsEnabled?e._e():s("div",[e.isChrome?s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnChrome"))}})]):e._e(),e.isChrome?e._e():s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("label.HowToActivateGeolocationOnIOs"))}})])])])]):e._e(),e.isSupported?e._e():s("div",{staticClass:"geolocation-not-supported",staticStyle:{"flex-grow":"1"}},[e._v("\n          "+e._s(e.$t("label.GeolocationNotSupported"))+"\n        ")])])],1)],1)],1)},ut=[],dt=(s("4917"),s("c5f6"),{props:{maximumAge:{type:Number,default:0}},data:function(){return{isSupported:!0,isActive:!0,nativeSettingsIsEnabled:window.cordova&&window.cordova.plugins.settings,userDeniedGeolocation:!1,timeoutBetweenFailedAttempts:1e4,nbFails:0,disabled:!1,alreadyWorked:!1,showHelp:!1,method:"watchPosition",geolocationWatchId:null,timeoutIds:[],positionHistory:[]}},watch:{disabled:function(e,t){!0===e?this.stopTracking():this.startTracking()}},computed:{isChrome:function(){var e=window.chrome,t=window.navigator,s=t.vendor,a=t.userAgent.indexOf("Edge")>-1,r=t.userAgent.match("CriOS");return!!r||null!==e&&"undefined"!==typeof e&&"Google Inc."===s&&!1===a},askUserToEnableGeolocation:function(){return this.nbFails>=2&&!this.alreadyWorked||this.userDeniedGeolocation}},mounted:function(){navigator&&navigator.geolocation?this.startTracking():this.isSupported=!1},beforeDestroy:function(){this.stopTracking()},methods:{startTracking:function(){this.disabled||("watchPosition"===this.method?this.geolocationWatchId=navigator.geolocation.watchPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}):navigator.geolocation.getCurrentPosition(this.locationSuccess,this.locationError,{enableHighAccuracy:!0,timeout:this.timeoutBetweenFailedAttempts,maximumAge:this.maximumAge}))},locationError:function(e){if(console.warn("Could not get location"),console.log(e),!this.disabled){this.isSupported=!0,this.isActive=!1,this.nbFails++,this.userDeniedGeolocation=1===e.code,this.$emit("error",!this.alreadyWorked);var t=nt.setTimeout(this.startTracking,this.timeoutBetweenFailedAttempts);this.timeoutIds.push(t)}},locationSuccess:function(e){if(!this.disabled&&(this.isSupported=!0,this.alreadyWorked=!0,this.isActive=!0,this.nbFails=0,this.userDeniedGeolocation=!1,this.$emit("success",{coords:{accuracy:e.coords&&e.coords.accuracy?e.coords.accuracy:10,altitude:e.coords?e.coords.altitude:null,speed:e.coords?e.coords.speed:null,latitude:e.coords.latitude,longitude:e.coords.longitude}}),"getCurrentPosition"===this.method)){var t=nt.setTimeout(this.startTracking,1e3);this.timeoutIds.push(t)}},stopTracking:function(){if("watchPosition"===this.method&&null!==this.geolocationWatchId&&(navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null),this.timeoutIds.length>0){var e=!0,t=!1,s=void 0;try{for(var a,r=this.timeoutIds[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var n=a.value;clearTimeout(n)}}catch(o){t=!0,s=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw s}}this.timeoutIds=[]}},openLocationSettings:function(){var e=this;window.cordova&&window.cordova.plugins.settings?window.cordova.plugins.settings.open("location",(function(){e.nativeSettingsIsEnabled=!0,e.userDeniedGeolocation=!1,e.nbFails=0}),(function(){console.warn("failed to open settings"),this.nativeSettingsIsEnabled=!1})):(console.warn("openNativeSettings is not active!"),this.nativeSettingsIsEnabled=!1)}}}),pt=dt,mt=(s("a524"),Object(_e["a"])(pt,ct,ut,!1,null,"3fc5b7a6",null)),ht=mt.exports,ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"q-ml-md"},[e._v("Pendant les tests, l'énergie est gratuite !")]),s("q-list",{attrs:{highlight:""}},[s("q-item-label",[e._v(e._s(e.$t("label.Coins")))]),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-coins-medium.png"}})]),s("q-item-label",[e._v("600 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.600-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-bag-medium.png"}})]),s("q-item-label",[e._v("3000 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.3000-coins")}}},[e._v("0€ (Beta)")])],1)],1),s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("img",{attrs:{src:"statics/icons/game/shop-chest-medium.png"}})]),s("q-item-label",[e._v("6000 "+e._s(e.$t("label.coins")))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{color:"positive"},on:{click:function(t){return e.buy("graaly.6000-coins")}}},[e._v("0€ (Beta)")])],1)],1)],1),e.coinsWon&&e.coinsWon>0?s("div",{staticClass:"fadein-message"},[e._v("+"+e._s(e.coinsWon)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1):e._e()],1)},gt=[],bt=(s("f751"),{position:"top",actions:[{icon:"close"}]}),vt=function(e,t,s){var a,r=window.cordova;switch(t){case"positive":a={icon:"check_circle",color:"positive"};break;case"warning":a={icon:"warning",color:"orange"};break;case"error":a={icon:"report_problem",color:"negative"};break;case"rightAnswer":a={color:"positive",timeout:4e3};break;case"wrongAnswer":a={color:"orange",timeout:4e3};break;case"readMore":a={icon:"info",color:"positive",timeout:0,position:r?"bottom":"top-right"};break;default:a={icon:"info",color:"info"};break}s&&(a.actions=s);var n=qe["a"].create(Object.assign({message:e},bt,a));return nt.notificationsArr.push(n),n},wt={data:function(){return{coinsWon:0}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.coinsWon=0;case 1:case"end":return t.stop()}}),t)})))()},methods:{buy:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.coinsWon=0,s.next=3,it.buy(e);case 3:a=s.sent,a&&a.data&&a.data.coins?(t.coinsWon=a.data.coins,t.$store.state.user.coins+=t.coinsWon):vt(t.$t("label.ErrorStandardMessage"),"error"),setTimeout(t.resetCoinsWon,2e3);case 6:case"end":return s.stop()}}),s)})))()},resetCoinsWon:function(){this.coinsWon=0,this.$emit("close")}}},yt=wt,qt=Object(_e["a"])(yt,ft,gt,!1,null,null,null),kt=qt.exports,xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pt-lg"},[s("div",{staticClass:"q-pa-md bg-grey-8"},[s("div",{staticClass:"subtitle4 centered"},[e._v(e._s(e.$t("label.SuggestAQuest")))]),s("div",{staticClass:"subtitle6 q-py-md"},[e._v(e._s(e.$t("label.SuggestAQuestDesc")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.submitSuggestion()}}},[s("q-input",{attrs:{dark:"",label:e.$t("label.NameOfThePlace"),placeholder:e.$t("label.NameOfThePlaceExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.name,callback:function(t){e.$set(e.place,"name",t)},expression:"place.name"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Address"),maxlength:"100","bottom-slots":""},model:{value:e.place.address,callback:function(t){e.$set(e.place,"address",t)},expression:"place.address"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.ZipCode"),maxlength:"10","bottom-slots":""},model:{value:e.place.postalCode,callback:function(t){e.$set(e.place,"postalCode",t)},expression:"place.postalCode"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Town"),maxlength:"50","bottom-slots":""},model:{value:e.place.city,callback:function(t){e.$set(e.place,"city",t)},expression:"place.city"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.Country"),maxlength:"50","bottom-slots":""},model:{value:e.place.country,callback:function(t){e.$set(e.place,"country",t)},expression:"place.country"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.SuggestContactInformation"),placeholder:e.$t("label.SuggestContactInformationExample"),maxlength:"50","bottom-slots":""},model:{value:e.place.contact,callback:function(t){e.$set(e.place,"contact",t)},expression:"place.contact"}}),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.submitSuggestion()}}},[e._v(e._s(e.$t("label.Send")))])],1),s("div",{staticClass:"centered q-pt-md"},[s("a",{on:{click:function(t){return e.emitClose()}}},[e._v(e._s(e.$t("label.Cancel")))])]),s("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.SuggestWarningMessage")))])],1)])])},Ct=[],St={data:function(){return{place:{name:"",address:"",postalCode:"",city:"",contact:""}}},methods:{emitClose:function(){this.$emit("close")},submitSuggestion:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.submitSuggestion(e.place);case 2:s=t.sent,s&&s.data&&"ok"===s.data.status?(vt(e.$t("label.ThankYouForYourProposal"),"positive"),e.emitClose()):vt(e.$t("label.TechnicalIssue"),"error");case 4:case"end":return t.stop()}}),t)})))()}}},_t=St,Tt=Object(_e["a"])(_t,xt,Ct,!1,null,null,null),Pt=Tt.exports,It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-px-md"},[s("div",{staticClass:"float-right bar-link"},[e.link?s("a",{staticClass:"cursor-pointer",on:{click:e.clickLink}},[e._v(e._s(e.link.text))]):e._e()]),s("div",{class:"title-bar "+e.title.type+"-bar"},[e._v("\n    "+e._s(e.title.text)+"\n  ")])])},$t=[],At={props:["title","link"],methods:{clickLink:function(){this.$emit("click")}}},Ot=At,Mt=Object(_e["a"])(Ot,It,$t,!1,null,null,null),zt=Mt.exports,Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-quest relative-position",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[e.quest?e._e():s("div",{staticClass:"absolute-center"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1),e.quest?s("div",[s("div",{staticClass:"centered main-quest-banner q-pa-md",staticStyle:{background:"linear-gradient(to bottom, transparent, #323232)"}},[s("div",{staticClass:"title2"},[e._v("\n        "+e._s(e.quest.title)+"\n      ")]),s("div",{staticClass:"q-pt-md q-pb-md subtitle6"},[e._v("\n        "+e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        "),s("img",{attrs:{src:"statics/images/icon/separator.png"}}),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?s("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Paying")))]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&e.quest.premiumPrice.active?e._e():s("span",{staticClass:"q-mx-sm"},[e._v(e._s(e.$t("label.Free")))]),e.quest.availablePoints&&e.quest.availablePoints.maxPts?s("span",[s("img",{attrs:{src:"statics/images/icon/separator.png"}}),e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+" "+e._s(e.$t("label.points"))+"\n        ")]):e._e()]),s("div",[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Play"),loading:e.submitting},on:{click:e.playQuest}})],1),s("div",{staticClass:"white-overliner q-mt-md subtitle6"},[e._v("\n        "+e._s(e.$t("label."+e.quest.description))+"\n      ")])])]):e._e()])},Ft=[],Dt={props:["quest"],data:function(){return{serverUrl:"https://api.graaly.com",submitting:!1}},methods:{playQuest:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.submitting=!0,e.$router.push("/quest/play/"+e.quest.questId);case 2:case"end":return t.stop()}}),t)})))()},getBackgroundImage:function(){return this.quest?this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png":""}}},Rt=Dt,Lt=Object(_e["a"])(Rt,Nt,Ft,!1,null,null,null),jt=Lt.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.quests?e._e():s("div",{staticClass:"quest-small relative-position"},[s("div",{staticClass:"absolute-center"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.quests&&(e.quests.length>0||e.add)&&"small"===e.format?s("div",{staticClass:"horizontal-scroll-wrapper quests-horizontal-scroll-wrapper",class:{"quest-red":"red"===e.color}},[e.add?s("div",{staticClass:"quest-add-button relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.buildQuest()}}},[s("div",[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.quests,(function(t){return s("div",{key:t._id,staticClass:"quest-small relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[t.status&&"published"!==t.status?s("div",[s("q-chip",{attrs:{color:"status-"+t.status}},[e._v("\n          "+e._s(e.$t("status."+t.status))+"\n        ")])],1):e._e(),t.userName?s("div",[s("q-chip",{attrs:{color:"graaly-blue-dark"}},[s("q-avatar",[s("img",{attrs:{src:e.getUserBackgroundImage(t.userPicture)}})]),e._v("\n          "+e._s(t.userName)+"\n        ")],1)],1):e._e(),s("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?s("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?s("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?s("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():s("div",[s("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?s("div",[e._v("\n          €"),s("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?s("div",[e._v("\n          €€"),s("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?s("div",[e._v("\n          €€€\n        ")]):e._e(),t.rating&&t.rating.nbVoters?s("div",[s("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?s("div",["in-progress"===t.playStatus?s("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?s("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),s("div",{staticClass:"title-banner q-pl-sm"},[s("div",[t.location&&t.location.town?s("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():s("span",[e._v(" ")])]),t.title?s("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?s("div",[e._m(0,!0),s("div",{staticClass:"point-banner with-plus"},[s("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?s("div",[e._m(1,!0),s("div",{staticClass:"point-banner point-won"},[s("div",[e._v(e._s(t.points))])])]):e._e()])}))],2):e._e(),e.quests&&e.quests.length>0&&"big"===e.format?s("div",{class:{"quest-red":"red"===e.color}},e._l(e.quests,(function(t){return s("div",{key:t._id,staticClass:"quest-big relative-position q-mr-md cursor-pointer",style:"background: url("+e.getBackgroundImage(t.thumb)+" ) center center / cover no-repeat ",on:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("div",{staticClass:"info-banner"},[t.duration&&t.duration<60?s("div",[e._v(e._s(t.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),t.duration&&t.duration>=60?s("div",[e._v(e._s(t.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e(),t.level?s("div",[e._v(e._s(e.$t("label.Difficulty"+t.level)))]):e._e(),!t.premiumPrice||t.premiumPrice.androidId&&t.premiumPrice.active||t.premiumPrice.manual?e._e():s("div",[s("span",{staticClass:"opacity50"},[e._v("€€€")])]),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId<"premiumprice10"?s("div",[e._v("\n          €"),s("span",{staticClass:"opacity50"},[e._v("€€")])]):e._e(),t.premiumPrice&&(t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice10"&&t.premiumPrice.androidId<"premiumprice25"||t.premiumPrice.manual)?s("div",[e._v("\n          €€"),s("span",{staticClass:"opacity50"},[e._v("€")])]):e._e(),t.premiumPrice&&t.premiumPrice.androidId&&t.premiumPrice.active&&t.premiumPrice.androidId>="premiumprice25"?s("div",[e._v("\n          €€€\n        ")]):e._e(),t.distance?s("div",[e._v("\n          "+e._s(t.distance)+" "+e._s(e.$t("label.km"))+"\n        ")]):e._e(),t.rating&&t.rating.nbVoters?s("div",[s("q-icon",{class:{opacity50:0===t.rating.value},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<2},attrs:{name:"star"}}),s("q-icon",{class:{opacity50:t.rating.value<4},attrs:{name:"star"}})],1):e._e(),t.playStatus?s("div",["in-progress"===t.playStatus?s("span",[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e(),"finished"===t.playStatus?s("span",[e._v(e._s(e.$t("label.Succeeded")))]):e._e()]):e._e()]),s("div",{staticClass:"title-banner q-pl-sm"},[s("div",[t.location&&t.location.town?s("span",[e._v(e._s(t.location.town))]):e._e(),t.location&&t.location.town?e._e():s("span",[e._v(" ")])]),t.title?s("div",{staticClass:"subtitle4"},[e._v(e._s(t.title))]):e._e()]),t.availablePoints&&t.availablePoints.maxPts?s("div",[e._m(2,!0),s("div",{staticClass:"point-banner with-plus"},[s("div",[e._v(e._s(t.availablePoints.maxPts))])])]):e._e(),t.points?s("div",[e._m(3,!0),s("div",{staticClass:"point-banner point-won"},[s("div",[e._v(e._s(t.points))])])]):e._e()])})),0):e._e()])},Qt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner"},[s("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner point-won"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner"},[s("img",{attrs:{src:"statics/images/icon/availablepoint.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"point-banner point-won"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}})])}],Bt={props:["quests","format","color","add"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/quest/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/quest/"+e:"statics/images/quest/default-quest-picture.png"},getUserBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")}}},Ut=Bt,Yt=Object(_e["a"])(Ut,Et,Qt,!1,null,null,null),Ht=Yt.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.users?e._e():s("div",{staticClass:"user-card-small relative-position"},[s("div",{staticClass:"centered q-pt-lg"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),"scroll"===e.format&&(e.users&&e.users.length>0||e.add)?s("div",{staticClass:"horizontal-scroll-wrapper users-horizontal-scroll-wrapper"},[e.add?s("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[s("div",{staticClass:"user-add-button"},[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return s("div",{key:t._id,staticClass:"cursor-pointer"},[s("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),"list"===e.format&&(e.users&&e.users.length>0||e.add)?s("div",{staticClass:"row justify-around q-pt-sm"},[e.add?s("div",{staticClass:"user-card-small relative-position q-mr-md cursor-pointer",on:{click:function(t){return e.openFriendAddPopup()}}},[s("div",{staticClass:"user-add-button"},[s("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:"add"}})],1)]):e._e(),e._l(e.users,(function(t){return s("div",{key:t._id,staticClass:"cursor-pointer"},[s("userCard",{attrs:{user:t,size:"small",showName:!0},on:{click:e.openProfile}})],1)}))],2):e._e(),s("q-dialog",{model:{value:e.addFriend.show,callback:function(t){e.$set(e.addFriend,"show",t)},expression:"addFriend.show"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.FollowYourFriends"))+"\n        "),s("q-btn",{staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.closeAddFriends}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[s("newfriend",{on:{close:e.closeAddFriends,friendadded:e.updateFriendsActivity}})],1)],1)],1)],1)},Wt=[],Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",["suggestions"===e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?s("div",[e.loadingContacts?s("div",{staticClass:"centered"},[s("q-spinner",{attrs:{color:"primary",size:"3em"}}),e._v("\n          "+e._s(e.$t("label.LoadingContacts"))+"\n        ")],1):e._e(),null===e.loadingContacts?s("div",{staticClass:"centered"},[s("q-btn",{attrs:{label:e.$t("label.LoadContactsFromPhone")},on:{click:this.getContacts}})],1):e._e(),e.validatedContacts&&e.validatedContacts.length>0?s("div",[s("q-list",{attrs:{highlight:""}},[e._l(e.validatedContacts,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.name))]),s("q-btn",{attrs:{label:e.$t("label.Add")},on:{click:function(s){return e.addFriend(t._id)}}})],1)],1)})),s("q-item",[s("q-item-section",{attrs:{avatar:""}}),s("q-item-section",[s("q-item-label",[s("a",{on:{click:function(t){e.newFriendMode="addFriend"}}},[e._v(e._s(e.$t("label.AddFriendManually")))])])],1)],1)],2)],1):e._e()]):e._e(),"addFriend"!==e.newFriendMode&&(!1!==e.loadingContacts||e.validatedContacts&&0!==e.validatedContacts.length)?e._e():s("div",[s("form",{staticClass:"q-pt-md",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},[e._v("\n        \n          "+e._s(e.$t("label.FindWithEmail"))+"\n          "),s("div",{staticClass:"row q-pb-md"},[s("div",{staticClass:"col-8"},[s("q-input",{attrs:{dark:"",color:"secondary",type:"email",label:e.$t("label.Email")},on:{blur:function(t){return e.$v.form.email.$touch()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.$v.form.email.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.email.email?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.EmailIsNotValid")))])]):e._e()],1),s("div",{staticClass:"col-4 centered"},[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)]),e._v("\n          "+e._s(e.$t("label.FindWithPhone"))+"\n          "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("q-input",{attrs:{dark:"",color:"secondary",label:e.$t("label.PhoneNumber")},on:{blur:function(t){return e.$v.form.phone.$touch()}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),e.$v.form.phone.$error?s("div",{staticClass:"q-field-bottom"},[e.$v.form.phone.checkPhone?e._e():s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.InvalidPhoneNumber")))])]):e._e()],1),s("div",{staticClass:"col-4 centered"},[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Add")},on:{click:e.formSubmit}})],1)])])])])])},Jt=[],Kt=(s("7514"),s("b5ae")),Zt=function(e){var t=e.match(/\d/g);return 10===t.length},Xt={data:function(){return{form:{email:"",phone:""},phoneContacts:"",validatedContacts:null,serverUrl:"https://api.graaly.com",submitting:!1,loadingContacts:null,console:"",newFriendMode:"suggestions",isHybrid:window.cordova}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isHybrid||(e.newFriendMode="addFriend");case 1:case"end":return t.stop()}}),t)})))()},methods:{formSubmit:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error&&e.$v.form.phone.$error){t.next=5;break}return t.next=3,it.addFriend({email:e.form.email,phone:e.form.phone});case 3:s=t.sent,s?200===s.status?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?vt(e.$t("label.InvitationSent"),"success"):(vt(e.$t("label.FriendsAdded"),"success"),e.$emit("friendadded")),e.form.email="",e.form.phone=""):s.data&&"Friend not found"===s.data.message?vt(e.$t("label.FriendNotFound"),"error"):s.data&&"Too much friends"===s.data.message?vt(e.$t("label.TooMuchFriends"),"error"):s.data&&"User can not be friend with him"===s.data.message?vt(e.$t("label.UserCanNotBeFriendWithHim"),"error"):s.data&&"Already friends"===s.data.message?vt(e.$t("label.AlreadyFriends"),"error"):vt(e.$t("label.ErrorStandardMessage"),"error"):vt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return n=new FormData,n.append("image",a[0]),s.next=7,AuthService.uploadAccountPicture(n);case 7:o=s.sent,o&&o.data&&(o.data.file?t.$store.state.user.picture=o.data.file:o.data.message&&"Error: File too large"===o.data.message&&vt(t.$t("label.FileTooLarge"),"error"));case 9:case"end":return s.stop()}}),s)})))()},getContacts:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.cordova?(e.loadingContacts=!0,s=new ContactFindOptions,s.filter="",s.multiple=!0,a=["displayName","emails","phoneNumbers"],navigator.contacts.find(a,e.checkContacts,e.onError,s),e.loadingContacts=!1):e.newFriendMode="addFriend";case 1:case"end":return t.stop()}}),t)})))()},checkContacts:function(e){for(var t=[],s=0;s<e.length;s++)if(e[s].emails&&e[s].emails.length>0){var a=e[s].emails[0].value;a=a.toLowerCase(),t.push({name:e[s].displayName,email:a})}else if(e[s].phoneNumbers&&e[s].phoneNumbers.length>0){var r=e[s].phoneNumbers[0].value,n=r.match(/\d/g);t.push({name:e[s].displayName,phone:n.join("")})}this.checkContactsWithExisting(t)},checkContactsWithExisting:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,it.checkContacts(e);case 2:return a=s.sent,a&&a.data&&a.data.contacts&&(t.validatedContacts=a.data.contacts),s.next=6,t.hideContactsAlreadyfriends();case 6:case"end":return s.stop()}}),s)})))()},hideContactsAlreadyfriends:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.listFriends();case 2:for(s=t.sent,a=s.data,n=e.validatedContacts.length-1;n>=0;n--)for(o=0;o<a.length;o++)e.validatedContacts.length>n&&e.validatedContacts[n]._id===a[o].friendId&&e.validatedContacts.splice(n,1);case 5:case"end":return t.stop()}}),t)})))()},hideUserFromValidatedContacts:function(e){for(var t=0;t<this.validatedContacts.length;t++)this.validatedContacts[t]._id===e&&this.validatedContacts.splice(t,1)},addFriend:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,it.addFriend(e);case 2:a=s.sent,a?(a.data&&a.data.hasOwnProperty("status")&&"invitationsent"===a.data.status?vt(t.$t("label.InvitationSent"),"success"):(vt(t.$t("label.FriendsAdded"),"success"),t.$emit("friendadded")),t.hideUserFromValidatedContacts(e)):vt(t.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return s.stop()}}),s)})))()},onError:function(e){vt(this.$t("label.ErrorStandardMessage"),"error")}},validations:{form:{email:{email:Kt["email"]},phone:{checkPhone:Zt}}}},es=Xt,ts=Object(_e["a"])(es,Vt,Jt,!1,null,null,null),ss=ts.exports,as=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative-position q-mr-md user-card",class:"user-card-"+e.size+(e.showName?" user-"+e.size+"-with-title":""),on:{click:function(t){return e.sendClickEvent(e.user._id,e.user.friendId)}}},[s("div",{style:"background: url("+e.getBackgroundImage(e.user.picture)+" ) center center / cover no-repeat "}),e.showName?s("div",{staticClass:"centered subtitle6 user-card-name"},[e._v("\n    "+e._s(e.user.name)+"\n  ")]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()])},rs=[],ns={props:["user","size","showName"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{getBackgroundImage:function(e){return e&&"_"===e[0]?"statics/images/profile/"+e:e&&-1!==e.indexOf("blob:")?e:e?this.serverUrl+"/upload/profile/"+e:"statics/images/icon/profile-small.png"},sendClickEvent:function(e,t){t?this.$emit("click",t):this.$emit("click",e)}}},os=ns,is=Object(_e["a"])(os,as,rs,!1,null,null,null),ls=is.exports,cs={components:{newfriend:ss,userCard:ls},props:["users","add","format"],data:function(){return{addFriend:{show:!1}}},methods:{openProfile:function(e){this.$router.push("/profile/"+e)},openFriendAddPopup:function(){this.addFriend.show=!0},closeAddFriends:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addFriend.show=!1;case 1:case"end":return t.stop()}}),t)})))()},updateFriendsActivity:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("refresh");case 1:case"end":return t.stop()}}),t)})))()}}},us=cs,ds=Object(_e["a"])(us,Gt,Wt,!1,null,null,null),ps=ds.exports,ms=s("bb6f"),hs=function(e){return e>=3e3?{level:9,next:9,max:15e3,progress:(e-3e3)/12e3}:e>=1500?{level:8,next:9,max:3e3,progress:(e-1500)/1500}:e>=800?{level:7,next:8,max:1500,progress:(e-800)/700}:e>=400?{level:6,next:7,max:800,progress:(e-400)/400}:e>=200?{level:5,next:6,max:400,progress:(e-200)/200}:e>=100?{level:4,next:5,max:200,progress:(e-100)/100}:e>=30?{level:3,next:4,max:100,progress:(e-30)/70}:e>=15?{level:2,next:3,max:30,progress:(e-15)/15}:{level:1,next:2,max:15,progress:e/15}},fs={components:{QInfiniteScroll:M["a"],QSpinnerDots:se["a"],geolocation:ht,shop:kt,suggest:Pt,mainQuest:jt,titleBar:zt,questsList:Ht,usersList:ps,QrcodeStream:ms["QrcodeStream"]},data:function(){return{bestQuest:null,nearestQuests:null,invitationQuests:null,onTopQuests:null,extraQuests:null,friendQuests:null,users:null,search:{quests:[],text:""},user:{position:null,positionType:null,proposeAQuest:!0},shop:{show:!1,inAppPurchase:{activated:window.store}},currentQuestIndex:null,currentQuest:null,searchText:"",questList:[],serverUrl:"https://api.graaly.com",showSearch:!1,warnings:{noLocation:!1,noNetwork:!1,noServerReponse:!1,rankingMissing:!1,score:!1,questButton:!1,networkButton:!1,mainButton:!1},success:{ranking:[]},profile:{level:{},organization:{},progress:.1,userCanChangeEmail:!0,userCanChangePhone:!0,userCanChangePassword:!0},offline:{available:window.cordova,show:!1,active:!1,quest:null},ranking:{show:!1},isMounted:!1,isHybrid:window.cordova,showNonHybridQRReader:!1,isQuestsLoaded:!1,suggestQuest:{show:!1},innerWidth:window.innerWidth,QuestService:ot}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;if(this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name){if(window.cordova){lt.initLocalStorage();var t=this.$store.state.user.statistics.nbQuestsSuccessful;t>=1&&"false"===lt.hasAlreadyHavePopup()&&(console.log("the user has done at least one quest"),lt.launchpopup())}this.initPage(),this.$nextTick((function(){e.isMounted=!0}))}else this.backToLogin();this.isHybrid&&"android"===cordova.platformId&&StatusBar.hide()},methods:{initPage:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkIfProfileIsComplete(),nt.clearAllRunningProcesses(),t.next=4,e.checkNetwork();case 4:return e.profile.level=hs(e.$store.state.user.score),t.next=7,e.getFriendQuests();case 7:case"end":return t.stop()}}),t)})))()},checkIfProfileIsComplete:function(){18!==this.$store.state.user.story.step||this.$store.state.user.name&&""!==this.$store.state.user.name&&"providersignin"!==this.$store.state.user.email&&this.$store.state.user.location&&this.$store.state.user.location.postalCode&&""!==this.$store.state.user.location.postalCode&&this.$store.state.user.location.country&&""!==this.$store.state.user.location.country||this.openUpdateProfilePage()},openUpdateProfilePage:function(){this.$router.push("/user/updateprofile")},onLocationSuccess:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.isQuestsLoaded&&"defaultProfilePosition"!==t.user.positionType||t.offline.active){s.next=4;break}return s.next=4,t.loadQuests();case 4:if(null!==t.users){s.next=7;break}return s.next=7,t.getCreators();case 7:t.user.positionType="userCurrentLocation",t.$refs["geolocation-component"].stopTracking();case 9:case"end":return s.stop()}}),s)})))()},startScanQRCode:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.isHybrid?cordova.plugins.barcodeScanner.scan((function(e){if(e&&e.text){var t=nt.removeUnusedUrl(e.text);s.checkCode(t)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1}):e.showNonHybridQRReader=!0;case 2:case"end":return t.stop()}}),t)})))()},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},checkCode:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.checkQRCode(e,t.$t("label.shortLang"));case 2:a=s.sent,a&&a.data&&"ok"===a.data.status?-1===e.indexOf("_score")?a.data.questId?t.playQuest(a.data.questId):t.playQuest(e):t.$router.push("/quest/"+e.substring(0,24)+"/end"):vt(t.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return s.stop()}}),s)})))()},checkNetwork:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.offline.active,a=nt.isNetworkAvailable(),e.warnings.noNetwork=!a,e.offline.active=!a,s===e.offline.active){t.next=9;break}return e.questList=[],t.next=8,e.loadQuests();case 8:e.questList[0].description="CachedQuests";case 9:nt.setTimeout(e.checkNetwork,5e3);case 10:case"end":return t.stop()}}),t)})))()},loadQuests:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noServerReponse=!1,t.next=3,e.getQuests();case 3:case"end":return t.stop()}}),t)})))()},getQuests:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isQuestsLoaded=null,e.showBottomMenu=!1,e.offline.active){t.next=18;break}if(null!==e.user.position){t.next=7;break}return vt(e.$t("label.LocationSearching"),"warning"),e.isQuestsLoaded=!1,t.abrupt("return");case 7:return t.next=9,ot.listHomeQuests({lng:e.user.position.longitude,lat:e.user.position.latitude});case 9:if(s=t.sent,s&&s.data){t.next=14;break}return vt(e.$t("label.TechnicalIssue"),"error"),e.isQuestsLoaded=!1,t.abrupt("return");case 14:e.isQuestsLoaded=!0,s.data.message&&"No quest"===s.data.message||(s.data.best&&(e.bestQuest=s.data.best),s.data.nearests?e.nearestQuests=s.data.nearests:e.nearestQuests=[],s.data.topQuests?e.onTopQuests=s.data.topQuests:e.onTopQuests=[],s.data.invitations&&(e.invitationQuests=s.data.invitations),s.data.extra&&(e.extraQuests=s.data.extra)),t.next=45;break;case 18:return t.next=20,nt.readFile("","quests.json");case 20:if(a=t.sent,!a){t.next=43;break}if(n=JSON.parse(a),!n||!n.list){t.next=41;break}if(o=n.list,!(o.length>0)){t.next=39;break}i=0;case 27:if(!(i<o.length)){t.next=35;break}return t.next=30,nt.readBinaryFile(o[i].questId,o[i].picture);case 30:l=t.sent,o[i].picture=l||"_default-quest-picture.png";case 32:i++,t.next=27;break;case 35:e.questList=o,e.offline.active=!0,t.next=41;break;case 39:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 41:t.next=45;break;case 43:e.warnings.noServerReponse=!0,e.isQuestsLoaded=!1;case 45:case"end":return t.stop()}}),t)})))()},getFriendQuests:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.listFriendQuests();case 2:if(s=t.sent,e.friendQuests=[],s&&s.data)for(a=0;a<s.data.length;a++)e.friendQuests.push({questId:s.data[a].questId,picture:s.data[a].questData.picture,title:s.data[a].questData.title,location:{town:s.data[a].questData.town},userPicture:s.data[a].userData.picture,userName:s.data[a].userData.name,playStatus:s.data[a].status?s.data[a].status:"succeeded",points:s.data[a].stars});case 5:case"end":return t.stop()}}),t)})))()},getCreators:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.listSuggestions({lng:e.user.position.longitude,lat:e.user.position.latitude},10);case 2:if(s=t.sent,s&&s.data){t.next=6;break}return vt(e.$t("label.TechnicalIssue"),"error"),t.abrupt("return");case 6:s.data.message&&"No users"===s.data.message||(e.users=s.data);case 7:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.rankingMissing=!1,e.$q.loading.show(),t.next=4,it.getRanking();case 4:s=t.sent,e.$q.loading.hide(),s&&s.data?e.success.ranking=s.data:e.warnings.rankingMissing=!0;case 7:case"end":return t.stop()}}),t)})))()},openAdminPage:function(){this.offline.active||this.$router.push("/admin")},getQuestTitle:function(e,t){return e&&e.title?e.title:this.$t("label.NoTitle")},backToLogin:function(){this.$router.push("/user/login")},trackCallBackFunction:function(){return!1},onLocationError:function(e){var t=this;return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.user.location&&t.$store.state.user.location.geometry&&t.$store.state.user.location.geometry.coordinates&&0!==t.$store.state.user.location.geometry.coordinates[0]&&null===t.user.position&&t.$set(t.user,"position",{longitude:t.$store.state.user.location.geometry.coordinates[0],latitude:t.$store.state.user.location.geometry.coordinates[1]}),null===t.user.position||t.offline.active){e.next=10;break}if(!1!==t.isQuestsLoaded){e.next=5;break}return e.next=5,t.loadQuests();case 5:if(null!==t.users){e.next=8;break}return e.next=8,t.getCreators();case 8:t.user.positionType="defaultProfilePosition",t.$refs["geolocation-component"].stopTracking();case 10:case"end":return e.stop()}}),e)})))()},playQuest:function(e){this.$router.push("/quest/play/"+e)},buildQuest:function(){if(this.userIsConnected())this.$router.push("/quest/create/welcome");else{var e=this;this.$q.dialog({dark:!0,message:this.$t("label.DoYouWantToCreateAnAccount"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.openUpdateProfilePage();case 1:case"end":return t.stop()}}),t)}))))}},userIsConnected:function(){return"-"!==this.$store.state.user.name},modifyQuest:function(e){this.$router.push("/quest/builder/"+e)},readMore:function(){vt(this.$t("label.QuestDownloadFinished"),"positive")},readMoreAroundYou:function(){this.$router.push("/search/quest/around")},readMoreFriendsGames:function(){this.$router.push("/search/quest/friends")},readMoreAllCreators:function(){this.$router.push("/user/"+this.$store.state.user.id+"/friends")},openProfile:function(e){this.offline.active||(e||(e=this.$store.state.user.id),this.$router.push("/profile/"+e))},openSearch:function(){this.offline.active||this.$router.push("/search/quest/around")},openRanking:function(){this.offline.active||this.$router.push("/user/ranking/level/all")},openMap:function(){this.offline.active||this.$router.push("/map")},getProfileImage:function(){var e=this.$store.state.user;return e.picture&&-1!==e.picture.indexOf("http")?e.picture:e.picture?this.serverUrl+"/upload/profile/"+e.picture:"statics/images/icon/profile-small.png"}}},gs=fs,bs=(s("a2e6"),Object(_e["a"])(gs,Ze,Xe,!1,null,null,null)),vs=bs.exports,ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"div-column",staticClass:"column"},[null!==e.user.position?s("div",{ref:"map",staticClass:"row fullscreen"},[e.isMounted?s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)},click:function(t){return e.closeInfoWindows()}}},[e._l(e.questList,(function(t,a){return s("gmap-marker",{key:t._id,ref:"questMarkers",refInFor:!0,attrs:{position:{lng:t.location.coordinates[0],lat:t.location.coordinates[1]},icon:e.setMapIcon(t)},on:{click:function(s){return e.openQuestSummary(t,a)}}})})),e.map.loaded?s("gmap-marker",{attrs:{position:{lng:e.user.position.longitude,lat:e.user.position.latitude},icon:e.setMapIcon()}}):e._e(),s("gmap-info-window",{attrs:{options:e.map.infoWindow.options,position:e.map.infoWindow.location,opened:e.map.infoWindow.isOpen},on:{closeclick:function(t){e.map.infoWindow.isOpen=!1}}},[s("div",{staticClass:"infoWindow"},[s("p",{staticClass:"title",domProps:{innerHTML:e._s(e.getQuestTitle(e.currentQuest,!0))}}),s("p",{staticClass:"subtitle"},[e.currentQuest&&1===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Easy")))]):e._e(),e.currentQuest&&2===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Normal")))]):e._e(),e.currentQuest&&3===e.currentQuest.level?s("span",[e._v(e._s(e.$t("label.Hard")))]):e._e(),e.currentQuest&&e.currentQuest.level?s("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e(),e.currentQuest&&e.currentQuest.duration?s("span",[e._v(e._s(e.currentQuest.duration)+" "+e._s(e.$t("label.min")))]):e._e(),e.currentQuest&&e.currentQuest.duration?s("span",{staticClass:"text-blue-grey-2"},[e._v(" | ")]):e._e()]),e.currentQuest&&e.currentQuest.displayPrice?s("p",[e._v("\n            "+e._s(e.currentQuest.displayPrice)+"\n          ")]):e._e(),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.playQuest(e.currentQuest?e.currentQuest.questId:"")}}},[e._v(e._s(e.$t("label.Play")))])],1)])],2):e._e()],1):e._e(),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError()}}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top over-map"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:e.backToHome}})],1)],1)},ys=[],qs=(s("cadf"),s("456d"),s("755e")),ks={components:{geolocation:ht},data:function(){return{map:{filter:"all",zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},pan:{path:[],queue:[],steps:20,duration:700},infoWindow:{content:"",location:{lat:0,lng:0},isOpen:!1,options:{pixelOffset:{width:0,height:-47}}},loaded:!1},user:{position:null},currentQuestIndex:null,currentQuest:null,questList:[],isMounted:!1}},computed:{google:qs["gmapApi"]},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;this.initPage(),this.$nextTick((function(){e.isMounted=!0}))},methods:{initPage:function(){return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:nt.clearAllRunningProcesses();case 1:case"end":return e.stop()}}),e)})))()},onNewUserPosition:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!1!==t.map.loaded){s.next=4;break}return s.next=4,t.reloadMap();case 4:case"end":return s.stop()}}),s)})))()},centerOnUserPosition:function(){null!==this.user.position?(this.centerMapOnPosition(this.user.position.latitude,this.user.position.longitude),this.map.zoom=15):Notification(this.$t("label.LocationSearching"),"warning")},centerMapOnPosition:function(e,t){this.$data.map.center={lat:e,lng:t}},openQuestSummary:function(e,t){var s=this.map.infoWindow,a={lng:e.location.coordinates[0],lat:e.location.coordinates[1]};if(this.map.infoWindow.location=a,this.currentQuestIndex!==t||!s.isOpen){var r=this.$refs.questMarkers[t].$markerObject;r.setAnimation(google.maps.Animation.BOUNCE),nt.setTimeout((function(){r.setAnimation(null)}),700)}if(this.currentQuestIndex===t?s.isOpen=!s.isOpen:(this.currentQuestIndex=t,this.currentQuest=this.questList[t],this.currentQuest.displayPrice="",s.isOpen=!0,this.panTo(a)),e.premiumPrice&&e.premiumPrice.androidId&&"free"!==e.premiumPrice.androidId)if(window.store){var n={premiumprice1:"0,99 €",premiumprice2:"1,99 €",premiumprice3:"2,99 €",premiumprice5:"4,99 €",premiumprice8:"7,99 €",premiumprice10:"9,99 €",premiumprice20:"19,99 €"};this.currentQuest.displayPrice=n[e.premiumPrice.androidId]}else this.currentQuest.displayPrice=this.$t("label.QuestPlayableOnMobile");else this.currentQuest.displayPrice=this.$t("label.Free")},reloadMap:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.map.loaded=null,e.$q.loading.show(),t.next=4,e.getQuests();case 4:e.closeInfoWindows(),e.$refs.mapRef?(e.questList.length>0?e.$refs.mapRef.$mapPromise.then((function(t){var s=new google.maps.LatLngBounds,a=!0,r=!1,n=void 0;try{for(var o,i=e.questList[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value;s.extend({lng:l.location.coordinates[0],lat:l.location.coordinates[1]})}}catch(c){r=!0,n=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}s.extend({lng:e.user.position.longitude,lat:e.user.position.latitude}),t.fitBounds(s)})):e.centerOnUserPosition(),e.map.loaded=!0):(e.centerOnUserPosition(),e.map.loaded=!0),e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},getQuests:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(null!==t.user.position){s.next=3;break}return Notification(t.$t("label.LocationSearching"),"warning"),s.abrupt("return");case 3:return t.map.filter=e||"all",t.$q.loading.show(),s.next=7,ot.listAllForCountry();case 7:if(a=s.sent,t.$q.loading.hide(),a&&a.data){s.next=12;break}return Notification(t.$t("label.TechnicalIssue"),"error"),s.abrupt("return");case 12:if(a.data.message&&"No quest"===a.data.message||(t.questList=a.data),0!==t.questList.length||"world"===t.map.filter){s.next=15;break}return s.abrupt("return",t.getQuests("world"));case 15:case"end":return s.stop()}}),s)})))()},getQuestLevelName:function(e){var t=nt.getById(questLevels,e);return null===t?"":t.name},panTo:function(e){this.$refs.mapRef.$mapObject.panTo(e)},updateCenter:function(e){var t=e.lat(),s=e.lng();this.map.center.lat===t&&this.map.center.lng===s||(this.map.centerTmp={lng:s,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp},closeInfoWindows:function(){this.map.infoWindow.isOpen=!1},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[e.mainLanguage]&&""!==e.title[e.mainLanguage]?e.title[e.mainLanguage]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle"):this.$t("label.NoTitle")},setMapIcon:function(e){return e?{url:"statics/images/icon/place.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:30}}:{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},trackCallBackFunction:function(){return!1},onUserPositionError:function(e){e&&(this.user.position=null)},playQuest:function(e){this.$router.push("/quest/play/"+e)},backToHome:function(){this.$router.push("/home")}}},xs=ks,Cs=Object(_e["a"])(xs,ws,ys,!1,null,null,null),Ss=Cs.exports,_s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{staticClass:"reduce-window-size-desktop",class:{loaded:e.pageReady},attrs:{id:"teaser"}},[e.quest&&e.quest.status||e.warning.questNotLoaded?e._e():s("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.Loading"))+"\n      "),s("div",{staticClass:"q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.backToTheMap()}}},[e._v(e._s(e.$t("label.BackToTheMap")))])],1)]),e.warning.questNotLoaded?s("div",{staticClass:"centered q-pa-lg"},[e._v("\n      "+e._s(e.$t("label.QuestNeedNetwork"))+"\n      "),s("div",[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.initQuest()}}},[e._v(e._s(e.$t("label.ReloadQuest")))])],1)]):e._e(),e.quest&&e.quest.status?s("div",{staticClass:"relative-position image-banner"},[s("div",{staticClass:"effect-kenburns limit-size-desktop",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat ;"}),s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1),s("div",{staticClass:"q-py-sm dark-banner absolute-bottom limit-size-desktop"},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.openProfile(e.quest.authorUserId)}}},[s("q-item-section",{attrs:{side:""}},[s("q-avatar",{attrs:{size:"50px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+e.quest.author.picture}}):e._e(),"undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-item-section",{staticStyle:{"padding-right":"84px"}},["undefined"!==typeof e.quest.author&&e.quest.author&&e.quest.author.name?s("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(e.quest.author.name))]):e._e()],1)],1)],1)]):e._e(),e.quest&&e.quest.status?s("div",{staticClass:"q-pa-md quest-description text-white",staticStyle:{"padding-bottom":"-50px"}},[!e.quest.availablePoints||!e.quest.availablePoints.maxPts||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"float-right quest-score",on:{click:e.showRewards}},[s("img",{attrs:{src:"statics/images/icon/point.png"}}),s("div",{staticClass:"absolute"},[e._v("\n          +"+e._s(e.quest.availablePoints.maxPts)+"\n        ")])]),e.warning.lowBattery?s("div",{staticClass:"bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"battery_alert"}}),e._v(" "+e._s(e.$t("label.WarningLowBattery"))+"\n      ")],1):e._e(),e.warning.tooMuchUsers?s("div",{staticClass:"bg-warning q-pa-sm"},[s("q-icon",{attrs:{name:"warning"}}),e._v(" "+e._s(e.$t("label.TooMuchUsersCurrently"))+"\n      ")],1):e._e(),"published"!==e.quest.status?s("div",{staticClass:"bg-primary centered q-pa-sm q-mb-md"},[e._v("\n        "+e._s(e.$t("label."+("quest"===e.quest.type?"QuestDraftVersion":"PageDraftVersion")))+"\n      ")]):e._e(),s("div",{staticClass:"text-h5"},[e._v("\n        "+e._s(""===e.quest.title?e.$t("label.NoTitle"):e.quest.title)+" \n         "),e.getLanguage()!==e.$store.state.user.language?s("img",{staticClass:"image-and-text-aligned",attrs:{src:"statics/icons/game/flag-"+e.getLanguage()+".png"}}):e._e()]),s("div",{staticClass:"row q-pt-md text-subtitle1 properties-bar"},[s("div",{staticClass:"q-mr-lg"},[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/difficulty.svg"}}),e._v(e._s(e.$t("label.Difficulty"+e.quest.level))+"\n        ")]),e.quest.duration&&e.quest.duration<999?s("div",{staticClass:"q-mr-lg"},[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/duration.svg"}}),e.quest.duration&&e.quest.duration<60?s("span",[e._v(e._s(e.quest.duration)+e._s(e.$t("label.minutesSimplified")))]):e._e(),e.quest.duration&&e.quest.duration>=60?s("span",[e._v(e._s(e.quest.duration/60)+e._s(e.$t("label.hoursSimplified")))]):e._e()]):e._e(),"quest"!==e.quest.type||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"q-mr-lg"},[e.quest.premiumPrice.tier||"free"!==e.shop.premiumQuest.priceCode||"quest"!==e.quest.type?e._e():s("span",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),e.shop.premiumQuest.alreadyPayed?e._e():s("span",[e._v(e._s(e.$t("label.Free")))]),e.shop.premiumQuest.alreadyPayed?s("span",[e._v(e._s(e.$t("label.AlreadyPaied")))]):e._e()]),"free"!==e.shop.premiumQuest.priceCode&&"quest"===e.quest.type?s("span",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue))])]):e._e()]),e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",[e.quest.rating&&e.quest.rating.rounded?s("q-rating",{attrs:{readonly:"",color:"yellow-8",max:5,size:"0.8em"},model:{value:e.quest.rating.rounded,callback:function(t){e.$set(e.quest.rating,"rounded",t)},expression:"quest.rating.rounded"}}):e._e()],1)]),"room"===e.quest.type&&e.quest.premiumPrice.manual?s("div",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.premiumPrice.tier&&"quest"===e.quest.type&&e.quest.premiumPrice.manual&&"free"===e.shop.premiumQuest.priceCode?s("div",[s("img",{staticClass:"medium-icon",attrs:{src:"statics/images/icon/cost.svg"}}),s("span",[e._v(e._s(e.$t("label.FromPricePerPlayer",{price:e.quest.premiumPrice.manual})))])]):e._e(),e.quest.location&&e.quest.location.address?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-location",on:{click:function(t){return e.goToLocationWithMaps(e.quest.location.coordinates[0],e.quest.location.coordinates[1])}}},[s("u",[e._v(" "+e._s(e.quest.location.address))])]):e._e(),e.quest.warning?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning",on:{click:function(t){return e.openWarningLink()}}},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),s("u",[e._v(e._s(e.getTranslatedData(e.quest.warning)))])],1):e._e(),e.quest.playersNumber&&e.quest.playersNumber>1?s("div",{staticClass:"text-subtitle1 q-mt-sm quest-warning"},[s("q-icon",{attrs:{color:"secondary",name:"group"}}),e._v(" "+e._s(e.$t("label.YouNeedToBeXPlayers",{nb:e.quest.playersNumber}))+"\n      ")],1):e._e(),s("div",{staticClass:"text-subtitle1 q-mt-sm quest-ranking"},[s("a",{staticClass:"concertone",on:{click:function(t){return e.$router.push("/user/ranking/ranking/"+e.quest.questId)}}},[e._v(e._s(e.$t("label.Ranking")))])])]):e._e(),s("div",{staticClass:"quest-home-button"},[s("div",{staticClass:"text-center q-pt-md"},[s("p",[!e.isQuestOpen.status||"quest"!==e.quest.type||e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)||this.isUserTooFar&&!e.quest.allowRemotePlay||!e.isRunPlayable||!e.getAllLanguages()?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[e.continueQuest?s("span",[e._v(e._s(e.$t("label.ContinueTheQuest")))]):e._e(),!e.continueQuest&&e.isRunFinished?s("span",[e._v(e._s(e.$t("label.SolveAgainThisQuest")))]):e._e(),e.continueQuest||e.isRunFinished?e._e():s("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]),"room"===e.quest.type&&e.quest.readMoreLink&&""!==e.quest.readMoreLink?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:e.openReadMoreLink}},[s("span",[e._v(e._s(e.$t("label.Book")))])]):e._e(),!e.isQuestOpen.status||e.isRunPlayable||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyCoins()}}},[s("span",[e._v(e._s(e.$t("label.BuyCoinsToPlay")))])]),e.isQuestOpen.status&&this.isUserTooFar&&!e.quest.allowRemotePlay?s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.GetCloserToStartingPoint"))+" ("+e._s(e.distance>1e3?Math.round(e.distance/1e3)+"km":e.distance+"m")+")")])]):e._e(),e.isQuestOpen.status&&e.quest.premiumPrice&&(e.quest.premiumPrice.active||e.quest.premiumPrice.tier)&&"notplayableonweb"!==e.shop.premiumQuest.priceCode&&(!this.isUserTooFar||e.quest.allowRemotePlay)?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[s("span",[e._v(e._s(e.$t("label.SolveThisQuest")))])]):e._e(),!e.isQuestOpen.status||"notplayableonweb"!==e.shop.premiumQuest.priceCode||e.isAdmin||e.isOwner?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:"",color:"primary"}},[s("span",[e._v(e._s(e.$t("label.QuestPlayableOnMobile")))])]),e.isQuestOpen.status&&"notplayableonweb"===e.shop.premiumQuest.priceCode&&(e.isAdmin||e.isOwner)?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.playQuest(e.quest.questId,e.getLanguage())}}},[s("span",[e._v(e._s(e.$t("label.TestYourQuest")))])]):e._e(),e.isQuestOpen.status?e._e():s("span",[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){e.isQuestOpen.displayHours=!0}}},[s("span",[e._v(e._s(e.$t("label.OpeningHours")))])]),s("div",[e._v(e._s(e.$t("label.QuestIsNotPlayableNow")))])],1)],1)])]),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"text-subtitle2",domProps:{innerHTML:e._s(this.quest.description)}}),e.isUserTooFar&&!e.quest.allowRemotePlay?s("div",{staticClass:"q-pt-md"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.QuestIsFarFromUser"))}})],1):e._e()]),e.isOwner||e.isAdmin?s("div",{staticClass:"q-pa-md subtitle5 centered"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.YouAreQuestOwnerDesc"))}}),e._v("\n       "),s("q-btn",{attrs:{flat:"",color:"secondary",label:e.$t("label.Modify")},on:{click:function(t){return e.modifyQuest()}}})],1):e._e(),"room"===e.quest.type?s("div",{staticClass:"q-pa-md subtitle5"},[e._v("\n      "+e._s(e.$t("label.RoomDataWarning"))+"\n    ")]):e._e()]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreloaderPopup,expression:"showPreloaderPopup"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("div",{staticClass:"centered q-pa-lg title2 text-primary background-lighter"},[s("div",{staticClass:"q-pa-lg text-uppercase"},[e._v(e._s(e.$t("label.InProgressPreparation")))]),s("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),e.offline.show?s("div",{staticClass:"centered"},[s("offlineLoader",{attrs:{quest:this.quest,design:"prepare",lang:e.getLanguage()},on:{end:function(t){return e.showCalibrationAndStartQuest()}}})],1):e._e(),s("div",[s("div",{staticClass:"q-px-lg q-pb-lg q-pt-md centered subtitle2"},[e._v("\n            "+e._s(e.$t("label.Warnings"))+"\n          ")]),s("div",{staticClass:"q-pa-md subtitle5"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.GeneralWarning"))}})],1),e.isRunFinished?s("div",{staticClass:"q-pa-md subtitle5"},[s("q-icon",{attrs:{color:"secondary",name:"warning"}}),e._v("  "),s("span",{domProps:{innerHTML:e._s(e.$t("label.YouAlreadyDidThisQuest"))}})],1):e._e()]),s("gpscalibration",{ref:"gpscal",on:{end:function(t){e.startQuest(e.quest.questId,e.getLanguage())}}})],1)])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.multiplayer.show,expression:"multiplayer.show"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("div",{staticClass:"bottom-margin-for-keypad"},[s("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n            "+e._s(e.$t("label.ThisIsAMultiplayerGame"))+"\n          ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.JoinATeam")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanMultiplayerQRCode}},[s("span",[e._v(e._s(e.$t("label.ScanTheLeaderQRCode")))])])],1)],1)],1),s("div",{staticClass:"centered"},[e._v("\n            -\n            "),s("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n            -\n          ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.CreateATeam")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[""===e.multiplayer.qrcode?s("div",{staticClass:"centered"},[s("q-input",{attrs:{dark:"",type:"text",label:e.$t("label.TeamName"),"bottom-slots":"",counter:"",maxlength:"20"},model:{value:e.multiplayer.team,callback:function(t){e.$set(e.multiplayer,"team",t)},expression:"multiplayer.team"}}),s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.createTeam}},[s("span",[e._v(e._s(e.$t("label.CreateTeam")))])])],1):e._e(),""!==e.multiplayer.qrcode?s("div",{staticClass:"centered"},[s("div",[e._v(e._s(e.$t("label.OtherPlayersMustScanThisQRCode")))]),s("div",{staticClass:"q-pa-md"},[s("img",{attrs:{src:e.serverUrl+"/upload/teams/"+e.multiplayer.qrcode+".png"}})]),s("div",[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.checkTeamAndStart}},[s("span",[e._v(e._s(e.$t("label.MyTeamIsCompleteLetsGo")))])])],1)]):e._e()])],1)],1)])])])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.shop.show,expression:"shop.show"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"reduce-window-size-desktop"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeShop}},[s("q-icon",{attrs:{name:"close"}})],1),s("div",{staticClass:"q-pa-lg centered subtitle2"},[e._v("\n          "+e._s(e.$t("label.BuyThisQuest"))+"\n        ")]),e.quest.premiumPrice&&e.quest.premiumPrice.tier?s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.YouHaveReceivedAQrCodeFrom",{author:e.quest.author.name})))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button text-primary bg-white",on:{click:e.scanTierPaymentQRCode}},[s("span",[e._v(e._s(e.$t("label.ScanTheUniqueQRCode")))])])],1)],1)],1):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.tier&&e.quest.premiumPrice.active?s("div",{staticClass:"centered"},[e._v("\n          -\n          "),s("span",[e._v(e._s(e.$t("label.Or")))]),e._v("\n          -\n        ")]):e._e(),e.quest.premiumPrice&&e.quest.premiumPrice.active?s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-primary text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.BuyInOneClick")))])]),s("q-card-section",{staticClass:"bg-primary subtitle5 q-pa-md centered"},[!e.quest.premiumPrice||!e.quest.premiumPrice.active&&!e.quest.premiumPrice.tier||"notplayableonweb"===e.shop.premiumQuest.priceCode||this.isUserTooFar&&!e.quest.allowRemotePlay?e._e():s("q-btn",{staticClass:"glossy large-button text-primary bg-white",attrs:{disabled:!e.shop.premiumQuest.buyable},on:{click:function(t){return e.buyQuest()}}},[s("span",[e._v(e._s(e.$t("label.Buy"))+" ("+e._s("0"===e.shop.premiumQuest.priceValue?"...":e.shop.premiumQuest.priceValue)+")")])])],1)],1)],1):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:"",color:"primary"},on:{click:e.closeShop}},[e._v(e._s(e.$t("label.Cancel")))])],1)])])]),s("q-dialog",{model:{value:e.showRewardsPopup,callback:function(t){e.showRewardsPopup=t},expression:"showRewardsPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.ScoreAndBadges"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n        "+e._s(e.$t("label.OnThisEscapeGameYouCanWin"))+"\n        "),s("ul",[e.quest.availablePoints&&e.quest.availablePoints.minPts&&e.quest.availablePoints.maxPts?s("li",[e._v(e._s(e.$t("label.ScoreRange",{min:e.quest.availablePoints.minPts,max:e.quest.availablePoints.maxPts})))]):e._e(),e.quest.rewardPicture&&""!==e.quest.rewardPicture?s("li",[e._v(e._s(e.$t("label.OneBadge")))]):e._e()])])],1)],1),s("q-dialog",{model:{value:e.isQuestOpen.displayHours,callback:function(t){e.$set(e.isQuestOpen,"displayHours",t)},expression:"isQuestOpen.displayHours"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.OpeningHours"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[e.quest.scheduling&&e.quest.scheduling.length>0?s("div",[s("div",{staticClass:"centered q-pb-md"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.quest.scheduling,(function(t,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),s("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.From"))+" "+e._s(t[0])+"h\n            ")]),s("div",{staticClass:"col"},[e._v("\n              "+e._s(e.$t("label.To"))+" "+e._s(t[1])+"h\n            ")])])}))],2):e._e()])],1)],1),e.geolocationIsSupported?e._e():s("div",{staticClass:"fixed-bottom over-map"},[s("div",{staticClass:"centered bg-warning q-pa-sm"},[s("q-spinner-puff",{staticClass:"on-left"}),e._v(" "+e._s(e.$t("label.WarningNoLocation"))+"\n    ")],1)])],1)},Ts=[],Ps=(s("b54a"),{getById:function(e){return Re().get("run/"+e).catch((function(e){return console.log(e.request)}))},listForAQuest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Re().get("run/quest/"+e,{"axios-retry":t}).catch((function(e){return console.log(e.request)}))},listScoresForThisQuest:function(e){return Re().get("run/quest/"+e+"/ranking/scores").catch((function(e){return console.log(e.request)}))},listPlayersForThisQuest:function(e){return Re().get("run/quest/"+e+"/ranking/friends").catch((function(e){return console.log(e.request)}))},checkNumberOfPlayers:function(e){return Re().get("run/quest/"+e+"/players/number").catch((function(e){return console.log(e.request)}))},getRankingForAQuest:function(e){return Re().get("run/quest/"+e+"/ranking").catch((function(e){return console.log(e.request)}))},updateFromOffline:function(e){return Re().put("run/"+e._id+"/quest/"+e.questId+"/update",e).catch((function(e){return console.log(e.request)}))},getNextStep:function(e,t){return Re().get("run/"+e+"/step/next/player/"+t).catch((function(e){return console.log(e.request)}))},getMarkerNextStep:function(e,t,s){return Re().get("run/"+e+"/marker/"+t+"/next/player/"+s).catch((function(e){return console.log(e.request)}))},listWonObjects:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().get("quest/"+e+"/runs/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},getHint:function(e,t,s,a){return o()(r.a.mark((function n(){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a||(a="default"),r.next=3,Re().get("run/"+e+"/step/"+t+"/version/"+s+"/hint/lang/"+a);case 3:return o=r.sent,r.abrupt("return",o.data);case 5:case"end":return r.stop()}}),n)})))()},init:function(e,t,s,a,r,n){return r||(r="noteamnamedefined"),Re().post("run/quest/"+e+"/version/"+t+"/init/"+s+"/remote/"+a+"/team/"+r+"/datashared/"+n).catch((function(e){return console.log(e.request)}))},initTeamPlay:function(e,t,s,a,r){return Re().post("run/teamplay/quest/"+e+"/init/"+t+"/"+s+"/"+a+"/"+r).catch((function(e){return console.log(e.request)}))},addTeamPlayer:function(e){return Re().post("run/join/"+e).catch((function(e){return console.log(e.request)}))},createATeam:function(e,t){return Re().post("run/quest/"+questId+"/version/"+version+"/init/"+lang+"/remote/"+remotePlay).catch((function(e){return console.log(e.request)}))},checkTeamIsReady:function(e){return Re().get("run/"+e+"/check/team/ready").catch((function(e){return console.log(e.request)}))},endRun:function(e,t,s,a,r){return Re().put("run/"+e+"/quest/"+s+"/version/"+a+"/lang/"+r+"/end",t).catch((function(e){return console.log(e.request)}))},passStep:function(e,t,s){return Re().put("run/"+e+"/passstep/"+t+"/player/"+s).catch((function(e){return console.log(e.request)}))},closeInProgressRuns:function(e){return Re().post("run/quest/"+e+"/close").catch((function(e){return console.log(e.request)}))},createMultiplayerRunForTesters:function(e){return Re().post("run/quest/"+e+"/test/create").catch((function(e){return console.log(e.request)}))}}),Is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.offline.progress>0&&e.offline.progress<1?s("div",{staticClass:"centered q-pa-md q-pb-lg q-pt-lg"},["prepare"!==e.design||e.error.raised?e._e():s("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.LoadingQuestDataForOfflineMode")))]),"download"!==e.design||e.error.raised?e._e():s("div",{staticClass:"subtitle5 text-grey-6"},[e._v(e._s(e.$t("label.Downloading")))]),e.error.raised?e._e():s("div",{staticClass:"q-pa-md"},[s("q-linear-progress",{staticStyle:{height:"5px"},attrs:{color:"primary","track-color":"grey-1",value:e.offline.progress}}),e.isIOs?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(parseInt(100*e.offline.progress,10))+" %\n      ")]):e._e()],1),e.error.raised&&e.error.nb<2?s("div",{on:{click:function(t){return e.saveOfflineQuest(e.quest)}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+" \n    ")],1):e._e(),e.error.raised&&e.error.nb>=2?s("div",{on:{click:function(t){e.offline.progress=1}}},[e._v("\n      "+e._s(e.$t("label.TooMuchOfflineLoadingErrors"))+" \n    ")]):e._e()]):e._e()])},$s=[],As={listForAQuest:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s||(s="default"),a.next=3,Re().get("quest/"+e+"/version/"+t+"/steps/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,s,a){return o()(r.a.mark((function n(){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a||(a="default"),r.next=3,Re().get("quest/"+e+"/version/"+s+"/chapter/"+t+"/steps/lang/"+a).catch((function(e){return console.log(e.request)}));case 3:return o=r.sent,r.abrupt("return",o);case 5:case"end":return r.stop()}}),n)})))()},listWonObjects:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().get("quest/"+e+"/version/"+s+"/steps/"+t+"/objectswon").catch((function(e){return console.log(e.request)}));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),a)})))()},getById:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s||(s="default"),a.next=3,Re().get("step/"+e+"/version/"+t+"/lang/"+s).catch((function(e){return console.log(e.request)}));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}}),a)})))()},checkAnswer:function(e,t,s,a,n,i){var l=arguments;return o()(r.a.mark((function o(){var c,u;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=l.length>6&&void 0!==l[6]?l[6]:{},r.next=3,Re().post("quest/"+e+"/version/"+s+"/step/"+t+"/check/"+a+"/player/"+i,n,{"axios-retry":c}).catch((function(e){return console.log(e.request)}));case 3:return u=r.sent,r.abrupt("return",u);case 5:case"end":return r.stop()}}),o)})))()},countForAQuest:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().get("quest/"+e+"/version/"+t+"/steps/count").catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},listChapters:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().get("quest/"+e+"/version/"+t+"/lang/"+s+"/chapter/list").catch((function(e){return console.log(e.request)}));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),a)})))()},save:function(e){return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().put("quest/"+e.questId+"/version/"+e.version+"/step/"+e.stepId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,ot.removeFromCache(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},modifyChapter:function(e){return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().put("quest/"+e.questId+"/version/"+e.version+"/chapter/"+e.chapterId+"/update",e).catch((function(e){return console.log(e.request)}));case 2:return s=t.sent,t.next=5,ot.removeFromCache(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},remove:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().delete("quest/"+e+"/version/"+s+"/step/"+t+"/remove");case 2:return n=a.sent,a.next=5,ot.removeFromCache(e);case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)})))()},removeChapter:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().delete("quest/"+e+"/version/"+s+"/chapter/"+t+"/remove");case 2:return n=a.sent,a.next=5,ot.removeFromCache(e);case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)})))()},move:function(e,t,s,a){return o()(r.a.mark((function n(){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().put("quest/"+e+"/version/"+t+"/step/"+s+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return o=r.sent,r.next=5,ot.removeFromCache(e);case 5:return r.abrupt("return",o);case 6:case"end":return r.stop()}}),n)})))()},moveChapter:function(e,t,s,a){return o()(r.a.mark((function n(){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Re().put("quest/"+e+"/version/"+t+"/chapter/"+s+"/move/"+a).catch((function(e){return console.log(e.request)}));case 2:return o=r.sent,r.next=5,ot.removeFromCache(e);case 5:return r.abrupt("return",o);case 6:case"end":return r.stop()}}),n)})))()},uploadBackgroundImage:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/background/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadAudio:function(e,t){return Re().post("/quest/"+e+"/step/audio/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))},uploadAnswerImage:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/choose-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadMemoryImage:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/memory/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadCodeAnswerImage:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/code-image/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadVideo:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/video/upload",t,{timeout:12e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadPuzzleImage:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().post("/quest/"+e+"/step/jigsaw-puzzle/upload",t,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=s.sent,s.next=5,ot.removeFromCache(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},uploadItemImage:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().post("/quest/"+e+"/step/"+t+"/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return n=a.sent,a.next=5,ot.removeFromCache(e);case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)})))()},uploadItemObject:function(e,t,s){return o()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().post("/quest/"+e+"/step/3dobject/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,ot.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e,t,s){return o()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Re().post("/quest/"+e+"/step/character/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return a=t.sent,t.next=5,ot.removeFromCache(e);case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))()},uploadAlternativeImage:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().post("/quest/"+e+"/step/"+t+"/upload",s,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}));case 2:return n=a.sent,a.next=5,ot.removeFromCache(e);case 5:return a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)})))()},uploadSnapshot:function(e,t,s){return o()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",Re().post("/quest/"+e+"/snapshot/upload",t,{timeout:6e5,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){s(!1,e)})));case 1:case"end":return a.stop()}}),a)})))()},generateTextsExportFile:function(e,t,s){return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Re().get("quest/"+e+"/version/"+t+"/"+s+"/export/texts").catch((function(e){return console.log(e.request)}));case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}}),a)})))()}},Os={props:["quest","design","lang"],watch:{quest:function(){var e=o()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.saveOfflineQuest(t);case 3:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{offline:{progress:.1},error:{nb:0,raised:!1},isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.saveOfflineQuest(e.quest);case 4:case"end":return t.stop()}}),t)})))()},methods:{saveOfflineQuest:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.error.raised=!1,s.next=3,ot.isCached(e.questId);case 3:if(a=s.sent,t.offline.progress=.1,a){s.next=11;break}return s.next=8,t.saveQuestData(e);case 8:if(n=s.sent,n){s.next=11;break}return s.abrupt("return");case 11:t.offline.progress=1,o=t,setTimeout((function(){o.$emit("end")}),3e3);case 14:case"end":return s.stop()}}),s)})))()},addQuestInOfflineList:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,nt.checkIfFileExists("","quests.json");case 2:if(a=s.sent,!a){s.next=10;break}return s.next=6,nt.readFile("","quests.json");case 6:o=s.sent,n=JSON.parse(o),s.next=11;break;case 10:n={list:[]};case 11:for(i=!1,l=0;l<n.list.length;l++)n.list[l].questId===e&&(i=!0);return i||n.list.push(t.quest),s.next=16,nt.writeInFile("","quests.json",JSON.stringify(n),!0);case 16:case"end":return s.stop()}}),s)})))()},saveQuestData:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_,T,P,I;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t,nt.setTimeout(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.cancelSavingTooLong(a.quest.questId);case 2:case"end":return e.stop()}}),e)}))),42e4),s.next=4,As.listForAQuest(e.questId,e.version,t.lang);case 4:for(n=s.sent,i=n.data.steps,l=n.data.chapters,t.quest.steps=[],c=0;c<i.length;c++)t.quest.steps.push(i[c].stepId);for(t.quest.chapters=[],c=0;c<l.length;c++)t.quest.chapters.push(l[c].chapterId);if(t.error.raised){s.next=201;break}return s.next=14,nt.writeInFile(e.questId,"quest_"+e.questId+".json",JSON.stringify(e),!0);case 14:if(u=s.sent,u){s.next=18;break}return t.throwSaveError("Could not create quest file for quest "+e.questId),s.abrupt("return",!1);case 18:return s.next=20,t.addQuestInOfflineList(e.questId);case 20:if(t.error.raised){s.next=198;break}if(t.offline.progress=.2,!e.picture||""===e.picture){s.next=29;break}return s.next=25,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.picture);case 25:if(d=s.sent,d){s.next=29;break}return t.throwSaveError("Could not create quest picture for quest "+e.questId),s.abrupt("return",!1);case 29:if(t.offline.progress+=.1,!e.customization||!e.customization.character||""===e.customization.character){s.next=33;break}return s.next=33,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.character);case 33:if(!e.customization||!e.customization.logo||""===e.customization.logo){s.next=36;break}return s.next=36,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.logo);case 36:if(!e.customization||!e.customization.audio||""===e.customization.audio){s.next=39;break}return s.next=39,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/",e.customization.audio);case 39:if(!n||!n.data){s.next=195;break}p=Math.ceil(70/i.length)/100,c=0;case 42:if(!(c<i.length)){s.next=182;break}if(!t.error.raised){s.next=45;break}return s.abrupt("return",!1);case 45:return m=i[c],s.next=48,nt.writeInFile(e.questId,"step_"+m.stepId+".json",JSON.stringify(m),!0);case 48:if(h=s.sent,h){s.next=52;break}return t.throwSaveError("Could not save step file for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 52:if(!m.backgroundImage||""===m.backgroundImage){s.next=59;break}return s.next=55,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/background/",m.backgroundImage);case 55:if(f=s.sent,f){s.next=59;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 59:if(!m.videoStream||""===m.videoStream){s.next=66;break}return s.next=62,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/video/",m.videoStream);case 62:if(g=s.sent,g){s.next=66;break}return t.throwSaveError("Could not save video for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 66:if(!m.audioStream||""===m.audioStream){s.next=73;break}return s.next=69,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/audio/",m.audioStream);case 69:if(b=s.sent,b){s.next=73;break}return t.throwSaveError("Could not save audio for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 73:if("choose"!==m.type||!m.options||!m.options.items){s.next=87;break}v=!0,w=0;case 76:if(!(w<m.options.items.length)){s.next=87;break}if(!m.options.items[w].imagePath){s.next=84;break}return s.next=80,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/",m.options.items[w].imagePath);case 80:if(v=s.sent,v){s.next=84;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "choose-image" '+m.stepId),s.abrupt("return",!1);case 84:w++,s.next=76;break;case 87:if("memory"!==m.type||!m.options||!m.options.items){s.next=101;break}y=!0,w=0;case 90:if(!(w<m.options.items.length)){s.next=101;break}if(!m.options.items[w].imagePath){s.next=98;break}return s.next=94,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/memory/",m.options.items[w].imagePath);case 94:if(y=s.sent,y){s.next=98;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "memory" '+m.stepId),s.abrupt("return",!1);case 98:w++,s.next=90;break;case 101:if("code-image"!==m.type||!m.options||!m.options.images){s.next=115;break}q=!0,w=0;case 104:if(!(w<m.options.images.length)){s.next=115;break}if(!m.options.images[w].imagePath){s.next=112;break}return s.next=108,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/",m.options.images[w].imagePath);case 108:if(q=s.sent,q){s.next=112;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "code-image" '+m.stepId),s.abrupt("return",!1);case 112:w++,s.next=104;break;case 115:if("jigsaw-puzzle"!==m.type||!m.options||!m.options.picture||""===m.options.picture){s.next=122;break}return s.next=118,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/",m.options.picture);case 118:if(k=s.sent,k){s.next=122;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "jigsaw-puzzle" '+m.stepId),s.abrupt("return",!1);case 122:if("new-item"!==m.type||!m.options||!m.options.picture||""===m.options.picture){s.next=136;break}if(-1!==m.options.picture.indexOf("statics")){s.next=136;break}if(!m.options.pictures||!m.options.pictures[t.lang]||""===m.options.pictures[t.lang]){s.next=130;break}return s.next=127,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/",m.options.pictures[t.lang]);case 127:x=s.sent,s.next=133;break;case 130:return s.next=132,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/",m.options.picture);case 132:x=s.sent;case 133:if(x){s.next=136;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "new-item" '+m.stepId),s.abrupt("return",!1);case 136:if("character"!==m.type||!m.options||!m.options.character||""===m.options.character||"usequestcharacter"===m.options.character){s.next=144;break}if(!(m.options.character.length>3)){s.next=144;break}return s.next=140,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/character/",m.options.character);case 140:if(C=s.sent,C){s.next=144;break}return t.throwSaveError("Could not save image for quest "+e.questId+' and step "character" '+m.stepId),s.abrupt("return",!1);case 144:if("find-item"!==m.type&&"use-item"!==m.type||!m.options||!m.options.altFile||""===m.options.altFile){s.next=152;break}if(!(m.options.altFile.length>3)){s.next=152;break}return s.next=148,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/background/",m.options.altFile);case 148:if(S=s.sent,S){s.next=152;break}return t.throwSaveError("Could not save background image for quest "+e.questId+" and step "+m.stepId),s.abrupt("return",!1);case 152:if("locate-item-ar"!==m.type||!m.options){s.next=176;break}if(!m.options.picture||""===m.options.picture){s.next=160;break}return s.next=156,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/",m.options.picture);case 156:if(_=s.sent,_){s.next=160;break}return t.throwSaveError("Could not save 2D image for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 160:if(!m.options.is3D){s.next=176;break}if(!m.options.customModel){s.next=170;break}return s.next=164,nt.saveBinaryFile(e.questId,t.serverUrl+"/upload/quest/"+e.questId+"/step/3dobject/",m.options.customModel+".glb");case 164:if(T=s.sent,T){s.next=168;break}return t.throwSaveError("Could not save custom 3D model for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 168:s.next=176;break;case 170:return s.next=172,nt.saveBinaryFile(e.questId,t.serverUrl+"/statics/3d-models/",m.options.model+".glb");case 172:if(P=s.sent,P){s.next=176;break}return t.throwSaveError("Could not save standard 3D model for quest "+e.questId+' and step "locate-item-ar" '+m.stepId),s.abrupt("return",!1);case 176:if(!t.error.raised){s.next=178;break}return s.abrupt("return",!1);case 178:t.offline.progress+=p;case 179:c++,s.next=42;break;case 182:c=0;case 183:if(!(c<l.length)){s.next=195;break}if(!t.error.raised){s.next=186;break}return s.abrupt("return",!1);case 186:return s.next=188,nt.writeInFile(e.questId,"chapter_"+l[c].chapterId+".json",JSON.stringify(l[c]),!0);case 188:if(I=s.sent,I){s.next=192;break}return t.throwSaveError("Could not save chapter "+l[c].chapterId+" for quest "+e.questId),s.abrupt("return",!1);case 192:c++,s.next=183;break;case 195:return s.abrupt("return",!0);case 198:return s.abrupt("return",!1);case 199:s.next=202;break;case 201:return s.abrupt("return",!1);case 202:case"end":return s.stop()}}),s)})))()},throwSaveError:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:console.error("OfflineLoader error: "+e),vt(t.$t("label.ErrorOfflineSaving"),"error"),t.error.raised=!0,t.error.nb++,a=t,t.$q.dialog({dark:!0,message:a.$t("label.ErrorDownloadNeedsToRestart"),ok:!0,cancel:!0}).onCancel(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$router.push("/home");case 1:case"end":return e.stop()}}),e)})))).onOk(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.cancelOfflineLoading(),a.removeOfflineData(),a.saveOfflineQuest(quest);case 3:case"end":return e.stop()}}),e)}))));case 6:case"end":return s.stop()}}),s)})))()},cancelSavingTooLong:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.offline.progress||1===e.offline.progress||e.error.raised||(vt(e.$t("label.ErrorOfflineSaving"),"error"),e.error.raised=!0,e.error.nb++);case 1:case"end":return t.stop()}}),t)})))()},cancelOfflineLoading:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,nt.setTimeout(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.removeOfflineData(s.quest.questId);case 2:case"end":return e.stop()}}),e)}))),7e3),vt(e.$t("label.CancelOfflineWarning"),"warning"),e.offline.progress=0,e.$emit("end");case 5:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,nt.removeDirectory(e);case 2:return a=s.sent,s.next=5,t.removeQuestFromOfflineList(e);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},removeQuestFromOfflineList:function(e){return o()(r.a.mark((function t(){var s,a,n,o,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,nt.readFile("","quests.json");case 6:for(n=t.sent,a=JSON.parse(n),o=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(o=i);return-1!==o&&a.list.splice(o,1),t.next=13,nt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},Ms=Os,zs=Object(_e["a"])(Ms,Is,$s,!1,null,null,null),Ns=zs.exports,Fs=s("b06b"),Ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{model:{value:e.geolocationshowCalibration,callback:function(t){e.geolocationshowCalibration=t},expression:"geolocationshowCalibration"}},[s("div",{staticClass:"bg-black centered q-pa-md"},[s("img",{staticStyle:{width:"100%","max-width":"500px"},attrs:{src:"statics/icons/game/wave-phone.gif"}}),s("div",{staticClass:"text-white"},[e._v("\n      "+e._s(e.$t("label.WaveThePhoneForGPSPrecision"))+"\n    ")])])])},Rs=[],Ls={data:function(){return{geolocationshowCalibration:!1}},methods:{askUserToCalibrateGPS:function(e){var t=this;this.geolocationshowCalibration=!0,setTimeout((function(){t.closeGPSCalibration(e)}),5500)},closeGPSCalibration:function(e){this.geolocationshowCalibration=!1,null!==e&&void 0!==e&&"locate-item-ar"===e?this.$emit("endvertical"):this.$emit("end")}}},js=Ls,Es=Object(_e["a"])(js,Ds,Rs,!1,null,null,null),Qs=Es.exports,Bs=s("b047c"),Us=s.n(Bs),Ys={components:{shop:kt,offlineLoader:Ns,gpscalibration:Qs},data:function(){return{quest:{},ranking:{show:!1,items:[]},playStep:0,shop:{show:!1,premiumQuest:{priceCode:"free",priceValue:"0",buyable:!1,alreadyPayed:!1}},offline:{active:!1,show:!1},warning:{questNotLoaded:!1,lowBattery:!1,tooMuchUsers:!1},serverUrl:"https://api.graaly.com",isRunFinished:!1,isRunStarted:!1,isRunPlayable:!0,isQuestOpen:{status:!0,displayHours:!1},isSharedWithPartners:!1,isOwner:!1,isAdmin:!1,showRewardsPopup:!1,showPreloaderPopup:!1,multiplayer:{show:!1,team:"",qrcode:""},geolocationIsSupported:navigator.geolocation,isUserTooFar:!1,continueQuest:!1,distanceFromStart:0,pageReady:!1,isHybrid:window.cordova,isIOs:nt.isIOS()}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return nt.clearAllRunningProcesses(),window.addEventListener("batterystatus",e.checkBattery,!1),t.next=4,e.initQuest();case 4:e.$store.state.history={items:[],index:0};case 5:case"end":return t.stop()}}),t)})))()},updated:Us()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),methods:{checkUserIsCloseFromStartingPoint:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.quest.location&&e.quest.location.coordinates&&e.quest.location.coordinates.length>1&&t.coords&&t.coords.latitude&&(e.distance=Math.round(1e3*nt.distanceInKmBetweenEarthCoordinates(e.quest.location.coordinates[1],e.quest.location.coordinates[0],t.coords.latitude,t.coords.longitude)),e.distance>50&&(e.isUserTooFar=!0)),nt.setTimeout(e.checkUserIsCloseFromStartingPoint,15e3),e.geolocationIsSupported=!0}),(function(){e.geolocationIsSupported=!1,nt.setTimeout(e.checkUserIsCloseFromStartingPoint,5e3)}),{timeout:1e4,maximumAge:0}):(this.geolocationIsSupported=!1,nt.setTimeout(this.checkUserIsCloseFromStartingPoint,5e3))},checkIfQuestIsOpened:function(){if(this.quest.scheduling&&this.quest.scheduling.length>0&&!this.isAdmin&&!this.isOwner){var e=new Date,t=e.getDay();if(this.quest.scheduling[t]&&2===this.quest.scheduling[t].length){var s=e.getHours();this.quest.scheduling[t][0]<=s&&this.quest.scheduling[t][1]>s?this.isQuestOpen.status=!0:this.isQuestOpen.status=!1}}},initQuest:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.id);case 2:if(window.cordova&&e.quest.premiumPrice&&e.quest.premiumPrice.androidId&&store.products.length>0&&e.$router.go(0),e.checkUserIsCloseFromStartingPoint(),e.$store.state.user.isAdmin&&(e.isAdmin=!0),e.quest.editorsUserId)for(s=0;s<e.quest.editorsUserId.length;s++)e.quest.editorsUserId[s]===e.$store.state.user._id&&(e.isOwner=!0);else e.$store.state.user._id===e.quest.authorUserId&&(e.isOwner=!0);if(e.checkIfQuestIsOpened(),!e.offline.active||!e.isOwner&&!e.isAdmin){t.next=10;break}return t.next=10,e.getQuest(e.quest.questId,!0);case 10:return t.next=12,e.getRun();case 12:return t.next=14,e.checkUserCanPlay();case 14:return t.next=16,e.initPay();case 16:return t.next=18,e.checkSimultaneousPlayers();case 18:case"end":return t.stop()}}),t)})))()},getQuest:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,ot.isCached(e);case 2:if(n=a.sent,n&&!t){a.next=22;break}return s.offline.active=!1,a.next=7,ot.getLastById(e);case 7:if(o=a.sent,!o||!o.data||200!==o.status){a.next=18;break}if(s.quest=o.data,"undefined"===typeof s.quest.authorUserId){a.next=16;break}return a.next=13,Le.getAccount(s.quest.authorUserId);case 13:o=a.sent,o&&o.data&&s.$set(s.quest,"author",o.data),s.quest.description=nt.replaceBreakByBR(s.quest.description);case 16:a.next=20;break;case 18:throw s.$q.dialog({dark:!0,title:s.$t("label.TechnicalProblem"),message:s.$t("label.TechnicalProblemNetworkIssue"),ok:s.$t("label.BackToMap")}).onOk((function(){s.backToTheMap()})),new Error("Could not load quest with questId = '"+e+"'");case 20:a.next=42;break;case 22:return s.offline.active=!0,a.next=25,nt.readFile(e,"quest_"+e+".json");case 25:if(i=a.sent,i){a.next=37;break}if(!t){a.next=31;break}s.warning.questNotLoaded=!0,a.next=35;break;case 31:return a.next=33,s.getQuest(e,!0);case 33:return l=a.sent,a.abrupt("return",l);case 35:a.next=42;break;case 37:return s.quest=JSON.parse(i),a.next=40,nt.readBinaryFile(e,s.quest.picture);case 40:c=a.sent,s.quest.picture=c||"_default-quest-picture.png";case 42:return a.abrupt("return",!0);case 43:case"end":return a.stop()}}),a)})))()},showCalibrationAndStartQuest:function(){this.quest.hasGeolocationSteps?this.$refs.gpscal.askUserToCalibrateGPS():this.startQuest(this.quest.questId,this.getLanguage())},getRun:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ps.listForAQuest(e.quest.questId);case 2:if(s=t.sent,!(s&&s.data&&s.data.length>0)){t.next=8;break}for(a=0;a<s.data.length;a++)"finished"===s.data[a].status&&(e.isRunFinished=!0),"in-progress"===s.data[a].status&&s.data[a].currentStep&&(e.isRunStarted=!0);e.isRunStarted&&(e.continueQuest=!0,e.isOwner||e.startQuest(e.quest.questId,e.$route.params.lang)),t.next=12;break;case 8:return t.next=10,ot.isCached(e.quest.questId);case 10:n=t.sent,n&&(e.continueQuest=!0);case 12:case"end":return t.stop()}}),t)})))()},checkSimultaneousPlayers:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.quest.limitNumberOfPlayer){t.next=5;break}return t.next=3,Ps.checkNumberOfPlayers(e.quest.questId);case 3:s=t.sent,s&&s.data&&parseInt(s.data,10)>=e.quest.limitNumberOfPlayer&&(e.warning.tooMuchUsers=!0);case 5:return t.next=7,nt.writeInFile(e.quest.questId,"run_"+e.quest.questId+".json",JSON.stringify({}),!1);case 7:case"end":return t.stop()}}),t)})))()},checkBattery:function(e){e.level<50?this.warning.lowBattery=!0:this.warning.lowBattery=!1},checkUserCanPlay:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isRunStarted&&!e.isRunFinished){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(e.quest.price>e.$store.state.user.coins)||e.isAdmin||e.isOwner){t.next=5;break}return e.isRunPlayable=!1,t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=2;break}return t.abrupt("return","free");case 2:if(e.quest.premiumPrice.active){t.next=4;break}return t.abrupt("return","free");case 4:if(!e.isRunStarted&&!e.isRunFinished){t.next=6;break}return t.abrupt("return","free");case 6:if(window.cordova){t.next=10;break}return e.isAdmin||e.isOwner||vt(e.$t("label.YouMustPlayThisKindOfQuestOnAMobileDevice"),"error"),e.shop.premiumQuest.priceCode="notplayableonweb",t.abrupt("return");case 10:if(e.quest.premiumPrice&&e.quest.premiumPrice.androidId){t.next=13;break}return vt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("return");case 13:return t.next=15,ot.hasPayed(e.quest.questId);case 15:if(s=t.sent,!(s&&s.data&&s.data.status&&"paied"===s.data.status)){t.next=20;break}return e.shop.premiumQuest.priceCode="free",e.shop.premiumQuest.alreadyPayed=!0,t.abrupt("return","free");case 20:e.shop.premiumQuest.priceCode=e.quest.premiumPrice.androidId,store.register({id:e.quest.premiumPrice.androidId,alias:e.quest.premiumPrice.androidId,type:store.CONSUMABLE}),store.error((function(e){vt(e.message+"(code: "+e.code+")","error")})),store.when(e.quest.premiumPrice.androidId).updated(e.displayPrice),store.when(e.quest.premiumPrice.androidId).approved((function(e){e.verify()})),store.when(e.quest.premiumPrice.androidId).verified(function(){var t=o()(r.a.mark((function t(s){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(s);case 2:a=t.sent,a?s.finish():vt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 27:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.shop.premiumQuest.priceValue=e.price,e.canPurchase&&(this.shop.premiumQuest.buyable=!0)},savePurchase:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.purchasePremium(t.quest.questId,e);case 2:if(a=s.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){s.next=7;break}return t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang),s.abrupt("return",!0);case 7:return s.abrupt("return",!1);case 8:case"end":return s.stop()}}),s)})))()},buyQuest:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:store.order(e.quest.premiumPrice.androidId);case 1:case"end":return t.stop()}}),t)})))()},getLanguage:function(e){if(e||(e=this.quest),!e.languages||0===e.languages.length)return!1;var t;if(t=this.isOwner||this.isAdmin?e.languages:e.languages.filter((function(e){return e.published})),t&&t.length>0){for(var s="",a=0;a<t.length;a++)t[a].lang===this.$store.state.user.language&&(s=this.$store.state.user.language);""===s&&t.length>0&&(s=t[0].lang)}else e.languages.length>0&&(s=e.languages[0].lang);return s},getTranslatedData:function(e){var t=this.getLanguage();return e[t]?e[t]:(this.quest.warning=null,"")},openWarningLink:function(){this.quest&&this.quest.warning&&this.quest.warning.link&&nt.openExternalLink(this.quest.warning.link)},goToLocationWithMaps:function(e,t){Object(Fs["a"])("https://maps.google.com/?daddr=".concat(t,",").concat(e))},getAllLanguages:function(e){if(e||(e=this.quest),!e||!e.languages||0===e.languages.length)return!1;var t=e.languages.filter((function(e){return e.published}));return t&&0===t.length&&e.languages.length>0&&t.push(e.languages[0]),t},playQuest:function(e,t){var s=this;return o()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.quest.forcePlayerToHaveAccount||"-"!==s.$store.state.user.name){a.next=3;break}return s.$q.dialog({message:s.$t("label.YouNeedToCreateYourAccountToPlay"),ok:s.$t("label.Ok"),cancel:s.$t("label.Cancel")}).onOk((function(){s.$router.push("/profile/"+s.$store.state.user.id)})).onCancel((function(){return!1})),a.abrupt("return",!1);case 3:if(!s.quest.shareUserDataWithCreator||"-"===s.$store.state.user.name||s.isSharedWithPartners){a.next=7;break}s.$q.dialog({message:s.$t("label.PartnerAskForYouData"),options:{type:"checkbox",model:[],items:[{label:s.$t("label.ShareDataWithPartner"),value:"ok"}]},ok:s.$t("label.Ok"),cancel:s.$t("label.Cancel")}).onOk((function(a){a.length>0&&"ok"===a[0]&&(s.isSharedWithPartners=!0),s.playQuestLaunch(e,t)})).onCancel((function(){return!1})),a.next=9;break;case 7:return a.next=9,s.playQuestLaunch(e,t);case 9:case"end":return a.stop()}}),a)})))()},playQuestLaunch:function(e,t){var s=this;return o()(r.a.mark((function t(){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==s.playStep||!s.quest.premiumPrice||!s.quest.premiumPrice.tier&&!s.quest.premiumPrice.active||s.isAdmin||s.isOwner||s.isRunFinished||s.isRunStarted){t.next=11;break}if(!s.quest.premiumPrice.tier){t.next=8;break}return t.next=4,ot.checkTierPayment(e);case 4:a=t.sent,200===a.status?s.startPreloader():s.shop.show=!0,t.next=9;break;case 8:s.shop.show=!0;case 9:t.next=12;break;case 11:s.playStep<=1&&s.quest.playersNumber>1&&!s.continueQuest?(s.shop.show=!1,s.multiplayer.show=!0):s.startPreloader();case 12:case"end":return t.stop()}}),t)})))()},startPreloader:function(){if(this.shop.show=!1,this.multiplayer.show=!1,this.showPreloaderPopup=!0,!this.isHybrid||this.quest.customization&&this.quest.customization.forceOnline){var e=this;setTimeout((function(){e.showCalibrationAndStartQuest()}),3e3)}else this.offline.show=!0},openProfile:function(e){this.$router.push("/profile/"+e)},scanMultiplayerQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&(-1===t.text.indexOf("team_")?vt(e.$t("label.ThisIsNotATeamQRCodeValid"),"error"):e.checkTeamCode(t.text))}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},scanTierPaymentQRCode:function(){var e=this;this.isHybrid&&cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkTierPaymentCode(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},checkTeamCode:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ps.addTeamPlayer(e);case 2:a=s.sent,200===a.status?(t.playStep=2,t.playQuest(t.quest.questId,t.$route.params.lang)):vt(t.$t("label.ErrorMessageForNewTeamMember"),"error");case 4:case"end":return s.stop()}}),s)})))()},checkTierPaymentCode:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.useTierPaymentCode(t.quest.questId,e);case 2:a=s.sent,200===a.status?(t.playStep=1,t.playQuest(t.quest.questId,t.$route.params.lang)):vt(t.$t("label.TechnicalIssueOrCodeAlreadyUsed"),"error");case 4:case"end":return s.stop()}}),s)})))()},createTeam:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.multiplayer.team||""===e.multiplayer.team){t.next=7;break}return t.next=3,Ps.init(e.quest.questId,e.quest.version,e.$route.params.lang,e.isUserTooFar,e.multiplayer.team,e.isSharedWithPartners);case 3:s=t.sent,200===s.status&&s.data&&s.data._id?(e.multiplayer.runId=s.data._id,e.multiplayer.qrcode=s.data._id):vt(e.$t("label.ErrorStandardMessage"),"error"),t.next=8;break;case 7:vt(e.$t("label.PleaseEnterYourTeamName"),"error");case 8:case"end":return t.stop()}}),t)})))()},checkTeamAndStart:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ps.checkTeamIsReady(e.multiplayer.runId);case 2:s=t.sent,200===s.status?(e.playStep=2,e.playQuest(e.quest.questId,e.$route.params.lang)):s.data&&s.data.members&&s.data.members.length>0?(a=s.data.members.join(", "),vt(e.$t("label.YouNeedMoreMembersToPlay",{nb:e.quest.playersNumber,members:a}),"warning")):vt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},openReadMoreLink:function(){nt.openExternalLink(this.quest.readMoreLink)},startQuest:function(e,t){this.$router.push("/quest/play/"+e+"/version/"+this.quest.version+"/step/0/"+t+"?remoteplay="+this.isUserTooFar+"&sharepartner="+this.isSharedWithPartners)},showRewards:function(){this.showRewardsPopup=!0},backToTheMap:function(){this.$router.back()},modifyQuest:function(){this.$router.push("/quest/builder/"+this.quest.questId)},closeShop:function(){this.shop.show=!1},getBackgroundImage:function(){return this.quest.picture&&"_"===this.quest.picture[0]?"statics/images/quest/"+this.quest.picture:this.quest.picture&&-1!==this.quest.picture.indexOf("blob:")?this.quest.picture:this.quest.picture?this.serverUrl+"/upload/quest/"+this.quest.picture:"statics/images/quest/default-quest-picture.png"}}},Hs=Ys,Gs=Object(_e["a"])(Hs,_s,Ts,!1,null,null,null),Ws=Gs.exports,Vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reduce-window-size-desktop"},[e.warnings.stepDataMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.initData()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n  ")],1):e._e(),e.warnings.isNetworkLow?s("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),e.startDate.enabled?s("div",{staticClass:"centered q-pa-lg"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?s("img",{attrs:{src:e.getLogoImage()}}):e._e(),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():s("img",{attrs:{src:"statics/icons/app-logo/icon-96x96.png"}}),s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ThisStepIsAvailableIn")))]),s("div",{staticClass:"text-h5"},[e._v(e._s(e.$t("label.TimeRemainingHoursMin",{day:e.startDate.remainingDays,hour:e.startDate.remainingHours,min:e.startDate.remainingMinutes,sec:e.startDate.remainingSeconds})))])]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio?s("audio",{attrs:{id:"background-music",autoplay:"",loop:"",src:e.info.audio}}):e._e(),s("div",{class:{fit:"image-over-flow"!==e.step.type}},[s("stepPlay",{attrs:{step:e.step,runId:e.runId,inventory:e.inventory,itemUsed:e.selectedItem,reload:e.loadStepData,lang:e.lang,customization:e.info.quest.customization?e.info.quest.customization:{color:"primary"},answer:e.offline.answer,player:e.player,timer:e.countDownTime},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.nextStep(!0)},suggestNext:e.alertOnNext,hideButtons:e.hideFooterButtons,showButtons:e.showFooterButtons,msg:e.trackMessage}})],1),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.inventory.isOpened,expression:"inventory.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[s("div",{staticClass:"q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("div",{staticClass:"subtitle3 q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"===this.step.type?s("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),e.inventory.items&&e.inventory.items.length>0&&!e.warnings.inventoryMissing&&"use-item"!==this.step.type?s("p",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.InventoryZoom")))]):e._e(),e.inventory.items&&0!==e.inventory.items.length?e._e():s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return s("div",{key:a,on:{click:function(s){return e.selectItem(t)}}},[s("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?s("p",[e._v(e._s(t.titles[e.lang]))]):e._e(),t.titles&&t.titles[e.lang]&&""!==t.titles[e.lang]?e._e():s("p",[e._v(e._s(t.title))])])})),0)])])]),s("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.detail.isOpened,callback:function(t){e.$set(e.inventory.detail,"isOpened",t)},expression:"inventory.detail.isOpened"}},[s("div",{staticClass:"bg-white centered limit-size-desktop"},[1===e.inventory.detail.zoom?s("img",{staticStyle:{width:"100%"},attrs:{src:e.inventory.detail.url}}):e._e(),2===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"200%"},attrs:{src:e.inventory.detail.url}})]):e._e(),4===e.inventory.detail.zoom?s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"400%"},attrs:{src:e.inventory.detail.url}})]):e._e(),s("div",{staticClass:"q-pa-md"},[e._v(e._s(e.inventory.detail.title))]),s("div",{staticClass:"q-pa-md text-grey"},[e._v(e._s(e.$t("label.YouCanNotUseAnItemInThisStep")))]),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeInventoryDetail()}}},[s("div",[e._v(e._s(e.$t("label.Close")))])]),s("div",[s("q-btn-group",{attrs:{outline:""}},[s("q-btn",{attrs:{flat:"",label:e.$t("label.Zoom")}}),s("q-btn",{class:{"text-primary":1===e.inventory.detail.zoom},attrs:{flat:"",label:"x1"},on:{click:function(t){return e.inventoryZoom(1)}}}),s("q-btn",{class:{"text-primary":2===e.inventory.detail.zoom},attrs:{flat:"",label:"x2"},on:{click:function(t){return e.inventoryZoom(2)}}}),s("q-btn",{class:{"text-primary":4===e.inventory.detail.zoom},attrs:{flat:"",label:"x4"},on:{click:function(t){return e.inventoryZoom(4)}}})],1)],1)],1)]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.chat.isOpened,expression:"chat.isOpened"}],staticClass:"bg-graaly-blue-dark text-white inventory panel-bottom"},[s("div",{staticClass:"q-pa-md"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:function(t){e.chat.isOpened=!1}}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("chat",{attrs:{questId:e.questId,isOpened:e.chat.isOpened}})],1)])]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.info.isOpened,expression:"info.isOpened"}],staticClass:"reduce-window-size-desktop"},[e.warnings.questDataMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.getQuest(e.questId)}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.warnings.questDataMissing?e._e():s("div",{staticClass:"panel-bottom no-padding",style:"background: url("+e.getBackgroundImage()+" ) center center / cover no-repeat "},[s("q-toolbar",{staticClass:"dark-banner text-white"},[e.info&&e.info.quest&&e.info.quest.availablePoints?s("q-toolbar-title",[e._v("\n            "+e._s(e.$t("label.MyScore"))+" "+e._s(e.run.tempScore)+" / "+e._s(e.info.quest.availablePoints.score)+"\n          ")]):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"play"===e.sound.status?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_up"},on:{click:e.cutSound}}):e._e(),e.info&&""!==e.info.audio&&null!==e.info.audio&&e.sound&&"pause"===e.sound.status?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"volume_off"},on:{click:e.cutSound}}):e._e(),e.offline.active?s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_off"}}):e._e(),e.offline.active?e._e():s("q-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:"cloud_done"}})],1),s("div",{staticClass:"text-center dark-banner q-pb-xl q-pt-md fixed-bottom"},[s("p",{staticClass:"title"},[e._v("\n            "+e._s(e.info.quest&&e.info.quest.title?e.info.quest.title:e.$t("label.NoTitle"))+"\n          ")]),e.run&&e.run.team&&e.run.team.name?s("p",[e._v("\n            "+e._s(e.$t("label.Team"))+" : "+e._s(e.run.team.name)+"\n          ")]):e._e(),s("p",[e.info.quest&&e.info.quest.customization&&e.info.quest.customization.removeScoring?e._e():s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.backToMap}},[s("span",[e._v("\n                "+e._s(e.$t("label.LeaveQuest"))+"\n              ")])])],1),s("p",[e.info.quest&&e.info.quest.playersNumber&&e.info.quest.playersNumber<2?s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.restartGame}},[s("span",[e._v("\n                "+e._s(e.$t("label.RestartQuest"))+"\n              ")])]):e._e()],1),s("p",[e.offline.active?e._e():s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.showFeedback}},[s("span",[e._v("\n                "+e._s(e.$t("label.Feedback"))+"\n              ")])])],1),e.info.quest.customization&&!0===e.info.quest.customization.chatEnabled?s("p",{staticClass:"q-pb-xl"},[e.offline.active?e._e():s("q-btn",{staticClass:"glossy large-button",style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{color:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"":"primary"},on:{click:e.openChat}},[s("span",[e._v("\n               Ask for help (Chat with GM)\n              ")]),this.$store.state.chatNotification>0?s("q-badge",{attrs:{color:"accent",rounded:"",floating:""}},[e._v(e._s(this.$store.state.chatNotification))]):e._e()],1)],1):e._e(),s("p",{staticClass:"q-pb-xl"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"secondary"},on:{click:e.openInfo}},[s("span",[e._v("\n                "+e._s(e.$t("label.BackToQuest"))+"\n              ")])])],1),s("p",{staticClass:"q-pb-lg"})])],1)])]),e.hint.isOpened?s("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[s("div",{staticClass:"fixed-top bg-black text-white centered q-pa-md"},[e._v("\n      "+e._s(e.$t("label.MyScore"))+" "+e._s(e.run.tempScore)+" / "+e._s(e.info.quest.availablePoints.score)+"\n    ")]),s("story",{attrs:{step:"hint",data:{hint:e.hint.label,character:e.info.quest.customization&&e.info.quest.customization.character&&""!==e.info.quest.customization.character?-1===e.info.quest.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.info.quest.customization.character:e.info.quest.customization.character:"3"}},on:{next:function(t){return e.askForHint()}}})],1):e._e(),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"mobile-fit over-map",class:"font-"+e.info.quest.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.countDownTime.enabled,expression:"countDownTime.enabled"}],staticClass:"fadein-message",staticStyle:{"font-size":"48px"}},[s("q-icon",{attrs:{color:"white",name:"timer"}}),e._v(" "+e._s(e.$t("label.ItRemainsMinutes",{time:e.countDownTime.remainingMinutes})))],1),s("q-dialog",{model:{value:e.feedback.isOpened,callback:function(t){e.$set(e.feedback,"isOpened",t)},expression:"feedback.isOpened"}},[s("div",{staticClass:"bg-white q-pa-md reduce-window-size-desktop"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FeedbackTitle")))]),e._v("\n      "+e._s(e.$t("label.FeedbackIntroduction"))+"\n      "),s("form",{on:{submit:function(t){return t.preventDefault(),e.sendFeedback(t)}}},[s("q-input",{staticClass:"full-width",attrs:{type:"textarea",label:e.$t("label.Feedback"),"max-height":100,"min-rows":4},model:{value:e.feedback.message,callback:function(t){e.$set(e.feedback,"message",t)},expression:"feedback.message"}})],1),s("div",{staticClass:"q-pa-md q-gutter-sm centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.sendFeedback}},[e._v(e._s(e.$t("label.Send")))]),s("div",{staticClass:"q-pt-md"},[s("a",{staticClass:"dark",on:{click:e.hideFeedback}},[e._v(e._s(e.$t("label.Cancel")))])])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.footer.show,expression:"footer.show"}],staticClass:"step-menu step-menu-fixed fixed-bottom"},[s("div",{staticClass:"row white-buttons"},[s("div",{staticClass:"col centered q-pb-md"},[e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?e._e():s("q-btn",{class:{"bg-secondary":e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.info.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"menu"},on:{click:function(t){return e.openInfo()}}},[this.$store.state.chatNotification>0?s("q-badge",{attrs:{color:"accent",rounded:"",floating:""}},[e._v(e._s(this.$store.state.chatNotification))]):e._e()],1),e.info.quest.customization&&e.info.quest.customization.logo&&""!==e.info.quest.customization.logo?s("q-btn",{staticClass:"bg-white",staticStyle:{"padding-top":"0 !important"},attrs:{round:"",size:"lg"},on:{click:function(t){return e.openInfo()}}},[s("q-avatar",{attrs:{size:"60px"}},[s("img",{attrs:{src:e.getLogoImage()}})])],1):e._e()],1),s("div",{staticClass:"col centered q-pb-md"},[e.info.quest.customization&&e.info.quest.customization.hideInventory?e._e():s("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened,"bg-primary":!e.inventory.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work"},on:{click:function(t){return e.openInventory()}}})],1),s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.hint.show,expression:"hint.show"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color),"bg-primary":!e.hint.isOpened&&(!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color)},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}},[this.step&&this.step.hint?s("q-badge",{attrs:{color:"secondary",floating:""}},[e._v(e._s(this.hint.remainingNumber))]):e._e()],1)],1),s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:""!==e.previousStepId,expression:"previousStepId !== ''"}],class:{"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",disable:0===e.$store.state.history.index,icon:"arrow_back"},on:{click:function(t){return e.previousStep()}}})],1),s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.step.id&&(e.next.enabled||e.next.canPass),expression:"step.id && (next.enabled || next.canPass)"}],class:{flashing:e.next.suggest,"bg-primary":!e.info.quest.customization||!e.info.quest.customization.color||""===e.info.quest.customization.color},style:e.info.quest.customization&&e.info.quest.customization.color&&""!==e.info.quest.customization.color?"background-color: "+e.info.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward"},on:{click:function(t){return e.nextStep()}}})],1)])])],1)},Js=[],Ks=(s("6762"),s("2fdb"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat"},[s("div",{staticClass:"subtitle3 q-pb-lg",on:{click:e.scrollBottom}},[e._v("Demande d'aide")]),e.arrayOfMessages.length>0?s("q-scroll-area",{ref:"scroll",staticClass:"q-pb-md row messages"},e._l(e.arrayOfMessages,(function(t){return s("q-intersection",{key:t.id,attrs:{transition:"scale",once:""}},[s("q-chat-message",{attrs:{name:t.admin?"Admin":"Vous",text:[t.content],stamp:e.timeMessage(t),sent:!t.admin,"bg-color":t.admin?"secondary":"accent","text-color":"white"}})],1)})),1):e._e(),s("q-input",{staticClass:"q-mb-sm input-message",staticStyle:{width:"calc(100% - 20px)","max-width":"550px"},attrs:{rounded:"",outlined:"",dense:"",label:"Ecrire un message"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SendChatMessage(t)}},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",color:e.writeMessage?"primary":"grey",disabled:!e.writeMessage,icon:"send"},on:{click:e.SendChatMessage}})]},proxy:!0}]),model:{value:e.messageToSend,callback:function(t){e.messageToSend=t},expression:"messageToSend"}})],1)}),Zs=[],Xs={getUserMessages:function(e){return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Me.a.get("https://gmdash.api-graaly.com:3001/messages/".concat(e)).then((function(e){return e.data})).catch((function(e){return e})));case 1:case"end":return t.stop()}}),t)})))()}},ea=s("e7fc"),ta=ea.connect("wss://test.mosquitto.org:8081",{username:"gm-dash",password:"26&8eoW$VXx!xh!f*h"}),sa={Connect:function(e){ta=ea.connect("wss://test.mosquitto.org:8081");var t="graaly/".concat(e,"/#");console.log("Connecting to mqtt"),ta.on("connect",(function(){console.log("connected to Mqtt"),ta.subscribe(t,(function(e){console.log("Subcribed to topic : "+t),e&&console.error(e)}))})),ta.on("message",(function(e,t){var s=JSON.parse(t.toString());s.userId===Ue.state.user.id&&(Xs.getUserMessages(s.userId).then((function(e){Ue.commit("setChatMessage",e)})),s.admin&&Ue.commit("updateChatNotification"))}))},Send:function(e,t){var s="graaly/".concat(e,"/injest/");console.log("publishing on topic : "+s),ta.publish(s,JSON.stringify(t))},SendChat:function(e,t){var s="graaly/".concat(e,"/chat/");console.log("publishing on topic : "+s),ta.publish(s,JSON.stringify(t))}},aa=sa,ra=s("c72b"),na=s("8169"),oa=s("ad56"),ia=s("4983"),la={name:"chat",components:{QChatMessage:na["a"],QIntersection:oa["a"],QScrollArea:ia["a"]},props:{questId:String,isOpened:Boolean},data:function(){return{messageToSend:"",writeMessage:!1}},computed:{player:function(){return this.$store.state.user.name},arrayOfMessages:function(){return this.$store.state.chatMessages}},watch:{isOpened:function(){this.scrollBottom()},messageToSend:function(e){e.length>=3?this.writeMessage=!0:this.writeMessage=!1},arrayOfMessages:function(){this.scrollBottom()}},methods:{SendChatMessage:function(){var e={ts:new Date,questId:this.questId,userId:this.$store.state.user.id,name:this.player,admin:!1,content:this.messageToSend};aa.SendChat(this.questId,e),this.messageToSend="",this.scrollBottom()},timeMessage:function(e){return Object(ra["a"])(e.ts,"FR-fr")},scrollBottom:function(){var e=this;setTimeout((function(){var t=e.$refs.scroll;if(t){var s=t.getScrollTarget(),a=300;t.setScrollPosition(s.scrollHeight,a)}}),200)}},mounted:function(){var e=this;aa.Connect(this.questId),Xs.getUserMessages(this.$store.state.user.id).then((function(t){e.$store.commit("setChatMessage",t)}))}},ca=function(e,t,s){return[["à l'instant","dans un instant"],["il y a %s secondes","dans %s secondes"],["il y a 1 minute","dans 1 minute"],["il y a %s minutes","dans %s minutes"],["il y a 1 heure","dans 1 heure"],["il y a %s heures","dans %s heures"],["il y a 1 jour","dans 1 jour"],["il y a %s jours","dans %s jours"],["il y a 1 semaine","dans 1 semaine"],["il y a %s semaines","dans %s semaines"],["il y a 1 mois","dans 1 mois"],["il y a %s mois","dans %s mois"],["il y a 1 an","dans 1 an"],["il y a %s ans","dans %s ans"]][t]};Object(ra["b"])("FR-fr",ca);var ua=la,da=(s("efff"),Object(_e["a"])(ua,Ks,Zs,!1,null,"6857c3d2",null)),pa=da.exports,ma=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fit",class:{"bg-black":"locate-marker"===e.step.type||"sensor"===e.step.id,loaded:e.pageReady},attrs:{id:"play-view"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"image-over-flow"!==e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type,expression:"step.type !== 'image-over-flow' && step.type !== 'locate-item-ar' && step.type !== 'locate-marker'"}],staticClass:"step-background",class:{"effect-kenburns":e.step.options&&e.step.options.kenBurnsEffect,"effect-blur":e.step.options&&e.step.options.blurEffect},attrs:{id:"background-image"}}),e.showNonHybridQRReader?s("div",[s("q-toolbar",{staticClass:"text-white"},[s("q-toolbar-title",[e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeQRCodeReader}})],1),s("qrcode-stream",{on:{decode:e.checkAnswer}})],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{class:e.controlsAreDisplayed?"fadeIn":"hidden",style:"color: "+e.customization.fontColor},[e.timer&&e.timer.remaining>0?s("div",[e.isIOs?e._e():s("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:e.timer.remaining,color:e.timer.remaining<.1?"negative":e.timer.remaining<.25?"warning":"positive"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(e.timer.remainingMinutes,10)+" "+e.$t("label.minutes")}})],1)]),e.isIOs?s("div",{staticClass:"bg-positive text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},staticStyle:{height:"25px",position:"relative"}},[s("strong",[e._v(e._s(parseInt(e.timer.remainingMinutes,10)+" "+e.$t("label.minutes")))])]):e._e()],1):e._e(),null!==e.step.countDownTime&&void 0!==e.step.countDownTime&&!0===e.step.countDownTime.enabled&&this.countdowntimeleft>0?s("div",[e.isIOs?e._e():s("q-linear-progress",{class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},attrs:{size:"25px",value:e.map(this.countdowntimeleft,0,this.step.countDownTime.time,0,1),color:"positive"}},[s("div",{staticClass:"absolute-full flex flex-center"},[s("q-badge",{attrs:{color:"white","text-color":"black",label:parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")}})],1)]),e.isIOs?s("div",{staticClass:"bg-positive text-white centered",class:{"with-camera-stream":"locate-marker"===e.step.type||"locate-item-ar"===e.step.type},staticStyle:{height:"25px",position:"relative"}},[s("strong",[e._v(e._s(parseInt(this.countdowntimeleft,10)+" "+e.$t("label.secondes")))])]):e._e()],1):e._e(),e.geolocation.lowCompassAccuracy||e.geolocation.lowGpsAccuracy?s("q-page-sticky",{staticStyle:{"z-index":"15000"},attrs:{position:"top-right",offset:[18,18]}},[s("q-btn",{staticClass:"flashing",staticStyle:{"font-size":"15px"},attrs:{color:"primary",round:"",icon:"location_off"}},[e.geolocation.persistentLowAccuracy?e._e():s("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.WarningLowGpsAccuracy")))]),e.geolocation.persistentLowAccuracy?s("q-tooltip",{staticClass:"primary",staticStyle:{"font-size":"16px"},attrs:{offset:[10,10]}},[e._v(e._s(e.$t("label.PersistentLowGpsAccuracyPleaseSkipStep")))]):e._e()],1)],1):e._e(),e.audio&&""!==e.audio?s("audio",{attrs:{id:"step-music",autoplay:"",src:e.audio}}):e._e(),e.isNetworkLow?s("div",{staticClass:"bg-accent text-white q-pa-md"},[e._v(e._s(e.$t("label.WarningLowNetwork")))]):e._e(),"info-text"==e.step.type||"info-video"==e.step.type||"help"==e.step.type?s("div",{staticClass:"info"},[e.showTools&&""!=e.getTranslatedText()?s("div",{class:{grow:!e.step.videoStream},attrs:{id:"info-clickable"}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"help"===e.step.type||"info-video"===e.step.type||e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1),e.step.videoStream?s("div",{staticClass:"video"},[s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload",autoplay:""}},[s("source",{attrs:{src:e.step.videoStream&&-1!==e.step.videoStream.indexOf("blob:")?e.step.videoStream:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/video/"+e.step.videoStream,type:"video/mp4"}})])]):e._e()]):e._e(),"help"==e.step.type?s("div",{class:"font-"+e.customization.font,staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessage"))}}),e.step.options&&e.step.options.helpNext?s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageNextMessage"))}}):e._e(),e.step.options&&e.step.options.helpPrevious?s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessagePreviousMessage"))}}):e._e(),e.step.options&&e.step.options.helpInventory?s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageInventoryMessage"))}}):e._e(),e.step.options&&e.step.options.helpHint?s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageHintMessage"))}}):e._e(),s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.$t("label.HelpStepMessageEnd"))}})]):e._e(),"new-item"==e.step.type?s("div",{staticClass:"new-item"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"item"},[s("img",{staticStyle:{width:"80%"},attrs:{src:e.step.options.picture.indexOf("statics/")>-1||-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.step.options.picture}}),s("p",[s("span",[e._v(e._s(e.step.options.title))])])])]):e._e(),"end-chapter"==e.step.type?s("div",{staticClass:"end-of-chapter"},[e._v("\n      "+e._s(e.$t("label.ThisStepIsNotShowToPlayers"))+"\n    ")]):e._e(),"character"==e.step.type?s("div",{staticClass:"character"},[s("div",{staticClass:"fixed-bottom-character story",on:{click:function(t){return e.nextCharacterBubbleText()}}},[e._m(0),s("div",{staticClass:"bubble-middle",staticStyle:{"font-size":"0.9em",background:"url(statics/icons/story/sticker-middle.png) repeat-y"}},[e.character.needToScroll?s("div",{staticClass:"scroll-indicator"},[s("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),!(e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber])||e.step.options&&e.step.options.html?e._e():s("p",{ref:"bubbleText",staticClass:"carrier-return small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"}},[e._v(e._s(e.character.bubbleText[e.character.bubbleNumber]))]),e.character.bubbleText.length>0&&""!=e.character.bubbleText[e.character.bubbleNumber]&&e.step.options&&e.step.options.html?s("p",{ref:"bubbleTextHtml",staticClass:"text small-margin",class:"font-"+e.customization.font,staticStyle:{"text-align":"left"},domProps:{innerHTML:e._s(e.character.bubbleText[e.character.bubbleNumber])}}):e._e(),e.character.bubbleNumber<e.character.numberOfBubble-1?s("p",{staticClass:"text-grey small-margin"},[e._v(e._s(e.$t("label.ReadNext")))]):e._e()]),e._m(1),s("div",{staticClass:"character"},[e.step.options.character.length<3?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:"statics/icons/story/character"+e.step.options.character+"_attitude1.png"}}):e._e(),e.step.options.character.length>2&&"usequestcharacter"!==e.step.options.character?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:-1!==e.step.options.character.indexOf("blob:")?e.step.options.character:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/character/"+e.step.options.character}}):e._e(),"usequestcharacter"===e.step.options.character?s("img",{staticStyle:{"vertical-align":"bottom"},attrs:{src:-1===e.customization.character.indexOf("blob:")?e.serverUrl+"/upload/quest/"+e.customization.character:e.customization.character}}):e._e()]),s("div",{staticClass:"full-width",class:e.customization&&e.customization.characterBarColor?"":"bg-black",style:"height: 76px; "+(e.customization&&e.customization.characterBarColor&&""!==e.customization.characterBarColor?"background-color: "+e.customization.characterBarColor:"")})])]):e._e(),"choose"==e.step.type?s("div",{staticClass:"choose",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[e.showTools?s("div",[s("div",{on:{click:e.hideControlsTemporaly}},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),"text"===e.answerType?s("div",{staticClass:"answers-text"},e._l(e.step.options.items,(function(t,a){return s("q-btn",{key:a,staticClass:"full-width shadowed",class:t.class,attrs:{icon:t.icon,disabled:null!==e.playerResult,"test-id":"answer-text-"+a},on:{click:function(t){return e.checkAnswer(a)}}},[t.textLanguage&&t.textLanguage[e.lang]?e._e():s("span",{class:"font-"+e.customization.font},[e._v(e._s(t.text))]),t.textLanguage&&t.textLanguage[e.lang]?s("span",{class:"font-"+e.customization.font},[e._v(e._s(t.textLanguage[e.lang]))]):e._e()])})),1):e._e(),"image"===e.answerType?s("div",{staticClass:"answers-images"},[s("div",{staticClass:"images-block"},e._l(e.step.options.items,(function(t,a){return s("div",{key:a,class:t.class,attrs:{"test-id":"answer-image-"+a},on:{click:function(t){return e.checkAnswer(a)}}},[s("img",{class:t.class,attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/choose-image/"+t.imagePath}}),null!==t.class?s("q-btn",{class:t.class,attrs:{round:"",icon:t.icon,disable:""}}):e._e()],1)})),0)]):e._e(),e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-keypad"==e.step.type?s("div",{staticClass:"code"},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"typed-code"},[s("table",{staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult}},[s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,class:{typed:""!==t}},[e._v(e._s(""==t?"?":t))])})),0)]),e.rightAnswer?s("table",{staticClass:"shadow-8 right"},[s("tr",e._l(e.rightAnswer,(function(t,a){return s("td",{key:a,staticClass:"typed"},[e._v(e._s(t))])})),0)]):e._e()]),s("div",{staticClass:"keypad"},[s("div",{staticClass:"keypadLine"},e._l(e.keypad,(function(t,a){return s("div",{key:a},e._l(t,(function(t,a){return s("q-btn",{key:a,attrs:{color:"grey",glossy:"",disable:null!==e.playerResult,"test-id":"btn-keypad-"+t},on:{click:function(s){return e.addCodeChar(t)}}},[e._v(e._s(t))])})),1)})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mb-md q-px-md"},[s("div",[s("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"clear",disable:""===e.playerCode[0]},on:{click:function(t){return e.clearLastCodeChar()}}},[s("div",[e._v("\n                "+e._s(e.$t("label.Clear"))+"\n              ")])]),s("q-btn",{staticClass:"glossy small-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done",disable:""===e.playerCode[e.step.answers.length-1],"test-id":"btn-check-keypad-answer"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v("\n                "+e._s(e.$t("label.Confirm"))+"\n              ")])])],1)]),e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-color"==e.step.type?s("div",{staticClass:"code code-color"},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"color-bubbles",staticStyle:{"margin-top":"5rem"}},e._l(e.playerCode,(function(t,a){return s("div",{key:a,staticClass:"shadow-8",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},style:"background-color: "+e.playerCode[a],attrs:{"test-id":"color-code-"+a},on:{click:function(t){return e.changeColorForCode(a)}}},[e._v(" ")])})),0),e.rightAnswer?s("div",{staticClass:"color-bubbles"},e._l(e.rightAnswer,(function(t,a){return s("div",{key:a,staticClass:"shadow-8 right",style:"background-color: "+t},[e._v(" ")])})),0):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-color-code"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"code-image"==e.step.type?s("div",{staticClass:"code code-image"},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("table",[s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,staticClass:"text-center"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_up","test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}})],1)})),0),s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a},[e.step.options.images[t]?s("img",{attrs:{id:"image-code-"+a,src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath},on:{click:function(t){return e.enlargeThePicture(a)}}}):e._e()])})),0),s("tr",{directives:[{name:"show",rawName:"v-show",value:e.rightAnswer,expression:"rightAnswer"}]},e._l(e.rightAnswer,(function(t,a){return s("td",{key:a,staticClass:"right"},[e.step.options.images[t]?s("img",{attrs:{src:-1!==e.step.options.images[t].imagePath.indexOf("blob:")?e.step.options.images[t].imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/code-image/"+e.step.options.images[t].imagePath}}):e._e()])})),0),s("tr",e._l(e.playerCode,(function(t,a){return s("td",{key:a,staticClass:"text-center"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{disabled:e.stepPlayed,color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",round:"",icon:"keyboard_arrow_down","test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}})],1)})),0)]),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:""}},[e._v(e._s(e.$t("label.ClickToEnlargePictures")))])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-lg q-mx-md"},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done","test-id":"btn-check-image-code"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)]),e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"geolocation"==e.step.type?s("div",{staticClass:"geolocation"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.step.showDistanceToTarget?s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.GPSdistance)})))]):e._e()]),s("geolocationStepMap",{directives:[{name:"show",rawName:"v-show",value:"map"===e.geolocation.mode&&null===e.playerResult,expression:"geolocation.mode === 'map' && playerResult === null"}],staticClass:"geolocation-step-map",class:"font-"+e.customization.font,attrs:{"target-position":e.geolocation.destinationPosition,"player-position":e.geolocation.playerPosition}}),e.step.options.switchmode?s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{id:"mode-switch",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:e.getGeolocationStepSwitchButtonIcon(),round:"",size:"lg"},on:{click:function(t){return e.switchModeForGeolocationStep()}}}):e._e()],1):e._e(),"gpssensor"==e.step.id?s("div",{staticClass:"background-map full-width full-height q-pa-md centered"},[e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?s("div",[e._v(e._s(e.customization.geolocationMessage[e.lang]))]):e._e(),e.customization.geolocationMessage&&""!==e.customization.geolocationMessage&&e.lang?e._e():s("div",[e._v(e._s(e.$t("label.FindAllLocationsToStartSteps")))]),s("div",{staticClass:"q-mt-xl centered"},[s("q-spinner-orbit",{attrs:{color:e.geolocation.colorIndicator,size:"50vw"}})],1),e._v("\n      "+e._s(e.$t("label.ColorIndicatorExplaination",{distance:e.geolocation.closestDistance}))+"\n    ")]):e._e(),"write-text"==e.step.type?s("div",{staticClass:"write-text"},[e.showTools?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"answer-text q-pa-md"},[s("input",{staticClass:"subtitle6",class:{right:!0===e.playerResult,wrong:!1===e.playerResult},attrs:{placeholder:e.$t("label.YourAnswer"),disabled:e.stepPlayed},domProps:{value:e.writetext.playerAnswer},on:{input:function(t){e.writetext.playerAnswer=t.target.value}}}),e.rightAnswer?s("input",{staticClass:"subtitle6 right",attrs:{disabled:""},domProps:{value:e.rightAnswer}}):e._e(),s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",disabled:""===e.writetext.playerAnswer||e.stepPlayed,"test-id":"btn-check-text-answer"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.ConfirmTheAnswer")))])])],1),e.step.options.hideHideButton?e._e():s("div",{staticClass:"centered",staticStyle:{"padding-bottom":"100px"}},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_less",label:e.$t("label.Hide")},on:{click:function(t){e.showTools=!1}}})],1)]):e._e(),e.showTools?e._e():s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"no-box-shadow hide-button text-black",attrs:{flat:"",icon:"expand_more",label:e.$t("label.Show")},on:{click:function(t){e.showTools=!0}}})],1)]):e._e(),"jigsaw-puzzle"===e.step.type?s("div",{staticClass:"puzzle"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{attrs:{id:"pieces"}},e._l(e.puzzle.pieces,(function(t){return s("div",{key:t.pos,class:t.classes,style:"background-image: url("+e.puzzle.picture+"); background-size: "+t.backSize+"% "+t.backSize+"%;background-position: -"+t.backXPos+" -"+t.backYPos+";",attrs:{draggable:"true",id:"piece-"+t.pos},on:{dragstart:function(t){return e.handleDragStart(t)},dragover:function(t){return e.handleDragOver(t)},drop:function(t){return e.handleDrop(t)},dragend:function(t){return e.handleDragEnd(t)},click:function(s){return e.movePieceWithClick(t.pos)}}},[s("header",{style:"width: "+t.width+"px;height: "+t.height+"px;"})])})),0),s("img",{staticStyle:{display:"none"},attrs:{src:e.puzzle.picture}}),s("div",{staticClass:"q-mt-lg background-lighter4 q-pa-md"},[e.puzzle&&"drag"===e.puzzle.mode?s("div",{staticClass:"centered arial"},[e._v("\n          "+e._s(e.$t("label.PuzzleHelpText"))+"\n        ")]):e._e(),"click"===e.puzzle.mode?s("div",{staticClass:"centered text-primary q-pt-lg arial"},[e._v("\n          "+e._s(e.$t("label.PuzzleHelpTextClick"))+"\n        ")]):e._e(),e.puzzle&&"drag"===e.puzzle.mode?s("div",{staticClass:"centeredq-pt-sm"},[s("a",{staticClass:"text-black",on:{click:function(t){return e.changePuzzleMode()}}},[e._v(e._s(e.$t("label.PuzzleChangeMode")))])]):e._e()])]):e._e(),"memory"===e.step.type?s("div",{staticClass:"puzzle"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"row memory",attrs:{id:"card-deck"}},e._l(e.memory.items,(function(t,a){return s("div",{key:a,staticClass:"col-3 q-pa-sm"},[s("div",{staticClass:"card",class:{open:t.isClicked,closed:!t.isClicked,disabled:t.isFound||e.stepPlayed},on:{click:function(t){return e.selectMemoryCard(a)}}},[t.imagePath?s("img",{staticStyle:{display:"block",position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"},attrs:{src:-1!==t.imagePath.indexOf("blob:")?t.imagePath:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/memory/"+t.imagePath}}):e._e()])])})),0)]):e._e(),"portrait-robot"===e.step.type?s("div",{staticClass:"portrait-robot",staticStyle:{overflow:"auto","margin-bottom":"80px"}},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"relative-position"},[s("div",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/face-"+e.portrait.face.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-"+e.portrait.eye.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-"+e.portrait.mouth.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-"+e.portrait.nose.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-"+e.portrait.hair.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-"+e.portrait.beard.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-"+e.portrait.glass.position+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-"+e.portrait.hat.position+".png"}})])]),s("table",{staticClass:"portrait-parts relative-position"},[s("tr",[s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/face-0.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/eye-0.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/mouth-0.png"},on:{click:function(t){return e.changePortraitPart("mouth")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/nose-0.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hair-0.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/beard-0.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/glass-0.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),s("td",[s("img",{attrs:{src:"statics/"+e.portrait.type+"/hat-0.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}],staticClass:"actions q-mt-sm q-mx-md",staticStyle:{"padding-bottom":"100px"}},[s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary",icon:"done"},on:{click:function(t){return e.checkAnswer()}}},[s("div",[e._v(e._s(e.$t("label.Confirm")))])])],1)])]):e._e(),"binocular"===e.step.type?s("div",{staticClass:"binocular"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"relative-position"},[s("div",{staticStyle:{width:"100%",height:"100vw","overflow-x":"scroll","overflow-y":"scroll"}},[s("img",{staticStyle:{width:"400%"},attrs:{src:e.getBackgroundImage()}})]),e._m(2)])]):e._e(),"phone-call"===e.step.type?s("div",{staticClass:"phone-call fit"},[s("div",{staticClass:"fit bg-black"},[s("div",{staticClass:"q-pb-xxl"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{staticClass:"fixed-bottom q-pb-xxl q-pl-xl q-pr-xl"},[s("q-btn",{attrs:{round:"",color:"positive",icon:"call"},on:{click:function(t){return e.phoneCall()}}}),s("q-btn",{staticClass:"float-right",attrs:{round:"",color:"negative",icon:"call_end"},on:{click:function(t){return e.cancelPhoneCall()}}})],1)])]):e._e(),"use-item"==e.step.type?s("div",{staticClass:"use-item"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.useItem.imageHeight+"px;",attrs:{"test-id":"use-item-picture"},on:{click:function(t){return e.checkUseItem(t)}}},[s("img",{style:"position: relative; z-index: 500; width: "+e.useItem.crossSize+"px; height: "+e.useItem.crossSize+"px; display: none;",attrs:{id:"cross-play",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"use-item"==e.step.type&&e.nbTry<2&&null===e.playerResult&&null!==e.itemUsed?s("p",{staticClass:"inventory-btn"},[s("q-btn",{style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"}},[s("q-avatar",[e.itemUsed&&e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?s("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}}):e._e(),!e.itemUsed||e.itemUsed.pictures&&e.itemUsed.pictures[e.lang]&&""!==e.itemUsed.pictures[e.lang]?e._e():s("img",{attrs:{src:e.itemUsed.picture.indexOf("statics/")>-1||-1!==e.itemUsed.picture.indexOf("blob:")?e.itemUsed.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/new-item/"+e.itemUsed.picture}})])],1),e._v("\n      "+e._s(e.$t("label.TouchWhereYouUseThisItem"))+"\n    ")],1):e._e(),"find-item"==e.step.type?s("div",{staticClass:"find-item"},[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),s("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.findItem.imageHeight+"px;",attrs:{"test-id":"find-item-picture"},on:{click:function(t){return e.checkFindItem(t)}}},[s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play0",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play1",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play2",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play3",src:"statics/icons/game/find-item-locator.png"}}),s("img",{style:"position: absolute; z-index: 500; width: "+e.findItem.crossSize+"px; height: "+e.findItem.crossSize+"px; display: none;",attrs:{id:"cross-play4",src:"statics/icons/game/find-item-locator.png"}})])]):e._e(),"locate-item-ar"==e.step.type?s("div",{staticClass:"locate-item-ar"},[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult&&(e.geolocation.active||e.isIOs),expression:"cameraStreamEnabled && playerResult === null && (geolocation.active || isIOs)"}],ref:"camera-stream-for-locate-item-ar"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult&&(this.geolocation.active||e.isIOs),expression:"playerResult === null && (this.geolocation.active || isIOs)"}]},[s("div",{staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():s("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?s("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),e.step.showDistanceToTarget&&!e.geolocation.canSeeTarget&&(e.geolocation.active||e.isIOs)?s("p",[e._v(e._s(e.$t("label.DistanceInMeters",{distance:Math.round(e.geolocation.GPSdistance)})))]):e._e(),e.geolocation.canSeeTarget||!e.geolocation.active&&!e.isIOs?e._e():s("p",[e._v(e._s(e.$t("label.ObjectIsTooFar")))]),e.geolocation.canTouchTarget&&(e.geolocation.active||e.isIOs)?s("p",{staticStyle:{color:"#f00"}},[e._v(e._s(e.$t("label.TouchTheObject")))]):e._e(),e.geolocation.canSeeTarget&&!e.geolocation.canTouchTarget&&(e.geolocation.active||e.isIOs)?s("p",[e._v(e._s(e.$t("label.MoveCloserToTheObject")))]):e._e()])]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult||null!==e.playerResult&&e.step.options&&e.step.options.is3D,expression:"(playerResult === null) || (playerResult !== null && step.options && step.options.is3D)"}],staticClass:"target-view"},[s("canvas",{directives:[{name:"touch-pan",rawName:"v-touch-pan",value:e.handlePanOnTargetCanvas,expression:"handlePanOnTargetCanvas"}],attrs:{id:"target-canvas"},on:{click:e.onTargetCanvasClick}})]),s("div",{staticStyle:{width:"100%","text-align":"center"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.playerResult&&e.step.options&&!e.step.options.is3D,expression:"playerResult && step.options && !step.options.is3D"}],ref:"item-image"})])],1):e._e(),"image-over-flow"==e.step.type?s("div",{staticClass:"image-over-flow"},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled,expression:"cameraStreamEnabled"}],ref:"camera-stream-for-image-over-flow"}),s("div",[e.isHybrid&&!e.takingSnapshot?s("div",{staticStyle:{position:"absolute",top:"8px",right:"8px","z-index":"1990"}},[s("q-btn",{staticClass:"text-white q-mr-md",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"flip_camera_ios"},on:{click:function(t){return e.switchCamera()}}}),e.step.options&&e.step.options.snapshotAllowed?s("q-btn",{staticClass:"text-white",class:{"bg-primary":!e.customization||!e.customization.color||""===e.customization.color},style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{round:"",size:"lg",icon:"photo_camera"},on:{click:function(t){return e.prepareSnapshot()}}}):e._e()],1):e._e(),!e.isIOs&&e.takingSnapshot?s("img",{staticStyle:{position:"absolute",top:"0",left:"0",height:"100%",width:"auto","z-index":"1980"},attrs:{id:"snapshotImage"}}):e._e(),e.isIOs&&e.takingSnapshot?s("img",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"1980"},attrs:{id:"snapshotImageIos"}}):e._e(),s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()]),e.step.options&&(e.step.options.fullWidthPicture||e.step.options.redFilter)?e._e():s("div",{ref:"ImageOverFlowPicture",staticClass:"image",style:"overflow: hidden; background-image: url("+e.getBackgroundImage()+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100vw; height: 133vw; z-index: 1985;"}),e.step.options&&e.step.options.fullWidthPicture&&!e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985"},attrs:{src:e.getBackgroundImage()}}):e._e(),e.step.options&&!e.step.options.fullWidthPicture&&e.step.options.fullHeightPicture&&!e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"50%",bottom:"0",height:"100%",width:"auto","z-index":"1985",left:"50%","-webkit-transform":"translateY(-50%) translateX(-50%)"},attrs:{src:e.getBackgroundImage()}}):e._e(),e.isIOs&&""===e.imageOverFlow.snapshot&&e.step.options&&e.step.options.redFilter?s("div",{staticClass:"centered",staticStyle:{background:"transparent",position:"absolute",bottom:"200px",width:"100%","z-index":"1980"}},[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.takeVideoSnapShot()}}},[e._v(e._s(e.$t("label.ApplyRedFilter")))])],1):e._e(),e.isIOs&&""!==e.imageOverFlow.snapshot?s("img",{staticStyle:{"object-fit":"cover",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1980"},attrs:{src:e.imageOverFlow.snapshot}}):e._e(),(e.isIOs&&""!==e.imageOverFlow.snapshot||!e.isIOs)&&e.step.options&&e.step.options.redFilter?s("img",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",width:"100%",height:"100%","z-index":"1985","mix-blend-mode":"multiply",opacity:"0.8"},attrs:{src:"statics/images/background/red.png"}}):e._e()])]):e._e(),"locate-marker"==e.step.type||"sensor"==e.step.id?s("div",{staticClass:"locate-marker"},[s("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("video",{directives:[{name:"show",rawName:"v-show",value:e.cameraStreamEnabled&&null===e.playerResult,expression:"cameraStreamEnabled && playerResult === null"}],ref:"camera-stream-for-locate-marker",attrs:{"webkit-playsinline":"",playsinline:"",src:"",autoplay:""}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:null===e.playerResult,expression:"playerResult === null"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.getTranslatedText(),expression:"getTranslatedText() != ''"}],staticClass:"text",class:"font-"+e.customization.font},[e.step.options&&e.step.options.html?e._e():s("p",[e._v(e._s(e.getTranslatedText()))]),e.step.options&&e.step.options.html?s("p",{domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e()])]),null===e.playerResult?s("div",{staticClass:"text-white centered q-mt-md"},[e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?s("div",[e._v(e._s(e.customization.qrCodeMessage[e.lang]))]):e._e(),e.customization.qrCodeMessage&&""!==e.customization.qrCodeMessage&&e.lang?e._e():s("div",[e._v(e._s(e.$t("label.ScanTheMarkersLikeThat")))]),e._m(3),e._v("\n        "+e._s(e.$t("label.ScanTheMarkersLikeThat2"))+"\n        "),s("div",[s("q-btn",{staticClass:"glossy large-button",style:!e.customization||e.customization.color&&"primary"!==e.customization.color?"background-color: "+e.customization.color:"",attrs:{color:!e.customization||e.customization.color&&"primary"!==e.customization.color?"":"primary"},on:{click:function(t){return e.startScanQRCode()}}},[s("div",[e._v(e._s(e.$t("label.LaunchTheScanner")))])])],1)]):e._e(),s("div",{staticClass:"text-center"},[e.playerResult&&e.step.options&&"scan"==e.step.options.mode?s("img",{staticClass:"locate-marker-answer",attrs:{src:"statics/markers/"+e.locateMarker.playerAnswer+"/marker.png"}}):e._e()]),e.locateMarker.showHelp?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font,staticStyle:{height:"100%"}},[s("story",{attrs:{step:"help",data:{help:"locate-marker"==e.step.type&&e.step.options&&"scan"===e.step.options.mode?"FindMarkerHelp":"TouchObjectOnMarkerHelp"}},on:{next:function(t){e.locateMarker.showHelp=!1}}})],1):e._e()],1):e._e(),"wait-for-event"==e.step.type?s("div",[s("div",[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"distance"===e.step.options.object&&null!==e.iot.distance?s("h2",{staticClass:"centered big q-pb-lg",class:{right:!0===e.playerResult}},[e._v("\n          "+e._s(e.iot.distance)+" cm\n        ")]):e._e(),"pot"===e.step.options.object&&null!==e.iot["pot1"]?s("div",e._l([1,2,3],(function(t){return s("q-linear-progress",{key:t,staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["pot"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})})),1):e._e(),"keypad"===e.step.options.object?s("div",[s("p",[e._v(e._s(e.$t("label.KeypadInput")))]),s("p",{ref:"iot-keypad",staticClass:"iot-keypad",class:{right:!0===e.playerResult,wrong:!1===e.playerResult,shake:!1===e.playerResult}},[e._v(e._s(e.iot.keypadAnswer))])]):e._e(),"joystick"===e.step.options.object&&null!==e.iot["axisX"]?s("div",e._l(["X","Y"],(function(t){return s("div",{key:t},[s("p",[e._v(e._s("X"===t?e.$t("label.Horizontal"):e.$t("label.Vertical")))]),s("q-linear-progress",{staticClass:"q-pa-md q-my-md",attrs:{value:e.iot["axis"+t],stripe:"",rounded:"",color:!0===e.playerResult?"positive":"primary"}})],1)})),0):e._e(),"button"===e.step.options.object&&!0===e.playerResult?s("div",[s("p",{staticClass:"right q-pb-md q-px-md q-my-md"},[e._v(e._s(this.step.options.message))])]):e._e()])]):e._e(),"trigger-event"==e.step.type?s("div",{staticClass:"trigger-event"},[""==e.getTranslatedText()||e.step.options&&e.step.options.html?e._e():s("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.getTranslatedText()))]),""!=e.getTranslatedText()&&e.step.options&&e.step.options.html?s("p",{staticClass:"text",class:"font-"+e.customization.font,staticStyle:{"flex-grow":"1"},domProps:{innerHTML:e._s(e.getTranslatedText())}}):e._e(),"chest"!==e.step.options.object||"relay"===e.step.options.object?s("div",[e.step.options.triggerMode&&"manual"===e.step.options.triggerMode?s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.TriggerTheEvent"),size:"xl",disable:null===e.bluetooth.deviceId},on:{click:function(t){return e.triggerIotEvent()}}}):e._e()],1):e._e(),"chest"===e.step.options.object?s("div",[s("p",[e._v(e._s(e.$t("label.ChestActions")))]),s("div",{staticStyle:{display:"flex"}},[s("q-btn",{staticStyle:{"flex-grow":"1","margin-right":"1rem"},attrs:{color:"primary",label:e.$t("label.Open"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("open")}}}),s("q-btn",{staticStyle:{"flex-grow":"1"},attrs:{color:"primary",label:e.$t("label.Close"),size:"xl",disable:null===e.bluetooth.deviceId||e.iot.chest.disableActionButtons||e.iot.relay.disableActionButtons},on:{click:function(t){return e.triggerIotEvent("close")}}})],1)]):e._e(),"bluetooth"===e.step.options.protocol&&null===e.bluetooth.deviceId?s("p",[e._v(e._s(e.$t("label.SearchingBluetoothDevice")))]):e._e()]):e._e(),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"waiting"==e.step.id,expression:"step.id == 'waiting'"}],staticClass:"panel-bottom background-dark"},[s("div",{staticClass:"centered q-pa-lg title4 text-primary"},[s("div",{staticClass:"q-pa-lg text-uppercase",class:"font-"+e.customization.font},[e._v(e._s(e.$t("label.WaitingForOtherUsersActions")))]),s("img",{staticClass:"full-width q-mb-lg",attrs:{src:"statics/images/animation/map.gif"}})]),s("div",[s("div",{staticClass:"q-pa-lg centered"},[e._v("\n            "+e._s(e.$t("label.WaitingForOtherUsersActionsDesc"))+"\n          ")])])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:("geolocation"==e.step.type&&"compass"===e.geolocation.mode||"locate-item-ar"==e.step.type)&&e.step.showDirectionToTarget&&null===e.playerResult&&(e.geolocation.active||e.isIOs),expression:"((step.type == 'geolocation' && geolocation.mode === 'compass') || step.type == 'locate-item-ar') && step.showDirectionToTarget && playerResult === null && (geolocation.active || isIOs)"}],staticClass:"direction-helper"},[s("canvas",{style:{width:e.directionHelperSize+"rem",height:e.directionHelperSize+"rem"},attrs:{id:"direction-canvas"}})]),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.displaySuccessIcon,expression:"playerResult === true && displaySuccessIcon"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[s("q-icon",{attrs:{color:"white",name:"thumb_up"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.geolocation.foundStep,expression:"geolocation.foundStep"}],staticClass:"fadein-message",staticStyle:{"padding-left":"40%"}},[s("q-icon",{attrs:{color:"white",name:"check_box"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.playerResult&&e.reward>0,expression:"playerResult === true && reward > 0"}],staticClass:"fadein-message"},[e._v("+"+e._s(e.reward)+" "),s("q-icon",{attrs:{color:"white",name:"fas fa-bolt"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:60===this.countdowntimeleft||30===this.countdowntimeleft||15===this.countdowntimeleft||10===this.countdowntimeleft||5===this.countdowntimeleft,expression:"\n      this.countdowntimeleft === 60 ||\n      this.countdowntimeleft === 30 || \n      this.countdowntimeleft === 15 || \n      this.countdowntimeleft === 10 || \n      this.countdowntimeleft === 5 \n      "}],staticClass:"fadein-message text-center"},[s("div",{staticStyle:{"font-size":"0.6em"}},[e._v(e._s(e.$t("label.ItRemains")))]),e._v("\n      "+e._s(this.countdowntimeleft)+" "+e._s(e.$t("label.s"))+"\n  ")]),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"fixed-bottom over-map"},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e(),s("q-dialog",{model:{value:e.enlargePicture.show,callback:function(t){e.$set(e.enlargePicture,"show",t)},expression:"enlargePicture.show"}},[s("div",{staticClass:"bg-white centered q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.enlargePicture.url}}),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.enlargePicture.show=!1}}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)]),s("gpscalibration",{ref:"gpscal"}),s("holdphonevertically",{attrs:{show:e.geolocation.showARHelp}})],1)},ha=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-top"},[s("img",{attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-bottom"},[s("img",{attrs:{src:"statics/icons/story/sticker-bottom.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"absolute no-mouse-event",staticStyle:{top:"0px",width:"100%"}},[s("img",{staticClass:"no-mouse-event",staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/binoculars.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-mt-md"},[s("img",{staticStyle:{width:"50%"},attrs:{src:"statics/markers/020/marker_full.png"}})])}],fa=(s("6c7b"),s("5df3"),s("1c4c"),s("f576"),s("14b9"),s("bc78")),ga={storeTimeLeft:function(e,t,s){var a={runid:e,stepid:t,timeleft:s};a=JSON.stringify(a),localStorage.setItem("timer-"+e+"-"+t,a)},allStorage:function(){for(var e=[],t=0,s=localStorage.length;t<s;t++){var a=localStorage.key(t),r=localStorage[a];if(a.includes("timer-")){var n={key:a,value:r};e.push(n)}}return e},getTimeLeft:function(e,t){var s=this.allStorage(),a=!0,r=!1,n=void 0;try{for(var o,i=s[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var l=o.value,c=JSON.parse(l.value);if(c.runid===e&&c.stepid===t)return c.timeleft<0&&(c.timeleft=0),c.timeleft}}catch(u){r=!0,n=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return null},clearStoredTimers:function(){var e=this.allStorage();e.forEach((function(e){localStorage.removeItem(e.key)}))}},ba=s("22ae"),va=s("3ba6"),wa=s("2f04"),ya=s("e08c"),qa=s("025e"),ka=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{model:{value:e.showPhoneAnimation,callback:function(t){e.showPhoneAnimation=t},expression:"showPhoneAnimation"}},[s("div",{staticClass:"bg-black centered q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/take-mobile-vertically.gif"}}),s("span",{staticClass:"text-white"},[e._v(e._s(e.$t("label.TakeMobileVertically")))])])])},xa=[],Ca={props:["show"],watch:{show:function(){var e=o()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:!0!==t&&"true"!==t||(nt.setTimeout(this.closeHandleMobileVertically,5e3),this.showPhoneAnimation=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{showPhoneAnimation:!1}},methods:{closeHandleMobileVertically:function(){this.showPhoneAnimation=!1}}},Sa=Ca,_a=Object(_e["a"])(Sa,ka,xa,!1,null,null,null),Ta=_a.exports,Pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!==e.currentStep.id&&e.steps[e.currentStep.id]?s("div",{staticClass:"story fit reduce-window-size-desktop",class:{fadeout:e.hide},staticStyle:{background:"rgba(0,0,0,0.5)",height:"100%"},on:{click:e.closeBubble}},[s("div",{staticClass:"fixed-story",style:"position: fixed; z-index: 10000; width: 100%; bottom: "+(e.steps&&e.steps[e.currentStep.id]?e.steps[e.currentStep.id].bottom:0)+"px;"},[e._m(0),s("div",{staticClass:"bubble-middle",staticStyle:{background:"url(statics/icons/story/sticker-middle.png) repeat-y","min-height":"10vh"}},[e.needToScroll?s("div",{staticClass:"scroll-indicator"},[s("q-icon",{staticClass:"flashing",attrs:{size:"2.5em",name:"arrow_drop_down_circle"}})],1):e._e(),s("p",{ref:"bubbleText",staticClass:"tilt",domProps:{innerHTML:e._s(e.$t("story."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].text,e.data))}}),s("div",{staticClass:"text-right font-standard"},[e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link?s("a",{on:{click:e.linkAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.label))+"\n        ")]):e._e(),e._v("  \n        "),e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button2")?s("q-btn",{on:{click:e.buttonAction}},[e._v("\n          "+e._s(e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.label))+"\n        ")]):e._e(),e._v("  \n        "),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.next}},[s("div",[e._v(e._s(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")?e.$t("label."+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.label):e.steps[e.currentStep.id].discussions.length-1===e.currentStep.discussionId?e.$t("label.Close"):e.$t("label.Next")+" >>"))])])],1)]),e._m(1),s("div",{staticClass:"character"},[-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")&&-1===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?s("img",{staticStyle:{"min-height":"30vh"},attrs:{src:"statics/icons/story/character"+e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character+"_attitude1.png"}}):e._e(),-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf("blob:")||-1!==e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character.indexOf(".")?s("img",{staticStyle:{"min-height":"20vh","max-height":"30vh"},attrs:{src:e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].character}}):e._e()]),e.steps[e.currentStep.id].allowSkip?s("div",{staticClass:"fixed-bottom-left q-pa-md font-standard"},[s("a",{staticClass:"text-white",on:{click:e.skipTutorial}},[e._v(e._s(e.$t("label.SkipTutorial")))])]):e._e()])]):e._e()},Ia=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-top"},[s("img",{staticStyle:{"min-height":"5vh"},attrs:{src:"statics/icons/story/sticker-top.png"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bubble-bottom"},[s("img",{staticStyle:{"min-height":"20vh"},attrs:{src:"statics/icons/story/sticker-bottom.png"}})])}],$a={props:["step","data"],data:function(){return{steps:{hint:{discussions:[{character:this.data&&this.data.character?this.data.character:"3",text:"hint",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},help:{discussions:[{character:"2",text:this.data.help,button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},0:{discussions:[{character:"1",text:"AskIfUseTuto",condition:null,button:{label:"Yes"},button2:{label:"No",action:"closeall"}},{character:"1",text:"Welcome",condition:null},{character:"1",text:"FirstStep",condition:null},{character:"1",text:"PresentTeam",condition:null},{character:"2",text:"PresentSecretary1",condition:null},{character:"2",text:"PresentSecretary2",condition:null},{character:"3",text:"PresentIndicator1",condition:null},{character:"3",text:"PresentIndicator2",condition:null},{character:"1",text:"MapExplaination1",condition:null},{character:"1",text:"MapExplaination3",condition:null},{character:"1",text:"StartPlaying",condition:null,nextStep:3}],bottom:0,allowSkip:!0},3:{discussions:[{character:"1",text:"DiscoveryQuest1",button:{label:"letsGo",action:"/quest/play/5b7303ec4efbcd1f8cb101c6"},condition:null,nextStep:4}],bottom:0,allowSkip:!1},4:{discussions:[{character:"1",text:"DiscoveryQuest2",condition:null},{character:"1",text:"DiscoveryQuest3",condition:null},{character:"1",text:"DiscoveryQuest4",condition:null},{character:"1",text:"DiscoveryQuest5",condition:null},{character:"1",text:"DiscoveryQuest6",condition:null},{character:"1",text:"DiscoveryQuest7",condition:null,nextStep:5}],bottom:0,allowSkip:!1},5:{discussions:[{character:"1",text:"DiscoveryQuest8",condition:null},{character:"1",text:"DiscoveryQuest9",condition:null},{character:"1",text:"DiscoveryQuest10",condition:null},{character:"1",text:"DiscoveryQuest10b",condition:null,nextStep:7}],bottom:0,allowSkip:!1},6:{discussions:[{character:this.data&&this.data.character?this.data.character:"2",text:"readMore",button:{label:"OkThanks"},condition:null}],bottom:0,allowSkip:!1},7:{discussions:[{character:"1",text:"DiscoveryQuest13",condition:null,nextStep:8}],bottom:0,allowSkip:!1},8:{discussions:[{character:"1",text:"DiscoveryQuest14",condition:null},{character:"1",text:"DiscoveryQuest15",condition:null},{character:"1",text:"DiscoveryQuest16",condition:null,nextStep:10}],bottom:0,allowSkip:!1},9:{discussions:[{character:"1",text:"EndQuest1",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score>80},{character:"1",text:"EndQuest1b",condition:this.data&&this.data.hasOwnProperty("score")&&this.data.score<=0},{character:"1",text:"EndQuest2",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest3",condition:this.data&&this.data.hasOwnProperty("progress")&&this.data.progress>80},{character:"1",text:"EndQuest4",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest5",condition:this.data&&this.data.discovery},{character:"1",text:"EndQuest6",condition:null}],bottom:0,allowSkip:!1},10:{discussions:[{character:"1",text:"MapReturn",condition:null,nextStep:11}],bottom:0,allowSkip:!1},11:{discussions:[{character:"1",text:"RankingDescription1",condition:null},{character:"1",text:"RankingDescription2",condition:null},{character:"1",text:"RankingDescription3"},{character:"1",text:"RankingDescription4",condition:null,nextStep:13}],bottom:0,allowSkip:!0},12:{discussions:[{character:"2",text:"CompleteProfile1",condition:null},{character:"2",text:"CompleteProfile2",condition:null,nextStep:13}],bottom:0,allowSkip:!0},13:{discussions:[{character:"2",text:"MapDetail1",condition:null,nextStep:14}],bottom:0,allowSkip:!0},14:{discussions:[{character:"2",text:"AddFriends",condition:null,nextStep:15}],bottom:0,allowSkip:!0},15:{discussions:[{character:"1",text:"CreateQuest1",condition:null},{character:"1",text:"CreateQuest2",condition:null,nextStep:16},{character:"1",text:"CreateQuest3",condition:null,button:{label:"CreateAQuest",action:"/quest/create/welcome"},link:{label:"NoThanks"}}],bottom:0,allowSkip:!0},16:{discussions:[{character:"1",text:"StartNewQuest1",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks",action:"close"}}],bottom:0,allowSkip:!0},17:{discussions:[{character:"1",text:"BuilderLanguage1",condition:null},{character:"1",text:"BuilderLanguage2",condition:null},{character:"1",text:"BuilderLanguage3",condition:null}],bottom:0,allowSkip:!0},18:{discussions:[{character:"1",text:"BuilderConfiguration1",condition:null},{character:"1",text:"BuilderConfiguration2",condition:null},{character:"1",text:"BuilderConfiguration3",condition:null},{character:"1",text:"BuilderConfiguration4",condition:null},{character:"1",text:"BuilderConfiguration5",condition:null},{character:"1",text:"BuilderConfiguration6",condition:null}],bottom:0,allowSkip:!0},19:{discussions:[{character:"1",text:"BuilderStep1",condition:null},{character:"1",text:"BuilderStep2",condition:null},{character:"1",text:"BuilderStep3",condition:null},{character:"1",text:"BuilderStep4",condition:null},{character:"1",text:"BuilderStep5",condition:null}],bottom:0,allowSkip:!0},20:{discussions:[{character:"1",text:"BuilderStepSettings1",condition:null},{character:"1",text:"BuilderStepSettings2",condition:null}],bottom:0,allowSkip:!0},21:{discussions:[{character:"1",text:"BuilderStepOverview1",condition:null},{character:"1",text:"BuilderStepOverview2",condition:null},{character:"1",text:"BuilderStepOverview3",condition:null}],bottom:0,allowSkip:!0},22:{discussions:[{character:"1",text:"BuilderPublishing1",condition:null},{character:"1",text:"BuilderPublishing2",condition:null},{character:"1",text:"BuilderPublishing3",condition:null},{character:"1",text:"BuilderPublishing4",condition:null}],bottom:0,allowSkip:!0},23:{discussions:[{character:"1",text:"StartNewQuest1",condition:null,link:{label:"NoThanks",action:"close"}},{character:"1",text:"StartNewQuest2",condition:null!==this.data&&this.data.hasOwnProperty("questId"),button:{label:"letsGo",action:"/quest/play/"+(this.data&&this.data.hasOwnProperty("questId")?this.data.questId:"0")},link:{label:"NoThanks"}},{character:"1",text:"StartNewQuest3",condition:null}],bottom:0,allowSkip:!0}},currentStep:{id:null,discussionId:0},nextStep:0,hide:!1,needToScroll:!1,backgroundTouchCount:0}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentStep.id=e.step,e.steps[e.currentStep.id]){t.next=4;break}return e.hideStory(),t.abrupt("return");case 4:return e.currentStep.discussionId=0,e.nextStep=e.step,e.hide=!1,e.moreToValidStep(),t.next=10,e.saveStepPassed();case 10:nt.setTimeout(e.checkIfTextIsHidden,500);case 11:case"end":return t.stop()}}),t)})))()},methods:{next:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.needToScroll=!1,!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("button")||!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.hasOwnProperty("action")){t.next=6;break}e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button.action),nt.setTimeout(e.checkIfTextIsHidden,500),t.next=8;break;case 6:return t.next=8,e.closeStory();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:s=e.$refs.bubbleText.clientHeight,s>"140"&&(e.needToScroll=!0);case 4:case"end":return t.stop()}}),t)})))()},moreToValidStep:function(){if(this.steps[this.currentStep.id])while(!1===this.steps[this.currentStep.id].discussions[this.currentStep.discussionId].condition)this.currentStep.discussionId++},saveStepPassed:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].hasOwnProperty("nextStep")){t.next=5;break}return e.nextStep=e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].nextStep,e.$store.state.user.story.step=e.nextStep,t.next=5,it.nextStoryStep(e.nextStep);case 5:case"end":return t.stop()}}),t)})))()},skipTutorial:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,e.$q.dialog({title:e.$t("label.SkipTutorial"),message:e.$t("label.SkipTutorialDesc"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk((function(){e.nextStep=17,it.nextStoryStep(e.nextStep),e.$store.state.user.story.step=e.nextStep,e.hideStory()})).onCancel((function(){console.log("cancel"),e.hide=!1}));case 2:case"end":return t.stop()}}),t)})))()},closeStory:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveStepPassed();case 2:e.steps[e.currentStep.id].discussions.length-1>e.currentStep.discussionId?(e.currentStep.discussionId++,e.moreToValidStep()):e.hideStory();case 3:case"end":return t.stop()}}),t)})))()},hideStory:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hide=!0,setTimeout(e.emitNext,500);case 2:case"end":return t.stop()}}),t)})))()},emitNext:function(){this.$emit("next",this.nextStep)},closeBubble:function(){6===this.currentStep.id&&this.$emit("next",this.nextStep)},linkAction:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action?e.hideStory():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].link.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},buttonAction:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.hasOwnProperty("action")){t.next=4;break}"close"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.hideStory():"closeall"===e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action?e.skipTutorial():e.$router.push(e.steps[e.currentStep.id].discussions[e.currentStep.discussionId].button2.action),t.next=6;break;case 4:return t.next=6,e.closeStory();case 6:case"end":return t.stop()}}),t)})))()},onBackgroundTouch:function(e){6===this.currentStep.id&&(this.backgroundTouchCount>0?this.hideStory():this.backgroundTouchCount++)}}},Aa=$a,Oa=Object(_e["a"])(Aa,Pa,Ia,!1,null,null,null),Ma=Oa.exports,za=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"geolocation-step-map"},[e.isMounted?s("gmap-map",{ref:"mapRef",staticClass:"map",attrs:{center:e.map.center,zoom:e.map.zoom,"map-type-id":"roadmap",options:{disableDefaultUI:!0}},on:{center_changed:function(t){return e.updateCenter(t)},dragend:function(t){return e.dragEnd(t)}}},[null!==e.position.target?s("gmap-marker",{attrs:{position:e.position.target,icon:e.getNextDestinationMapIcon()}}):e._e(),null!==e.position.player?s("gmap-marker",{attrs:{position:{lng:e.position.player.longitude,lat:e.position.player.latitude},icon:e.getUserMapIcon()}}):e._e()],1):e._e()],1)},Na=[],Fa={props:["targetPosition","playerPosition"],watch:{targetPosition:function(e,t){null!==e&&e!==t&&(this.position.target=e),this.reloadMap()},playerPosition:function(e,t){null!==e&&e!==t&&(this.position.player=e),this.reloadMap()}},data:function(){return{map:{zoom:14,center:{lat:0,lng:0},centerTmp:{lat:0,lng:0},loaded:!1},position:{player:null,target:null},isMounted:!1}},computed:{google:qs["gmapApi"]},mounted:function(){var e=this;this.$nextTick((function(){e.isMounted=!0,e.reloadMap()}))},methods:{getUserMapIcon:function(){return{url:"statics/icons/game/pointer-me.svg",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},getNextDestinationMapIcon:function(){return{url:"statics/icons/game/target.png",size:{width:60,height:60,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"},origin:{x:0,y:0},anchor:{x:15,y:15}}},reloadMap:function(){var e=this;this.map.loaded=null,!this.$refs.mapRef||null===this.position.target&&null===this.position.target?(this.centerOnUserPosition(),this.map.loaded=!0):this.$refs.mapRef.$mapPromise.then((function(t){var s=new google.maps.LatLngBounds;null!==e.targetPosition&&s.extend(e.targetPosition),null!==e.position.player&&s.extend({lng:e.position.player.longitude,lat:e.position.player.latitude}),t.fitBounds(s)}))},centerOnUserPosition:function(){null!==this.position.player&&(this.$data.map.center={lat:this.position.player.latitude,lng:this.position.player.longitude}),this.map.zoom=14},updateCenter:function(e){var t=e.lat(),s=e.lng();this.map.center.lat===t&&this.map.center.lng===s||(this.map.centerTmp={lng:s,lat:t})},dragEnd:function(e){this.map.center=this.map.centerTmp}}},Da=Fa,Ra=Object(_e["a"])(Da,za,Na,!1,null,null,null),La=Ra.exports,ja=s("22b5"),Ea=s("bd2e"),Qa=s.n(Ea),Ba=s("e7fc"),Ua={props:["step","runId","reload","itemUsed","lang","answer","customization","player","inventory","timer"],components:{holdphonevertically:Ta,gpscalibration:Qs,geolocation:ht,story:Ma,geolocationStepMap:La,QrcodeStream:ms["QrcodeStream"]},watch:{reload:function(){var e=o()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t&&"true"!==t){e.next=3;break}return e.next=3,this.initData();case 3:!1!==t&&"false"!==t||this.hideReadMoreAlert();case 4:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),itemUsed:function(){var e=o()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.step&&"use-item"===this.step.type&&this.step.options&&this.step.options.hasOwnProperty("touchLocation")&&!1===this.step.options.touchLocation&&this.checkUseItem();case 1:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return this.initialState()},computed:{directionHelperSize:function(){return this.step&&"locate-item-ar"===this.step.type?9:12}},mounted:function(){nt.setTimeout(this.checkIfDataAreInit,5e3)},updated:Us()((function(){var e=this;this.$nextTick((function(){e.pageReady=!0}))}),250),beforeDestroy:function(){this.resetEvents()},methods:{initialState:function(){return{playerResult:null,stepPlayed:!1,cameraStreamEnabled:!1,imageCapture:null,takingSnapshot:!1,cameraUsed:"environment",serverUrl:"https://api.graaly.com",nbTry:0,score:0,reward:0,controlsAreDisplayed:!1,isHybrid:window.cordova,showNonHybridQRReader:!1,isIOs:nt.isIOS(),isPageInit:!1,isNetworkLow:!1,isTimeUp:!1,displaySuccessIcon:!1,rightAnswer:null,audio:null,character:{bubbleText:[],numberOfBubble:1,bubbleNumber:0,needToScroll:!1},answerType:"text",playerCode:[],keypad:[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],showTools:!0,codeColors:{},geolocation:{active:!1,distance:null,GPSdistance:null,direction:null,rawDirection:null,waitForNextQuaternionRead:!1,position:{x:null,y:null},playerPosition:null,destinationPosition:null,absoluteOrientationSensor:null,initialBearingAngle:null,target:null,canSeeTarget:!1,canTouchTarget:!1,primaryColor:fa["a"].getBrand("primary"),showCalibration:!1,takeMobileVertically:!1,gyroscopeDetectionCounter:0,gpsAccuracy:null,lowGpsAccuracyCeiling:15,lowGpsAccuracy:!1,lowCompassAccuracy:!1,persistentLowAccuracy:!1,persistentLowAccuracyTimeout:null,gpsAccuracyTimeout:null,showARHelp:!1,playerTouchedArObject:!1,currentIndex:0,foundStep:!1,mode:"compass",colorIndicator:"blue-2",closestDistance:100,isCalibrationWatched:!1},deviceMotion:{acceleration:{raw:{x:0,y:0,z:0},filtered:{x:0,y:0},avgData:{x:[],y:[],z:[]},maxAvgItems:5},velocity:{x:0,y:0},dateLatestEvent:null,isTargetPositionUndefined:!0,isAccelerationIdle:!1,idleAccelerationInterval:null},deviceHasGyroscope:null,locateMarker:{markerControls:{},playerAnswer:"",flash:!1,showHelp:!1},writetext:{playerAnswer:""},puzzle:{pieces:[],picture:"statics/icons/game/medal.png",dragSrcEl:null,element:{},colsByLevel:[1,3,4,6,5],mode:"drag",clickModeSelected:null},memory:{items:[],nbTry:0,score:0,selectedKey:null,disabled:!1},imageOverFlow:{snapshot:""},portrait:{face:{position:1,number:4},eye:{position:1,number:16},mouth:{position:1,number:1},nose:{position:1,number:5},hair:{position:1,number:26},beard:{position:1,number:31},glass:{position:1,number:5},hat:{position:1,number:4},type:"portrait-robot"},findItem:{nbItemsFound:0,crossSize:30,imageWidth:900,imageHeight:1200},useItem:{crossSize:30,imageWidth:900,imageHeight:1200},readMoreNotif:null,itemUsedComputed:null,mqttClient:null,bluetooth:{enabled:!1,deviceId:null},iotObject:null,iot:{distance:null,pot1:null,pot2:null,pot3:null,keypadAnswer:null,axisX:null,axisY:null,chest:{disableActionButtons:!1},relay:{disableActionButtons:!1}},story:{step:null,data:null},enlargePicture:{show:!1,url:""},latestRequestAnimationId:null,pageReady:!1,countdowntimeleft:0}},resetData:function(){var e=this.initialState();this.playerResult=e.playerResult,this.stepPlayed=e.stepPlayed,this.cameraStreamEnabled=e.cameraStreamEnabled,this.imageCapture=e.imageCapture,this.takingSnapshot=e.takingSnapshot,this.nbTry=e.nbTry,this.score=e.score,this.reward=e.reward,this.controlsAreDisplayed=e.controlsAreDisplayed,this.isNetworkLow=e.isNetworkLow,this.isTimeUp=e.isTimeUp,this.displaySuccessIcon=e.displaySuccessIcon,this.character=e.character,this.playerCode=e.playerCode,this.geolocation=e.geolocation,this.deviceMotion=e.deviceMotion,this.locateMarker=e.locateMarker,this.writetext=e.writetext,this.puzzle=e.puzzle,this.memory=e.memory,this.portrait=e.portrait,this.nbItemsFound=e.nbItemsFound,this.readMoreNotif=e.readMoreNotif,this.itemUsedComputed=e.itemUsedComputed,this.mqttClient=e.mqttClient,this.bluetooth=e.bluetooth,this.iotObject=e.iotObject,this.iot=e.iot,this.story=e.story,this.enlargePicture=e.enlargePicture,this.latestRequestAnimationId=e.latestRequestAnimationId,this.countdowntimeleft=e.countdowntimeleft,this.pageReady=e.pageReady,this.showTools=e.showTools,this.rightAnswer=e.rightAnswer,this.audio=e.audio,this.showNonHybridQRReader=e.showNonHybridQRReader},resetEvents:function(){if(this.clearAllCameraStreams(),this.stopLatestAnimation(),null!==this.geolocation.absoluteOrientationSensor&&this.geolocation.absoluteOrientationSensor.stop(),window.removeEventListener("devicemotion",this.handleMotionEvent,!0),window.removeEventListener("deviceorientationabsolute",this.handleDeviceOrientationEvent,!0),null!==this.deviceMotion.idleAccelerationInterval&&clearInterval(this.deviceMotion.idleAccelerationInterval),nt.clearAllRunningProcesses(),ja["a"].removeAll(),null!==this.mqttClient){var e=this;this.mqttClient.end(!1,{},(function(){e.mqttClient=null}))}if(this.bluetooth.enabled&&this.bluetoothDisconnect(this.bluetooth.deviceId),this.step.countDownTime&&this.step.countDownTime.enabled||this.stopcountdown(),["geolocation","locate-item-ar"].includes(this.step.type)&&this.geolocation.isCalibrationWatched)try{cordova.plugins.headingcalibration.stopWatchCalibration(),this.geolocation.isCalibrationWatched=!1}catch(t){}},getBackgroundImage:function(){return this.step.backgroundImage&&"_"===this.step.backgroundImage[0]?"statics/images/quest/"+this.step.backgroundImage:this.step.backgroundImage&&-1!==this.step.backgroundImage.indexOf("blob:")?this.step.backgroundImage:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/background/"+this.step.backgroundImage},resetBackgroundImage:function(){var e=document.getElementById("play-view");e.style.background="none",e.style.backgroundColor="transparent";var t=document.getElementById("background-image");t&&(t.style.background="none",t.style.backgroundColor="transparent")},initData:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isPageInit=!0,e.resetEvents(),e.resetData(),e.resetBackgroundImage(),ja["a"].removeAll(),e.$nextTick(o()(r.a.mark((function t(){var s,a,n,o,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=document.getElementById("play-view"),e.step.backgroundImage?"find-item"===e.step.type||"use-item"===e.step.type||"binocular"===e.step.type||"phone-call"===e.step.type?(s.style.background="none",s.style.backgroundColor="#000",e.showControls()):"image-over-flow"===e.step.type?(e.showControls(),s.style.background="none",s.style.backgroundColor="transparent"):"jigsaw-puzzle"===e.step.type?(a=e.getBackgroundImage(),s.style.background='#fff url("'+a+'") center/cover no-repeat',e.showControls()):(n=e.getBackgroundImage(),o=document.getElementById("background-image"),o&&(o.style.background='#fff url("'+n+'") center/cover no-repeat'),e.step.options&&e.step.options.hasOwnProperty("initDuration")?nt.setTimeout(e.showControls,1e3*parseInt(e.step.options.initDuration,10)):nt.setTimeout(e.showControls,1e3)):(e.step.type&&"locate-item-ar"!==e.step.type&&"locate-marker"!==e.step.type&&"sensor"!==e.step.id?(s.style.background="none",s.style.backgroundColor="#fff"):(s.style.background="none",s.style.backgroundColor="transparent","locate-item-ar"===e.step.type&&(i=document.getElementById("background-image"),i&&(i.style.background="none",i.style.backgroundColor="transparent"))),e.showControls()),e.getAudioSound(),e.resetDrawDirectionInterval(),l=e,e.isIOs&&(e.deviceHasGyroscope=!0),"end-chapter"===e.step.type&&e.checkAnswer(),"choose"===e.step.type&&(e.answerType=Array.isArray(e.step.options.items)&&e.step.options.items[0].hasOwnProperty("imagePath")&&null!==e.step.options.items[0].imagePath?"image":"text"),"character"===e.step.type&&(e.step.text&&""!==e.step.text?(e.character.bubbleText=e.step.text.split("|"),e.character.numberOfBubble=e.character.bubbleText.length,1===e.character.numberOfBubble&&e.checkAnswer(),nt.setTimeout(e.checkIfTextIsHidden,1500)):e.checkAnswer()),"code-keypad"===e.step.type&&e.resetKeypadCode(),"code-color"===e.step.type){if(e.step.options.colors)for(e.codeColors=[],c=0;c<e.step.options.colors.length;c++)e.codeColors.push(e.step.options.colors[c].value);else e.codeColors=ba;e.resetColorCode()}if("code-image"===e.step.type&&e.resetImageCode(),"find-item"===e.step.type&&nt.setTimeout(e.initFindItemElements,2e3),"use-item"===e.step.type&&nt.setTimeout(e.initUseItemElements,2e3),"new-item"===e.step.type&&(e.step.options.hasOwnProperty("pictures")&&e.step.options.pictures[e.lang]&&(e.step.options.picture=e.step.options.pictures[e.lang]),e.step.options.hasOwnProperty("titles")&&e.step.options.titles[e.lang]&&(e.step.options.title=e.step.options.titles[e.lang])),"jigsaw-puzzle"!==e.step.type){t.next=19;break}return t.next=18,e.initPuzzle();case 18:e.$emit("pass");case 19:if("memory"===e.step.type&&(e.initMemory(),e.$emit("pass")),"binocular"===e.step.type&&(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&vt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")),"phone-call"===e.step.type&&e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop&&vt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),"portrait-robot"===e.step.type&&e.step.options&&e.step.options.customize&&(e.portrait=e.step.options.customize),"geolocation"===e.step.type&&(e.step.options.hasOwnProperty("mode")&&["compass","map"].includes(e.step.options.mode)?e.geolocation.mode=e.step.options.mode:e.geolocation.mode="compass"),"geolocation"!==e.step.type&&"locate-item-ar"!==e.step.type){t.next=71;break}if(!(e.$q&&e.$q.platform&&e.$q.platform.is&&e.$q.platform.is.desktop)){t.next=29;break}"0"===e.runId?(vt(e.$t("label.YouMustTestThisStepOnMobile"),"error"),e.$emit("pass")):(e.$emit("pass"),e.$emit("forceMoveNext")),t.next=69;break;case 29:return e.$emit("pass"),window.addEventListener("devicemotion",e.handleMotionEvent,!0),t.next=33,e.waitForGyroscopeDetection();case 33:if("geolocation"!==e.step.type||!e.isHybrid||e.isIOs||e.deviceHasGyroscope){t.next=38;break}window.addEventListener("deviceorientationabsolute",e.handleDeviceOrientationEvent,!0),vt(e.$t("label.PleaseHoldYourDeviceFlat")),t.next=60;break;case 38:if(t.prev=38,!("AbsoluteOrientationSensor"in window)){t.next=47;break}d=new AbsoluteOrientationSensor({frequency:30}),d.onerror=function(e){return console.error(e.error.name,e.error.message)},d.onreading=e.onAbsoluteOrientationSensorReading,d.start(),e.geolocation.absoluteOrientationSensor=d,t.next=55;break;case 47:return e.geolocation.absoluteOrientationSensor={stop:e.stopAlternateAbsoluteOrientationSensor},t.next=50,nt.requestDeviceOrientationPermission();case 50:if(u=t.sent,"granted"===u){t.next=54;break}return vt(e.$t("label.PleaseAcceptDeviceOrientationPermissionRequest"),"error"),t.abrupt("return");case 54:window.addEventListener("deviceorientation",e.eventAlternateAbsoluteOrientationSensor,!1);case 55:t.next=60;break;case 57:t.prev=57,t.t0=t["catch"](38),console.error(t.t0);case 60:if("locate-item-ar"!==e.step.type){t.next=69;break}return e.geolocation.showARHelp=!0,t.next=64,nt.requestDeviceMotionPermission();case 64:if(u=t.sent,"granted"===u){t.next=68;break}return vt(e.$t("label.PleaseAcceptDeviceMotionPermissionRequest"),"error"),t.abrupt("return");case 68:e.deviceHasGyroscope||vt(e.$t("label.CouldNotEnableAR"),"warning");case 69:if(e.$store.dispatch("setDrawDirectionInterval",window.setInterval(e.drawDirectionArrow,100)),e.isHybrid&&!e.isIOs)try{cordova.plugins.headingcalibration.watchCalibration((function(t){e.geolocation.isCalibrationWatched=!0,t<=1?(l.geolocation.lowCompassAccuracy=!0,null!==l.geolocation.gpsAccuracyTimeout||l.geolocation.showCalibration||l.geolocation.persistentLowAccuracy||(l.geolocation.gpsAccuracyTimeout=nt.setTimeout((function(){l.$refs.gpscal.askUserToCalibrateGPS(),null!==l.geolocation.gpsAccuracyTimeout&&(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===l.geolocation.persistentLowAccuracyTimeout&&(l.geolocation.persistentLowAccuracyTimeout=nt.setTimeout((function(){l.persistentLowAccuracy=!0,l.$emit("msg","suggestNext"),null!==l.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(l.geolocation.lowCompassAccuracy=!1,null===l.geolocation.gpsAccuracyTimeout||l.geolocation.lowGpsAccuracy||(clearTimeout(l.geolocation.gpsAccuracyTimeout),l.geolocation.gpsAccuracyTimeout=null,clearTimeout(l.geolocation.persistentLowAccuracyTimeout),l.geolocation.persistentLowAccuracyTimeout=null,l.geolocation.persistentLowAccuracy=!1))}),(function(e){console.error("watch calibration: failure",e)}))}catch(r){console.log("calibration tests not working")}case 71:if("locate-item-ar"!==e.step.type||e.playerResult){t.next=122;break}if(!e.deviceHasGyroscope&&e.step.backgroundImage||(e.isIOs&&CameraPreview?(p={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},CameraPreview.startCamera(p),CameraPreview.show()):e.launchVideoStreamForAndroid("camera-stream-for-locate-item-ar")),m=document.getElementById("target-canvas"),e.geolocation.target={scene:new st["Scene"],camera:new st["PerspectiveCamera"](67,window.innerWidth/window.innerHeight,.001,1e3),renderer:new st["WebGLRenderer"]({canvas:m,alpha:!0,antialias:!0}),size:null,mixers:[],clock:new st["Clock"]},e.geolocation.target.renderer.setSize(window.innerWidth,window.innerHeight),h=e.geolocation.target,f=h.scene,e.addDefaultLightTo3DScene(f),!e.step.options.is3D){t.next=93;break}return t.next=82,e.loadAndPrepare3DModel(e.step.options.customModel?e.step.options.customModel:e.step.options.model,e.step.questId,e.step.options.customModel||!1);case 82:v=t.sent,g=v.object,b=v.animations,w=(new st["Box3"]).setFromObject(g),y=(w.max.z-w.min.z)/2,g.applyMatrix((new st["Matrix4"]).makeTranslation(0,0,y)),h.size=Math.max(w.max.x-w.min.x,w.max.y-w.min.y,w.max.z-w.min.z),b.length>0&&(q=new st["AnimationMixer"](g),q.clipAction(b[0]).play(),e.geolocation.target.mixers.push(q)),e.geolocation.target.renderer.gammaOutput=!0,t.next=114;break;case 93:k="",k=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.serverUrl+"/upload/quest/"+e.step.questId+"/step/locate-item-ar/"+e.step.options.picture,e.$refs["item-image"].src=k,h.size=e.step.options.objectSize||1,x=new st["PlaneGeometry"](h.size,h.size),t.prev=98,C=(new st["TextureLoader"]).load(k),C.anisotropy=0,C.magFilter=st["NearestFilter"],C.minFilter=st["NearestFilter"],t.next=110;break;case 105:return t.prev=105,t.t1=t["catch"](98),console.error("Error while loading image:",t.t1),vt(e.$t("label.CouldNotDisplayObject"),"error"),t.abrupt("return");case 110:S=new st["MeshBasicMaterial"]({map:C}),S.transparent=!0,g=new st["Mesh"](x,S),g.position.y=0;case 114:g.name="targetObject",g.up=new st["Vector3"](0,0,1),g.visible=!1,f.add(g),e.geolocation.target.camera.up=new st["Vector3"](0,0,1),e.geolocation.target.camera.lookAt(new st["Vector3"](0,1,0)),e.geolocation.target.camera.position.z=1.5,e.animateTargetCanvas();case 122:if("image-over-flow"===e.step.type&&(e.$emit("pass"),e.isIOs&&CameraPreview?(_={x:0,y:0,width:window.screen.width,height:window.screen.height,camera:CameraPreview.CAMERA_DIRECTION.BACK,toBack:!0,tapPhoto:!1,tapFocus:!1,previewDrag:!1},e.$q.loading.show(),CameraPreview.startCamera(_),CameraPreview.show(),setTimeout((function(){l.$q.loading.hide()}),5e3)):e.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0)),"locate-marker"!==e.step.type&&"sensor"!==e.step.id||e.playerResult||("sensor"===e.step.id?e.step.options={mode:"scan",layerCode:"magnifier"}:e.$emit("pass"),e.initQRCodes()),"wait-for-event"!==e.step.type&&"trigger-event"!==e.step.type){t.next=142;break}if(e.iotObject=e.getIotObjectFromCode(e.step.options.object),"keypad"===e.step.options.object&&(e.iot.keypadAnswer="_".repeat(e.step.options.answer.length)),"mqtt"!==e.step.options.protocol){t.next=134;break}e.mqttClient=Ba["connect"]("wss://api.graaly.com:9001"),e.mqttClient.on("connect",(function(){console.log("Successfully connected to MQTT server wss://api.graaly.com:9001"),"wait-for-event"===l.step.type&&l.mqttClient.subscribe("Graaly",(function(e){e?console.error("Error when subscribing to topic Graaly:",e):console.log("Successfully subscribed to MQTT topic Graaly")}))})),e.mqttClient.on("error",(function(e){console.error("Error connecting to MQTT server wss://api.graaly.com:9001","connack=",e)})),"wait-for-event"===l.step.type&&e.mqttClient.on("message",(function(e,t){console.log("Received MQTT message (topic "+e+"): ",t.toString());try{t=JSON.parse(t)}catch(s){console.error("Could not read MQTT message. Error:",s)}t.macAddress===l.step.options.boardMacAddress&&(console.log("*** MAC ADDRESSES MATCHED ***",l.step.stepId),console.log("matching codes?",t.code,l.step.options.code),t.code===l.step.options.code&&(console.log("*** CODES MATCHED, CHECK ANSWER ***"),vt(l.step.options.successMessage,"positive"),l.checkAnswer()))})),t.next=139;break;case 134:if("bluetooth"!==e.step.options.protocol){t.next=138;break}e.isHybrid?ble.enable(e.bluetoothEnableSuccess,e.bluetoothEnableFailure):console.warn("Webapp mode => no bluetooth support."),t.next=139;break;case 138:throw new Error("Unsupported IoT step protocol: "+e.step.options.protocol);case 139:e.$emit("pass"),t.next=144;break;case 142:null!==e.mqttClient&&e.mqttClient.end(!1,{},(function(){l.mqttClient=null})),e.bluetooth&&e.bluetooth.enabled&&e.bluetoothDisconnect(e.bluetooth.deviceId);case 144:if(!e.isTimerAvailable()){t.next=147;break}return t.next=147,e.startCountdown();case 147:case"end":return t.stop()}}),t,null,[[38,57],[98,105]])}))));case 6:case"end":return t.stop()}}),t)})))()},eventAlternateAbsoluteOrientationSensor:function(e){null===this.geolocation.initialBearingAngle&&0!==e.webkitCompassHeading&&(this.geolocation.initialBearingAngle=(-e.webkitCompassHeading-e.alpha+720)%360);var t=null!=e.webkitCompassHeading?(this.geolocation.initialBearingAngle+e.alpha)%360:e.alpha,s=e.beta,a=e.gamma,r=Math.PI/180,n=s?s*r:0,o=a?a*r:0,i=t?t*r:0,l=Math.cos(n/2),c=Math.cos(o/2),u=Math.cos(i/2),d=Math.sin(n/2),p=Math.sin(o/2),m=Math.sin(i/2),h=l*c*u-d*p*m,f=d*c*u-l*p*m,g=l*p*u+d*c*m,b=l*c*m+d*p*u;this.geolocation.absoluteOrientationSensor.quaternion=[f,g,b,h],this.onAbsoluteOrientationSensorReading()},stopAlternateAbsoluteOrientationSensor:function(){window.removeEventListener("deviceorientation",this.eventAlternateAbsoluteOrientationSensor,!1)},handleDeviceOrientationEvent:function(e){console.log("event.alpha",e.alpha,"this.geolocation.rawDirection",this.geolocation.rawDirection),this.geolocation.direction=(this.geolocation.rawDirection+e.alpha)%360},reloadPage:function(){this.$router.go({path:this.$router.path,query:{t:new Date}})},initQRCodes:function(){for(var e=1;e<=60;e++){var t=e.toString();t=t.padStart(3,"0"),this.locateMarker.markerControls[t]={detected:!1}}},startScanQRCode:function(){var e=this;this.isHybrid?cordova.plugins.barcodeScanner.scan((function(t){t&&t.text&&e.checkAnswer(t.text)}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1}):this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},showControls:function(){this.controlsAreDisplayed=!0,"info-text"!==this.step.type&&"info-video"!==this.step.type&&"help"!==this.step.type&&"image-over-flow"!==this.step.type&&"binocular"!==this.step.type&&"new-item"!==this.step.type&&"trigger-event"!==this.step.type||this.checkAnswer()},switchControls:function(){this.controlsAreDisplayed=!this.controlsAreDisplayed},checkIfDataAreInit:function(){this.isPageInit||this.initData()},hideControlsTemporaly:function(){this.controlsAreDisplayed=!1,nt.setTimeout(this.showControls,4e3)},sendAnswer:function(e,t,s,a,n){var i=this;return o()(r.a.mark((function o(){var l,c,u,d,p;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n&&i.$q.loading.show(),l=i,c=nt.setTimeout((function(){l.isNetworkLow=!0}),8e3),r.next=5,As.checkAnswer(e,t,i.step.version,s,a,i.player,{retries:0});case 5:if(u=r.sent,clearTimeout(c),i.isNetworkLow=!1,!u||!u.data){r.next=15;break}return n&&i.$q.loading.hide(),d=u.data,"0"===i.runId&&(d.remainingTrial=i.step.nbTrial-i.nbTry-1),r.abrupt("return",d);case 15:return n&&i.$q.loading.hide(),p=i.checkOfflineAnswer(a.answer),r.abrupt("return",p);case 18:case"end":return r.stop()}}),o)})))()},checkOfflineAnswer:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,l,c;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t.step.type,"info-text"!==a&&"info-video"!==a&&"new-item"!==a&&"character"!==a&&"help"!==a&&"image-over-flow"!==a&&"binocular"!==a&&"phone-call"!==a){s.next=5;break}return s.abrupt("return",{result:!0,answer:!0,score:0,reward:0,offline:!0});case 5:if("geolocation"!==a&&"locate-item-ar"!==a&&"jigsaw-puzzle"!==a){s.next=9;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 9:if("use-item"!==a){s.next=25;break}if(!0!==t.isTimeUp){s.next=12;break}return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 12:if(!t.step.options||!t.step.options.hasOwnProperty("touchLocation")||!1!==t.step.options.touchLocation){s.next=17;break}if(t.answer.item!==e.item){s.next=15;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 15:s.next=23;break;case 17:if(n=e&&e.windowWidth?e.windowWidth:t.getFindItemPictureSize()/100,o={left:Math.round(t.answer.coordinates.left/100*100*n),top:Math.round(t.answer.coordinates.top/100*133*n)},i=Math.round(8*e.windowWidth),l=Math.sqrt(Math.pow(o.left-e.posX,2)+Math.pow(o.top-e.posY,2)),!(l<=i&&t.answer.item===e.item)){s.next=23;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 23:s.next=52;break;case 25:if("find-item"!==a){s.next=31;break}if(!0!==t.isTimeUp){s.next=28;break}return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 28:return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 31:if("write-text"!==a){s.next=41;break}c=0;case 33:if(!(c<t.answer.length)){s.next=39;break}if(nt.removeAccents(e)!==nt.removeAccents(t.answer[c])){s.next=36;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 36:c++,s.next=33;break;case 39:s.next=52;break;case 41:if("memory"!==a){s.next=45;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 45:if("portrait-robot"!==a){s.next=50;break}if(JSON.stringify(e)!==JSON.stringify(t.answer)){s.next=48;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 48:s.next=52;break;case 50:if(e!==t.answer){s.next=52;break}return s.abrupt("return",{result:!0,answer:t.answer,score:1,reward:0,offline:!0});case 52:if(!(!t.isTimeUp&&t.step.nbTrial&&t.step.nbTrial>0&&t.nbTry+1<t.step.nbTrial)){s.next=56;break}return s.abrupt("return",{result:!1,remainingTrial:t.step.nbTrial-t.nbTry-1,offline:!0});case 56:return s.abrupt("return",{result:!1,answer:t.answer,score:0,reward:0,offline:!0});case 57:case"end":return s.stop()}}),s)})))()},checkAnswer:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(null===t.playerResult){s.next=2;break}return s.abrupt("return");case 2:if("sensor"!==t.step.id){s.next=5;break}return t.locateMarker.markerControls[e].detected||(t.locateMarker.flash=!1,t.locateMarker.flash=!0,t.locateMarker.markerControls[e].detected=!0,t.$emit("played",e)),s.abrupt("return");case 5:if("gpssensor"!==t.step.id){s.next=11;break}return s.next=8,t.sendAnswer(t.step.questId,e.stepId,t.runId,{answer:e.position,isTimeUp:t.isTimeUp},!1);case 8:return a=s.sent,t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0,e.position),s.abrupt("return");case 11:s.t0=t.step.type,s.next="info-text"===s.t0||"info-video"===s.t0||"new-item"===s.t0||"help"===s.t0||"end-chapter"===s.t0||"character"===s.t0||"image-over-flow"===s.t0||"binocular"===s.t0||"phone-call"===s.t0||"trigger-event"===s.t0?14:"choose"===s.t0?19:"geolocation"===s.t0?24:"code-keypad"===s.t0?29:"code-color"===s.t0?34:"code-image"===s.t0?39:"jigsaw-puzzle"===s.t0?44:"memory"===s.t0?49:"portrait-robot"===s.t0?54:"write-text"===s.t0?60:"use-item"===s.t0?66:"find-item"===s.t0?75:"locate-item-ar"===s.t0||"locate-marker"===s.t0?96:"wait-for-event"===s.t0?111:128;break;case 14:return s.next=16,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{},!1);case 16:return a=s.sent,t.submitGoodAnswer(0,a.offline,!1),s.abrupt("break",129);case 19:return s.next=21,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 21:return a=s.sent,!0===a.result?(n=t.step.options.items[e],!1===t.step.displayRightAnswer?n.class="rightorwrong":(n.icon="done",n.class="right"),l["a"].set(t.step.options.items,e,n),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,e)):(t.isTimeUp||(o=t.step.options.items[e],!1===t.step.displayRightAnswer?o.class="rightorwrong":(o.icon="clear",o.class="wrong"),l["a"].set(t.step.options.items,e,o)),t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(i=t.step.options.items[a.answer],i.icon="done",i.class="right",l["a"].set(t.step.options.items,a.answer,i))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,e)),s.abrupt("break",129);case 24:return s.next=26,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 26:return a=s.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0,e):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0,e),s.abrupt("break",129);case 29:return s.next=31,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join(""),isTimeUp:t.isTimeUp},!0);case 31:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer)),t.nbTry++,a.remainingTrial>0?(t.resetKeypadCode(),t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join(""))),s.abrupt("break",129);case 34:return s.next=36,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 36:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer.split("|"))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),s.abrupt("break",129);case 39:return s.next=41,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.playerCode.join("|"),isTimeUp:t.isTimeUp},!0);case 41:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.playerCode.join("|")):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer.split("|"))),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.playerCode.join("|"))),s.abrupt("break",129);case 44:return s.next=46,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 46:return a=s.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),s.abrupt("break",129);case 49:return s.next=51,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{isTimeUp:t.isTimeUp},!1);case 51:return a=s.sent,!0===t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result&&t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0),s.abrupt("break",129);case 54:return c={items:{type:1,face:t.portrait.face.position,eye:t.portrait.eye.position,mouth:t.portrait.mouth.position,nose:t.portrait.nose.position,hair:t.portrait.hair.position,beard:t.portrait.beard.position,glass:t.portrait.glass.position,hat:t.portrait.hat.position}},s.next=57,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:c,isTimeUp:t.isTimeUp},!1);case 57:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,JSON.stringify(c)):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?t.submitRetry(a.remainingTrial):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,JSON.stringify(c))),s.abrupt("break",129);case 60:return t.writetext.playerAnswer=t.writetext.playerAnswer.trim(),s.next=63,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:t.writetext.playerAnswer,isTimeUp:t.isTimeUp},!0);case 63:return a=s.sent,!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer,t.writetext.playerAnswer):(t.isTimeUp&&(a.remainingTrial=0),!0===t.step.displayRightAnswer&&(!a.answer&&0!==a.answer||a.remainingTrial||(t.rightAnswer=a.answer[0])),t.nbTry++,a.remainingTrial>0?(t.writetext.playerAnswer="",t.submitRetry(a.remainingTrial)):t.submitWrongAnswer(a.offline,t.step.displayRightAnswer,t.writetext.playerAnswer)),s.abrupt("break",129);case 66:return s.next=68,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 68:if(a=s.sent,!t.isTimeUp){s.next=73;break}if(t.inventory&&t.inventory.items&&Array.isArray(t.inventory.items)){s.next=72;break}throw new Error("Could not retrieve inventory items. Inventory content: ",t.inventory);case 72:Array.from(t.inventory.items).forEach((function(e){var s=e.originalPicture?e.originalPicture:e.picture;s===a.answer.item&&(t.itemUsedComputed=e)}));case 73:return!0===a.result?(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.step.options&&t.step.options.altFile&&(t.step.backgroundImage=t.step.options.altFile),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer)):(t.isTimeUp&&(a.remainingTrial=0),t.nbTry++,a.remainingTrial>0?vt(t.$t("label.UseItemNothingHappens"),"error"):(t.step.displayRightAnswer&&t.showItemLocation(a.answer.coordinates.left,a.answer.coordinates.top),t.submitWrongAnswer(a.offline,t.step.displayRightAnswer))),s.abrupt("break",129);case 75:if(u=t.findItemIsFound(e),!u.all){s.next=84;break}return s.next=79,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 79:a=s.sent,t.step.options&&t.step.options.altFile&&(t.step.backgroundImage=t.step.options.altFile),t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,t.step.displayRightAnswer),s.next=95;break;case 84:if(d=t.isTimeUp?0:t.step.nbTrial-t.nbTry-1,u.one){s.next=95;break}if(t.nbTry++,!(d>0)){s.next=91;break}vt(t.$t("label.FindItemNothingHappens"),"error"),s.next=95;break;case 91:return s.next=93,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 93:a=s.sent,t.submitWrongAnswer(!1,t.step.displayRightAnswer);case 95:return s.abrupt("break",129);case 96:if(!("locate-item-ar"===t.step.type||"locate-marker"===t.step.type&&t.step.options&&"touch"===t.step.options.mode)){s.next=103;break}return s.next=99,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!1);case 99:a=s.sent,a&&a.hasOwnProperty("result")&&("locate-item-ar"===t.step.type&&(window.removeEventListener("devicemotion",t.handleMotionEvent,!0),t.geolocation.absoluteOrientationSensor.stop()),t.isIOs&&CameraPreview&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),ja["a"].removeAll(),"locate-item-ar"===t.step.type&&t.step.options&&t.step.options.is3D||"locate-marker"===t.step.type?(p="locate-item-ar"===t.step.type?t.geolocation.target:t.locateMarker,m=p.camera,h=p.scene.getObjectByName("targetObject"),h.visible=!0,f=(new st["Box3"]).setFromObject(h),g=new st["Vector3"],f.getSize(g),b=2*Math.max(g.x,g.y,g.z),v=Object.assign({},h.scale),w=new ja["a"].Tween(h.scale).to({x:0,y:0,z:0},1e3).easing(ja["a"].Easing.Back.In).onComplete((function(){m.position.set(0,0,2*b/3),m.lookAt(new st["Vector3"](0,b,g.z/2)),h.scale.set(0,0,0),h.position.set(0,b,g.z/2),h.rotation.set(0,0,0),!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)})),y=new ja["a"].Tween(h.scale).to({x:v.x,y:v.y,z:v.z},1e3).easing(ja["a"].Easing.Back.Out),q=new ja["a"].Tween(h.rotation).to({z:"-"+Math.PI/2},2e3).repeat(1/0),w.chain(y,q).start()):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):t.submitWrongAnswer(a.offline,!0)),s.next=110;break;case 103:if(k=!1,t.locateMarker.markerControls[e]&&!t.locateMarker.markerControls[e].detected&&(t.locateMarker.markerControls[e].detected=!0,k=!0),!k){s.next=110;break}return s.next=108,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:e,isTimeUp:t.isTimeUp},!0);case 108:a=s.sent,!0===a.result?(t.submitGoodAnswer(a.score,a.offline,!0),t.locateMarker.playerAnswer=e):(t.nbTry++,2===t.nbTry||t.isTimeUp?t.submitWrongAnswer(a.offline,!0):t.submitRetry(1));case 110:return s.abrupt("break",129);case 111:return s.next=113,t.stopBluetoothNotification();case 113:return s.next=115,t.sendAnswer(t.step.questId,t.step.stepId,t.runId,{answer:"",isTimeUp:t.isTimeUp},!0);case 115:if(a=s.sent,t.isTimeUp?t.submitWrongAnswer(a.offline,!0):!0===a.result?t.submitGoodAnswer(a&&a.score?a.score:0,a.offline,!0):vt(t.$t("label.TechnicalIssue"),"error"),"mqtt"!==t.step.options.protocol){s.next=122;break}x=t,t.mqttClient.end(!1,{},(function(){x.mqttClient=null})),s.next=127;break;case 122:if("bluetooth"!==t.step.options.protocol){s.next=126;break}t.bluetoothDisconnect(t.bluetooth.deviceId),s.next=127;break;case 126:throw new Error("Unknown IoT protocol '"+t.step.options.protocol+"'");case 127:return s.abrupt("break",129);case 128:console.log("checkAnswer(): Step type "+t.step.type+" not supported.");case 129:t.score=a&&a.score?a.score:0,t.reward=a&&a.reward?a.reward:0;case 131:case"end":return s.stop()}}),s)})))()},submitAnswer:function(e){this.stepPlayed=!0,this.$emit("played",null,e),this.displayReadMoreAlert(),nt.setTimeout(this.alertToPassToNextStep,15e3)},submitGoodAnswer:function(e,t,s,a){if(this.playerResult=!!s||null,void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled){var r=this.getStepType(this.step.type);"enigma"===r.category&&(this.step.countDownTime.enabled=!1,this.stopcountdown())}if(this.stepPlayed=!0,this.$emit("success",e,t,s,a),this.$emit("played"),this.displayReadMoreAlert(),s)switch(this.step.type){case"character":case"new-item":case"info-text":case"help":case"end-chapter":case"info-video":case"image-over-flow":case"binocular":case"phone-call":break;case"choose":break;case"code-keypad":case"code-color":case"code-image":this.displaySuccessMessage(!0,this.$t("label.GoodAnswer"));break;case"write-text":case"jigsaw-puzzle":case"memory":case"portrait-robot":case"use-item":case"find-item":case"geolocation":this.displaySuccessMessage(!0,this.$t("label.YouHaveFoundThePlace"));break;case"locate-item-ar":case"locate-marker":"locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode?this.displaySuccessMessage(!0,this.$t("label.YouHaveWinANewItem")):this.displaySuccessMessage(!0,this.$t("label.WellDone"));break;case"wait-for-event":this.displaySuccessMessage(!0,this.$t("label.WellDone"));break}!1===this.step.displayRightAnswer&&this.forceNextStep()},submitWrongAnswer:function(e,t,s){null!==this.step.countDownTime&&(this.step.countDownTime.enabled=!1,this.stopcountdown()),this.playerResult=!t&&null,this.stepPlayed=!0,this.$emit("fail",e,t,s),this.$emit("played"),this.displayReadMoreAlert(),!0===this.isTimeUp?this.displaySuccessMessage(!1,this.$t("label.CountDownPopupfail")):t&&this.displaySuccessMessage(!1,this.$t("label.WrongAnswer")),!0===this.step.displayRightAnswer?nt.setTimeout(this.alertToPassToNextStep,15e3):this.forceNextStep()},alertToPassToNextStep:function(){this.displaySuccessMessage(!0,this.$t("label.ClickOnArrowToMoveToNextStep"))},displayReadMoreAlert:function(){var e=this;if(this.step.extraText){var t=[{label:this.$t("label.ReadMore"),handler:function(){e.readMore()}}];null===this.readMoreNotif&&(this.readMoreNotif=vt("","readMore",t))}},hideReadMoreAlert:function(){null!==this.readMoreNotif&&this.readMoreNotif()},submitRetry:function(e){this.displaySuccessMessage(!1,this.$t("label.SecondTry",{nb:e}))},forceNextStep:function(){this.$emit("forceMoveNext")},nextCharacterBubbleText:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.character.bubbleNumber<e.character.numberOfBubble-1&&(e.character.bubbleNumber++,e.character.needToScroll=!1,nt.setTimeout(e.checkIfTextIsHidden,500)),!(e.character.bubbleNumber>=e.character.numberOfBubble-1)){t.next=8;break}if(e.stepPlayed){t.next=7;break}return t.next=5,e.checkAnswer();case 5:t.next=8;break;case 7:e.forceNextStep();case 8:case"end":return t.stop()}}),t)})))()},checkIfTextIsHidden:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.bubbleText){t.next=2;break}return t.abrupt("return");case 2:s=e.$refs.bubbleText?e.$refs.bubbleText.clientHeight:0,a=e.$refs.bubbleTextHtml?e.$refs.bubbleTextHtml.clientHeight:0,n=Math.max(s,a),n>"177"&&(e.character.needToScroll=!0);case 6:case"end":return t.stop()}}),t)})))()},resetKeypadCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill("")},resetColorCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(this.codeColors[0])},resetImageCode:function(){var e=this.step.options&&this.step.options.codeLength&&this.step.options.codeLength>0?this.step.options.codeLength:4;this.playerCode=Array(e).fill(0)},nextCodeAnswer:function(e){this.playerCode[e]++;var t=this.getNbImageUploadedForCode();this.playerCode[e]>=t&&(this.playerCode[e]=0),this.forceImageRefresh(e)},previousCodeAnswer:function(e){this.playerCode[e]--;var t=this.getNbImageUploadedForCode();this.playerCode[e]<0&&(this.playerCode[e]=t-1),this.forceImageRefresh(e)},forceImageRefresh:function(e){null!==document.getElementById("image-code-"+e)&&(this.step.options.images[this.playerCode[e]].imagePath&&-1!==this.step.options.images[this.playerCode[e]].imagePath.indexOf("blob:")?document.getElementById("image-code-"+e).src=this.step.options.images[this.playerCode[e]].imagePath:document.getElementById("image-code-"+e).src=this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+this.step.options.images[this.playerCode[e]].imagePath)},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.step.options.images.length;t++)this.step.options.images[t]&&this.step.options.images[t].imagePath&&e++;return e},addCodeChar:function(e){if(this.playerCode){var t=this.playerCode.indexOf("");-1!==t&&l["a"].set(this.playerCode,t,e)}},clearLastCodeChar:function(){if(this.playerCode){var e=this.playerCode.indexOf("");e=-1===e?this.playerCode.length-1:e-1,e<0||e>=this.playerCode.length||l["a"].set(this.playerCode,e,"")}},changeColorForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),s=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[s])}},changeImageForCode:function(e){if(null===this.playerResult&&this.codeColors){var t=this.codeColors.indexOf(this.playerCode[e]),s=(t+1)%this.codeColors.length;this.$set(this.playerCode,e,this.codeColors[s])}},launchVideoStreamForAndroid:function(e,t,s){var a=this;s||(s=this.cameraUsed);var r=this.$refs[e];return navigator.mediaDevices.getUserMedia({video:{facingMode:s},audio:!1}).then((function(e){if(r.setAttribute("muted",!0),r.setAttribute("playsinline",!0),r.srcObject=e,r.play(),a.cameraStreamEnabled=!0,a.$store.dispatch("addMediaStream",e),t){var s=e.getVideoTracks()[0];a.imageCapture=new ImageCapture(s)}})).catch((function(e){console.warn("No camera stream available"),console.log(e)})),r},stopVideoTracks:function(e){this.$refs[e]&&this.$refs[e].srcObject&&this.$refs[e].srcObject.getVideoTracks().forEach((function(e){e.stop()})),this.cameraStreamEnabled=!1},drawDirectionArrow:function(){if(null!==document.querySelector(".direction-helper canvas")&&this.geolocation.active){null===this.geolocation.direction&&(this.geolocation.direction=0);var e=document.querySelector(".direction-helper canvas");e.width=e.clientWidth,e.height=e.clientHeight;var t=e.getContext("2d"),s=e.width,a=e.height,r=Math.round(s/2),n=Math.round(a/2);t.save(),t.clearRect(0,0,s,a),t.translate(r,n),t.shadowColor="#000",t.shadowBlur=6,t.shadowOffsetX=0,t.shadowOffsetY=0,t.lineWidth=1,t.fillStyle=this.geolocation.primaryColor,t.strokeStyle=this.geolocation.primaryColor,t.lineWidth=Math.round(1.5*this.directionHelperSize),t.beginPath(),a>25&&t.arc(0,0,Math.round(a/2.5)-10,0,2*Math.PI),t.stroke(),t.rotate(nt.degreesToRadians(this.geolocation.direction));var o=Math.round(.8*this.directionHelperSize);t.lineWidth=1,t.beginPath(),t.moveTo(0,25-Math.round(a/2.5)),t.lineTo(-20,45-Math.round(a/2.5)),t.lineTo(-o,45-Math.round(a/2.5)),t.lineTo(-o,Math.round(a/2.5)-25),t.lineTo(o,Math.round(a/2.5)-25),t.lineTo(o,45-Math.round(a/2.5)),t.lineTo(20,45-Math.round(a/2.5)),t.stroke(),t.fill(),t.restore()}},onNewUserPosition:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,l,c,u,d,p,m,h,f,g,b;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("gpssensor"!==t.step.id){s.next=22;break}t.geolocation.active=!0,a=e.coords,n=1e3,o=5,i=0;case 6:if(!(i<t.step.locations.length)){s.next=18;break}if(l={lat:t.step.locations[i].lat,lng:t.step.locations[i].lng},t.geolocation.GPSdistance=1e3*nt.distanceInKmBetweenEarthCoordinates(l.lat,l.lng,a.latitude,a.longitude),n=Math.min(n,parseInt(t.geolocation.GPSdistance,10)),o=t.step.locations[i].distance?t.step.locations[i].distance:5,!(t.geolocation.GPSdistance<=o)){s.next=15;break}return t.geolocation.active=!1,s.next=15,t.checkAnswer({stepId:t.step.steps[i],position:a});case 15:i++,s.next=6;break;case 18:t.geolocation.closestDistance=n,t.updateDistanceIndicatorColor(n),s.next=66;break;case 22:if("geolocation"!==t.step.type&&"locate-item-ar"!==t.step.type||null!==t.playerResult||t.geolocation.playerTouchedArObject){s.next=66;break}if(t.geolocation.gpsAccuracy=e.coords.accuracy,t.geolocation.active=!0,t.geolocation.playerPosition=e.coords,c=e.coords,0===t.step.options.lat&&parseInt(t.step.options.lng,10)===t.step.options.lng&&(0===t.step.options.lng?"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+5e-5,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+5e-4,t.step.options.lng=c.longitude+5e-4):"locate-item-ar"===t.step.type?(t.step.options.lat=c.latitude+1e-5*t.step.options.lng,t.step.options.lng=c.longitude):(t.step.options.lat=c.latitude+1e-4*t.step.options.lng,t.step.options.lng=c.longitude+1e-4*t.step.options.lng)),u=t.step.options,"undefined"!==typeof u){s.next=32;break}return console.warn("variable 'options' is undefined. Could not get latitude & longitude of the target."),s.abrupt("return");case 32:if(t.geolocation.gpsAccuracy>t.geolocation.lowGpsAccuracyCeiling?(t.geolocation.lowGpsAccuracy=!0,null!==t.geolocation.gpsAccuracyTimeout||t.geolocation.showCalibration||t.geolocation.persistentLowAccuracy||(t.geolocation.gpsAccuracyTimeout=nt.setTimeout((function(){t.$refs.gpscal.askUserToCalibrateGPS(),null!==t.geolocation.gpsAccuracyTimeout&&(clearTimeout(t.geolocation.gpsAccuracyTimeout),t.geolocation.gpsAccuracyTimeout=null)}),1e4)),null===t.geolocation.persistentLowAccuracyTimeout&&(t.geolocation.persistentLowAccuracyTimeout=nt.setTimeout((function(){t.geolocation.persistentLowAccuracy=!0,t.$emit("msg","suggestNext"),null!==t.geolocation.persistentLowAccuracyTimeout&&(clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null)}),2e4))):(t.geolocation.lowGpsAccuracy=!1,null===t.geolocation.gpsAccuracyTimeout||t.geolocation.lowCompassAccuracy||(clearTimeout(t.geolocation.gpsAccuracyTimeout),t.geolocation.gpsAccuracyTimeout=null,clearTimeout(t.geolocation.persistentLowAccuracyTimeout),t.geolocation.persistentLowAccuracyTimeout=null,t.geolocation.persistentLowAccuracy=!1)),d={lat:u.lat,lng:u.lng},"geolocation"===t.step.type&&u.locations&&u.locations.length>0&&(d.lat=u.locations[t.geolocation.currentIndex].lat,d.lng=u.locations[t.geolocation.currentIndex].lng),t.geolocation.destinationPosition=d,t.geolocation.GPSdistance=1e3*nt.distanceInKmBetweenEarthCoordinates(d.lat,d.lng,c.latitude,c.longitude),p=nt.bearingBetweenEarthCoordinates(c.latitude,c.longitude,d.lat,d.lng),!t.geolocation.lowGpsAccuracy&&!t.geolocation.lowCompassAccuracy){s.next=40;break}return s.abrupt("return");case 40:if(t.geolocation.rawDirection=p,m=nt.degreesToRadians(p),t.deviceHasGyroscope||(m=0,h=2+(null!==t.geolocation.target?t.geolocation.target.size:0),t.geolocation.GPSdistance=Math.max(h,t.geolocation.GPSdistance)),t.deviceMotion.isAccelerationIdle||(t.geolocation.position.x=Math.sin(m)*t.geolocation.GPSdistance,t.geolocation.position.y=Math.cos(m)*t.geolocation.GPSdistance),"locate-item-ar"!==t.step.type||null===t.geolocation.target||null===t.geolocation.target.scene){s.next=54;break}if(f=t.geolocation.target,g=f.scene,b=g.getObjectByName("targetObject"),t.geolocation.canSeeTarget=null===f.size||t.geolocation.GPSdistance<40*f.size,"undefined"!==typeof b){s.next=51;break}return s.abrupt("return");case 51:b.visible||(b.position.x=t.geolocation.position.x,b.position.y=t.geolocation.position.y,b.visible=!0),new ja["a"].Tween(b.position).to({x:t.geolocation.position.x,y:t.geolocation.position.y},1e3).easing(ja["a"].Easing.Quadratic.InOut).start(),t.updatePlayerCanTouchTarget();case 54:if("geolocation"!==t.step.type||!(u.distance&&t.geolocation.GPSdistance<=parseInt(u.distance,10)||!u.distance&&t.geolocation.GPSdistance<=20)){s.next=66;break}if(t.geolocation.currentIndex++,!(u.locations&&u.locations.length>0&&t.geolocation.currentIndex<u.locations.length)){s.next=62;break}vt(t.$t("label.CheckpointReached"),"info"),t.geolocation.foundStep=!1,t.geolocation.foundStep=!0,s.next=66;break;case 62:return t.geolocation.active=!1,t.resetDrawDirectionInterval(),s.next=66,t.checkAnswer(c);case 66:case"end":return s.stop()}}),s)})))()},onUserPositionError:function(e){console.error("UserPositionError",e)},updateDistanceIndicatorColor:function(e){var t=this.getColorIndicator(10);e<100&&(t=this.getColorIndicator(9)),e<50&&(t=this.getColorIndicator(8)),e<40&&(t=this.getColorIndicator(7)),e<30&&(t=this.getColorIndicator(6)),e<20&&(t=this.getColorIndicator(5)),e<17&&(t=this.getColorIndicator(4)),e<15&&(t=this.getColorIndicator(3)),e<13&&(t=this.getColorIndicator(2)),e<10&&(t=this.getColorIndicator(1)),this.geolocation.colorIndicator=t},getColorIndicator:function(e){var t=["red-7","red-4","red-3","red-2","red-1","blue-1","blue-2","blue-3","blue-4","blue-5"];return t[e-1]},switchModeForGeolocationStep:function(){"compass"===this.geolocation.mode?this.geolocation.mode="map":this.geolocation.mode="compass"},getGeolocationStepSwitchButtonIcon:function(){return"compass"===this.geolocation.mode?"map":"explore"},checkUseItem:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!0!==t.playerResult){s.next=2;break}return s.abrupt("return");case 2:if(null!==t.itemUsed){s.next=6;break}return vt(t.$t("label.PleaseSelectAnItemFirst"),"error"),t.$emit("msg","suggestInventory"),s.abrupt("return");case 6:return a=t.getUseItemPictureSize()/100,n={windowWidth:a,item:t.itemUsed.originalPicture?t.itemUsed.originalPicture:t.itemUsed.picture},e&&(n.posX=e.offsetX,n.posY=e.offsetY),s.next=11,t.checkAnswer(n);case 11:case"end":return s.stop()}}),s)})))()},showItemLocation:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c,u,d;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=s.getUseItemPictureSize()/100,o={left:Math.round(e/100*100*n),top:Math.round(t/100*133*n)},i=s.useItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=o.top-i+"px",l.style.left=o.left-i+"px",l.style.display="block",c=l.src,u=null!==s.itemUsedComputed?s.itemUsedComputed:s.itemUsed,d=s,nt.setInterval((function(){l.src===c&&d.step.answers&&d.step.answers.item?(u.pictures&&u.pictures[d.lang]&&""!==u.pictures[d.lang]?l.src=u.picture.indexOf("statics/")>-1||-1!==u.picture.indexOf("blob:")?u.picture:d.serverUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+u.picture:l.src=d.step.answers.item.indexOf("statics/")>-1||-1!==d.step.answers.item.indexOf("blob:")?d.step.answers.item:d.serverUrl+"/upload/quest/"+d.step.questId+"/step/new-item/"+d.step.answers.item,l.style.borderRadius="50%"):(l.src=c,l.style.borderRadius="0")}),1e3);case 11:case"end":return a.stop()}}),a)})))()},initUseItemElements:function(){this.useItem.imageWidth=this.getUseItemPictureSize(),this.useItem.crossSize=this.useItem.imageWidth/8,this.useItem.imageHeight=4*this.useItem.imageWidth/3},getUseItemPictureSize:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},checkFindItem:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!0!==t.playerResult){s.next=2;break}return s.abrupt("return");case 2:return a=t.getFindItemPictureSize()/100,n={windowWidth:a,posX:e.offsetX,posY:e.offsetY},s.next=6,t.checkAnswer(n);case 6:case"end":return s.stop()}}),s)})))()},initFindItemElements:function(){this.findItem.imageWidth=this.getFindItemPictureSize(),this.findItem.crossSize=this.findItem.imageWidth/8,this.findItem.imageHeight=4*this.findItem.imageWidth/3},getFindItemPictureSize:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},prepareSnapshot:function(){this.takingSnapshot=!0,this.$q.loading.show(),this.$emit("hideButtons");var e=this;this.isIOs&&CameraPreview?CameraPreview.takePicture({quality:85},(function(t){var s="data:image/jpeg;base64,"+t,a=document.getElementById("snapshotImageIos");a.src=s,setTimeout((function(){e.takeSnapshot()}),2e3)})):this.imageCapture.takePhoto().then((function(t){var s=document.getElementById("snapshotImage");s.src=URL.createObjectURL(t),s.onload=function(){var t=s.width,a=s.height;t>a&&(s.style.transform="rotate(90deg)");var r=e.getScreenWidth(),n=e.getScreenHeight();s.style.height=n+"px",s.style.width=a/n*t+"px",s.style.left=(r-parseInt(s.style.width,10))/2+"px",setTimeout((function(){e.takeSnapshot()}),2e3)}})).catch((function(t){vt(e.$t("label.SnapshotTakenIssue"),"info"),console.log(t),e.$q.loading.hide(),e.$emit("showButtons")}))},switchCamera:function(){"environment"===this.cameraUsed?this.cameraUsed="user":this.cameraUsed="environment",this.isIOs&&CameraPreview?CameraPreview.switchCamera():(this.clearAllCameraStreams(),this.launchVideoStreamForAndroid("camera-stream-for-image-over-flow",!0))},takeVideoSnapShot:function(){var e=this;CameraPreview.takePicture({quality:85},(function(t){e.imageOverFlow.snapshot="data:image/jpeg;base64,"+t,setTimeout((function(){e.cancelTakeVideoSnapShot()}),5e3)}))},cancelTakeVideoSnapShot:function(){this.imageOverFlow.snapshot=""},takeSnapshot:function(){var e=this;this.$q.loading.hide(),navigator.screenshot.save((function(t,s){if(t)console.error(t),vt(e.$t("label.ErrorTakingSnapshot"),"info");else{var a=cordova.plugins.permissions;a.requestPermission(a.READ_EXTERNAL_STORAGE,(function(t){t.hasPermission?e.saveSnapshot(s):vt(e.$t("label.ErrorTakingSnapshot"),"info")}),alert)}e.takingSnapshot=!1,e.$emit("showButtons")}))},saveSnapshot:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,new Promise((function(t){return window.resolveLocalFileSystemURL("file://"+e.filePath,t,(function(e){console.log("Error "+e)}))}));case 3:return a=s.sent,s.next=6,new Promise((function(e,t){return a.file((function(t){var s=new FileReader;s.onloadend=function(t){e(s.result)},s.readAsArrayBuffer(t)}))}));case 6:n=s.sent,o=new Blob([new Uint8Array(n)],{type:"image/jpg"}),i=new FormData,i.append("image",o),l=t,As.uploadSnapshot(t.step.questId,i,(function(e,t){e?vt(this.$t("label.ErrorTakingSnapshot"),"error"):vt(l.$t("label.SnapshotTaken"),"info")})),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),vt(t.$t("label.ErrorTakingSnapshot"),"error"),console.log("Error: "+s.t0);case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()},getTranslatedText:function(){var e="";"new-item"===this.step.type&&(e=this.$t("label.YouHaveWinANewItem"));var t=this.step.text?this.step.text:e,s=new Date;return t=t.replace("%id%",this.$store.state.user.id),t=t.replace("%name%",this.$store.state.user.name),t=t.replace("%date%",s.getMonth()+1+"."+s.getFullYear()),t},getScreenWidth:function(){var e=window.innerWidth;return!this.isHybrid&&e>500&&(e=500),e},getScreenHeight:function(){var e=window.innerHeight;return e},showFoundLocation:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=s.getFindItemPictureSize()/100,o={left:Math.round(e/100*100*n),top:Math.round(t/100*133*n)},i=s.findItem.crossSize/2,l=document.getElementById("cross-play"),l.style.top=o.top-i+"px",l.style.left=o.left-i+"px",l.style.display="block";case 7:case"end":return a.stop()}}),a)})))()},checkPuzzle:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.comparePuzzlePiecePositions(),s&&e.checkAnswer(),t.abrupt("return",s);case 3:case"end":return t.stop()}}),t)})))()},comparePuzzlePiecePositions:function(){for(var e=0;e<this.puzzle.pieces.length;e++)if(this.puzzle.pieces[e].pos!==e)return!1;return!0},initPuzzle:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l,c,u,d,p,m,h;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.step.options.picture&&-1!==e.step.options.picture.indexOf("blob:")?e.step.options.picture:e.step.options.picture&&-1===e.step.options.picture.indexOf("upload/")?e.serverUrl+"/upload/quest/"+e.step.questId+"/step/jigsaw-puzzle/"+e.step.options.picture:e.serverUrl+e.step.options.picture,t.next=3,nt.loadImage(s);case 3:for(e.puzzle.picture=s,a=parseInt(e.step.options.level||2,10),n=e.puzzle.colsByLevel[a],o=Math.pow(n,2),i=document.getElementById("pieces").clientWidth,l=i,c=Math.floor(l/n),u=Math.floor(i/n),d=0;d<o;d++)p=u*(d%n)+"px",m=c*Math.floor(d/n)+"px",e.puzzle.pieces[d]={pos:d,backSize:100*n,backXPos:p,backYPos:m,width:u,height:c,classes:"piece"};h=!0;while(h)e.puzzle.pieces=e.shuffle(e.puzzle.pieces),h=e.comparePuzzlePiecePositions();return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},shuffle:function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[s],e[s]=a}return e},handleDragStart:function(e){if(this.puzzle&&"drag"===this.puzzle.mode)return e.target.className&&-1!==e.target.className.indexOf("piece")&&(this.puzzle.dragSrcEl=e.target),!0;this.puzzle.dragSrcEl=null,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()},handleDragOver:function(e){this.puzzle&&"drag"===this.puzzle.mode&&this.puzzle.dragSrcEl&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},handleDragEnd:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){this.puzzle.dragSrcEl=null;var t=document.querySelectorAll("#pieces .piece");return[].forEach.call(t,(function(e){e.style.opacity="",e.classList.remove("over")})),!0}},handleDrop:function(e){if(this.puzzle&&"drag"===this.puzzle.mode){if(this.puzzle.dragSrcEl&&e.cancelable&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.target.parentNode.id&&this.puzzle.dragSrcEl.id)){var t=parseInt(e.target.parentNode.id.replace("piece-",""),10),s=parseInt(this.puzzle.dragSrcEl.id.replace("piece-",""),10);this.switchPieces(s,t)}return!0}},switchPieces:function(e,t){var s=0,a=0;if(t!==e){for(var r=0;r<this.puzzle.pieces.length;r++)this.puzzle.pieces[r].pos===t&&(s=r),this.puzzle.pieces[r].pos===e&&(a=r);var n=this.puzzle.pieces[s];l["a"].set(this.puzzle.pieces,s,this.puzzle.pieces[a]),l["a"].set(this.puzzle.pieces,a,n),this.checkPuzzle()}},changePuzzleMode:function(){this.puzzle&&"drag"===this.puzzle.mode?this.puzzle.mode="click":this.puzzle.mode="drag"},movePieceWithClick:function(e){if(this.puzzle.dragSrcEl=null,this.puzzle&&"click"===this.puzzle.mode)if(null===this.puzzle.clickModeSelected){for(var t=0;t<this.puzzle.pieces.length;t++)if(this.puzzle.pieces[t].pos===e){this.puzzle.pieces[t].classes="piece border-red",this.puzzle.clickModeSelected=e;var s=this.puzzle.pieces[t];l["a"].set(this.puzzle.pieces,t,s)}}else{if(this.puzzle.clickModeSelected===e)return;for(var a=0;a<this.puzzle.pieces.length;a++)this.puzzle.pieces[a].classes="piece";this.switchPieces(this.puzzle.clickModeSelected,e),this.puzzle.clickModeSelected=null}},initMemory:function(){for(var e=[],t=0;t<2*this.step.options.items.length;t++){var s=t<this.step.options.items.length?this.step.options.items[t]:this.step.options.items[t-this.step.options.items.length];(!s.single||t<this.step.options.items.length)&&(e[t]={imagePath:s.imagePath,isClicked:!1,isFound:!1})}this.memory.items=this.shuffle(e)},selectMemoryCard:function(e){if(!this.memory.disabled&&!(this.memory.nbTry>=1&&e===this.memory.selectedKey)){var t=this;if(this.memory.items[e].isClicked=!0,l["a"].set(this.memory.items,e,this.memory.items[e]),this.memory.nbTry>=1){if(this.memory.items[this.memory.selectedKey].imagePath===this.memory.items[e].imagePath)if(this.memory.score++,this.memory.score===Math.floor(this.memory.items.length/2)){for(var s=0;s<this.memory.items.length;s++)this.memory.items[s].isFound||(this.memory.items[s].isClicked=!0,t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(this.memory.items,s,this.memory.items[s]));this.checkAnswer(!0)}else t.memory.items[t.memory.selectedKey].isFound=!0,t.memory.items[e].isFound=!0,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]);else this.memory.disabled=!0,nt.setTimeout((function(){t.memory.items[t.memory.selectedKey].isClicked=!1,t.memory.items[e].isClicked=!1,l["a"].set(t.memory.items,t.memory.selectedKey,t.memory.items[t.memory.selectedKey]),l["a"].set(t.memory.items,e,t.memory.items[e]),t.memory.disabled=!1}),1500);this.memory.nbTry=0}else this.memory.nbTry++,this.memory.selectedKey=e}},changePortraitPart:function(e){l["a"].set(this.portrait[e],"position",this.portrait[e].position+1),this.portrait[e].position>this.portrait[e].number&&l["a"].set(this.portrait[e],"position",1)},phoneCall:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.step.options.number,cordova.plugins.phonedialer.dial(s,(function(e){console.log("Dialing succeeded")}),(function(e){"empty"===e?console.log("Unknown phone number"):console.log("Dialer Error:"+e)}),!1),e.checkAnswer();case 3:case"end":return t.stop()}}),t)})))()},cancelPhoneCall:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkAnswer();case 2:e.forceNextStep();case 3:case"end":return t.stop()}}),t)})))()},animateTargetCanvas:function(){var e=this.geolocation.target,t=e.mixers,s=e.scene.getObjectByName("targetObject");if(this.step.options&&!this.step.options.is3D&&s.lookAt(e.camera.position),t.length>0)for(var a=0;a<t.length;a++)t[a].update(e.clock.getDelta());!1===this.deviceHasGyroscope&&e.camera.lookAt(s.position),e.renderer.render(e.scene,e.camera),ja["a"].update(),this.latestRequestAnimationId=requestAnimationFrame(this.animateTargetCanvas)},stopLatestAnimation:function(){cancelAnimationFrame(this.latestRequestAnimationId),this.latestRequestAnimationId=null},onAbsoluteOrientationSensorReading:function(){var e=this;if(!1!==this.geolocation.absoluteOrientationSensor.activated){var t=(new st["Quaternion"]).fromArray(this.geolocation.absoluteOrientationSensor.quaternion);if("locate-item-ar"===this.step.type&&null!==this.geolocation.target&&this.deviceHasGyroscope&&(this.geolocation.target.camera.quaternion=t),!this.geolocation.waitForNextQuaternionRead){var s=(new st["Euler"]).setFromQuaternion(t,"ZXY"),a=(new st["Euler"]).setFromQuaternion(t,"XZY"),r=s.x<Math.PI/4?s.z:a.y,n=JSON.stringify((360-nt.radiansToDegrees(r))%360);this.geolocation.direction=(this.geolocation.rawDirection-n+360)%360,this.geolocation.waitForNextQuaternionRead=!0,nt.setTimeout((function(){e.geolocation.waitForNextQuaternionRead=!1}),100)}}else console.warn("sensor is not activated")},onTargetCanvasClick:function(e){if("locate-item-ar"===this.step.type||"locate-marker"===this.step.type&&this.step.options&&"touch"===this.step.options.mode)if(null===this.playerResult||"locate-item-ar"!==this.step.type){var t;e.preventDefault(),t="locate-item-ar"===this.step.type?this.geolocation.target:this.locateMarker;var s=t.scene.getObjectByName("targetObject"),a=new st["Vector2"];a.x=e.clientX/t.renderer.domElement.clientWidth*2-1,a.y=-e.clientY/t.renderer.domElement.clientHeight*2+1;var r=new st["Raycaster"];r.setFromCamera(a,t.camera);var n=r.intersectObject(s,!0),o="locate-item-ar"===this.step.type&&this.geolocation.canTouchTarget||"locate-marker"===this.step.type&&this.locateMarker.arSmoothedControls.object3d.visible;if(n.length>0&&o){"locate-item-ar"===this.step.type&&(this.resetDrawDirectionInterval(),this.geolocation.active=!1,this.geolocation.playerTouchedArObject=!0);var i="locate-item-ar"===this.step.type?"camera-stream-for-locate-item-ar":"camera-stream-for-locate-marker";this.stopVideoTracks(i),this.checkAnswer(this.step.answers)}}else this.geolocation.canTouchTarget=!1},handlePanOnTargetCanvas:function(e){this.onTargetCanvasClick({clientX:e.position.left,clientY:e.position.top,preventDefault:function(){}})},loadAndPrepare3DModel:function(e,t,s){var a=this;return o()(r.a.mark((function n(){var o,i,l,c,u,d,p,m;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=4,i=va[e],r.prev=2,r.next=5,a.ModelLoaderAsync(e,t,s);case 5:l=r.sent,r.next=13;break;case 8:return r.prev=8,r.t0=r["catch"](2),console.error("Error while loading 3D model:",r.t0),vt(a.$t("label.CouldNotDisplayObject"),"error"),r.abrupt("return");case 13:return c=l.scene,i&&(i.rotation=i.rotation||{},i.rotation.hasOwnProperty("x")&&c.rotateX(nt.degreesToRadians(i.rotation.x)),i.rotation.hasOwnProperty("y")&&c.rotateY(nt.degreesToRadians(i.rotation.y)),i.rotation.hasOwnProperty("z")&&c.rotateZ(nt.degreesToRadians(i.rotation.z)),u=(i.scale||1)*o,c.scale.set(u,u,u)),d=(new st["Box3"]).setFromObject(c),p=d.getCenter(new st["Vector3"]),p.multiplyScalar(-1),m=new st["Object3D"],c.applyMatrix((new st["Matrix4"]).makeTranslation(p.x,p.y,p.z)),m.add(c),m.up=new st["Vector3"](0,0,1),c=m,i&&i.translation&&"locate-item-ar"===a.step.type&&(i.translation.hasOwnProperty("x")&&(c.position.x+=i.translation.x*o),i.translation.hasOwnProperty("y")&&(c.position.y+=i.translation.y*o),i.translation.hasOwnProperty("z")&&(c.position.z+=i.translation.z*o)),r.abrupt("return",{object:c,animations:l.animations});case 25:case"end":return r.stop()}}),n,null,[[2,8]])})))()},ModelLoaderAsync:function(e,t,s){var a=this;return o()(r.a.mark((function n(){var o,i;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=console.log,r.next=3,nt.readBinaryFile(t,e+".glb");case 3:return i=r.sent,r.abrupt("return",new Promise((function(r,n){var l=new Qa.a;e&&-1!==e.indexOf("blob:")?l.load(e,r,o,n):i?l.load(i,r,o,n):s?l.load(a.serverUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",r,o,n):l.load(a.serverUrl+"/statics/3d-models/"+e+".glb",r,o,n)})));case 5:case"end":return r.stop()}}),n)})))()},addDefaultLightTo3DScene:function(e){var t=new st["DirectionalLight"](14540253);t.position.set(0,1,1).normalize(),e.add(t),e.add(new st["AmbientLight"](11579568))},displaySuccessMessage:function(e,t,s){this.displaySuccessIcon=!0,vt(t,e?"rightAnswer":"wrongAnswer",s)},readMore:function(){this.step.extraText&&(this.story.step=6,this.story.data={readMore:nt.replaceBreakByBR(this.step.extraText),character:this.customization&&this.customization.character&&""!==this.customization.character?-1===this.customization.character.indexOf("blob:")?this.serverUrl+"/upload/quest/"+this.customization.character:this.customization.character:"2"})},clearAllCameraStreams:function(){this.isIOs&&CameraPreview?CameraPreview.stopCamera():this.$store.dispatch("clearMediaStreams")},resetDrawDirectionInterval:function(){var e=this.$store.state.questSteps.geolocation.drawDirectionInterval;null!==e&&window.clearInterval(e),this.$store.dispatch("setDrawDirectionInterval",null)},handleMotionEvent:function(e){var t=this.deviceMotion,s=!0;if(null!==this.deviceHasGyroscope||this.isIOs||(this.deviceHasGyroscope="rotationRate"in e&&"alpha"in e.rotationRate&&null!==e.rotationRate.alpha,"geolocation"!==this.step.type)){if(this.deviceHasGyroscope&&null!==this.geolocation.GPSdistance&&null!==this.geolocation.absoluteOrientationSensor&&this.geolocation.absoluteOrientationSensor.quaternion&&!isNaN(this.geolocation.position.x)&&!isNaN(this.geolocation.position.y)||(s=!1),!s)return t.acceleration.avgData={x:[],y:[],z:[]},t.velocity={x:0,y:0},void(t.dateLatestEvent=null);null===t.idleAccelerationInterval&&(t.idleAccelerationInterval=nt.setInterval((function(){t.isAccelerationIdle=!0}),1e3));var a=e.acceleration,r=new st["Vector3"](a.x,a.y,a.z);t.acceleration.raw=r,t.acceleration.avgData.x.push(t.acceleration.raw.x),t.acceleration.avgData.y.push(t.acceleration.raw.y),t.acceleration.avgData.z.push(t.acceleration.raw.z),t.acceleration.avgData.x.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.x.shift(),t.acceleration.avgData.y.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.y.shift(),t.acceleration.avgData.z.length>t.acceleration.maxAvgItems&&t.acceleration.avgData.z.shift(),t.acceleration.filtered.x=nt.arrayAverage(t.acceleration.avgData.x),t.acceleration.filtered.y=nt.arrayAverage(t.acceleration.avgData.y),t.acceleration.filtered.z=nt.arrayAverage(t.acceleration.avgData.z),t.isAccelerationIdle=t.isAccelerationIdle&&Math.pow(t.acceleration.filtered.x,2)+Math.pow(t.acceleration.filtered.y,2)+Math.pow(t.acceleration.filtered.z,2)<.5}else window.removeEventListener("devicemotion",this.handleMotionEvent,!0)},updatePlayerCanTouchTarget:function(){var e=10;this.step.options.hasOwnProperty("touchDistance")&&"number"===typeof this.step.options.touchDistance&&this.step.options.touchDistance>0&&(e=this.step.options.touchDistance),!this.geolocation.canTouchTarget&&this.geolocation.GPSdistance<=e&&(this.geolocation.canTouchTarget=!0)},waitForGyroscopeDetection:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.abrupt("return",new Promise((function(t,a){null!==e.deviceHasGyroscope||e.geolocation.gyroscopeDetectionCounter>40?t():(e.geolocation.gyroscopeDetectionCounter++,nt.setTimeout(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.waitForGyroscopeDetection();case 2:t();case 3:case"end":return e.stop()}}),e)}))),250))})));case 2:case"end":return t.stop()}}),t)})))()},enlargeThePicture:function(e){this.enlargePicture.show=!0;var t=this.step.options.images[this.playerCode[e]].imagePath;this.enlargePicture.url=t&&-1!==t.indexOf("blob:")?t:this.serverUrl+"/upload/quest/"+this.step.questId+"/step/code-image/"+t},triggerIotEvent:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("mqtt"!==t.step.options.protocol){s.next=4;break}t.mqttClient.publish("Graaly",JSON.stringify({macAddress:t.step.options.boardMacAddress,code:t.step.options.code})),s.next=31;break;case 4:if("bluetooth"!==t.step.options.protocol){s.next=30;break}s.t0=t.step.options.object,s.next="lcd"===s.t0?8:"buzzer"===s.t0?10:"chest"===s.t0?12:"relay"===s.t0?15:18;break;case 8:return a=t.step.options.message,s.abrupt("break",19);case 10:return a=t.step.options.duration+","+t.step.options.frequency,s.abrupt("break",19);case 12:return t.iot.chest.disableActionButtons=!0,a=e,s.abrupt("break",19);case 15:return t.iot.relay.disableActionButtons=!0,a=e,s.abrupt("break",19);case 18:throw new Error("Object '"+t.step.options.object+"' not supported");case 19:if(t.sendMessageToBluetoothServer(t.step.options.object+":"+a),"chest"!==t.step.options.object){s.next=24;break}return s.next=23,nt.sleep(2e3);case 23:t.iot.chest.disableActionButtons=!1;case 24:if("relay"!==t.step.options.object){s.next=28;break}return s.next=27,nt.sleep(2e3);case 27:t.iot.relay.disableActionButtons=!1;case 28:s.next=31;break;case 30:throw new Error("IoT protocol not supported: "+t.step.options.protocol);case 31:case"end":return s.stop()}}),s)})))()},bluetoothEnableSuccess:function(){console.log("Bluetooth is enabled"),this.bluetooth.enabled=!0,this.searchForBluetoothPeripheral()},bluetoothDisconnect:function(e){if(this.isHybrid){console.log("Disconnecting BLE");var t=this;ble.disconnect(e,(function(){t.bluetooth.enabled=!1,t.bluetooth.deviceId=null}))}},bluetoothEnableFailure:function(){console.log("The user did *not* enable Bluetooth"),vt("Bluetooth could not be enabled","error")},searchForBluetoothPeripheral:function(){console.log("Searching for BT peripherals..."),ble.startScan([],this.bluetoothScanResult)},bluetoothScanResult:function(){var e=o()(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Device discovered",t),console.log(this.step.options.deviceid),t.name!==this.step.options.deviceid){e.next=8;break}return e.next=5,this.stopBluetoothScan();case 5:console.log("Graaly IoT BT device discovered"),this.bluetooth.deviceId=t.id,ble.connect(t.id,this.bluetoothDeviceConnected,this.bluetoothDeviceDisonnected);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceConnected:function(){var e=o()(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("BT device connected",t),e.next=3,this.sendMessageToBluetoothServer("cm:"+this.step.options.object);case 3:"wait-for-event"===this.step.type&&(console.log("Start notification listening"),ble.startNotification(t.id,this.iotObject.bleServiceId,this.iotObject.bleCharacteristicId,this.onBluetoothNotification,(function(e){return console.error(e)}))),"trigger-event"!==this.step.type||this.step.options.triggerMode&&"auto"!==this.step.options.triggerMode||("chest"===this.step.options.object||"relay"===this.step.options.object?this.triggerIotEvent("open"):this.triggerIotEvent(""));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),bluetoothDeviceDisonnected:function(e){console.log("BT device disconnected",e)},onBluetoothNotification:function(){var e=o()(r.a.mark((function e(t){var s,a,n,o,i,l,c,u,d,p,m;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=nt.bytesToString(t),console.log("Received BT notification: "+s),this.lastReceivedValue=s,null===this.playerResult){e.next=5;break}return e.abrupt("return");case 5:e.t0=this.step.options.object,e.next="keypad"===e.t0?8:"joystick"===e.t0?22:"distance"===e.t0?30:"pot"===e.t0?33:"button"===e.t0?40:"escapebox"===e.t0?45:46;break;case 8:if(!(s.length<8)){e.next=10;break}throw new Error("Invalid data retrieved from IoT device (keypad mode): "+s);case 10:if(this.iot.keypadAnswer=nt.replaceStringAt(this.iot.keypadAnswer,this.iot.keypadAnswer.indexOf("_"),s.charAt(7)),-1!==this.iot.keypadAnswer.indexOf("_")){e.next=21;break}if(this.iot.keypadAnswer!==this.step.options.answer){e.next=16;break}this.checkAnswer(),e.next=21;break;case 16:return this.playerResult=!1,e.next=19,nt.sleep(1e3);case 19:this.iot.keypadAnswer="_".repeat(this.step.options.answer.length),this.playerResult=null;case 21:return e.abrupt("break",47);case 22:if(n=s.match(new RegExp("(\\d+)","g")),a=!0,2===n.length){e.next=26;break}throw new Error("Invalid length for array 'axisValues'");case 26:for(n={X:n[1],Y:n[0]},o=0,i=["X","Y"];o<i.length;o++)l=i[o],c=parseInt(n[l],10),this.iot["axis"+l]=c/255,(c<this.step.options["range"+l].min||c>this.step.options["range"+l].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 30:return this.iot.distance=parseInt(s.substring(9),10),this.iot.distance>=this.step.options.range.min&&this.iot.distance<=this.step.options.range.max&&this.checkAnswer(),e.abrupt("break",47);case 33:if(u=s.match(new RegExp("(\\d+)","g")),a=!0,3===u.length){e.next=37;break}throw new Error("Invalid length for array 'potValues'");case 37:for(d=0;d<3;d++)p=parseInt(u[d],10),this.iot["pot"+(d+1)]=p/255,(p<this.step.options["range"+(d+1)].min||p>this.step.options["range"+(d+1)].max)&&(a=!1);return a&&this.checkAnswer(),e.abrupt("break",47);case 40:if(!(s.length<8)){e.next=42;break}throw new Error("Invalid data retrieved from IoT device (button mode): "+s);case 42:return m=s.substring(7),"pressed"===m&&this.checkAnswer(),e.abrupt("break",47);case 45:return e.abrupt("break",47);case 46:throw new Error("Unknown IoT object code '"+this.step.options.object+"'");case 47:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendMessageToBluetoothServer:function(e){var t=this;return new Promise((function(s,a){t.bluetooth.enabled&&null!==t.bluetooth.deviceId?(console.log("sendMessageToBluetoothServer: "+e),ble.writeWithoutResponse(t.bluetooth.deviceId,ya.baseServiceID,t.createIotCara(t.bluetooth.deviceId),nt.stringToBytes(e),(function(e){console.log("BLE write success",e),s()}),(function(e){console.log("BLE write failure",e),a(e)}))):a(new Error("Bluetooth device not connected"))}))},stopBluetoothScan:function(){var e=o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ble.stopScan((function(){console.log("BT Scan stopped")}),(function(e){console.log("Could not stop BT scan",e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stopBluetoothNotification:function(){if(this.isHybrid){var e=this;return new Promise((function(t,s){ble.stopNotification(e.bluetooth.deviceId,ya.baseServiceID,e.createIotCara(e.bluetooth.deviceId),(function(){t()}),(function(e){s(new Error("Could not stop bluetooth notifications. error: "+e))}))}))}},getIotObjectFromCode:function(e){var t=!0,s=!1,a=void 0;try{for(var r,n=wa[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;if(o.code===e)return o}}catch(i){s=!0,a=i}finally{try{t||null==n.return||n.return()}finally{if(s)throw a}}throw new Error("Unknown object code '"+e+"'")},createIotCara:function(e){var t=ya.baseCara+e.toLowerCase().replaceAll(":","");return t},isTimerAvailable:function(){return!!(this.step&&void 0!==this.step.countDownTime&&null!==this.step.countDownTime&&!0===this.step.countDownTime.enabled&&nt.timeStringToSeconds(this.step.countDownTime.time)>0)},startCountdown:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==e.isTimerAvailable()){t.next=11;break}if(s=0,a=ga.getTimeLeft(e.runId,e.step._id),s=null===a?nt.timeStringToSeconds(e.step.countDownTime.time):a,!(s<0&&e.step.countDownTime)){t.next=9;break}e.step.countDownTime.enabled=!1,t.next=11;break;case 9:return t.next=11,e.manageCountDown(s,e.step._id);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("error in countdown()",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},manageCountDown:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=s,s.step.countDownTime&&s.step.countDownTime.enabled&&t===s.step._id&&setTimeout(o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(e<=0)){s.next=5;break}return s.next=3,n.handleTimeUp();case 3:s.next=10;break;case 5:return e--,n.countdowntimeleft=e,e%2===0&&"0"!==n.runId&&ga.storeTimeLeft(n.runId,n.step._id,e),s.next=10,n.manageCountDown(e,t);case 10:case"end":return s.stop()}}),s)}))),1e3);case 2:case"end":return a.stop()}}),a)})))()},handleTimeUp:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTimeUp=!0,e.stopcountdown(),e.step.countDownTime&&(e.step.countDownTime.enabled=!1),s=e.getStepType(e.step.type),e.$emit("closeAllPanels"),"enigma"!==s.category){t.next=8;break}return t.next=8,e.checkAnswer();case 8:case"end":return t.stop()}}),t)})))()},stopcountdown:function(){this.step.countDownTime&&(this.step.countDownTime.enabled=!1)},map:function(e,t,s,a,r){var n=nt.map(e,t,nt.timeStringToSeconds(s),a,r);return n},getStepType:function(e){var t=!0,s=!1,a=void 0;try{for(var r,n=qa[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;if(o.code===e)return o}}catch(i){s=!0,a=i}finally{try{t||null==n.return||n.return()}finally{if(s)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},findItemIsFound:function(e){for(var t=!1,s=!1,a=e&&e.windowWidth?e.windowWidth:this.getFindItemPictureSize()/100,r=0;r<this.step.options.coordinates.length;r++)if(!this.step.options.coordinates[r].found){var n={left:Math.round(this.step.options.coordinates[r].left/100*100*a),top:Math.round(this.step.options.coordinates[r].top/100*133*a)},o=Math.round(8*a),i=e?Math.sqrt(Math.pow(n.left-e.posX,2)+Math.pow(n.top-e.posY,2)):100;i<=o?(this.step.options.coordinates[r].found=!0,s=!0,document.getElementById("cross-play"+r).style.left=n.left-o+"px",document.getElementById("cross-play"+r).style.top=n.top-o+"px",document.getElementById("cross-play"+r).style.display="block"):t=!0}return{all:!t,one:s}},getAudioSound:function(){this.step.audioStream&&""!==this.step.audioStream?-1!==this.step.audioStream.indexOf("blob:")?this.audio=this.step.audioStream:this.audio=this.serverUrl+"/upload/quest/"+this.step.questId+"/audio/"+this.step.audioStream:this.audio=null}}},Ya=Ua,Ha=(s("4d2b"),Object(_e["a"])(Ya,ma,ha,!1,null,"1b6a08c3",null)),Ga=Ha.exports,Wa=s("53fe"),Va=s.n(Wa);l["a"].directive("sortable",{inserted:function(e,t){return new Va.a(e,t.value||{})}});var Ja={components:{stepPlay:Ga,story:Ma,chat:pa,Notify:qe["a"]},data:function(){return this.initialState()},mounted:function(){nt.clearAllRunningProcesses(),this.initData(),this.keepScreenAwake(),this.isHybrid&&"android"===cordova.platformId&&StatusBar.show()},methods:{initialState:function(){return{footer:{show:!0,tabSelected:"none"},inventory:{isOpened:!1,suggest:!1,items:[],show:!0,detail:{isOpened:!1,url:"",zoom:1}},hint:{isOpened:!1,label:"",suggest:!1,show:!1,used:!1,number:0,remainingNumber:0},info:{isOpened:!1,score:0,quest:{},audio:""},chat:{isOpened:!1},next:{suggest:!1,enabled:!1,canPass:!1},sound:{status:"play",tempMute:!1},questId:this.$route.params.questId,questVersion:this.$route.params.version,step:{},story:{step:null,data:null},loadStepData:!1,run:{},runId:0,player:"P1",isRunFinished:!1,remotePlay:!1,dataSharedWithPartner:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",nbTry:0,controlsAreDisplayed:!1,lang:this.$route.params.lang,offline:{active:!0,answer:null},warnings:{inventoryMissing:!1,questDataMissing:!1,stepDataMissing:!1,isNetworkLow:!1},feedback:{isOpened:!1,message:""},startDate:{enabled:!1,remainingHours:"-",remainingMinutes:"-",remainingSeconds:"-",remainingDays:"-"},previousStepId:"",isIOs:nt.isIOS(),countDownTime:{remaining:0},selectedItem:null}},resetData:function(){var e=this.initialState();this.inventory=e.inventory,this.hint=e.hint,this.step=e.step,this.next=e.next,this.nbTry=e.nbTry,this.warnings=e.warnings,this.selectedItem=e.selectedItem,this.loadStepData=e.loadStepData,this.startDate=e.startDate,this.footer=e.footer,this.offline=e.offline},initData:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,e.getQuest(e.questId);case 3:return e.getAudioSound(),e.startFullScreen(),e.loadStepData=!1,t.next=8,e.getRun();case 8:return t.next=10,e.getPlayer();case 10:return e.player=t.sent,t.next=13,e.getStep();case 13:if(e.sendStepIdToParent(),e.info.quest.customization.chatEnabled&&e.sendDataToGameMaster(),e.updateHistory(),e.startCountDown(),e.checkIfAlreadyPlayed(),"use-item"!==e.step.type){t.next=21;break}return t.next=21,e.fillInventory();case 21:e.$q.loading.hide(),e.isHintAvailable()&&(nt.setTimeout(e.alertOnHint,12e3),e.hint.show=!0),nt.setTimeout(e.alertOnNext,18e4),e.loadStepData=!0;case 25:case"end":return t.stop()}}),t)})))()},SendChatMessage:function(){aa.SendChat(this.run.questId,{time:Date.now(),player:{id:this.run.userId[0],name:this.run.userData.name},quest:{id:this.run.questId},step:{id:this.step.id,title:this.step.title}})},sendDataToGameMaster:function(){aa.Send(this.run.questId,{lastPing:Date.now(),quest:{id:this.run.questId},player:{id:this.run.userId[0],name:this.run.userData.name},step:{id:this.step.id,title:this.step.title},run:{id:this.run._id,currentStep:this.run.currentStep,currentChapter:this.run.currentChapter,score:this.run.score,status:this.run.status,answers:this.run.answers,conditions:this.run.conditionsDone,createdAt:Date.parse(this.run.dateCreated),version:this.run.version},position:{lat:Math.random()+5.7167,lng:Math.random()+45.1667},device:this.$q.platform.is,graaly:"2.1.34"}),nt.setTimeout(this.sendDataToGameMaster,15e3)},openChat:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.chat.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.chat.isOpened=!0,e.footer.tabSelected="info"),e.$store.commit("setChatNotification",0);case 2:case"end":return t.stop()}}),t)})))()},moveToStep:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return nt.clearAllRunningProcesses(),t.resetData(),t.$q.loading.show(),t.loadStepData=!1,s.next=6,t.getRun();case 6:return s.next=8,t.getPlayer();case 8:return t.player=s.sent,s.next=11,t.getStep(!1,e);case 11:if(t.sendStepIdToParent(),t.updateHistory(),t.manageAudio(),t.checkIfAlreadyPlayed(),"use-item"!==t.step.type){s.next=18;break}return s.next=18,t.fillInventory();case 18:t.$q.loading.hide(),t.isHintAvailable()&&(nt.setTimeout(t.alertOnHint,12e3),t.hint.show=!0),nt.setTimeout(t.alertOnNext,18e4),t.loadStepData=!0;case 22:case"end":return s.stop()}}),s)})))()},getRun:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l,c,u,d;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ps.listForAQuest(e.questId,{retries:0});case 2:return s=t.sent,a=0,n=!!e.$route.query.hasOwnProperty("remoteplay")&&e.$route.query.remoteplay,o=e.$route.query.hasOwnProperty("sharepartner")&&"true"===e.$route.query.sharepartner,t.next=8,e.checkIfRunIsAlreadyLoaded(e.questId);case 8:if(i=t.sent,!i){t.next=13;break}return t.next=12,e.loadOfflineRun(e.questId);case 12:l=t.sent;case 13:if(!s||!s.data){t.next=63;break}e.offline.active=!1,c=0;case 16:if(!(c<s.data.length)){t.next=38;break}if(s.data[c]&&s.data[c].status&&"finished"===s.data[c].status&&(e.isRunFinished=!0),!s.data[c]||!s.data[c].status||"in-progress"!==s.data[c].status){t.next=35;break}if(e.run=s.data[c],e.runId=e.run._id,a=s.data[c].currentChapter,!i){t.next=35;break}if(!(l.dateUpdated>e.run.dateUpdated)){t.next=32;break}return u=e.run._id,e.run=l,e.run._id||(e.run._id=u,e.runId=u),e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=30,Ps.updateFromOffline(e.run);case 30:t.next=35;break;case 32:return e.run.answers=l.answers,t.next=35,e.updateOfflineRun(e.questId);case 35:c++,t.next=16;break;case 38:if(0!==a){t.next=60;break}return t.next=41,Ps.init(e.questId,e.questVersion,e.$route.params.lang,n,null,o);case 41:if(d=t.sent,!(d&&200===d.status&&d.data&&d.data._id)){t.next=56;break}if(!i){t.next=52;break}return e.run=l,e.run._id=d.data._id,e.runId=e.run._id,e.run.questId||(e.run.questId=e.questId,e.run.version=e.questVersion),t.next=50,Ps.updateFromOffline(e.run);case 50:t.next=54;break;case 52:e.run=d.data,e.runId=e.run._id;case 54:t.next=57;break;case 56:e.$q.dialog({title:e.$t("label.TechnicalProblem"),message:e.$t("label.TechnicalProblemNetworkIssue")}).onOk((function(){e.$router.push("/quest/play/"+e.questId)}));case 57:e.info.score=0,t.next=61;break;case 60:e.info.score=e.run.tempScore;case 61:t.next=70;break;case 63:if(e.offline.active=!0,!i){t.next=68;break}l&&(e.run=l,e.run._id&&(e.runId=e.run._id),e.info.score=e.run.tempScore,a=e.run.currentChapter),t.next=70;break;case 68:return t.next=70,e.updateOfflineRun(e.questId);case 70:if(0!==a){t.next=73;break}return t.next=73,e.updateOfflineRun(e.questId);case 73:case"end":return t.stop()}}),t)})))()},getPlayer:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.run.team||!e.run.team.members){t.next=8;break}s=0;case 2:if(!(s<e.run.team.members.length)){t.next=8;break}if(e.run.team.members[s]._id!==e.$store.state.user._id){t.next=5;break}return t.abrupt("return",e.run.team.members[s].player);case 5:s++,t.next=2;break;case 8:return t.abrupt("return","P1");case 9:case"end":return t.stop()}}),t)})))()},getStep:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C,S,_,T;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=s.$store.state.user._id===s.info.quest.authorUserId,o=Array.isArray(s.info.quest.editorsUserId)&&s.info.quest.editorsUserId.includes(s.$store.state.user._id),i=s.$store.state.user.isAdmin||n||o,s.warnings.stepDataMissing=!1,s.info.quest.customization&&s.info.quest.customization.forceOnline&&(e=!0),!t){a.next=9;break}l=t,a.next=53;break;case 9:if(s.offline.active&&!i){a.next=16;break}return a.next=12,Ps.getNextStep(s.questId,s.player);case 12:if(c=a.sent,!c||200===c.status){a.next=16;break}return"app_quest_data_is_obsolete"===c.data.message?s.$q.dialog({title:s.$t("label.QuestUpdated"),message:s.$t("label.PleaseRestartQuest")}).onOk((function(){s.$router.push("/quest/play/"+s.questId)})):s.$q.dialog({title:s.$t("label.TechnicalProblem")}).onOk((function(){s.$router.push("/quest/play/"+s.questId)})),a.abrupt("return",!1);case 16:if(!c||!c.data||200!==c.status){a.next=37;break}if(!c.data.next){a.next=32;break}if("locationMarker"!==c.data.next){a.next=23;break}return s.step={id:"sensor"},a.abrupt("return",!1);case 23:if("geolocation"!==c.data.next){a.next=28;break}return s.step={id:"gpssensor",locations:c.data.extra.locations,steps:c.data.extra.geosteps,questId:s.questId,version:s.questVersion},a.abrupt("return",!1);case 28:l=c.data.next;case 29:c.data.extra&&"removehistory"===c.data.extra&&s.removeHistory(),a.next=35;break;case 32:return s.info.quest.playersNumber&&s.info.quest.playersNumber>1&&s.showWaitingPage(),s.getPreviousStep(),a.abrupt("return",!1);case 35:a.next=53;break;case 37:return a.next=39,s.getNextOfflineStep(s.questId,null,s.player);case 39:if(u=a.sent,u&&u.id){a.next=46;break}return s.info.quest.playersNumber&&s.info.quest.playersNumber>1&&s.showWaitingPage(),s.getPreviousStep(),a.abrupt("return",!1);case 46:l=u.id;case 47:if("locationMarker"!==l){a.next=50;break}return s.step={id:"sensor"},a.abrupt("return",!1);case 50:if("geolocation"!==l){a.next=53;break}return s.step={id:"gpssensor",locations:u.extra.locations,steps:u.extra.geosteps,questId:s.questId,version:s.questVersion},a.abrupt("return",!1);case 53:if("end"!==l){a.next=55;break}return a.abrupt("return",s.$router.push("/quest/"+s.questId+"/end"));case 55:return a.next=57,s.checkIfStepIsAlreadyLoaded(l);case 57:if(d=a.sent,d&&!e){a.next=70;break}return a.next=61,As.getById(l,s.questVersion,s.lang);case 61:if(p=a.sent,!p||!p.data||200!==p.status){a.next=66;break}p.data&&p.data.message?"Step not yet available"===p.data.message&&s.showStepBlockedMessage(p.data.startDate):(s.step=p.data,s.step.id=s.step.stepId,s.getPreviousStep(),s.step.hint&&(s.hint.remainingNumber=s.step.hint.length)),a.next=68;break;case 66:return s.warnings.stepDataMissing=!0,a.abrupt("return",!1);case 68:a.next=161;break;case 70:return a.next=72,nt.readFile(s.questId,"step_"+l+".json");case 72:if(m=a.sent,m){a.next=84;break}if(!e){a.next=78;break}s.warnings.questDataMissing=!0,a.next=82;break;case 78:return a.next=80,s.getStep(!0,t);case 80:return h=a.sent,a.abrupt("return",h);case 82:a.next=161;break;case 84:if(f=JSON.parse(m),f.hint&&(s.hint.remainingNumber=f.hint.length),g=s.offlineCheckAccess(f),g&&g.message&&"Step not yet available"===stepAccessMessage&&s.showStepBlockedMessage(g.startDate),!f.backgroundImage){a.next=93;break}return a.next=91,nt.readBinaryFile(s.questId,f.backgroundImage);case 91:b=a.sent,b?f.backgroundImage=b:s.warnings.stepDataMissing=!0;case 93:if(!f.videoStream||""===f.videoStream){a.next=98;break}return a.next=96,nt.readBinaryFile(s.questId,f.videoStream);case 96:v=a.sent,v?f.videoStream=v:s.warnings.stepDataMissing=!0;case 98:if(!f.audioStream||""===f.audioStream||s.isIOs){a.next=103;break}return a.next=101,nt.readBinaryFile(s.questId,f.audioStream);case 101:w=a.sent,w?f.audioStream=w:s.warnings.stepDataMissing=!0;case 103:if("choose"!==f.type||!f.options){a.next=114;break}y=0;case 105:if(!(y<f.options.items.length)){a.next=114;break}if(!f.options.items[y].imagePath){a.next=111;break}return a.next=109,nt.readBinaryFile(s.questId,f.options.items[y].imagePath);case 109:q=a.sent,q?f.options.items[y].imagePath=q:s.warnings.stepDataMissing=!0;case 111:y++,a.next=105;break;case 114:if("memory"!==f.type||!f.options||!f.options.items){a.next=125;break}y=0;case 116:if(!(y<f.options.items.length)){a.next=125;break}if(!f.options.items[y].imagePath){a.next=122;break}return a.next=120,nt.readBinaryFile(s.questId,f.options.items[y].imagePath);case 120:k=a.sent,k?f.options.items[y].imagePath=k:s.warnings.stepDataMissing=!0;case 122:y++,a.next=116;break;case 125:if("code-image"!==f.type||!f.options||!f.options.images){a.next=136;break}y=0;case 127:if(!(y<f.options.images.length)){a.next=136;break}if(!f.options.images[y].imagePath){a.next=133;break}return a.next=131,nt.readBinaryFile(s.questId,f.options.images[y].imagePath);case 131:x=a.sent,x?f.options.images[y].imagePath=x:s.warnings.stepDataMissing=!0;case 133:y++,a.next=127;break;case 136:if("jigsaw-puzzle"!==f.type||!f.options||!f.options.picture||""===f.options.picture){a.next=141;break}return a.next=139,nt.readBinaryFile(s.questId,f.options.picture);case 139:C=a.sent,C?f.options.picture=C:s.warnings.stepDataMissing=!0;case 141:if("new-item"!==f.type||!f.options||!f.options.picture||""===f.options.picture){a.next=146;break}return a.next=144,nt.readBinaryFile(s.questId,f.options.picture);case 144:S=a.sent,S&&(f.options.picture=S,f.options.hasOwnProperty("pictures")&&f.options.pictures[s.lang]&&(f.options.pictures[s.lang]=S));case 146:if("character"!==f.type||!f.options||!f.options.character||""===f.options.character||"usequestcharacter"===f.options.character){a.next=151;break}return a.next=149,nt.readBinaryFile(s.questId,f.options.character);case 149:_=a.sent,_&&(f.options.character=_);case 151:if("find-item"!==f.type&&"use-item"!==f.type||!f.options||!f.options.altFile||""===f.options.altFile){a.next=156;break}return a.next=154,nt.readBinaryFile(s.questId,f.options.altFile);case 154:T=a.sent,T&&(f.options.altFile=T);case 156:return s.step=f,s.step.id=s.step.stepId,s.getPreviousStep(),s.offline.answer=s.step.answers,a.abrupt("return",!0);case 161:case"end":return a.stop()}}),a)})))()},sendStepIdToParent:function(){try{window.self!==window.top&&(document.domain="graaly.com",parent.document.getElementById("stepid").value=this.step.id)}catch(e){console.log(e)}},showWaitingPage:function(){var e=this;this.step={id:"waiting"},this.next.enabled=!1,this.next.canPass=!1,setTimeout(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.moveToStep();case 1:case"end":return t.stop()}}),t)}))),15e3)},checkIfAlreadyPlayed:function(){var e=this.run.conditionsDone;e&&"undefined"!==typeof this.step.stepId&&-1!==e.indexOf("stepDone_"+this.step.stepId)&&(this.next.canPass=!0)},updateHistory:function(){this.$store.state.history&&this.$store.state.history.items||this.removeHistory(),-1===this.$store.state.history.items.indexOf(this.step.stepId)&&this.step.stepId&&this.$store.state.history.items.push(this.step.stepId)},removeHistory:function(){this.$store.state.history={items:[],index:0}},getPreviousStep:function(){(this.step.conditions&&this.step.conditions.length>0||"waiting"===this.step.id)&&(this.previousStepId="ok")},startCountDown:function(){if(this.info.quest.countDownTime&&this.info.quest.countDownTime.enabled){var e=nt.getDurationFromNow(this.run.dateCreated),t=this.info.quest.duration-e.m;if(t>0)this.countDownTime.enabled=!0,this.countDownTime.remainingMinutes=t,this.countDownTime.remaining=t/this.info.quest.duration,setTimeout(this.startCountDown,6e4);else if(this.info.quest.countDownTime.stopGame)return this.$router.push("/quest/"+this.questId+"/end")}},trackStepSuccess:function(e,t,s,a){var n=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s&&(n.info.score+=e),"image-over-flow"!==n.step.type&&"binocular"!==n.step.type&&n.hideHint(),t.next=4,n.saveOfflineAnswer(!0);case 4:!1===n.step.displayRightAnswer&&n.nextStep();case 5:case"end":return t.stop()}}),t)})))()},trackStepPlayed:function(e,t){var s=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("sensor"!==s.step.id){t.next=5;break}return t.next=3,s.getMarkerStep(e);case 3:t.next=19;break;case 5:if("gpssensor"!==s.step.id){t.next=10;break}return t.next=8,s.getNextGPSStep();case 8:t.next=19;break;case 10:if("waiting"!==s.step.id){t.next=15;break}return t.next=13,s.getMarkerStep(e);case 13:t.next=19;break;case 15:s.next.enabled=!0,"image-over-flow"!==s.step.type&&"binocular"!==s.step.type&&(s.next.suggest=!0,s.hint.show=!1,s.hint.suggest=!1),s.inventory.show=!1,s.footer.tabSelected="next";case 19:case"end":return t.stop()}}),t)})))()},trackStepPass:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:(!e.step.canPass&&!1!==e.step.canPass||!0===e.step.canPass)&&(e.next.canPass=!0);case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(e,t,s){var a=this;return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.hideHint(),e.next=3,a.saveOfflineAnswer(!1,s);case 3:!1===a.step.displayRightAnswer&&a.nextStep();case 4:case"end":return e.stop()}}),e)})))()},trackMessage:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.next.suggest=!0);case 1:case"end":return s.stop()}}),s)})))()},getMarkerStep:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.offline.active){s.next=4;break}return s.next=3,Ps.getMarkerNextStep(t.questId,e,t.player);case 3:n=s.sent;case 4:if(!n||!n.data){s.next=8;break}n.data.next?a=n.data.next:vt(t.$t("label.NothingOccurs"),"info"),s.next=12;break;case 8:return s.next=10,t.getNextOfflineStep(t.questId,e,t.player);case 10:o=s.sent,o&&(a=o.id);case 12:if(!a){s.next=26;break}if("end"!==a){s.next=25;break}if(!t.$store.state.user.isAdmin){s.next=18;break}return s.abrupt("return",t.$router.push("/admin/validate/"+t.questId));case 18:if(t.$store.state.user._id!==t.info.quest.authorUserId){s.next=22;break}return s.abrupt("return",t.$router.push("/quest/builder/"+t.questId));case 22:return s.abrupt("return",t.$router.push("/quest/"+t.questId+"/end"));case 23:s.next=26;break;case 25:t.moveToStep(a);case 26:case"end":return s.stop()}}),s)})))()},getNextGPSStep:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Ps.getNextStep(e.questId,e.player);case 3:a=t.sent;case 4:if(!a||!a.data){t.next=8;break}a.data.next?s=a.data.next:vt(e.$t("label.NothingOccurs"),"info"),t.next=12;break;case 8:return t.next=10,e.getNextOfflineStep(e.questId,null,e.player);case 10:n=t.sent,n&&(s=n.id);case 12:if(!s){t.next=26;break}if("end"!==s){t.next=25;break}if(!e.$store.state.user.isAdmin){t.next=18;break}return t.abrupt("return",e.$router.push("/admin/validate/"+e.questId));case 18:if(e.$store.state.user._id!==e.info.quest.authorUserId){t.next=22;break}return t.abrupt("return",e.$router.push("/quest/builder/"+e.questId));case 22:return t.abrupt("return",e.$router.push("/quest/"+e.questId+"/end"));case 23:t.next=26;break;case 25:e.moveToStep(s);case 26:case"end":return t.stop()}}),t)})))()},hideHint:function(){this.step.hint={}},getBackgroundImage:function(){return this.info.quest.picture&&"_"===this.info.quest.picture[0]?"statics/images/quest/"+this.info.quest.picture:this.info.quest.picture&&-1!==this.info.quest.picture.indexOf("blob:")?this.info.quest.picture:this.info.quest.picture?this.serverUrl+"/upload/quest/"+this.info.quest.picture:"statics/images/quest/default-quest-picture.png"},getLogoImage:function(){return this.info.quest.customization&&this.info.quest.customization.logo&&-1!==this.info.quest.customization.logo.indexOf("blob:")?this.info.quest.customization.logo:this.serverUrl+"/upload/quest/"+this.info.quest.customization.logo},getAudioSound:function(){this.info.quest.customization&&this.info.quest.customization.audio?-1!==this.info.quest.customization.audio.indexOf("blob:")?this.info.audio=this.info.quest.customization.audio:this.info.audio=this.serverUrl+"/upload/quest/"+this.info.quest.customization.audio:this.info.audio=null},nextStep:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.step&&t.step.id){s.next=2;break}return s.abrupt("return",!1);case 2:if(t.$store.state.history.index++,!(t.$store.state.history.items&&t.$store.state.history.index<t.$store.state.history.items.length)){s.next=6;break}return t.moveToStep(t.$store.state.history.items[t.$store.state.history.index]),s.abrupt("return");case 6:if(t.loadStepData=!1,!t.next.enabled){s.next=12;break}return s.next=10,t.moveToNextStep("success");case 10:s.next=19;break;case 12:if(!t.next.canPass){s.next=19;break}if(!e){s.next=18;break}return s.next=16,t.passStep();case 16:s.next=19;break;case 18:t.$q.dialog({dark:!0,message:t.$t("label.ConfirmPass"),ok:t.$t("label.Ok"),cancel:t.$t("label.Cancel")}).onOk(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.passStep();case 2:case"end":return e.stop()}}),e)})))).onCancel((function(){}));case 19:case"end":return s.stop()}}),s)})))()},passStep:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=3;break}return t.next=3,Ps.passStep(e.runId,e.step.id,e.player);case 3:return t.next=5,e.passOfflineStep(e.step.id);case 5:return t.next=7,e.moveToNextStep("pass");case 7:case"end":return t.stop()}}),t)})))()},moveToNextStep:function(e){var t=this;return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveOfflineRun(t.questId,t.run);case 2:t.next.enabled=!1,t.next.suggest=!1,t.next.canPass=!1,"locate-item-ar"!==t.step.type&&"image-over-flow"!==t.step.type||t.isIOs&&(CameraPreview.stopCamera(),CameraPreview.stopCamera()),t.moveToStep();case 7:case"end":return e.stop()}}),e)})))()},previousStep:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=!0,e.$store.state.history.index--,e.$store.state.history.index<0?(e.$store.state.history.index=0,s=!1):e.$store.state.history.items&&e.$store.state.history.index>e.$store.state.history.items.length&&(e.$store.state.history.index=e.$store.state.history.items.length),s&&e.moveToStep(e.$store.state.history.items[e.$store.state.history.index]);case 4:case"end":return t.stop()}}),t)})))()},askForHint:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=3;break}return console.log("hint not available"),t.abrupt("return");case 3:if(e.hint.suggest=!1,!e.hint.isOpened){t.next=8;break}e.closeAllPanels(),t.next=14;break;case 8:if(!e.$store.state.user.bonus||!e.$store.state.user.bonus.name||"infinitehint"!==e.$store.state.user.bonus.name){t.next=13;break}return t.next=11,e.getHint();case 11:t.next=14;break;case 13:e.$q.dialog({dark:!0,message:e.$t("label.ConfirmHint"),ok:e.$t("label.Ok"),cancel:e.$t("label.Cancel")}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHint();case 2:case"end":return t.stop()}}),t)}))));case 14:case"end":return t.stop()}}),t)})))()},getHint:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offline.active){t.next=4;break}return t.next=3,Ps.getHint(e.runId,e.step.stepId,e.run.version);case 3:s=t.sent;case 4:s&&s.hint?e.hint.label=s.hint:e.hint.label=e.step.hint[e.hint.number],e.step.hint&&e.hint.number<e.step.hint.length-1?e.hint.number++:e.hint.number=0,e.hint.used=!0,e.closeAllPanels(),e.hint.isOpened=!0,e.footer.tabSelected="hint",e.hint.remainingNumber>0&&e.hint.remainingNumber--;case 11:case"end":return t.stop()}}),t)})))()},closeAllPanels:function(){this.inventory.isOpened=!1,this.info.isOpened=!1,this.hint.isOpened=!1,this.footer.tabSelected="none",this.chat.isOpened=!1},hideFooterButtons:function(){this.footer.show=!1},showFooterButtons:function(){this.footer.show=!0},keepScreenAwake:function(){window.cordova&&window.plugins.insomnia.keepAwake()},fillInventory:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.warnings.inventoryMissing=!1,e.offline.active){t.next=5;break}return t.next=4,Ps.listWonObjects(e.questId,e.runId);case 4:s=t.sent;case 5:if(!s||!s.data){t.next=10;break}for(e.inventory.items.length=0,a=0;a<s.data.length;a++)e.inventory.items.push({picture:s.data[a].pictures&&s.data[a].pictures[e.lang]?s.data[a].pictures[e.lang]:s.data[a].picture,title:s.data[a].title}),s.data[a].titles&&(e.inventory.items[a].titles=s.data[a].titles);t.next=14;break;case 10:return t.next=12,e.listWonObjects();case 12:n=t.sent,n?e.inventory.items=n:e.warnings.inventoryMissing=!0;case 14:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.inventory.items||0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.footer.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},openInfo:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.info.quest.customization||!e.info.quest.customization.hideMenu){t.next=2;break}return t.abrupt("return",!1);case 2:e.info.isOpened?(e.closeAllPanels(),e.footer.show=!0):(e.closeAllPanels(),e.info.isOpened=!0,e.footer.show=!1);case 3:case"end":return t.stop()}}),t)})))()},backToMap:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$router.push("/home"));case 1:case"end":return t.stop()}}),t)})))()},restartGame:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureToRestartThisQuest"),ok:e.$t("label.Restart"),cancel:e.$t("label.Cancel")}).onOk((function(){s.cancelRun()})).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},cancelRun:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ps.endRun(e.runId,null,e.questId,e.questVersion,e.info.quest.mainLanguage);case 2:return t.next=4,nt.removeDirectory(e.questId);case 4:return t.next=6,e.removeQuestFromOfflineList(e.questId);case 6:e.$router.push("/quest/play/"+e.questId);case 7:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return o()(r.a.mark((function t(){var s,a,n,o,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,nt.readFile("","quests.json");case 6:for(n=t.sent,a=JSON.parse(n),o=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(o=i);return-1!==o&&a.list.splice(o,1),t.next=13,nt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()},showStepBlockedMessage:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.startDate.enabled=!0,t.startDate.date=e,nt.setTimeout(t.computeRemainingTime,1e3);case 3:case"end":return s.stop()}}),s)})))()},computeRemainingTime:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=new Date,a=new Date(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2)-1,e.startDate.date.substr(8,2),0,0,0),n=(a-s.getTime())/1e3,!(n<0)){t.next=7;break}return t.next=6,e.initData();case 6:return t.abrupt("return");case 7:e.startDate.remainingDays=Math.floor(n/86400),e.startDate.remainingHours=Math.floor((n-86400*e.startDate.remainingDays)/3600),e.startDate.remainingMinutes=Math.floor((n-86400*e.startDate.remainingDays-3600*e.startDate.remainingHours)/60),e.startDate.remainingSeconds=Math.floor(n%60),nt.setTimeout(e.computeRemainingTime,1e3);case 12:case"end":return t.stop()}}),t)})))()},getQuest:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c,u,d,p;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s.warnings.questDataMissing=!1,s.info.quest.customization&&s.info.quest.customization.forceOnline&&(t=!0),a.next=4,ot.isCached(e);case 4:if(n=a.sent,n&&!t){a.next=12;break}return a.next=8,ot.getLastById(e);case 8:o=a.sent,o&&o.data?s.info.quest=o.data:s.warnings.questDataMissing=!0,a.next=46;break;case 12:return a.next=14,nt.readFile(e,"quest_"+e+".json");case 14:if(i=a.sent,i){a.next=26;break}if(!t){a.next=20;break}s.warnings.questDataMissing=!0,a.next=24;break;case 20:return a.next=22,s.getQuest(e,!0);case 22:return l=a.sent,a.abrupt("return",l);case 24:a.next=46;break;case 26:return s.info.quest=JSON.parse(i),a.next=29,nt.readBinaryFile(e,s.info.quest.picture);case 29:if(c=a.sent,s.info.quest.picture=c||"_default-quest-picture.png",!s.info.quest.customization||!s.info.quest.customization.logo||""===s.info.quest.customization.logo){a.next=36;break}return a.next=34,nt.readBinaryFile(e,s.info.quest.customization.logo);case 34:u=a.sent,u&&(s.info.quest.customization.logo=u);case 36:if(!s.info.quest.customization||!s.info.quest.customization.audio||""===s.info.quest.customization.audio||s.isIOs){a.next=41;break}return a.next=39,nt.readBinaryFile(e,s.info.quest.customization.audio);case 39:d=a.sent,d&&(s.info.quest.customization.audio=d);case 41:if(!s.info.quest.customization||!s.info.quest.customization.character||""===s.info.quest.customization.character){a.next=46;break}return a.next=44,nt.readBinaryFile(e,s.info.quest.customization.character);case 44:p=a.sent,p&&(s.info.quest.customization.character=p);case 46:case"end":return a.stop()}}),a)})))()},selectItem:function(e){this.inventory.detail.zoom=1,"use-item"!==this.step.type?(this.inventory.detail.isOpened=!0,e.pictures&&e.pictures[this.lang]&&""!==e.pictures[this.lang]?this.inventory.detail.url=e.picture.indexOf("statics/")>-1||-1!==e.picture.indexOf("blob:")?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture:this.inventory.detail.url=e.picture.indexOf("statics/")>-1?e.picture:this.serverUrl+"/upload/quest/"+this.questId+"/step/new-item/"+e.picture,e.titles&&e.titles[this.lang]&&""!==e.titles[this.lang]?this.inventory.detail.title=e.titles[this.lang]:this.inventory.detail.title=e.title):(this.selectedItem=e,this.closeAllPanels())},closeInventoryDetail:function(){this.inventory.detail.isOpened=!1},inventoryZoom:function(e){l["a"].set(this.inventory.detail,"zoom",e),this.$forceUpdate()},showFeedback:function(){this.feedback.isOpened=!0},hideFeedback:function(){this.feedback.isOpened=!1},sendFeedback:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.sendFeedback(e.feedback.message,{questId:e.questId,stepId:e.step.stepId});case 2:s=t.sent,s?(vt(e.$t("label.YourMessageHasBeenSent"),"info"),e.feedback.isOpened=!1):vt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return!!(this.step&&this.step.hint&&""!==this.step.hint&&this.step.hint.length>0)},alertOnHint:function(){this.hint.suggest=!0},alertOnNext:function(){this.next.suggest=!0},checkIfStepIsAlreadyLoaded:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(window.cordova){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,nt.checkIfFileExists(t.questId,"step_"+e+".json");case 4:if(a=s.sent,!a){s.next=9;break}return s.abrupt("return",!0);case 9:return s.abrupt("return",!1);case 10:case"end":return s.stop()}}),s)})))()},checkIfRunIsAlreadyLoaded:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(window.cordova){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,nt.checkIfFileExists(t.questId,"run_"+e+".json");case 4:if(a=s.sent,!a){s.next=9;break}return s.abrupt("return",!0);case 9:return s.abrupt("return",!1);case 10:case"end":return s.stop()}}),s)})))()},loadOfflineRun:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){s.next=2;break}return s.abrupt("return",!1);case 2:return s.next=4,nt.readFile(t.questId,"run_"+e+".json");case 4:if(a=s.sent,a){s.next=9;break}return s.abrupt("return",!1);case 9:return s.abrupt("return",JSON.parse(a));case 10:case"end":return s.stop()}}),s)})))()},updateOfflineRun:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){s.next=2;break}return s.abrupt("return",!1);case 2:return t.run&&t.run.questId||(t.run={_id:t.runId,userId:t.$store.state.user._id,questId:e,version:t.questVersion,status:"in-progress",currentStep:0,currentChapter:0,conditionsDone:["start"],tempScore:0,tempReward:0,score:0,stars:0,reward:0,remotePlay:t.remotePlay,dataSharedWithPartner:t.dataSharedWithPartner,dateCreated:new Date,dateUpdated:new Date,answers:[],questData:{picture:t.info.quest.picture,thumb:t.info.quest.thumb||"default-quest-thumb.png",title:t.info.quest.title,type:t.info.quest.type,zipcode:t.info.quest.location.zipcode,town:t.info.quest.location.town,country:t.info.quest.location.country},language:t.lang,userData:{name:t.$store.state.user.name,picture:t.$store.state.user.picture,location:t.$store.state.user.location},history:[],historyIndex:0}),s.next=5,t.saveOfflineRun(e,t.run);case 5:case"end":return s.stop()}}),s)})))()},saveOfflineAnswer:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c,u,d,p;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(s.info.quest.playersNumber&&s.info.quest.playersNumber>1)){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,s.checkIfStepIsAlreadyPlayedInRun(s.step.stepId,s.player);case 4:if(n=a.sent,o=s.run.conditionsDone,i=!1,l=0,e?(o=s.updateConditions(o,s.step.stepId,!0,s.step.type,!0,s.player),i=!0,l=s.hint.used||s.nbTry>1?s.step.points/2:s.step.points,c="success"):(i=!0,c="fail",o=s.updateConditions(o,s.step.stepId,!1,s.step.type,!0,s.player)),t={stepId:s.step.stepId,stepNumber:s.step.number,nbTry:1,ended:i,score:l,reward:0,status:c,useHint:!1,date:new Date,online:!1},"new-item"===s.step.type&&(s.run.inventory?s.run.inventory.push(s.step.answers):s.run.inventory=[s.step.answers],-1===o.indexOf("objectWon_"+s.step.stepId)&&o.push("objectWon_"+s.step.stepId)),!n){if(u=!1,s.run.answers&&s.run.answers.length>1)for(d=0;d<s.run.answers.length;d++)s.run.answers[d]&&s.run.answers[d].stepId&&null!==s.run.answers[d].stepId&&s.run.answers[d].stepId===s.step.stepId&&(u=!0,t.nbTry=s.run.answers[d].nbTry+1,t.useHint=s.run.answers[d].useHint,s.run.answers[d]=t);u||(s.run.answers||(s.run.answers=[]),s.run.answers.push(t))}return s.run.conditionsDone=o,a.next=15,s.saveOfflineRun(s.questId,s.run);case 15:if(p=a.sent,!p){a.next=18;break}return a.abrupt("return",!0);case 18:return a.abrupt("return",!1);case 19:case"end":return a.stop()}}),a)})))()},passOfflineStep:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){s.next=2;break}return s.abrupt("return",!1);case 2:return t.run.conditionsDone=t.updateConditions(t.run.conditionsDone,e,!1,t.step.type,!0,t.player),s.next=5,t.saveOfflineRun(t.questId,t.run);case 5:case"end":return s.stop()}}),s)})))()},offlineCheckAccess:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!(t.info.quest.playersNumber&&t.info.quest.playersNumber>1)){s.next=2;break}return s.abrupt("return",!1);case 2:if(!(e&&e.startDate&&e.startDate.enabled&&e.startDate.date)){s.next=7;break}if(a=new Date,n=Date.UTC(e.startDate.date.substr(0,4),e.startDate.date.substr(5,2),e.startDate.date.substr(8,2),0,0,0),!(a<n)){s.next=7;break}return s.abrupt("return",{message:"Step not yet available",date:e.startDate.date});case 7:return s.abrupt("return",!0);case 8:case"end":return s.stop()}}),s)})))()},saveOfflineRun:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(s.info.quest.playersNumber&&s.info.quest.playersNumber>1)){a.next=2;break}return a.abrupt("return",!1);case 2:return t.dateUpdated=new Date,a.next=5,nt.writeInFile(s.questId,"run_"+e+".json",JSON.stringify(t),!0);case 5:if(n=a.sent,!n){a.next=10;break}return a.abrupt("return",!0);case 10:return a.abrupt("return",!1);case 11:case"end":return a.stop()}}),a)})))()},getNextOfflineStep:function(e,t,s,a){var n=this;return o()(r.a.mark((function o(){var i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x,C;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=[],s||(s="P1"),r.next=4,n.updateOfflineRun(e);case 4:if(!(n.run.history&&n.run.historyIndex<n.run.history.length)){r.next=9;break}return n.run.historyIndex++,r.next=8,n.saveOfflineRun(e,n.run);case 8:return r.abrupt("return",{id:n.run.history[n.run.historyIndex-1],extra:a});case 9:if(!n.info.quest.steps){r.next=19;break}l=0;case 11:if(!(l<n.info.quest.steps.length)){r.next=19;break}return r.next=14,nt.readFile(e,"step_"+n.info.quest.steps[l]+".json");case 14:c=r.sent,i.push(JSON.parse(c));case 16:l++,r.next=11;break;case 19:if(u=n.run.currentChapter,u){r.next=26;break}if(!(n.info.quest.chapters&&n.info.quest.chapters.length>0)){r.next=25;break}u=n.info.quest.chapters[0],r.next=26;break;case 25:return r.abrupt("return",!1);case 26:if(!t){r.next=66;break}return r.next=29,n.listSpecificTypeForAChapter(i,u,"locate-marker");case 29:if(d=r.sent,p=[],!(d&&d.length>0)){r.next=52;break}l=0;case 33:if(!(l<d.length)){r.next=52;break}if(!t||d[l].answers===t){r.next=36;break}return r.abrupt("continue",49);case 36:if(!n.run.conditionsDone||-1!==n.run.conditionsDone.indexOf("stepDone_"+d[l].stepId)){r.next=49;break}if(!(d[l].conditions&&d[l].conditions.length>0)){r.next=48;break}m=0;case 39:if(!(m<d[l].conditions.length)){r.next=45;break}if(-1!==n.run.conditionsDone.indexOf(d[l].conditions[m])){r.next=42;break}return r.abrupt("continue",49);case 42:m++,r.next=39;break;case 45:p.push({id:d[l].stepId,nbConditions:d[l].conditions.length}),r.next=49;break;case 48:p.push({id:d[l].stepId,nbConditions:0});case 49:l++,r.next=33;break;case 52:if(0!==p.length){r.next=54;break}return r.abrupt("return",{id:"",extra:a});case 54:for(h=0,l=0;l<p.length;l++)p[l].nbConditions>=h&&(f=p[l].id,h=p[l].nbConditions);if("simple"!==n.info.quest.editorMode){r.next=61;break}return r.next=59,n.saveOfflineAnswer("success");case 59:r.next=66;break;case 61:g=n.run.conditionsDone,g.push("stepDone_"+f.toString()),g.push("stepDone"+n.player+"_"+f.toString()),n.run.conditionDone=g,n.run.currentStep=f;case 66:return r.next=68,n.listForAChapter(i,u,s);case 68:if(b=r.sent,v=!1,w=!1,!(b&&b.length>0)){r.next=121;break}l=0;case 73:if(!(l<b.length)){r.next=121;break}if(!n.run.conditionsDone||-1!==n.run.conditionsDone.indexOf("stepDone"+s+"_"+b[l].stepId)){r.next=118;break}if(!(b[l].conditions&&b[l].conditions.length>0)){r.next=83;break}m=0;case 77:if(!(m<b[l].conditions.length)){r.next=83;break}if(-1!==n.run.conditionsDone.indexOf(b[l].conditions[m])){r.next=80;break}return r.abrupt("continue",118);case 80:m++,r.next=77;break;case 83:if("geolocation"!==b[l].type){r.next=91;break}if(!n.info.quest||"advanced"!==n.info.quest.editorMode){r.next=91;break}return w=!0,a||(a={}),a.geosteps||(a.geosteps=[]),a.geosteps.push(b[l].stepId),b[l].options&&b[l].options.locations&&b[l].options.locations.length>0&&(a.locations||(a.locations=[]),a.locations.push({lat:b[l].options.locations[0].lat,lng:b[l].options.locations[0].lng,distance:b[l].options.distance})),r.abrupt("continue",118);case 91:if("locate-marker"!==b[l].type){r.next=98;break}if(!n.info.quest||"advanced"!==n.info.quest.editorMode){r.next=98;break}return v=!0,a||(a={}),a.steps||(a.steps=[]),a.steps.push(b[l].stepId),r.abrupt("continue",118);case 98:if("end-chapter"!==b[l].type){r.next=116;break}if(b[l].options&&b[l].options.resetHistory&&n.removeHistory(),y=void 0,!b[l].options||!b[l].options.resetChapterProgression){r.next=105;break}n.removeAllConditionsOfAChapter(i,n.run.conditionsDone,b[l].chapterId),r.next=108;break;case 105:return r.next=107,n.moveToNextChapter();case 107:y=r.sent;case 108:if("end"===y){r.next=113;break}return r.next=111,n.getNextOfflineStep(e,t,s,a);case 111:q=r.sent,y=q.id;case 113:return r.abrupt("return",{id:y,extra:a});case 116:return k=b[l].stepId,r.abrupt("return",{id:k,extra:a});case 118:l++,r.next=73;break;case 121:if(!n.info.quest||"simple"!==n.info.quest.editorMode||v){r.next=131;break}return r.next=124,n.moveToNextChapter();case 124:if(x=r.sent,"end"===x){r.next=130;break}return r.next=128,n.getNextOfflineStep(e,t,s,a);case 128:C=r.sent,x=C.id;case 130:return r.abrupt("return",{id:x,extra:a});case 131:if(!v||w||!n.info.quest||"advanced"!==n.info.quest.editorMode){r.next=133;break}return r.abrupt("return",{id:"locationMarker",extra:a});case 133:if(!w||!n.info.quest||"advanced"!==n.info.quest.editorMode){r.next=139;break}if(1!==a.geosteps.length){r.next=138;break}return r.abrupt("return",{id:a.geosteps[0],extra:""});case 138:return r.abrupt("return",{id:"geolocation",extra:a});case 139:return r.abrupt("return",{id:"",extra:a});case 140:case"end":return r.stop()}}),o)})))()},listSpecificTypeForAChapter:function(e,t,s){return o()(r.a.mark((function a(){var n,o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=[],e)for(o=0;o<e.length;o++)e[o].chapterId.toString()===t.toString()&&e[o].type.toString()===s.toString()&&n.push(e[o]);return a.abrupt("return",n);case 3:case"end":return a.stop()}}),a)})))()},listForAChapter:function(e,t,s){return o()(r.a.mark((function a(){var n,o;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=[],e)for(o=0;o<e.length;o++)e[o].chapterId!==t||"All"!==e[o].player&&e[o].player!==s&&s||n.push(e[o]);return a.abrupt("return",n);case 3:case"end":return a.stop()}}),a)})))()},listWonObjects:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=[],!(e.run.conditionsDone&&e.run.conditionsDone.length>0)){t.next=29;break}a=0;case 3:if(!(a<e.run.conditionsDone.length)){t.next=29;break}if(-1===e.run.conditionsDone[a].indexOf("objectWon_")){t.next=26;break}return n=e.run.conditionsDone[a].replace("objectWon_",""),t.next=8,nt.readFile(e.questId,"step_"+n+".json");case 8:if(o=t.sent,!o){t.next=26;break}if(i=JSON.parse(o),!(i.options&&i.options.picture&&i.options.title)){t.next=26;break}if(-1!==i.options.picture.indexOf("statics")){t.next=24;break}if(!i.options.pictures||!i.options.pictures[e.lang]||""===i.options.pictures[e.lang]){t.next=19;break}return t.next=16,nt.readBinaryFile(e.questId,i.options.pictures[e.lang]);case 16:l=t.sent,t.next=22;break;case 19:return t.next=21,nt.readBinaryFile(e.questId,i.options.picture);case 21:l=t.sent;case 22:t.next=25;break;case 24:l=i.options.picture;case 25:s.push({step:n,picture:l,originalPicture:i.options.picture,title:i.options.title,pictures:i.options.pictures,titles:i.options.titles});case 26:a++,t.next=3;break;case 29:return t.abrupt("return",s);case 30:case"end":return t.stop()}}),t)})))()},checkIfStepIsAlreadyPlayedInRun:function(e,t){var s=this;return o()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(s.run&&s.run.conditionsDone&&s.run.conditionsDone.length>0)){a.next=3;break}if(-1===s.run.conditionsDone.indexOf("stepDone"+t+"_"+e)){a.next=3;break}return a.abrupt("return",!0);case 3:return a.abrupt("return",!1);case 4:case"end":return a.stop()}}),a)})))()},updateConditions:function(e,t,s,a,r,n){if(!t)return e;if("undefined"===typeof e&&(e=[]),-1===e.indexOf("stepDone_"+t)&&r&&e.push("stepDone_"+t),-1===e.indexOf("stepDone"+n+"_"+t)&&r&&e.push("stepDone"+n+"_"+t),-1!==e.indexOf("stepSuccess_"+t)){var o=e.indexOf("stepSuccess_"+t);e.splice(o,1),-1!==e.indexOf("stepSuccess"+n+"_"+t)&&(o=e.indexOf("stepSuccess"+n+"_"+t),e.splice(o,1))}if(-1!==e.indexOf("stepFail_"+t)){var i=e.indexOf("stepFail_"+t);e.splice(i,1),-1!==e.indexOf("stepFail"+n+"_"+t)&&(i=e.indexOf("stepFail"+n+"_"+t),e.splice(i,1))}var l=["info-text","info-video","new-item","character","help","end-chapter"];return-1===l.indexOf(a)&&(s?(e.push("stepSuccess_"+t),e.push("stepSuccess"+n+"_"+t)):(e.push("stepFail_"+t),e.push("stepFail"+n+"_"+t))),e},removeStepFromConditions:function(e,t){if(!e)return e;for(var s=[],a=0;a<e.length;a++)-1!==e[a].indexOf("_"+t)&&s.push(a);for(a=s.length-1;a>=0;a--)e.splice(s[a],1);return e},removeConditionsUntilLastMarker:function(e,t,s){var a=this;return o()(r.a.mark((function s(){var n,o,i,l,c,u;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=[t],o=0;case 2:if(!(o<7)){s.next=18;break}return s.next=5,nt.readFile(a.questId,"step_"+t+".json");case 5:if(l=s.sent,l&&(i=JSON.parse(l)),"locate-marker"!==i.type){s.next=9;break}return s.abrupt("break",18);case 9:if(c=!1,i.conditions&&i.conditions.length>0)for(u=0;u<i.conditions.length;u++)-1!==i.conditions[u].indexOf("stepDone_")&&(t=i.conditions[u].replace("stepDone_",""),n.push(t),c=!0);if(c){s.next=13;break}return s.abrupt("return",{found:!1,updatedCondition:e});case 13:if(6!==o){s.next=15;break}return s.abrupt("return",{found:!1,updatedCondition:e});case 15:o++,s.next=2;break;case 18:for(u=0;u<n.length;u++)e=a.removeStepFromConditions(e,n[u]);return s.abrupt("return",{found:!0,updatedCondition:e});case 20:case"end":return s.stop()}}),s)})))()},removeAllConditionsOfAChapter:function(e,t,s){var a=this;return o()(r.a.mark((function n(){var o;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.listForAChapter(e,s);case 2:if(o=r.sent,o&&o.length>0)for(i=0;i<o.length;i++)t=a.removeStepFromConditions(t,o[i].stepId);a.run.conditionsDone=t;case 5:case"end":return r.stop()}}),n)})))()},moveToNextChapter:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=0,e.info.quest.chapters&&e.info.quest.chapters.length>0)if(e.run.currentChapter&&0!==e.run.currentChapter)for(a=0;a<e.info.quest.chapters.length;a++)e.info.quest.chapters[a]===e.run.currentChapter&&(s=a<e.info.quest.chapters.length-1?e.info.quest.chapters[a+1]:"end");else s=e.info.quest.chapters[0];return e.run.currentChapter=s,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},cutSound:function(){var e=document.getElementById("background-music");e&&(this.sound&&this.sound.status&&"play"===this.sound.status?(e.pause(),this.sound.status="pause"):(e.play(),this.sound.status="play",this.sound.tempMute=!1))},manageAudio:function(){"info-video"===this.step.type||this.step.audioStream&&""!==this.step.audioStream?(this.cutSound(),this.sound.tempMute=!0):this.sound.tempMute&&this.cutSound()},swithFullscreenMode:function(){AndroidFullScreen.immersiveMode()},startFullScreen:function(){this.info.quest.customization&&this.info.quest.customization.hideFullScreen||document.addEventListener("deviceready",this.swithFullscreenMode,!1)},showNotif:function(){var e=this;this.$q.notify({message:"Vous avez ".concat(1===this.$store.state.chatNotification?"un nouveau message":this.$store.state.chatNotification+" nouveaux messages"),icon:"chat",position:"top",timeout:5e3,actions:[{label:"Voir",color:"white",handler:function(){e.chat.isOpened=!0}}]})}},computed:{chatNotification:function(){return this.$store.state.chatNotification}},watch:{chatNotification:function(){pa.isOpened||0!==this.$store.state.chatNotification&&this.showNotif()}}},Ka=Ja,Za=(s("b44b"),Object(_e["a"])(Ka,Vs,Js,!1,null,"1c1b90e4",null)),Xa=Za.exports,er=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll text-white",class:e.quest&&e.quest.customization&&e.quest.customization.endColor?"":"background-dark",style:e.quest&&e.quest.customization&&e.quest.customization.endColor&&""!==e.quest.customization.endColor?"background-color: "+e.quest.customization.endColor:""},[e.warnings.noNetwork?s("div",[s("div",{staticClass:"bg-primary"},[s("div",{staticClass:"centered q-pa-lg"},[s("h2",{staticClass:"text-center size-3 q-mt-xl q-mb-sm"},[e._v(e._s(e.$t("label.YouHaveWin")))]),e._v("\n        "+e._s(e.$t("label.ToSaveYouScoreYouNeedToConnect"))+"\n        "),s("q-btn",{staticClass:"q-mt-md",attrs:{icon:"refresh",color:"accent",label:e.$t("label.ConnectToComputeScore")},on:{click:e.loadData}})],1)])]):e._e(),!e.warnings.noNetwork&&e.quest&&e.quest.customization&&e.quest.customization.removeScoring?s("div",{staticClass:"q-ma-md rounded background-lighter2"},[s("div",{staticClass:"q-pa-md",class:"font-"+e.quest.customization.font},[e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?s("div",{staticClass:"text-h4",domProps:{innerHTML:e._s(e.quest.customization.endMessage)}}):e._e(),e.quest.customization&&e.quest.customization.endMessage&&""!==e.quest.customization.endMessage?e._e():s("div",{staticClass:"text-h4"},[e._v(e._s(e.$t("label.ThanksForPlaying")))]),s("div",[e._v(e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions))])]),e.isUserAuthor?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAdmin?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.openValidation(e.questId,e.quest.version)}}})],1):e._e()]):e._e(),e.isUserAuthor?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToBuilder")},on:{click:function(t){return e.$router.push("/quest/builder/"+e.questId)}}})],1):e._e(),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?s("div",[s("div",{staticClass:"relative-position header-point-box"},[s("div",{staticClass:"full-width centered header-point absolute"},[s("img",{attrs:{src:"statics/images/icon/wonpoint.png"}}),s("div",[e._v("+"+e._s(e.run.stars))])]),s("div",{staticStyle:{"padding-top":"100px"}},[s("div",{staticClass:"rounded background-lighter2 centered full-width",staticStyle:{"padding-top":"35px"}},[s("h2",{staticClass:"text-center title2 q-mt-xl q-mb-sm q-mx-xl text-uppercase"},[e._v(e._s(e.$t("label.YouWin")))]),s("div",{staticClass:"relative-position progress-box"},[s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),s("div",{staticClass:"value"},[e._v("\n                  "+e._s(Math.floor(100*e.level.progress))+"%\n                ")])]),s("div",{staticClass:"rank-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])]),e.run&&e.run.duration?s("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourTime"))+": "+e._s(e.run.duration.h)+"h "+e._s(e.run.duration.m)+"m \n            ")]):e._e(),e.run&&e.run.score&&e.run.score>0?s("div",{staticClass:"centered q-pb-sm"},[e._v("\n              "+e._s(e.$t("label.YourScore"))+": "+e._s(e.run.score)+" "+e._s(e.$t("label.pts"))+"\n            ")]):e._e(),e.run&&e.ranking&&e.ranking.position&&"-"!==e.ranking.position?s("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.YourRanking"))+": "+e._s(e.ranking.position)+" \n            ")]):e._e(),e.run?s("div",{staticClass:"centered q-pb-md"},[e._v("\n              "+e._s(e.$t("label.GoodAnswersNumber"))+": "+e._s(e.nbGoodAnwers)+" / "+e._s(e.nbQuestions)+"\n            ")]):e._e()])])]),e.unlockedQuest.show?s("div",{staticClass:"centered q-mt-md subtitle5"},[s("span",{staticClass:"text-primary"},[e._v(e._s(e.$t("label.YouWonNewGame")))]),s("div",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy",attrs:{color:"primary",label:e.$t("label.SolveThisQuest")},on:{click:function(t){return e.$router.push("/quest/play/"+e.unlockedQuest.id)}}})],1)]):e._e(),s("div",{staticClass:"centered q-mt-md subtitle5"},[e._v(e._s(e.$t("label.YouLikedThisQuest")))]),s("div",{staticClass:"centered q-px-md"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.quest&&"discovery"!==e.quest.type&&e.run.score>0&&e.quest&&"public"===e.quest.access,expression:"quest && quest.type !== 'discovery' && run.score > 0 && quest && quest.access === 'public'"}]},[s("a",{staticClass:"small",on:{click:e.openChallengeBox}},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),s("span",{staticClass:"secondary-font-very-small"},[e._v(" "+e._s(e.$t("label.or"))+" ")])]),s("a",{staticClass:"small",on:{click:function(t){e.suggestQuest.show=!0}}},[e._v(e._s(e.$t("label.SuggestANewQuest")))])]),e.author?s("div",{staticClass:"centered q-mt-lg"},[s("div",{staticClass:"user-card user-card-small relative-position",staticStyle:{margin:"0px"}},[s("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.author.statistics&&e.author.statistics.nbQuestsCreated&&e.author.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.author.statistics&&e.author.statistics.nbQuestsSuccessful&&e.author.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.author.level+".svg"}})]):e._e()])]),s("div",{staticClass:"centered subtitle3"},[e._v("\n          "+e._s(e.author.name)+"\n        ")]),e.$store.state.user.id!==e.author._id?s("div",{staticClass:"centered q-pt-sm"},[e.author.status&&"friend"===e.author.status?e._e():s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.author.status&&"friend"===e.author.status?s("div",{staticClass:"centered"},[s("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n              "+e._s(e.$t("label.Followed"))+"\n            ")])],1):e._e()],1):e._e()]):e._e(),s("q-dialog",{attrs:{maximized:""},model:{value:e.suggestQuest.show,callback:function(t){e.$set(e.suggestQuest,"show",t)},expression:"suggestQuest.show"}},[s("suggest",{on:{close:function(t){e.suggestQuest.show=!1}}})],1)],1):e._e()]),e.isUserAuthor||e.warnings.noNetwork?e._e():s("div",{staticClass:"q-pa-md"},[s("div",[e.quest&&"discovery"!==e.quest.type&&e.showAddReview?s("div",{staticClass:"q-mx-md q-mt-xl q-pa-sm centered"},[s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),s("div",{staticClass:"q-py-sm"},[s("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"white",disable:e.reviewSent},on:{click:function(t){e.showReviewText=!0}},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1)]):e._e(),s("q-dialog",{staticClass:"over-map",model:{value:e.showReviewText,callback:function(t){e.showReviewText=t},expression:"showReviewText"}},[s("div",{staticClass:"q-pa-md q-pt-lg centered bg-grey"},[s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.ReviewThisQuest")))]),s("div",{staticClass:"q-py-sm"},[s("q-rating",{staticClass:"end-rating",attrs:{max:5,size:"1rem",color:"secondary",disable:e.reviewSent},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),s("div",{staticClass:"subtitle6 q-pt-lg"},[e._v(e._s(e.$t("label.CommentThisQuest"))+" ("+e._s(e.$t("label.Optional"))+")"+e._s(e.$t("label.Colon")))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"shadowed full-width q-my-sm",attrs:{placeholder:e.$t("label.Feedback"),rows:"4",disabled:e.reviewSent},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.Send"),disabled:e.reviewSent},on:{click:function(t){return e.addReview()}}}),s("div",{staticClass:"q-pa-md"},[s("a",{on:{click:function(t){e.showReviewText=!1}}},[e._v(e._s(e.$t("label.Cancel")))])])],1)]),e.showReward&&e.run&&e.run.questData?s("div",{staticClass:"q-pa-md q-mt-lg centered rounded background-lighter2"},[s("div",{staticClass:"subtitle4 q-pb-lg"},[e._v(e._s(e.$t("label.YouWonAReward")))]),s("div",{staticClass:"q-pt-md"},[s("img",{staticClass:"badge-alone",attrs:{src:e.serverUrl+"/upload/quest/"+e.run.questData.rewardPicture}}),s("div",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.WonOtherRewardByPlayingOtherGamesInCity")))])])]):e._e()],1)]),e.isUserAuthor||e.warnings.noNetwork||!e.quest||e.quest.customization&&e.quest.customization.removeScoring?e._e():s("div",{staticClass:"q-pa-md"},[e.run&&e.run._id?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.ranking.show,expression:"ranking.show"}]},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Ranking")))]),s("div",[e._v(e._s(e.$t("label.RankingEndIntro")))]),e._l(e.ranking.items,(function(t){return s("div",{key:t.id,staticClass:"q-py-md rank-box"},[s("div",[s("userCard",{attrs:{user:t,size:"medium"}})],1),s("div",{staticClass:"full-width"},["-"!==t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.location.postalCode?s("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?s("span",[e._v(", ")]):e._e(),t.location.country?s("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                "+e._s(t.stars)+"\n              ")]),s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                "+e._s(t.position)+"\n              ")])])])])}))],2),s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.BackToTheMap")},on:{click:function(t){return e.$router.push("/home")}}})],1),e.isUserAdmin?s("div",{staticClass:"back centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",label:e.$t("label.GoToQuestValidation")},on:{click:function(t){return e.$router.push("/admin/validate/"+e.questId+"/version/"+e.quest.version)}}})],1):e._e()]):e._e(),e.warnings.noNetwork?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.loadData()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n    ")],1):e._e()]),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showChallenge,expression:"showChallenge"}],staticClass:"panel-bottom q-pa-md bg-graaly-blue-dark"},[s("a",{staticClass:"float-right no-underline",attrs:{color:"grey"},on:{click:e.closeChallenge}},[s("q-icon",{staticClass:"subtitle3",attrs:{name:"close"}})],1),s("div",{staticClass:"subtitle3 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.ChallengeYourFriends")))]),0===e.filteredFriends.length?s("div",[e._v("\n        "+e._s(e.$t("label.NoFriendsLong"))+"\n      ")]):e._e(),e.filteredFriends.length>0?s("div",[s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",full:"",label:e.$t("label.ChallengeAllFriends")},on:{click:e.challengeAll}})],1),s("div",{staticClass:"q-pa-md centered"},[e._v("\n          "+e._s(e.$t("label.Or"))+"\n        ")]),e.friends&&0!==e.friends.length?s("div",[s("q-list",{attrs:{highlight:""}},e._l(e.filteredFriends,(function(t){return s("q-item",{key:t.friendId},[s("q-item-section",[s("q-avatar",[t.picture&&""!==t.picture&&-1!==t.picture.indexOf("http")?s("img",{attrs:{src:t.picture}}):e._e(),t.picture&&""!==t.picture&&-1===t.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.picture}}):e._e(),t.picture&&""!==t.picture?e._e():s("img",{attrs:{src:"statics/icons/game/profile-small.png"}})])],1),s("q-item-label",[e._v(e._s(t.name))]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.isChallenged,expression:"!friend.isChallenged"}],staticClass:"normal-button glossy",attrs:{color:"primary",label:e.$t("label.Challenge")},on:{click:function(s){return e.challenge(t)}}})],1)],1)})),1)],1):e._e()]):e._e()])]),s("transition",{attrs:{name:"slideInBottom"}},[e.showBonus?s("div",{staticClass:"panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg centered"},[e._v(e._s(e.$t("label.YouWonABonus")))]),s("div",{staticClass:"q-pa-md text-primary"},[s("q-card",{staticClass:"q-ma-sm"},[s("img",{attrs:{src:"statics/icons/game/bonus_"+e.run.bonus+".png"}}),s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("bonus."+e.run.bonus)))])]),s("q-card-section",[e._v("\n            "+e._s(e.$t("bonus."+e.run.bonus+"Desc"))+"\n          ")]),s("q-card-section",[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:e.closeBonus}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)],1)],1)]):e._e()])],1)},tr=[],sr={add:function(e,t,s,a,r){return Re().put("review/add",{questId:e,version:t,runId:s,text:a,rating:r}).catch((function(e){return console.log(e.request)}))},list:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Re().get("review/list",{params:{filter:JSON.stringify(e),options:JSON.stringify(t)}});case 2:if(a=s.sent,200===a.status){s.next=5;break}throw new Error("Request "+a.config.url+" failed with code "+a.status+"/"+a.statusText+". Data returned: "+a.data);case 5:return s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()}},ar={components:{suggest:Pt,userCard:ls},data:function(){return{title:"Enquête réussie",rating:0,comment:"",ranking:{show:!1,items:[],position:"-"},score:{},nbQuestions:0,nbGoodAnwers:0,level:{color:"white",upgraded:!1},run:{score:0,stars:1},quest:null,friends:[],filteredFriends:[],invitedFriends:{id:[],name:[]},unlockedQuest:{show:!1,id:0},author:null,questId:this.$route.params.questId,awardPoints:!0,showChallenge:!1,showBonus:!1,showReward:!1,showAddReview:!1,showReviewText:!1,reviewSent:!1,isUserAuthor:!1,isUserAdmin:this.$store.state.user.isAdmin,warnings:{noNetwork:!1},suggestQuest:{show:!1},isHybrid:window.cordova,serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return nt.clearAllRunningProcesses(),t.next=3,e.loadData();case 3:e.isHybrid&&"android"===cordova.platformId&&StatusBar.hide();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadData:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l,c,u,d;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.noNetwork=!1,s=!1,e.$q.loading.show(),t.next=5,Ps.listForAQuest(e.questId);case 5:if(a=t.sent,!a){t.next=57;break}if(a&&a.data&&a.data.length>0)for(n=0;n<a.data.length;n++)"finished"===a.data[n].status&&(e.run=a.data[n]),"in-progress"===a.data[n].status&&(e.run=a.data[n],s=!0);if(!e.run||!e.run.version){t.next=14;break}return t.next=11,ot.getById(e.questId,e.run.version);case 11:o=t.sent,t.next=17;break;case 14:return t.next=16,ot.getLastById(e.questId);case 16:o=t.sent;case 17:if(o&&o.data&&(e.quest=o.data),!o||!o.data){t.next=25;break}return e.isUserAuthor=e.$store.state.user._id===e.quest.authorUserId,t.next=22,sr.list({questId:e.questId,userId:e.$store.state.user._id,version:e.run.version},{limit:1});case 22:i=t.sent,l=i.data&&i.data.length>=1,e.showAddReview=!e.isUserAdmin&&!e.isUserAuthor&&!l;case 25:return t.next=27,e.computeGoodAnswers();case 27:return e.score.old=e.$store.state.user.points,e.score.old||(e.score.old=0),e.initProgression(),t.next=32,e.getOfflineRunData();case 32:return c=t.sent,t.next=35,Ps.endRun(e.run._id,c,e.questId,e.quest.version,e.quest.mainLanguage);case 35:if(u=t.sent,!u||!u.data){t.next=43;break}return e.quest.customization&&e.quest.customization.removeScoring||(e.run.score=u.data.score,e.run.reward=u.data.reward,e.run.stars=u.data.stars,u.data.newBonus&&""!==u.data.newBonus&&(e.run.bonus=u.data.newBonus,e.showBonus=!0),e.run.questData&&e.run.questData.rewardPicture&&""!==e.run.questData.rewardPicture&&(e.showReward=!0)),u.data.unlockedQuest&&(e.unlockedQuest.show=!0,e.unlockedQuest.id=u.data.unlockedQuest),t.next=41,e.removeOfflineData();case 41:t.next=44;break;case 43:e.warnings.noNetwork=!0;case 44:if(e.run._id){t.next=49;break}return t.next=47,Ps.listForAQuest(e.questId);case 47:a=t.sent,a&&a.data&&a.data.length>0&&(e.run=a.data[0]);case 49:return e.quest.customization&&e.quest.customization.removeScoring||(e.score.new=s?e.score.old+e.run.stars:e.score.old,e.$store.state.user.points=e.score.new,nt.setTimeout(e.updateProgression,3e3)),t.next=52,e.getRanking();case 52:d=nt.getDurationFromNow(e.run.dateCreated),e.run.duration={h:d.h,m:d.m},e.getAuthorProfile(),t.next=58;break;case 57:e.warnings.noNetwork=!0;case 58:e.$q.loading.hide();case 59:case"end":return t.stop()}}),t)})))()},initProgression:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.level=hs(e.score.old);case 1:case"end":return t.stop()}}),t)})))()},updateProgression:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge||e.showBonus?nt.setTimeout(e.updateProgression,2e3):(s=hs(e.score.new),s.level>e.level.level?(e.level.progress=1,e.$store.state.user.level=s.level,e.level=s,e.level.progress=.1,e.level.upgraded=!0):e.level=s);case 1:case"end":return t.stop()}}),t)})))()},getRanking:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("5b7303ec4efbcd1f8cb101c6"===e.questId){t.next=5;break}return t.next=3,Ps.listPlayersForThisQuest(e.questId);case 3:s=t.sent,s&&s.data&&(e.ranking.position=s.data);case 5:case"end":return t.stop()}}),t)})))()},showRanking:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.ranking.show=!0,s=!1,a=0;a<e.ranking.items.length;a++)e.ranking.items[a].id===e.$store.state.user._id&&(s=!0);s||(e.ranking.items.push({id:e.$store.state.user._id,score:e.run.score,name:e.$store.state.user.name,picture:e.$store.state.user.picture,position:e.ranking.items.length+1,isFriend:!0,className:"selected"}),nt.setTimeout(e.updateRanking,3e3));case 4:case"end":return t.stop()}}),t)})))()},updateRanking:function(){for(var e=0;e<this.ranking.items.length;e++)if(this.ranking.items[e].id===this.$store.state.user._id&&e>0&&this.ranking.items[e].score>=this.ranking.items[e-1].score){var t=this.ranking.items[e],s=this.ranking.items[e-1];this.$set(this.ranking.items,e,s),this.$set(this.ranking.items,e-1,t),this.refreshPosition(),nt.setTimeout(this.updateRanking,500);break}},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},openChallengeBox:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.$router.push("/user/updateprofile"),t.next=9;break;case 4:return e.showChallenge=!0,t.next=7,it.listFriends(e.$store.state.user._id,0,100);case 7:s=t.sent,s&&s.data&&s.data.length>0&&(e.friends=s.data,e.filteredFriends=e.friends);case 9:case"end":return t.stop()}}),t)})))()},closeChallenge:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showChallenge=!1;case 1:case"end":return t.stop()}}),t)})))()},challenge:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,it.challengeFriend(e.friendId,t.run._id);case 2:for(a=0;a<t.filteredFriends.length;a++)t.filteredFriends[a].friendId===e.friendId&&(t.filteredFriends[a].isChallenged=!0,l["a"].set(t.filteredFriends,a,t.filteredFriends[a]));case 3:case"end":return s.stop()}}),s)})))()},challengeAll:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.challengeFriend("all",e.run._id);case 2:case"end":return t.stop()}}),t)})))()},closeBonus:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showBonus=!1;case 1:case"end":return t.stop()}}),t)})))()},closeReward:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showReward=!1;case 1:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.getFriend(e.quest.authorUserId);case 2:s=t.sent,s&&s.data&&"friend"!==s.data.status&&(e.author=s.data);case 4:case"end":return t.stop()}}),t)})))()},getProfileImage:function(){return this.author.picture&&-1!==this.author.picture.indexOf("http")?this.author.picture:this.author.picture?this.serverUrl+"/upload/profile/"+this.author.picture:"statics/images/icon/profile-small.png"},follow:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"===e.$store.state.user.name){t.next=5;break}return t.next=3,it.addFriend(e.quest.authorUserId);case 3:s=t.sent,s?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?vt(e.$t("label.InvitationSent"),"success"):vt(e.$t("label.FriendsAdded"),"success"),l["a"].set(e.author,"status","friend")):vt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},openValidation:function(e,t){this.$router.push("/admin/validate/"+e+"/version/"+t)},addReview:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.rating){t.next=3;break}return vt(e.$t("label.PleaseRateTheQuest"),"warning"),t.abrupt("return",!1);case 3:return e.$q.loading.show(),t.next=6,sr.add(e.questId,e.run.version,e.run._id,e.comment,e.rating);case 6:e.$q.loading.hide(),e.reviewSent=!0,e.showReviewText=!1,vt(e.$t("label.ReviewSent"),"positive");case 10:case"end":return t.stop()}}),t)})))()},computeGoodAnswers:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s=e.run.conditionsDone,a=0,n=0,o=0;o<s.length;o++)-1!==s[o].indexOf("stepSuccess_")?(a++,n++):-1!==s[o].indexOf("stepFail_")&&a++;e.nbQuestions=a,e.nbGoodAnwers=n;case 6:case"end":return t.stop()}}),t)})))()},getOfflineRunData:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.readFile(e.questId,"run_"+e.questId+".json");case 2:if(s=t.sent,s){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",JSON.parse(s));case 8:case"end":return t.stop()}}),t)})))()},removeOfflineData:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.removeDirectory(e.questId);case 2:return s=t.sent,t.next=5,e.removeQuestFromOfflineList(e.questId);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()},removeQuestFromOfflineList:function(e){return o()(r.a.mark((function t(){var s,a,n,o,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nt.checkIfFileExists("","quests.json");case 2:if(s=t.sent,!s){t.next=13;break}return t.next=6,nt.readFile("","quests.json");case 6:for(n=t.sent,a=JSON.parse(n),o=-1,i=0;i<a.list.length;i++)a.list[i].questId===e&&(o=i);return-1!==o&&a.list.splice(o,1),t.next=13,nt.writeInFile("","quests.json",JSON.stringify(a),!0);case 13:case"end":return t.stop()}}),t)})))()}}},rr=ar,nr=Object(_e["a"])(rr,er,tr,!1,null,null,null),or=nr.exports,ir=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper background-map"},[s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",[this.$route.params.teamId&&"none"!==this.$route.params.teamId?e._e():s("q-input",{attrs:{outlined:"",label:e.$t("label.TeamID"),error:e.$v.form.teamId.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamId.$touch},model:{value:e.form.teamId,callback:function(t){e.$set(e.form,"teamId",t)},expression:"form.teamId"}}),-1===e.options.indexOf("individual")?s("q-input",{attrs:{outlined:"",label:e.$t("label.TeamName"),error:e.$v.form.teamName.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.teamName.$touch},model:{value:e.form.teamName,callback:function(t){e.$set(e.form,"teamName",t)},expression:"form.teamName"}}):e._e(),s("q-input",{attrs:{outlined:"",label:e.$t("label.YourFullName"),error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseFillThisForm")},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.Start"),loading:e.submitting}})],1)]),s("div",{staticClass:"centered smaller version secondary-font"},[e._v("Version "+e._s(e.version))]),s("div",{staticClass:"centered smaller version secondary-font"},[e._v("\n        Version "+e._s(e.version)+" - \n        "),s("img",{attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}})])])])])},lr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",staticStyle:{width:"30%","max-width":"200px","margin-bottom":"0px","margin-top":"20px"},attrs:{src:"statics/images/logo/logo-home.png"}})])}],cr={data:function(){return{questId:this.$route.params.id,lang:this.$route.params.lang,option:this.$route.params.option?this.$route.params.option:"none",options:[],form:{teamId:"",teamName:"",name:""},isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1,version:"2.1.34"}},mounted:function(){this.$store&&this.$store.state&&this.$store.state.user&&this.$store.state.user.name&&"-"===this.$store.state.user.name&&this.$router.push("/quest/play/"+this.questId),this.options=this.option.split("-"),-1!==this.options.indexOf("individual")&&(this.form.teamName=nt.randomId()),this.$route.params.teamId&&"none"!==this.$route.params.teamId&&(this.form.teamId=this.$route.params.teamId),this.switchLanguage(this.lang)},methods:{formSubmit:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.submitting=!0,-1===e.options.indexOf("checklastname")){t.next=8;break}if(s=e.form.name.split(" "),!(s.length<2)){t.next=8;break}return vt(e.$t("label.PleaseEnterFirstNameAndLastName"),"error"),e.submitting=!1,t.abrupt("return",!1);case 8:return t.next=10,Le.playAnonymous(e.$t("label.shortLang"));case 10:if(a=t.sent,!a||!a.data||"ok"!==a.data.status){t.next=25;break}if(!a.data.user){t.next=21;break}return window.localStorage.setItem("jwt",a.data.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),t.next=17,Ps.initTeamPlay(e.questId,e.lang,e.form.teamId,e.form.teamName,e.form.name);case 17:n=t.sent,n&&n.data&&(n.data.message?(vt(e.$t("label."+n.data.message),"error"),e.submitting=!1):e.$router.push("/quest/play/"+e.questId+"/version/"+n.data.version+"/step/0/"+e.lang+"?remoteplay=false")),t.next=23;break;case 21:vt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 23:t.next=27;break;case 25:vt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 27:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e}},validations:{form:{teamId:{required:Kt["required"]},teamName:{required:Kt["required"]},name:{required:Kt["required"]}}}},ur=cr,dr=Object(_e["a"])(ur,ir,lr,!1,null,null,null),pr=dr.exports,mr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("\n  "+e._s(e.$t("label.RedirectionPleaseWait"))+"\n  \n")])},hr=[],fr={data:function(){return{questId:null}},mounted:function(){this.$router.push("/quest/settings/"+this.$route.params.questId)}},gr=fr,br=Object(_e["a"])(gr,mr,hr,!1,null,null,null),vr=br.exports,wr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{staticClass:"reduce-window-size-desktop",attrs:{id:"teaser"}},[e.userType?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderChooseUserType"))+"\n      ")]),s("div",{staticClass:"q-pa-md cursor-pointer",attrs:{"test-id":"btn-create-public-quest"},on:{click:function(t){return e.changeUserType("pro")}}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AProfessional")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AProfessionalDesc1"))+"\n          ")])],1)],1),s("div",{staticClass:"q-pa-md cursor-pointer",on:{click:function(t){return e.changeUserType("individual")}}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.AnIndividual")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.AnIndividualDesc1"))+"\n          ")])],1)],1),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-accent text-white centered text-uppercase"},[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.Education")))])]),s("q-card-section",{staticClass:"bg-accent text-white subtitle5"},[e._v("\n            "+e._s(e.$t("label.EducationDesc"))+"\n          ")])],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v(e._s(e.$t("label.Cancel")))])],1)]),"pro"!==e.userType||e.access?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-px-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderProIntro"))+"\n      ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("public")}}},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PublicQuest")))]),s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),s("q-card-section",{staticClass:"subtitle5"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc1"))}})]),e.readMorePublicProQuest?s("q-card-section",[s("div",{domProps:{innerHTML:e._s(e.$t("label.PublicProQuestDesc2"))}})]):e._e(),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){return e.changeAccess("private")}}},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.PaymentOnUsage")))])]),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateProQuestDesc1"))+"\n          ")]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.TryForFree")))])],1)],1)],1),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.AddYourRoomInTheDirectory"))+"\n      ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white",on:{click:function(t){e.changeAccess("public"),e.changeQuestType("room")}}},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.AddYourRoom")))]),s("div",{staticClass:"subtitle4"},[e._v(e._s(e.$t("label.Free")))])]),s("q-card-section",{staticClass:"subtitle5"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.ProAddYourRoom"))}})]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",color:"white"}},[e._v(e._s(e.$t("label.Add")))])],1)],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"individual"!==e.userType||e.access?e._e():s("div",[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourQuest")))]),s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.BuilderIntro"))+"\n      ")]),s("div",{staticClass:"q-pa-md"},[s("q-card",{staticClass:"my-card bg-primary text-white"},[s("q-card-section",{staticClass:"centered"},[s("div",{staticClass:"subtitle2"},[e._v(e._s(e.$t("label.PrivateQuest")))]),e.privateQuest.buyable?s("div",{staticClass:"subtitle4"},[e._v(e._s(e.privateQuest.price))]):e._e()]),s("q-card-section",{staticClass:"subtitle5"},[e._v("\n            "+e._s(e.$t("label.PrivateQuestDesc1"))+"\n          ")]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[e.privateQuest.buyable?s("q-btn",{attrs:{flat:"",color:"white"},on:{click:function(t){return e.changeAccess("private")}}},[e._v(e._s(e.$t("label.BuyPrivateQuest")))]):e._e(),e.privateQuest.buyable?e._e():s("q-btn",{attrs:{flat:"",disabled:""}},[e._v(e._s(e.$t("label.OnlyBuyableOnMobile")))])],1)],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{attrs:{flat:""},on:{click:e.backToUserType}},[e._v(e._s(e.$t("label.Back")))])],1)]),"public"===e.access&&"room"===e.questType?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.AddYourRoom")))]),s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderAddRoomMessage"))}}),s("div",{staticClass:"q-px-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.Add")))])]),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"public"===e.access&&"quest"===e.questType?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPublicQuest")))]),s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderWelcomeMessage"))}}),s("div",{staticClass:"q-px-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary","test-id":"btn-accept-rules"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),"private"===e.access?s("div",{staticClass:"grow"},[s("h1",{staticClass:"subtitle3 text-uppercase q-pa-md q-mt-xl q-pt-lg"},[e._v(e._s(e.$t("label.CreateYourPrivateQuest")))]),"individual"===e.userType?s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateWelcomeMessage"))}}):e._e(),"pro"===e.userType?s("div",{staticClass:"q-pa-md",domProps:{innerHTML:e._s(e.$t("label.BuilderPrivateProWelcomeMessage"))}}):e._e(),s("div",{staticClass:"q-px-md centered"},["individual"===e.userType?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.buyPrivateQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptAndBuyAPrivateQuest"))+" ("+e._s(e.privateQuest.price)+")")])]):e._e(),"pro"===e.userType?s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.createNewQuest()}}},[s("div",[e._v(e._s(e.$t("label.AcceptTheRules")))])]):e._e(),s("q-btn",{staticClass:"full-width center q-mt-md",on:{click:function(t){return e.cancel()}}},[e._v(e._s(e.$t("label.Cancel")))])],1)]):e._e(),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.cancel()}}})],1)])])},yr=[],qr={data:function(){return{userType:null,access:null,questType:"quest",readMorePublicProQuest:!1,privateQuest:{price:"-",buyable:!1,computed:!1}}},mounted:function(){return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{openMoneyPopup:function(){this.$q.dialog({title:this.$t("label.HowToWinMoney"),message:this.$t("label.HowToWinMoneyExplaination")})},changeUserType:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.userType=e,t.moveToTop(),"individual"!==e){s.next=5;break}return s.next=5,t.initPay();case 5:case"end":return s.stop()}}),s)})))()},changeAccess:function(e){this.access=e,this.moveToTop()},changeQuestType:function(e){this.questType=e,this.moveToTop()},moveToTop:function(){window.scrollTo(0,0)},buyPrivateQuest:function(){return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:store.order("privatequestprice");case 1:case"end":return e.stop()}}),e)})))()},createNewQuest:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={title:{}},t.next=3,ot.create(s,e.access,e.userType,e.questType);case 3:a=t.sent,a&&a.data&&a.data.questId?e.$router.push("/quest/builder/"+a.data.questId):vt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},initPay:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.cordova){t.next=2;break}return t.abrupt("return");case 2:if(!e.privateQuest.computed){t.next=4;break}return t.abrupt("return");case 4:e.privateQuest.computed=!0,store.products.byId["privatequestprice"]?(s=store.get("privatequestprice"),e.displayPrice(s)):store.register({id:"privatequestprice",alias:"privatequestprice",type:store.CONSUMABLE}),store.error((function(e){vt(e.message+"(code: "+e.code+")","error")})),store.when("privatequestprice").updated(e.displayPrice),store.when("privatequestprice").approved((function(e){e.verify()})),store.when("privatequestprice").verified(function(){var t=o()(r.a.mark((function t(s){var a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePurchase(s);case 2:a=t.sent,a?s.finish():vt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),store.refresh();case 11:case"end":return t.stop()}}),t)})))()},displayPrice:function(e){this.privateQuest.price=e.price,e.canPurchase&&(this.privateQuest.buyable=!0)},savePurchase:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.purchasePrivateQuest(null,e);case 2:if(a=s.sent,!(a&&a.data&&a.data.status&&"ok"===a.data.status)){s.next=7;break}return s.next=6,t.createNewQuest();case 6:return s.abrupt("return",!0);case 7:return s.abrupt("return",!1);case 8:case"end":return s.stop()}}),s)})))()},cancel:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/profile/me");case 1:case"end":return t.stop()}}),t)})))()},backToUserType:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userType=null,e.access=null;case 2:case"end":return t.stop()}}),t)})))()}}},kr=qr,xr=Object(_e["a"])(kr,wr,yr,!1,null,null,null),Cr=xr.exports,Sr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll row",class:{"bg-white":!e.chapters.showNewStepOverview}},[s("div",{staticClass:"col bg-white",class:{"desktop-only":e.chapters.showNewStepOverview},staticStyle:{"min-width":"260px"}},[s("div",{staticClass:"settings-bar background-dark",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.chapters.showNewStepOverview&&!e.chapters.showNewStepPageSettings,expression:"!chapters.showNewStepOverview && !chapters.showNewStepPageSettings"}],staticClass:"float-right no-underline close-btn q-pa-sm",attrs:{to:{path:"/profile/me"}}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),e.readOnly&&"rejected"===e.quest.status?s("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.YourQuestHasNotBeenPublished"))+"\n      ")]):e._e(),!e.readOnly||"published"!==e.quest.status&&"unpublished"!==e.quest.status&&"rejected"!==e.quest.status?e._e():s("div",{staticClass:"centered bg-secondary text-white q-pa-md",on:{click:function(t){return e.createNewVersion()}}},[e._v("\n        "+e._s(e.$t("label.ClickHereToCreateANewQuestVersion"))+"\n      ")]),s("div",{staticClass:"q-pa-md full-width"},[e.tabs.progress>0?s("span",[e.form.fields.title[e.languages.current]?s("span",[e.form.fields.title[e.languages.current].length<=30?s("span",[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e(),e.form.fields.title[e.languages.current].length>30?s("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.languages.current]))]):e._e()]):e._e(),e.form.fields.title[e.languages.current]?e._e():s("span",[e.form.fields.title[e.quest.mainLanguage].length<=30?s("span",[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e(),e.form.fields.title[e.quest.mainLanguage].length>30?s("span",{staticStyle:{"font-size":"0.7em"}},[e._v(e._s(e.form.fields.title[e.quest.mainLanguage]))]):e._e()])]):s("span",[e._v(e._s(e.$t("label.NewQuest")))])])],1),s("q-tabs",{staticClass:"bg-accent text-white hide-img two-lines",class:{"desktop-only":e.chapters.showNewStepOverview},model:{value:e.tabs.selected,callback:function(t){e.$set(e.tabs,"selected",t)},expression:"tabs.selected"}},[s("q-tab",{attrs:{disable:e.isReadOnly(),name:"settings",icon:e.getTabIcon(1),label:"quest"===e.quest.type?e.$t("label.Intro")+" ("+e.languages.current+")":e.$t("label.YourRoom"),default:""}}),"quest"===e.quest.type?s("q-tab",{attrs:{disable:e.tabs.progress<1||e.isReadOnly(),name:"steps",icon:e.getTabIcon(2),label:e.$t("label.Steps")+" ("+e.languages.current+")"}}):e._e(),s("q-tab",{attrs:{disable:e.tabs.progress<2,name:"publish",icon:e.getTabIcon(3),label:e.$t("label.Publish")}}),e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier?s("q-tab",{attrs:{name:"payments",icon:e.getTabIcon(5),label:e.$t("label.Payments")},on:{click:e.listPayments}}):e._e(),e.isEdition?s("q-tab",{attrs:{name:"reviews",icon:e.getTabIcon(6),label:e.$t("label.ReviewsAndStats")}}):e._e(),"draft"!==e.quest.status&&"private"===e.quest.access?s("q-tab",{attrs:{name:"results",icon:e.getTabIcon(7),label:e.$t("label.Results")}}):e._e()],1),s("q-separator"),"settings"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[this.quest.languages&&0!==this.quest.languages.length?e._e():s("div",[s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"language"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.SelectedLanguage")))]),s("q-option-group",{attrs:{type:"radio",color:"primary",options:e.form.languages,disable:e.readOnly},model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}})],1)],1),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{big:"",disabled:e.readOnly,color:"primary","test-id":"btn-save-language"},on:{click:function(t){return e.selectLanguage()}}},[e._v(e._s(e.$t("label.Save")))])],1)],1),this.quest.languages.length>0?s("form",{on:{submit:function(t){return t.preventDefault(),e.submitSettings()}}},["private"===this.quest.access?s("q-chip",{attrs:{color:"primary","text-color":"white",icon:"lock"}},[e._v("\n          "+e._s(e.$t("label.PrivateQuest"))+"\n        ")]):e._e(),"public"===this.quest.access?s("q-chip",{attrs:{color:"primary","text-color":"white",icon:"public"}},[e._v("\n          "+e._s(e.$t("label.PublicQuest"))+"\n        ")]):e._e(),this.quest.isPremium?s("q-chip",{attrs:{color:"secondary","text-color":"white",icon:"star"}},[e._v("\n          "+e._s(e.$t("label.PremiumQuest"))+"\n        ")]):e._e(),s("q-select",{attrs:{outlined:"",readonly:e.readOnly,"emit-value":"","map-options":"",label:e.$t("label.Language"),options:e.form.languages,dense:!0},on:{input:e.changeLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"language"}})]},proxy:!0}],null,!1,1371031262),model:{value:e.languages.current,callback:function(t){e.$set(e.languages,"current",t)},expression:"languages.current"}}),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-input",{attrs:{readonly:e.readOnly,type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.form.fields.title.$error,"error-message":e.$t("label.PleaseEnterATitle")},on:{blur:e.$v.form.fields.title.$touch},model:{value:e.form.fields.title[e.languages.current],callback:function(t){e.$set(e.form.fields.title,e.languages.current,t)},expression:"form.fields.title[languages.current]"}})],1),"quest"===e.quest.type?s("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.QuestType"))+" \n          "),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestType")}}}),s("div",{staticClass:"q-gutter-md"},[s("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"simple",label:e.$t("label.basicEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}}),s("q-radio",{attrs:{disable:e.readOnly||"advanced"===e.editor.initMode,val:"advanced",label:e.$t("label.advancedEditor")},on:{input:e.changeEditorMode},model:{value:e.form.fields.editorMode,callback:function(t){e.$set(e.form.fields,"editorMode",t)},expression:"form.fields.editorMode"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?s("div",[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PlayersNumber"),options:e.form.players,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestMultiplayer")}}})]},proxy:!0}],null,!1,3064096794),model:{value:e.form.fields.playersNumber,callback:function(t){e.$set(e.form.fields,"playersNumber",t)},expression:"form.fields.playersNumber"}})],1):e._e()],1):e._e(),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Difficulty"),options:e.form.levels,"emit-value":"","map-options":""},model:{value:e.form.fields.level,callback:function(t){e.$set(e.form.fields,"level",t)},expression:"form.fields.level"}})],1),s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Duration"),options:e.form.durations,"emit-value":"","map-options":""},model:{value:e.form.fields.duration,callback:function(t){e.$set(e.form.fields,"duration",t)},expression:"form.fields.duration"}}),s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShowCountDown")},model:{value:e.form.fields.countDownTime.enabled,callback:function(t){e.$set(e.form.fields.countDownTime,"enabled",t)},expression:"form.fields.countDownTime.enabled"}}),s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.StopGameAfterCountDown")},model:{value:e.form.fields.countDownTime.stopGame,callback:function(t){e.$set(e.form.fields.countDownTime,"stopGame",t)},expression:"form.fields.countDownTime.stopGame"}})],1),s("div",{staticClass:"outline q-pa-md q-my-sm"},[e._v("\n          "+e._s(e.$t("label.StartingPointOfTheQuest"))+" \n          "),e.isIOs?e._e():s("div",[s("div",{staticClass:"location-gps",staticStyle:{display:"none"}},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lat,expression:"form.fields.location.lat",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"latitude",step:"any"},domProps:{value:e.form.fields.location.lat},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lat",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.form.fields.location.lng,expression:"form.fields.location.lng",modifiers:{number:!0}}],attrs:{readonly:e.readOnly,type:"number",id:"longitude",step:"any"},domProps:{value:e.form.fields.location.lng},on:{input:function(t){t.target.composing||e.$set(e.form.fields.location,"lng",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.zipcode,expression:"form.fields.zipcode"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.zipcode},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"zipcode",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.town,expression:"form.fields.town"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.town},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"town",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.fields.country,expression:"form.fields.country"}],attrs:{readonly:e.readOnly,type:"text"},domProps:{value:e.form.fields.country},on:{input:function(t){t.target.composing||e.$set(e.form.fields,"country",t.target.value)}}})]),e.readOnly?e._e():s("div",{staticClass:"location-address"},[s("div",{staticClass:"q-if row no-wrap items-center relative-position q-input q-if-has-label text-primary"},["settings"===e.tabs.selected?s("gmap-autocomplete",{staticClass:"col q-input-target text-left",attrs:{id:"startingplace",placeholder:e.$t("label.StartingPointOfTheQuest"),value:e.form.fields.startingPlace},on:{place_changed:e.setLocation,input:function(t){e.value=t.target.value}}}):e._e()],1),s("a",{on:{click:function(t){return e.getCurrentLocation()}}},[s("img",{attrs:{src:"statics/icons/game/location.png"}})])])]),e.isIOs?s("div",[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.StartingPointOfTheQuest"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.startingPlace,callback:function(t){e.$set(e.form.fields,"startingPlace",t)},expression:"form.fields.startingPlace"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ZipCode"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Town"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.town,callback:function(t){e.$set(e.form.fields,"town",t)},expression:"form.fields.town"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Country"),disable:e.readOnly,type:"text"},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),s("table",[s("tr",[s("td",[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Latitude"),disable:e.readOnly,type:"number",id:"latitude"},model:{value:e.form.fields.location.lat,callback:function(t){e.$set(e.form.fields.location,"lat",e._n(t))},expression:"form.fields.location.lat"}}),s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.Longitude"),disable:e.readOnly,type:"number",id:"longitude"},model:{value:e.form.fields.location.lng,callback:function(t){e.$set(e.form.fields.location,"lng",e._n(t))},expression:"form.fields.location.lng"}})],1),s("td",[s("q-btn",{staticClass:"q-ma-md",on:{click:function(t){return e.getMyGPSLocation()}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])],1)])])],1):e._e()]),"room"===this.quest.type?s("div",{staticClass:"outline q-pa-md q-my-sm"},[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}),s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ReadMoreLink")},model:{value:e.form.fields.readMoreLink,callback:function(t){e.$set(e.form.fields,"readMoreLink",t)},expression:"form.fields.readMoreLink"}})],1):e._e(),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GameAvailability"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.LimitNumberOfPlayerInOneHour")},model:{value:e.form.fields.limitNumberOfPlayer,callback:function(t){e.$set(e.form.fields,"limitNumberOfPlayer",t)},expression:"form.fields.limitNumberOfPlayer"}})],1),e.form.fields.scheduling&&0===e.form.fields.scheduling.length?s("q-btn",{staticClass:"full-width",on:{click:e.startSchedule}},[e._v(e._s(e.$t("label.ScheduleGame")))]):e._e(),e.form.fields.scheduling&&e.form.fields.scheduling.length>0?s("div",[s("div",{staticClass:"centered"},[s("strong",[e._v(e._s(e.$t("label.GameSchedule")))])]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.SchedulingDescription")))]),e._l(e.form.fields.scheduling,(function(t,a){return s("div",{key:a,staticClass:"row"},[s("div",{staticClass:"col"},[e._v(e._s(e.$t("days.day"+a)))]),s("div",{staticClass:"col"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.From"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[0],callback:function(s){e.$set(t,0,s)},expression:"schedule[0]"}})],1),s("div",{staticClass:"col"},[s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.To"),options:e.form.times,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",dense:""},model:{value:t[1],callback:function(s){e.$set(t,1,s)},expression:"schedule[1]"}})],1)])})),s("q-btn",{staticClass:"full-width",attrs:{flat:""},on:{click:e.resetSchedule}},[e._v(e._s(e.$t("label.Reset")))])],2):e._e()],1)]),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.GamePayment"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnMobile")},model:{value:e.showPaymentBox,callback:function(t){e.showPaymentBox=t},expression:"showPaymentBox"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnMobileHelp")}}}),e.showPaymentBox?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.PriceForPlayer"),options:e.form.prices,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},model:{value:e.form.fields.priceForPlayer,callback:function(t){e.$set(e.form.fields,"priceForPlayer",t)},expression:"form.fields.priceForPlayer"}}):e._e(),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.PaymentOnYourSide")},model:{value:e.showTierPaymentBox,callback:function(t){e.showTierPaymentBox=t},expression:"showTierPaymentBox"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("PaymentOnYourSideHelp")}}})],1),e.showTierPaymentBox?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.PriceFrom")},model:{value:e.form.fields.tierPriceForPlayer,callback:function(t){e.$set(e.form.fields,"tierPriceForPlayer",t)},expression:"form.fields.tierPriceForPlayer"}})],1):e._e()],1)]):e._e(),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.UserData"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ForcePlayerToHaveAccount")},model:{value:e.form.fields.forcePlayerToHaveAccount,callback:function(t){e.$set(e.form.fields,"forcePlayerToHaveAccount",t)},expression:"form.fields.forcePlayerToHaveAccount"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ForcePlayerToHaveAccountHelp")}}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.ShareUserDataWithCreator")},model:{value:e.form.fields.shareUserDataWithCreator,callback:function(t){e.$set(e.form.fields,"shareUserDataWithCreator",t)},expression:"form.fields.shareUserDataWithCreator"}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("ShareUserDataWithCreatorHelp")}}})],1)])]):e._e(),s("q-separator"),s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameIntroduction"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"description"},[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.Description")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.description[e.languages.current],callback:function(t){e.$set(e.form.fields.description,e.languages.current,t)},expression:"form.fields.description[languages.current]"}})],1),"quest"===e.quest.type?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.Category"),options:e.form.categories,"emit-value":"","map-options":"","bottom-slots":"","options-cover":"",error:e.$v.form.fields.category.$error,"error-message":e.$t("label.PleaseSelectACategory")},on:{blur:e.$v.form.fields.category.$touch},model:{value:e.form.fields.category,callback:function(t){e.$set(e.form.fields,"category",t)},expression:"form.fields.category"}}):e._e(),null!==e.form.fields.picture?s("div",[s("p",[e._v(e._s(e.$t("label.Picture"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.picture}})]):e._e(),e.isIOs?e._e():s("div",[e.readOnly?e._e():s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["picturefile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),s("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})],1),e.isIOs?s("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),s("input",{ref:"picturefile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadImage}})]):e._e(),null!==e.form.fields.thumb?s("div",[s("p",[e._v(e._s(e.$t("label.SmallPicture"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.thumb}})]):e._e(),e.isIOs?e._e():s("div",[e.readOnly?e._e():s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["thumbfile"].click()}}},[e._v(e._s(e.$t("label.ModifyThePicture")))]),s("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadThumb}})],1),e.isIOs?s("div",[e._v("\n                "+e._s(e.$t("label.ModifyThePicture"))+":\n                "),s("input",{ref:"thumbfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadThumb}})]):e._e()],1)]),s("q-separator"),s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeGameInterface"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[this.quest.isPremium&&e.form.fields.customization&&e.form.fields.customization.audio&&""!==e.form.fields.customization.audio?s("div",[s("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.form.fields.customization.audio))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),!this.quest.isPremium||e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["audiofile"].click()}}},[e._v(e._s(e.$t("label.AddAnAudioFile")))])],1),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3",hidden:""},on:{change:e.uploadAudio}})],1),this.quest.isPremium&&e.isIOs&&!e.readOnly?s("div",[e._v("\n                "+e._s(e.$t("label.AddAnAudioFile"))+":\n                "),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})]):e._e(),e.form.fields.customization?s("div",["quest"===e.quest.type?s("q-select",{attrs:{readonly:e.readOnly,label:e.$t("label.FontFamily"),options:e.form.fonts,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.itemProps,r=t.itemEvents,n=t.opt;return[s("q-item",e._g(e._b({},"q-item",a,!1),r),[s("q-item-section",[s("q-item-label",{class:"font-"+n.value,domProps:{innerHTML:e._s(n.label)}})],1)],1)]}}],null,!1,597358429),model:{value:e.form.fields.customization.font,callback:function(t){e.$set(e.form.fields.customization,"font",t)},expression:"form.fields.customization.font"}}):e._e()],1):e._e(),e.form.fields.customization?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TextColor"),placeholder:"#000000"},model:{value:e.form.fields.customization.fontColor,callback:function(t){e.$set(e.form.fields.customization,"fontColor",t)},expression:"form.fields.customization.fontColor"}})],1):e._e(),e.form.fields.customization?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.ButtonsColor"),placeholder:"#ffaa00"},model:{value:e.form.fields.customization.color,callback:function(t){e.$set(e.form.fields.customization,"color",t)},expression:"form.fields.customization.color"}})],1):e._e(),this.quest.isPremium&&"quest"===this.quest.type?s("div",[e.form.fields.customization&&e.form.fields.customization.logo&&""!==e.form.fields.customization.logo?s("div",[s("p",[e._v(e._s(e.$t("label.YourLogo"))+" :")]),s("img",{staticClass:"limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.logo}}),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeLogo}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["logofile"].click()}}},[e._v(e._s(e.$t("label.AddALogo")))]),s("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1),s("input",{ref:"logofile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadLogo}})],1),e.isIOs&&!e.readOnly?s("div",[e._v("\n                  "+e._s(e.$t("label.AddALogo"))+":\n                  "),s("input",{ref:"logofile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadLogo}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestLogo")}}})],1):e._e()]):e._e(),e.form.fields.customization&&e.form.fields.customization.character&&""!==e.form.fields.customization.character?s("div",[s("p",[e._v(e._s(e.$t("label.YourCharacter"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.customization.character}}),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeCharacter}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs||e.readOnly?e._e():s("div",[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["characterfile"].click()}}},[e._v(e._s(e.$t("label.AddACustomCharacter")))]),s("q-btn",{attrs:{icon:"help"},on:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacter}})],1),e.isIOs&&!e.readOnly?s("div",[e._v("\n                "+e._s(e.$t("label.AddACustomCharacter"))+":\n                "),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacter}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestCharacter")}}})],1):e._e(),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideInventory")},model:{value:e.form.fields.customization.hideInventory,callback:function(t){e.$set(e.form.fields.customization,"hideInventory",t)},expression:"form.fields.customization.hideInventory"}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.HideFullScreen")},model:{value:e.form.fields.customization.hideFullScreen,callback:function(t){e.$set(e.form.fields.customization,"hideFullScreen",t)},expression:"form.fields.customization.hideFullScreen"}})],1),"quest"===this.quest.type&&"advanced"===e.form.fields.editorMode?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.QRCodeMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.qrCodeMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.qrCodeMessage,e.languages.current,t)},expression:"form.fields.customization.qrCodeMessage[languages.current]"}}),s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,type:"textarea",label:e.$t("label.GeolocationMessage")+" "+e.currentLanguageForLabels,"max-height":100,"min-rows":4},model:{value:e.form.fields.customization.geolocationMessage[e.languages.current],callback:function(t){e.$set(e.form.fields.customization.geolocationMessage,e.languages.current,t)},expression:"form.fields.customization.geolocationMessage[languages.current]"}})],1):e._e()])]),s("q-separator"),this.quest.isPremium&&"quest"===this.quest.type?s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.CustomizeEndOfGame"),"header-class":"bg-secondary text-white","expand-icon-class":"text-white"}},[s("div",{staticClass:"q-pa-md"},[e.form.fields.rewardPicture&&""!==e.form.fields.rewardPicture?s("div",[s("p",[e._v(e._s(e.$t("label.Reward"))+" :")]),s("img",{staticClass:"full-width limit-size-desktop",staticStyle:{"background-color":"#f00"},attrs:{src:e.serverUrl+"/upload/quest/"+e.form.fields.rewardPicture}}),s("div",[e._v(e._s(e.$t("label.RewardPictureWarning")))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeReward}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.isIOs&&!e.readOnly?s("div",{staticClass:"q-mt-md"},[e._v("\n                "+e._s(e.$t("label.AddAReward"))+":\n                "),s("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadReward}}),s("q-icon",{attrs:{name:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1):e._e(),e.isIOs||e.readOnly?e._e():s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{staticClass:"full-width"},[s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.$refs["rewardfile"].click()}}},[e._v(e._s(e.$t("label.AddAReward")))]),s("q-btn",{attrs:{icon:"help"},nativeOn:{click:function(t){return e.showHelpPopup("helpQuestReward")}}})],1),s("input",{ref:"rewardfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadReward}})],1),s("div",[s("q-toggle",{attrs:{readonly:e.readOnly,label:e.$t("label.RemoveScoringAndRating")},model:{value:e.form.fields.customization.removeScoring,callback:function(t){e.$set(e.form.fields.customization,"removeScoring",t)},expression:"form.fields.customization.removeScoring"}})],1),e.form.fields.customization.removeScoring?s("div",[s("q-input",{staticClass:"full-width",attrs:{disable:e.readOnly,label:e.$t("label.TypeEndMessage"),type:"textarea"},model:{value:e.form.fields.customization.endMessage,callback:function(t){e.$set(e.form.fields.customization,"endMessage",t)},expression:"form.fields.customization.endMessage"}})],1):e._e()])]):e._e()],1),s("div",[e._v("\n          "+e._s(e.$t("label.Version"))+": "+e._s(e.quest.version)+"\n        ")]),s("div",{staticClass:"centered"},[e.readOnly?e._e():s("q-btn",{staticClass:"glossy large-button q-mt-lg",attrs:{color:"primary","test-id":"btn-save-settings"},on:{click:e.submitSettings}},[e._v(e._s(e.$t("label.Save")))])],1)],1):e._e(),"published"!==e.quest.status?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{attrs:{flat:"",color:"negative",size:"md",icon:"delete",label:e.$t("label.RemoveThisQuest")},on:{click:function(t){return e.removeQuest()}}})],1):e._e()]):e._e(),"steps"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[e.warnings.stepsMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:e.refreshStepsList}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e(),e.quest.size.limit<e.quest.size.current?s("div",{staticClass:"text-primary q-pa-md"},[e._v("\n        "+e._s(e.$t("label.OverQuotaMessage"))+"\n        "),s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary"},on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.$t("label.RemoveFiles")))])],1):e._e(),"simple"===e.form.fields.editorMode&&e.chapters.items&&e.chapters.items.length>0?s("div",[!e.readOnly&&(!e.chapters.items||e.chapters.items.length<1||!e.chapters.items[0].steps||e.chapters.items[0].steps.length<1)?s("p",[e._v(e._s(e.$t("label.AddYourSteps")))]):e._e(),s("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onStepListUpdate,handle:".handle"},expression:"{ onUpdate: onStepListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items[0].steps,(function(t){return s("li",{key:t._id,staticClass:"list-group-item"},[e.readOnly?e._e():s("q-icon",{staticClass:"handle",attrs:{name:"reorder"}}),s("div",[s("q-icon",{staticClass:"q-mr-sm",attrs:{color:"grey",name:e.getIconFromStepType(t.type)}}),s("span",{staticStyle:{"margin-top":"4px"},on:{click:function(s){return e.playStep(t)}}},[e._v(e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage]))]),e.readOnly?e._e():s("q-btn",{staticClass:"float-right",on:{click:function(s){return e.removeStep(t.stepId)}}},[s("q-icon",{attrs:{name:"delete"}})],1),e.readOnly?e._e():s("q-btn",{staticClass:"float-right",on:{click:function(s){return e.modifyStep(t)}}},[s("q-icon",{attrs:{name:"mode_edit"}})],1)],1)],1)})),0),e.readOnly?e._e():s("p",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-add-step"},on:{click:function(t){return e.addStep()}}},[e._v(e._s(e.$t("label.AddAStep")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items[0]&&e.chapters.items[0].steps&&e.chapters.items[0].steps.length>1?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?s("div",{staticClass:"smaller"},[s("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),s("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e(),"advanced"===e.form.fields.editorMode?s("div",[e.readOnly||e.chapters.items&&!(e.chapters.items.length<2)?e._e():s("p",[e._v(e._s(e.$t("label.AddYourChapters")))]),s("ul",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:e.onChapterListUpdate,handle:".handle"},expression:"{ onUpdate: onChapterListUpdate, handle: '.handle' }"}],staticClass:"list-group"},e._l(e.chapters.items,(function(t){return s("li",{key:t._id,staticClass:"step-list list-group-item align-top"},[e.readOnly?e._e():s("q-icon",{staticClass:"handle",staticStyle:{"font-size":"1.3rem"},attrs:{name:"reorder"}}),s("div",[s("p",{staticClass:"bigger"},[e._v("\n                "+e._s(t.title[e.languages.current]||t.title[e.quest.mainLanguage])+"\n                "),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md size-1",attrs:{name:"add_box"},nativeOn:{click:function(s){return e.addStep(t.chapterId)}}}),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"delete"},nativeOn:{click:function(s){return e.removeChapter(t.chapterId)}}}),e.readOnly?e._e():s("q-icon",{staticClass:"float-right q-mt-sm q-ml-md a-bit-bigger",attrs:{name:"mode_edit"},nativeOn:{click:function(s){return e.modifyChapter(t.chapterId)}}}),t.warnings&&t.warnings.length>0?s("q-icon",{staticClass:"float-right q-mt-sm a-bit-bigger",attrs:{name:"warning",color:"primary"},nativeOn:{click:function(s){return e.showChapterWarnings(t.warnings)}}}):e._e()],1),t.steps&&0!==t.steps.length?e._e():s("div",[e._v("\n                "+e._s(e.$t("label.ClickOnButtonToAddStep"))+"\n              ")]),e._l(t.steps,(function(a){return s("div",{key:a._id,staticStyle:{height:"34px",overflow:"hidden",display:"flex",width:"100%"}},[s("div",{staticClass:"step-text"},[s("q-icon",{staticClass:"q-mr-sm",class:{"q-ml-md":2===a.level},attrs:{color:"grey",name:e.getIconFromStepType(a.type)}}),e.readOnly||a.error?e._e():s("span",{on:{click:function(t){return e.playStep(a)}}},["All"!==a.player?s("q-badge",{attrs:{color:"primary",align:"top"}},[e._v(e._s(a.player))]):e._e(),e._v(" "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))],1),!e.readOnly&&a.error?s("span",{staticClass:"text-primary",on:{click:function(t){return e.showStepWarnings(a.error)}}},[s("q-icon",{attrs:{name:"warning",color:"primary"}}),e._v("\n                    "+e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage])+"\n                  ")],1):e._e(),e.readOnly?s("span",[e._v(e._s(a.title[e.languages.current]||a.title[e.quest.mainLanguage]))]):e._e()],1),s("div",{staticClass:"step-button"},[e.readOnly?e._e():s("q-btn-dropdown",{attrs:{icon:"mode_edit",split:"",dense:""},on:{click:function(t){return e.modifyStep(a)}}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return e.insertStep(t.chapterId,a.stepId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"subdirectory_arrow_left"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.InsertAStepAfter")))])],1)],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.removeStep(a.stepId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"delete"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1)],1)],1)],1)])}))],2)],1)})),0),e.readOnly?e._e():s("p",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"fas fa-plus-circle"},on:{click:function(t){return e.addChapter()}}},[e._v(e._s(e.$t("label.AddASChapter")))])],1),!e.readOnly&&e.chapters.items&&e.chapters.items.length>1?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),e.quest&&e.quest.size&&e.quest.size.limit&&e.quest.size.current?s("div",{staticClass:"smaller"},[s("div",{on:{click:function(t){return e.showMedia()}}},[e._v(e._s(e.storage))]),s("q-linear-progress",{staticClass:"q-mt-sm",staticStyle:{height:"15px"},attrs:{rounded:"",value:e.getPercentStorageUsage(),color:"secondary"}})],1):e._e()]):e._e()]):e._e(),"publish"===e.tabs.selected?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["old"===e.quest.status?s("div",[s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestIsClosedAndCanNotBePublishedAnymore"))+"\n        ")]),"room"!==e.quest.type?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e()],1):e._e(),"public"===e.quest.access||"private"===e.quest.access&&"old"!==e.quest.status?s("div",["tovalidate"===e.quest.status?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestUnderValidation"))+"\n        ")]):e._e(),"rejected"===e.quest.status?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.QuestPublicationRejected"))+"\n        ")]):e._e(),e.chapters.items.length>100?s("q-banner",{staticClass:"q-mb-md bg-warning"},[e._v("\n          "+e._s(e.$t("label.YourQuestMustContainLessThan50Steps"))+"\n        ")]):e._e(),"quest"===e.quest.type?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.TestYourQuest")))])],1):e._e(),"room"===e.quest.type?s("p",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary",icon:"play_arrow"},on:{click:function(t){return e.testQuest()}}},[e._v(e._s(e.$t("label.SeeYourQuestPage")))])],1):e._e(),"private"===e.quest.access?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"people"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Invitees"))+" "),e.quest.limitations&&e.quest.limitations.nbInvitees?s("span",[e._v("("+e._s(e.invitee.items.length)+"/"+e._s(e.quest.limitations.nbInvitees)+")")]):e._e()]),e._l(e.invitee.items,(function(t){return s("p",{key:t.id},[s("q-toggle",{attrs:{label:t.name},on:{input:function(s){return e.removeInvitee(t.id)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item.checked"}})],1)})),e.warnings.inviteeMissing?s("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),s("q-input",{attrs:{type:"text",label:e.$t("label.InvitePeople"),"bottom-slots":"",error:!e.invitee.new.isExisting,"error-message":e.$t("label.UserIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addInvitee()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteInviteesHelp"))+"\n              ")]},proxy:!0}],null,!1,3016168484),model:{value:e.invitee.new.email,callback:function(t){e.$set(e.invitee.new,"email",t)},expression:"invitee.new.email"}})],2)],1):e._e(),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"visibility"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label."+("quest"===e.quest.type?"public"===e.quest.access?"LanguagesPublished":"LanguagesPublishedForPrivate":"PageLanguagesPublished"))))]),e._l(e.form.fields.languages,(function(t){return s("p",{key:t.lang},[s("q-toggle",{attrs:{disable:"tovalidate"===e.quest.status,label:e.$t("language."+t.lang)},on:{input:function(s){return e.publish(t.lang)}},model:{value:t.published,callback:function(s){e.$set(t,"published",s)},expression:"lang.published"}})],1)})),"public"===e.quest.access&&"quest"===e.quest.type?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisible")))]):e._e(),"private"===e.quest.access?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.ActivateTheLanguageVisiblePrivate")))]):e._e()],2)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"edit"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Editors"))+" "),e.quest.limitations&&e.quest.limitations.nbEditors?s("span",[e._v("("+e._s(e.editor.items.length)+"/"+e._s(e.quest.limitations.nbEditors)+")")]):e._e()]),e._l(e.editor.items,(function(t){return s("p",{key:t.id},[s("q-toggle",{attrs:{label:t.name},on:{input:function(s){return e.removeEditor(t.id)}},model:{value:t.checked,callback:function(s){e.$set(t,"checked",s)},expression:"item.checked"}})],1)})),e.warnings.editorsMissing?s("p",[e._v(e._s(e.$t("label.TechnicalIssue")))]):e._e(),s("q-input",{attrs:{type:"text",label:e.$t("label.InviteEditors"),"bottom-slots":"",error:!e.editor.new.isExisting,"error-message":e.$t("label.EditorIsNotAGraalyUser")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{icon:"add_circle",color:"primary",flat:"",round:"",dense:""},on:{click:function(t){return e.addEditor()}}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n                "+e._s(e.$t("label.InviteEditorsHelp"))+"\n              ")]},proxy:!0}],null,!1,658616356),model:{value:e.editor.new.email,callback:function(t){e.$set(e.editor.new,"email",t)},expression:"editor.new.email"}})],2)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"select_all"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.MarkersFile")))]),"quest"===e.quest.type?s("div",{staticClass:"q-pt-md"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.MarkersToStartQuest"))}}),s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"_qrcode.png"}})]):e._e(),"room"===e.quest.type?s("div",{staticClass:"q-pt-md",domProps:{innerHTML:e._s(e.$t("label.SaveQuestResultsMarker",{url1:e.serverUrl+"/upload/quest/"+e.questId+"_score1_qrcode.png",url2:e.serverUrl+"/upload/quest/"+e.questId+"_score2_qrcode.png",url3:e.serverUrl+"/upload/quest/"+e.questId+"_score3_qrcode.png"}))}}):e._e()],1)],1),s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_download"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Downloads")))]),"quest"===e.quest.type?s("div",[e.isHybrid?e._e():s("div",[s("q-btn",{attrs:{color:"primary",flat:"",type:"a",href:"statics/markers/all.pdf",download:""}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1),e.isHybrid?s("div",[s("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadMarkers()}}},[e._v(e._s(e.$t("label.MarkersToPrint")))])],1):e._e(),e.isHybrid?e._e():s("div",[s("q-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return e.downloadTexts()}}},[e._v(e._s(e.$t("label.ExportTexts")))])],1)]):e._e()],1)],1),"room"!==e.quest.type?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"file_copy"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.DuplicateThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"primary"},on:{click:function(t){return e.duplicateQuest()}}},[e._v(e._s(e.$t("label.DuplicateThisQuest")))])],1)],1):e._e(),"published"!==e.quest.status?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),s("q-btn",{staticClass:"glossy large-button q-ma-sm",attrs:{color:"negative"},on:{click:function(t){return e.removeQuest()}}},[e._v(e._s(e.$t("label.RemoveThisQuest")))]),e._v("\n            "+e._s(e.$t("label.ThisActionCanNotBeCanceled"))+"\n          ")],1)],1):e._e(),"published"===e.quest.status?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"delete"}})],1),s("q-item-section",[e._v("\n            "+e._s(e.$t("label.YouNeedToUnpublishYourQuestToRemoveIt"))+"\n          ")])],1):e._e()],1):e._e()]):e._e(),"payments"===e.tabs.selected&&e.isEdition?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.payments,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{rounded:""}},[s("img",{attrs:{src:e.serverUrl+"/upload/tiers/"+t.qrCode+".png"}})])],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.qrCode.replace("tierplay_","")))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("status."+t.status))+" - "+e._s(e._f("formatDate")(t.dateUpdate,e.$store.state.user.language)))])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn-dropdown",{attrs:{icon:"cloud_upload",split:"",dense:""},on:{click:function(s){return e.downloadQRCode(t.qrCode)}}},[s("q-list",["new"===t.status?s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return e.removeCode(t._id)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"delete"}})],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.$t("label.Remove")))])],1)],1):e._e()],1)],1)],1)],1)})),1),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.createNewPaymentQRCode}},[s("span",[e._v(e._s(e.$t("label.CreateNewQRCodeForPlay")))])]),s("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(10)}}},[s("span",[e._v(e._s(e.$t("label.Create10NewQRCodeForPlay")))])]),s("q-btn",{staticClass:"button",attrs:{flat:"",color:"primary"},on:{click:function(t){return e.createMultipleNewPaymentQRCode(50)}}},[s("span",[e._v(e._s(e.$t("label.Create50NewQRCodeForPlay")))])])],1)],1):e._e(),"reviews"===e.tabs.selected&&e.isEdition?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},[s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"timeline"}})],1),e.statistics&&e.statistics.statistics?s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Statistics")))])],1):e._e()],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sellings?s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalSellings")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(parseInt(70*e.statistics.statistics.sellings)/100)+" €")]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.YourRevenues"))+e._s(e.$t("label.colons"))+e._s(parseInt(40*e.statistics.statistics.sellings)/100)+"€ TTC")]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RevenuesPayedFloor")))])])],1):e._e(),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.TotalNumberOfPlayers")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v("\n            "+e._s(e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished)),e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>0?s("span",{staticClass:"smaller",class:{"text-red":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays<=e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished,"text-grey":e.quest.limitations&&e.quest.limitations.nbPlays&&e.quest.limitations.nbPlays>e.statistics.statistics.nbPlayers+e.statistics.statistics.notFinished}},[e._v("/"+e._s(e.quest.limitations.nbPlays))]):e._e()]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.NumberOfPlayersYesterday"))+e._s(e.$t("label.colons"))+e._s(e.statistics.statistics.dailyNbPlayers)+" ")])])],1),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageScore")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageScore)))]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MaxScore"))+e._s(e.$t("label.colons"))+e._s(e.quest.availablePoints.score)+" ")])])],1),s("q-card",{staticClass:"my-card q-mb-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("label.AverageDuration")))])]),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("div",{staticClass:"title1 text-primary centered"},[e._v(e._s(Math.ceil(e.statistics.statistics.averageDuration)))])])],1),e.statistics&&e.statistics.statistics&&e.statistics.statistics.ageRepartition&&e.statistics.statistics.ageRepartition.length>0?s("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersByAge")}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.ageRepartition,(function(t){return s("q-item",{key:t._id},[t&&!t._id?s("q-item-section",[e._v(e._s(e.$t("label.null"))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e(),t&&t._id?s("q-item-section",[e._v(e._s(e.$t("label.Age"+t._id.replace("-","").replace("+","")))+e._s(e.$t("label.colons"))+e._s(t.nb))]):e._e()],1)})),1)],1):e._e(),e.statistics&&e.statistics.statistics&&e.statistics.statistics.sexRepartition&&e.statistics.statistics.sexRepartition.length>0?s("q-expansion-item",{attrs:{dense:"","dense-toggle":"","expand-separator":"",label:e.$t("label.NumberOfPlayersBySex")}},[s("q-list",{staticClass:"shadow-2 rounded-borders"},e._l(e.statistics.statistics.sexRepartition,(function(t){return s("q-item",{key:t._id},[s("q-item-section",[e._v(e._s(e.$t("label."+t._id))+e._s(e.$t("label.colons"))+e._s(t.nb))])],1)})),1)],1):e._e(),e.reviews.length>0?s("q-item",[s("q-item-section",{attrs:{side:"",top:""}},[s("q-icon",{staticClass:"left-icon",attrs:{name:"chat_bubble_outline"}})],1)],1):e._e(),s("q-item",[s("q-item-section",[s("q-item-label",{staticClass:"big-label"},[e._v(e._s(e.$t("label.Reviews")))]),s("q-list",{attrs:{highlight:""}},[e._l(e.reviews,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[s("img",{attrs:{src:e.getAvatar(t.userId.picture)}})])],1),s("q-item-section",[s("q-item-label",[e._v("\n                    "+e._s(t.userId.name)+"\n                  ")]),s("q-item-label",{attrs:{caption:""}},[s("q-rating",{attrs:{readonly:""},model:{value:t.rating,callback:function(s){e.$set(t,"rating",s)},expression:"review.rating"}}),e._v(" - "+e._s(e.$options.filters.formatDate(t.created))+" (v"+e._s(t.version)+")\n                  ")],1),s("q-item-label",{staticClass:"review-text",attrs:{caption:""}},[e._v(e._s(t.text))])],1)],1)})),0===e.reviews.length?s("q-item",[s("q-item-label",[e._v(e._s(e.$t("label.QuestNotReviewed")))])],1):e._e()],2)],1)],1)],1):e._e(),"results"===e.tabs.selected&&e.isEdition&&"private"===e.quest.access?s("div",{staticClass:"q-pa-md arial",class:{"desktop-only":e.chapters.showNewStepOverview}},["published"===e.quest.status?s("div",[e.ranking&&e.ranking.items&&e.ranking.items.length>0?s("div",[s("q-list",e._l(e.ranking.items,(function(t,a){return s("q-item",{key:a},[s("q-item-section",{attrs:{top:"",avatar:""}},[s("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?s("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.userData.name))]),"finished"===t.status?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.Succeeded")))]):e._e(),"finished"!==t.status?s("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.$t("label.CurrentlyPlaying")))]):e._e()],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?s("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayersYetForThisQuest"))+"\n        ")]):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:e.closePrivateQuest}},[e._v(e._s(e.$t("label.ClosePrivateQuest")))]),s("div",[e._v(e._s(e.$t("label.ClosePrivateQuestDesc")))])],1)]):e._e(),"old"===e.quest.status?s("div",[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.FinalRanking")))]),e.ranking&&e.ranking.items&&e.ranking.items.length>0?s("div",[e._v("\n          "+e._s(e.$t("label.FinalRankingIntro"))+"\n          "),s("q-list",e._l(e.ranking.items,(function(t,a){return s("q-item",{key:a},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[e._v("\n                  "+e._s(a+1)+"\n                ")])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.userData.name))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.score)+" "+e._s(e.$t("label.points")))])],1),s("q-item-section",{attrs:{side:"",top:"",avatar:""}},[s("q-avatar",[t.userData.picture&&""!==t.userData.picture&&-1!==t.userData.picture.indexOf("http")?s("img",{attrs:{src:t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture&&-1===t.userData.picture.indexOf("http")?s("img",{attrs:{src:e.serverUrl+"/upload/profile/"+t.userData.picture}}):e._e(),t.userData.picture&&""!==t.userData.picture?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1)],1)})),1)],1):e._e(),e.ranking&&e.ranking.items&&0===e.ranking.items.length?s("div",{staticClass:"centered"},[e._v("\n          "+e._s(e.$t("label.NoPlayerForThisQuest"))+"\n        ")]):e._e()]):e._e()]):e._e(),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white hint panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.QuestMedia")))]),e._l(e.media.items,(function(t,a){return s("q-list",{key:t.id},[s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[s("q-item-section",{attrs:{thumbnail:""},on:{click:function(t){return e.zoomMedia(a)}}},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file}})]),s("q-item-section",[e._v(e._s(t.size)+" Ko")]),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"delete"},on:{click:function(s){return e.removeMedia(t._id)}}})],1)],1)],1)})),0===e.media.items.length?s("div",[e._v("\n          "+e._s(e.$t("label.YouDoNotUseAnyMediaYetInYourQuest"))+"\n        ")]):e._e(),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],2)]),s("q-dialog",{model:{value:e.media.detail.isOpened,callback:function(t){e.$set(e.media.detail,"isOpened",t)},expression:"media.detail.isOpened"}},[e.media.items.length>0?s("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+e.media.items[e.media.detail.index].type+e.media.items[e.media.detail.index].file}}):e._e(),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.unzoomMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1),s("q-dialog",{model:{value:e.premium.isOpened,callback:function(t){e.$set(e.premium,"isOpened",t)},expression:"premium.isOpened"}},[s("div",{staticClass:"q-pa-md"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"statics/icons/game/premium-header.png"}}),s("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$t("label.PremiumDefinition1")))]),s("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumDefinition2"))}}),e.premium.canMovePremium?e._e():s("div",{staticClass:"centered"},[s("p",[e._v(e._s(e.$t("label.PremiumDefinition3")))]),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Close")))])],1),e.premium.canMovePremium?s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-mb-sm glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.movePremium()}}},[e._v(e._s(e.$t("label.MovePremium")))]),s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{flat:"",color:"primary"},on:{click:function(t){e.premium.isOpened=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1):e._e()])]),null!==e.story.step&&"end"!==e.story.step?s("div",{staticClass:"over-map mobile-fit",class:"font-"+e.form.fields.customization.font},[s("story",{attrs:{step:e.story.step,data:e.story.data},on:{next:function(t){e.story.step="end"}}})],1):e._e()],1),s("div",{staticClass:"col-auto"},[e.chapters.showNewStepPageSettings||e.chapters.showNewStepOverview||e.chapters.showNewStepPage?e._e():s("div",{staticClass:"desktop-only background-dark arial full-page-div full-height"},[s("div",{staticClass:"q-pa-xl",domProps:{innerHTML:e._s(e.$t("label.CreationStudioHelp"))}})]),e.chapters.showNewStepPage?s("div",{staticClass:"bg-white arial full-page-div"},[s("div",{staticClass:"scroll"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:e.closeStepTypePage}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("div",{staticClass:"text-h4 q-pa-md"},[e._v(e._s(e.$t("label.ChooseTheStepType")))]),s("div",[s("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Transition")))]),s("q-list",e._l(e.filteredStepTypes("transition"),(function(t){return s("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",{staticClass:"centered q-pa-sm"},[s("div",[e._v(e._s(e.$t("stepType."+t.description)))]),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(s){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),s("div",{staticClass:"text-subtitle1 q-pa-md"},[e._v(e._s(e.$t("label.Quest")))]),s("q-list",e._l(e.filteredStepTypes("enigma"),(function(t){return s("q-expansion-item",{key:t.code,attrs:{color:"primary",popup:"",group:"steptype",icon:"fas fa-"+t.icon,label:e.$t("stepType."+t.title)}},[s("div",{staticClass:"centered q-pa-sm"},[s("div",[e._v(e._s(e.$t("stepType."+t.description)))]),s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-select-step-type-"+t.code},nativeOn:{click:function(s){return e.selectStepType(t)}}},[e._v(e._s(e.$t("label.UseThisGame")))])],1)])})),1),s("div",{staticClass:"q-pa-md centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.closeStepTypePage()}}},[e._v(e._s(e.$t("label.Close")))])],1)],1)])]):e._e(),e.chapters.showNewStepPageSettings?s("div",{staticClass:"bg-white arial full-page-div"},[s("stepSettings",{attrs:{quest:e.quest,stepId:e.stepId,lang:e.languages.current,options:{type:e.chapters.newStep.type,chapterId:e.chapters.newStep.chapterId,previousStepId:e.chapters.newStep.previousStepId,mode:e.form.fields.editorMode}},on:{change:e.trackStepChanges,close:e.closeStepSettingsPage,openPremiumBox:e.openPremiumBox}})],1):e._e(),e.chapters.showNewStepOverview?s("div",{staticClass:"fullscreen-mobile",staticStyle:{background:"none","background-color":"transparent"}},[s("stepPlay",{attrs:{step:e.chapters.newStep.overviewData,runId:"0",customization:e.quest.customization?e.quest.customization:{color:"primary"},inventory:e.inventory,itemUsed:e.selectedItem,reload:e.chapters.reloadStepPlay,lang:e.languages.current},on:{played:e.trackStepPlayed,success:e.trackStepSuccess,fail:e.trackStepFail,pass:e.trackStepPass,msg:e.trackMessage,closeAllPanels:e.closeAllPanels,forceMoveNext:function(t){return e.closeOverview()}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.overview.tabSelected,expression:"overview.tabSelected"}],staticClass:"step-menu step-menu-fixed"},[s("div",{staticClass:"row white-buttons"},[s("div",{staticClass:"col centered q-pb-md"},[e.quest.customization.logo&&""!==e.quest.customization.logo?s("q-btn",{staticClass:"bg-white",attrs:{round:"",size:"lg"}},[s("q-avatar",{attrs:{size:"60px"}},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.logo}})])],1):e._e()],1),s("div",{staticClass:"col centered q-pb-md"},[e.quest.customization&&e.quest.customization.hideInventory?e._e():s("q-btn",{class:{flashing:e.inventory.suggest,"bg-secondary":e.inventory.isOpened&&!e.quest.customization.color,"bg-primary":!e.inventory.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"work","test-id":"btn-inventory"},on:{click:function(t){return e.openInventory()}}})],1),s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.isHintAvailable(),expression:"isHintAvailable()"}],class:{flashing:e.hint.suggest,"bg-secondary":e.hint.isOpened&&!e.quest.customization.color,"bg-primary":!e.hint.isOpened&&!e.quest.customization.color},style:e.quest.customization.color&&""!==e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"lightbulb"},on:{click:function(t){return e.askForHint()}}})],1),e.readOnly?e._e():s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{class:{"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_back"},on:{click:function(t){e.stepId=-1,e.modifyStep(e.chapters.newStep.overviewData)}}})],1),s("div",{staticClass:"col centered q-pb-md"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.canMoveNextStep||e.canPass,expression:"canMoveNextStep || canPass"}],class:{flashing:e.canMoveNextStep,"bg-primary":!e.quest.customization.color},style:e.quest.customization.color?"background-color: "+e.quest.customization.color:"",attrs:{round:"",size:"lg",icon:"arrow_forward","test-id":"btn-next-step"},on:{click:e.closeOverview}})],1)])])],1):e._e(),s("q-dialog",{attrs:{maximized:""},model:{value:e.inventory.isOpened,callback:function(t){e.$set(e.inventory,"isOpened",t)},expression:"inventory.isOpened"}},[s("div",{staticClass:"inventory panel-bottom q-pa-md"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){e.inventory.isOpened=!1}}},[s("q-icon",{staticClass:"medium-icon",attrs:{name:"close"}})],1),s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Inventory")))]),e.warnings.inventoryMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.fillInventory()}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n        ")],1):e._e(),e.inventory.items.length>0&&!e.warnings.inventoryMissing?s("p",[e._v(e._s(e.$t("label.InventoryUsage")))]):e._e(),0===e.inventory.items.length?s("p",[e._v(e._s(e.$t("label.noItemInInventory")))]):e._e(),s("div",{staticClass:"inventory-items"},e._l(e.inventory.items,(function(t,a){return s("div",{key:a,on:{click:function(s){return e.selectItem(t)}}},[t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?s("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.pictures[e.languages.current]:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.pictures[e.languages.current]}}):e._e(),t.pictures&&t.pictures[e.languages.current]&&""!==t.pictures[e.languages.current]?e._e():s("img",{attrs:{src:t.picture.indexOf("statics/")>-1||-1!==t.picture.indexOf("blob:")?t.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+t.picture}}),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?s("p",[e._v(e._s(t.titles[e.languages.current]))]):e._e(),t.titles&&t.titles[e.languages.current]&&""!==t.titles[e.languages.current]?e._e():s("p",[e._v(e._s(t.title))])])})),0)])]),s("q-dialog",{attrs:{maximized:""},model:{value:e.hint.isOpened,callback:function(t){e.$set(e.hint,"isOpened",t)},expression:"hint.isOpened"}},[s("div",{staticClass:"hint panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.Hint")))]),""===e.hint.label?s("p",[e._v(e._s(e.$t("label.NoHintForThisStep")))]):e._e(),""!==e.hint.label?s("p",[e._v(e._s(e.hint.label[e.hint.number]))]):e._e(),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-mb-xl glossy normal-button",attrs:{color:"primary"},on:{click:function(t){return e.askForHint()}}},[s("div",[e._v(e._s(e.$t("label.Close")))])])],1)])])],1)])},_r=[],Tr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white arial step-setting"},[s("div",{staticClass:"q-pa-md background-dark"},[s("a",{staticClass:"float-right no-underline clickable",attrs:{color:"grey"},on:{click:e.close}},[s("q-icon",{staticClass:"subtitle4",attrs:{name:"close"}})],1),null!==e.selectedStep.type?s("div",{staticClass:"subtitle3"},[e._v(e._s(e.$t("stepType."+e.selectedStep.type.title)))]):e._e()]),s("div",{staticClass:"q-pa-md q-pt-md q-mt-lg bottom-margin-for-keypad"},[s("q-input",{attrs:{type:"text",label:e.$t("label.Title")+" "+e.currentLanguageForLabels,"bottom-slots":"",counter:"",maxlength:e.titleMaxLength,error:e.$v.selectedStep.form.title[e.lang].$error,"error-message":e.$t("label.PleaseEnterATitle"),"test-id":"step-title"},on:{blur:e.$v.selectedStep.form.title[e.lang].$touch},model:{value:e.selectedStep.form.title[e.lang],callback:function(t){e.$set(e.selectedStep.form.title,e.lang,t)},expression:"selectedStep.form.title[lang]"}}),"end-chapter"!==e.options.type.code?s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label."+e.mainTextFieldLabel)+" "+e.currentLanguageForLabels,type:"textarea","max-height":100,"min-rows":4,"bottom-slots":"",counter:"",maxlength:e.mainTextMaxLength,error:e.$v.selectedStep.form.text[e.lang].$error,"error-message":e.$t("label.KeepEnigmaQuestionsShort"),"test-id":"step-text"},on:{blur:e.$v.selectedStep.form.text[e.lang].$touch,input:e.$v.selectedStep.form.text[e.lang].$touch},model:{value:e.selectedStep.form.text[e.lang],callback:function(t){e.$set(e.selectedStep.form.text,e.lang,t)},expression:"selectedStep.form.text[lang]"}}):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasBackgroundImage&&"main"===e.options.type.hasBackgroundImage,expression:"options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'main'"}],staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n        "+e._s(e.$t("label.AddABackgroundImage"))+"\n      ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?s("div",[s("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?s("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),s("br"),s("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),"info-video"==e.options.type.code?s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",icon:"cloud_upload",label:e.$t("label.UploadAVideo")},on:{click:function(t){return e.$refs["videofile"].click()}}}),s("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*",hidden:"","test-id":"video-upload"},on:{change:e.uploadVideo}})],1),e.isIOs?s("div",[e._v("\n        "+e._s(e.$t("label.UploadAVideo"))+":\n        "),s("input",{ref:"videofile",attrs:{type:"file",accept:"video/mp4,video/x-m4v,video/*","test-id":"video-upload"},on:{change:e.uploadVideo}})]):e._e(),s("div",[s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.videoStream.$error,expression:"$v.selectedStep.form.videoStream.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:null===e.selectedStep.form.videoStream,expression:"selectedStep.form.videoStream === null"}]},[e._v(e._s(e.$t("label.NoVideoUploaded")))]),null!==e.selectedStep.form.videoStream?s("video",{staticClass:"full-width",attrs:{controls:"",controlsList:"nodownload","test-id":"uploaded-video"}},[s("source",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/video/"+e.selectedStep.form.videoStream,type:"video/mp4"}})]):e._e()])]):e._e(),"new-item"==e.options.type.code?s("div",{staticClass:"inventory"},[null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():s("q-radio",{attrs:{val:"list",label:e.$t("label.SelectPictureInTheList"),"test-id":"radio-select-new-item-in-list"},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"list"===e.imageSource,expression:"imageSource === 'list'"}],staticClass:"row objects-list"},e._l(e.objectsList,(function(t,a){return s("div",{key:a,staticClass:"col-2 q-pa-sm",on:{click:function(t){return e.selectObject(a)}}},[s("img",{class:{selected:e.selectedStep.form.options.picture&&e.selectedStep.form.options.picture==="statics/images/object/"+e.objectsList[a].file},staticStyle:{width:"100%"},attrs:{src:"statics/images/object/"+t.thumb}})])})),0),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?e._e():s("q-radio",{attrs:{val:"upload",label:e.$t("label.UploadTheItemPicture")},model:{value:e.imageSource,callback:function(t){e.imageSource=t},expression:"imageSource"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"upload"===e.imageSource,expression:"imageSource === 'upload'"}]},[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheItemPicture")},on:{click:function(t){return e.$refs["itemfile"].click()}}}),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.UploadTheItemPicture"))+":\n          "),s("input",{ref:"itemfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadItemImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))])]),null!==e.selectedStep.form.options&&e.selectedStep.form.options.picture&&null!==e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.YourItemPicture"))+" :")]),s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.options.picture.indexOf("statics/")?e.selectedStep.form.options.picture:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.options.picture,"test-id":"img-new-item"}}),s("a",{staticClass:"dark",on:{click:function(t){e.selectedStep.form.options.picture=null}}},[e._v(e._s(e.$t("label.SelectANewObject")))])])]):e._e(),s("q-input",{attrs:{label:e.$t("label.ObjectName"),"bottom-slots":"",error:e.$v.selectedStep.form.options.title.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.options.title,callback:function(t){e.$set(e.selectedStep.form.options,"title",t)},expression:"selectedStep.form.options.title"}})],1):e._e(),"character"==e.options.type.code?s("div",[s("div",[e._v(e._s(e.$t("label.SplitMessageWithPipe")))]),s("h2",[e._v(e._s(e.$t("label.Character")))]),e.quest.customization.character&&""!==e.quest.customization.character?s("div",[s("q-radio",{attrs:{val:"usequestcharacter"},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.quest.customization.character}})])],1):e._e(),e._l(6,(function(t){return s("div",{key:t,staticClass:"answer"},[s("q-radio",{attrs:{val:t.toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{attrs:{src:"statics/icons/story/character"+t+"_attitude1.png"}})])],1)})),s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{label:e.$t("label.OtherCharacters")}},e._l(34,(function(t){return s("div",{key:t,staticClass:"answer"},[s("q-radio",{attrs:{val:(t+6).toString()},model:{value:e.selectedStep.form.options.character,callback:function(t){e.$set(e.selectedStep.form.options,"character",t)},expression:"selectedStep.form.options.character"}}),s("p",[s("img",{attrs:{src:"statics/icons/story/character"+(t+6)+"_attitude1.png"}})])],1)})),0)],1),s("div",[s("div",{staticClass:"q-mb-sm"},[e._v("\n          "+e._s(e.$t("label.OrDownloadAFile"))+"\n          "),e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadACharacter")},on:{click:function(t){return e.$refs["characterfile"].click()}}}),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadCharacterImage}})],1),e.isIOs?s("div",[e._v("\n            "+e._s(e.$t("label.UploadACharacter"))+":\n            "),s("input",{ref:"characterfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadCharacterImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.character.$error,expression:"$v.selectedStep.form.options.character.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.character&&e.selectedStep.form.options.character.length>2&&"usequestcharacter"!==e.selectedStep.form.options.character?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/character/"+e.selectedStep.form.options.character}})]):e._e()])])],2):e._e(),"geolocation"===e.options.type.code?s("div",{staticClass:"location-gps"},[s("h2",[e._v(e._s(e.$t("label.DefaultMode")))]),s("div",{staticClass:"fields-group"},[s("q-list",[s("q-item",[s("q-item-section",[s("q-radio",{attrs:{val:"compass",label:e.$t("label.CompassMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),s("q-item-section",[s("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("CompassMode")}}})],1)],1),s("q-item",[s("q-item-section",[s("q-radio",{attrs:{val:"map",label:e.$t("label.MapMode")},model:{value:e.selectedStep.form.options.mode,callback:function(t){e.$set(e.selectedStep.form.options,"mode",t)},expression:"selectedStep.form.options.mode"}})],1),s("q-item-section",[s("q-icon",{staticClass:"text-primary",attrs:{round:"",size:"md",name:"help"},on:{click:function(t){return e.showGeolocationModeHelp("MapMode")}}})],1)],1)],1)],1),s("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),e._l(e.selectedStep.form.options.locations,(function(t,a){return s("div",{key:a,staticClass:"fields-group"},[s("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lat,expression:"location.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",placeholder:"ex. 45,49812",step:"any"},domProps:{value:t.lat},on:{input:function(s){s.target.composing||e.$set(t,"lat",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.lng,expression:"location.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",placeholder:"ex. 5,65487",step:"any"},domProps:{value:t.lng},on:{input:function(s){s.target.composing||e.$set(t,"lng",e._n(s.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),s("div",[s("a",{staticClass:"dark clickable",on:{click:function(t){return e.openGeolocationPopin(a)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))]),e.selectedStep.form.options.locations.length>1?s("span",[e._v(" - "),s("a",{staticClass:"dark clickable",on:{click:function(t){return e.removeGPSLocation(a)}}},[e._v(e._s(e.$t("label.RemoveGPSLocation")))])]):e._e()])])])})),s("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.AddAnGPSLocation")},on:{click:function(t){return e.addGPSLocation()}}})],2):e._e(),"choose"==e.options.type.code?s("div",[s("h2",[e._v(e._s(e.$t("label.ResponseTypes")))]),s("q-radio",{attrs:{val:"text",label:e.$t("label.Texts")},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),s("q-radio",{attrs:{val:"image",label:e.$t("label.Pictures"),"test-id":"radio-choose-images"},on:{click:e.$v.selectedStep.form.options.items.$touch},model:{value:e.config.choose.answerType,callback:function(t){e.$set(e.config.choose,"answerType",t)},expression:"config.choose.answerType"}}),s("h2",[e._v(e._s(e.$t("label.PossibleAnswers")))]),s("p",[e._v(e._s(e.$t("label.SelectTheGoodAnswer")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("q-radio",{attrs:{val:a,"test-id":"radio-answer-"+a},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}}),s("q-input",{directives:[{name:"show",rawName:"v-show",value:"text"===e.config.choose.answerType,expression:"config.choose.answerType === 'text'"}],attrs:{"input-class":"native-input-class","test-id":"text-answer-"+a},on:{input:function(t){e.$v.selectedStep.form.options.items&&e.$v.selectedStep.form.options.items.$each[a].text.$touch}},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"option.text"}}),"text"===e.config.choose.answerType&&e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].text.required?s("p",{staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType&&null===t.imagePath,expression:"config.choose.answerType === 'image' && option.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&e.$v.selectedStep.form.options.items&&!e.$v.selectedStep.form.options.items.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",["image"===e.config.choose.answerType&&null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/choose-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:"image"===e.config.choose.answerType,expression:"config.choose.answerType === 'image'"}],attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-answer-"+a},on:{change:function(t){return e.uploadAnswerImage(a,t)}}})]):e._e(),s("q-btn",{attrs:{"test-id":"delete-answer-"+a},on:{click:function(t){return e.deleteAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary","test-id":"add-answer"},on:{click:function(t){return e.addAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnAnswer"))+"\n      ")])],2):e._e(),"write-text"==e.options.type.code?s("div",[e._l(e.selectedStep.form.answers,(function(t,a){return s("div",{key:a},[s("q-input",{attrs:{label:e.$t("label.ExpectedAnswer"),"bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.RequiredField")},model:{value:e.selectedStep.form.answers[a],callback:function(t){e.$set(e.selectedStep.form.answers,a,t)},expression:"selectedStep.form.answers[index]"}})],1)})),s("q-btn",{staticClass:"full-width",on:{click:function(t){return e.addWriteTextAnswer()}}},[e._v(e._s(e.$t("label.AddAnAnswer")))]),s("div",[e._v(e._s(e.$t("label.WriteTextWarning")))])],2):e._e(),"code-keypad"==e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.Code"),"min-length":"2","max-length":"6","bottom-slots":"",error:e.$v.selectedStep.form.answers.$error,"error-message":e.$t("label.CodeKeypadFormatError"),"test-id":"input-code"},on:{blur:e.$v.selectedStep.form.answers.$touch,input:e.$v.selectedStep.form.answers.$touch},model:{value:e.selectedStep.form.answers,callback:function(t){e.$set(e.selectedStep.form,"answers",t)},expression:"selectedStep.form.answers"}})],1):e._e(),"code-color"==e.options.type.code?s("div",{staticClass:"code-color"},[s("h2",[e._v(e._s(e.$t("label.AvailableColors")))]),s("q-list",e._l(e.config.colorCode.colorsForCode,(function(t,a){return s("q-item",{key:a,style:"background-color: "+t.value},[s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.label))])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{staticClass:"bg-white",on:{click:function(t){return e.deleteColor(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)],1)})),1),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{staticClass:"q-pa-md",attrs:{dense:"",icon:"playlist_add",label:e.$t("label.AddNewColor")}},[s("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCodeName"),maxlength:"15"},model:{value:e.config.colorCode.newColor.label,callback:function(t){e.$set(e.config.colorCode.newColor,"label",t)},expression:"config.colorCode.newColor.label"}}),s("q-input",{attrs:{"bottom-slots":"",label:e.$t("label.TypeColorCode"),maxlength:"7"},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"colorize"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-color",{model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}})],1)],1)]},proxy:!0}],null,!1,2730844002),model:{value:e.config.colorCode.newColor.value,callback:function(t){e.$set(e.config.colorCode.newColor,"value",t)},expression:"config.colorCode.newColor.value"}}),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"secondary"},on:{click:function(t){return e.addColor()}}},[e._v("\n              "+e._s(e.$t("label.Add"))+"\n            ")])],1)],1)],1),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfColorsInTheCode"),options:e.config.colorCode.numberOfDigitsOptions,"test-id":"select-nb-colors"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),s("h2",[e._v(e._s(e.$t("label.ExpectedColorCodeAnswer")))]),s("table",[s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("q-select",{ref:"colorSelect"+a,refInFor:!0,attrs:{"emit-value":"","map-options":"",options:e.config.colorCode.colorsForCode,"test-id":"select-color-"+a},model:{value:e.unformatedAnswer[a],callback:function(t){e.$set(e.unformatedAnswer,a,t)},expression:"unformatedAnswer[index]"}})],1)})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("div",{staticClass:"color-bubble",style:"background-color: "+e.unformatedAnswer[a],on:{click:function(t){return e.triggerClickOnColorSelect(a)}}},[e._v(" ")])])})),0)])],1):e._e(),"code-image"==e.options.type.code?s("div",{staticClass:"code-image"},[s("h2",[e._v(e._s(e.$t("label.ImagesUsedForCode")))]),e._l(e.selectedStep.form.options.images,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"image.imagePath === null"}],class:{"error-label":e.$v.selectedStep.form.options&&!e.$v.selectedStep.form.options.$each[a].imagePath.required}},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"image-code-"+a},on:{change:function(t){return e.uploadCodeAnswerImage(a,t)}}})]):e._e(),s("q-btn",{on:{click:function(t){return e.deleteCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addCodeAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddAnImage"))+"\n      ")]),e.selectedStep.form.options.images&&e.selectedStep.form.options.images.length>0&&e.selectedStep.form.options.images[0].imagePath?s("div",[s("h2",[e._v(e._s(e.$t("label.ExpectedCode")))]),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.NumberOfImagesInTheCode"),options:e.config.imageCode.numberOfDigitsOptions,"test-id":"select-nb-images-in-code"},on:{input:e.changeDigitsNumberInCode},model:{value:e.selectedStep.form.options.codeLength,callback:function(t){e.$set(e.selectedStep.form.options,"codeLength",t)},expression:"selectedStep.form.options.codeLength"}}),s("table",[s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a,staticClass:"text-center",attrs:{"test-id":"previous-image-"+a},on:{click:function(t){return e.previousCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a},[s("img",{attrs:{id:"image-code-setting-"+a,src:e.serverUrl+"/upload/quest/"+e.questId+"/step/code-image/"+e.selectedStep.form.options.images[t].imagePath}})])})),0),s("tr",e._l(e.unformatedAnswer,(function(t,a){return s("td",{key:a,staticClass:"text-center",attrs:{"test-id":"next-image-"+a},on:{click:function(t){return e.nextCodeAnswer(a)}}},[s("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1)})),0)])],1):e._e()],2):e._e(),"jigsaw-puzzle"===e.options.type.code?s("div",[s("div",{staticClass:"background-upload"},[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{label:e.$t("label.UploadThePuzzlePicture")},on:{click:function(t){return e.$refs["puzzlefile"].click()}}}),s("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*",hidden:"","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.UploadThePuzzlePicture"))+":\n          "),s("input",{ref:"puzzlefile",attrs:{type:"file",accept:"image/*","test-id":"upload-puzzle-image"},on:{change:e.uploadPuzzleImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture&&e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture && $v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?e._e():s("p",[e._v(e._s(e.$t("label.WarningImageSizeSquare")))]),e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.YourPuzzlePicture"))+" :")]),s("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/jigsaw-puzzle/"+e.selectedStep.form.options.picture}})]):e._e()]),s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Difficulty"),options:e.config.jigsaw.levels},model:{value:e.selectedStep.form.options.level,callback:function(t){e.$set(e.selectedStep.form.options,"level",t)},expression:"selectedStep.form.options.level"}})],1)]):e._e(),"memory"===e.options.type.code?s("div",[s("h2",[e._v(e._s(e.$t("label.ImagesUsedForCards")))]),e._l(e.selectedStep.form.options.items,(function(t,a){return s("div",{key:a,staticClass:"answer"},[s("p",{directives:[{name:"show",rawName:"v-show",value:null===t.imagePath,expression:"option.imagePath === null"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.NoPictureUploaded")))]),s("p",[null!==t.imagePath?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/memory/"+t.imagePath}}):e._e()]),e.isIOs?e._e():s("span",[s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){return e.$refs["answerImage"][a].click()}}}),s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:"","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})],1),e.isIOs?s("span",[s("input",{ref:"answerImage",refInFor:!0,attrs:{type:"file",accept:"image/*","test-id":"memory-image-"+a},on:{change:function(t){return e.uploadMemoryImage(a,t)}}})]):e._e(),s("q-btn",{on:{click:function(t){return e.deleteMemoryAnswer(a)}}},[s("q-icon",{attrs:{name:"clear"}})],1)],1)})),s("q-btn",{staticClass:"full-width add-answer",attrs:{color:"secondary"},on:{click:function(t){return e.addMemoryAnswer()}}},[e._v("\n        "+e._s(e.$t("label.AddACardPair"))+"\n      ")])],2):e._e(),"phone-call"==e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.PhoneNumber"),"min-length":"2","max-length":"10","bottom-slots":""},model:{value:e.selectedStep.form.options.number,callback:function(t){e.$set(e.selectedStep.form.options,"number",t)},expression:"selectedStep.form.options.number"}})],1):e._e(),"use-item"==e.options.type.code&&e.selectedStep.form.backgroundImage?s("div",{staticClass:"find-item"},[s("p",[s("q-toggle",{attrs:{label:e.$t("label.ObjectNeedToBeAppliedOnPicture")},model:{value:e.selectedStep.form.options.touchLocation,callback:function(t){e.$set(e.selectedStep.form.options,"touchLocation",t)},expression:"selectedStep.form.options.touchLocation"}})],1),s("div",[s("p",[e._v(e._s(e.$t("label.ClickOnTheLocationTheItemMustBeUsed"))+" :")]),s("div",{ref:"useItemPicture",style:"overflow: hidden; background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.useItem.imageHeight+"px; margin: auto;",attrs:{id:"useItemPicture"},on:{click:function(t){return e.getClickCoordinates(t)}}},[e.selectedStep.form.options.touchLocation?s("img",{style:"position: relative; z-index: 500; top: 52vw; left: 37vw; width: "+e.config.useItem.crossSize+"px; height: "+e.config.useItem.crossSize+"px;",attrs:{id:"cross",src:"statics/icons/game/find-item-locator.png"}}):e._e()])])]):e._e(),"use-item"==e.options.type.code?s("div",{staticClass:"inventory"},[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ObjectToUse"),options:e.config.useItem.questItemsAsOptions,"bottom-slots":"",error:e.$v.selectedStep.form.answerItem&&e.$v.selectedStep.form.answerItem.$error,"error-message":e.$t("label.RequiredField")},on:{change:e.$v.selectedStep.form.answerItem.$touch},model:{value:e.selectedStep.form.answerItem,callback:function(t){e.$set(e.selectedStep.form,"answerItem",t)},expression:"selectedStep.form.answerItem"}}),e.selectedStep.form.answerItem?s("div",[e._v("\n        "+e._s(e.$t("label.SelectedObject"))+" :\n        "),s("img",{staticStyle:{width:"100%"},attrs:{src:-1!==e.selectedStep.form.answerItem.indexOf("statics/")?e.selectedStep.form.answerItem:e.serverUrl+"/upload/quest/"+e.questId+"/step/new-item/"+e.selectedStep.form.answerItem}})]):e._e(),s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"find-item"===e.options.type.code&&null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage?s("div",{staticClass:"find-item"},[s("q-select",{attrs:{label:e.$t("label.AreasNumber"),options:e.config.findItem.numberOfAreas,"emit-value":"","map-options":"","bottom-slots":"","options-cover":""},on:{input:e.changeNbAreas},model:{value:e.selectedStep.form.options.nbAreas,callback:function(t){e.$set(e.selectedStep.form.options,"nbAreas",t)},expression:"selectedStep.form.options.nbAreas"}}),s("p",[e._v(e._s(e.$t("label.ClickOnTheItemThatIsToFind"))+" :")]),e.selectedStep&&e.selectedStep.form&&e.selectedStep.form.answers?s("div",{ref:"findItemPicture",style:"position: relative; overflow: hidden;background-image: url("+e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage+"); background-position: center; background-size: 100% 100%; background-repeat: no-repeat; width: 100%; height: "+e.config.findItem.imageHeight+"px; margin: auto;",attrs:{id:"findItemPicture"},on:{click:function(t){return e.getClickCoordinatesFindItem(t)}}},[s("img",{style:"position: absolute; z-index: 500; top: 100px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross0",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(0)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross1",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(1)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross2",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(2)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 200px; left: 200px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross3",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(3)}}}),s("img",{style:"display: none; position: absolute; z-index: 500; top: 300px; left: 100px; width: "+e.config.findItem.crossSize+"px; height: "+e.config.findItem.crossSize+"px; opacity: 0.5",attrs:{id:"cross4",src:"statics/icons/game/find-item-locator.png"},on:{click:function(t){return e.selectFindItemArea(4)}}})]):e._e(),s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.ChangeTheBackgroundImageOnceClicked")},on:{click:function(t){return e.$refs["altfile"].click()}}}),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*",hidden:""},on:{change:e.uploadAlternativeImage}})],1),e.isIOs?s("div",[e._v("\n          "+e._s(e.$t("label.ChangeTheBackgroundImageOnceClicked"))+":\n          "),s("input",{ref:"altfile",attrs:{type:"file",accept:"image/*"},on:{change:e.uploadAlternativeImage}})]):e._e(),e.selectedStep.form.options.altFile&&e.selectedStep.form.options.altFile.length>2?s("div",{staticClass:"centered"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.options.altFile}})]):e._e()])],1):e._e(),"locate-item-ar"===e.options.type.code?s("div",{staticClass:"locate-item-ar"},[s("h2",[e._v(e._s(e.$t("label.ObjectFormat")))]),s("div",{staticClass:"fields-group"},[s("q-radio",{attrs:{val:!1,label:e.$t("label.2DPicture")},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),s("q-radio",{attrs:{val:!0,label:e.$t("label.3DObject"),"test-id":"radio-locate-item-3d"},on:{input:e.change2D3DObject},model:{value:e.selectedStep.form.options.is3D,callback:function(t){e.$set(e.selectedStep.form.options,"is3D",t)},expression:"selectedStep.form.options.is3D"}}),e.selectedStep.form.options.is3D?e._e():s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadThePictureOfTheObjectToFind")},on:{click:function(t){return e.$refs["item-to-find"].click()}}}),s("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png",hidden:""},on:{change:e.uploadItemImage}})],1),e.isIOs?s("div",[e._v("\n            "+e._s(e.$t("label.UploadThePictureOfTheObjectToFind"))+":\n            "),s("input",{ref:"item-to-find",attrs:{type:"file",accept:"image/png"},on:{change:e.uploadItemImage}})]):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.selectedStep.form.options.picture,expression:"!selectedStep.form.options.picture"}]},[e._v(e._s(e.$t("label.PleaseUploadAFileInPNGFormat")))]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.picture.$error,expression:"$v.selectedStep.form.options.picture.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.options.picture?s("div",[s("p",[e._v(e._s(e.$t("label.UploadedPicture"))+" :")]),s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/locate-item-ar/"+e.selectedStep.form.options.picture}})]):e._e(),s("div",[s("p",[e._v(e._s(e.$t("label.ObjectSize")))]),e.selectedStep.form.options.hasOwnProperty("objectSize")?s("q-slider",{attrs:{min:.5,max:10,step:.1,"label-always":"","label-value":(e.selectedStep.form.options.objectSize||.5)+"m"},model:{value:e.selectedStep.form.options.objectSize,callback:function(t){e.$set(e.selectedStep.form.options,"objectSize",t)},expression:"selectedStep.form.options.objectSize"}}):e._e()],1)]),e.selectedStep.form.options.is3D?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Choose3DModel"),options:e.config.locateItem.selectModel3DOptions,"test-id":"select-3d-model"},on:{input:e.changeObjectInList},model:{value:e.selectedStep.form.options.model,callback:function(t){e.$set(e.selectedStep.form.options,"model",t)},expression:"selectedStep.form.options.model"}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.model.$error,expression:"$v.selectedStep.form.options.model.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))]),s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.Or")))]),e.quest.isPremium?s("div",[e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button",label:e.$t("label.UploadTheObjectToFind")},on:{click:function(t){return e.$refs["object-to-find"].click()}}}),s("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb",hidden:""},on:{change:e.uploadItemObject}})],1),e.isIOs?s("div",[e._v("\n              "+e._s(e.$t("label.UploadTheObjectToFind"))+":\n              "),s("input",{ref:"object-to-find",attrs:{type:"file",accept:".glb"},on:{change:e.uploadItemObject}})]):e._e()]):e._e(),s("div",{attrs:{id:"target-canvas"}}),s("div",{staticClass:"q-mb-md"},[e._v("\n            "+e._s(e.$t("label.TouchAndDragObject"))+"\n          ")])],1):e._e(),e.selectedStep.form.options.hasOwnProperty("touchDistance")?s("div",[s("p",[e._v(e._s(e.$t("label.TouchDistance")))]),s("q-slider",{attrs:{min:5,max:100,step:1,"label-always":"","label-value":(e.selectedStep.form.options.touchDistance||10)+"m"},model:{value:e.selectedStep.form.options.touchDistance,callback:function(t){e.$set(e.selectedStep.form.options,"touchDistance",t)},expression:"selectedStep.form.options.touchDistance"}})],1):e._e()],1),s("h2",[e._v(e._s(e.$t("label.LocationToFind")))]),s("div",{staticClass:"fields-group"},[s("div",[e._v("\n          "+e._s(e.$t("label.DefineGPSLocation"))+"\n          "),s("div",{staticClass:"location-gps-inputs"},[s("div",[s("label",{attrs:{for:"answer-latitude"}},[e._v(e._s(e.$t("label.Latitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lat,expression:"selectedStep.form.options.lat",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-latitude",step:"any"},domProps:{value:e.selectedStep.form.options.lat},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lat",e._n(t.target.value))},e.$v.selectedStep.form.options.lat.$touch],blur:[e.$v.selectedStep.form.options.lat.$touch,function(t){return e.$forceUpdate()}]}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lat.$error,expression:"$v.selectedStep.form.options.lat.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])]),s("div",[s("label",{attrs:{for:"answer-longitude"}},[e._v(e._s(e.$t("label.Longitude")))]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedStep.form.options.lng,expression:"selectedStep.form.options.lng",modifiers:{number:!0}}],attrs:{type:"number",id:"answer-longitude",step:"any"},domProps:{value:e.selectedStep.form.options.lng},on:{input:[function(t){t.target.composing||e.$set(e.selectedStep.form.options,"lng",e._n(t.target.value))},e.$v.selectedStep.form.options.lng.$touch],blur:[e.$v.selectedStep.form.options.lng.$touch,function(t){return e.$forceUpdate()}]}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.options.lng.$error,expression:"$v.selectedStep.form.options.lng.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.RequiredField")))])])]),s("div",[s("a",{staticClass:"dark",on:{click:function(t){return e.openGeolocationPopin(-1)}}},[e._v(e._s(e.$t("label.UseMyCurrentGPSLocation")))])])])])]):e._e(),"locate-marker"===e.options.type.code&&"string"===typeof e.selectedStep.form.answers?s("div",{staticClass:"locate-marker"},[s("h2",[e._v(e._s(e.$t("label.Marker")))]),s("p",[s("img",{attrs:{src:"statics/markers/"+e.selectedStep.form.answers+"/marker.png"}}),s("span",[e._v(e._s(e.selectedStep.form.answers))]),s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary","test-id":"btn-open-choose-marker-modal"},on:{click:function(t){return e.openChooseMarkerModal()}}},[e._v("\n          "+e._s(e.$t("label.Choose"))+"\n        ")])],1),s("q-dialog",{attrs:{id:"choose-marker-modal"},model:{value:e.config.locateMarker.markerModalOpened,callback:function(t){e.$set(e.config.locateMarker,"markerModalOpened",t)},expression:"config.locateMarker.markerModalOpened"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("label.ChooseTheMarker")))])]),s("q-card-section",e._l(e.markersList,(function(t,a){return s("q-btn",{key:a,staticClass:"full-width",attrs:{color:"white","test-id":"btn-select-marker-"+t},on:{click:function(s){return e.selectMarker(t)}}},[s("img",{attrs:{src:"statics/markers/"+t+"/marker.png"}}),s("span",[e._v(e._s(t))])])})),1),s("q-card-actions",[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.Cancel")},on:{click:function(t){return e.closeChooseMarkerModal()}}})],1)],1)],1)],1):e._e(),"portrait-robot"===e.options.type.code&&e.selectedStep.form.answers&&e.selectedStep.form.answers.items?s("div",{staticClass:"portrait-robot"},[s("h2",[e._v(e._s(e.$t("label.BuildThePortraitRobot")))]),s("div",{staticClass:"relative-position"},[s("div",[s("img",{attrs:{src:"statics/portrait-robot/face-"+e.selectedStep.form.answers.items.face+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/eye-"+e.selectedStep.form.answers.items.eye+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/mouth-"+e.selectedStep.form.answers.items.mouth+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/nose-"+e.selectedStep.form.answers.items.nose+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/hair-"+e.selectedStep.form.answers.items.hair+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/beard-"+e.selectedStep.form.answers.items.beard+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/glass-"+e.selectedStep.form.answers.items.glass+".png"}})]),s("div",{staticClass:"absolute"},[s("img",{attrs:{src:"statics/portrait-robot/hat-"+e.selectedStep.form.answers.items.hat+".png"}})])]),s("table",{staticClass:"portrait-parts"},[s("tr",[s("td",[s("img",{attrs:{src:"statics/portrait-robot/face-1.png"},on:{click:function(t){return e.changePortraitPart("face")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/eye-1.png"},on:{click:function(t){return e.changePortraitPart("eye")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/nose-1.png"},on:{click:function(t){return e.changePortraitPart("nose")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/hair-1.png"},on:{click:function(t){return e.changePortraitPart("hair")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/beard-2.png"},on:{click:function(t){return e.changePortraitPart("beard")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/glass-2.png"},on:{click:function(t){return e.changePortraitPart("glass")}}})]),s("td",[s("img",{attrs:{src:"statics/portrait-robot/hat-4.png"},on:{click:function(t){return e.changePortraitPart("hat")}}})])])])]):e._e(),"wait-for-event"===e.options.type.code||"trigger-event"===e.options.type.code?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Protocol"),options:e.config.iot.protocols},model:{value:e.selectedStep.form.options.protocol,callback:function(t){e.$set(e.selectedStep.form.options,"protocol",t)},expression:"selectedStep.form.options.protocol"}}),s("q-input",{attrs:{"emit-value":"","map-options":"",label:"DeviceID (plug the device in)",options:e.config.iot.triggerEvent.modes,mask:"NN:NN:NN:NN:NN:NN","fill-mask":"",value:"00:00:00:00:00:00"},model:{value:e.selectedStep.form.options.deviceid,callback:function(t){e.$set(e.selectedStep.form.options,"deviceid",t)},expression:"selectedStep.form.options.deviceid"}}),"wait-for-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.waitForEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.IotObject"),options:e.config.iot.triggerEvent.iotObjectsAsOptions},on:{input:function(t){return e.updateIotStepOptions()}},model:{value:e.selectedStep.form.options.object,callback:function(t){e.$set(e.selectedStep.form.options,"object",t)},expression:"selectedStep.form.options.object"}}):e._e(),"trigger-event"===e.options.type.code?s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.TriggerMode"),options:e.config.iot.triggerEvent.modes},model:{value:e.selectedStep.form.options.triggerMode,callback:function(t){e.$set(e.selectedStep.form.options,"triggerMode",t)},expression:"selectedStep.form.options.triggerMode"}}):e._e(),"distance"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.SuccessRange")))]),s("q-range",{attrs:{min:0,max:200,"left-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.min+"cm":"","right-label-value":e.selectedStep.form.options.range?e.selectedStep.form.options.range.max+"cm":"","label-always":""},model:{value:e.selectedStep.form.options.range,callback:function(t){e.$set(e.selectedStep.form.options,"range",t)},expression:"selectedStep.form.options.range"}})],1):e._e(),"pot"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.SuccessRanges")))]),e._l([1,2,3],(function(t){return s("q-range",{key:t,staticClass:"q-my-md",attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].min:"","right-label-value":e.selectedStep.form.options["range"+t]?e.selectedStep.form.options["range"+t].max:"","label-always":""},model:{value:e.selectedStep.form.options["range"+t],callback:function(s){e.$set(e.selectedStep.form.options,"range"+t,s)},expression:"selectedStep.form.options['range' + index]"}})}))],2):e._e(),"keypad"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.selectedStep.form.options.answer,callback:function(t){e.$set(e.selectedStep.form.options,"answer",t)},expression:"selectedStep.form.options.answer"}})],1):e._e(),"joystick"===e.selectedStep.form.options.object?s("div",[s("h2",{staticStyle:{"line-height":"1.5rem"}},[e._v(e._s(e.$t("label.SuccessRanges")))]),s("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Horizontal")))]),s("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.min:"","right-label-value":e.selectedStep.form.options.rangeX?e.selectedStep.form.options.rangeX.max:"","label-always":""},model:{value:e.selectedStep.form.options.rangeX,callback:function(t){e.$set(e.selectedStep.form.options,"rangeX",t)},expression:"selectedStep.form.options.rangeX"}}),s("p",{staticStyle:{"font-size":"0.8rem"}},[e._v(e._s(e.$t("label.Vertical")))]),s("q-range",{attrs:{min:0,max:255,"left-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.min+"":"","right-label-value":e.selectedStep.form.options.rangeY?e.selectedStep.form.options.rangeY.max+"":"","label-always":""},model:{value:e.selectedStep.form.options.rangeY,callback:function(t){e.$set(e.selectedStep.form.options,"rangeY",t)},expression:"selectedStep.form.options.rangeY"}})],1):e._e(),"button"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{type:"textarea",label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:300},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"lcd"===e.selectedStep.form.options.object?s("div",[s("q-input",{attrs:{label:e.$t("label.Message"),counter:"","bottom-slots":"",maxlength:16},model:{value:e.selectedStep.form.options.message,callback:function(t){e.$set(e.selectedStep.form.options,"message",t)},expression:"selectedStep.form.options.message"}})],1):e._e(),"buzzer"===e.selectedStep.form.options.object?s("div",[s("h2",[e._v(e._s(e.$t("label.Duration")))]),s("q-slider",{attrs:{min:0,max:3e3,"label-value":e.selectedStep.form.options.duration?e.selectedStep.form.options.duration+"ms":"","label-always":""},model:{value:e.selectedStep.form.options.duration,callback:function(t){e.$set(e.selectedStep.form.options,"duration",t)},expression:"selectedStep.form.options.duration"}}),s("h2",[e._v(e._s(e.$t("label.Frequency")))]),s("q-slider",{attrs:{min:100,max:1e4,"label-value":e.selectedStep.form.options.frequency?e.selectedStep.form.options.frequency+"Hz":"","label-always":""},model:{value:e.selectedStep.form.options.frequency,callback:function(t){e.$set(e.selectedStep.form.options,"frequency",t)},expression:"selectedStep.form.options.frequency"}})],1):e._e()],1):e._e(),e.quest.playersNumber>1?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Player"),options:e.players},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:function(t){return e.showHelpPopup("helpPlayer")}}})]},proxy:!0}],null,!1,3443813941),model:{value:e.selectedStep.form.player,callback:function(t){e.$set(e.selectedStep.form,"player",t)},expression:"selectedStep.form.player"}})],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Conditions")}},[s("div",{staticClass:"q-pa-sm"},[e.selectedStep.formatedConditions.length>0?s("q-list",{attrs:{highlight:""}},[s("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("label.ThisStepIsTriggeredWhen")))]),e._l(e.selectedStep.formatedConditions,(function(t,a){return s("q-item",{key:a},[s("q-item-section",[s("q-item-label",{domProps:{innerHTML:e._s(t)}})],1),s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:"delete"},nativeOn:{click:function(t){return e.deleteCondition(a)}}})],1)],1)}))],2):e._e(),0===e.selectedStep.formatedConditions.length?s("div",[e._v("\n            "+e._s(e.$t("label.NoCondition"))+"\n          ")]):e._e(),e.selectedStep.newConditionForm?e._e():s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:e.$t("label.AddACondition")},on:{click:function(t){e.selectedStep.newConditionForm=!0}}}),e.selectedStep.newConditionForm?s("div",[s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionType"),options:e.selectedStep.newCondition.types},on:{input:e.changeNewConditionType},model:{value:e.selectedStep.newCondition.selectedType,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedType",t)},expression:"selectedStep.newCondition.selectedType"}}),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.ConditionValue"),options:e.selectedStep.newCondition.values},model:{value:e.selectedStep.newCondition.selectedValue,callback:function(t){e.$set(e.selectedStep.newCondition,"selectedValue",t)},expression:"selectedStep.newCondition.selectedValue"}}),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"glossy normal-button",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.saveNewCondition()}}}),s("q-btn",{staticClass:"q-mx-md",attrs:{color:"primary",flat:"",label:e.$t("label.Cancel")},on:{click:function(t){e.selectedStep.newConditionForm=!1}}})],1)],1):e._e()],1)])],1):e._e(),e.options&&e.options.mode&&"advanced"===e.options.mode?s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.Chapters")}},[s("div",{staticClass:"q-pa-md"},[s("div",[e._v("\n            "+e._s(e.$t("label.ChapterChangeWarning"))+"\n          ")]),s("q-select",{attrs:{"emit-value":"","map-options":"",label:e.$t("label.Chapter"),options:e.selectedStep.chapters},on:{input:e.changeChapter},model:{value:e.selectedStep.form.chapterId,callback:function(t){e.$set(e.selectedStep.form,"chapterId",t)},expression:"selectedStep.form.chapterId"}})],1)])],1):e._e(),s("q-list",{directives:[{name:"show",rawName:"v-show",value:e.options.type.hasOptions,expression:"options.type.hasOptions"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"add_box",label:e.$t("label.OtherOptions")}},[s("div",{staticClass:"q-pa-sm"},[e.options&&e.options.mode&&"advanced"===e.options.mode&&("use-item"==e.options.type.code||"find-item"==e.options.type.code||"code-image"==e.options.type.code||"code-color"==e.options.type.code||"code-keypad"==e.options.type.code||"choose"==e.options.type.code||"write-text"==e.options.type.code||"portrait-robot"==e.options.type.code)?s("div",{staticClass:"q-pb-md"},[s("q-toggle",{attrs:{label:e.$t("label.DisplayRightAnswer")},model:{value:e.selectedStep.form.displayRightAnswer,callback:function(t){e.$set(e.selectedStep.form,"displayRightAnswer",t)},expression:"selectedStep.form.displayRightAnswer"}})],1):e._e(),!e.options||"info-text"!=e.options.type.code&&"code-image"!=e.options.type.code&&"code-color"!=e.options.type.code&&"code-keypad"!=e.options.type.code&&"choose"!=e.options.type.code&&"write-text"!=e.options.type.code?e._e():s("div",{staticClass:"q-pb-md"},[s("q-toggle",{attrs:{label:e.$t("label.HideHideButton")},model:{value:e.selectedStep.form.options.hideHideButton,callback:function(t){e.$set(e.selectedStep.form.options,"hideHideButton",t)},expression:"selectedStep.form.options.hideHideButton"}})],1),"geolocation"==e.options.type.code||"locate-item-ar"==e.options.type.code?s("div",{staticClass:"location-gps"},[s("q-toggle",{attrs:{label:e.$t("label.DisplayDistanceBetweenUserAndLocation")},model:{value:e.selectedStep.form.showDistanceToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDistanceToTarget",t)},expression:"selectedStep.form.showDistanceToTarget"}}),s("q-toggle",{attrs:{label:e.$t("label.DisplayDirectionArrow")},model:{value:e.selectedStep.form.showDirectionToTarget,callback:function(t){e.$set(e.selectedStep.form,"showDirectionToTarget",t)},expression:"selectedStep.form.showDirectionToTarget"}})],1):e._e(),"geolocation"==e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.AllowToSwitchGeolocationMode")},model:{value:e.selectedStep.form.options.switchmode,callback:function(t){e.$set(e.selectedStep.form.options,"switchmode",t)},expression:"selectedStep.form.options.switchmode"}}),s("q-input",{attrs:{label:e.$t("label.DistanceToWin")},model:{value:e.selectedStep.form.options.distance,callback:function(t){e.$set(e.selectedStep.form.options,"distance",t)},expression:"selectedStep.form.options.distance"}})],1):e._e(),"memory"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.LastItemIsUniq")},model:{value:e.selectedStep.form.options.lastIsSingle,callback:function(t){e.$set(e.selectedStep.form.options,"lastIsSingle",t)},expression:"selectedStep.form.options.lastIsSingle"}})],1):e._e(),"help"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageInventory")},model:{value:e.selectedStep.form.options.helpInventory,callback:function(t){e.$set(e.selectedStep.form.options,"helpInventory",t)},expression:"selectedStep.form.options.helpInventory"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageHint")},model:{value:e.selectedStep.form.options.helpHint,callback:function(t){e.$set(e.selectedStep.form.options,"helpHint",t)},expression:"selectedStep.form.options.helpHint"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessagePrevious")},model:{value:e.selectedStep.form.options.helpPrevious,callback:function(t){e.$set(e.selectedStep.form.options,"helpPrevious",t)},expression:"selectedStep.form.options.helpPrevious"}}),s("q-toggle",{attrs:{label:e.$t("label.HelpStepMessageNext")},model:{value:e.selectedStep.form.options.helpNext,callback:function(t){e.$set(e.selectedStep.form.options,"helpNext",t)},expression:"selectedStep.form.options.helpNext"}})],1):e._e(),e.options.type.nbTrials>0?s("div",[s("q-input",{attrs:{label:e.$t("label.NbTrials")},model:{value:e.selectedStep.form.nbTrial,callback:function(t){e.$set(e.selectedStep.form,"nbTrial",t)},expression:"selectedStep.form.nbTrial"}})],1):e._e(),e.options.type.passOption>0?s("div",[s("q-toggle",{attrs:{label:e.$t("label.UserCanPass")},model:{value:e.selectedStep.form.canPass,callback:function(t){e.$set(e.selectedStep.form,"canPass",t)},expression:"selectedStep.form.canPass"}})],1):e._e(),"image-over-flow"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullWidth")},model:{value:e.selectedStep.form.options.fullWidthPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullWidthPicture",t)},expression:"selectedStep.form.options.fullWidthPicture"}}),s("q-toggle",{attrs:{label:e.$t("label.EnlargePictureToFullHeight")},model:{value:e.selectedStep.form.options.fullHeightPicture,callback:function(t){e.$set(e.selectedStep.form.options,"fullHeightPicture",t)},expression:"selectedStep.form.options.fullHeightPicture"}}),s("q-toggle",{attrs:{label:e.$t("label.PlayerCanTakeSnapshot")},model:{value:e.selectedStep.form.options.snapshotAllowed,callback:function(t){e.$set(e.selectedStep.form.options,"snapshotAllowed",t)},expression:"selectedStep.form.options.snapshotAllowed"}}),s("q-toggle",{attrs:{label:e.$t("label.ReplacePictureByRedFilter")},model:{value:e.selectedStep.form.options.redFilter,callback:function(t){e.$set(e.selectedStep.form.options,"redFilter",t)},expression:"selectedStep.form.options.redFilter"}})],1):e._e(),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?s("div",[s("q-input",{attrs:{label:e.$t("label.DurationBeforeTextAppearAbovePicture")},model:{value:e.selectedStep.form.options.initDuration,callback:function(t){e.$set(e.selectedStep.form.options,"initDuration",t)},expression:"selectedStep.form.options.initDuration"}})],1):e._e(),"end-chapter"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.ResetHistoryAfter")},model:{value:e.selectedStep.form.options.resetHistory,callback:function(t){e.$set(e.selectedStep.form.options,"resetHistory",t)},expression:"selectedStep.form.options.resetHistory"}}),s("q-toggle",{attrs:{label:e.$t("label.RestartChapterAfterStep")},model:{value:e.selectedStep.form.options.resetChapterProgression,callback:function(t){e.$set(e.selectedStep.form.options,"resetChapterProgression",t)},expression:"selectedStep.form.options.resetChapterProgression"}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code&&e.options.type.hasBackgroundImage&&"option"===e.options.type.hasBackgroundImage,expression:"options.type.code !== 'end-chapter' && options.type.hasBackgroundImage && options.type.hasBackgroundImage === 'option'"}],staticClass:"background-upload"},[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:e.showMedia}},[e._v("\n              "+e._s(e.$t("label.AddABackgroundImage"))+"\n            ")]),null!==e.selectedStep.form.backgroundImage&&""!==e.selectedStep.form.backgroundImage&&"find-item"!==e.options.type.code&&"use-item"!==e.options.type.code?s("div",[s("p",[e._v(e._s(e.$t("label.YourPicture"))+" :")]),null!==e.questId?s("img",{staticClass:"full-width",attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+"/step/background/"+e.selectedStep.form.backgroundImage}}):e._e(),s("br"),s("a",{staticClass:"dark",on:{click:e.resetBackgroundImage}},[e._v(e._s(e.$t("label.remove")))])]):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter'"}]},[e.selectedStep.form.audioStream&&""!==e.selectedStep.form.audioStream?s("div",[s("div",[e._v(e._s(e.$t("label.YourAudioFile"))+" : "+e._s(e.selectedStep.form.audioStream))]),s("div",{staticClass:"centered"},[s("a",{staticClass:"dark",on:{click:e.removeAudio}},[e._v(e._s(e.$t("label.Remove")))])])]):e._e(),e.selectedStep.form.audioStream&&""!==e.selectedStep.form.audioStream?e._e():s("div",[e._v("\n              "+e._s(e.$t("label.AddAnAudioFile"))+":\n              "),s("input",{ref:"audiofile",attrs:{type:"file",accept:"audio/mp3"},on:{change:e.uploadAudio}})])]),"info-text"===e.options.type.code||"character"===e.options.type.code||"choose"===e.options.type.code||"write-text"===e.options.type.code||"code-keypad"===e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.KenBurnsEffect")},model:{value:e.selectedStep.form.options.kenBurnsEffect,callback:function(t){e.$set(e.selectedStep.form.options,"kenBurnsEffect",t)},expression:"selectedStep.form.options.kenBurnsEffect"}}),s("br"),s("q-toggle",{attrs:{label:e.$t("label.BlurEffect")},model:{value:e.selectedStep.form.options.blurEffect,callback:function(t){e.$set(e.selectedStep.form.options,"blurEffect",t)},expression:"selectedStep.form.options.blurEffect"}})],1):e._e(),"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code?s("div",[s("q-toggle",{attrs:{label:e.$t("label.UseHtmlInDescription")},model:{value:e.selectedStep.form.options.html,callback:function(t){e.$set(e.selectedStep.form.options,"html",t)},expression:"selectedStep.form.options.html"}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"end-chapter"!==e.options.type.code,expression:"options.type.code !== 'end-chapter'"}]},[s("q-input",{staticClass:"full-width",attrs:{label:e.$t("label.ExtraTextFieldLabel"),type:"textarea","max-height":100,"min-rows":4},model:{value:e.selectedStep.form.extraText[e.lang],callback:function(t){e.$set(e.selectedStep.form.extraText,e.lang,t)},expression:"selectedStep.form.extraText[lang]"}})],1)])])],1),s("q-list",{directives:[{name:"show",rawName:"v-show",value:"yes"==e.options.type.showTrick,expression:"options.type.showTrick == 'yes'"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"lightbulb",label:e.$t("label.Hints")}},[s("div",{staticClass:"q-pa-sm"},[e.selectedStep.form.hint&&e.selectedStep.form.hint[e.lang]&&e.selectedStep.form.hint[e.lang].length>0?s("div",e._l(e.selectedStep.form.hint[e.lang],(function(t,a){return s("div",{key:a},[s("q-btn",{staticClass:"float-right",on:{click:function(t){return e.removeHint(a)}}},[s("q-icon",{attrs:{name:"delete"}})],1),s("q-btn",{staticClass:"float-right q-mr-sm",on:{click:function(t){return e.updateHint(a)}}},[s("q-icon",{attrs:{name:"mode_edit"}})],1),s("div",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("label.Hint")+" "+(a+1)))]),e._v("\n              "+e._s(t)+"\n            ")],1)})),0):e._e(),s("div",[s("q-input",{attrs:{label:e.$t("label.NewHint")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"check"},on:{click:function(t){return e.addHint()}}})]},proxy:!0}]),model:{value:e.newHint,callback:function(t){e.newHint=t},expression:"newHint"}})],1)])])],1),s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.StartOnDate")}},[s("div",{staticClass:"q-pa-sm"},[s("q-toggle",{attrs:{label:e.$t("label.StepIsOnlyVisibleOnThisDate")},model:{value:e.selectedStep.form.startDate.enabled,callback:function(t){e.$set(e.selectedStep.form.startDate,"enabled",t)},expression:"selectedStep.form.startDate.enabled"}}),s("q-date",{attrs:{minimal:""},model:{value:e.selectedStep.form.startDate.date,callback:function(t){e.$set(e.selectedStep.form.startDate,"date",t)},expression:"selectedStep.form.startDate.date"}})],1)])],1),s("q-list",{directives:[{name:"show",rawName:"v-show",value:"enigma"===e.options.type.category&&"image-over-flow"!==e.options.type.code&&!["image-over-flow","trigger-event"].includes(e.options.type.code),expression:"options.type.category === 'enigma' && options.type.code !== 'image-over-flow' && !['image-over-flow', 'trigger-event'].includes(options.type.code)"}],attrs:{bordered:""}},[s("q-expansion-item",{attrs:{icon:"access_time",label:e.$t("label.CountDownLabel")}},[s("div",{staticClass:"q-pa-sm"},[s("q-toggle",{attrs:{label:e.$t("label.CountDownLabel")},on:{input:e.activateCountDown},model:{value:e.selectedStep.form.countDownTime.enabled,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"enabled",t)},expression:"selectedStep.form.countDownTime.enabled"}}),s("q-input",{attrs:{filled:"",label:e.$t("label.CountDownIsActive"),mask:"##h##m##s","fill-mask":"",value:"00h00m00s"},model:{value:e.selectedStep.form.countDownTime.time,callback:function(t){e.$set(e.selectedStep.form.countDownTime,"time",t)},expression:"selectedStep.form.countDownTime.time"}})],1)])],1),s("div",{staticClass:"centered q-pa-md q-pt-lg q-pb-sm"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary","test-id":"btn-save-step"},on:{click:function(t){return e.submitStep(!0)}}},[e._v(e._s(e.$t("label.SaveAndTestThisStep")))])],1),s("div",{staticClass:"centered q-px-md q-pb-xl"},[s("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.submitStep(!1)}}},[e._v(e._s(e.$t("label.SaveThisStep")))])],1)],1),s("q-dialog",{staticClass:"full-width",attrs:{id:"save-changes-modal"},model:{value:e.saveChangesModalOpened,callback:function(t){e.saveChangesModalOpened=t},expression:"saveChangesModalOpened"}},[s("q-card",[s("div",{staticClass:"q-pa-md"},[e._v("\n        "+e._s(e.$t("label.ConfirmSaveChanges"))+"\n      ")]),s("q-card-actions",[s("q-btn",{attrs:{color:"primary",label:e.$t("label.Yes")},on:{click:function(t){return e.submitStep(!1)}}}),s("q-btn",{attrs:{color:"primary",label:e.$t("label.No")},on:{click:function(t){return e.$emit("close")}}})],1)],1)],1),s("q-dialog",{model:{value:e.premium.show,callback:function(t){e.$set(e.premium,"show",t)},expression:"premium.show"}},[s("div",{staticClass:"q-pa-md centered"},[s("div",{domProps:{innerHTML:e._s(e.$t("label.PremiumWarning"))}}),s("q-btn",{staticClass:"q-mt-md",attrs:{color:"primary"},on:{click:function(t){e.premium.show=!1}}},[e._v(e._s(e.$t("label.Close")))])],1)]),"geolocation"===e.options.type.code||"locate-item-ar"===e.options.type.code?s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onNewUserPosition(t)},error:function(t){return e.onUserPositionError(t)}}}):e._e(),s("q-dialog",{model:{value:e.config.geolocation.showPopin,callback:function(t){e.$set(e.config.geolocation,"showPopin",t)},expression:"config.geolocation.showPopin"}},[s("q-card",[s("q-card-section",[s("h1",[e._v(e._s(e.$t("label.CurrentLocation")))]),s("p",[e._v(e._s(e.$t("label.Latitude"))+" : "+e._s(e.config.geolocation.position.latitude))]),s("p",[e._v(e._s(e.$t("label.Longitude"))+" : "+e._s(e.config.geolocation.position.longitude))]),s("p",{class:{warning:e.config.geolocation.position.accuracy>10}},[e._v(e._s(e.$t("label.Accuracy"))+" : "+e._s(Math.round(10*e.config.geolocation.position.accuracy)/10)+" "+e._s(e.$t("label.Meters")))])]),s("q-card-section",{staticClass:"warning",style:{visibility:e.config.geolocation.position.accuracy>10?"visible":"hidden"},domProps:{innerHTML:e._s(e.$t("label.MyLocationWarning"))}}),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary",disable:e.config.geolocation.position.accuracy>10},on:{click:function(t){return e.saveMyGPSLocation()}}},[e._v(e._s(e.$t("label.Save")))]),s("q-btn",{staticClass:"q-ma-sm q-px-md",attrs:{color:"primary"},on:{click:function(t){e.config.geolocation.showPopin=!1}}},[e._v(e._s(e.$t("label.Cancel")))])],1)],1)],1),s("transition",{attrs:{name:"slideInBottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.media.isOpened,expression:"media.isOpened"}],staticClass:"bg-white panel-bottom q-pa-md"},[s("div",{staticClass:"text-h4 q-pt-md q-pb-lg"},[e._v(e._s(e.$t("label.AddABackgroundImage")))]),e.isIOs?e._e():s("div",[s("q-btn",{staticClass:"full-width",attrs:{type:"button"},on:{click:function(t){return e.$refs["backgroundfile"].click()}}},[s("q-icon",{attrs:{name:"cloud_upload"}}),s("label",{attrs:{for:"picturefile1"}},[e._v(e._s(e.$t("label.UploadABackgroundImage")))])],1),s("input",{ref:"backgroundfile",staticStyle:{width:"0.1px",height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute","z-index":"-1"},attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})],1),e.isIOs?s("div",[e._v("\n        "+e._s(e.$t("label.UploadABackgroundImage"))+":\n        "),s("input",{ref:"backgroundfile",attrs:{name:"picturefile1",id:"picturefile1",type:"file",accept:"image/*","test-id":"background-upload"},on:{change:e.uploadBackgroundImage}})]):e._e(),e.media.isSimulated?s("div",{staticClass:"centered"},[s("div",{style:"width: 105px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),s("div",{style:"width: 84px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block; margin-right: 6px;"}),s("div",{style:"width: 135px; height: 180px; background: url("+e.media.simulationPicture+") center center / cover no-repeat; display: inline-block;"})]):e._e(),e.media.isSimulated?s("div",[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.MyBackgroundPictureImageDisplaysOnMobiles")))]),s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-expansion-item",{attrs:{"expand-separator":"",label:e.$t("label.MyPictureIsNotDisplayedWell")}},[s("q-card",[s("q-card-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.MyPictureIsNotDisplayedWellDesc"))}})])],1)],1)],1)],1):e._e(),s("p",{directives:[{name:"show",rawName:"v-show",value:e.$v.selectedStep.form.backgroundImage&&e.$v.selectedStep.form.backgroundImage.$error,expression:"$v.selectedStep.form.backgroundImage && $v.selectedStep.form.backgroundImage.$error"}],staticClass:"error-label"},[e._v(e._s(e.$t("label.PleaseUploadAFile")))]),e.selectedStep.form.backgroundImage||e.media.isSimulated?e._e():s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.WarningImageResize")))]),e.media&&e.media.items&&e.media.items.length>0&&!e.media.isSimulated?s("div",[s("div",{staticClass:"centered q-pa-md"},[e._v(e._s(e.$t("label.OrSelectAnImageInTheList")))]),e._l(e.media.items,(function(t,a){return s("img",{key:t.id,staticStyle:{width:"30vw","max-width":"300px",height:"40vw","max-height":"400px"},attrs:{src:e.serverUrl+"/upload/quest/"+e.questId+t.type+t.file},on:{click:function(t){return e.selectMedia(a)}}})}))],2):e._e(),s("div",{staticClass:"centered q-ma-md"},[s("q-btn",{staticClass:"q-mb-xl glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.hideMedia()}}},[e._v(e._s(e.$t("label.Close")))])],1)])])],1)},Pr=[],Ir=s("d442"),$r=s.n(Ir),Ar=s("547f"),Or=s("57e4"),Mr=s("6397"),zr=s.n(Mr),Nr="demoObject",Fr={props:["quest","stepId","lang","options"],components:{geolocation:ht},watch:{stepId:function(){var e=o()(r.a.mark((function e(t,s){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===t){e.next=3;break}return e.next=3,this.initData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()},data:function(){return{questId:null,selectedStep:{isNew:!0,newConditionForm:!1,id:0,code:null,type:null,form:{title:{},text:{},extraText:{},player:"All",options:{},hint:{},nbTrial:0,canPass:!0,chapterId:"0",conditions:[],startDate:{enabled:!1},countDownTime:{enabled:!1}},formatedConditions:[],newCondition:{selectedType:"stepDone",types:[{label:this.$t("label.FollowStep"),value:"stepDone"},{label:this.$t("label.StepSuccess"),value:"stepSuccess"},{label:this.$t("label.StepFail"),value:"stepFail"}],selectedValue:"",values:[]},chapters:[]},media:{isOpened:!1,isSimulated:!1,simulationPicture:"",items:[],detail:{isOpened:!1,index:0}},players:[],stepTypes:qa,objectsList:Ar,markersList:Or,titleMaxLength:50,imageSource:"",originalStepData:{},saveChangesModalOpened:!1,config:{jigsaw:{levels:[{value:1,label:this.$t("label.Easy")},{value:2,label:this.$t("label.Medium")},{value:4,label:this.$t("label.Hard")},{value:3,label:this.$t("label.VeryHard")}],nbPiecesByLevel:[0,3,4,6,5]},choose:{answerType:"text",defaultNbAnswers:4,minNbAnswers:2,maxNbAnswers:6},colorCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],colorsForCode:this.getColorsForCodeOptions(),newColor:{label:"",value:""}},geolocation:{currentIndex:0,showPopin:!1,position:{latitude:null,longitude:null,accuracy:null}},imageCode:{numberOfDigitsOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],defaultNbAnswers:4,imagesForCode:this.getImagesForCodeOptions(),maxNbAnswers:10},memory:{minNbAnswers:3,maxNbAnswers:10},useItem:{questItemsAsOptions:[],crossSize:40,imageHeight:1200,imageWidth:900},findItem:{numberOfAreas:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],currentArea:0,crossSize:40,imageHeight:1200,imageWidth:900},locateItem:{selectModel3DOptions:[],zoom:60,rotation:{},object:null},locateMarker:{markerModalOpened:!1},portrait:{face:{number:4},eye:{number:16},mouth:{number:1},nose:{number:5},hair:{number:26},beard:{number:31},glass:{number:5},hat:{number:4}},iot:{triggerEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("trigger-event"),modes:[{label:this.$t("label.TriggerModeAuto"),value:"auto"},{label:this.$t("label.TriggerModeManual"),value:"manual"}]},waitForEvent:{iotObjectsAsOptions:this.getIotObjectsAsOptions("wait-for-event")},DeviceID:"0000000000",protocols:[{label:"MQTT",value:"mqtt"},{label:"Bluetooth",value:"bluetooth"}]}},newHint:"",questItems:[],isIOs:window.cordova&&window.cordova.platformId&&"ios"===window.cordova.platformId,serverUrl:"https://api.graaly.com",unformatedAnswer:null,premium:{show:!1}}},computed:{mainTextFieldLabel:function(){return"enigma"===this.options.type.category?"Question":"Text"},mainTextMaxLength:function(){var e=500;return this.options.type.textRules&&this.options.type.textRules.maxNbChars&&(e=this.options.type.textRules.maxNbChars),e},currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.lang.toUpperCase()+"]":""}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("0"!==e.stepId){t.next=3;break}return t.next=3,e.initData();case 3:case"end":return t.stop()}}),t)})))()},methods:{getStepId:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.stepId&&"0"!==e.stepId?(e.selectedStep.id=e.stepId,e.selectedStep.isNew=!1):(e.selectedStep.id=0,e.selectedStep.isNew=!0);case 1:case"end":return t.stop()}}),t)})))()},resetStep:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form={title:{},text:{},extraText:{},answers:{},options:{},conditions:[],backgroundImage:null,videoStream:null,audioStream:null,answerPointerCoordinates:{top:50,left:50},answerItem:null,player:"All",nbTrial:0,canPass:!0,showDistanceToTarget:!0,showDirectionToTarget:!0,displayRightAnswer:!0,trigger:{type:"none"},wrongAnswerAnimation:{type:"none"},hint:{},startDate:{enabled:!1},countDownTime:{enabled:!1},number:null},e.$nextTick((function(){document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="")}));case 2:case"end":return t.stop()}}),t)})))()},initData:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,c,u,d,p,m,h,f;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.questId=e.quest.questId,e.resetStep(),!e.stepId||-1!==e.stepId){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getStepId();case 6:if(e.selectedStep.isNew){t.next=15;break}return t.next=9,As.getById(e.stepId,e.quest.version,"all");case 9:s=t.sent,s&&s.data?Object.assign(e.selectedStep.form,s.data):vt(e.$t("label.ErrorStandardMessage"),"error"),e.options.chapterId=s.data&&s.data.chapterId?s.data.chapterId:0,e.getUnderstandableConditions(),t.next=18;break;case 15:e.selectedStep.form.type=e.options.type.code,e.selectedStep.form.chapterId=e.options.chapterId,0!==e.options.previousStepId&&(e.selectedStep.form.conditions.push("stepDone_"+e.options.previousStepId),e.getUnderstandableConditions());case 18:if(e.selectedStep.type=e.getStepType(e.selectedStep.form.type),e.selectedStep.form.nbTrial&&0!==e.selectedStep.form.nbTrial||(e.selectedStep.form.nbTrial=e.selectedStep.type.nbTrials),null!==e.selectedStep.form.number){t.next=25;break}return t.next=23,As.countForAQuest(e.questId,e.quest.version);case 23:a=t.sent,e.selectedStep.form.number=a&&a.data&&a.data.count?a.data.count+1:1;case 25:if(e.selectedStep.form.title[e.lang]&&""!==e.selectedStep.form.title[e.lang]||(n=e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.title[e.quest.mainLanguage]?e.selectedStep.form.title[e.quest.mainLanguage]:e.$t("label.Step")+" "+e.selectedStep.form.number,e.$set(e.selectedStep.form.title,e.lang,n)),e.selectedStep.form.text[e.lang]&&""!==e.selectedStep.form.text[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.text[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.text,e.lang,e.selectedStep.form.text[e.quest.mainLanguage]),e.selectedStep.form.extraText[e.lang]&&""!==e.selectedStep.form.extraText[e.lang]||e.lang!==e.quest.mainLanguage&&""!==e.selectedStep.form.extraText[e.quest.mainLanguage]&&e.$set(e.selectedStep.form.extraText,e.lang,e.selectedStep.form.extraText[e.quest.mainLanguage]),(!e.selectedStep.form.hint[e.lang]||""===e.selectedStep.form.hint[e.lang])&&e.lang!==e.quest.mainLanguage&&e.selectedStep.form.hint[e.quest.mainLanguage]&&e.selectedStep.form.hint[e.quest.mainLanguage].length>0)for(e.selectedStep.form.hint[e.lang]=[],o=0;o<e.selectedStep.form.hint[e.quest.mainLanguage].length;o++)e.selectedStep.form.hint[e.lang].push(e.selectedStep.form.hint[e.quest.mainLanguage][o]);for("info-text"!==e.options.type.code&&"info-video"!==e.options.type.code&&"new-item"!==e.options.type.code&&"character"!==e.options.type.code&&"help"!==e.options.type.code&&"end-chapter"!==e.options.type.code||e.players.push({label:e.$t("label.All"),value:"All"}),i=0;i<e.quest.playersNumber;i++)e.players.push({label:e.$t("label.Player")+" "+(i+1),value:"P"+(i+1)});if(e.selectedStep.form.options.hasOwnProperty("kenBurnsEffect")||(e.selectedStep.form.options.kenBurnsEffect=!1),e.selectedStep.form.options.hasOwnProperty("blurEffect")||(e.selectedStep.form.options.blurEffect=!1),"choose"!==e.options.type.code){t.next=37;break}if(e.selectedStep.form.options&&e.selectedStep.form.options.items&&Array.isArray(e.selectedStep.form.options.items)){if(e.config.choose.answerType=e.selectedStep.form.options.items[0].hasOwnProperty("imagePath")&&null!==e.selectedStep.form.options.items[0].imagePath?"image":"text","text"===e.config.choose.answerType)for(u=0;u<e.selectedStep.form.options.items.length;u++)e.selectedStep.form.options.items[u].textLanguage&&e.selectedStep.form.options.items[u].textLanguage[e.lang]&&(e.selectedStep.form.options.items[u].text=e.selectedStep.form.options.items[u].textLanguage[e.lang])}else for(e.config.choose.answerType="text",e.selectedStep.form.options={items:[]},e.selectedStep.form.answers=0,c=0;c<e.config.choose.defaultNbAnswers;c++)e.selectedStep.form.options.items.push({text:e.$t("label.AnswerNb",{nb:c+1}),imagePath:null});t.next=124;break;case 37:if("help"!==e.options.type.code){t.next=41;break}e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("helpInventory")||(e.selectedStep.form.options.helpHint=!0,e.selectedStep.form.options.helpInventory=!0,e.selectedStep.form.options.helpNext=!0,e.selectedStep.form.options.helpPrevious=!0),t.next=124;break;case 41:if("code-color"!==e.options.type.code){t.next=47;break}e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=Array(4).fill("#FF0000"),e.selectedStep.form.options.colors&&(e.config.colorCode.colorsForCode=e.selectedStep.form.options.colors),e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),t.next=124;break;case 47:if("code-image"!==e.options.type.code){t.next=53;break}if(!e.selectedStep.form.options||!e.selectedStep.form.options.images)for(e.selectedStep.form.options={images:[]},d=0;d<e.config.imageCode.defaultNbAnswers;d++)e.selectedStep.form.options.images.push({imagePath:null});e.selectedStep.form.options.codeLength||(e.selectedStep.form.options.codeLength=4),e.selectedStep.form.answers&&"string"===typeof e.selectedStep.form.answers&&-1!==e.selectedStep.form.answers.indexOf("|")?e.unformatedAnswer=e.selectedStep.form.answers.split("|"):e.unformatedAnswer=[0,0,0,0],t.next=124;break;case 53:if("code-keypad"!==e.options.type.code){t.next=57;break}"string"!==typeof e.selectedStep.form.answers&&(e.selectedStep.form.answers=""),t.next=124;break;case 57:if("write-text"!==e.options.type.code){t.next=61;break}"object"===tt()(e.selectedStep.form.answers)&&e.selectedStep.form.answers.length||(e.selectedStep.form.answers=[],e.selectedStep.form.answers.push("")),t.next=124;break;case 61:if("info-text"!==e.options.type.code&&"character"!==e.options.type.code&&"choose"!==e.options.type.code&&"write-text"!==e.options.type.code&&"code-keypad"!==e.options.type.code){t.next=66;break}e.selectedStep.form.options.hasOwnProperty("initDuration")||(e.selectedStep.form.options.initDuration=1),"character"!==e.options.type.code||e.selectedStep.form.options.character||l["a"].set(e.selectedStep.form.options,"character","1"),t.next=124;break;case 66:if("find-item"!==e.options.type.code){t.next=71;break}e.selectedStep.form.options.hasOwnProperty("nbAreas")?e.$nextTick((function(){this.initFindItemElements(),this.positionFindItemPointer()})):(e.selectedStep.form.options.nbAreas=1,e.selectedStep.form.options.coordinates=[{top:50,left:50}]),e.selectedStep.form.options||(e.selectedStep.form.options={}),t.next=124;break;case 71:if("use-item"!==e.options.type.code){t.next=78;break}e.selectedStep.form.answers.hasOwnProperty("coordinates")&&(e.selectedStep.form.answerPointerCoordinates=e.selectedStep.form.answers.coordinates,e.$nextTick((function(){this.initUseItemElements(),this.positionUseItemPointer()}))),e.selectedStep.form.answers&&e.selectedStep.form.answers.item&&(e.selectedStep.form.answerItem=e.selectedStep.form.answers.item),e.getQuestItemsAsOptions(),e.selectedStep.form.options&&e.selectedStep.form.options.hasOwnProperty("touchLocation")||(e.selectedStep.form.options={touchLocation:!0}),t.next=124;break;case 78:if("new-item"!==e.options.type.code){t.next=82;break}e.selectedStep.form.options.hasOwnProperty("picture")?(e.selectedStep.form.options.hasOwnProperty("pictures")&&e.selectedStep.form.options.pictures[e.lang]&&(e.selectedStep.form.options.picture=e.selectedStep.form.options.pictures[e.lang]),e.selectedStep.form.options.hasOwnProperty("titles")&&e.selectedStep.form.options.titles[e.lang]&&(e.selectedStep.form.options.title=e.selectedStep.form.options.titles[e.lang])):e.selectedStep.form.options={picture:null,title:"",pictures:{fr:"",en:""},titles:{fr:"",en:""}},t.next=124;break;case 82:if("jigsaw-puzzle"!==e.options.type.code){t.next=86;break}e.selectedStep.form.options.hasOwnProperty("picture")||(e.selectedStep.form.options={picture:null,level:2}),t.next=124;break;case 86:if("memory"!==e.options.type.code){t.next=90;break}if(!e.selectedStep.form.options.hasOwnProperty("items")){for(p=[],m=0;m<8;m++)p.push({imagePath:null,single:!1});e.$set(e.selectedStep.form.options,"items",p)}t.next=124;break;case 90:if("portrait-robot"!==e.options.type.code){t.next=94;break}e.selectedStep.form.answers.hasOwnProperty("items")||e.$set(e.selectedStep.form.answers,"items",{type:1,face:1,eye:1,mouth:1,nose:1,hair:1,beard:1,glass:1,hat:1}),t.next=124;break;case 94:if("phone-call"!==e.options.type.code){t.next=98;break}e.selectedStep.form.options.hasOwnProperty("number")||e.$set(e.selectedStep.form.options,"number","000000000"),t.next=124;break;case 98:if("geolocation"!==e.options.type.code){t.next=105;break}e.selectedStep.form.options.hasOwnProperty("distance")||e.$set(e.selectedStep.form.options,"distance","20"),e.selectedStep.form.options.hasOwnProperty("showHelp")||e.$set(e.selectedStep.form.options,"showHelp",!0),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","compass"),e.selectedStep.form.options.hasOwnProperty("locations")||e.$set(e.selectedStep.form.options,"locations",[{lat:"",lng:"",destination:""}]),t.next=124;break;case 105:if("locate-item-ar"!==e.options.type.code){t.next=123;break}for(h in e.selectedStep.form.options.hasOwnProperty("picture")||e.$set(e.selectedStep.form.options,"picture",null),e.selectedStep.form.options.hasOwnProperty("objectSize")||e.$set(e.selectedStep.form.options,"objectSize",1),e.selectedStep.form.options.hasOwnProperty("touchDistance")||e.$set(e.selectedStep.form.options,"touchDistance",10),e.selectedStep.form.options.hasOwnProperty("is3D")||e.$set(e.selectedStep.form.options,"is3D",!1),va)e.config.locateItem.selectModel3DOptions.push({label:va[h].name[e.$store.state.user.language],value:h});if(e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),!e.selectedStep.form.options.is3D){t.next=121;break}if(!e.selectedStep.form.options.customModel){t.next=119;break}return t.next=117,e.displayARObject(e.selectedStep.form.options.customModel,e.questId);case 117:t.next=121;break;case 119:return t.next=121,e.displayARObject(e.selectedStep.form.options.model);case 121:t.next=124;break;case 123:if("locate-marker"===e.options.type.code){for(f in"string"!==typeof e.selectedStep.form.answers&&e.$set(e.selectedStep.form,"answers",Or[0]),va)e.config.locateItem.selectModel3DOptions.push({label:va[f].name[e.$store.state.user.language],value:f});e.config.locateItem.selectModel3DOptions=e.config.locateItem.selectModel3DOptions.sort((function(e,t){return e.label.localeCompare(t.label)})),e.selectedStep.form.options.hasOwnProperty("model")||e.$set(e.selectedStep.form.options,"model",e.config.locateItem.selectModel3DOptions[0].value),e.selectedStep.form.options.hasOwnProperty("mode")||e.$set(e.selectedStep.form.options,"mode","scan")}else"wait-for-event"!==e.options.type.code&&"trigger-event"!==e.options.type.code||(e.selectedStep.form.options.hasOwnProperty("protocol")||e.$set(e.selectedStep.form.options,"protocol","bluetooth"),e.selectedStep.form.options.hasOwnProperty("object")||("wait-for-event"===e.options.type.code?e.$set(e.selectedStep.form.options,"object","distance"):e.$set(e.selectedStep.form.options,"object","lcd"),e.updateIotStepOptions()),"trigger-event"!==e.options.type.code||e.selectedStep.form.options.hasOwnProperty("triggerMode")||e.$set(e.selectedStep.form.options,"triggerMode","auto"));case 124:return e.originalStepData=nt.clone(e.selectedStep.form),t.next=127,e.changeNewConditionType();case 127:return t.next=129,e.listChapters(e.questId,e.quest.version,e.lang);case 129:case"end":return t.stop()}}),t)})))()},submitStep:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i,l,c,u;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$v.selectedStep.form.$touch(),!t.$v.selectedStep.form.$error){s.next=4;break}return vt(t.$t("label.StepSettingsFormError"),"error"),s.abrupt("return");case 4:if("choose"===t.options.type.code&&"text"===t.config.choose.answerType){for(a=0;a<t.selectedStep.form.options.items.length;a++)t.selectedStep.form.options&&t.selectedStep.form.options.items&&t.selectedStep.form.options.items[a]&&t.selectedStep.form.options.items[a].textLanguage?t.selectedStep.form.options.items[a].textLanguage[t.lang]=t.selectedStep.form.options.items[a].text:(n={},n[t.lang]=t.selectedStep.form.options.items[a].text,t.selectedStep.form.options.items[a].textLanguage=n);t.selectedStep.form.options.items=t.selectedStep.form.options.items.map((function(e){return e.imagePath=null,e}))}return"character"===t.options.type.code&&(t.selectedStep.form.options.character||(t.selectedStep.form.options.character="1")),"code-keypad"===t.options.type.code&&(t.selectedStep.form.options.codeLength=t.selectedStep.form.answers.length),"code-color"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|"),t.selectedStep.form.options.colors=t.config.colorCode.colorsForCode),"code-image"===t.options.type.code&&(t.selectedStep.form.answers=t.unformatedAnswer.join("|")),"jigsaw-puzzle"===t.options.type.code&&(o=parseInt(t.selectedStep.form.options.level,10),i=t.config.jigsaw.nbPiecesByLevel[o],l=nt.buildIncrementalArray(Math.pow(i,2)),l=nt.shuffle(l),t.selectedStep.form.answers=l.join("|")),"memory"===t.options.type.code&&Array.isArray(t.selectedStep.form.options.items)&&t.selectedStep.form.options.items.length>0&&(t.selectedStep.form.options.items.map((function(e){return e.single=!1,e})),t.selectedStep.form.options.lastIsSingle&&(t.selectedStep.form.options.items[t.selectedStep.form.options.items.length-1].single=!0)),t.options.type.code,t.options.type.code,"use-item"===t.options.type.code&&(t.selectedStep.form.answers={coordinates:t.selectedStep.form.answerPointerCoordinates,item:t.selectedStep.form.answerItem}),"new-item"===t.options.type.code&&(t.selectedStep.form.options.titles||(t.selectedStep.form.options.titles={}),t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures||(t.selectedStep.form.options.pictures={}),t.selectedStep.form.options.pictures[t.lang]||(t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture)),c=Object.assign(t.selectedStep.form,{questId:t.questId,version:t.quest.version,chapterId:t.options.chapterId,type:t.options.type.code}),t.$q.loading.show(),s.next=19,As.save(c);case 19:u=s.sent,t.$q.loading.hide(),!0===e?u&&u.data&&u.data.stepId?(c.id=u.data.stepId,c.stepId=u.data.stepId,t.$emit("change",c)):vt(t.$t("label.TechnicalIssue"),"error"):!1===e&&(vt(t.$t("label.StepSaved"),"success"),t.$emit("close"));case 22:case"end":return s.stop()}}),s)})))()},addAnswer:function(){this.selectedStep.form.options.items.length>=this.config.choose.maxNbAnswers?vt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.choose.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({isRightAnswer:!1,text:this.$t("label.AnswerNb",{nb:this.selectedStep.form.options.items.length+1}),imagePath:null})},addMemoryAnswer:function(){this.selectedStep.form.options.items.length>=this.config.memory.maxNbAnswers?vt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.memory.maxNbAnswers}),"error"):this.selectedStep.form.options.items.push({imagePath:null,single:!1})},addCodeAnswer:function(){this.selectedStep.form.options.images.length>=this.config.imageCode.maxNbAnswers?vt(this.$t("label.YouCantAddMoreThanNbAnswers",{nb:this.config.imageCode.maxNbAnswers}),"error"):this.selectedStep.form.options.images.push({imagePath:null})},deleteAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.choose.minNbAnswers?vt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},deleteCodeAnswer:function(e){if(this.selectedStep.form.options.images.length<=this.config.choose.minNbAnswers)vt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.choose.minNbAnswers}),"error");else{for(var t=0;t<this.unformatedAnswer.length;t++)this.unformatedAnswer[t].toString()===e.toString()?"0"===e.toString()?this.unformatedAnswer[t]=1:this.unformatedAnswer[t]=0:this.unformatedAnswer[t].toString()>e.toString()&&this.unformatedAnswer[t]--;this.selectedStep.form.options.images.splice(e,1)}},changeDigitsNumberInCode:function(){if("code-color"===this.options.type.code){this.unformatedAnswer.length=0;var e=parseInt(this.selectedStep.form.options.codeLength,10);while(e>this.unformatedAnswer.length)this.unformatedAnswer.push("#FF0000")}else if("code-image"===this.options.type.code){this.unformatedAnswer.length=0;var t=parseInt(this.selectedStep.form.options.codeLength,10);while(t>this.unformatedAnswer.length)this.unformatedAnswer.push(0)}},nextCodeAnswer:function(e){this.unformatedAnswer[e]++;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]>=t&&(this.unformatedAnswer[e]=0),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},previousCodeAnswer:function(e){this.unformatedAnswer[e]--;var t=this.getNbImageUploadedForCode();this.unformatedAnswer[e]<0&&(this.unformatedAnswer[e]=t-1),document.getElementById("image-code-setting-"+e).src=this.serverUrl+"/upload/quest/"+this.questId+"/step/code-image/"+this.selectedStep.form.options.images[this.unformatedAnswer[e]].imagePath},changePortraitPart:function(e){this.selectedStep.form.answers.items&&(l["a"].set(this.selectedStep.form.answers.items,e,this.selectedStep.form.answers.items[e]+1),this.selectedStep.form.answers.items[e]>this.config.portrait[e].number&&l["a"].set(this.selectedStep.form.answers.items,e,1))},getNbImageUploadedForCode:function(){for(var e=0,t=0;t<this.selectedStep.form.options.images.length;t++)this.selectedStep.form.options.images[t]&&this.selectedStep.form.options.images[t].imagePath&&e++;return e},getUnderstandableConditions:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.formatedConditions.length=0,s=0;case 2:if(!(s<e.selectedStep.form.conditions.length)){t.next=13;break}if(a=e.selectedStep.form.conditions[s],n=a.split("_"),"stepDone"!==n[0]&&"stepSuccess"!==n[0]&&"stepFail"!==n[0]){t.next=10;break}return t.next=8,As.getById(n[1],e.quest.version,"all");case 8:o=t.sent,o&&o.data&&o.data.hasOwnProperty("title")&&(i=o.data.title[e.lang]?o.data.title[e.lang]:o.data.title[Object.keys(o.data.title)[0]],"stepDone"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.FollowStep")+" <i>"+i+"</i>"),"stepSuccess"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepSuccess")+" <i>"+i+"</i>"),"stepFail"===n[0]&&e.selectedStep.formatedConditions.push(e.$t("label.StepFail")+" <i>"+i+"</i>"));case 10:s++,t.next=2;break;case 13:case"end":return t.stop()}}),t)})))()},deleteCondition:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.conditions.splice(e,1),t.selectedStep.formatedConditions.splice(e,1);case 2:case"end":return s.stop()}}),s)})))()},changeNewConditionType:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedStep.newCondition.values.length=0,s=["geolocation","locate-item-ar","choose","write-text","code-keypad","code-color","code-image","find-item","use-item","jigsaw-puzzle","memory"],"stepDone"!==e.selectedStep.newCondition.selectedType&&"stepSuccess"!==e.selectedStep.newCondition.selectedType&&"stepFail"!==e.selectedStep.newCondition.selectedType){t.next=7;break}return t.next=5,As.listForAChapter(e.questId,e.selectedStep.form.chapterId,e.quest.version,"all");case 5:if(a=t.sent,a&&a.data&&a.data.length>0)for(n=0;n<a.data.length;n++)a.data[n].stepId.toString()!==e.stepId.toString()&&("stepDone"!==e.selectedStep.newCondition.selectedType&&-1===s.indexOf(a.data[n].type)||(o=a.data[n].title[e.lang]?a.data[n].title[e.lang]:a.data[n].title[Object.keys(a.data[n].title)[0]],e.selectedStep.newCondition.values.push({label:o,value:a.data[n].stepId})));case 7:case"end":return t.stop()}}),t)})))()},saveNewCondition:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return""!==e.selectedStep.newCondition.selectedType&&""!==e.selectedStep.newCondition.selectedValue&&("stepDone"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepDone_"+e.selectedStep.newCondition.selectedValue),"stepSuccess"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepSuccess_"+e.selectedStep.newCondition.selectedValue),"stepFail"===e.selectedStep.newCondition.selectedType&&e.selectedStep.form.conditions.push("stepFail_"+e.selectedStep.newCondition.selectedValue)),e.getUnderstandableConditions(),t.next=4,e.resetNewConditionForm();case 4:e.selectedStep.newConditionForm=!1;case 5:case"end":return t.stop()}}),t)})))()},resetNewConditionForm:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.newCondition.selectedType="stepDone",t.next=3,e.changeNewConditionType();case 3:e.selectedStep.newCondition.selectedValue="";case 4:case"end":return t.stop()}}),t)})))()},listChapters:function(e,t,s){var a=this;return o()(r.a.mark((function n(){var o,i;return r.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,As.listChapters(e,t,s);case 2:if(o=r.sent,o&&o.data)for(i=0;i<o.data.length;i++)a.selectedStep.chapters.push({label:o.data[i].title,value:o.data[i].chapterId});case 4:case"end":return r.stop()}}),n)})))()},changeChapter:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(l["a"].set(t.selectedStep.form,"chapterId",e),l["a"].set(t.options,"chapterId",e),t.$forceUpdate(),a=0;a<t.selectedStep.form.conditions.length;a++)t.deleteCondition(0);case 4:case"end":return s.stop()}}),s)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},uploadBackgroundImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadBackgroundImage(t.questId,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.selectedStep.form.backgroundImage=o.data.file,t.displayBackgroundImageSize(t.selectedStep.form.backgroundImage)):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},displayBackgroundImageSize:function(e){this.media.isSimulated=!0,this.media.simulationPicture=this.serverUrl+"/upload/quest/"+this.questId+"/step/background/"+e},resetBackgroundImage:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.backgroundImage=null,document.getElementById("picturefile1")&&(document.getElementById("picturefile1").value=""),document.getElementById("picturefile2")&&(document.getElementById("picturefile2").value="");case 3:case"end":return t.stop()}}),t)})))()},uploadVideo:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("video",a[0]),s.next=8,As.uploadVideo(t.questId,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?t.selectedStep.form.videoStream=o.data.file:o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadImageToRecognize:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadImageToRecognize(t.questId,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?t.selectedStep.form.answers=o.data.file:o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadAnswerImage:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.target.files,n[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),o=new FormData,o.append("image",n[0]),a.next=8,As.uploadAnswerImage(s.questId,o);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?vt(s.$t("label.FileTooLarge"),"error"):vt(s.$t("label.UnknowUploadError"),"error"):vt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadMemoryImage:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.target.files,n[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),o=new FormData,o.append("image",n[0]),a.next=8,As.uploadMemoryImage(s.questId,o);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.items[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?vt(s.$t("label.FileTooLarge"),"error"):vt(s.$t("label.UnknowUploadError"),"error"):vt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},deleteMemoryAnswer:function(e){this.selectedStep.form.options.items.length<=this.config.memory.minNbAnswers?vt(this.$t("label.YouMustDefineAtLeastNbAnswers",{nb:this.config.memory.minNbAnswers}),"error"):this.selectedStep.form.options.items.splice(e,1)},uploadCodeAnswerImage:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.target.files,n[0]){a.next=3;break}return a.abrupt("return");case 3:return s.$q.loading.show(),o=new FormData,o.append("image",n[0]),a.next=8,As.uploadCodeAnswerImage(s.questId,o);case 8:i=a.sent,i&&i.hasOwnProperty("data")?i.data.file?s.selectedStep.form.options.images[e].imagePath=i.data.file:i.data.message&&"Error: File too large"===i.data.message?vt(s.$t("label.FileTooLarge"),"error"):vt(s.$t("label.UnknowUploadError"),"error"):vt(s.$t("label.ErrorStandardMessage"),"error"),s.$q.loading.hide();case 11:case"end":return a.stop()}}),a)})))()},uploadPuzzleImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadPuzzleImage(t.questId,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?t.selectedStep.form.options.picture=o.data.file:o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadItemImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadItemImage(t.questId,t.options.type.code,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.selectedStep.form.options.picture=o.data.file,t.selectedStep.form.options.pictures&&(t.selectedStep.form.options.pictures[t.lang]=o.data.file)):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadItemObject:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadItemObject(t.questId,t.options.type.code,n);case 8:if(o=s.sent,!o||!o.hasOwnProperty("data")){s.next=19;break}if(!o.data.file){s.next=16;break}return t.selectedStep.form.options.customModel=o.data.file,s.next=14,t.displayARObject(t.selectedStep.form.options.customModel,t.questId);case 14:s.next=17;break;case 16:o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error");case 17:s.next=20;break;case 19:vt(t.$t("label.ErrorStandardMessage"),"error");case 20:t.$q.loading.hide();case 21:case"end":return s.stop()}}),s)})))()},changeObjectInList:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedStep.form.options.customModel=null,t.next=3,e.displayARObject(e.selectedStep.form.options.model);case 3:case"end":return t.stop()}}),t)})))()},uploadCharacterImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadCharacterImage(t.questId,t.options.type.code,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?l["a"].set(t.selectedStep.form.options,"character",o.data.file):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadAlternativeImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return t.$q.loading.show(),n=new FormData,n.append("image",a[0]),s.next=8,As.uploadAlternativeImage(t.questId,t.options.type.code,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?l["a"].set(t.selectedStep.form.options,"altFile",o.data.file):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},loadAndPrepare3DModel:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l,c;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s.$q.loading.show(),a.next=4,s.ModelLoaderAsync(e,t);case 4:n=a.sent,s.$q.loading.hide(),a.next=13;break;case 8:return a.prev=8,a.t0=a["catch"](0),console.error("Error while loading 3D model:",a.t0),vt(s.$t("label.CouldNotDisplayObject"),"error"),a.abrupt("return");case 13:return o=n.scene,i=(new st["Box3"]).setFromObject(o),l=i.getCenter(new st["Vector3"]),l.multiplyScalar(-1),c=new st["Object3D"],o.applyMatrix((new st["Matrix4"]).makeTranslation(l.x,l.y,l.z)),c.add(o),c.up=new st["Vector3"](0,0,1),o=c,o.rotation.z=Math.PI/4,a.abrupt("return",{object:o,animations:n.animations});case 24:case"end":return a.stop()}}),a,null,[[0,8]])})))()},ModelLoaderAsync:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=console.log,a.abrupt("return",new Promise((function(a,r){var o=new Qa.a;-1!==e.indexOf("blob:")?o.load(e,a,n,r):t?o.load(s.serverUrl+"/upload/quest/"+t+"/step/3dobject/"+e+".glb",a,n,r):o.load(s.serverUrl+"/statics/3d-models/"+e+".glb",a,n,r)})));case 2:case"end":return a.stop()}}),a)})))()},displayARObject:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==s.config.locateItem.object){a.next=5;break}n=s,s.$nextTick(o()(r.a.mark((function s(){var a,o,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=document.getElementById("target-canvas"),a){s.next=3;break}throw new Error("missing 3D canvas");case 3:return n.config.locateItem.scene=new st["Scene"],o=new st["PerspectiveCamera"](70,1.333,.001,1e3),o.up=new st["Vector3"](0,0,1),o.rotation.x=Math.PI/2,o.lookAt(new st["Vector3"](0,0,0)),n.config.locateItem.camera=o,i=new st["WebGLRenderer"]({alpha:!0,antialias:!0}),a.appendChild(i.domElement),n.config.locateItem.renderer=i,n.config.locateItem.renderer.setSize(Math.round(a.clientWidth),Math.round(.8*a.clientWidth)),n.config.locateItem.renderer.gammaOutput=!0,n.config.locateItem.controls=new zr.a(o,i.domElement),l=new st["DirectionalLight"](14540253),l.position.set(0,1,1).normalize(),n.config.locateItem.scene.add(l),n.config.locateItem.scene.add(new st["AmbientLight"](11579568)),s.next=21,n.displayARObjectEnd(e,t);case 21:n.animateModelPreview();case 22:case"end":return s.stop()}}),s)})))),a.next=9;break;case 5:return i=s.config.locateItem.scene.getObjectByName(Nr),s.config.locateItem.scene.remove(i),a.next=9,s.displayARObjectEnd(e,t);case 9:case"end":return a.stop()}}),a)})))()},displayARObjectEnd:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i,l;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.loadAndPrepare3DModel(e,t);case 2:n=a.sent,o=n.object,o.up=new st["Vector3"](0,0,1),o.visible=!0,o.name=Nr,s.config.locateItem.scene.add(o),i=(new st["Box3"]).setFromObject(o),l=new st["Vector3"],i.getSize(l),s.config.locateItem.zoom=1.5*Math.max(l.x,l.y,l.z),s.config.locateItem.camera.position.set(0,-s.config.locateItem.zoom,0),s.config.locateItem.controls.update(),s.config.locateItem.object=o;case 15:case"end":return a.stop()}}),a)})))()},animateModelPreview:function(){requestAnimationFrame(this.animateModelPreview),this.config.locateItem.renderer.render(this.config.locateItem.scene,this.config.locateItem.camera),this.config.locateItem.controls.update()},change2D3DObject:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.changeObjectInList();case 2:case"end":return t.stop()}}),t)})))()},selectObject:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.options.title=t.objectsList[e].name[t.lang],t.selectedStep.form.options.picture="statics/images/object/"+t.objectsList[e].file,t.selectedStep.form.options.titles[t.lang]=t.selectedStep.form.options.title,t.selectedStep.form.options.pictures[t.lang]=t.selectedStep.form.options.picture;case 4:case"end":return s.stop()}}),s)})))()},getColorsForCodeOptions:function(){var e=this,t=[];return ba.forEach((function(s){t.push({value:s.value,label:e.$t("color."+s.label)})})),t},getImagesForCodeOptions:function(){var e=[];return e},triggerClickOnColorSelect:function(e){this.$refs["colorSelect"+e][0].$el.click()},deleteColor:function(e){this.config.colorCode.colorsForCode.splice(e,1)},addColor:function(){this.config.colorCode.colorsForCode.push({value:this.config.colorCode.newColor.value,label:this.config.colorCode.newColor.label}),this.config.colorCode.newColor={label:"",value:""}},removeHint:function(e){this.selectedStep.form.hint[this.lang].splice(e,1),this.$forceUpdate()},updateHint:function(e){var t=this;this.$q.dialog({dark:!0,message:this.$t("label.ModifyTheHint"),prompt:{model:this.selectedStep.form.hint[this.lang][e],type:"text"},cancel:!0}).onOk(function(){var s=o()(r.a.mark((function s(a){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.hint[t.lang][e]=a,t.$forceUpdate();case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).onCancel((function(){}))},addHint:function(){this.selectedStep.form.hint&&this.selectedStep.form.hint[this.lang]||(this.selectedStep.form.hint||(this.selectedStep.form.hint={}),this.selectedStep.form.hint[this.lang]=[]),this.selectedStep.form.hint[this.lang].push(this.newHint),this.newHint=""},getQuestItemsAsOptions:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,As.listWonObjects(e.questId,e.stepId,e.quest.version);case 2:s=t.sent,s&&s.data?(e.questItems=s.data,a=[],e.questItems.forEach((function(e){a.push({value:e.picture,label:e.title})})),a.sort((function(e,t){return e.label>t.label?1:-1})),e.config.useItem.questItemsAsOptions=a):vt(e.$t("label.ErrorStandardMessage"),"error");case 4:case"end":return t.stop()}}),t)})))()},getItemIcon:function(e){var t=this.questItems.find((function(t){return t.code===e}));return"undefined"!==typeof t?t.icon:"clear"},getClickCoordinates:function(e){var t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,r=this.getUseItemPictureWidth();this.selectedStep.form.answerPointerCoordinates.left=Math.round(100*s/r),this.selectedStep.form.answerPointerCoordinates.top=Math.round(75*a/r),this.positionUseItemPointer()},getClickCoordinatesFindItem:function(e){var t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,r=this.getFindItemPictureWidth();this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].left=Math.round(100*s/r),this.selectedStep.form.options.coordinates[this.config.findItem.currentArea].top=Math.round(75*a/r),this.positionFindItemPointer()},positionFindItemPointer:function(){for(var e=this.getFindItemPictureWidth()/100,t=this.config.findItem.crossSize/2,s=0;s<5;s++)document.getElementById("cross"+s)&&(s<this.selectedStep.form.options.nbAreas?(document.getElementById("cross"+s).style.display="block",document.getElementById("cross"+s).style.left=Math.round(this.selectedStep.form.options.coordinates[s].left*e-t)+"px",document.getElementById("cross"+s).style.top=Math.round(this.selectedStep.form.options.coordinates[s].top*(4*e/3)-t)+"px"):document.getElementById("cross"+s).style.display="none")},getFindItemPictureWidth:function(){var e=this.$refs["findItemPicture"];return e.clientWidth},initFindItemElements:function(){this.config.findItem.imageWidth=this.getFindItemPictureWidth(),this.config.findItem.crossSize=this.config.findItem.imageWidth/8,this.config.findItem.imageHeight=4*this.config.findItem.imageWidth/3},getUseItemPictureWidth:function(){var e=this.$refs["useItemPicture"];return e.clientWidth},initUseItemElements:function(){this.config.useItem.imageWidth=this.getUseItemPictureWidth(),this.config.useItem.crossSize=this.config.useItem.imageWidth/8,this.config.useItem.imageHeight=4*this.config.useItem.imageWidth/3},positionUseItemPointer:function(){var e=this.getUseItemPictureWidth()/100,t=this.config.useItem.crossSize/2;document.getElementById("cross").style.left=Math.round(this.selectedStep.form.answerPointerCoordinates.left*e-t)+"px",document.getElementById("cross").style.top=Math.round(this.selectedStep.form.answerPointerCoordinates.top*(4*e/3)-t)+"px"},openGeolocationPopin:function(e){this.config.geolocation.showPopin=!0,this.config.geolocation.currentIndex=e},saveMyGPSLocation:function(){var e=this.config.geolocation.currentIndex,t=this.config.geolocation.position;-1!==e&&this.selectedStep.form.options.locations&&this.selectedStep.form.options.locations.length>0?(this.$set(this.selectedStep.form.options.locations[e],"lat",t.latitude),this.$set(this.selectedStep.form.options.locations[e],"lng",t.longitude)):(this.$set(this.selectedStep.form.options,"lat",t.latitude),this.$set(this.selectedStep.form.options,"lng",t.longitude),this.$v.selectedStep.form.options.lat.$touch(),this.$v.selectedStep.form.options.lng.$touch()),vt(this.$t("label.LocationSaved"),"success"),this.config.geolocation.showPopin=!1},onNewUserPosition:function(e){this.$set(this.config.geolocation,"position",e.coords)},onUserPositionError:function(e){console.error("UserPositionError",e)},addGPSLocation:function(){this.selectedStep.form.options.locations?this.selectedStep.form.options.locations.push({lat:"",lng:"",destination:""}):this.selectedStep.form.options.locations=[{lat:"",lng:"",destination:""}]},removeGPSLocation:function(e){this.selectedStep.form.options.locations.splice(e,1)},checkMainTextLength:function(e){var t=11,s=this.mainTextMaxLength;return this.options.type.textRules&&this.options.type.textRules.maxNbCarriageReturns&&(t=this.options.type.textRules.maxNbCarriageReturns),null!==e&&"undefined"!==typeof e||(e=""),e.length<=s&&(e.match(/\n/g)||[]).length<=t},addWriteTextAnswer:function(){this.selectedStep.form.answers.push("")},openChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!0},closeChooseMarkerModal:function(){this.config.locateMarker.markerModalOpened=!1},selectMarker:function(e){this.selectedStep.form.answers=e,this.closeChooseMarkerModal()},close:function(){$r()(this.originalStepData)!==$r()(this.selectedStep.form)?this.saveChangesModalOpened=!0:this.$emit("close")},getStepType:function(e){var t=!0,s=!1,a=void 0;try{for(var r,n=qa[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;if(o.code===e)return o}}catch(i){s=!0,a=i}finally{try{t||null==n.return||n.return()}finally{if(s)throw a}}return console.warn("Could not retrieve step type from code '"+e+"'"),null},showMedia:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia("background");case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},selectMedia:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.selectedStep.form.backgroundImage=t.media.items[e].file,t.hideMedia();case 2:case"end":return s.stop()}}),s)})))()},loadMedia:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.listMedia(t.quest.questId,t.quest.version,e);case 2:a=s.sent,a&&a.data&&(t.media.items=a.data);case 4:case"end":return s.stop()}}),s)})))()},hideMedia:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.media.isOpened=!1,e.media.isSimulated=!1,"use-item"===e.options.type.code&&nt.setTimeout(e.initUseItemElements,2e3),"find-item"===e.options.type.code&&nt.setTimeout(e.initFindItemElements,2e3);case 4:case"end":return t.stop()}}),t)})))()},getIotObjectsAsOptions:function(e){var t=this;if(!["wait-for-event","trigger-event"].includes(e))throw new Error("Unsupported step type: "+e);var s=[];return wa.forEach((function(a){a.step===e&&s.push({value:a.code,label:t.$t("iotObjects."+a.code)})})),s.sort((function(e,t){return e.label>t.label?1:-1})),s},updateIotStepOptions:function(){for(var e=["range","rangeX","rangeY","message","answer"],t=1;t<=3;t++)e.push("range"+t);for(var s=0,a=e;s<a.length;s++){var r=a[s];delete this.selectedStep.form.options[r]}switch(this.selectedStep.form.options.object){case"keypad":this.$set(this.selectedStep.form.options,"answer","");break;case"joystick":this.$set(this.selectedStep.form.options,"rangeX",{min:100,max:200}),this.$set(this.selectedStep.form.options,"rangeY",{min:100,max:200});break;case"distance":this.$set(this.selectedStep.form.options,"range",{min:50,max:150});break;case"pot":for(var n=1;n<=3;n++)this.$set(this.selectedStep.form.options,"range"+n,{min:100,max:200});break;case"escapebox":break;case"lcd":this.$set(this.selectedStep.form.options,"message","");break;case"buzzer":this.$set(this.selectedStep.form.options,"duration",1e3),this.$set(this.selectedStep.form.options,"frequency",440);break;case"chest":break;case"relay":break;default:throw new Error("unknown IoT object code '"+this.selectedStep.form.options.object+"'")}},activateCountDown:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,!0===e&&t.$q.dialog({dark:!0,message:t.$t("label.CountDownWarning"),ok:!0,cancel:!0}).onCancel(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.selectedStep.form.countDownTime.enabled=!1;case 1:case"end":return e.stop()}}),e)}))));case 2:case"end":return s.stop()}}),s)})))()},selectFindItemArea:function(e){for(var t=0;t<this.selectedStep.form.options.nbAreas;t++)document.getElementById("cross"+t)&&(document.getElementById("cross"+t).style.opacity=.5);document.getElementById("cross"+e)&&(document.getElementById("cross"+e).style.opacity=1),this.config.findItem.currentArea=e},changeNbAreas:function(){if(this.selectedStep.form.options&&this.selectedStep.form.options.coordinates)if(this.selectedStep.form.options.coordinates.length<this.selectedStep.form.options.nbAreas){for(var e=this.selectedStep.form.options.coordinates.length;e<this.selectedStep.form.options.nbAreas;e++)this.selectedStep.form.options.coordinates.push({top:50,left:50});this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1,this.selectFindItemArea(this.config.findItem.currentArea-1)}else this.selectedStep.form.options.coordinates.length=this.selectedStep.form.options.nbAreas,this.config.findItem.currentArea=this.selectedStep.form.options.coordinates.length-1;return this.positionFindItemPointer(),!0},showGeolocationModeHelp:function(e){this.$q.dialog({title:this.$t("label."+e),message:this.$t("label."+e+"Help")})},uploadAudio:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("audio",a[0]),s.next=8,As.uploadAudio(t.quest.questId,n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.selectedStep.form.audioStream=o.data.file,t.$forceUpdate()):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeAudio:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedStep.form.audioStream="";case 1:case"end":return t.stop()}}),t)})))()}},validations:function(){var e={title:{},text:{}};switch(e.title[this.lang]={required:Kt["required"]},e.text[this.lang]={function:function(e){return this.checkMainTextLength(e)}},this.options.type.code){case"choose":e.options={items:{$each:"text"===this.config.choose.answerType?{text:{required:Kt["required"]},imagePath:{}}:{text:{},imagePath:{required:Kt["required"]}}}};break;case"code-keypad":e.answers={required:Kt["required"],function:function(e){var t=new RegExp("^([0-9*#]{2,6})$","g");return t.test(e)}};break;case"find-item":e.backgroundImage={required:Kt["required"]};break;case"geolocation":break;case"info-video":e.videoStream={required:Kt["required"]};break;case"jigsaw-puzzle":e.options={picture:{required:Kt["required"]}};break;case"new-item":e.options={picture:{required:Kt["required"]},title:{required:Kt["required"]}};break;case"character":e.options={character:{required:Kt["required"]}};break;case"use-item":e.backgroundImage={required:Kt["required"]},e.answerItem={required:Kt["required"]};break;case"write-text":e.answers={required:Kt["required"]};break;case"locate-item-ar":e.options={lat:{required:Kt["required"]},lng:{required:Kt["required"]}},this.selectedStep.form.options.is3D?e.options.model={required:Kt["required"]}:e.options.picture={required:Kt["required"]};break;case"touch-object-on-marker":e.options={model:{required:Kt["required"]}};break;case"wait-for-event":e.options={protocol:{required:Kt["required"]},object:{required:Kt["required"]}};break}return{selectedStep:{form:e}}}},Dr=Fr,Rr=(s("0a65"),s("b650"),Object(_e["a"])(Dr,Tr,Pr,!1,null,"da601fee",null)),Lr=Rr.exports,jr=s("fb4c"),Er=s("534a"),Qr=s("e18e");l["a"].directive("sortable",{inserted:function(e,t){return new Va.a(e,t.value||{})}});var Br={components:{stepSettings:Lr,stepPlay:Ga,story:Ma},data:function(){return{questId:null,stepId:-1,readOnly:!1,tabs:{selected:"settings",progress:0,list:["settings","steps","publish"],icons:["looks_one","looks_two","looks_3","looks_4"]},overview:{tabSelected:"none"},languages:{current:"fr",available:[]},form:{fields:{title:{},category:"",priceForPlayer:"",tierPriceForPlayer:"",premiumPrice:{},playersNumber:1,description:{},location:{lat:"",lng:""},startingPlace:"",languages:[],mainLanguage:"fr",level:2,duration:30,picture:null,thumb:null,town:"",country:"",zipcode:"",editorMode:"simple",customization:{audio:"",color:"",logo:"",character:"",removeScoring:!1,endMessage:"",font:"standard",fontColor:"#000000",qrCodeMessage:{fr:"",en:""},geolocationMessage:{fr:"",en:""},hideInventory:!1,hideFullScreen:!1},rewardPicture:"",readMoreLink:"",limitNumberOfPlayer:0,scheduling:[],forcePlayerToHaveAccount:!1,shareUserDataWithCreator:!1,countDownTime:{enabled:!1,stopGame:!1}},categories:nt.buildOptionsForSelect(jr,{valueField:"id",labelField:"name"},this.$t),languages:nt.buildOptionsForSelect(Qr,{valueField:"code",labelField:"name"},this.$t),levels:nt.buildOptionsForSelect(Er,{valueField:"id",labelField:"name"},this.$t),prices:[{label:"0,99 €",value:"premiumprice1"},{label:"1,99 €",value:"premiumprice2"},{label:"2,99 €",value:"premiumprice3"},{label:"4,99 €",value:"premiumprice5"},{label:"7,99 €",value:"premiumprice8"},{label:"9,99 €",value:"premiumprice10"},{label:"14,99 €",value:"premiumprice15"},{label:"19,99 €",value:"premiumprice20"}],fonts:[{label:"Standard",value:"standard",class:"font-standard"},{label:"Arial",value:"arial",class:"font-arial"},{label:"Garamond",value:"garamond",class:"font-garamond"},{label:"Courrier New",value:"courrier",class:"font-courrier"},{label:"Brush script",value:"brush",class:"font-brush"}],players:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"}],times:[{label:"00h",value:0},{label:"01h",value:1},{label:"02h",value:2},{label:"03h",value:3},{label:"04h",value:4},{label:"05h",value:5},{label:"06h",value:6},{label:"07h",value:7},{label:"08h",value:8},{label:"09h",value:9},{label:"10h",value:10},{label:"11h",value:11},{label:"12h",value:12},{label:"13h",value:13},{label:"14h",value:14},{label:"15h",value:15},{label:"16h",value:16},{label:"17h",value:17},{label:"18h",value:18},{label:"19h",value:19},{label:"20h",value:20},{label:"21h",value:21},{label:"22h",value:22},{label:"23h",value:23},{label:"24h",value:24}],durations:[{label:"15 "+this.$t("label.minutes"),value:15},{label:"30 "+this.$t("label.minutes"),value:30},{label:"45 "+this.$t("label.minutes"),value:45},{label:"60 "+this.$t("label.minutes"),value:60},{label:"90 "+this.$t("label.minutes"),value:90},{label:"120 "+this.$t("label.minutes"),value:120},{label:"240 "+this.$t("label.minutes"),value:240},{label:this.$t("label.DoNotDisplay"),value:999}]},quest:{languages:[],hasLocateMarkerSteps:!1},chapters:{items:[],showNewStepPage:!1,showNewStepPageSettings:!1,showNewStepOverview:!1,reloadStepPlay:!1,newStep:{title:"ImageAndText",type:{},chapterId:0,previousStepId:0,overviewData:{}}},ranking:[],inventory:{isOpened:!1,suggest:!1,items:[]},selectedItem:null,hint:{isOpened:!1,label:"",suggest:!1,number:0},media:{isOpened:!1,items:[],detail:{isOpened:!1,index:0}},editor:{items:[],new:{email:"",isExisting:!0},initMode:"simple"},invitee:{items:[],new:{email:"",isExisting:!0}},story:{step:null,data:null,active:!1},premium:{isOpened:!1,canMovePremium:!1},reviews:[],payments:[],statistics:[],canMoveNextStep:!1,canPass:!1,showPaymentBox:!1,showTierPaymentBox:!1,storage:"",itemUsed:null,isIOs:nt.isIOS(),serverUrl:"https://api.graaly.com",pictureUploadURL:this.serverUrl+"/quest/picture/upload",titleMaxLength:50,isHybrid:!1,warnings:{stepsMissing:!1,editorsMissing:!1,inviteeMissing:!1,inventoryMissing:!1}}},computed:{currentLanguageForLabels:function(){return this.quest.languages.length>1?"["+this.languages.current.toUpperCase()+"]":""},isCreation:function(){return this.tabs.progress<3},isEdition:function(){return!this.isCreation}},created:function(){document.addEventListener("backbutton",this.trackCallBackFunction,!1)},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:nt.clearAllRunningProcesses(),e.$route.params.questId&&""!==e.$route.params.questId?("undefined"!==typeof window.cordova&&(e.isHybrid=!0),e.loadQuestData()):e.$router.push("/quest/create/welcome");case 2:case"end":return t.stop()}}),t)})))()},methods:{loadQuestData:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.questId=e.$route.params.questId,t.next=3,ot.getLastById(e.questId,"all");case 3:if(s=t.sent,!s||!s.data){t.next=53;break}if(e.quest=s.data,"draft"!==e.quest.status&&(e.readOnly=!0),e.editor.initMode=e.quest.editorMode,e.quest.languages&&e.quest.languages.length>0&&"fr"===e.languages.current)for(e.languages.current=e.quest.languages[0].lang,a=0;a<e.quest.languages.length;a++)e.languages.available.push({label:e.$t("language."+e.quest.languages[a].lang),value:e.quest.languages[a].lang});return e.quest.description[e.languages.current]&&""!==e.quest.description[e.languages.current]||(e.quest.description[e.languages.current]=e.quest.description[e.quest.mainLanguage]),e.form.fields.questId=e.quest.questId,e.quest.title&&Object.keys(e.quest.title).length>0?e.form.fields.title=e.quest.title:(e.form.fields.title={},e.form.fields.title[e.languages.current]="-"),e.form.fields.description=e.quest.description,e.form.fields.category=e.quest.category,e.form.fields.location=e.quest.location,e.form.fields.languages=e.quest.languages,e.form.fields.mainLanguage=e.quest.mainLanguage,e.form.fields.level=e.quest.level,e.form.fields.duration=e.quest.duration,e.form.fields.picture=e.quest.picture,e.form.fields.thumb=e.quest.thumb,e.form.fields.editorMode=e.quest.editorMode,e.form.fields.customization=e.quest.customization,e.form.fields.rewardPicture=e.quest.rewardPicture,e.form.fields.readMoreLink=e.quest.readMoreLink,e.form.fields.limitNumberOfPlayer=e.quest.limitNumberOfPlayer,e.form.fields.scheduling=e.quest.scheduling,e.form.fields.forcePlayerToHaveAccount=e.quest.forcePlayerToHaveAccount,e.form.fields.shareUserDataWithCreator=e.quest.shareUserDataWithCreator,e.form.fields.playersNumber=e.quest.playersNumber,e.form.fields.startingPlace=e.form.fields.location.address||"",e.form.fields.zipcode=e.form.fields.location&&e.form.fields.location.zipcode?e.form.fields.location.zipcode:"",e.form.fields.town=e.form.fields.location&&e.form.fields.location.town?e.form.fields.location.town:"",e.form.fields.country=e.form.fields.location&&e.form.fields.location.country?e.form.fields.location.country:"",e.quest.countDownTime&&(e.form.fields.countDownTime=e.quest.countDownTime),"room"===e.quest.type?e.form.fields.priceForPlayer=e.quest.premiumPrice.manual:"quest"===e.quest.type&&(e.quest.premiumPrice||(e.form.fields.premiumPrice={}),e.quest.premiumPrice.androidId&&(e.form.fields.priceForPlayer=e.quest.premiumPrice.androidId),e.quest.premiumPrice.active?e.showPaymentBox=!0:e.showPaymentBox=!1,e.quest.premiumPrice.tier?(e.form.fields.tierPriceForPlayer=e.quest.premiumPrice.manual,e.showTierPaymentBox=!0):e.showTierPaymentBox=!1),e.form.fields.location.hasOwnProperty("coordinates")&&2===e.form.fields.location.coordinates.length&&(n=e.form.fields.location.coordinates,e.form.fields.location={lng:n[0],lat:n[1]}),e.tabs.progress=e.quest.creationStep,e.tabs.progress<=3&&(e.tabs.selected=e.tabs.list[Math.min(e.tabs.progress,2)]),t.next=41,e.refreshStepsList();case 41:return t.next=43,e.listEditors();case 43:return t.next=45,e.listInvitees();case 45:return t.next=47,e.listReviews();case 47:return t.next=49,e.getStatistics();case 49:e.quest.access&&"private"===e.quest.access&&e.getPrivateRanking(),e.getReadableStorageUsage(),t.next=54;break;case 53:vt(e.$t("label.ErrorStandardMessage"),"error");case 54:case"end":return t.stop()}}),t)})))()},movePremium:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=11;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=11;break}return t.next=4,ot.CheckIfCanBeMovedPremium(e.questId);case 4:if(s=t.sent,!(s&&s.data&&s.data.canBePremium)){t.next=10;break}return t.next=8,ot.MoveToPremium(e.questId);case 8:a=t.sent,a&&a.data&&a.data.status&&"ok"===a.data.status?(e.quest.isPremium=!0,e.quest.size.limit=6e8):vt(e.$t("label.ErrorStandardMessage"),"error");case 10:e.premium.isOpened=!1;case 11:case"end":return t.stop()}}),t)})))()},openPremiumBox:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.quest.isPremium){t.next=7;break}if(!e.$store.state.user||!e.$store.state.user.organizationId){t.next=6;break}return t.next=4,ot.CheckIfCanBeMovedPremium(e.questId);case 4:s=t.sent,s&&s.data&&s.data.canBePremium&&(e.premium.canMovePremium=!0);case 6:e.premium.isOpened=!0;case 7:case"end":return t.stop()}}),t)})))()},uploadReward:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("image",a[0]),s.next=8,ot.uploadReward(n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.form.fields.rewardPicture=o.data.file,t.$forceUpdate()):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeReward:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.rewardPicture=null;case 1:case"end":return t.stop()}}),t)})))()},changeEditorMode:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("advanced"!==e.form.fields.editorMode){t.next=4;break}e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToMoveToAdvancedMode"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:case"end":return t.stop()}}),t)})))).onCancel(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.editorMode="simple";case 1:case"end":return t.stop()}}),t)})))),t.next=6;break;case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})))()},refreshStepsList:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o,i,l,c,u,d,p,m,h,f,g,b,v,w,y,q,k,x;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.stepsMissing=!1,e.$q.loading.show(),t.next=4,As.listForAQuest(e.questId,e.quest.version,"all");case 4:if(s=t.sent,!s||!s.data){t.next=80;break}if(e.chapters.items=s.data.chapters,a=s.data.steps,"simple"!==e.form.fields.editorMode){t.next=12;break}e.chapters.items&&e.chapters.items.length>0&&(e.chapters.items[0].steps=a),t.next=66;break;case 12:n=0;case 13:if(!(n<e.chapters.items.length)){t.next=66;break}for(o=!1,i=[],l=[],c=[],u=[],d=0;d<a.length;d++)a[d].chapterId.toString()===e.chapters.items[n].chapterId.toString()&&(e.chapters.items[n].steps||(e.chapters.items[n].steps=[]),"end-chapter"===a[d].type&&(o=!0),c.push(a[d]));for(p=[],d=0;d<c.length;d++)p.push(c[d].stepId.toString());m=[],h=0;case 24:if(!(p.length>0&&h<1e3)){t.next=55;break}h++,d=0;case 27:if(!(d<c.length)){t.next=53;break}if(f=c[d].stepId.toString(),-1!==m.indexOf(f)){t.next=50;break}if(c[d].conditions&&0===c[d].conditions.length&&(m.unshift(f),p.splice(p.indexOf(f),1),i.push(c[d].title[e.languages.current])),!(c[d].conditions&&c[d].conditions.length>0)){t.next=50;break}g=0,b=0;case 34:if(!(b<c[d].conditions.length)){t.next=48;break}if(v=c[d].conditions[b].replace("stepDone_",""),v=v.replace("stepSuccess_",""),v=v.replace("stepFail_",""),-1!==m.indexOf(v)){t.next=43;break}return-1===p.indexOf(v)&&(l.push(f),p.splice(p.indexOf(f),1),m.push(f)),t.abrupt("continue",50);case 43:w=m.indexOf(v),w>g&&(g=w);case 45:b++,t.next=34;break;case 48:m.length>=g?m.splice(g+1,0,f):m.push(f),p.splice(p.indexOf(f),1);case 50:d++,t.next=27;break;case 53:t.next=24;break;case 55:for(d=0;d<m.length;d++)for(b=0;b<c.length;b++)m[d]===c[b].stepId.toString()&&(-1!==l.indexOf(c[b].stepId.toString())&&(c[b].error="FollowingStepsHaveInvalidCondition"),0===d||0===c[b].conditions.length||c[b].conditions.length>1||"locate-marker"===c[b].type||"geolocation"===c[b].type?c[b].level=1:c[b].level=2,e.chapters.items[n].steps.push(c[b]));for(y=!1,b=0;b<c.length;b++){for(y=!1,d=0;d<m.length;d++)m[d]===c[b].stepId.toString()&&(y=!0);y||(c[b].error="FollowingStepsHaveInvalidCondition",c[b].level=1,e.chapters.items[n].steps.push(c[b]))}e.chapters.items[n].warnings=[],o||e.chapters.items[n].warnings.push({noEndOfChapter:!0}),i.length>1&&e.chapters.items[n].warnings.push({moreThan1StepWithNoCondition:i}),u.length>0&&e.chapters.items[n].warnings.push({stepsWithMissingParent:u}),l.length>0&&e.chapters.items[n].warnings.push({stepWithNoParent:l});case 63:n++,t.next=13;break;case 66:a&&a.length>0&&e.tabs.progress<2&&(e.tabs.progress=2),q=!1,k=0;case 69:if(!(k<a.length)){t.next=77;break}if(x=a[k],"locate-marker"!==x.type){t.next=74;break}return q=!0,t.abrupt("break",77);case 74:k++,t.next=69;break;case 77:e.quest.hasLocateMarkerSteps=q,t.next=81;break;case 80:e.warnings.stepsMissing=!0;case 81:e.$q.loading.hide();case 82:case"end":return t.stop()}}),t)})))()},showHelpPopup:function(e){this.$q.dialog({message:this.$t("label."+e)})},showChapterWarnings:function(e){for(var t="",s=0;s<e.length;s++)if(e[s].hasOwnProperty("noEndOfChapter")&&(t+=this.$t("label.YourChapterMustHaveAEndOfChapterStep")+". "),e[s].hasOwnProperty("moreThan1StepWithNoCondition")&&(t+=this.$t("label.FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis")+": "+e[s].moreThan1StepWithNoCondition.join(", ")+". "),e[s].hasOwnProperty("stepWithNoParent")&&(t+=this.$t("label.FollowingStepsHaveInvalidCondition")+"."),e[s].hasOwnProperty("stepsWithMissingParent")){for(var a in t+=this.$t("label.FollowingStepsHaveNoValidParent")+": ",e[s].stepsWithMissingParent)for(var r=0;r<this.chapters.items.length;r++)for(var n=0;n<this.chapters.items[r].steps.length;n++)this.chapters.items[r].steps[n].stepId.toString()===a&&(t+=this.chapters.items[r].steps[n].title[this.languages.current]);t+=". "}this.$q.dialog({title:this.$t("label.IssuesInYouQuest"),message:t})},showStepWarnings:function(e){this.$q.dialog({title:this.$t("label.IssuesInYourStep"),message:this.$t("label."+e)})},submitSettings:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("public"!==e.quest.access||0!==e.form.fields.location.lat&&0!==e.form.fields.location.lng){t.next=3;break}return vt(e.$t("label.YouMustDefineStartLocation"),"warning"),t.abrupt("return");case 3:if(e.$v.form.fields.$touch(),e.$v.form.fields.$error){t.next=17;break}return s={languages:[e.form.fields.mainLanguage],version:e.quest.version,type:e.quest.type,location:{type:"Point",coordinates:[e.form.fields.location.lng,e.form.fields.location.lat],town:e.form.fields.town,country:e.form.fields.country,zipcode:e.form.fields.zipcode,address:e.form.fields.startingPlace}},e.form.fields.premiumPrice||(e.form.fields.premiumPrice={}),e.showPaymentBox&&(e.form.fields.premiumPrice.active=!0),e.showTierPaymentBox&&(e.form.fields.premiumPrice.tier=!0),a=Object.assign({},e.form.fields,s),a.questId||(a.questId=e.questId),e.$q.loading.show(),t.next=14,ot.save(a);case 14:n=t.sent,e.$q.loading.hide(),n&&n.data?(e.quest.playersNumber=e.form.fields.playersNumber,e.tabs.progress<1&&("quest"===e.quest.type?(e.tabs.progress=1,e.tabs.selected="steps"):(e.tabs.progress=2,e.tabs.selected="publish")),vt(e.$t("label.QuestSaved"),"info")):vt(e.$t("label.ErrorStandardMessage"),"error");case 17:case"end":return t.stop()}}),t)})))()},uploadImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("image",a[0]),s.next=8,ot.uploadPicture(n);case 8:return o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?t.form.fields.picture=o.data.file:o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),s.next=12,ot.uploadThumb(n);case 12:i=s.sent,i&&i.hasOwnProperty("data")?i.data.file?t.form.fields.thumb=i.data.file:i.data.message&&"Error: File too large"===i.data.message&&vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 15:case"end":return s.stop()}}),s)})))()},uploadThumb:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("image",a[0]),s.next=8,ot.uploadThumb(n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?t.form.fields.thumb=o.data.file:o.data.message&&"Error: File too large"===o.data.message&&vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},uploadLogo:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("image",a[0]),s.next=8,ot.uploadLogo(n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.form.fields.customization.logo=o.data.file,t.$forceUpdate()):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeLogo:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.logo=null;case 1:case"end":return t.stop()}}),t)})))()},uploadAudio:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("audio",a[0]),s.next=8,ot.uploadAudio(n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.form.fields.customization.audio=o.data.file,t.$forceUpdate()):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeAudio:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.audio=null;case 1:case"end":return t.stop()}}),t)})))()},uploadCharacter:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),a=e.target.files,a[0]){s.next=4;break}return s.abrupt("return");case 4:return n=new FormData,n.append("image",a[0]),s.next=8,ot.uploadCharacter(n);case 8:o=s.sent,o&&o.hasOwnProperty("data")?o.data.file?(t.form.fields.customization.character=o.data.file,t.$forceUpdate()):o.data.message&&"Error: File too large"===o.data.message?vt(t.$t("label.FileTooLarge"),"error"):vt(t.$t("label.UnknowUploadError"),"error"):vt(t.$t("label.ErrorStandardMessage"),"error"),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},removeCharacter:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.fields.customization.character=null;case 1:case"end":return t.stop()}}),t)})))()},startStory:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.countForUser(e.$store.state.user._id);case 2:s=t.sent,s.data&&s.data<2&&(e.story.active=!0,null===e.story.step&&"settings"===e.tabs.selected&&(e.story.step=17));case 4:case"end":return t.stop()}}),t)})))()},getCurrentLocation:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),navigator.geolocation.getCurrentPosition(e.fillLocation,e.getLocationError,{timeout:5e3,maximumAge:0});case 2:case"end":return t.stop()}}),t)})))()},getLocationError:function(e){console.log(e),this.$q.dialog({title:this.$t("label.GeolocationFailed"),message:this.$t("label.GeolocationFailedDesc")}),this.$q.loading.hide()},fillLocation:function(e){var t=this;this.form.fields.location={lat:e.coords.latitude,lng:e.coords.longitude};var s=new google.maps.Geocoder;s.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}},(function(e,s){t.$q.loading.hide(),"OK"===s&&e[0].formatted_address?(t.form.fields.town=t.getCity(e[0]),t.form.fields.country=t.getCountry(e[0]),t.form.fields.zipcode=t.getZipcode(e[0]),t.form.fields.startingPlace=e[0].formatted_address,document.getElementById("startingplace").value=t.form.fields.startingPlace):(t.$q.loading.hide(),vt(t.$t("label.ErrorStandardMessage"),"error"))}))},setLocation:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.form.fields.location={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},t.form.fields.town=t.getCity(e),t.form.fields.country=t.getCountry(e),t.form.fields.zipcode=t.getZipcode(e),t.form.fields.startingPlace=e.formatted_address||"";case 5:case"end":return s.stop()}}),s)})))()},getZipcode:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("postal_code"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCity:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("locality"===e.address_components[t].types[s])return e.address_components[t].long_name;return""},getCountry:function(e){if(e&&e.address_components&&e.address_components.length>0)for(var t=0;t<e.address_components.length;t++)if(e.address_components[t].types)for(var s=0;s<e.address_components[t].types.length;s++)if("country"===e.address_components[t].types[s])return e.address_components[t].short_name;return""},onChapterListUpdate:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,As.moveChapter(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=s.sent,a&&t.chapters.items.splice(e.newIndex,0,t.chapters.items.splice(e.oldIndex,1)[0]);case 4:case"end":return s.stop()}}),s)})))()},onStepListUpdate:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,As.move(t.questId,t.quest.version,e.oldIndex+1,e.newIndex+1);case 2:a=s.sent,a&&t.chapters.items[0].steps.splice(e.newIndex,0,t.chapters.items[0].steps.splice(e.oldIndex,1)[0]);case 4:case"end":return s.stop()}}),s)})))()},publish:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,i,l;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.checkIfTestable();case 2:if(a=s.sent,!a){s.next=36;break}for(n="unpublish",i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].lang&&t.form.fields.languages[i].lang===e&&t.form.fields.languages[i].published&&(n="publish");if("publish"!==n){s.next=28;break}if("unpublished"!==t.quest.status&&"draft"!==t.quest.status){s.next=21;break}if("private"!==t.quest.access||t.quest.isPremium){s.next=16;break}return t.$q.loading.show(),s.next=12,ot.publish(t.questId,e);case 12:t.$q.loading.hide(),t.quest.status="published",s.next=18;break;case 16:l=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToPublishThisQuest"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l.$q.loading.show(),t.next=3,ot.publish(l.questId,e);case 3:l.$q.loading.hide(),l.quest.status="tovalidate";case 5:case"end":return t.stop()}}),t)})))).onCancel(o()(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=0;t<l.form.fields.languages.length;t++)l.form.fields.languages[t].published=!1;case 1:case"end":return e.stop()}}),e)}))));case 18:t.readOnly=!0,s.next=25;break;case 21:return t.$q.loading.show(),s.next=24,ot.publish(t.questId,e);case 24:t.$q.loading.hide();case 25:t.tabs.progress=3,s.next=34;break;case 28:return t.$q.loading.show(),s.next=31,ot.unpublish(t.questId,e);case 31:t.$q.loading.hide(),t.quest.status="unpublished",t.tabs.progress=2;case 34:s.next=38;break;case 36:for(vt(t.$t("label.YourQuestContainsErrorsInSteps"),"error"),i=0;i<t.form.fields.languages.length;i++)t.form.fields.languages[i].published=!1;case 38:case"end":return s.stop()}}),s)})))()},isReadOnly:function(){return"disabled"===this.quest.status||"tovalidate"===this.quest.status},unpublish:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="unpublished",e.$q.loading.show(),t.next=4,ot.unpublish(e.questId);case 4:e.$q.loading.hide(),vt(e.$t("label.YourQuestIsUnpublished"),"positive");case 6:case"end":return t.stop()}}),t)})))()},testQuest:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfTestable();case 2:s=t.sent,s&&(e.isHybrid?e.$router.push("/quest/play/"+e.questId):e.$q.dialog({dark:!0,message:e.$t("label.TestWithSimulatorWarning"),ok:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/quest/play/"+e.questId);case 1:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t)})))()},checkIfTestable:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<e.chapters.items.length)){t.next=8;break}if(!(e.chapters.items[s].warnings&&e.chapters.items[s].warnings.length>0)){t.next=5;break}return vt(e.$t("label.YourQuestContainsErrorsInSteps"),"error"),t.abrupt("return",!1);case 5:s++,t.next=1;break;case 8:if(!(e.editor.items&&e.quest.playersNumber&&e.editor.items.length>=e.quest.playersNumber)){t.next=18;break}return t.next=11,Ps.closeInProgressRuns(e.questId);case 11:if(!(e.quest.playersNumber>1)){t.next=16;break}return t.next=14,Ps.createMultiplayerRunForTesters(e.questId);case 14:if(a=t.sent,a){for(n=[],s=0;s<e.editor.items.length;s++)n.push(e.editor.items[s].name);vt(e.$t("label.HereAreTheTesters",{nameList:n.join(", ")}),"info")}case 16:t.next=20;break;case 18:return vt(e.$t("label.YouNeedAtLeastXEditorsToTest",{nb:e.quest.playersNumber}),"error"),t.abrupt("return",!1);case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})))()},removeQuest:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisQuest"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.remove(s.questId,s.quest.version);case 2:e.$router.push("/home");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},duplicateQuest:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.clone(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&s.data.newId&&(a=s.data.newId,n=e,e.$q.dialog({dark:!0,message:e.$t("label.DoYouWantToOpenClonedQuest"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$router.push("/quest/settings/"+a);case 1:case"end":return e.stop()}}),e)})))));case 4:case"end":return t.stop()}}),t)})))()},removeStep:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisStep"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,As.remove(a.questId,e,a.quest.version);case 2:return t.next=4,a.refreshStepsList();case 4:case"end":return t.stop()}}),t)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return s.stop()}}),s)})))()},createNewVersion:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.CreateNewVersionDescription"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.quest.status="draft",t.next=3,ot.createNewVersion(s.questId);case 3:e.$router.push("/quest/builder/"+s.questId);case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},removeChapter:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t,n=0;case 2:if(!(n<t.chapters.items.length)){s.next=10;break}if(t.chapters.items[n].chapterId.toString()!==e){s.next=7;break}if(!(t.chapters.items[n].steps&&t.chapters.items[n].steps.length>0)){s.next=7;break}return vt(t.$t("label.YouCanNotRemoveAChapterWithSteps"),"warning"),s.abrupt("return",!1);case 7:n++,s.next=2;break;case 10:t.$q.dialog({dark:!0,message:t.$t("label.DoYouWantToRemoveThisChapter"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function s(){var n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,As.removeChapter(a.questId,e,a.quest.version);case 2:return n=a.chapters.items.map((function(e){return e.chapterId})).indexOf(e),a.chapters.items.splice(n,1),s.next=6,t.refreshStepsList();case 6:case"end":return s.stop()}}),s)})))).onCancel((function(e){console.log(e)}));case 11:case"end":return s.stop()}}),s)})))()},modifyChapter:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(a=t,n={name:"",position:0},i=0;i<t.chapters.items.length;i++)t.chapters.items[i].chapterId.toString()===e&&(n.name=t.chapters.items[i].title[t.languages.current]?t.chapters.items[i].title[t.languages.current]:"",n.position=i);t.$q.dialog({dark:!0,message:t.$t("label.ModifyTheChapter"),prompt:{model:n.name,type:"text"},cancel:!0}).onOk(function(){var t=o()(r.a.mark((function t(s){var o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={},o[a.languages.current]=s,t.next=4,As.modifyChapter({questId:a.questId,version:a.quest.version,chapterId:e,title:o});case 4:a.chapters.items[n.position].title[a.languages.current]=s;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 4:case"end":return s.stop()}}),s)})))()},addChapter:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.NewChapter"),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var t=o()(r.a.mark((function t(a){var n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n[s.languages.current]=a,t.next=4,As.modifyChapter({questId:s.questId,version:s.quest.version,chapterId:"0",title:n});case 4:return t.next=6,e.refreshStepsList();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).onCancel((function(){}));case 2:case"end":return t.stop()}}),t)})))()},modifyStep:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.chapters.showNewStepPageSettings=!0,e&&e.stepId&&(a=t,setTimeout((function(){a.stepId=e.stepId,a.chapters.newStep.type=a.getStepTypeInformations(e.type),a.chapters.newStep.chapterId=e.chapterId,a.chapters.newStep.scrollPosition=document.documentElement.scrollTop}),500)),t.closeAllPanels(),t.closeStepTypePage(),t.chapters.showNewStepOverview=!1,t.chapters.showNewStep=!1,t.chapters.reloadStepPlay=!1,t.moveToTop();case 8:case"end":return s.stop()}}),s)})))()},playStep:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.chapters.reloadStepPlay=!1,e&&e.stepId&&(t.stepId=e.stepId,e.id=e.stepId,t.chapters.newStep.type=t.getStepTypeInformations(e.type),t.chapters.newStep.chapterId=e.chapterId,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop),t.closeAllPanels(),s.next=5,As.getById(t.stepId,t.quest.version,t.languages.current);case 5:a=s.sent,a&&a.data?(t.chapters.newStep.overviewData=a.data,t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!0,t.hint.number=0,t.moveToTop(),n=t,setTimeout((function(){n.chapters.reloadStepPlay=!0}),300)):vt(t.$t("label.ErrorStandardMessage"),"error");case 7:case"end":return s.stop()}}),s)})))()},moveToPosition:function(e){return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.scrollTo(0,e);case 1:case"end":return t.stop()}}),t)})))()},closeOverview:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.resetStepData(),e.closeAllPanels(),e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.showNewStepOverview=!1,e.tabs.selected="steps",nt.clearAllNotifications(),e.story.active&&7===e.countSteps()&&(e.story.step=22);case 7:case"end":return t.stop()}}),t)})))()},resetStepData:function(){this.stepId=-1,this.chapters.newStep.chaptedId=0,this.chapters.newStep.previousStepId=0,this.chapters.newStep.overviewData={},this.chapters.reloadStepPlay=!1,this.selectedItem=null,this.canMoveNextStep=!1,this.canPass=!1,this.hint.number=0},closeStepSettingsPage:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshStepsList();case 2:return e.moveToPosition(e.chapters.newStep.scrollPosition),e.chapters.newStep.type={},e.stepId=-1,e.chapters.showNewStepPageSettings=!1,e.tabs.selected="steps",t.next=9,e.refreshMediaSize();case 9:case"end":return t.stop()}}),t)})))()},addStep:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e||(e=t.chapters.items[0].chapterId),t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepOverview=!1,t.chapters.showNewStepPage=!0,t.chapters.newStep.chapterId=e,t.chapters.newStep.scrollPosition=document.documentElement.scrollTop,a=0,n=0;case 8:if(!(n<t.chapters.items.length)){s.next=16;break}if(t.chapters.items[n].chapterId.toString()!==e||!t.chapters.items[n].steps){s.next=13;break}return o=t.chapters.items[n].steps.length,o>0&&(a=t.chapters.items[n].steps[o-1].stepId),s.abrupt("break",16);case 13:n++,s.next=8;break;case 16:t.chapters.newStep.previousStepId=a;case 17:case"end":return s.stop()}}),s)})))()},insertStep:function(e,t){var s=this;return o()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e||(e=s.chapters.items[0].chapterId),s.chapters.showNewStepPage=!0,s.chapters.showNewStepPageSettings=!1,s.chapters.showNewStepOverview=!1,s.chapters.newStep.chapterId=e,s.chapters.newStep.previousStepId=t;case 6:case"end":return a.stop()}}),a)})))()},selectLanguage:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.languages.current,a=!1,e.quest.languages)for(n=0;n<e.quest.languages.length;n++)e.quest.languages[n].lang===s&&(a=!0);if(a){t.next=6;break}return t.next=6,ot.addLanguage(e.questId,s);case 6:return t.next=8,e.loadQuestData();case 8:e.quest.title[s]&&""!==e.quest.title[s]||(s===e.quest.mainLanguage?e.quest.title[s]=e.$t("label.NewQuest",s):e.quest.title[s]=e.quest.title[e.quest.mainLanguage]),e.story.active&&(e.story.step=18);case 10:case"end":return t.stop()}}),t)})))()},changeLanguage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,i;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=!1,t.quest.languages)for(n=0;n<t.quest.languages.length;n++)t.quest.languages[n].lang===e&&(a=!0);if(a){s.next=7;break}i=t,t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureToAddThisNewLanguage"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.addLanguage(i.questId,e);case 2:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 3:case"end":return s.stop()}}),s)})))).onCancel(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.languages.current=i.quest.languages[0].lang;case 1:case"end":return e.stop()}}),e)})))),s.next=10;break;case 7:return s.next=9,t.loadQuestData();case 9:t.quest.title[e]&&""!==t.quest.title[e]||(e===t.quest.mainLanguage?t.quest.title[e]=t.$t("label.NewQuest",e):t.quest.title[e]=t.quest.title[t.quest.mainLanguage]);case 10:case"end":return s.stop()}}),s)})))()},closePrivateQuest:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.ClosePrivateQuestAlert"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ot.closePrivate(s.questId,s.quest.version);case 2:return s.quest.status="old",e.next=5,s.getPrivateRanking();case 5:case"end":return e.stop()}}),e)})))).onCancel((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getPrivateRanking:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ps.listScoresForThisQuest(e.questId);case 2:s=t.sent,s&&s.data&&(e.ranking.items=s.data,e.ranking.items.sort(e.compareScore),e.refreshPosition());case 4:case"end":return t.stop()}}),t)})))()},compareScore:function(e,t){return e.score>t.score?-1:e.score<t.score?1:0},refreshPosition:function(){for(var e=0,t=0;t<this.ranking.items.length;t++)0===t||this.ranking.items[t].score!==this.ranking.items[t-1].score?(e=t+1,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t]))):(e=this.ranking.items[t-1].position,this.ranking.items[t].position&&this.ranking.items[t].position===e||(this.ranking.items[t].position=e,this.$set(this.ranking.items,t,this.ranking.items[t])))},closeStepTypePage:function(){this.stepId=-1,this.chapters.reloadStepPlay=!1,this.chapters.newStep.type={},this.chapters.showNewStepPage=!1},filteredStepTypes:function(e){var t=this;return qa.filter((function(s){return s.category===e&&s.enabled&&!("end-chapter"===s.code&&"simple"===t.form.fields.editorMode)}))},selectStepType:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.chapters.newStep.type=e,t.chapters.showNewStepPage=!1,t.chapters.showNewStepOverview=!1,t.stepId="0",t.chapters.showNewStepPageSettings=!0,t.moveToTop(),0===t.countSteps()&&t.story.active&&(t.story.step=20);case 7:case"end":return s.stop()}}),s)})))()},countSteps:function(){for(var e=0,t=0;t<this.chapters.items.length;t++)this.chapters.items[t].steps&&this.chapters.items[t].steps.length>0&&(e+=this.chapters.items[t].steps.length);return e},trackStepChanges:function(e){var t=this;return o()(r.a.mark((function s(){var a,n;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.chapters.showNewStepPageSettings=!1,t.chapters.showNewStepPage=!1,"end-chapter"!==e.type){s.next=8;break}return s.next=5,t.closeOverview();case 5:return s.next=7,t.refreshStepsList();case 7:return s.abrupt("return",!1);case 8:return t.chapters.showNewStepOverview=!0,t.stepId=e.id,s.next=12,As.getById(t.stepId,t.quest.version,t.languages.current);case 12:if(a=s.sent,!a||!a.data){s.next=28;break}return t.chapters.newStep.overviewData=a.data,t.moveToTop(),n=t,setTimeout((function(){n.chapters.reloadStepPlay=!0}),300),t.story.active&&0===t.countSteps()&&(t.story.step=21),s.next=21,t.refreshMediaSize();case 21:return s.next=23,t.refreshStepsList();case 23:if("use-item"!==t.chapters.newStep.overviewData.type){s.next=26;break}return s.next=26,t.fillInventory();case 26:s.next=29;break;case 28:vt(t.$t("label.ErrorStandardMessage"),"error");case 29:case"end":return s.stop()}}),s)})))()},trackStepPlayed:function(e){var t=this;return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0;case 1:case"end":return e.stop()}}),e)})))()},trackStepSuccess:function(e){var t=this;return o()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canMoveNextStep=!0,"image-over-flow"!==t.chapters.newStep.overviewData.type&&"binocular"!==t.chapters.newStep.overviewData.type&&t.hideHint();case 2:case"end":return e.stop()}}),e)})))()},trackStepPass:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.canPass=!0;case 1:case"end":return t.stop()}}),t)})))()},trackStepFail:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hideHint();case 1:case"end":return t.stop()}}),t)})))()},trackMessage:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:"suggestInventory"===e?t.inventory.suggest=!0:"suggestNext"===e&&(t.canMoveNextStep=!0);case 1:case"end":return s.stop()}}),s)})))()},addEditor:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,ot.addEditor(e.questId,e.quest.version,e.editor.new.email);case 3:if(s=t.sent,e.$q.loading.hide(),!s||403===s.status){t.next=12;break}return t.next=8,e.listEditors();case 8:e.editor.new.email="",e.editor.new.isExisting=!0,t.next=13;break;case 12:e.editor.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listEditors:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.editorsMissing=!1,t.next=3,ot.listEditors(e.questId,e.quest.version);case 3:if(s=t.sent,s&&s.data)for(e.editor.items=s.data,a=0;a<e.editor.items.length;a++)e.editor.items[a].checked=!0;else e.warnings.editorsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeEditor:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),s.next=3,ot.removeEditor(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),s.next=6,t.listEditors();case 6:case"end":return s.stop()}}),s)})))()},addInvitee:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$q.loading.show(),t.next=3,ot.addInvitee(e.questId,e.quest.version,e.invitee.new.email);case 3:if(s=t.sent,e.$q.loading.hide(),!s||403===s.status){t.next=12;break}return t.next=8,e.listInvitees();case 8:e.invitee.new.email="",e.invitee.new.isExisting=!0,t.next=13;break;case 12:e.invitee.new.isExisting=!1;case 13:case"end":return t.stop()}}),t)})))()},listInvitees:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inviteeMissing=!1,t.next=3,ot.listInvitees(e.questId,e.quest.version);case 3:if(s=t.sent,s&&s.data)for(e.invitee.items=s.data,a=0;a<e.invitee.items.length;a++)e.invitee.items[a].checked=!0;else e.warnings.inviteeMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},removeInvitee:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),s.next=3,ot.removeInvitee(t.questId,t.quest.version,e);case 3:return t.$q.loading.hide(),s.next=6,t.listInvitees();case 6:case"end":return s.stop()}}),s)})))()},hideHint:function(){this.chapters.newStep.overviewData.hint={}},getIconFromStepType:function(e){for(var t=0;t<qa.length;t++)if(qa[t].code===e)return"fas fa-"+qa[t].icon;return""},getStepTypeInformations:function(e){for(var t=0;t<qa.length;t++)if(qa[t].code===e)return qa[t];return""},fillInventory:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.inventoryMissing=!1,e.$q.loading.show(),t.next=4,As.listWonObjects(e.questId,e.stepId,e.quest.version);case 4:s=t.sent,s&&s.data?e.inventory.items=s.data:e.warnings.inventoryMissing=!0,e.$q.loading.hide();case 7:case"end":return t.stop()}}),t)})))()},openInventory:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.inventory.items.length){t.next=3;break}return t.next=3,e.fillInventory();case 3:e.inventory.isOpened?e.closeAllPanels():(e.closeAllPanels(),e.inventory.isOpened=!0,e.overview.tabSelected="inventory");case 4:case"end":return t.stop()}}),t)})))()},selectItem:function(e){"use-item"===this.chapters.newStep.overviewData.type?(this.selectedItem=e,this.closeAllPanels()):vt(this.$t("label.YouCanNotUseAnItemInThisStep"),"warning")},closeAllPanels:function(){this.inventory.isOpened=!1,this.hint.isOpened=!1,this.overview.tabSelected="none"},askForHint:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isHintAvailable()){t.next=2;break}return t.abrupt("return");case 2:if(!e.hint.isOpened){t.next=8;break}e.closeAllPanels(),e.hint.number++,e.hint.number>=e.hint.label.length&&(e.hint.number=0),t.next=12;break;case 8:return t.next=10,Ps.getHint(0,e.stepId,e.quest.version,e.languages.current);case 10:s=t.sent,s&&s.hint?(e.hint.label=s.hint,e.closeAllPanels(),e.hint.isOpened=!0,e.overview.tabSelected="hint"):vt(e.$t("label.ErrorStandardMessage"),"error");case 12:case"end":return t.stop()}}),t)})))()},isHintAvailable:function(){return this.chapters.newStep.overviewData&&this.chapters.newStep.overviewData.hasOwnProperty("hint")&&""!==this.chapters.newStep.overviewData.hint&&this.chapters.newStep.overviewData.hint.length>0},getMyGPSLocation:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$q.loading.show(),s=e,navigator.geolocation.getCurrentPosition((function(e){s.$q.loading.hide(),s.form.fields.location.lat=e.coords.latitude,s.form.fields.location.lng=e.coords.longitude}),e.getLocationError,{timeout:5e3,maximumAge:1e4});case 3:case"end":return t.stop()}}),t)})))()},moveToTop:function(){window.scrollTo(0,0)},getReadableStorageUsage:function(){if(this.quest&&this.quest.size){var e=nt.humanReadableFileSize(this.quest.size.current,!0,this.$t),t=nt.humanReadableFileSize(this.quest.size.limit,!0,this.$t);this.storage=this.$t("label.UsedOver",{current:e,limit:t})}},getPercentStorageUsage:function(){return this.quest&&this.quest.size&&this.quest.size.limit&&this.quest.size.limit>0?this.quest.size.current/this.quest.size.limit:0},showMedia:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadMedia();case 2:e.media.isOpened=!0;case 3:case"end":return t.stop()}}),t)})))()},loadMedia:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.listMedia(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&(e.media.items=s.data);case 4:case"end":return t.stop()}}),t)})))()},refreshMediaSize:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.getSize(e.questId,e.quest.version);case 2:s=t.sent,s&&s.data&&(e.quest.size=s.data.size);case 4:case"end":return t.stop()}}),t)})))()},removeMedia:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.removeMedia(t.questId,t.quest.version,e);case 2:if(a=s.sent,a){s.next=7;break}t.$q.dialog({message:t.$t("label.TechnicalIssue")}),s.next=9;break;case 7:return s.next=9,t.loadMedia();case 9:case"end":return s.stop()}}),s)})))()},zoomMedia:function(e){this.media.detail={isOpened:!0,index:e}},unzoomMedia:function(){this.media.detail={isOpened:!1,index:0}},hideMedia:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refreshMediaSize();case 2:e.media.isOpened=!1;case 3:case"end":return t.stop()}}),t)})))()},startSchedule:function(){this.form.fields.scheduling=[[0,24],[0,24],[0,24],[0,24],[0,24],[0,24],[0,24]]},resetSchedule:function(){this.form.fields.scheduling=[]},downloadMarkers:function(){var e=this;window.requestFileSystem(window.TEMPORARY,5242880,(function(t){var s=new XMLHttpRequest;s.open("GET","statics/markers/all.pdf",!0),s.responseType="blob",s.onload=function(s){if(200!==this.status)return vt(e.$t("label.TechnicalIssue"),"error"),void console.error("Could not download PDF markers file. Request status HTTP code: ",this.status);var a=new Blob([this.response],{type:"application/pdf"});t.root.getFile("all.pdf",{create:!0,exclusive:!1},(function(e){e.createWriter((function(e){e.onwriteend=function(e){cordova.plugins.fileOpener2.open(e.target.localURL,"application/pdf",{error:function(e){console.error("Could not open PDF markers file",e)},success:function(){}})},e.onerror=function(e){console.error("Failed file write: ",e)},e.write(a)}))}),(function(t){vt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not create PDF markers file on device system",t)}))},s.send()}),(function(t){vt(e.$t("label.TechnicalIssue"),"error"),console.error("Could not access to device filesystem",t)}))},downloadTexts:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,As.generateTextsExportFile(e.questId,e.quest.version,e.languages.current);case 2:window.open(e.serverUrl+"/upload/quest/"+e.questId+"/texts_fr.csv","_self");case 3:case"end":return t.stop()}}),t)})))()},createNewPaymentQRCode:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.createTierPayment(e.questId,e.quest.premiumPrice.manual);case 2:return t.next=4,e.listPayments();case 4:case"end":return t.stop()}}),t)})))()},createMultipleNewPaymentQRCode:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=0;case 1:if(!(a<e)){s.next=7;break}return s.next=4,ot.createTierPayment(t.questId,t.quest.premiumPrice.manual);case 4:a++,s.next=1;break;case 7:return s.next=9,t.listPayments();case 9:case"end":return s.stop()}}),s)})))()},listPayments:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.quest&&e.quest.premiumPrice&&e.quest.premiumPrice.tier)){t.next=5;break}return t.next=3,ot.listTierPayments(e.questId);case 3:s=t.sent,e.payments=s.data;case 5:case"end":return t.stop()}}),t)})))()},downloadQRCode:function(e){nt.openExternalLink(this.serverUrl+"/upload/tiers/"+e+".png")},removeCode:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$q.dialog({dark:!0,message:t.$t("label.AreYouSureYouWantToRemoveThisTierCode"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.removeTierPayment(t.questId,e);case 2:return s.next=4,t.listPayments();case 4:case"end":return s.stop()}}),s)}))));case 1:case"end":return s.stop()}}),s)})))()},listReviews:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,sr.list({questId:e.questId,version:e.quest.version});case 2:s=t.sent,e.reviews=s.data;case 4:case"end":return t.stop()}}),t)})))()},getStatistics:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new Date,t.next=3,ot.getStatistics(e.questId,e.quest.version,s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate());case 3:a=t.sent,e.statistics=a.data;case 5:case"end":return t.stop()}}),t)})))()},getAvatar:function(e){return e?-1!==e.indexOf("http")?e:this.serverUrl+"/upload/profile/"+e:"statics/profiles/noprofile.png"},getTabIcon:function(e){var t=this.tabs.icons[e-1],s="check_circle";return this.isEdition||"quest"!==this.quest.type?"img:":e<=this.tabs.progress?s:t},trackCallBackFunction:function(){return!1}},validations:{form:{fields:{title:{required:Kt["required"]},category:{required:Kt["required"]}}}}},Ur=Br,Yr=(s("74f2"),Object(_e["a"])(Ur,Sr,_r,!1,null,null,null)),Hr=Yr.exports,Gr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper background-map"},[e.showNonHybridQRReader?s("div",[s("q-toolbar",[s("q-toolbar-title",[e._v("\n        "+e._s(e.$t("label.PassTheQRCodeInFrontOfYourCamera"))+"\n      ")]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeQRCodeReader}})],1),s("qrcode-stream",{on:{decode:e.checkCode}})],1):e._e(),e.showNonHybridQRReader?e._e():s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",[s("q-input",{attrs:{id:"loginemail",outlined:"",type:"email",label:e.$t("label.YourEmail"),error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress"),"test-id":"login"},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),"forgottenpassword"!==e.step?s("q-input",{attrs:{id:"loginPass",outlined:"",type:"password",label:e.$t("label.YourPassword"),"test-id":"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"forgottenpassword"!==e.step?s("p",{staticClass:"centered q-mt-sm q-mb-lg"},[s("a",{on:{click:function(t){return e.openPasswordForgottenPopup()}}},[e._v(e._s(e.$t("label.ForgottenPassword")))])]):e._e(),"forgottenpassword"===e.step?s("div",[s("p",[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),s("q-input",{attrs:{outlined:"",label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"forgottenpassword"===e.step?s("div",[s("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourNewPassword"),"bottom-slots":"",error:e.$v.form.newPassword.$error,"error-message":e.$v.form.newPassword.checkPasswordComplexity?e.$v.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.form.newPassword.$touch},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),s("div",{staticClass:"text-center"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{type:"submit",color:"primary",label:e.$t("label.SignIn"),loading:e.submitting}})],1),s("div",{staticClass:"centered q-mt-sm q-mb-xl"},[s("q-btn",{staticClass:"large-btn",attrs:{outline:"",color:"primary",label:e.$t("label.Subscribe")},on:{click:function(t){return e.goToSubscribe()}}})],1)]),s("div",{staticClass:"q-py-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.ScanQRCodeToStartQuest")},on:{click:function(t){return e.startScanQRCode()}}})],1),s("div",{staticClass:"q-py-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"accent",label:e.$t("label.LetsPlayWithoutAccount")},on:{click:function(t){return e.validateTerms()}}})],1),s("div",{staticClass:"centered smaller version secondary-font"},[e._v("\n        Version "+e._s(e.version)+" - \n        "),s("img",{attrs:{src:"statics/icons/game/flag-en.png"},on:{click:function(t){return e.switchLanguage("en")}}}),e._v(" -\n        "),s("img",{attrs:{src:"statics/icons/game/flag-fr.png"},on:{click:function(t){return e.switchLanguage("fr")}}})])])]),s("q-dialog",{model:{value:e.passwordForgottenPopup,callback:function(t){e.passwordForgottenPopup=t},expression:"passwordForgottenPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header row items-center"},[e._v("\n        "+e._s(e.$t("label.ForgottenPassword"))+"\n        "),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",[s("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.form.email.$touch},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("q-btn",{staticClass:"glossy full-width",attrs:{color:"primary",label:e.$t("label.Ok")},on:{click:function(t){return e.sendForgottenPasswordCode()}}})],1)],1)],1),s("q-dialog",{model:{value:e.terms.show,callback:function(t){e.$set(e.terms,"show",t)},expression:"terms.show"}},[s("div",{staticClass:"q-pa-md"},[s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{dark:""},model:{value:e.terms.usage,callback:function(t){e.$set(e.terms,"usage",t)},expression:"terms.usage"}})],1),s("q-item-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.terms.usageError?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{dark:""},model:{value:e.terms.privacy,callback:function(t){e.$set(e.terms,"privacy",t)},expression:"terms.privacy"}})],1),s("q-item-section",[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.terms.privacyError?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])],1),s("div",{staticClass:"centered q-pa-md"},[s("q-btn",{staticClass:"glossy large-button",attrs:{color:"primary"},on:{click:function(t){return e.playAnonymous()}}},[s("span",[e._v(e._s(e.$t("label.Confirm")))])])],1)],1)])],1)},Wr=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],Vr=function(e){return!1!==/[A-Z]/.test(e)&&!1!==/\d/.test(e)},Jr={components:{QrcodeStream:ms["QrcodeStream"]},data:function(){return{step:"password",form:{email:"",password:"",newPassword:"",code:""},terms:{show:!1,usage:!1,usageError:!1,privacy:!1,privacyError:!1},showSocialLogin:{facebook:!1,google:!1},passwordForgottenPopup:!1,showNonHybridQRReader:!1,isHybrid:window.cordova,serverUrl:"https://api.graaly.com",submitting:!1,version:"2.1.34"}},mounted:function(){nt.clearAllRunningProcesses(),this.$route.query.email&&this.$route.query.code&&this.validateAccount(this.$route.query.email,this.$route.query.code),this.$route.query.email&&this.$route.query.invitation&&this.validateTeamInvitation(this.$route.query.email,this.$route.query.invitation),window.cordova&&(this.showSocialLogin.facebook=!0)},methods:{formSubmit:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n,o;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$v.$touch(),e.submitting=!0,t.t0=e.step,t.next="password"===t.t0?5:"forgottenpassword"===t.t0?10:16;break;case 5:return t.next=7,e.signIn(e.form.email,e.form.password);case 7:return s=t.sent,s.status?("success"===s.status&&(window.localStorage.setItem("jwt",s.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.user.jwt),a="/home",e.$route.query.hasOwnProperty("redirect")&&(a=e.$route.query.redirect),e.$router.push(a)),"failed"===s.status&&vt(e.$t("label.IncorrectLoginPleaseRetry"),"warning")):vt(e.$t("label.ErrorStandardMessage"),"error"),t.abrupt("break",16);case 10:if(e.$v.form.newPassword.$error){t.next=15;break}return t.next=13,Le.changePassword(e.form.email,e.form.newPassword,e.form.code);case 13:n=t.sent,n.status&&200===n.status?n.data&&n.data.user?(window.localStorage.setItem("jwt",n.data.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(n.data.user.jwt),o="/home",e.$route.query.hasOwnProperty("redirect")&&(o=e.$route.query.redirect),e.$router.push(o)):vt(e.$t("label.ErrorStandardMessage"),"error"):n.data&&"You have tries too much codes"===n.data.message?vt(e.$t("label.YourAccountIsBlocked"),"warning"):vt(e.$t("label.IncorrectCodePleaseRetry"),"warning");case 15:return t.abrupt("break",16);case 16:e.submitting=!1;case 17:case"end":return t.stop()}}),t)})))()},signIn:function(e,t){return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Le.login(e,t);case 2:if(a=s.sent,200!==a.status){s.next=7;break}return s.abrupt("return",{status:"success",user:a.data.user});case 7:if(401!==a.status){s.next=11;break}return s.abrupt("return",{status:"failed",error:"incorrect login"});case 11:return s.abrupt("return",{error:"technical issue"});case 12:case"end":return s.stop()}}),s)})))()},validateAccount:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Le.validateAccount(e,t);case 2:n=a.sent,n.status>=300&&n.data&&n.data.message?vt(n.data.message,"warning"):vt(s.$t("label.YourAccountIsNowValidated"),"positive");case 4:case"end":return a.stop()}}),a)})))()},googleLogin:function(){window.location=this.serverUrl+"/auth/google",localStorage.setItem("isLoggedIn",!0)},fbLoginSuccess:function(e){var t=this;facebookConnectPlugin.getAccessToken((function(s){Le.checkFacebookToken(e.authResponse.userID,s,(function(e,s){if(e&&vt(t.$t("label.TechnicalIssue"),"error"),s&&("login successful"===s.message||s.data&&"login successful"===s.data.message))return t.$router.push("/home");vt(t.$t("label.TechnicalIssue"),"error")}))}))},facebookLogin:function(){var e=this;window.cordova&&facebookConnectPlugin?facebookConnectPlugin.login(["public_profile"],this.fbLoginSuccess,(function(t){console.log(t),vt(e.$t("label.TechnicalIssue"),"error")})):(window.location=this.serverUrl+"/auth/facebook",localStorage.setItem("isLoggedIn",!0))},startScanQRCode:function(){var e=this;this.isHybrid?cordova.plugins.barcodeScanner.scan((function(t){if(t&&t.text){var s=nt.removeUnusedUrl(t.text);e.checkCode(s)}}),(function(e){console.log("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!0,prompt:"",resultDisplayDuration:500,formats:"QR_CODE",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1}):this.showNonHybridQRReader=!0},closeQRCodeReader:function(){this.showNonHybridQRReader=!1},validateTerms:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.terms.show=!0;case 1:case"end":return t.stop()}}),t)})))()},playAnonymous:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.terms.usageError=!1,e.terms.privacyError=!1,!1!==e.terms.usage){t.next=6;break}e.terms.usageError=!0,t.next=14;break;case 6:if(!1!==e.terms.privacy){t.next=10;break}e.terms.privacyError=!0,t.next=14;break;case 10:return t.next=12,Le.playAnonymous(e.$t("label.shortLang"));case 12:s=t.sent,s&&s.data&&"ok"===s.data.status&&s.data.user?(window.localStorage.setItem("jwt",s.data.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(s.data.user.jwt),e.$router.push("/home")):vt(e.$t("label.ErrorStandardMessage"),"error");case 14:case"end":return t.stop()}}),t)})))()},checkCode:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,ot.checkLoginQRCode(e,t.$t("label.shortLang"));case 2:a=s.sent,a&&a.data&&"ok"===a.data.status&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),-1===e.indexOf("_score")?a.data.questId?t.$router.push("/quest/play/"+a.data.questId):t.$router.push("/quest/play/"+e):t.$router.push("/quest/"+e.substring(0,24)+"/end")):vt(t.$t("label.QRCodeIsNotWorking"),"error");case 4:case"end":return s.stop()}}),s)})))()},goToSubscribe:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/createAccount/generic");case 1:case"end":return t.stop()}}),t)})))()},openPasswordForgottenPopup:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.passwordForgottenPopup=!0;case 1:case"end":return t.stop()}}),t)})))()},sendForgottenPasswordCode:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Le.sendForgottenPasswordCode(e.form.email);case 3:s=t.sent,200===s.status?(e.step="forgottenpassword",e.passwordForgottenPopup=!1):vt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()},switchLanguage:function(e){this.$i18n.locale=e}},validations:{form:{email:{required:Kt["required"],email:Kt["email"]},newPassword:{required:Kt["required"],minLength:Object(Kt["minLength"])(8),checkPasswordComplexity:Vr}}}},Kr=Jr,Zr=Object(_e["a"])(Kr,Gr,Wr,!1,null,null,null),Xr=Zr.exports,en=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",[e._v(e._s(e.$t("label.SignOutInProgress")))])])},tn=[],sn={mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logout");case 2:window.localStorage.removeItem("jwt"),delete Me.a.defaults.headers.common["Authorization"],e.$router.push("/user/login");case 5:case"end":return t.stop()}}),t)})))()}},an=sn,rn=Object(_e["a"])(an,en,tn,!1,null,null,null),nn=rn.exports,on=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToProfile()}}})],1),s("div",{staticClass:"centered"},[s("div",{staticClass:"user-card user-card-big main-profile centered relative-position"},[s("div",{staticClass:"relative-position no-overflow",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[s("div",{staticClass:"edit-bar centered"},[s("label",{on:{click:function(t){return e.$refs["uploadfile"].click()}}},[s("q-icon",{attrs:{name:"camera_alt"}})],1),s("input",{ref:"uploadfile",attrs:{name:"picturefile",id:"picturefile",type:"file",accept:"image/*",hidden:""},on:{change:e.uploadImage}})])]),""!==e.profile.form.name?s("div",[s("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n            "+e._s(e.profile.form.name)+"\n          ")]),e.profile.form.location&&(e.profile.form.location.postalCode||e.profile.form.location.country)?s("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.profile.form.location.postalCode?s("span",[e._v(e._s(e.profile.form.location.postalCode))]):e._e(),e.profile.form.location.postalCode&&e.profile.form.location.country?s("span",[e._v(", ")]):e._e(),e.profile.form.location.country?s("span",[e._v(e._s(e.profile.form.location.country))]):e._e()]):e._e()]):e._e()])]),s("div",[""===e.profile.form.name?s("div",[s("div",{staticClass:"centered subtitle5 q-mt-lg"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYou"))+"\n        ")]),s("div",{staticClass:"centered subtitle6"},[e._v("\n          "+e._s(e.$t("label.WeNeedMoreInformationAboutYouDesc"))+"\n        ")])]):e._e()]),s("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[s("q-input",{attrs:{dark:"",label:e.$t("label.YourName"),placeholder:"John Doe","bottom-slots":"",error:e.$v.profile.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName")},on:{blur:e.$v.profile.form.name.$touch},model:{value:e.profile.form.name,callback:function(t){e.$set(e.profile.form,"name",t)},expression:"profile.form.name"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourEmail"),placeholder:"john.doe@gmail.com","bottom-slots":"",error:e.$v.profile.form.email.$error,"error-message":e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:e.$v.profile.form.email.$touch},model:{value:e.profile.form.email,callback:function(t){e.$set(e.profile.form,"email",t)},expression:"profile.form.email"}}),e.displayPassword?s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.profile.form.password.$error,"error-message":e.$v.profile.form.password.checkPasswordComplexity?e.$v.profile.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.password.$touch},model:{value:e.profile.form.password,callback:function(t){e.$set(e.profile.form,"password",t)},expression:"profile.form.password"}}):e._e(),s("q-input",{attrs:{dark:"",label:e.$t("label.YourPresentation"),"bottom-slots":"",type:"textarea","min-rows":3},model:{value:e.profile.form.description,callback:function(t){e.$set(e.profile.form,"description",t)},expression:"profile.form.description"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.country,callback:function(t){e.$set(e.profile.form,"country",t)},expression:"profile.form.country"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourZipCode"),placeholder:"38500","bottom-slots":"",error:e.$v.profile.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode")},on:{blur:e.getLocation},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.zipCode,callback:function(t){e.$set(e.profile.form,"zipCode",t)},expression:"profile.form.zipCode"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourLanguage"),options:e.languages,"emit-value":"","map-options":""},on:{input:e.changeLanguage},model:{value:e.profile.form.language,callback:function(t){e.$set(e.profile.form,"language",t)},expression:"profile.form.language"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":""},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.sex,callback:function(t){e.$set(e.profile.form,"sex",t)},expression:"profile.form.sex"}}),s("q-select",{attrs:{dark:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.profile.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge")},on:{blur:e.$v.profile.form.age.$touch},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.age,callback:function(t){e.$set(e.profile.form,"age",t)},expression:"profile.form.age"}}),s("q-input",{attrs:{dark:"",label:e.$t("label.YourPhoneNumber"),placeholder:e.$t("label.phoneExample")},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"help"},on:{click:e.helpFields}})]},proxy:!0}]),model:{value:e.profile.form.phone,callback:function(t){e.$set(e.profile.form,"phone",t)},expression:"profile.form.phone"}}),s("div",{staticClass:"q-pt-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitProfileChanges()}}}),""===e.$store.state.user.name?s("q-btn",{staticClass:"q-pt-md",attrs:{color:"primary",flat:"",label:e.$t("label.MaybeLater")},on:{click:function(t){return e.backToMap()}}}):e._e()],1)],1),e.displayPassword?e._e():s("form",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded",on:{submit:function(t){return t.preventDefault(),e.submitProfileChanges()}}},[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.ChangeYourPassword")))]),s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.CurrentPassword"),"bottom-slots":"",error:e.$v.profile.form.oldPassword.$error,"error-message":e.$v.profile.form.oldPassword.checkPasswordComplexity?e.$v.profile.form.oldPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.oldPassword.$touch},model:{value:e.profile.form.oldPassword,callback:function(t){e.$set(e.profile.form,"oldPassword",t)},expression:"profile.form.oldPassword"}}),s("q-input",{attrs:{dark:"",type:"password",label:e.$t("label.NewPassword"),"bottom-slots":"",error:e.$v.profile.form.newPassword.$error,"error-message":e.$v.profile.form.newPassword.checkPasswordComplexity?e.$v.profile.form.newPassword.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule")},on:{blur:e.$v.profile.form.newPassword.$touch},model:{value:e.profile.form.newPassword,callback:function(t){e.$set(e.profile.form,"newPassword",t)},expression:"profile.form.newPassword"}}),s("div",{staticClass:"q-pt-md centered"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Save")},on:{click:function(t){return e.submitChangePassword()}}})],1)],1),s("div",{staticClass:"q-mt-lg q-pa-md q-ma-md background-lighter rounded"},[s("div",{staticClass:"centered"},[e._v(e._s(e.$t("label.RemoveYourAccount")))]),s("p",{staticClass:"subtitle6"},[e._v(e._s(e.$t("label.RemoveYourAccountDesc")))]),s("div",{staticClass:"centered"},[s("q-btn",{staticClass:"q-my-md glossy",attrs:{color:"negative",label:e.$t("label.IConfirmIWantToRemoveMyAccount")},on:{click:function(t){return e.removeAccount()}}})],1)]),s("div",[s("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[s("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),s("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),s("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})])]),s("q-dialog",{model:{value:e.showHelpPopup,callback:function(t){e.showHelpPopup=t},expression:"showHelpPopup"}},[s("q-card",[s("q-card-section",{staticClass:"popup-header centered"},[e._v("\n        "+e._s(e.$t("label.HowWeUseYourData"))+"\n        "),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"float-right",attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"subtitle5"},[s("ul",[s("li",[e._v(e._s(e.$t("label.DataCountry")))]),s("li",[e._v(e._s(e.$t("label.DataZipcode")))]),s("li",[e._v(e._s(e.$t("label.DataSex")))]),s("li",[e._v(e._s(e.$t("label.DataAge")))]),s("li",[e._v(e._s(e.$t("label.DataPhone")))])])])],1)],1)],1)},ln=[],cn=s("4c18"),un=s("cf83"),dn={data:function(){return{profile:{form:{name:"--",description:"",picture:"",phone:"",zipCode:"",country:"",language:"en",sex:"",age:"",password:"",oldPassword:"",newPassword:""}},position:null,countries:"fr"===this.$i18n.locale?cn:un,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}],languages:nt.buildOptionsForSelect(Qr,{valueField:"code",labelField:"name"},this.$t),displayPassword:!1,showHelpPopup:!1,serverUrl:"https://api.graaly.com"}},mounted:function(){this.profile.form={name:this.$store.state.user.name?"-"===this.$store.state.user.name?"":this.$store.state.user.name:"?",email:this.$store.state.user.email&&"providersignin"!==this.$store.state.user.email&&-1===this.$store.state.user.email.indexOf("dummyuser")?this.$store.state.user.email:"",password:"",description:this.$store.state.user.description?this.$store.state.user.description:"",phone:this.$store.state.user.phone?this.$store.state.user.phone:"",picture:this.$store.state.user.picture?this.$store.state.user.picture:"",zipCode:this.$store.state.user.location.postalCode?this.$store.state.user.location.postalCode:"",country:this.$store.state.user.location.country?this.$store.state.user.location.country:"",sex:this.$store.state.user.sex?this.$store.state.user.sex:"",age:this.$store.state.user.age?this.$store.state.user.age:"",language:this.$store.state.user.language},this.$store.state.user.missingPassword&&(this.displayPassword=!0)},methods:{getProfileImage:function(){return this.profile.form.picture&&-1!==this.profile.form.picture.indexOf("http")?this.profile.form.picture:this.profile.form.picture?this.serverUrl+"/upload/profile/"+this.profile.form.picture:"statics/images/icon/profile-small.png"},submitProfileChanges:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.name.$error||e.$v.profile.form.email.$error||e.$v.profile.form.password.$error&&e.displayPassword){t.next=9;break}return s={name:e.profile.form.name,email:e.profile.form.email,description:e.profile.form.description,password:e.profile.form.password,phone:e.profile.form.phone?e.profile.form.phone:"",zipCode:e.profile.form.zipCode,country:e.profile.form.country,language:e.profile.form.language,age:e.profile.form.age,sex:e.profile.form.sex},e.position&&(s.position=e.position),e.$q.loading.show(),t.next=6,Le.modifyAccount(s);case 6:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?vt(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 9:case"end":return t.stop()}}),t)})))()},getLocation:function(){var e=this;if(this.profile.form.zipCode&&""!==this.profile.form.zipCode&&this.profile.form.country&&""!==this.profile.form.country){var t=new google.maps.Geocoder;t.geocode({address:this.profile.form.zipCode+" "+this.profile.form.country},(function(t,s){e.$q.loading.hide(),"OK"===s&&t[0].geometry&&(e.position={},e.position.lat=t[0].geometry.location.lat(),e.position.lng=t[0].geometry.location.lng())}))}},submitChangePassword:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.profile.form.oldPassword.$error||e.$v.profile.form.newPassword.$error){t.next=8;break}return s={oldPassword:e.profile.form.oldPassword,newPassword:e.profile.form.newPassword},e.$q.loading.show(),t.next=5,Le.modifyAccount(s);case 5:a=t.sent,e.$q.loading.hide(),a.status>=300&&a.data&&a.data.message?vt(e.$t("label."+a.data.message),"warning"):e.backToProfile();case 8:case"end":return t.stop()}}),t)})))()},backToProfile:function(){""===this.profile.form.name?this.$router.push("/home"):this.$router.push("/profile/"+this.$store.state.user.id)},changeLanguage:function(){this.$i18n.locale=this.profile.form.language},helpFields:function(){this.showHelpPopup=!0},uploadImage:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.target.files,a[0]){s.next=3;break}return s.abrupt("return");case 3:return n=new FormData,n.append("image",a[0]),t.$q.loading.show(),s.next=8,Le.uploadAccountPicture(n);case 8:o=s.sent,o&&o.data&&(o.data.file?t.profile.form.picture=o.data.file:o.data.message&&"Error: File too large"===o.data.message&&vt(t.$t("label.FileTooLarge"),"error")),t.$q.loading.hide();case 11:case"end":return s.stop()}}),s)})))()},disconnect:function(){this.$router.push("/user/logout")},removeAccount:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveYourAccount"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.removeAccount();case 2:if(t=e.sent,!t){e.next=9;break}return vt(s.$t("label.YourAccountIsRemoved"),"info"),e.next=7,s.disconnect();case 7:e.next=10;break;case 9:vt(s.$t("label.ErrorStandardMessage"),"error");case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return t.stop()}}),t)})))()}},validations:{profile:{form:{email:{required:Kt["required"],email:Kt["email"]},name:{required:Kt["required"],minLength:Object(Kt["minLength"])(2)},country:{required:Kt["required"]},zipCode:{required:Kt["required"]},password:{required:Kt["required"],minLength:Object(Kt["minLength"])(8),checkPasswordComplexity:Vr},oldPassword:{required:Kt["required"],minLength:Object(Kt["minLength"])(8),checkPasswordComplexity:Vr},newPassword:{required:Kt["required"],minLength:Object(Kt["minLength"])(8),checkPasswordComplexity:Vr},age:{required:Kt["required"]}}}}},pn=dn,mn=Object(_e["a"])(pn,on,ln,!1,null,null,null),hn=mn.exports,fn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{style:"padding-top: "+("level"===e.tab?200:"ranking"===e.tab?160:110)+"px;"},[s("transition",{attrs:{name:"slideInTop"}},["level"===e.tab?s("div",e._l(e.levels,(function(t){return s("div",{key:t.number,staticClass:"q-ma-md level-to-reach",class:{"level-not-reached":e.$store.state.user.points<t.minPoints},style:"background-image: url(statics/images/icon/level"+t.number+".svg)"},[e.$store.state.user.points<t.minPoints?s("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.PointsToReachLevel",{score:t.minPoints})))]):e._e(),e.$store.state.user.points>=t.minPoints?s("div",{staticClass:"grey-round-box"},[e._v(e._s(e.$t("label.LevelReached")))]):e._e()])})),0):e._e()]),s("transition",{attrs:{name:"slideInTop"}},["ranking"===e.tab?s("div",[e._l(e.ranking,(function(t,a){return"quest"!==e.range&&e.ranking&&e.ranking.length>0?s("div",{key:a,staticClass:"q-pa-md rank-box"},[s("div",[s("userCard",{attrs:{user:t,size:"medium"},on:{click:e.openProfile}})],1),s("div",{staticClass:"full-width"},["-"!==t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(t.name))]):e._e(),"-"===t.name?s("div",{staticClass:"subtitle5"},[e._v(e._s(e.$t("label.AnonymousUser")))]):e._e(),t.location&&(t.location.country||t.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.location.postalCode?s("span",[e._v(e._s(t.location.postalCode))]):e._e(),t.location.postalCode&&t.location.country?s("span",[e._v(", ")]):e._e(),t.location.country?s("span",[e._v(e._s(t.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.points)+"\n                ")]),s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")])])])]):e._e()})),"quest"===e.range&&e.ranking&&e.ranking.length>0?s("div",{staticClass:"subtitle3 q-pa-md"},[e._v("\n            "+e._s(e.ranking[0].questData.title.fr)+"\n          ")]):e._e(),e._l(e.ranking,(function(t,a){return"quest"===e.range&&e.ranking&&e.ranking.length>0?s("div",{key:a,staticClass:"q-pa-md rank-box"},[s("div",[s("userCard",{attrs:{user:t.userData,size:"medium"},on:{click:function(s){return e.openProfile(t.userId[0])}}})],1),s("div",{staticClass:"full-width"},[s("div",{staticClass:"subtitle5"},[e._v(e._s(t.userData.name))]),t.userData.location&&(t.userData.location.country||t.userData.location.postalCode)?s("div",{staticClass:"subtitle6"},[t.userData.location.postalCode?s("span",[e._v(e._s(t.userData.location.postalCode))]):e._e(),t.userData.location.postalCode&&t.userData.location.country?s("span",[e._v(", ")]):e._e(),t.userData.location.country?s("span",[e._v(e._s(t.userData.location.country))]):e._e()]):e._e(),s("div",{staticClass:"grey-round-box row icons q-mt-sm q-pa-sm"},[s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/pts.svg"}}),e._v("\n                  "+e._s(t.stars)+"\n                ")]),s("div",{staticClass:"col-6 centered"},[s("img",{attrs:{src:"statics/images/icon/medal.svg"}}),e._v("\n                  "+e._s(a+1)+"\n                ")])])])]):e._e()})),e.ranking&&0===e.ranking.length?s("div",{staticClass:"centered"},[e._v("\n            "+e._s(e.$t("label.NoRanking"))+"\n          ")]):e._e()],2):e._e()]),s("transition",{attrs:{name:"slideInTop"}},["news"===e.tab?s("div",[s("q-infinite-scroll",{on:{load:e.loadNews}},[s("q-list",[e._l(e.news.items,(function(t,a){return s("q-item",{key:t._id},[s("q-item-section",{staticClass:"q-pl-md",attrs:{avatar:""}},[s("userCard",{attrs:{user:t.data,size:"medium"},on:{click:e.openProfile}})],1),s("q-item-section",{staticClass:"force-justify-start"},[t.data&&t.data.userId?s("q-item-label",{staticClass:"subtitle5"},[e._v(e._s(t.data.name))]):e._e(),s("q-item-label",{staticClass:"grey-round-box subtitle6 q-pa-sm"},["standard"===t.type?s("div",[e._v("\n                      "+e._s(t.title)+"\n                    ")]):e._e(),"standard"!==t.type?s("div",[s("span",{domProps:{innerHTML:e._s(e.$t("news."+t.type,t.data))}}),"challengeWon"===t.type?s("span",[e._v(e._s(e.$t("challenge."+t.data.name)))]):e._e()]):e._e(),s("div",{staticClass:"q-pt-sm"},[e._v("\n                      "+e._s(e._f("formatDate")(t.creation.date,e.$store.state.user.language))+"\n                      "),"friends"===t.destination?s("span",[e._v("\n                        - \n                        "),e.isLiked(t)?e._e():s("a",{on:{click:function(t){return e.like(a)}}},[e._v(e._s(e.$t("label.Like")))]),e.isLiked(t)?s("a",{on:{click:function(t){return e.unlike(a)}}},[e._v(e._s(e.$t("label.Like")))]):e._e(),t.likes.length>0?s("span",[e._v("("+e._s(t.likes.length)+")")]):e._e()]):e._e()])])],1)],1)})),0===e.news.items.length?s("q-item",[s("q-item-label",[e._v(e._s(e.$t("label.NoNews")))])],1):e._e()],2),s("div",{staticClass:"row justify-center",staticStyle:{"margin-bottom":"50px"},attrs:{slot:"message"},slot:"message"},[s("q-spinner-dots",{attrs:{size:5}})],1)],1)],1):e._e()])],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-4",class:{"tab-unselected":"level"!==e.tab},on:{click:function(t){return e.selectTab("level")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Level"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"tab-unselected":"ranking"!==e.tab},on:{click:function(t){return e.selectTab("ranking")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Ranking"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"tab-unselected":"news"!==e.tab},on:{click:function(t){return e.selectTab("news")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.News"))+"\n          ")])])]),"level"===e.tab?s("div",[s("div",{staticClass:"relative-position progress-box"},[s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress",style:"width: "+Math.floor(100*e.level.progress)+"%"}),s("div",{staticClass:"value"},[e._v("\n              "+e._s(Math.floor(100*e.level.progress))+"%\n            ")])]),s("div",{staticClass:"score subtitle6"},[e._v("\n            "+e._s(e.$t("label.YouHaveReachAScore",{score:e.$store.state.user.points}))+"\n          ")]),s("div",{staticClass:"rank-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.$store.state.user.level+".svg"}})])])]):e._e(),"ranking"===e.tab?s("div",[s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-3",class:{"tab-unselected":"world"!==e.range},on:{click:function(t){return e.selectRange("world")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.World"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"country"!==e.range},on:{click:function(t){return e.selectRange("country")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCountry"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"city"!==e.range},on:{click:function(t){return e.selectRange("city")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.MyCity"))+"\n            ")])]),s("div",{staticClass:"col-3",class:{"tab-unselected":"friends"!==e.range},on:{click:function(t){return e.selectRange("friends")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.Friends"))+"\n            ")])])])]):e._e()],1)])])},gn=[],bn={components:{userCard:ls},data:function(){return{tab:"level",range:"world",news:{limit:20,skip:0,items:[]},levels:[{number:9,minPoints:3e3,maxPoints:15e3},{number:8,minPoints:1500,maxPoints:3e3},{number:7,minPoints:800,maxPoints:1500},{number:6,minPoints:400,maxPoints:800},{number:5,minPoints:200,maxPoints:400},{number:4,minPoints:100,maxPoints:200},{number:3,minPoints:30,maxPoints:100},{number:2,minPoints:15,maxPoints:30},{number:1,minPoints:0,maxPoints:15}],ranking:null,level:{progress:.04},serverUrl:"https://api.graaly.com"}},mounted:function(){this.$store.state.user.points||(this.$store.state.user.points=0),this.selectTab(this.$route.params.type)},methods:{selectTab:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.tab=e,"level"===t.tab&&(t.range=null,t.computeProgression()),"ranking"!==t.tab){s.next=10;break}if(24!==t.$route.params.subtype.length){s.next=8;break}return s.next=6,t.selectRange(t.$route.params.subtype);case 6:s.next=10;break;case 8:return s.next=10,t.selectRange();case 10:case"end":return s.stop()}}),s)})))()},selectRange:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e||(e="world"),t.range=e,s.next=4,t.getRanking(e);case 4:case"end":return s.stop()}}),s)})))()},openProfile:function(e){this.$router.push("/profile/"+e)},backToTheMap:function(){this.$router.back()},computeProgression:function(){this.level=hs(this.$store.state.user.points)},loadNews:function(e,t){var s=this;it.listNews(this.news.limit,this.news.skip,(function(e,a){s.news.skip+=s.news.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.news.items=s.news.items.concat(a.data),t())}))},like:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.$q.loading.show(),t.news.items[e].likes.push({userId:t.$store.state.user._id,date:new Date}),s.next=4,it.likeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return s.stop()}}),s)})))()},unlike:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:for(t.$q.loading.show(),a=0;a<t.news.items[e].likes.length;a++)t.news.items[e].likes[a].userId===t.$store.state.user._id&&t.news.items[e].likes.splice(a,1);return s.next=4,it.unlikeNews(t.news.items[e]._id);case 4:t.$q.loading.hide();case 5:case"end":return s.stop()}}),s)})))()},isLiked:function(e){if(e.likes)for(var t=0;t<e.likes.length;t++)if(e.likes[t].userId===this.$store.state.user._id)return!0;return!1},getRanking:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$q.loading.show(),"world"!==e&&"country"!==e&&"city"!==e&&"friends"!==e){s.next=7;break}return s.next=4,it.getRangeRanking(e);case 4:a=s.sent,s.next=11;break;case 7:return s.next=9,Ps.getRankingForAQuest(e);case 9:a=s.sent,t.range="quest";case 11:a&&a.data?a.data.users?t.ranking=a.data.users:t.ranking=a.data:t.ranking=[],t.$q.loading.hide();case 13:case"end":return s.stop()}}),s)})))()}}},vn=bn,wn=Object(_e["a"])(vn,fn,gn,!1,null,null,null),yn=wn.exports,qn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[s("div",{staticStyle:{"margin-top":"120px"}},["played"===e.tab?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadPlayed}},[s("questsList",{attrs:{format:"big",quests:e.quests.played}})],1):e._e(),"created"===e.tab&&e.$route.params.id!==e.$store.state.user.id?s("div",[s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),"created"===e.tab&&e.$route.params.id===e.$store.state.user.id?s("div",[e.quests.built&&e.quests.built.rejected&&e.quests.built.rejected.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourRejectedQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.rejected}})],1):e._e(),e.quests.built&&e.quests.built.tovalidate&&e.quests.built.tovalidate.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourUnderValidationQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.tovalidate}})],1):e._e(),e.quests.built&&e.quests.built.draft?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourDraftQuests")))]),s("questsList",{attrs:{format:"big",color:"red",add:!0,quests:e.quests.built.draft}})],1):e._e(),e.quests.built&&e.quests.built.published&&e.quests.built.published.length>0?s("div",[s("div",{staticClass:"subtitle4 q-pa-md"},[e._v(e._s(e.$t("label.YourPublishedQuests")))]),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built.published}})],1):e._e()]):e._e(),"played"===e.tab&&e.quests.played&&0===e.quests.played.length?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestPlayed"))+"\n      ")]):e._e(),"created"===e.tab&&e.quests.built&&0===e.quests.built.length?s("div",{staticClass:"centered"},[e._v("\n        "+e._s(e.$t("label.NoQuestCreated"))+"\n      ")]):e._e()],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"played"!==e.tab},on:{click:function(t){return e.selectTab("played")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsSuccessful"))+"\n          ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"created"!==e.tab},on:{click:function(t){return e.selectTab("created")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.QuestsCreated"))+"\n          ")])])])],1)])])},kn=[],xn={components:{questsList:Ht},data:function(){return{quests:{played:null,built:null},skip:0,limit:12,tab:"played",serverUrl:"https://api.graaly.com"}},mounted:function(){this.selectTab(this.$route.params.type)},methods:{loadPlayed:function(e,t){var s=this;return o()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=s,ot.ListPlayedByAUserSync(s.$route.params.id,null,s.skip,(function(e,s){if(a.skip+=a.limit,e&&t(e),s&&s.data&&s.data.length>0){a.quests.played=[];for(var r=0;r<s.data.length;r++)a.quests.played.push({questId:s.data[r].questId,picture:s.data[r].questData.picture,title:s.data[r].questData.title,location:{town:s.data[r].questData.town},playStatus:s.data[r].status&&""!==s.data[r].status?s.data[r].status:"finished",points:s.data[r].stars});t()}}));case 2:case"end":return e.stop()}}),e)})))()},loadCreated:function(e){var t=this;return o()(r.a.mark((function s(){var a,n,o;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e||(e=t.$store.state.user.id),s.next=3,ot.ListCreatedByAUser(e);case 3:if(a=s.sent,e===t.$store.state.user.id&&(t.quests.built={rejected:[],tovalidate:[],draft:[],published:[]}),a&&a.data){if(a.data.length>0)if(t.quests.createdNb=a.data.length,e===t.$store.state.user.id)for(n=0;n<a.data.length;n++)o=a.data[n],"published"===o.status?t.quests.built["published"].push(o):"rejected"===o.status?t.quests.built["rejected"].push(o):"tovalidate"===o.status?t.quests.built["tovalidate"].push(o):t.quests.built["draft"].push(o);else t.quests.built=a.data}else t.quests.built=[];case 6:case"end":return s.stop()}}),s)})))()},selectTab:function(e){this.tab=e,this.skip=0,"created"===e&&this.loadCreated(this.$route.params.id)},backToTheMap:function(){this.$router.back()}}},Cn=xn,Sn=Object(_e["a"])(Cn,qn,kn,!1,null,null,null),_n=Sn.exports,Tn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg q-pt-xl"}},[s("div",{staticStyle:{"margin-top":"120px"}},["follow"===e.tab?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadFriends}},[s("usersList",{attrs:{format:"list",add:e.$store.state.user.id===e.$route.params.id,users:e.users},on:{refresh:e.reloadFriends}})],1):e._e(),"suggestion"===e.tab&&null!==e.user.position?s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadSuggestions}},[s("usersList",{attrs:{format:"list",add:!1,users:e.suggestions}})],1):e._e(),"suggestion"===e.tab&&null===e.user.position?s("div",[e._v("\n        "+e._s(e.$t("label.WeNeedYourPositionForThisFeature"))+"\n      ")]):e._e()],1),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.$route.params.id?s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"follow"!==e.tab},on:{click:function(t){return e.selectTab("follow")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.YouFollowThem"))+"\n          ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"suggestion"!==e.tab},on:{click:function(t){return e.selectTab("suggestion")}}},[s("div",{staticClass:"tab-button subtitle5 centered"},[e._v("\n            "+e._s(e.$t("label.Suggestions"))+"\n          ")])])]):e._e(),e.$store.state.user.id!==e.$route.params.id?s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n          "+e._s(e.$t("label.FollowedPeople"))+"\n        ")])]):e._e()],1)]),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},Pn=[],In={components:{usersList:ps,geolocation:ht},data:function(){return{users:null,user:{position:null},suggestions:null,suggestionType:"followers",skip:0,limit:12,tab:"follow",serverUrl:"https://api.graaly.com"}},mounted:function(){},methods:{reloadFriends:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skip=0,t.next=3,e.loadFriends(0,(function(){}));case 3:case"end":return t.stop()}}),t)})))()},loadFriends:function(e,t){var s=this;return o()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=s,it.listFriendsSync(0,s.skip,s.limit,(function(e,s){null===a.users&&(a.users=[]),e&&t(e),s&&s.data&&s.data.length>0&&(a.skip+=a.limit,a.users=a.users.concat(s.data),t())}));case 2:case"end":return e.stop()}}),e)})))()},loadSuggestions:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=s,"near"===s.suggestionType?it.listSuggestionsSync({lng:s.user.position.longitude,lat:s.user.position.latitude},s.limit,s.skip,(function(e,s){n.skip+=n.limit,null===n.suggestions&&(n.suggestions=[]),e&&t(e),s&&s.data&&s.data.length>0&&(n.suggestions=n.suggestions.concat(s.data),t())})):it.listFollowersSync(s.limit,s.skip,(function(s,a){null===n.suggestions&&(n.suggestions=[]),s&&t(s),a&&a.data&&a.data.length>0&&(n.skip+=a.data.length,n.suggestions=n.suggestions.concat(a.data),t()),a&&a.data&&a.data.length>0&&!(a.data.length<n.limit)||(n.suggestionType="near",n.loadSuggestions(e,t))}));case 2:case"end":return a.stop()}}),a)})))()},onLocationSuccess:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$set(t.user,"position",e.coords);case 1:case"end":return s.stop()}}),s)})))()},onLocationError:function(e){e&&(this.user.position=null)},selectTab:function(e){this.tab=e,this.skip=0,"suggestion"===e&&null===this.suggestions&&this.loadSuggestions(0,(function(){}))},backToTheMap:function(){this.$router.back()}}},$n=In,An=Object(_e["a"])($n,Tn,Pn,!1,null,null,null),On=An.exports,Mn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"subtitle3 q-pa-md q-mt-xl q-pt-lg"},[e._v("\n      "+e._s(e.$t("label."+(e.$store.state.user.id===e.$route.params.id?"YourBadges":"Badges")))+"\n    ")]),s("badgesList",{attrs:{format:e.$store.state.user.id===e.$route.params.id?"bytown":"list",badges:e.badges}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}})],1)],1)])},zn=[],Nn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pl-md"},[e.badges?e._e():s("div",{staticClass:"badge relative-position"},[s("div",{staticClass:"centered q-pt-lg"},[s("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1)]),e.badges&&0===e.badges.length?s("div",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.YouDoNotHaveBadgesYet"))+"\n  ")]):e._e(),"scroll"===e.format&&e.badges&&e.badges.length>0?s("div",{staticClass:"horizontal-scroll-wrapper badges-horizontal-scroll-wrapper"},e._l(e.badges,(function(t){return s("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),s("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"list"===e.format&&e.badges&&e.badges.length>0?s("div",{staticClass:"row justify-around"},e._l(e.badges,(function(t){return s("div",{key:t._id,staticClass:"badge relative-position q-mr-md"},[s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.questData.rewardPicture}}),s("div",{staticClass:"centered subtitle6"},[e._v("\n        "+e._s(t.questData.title)+"\n      ")])])})),0):e._e(),"bytown"===e.format&&e.badges&&e.badges.length>0?s("div",[e._l(e.badges,(function(t,a){return s("div",{key:a},[s("div",{staticClass:"subtitle4 q-pb-md"},[e._v(e._s(t.city))]),s("div",{staticClass:"row justify-around"},e._l(t.rewards,(function(t,a){return s("div",{key:a,staticClass:"badge relative-position q-mr-md",on:{click:function(s){return e.openQuest(t.questId)}}},[s("img",{class:{reward:!0,disabled:!t.won},attrs:{src:e.serverUrl+"/upload/quest/"+t.image}}),t.won?s("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(t.title)+"\n          ")]):e._e(),t.won?e._e():s("div",{staticClass:"centered subtitle6"},[e._v("\n            "+e._s(e.$t("label.NotWon"))+"\n          ")])])})),0)])})),e._v("\n    "+e._s(e.$t("label.PlayAllQuestsInACityToWin"))+"\n  ")],2):e._e()])},Fn=[],Dn={props:["badges","format"],data:function(){return{serverUrl:"https://api.graaly.com"}},methods:{openQuest:function(e){this.$router.push("/quest/play/"+e)}}},Rn=Dn,Ln=Object(_e["a"])(Rn,Nn,Fn,!1,null,null,null),jn=Ln.exports,En={components:{badgesList:jn},data:function(){return{badges:null,serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadBadges()},methods:{loadBadges:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.getRewards(e.$route.params.id,"all");case 2:s=t.sent,s&&s.data&&(e.badges=s.data);case 4:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.$router.back()}}},Qn=En,Bn=Object(_e["a"])(Qn,Mn,zn,!1,null,null,null),Un=Bn.exports,Yn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{staticClass:"q-py-sm q-px-md dark-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),e.$store.state.user.id===e.userId?s("q-btn",{staticClass:"float-right",attrs:{flat:"",icon:"settings"},on:{click:function(t){return e.updateProfile()}}}):e._e()],1),s("div",{staticClass:"centered"},[s("div",{staticClass:"user-card user-card-big main-profile relative-position"},[s("div",{staticClass:"relative-position",style:"background: url("+e.getProfileImage()+" ) center center / cover no-repeat "},[e.user.statistics&&e.user.statistics.nbQuestsCreated&&e.user.statistics.nbQuestsCreated>0?s("div",{staticClass:"profile-item-creator"},[s("img",{attrs:{src:"statics/images/icon/profile-puzzle.svg"}})]):e._e(),e.user.statistics&&e.user.statistics.nbQuestsSuccessful&&e.user.statistics.nbQuestsSuccessful>0?s("div",{staticClass:"profile-item-level"},[s("img",{attrs:{src:"statics/images/icon/level"+e.user.level+".svg"}})]):e._e()]),s("div",{staticClass:"centered subtitle3 q-mt-lg"},[e._v("\n          "+e._s(e.user.name)+"\n        ")]),e.user.location&&(e.user.location.postalCode||e.user.location.country)?s("div",{staticClass:"centered subtitle6 q-mt-sm"},[e.user.location.postalCode?s("span",[e._v(e._s(e.user.location.postalCode))]):e._e(),e.user.location.postalCode&&e.user.location.country?s("span",[e._v(", ")]):e._e(),e.user.location.country?s("span",[e._v(e._s(e.user.location.country))]):e._e()]):e._e()])]),e.user.description?s("div",{staticClass:"q-pa-md subtitle6"},[e._v("\n      "+e._s(e.user.description)+"\n    ")]):e._e(),e.$store.state.user.id!==e.userId?s("div",{staticClass:"centered q-pa-md"},[e.user.status&&"friend"===e.user.status?e._e():s("q-btn",{staticClass:"glossy large-btn",attrs:{color:"primary",label:e.$t("label.Follow")},on:{click:e.follow}}),e.user.status&&"friend"===e.user.status?s("div",{staticClass:"centered"},[s("q-chip",{staticClass:"glossy",attrs:{color:"primary","text-color":"white","icon-right":"star"}},[e._v("\n          "+e._s(e.$t("label.Followed"))+"\n        ")]),s("div",{staticClass:"q-pt-sm"},[s("a",{on:{click:e.removeFriend}},[e._v(e._s(e.$t("label.DoNotFollowAnymore")))])])],1):e._e()],1):e._e(),s("div",[e.warnings.listCreatedQuestsMissing?s("div",{staticClass:"centered bg-warning q-pa-sm",on:{click:function(t){return e.listCreatedQuests(e.$store.state.user._id)}}},[s("q-icon",{attrs:{name:"refresh"}}),e._v(" "+e._s(e.$t("label.TechnicalErrorReloadPage"))+"\n      ")],1):e._e()]),e.$store.state.user.id===e.userId?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),s("questsList",{attrs:{format:"small",color:"red",add:!0,quests:e.quests.built}})],1):e._e(),e.$store.state.user.id!==e.userId&&e.quests&&e.quests.built&&e.quests.built.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.EscapeGames"),type:"puzzle"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPublished}}),s("questsList",{attrs:{format:"big",color:"red",quests:e.quests.built}})],1):e._e(),null===e.badges||e.badges.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.Badges"),type:"badge"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreBadges}}),s("badgesList",{attrs:{format:"scroll",badges:e.badges}})],1):e._e(),null===e.quests.played||e.quests.played.length>0?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.SolvedQuests"),type:"key"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreQuestPlayed}}),s("questsList",{attrs:{format:"small",quests:e.quests.played}})],1):e._e(),null===e.friends.list||e.friends.list.length>0||e.$store.state.user.id===e.userId?s("div",[s("titleBar",{attrs:{title:{text:e.$t("label.YouFollowThem"),type:"friend"},link:{text:e.$t("label.SeeMore")}},on:{click:e.readMoreAllFriends}}),s("usersList",{attrs:{format:"scroll",add:e.$store.state.user.id===e.userId,users:e.friends.list},on:{refresh:e.loadFriends}})],1):e._e(),e.$store.state.user.id===e.userId?s("div",[s("div",{staticClass:"centered q-mt-xl q-mb-sm cursor-pointer"},[s("a",{on:{click:function(t){return e.disconnect()}}},[e._v(e._s(e.$t("label.SignOut")))])]),s("div",{staticClass:"centered q-mb-sm",domProps:{innerHTML:e._s(e.$t("label.TermsAndConditionsLink"))}}),s("div",{staticClass:"centered q-mb-xl",domProps:{innerHTML:e._s(e.$t("label.PrivacyPolicyLink"))}})]):e._e()])])},Hn=[],Gn={components:{titleBar:zt,questsList:Ht,usersList:ps,badgesList:jn},data:function(){return{user:{position:null,proposeAQuest:!0},userId:null,friends:{list:null,show:!1},quests:{played:null,built:null,createdNb:0},badges:null,warnings:{listCreatedQuestsMissing:!1,listFriendsMissing:!1},serverUrl:"https://api.graaly.com"}},mounted:function(){"me"===this.$route.params.id?this.userId=this.$store.state.user.id:this.userId=this.$route.params.id,this.getProfile(),this.listCreatedQuests(),this.listPlayedQuests(),this.loadFriends(),this.loadBadges()},methods:{getProfile:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId!==e.$store.state.user.id){t.next=5;break}e.user={name:e.$store.state.user.name,email:e.$store.state.user.email,description:e.$store.state.user.description,phone:e.$store.state.user.phone?e.$store.state.user.phone:"",picture:e.$store.state.user.picture,zipCode:e.$store.state.user.location.postalCode,country:e.$store.state.user.location.country,language:e.$store.state.user.language,statistics:e.$store.state.user.statistics,level:e.$store.state.user.level},"-"===e.user.name&&e.updateProfile(),t.next=9;break;case 5:return t.next=7,it.getFriend(e.userId);case 7:s=t.sent,s&&s.data&&(e.user=s.data);case 9:case"end":return t.stop()}}),t)})))()},listCreatedQuests:function(e){var t=this;return o()(r.a.mark((function e(){var s,a,n;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.warnings.listCreatedQuestsMissing=!1,e.next=3,ot.ListCreatedByAUser(t.userId);case 3:if(s=e.sent,t.quests.built=[],s&&s.data){if(s.data.length>0)for(t.quests.createdNb=s.data.length,a=[],t.quests.built=[],n=0;n<s.data.length;n++)-1===a.indexOf(s.data[n].questId)&&(t.quests.built.push(s.data[n]),a.push(s.data[n].questId))}else t.warnings.listCreatedQuestsMissing=!0;case 6:case"end":return e.stop()}}),e)})))()},listPlayedQuests:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ot.ListPlayedByAUser(e.userId);case 2:s=t.sent,s&&s.data&&(e.quests.played=e.formatRunResults(s.data));case 4:case"end":return t.stop()}}),t)})))()},formatRunResults:function(e){for(var t=[],s=0;s<e.length;s++)t.push({questId:e[s].questId,picture:e[s].questData.picture,title:e[s].questData.title,location:{town:e[s].questData.town},playStatus:e[s].status?e[s].status:"succeeded",points:e[s].stars});return t},loadFriends:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.warnings.listFriendsMissing=!1,t.next=3,it.listFriends(e.userId,0,10);case 3:s=t.sent,s&&s.data?e.friends.list=s.data:e.warnings.listFriendsMissing=!0;case 5:case"end":return t.stop()}}),t)})))()},loadBadges:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.getRewards(e.userId,"won");case 2:s=t.sent,s&&s.data&&(e.badges=s.data);case 4:case"end":return t.stop()}}),t)})))()},loadOrganization:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.user.organizationId){t.next=5;break}return t.next=3,it.getOrganization();case 3:s=t.sent,s&&(e.user.organization=s.data);case 5:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("-"!==e.$store.state.user.name){t.next=4;break}e.updateProfile(),t.next=8;break;case 4:return t.next=6,it.addFriend(e.userId);case 6:s=t.sent,s?(s.data&&s.data.hasOwnProperty("status")&&"invitationsent"===s.data.status?vt(e.$t("label.InvitationSent"),"success"):vt(e.$t("label.FriendsAdded"),"success"),l["a"].set(e.user,"status","friend")):vt(e.$t("label.ErrorStandardMessage"),"error");case 8:case"end":return t.stop()}}),t)})))()},readMoreQuestPublished:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/created");case 1:case"end":return t.stop()}}),t)})))()},readMoreQuestPlayed:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/quests/played");case 1:case"end":return t.stop()}}),t)})))()},readMoreBadges:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/"+e.userId+"/badges");case 1:case"end":return t.stop()}}),t)})))()},backToTheMap:function(){this.userId===this.$store.state.user.id?this.$router.push("/home"):this.$router.back()},readMoreAllFriends:function(){this.$router.push("/user/"+this.userId+"/friends")},getProfileImage:function(){return this.user.picture&&-1!==this.user.picture.indexOf("http")?this.user.picture:this.user.picture?this.serverUrl+"/upload/profile/"+this.user.picture:"statics/images/icon/profile-small.png"},buildQuest:function(){this.$router.push("/quest/create/welcome")},updateProfile:function(){this.$router.push("/user/updateprofile")},disconnect:function(){this.$router.push("/user/logout")},removeFriend:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e.userId,e.$q.dialog({dark:!0,message:e.$t("label.AreYouSureYouWantToRemoveThisFriend"),ok:!0,cancel:!0}).onOk(o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,it.removeFriend(s);case 2:l["a"].set(e.user,"status","normal");case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()}}},Wn=Gn,Vn=Object(_e["a"])(Wn,Yn,Hn,!1,null,null,null),Jn=Vn.exports,Kn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"scroll background-dark"},[s("div",{attrs:{id:"teaser q-mb-lg"}},[s("div",{style:"padding-top: "+("quest"===e.type?"302":"258")+"px;"},["quest"===e.type&&e.results.quests&&e.results.quests.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherQuests}},[s("questsList",{attrs:{format:"big",quests:e.results.quests}})],1)],1):e._e(),"designer"===e.type&&e.results.designers&&e.results.designers.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[s("usersList",{attrs:{format:"list",users:e.results.designers}})],1)],1):e._e(),"player"===e.type&&e.results.players&&e.results.players.length>0?s("div",[s("q-infinite-scroll",{attrs:{offset:250},on:{load:e.loadOtherUsers}},[s("usersList",{attrs:{format:"list",users:e.results.players}})],1)],1):e._e(),"quest"===e.type&&e.results.quests&&0===e.results.quests.length?s("div",{staticClass:"centered q-pa-md",nativeOn:{click:function(t){return e.$router.push("/quest/create")}}},[s("q-icon",{attrs:{name:"explore",size:"2rem"}}),e._v("\n        "+e._s(e.$t("label.NoQuestForThisSearch"))+"\n        "),s("div",[s("a",{on:{click:function(t){return e.$router.push("/quest/create")}}},[e._v(e._s(e.$t("label.WhyDontYouCreateAQuest")))])])],1):e._e(),"designer"===e.type&&e.results.designers&&0===e.results.designers.length?s("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoDesignerForThisSearch"))+"\n      ")]):e._e(),"player"===e.type&&e.results.players&&0===e.results.players.length?s("div",{staticClass:"centered q-pa-md"},[e._v("\n        "+e._s(e.$t("label.NoPlayerForThisSearch"))+"\n      ")]):e._e()]),s("q-scroll-observer",{on:{scroll:e.onScroll}}),s("div",{staticClass:"q-py-sm q-px-md dark-banner opaque-banner fixed-top"},[s("q-btn",{attrs:{flat:"",icon:"arrow_back"},on:{click:function(t){return e.backToTheMap()}}}),s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-4",class:{"box-unselected":"quest"!==e.type},on:{click:function(t){return e.selectType("quest")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-quest-box-top"},[s("img",{attrs:{src:"statics/images/icon/key-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-quest-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.EscapeGame"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"box-unselected":"designer"!==e.type},on:{click:function(t){return e.selectType("designer")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-creator-box-top"},[s("img",{attrs:{src:"statics/images/icon/puzzle-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-creator-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Designers"))+"\n          ")])]),s("div",{staticClass:"col-4",class:{"box-unselected":"player"!==e.type},on:{click:function(t){return e.selectType("player")}}},[e.scrollInfo.position<20?s("div",{staticClass:"search-box-top search-user-box-top"},[s("img",{attrs:{src:"statics/images/icon/user-big.svg"}})]):e._e(),s("div",{staticClass:"search-box-bottom search-user-box-bottom subtitle6 centered"},[e._v("\n            "+e._s(e.$t("label.Players"))+"\n          ")])])]),"quest"===e.type?s("div",[s("div",{staticClass:"row q-pa-sm"},[s("div",{staticClass:"col-6",class:{"tab-unselected":"around"!==e.subtype},on:{click:function(t){return e.selectSubtype("around")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.AroundYou"))+"\n            ")])]),s("div",{staticClass:"col-6",class:{"tab-unselected":"friends"!==e.subtype},on:{click:function(t){return e.selectSubtype("friends")}}},[s("div",{staticClass:"tab-button subtitle6 centered"},[e._v("\n              "+e._s(e.$t("label.FriendsQuests"))+"\n            ")])])])]):e._e(),s("div",[s("q-input",{staticClass:"q-px-md arial",attrs:{dark:"",debounce:"500",placeholder:e.$t("label.Search")},on:{input:function(t){return e.find()}},scopedSlots:e._u([""!==e.search.text?{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"close"}})]},proxy:!0}:null],null,!0),model:{value:e.search.text,callback:function(t){e.$set(e.search,"text",t)},expression:"search.text"}})],1)],1)],1),s("geolocation",{ref:"geolocation-component",on:{success:function(t){return e.onLocationSuccess(t)},error:function(t){return e.onLocationError()}}})],1)},Zn=[],Xn=(s("386d"),{components:{geolocation:ht,questsList:Ht,usersList:ps},data:function(){return{type:"quest",subtype:null,results:{quests:null,designers:null,players:null},search:{text:"",limit:10,skip:0},user:{position:null},scrollInfo:{},findQuestWhenLocationIsKnown:!0,serverUrl:"https://api.graaly.com"}},mounted:function(){this.$route.params.subtype&&(this.subtype=this.$route.params.subtype),this.$route.params.type&&(this.type=this.$route.params.type),"around"!==this.subtype&&this.find()},methods:{selectType:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.type=e,t.subtype="none",s.next=4,t.find();case 4:case"end":return s.stop()}}),s)})))()},selectSubtype:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.subtype=e,t.search.text="",t.search.skip=0,s.next=5,t.find();case 5:case"end":return s.stop()}}),s)})))()},find:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("quest"!==e.type){t.next=5;break}return t.next=3,e.findQuests();case 3:t.next=14;break;case 5:if("player"!==e.type){t.next=11;break}return e.search.skip=0,t.next=9,e.findUser("player");case 9:t.next=14;break;case 11:return e.search.skip=0,t.next=14,e.findUser("designer");case 14:case"end":return t.stop()}}),t)})))()},findUser:function(e){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,!(t.search.text.length>3)){s.next=8;break}return t.subtype="keyword",t.$q.loading.show(),s.next=6,it.find(e,t.search.text);case 6:a=s.sent,a&&a.data?"player"===e?t.results.players=a.data:t.results.designers=a.data:t.displayNetworkIssueMessage();case 8:t.$q.loading.hide(),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),t.$q.loading.hide();case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()},loadOtherUsers:function(e,t){if(this.search.skip>=10){var s=this;it.find(this.type,this.search.text,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&("player"===type?s.results.players=s.results.players.concat(a.data):s.results.designers=s.results.designers.concat(a.data),t())}))}},findQuests:function(){var e=this;return o()(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!("keyword"!==e.subtype||e.search.text.length>3)){t.next=22;break}if(e.search.text.length>3&&(e.subtype="keyword"),e.$q.loading.show(),s=e.user.position,"keyword"!==e.subtype){t.next=11;break}return t.next=8,ot.find(e.search.text,s,0,10);case 8:a=t.sent,t.next=21;break;case 11:if("around"!==e.subtype){t.next=17;break}return t.next=14,ot.listNearest(s,0);case 14:a=t.sent,t.next=21;break;case 17:if("friends"!==e.subtype){t.next=21;break}return t.next=20,ot.listFriendQuests();case 20:a=t.sent;case 21:a&&a.data?("friends"===e.subtype?e.results.quests=e.formatRunResults(a.data):e.results.quests=a.data,e.search.skip=a.data.length,e.user.position&&(e.results.quests=e.results.quests.map((function(e){var t=6378.137,a=e.location.coordinates[1]*Math.PI/180-s.latitude*Math.PI/180,r=e.location.coordinates[0]*Math.PI/180-s.longitude*Math.PI/180,n=Math.sin(a/2)*Math.sin(a/2)+Math.cos(s.latitude*Math.PI/180)*Math.cos(e.location.coordinates[1]*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),o=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return e.distance=Math.floor(t*o),e})))):e.displayNetworkIssueMessage();case 22:e.$q.loading.hide(),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0),e.$q.loading.hide();case 29:case"end":return t.stop()}}),t,null,[[0,25]])})))()},loadOtherQuests:function(e,t){if(this.user.position&&this.search.skip>=10){var s=this;"around"===this.subtype?ot.listNearestSync(this.user.position,null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(a.data),t())})):"friends"===this.subtype?ot.listFriendQuestsync(null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(this.formatRunResults(a.data)),t())})):ot.findSync(this.search.text,this.user.position,null,this.search.skip,(function(e,a){s.search.skip+=s.search.limit,e&&t(e),a&&a.data&&a.data.length>0&&(s.results.quests=s.results.quests.concat(a.data),t())}))}},formatRunResults:function(e){for(var t=[],s=0;s<e.length;s++)t.push({questId:e[s].questId,picture:e[s].questData.picture,title:e[s].questData.title,location:{town:e[s].questData.town},playStatus:e[s].status?e[s].status:"succeeded",points:e[s].stars});return t},displayNetworkIssueMessage:function(){this.$q.dialog({title:this.$t("label.TechnicalProblem"),message:this.$t("label.TechnicalProblemNetworkIssue")})},onLocationSuccess:function(e){var t=this;return o()(r.a.mark((function s(){return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$set(t.user,"position",e.coords),!t.findQuestWhenLocationIsKnown){s.next=5;break}return t.findQuestWhenLocationIsKnown=!1,s.next=5,t.find();case 5:case"end":return s.stop()}}),s)})))()},onLocationError:function(e){e&&(this.user.position=null)},onScroll:function(e){this.scrollInfo=e},backToTheMap:function(){this.$router.back()}}}),eo=Xn,to=Object(_e["a"])(eo,Kn,Zn,!1,null,null,null),so=to.exports,ao=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("div",{staticClass:"background-dark q-pa-md"},[s("a",{staticClass:"float-right no-underline close-btn",attrs:{color:"grey"},on:{click:function(t){return e.$router.push("/home")}}},[s("q-icon",{staticClass:"subtitle1",attrs:{name:"close"}})],1),s("div",{staticClass:"title2 centered"},[e._v("Administration")])]),s("q-tabs",{staticClass:"bg-primary text-white",model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[s("q-tab",{attrs:{name:"validation",icon:"check_box",label:"Validation",default:""}}),s("q-tab",{attrs:{name:"rejected",icon:"sentiment_very_dissatisfied",label:"Rejected"}}),s("q-tab",{attrs:{name:"earnings",icon:"price",label:"Earnings"}}),s("q-tab",{attrs:{name:"statistics",icon:"stats",label:"Statistics"}}),s("q-tab",{attrs:{name:"limitations",icon:"stats",label:"Limitations"}})],1),s("q-separator"),s("q-tab-panels",{attrs:{animated:""},model:{value:e.adminTab,callback:function(t){e.adminTab=t},expression:"adminTab"}},[s("q-tab-panel",{attrs:{name:"validation"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.questsToValidate.items,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""},nativeOn:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("q-avatar",[t.thumb?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-item-section",{nativeOn:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?s("q-item-label",{attrs:{caption:""}},[s("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"unpublished"==t.status?s("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e(),"tovalidate"===t.status?s("q-item-label",{attrs:{caption:""}},[e._v("\n                UserId : "+e._s(t.authorUserId)),s("br"),e._v("\n                access : "+e._s(t.access)),s("br"),e._v("\n                "+e._s(t.isPremium?"premium":"individual")+"\n              ")]):e._e()],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{icon:"check"},on:{click:function(s){return e.validate(t.questId,t.version)}}})],1)],1)})),0===e.questsToValidate.items.length?s("q-item",[s("q-item-label",[e._v("No quest to validate")])],1):e._e()],2)],1),s("q-tab-panel",{attrs:{name:"rejected"}},[s("q-list",{attrs:{highlight:""}},[e._l(e.questsRejected.items,(function(t){return s("q-item",{key:t._id,nativeOn:{click:function(s){return e.$router.push("/quest/play/"+t.questId)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",[t.thumb?s("img",{attrs:{src:e.serverUrl+"/upload/quest/"+t.thumb}}):e._e(),t.thumb?e._e():s("img",{attrs:{src:"statics/profiles/noprofile.png"}})])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(e.getQuestTitle(t,!1)))]),"published"===t.status?s("q-item-label",{attrs:{caption:""}},[s("q-rating",{attrs:{readonly:"",value:t.rating&&t.rating.rounded?t.rating.rounded:null,color:"primary",max:5,size:"1rem"}}),e._v("\n                "+e._s(e.$t("label.PublishedSince"))+"\n                "+e._s(e._f("formatDate")(t.dateCreated,e.$store.state.user.language))+"\n              ")],1):e._e(),"published"!==t.status?s("q-item-label",{attrs:{caption:""}},[e._v("\n                "+e._s(e.$t("label.Unpublished"))+"\n              ")]):e._e()],1)],1)})),0===e.questsRejected.items.length?s("q-item",[s("q-item-label",[e._v("No quest rejected")])],1):e._e()],2)],1),s("q-tab-panel",{attrs:{name:"earnings"}},[e._v("\n        Eearnings of games:\n        "),s("q-list",{attrs:{highlight:""}},[e._l(e.earnings.items,(function(t){return s("q-item",{key:t.questId},[s("q-item-section",[t.title.fr?s("q-item-label",[e._v("\n                "+e._s(t.title.fr)+"\n              ")]):e._e(),!t.title.fr&&t.title.en?s("q-item-label",[e._v("\n                "+e._s(t.title.en)+"\n              ")]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v("\n                revenues:"+e._s(t.earnings)+" | QR codes used:"+e._s(t.tierEarnings)+" "),t.premiumPrice&&t.premiumPrice.manual?s("span",[e._v("(x"+e._s(t.premiumPrice.manual)+")")]):e._e()])],1)],1)})),0===e.games.items.length?s("q-item",[s("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1),s("q-tab-panel",{attrs:{name:"limitations"}},[e._v("\n        Published games with limitations:\n        "),s("q-list",{attrs:{highlight:""}},[e._l(e.limitations.items,(function(t){return s("q-item",{key:t.questId},[s("q-item-section",[t.title.fr?s("q-item-label",[e._v("\n                "+e._s(t.title.fr)+"\n              ")]):e._e(),!t.title.fr&&t.title.en?s("q-item-label",[e._v("\n                "+e._s(t.title.en)+"\n              ")]):e._e(),s("q-item-label",{attrs:{caption:""}},[s("span",{class:{"text-red":t.limitations.nbPlays<=t.nbPlayers}},[e._v("Crédits disponibles:"+e._s(t.limitations.nbPlays)+" | Parties jouées:"+e._s(t.nbPlayers))])])],1)],1)})),0===e.games.items.length?s("q-item",[s("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1),s("q-tab-panel",{attrs:{name:"statistics"}},[e._v("\n        Best games of the month:\n        "),s("q-list",{attrs:{highlight:""}},[e._l(e.games.items,(function(t){return s("q-item",{key:t._id.questId},[s("q-item-section",[t._id.questData.fr?s("q-item-label",[e._v(e._s(t._id.questData.fr))]):e._e(),!t._id.questData.fr&&t._id.questData.en?s("q-item-label",[e._v(e._s(t._id.questData.en))]):e._e(),s("q-item-label",{attrs:{caption:""}},[e._v("Monthly:"+e._s(t.monthNb)+" Weekly:"+e._s(t.weekNb)+" rating:\n                "+e._s(t.rating))])],1)],1)})),0===e.games.items.length?s("q-item",[s("q-item-label",[e._v("No game played during 1 month")])],1):e._e()],2)],1)],1)],1)])},ro=[],no={ListQuestsToValidate:function(){return Re().get("admin/quests/tovalidate")},ListQuestsRejected:function(){return Re().get("admin/quests/rejected")},ListTowns:function(){return Re().get("admin/towns")},ListBestGames:function(){return Re().get("admin/bestgames")},ListEarnings:function(){return Re().get("admin/earnings")},ListLimitations:function(){return Re().get("admin/limitations")},publish:function(e){return Re().get("admin/quests/publish/"+e)},CreateTown:function(e){return Re().post("admin/town/add/",e).catch((function(e){return console.log(e.request)}))},reject:function(e){return Re().get("admin/quests/reject/"+e)},uploadPlaceImage:function(e){return Re().post("/admin/town/place/picture/upload",e,{timeout:6e4,headers:{"Content-Type":"multipart/form-data"}}).catch((function(e){return console.log(e.request)}))}},oo={data:function(){return{questsToValidate:{items:[]},questsRejected:{items:[]},towns:{items:[]},games:{items:[]},earnings:{items:[]},limitations:{items:[]},adminTab:"validation",serverUrl:"https://api.graaly.com"}},mounted:function(){this.loadQuestsToValidate(),this.loadQuestsRejected(),this.loadStatistics(),this.loadEarnings(),this.loadLimitations()},methods:{loadQuestsToValidate:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListQuestsToValidate();case 2:s=t.sent,e.questsToValidate.items=s.data.quests;case 4:case"end":return t.stop()}}),t)})))()},loadTowns:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListTowns();case 2:s=t.sent,e.towns.items=s.data.towns;case 4:case"end":return t.stop()}}),t)})))()},loadStatistics:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListBestGames();case 2:s=t.sent,e.games.items=s.data.games;case 4:case"end":return t.stop()}}),t)})))()},loadEarnings:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListEarnings();case 2:s=t.sent,e.earnings.items=s.data.earnings;case 4:case"end":return t.stop()}}),t)})))()},loadLimitations:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListLimitations();case 2:s=t.sent,e.limitations.items=s.data.limitations;case 4:case"end":return t.stop()}}),t)})))()},validate:function(e,t){var s=this;return o()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s.$router.push("/admin/validate/"+e+"/version/"+t);case 1:case"end":return a.stop()}}),a)})))()},loadQuestsRejected:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.ListQuestsRejected();case 2:s=t.sent,e.questsRejected.items=s.data.quests;case 4:case"end":return t.stop()}}),t)})))()},getQuestTitle:function(e,t){return e&&e.title?this.$store.state.user.language&&e.title[this.$store.state.user.language]?e.title[this.$store.state.user.language]:e.title[Object.keys(e.title)[0]]+(t?' <img class="image-and-text-aligned" src="statics/icons/game/flag-'+Object.keys(e.title)[0]+'.png" />':""):this.$t("label.NoTitle")}}},io=oo,lo=Object(_e["a"])(io,ao,ro,!1,null,null,null),co=lo.exports,uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[e.quest.title?s("div",{staticClass:"page-content top-padding-middle"},[s("p",[e._v("\n      Validation of the quest "),s("strong",[e._v(e._s(e.quest.title))])]),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"positive",label:"Validate"},on:{click:function(t){return e.publish()}}})],1),s("p",[s("q-btn",{staticClass:"full-width",attrs:{big:"",color:"negative",label:"Reject"},on:{click:function(t){return e.reject()}}})],1),s("p",[e._v("\n      if you reject, do not forget to contact the owner to explain why the\n      quest is rejected\n    ")])]):e._e()])},po=[],mo={data:function(){return{quest:{},serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getQuest(e.$route.params.questId,e.$route.params.version);case 2:case"end":return t.stop()}}),t)})))()},methods:{getQuest:function(e,t){var s=this;return o()(r.a.mark((function a(){var n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,ot.getById(e,t);case 2:n=a.sent,s.quest=n.data;case 4:case"end":return a.stop()}}),a)})))()},publish:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.publish(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},reject:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.reject(e.$route.params.questId);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()}}},ho=mo,fo=Object(_e["a"])(ho,uo,po,!1,null,null,null),go=fo.exports,bo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"page-content top-padding-middle"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.configureTown()}}},[s("q-input",{attrs:{type:"text",label:"Name","bottom-slots":"",error:e.$v.form.fields.name.$error,"error-message":"Please enter a name"},on:{blur:e.$v.form.fields.name.$touch},model:{value:e.form.fields.name,callback:function(t){e.$set(e.form.fields,"name",t)},expression:"form.fields.name"}}),s("q-input",{attrs:{type:"text",label:"Zip Code","bottom-slots":"",error:e.$v.form.fields.zipcode.$error,"error-message":"Please enter a zip code"},on:{blur:e.$v.form.fields.zipcode.$touch},model:{value:e.form.fields.zipcode,callback:function(t){e.$set(e.form.fields,"zipcode",t)},expression:"form.fields.zipcode"}}),s("q-select",{attrs:{label:"Country",options:[{label:"France",value:"fr"}],"emit-value":"","map-options":""},model:{value:e.form.fields.country,callback:function(t){e.$set(e.form.fields,"country",t)},expression:"form.fields.country"}}),s("div",[s("q-icon",{attrs:{name:"explore"}}),s("p",[e._v("GPS location bottom left")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location1.lng,callback:function(t){e.$set(e.form.fields.location1,"lng",t)},expression:"form.fields.location1.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location1.lat,callback:function(t){e.$set(e.form.fields.location1,"lat",t)},expression:"form.fields.location1.lat"}})],1)])],1),s("div",[s("q-icon",{attrs:{name:"explore"}}),s("p",[e._v("GPS location top right")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:e.form.fields.location2.lng,callback:function(t){e.$set(e.form.fields.location2,"lng",t)},expression:"form.fields.location2.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:e.form.fields.location2.lat,callback:function(t){e.$set(e.form.fields.location2,"lat",t)},expression:"form.fields.location2.lat"}})],1)])],1),e._l(e.form.fields.places,(function(t,a){return s("div",{key:a},[s("q-icon",{attrs:{name:"place"}}),s("p",[e._v("Place")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("q-input",{attrs:{type:"text",label:"Name"},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"place.name"}})],1),s("div",{staticClass:"col"},[e.isIOs?e._e():s("div",[""===t.picture?s("q-btn",{attrs:{icon:"cloud_upload"},on:{click:function(t){e.$refs["placepicture"+a].click()}}}):e._e(),s("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*",hidden:""},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1),e.isIOs?s("div",[s("q-icon",{attrs:{name:"cloud_upload"}}),s("input",{ref:"placepicture"+a,refInFor:!0,attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.uploadPlacePicture(a,t)}}})],1):e._e(),""!==t.picture?s("div",[s("img",{staticStyle:{width:"50px"},attrs:{src:e.serverUrl+"/upload/town/place/"+t.picture}})]):e._e()])]),s("q-select",{attrs:{label:"Select",options:[{label:"Remarkable place",value:"remarkable"},{label:"Cimetery",value:"cimetary"},{label:"Shop",value:"shop"}],"emit-value":"","map-options":""},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"place.type"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{attrs:{type:"text",label:"Longitude"},model:{value:t.location.lng,callback:function(s){e.$set(t.location,"lng",s)},expression:"place.location.lng"}})],1),s("div",{staticClass:"col"},[s("q-input",{attrs:{type:"text",label:"Latitude"},model:{value:t.location.lat,callback:function(s){e.$set(t.location,"lat",s)},expression:"place.location.lat"}})],1)])],1)})),s("q-btn",{attrs:{clear:""},on:{click:e.addPlace}},[e._v("Add a place")]),s("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:e.configureTown}},[e._v("Save")])],2)])])},vo=[],wo={data:function(){return{form:{fields:{name:"",zipcode:"",country:"fr",location1:{lat:"",lng:""},location2:{lat:"",lng:""},places:[]}},isIOs:nt.isIOS(),serverUrl:"https://api.graaly.com"}},mounted:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.addPlace();case 1:case"end":return t.stop()}}),t)})))()},methods:{configureTown:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,no.CreateTown(e.form.fields);case 2:e.$router.push("/admin");case 3:case"end":return t.stop()}}),t)})))()},addPlace:function(){this.form.fields.places.push({name:"",type:"",location:{lng:"",lat:""},picture:""})},uploadPlacePicture:function(e,t){var s=this;return o()(r.a.mark((function a(){var n,o,i;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s.$q.loading.show(),n=t.target.files,n[0]){a.next=4;break}return a.abrupt("return");case 4:return o=new FormData,o.append("image",n[0]),a.next=8,no.uploadPlaceImage(o);case 8:i=a.sent,i&&i.hasOwnProperty("data")&&(s.form.fields.places[e].picture=i.data.file,s.$q.loading.hide());case 10:case"end":return a.stop()}}),a)})))()}},validations:{form:{fields:{name:{required:Kt["required"]},zipcode:{required:Kt["required"]}}}}},yo=wo,qo=Object(_e["a"])(yo,bo,vo,!1,null,null,null),ko=qo.exports,xo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper background-map"},[s("div",{staticClass:"page-content",staticStyle:{"padding-bottom":"100px"}},[e._m(0),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"centered title2 q-mb-lg"},[e._v(e._s(e.$t("label.Welcome")))]),s("form",{staticClass:"q-pa-lg",on:{submit:function(t){return t.preventDefault(),e.formSubmit()}}},["generic"===e.step?s("q-input",{attrs:{outlined:"",label:e.$t("label.YourName"),maxlength:"30","bottom-slots":"",error:e.$v.form.name.$error,"error-message":e.$t("label.PleaseEnterYourName"),"test-id":"name"},on:{blur:e.$v.form.name.$touch},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}):e._e(),"generic"===e.step?s("q-input",{attrs:{outlined:"",type:"email",label:e.$t("label.YourEmail"),"bottom-slots":"",error:e.$v.form.email.$error,"error-message":e.$v.form.email.email?e.$t("label.PleaseEnterYourEmailAddress"):e.$t("label.PleaseEnterAValidEmailAddress")},on:{blur:function(t){e.$v.form.email.$touch,e.checkEmail()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):e._e(),"generic"===e.step?s("q-input",{attrs:{outlined:"",type:"password",label:e.$t("label.YourPassword"),"bottom-slots":"",error:e.$v.form.password.$error,"error-message":e.$v.form.password.checkPasswordComplexity?e.$v.form.password.minLength?e.$t("label.PleaseEnterYourPassword"):e.$t("label.YourPasswordMustBe8digitsLength"):e.$t("label.PasswordComplexityRule"),"test-id":"password"},on:{blur:e.$v.form.password.$touch},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourSex"),options:e.sexes,"emit-value":"","map-options":"","bottom-slots":"","test-id":"sex"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourAge"),options:e.ages,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.age.$error,"error-message":e.$t("label.PleaseSelectYourAge"),"test-id":"age"},on:{blur:e.$v.form.age.$touch},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}}):e._e(),"location"===e.step?s("q-select",{attrs:{outlined:"",label:e.$t("label.YourCountry"),options:e.countries,"emit-value":"","map-options":"","bottom-slots":"",error:e.$v.form.country.$error,"error-message":e.$t("label.PleaseSelectYourCountry"),"test-id":"country"},on:{blur:e.$v.form.country.$touch},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}}):e._e(),"location"===e.step?s("q-input",{attrs:{outlined:"",label:e.$t("label.YourZipCode"),"bottom-slots":"",error:e.$v.form.zipCode.$error,"error-message":e.$t("label.PleaseEnterYourZipCode"),"test-id":"zip"},on:{blur:e.$v.form.zipCode.$touch},model:{value:e.form.zipCode,callback:function(t){e.$set(e.form,"zipCode",t)},expression:"form.zipCode"}}):e._e(),"location"===e.step?s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("q-checkbox",{attrs:{dark:"","test-id":"terms"},model:{value:e.form.terms,callback:function(t){e.$set(e.form,"terms",t)},expression:"form.terms"}})],1),s("div",{staticClass:"col secondary-font-small"},[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeTheTermsAndConditions"))}}),e.$v.form.terms.$error?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeTheTermsAndConditions")))])]):e._e()])]):e._e(),"location"===e.step?s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[s("q-checkbox",{attrs:{dark:"","test-id":"privacy"},model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}})],1),s("div",{staticClass:"col secondary-font-small"},[s("span",{domProps:{innerHTML:e._s(e.$t("label.IAgreeThePrivacyPolicy"))}}),e.$v.form.privacy.$error?s("div",{staticClass:"q-field-bottom"},[s("div",{staticClass:"q-field-error"},[e._v(e._s(e.$t("label.PleaseAgreeThePrivacyPolicy")))])]):e._e()])]):e._e(),"validation"===e.step?s("div",[s("p",{attrs:{"test-id":"enter-code"}},[e._v(e._s(e.$t("label.EnterTheCodeYouReceivedByEmail")))]),s("q-input",{attrs:{label:e.$t("label.Code")},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"validation"===e.step?s("p",{staticClass:"text-right q-mt-md q-mb-md"},[s("a",{on:{click:function(t){return e.generateANewCode()}}},[e._v(e._s(e.$t("label.NewCode")))])]):e._e(),"firstusage"===e.step?s("p",{staticClass:"text-center q-mt-md q-mb-md"},[s("img",{attrs:{src:"statics/icons/game/discovery.png"}})]):e._e(),s("p",{staticClass:"text-center multiple-btn margin-size-3 q-mt-lg"},[s("q-btn",{staticClass:"glossy large-btn",attrs:{disabled:e.formDisabled,color:"primary",label:e.$t("label.Subscribe"),loading:e.submitting,type:"submit"}})],1),s("div",{staticClass:"centered q-mt-sm q-mb-lg"},[s("a",{on:{click:function(t){return e.goToSignIn()}}},[e._v(e._s(e.$t("label.IAlreadyHaveAnAccount")))])]),s("p")],1)])])])},Co=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"centered q-pt-lg q-pb-md"},[s("img",{staticClass:"logo-top",attrs:{src:"statics/images/logo/logo-home.png"}})])}],So={data:function(){return{form:{email:"",name:"",sex:"",age:"",country:"",zipCode:"",password:"",code:"",terms:!1,privacy:!1},showPrivateBox:!1,submitting:!1,formDisabled:!0,step:this.$route.params.step?this.$route.params.step:"generic",countries:"fr"===this.$i18n.locale?cn:un,sexes:[{label:this.$t("label.Male"),value:"male"},{label:this.$t("label.Female"),value:"female"}],ages:[{label:"13 - 25",value:"13-25"},{label:"26 - 39",value:"26-39"},{label:"40 - 49",value:"40-49"},{label:"50 - 64",value:"50-64"},{label:"65 +",value:"65+"}]}},mounted:function(){nt.clearAllRunningProcesses()},methods:{formSubmit:function(){var e=this;return o()(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?8:"validation"===t.t0?22:"firstusage"===t.t0?29:31;break;case 3:return e.$v.form.password.$touch(),e.$v.form.email.$touch(),e.$v.form.name.$touch(),e.$v.form.password.$error||e.$v.form.email.$error||e.$v.form.name.$error||(e.step="location"),t.abrupt("break",31);case 8:if(e.$v.form.country.$touch(),e.$v.form.zipCode.$touch(),e.$v.form.age.$touch(),e.$v.form.terms.$touch(),e.$v.form.privacy.$touch(),e.$v.form.country.$error||e.$v.form.zipCode.$error||e.$v.form.age.$error||e.$v.form.terms.$error||e.$v.form.privacy.$error){t.next=21;break}return s={name:e.form.name,email:e.form.email,sex:e.form.sex,age:e.form.age,password:e.form.password,zipcode:e.form.zipCode,country:e.form.country,language:e.$i18n.locale},e.submitting=!0,t.next=18,Le.createAccount(s);case 18:a=t.sent,a.status&&200===a.status&&a.data&&a.data.user?(window.localStorage.setItem("jwt",a.data.user.jwt),Me.a.defaults.headers.common["Authorization"]="Bearer ".concat(a.data.user.jwt),e.openHome()):vt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 21:return t.abrupt("break",31);case 22:return t.next=24,Le.validateAccount(e.form.email,e.form.code);case 24:return n=t.sent,e.submitting=!0,n.status&&200===n.status?e.openHome():n.data&&"You have tries too much codes"===n.data.message?vt(e.$t("label.YourAccountIsBlocked"),"warning"):vt(e.$t("label.IncorrectCodePleaseRetry"),"warning"),e.submitting=!1,t.abrupt("break",31);case 29:return e.openHome(),t.abrupt("break",31);case 31:case"end":return t.stop()}}),t)})))()},openHome:function(){var e="/home";this.$route.query.hasOwnProperty("redirect")&&(e=this.$route.query.redirect),this.$router.push(e)},checkUserIsExisting:function(e){return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Le.checkEmail(e);case 2:if(s=t.sent,!(s&&s.data&&s.data.hasOwnProperty("existing")&&!0===s.data.existing)){t.next=7;break}return t.abrupt("return",{status:s.data.status});case 7:if(!(s&&s.data&&s.data.hasOwnProperty("existing")&&!1===s.data.existing)){t.next=11;break}return t.abrupt("return",{status:"missing"});case 11:return t.abrupt("return",{error:"technical issue"});case 12:case"end":return t.stop()}}),t)})))()},checkEmail:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.form.email.$error){t.next=5;break}return t.next=3,e.checkUserIsExisting(e.form.email);case 3:s=t.sent,s&&s.status?"active"===s.status?vt(e.$t("label.EmailAlreadyUsed"),"error"):"new"===s.status?e.$router.push("/user/createAccount/validation"):"blocked"===s.status?vt(e.$t("label.YourAccountIsBlocked"),"warning"):e.formDisabled=!1:vt(e.$t("label.ErrorStandardMessage"),"error");case 5:case"end":return t.stop()}}),t)})))()},backAction:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.step,t.next="generic"===t.t0?3:"location"===t.t0?5:"validation"===t.t0?7:10;break;case 3:return e.$router.push("/user/login"),t.abrupt("break",10);case 5:return e.step="generic",t.abrupt("break",10);case 7:return t.next=9,e.goToSignIn();case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}}),t)})))()},goToSignIn:function(){var e=this;return o()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/user/login");case 1:case"end":return t.stop()}}),t)})))()},generateANewCode:function(){var e=this;return o()(r.a.mark((function t(){var s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitting=!0,t.next=3,Le.generateANewValidationCode(e.form.email);case 3:s=t.sent,200===s.status?vt(e.$t("label.ANewCodeHasBeenSent"),"info"):vt(e.$t("label.ErrorStandardMessage"),"error"),e.submitting=!1;case 6:case"end":return t.stop()}}),t)})))()}},validations:{form:{email:{required:Kt["required"],email:Kt["email"]},name:{required:Kt["required"]},country:{required:Kt["required"]},zipCode:{required:Kt["required"]},age:{required:Kt["required"]},terms:{sameAs:Object(Kt["sameAs"])((function(){return!0}))},privacy:{sameAs:Object(Kt["sameAs"])((function(){return!0}))},password:{required:Kt["required"],minLength:Object(Kt["minLength"])(8),checkPasswordComplexity:Vr}}}},_o=So,To=Object(_e["a"])(_o,xo,Co,!1,null,null,null),Po=To.exports,Io=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("img",{staticStyle:{width:"100%"},attrs:{src:"/statics/icons/game/oops.png"}}),"upgraderequired"===e.errorType&&e.isHybrid?s("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.UpgradeRequired"))+"\n  ")]):e._e(),"upgraderequired"!==e.errorType||e.isHybrid?e._e():s("h3",{staticClass:"centered"},[e._v("\n    "+e._s(e.$t("label.RefreshCacheRequired"))+"\n  ")]),null===e.errorType?s("h3",[e._v("\n    "+e._s(e.$t("label.SorryAnErrorOccurs"))+"\n  ")]):e._e(),null!==e.errorMessage?s("p",[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),null===e.errorType?s("p",[e._v(e._s(e.$t("label.PleaseContactTheSupport")))]):e._e()])},$o=[],Ao={data:function(){return{errorMessage:null,errorType:null,isHybrid:window.cordova}},mounted:function(){this.$store.state.hasOwnProperty("errorMessage")&&(this.errorMessage=this.$store.state.errorMessage),this.$route.params.errorType&&(this.errorType=this.$route.params.errorType)}},Oo=Ao,Mo=(s("17eb"),Object(_e["a"])(Oo,Io,$o,!1,null,"6e5dc249",null)),zo=Mo.exports,No=[{path:"/",component:Ke,children:[{path:"",name:"none",redirect:"/home",meta:{requiresAuth:!0}},{path:"firstusage",name:"firstusage",redirect:"/user/login",meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang",name:"teamplayold",component:pr,meta:{requiresAuth:!1}},{path:"teamplay/:id(\\w{24})/:lang/:option/:teamId",name:"teamplay",component:pr,meta:{requiresAuth:!1}},{path:"home",name:"home",component:vs,meta:{requiresAuth:!0}},{path:"map",name:"map",component:Ss,meta:{requiresAuth:!0}},{path:"quest/play/:id(\\w{24})",name:"playhome",component:Ws,meta:{requiresAuth:!0}},{path:"quest/play/:questId(\\w{24})/version/:version/step/:stepId/:lang",name:"playstep",component:Xa,meta:{requiresAuth:!0}},{path:"quest/:questId(\\w{24})/end",name:"playend",component:or,meta:{requiresAuth:!0}},{path:"quest/create",name:"build",redirect:"/quest/create/welcome",meta:{requiresAuth:!0}},{path:"quest/create/welcome",name:"buildhome",component:Cr,meta:{requiresAuth:!0}},{path:"quest/builder/:questId(\\w{24})",name:"builder",component:vr,meta:{requiresAuth:!0}},{path:"quest/settings/:questId(\\w{24})",name:"buildsettings",component:Hr,meta:{requiresAuth:!0}},{path:"user/createAccount/:step",name:"signup",component:Po,meta:{requiresAuth:!1}},{path:"user/login",name:"signin",component:Xr,meta:{requiresAuth:!1}},{path:"user/logout",name:"signout",component:nn,meta:{requiresAuth:!0}},{path:"user/:id/quests/:type",name:"quests",component:_n,meta:{requiresAuth:!0}},{path:"user/:id/friends",name:"friends",component:On,meta:{requiresAuth:!0}},{path:"user/:id/badges",name:"badges",component:Un,meta:{requiresAuth:!0}},{path:"search/:type/:subtype",name:"search",component:so,meta:{requiresAuth:!0}},{path:"user/ranking/:type/:subtype",name:"ranking",component:yn,meta:{requiresAuth:!0}},{path:"profile/:id",name:"profile",component:Jn,meta:{requiresAuth:!0}},{path:"user/updateprofile",name:"updateprofile",component:hn,meta:{requiresAuth:!0}},{path:"admin",name:"admin",component:co,meta:{requiresAuth:!0}},{path:"admin/validate/:questId(\\w{24})/version/:version",name:"adminvalidate",component:go,meta:{requiresAuth:!0}},{path:"admin/minigames/builder",name:"adminminigame",component:ko,meta:{requiresAuth:!0}},{path:"error/:errorType",name:"error",component:zo,meta:{requiresAuth:!1}}]},{path:"*",component:function(){return s.e(2).then(s.bind(null,"ee5d"))}}];l["a"].use(Ye["a"]);var Fo=new Ye["a"]({mode:"hash",base:"",scrollBehavior:function(){return{y:0}},routes:No}),Do=Fo,Ro=function(){return Lo.apply(this,arguments)};function Lo(){return Lo=o()(r.a.mark((function e(){var t,s,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Ue){e.next=6;break}return e.next=3,Ue({Vue:l["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Ue;case 7:if(t=e.t0,"function"!==typeof Do){e.next=14;break}return e.next=11,Do({Vue:l["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=Do;case 15:return s=e.t1,t.$router=s,a={router:s,store:t,render:function(e){return e(Pe)}},a.el="#q-app",e.abrupt("return",{app:a,store:t,router:s});case 20:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}var jo=s("9483");Object(jo["a"])("service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Eo=s("dc21"),Qo=s("e594");Eo["a"]({dsn:"https://1817b5e5250c40949ba1b2a25e0f2296@o426546.ingest.sentry.io/5368714",integrations:[new Qo["a"]({Vue:l["a"],attachProps:!0})]});var Bo,Uo=s("c1df"),Yo=s.n(Uo),Ho=function(e){var t=e.Vue;t.filter("formatDate",(function(e,t){if(Yo.a.locale(t),e)return Yo()(String(e)).fromNow()}))},Go=s("a925"),Wo=s("3013"),Vo=s.n(Wo),Jo=function(e){var t=e.app,s=e.Vue;s.use(Go["a"]),t.i18n=new Go["a"]({locale:"fr",messages:Vo.a}),Bo=t.i18n},Ko=s("9224"),Zo=function(e){e.app;var t=e.router;e.Vue;t.beforeEach(function(){var e=o()(r.a.mark((function e(t,s,a){var n,o,i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.meta.hasOwnProperty("requiresAuth")&&!t.meta.requiresAuth){e.next=13;break}if(!navigator.connection||!navigator.connection.type||"undefined"===typeof Connection||navigator.connection.type!==Connection.NONE){e.next=7;break}Ue.state.user||(Ue.state.user={name:"Stranger",email:"-",picture:"statics/icons/game/profile-big.png",sex:"male",age:"40-49",language:"fr",score:0,points:0,coins:100,status:"active",rankings:{world:99999999,town:99999999},level:1,location:{postalCode:"75000",country:"FRA",geometry:{coordinates:[5.7165413,45.18942980000001],type:"Point"}},isAdmin:!1,story:{step:17,status:"new"}}),a(),e.next=11;break;case 7:return e.next=9,Le.getAccount();case 9:n=e.sent,n&&n.data&&n.data.name?(o=Ko.version,n.data.clientSupportedVersion&&nt.compareVersions(n.data.clientSupportedVersion,o)>0?a({path:"/error/upgraderequired"}):(Ue.state.user=n.data,a())):Ue.state.user?n&&n.status&&200!==n.status?(401===n.status?vt(Bo.t("label.SessionExpired"),"error"):vt(Bo.t("label.AuthCheckError"),"error"),a({path:"/user/login",query:"/"===s.path?null:{redirect:t.fullPath}})):a():(i=Ae["get"]("firstusage"),i&&"ok"===i?a({path:"/user/login",query:"/"===s.path?null:{redirect:t.fullPath}}):(Ae["set"]("firstusage","ok",{expires:36500,secure:!0}),a({path:"/firstusage"})));case 11:e.next=14;break;case 13:a();case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("Error in RouterAuthentication:",e.t0),a();case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,s,a){return e.apply(this,arguments)}}())},Xo=function(e){var t=e.router;document.addEventListener("deviceready",(function(){if(window.hasOwnProperty("cordova")){if(!universalLinks)throw new Error("Required plugin cordova-plugin-deeplinks not found (universalLinks variable missing)");universalLinks.subscribe(null,(function(e){if(e.hash){var s=e.hash.split("/");"quest"===s[1]&&"play"===s[2]&&t.push("/quest/play/"+s[3])}}))}}),!1)},ei=function(e){var t=e.Vue;t.use(qs,{load:{key:"AIzaSyDPcuabMP6UutEiabzd_CYaozuV5__DJaA",libraries:"places"}})},ti=s("1dce"),si=s.n(ti),ai=function(e){var t=e.Vue;t.use(si.a)};function ri(){return ni.apply(this,arguments)}function ni(){return ni=o()(r.a.mark((function e(){var t,s,a,n,o,i,c,u,d;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ro();case 2:t=e.sent,s=t.app,a=t.store,n=t.router,o=!0,i=function(e){o=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[void 0,Ho,Zo,Xo,ei,Jo,ai],d=0;case 11:if(!(!0===o&&d<u.length)){e.next=29;break}if("function"===typeof u[d]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[d]({app:s,router:n,store:a,Vue:l["a"],ssrContext:null,redirect:i,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:d++,e.next=11;break;case 29:if(!1!==o){e.next=31;break}return e.abrupt("return");case 31:new l["a"](s);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),ni.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&s.e(0).then(s.t.bind(null,"a0db",7)),ri()},3:function(e,t){},3013:function(e,t){var s="https://graaly.com",a="sales@graaly.com",r={privacy:{en:s+"/privacy-policy/",fr:s+"/fr/confidentialite/"},terms:{en:s+"/terms/",fr:s+"/fr/cgu/"}};e.exports={en:{color:{red:"Red",green:"Green",blue:"Blue",black:"Black",white:"White",gray:"Gray",pink:"Pink",purple:"Purple",orange:"Orange",yellow:"Yellow",brown:"Brown"},news:{newQuestWon:"Has won the game <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"Has created the game <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Your game <a href='/#/quest/play/{questId}'>{quest}</a> will be published soon",challenge:"You are challenged on game <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"The score of the games you run during the next 3 days is doubled",rewardx2:"Energy x 2",rewardx2Desc:"The energy you win during the next 3 days is doubled",infinitehint:"Unlimited hints",infinitehintDesc:"You have unlimited hints in games during 1 day","100coins":"+100 energy","100coinsDesc":"You win +100 extra energy","10coins":"+10 energy","10coinsDesc":"You win +10 extra energy"},stepType:{ImageAndText:"Picture & text",ImageAndTextDesc:"A background image and some text",Video:"Video & text",VideoDesc:"A video",NewObject:"New object",NewObjectDesc:"Add a new object in the inventory",FindALocation:"Geolocation",FindALocationDesc:"Head players to a location",ChoiceQuestion:"Multiple choice questions",ChoiceQuestionDesc:"Check the right answer in a texts or images list",TextQuestion:"Textual answer",TextQuestionDesc:"Question and request a textual answer",FindTheCode:"Keypad code",FindTheCodeDesc:"Player has to find a code",FindTheColorCode:"Color code",FindTheColorCodeDesc:"Player has to find the color code",FindTheImageCode:"Code with images",FindTheImageCodeDesc:"Player has to find the code based on images",ImageOverFlow:"superimpose image and camera",ImageOverFlowDesc:"superimpose transparent image and camera flow",JigsawPuzzle:"Jigsaw Puzzle",JigsawPuzzleDesc:"Play a jigsaw puzzle based on your picture",Memory:"Memory",MemoryDesc:"Find the similar pictures",FindAnItem:"Search in a picture",FindAnItemDesc:"Player has to touch a part of your picture",UseAnItem:"Use an item",UseAnItemDesc:"Player use an item of his inventory on a part of a picture",LocateItemAR:"Augmented reality",LocateItemARDesc:"Player has to find an geolocated item, visible on his smartphone when he is near.",LocateMarker:"Scan a QR Code",LocateMarkerDesc:"Player has to find a QR code.",GraalyCharacter:"Character",GraalyCharacterDesc:"Make a character speak",EndOfChapter:"End of chapter",EndOfChapterDesc:"This transition send player to next chapter",TriggerEvent:"Graaly -> your material",TriggerEventDesc:"Graaly physical a physical action (using an electronic board)",WaitForEvent:"Your material -> Graaly",WaitForEventDesc:"A physical action activate a step (using an electronic card)",HelpStep:"Help page",HelpStepDesc:"How to use Graaly, presentation of the buttons for the players.",PortraitRobot:"Composite picture - BETA",PortraitRobotDesc:"Create suspect face based on face items",PhoneCall:"Phone call - BETA",PhoneCallDesc:"Launch a phone call to a defined number",Binocular:"Binoculars - BETA",BinocularDesc:"Search in a picture using binoculars"},layersForMarkers:{Magnifier:"Magnifier",CodeScanner:"Code scanner"},language:{en:"English",fr:"French"},status:{published:"published",draft:"draft",old:"old",tovalidate:"under validation",unpublished:"unpublished",rejected:"rejected",new:"new",used:"used"},story:{hint:"Hint: <br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!"},iotObjects:{keypad:"Keypad",joystick:"Joystick",distance:"Distance",pot:"Potentiometers",lcd:"LCD display",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Chest",button:"Button",relay:"Relay"},days:{day0:"Sunday",day1:"Monday",day2:"Tuesday",day3:"Wednesday",day4:"Thursday",day5:"Friday",day6:"Saturday"},label:{shortLang:"en",letsGo:"Let's Go!",YourEmail:"Your email",PleaseEnterYourEmailAddress:"Please enter your email address",PleaseEnterAValidEmailAddress:"Please enter a valid email address",orSignInWith:"Or sign-in with",IncorrectLoginPleaseRetry:"Incorrect login or password, please try again!",ForgottenPassword:"Forgotten password?",YourPassword:"Your password",tellUsAboutYou:"Tell us about you!",HowWeUseYourData:"How we use your data",Male:"Man",Female:"Woman",YourName:"Your name",YourSex:"Sex",YourAge:"Age",BackToMap:"Back",PleaseEnterYourName:"Please enter your name",YourCountry:"Your country",PleaseSelectYourCountry:"Please select your country",YourZipCode:"Your zip code",PleaseEnterYourZipCode:"Please enter your zip code (used to list the games near your location)",PleaseEnterYourPassword:"Please enter your password",EnterTheCodeYouReceivedByEmail:"Enter the code you received by email (It can takes up to 5 minutes)",IncorrectCodePleaseRetry:"Incorrect code, please try again!",SignOutInProgress:"Sign-out in progress ...",ErrorStandardMessage:"An error has occured, please check your network and contact the support if the problem occurs again!",YourAccountIsBlocked:"Your account is blocked. Please try again oin one hour",YourNewPassword:"Your new password",NewCode:"Get a new code",ANewCodeHasBeenSent:"A new code has been sent",YourPasswordMustBe8digitsLength:"Your password must be at least 8 digits long",PasswordComplexityRule:"Your password must contain at least 1 Uppercase Letter and 1 number",YourAccountIsNowValidated:"Your account is now validated",IfYouUseGraalyForTheFirstTime:"Welcome to Graaly! If you are using Graaly for the first time, we advise you to follow the short tutorial (5 min.)",YourScore:"Your score",YourRevenues:"Your earnings",QuestsSuccessful:"Successful games",QuestsCreated:"Created games",CreateANewQuest:"Create a new game",PublishedSince:"Publish",Unpublished:"Unpublished",NoQuestCreated:"No game created",NoQuestPlayed:"No game played",NoQuestPlayedLong:"No game played. To play a game, return to the home page!",PlayedOn:"Played",Succeeded:"Succeeded!",ContinueThisQuest:"You have not finished it. Continue?",MyProfile:"My profile",News:"News",Edit:"Edit",EditYourInformations:"Edit my informations",emailExample:"your.name@mailbox.com",Save:"Save",ChangeYourPassword:"Change my password",CurrentPassword:"Current password",NewPassword:"New password",AccountModifiedLong:"Your account has been modified. If you have modified your email address, a new message has been sent to confirm this email address.",SignOut:"Sign-out",HowTo:"How to ?",ReachScoreOf:"Reach a score of {score} to unlock new games",MyLevel:"My level",Difficulty:"Difficulty",Normal:"Normal",Easy:"Easy",Hard:"Hard",VeryHard:"Very hard",Play:"Play",CouldNotRetrieveYourPosition:"This part of the game requires your location, but it could not be retrieved.",PossibleReasons:"Possible reasons:",ClosedEnvironment:"Weak GPS signal: move to an open area outdoors",GeolocationDisabled:"Geolocation is disabled on your device",HowToActivateGeolocationOnChrome:"Go to <strong>system settings</strong>, then in <strong>Security and Location</strong>, then <strong>Location</strong>, and activate the option <strong>Enabled</strong>. This may slightly change depending on your Android version.",HowToActivateGeolocationOnIOs:"Go to <strong>Settings</strong>, then in <strong>Privacy</strong>, then <strong>Location services</strong>, and activate the option <strong>Location services</strong> and check that location is enabled for the Graaly application in the list below. This may slightly change depending on your IOS version.",Author:"Author",nbPointsToWin:"Win {nb} points",SolveThisQuest:"Play",ContinueTheQuest:"Continue the game",Language:"Language",StartingPoint:"Location",Duration:"Duration",minutes:"minute(s)",Languages:"Languages",ScrollForMoreDetails:"Read more",km:"km",NoQuestForThisSearch:"No game for this search",NoPlayerForThisSearch:"No player for this search",NoDesignerForThisSearch:"No designer for this search",WhyDontYouCreateAQuest:"Why don't you create a game?",Inventory:"Inventory",InventoryUsage:"Touch an object to use it",InventoryZoom:"Touch an objet to zoom",noItemInInventory:"No item yet in your inventory",ContinueThisStep:"Continue this game",YouAlreadyStartThisQuest:"You have already played this game, do you want to continue where you last left it?",Restart:"Restart",Continue:"Continue",NoHintForThisStep:"No hint for this step",Hint:"Hint",Hints:"Hints",CreateYourQuest:"New game",CreateYourPrivateQuest:"Create your private game!",CreateYourPublicQuest:"Create your public game!",andWin:"and win",Start:"Start",AcceptTheRules:"Accept the rules",SomeMoney:"Some money",BuilderWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>This application can be used by young people, it must not contain reference to violence, sex, horror, nudity, drug, alcohol, smoking, ...</li><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</p><p>The story of your game must not undermine living or dead people</li><li>Your game must concern a location where no game has already be done, except if the content is different enough.</li><li>Your game must have more than 6 steps. We advise you to have less than 70 steps</li><li>Our moderation team will check if your game respects these rules, and if the quality level is enough. If not, you will be asked to improve your game, or your game will be rejected</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 20 invitees (for more, please contact us)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>By pressing the Start button, you accept these rules:<ul><li>If you are not the owner of the place of the game, do not ask players to touch, move, or degrade things.</li><li>The story of your game must not undermine living or dead people</li><li>You are limited to 200 invitees (for more, please contact us)</li></ul></p>",BuilderIntro:"Graaly helps you create funny game to challenge players and win points!",BuilderProIntro:"Create your game on Graaly",BuilderChooseUserType:"Are you:",BuilderAddRoomMessage:"<p>By adding your room, you can benefit from services for free: <ul><li>Visibility in our directory</li><li>Statistics</li><li>Link to your reservation page</li><li>Suggestion of your room to our community</li></ul></p><p>Your customers can benefit also from free services: <ul><li>Find your rooms around them</li><li>Follow escape games played by their friends and challenge them on your rooms</li><li>Save their results and win points to challenge their friends</li></ul></p>",AProfessional:"professional",AProfessionalDesc1:"As a professional, you can use advanced Graaly features (statistics, advanced customization, monetization, easy start QR code ...)",AnIndividual:"individual",AnIndividualDesc1:"As an individual, you can also create public and private games, with all Graaly features you need",TryForFree:"Test for free",FromPrice:"From",PaymentOnUsage:"Pay as you go",NewQuest:"New game",Intro:"Intro",Steps:"Steps",Publish:"Publish",Title:"Title",PleaseEnterATitle:"Please enter a title",Category:"Category",PleaseSelectACategory:"Please select a category",Description:"Description",StartingPointOfTheQuest:"Start location of the game",MainLanguage:"Main language",UploadAPicture:"Upload a picture",YourPicture:"Your picture",Museum:"Museum",CityOrDistrict:"City or district",Countryside:"Country side",Other:"Other",French:"French",English:"English",QuestSaved:"Your modifications are saved",YourQuestIsPublished:"Your game is published",YourQuestIsUnpublished:"Your game is unpublished",DoYouWantToRemoveThisStep:"Do you really want to remove this step?",AddAStep:"Add a step",TestYourQuest:"Test your game",PublishYourQuest:"Publish your game",UnpublishYourQuest:"Unpublish your game",SelectedLanguage:"Create game in:",Close:"Close",ChooseTheStepType:"Choose the step type",Transition:"Transition",Quest:"Game",UseThisGame:"Use this template",NoneImmediate:"None (immediate)",NoneLocationAndDirection:"Location (and direction)",DateTime:"Date / time",NoneNextStep:"None (move to next step)",Medium:"Medium",Text:"Text",Level:"Level",AnswerNb:"Answer {nb}",YouCantAddMoreThanNbAnswers:"You can't add more than {nb} answers",YouMustDefineAtLeastNbAnswers:"You must add at least {nb} answers",KeepEnigmaQuestionsShort:"Please keep your text short to keep it simple to read. If you need more space for text, we advise you to add a step 'Image & Text' before this one.",CodeKeypadFormatError:"In this required field, please type between 2 to 6 characters (only digits and characters '*', '#').",StepSettingsFormError:"Please review form and try to submit again.",PleaseUploadAFile:"Please upload a file.",RequiredField:"This field is required.",Question:"Question",UploadABackgroundImage:"Upload an image",AddABackgroundImage:"Add a background image",WarningImageResize:"The image will be resized with a mobile size (portrait orientation)",UploadAVideo:"Upload a video",NoVideoUploaded:"No video video",Remove:"Remove",remove:"remove",DisplayDistanceBetweenUserAndLocation:"Display the distance between the player and the location",DisplayDirectionArrow:"Display the direction arrow",ResponseTypes:"Response types",PossibleAnswers:"Available answers",Texts:"Texts",Pictures:"Pictures",SelectTheGoodAnswer:"Select the good answer",NoPictureUploaded:"No picture uploaded",AddAnAnswer:"Add an answer",ExpectedAnswer:"Expected answer",Code:"Code",ExpectedColorCodeAnswer:"Expected color code:",ImagesUsedForCode:"Add the images used for the code",AddAnImage:"Add an image",ExpectedCode:"Expected code",UploadThePictureOfTheObjectToFind:"Upload the picture of what should be found",UploadTheObjectToFind:"Upload the GLB file of the 3D object",UploadedPicture:"Uploaded picture",UploadThePuzzlePicture:"Upload the jigsaw puzzle picture",WarningImageSizeSquare:"Your picture will be cropped to have same height and width",YourPuzzlePicture:"Jigsaw picture",ClickOnTheLocationTheItemMustBeUsed:"Select the part of the picture where the item must be used",UploadTheItemPicture:"Upload your item picture",YourItemPicture:"Your item picture",ObjectName:"Item's name",ObjectToUse:"Object to use",SelectedObject:"Selected item",ClickOnTheItemThatIsToFind:"Select the part of the picture the player has to find",StepSaved:"Step saved",TechnicalIssue:"Technical issue, please try again later",TechnicalProblem:"Technical issue",SaveThisStep:"Save this step without testing",SaveAndTestThisStep:"Save and test this step",GraalyIsOptimizedForSmallerScreens:"The application is optimized for mobile device. Please use your mobile vertically, or resize your screen",Overview:"Overview",Submit:"Submit",GoodAnswer:"Good answer!",WrongAnswer:"Wrong answer!",Next:"Next",SecondTry:"Wrong answer. You have {nb} trial(s) more",Clear:"Clear",Confirm:"Confirm",WrongGoodCodeWas:"Wrong! The right code was:",TheScreenCaptureWillAppearInThisBox:"The screen capture will appear in this box",Cancel:"Cancel",Check:"Check",TakeThePicture:"Take the picture",WellDone:"Well done!",PhotosDoesntMatch:"Unfortunately, the photos do not match.",DistanceInMeters:"Distance with the place to find: {distance} meters",YouHaveFoundThePlace:"Well done! You have found it",points:"points",Pass:"Skip",YourAnswer:"Your answer",ConfirmTheAnswer:"Confirm the answer",PleaseSelectAnItemFirst:"Please select an item in your inventory (button in the bottom left), then press the image to use it.",UseItemNothingHappens:"Nothing happens, please try another location or use another object.",FindItemNothingHappens:"Nothing happens, please try another location.",NoTitle:"No title",AddYourSteps:"Create a first step for your game",AddYourChapters:"Create a first chapter and add first steps of your game inside",ActivateTheLanguageVisible:"Activate the languages playable for your game",ActivateTheLanguageVisiblePrivate:"Activate the languages to let your invitees play your game",LanguagesPublished:"Publish game in",LanguagesPublishedForPrivate:"Game is visible for invitees",PageLanguagesPublished:"Publish page in",ModifyThePicture:"Modify the picture",Picture:"Picture",LeaveQuest:"Leave the game",YouHaveWinANewItem:"You have found a new item",YouCanNotUseAnItemInThisStep:"You can not use an item here",Ok:"Ok",ConfirmHint:"The hint will cost you points. Are you sure to use it?",YouWin:"You have won",WhatCanYouDoWithThesePoints:"What can you do with these points?",ReviewThisQuest:"Review it",ShareYourSuccess:"Share your success!",YouAlreadyPlayThisQuestSoYouWinNoPoints:"You already won the points of this game in the past",ResolveOtherQuestsToWinPoints:"Play new games to win points",ChallengeYourFriends:"Challenge your friends!",ConfirmPass:"Are you sure to skip this step, and to not win any point?",TouchWhereYouUseThisItem:"Touch where you use this item",YourLanguage:"Your language",NoFriend:"You have no friend yet",YourRanking:"Your ranking",Ranking:"Ranking",Like:"Like",NoNews:"No news yet",BuyCoinsToPlay:"Buy energy to play",YourRatingHasNotBeenSaved:"Your rating has not been saved. Maybe you have already rated this game?",YourRatingHasBeenSaved:"Your rating has been saved",GetCloserToStartingPoint:"Get closer of starting point",OpenLocationSettings:"Open location settings",LocationToFind:"Location to find",Address:"Address",OrDefineGPSLocation:"Or define GPS location",DefineGPSLocation:"Define GPS location",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Please upload a file in PNG format with alpha transparency.",GPSCoordinates:"GPS coordinates",TerritoriesWon:"Conquest of territories",YourWorldRanking:"My global rank",YourCityRanking:"My rank in my city",PlayAllQuestsInACityToWin:"Play all the games of a city to win all the rewards",NoRankingYet:"Your rank is not yet calculated, it id calculated once a day",Challenge:"Challenge",ChallengeAllFriends:"Challenge all your friends",TypeNameOrAddressOfYourFriends:"Type the email or the name of your friends",Or:"Or",Select:"Select",Add:"Add",Administrate:"Administration page",QuestUnderValidation:"Your game is now read only. Your game will be validated by our game master. This can take a few days. Please check your mailbox for more information",PublicationRequested:"Publication requested",PublicationRejected:"Publication rejected. You will receive an email explaning why",QuestPublicationRejected:"Your game has not been published. You will receive an email to explain you how to update it to have it published",TouchTheObject:"You found it! Touche it now !",ObjectSize:"Object size",TouchDistance:"Object can be touched nearer than...",YouWonABonus:"You won a bonus",AddATown:"Add a town",Shop:"Shop",Coins:"Energy",coins:"energy",Choose3DModel:"Choose a 3D model",ObjectIsTooFar:"The object is too far to be visible on screen. Try to get closer.",LastItemIsUniq:"Last picture is unique (no twin in the game)",YouMustDefineStartLocation:"You must define the location of the starting point of the game",ClickOnArrowToMoveToNextStep:"Touch the right arrow to move to next step",YourQuestMustContainAtLeast6Steps:"Your game is too short, you must create at least 3 steps",YourQuestMustContainLessThan50Steps:"Your game is too long, you must create less than 100 steps",WarningNoLocation:"Searching your location...",WarningLowBattery:"Your battery is low, please consider charging it",WarningNoNetwork:"Waiting for network...",WarningLowNetwork:"Low network, please wait...",CouldNotDisplayObject:"Sorry, an error has occured while loading the objet to find, therefore it cannot be displayed. Restart the application, if the problem persists skip this step.",CouldNotEnableAR:"We could not detect your device orientation. Don't panic! You can still find the game element.",Step:"Step",EasyLongDesc:"Easy, for everyone, even a child",NormalLongDesc:"Normal, no huge difficulties",HardLongDesc:"Expert, for gamers",RemoveThisQuest:"Remove this game",AreYouSureYouWantToRemoveThisQuest:"Are you sure to remove this game? It will be remove permanently!",Modify:"Modify",Editors:"Editors",InviteEditors:"Invite an editor",InvitePeople:"Invite a player",InviteEditorsHelp:"Type the email address of the editor you want to invite",InviteInviteesHelp:"Type the email address of the person you want to invite",UserIsNotAGraalyUser:"No more invitee allowed or this person need to create a Graaly account.",EditorIsNotAGraalyUser:"No more editor allowed or this person need to create a Graaly account.",OtherOptions:"Other options",SelectPictureInTheList:"Select the object is the list",HintText:"Hint text",NewHint:"Next hint","2DPicture":"Flat picture","3DObject":"3D object",ObjectFormat:"Object format",ImagesUsedForCards:"Cards pictures",OkThanks:"Ok, thanks!",CreateAQuest:"Create a game",NoThanks:"No thanks",Character:"Character",Rankings:"Rankings",UseMyCurrentGPSLocation:"Use my current GPS phone location",MarkersFile:"QR Codes",ChooseTheMarker:"Choose the symbol",Download:"Download",Marker:"Symbol",Choose:"Choose...",ExtraTextFieldLabel:"'Know more' description",ReadMore:"Read more",ClickHereToKnowMore:"Press here to know more",FriendsAdded:"You follow this person now",InvitationSent:"Invitation sent",Email:"Email",EmailIsNotValid:"Invalid email",PhoneNumber:"Phone number",InvalidPhoneNumber:"Invalid phone number",AreYouSureYouWantToRemoveThisFriend:"Are you sure you want to remove this friend ?",Suggestions:"Suggestions",FindWithEmail:"Find friend with email",FindWithPhone:"Find friend with phone number",YourPhoneNumber:"Your phone number",phoneExample:"123 456 789",Pro:"Pro.",Storekeeper:"You are a pro",StorekeeperDesc:"And you want to attract a qualified clientele with a unique gaming experience",TransparentImageAboveCameraStream:"Transparent image above camera stream",GeolocationFailed:"Geolocation failed",GeolocationFailedDesc:"We can not localize you, either you have no network, or you blocked the localization for this app",NumberOfColorsInTheCode:"Number of colors in the code",NumberOfImagesInTheCode:"Number of pictures in the code",FindMarkerHelp:"Target the correct QR code with your phone camera. Good luck!",TouchObjectOnMarkerHelp:"Point your phone camera towards the right QR code. A QR code is a square picture with dark dots. Good luck!",LocationSearching:"Looking for your position...",ConfirmSaveChanges:"Save changes?",Yes:"Yes",No:"No",WeNeedMoreInformationAboutYou:"Create your profile!",WeNeedMoreInformationAboutYouDesc:"It's simple and it unlocks nice features",RemoveYourAccountDesc:"By removing your account, you will loose your score, all the items you bought, and your progression, and you will not be able to log again to the application.",RemoveYourAccount:"Remove your account",IConfirmIWantToRemoveMyAccount:"I confirm I want to remove my account",AreYouSureYouWantToRemoveYourAccount:"Are you sure to remove your account, and not use Graaly any more? This actions can not be canceled!",YourAccountIsRemoved:"Your account has been removed",CreateMyAccount:"Create my account",IAlreadyHaveAnAccount:"I already have an account",Reviews:"Reviews",CommentThisQuest:"Comments for game author",Send:"Send",ReviewSent:"Review sent to the author. Thank you!",Optional:"optional",Colon:":",Rating:"Rating",PleaseRateTheQuest:"Please rate the game before sending your review",QuestNotReviewed:"This game has not been reviewed yet.",ClickHereToStartDiscoveryQuest:"Press here to start the discovery game",contactUsPro:'You can find our professional services on <a href="'.concat(s,'" target="_blank">').concat(s,'</a> or contact us at <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Sorry, geolocation is not supported by your device.",TechnicalErrorReloadPage:"Technical issue, press to refresh",TechnicalProblemNetworkIssue:"Please check your network or try again later",Search:"Search",CurrentScore:"Current score",SolveAgainThisQuest:"Play again",BackToQuest:"Back to the game",min:"min",pts:"pts",SportQuest:"Nature game",DiscoveryQuest:"Discovery game",CulturalQuest:"Cultural game",ChildQuest:"Children's game",TransportQuest:"Game by car or other transport",ShopQuest:"Shop discovery",EnterpriseQuest:"Enterprise",NightQuest:"Night game",ExtremQuest:"Extreme game",CulinarQuest:"Culinary game",SkipTutorial:"Skip tutorial",SkipTutorialDesc:"The tutorial helps you understanding how to play Graaly. You can skip tutorial now, it will still be avaible in your profile",Tutorial:"Tutorial",IWantToRestartTutorial:"Restart the tutorial",DurationBeforeTextAppearAbovePicture:"Duration before the text appear above the background image (in seconds)",pointsToWin:"point(s) to win",YouAlreadyPlayedThisQuest:"You already played this game (no points to win)",YourLevel:"Your level",MyScore:"My score",Score:"Score",PleaseSelectYourSex:"Please select your gender",PleaseSelectYourAge:"Please select your age range",RankingIntro:"Here are the best players for this game",CloseQuestRanking:"Back to the game",RankingEndIntro:"Here is your ranking among your friends",CloseEndRanking:"Back to the end of the game",NoFriendsLong:"You do not follow people yet",IAgreeTheTermsAndConditions:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(r.terms.en,"', { openExternal: true })\">terms & conditions</a>"),PleaseAgreeTheTermsAndConditions:"Please agree with the terms & conditions applicable to Graaly users",IAgreeThePrivacyPolicy:"I agree with the <a href=\"javascript:navigator.app.loadUrl('".concat(r.privacy.en,"', { openExternal: true })\">privacy policy</a>"),PleaseAgreeThePrivacyPolicy:"Please agree the privacy policy to use Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(r.terms.en,"', { openExternal: true })\">Terms & conditions</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(r.privacy.en,"', { openExternal: true })\">Privacy policy</a>"),DoYouWantToRemoveThisChapter:"Are you sure to remove this chapter? It must not contain any step",FollowStep:"Follow step",StepSuccess:"Right answer on step",StepFail:"Wrong answer on step",NoCondition:"No condition (start at the beginning of the chapter)",Conditions:"Triggers",AddACondition:"Add a trigger",ConditionType:"Trigger type",ConditionValue:"Trigger value",YourStepCanOnlyFollowOneStep:"Your step can only follow one step",ThisStepIsTriggeredWhen:"This step is displayed when",YouCanNotRemoveAChapterWithSteps:"You can not remove a chapter with steps. Please remove steps before.",ModifyTheChapter:"Edit the chapter",NewChapter:"New chapter",AddASChapter:"Add a chapter",SelectANewObject:"Select a new object",ThisStepIsNotShowToPlayers:"This step is not shown to players, you can pass to next step",By:"By",YourChapterMustHaveAEndOfChapterStep:"You must have an 'End of chapter' step in each chapter to move player to next chapter",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Following steps have no trigger. Only the 'introduction step' of a chapter can have no triggers",FollowingStepsHaveInvalidCondition:"Some steps have invalid condition (maybe the folowwing stem has been removed, or you created circular conditions)",FollowingStepsHaveNoValidParent:"Following steps have invalid trigger",IssuesInYouQuest:"Issues in your game",IssuesInYourStep:"Issues in your step",DisplayRightAnswer:"Display right answer",Mode:"Mode",TouchA3DObjectOnTheMarker:"Touch a 3D object on the marker",ScanTheMarker:"Scan the marker (two attempts)",NothingOccurs:"Nothing occurs, try something else",ClickOnButtonToAddStep:"Click on the + button to add a step in this chapter",ScanTheMarkersLikeThat:"The mark to find and scan with your camera is similar to",ScanTheMarkersLikeThat2:"To scan a mark, press below",LaunchTheScanner:"Launch the scanner",RedirectionPleaseWait:"Redirection, please wait ...",UpgradeRequired:"You need to upgrade your Graaly application to continue to use it",SorryAnErrorOccurs:"Sorry, an error occured.",PleaseContactTheSupport:"Please contact the support",CreateNewVersionDescription:"You will create a new draft version for this game. If your game is already published, players will play the published version, until you will publish this new game version.",ClickHereToCreateANewQuestVersion:"To edit your game, click here",YourUnderValidationQuests:"currently reviewed",YourRejectedQuests:"Your rejected",YourDraftQuests:"Your drafts",YourPublishedQuests:"Your published",QuestDraftVersion:"Non published game",PageDraftVersion:"Non published page",PrivateQuest:"Private game",PublicQuest:"Public game",Invitees:"Invitees",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"This language is not yet set for your game, do you want to add it?",Results:"Results",ClosePrivateQuest:"Close the game",ClosePrivateQuestDesc:"After clicking here, your game will not be playable any more. You will access the players scores and ranking.",ClosePrivateQuestAlert:"Are you sure to close this game? It will not be playable any more",NoPlayerForThisQuest:"Nobody played this game",NoPlayersYetForThisQuest:"No player yet for this game",PrivateQuestDesc1:"Your game is dedicated to your friends or choosen people, it is not playable by others",PublicQuestDesc1:"You want to create a game to present a place, an activity, a company.",PublicQuestDesc2:"Once validated by our game master, your game will be visible and playable by every body",PublicProQuestDesc1:"Your game is playable by all users. You pay a small fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",PublicProQuestDesc2:"<p>If your game is not free, you can either use the in-app payment, or manage the payment your self</p><p>For the in-app payment, Google/Apple take 30% of the revenues</p><p>In all cases, Graaly takes 30% of the revenues</p><p>The rest is for you, so from 40% to 70% of the net revenues.</p><p>Graaly will send you money monthly</p><p>If your game is free for the end users, Graaly will charge you monthly 0,25 € (excl. taxes) per player</p><p>You can disable your game when you want</p><p>Please contact us at contact@graaly.com for more details</p>",PrivateProQuestDesc1:"Your game is dedicated to a list of people. You pay a fee by player or you share the revenues with us.<p>Please contact us at contact@graaly.com for more details</p>",CreatePrivateQuest:"Create a private game",BuyPrivateQuest:"Buy a private game",OnlyBuyableOnMobile:"Only buyable on mobile",AcceptAndBuyAPrivateQuest:"Accept and buy a private game",CreatePublicQuest:"Create a public game",CurrentlyPlaying:"Is currently playing",FinalRanking:"Final ranking",FinalRankingIntro:"Here are the scores for this game",YourQuestIsClosedAndCanNotBePublishedAnymore:"Your game is closed and can not be published any more",YourQuestContainsErrorsInSteps:"There are errors in the Steps tab. Please correct them and try again",QuestType:"Game type",helpQuestType:"A chain of clues game is a list of enigmas that follows each other. A game is composed with enigmas that can be resolved in different orders, the resolution of some enigmas unlock other enigmas. For your first game, we advise you to start with a chain of clues game. You can change a chain of clues game in a game, but not the opposite.",basicEditor:"Chain of clues (basic editor)",advancedEditor:"Escape game (advanced editor)",UsedOver:"{current} of {limit} used",QuestMedia:"Game files",YouDoNotUseAnyMediaYetInYourQuest:"You do not use any media yet in your game",Feedback:"Your feedback",Back:"Back",FeedbackTitle:"Send feedback",FeedbackIntroduction:"To send feedback to this game author, or rate this game, please wait for the end of the game. If you want to contact the Graaly team, to report an inappropriate content, type your message below:",YourMessageHasBeenSent:"Your message has been sent",BackToBuilder:"Back to your game builder",OrDownloadAFile:"Or download your own picture",UploadACharacter:"Upload a character",LoadingQuestDataForOfflineMode:"Preparing your game...",ErrorOfflineSaving:"Technical issue, you can not play this game without a network connection",QuestNeedNetwork:"You need network to launch this game. Activate your device network, and click on the button when you have network to launch the game",ReloadQuest:"Reload game",ConnectToComputeScore:"I am connected, compute my score!",ToSaveYouScoreYouNeedToConnect:"To save your progression and you score, you need to connect to the wifi or mobile network, then click on the button",DownloadForOfflineUse:"Play offline",Downloading:"Loading ...",Loading:"Loading ...",YouAreOfflineNoQuestsAvailable:"Sorry, we could not find any game playable offline.",ButtonsColor:"Buttons color (optional)",AddALogo:"Add your logo",YourLogo:"Your logo",byteCharacter:"B",AvailableTomorrow:"Available tomorrow",MoveCloserToTheObject:"Move closer to the object to touch it",AddACardPair:"Add a pair of cards",AlreadyFriends:"You already follow this person",UserCanNotBeFriendWithHim:"You can not add yourself as friend",TooMuchFriends:"You can not follow more than 150 people",FriendNotFound:"This person is not yet a Graaly user",YouHaveWin:"You won!",AreYouSureYouWantToMoveToAdvancedMode:"Are you sure to move to advanced mode? You will not be allowed to return to simple mode later",Country:"Country",Town:"City",ZipCode:"Zip code",QuestDownloadFinished:"Download finished. You can now play this game without a network connection.",GoToQuestValidation:"Go to validation",SessionExpired:"Your session has expired, please login.",AuthCheckError:"An error has occurred, please contact support.",NoInternetConnection:"No internet connection",FileTooLarge:"Your file is too large, please reduce its size",PremiumQuest:"Pro game",MovePremium:"Move this game to pro mode",PremiumDefinition1:"Give your game more value!",PremiumDefinition2:"Moving pro offers you several advantages : <ul><li><u>A more customized game to your needs</u>: you can use your own 3D objects & characters, you can display your logo and adapt screens with your colors, ... </li><li><u>A profitable game</u>: you can sell your game to players</li><li>You can access the statistics of your game</li><li>You can have support from our team</li></ul>",PremiumDefinition3:"To buy pro credits, have a look at <a href='https://graaly.com'>our web site</a> or contact us at sales@graaly.com",PremiumWarning:"To use this feature, you need to move your game to premium mode (look at your game settings)",Statistics:"Statistics",colons:": ",TotalNumberOfPlayers:"Total number of game played",NumberOfPlayersYesterday:"Yesterday",NumberOfPlayersByAge:"Number of players by age",NumberOfPlayersBySex:"Number of player by gender",AverageScore:"Average score",AverageDuration:"Average duration (min)",Age1325:"Between 13 and 25 y.o.",Age2639:"Between 26 and 39 y.o.",Age4049:"Between 40 and 49 y.o.",Age5064:"Between 50 and 64 y.o.",Age65:"Older than 65 y.o.",male:"Man",female:"Women",ReviewsAndStats:"Reviews & stats",YourOrganizationSubscribeAProAccount:"Your organization ({name}) subscribed a pro account on Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Your organization members have created pro games",Status:"Status",YouCanCreateNbPremiumQuests:"You can create {nb} pro game(s) more",YouCanNotCreateNewQuests:"Yon can not create new pro games. Subscribe to our professional offers on <a href=\"javascript:navigator.app.loadUrl('".concat(s,"', { openExternal: true })\">").concat(s,'</a> or by email at  <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Price for the players",Free:"Free",Paying:"Paying",Buy:"Buy",Error:"Error",YouMustPlayThisKindOfQuestOnAMobileDevice:"You must play this kind of game on a mobile device",QuestPlayableOnMobile:"This game is only playable on mobile",PuzzleHelpText:"Move the pieces to reconstruct the picture",ClickToEnlargePictures:"Press pictures to enlarge",WaveThePhoneForGPSPrecision:"Wave the phone in a figure 8 motion during 3 seconds for a better GPS precision",TakeMobileVertically:"Handle your mobile vertically and search",null:"Undefined",TooMuchOfflineLoadingErrors:"Game loading failed. You can play the game online if you always have network. Press here to close",CancelOfflineWarning:"You have canceled the loading of the game. It will not work if you loose network",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggest a game",SuggestANewQuest:"Suggest a new game",YouLikedThisQuest:"You liked this game?",SuggestAQuestDesc:"You would like to use Graaly to discover a place by playing, or to motivate your children or students? Propose this place, we do the rest!",NameOfThePlace:"Name of the place",NameOfThePlaceExample:"British Museum",SuggestContactInformation:"responsible (if you have it)",SuggestContactInformationExample:"Name, email or phone number",ThankYouForYourProposal:"Thank you for your proposal",SuggestWarningMessage:"By filling this form, you help us finding the most requested games to contact the responsible of this place. You will be warned if a game is created on this place.",InsertAStepAfter:"Insert a step below",QuestUpdated:"Game has been updated",PleaseRestartQuest:"Please restart the game from the beginning.",StartOnDate:"Publication date",StepIsOnlyVisibleOnThisDate:"This step is only playable from this date",ThisStepIsAvailableIn:"This step will be available in",TimeRemainingHoursMin:"{day} d {hour} h {min} m {sec} s",PuzzleChangeMode:"The jigsaw puzzle does not work?",PuzzleHelpTextClick:"Press on the piece you want to move, then on the place to move it",QRCodeIsNotWorking:"The QR Code is not recognized",ScanQRCodeToStartQuest:"Scan a QR Code",ScanQRCode:"Scan a QR Code",MarkersToPrint:"Game's QR Codes",MarkersToStartQuest:"Players can start your game by scanning this QR code on the login page",SaveQuestResultsMarker:"Your player can scan a QR Code to save their score with Graaly (scan it on login page or home page). For the players who exited the room in time:<br /><img src='{url3}' /><br />For players who were close to exit the room in time:<br /><img src='{url2}' /><br />For players that did not exit the room<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"This actions can not be canceled",AddAReward:"Upload a reward",Reward:"Reward",Rewards:"Bagdes",RewardPictureWarning:"Warning: if your picture background is not red, upload a picture with a transparent background. If a part of your picture is cropped, upload a square format picture",YouWonAReward:"Congratulation, you have won a badge",WonOtherRewardByPlayingOtherGamesInCity:"You can won other rewards by playing other games around",UnknowUploadError:"An error occured. Maybe your file is too big or not the right format. Please try again with a smaller picture",helpQuestLogo:"Your logo will be display in a bubble on the bottom of the game screen. Depending on the screen sizes, the bubble can be small, please use a picture with few details.",helpQuestReward:"The player will win a badge as a reward at the end of your game. This will motivate them to play your game. To create this badge, upload a picture of this reward, with a transparent background (.gif or .png format)",LoadingContacts:"Loading contacts",LoadContactsFromPhone:"Search in my address book",NoMoreContactFound:"No more contact found",CreateYourAccountMsg:"Create your account to save your score and play with your friends!",MaybeLater:"Maybe later!",LetsPlay:"Play",NewAccount:"New account",PleaseAcceptDeviceMotionPermissionRequest:"Please allow Graaly to detect the motion of your device, in order to play this part of the game",PleaseAcceptDeviceOrientationPermissionRequest:"Please allow Graaly to detect the orientation of your device, in order to play this part of the game",DoYouWantToCreateAnAccount:"To build a game, you need to create an account. Do you agree to create your account?",UserWithSameEmailAlreadyExisting:"An account already exists with this email address",PasswordTooWeak:"Your password must be more complex (8 caracters and a capital leter and one digit)",AreYouSureYouWantToPublishThisQuest:"Are you sure you want to ask for publishing? You will not be allowed to make changes until Graaly team validate your request",YourCharacter:"Custom character",AddACustomCharacter:"Add a character",helpQuestCharacter:"This character will show up when a player ask for a hint or a Read More message",AvailableColors:"Available colors",TypeColorCode:"Type color code. Ex: #ff55cc",TypeColorCodeName:"Type the color name. Ex: Red",AddNewColor:"Add a new color",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>You are far from this game</b>.<br />By solving this game afar, you will miss many clues and so many points",YouAlreadyDidThisQuest:"<b>You already completed this game</b>. You can play it again, but <b>this will not give you points again</b>",YouAreQuestOwnerDesc:"You are the owner of this game, you will not win any point",GeneralWarning:"<b>For your safety</b>, do not play Graaly driving or riding your bicycle, always be alert to what is happening around you, do not enter private property without permission, follow the safety rules when you move.",RemoveScoringAndRating:"Hide the score and the rating",TypeEndMessage:"Text replacing the scoring and rating final screen",ThanksForPlaying:"Thanks for playing this game. See you later with new games!",EnlargePictureToFullWidth:"Enlarge the picture to full screen",EnlargePictureToFullHeight:"Enlarge the picture to full height",PlayerCanTakeSnapshot:"Player can take snapshots",SnapshotTaken:"Screenshot saved on your mobile",SnapshotTakenIssue:"Error with the screenshot",NbTrials:"Trials number",UserCanPass:"Player can pass this step",Welcome:"Welcome!",SignIn:"Sign-in",Subscribe:"Subscribe",EmailAlreadyUsed:"This email address is already used. Please sign-in or ask to modify your password",AroundYou:"Close to you",SeeMore:"See more",Designers:"Designers",Difficulty1:"Easy",Difficulty2:"Normal",Difficulty3:"Hard",ClosestQuestToYou:"The game closest to you",YouAreNearThisQuest:"You are close to this game",YouAreInvitedToThisQuest:"You are invited to this game",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Played by friends",ScoreAndBadges:"Score & badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"With this game, you can win:",ScoreRange:"Between {min} and {max} points",InProgressPreparation:"Preparation in progress",Warnings:"Warnings",Follow:"Follow",Followed:"Followed",SolvedQuests:"Solved games",Creations:"Creations",Badges:"Badges",FollowYourFriends:"Follow your friends",CreatedYourFirstQuest:"Create your first game",DoNotFollowAnymore:"Stop following",AllTheseDataAreOptional:"These informations are not mandatory:",DataCountry:"Your country: used to display the relevant games for you",DataZipcode:"Your zip code: used to display the relevant games for you",DataSex:"Your sex: used to display the relevant games for you",DataAge:"Your age: used to hide games not adapted to your age",DataPhone:"Your phone number: used to connect you with your friends",EscapeGame:"Game",EscapeGames:"Games",Players:"Players",YouHaveReachAScore:"You have reached {score} points",LevelReached:"Level reached!",PointsToReachLevel:"{score} points to reach",Friends:"Friends",World:"World",MyCountry:"My country",MyCity:"My city",NoRanking:"No ranking yet",Invitations:"Invitations",YouFollowThem:"You follow",AddYourRoomInTheDirectory:"Add your room in the directory",AddYourRoom:"Add your room",ProAddYourRoom:"You can add you rooms and benefit from many free services",YourRoom:"Your room",PriceFrom:"Price per player from",ReadMoreLink:"Link to the booking page",SmallPicture:"Small picture",SeeYourQuestPage:"Preview the page",FromPricePerPlayer:"From {price} per player or game",Book:"Book",YourBadges:"Your badges",YouDoNotHaveBadgesYet:"You do not have badges yet. To win badges, you need to play games with rewards.",FollowedPeople:"Followed people",WeNeedYourPositionForThisFeature:"We need your position for this feature",OtherCharacters:"Other characters",BackToTheMap:"Home",or:"or",RefreshCacheRequired:"The application cached on your browser is too old. Please use private navigation to update your cached files",FindFriendManually:"Find friends manually",NoQuestAroundYou:"We did not find games close to you",CachedQuests:"Already loaded",YourPresentation:"Introduce yourself",DuplicateThisQuest:"Clone this game",DoYouWantToOpenClonedQuest:"Do you want to edit the duplicated game now?",OpenTheMap:"games map",ReplacePictureByRedFilter:"Replace picture by red filter",TotalNumberOfPlaysNotFinished:"Number of games in progress",RoomDataWarning:"Some information can be obsolete, do not hesitate to look at the escape game web site for more information",AnonymousUser:"Anonymous user",NotWon:"To be won",OnTopGames:"Featured games",ThisStepOnlyWorkOnMobile:"The QR code scan only works on the mobile app",YourQuestHasNotBeenPublished:"Your game is not published",OnDesktopDisplayMessage:"On computer, you need to reduce your the size of your browser window.",EventCode:"Event code",BoardMacAddress:"Board Mac address",SuccessMessage:"Success message",YourTime:"Your time",LimitNumberOfPlayerInOneHour:"Limit the number of players by hour (0 = unlimited)",TooMuchUsersCurrently:"Too much users are playing currently",OrSelectAnImageInTheList:"Or pick a picture in the list",IotObject:"IoT object",Protocol:"Protocol",SuccessRange:"Success range",SuccessRanges:"Success ranges",WriteTextWarning:"Accents and capital letters are not necessary",DistanceToWin:"Player wins when he is closer to the GPS location than (m)",SplitMessageWithPipe:"Add pipes '|' if you want to split your text in several bubbles",ClickHere:"Click here",FollowTheCreator:"Follow the creator",PlayersNumber:"Number of smartphone to play (BETA)",helpQuestMultiplayer:"This define the minimum number of players to play the game. Each player will have his phone, and should have specific missions in the game. For more information about multiplayer, please watch our Youtube tutorials",ThisIsAMultiplayerGame:"This game is multiplayer",JoinATeam:"Join a team",ScanTheLeaderQRCode:"Scan the leader QR Code",CreateATeam:"Create a new team",TeamName:"Team name",CreateTeam:"Create the team",OtherPlayersMustScanThisQRCode:"Other players must scan this QR Code to join your team",ThisIsNotATeamQRCodeValid:"This code is not valid! You must scan a code displayed on the mobile of the person who create the team",MyTeamIsCompleteLetsGo:"Team has scanned, let's go!",YouNeedMoreMembersToPlay:"You need {nb} members to start this game. Current member(s): {members}",Team:"Team",WaitingForOtherUsersActions:"Waiting for other players",WaitingForOtherUsersActionsDesc:"You can not go forward until other players solve their puzzles",Player:"Player",All:"All",YouNeedToBeXPlayers:"You need to be at least {nb} to play",YouNeedAtLeastXEditorsToTest:"You need at least {nb} éditors to test this multiplayer game (see Publish tab)",HereAreTheTesters:"This is a multiplayer game. It will be tester by: {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Display of your picture on diffent screen sizes",MyPictureIsNotDisplayedWell:"The display is not correct",MyPictureIsNotDisplayedWellDesc:"<b>If your picture is not correct for all sizes</b>: You need to have a picture with 900 pixels width and 1200 pixels height.<br /><b>If your picture is not correct with the smaller size</b>: You need to add a not useful border of 100px. You can add a black border of 100 pixels to your picture for example",RestartQuest:"Restart game",AreYouSureToRestartThisQuest:"Are you sure to restart this game? You will not gain any point by restarting.",PaymentOnMobile:"Payment on mobile",PaymentOnMobileHelp:"The payment is really simple for players, in one touch. Meanwhile, the Apple / Google stores will take 30% of the revenues.",PaymentOnYourSide:"Payment managed by you",PaymentOnYourSideHelp:"You can manage the payment in your store or with tiers like 4Escape",Payments:"Payments",CreateNewQRCodeForPlay:"Create a new unique QR Code for a player",Create10NewQRCodeForPlay:"Create 10 new unique QR Codes",Create50NewQRCodeForPlay:"Create 50 new unique QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Are you sure to remove this code? If you have sent this code to a player, he will not be able to play any more!",BuyThisQuest:"Buy this game",YouHaveReceivedAQrCodeFrom:"You have received a QR code from {author}",ScanTheUniqueQRCode:"Scan the single use QR code",BuyInOneClick:"Buy in one clic",TechnicalIssueOrCodeAlreadyUsed:"Code already used or technical issue",ChangeTheBackgroundImageOnceClicked:"Change background picture when player has clicked",Message:"Message",Frequency:"Frequency",TriggerTheEvent:"Trigger the event",SearchingBluetoothDevice:"Searching Bluetooth device...",KeypadInput:"Keypad input",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Open",ChestActions:"Chest actions",TriggerMode:"Triggering mode",TriggerModeAuto:"Auto (at step loading)",TriggerModeManual:"Manual (player must touch a button)",helpPlayer:"For each step of a multiplayer game, you need to select the player who will see the step. Other players will not see it, and will have a waiting message until the player solve the enigma. You can display a transition step for all player, but an enigma can only be display for one player. If you need an enigma to be solved by all users, you need to create a step for each player. For more information, please watch our Youtube tutos.",ErrorMessageForNewTeamMember:"Technical issue or number of players reached",YouNeedToUnpublishYourQuestToRemoveIt:"You need to unpublish your game to remove it",PleaseEnterYourTeamName:"Please enter your team name",Version:"Version",CountDownLabel:"Time limit for this step",CountDownIsActive:"Activate the time limit",CountDownWarning:"Are you sure you want to activate the timer ? Make sure that there are no risks for the player, like a road to cross!",CountDownPopupfail:"Time is up !",MaxScore:"Max score",YouMustTestThisStepOnMobile:"You must test this step on a mobile device",AreasNumber:"Number of areas to find",ItRemains:"It remains",s:"s",LetsPlayWithoutAccount:"Play without account",ErrorDownloadNeedsToRestart:"Error while downloading, do you want to restart?",StartCreation:"Start creation?",ErrorTakingSnapshot:"Snapshot has not been taken",YourAudioFile:"Your background music",AddAnAudioFile:"Add a background music",ObjectNeedToBeAppliedOnPicture:"The object is applied on a picture area",ReadNext:"READ MORE",AlreadyPaied:"Purchased",HelpStepMessageInventory:"Display Inventory button help",HelpStepMessageHint:"Display Hint button help",HelpStepMessagePrevious:"Display Previous button help",HelpStepMessageNext:"Display Next button help",HelpStepMessage:"Welcome in your interface!\n\nTo participate, just follow the indications on screen.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></span></span></button></div>With the suitcase, you can access and use the objects won during the game.",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></span></span></button></div>With the light bulb, you can access the hints.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></span></span></button></div>Press the back button to move back to the previous step.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></span></span></button></div>Press the next button to move to the next step.",HelpStepMessageEnd:"If any problem, do not hesitate to close the application, you will restart to the latest step you played.",KenBurnsEffect:"Zoom out effect on picture",Show:"Show",Hide:"Hide",TotalSellings:"Game sells",RevenuesPayedFloor:"Revenues payed when over 50€",QRCodeMessage:"Message displayed when user needs to scan a QR code (escape game mode)",GeolocationMessage:"Message displayed when user to find several geolocalized places (escape game mode)",TeamID:"Team ID",PleaseFillThisForm:"Please fill this field",Zoom:"Zoom",ScheduleGame:"Schedule the game",GameSchedule:"Game schedule",Reset:"Reset",SchedulingDescription:"The game is playable :",From:"From",To:"To",QuestIsNotPlayableNow:"The game is not playable now",OpeningHours:"Opening hours",CreationStudioHelp:"<h3>Help</h3>We propose you several resources to help you using the creation studio:<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Builder guide (fr)</a></li><li>Some <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>video tutorials (fr)</a> to build steps of your game</li></ul><div class='text-accent'>New ! Join the <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>Graaly game designer Facebook group</a> to ask your questions to other game designers and to Graaly developers!</div><br />To test your game, we advise you to:<ul><li>test on your phone with the Graaly app</li><li>test on your web browser <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>developer mode</a> (to make it short, click on f12 key, and on the tablet icon). Warning: some steps are not working on this mode (Augmented reality, geolocation, QR code flashing, superimpose image and camera)</li></ul>",TestWithSimulatorWarning:"You will test with the simulator. Some step types are not working on it. For a real test, please use the Graaly mobile application",FontFamily:"Font used for texts",ExportTexts:"Game's texts",Downloads:"Downloads",ForcePlayerToHaveAccount:"Force player to create a Graaly account",ForcePlayerToHaveAccountHelp:"If not activated, users can play your game without creating an account",ShareUserDataWithCreator:"Ask player to share his data with you",ShareUserDataWithCreatorHelp:"A user that plays Graaly accept to share his data with Graaly. You can ask players to share the data with you also. To motivate them, we advise you to make them win something (organize a draw, give a voucher, ...)",YouNeedToCreateYourAccountToPlay:"You need to create your account to play this game",ShareDataWithPartner:"Share your data with the game creator",PartnerAskForYouData:"The creator of this game want to access your data (email address, name). The reason can be to organize a draw, or a competition, or to give you a voucher. Please read the game description for more information",UseHtmlInDescription:"Use HTML tags in the question",DoNotDisplay:"Do not display",AddAnGPSLocation:"Add a GPS location",BuildThePortraitRobot:"Build the picture to find",Education:"Education",EducationDesc:"We do not have an education plan yet, but you can use the professional mode and contact us at contact@graaly.com.",Call:"Call",BlurEffect:"Blur effect",CheckpointReached:"You have reached a checkpoint! The map now shows the next target's position.",DefaultMode:"Default display mode",CompassMode:"Classic",CompassModeHelp:"Shows a direction arrow and the remaining distance to reach the target",MapMode:"Map",MapModeHelp:"Shows a Google map with player & target positions",AllowToSwitchGeolocationMode:"Button to switch display mode",ApplyRedFilter:"Apply red filter",Chapters:"Chapters",Chapter:"Chapter",ChapterChangeWarning:"Changing the chapter will remove his triggers and create inconsistencies in triggers. You will need to update the steps that depend on it.",ResetHistoryAfter:"Prevent back button after this step",RestartChapterAfterStep:"Restart chapter after this step",HideInventory:"Do not use inventory",ShowCountDown:"Display countdown timer",StopGameAfterCountDown:"Stop game when time ends",ItRemainsMinutes:"It remains {time} minutes",CustomizeEndOfGame:"Customize the end of the game",CustomizeGameInterface:"Customize game interface",GameAvailability:"Game availability",GamePayment:"Game payment",UserData:"User data",CustomizeGameIntroduction:"Customize game presentation",RemoveGPSLocation:"Remove this location",OverQuotaMessage:"You reach the file storage limit",RemoveFiles:"Remove files",InvalidTeamID:"Invalid team ID",HideFullScreen:"Do not display full screen (Android)",YourFullName:"Your full name",TextColor:"Text color",GoodAnswersNumber:"Right answers",PleaseEnterFirstNameAndLastName:"Please type your first name and last name",PassTheQRCodeInFrontOfYourCamera:"Pass the QR code in front of your camera",HideHideButton:"Hide show/hide button",PleaseHoldYourDeviceFlat:"Please hold your device flat",MyLocationWarning:"Current GPS coordinates are not accurate enough. To get the GPS position, please use Google Maps (by clicking on a location, a popup is displayed with latitude and longitude), the 'My GPS position' app on Android or iPhone.",FindAllLocationsToStartSteps:"Move and find each location!",ColorIndicatorExplaination:"You are {distance}m from the nearest place",YouWonNewGame:"Congratulations! You unlocked a new game!",WarningLowGpsAccuracy:"Warning: low GPS accuracy",PersistentLowGpsAccuracyPleaseSkipStep:"GPS accuracy is still too low after one minute. We advise to skip this step (bottom right button).",LocationSaved:"Current location set as goal position.",CurrentLocation:"Current GPS location",Accuracy:"Accuracy",Meters:"meters",secondes:"seconde(s)"}},fr:{color:{red:"Rouge",green:"Vert",blue:"Bleu",black:"Noir",white:"Blanc",gray:"Gris",pink:"Rose",purple:"Violet",orange:"Orange",yellow:"Jaune",brown:"Marron"},news:{newQuestWon:"A réussi le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",newQuest:"A créé le jeu <a href='/#/quest/play/{questId}'>{quest}</a>",questUnderValidation:"Votre jeu <a href='/#/quest/play/{questId}'>{quest}</a> est en cours de validation",challenge:"Vous défie sur le jeu <a href='/#/quest/play/{questId}'>{quest}</a>"},bonus:{scorex2:"Score x 2",scorex2Desc:"Vous doublez le score de vos jeux durant 3 jours",rewardx2:"Energie x 2",rewardx2Desc:"L'energie que vous gagnez est doublée durant 3 jours",infinitehint:"Indices illimités",infinitehintDesc:"Vous bénéficiez d'indices infinis durant 1 jour","100coins":"+100 d'énergie","100coinsDesc":"Vous gagnez +100 en énergie","10coins":"+10 énergie","10coinsDesc":"Vous gagnez +10 en énergie"},stepType:{ImageAndText:"Image et Texte",ImageAndTextDesc:"Une image de fond et du texte",Video:"Vidéo",VideoDesc:"Vidéo d'explication, de présentation",NewObject:"Nouvel objet",NewObjectDesc:"Ajout d'un objet dans l'inventaire",FindALocation:"Géolocalisation",FindALocationDesc:"Diriger vers un emplacement",ChoiceQuestion:"Question à choix multiples",ChoiceQuestionDesc:"Cocher la bonne réponse (texte ou image)",TextQuestion:"Réponse textuelle",TextQuestionDesc:"Taper un texte",FindTheCode:"Code numérique",FindTheCodeDesc:"Trouver et taper le code",FindTheColorCode:"Code couleur",FindTheColorCodeDesc:"Trouver une combinaison de couleurs",FindTheImageCode:"Code avec images",FindTheImageCodeDesc:"Trouver le code composé d'images",ImageOverFlow:"Superposer image et caméra",ImageOverFlowDesc:"Superposer une image transparente avec la caméra",JigsawPuzzle:"Puzzle",JigsawPuzzleDesc:"Remettre en place les pièces",Memory:"Memory",MemoryDesc:"Trouver les images similaires",FindAnItem:"Rechercher dans une image",FindAnItemDesc:"Le joueur doit toucher une zone de l'image",UseAnItem:"Utiliser un objet",UseAnItemDesc:"Utiliser un objet de l'inventaire sur une image",LocateItemAR:"Réalité augmentée",LocateItemARDesc:"Le joueur doit trouver un objet géolocalisé et visible sur l'écran de son smartphone lorsqu'il se trouve à proximité.",LocateMarker:"Scanner un QR Code",LocateMarkerDesc:"Le joueur doit trouver un QR Code.",GraalyCharacter:"Personnage",GraalyCharacterDesc:"Faire parler un personnage",EndOfChapter:"Fin de chapitre",EndOfChapterDesc:"Cette transition fait passer le joueur au chapitre suivant",TriggerEvent:"Graaly -> Votre matériel",TriggerEventDesc:"Graaly déclenche une action sur votre matériel physique (utilisation d'une carte électronique)",WaitForEvent:"Votre matériel -> Graaly",WaitForEventDesc:"Votre matériel active une étape Graaly (utilisation d'une carte électronique)",HelpStep:"Page d'aide",HelpStepDesc:"Aide à l'utilisation de Graaly, présentation des boutons.",PortraitRobot:"Portrait robot - BETA",PortraitRobotDesc:"Reconstituez le visage des suspects",PhoneCall:"Appel téléphonique - BETA",PhoneCallDesc:"Lancez un appel téléphonique vers un numéro défini",Binocular:"Jumelles - BETA",BinocularDesc:"Rechercher dans une image en utilisant des jumelles"},layersForMarkers:{Magnifier:"Loupe",CodeScanner:"Scanner"},language:{en:"Anglais",fr:"Français"},status:{published:"publié",draft:"brouillon",old:"ancien",tovalidate:"en validation",unpublished:"dépublié",rejected:"rejeté",new:"nouveau",used:"utilisé"},story:{hint:"Indice :<br /><b>{hint}</b>",readMore:"{readMore}",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !"},iotObjects:{keypad:"Digicode",joystick:"Joystick",distance:"Distance",pot:"Potentiomètres",lcd:"Afficheur LCD",buzzer:"Buzzer",escapebox:"Escape Box",chest:"Coffre",button:"Bouton",relay:"Relais"},days:{day0:"Dimanche",day1:"Lundi",day2:"Mardi",day3:"Mercredi",day4:"Jeudi",day5:"Vendredi",day6:"Samedi"},label:{shortLang:"fr",letsGo:"C'est parti !",YourEmail:"Votre email",PleaseEnterYourEmailAddress:"Veuillez saisir votre adresse email",PleaseEnterAValidEmailAddress:"Veuillez saisir une adresse email valide",orSignInWith:"Ou connectez-vous avec",IncorrectLoginPleaseRetry:"Identifiants incorrects, veuillez réessayer",ForgottenPassword:"Mot de passe oublié ?",YourPassword:"Votre mot de passe",tellUsAboutYou:"Faisons connaissance",HowWeUseYourData:"Vos données personnelles",Male:"Homme",Female:"Femme",YourName:"Votre nom",YourSex:"Sexe",YourAge:"Age",PleaseEnterYourName:"Veuillez saisir votre nom",YourCountry:"Votre pays",PleaseSelectYourCountry:"Veuillez sélectionner votre pays",YourZipCode:"Votre code postal",PleaseEnterYourZipCode:"Veuillez entrer un code postal (nécessaire pour lister les jeux à proximité de chez vous)",PleaseEnterYourPassword:"Veuillez saisir votre mot de passe",EnterTheCodeYouReceivedByEmail:"Entrez le code que vous avez reçu par email (cela peut prendre 5 minutes)",IncorrectCodePleaseRetry:"Code incorrect, veuillez réessayer",SignOutInProgress:"Déconnexion en cours ...",ErrorStandardMessage:"Une erreur est survenue, veuillez vérifier que vous avez du réseau et contacter le support si le problème persiste",YourAccountIsBlocked:"Votre compte est bloqué. Veuillez réessayer dans une heure",YourNewPassword:"Votre nouveau mot de passe",NewCode:"Générer un nouveau code",ANewCodeHasBeenSent:"Un nouveau code a été envoyé",YourPasswordMustBe8digitsLength:"Votre mot de passe doit faire 8 caractères min.",PasswordComplexityRule:"Votre mot de passe doit contenir au moins une majuscule et un nombre",YourAccountIsNowValidated:"Votre compte est maintenant validé",IfYouUseGraalyForTheFirstTime:"Bienvenue dans Graaly ! Nous allons commencer par une courte présentation de l'application, cela prendra 5 minutes. ",YourScore:"Votre score",YourRevenues:"Vos gains",QuestsSuccessful:"Jeux résolus",QuestsCreated:"Jeux créés",CreateANewQuest:"Créer un nouveau jeu",PublishedSince:"Publié",Unpublished:"Non publié",NoQuestCreated:"Aucun jeu créé",NoQuestPlayed:"Aucun jeu résolu",NoQuestPlayedLong:"Aucun jeu résolu. Pour résoudre un jeu, retournez à l'accueil !",PlayedOn:"Résolue",Succeeded:"Réussi !",ContinueThisQuest:"Vous n'êtes pas allé au bout. Continuer ?",BackToMap:"Retour",MyProfile:"Mon profil",News:"Actus",Edit:"Modifier",EditYourInformations:"Modifier mes informations",emailExample:"votre.nom@mail.com",Save:"Enregistrer",ChangeYourPassword:"Modifier mon mot de passe",CurrentPassword:"Mot de passe actuel",NewPassword:"Nouveau mot de passe",AccountModifiedLong:"Votre compte a été modifié. Si vous avez modifié votre adresse email, un message vient de vous être envoyé sur cette adresse pour la confirmer.",SignOut:"Déconnexion",HowTo:"Comment faire ?",ReachScoreOf:"Atteignez un score de {score} pour débloquer de nouvelles énigmes",MyLevel:"Mon niveau",Difficulty:"Difficulté",Normal:"Normal",Easy:"Facile",Hard:"Difficile",VeryHard:"Très difficile",Play:"Jouer",CouldNotRetrieveYourPosition:"Cette partie du jeu a besoin de votre position géographique, mais elle n'a pas pu être récupérée.",PossibleReasons:"Raisons possibles :",ClosedEnvironment:"Signal GPS faible : déplacez vous vers une zone dégagée à l'extérieur",GeolocationDisabled:"Géolocalisation désactivée sur votre appareil",HowToActivateGeolocationOnChrome:"Ouvrez les <strong>Paramètres Système</strong>, allez dans <strong>Sécurité et Position</strong>, puis <strong>Position</strong>, et activez l'option <strong>Activé</strong>. Ceci peut changer légèrement selon votre version d'Android.",HowToActivateGeolocationOnIOs:"Ouvrez les <strong>Réglages</strong>, allez dans <strong>Confidentialité</strong>, puis <strong>Service de localisation</strong>, et activez l'option <strong>Service de localisation</strong> et vérifiez que la localisation est activée pour l'application Graaly dans la liste du dessous. Ceci peut changer légèrement selon votre version d'IOS.",Author:"Auteur",nbPointsToWin:"{nb} points à gagner",SolveThisQuest:"Jouer",ContinueTheQuest:"Continuer le jeu",Language:"Langue",StartingPoint:"Lieu de départ",Duration:"Durée",minutes:"minute(s)",Languages:"Langues",ScrollForMoreDetails:"En savoir +",km:"km",NoQuestForThisSearch:"Aucun jeu ne correspond à votre recherche",NoPlayerForThisSearch:"Aucun joueur ne correspond à votre recherche",NoDesignerForThisSearch:"Aucun créateur ne correspond à votre recherche",WhyDontYouCreateAQuest:"Pourquoi ne pas créer ce jeu ?",Inventory:"Inventaire",InventoryUsage:"Touchez un objet pour l'utiliser",InventoryZoom:"Touchez un objet pour zoomer",noItemInInventory:"Encore aucun élément dans votre inventaire",ContinueThisStep:"Continuer ce jeu",YouAlreadyStartThisQuest:"Vous avez déjà commencé ce jeu, voulez vous continuer à l'étape où vous vous étiez arrété ?",Restart:"Recommencer",Continue:"Continuer",NoHintForThisStep:"Aucun indice pour cette énigme",Hint:"Indice",Hints:"Indices",CreateYourQuest:"Nouveau jeu",CreateYourPrivateQuest:"Créez votre jeu privée !",CreateYourPublicQuest:"Créez votre jeu publique !",andWin:"et gagnez",Start:"Commencer",AcceptTheRules:"Accepter les règles",SomeMoney:"De l'argent",BuilderWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Cette application peut être utilisée par un jeune public, votre jeu ne doit pas contenir de la violence, des images effrayantes, ou des références au sexe, aux drogues, à l'alcool, au tabac, etc.</li><li>Si le lieu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Votre jeu ne doit pas concerner un lieu pour lequel un jeu existe déjà, sauf si le thême est suffisamment différent</li><li>Votre jeu doit faire plus de 6 étapes. Nous vous conseillons d'en créer moins de 70.</li><li>Vous devez posséder les droits des images, vidéos et sons que vous utilisez.</li><li>Les visuels doivent être homogènes (photos réalistes, desssins, ...).</li><li>Notre équipe de modérateurs validera si votre jeu respecte ces règles et atteint un niveau de qualité suffisant. Dans le cas contraire, il vous sera demandé d'améliorer votre jeu, ou il sera refusé</li></ul></p>",BuilderPrivateWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 20 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderPrivateProWelcomeMessage:"<p>En appuyant sur le bouton Démarrer, vous acceptez les règles suivantes :<ul><li>Si le lieu du jeu ne vous appartient pas, ne demandez pas aux joueurs de toucher, déplacer, dégrader les lieux visités</li><li>L'histoire de votre jeu ne doit pas porter atteinte à des personnes vivantes ou ayant existé</li><li>Vous êtes limité à 200 invités (pour plus d'invités, veuillez nous contacter)</li></ul></p>",BuilderIntro:"Graaly vous permet de créer très simplement, et pas à pas, des jeux ludiques pour les autres joueurs. Ces jeux peuvent être des jeux de piste ou des escape games",BuilderProIntro:"Créez votre jeu avec Graaly",BuilderChooseUserType:"Etes-vous :",BuilderAddRoomMessage:"<p>En ajoutant votre salle, vous pouvez bénéficier gratuitement des services suivants :<ul><li>Visibilité dans notre annuaire</li><li>Statistiques</li><li>Lien vers votre page de réservation</li><li>Suggestion de votre salle à notre communauté</li></ul></p><p>Vos clients bénéficient aussi de services gratuits : <ul><li>Trouvez vos salles autour d'eux</li><li>Suivre les escape games joués par leurs amis et les défier sur vos salles</li><li>Sauver leurs succès pour gagner des points et défier leurs amis</li></ul></p>",AProfessional:"professionnel",AProfessionalDesc1:"En tant que professionnels, vous avez accès à des fonctionnalités avancées de Graaly (statistiques, personnalisation avancée, monétisation, QR code de démarrage rapide ...)",AnIndividual:"particulier",AnIndividualDesc1:"En tant que particulier, vous pouvez aussi créer des jeux, avec tous les types d'énigmes Graaly",TryForFree:"Tester gratuitement",FromPrice:"A partir de",PaymentOnUsage:"Paiement à l'usage",NewQuest:"Nouveau jeu",Intro:"Intro",Steps:"Etapes",Publish:"Mise en ligne",Title:"Titre",PleaseEnterATitle:"Veuillez entrer un titre",Category:"Catégorie",PleaseSelectACategory:"Veuillez sélectionner une catégorie",Description:"Description",StartingPointOfTheQuest:"Adresse de départ du jeu",MainLanguage:"Langue principale",UploadAPicture:"Télécharger une photo",YourPicture:"Votre photo",Museum:"Musée",CityOrDistrict:"Ville ou quartier",Countryside:"Sortie nature",Other:"Autre",French:"Français",English:"Anglais",QuestSaved:"Vos modifications sont enregistrées",YourQuestIsPublished:"Votre jeu est publié",YourQuestIsUnpublished:"Votre jeu est repassé en brouillon",DoYouWantToRemoveThisStep:"Souhaitez-vous vraiment supprimer cette étape ?",AddAStep:"Ajouter une étape",TestYourQuest:"Tester votre jeu",PublishYourQuest:"Publier votre jeu",UnpublishYourQuest:"Dépublier votre jeu",SelectedLanguage:"Saisir le jeu en :",Close:"Fermer",ChooseTheStepType:"Choisir le type d'étape",Transition:"Transition",Quest:"Enigme",UseThisGame:"Utiliser ce modèle",NoneImmediate:"Aucun (immédiat)",NoneLocationAndDirection:"Lieu (et direction)",DateTime:"Date / heure",NoneNextStep:"Aucune (passer à l'étape suivante)",Medium:"Moyen",Text:"Texte",Level:"Niveau",AnswerNb:"Réponse {nb}",YouCantAddMoreThanNbAnswers:"Vous ne pouvez ajouter plus de {nb} réponse(s)",YouMustDefineAtLeastNbAnswers:"Vous devez ajouter au moins {nb} réponses",KeepEnigmaQuestionsShort:"Le texte doit être court pour être facile à lire. Si vous avez besoin de plus de texte, nous vous conseillons d'ajouter une étape 'Image & Texte' avant celle-ci.",CodeKeypadFormatError:"Pour ce champ (requis), saisissez de 2 à 6 caractères (seulement des chiffres, ou '*', ou '#').",StepSettingsFormError:"Il y a des erreurs. Veuillez les corriger et essayez à nouveau.",PleaseUploadAFile:"Veuillez télécharger un fichier.",RequiredField:"Ce champ est requis.",Question:"Question",UploadABackgroundImage:"Télécharger une image",AddABackgroundImage:"Ajouter une image de fond",WarningImageResize:"L'image sera redimensionnée au format d'un téléphone (format portrait)",UploadAVideo:"Télécharger une vidéo",NoVideoUploaded:"Aucune vidéo téléchargée",Remove:"Supprimer",remove:"supprimer",DisplayDistanceBetweenUserAndLocation:"Afficher la distance entre la personne et le lieu",DisplayDirectionArrow:"Afficher les flèches de direction",ResponseTypes:"Types de réponse",PossibleAnswers:"Réponses possibles",Texts:"Textes",Pictures:"Photos",SelectTheGoodAnswer:"Selectionner la bonne réponse",NoPictureUploaded:"Aucune image téléchargée",AddAnAnswer:"Ajouter une réponse",ExpectedAnswer:"Réponse attendue",Code:"Code",ExpectedColorCodeAnswer:"Combinaison de couleurs attendue :",ImagesUsedForCode:"Ajouter les images pour le code",AddAnImage:"Ajouter une image",ExpectedCode:"Code attendu",UploadThePictureOfTheObjectToFind:"Téléchargez l'image de la chose à trouver",UploadTheObjectToFind:"Téléchargez un fichier GLB de l'objet 3D",UploadedPicture:"Image téléchargée",UploadThePuzzlePicture:"Télécharger l'image du puzzle",WarningImageSizeSquare:"Votre image sera recadrée pour être carrée",YourPuzzlePicture:"Image de votre puzzle",ClickOnTheLocationTheItemMustBeUsed:"Sélectionnez la partie de l'image où l'objet doit être utilisé",UploadTheItemPicture:"Télécharger l'image de votre objet",YourItemPicture:"Image de votre objet",ObjectName:"Nom de l'objet",ObjectToUse:"Objet à utiliser",SelectedObject:"Objet sélectionné",ClickOnTheItemThatIsToFind:"Sélectionnez la zone de l'image que le joueur doit trouver",StepSaved:"Etape enregistrée",TechnicalIssue:"Problème technique, veuillez vérifier que vous avez du réseau et ré-essayer plus tard",TechnicalProblem:"Problème technique",SaveThisStep:"Enregistrer cette étape sans tester",SaveAndTestThisStep:"Enregistrer et tester cette étape",GraalyIsOptimizedForSmallerScreens:"L'application est optimisée pour des appareils mobiles. Veuillez tenir votre mobile verticalement ou redimensionner votre page",Overview:"Aperçu",Submit:"Valider",GoodAnswer:"Bonne réponse !",WrongAnswer:"Mauvaise réponse !",Next:"Suivant",SecondTry:"Mauvaise réponse. Il vous reste {nb} essai(s)",Clear:"Effacer",Confirm:"Valider",WrongGoodCodeWas:"Raté ! Le bon code était :",TheScreenCaptureWillAppearInThisBox:"La capture photo apparaîtra dans cette case",Cancel:"Annuler",Check:"Vérifier",TakeThePicture:"Prendre la photo",WellDone:"Bien joué !",PhotosDoesntMatch:"Malheureusement, cette photo ne correspond pas.",DistanceInMeters:"Distance du lieu à trouver : {distance} mètres",YouHaveFoundThePlace:"Bravo ! Vous avez trouvé",points:"points",Pass:"Passer",YourAnswer:"Votre réponse",ConfirmTheAnswer:"Valider la réponse",PleaseSelectAnItemFirst:"Sélectionnez un objet dans votre inventaire d'abord (bouton en bas à gauche), puis touchez l'image pour l'utiliser.",UseItemNothingHappens:"Rien ne se produit. Essayez un autre endroit, ou utilisez un autre objet.",FindItemNothingHappens:"Rien ne se produit. Essayez un autre endroit.",NoTitle:"Aucun titre",AddYourSteps:"Commencez par créer une étape pour votre jeu",AddYourChapters:"Commencez par créer un chapitre, et ajoutez y les premières pages de votre énigme",ActivateTheLanguageVisible:"Activez les langues pour que votre jeu soit jouable",ActivateTheLanguageVisiblePrivate:"Activez les langues pour que vos invités puissent jouer",LanguagesPublished:"Publier le jeu en",LanguagesPublishedForPrivate:"Rendre visible pour les invités",PageLanguagesPublished:"Publier la fiche en",ModifyThePicture:"Modifier l'image",Picture:"Photo",LeaveQuest:"Quitter le jeu",YouHaveWinANewItem:"Vous avez trouvé un nouvel objet",YouCanNotUseAnItemInThisStep:"Vous ne pouvez utiliser d'objet dans cette énigme",Ok:"Ok",ConfirmHint:"En utilisant l'indice, vous gagnerez moins de points, êtes-vous sûr(e) de vouloir l'utiliser ?",YouWin:"Vous avez gagné",WhatCanYouDoWithThesePoints:"Que faire avec ces points ?",ReviewThisQuest:"Votre avis",ShareYourSuccess:"Partagez votre réussite !",YouAlreadyPlayThisQuestSoYouWinNoPoints:"Vous avez déjà gagné précedemment les points de ce jeu",ResolveOtherQuestsToWinPoints:"Résolvez de nouveaux jeux pour gagner des points",ChallengeYourFriends:"Défiez vos amis !",ConfirmPass:"Etes-vous certain de passer cette étape, vous ne gagnerez pas de point ?",TouchWhereYouUseThisItem:"Touchez l'endroit où vous utilisez cet objet",YourLanguage:"Votre langue",NoFriend:"Vous n'avez encore aucun ami",YourRanking:"Votre classement",Ranking:"Classement",Like:"J'aime",NoNews:"Aucune actualité pour le moment",BuyCoinsToPlay:"Acheter de l'énergie pour jouer",YourRatingHasNotBeenSaved:"Votre vote n'a pu être pris en compte. Peut-être avez vous déjà noté ce jeu",YourRatingHasBeenSaved:"Votre vote a été pris en compte",GetCloserToStartingPoint:"Rapprochez-vous du lieu de départ",OpenLocationSettings:"Ouvrir les paramètres de localisation",LocationToFind:"Lieu à trouver",Address:"Adresse",OrDefineGPSLocation:"Ou tapez les coordonnées GPS",DefineGPSLocation:"Tapez les coordonnées GPS",Latitude:"Latitude",Longitude:"Longitude",PleaseUploadAFileInPNGFormat:"Veuillez télécharger une image avec transparence au format PNG",GPSCoordinates:"Coordonnées GPS",TerritoriesWon:"Conquête de territoires",YourWorldRanking:"Mon classement mondial",YourCityRanking:"Mon classement dans ma ville",PlayAllQuestsInACityToWin:"Réussissez tous les jeux d'une ville pour obtenir toutes les récompenses",NoRankingYet:"Votre classement n'est pas encore calculé, veuillez attendre demain",Challenge:"Défier",ChallengeAllFriends:"Défier tous vos amis",TypeNameOrAddressOfYourFriends:"Taper le nom ou l'email de vos amis",Or:"Ou",Select:"Selectionner",Add:"Ajouter",Administrate:"Administrer l'app",QuestUnderValidation:"Votre jeu n'est plus modifiable. Votre jeu va être validé par nos game masters. Cela peut prendre quelques jours. Veuillez vérifier votre boîte mail pour plus d'information",PublicationRequested:"En cours de validation",PublicationRejected:"Publication rejetée. Appuyez ici pour savoir pourquoi",QuestPublicationRejected:"Votre jeu n'a pas été publiée. Vous allez recevoir un email vous expliquant comment l'améliorer pour permettre sa publication",TouchTheObject:"Vous y êtes ! Levez votre téléphone et touchez l'élément à trouver",ObjectSize:"Taille de l'objet",TouchDistance:"L'objet peut être touché à moins de...",YouWonABonus:"Vous avez gagné un bonus",AddATown:"Ajouter une ville",Shop:"Boutique",Coins:"Energie",coins:"energie",Choose3DModel:"Choisissez un modèle 3D",ObjectIsTooFar:"L'objet est trop éloigné pour être visible à l'écran. Essayez de vous rapprocher.",LastItemIsUniq:"La dernière image sera unique dans le jeu",YouMustDefineStartLocation:"Vous devez définir l'adresse du point de départ du jeu",ClickOnArrowToMoveToNextStep:"Appuyez sur la flèche en bas à droite pour passer à l'étape suivante",YourQuestMustContainAtLeast6Steps:"Votre jeu est trop court, vous devez créer au moins 3 étapes",YourQuestMustContainLessThan50Steps:"Votre jeu est trop long, vous devez créer moins de 100 étapes",WarningNoLocation:"Recherche de votre localisation ...",WarningLowBattery:"Pensez à charger votre mobile pour jouer",WarningNoNetwork:"En attente du réseau ...",WarningLowNetwork:"Réseau faible, veuillez patienter ...",CouldNotDisplayObject:"Désolé, une erreur est survenue au chargement de l'objet à trouver, il ne peut donc pas être affiché. Veuillez redémarrez l'application. Si le problème persiste, passez cette étape.",CouldNotEnableAR:"Nous n'avons pas pu détecter l'orientation de votre téléphone. Pas de panique ! Vous pouvez quand même jouer en mode simple.",Step:"Etape",EasyLongDesc:"Facile, tout public même jeune (> 6 ans)",NormalLongDesc:"Normal, sans grosses difficultés",HardLongDesc:"Expert, pour les fans d'énigmes",RemoveThisQuest:"Supprimer ce jeu",AreYouSureYouWantToRemoveThisQuest:"Etes-vous sûr(e) de supprimer ce jeu ? Il sera définivement supprimé.",Modify:"Modifier",Editors:"Editeurs",InviteEditors:"Inviter un éditeur",InvitePeople:"Inviter un joueur",InviteEditorsHelp:"Tapez l'adresse email de l'éditeur que vous invitez",InviteInviteesHelp:"Tapez l'adresse email de la personne que vous invitez",UserIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",EditorIsNotAGraalyUser:"Limite dépassée ou cette personne doit créer un compte Graaly.",OtherOptions:"Autres options",SelectPictureInTheList:"Sélectionner l'objet dans la liste",HintText:"Texte de l'indice",NewHint:"Indice supplémentaire","2DPicture":"Image à plat","3DObject":"Objet en 3D",ObjectFormat:"Format de l'objet",ImagesUsedForCards:"Images des cartes",OkThanks:"Ok, merci !",CreateAQuest:"Créer un jeu",NoThanks:"Non merci",Character:"Personnage",Rankings:"Classements",UseMyCurrentGPSLocation:"Utiliser mes coordonnées GPS actuelles",MarkersFile:"QR Codes",ChooseTheMarker:"Choisissez le symbole",Download:"Télécharger",Marker:"Symbole",Choose:"Choisir...",ExtraTextFieldLabel:"Texte complémentaire 'En savoir plus'",ReadMore:"En savoir plus",ClickHereToKnowMore:"Appuyer ici pour en savoir plus",FriendsAdded:"Vous suivez cettte personne maintenant",InvitationSent:"Invitation envoyée",Email:"Email",EmailIsNotValid:"Adresse email invalide",PhoneNumber:"Numéro de téléphone",InvalidPhoneNumber:"Numéro invalide",AreYouSureYouWantToRemoveThisFriend:"Êtes-vous certain(e) de ne plus vouloir le/la suivre",Suggestions:"Suggestions",FindWithEmail:"Trouver un ami avec son email",FindWithPhone:"Trouver un ami avec son num. de télephone",YourPhoneNumber:"Votre numéro de téléphone",phoneExample:"06 12 34 56 78",Pro:"Pro.",Storekeeper:"Vous êtes un professionnel ?",StorekeeperDesc:"Et vous souhaitez utiliser le jeu pour attirer de nouveau clients ou visiteurs ?",TransparentImageAboveCameraStream:"Image transparente sur le flux caméra",GeolocationFailed:"Impossible de vous géolocaliser",GeolocationFailedDesc:"Nous n'avons pas réussi à vous géolocaliser, soit vous n'avez pas de réseau, soit vous avez bloqué la géolocalisation pour cette app",NumberOfColorsInTheCode:"Nombre de couleurs dans le code",NumberOfImagesInTheCode:"Nombre d'images dans le code",FindMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Bonne chance !",TouchObjectOnMarkerHelp:"Visez le bon QR code avec la caméra de votre téléphone. Un QR code est une figure carrée composée de point noirs. Bonne chance !",LocationSearching:"Recherche de votre position ...",ConfirmSaveChanges:"Enregistrer les modifications ?",Yes:"Oui",No:"Non",WeNeedMoreInformationAboutYou:"Créez votre profil !",WeNeedMoreInformationAboutYouDesc:"C'est simple et ça vous débloque des fonctionnalités utiles",RemoveYourAccountDesc:"En supprimant votre compte, vous allez perdre votre score, vos achats, votre progression et toutes autres données, et vous ne pourrez plus vous connecter à l'application",RemoveYourAccount:"Supprimer mon compte",IConfirmIWantToRemoveMyAccount:"Je confirme que je veux supprimer mon compte",AreYouSureYouWantToRemoveYourAccount:"Êtes-vous sûrs de supprimer votre compte, et de ne plus pouvoir vous connecter ? Vous ne pourrez pas annuler cette action !",YourAccountIsRemoved:"Votre compte est supprimé",CreateMyAccount:"Créer mon compte",IAlreadyHaveAnAccount:"J'ai déjà un compte",Reviews:"Avis",CommentThisQuest:"Commentaires pour l'auteur",Send:"Envoyer",ReviewSent:"Avis envoyé à l'auteur. Merci !",Optional:"facultatif",Colon:" :",Rating:"Note",PleaseRateTheQuest:"Veuillez mettre une note au jeu avant d'envoyer votre avis.",QuestNotReviewed:"Ce jeu n'a pas encore reçu d'avis.",ClickHereToStartDiscoveryQuest:"Appuyez ici pour démarrer le jeu de découverte",contactUsPro:'Vous pouvez retrouver nos offres professionnelles sur <a href="'.concat(s,'" target="_blank">').concat(s,'</a> ou nous contacter à <a href="mailto:').concat(a,'">').concat(a,"</a>."),GeolocationNotSupported:"Désolé, votre appareil ne permet pas la géolocalisation.",TechnicalErrorReloadPage:"Problème technique, appuyez pour relancer",TechnicalProblemNetworkIssue:"Veuillez vérifier que vous avez du réseau mobile ou retestez plus tard",Search:"Rechercher",CurrentScore:"Score actuel",SolveAgainThisQuest:"Résoudre à nouveau",BackToQuest:"Retour au jeu",min:"min",pts:"pts",SportQuest:"jeu nature",DiscoveryQuest:"jeu découverte",CulturalQuest:"jeu culturel",ChildQuest:"jeu pour enfants",TransportQuest:"jeu en moyen de transport",ShopQuest:"Découverte de commerces",EnterpriseQuest:"Découverte d'entreprise",NightQuest:"jeu nocturne",ExtremQuest:"jeu extrême",CulinarQuest:"jeu culinaire",SkipTutorial:"Passer l'aide",SkipTutorialDesc:"L'aide vous permet de mieux comprendre comment jouer avec Graaly. Vous pouvez passer l'aide et la réactiver plus tard, dans votre profil",Tutorial:"Aide en ligne",IWantToRestartTutorial:"Redémarrer l'aide",DurationBeforeTextAppearAbovePicture:"Durée avant que le texte ne recouvre l'image de fond (secondes)",pointsToWin:"point(s) à gagner",YouAlreadyPlayedThisQuest:"Vous avez déjà réussi ce jeu (aucun point à gagner)",YourLevel:"Votre niveau",MyScore:"Mon score",Score:"Score",PleaseSelectYourSex:"Veuillez indiquer votre sexe",PleaseSelectYourAge:"Veuillez indiquer votre age",RankingIntro:"Voici les meilleurs scores pour ce jeu",CloseQuestRanking:"Retour au jeu",RankingEndIntro:"Voici votre classement parmis vos amis",CloseEndRanking:"Retour au jeu",NoFriendsLong:"Vous ne suivez encore personne",IAgreeTheTermsAndConditions:"Je suis d'accord avec les <a href=\"javascript:navigator.app.loadUrl('".concat(r.terms.fr,"', { openExternal: true })\">conditions d'utilisation</a>"),PleaseAgreeTheTermsAndConditions:"Veuillez accepter les conditions d'utilisation pour utiliser Graaly",IAgreeThePrivacyPolicy:"Je suis d'accord avec la <a href=\"javascript:navigator.app.loadUrl('".concat(r.privacy.fr,"', { openExternal: true })\">politique d'utilisation des données personnelles</a>"),PleaseAgreeThePrivacyPolicy:"Veuillez accepter la politique de confidentialité pour utiliser Graaly",TermsAndConditionsLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(r.terms.fr,"', { openExternal: true })\">Conditions d'utilisation</a>"),PrivacyPolicyLink:"<a href=\"javascript:navigator.app.loadUrl('".concat(r.privacy.fr,"', { openExternal: true })\">Politique d'utilisation des données personnelles</a>"),DoYouWantToRemoveThisChapter:"Etes-vous sur de supprimer ce chapitre, il ne doit contenir aucune étape ?",FollowStep:"Suit l'étape",StepSuccess:"Bonne réponse à",StepFail:"Mauvaise réponse à",NoCondition:"Aucune condition (démarre au début du chapitre)",Conditions:"Déclencheurs",AddACondition:"Ajouter un déclencheur",ConditionType:"Type de déclencheur",ConditionValue:"Valeur du déclencheur",YourStepCanOnlyFollowOneStep:"Votre étape ne peut suivre qu'une seule autre étape",ThisStepIsTriggeredWhen:"Cette étape est affichée quand",YouCanNotRemoveAChapterWithSteps:"Vous ne pouvez supprimer un chapitre avec des étapes. Veuillez supprimer les étapes d'abord.",ModifyTheChapter:"Modifier le chapitre",NewChapter:"Nouveau chapitre",AddASChapter:"Ajouter un chapitre",SelectANewObject:"Selectionner un autre objet",ThisStepIsNotShowToPlayers:"Cette étape n'est pas visible par les joueurs. Vous pouvez passer à l'étape suivante",By:"Par",YourChapterMustHaveAEndOfChapterStep:"Vous devez créer une étape de type Fin de chapitre dans chaque chapitre pour que le joueur passe au chapitre suivant",FollowingStepsHaveNoConditionsOnlyTheFirstStepCanHaveThis:"Les étapes suivantes n'ont pas de déclencheur. Seul la première étape d'un chapitre peut ne pas avoir de déclencheur",FollowingStepsHaveInvalidCondition:"Des étapes ont des conditions invalides (dépendent probablement d'étapes manquantes, ou vous avez créé une chaîne impossible, comme une condition circulaire)",FollowingStepsHaveNoValidParent:"Les étapes suivantes ont un déclencheur incorrect",IssuesInYouQuest:"Problèmes de votre jeu",IssuesInYourStep:"Problèmes de votre étape",DisplayRightAnswer:"Afficher la bonne réponse",Mode:"Mode",TouchA3DObjectOnTheMarker:"Toucher un objet 3D sur le marqueur",ScanTheMarker:"Scanner le bon marqueur (2 essais)",NothingOccurs:"Rien ne se passe, essayez autre chose",ClickOnButtonToAddStep:"Cliquer sur le + pour ajouter une étape dans ce chapitre",ScanTheMarkersLikeThat:"La marque à trouver et à scanner avec votre téléphone a une forme similaire à",ScanTheMarkersLikeThat2:"Pour scanner une marque, appuyez ci-dessous",LaunchTheScanner:"Lancer le scanner",RedirectionPleaseWait:"Redirection en cours ...",UpgradeRequired:"Vous devez mettre à jour votre application Graaly pour continuer à l'utiliser",SorryAnErrorOccurs:"Désolé, une erreur est survenue.",PleaseContactTheSupport:"Veuillez contacter le support.",CreateNewVersionDescription:"Vous allez créer un nouveau brouillon pour ce jeu. Si votre jeu est déjà publié, cette version restera accessible aux joueurs, jusqu'à ce que vous publiiez cette nouvelle version de votre jeu.",ClickHereToCreateANewQuestVersion:"Pour modifier votre jeu, cliquez ici",YourUnderValidationQuests:"Vos jeux en cours de validation",YourRejectedQuests:"Vos jeux rejetés",YourDraftQuests:"Vos brouillons",YourPublishedQuests:"Vos jeux publiés",QuestDraftVersion:"Jeu non publié",PageDraftVersion:"Page non publiée",PrivateQuest:"Jeu privé",PublicQuest:"Jeu public",Invitees:"Invités",YouHaveInvitations:"{nb} invitation(s)",AreYouSureToAddThisNewLanguage:"Cette langue n'est pas encore configurée pour votre jeu, voulez-vous l'ajouter ?",Results:"Résultats",ClosePrivateQuest:"Clore le jeu",ClosePrivateQuestDesc:"En cliquant ici, votre jeu ne sera plus jouable. Vous aurez alors accès aux scores des joueurs et le classement.",ClosePrivateQuestAlert:"Etes-vous sûr(e) de clore ce jeu ? Elle ne sera plus jouable",NoPlayerForThisQuest:"Personne n'a joué à ce jeu",NoPlayersYetForThisQuest:"Encore aucun joueur pour ce jeu",PrivateQuestDesc1:"Votre jeu est destiné à votre groupe d'amis ou des personnes que vous choisissez, et n'est pas visible par les autres.",PublicQuestDesc1:"Vous créez un jeu pour faire découvrir un lieu, une activité, une entreprise.",PublicQuestDesc2:"Une fois validé par les games masters, ce jeu sera visible et jouable par tous",PublicProQuestDesc1:"Votre jeu est jouable par tous les joueurs Graaly. Vous payez un petit montant par partie ou partagez les revenus avec nous.<p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PublicProQuestDesc2:"<p>Si votre jeu est payant pour les joueurs, vous pouvez soit utiliser le système de paiement intégré à Graaly soit gérer vous même le paiement</p><p>Concernant le système de paiement intégré, Google/Apple prennent 30% des revenus</p><p>Dans tous les cas Graaly conserve 30% des revenus</p><p>Le reste est pour vous, soit de 40% à 70% des revenus.</p><p>Graaly vous reverse votre part mensuellement</p><p>Si votre jeu est gratuit pour les joueurs, Graaly vous facture mensuellement 0,25 € HT par joueur, soit moins que le facicule papier que vous devrier acheter sans application mobile</p><p>Vous pouvez désactiver votre jeu à tout moment</p><p>Contactez-nous à contact@graaly.com pour plus d'information</p>",PrivateProQuestDesc1:"Votre jeu est dédié à des joueurs définis. Vous payez un montant par joueur ou partagez les revenus avec nous. Contactez-nous à contact@graaly.com pour plus d'information",CreatePrivateQuest:"Créer un jeu privé",BuyPrivateQuest:"Acheter un jeu privé",OnlyBuyableOnMobile:"Seulement disponible sur mobile",AcceptAndBuyAPrivateQuest:"Accepter et acheter un jeu privé",CreatePublicQuest:"Créer un jeu public",CurrentlyPlaying:"Jeu en cours",FinalRanking:"Classement final",FinalRankingIntro:"Voici les scores pour ce jeu",YourQuestIsClosedAndCanNotBePublishedAnymore:"Votre jeu est clos, et ne peut plus être publiée",YourQuestContainsErrorsInSteps:"Votre jeu présente des erreurs dans l'onglet Etapes. Veuillez les corriger",QuestType:"Type de jeu",helpQuestType:"Un jeu de piste comporte une liste d'énigme qui se suivent de façon linéaire. Un jeu propose des énigmes qui peuvent être résolue dans un ordre non défini, la résolution de plusieurs énigmes débloquent d'autres énigmes. Si vous êtes nouveau sur Graaly, nous vous conseillons de commencer par un jeu de type jeu de piste. Vous pouvez transformer un jeu de piste en escape game, mais pas le contraire.",basicEditor:"Jeu de piste (éditeur simple)",advancedEditor:"Escape game (éditeur avancé)",UsedOver:"{current} utilisés sur {limit}",QuestMedia:"Fichiers du jeu",YouDoNotUseAnyMediaYetInYourQuest:"Vous n'utilisez encore aucun media dans votre jeu",Feedback:"Vos commentaires",Back:"Retour",FeedbackTitle:"Envoyer un commentaire",FeedbackIntroduction:"Si vous souhaitez envoyer un commentaire à l'auteur du jeu, ou noter le jeu, attendez la page de fin du jeu. Si vous souhaitez contacter l'équipe Graaly, pour par exemple signaler un contenu inapproprié dans ce jeu, veuillez taper votre commentaire ci-dessous :",YourMessageHasBeenSent:"Votre message a été envoyé",BackToBuilder:"Retour à la création du jeu",OrDownloadAFile:"Ou téléchargez votre image",UploadACharacter:"Télécharger un personnage",LoadingQuestDataForOfflineMode:"Préparation de votre jeu ...",ErrorOfflineSaving:"Problème technique, vous ne pourrez pas jouer ce jeu sans réseau",QuestNeedNetwork:"Il vous faut du réseau mobile pour lancer ce jeu. Recherchez du réseau, et cliquez sur le bouton ci-dessous pour relancer le chargement du jeu",ReloadQuest:"Recharger le jeu",ConnectToComputeScore:"Je suis connecté, calculez mon score !",ToSaveYouScoreYouNeedToConnect:"Pour enregistrer votre réussite et votre score, vous devez vous reconnecter au réseau mobile ou au wifi, puis cliquez sur le bouton",DownloadForOfflineUse:"Jouer sans réseau",Downloading:"Chargement ...",Loading:"Chargement ...",YouAreOfflineNoQuestsAvailable:"Désolé, il n'y a pas de jeu disponible pour être joué hors ligne.",ButtonsColor:"Couleur des boutons (optionnel)",AddALogo:"Ajoutez votre logo",YourLogo:"Votre logo",byteCharacter:"o",AvailableTomorrow:"Disponible dès demain",MoveCloserToTheObject:"Rapprochez-vous de l'objet pour le toucher",AddACardPair:"Ajouter une paire de cartes",AlreadyFriends:"Vous suivez déjà cette personne",UserCanNotBeFriendWithHim:"Vous ne pouvez pas être ami avec vous même",TooMuchFriends:"Vous ne pouvez pas suivre plus de 150 amis",FriendNotFound:"Cette personne n'est pas encore inscrite sur Graaly",YouHaveWin:"Vous avez gagné !",AreYouSureYouWantToMoveToAdvancedMode:"Etes-vous certain(e) de passer en mode avancé. Vous ne pourrez pas revenir en mode simple.",Country:"Pays",Town:"Ville",ZipCode:"Code postal",QuestDownloadFinished:"Téléchargement terminé. Vous pouvez désormais jouer ce jeu sans réseau.",GoToQuestValidation:"Aller à la validation",SessionExpired:"Votre session a expiré, merci de vous reconnecter.",AuthCheckError:"Une erreur est survenue, merci de contacter le support.",NoInternetConnection:"Pas de connexion internet",FileTooLarge:"Votre fichier est trop gros, veuillez réduire sa taille",PremiumQuest:"jeu Pro",MovePremium:"Passer ce jeu en mode pro",PremiumDefinition1:"Donnez plus de valeur à votre jeu !",PremiumDefinition2:"Les avantages du mode pro sont multiples : <ul><li><u>Un jeu plus personnalisé à vos besoins</u>: vous pouvez utiliser vos propres objets 3D et personnages, Vous pouvez personnaliser le jeu avec votre logo et vos couleurs, ... </li><li><u>Un jeu rentable</u> : Vous pouvez gagner de l'argent en rendant votre jeu payante</li><li>Vous pouvez accéder aux statistiques de votre jeu</li><li>Vous bénéficiez du support de notre équipe</li></ul>",PremiumDefinition3:"Pour pouvoir passer vos jeux en mode pro, contactez nous à sales@graaly.com",PremiumWarning:"Pour utiliser cette fonctionnalité, vous devez passer ce jeu en mode premium (voir dans les paramètres de votre jeu)",Statistics:"Statistiques",colons:" : ",TotalNumberOfPlayers:"Nombre total de parties jouées",NumberOfPlayersYesterday:"Hier",NumberOfPlayersByAge:"Nombre de joueurs par age",NumberOfPlayersBySex:"Nombre de joueur par sexe",AverageScore:"Score moyen",AverageDuration:"Durée moyenne (min)",Age1325:"Entre 13 et 25 ans",Age2639:"Entre 26 et 39 ans",Age4049:"Entre 40 et 49 ans",Age5064:"Entre 50 et 64 ans",Age65:"Plus de 65 ans",male:"Homme",female:"Femme",ReviewsAndStats:"Avis & stats",YourOrganizationSubscribeAProAccount:"Votre organization ({name}) a souscrit un compte pro Graaly",MembersOfYourOrganizationCreatedPremiumQuests:"Les membres de votre organisation ont créé des jeux pro",Status:"Statut",YouCanCreateNbPremiumQuests:"Vous pouvez encore créer {nb} jeu(s) pro(s)",YouCanNotCreateNewQuests:'Vous ne pouvez plus créer des jeux pro. Souscrivez à nos offres professionnelles sur <a href="'.concat(s,'" target="_blank">').concat(s,'</a> ou contactez-nous à <a href="mailto:').concat(a,'">').concat(a,"</a>."),PriceForPlayer:"Prix pour les joueurs",Free:"Gratuit",Paying:"Payant",Buy:"Acheter",Error:"Erreur",YouMustPlayThisKindOfQuestOnAMobileDevice:"Vous devez jouer ce jeu sur un appareil mobile",QuestPlayableOnMobile:"Ce jeu se joue sur mobile",PuzzleHelpText:"Déplacez les pièces pour les réordonner",ClickToEnlargePictures:"Appuyez sur les images pour les élargir",WaveThePhoneForGPSPrecision:"Faites des 8 avec votre téléphone pendant 3 secondes pour une meilleure précision GPS",TakeMobileVertically:"Tenez votre téléphone verticalement et recherchez",null:"Indéfini",TooMuchOfflineLoadingErrors:"Le chargement du jeu n'a pas fonctionné. Vous pouvez jouer le jeu si le réseau mobile fonctionne tout le long. Pressez ici pour fermer ce message",CancelOfflineWarning:"Vous avez annulé le chargement du jeu, le jeu ne fonctionnera pas si vous perdez le réseau mobile",TouchAndDragObject:"Touch and drag the object to rotate it. Use two fingers to zoom.",SuggestAQuest:"Suggérer un jeu",SuggestANewQuest:"Suggérer un nouveau jeu",YouLikedThisQuest:"Vous avez aimé ce jeu ?",SuggestAQuestDesc:"Vous souhaiteriez utiliser Graaly pour découvrir un lieu en jouant, ou pour motiver vos enfants ou élèves ? Proposez un lieu, nous nous occupons du reste !",NameOfThePlace:"Nom du lieu",NameOfThePlaceExample:"Musée du Louvre",SuggestContactInformation:"responsable (si vous l'avez)",SuggestContactInformationExample:"Nom, email ou téléphone",ThankYouForYourProposal:"Merci pour votre proposition",SuggestWarningMessage:"En complétant ce formulaire, vous nous aidez à identifier les jeux les plus demandées pour contacter les responsables des lieux concernés. Vous serez ensuite informé si un jeu est créée sur ce lieu.",InsertAStepAfter:"Insérer une étape après",QuestUpdated:"Le jeu a été modifié",PleaseRestartQuest:"Merci de rejouer le jeu depuis le début.",StartOnDate:"Date de publication",StepIsOnlyVisibleOnThisDate:"Cette étape n'est jouable qu'à partir de cette date",ThisStepIsAvailableIn:"Cette étape sera disponible dans",TimeRemainingHoursMin:"{day} j {hour} h {min} m {sec} s",PuzzleChangeMode:"Le puzzle ne fonctionne pas ?",PuzzleHelpTextClick:"Pressez la pièce à bouger, puis sur l'emplacement final",QRCodeIsNotWorking:"Le QR Code n'est pas reconnu",ScanQRCodeToStartQuest:"Scanner un QR Code",ScanQRCode:"Scanner un QR Code",MarkersToPrint:"QR Codes du jeu",MarkersToStartQuest:"Les joueurs peuvent jouer en scannant ce QR Code sur la page de login de Graaly",SaveQuestResultsMarker:"Vos joueurs peuvent scanner un QR Code pour enregistrer leur score dans Graaly (sur la page de login ou sur la page d'accueil). Pour les joueurs qui sont sortis de la salle dans les temps<br /><img src='{url3}' /><br />Pour les joueurs qui sont presque sortis dans les temps<br /><img src='{url2}' /><br />Pour les joueurs qui ne sont pas sortis<br /><img src='{url1}' />",ThisActionCanNotBeCanceled:"Cette action ne peut être annulée",AddAReward:"Télécharger une récompense",Reward:"Récompense",Rewards:"Badges",RewardPictureWarning:"Attention, le fond de votre image doit être en rouge, sinon pensez à utiliser une image avec un fond transparent. Si une partie de votre image est coupée, téléchargez une image au format carré.",YouWonAReward:"Bravo, vous avez gagné un badge",WonOtherRewardByPlayingOtherGamesInCity:"Vous pouvez gagner d'autres récompenses en jouant aux autres jeux dans la ville",UnknowUploadError:"Une erreur est survenue. Votre fichier est peut être trop gros ou n'a pas le bon format. Veuillez réessayer avec une image plus petite",helpQuestLogo:"Votre logo apparaîtra dans un bulle en bas de l'écran de jeu. Suivant les écrans, la bulle peut être assez petite, choisissez une image avec peu de détails.",helpQuestReward:"Les joueurs pourront gagner un badge à la fin du jeu. Cela les motive à jouer à votre jeu. Pour proposer un badge en récompense, téléchargez une image représentant le badge, avec un fond transparent (format .gif ou .png)",LoadingContacts:"Chargement des contacts",LoadContactsFromPhone:"Rechercher dans mon carnet d'adresse",NoMoreContactFound:"Aucun autre contact trouvé",CreateYourAccountMsg:"Créez votre compte pour sauvegarder votre score et jouer avec vos amis !",MaybeLater:"Peut-être plus tard !",LetsPlay:"Jouez",NewAccount:"Nouveau compte",PleaseAcceptDeviceMotionPermissionRequest:"Veuillez accepter que Graaly accède aux mesures des mouvements de votre appareil, afin de pouvoir jouer cette partie du jeu",PleaseAcceptDeviceOrientationPermissionRequest:"Veuillez accepter que Graaly accède aux mesures de l'orientation de votre appareil, afin de pouvoir jouer cette partie du jeu",DoYouWantToCreateAnAccount:"Pour créer un jeu, vous devez créer votre compte. Souhaitez-vous créer votre compte Graaly ?",UserWithSameEmailAlreadyExisting:"Un compte existe déjà avec cet email",PasswordTooWeak:"Votre mot de passe doit etre au 8 caractères, contenir une majuscule et un chiffre",AreYouSureYouWantToPublishThisQuest:"Etes-vous sûr de demander la publication de votre jeu ? Vous ne pourrez plus faire aucun changement jusqu'à ce que l'équipe Graaly confirme votre demande",YourCharacter:"Personnage personnalisé",AddACustomCharacter:"Ajouter un personnage",helpQuestCharacter:"Ce personnage s'affichera quand un joueur demandera un indice ou affichera un En savoir plus",AvailableColors:"Couleurs disponibles",TypeColorCode:"Entrez le code couleur. Ex: #ff55cc",TypeColorCodeName:"Entrez le nom de la couleur. Ex: Rouge",AddNewColor:"Ajoutez une nouvelle couleur",minutesSimplified:"M",hoursSimplified:"H",QuestIsFarFromUser:"<b>Vous n'êtes pas sur le lieu du jeu</b>.<br />En résolvant ce jeu à distance, vous allez manquer plein d'indices et donc de points",YouAlreadyDidThisQuest:"<b>Vous avez déjà réussi ce jeu</b>. Vous pouvez le résoudre à nouveau, mais il ne vous <b>rapportera aucun point</b>.",YouAreQuestOwnerDesc:"Vous êtes le créateur de ce jeu, il ne vous rapportera aucun point",GeneralWarning:"<b>Pour votre sécurité</b>, ne jouez pas à Graaly en conduisant ou quand votre vélo est en mouvement, soyez toujours vigilant à ce qui se passe autour de vous, ne pénétrez pas dans des propriétés privées sans autorisation, respectez les règles de sécurité quand vous vous déplacez.",RemoveScoringAndRating:"Cacher le score et la notation",TypeEndMessage:"Texte de fin qui remplace l'écran de score et de notation",ThanksForPlaying:"Merci d'avoir joué à ce jeu. A bientôt pour d'autres jeux !",EnlargePictureToFullWidth:"Elargir l'image en plein écran (déformer)",EnlargePictureToFullHeight:"Elargir l'image en pleine hauteur",PlayerCanTakeSnapshot:"Le joueur peut prendre des captures d'écran",SnapshotTaken:"Capture enregistrée dans vos photos",SnapshotTakenIssue:"Impossible de faire une capture",NbTrials:"Nombre d'essais",UserCanPass:"Le joueur peut passer l'étape",Welcome:"Bienvenue !",SignIn:"Connexion",Subscribe:"S'inscrire",EmailAlreadyUsed:"Cette adresse email est déjà utilisée. Connectez-vous ou demandez une modification de votre mot de passe",AroundYou:"Autour de vous",SeeMore:"Voir plus",Designers:"Créateurs",Difficulty1:"Simple",Difficulty2:"Normal",Difficulty3:"Difficile",ClosestQuestToYou:"Jeu proche de vous",YouAreNearThisQuest:"Jeu le plus proche de vous",YouAreInvitedToThisQuest:"Vous êtes invité à ce jeu",CreatedByGraaly:"Créées avec Graaly",FriendsQuests:"Joué par amis",ScoreAndBadges:"Score et badges",OneBadge:"1 badge",OnThisEscapeGameYouCanWin:"Sur ce jeu, vous pouvez gagner :",ScoreRange:"Entre {min} et {max} points",InProgressPreparation:"Préparation en cours",Warnings:"Mises en garde",Follow:"Suivre",Followed:"Suivi(e)",SolvedQuests:"Jeux résolus",Creations:"Créations",Badges:"Badges",FollowYourFriends:"Suivre vos amis",CreatedYourFirstQuest:"Créez votre premier jeu",DoNotFollowAnymore:"Ne plus suivre",AllTheseDataAreOptional:"Toutes ces données sont optionnelles",DataCountry:"Votre pays : utilisé pour afficher les bons jeux pour vous",DataZipcode:"Votre code postal : utilisé pour afficher les bons jeux pour vous",DataSex:"Votre sexe : utilisé pour afficher les bons jeux pour vous",DataAge:"Votre age : utilisé pour éviter certains jeux non adaptés à votre age",DataPhone:"Votre numéro de téléphone : utilisé pour vous connecter avec vos amis",EscapeGame:"Escape game",EscapeGames:"Escape games",Players:"Joueurs",YouHaveReachAScore:"Vous avez un score de {score} points",LevelReached:"Niveau atteint !",PointsToReachLevel:"{score} points à atteindre",Friends:"Amis",World:"Mondial",MyCountry:"Mon pays",MyCity:"Ma ville",NoRanking:"Encore aucun classement",Invitations:"Invitations",YouFollowThem:"Vous suivez",AddYourRoomInTheDirectory:"Référencez votre salle dans l'annuaire",AddYourRoom:"Ajoutez votre salle",ProAddYourRoom:"Vous pouvez ajouter vos salles dans Graaly et bénéficier de nombreux services gratuits",YourRoom:"Votre salle",PriceFrom:"Prix par joueur à partir de",ReadMoreLink:"Lien vers la page de réservation",SmallPicture:"Petite image",SeeYourQuestPage:"Visualiser la page",FromPricePerPlayer:"A partir de {price} par joueur ou partie",Book:"Réserver",YourBadges:"Vos badges",YouDoNotHaveBadgesYet:"Vous n'avez pas encore de badges. Pour gagner des badges, il vous faut résoudre des jeux qui proposent des récompenses.",FollowedPeople:"Personnes suivies",WeNeedYourPositionForThisFeature:"Nous avons besoin de votre position pour cette fonctionnalité",OtherCharacters:"Autres personnages",BackToTheMap:"Accueil",or:"ou",RefreshCacheRequired:"L'application en cache sur votre navigateur est obsolète. Veuillez passez en navigation privée pour rafraichir votre cache",FindFriendManually:"Trouvez vos amis manuellement",NoQuestAroundYou:"Nous n'avons trouvé aucun jeu autour de vous",CachedQuests:"Déjà téléchargé(s)",YourPresentation:"Présentez-vous",DuplicateThisQuest:"Dupliquer ce jeu",DoYouWantToOpenClonedQuest:"Voulez-vous modifier le nouveau jeu maintenant ?",OpenTheMap:"Carte des jeux",ReplacePictureByRedFilter:"Remplacer l'image par un filtre rouge",TotalNumberOfPlaysNotFinished:"Nombre de parties en cours",RoomDataWarning:"Certaines informations peuvent être obsolètes, n'hésitez pas à aller sur le site de l'escape game pour plus d'informations",AnonymousUser:"Joueur anonyme",NotWon:"A gagner",OnTopGames:"Jeux du moment",ThisStepOnlyWorkOnMobile:"Le scan de QR code ne fonctionne que sur l'application mobile",YourQuestHasNotBeenPublished:"Votre escape n'a pas été publié",OnDesktopDisplayMessage:"Sur ordinateur, vous devez réduire la taille de votre écran. Vous pouvez taper sur la touche F12 pour cela.",EventCode:"Code de l'événement",BoardMacAddress:"Adresse Mac de la carte",SuccessMessage:"Message de réussite",YourTime:"Votre temps",LimitNumberOfPlayerInOneHour:"Limiter le nombre de joueurs par heure (0 = illimité)",TooMuchUsersCurrently:"Trop de joueurs actuellement",OrSelectAnImageInTheList:"Ou sélectionnez une image dans la liste",IotObject:"Objet connecté",Protocol:"Protocole",SuccessRange:"Plage de succès",SuccessRanges:"Plages de succès",WriteTextWarning:"Accents et majuscules ne sont pas nécessaires",DistanceToWin:"Le joueur gagne quand il est à la distance suivante du lieu (m)",SplitMessageWithPipe:"Ajouter le signe '|' pour séparer votre texte dans plusieurs bulles",ClickHere:"Cliquez ici",FollowTheCreator:"Suivez le créateur",PlayersNumber:"Nombre de téléphones requis pour jouer (BETA)",helpQuestMultiplayer:"Cela défini le nombre de joueur minimum pour que le jeu soit jouable. Chaque joueur devra avoir un téléphone, et aura un rôle différent dans le jeu. Pour plus d'informations sur le mode multijoueur, regardez nos tutos Youtube",ThisIsAMultiplayerGame:"Ce jeu se joue en équipe",JoinATeam:"Rejoindre une équipe",ScanTheLeaderQRCode:"Scanner le QR Code du leader",CreateATeam:"Créer une nouvelle équipe",TeamName:"Nom de l'équipe",CreateTeam:"Créer l'équipe",OtherPlayersMustScanThisQRCode:"Les autres joueurs doivent scanner ce QR Code pour rejoindre votre équipe",ThisIsNotATeamQRCodeValid:"Ce code n'est pas valide ! Vous devez scanner le code qui s'affiche sur le smartphone de la personne qui a créé l'équipe",MyTeamIsCompleteLetsGo:"L'équipe est au complet, allons-y !",YouNeedMoreMembersToPlay:"Votre équipe doit être composée au minimum de {nb} membres. Membre(s) actuel(s) : {members}",Team:"Equipe",WaitingForOtherUsersActions:"En attente des autres joueurs",WaitingForOtherUsersActionsDesc:"Vous ne pouvez pas avancer tant que les autres joueurs n'ont pas réussi leurs énigmes",Player:"Joueur",All:"Tous",YouNeedToBeXPlayers:"Vous devez être au moins {nb} pour jouer",YouNeedAtLeastXEditorsToTest:"Vous devez avoir {nb} éditeurs pour tester ce jeu multijoueur (voir onglet Mise en ligne)",HereAreTheTesters:"Ce jeu est multijoueur, il sera testé par : {nameList}",MyBackgroundPictureImageDisplaysOnMobiles:"Affichage de mon image sur différents types de téléphones",MyPictureIsNotDisplayedWell:"Mon image s'affiche mal",MyPictureIsNotDisplayedWellDesc:"<b>Si votre image est mal cadrée sur toutes les tailles</b>: Il faut que votre image soit dans un format 900 pixels par 1200 pixels.<br /><b>Votre image n'est pas correcte sur la taille du centre</b>: Il faut que votre image présente une partie non utile sur 100 pixels à droite et à gauche de votre image. Vous pouvez ajouter une bordure noire de 100 pixels autour de votre image par exemple",RestartQuest:"Redémarrer le jeu",AreYouSureToRestartThisQuest:"Etes-vous sûr de redémarrer ce jeu ? Vous ne gagnerez aucun point en redémarrant le jeu.",PaymentOnMobile:"Paiement sur mobile",PaymentOnMobileHelp:"Le paiement est très simple pour les joueurs, juste en pressant un bouton. Cependant Google / Apple prennent 30% des revenus de votre jeu.",PaymentOnYourSide:"Paiement réalisé par vous",PaymentOnYourSideHelp:"Vous pouvez collecter le paiement dans votre boutique ou au travers de tiers (4Escape, ...)",Payments:"Paiements",CreateNewQRCodeForPlay:"Créer un nouveau QR Code pour un joueur qui a payé",Create10NewQRCodeForPlay:"Créer 10 nouveaux QR Codes",Create50NewQRCodeForPlay:"Créer 50 nouveaux QR Codes",AreYouSureYouWantToRemoveThisTierCode:"Etes-vous sûr de supprimer ce code ? Si vous avez envoyé ce code à un joueur, il ne pourra plus jouer !",BuyThisQuest:"Acheter ce jeu",YouHaveReceivedAQrCodeFrom:"Vous avez reçu un QR code de {author}",ScanTheUniqueQRCode:"Scanner le QR code à usage unique",BuyInOneClick:"Achetez en un clic",TechnicalIssueOrCodeAlreadyUsed:"Code déjà utilisé ou problème technique",ChangeTheBackgroundImageOnceClicked:"Changez l'image de fond quand le joueur a cliqué",Message:"Message",Frequency:"Fréquence",TriggerTheEvent:"Déclencher l'action",SearchingBluetoothDevice:"Recherche de l'appareil Bluetooth...",KeypadInput:"Saisie digicode",Horizontal:"Horizontal",Vertical:"Vertical",Open:"Ouvrir",ChestActions:"Actions sur le coffre",TriggerMode:"Mode de déclenchement",TriggerModeAuto:"Auto (au chargement de l'étape)",TriggerModeManual:"Manuel (le joueur doit toucher un bouton)",helpPlayer:"Pour chaque étape d'un jeu multijoueur, vous devez sélectionner le joueur qui verra cette étape. Les autres joueurs ne le verront pas, et auront un message d'attente jusqu'à que le joueur résolve l'énigme. Vous pouvez afficher une étape de type transition pour tous les joueurs, mais vous ne pouvez afficher une énigme que pour un joueur. Si vous souhaitez que tous les joueurs résolvent la même énigme, vous devez créer une étape pour chaque joueur. Pour plus d'information, regardez nos tutos Youtube.",ErrorMessageForNewTeamMember:"Problème technique ou nombre de joueurs atteint",YouNeedToUnpublishYourQuestToRemoveIt:"Vous devez dépublier vote jeu pour le supprimer",PleaseEnterYourTeamName:"Veuillez entrer le nom de votre équipe",Version:"Version",CountDownLabel:"Limite de temps de l’énigme",CountDownIsActive:"Entrez la limite de durée pour cette énigme",CountDownWarning:"Etes-vous certain(e) d'activer un compte à rebours ? Assurez-vous qu'il n'y a aucun risque pour le joueur, comme une route à traverser !",CountDownPopupfail:"Temps écoulé !",MaxScore:"Score maxi",YouMustTestThisStepOnMobile:"Vous devez tester ce type d'étape sur un appareil mobile",AreasNumber:"Nombre de zones à trouver",ItRemains:"Il reste",s:"s",LetsPlayWithoutAccount:"Jouer sans compte",ErrorDownloadNeedsToRestart:"Erreur lors du telechargement de l'enquete, voulez vous recommencer ?",StartCreation:"Devenir créateur ?",ErrorTakingSnapshot:"Impossible de faire la capture d'écran",YourAudioFile:"Votre musique de fond",AddAnAudioFile:"Ajouter une musique de fond",ObjectNeedToBeAppliedOnPicture:"L'objet est appliqué sur une partie de l'image",ReadNext:"LIRE LA SUITE",AlreadyPaied:"Acheté",HelpStepMessageInventory:"Afficher l'aide pour le bouton Inventaire",HelpStepMessageHint:"Afficher l'aide pour le bouton Indice",HelpStepMessagePrevious:"Afficher l'aide pour le bouton Retour",HelpStepMessageNext:"Afficher l'aide pour le bouton Suivant",HelpStepMessage:"Bienvenu.e.s dans votre interface !\n\nPour participer, il vous suffira de suivre les indications à l'écran.",HelpStepMessageInventoryMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>work</i></span></span></button></div>La valise vous sert à utiliser des objets que vous avez récupérés durant le jeu.",HelpStepMessageHintMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>lightbulb</i></span></span></button></div>L'ampoule vous sert à obtenir des indices.",HelpStepMessagePreviousMessage:"<div class='centered'><button type='button' class='q-btn inline q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_back</i></span></span></button></div>Pour revenir à l'étape précédente, appuyez sur la flèche de gauche.",HelpStepMessageNextMessage:"<div class='centered'><button type='button' class='q-btn q-btn-item non-selectable q-btn--standard q-btn--round q-focusable q-hoverable bg-primary' style='font-size: 20px; color: #fff;'><span class='q-btn__wrapper col row'><span class='q-btn__content text-center col items-center q-anchor--skip justify-center row'><i aria-hidden='true' class='material-icons q-icon'>arrow_forward</i></span></span></button></div>Pour passer à l'étape suivante, appuyez sur la flèche de droite.",HelpStepMessageEnd:"En cas de problème, n'hésitez pas à fermer l'application et à la redémarrer, vous reviendrez à la dernière étape réussie.",KenBurnsEffect:"Effet de zoom arrière sur l'image",Show:"Montrer",Hide:"Masquer",TotalSellings:"Ventes du jeu",RevenuesPayedFloor:"Paiement quand gains > 50€",QRCodeMessage:"Message affiché quand le joueur doit flasher un QR code (mode Escape game)",GeolocationMessage:"Message affiché quand le joueur doit rechercher plusieurs lieux en géolocalisation (mode Escape game)",TeamID:"Identifiant équipe",PleaseFillThisForm:"Veuillez compléter ce champ",Zoom:"Zoom",ScheduleGame:"Planifier le jeu",GameSchedule:"Planification du jeu",Reset:"Réinitialiser",SchedulingDescription:"Le jeu est jouable sur les créneaux :",From:"De",To:"A",QuestIsNotPlayableNow:"Le jeu n'est pas disponible actuellement",OpeningHours:"Heures d'ouverture",CreationStudioHelp:"<h3>Aide</h3>Nous vous proposons plusieurs ressources pour vous aider à utiliser le studio de création :<ul><li><a href='https://graaly.com/wp-content/uploads/2021/02/Graaly-Pr%C3%A9sentation-du-studio-de-cr%C3%A9ation-jan-2021.pdf' target='_blank'>Guide d'utilisation du studio</a></li><li>Des <a href='https://www.youtube.com/channel/UCAHXs8JuuV3bBDyggUelK2Q' target='_blank'>tutoriels vidéo</a> d'utilisation du studio de création</li></ul><div class='text-accent'>Nouveau ! Rejoignez le <a href='https://www.facebook.com/groups/1931590170321273' target='_blank'>groupe Facebook des créateurs de jeux Graaly</a> pour échanger sur vos problématiques avec les autres utilisateurs et avec nos développeurs !</div><br />Pour tester votre jeu, nous vous conseillons de :<ul><li>tester sur votre téléphone avec l'application Graaly</li><li>tester dans votre navigateur en <a href='https://developers.google.com/web/tools/chrome-devtools/device-mode' target='_blank'>mode développeur</a> (pour faire simple, cliquez sur la touche f12, puis sur l'icône en forme de tablette). Attention, certaines étapes ne fonctionnent pas dans ce mode (réalité augmentée, géolocalisation, scanne de QR code, superposition image et caméra)</li></ul>",TestWithSimulatorWarning:"Vous allez tester avec le simulateur. Certains types d'étapes ne sont pas fonctionnels. Pour un vrai test, utilisez l'application mobile Graaly",FontFamily:"Police de caractère pour les textes",ExportTexts:"Textes du jeu",Downloads:"Téléchargements",ForcePlayerToHaveAccount:"Forcer les joueurs à créer un compte Graaly",ForcePlayerToHaveAccountHelp:"Si cette option n'est pas activée, les utilisateurs peuvent jouer anonymement",ShareUserDataWithCreator:"Demander aux joueurs de partager leurs données avec vous",ShareUserDataWithCreatorHelp:"Un joueur accepte de partager ses données avec Graaly. Vous pouvez demander aux joueurs de partager leurs données avec vous, nous vous conseillons pour les motiver de faire gagner quelque chose (jeu concours, tirage au sort, bon de réduction, ...)",YouNeedToCreateYourAccountToPlay:"Vous devez créer votre compte pour joueur à ce jeu",ShareDataWithPartner:"Partager vos données avec le créateur du jeu",PartnerAskForYouData:"Le créateur du jeu souhaiterais accéder à vos données (adresse email, nom). Cela peut être pour vous permettre de participer à un tirage au sort, un jeu concours ou vous faire gagner un bon de réduction. Veuillez lire la description du jeu pour en savoir plus",UseHtmlInDescription:"Utiliser des balises HTML dans la question",DoNotDisplay:"Ne pas afficher",AddAnGPSLocation:"Ajouter un point GPS",BuildThePortraitRobot:"Construisez le portrait à trouver",Education:"Education",EducationDesc:"Nous ne proposons pas encore d'offre éducation, mais vous pouvez utiliser le mode professionnel, et nous contacter à contact@graaly.com pour plus d'information.",Call:"Appeler",BlurEffect:"Effet de flou",CheckpointReached:"Vous avez atteint un objectif intermédiaire ! La carte montre désormais le prochain lieu à atteindre.",DefaultMode:"Mode d'affichage par défaut",CompassMode:"Classique",CompassModeHelp:"Affichage d'une flèche de direction et de la distance à l'objectif",MapMode:"Carte",MapModeHelp:"Affiche une carte Google Maps avec les positions du joueur et de l'objectif",AllowToSwitchGeolocationMode:"Bouton pour changer le mode d'affichage",ApplyRedFilter:"Appliquer le filtre rouge",Chapters:"Chapitres",Chapter:"Chapitre",ChapterChangeWarning:"Attention, si vous changez le chapitre, vous supprimez tous ses déclencheurs et risquez d'avoir des incohérences au niveau des déclencheurs des autres étapes. Il faudra les modifier aussi dans les étapes qui en dépendent.",ResetHistoryAfter:"Empécher le retour arrière après cette étape",RestartChapterAfterStep:"Redémarrer le chapitre après cette étape",HideInventory:"Ne pas utiliser l'inventaire",ShowCountDown:"Afficher compte à rebours",StopGameAfterCountDown:"Arrêter le jeu quand le temps est fini",ItRemainsMinutes:"Il vous reste {time} minutes",CustomizeEndOfGame:"Personnaliser la fin du jeu",CustomizeGameInterface:"Personnaliser l'interface de jeu",GameAvailability:"Disponibilité du jeu",GamePayment:"Paiement du jeu",UserData:"Données utilisateurs",CustomizeGameIntroduction:"Personnaliser l'intro du jeu",RemoveGPSLocation:"Supprimer cette localisation",OverQuotaMessage:"Vous avez atteind la limite de stockage",RemoveFiles:"Supprimer des fichiers",InvalidTeamID:"Identifiant d'équipe invalide",HideFullScreen:"Ne pas afficher en plein écran (Android)",YourFullName:"Votre nom complet",TextColor:"Couleur du texte",GoodAnswersNumber:"Réponses correctes",PleaseEnterFirstNameAndLastName:"Veuillez entrer votre prénom et votre nom",PassTheQRCodeInFrontOfYourCamera:"Passez le QR code devant votre caméra",HideHideButton:"Cacher le bouton montrer/cacher",PleaseHoldYourDeviceFlat:"Veuillez tenir votre appareil à plat",MyLocationWarning:"La précision de la position GPS n'est pas assez fiable. Pour récupérer les coordonnées GPS, utilisez Google Maps (en cliquant sur un lieu, une bulle s'affiche avec la latitude et longitude), l'application 'Ma position GPS' sur Android ou l'application 'Mes coordonnées GPS' sur iPhone.",FindAllLocationsToStartSteps:"Déplacez-vous et trouvez chaque lieu !",ColorIndicatorExplaination:"Vous êtes à {distance}m d'un des lieux",YouWonNewGame:"Bravo ! Vous avez débloqué un nouveau jeu !",WarningLowGpsAccuracy:"Attention: précision GPS faible",PersistentLowGpsAccuracyPleaseSkipStep:"La précision GPS est toujours faible après plus d'une minute. Nous vous recommandons de passer cette étape (bouton en bas à droite).",LocationSaved:"Position de l'objectif mise à jour à partir de la position GPS de l'appareil.",CurrentLocation:"Position GPS actuelle",Accuracy:"Précision",Meters:"mètres",secondes:"seconde(s)"}}}},"38fa":function(e,t,s){},"3ba6":function(e){e.exports=JSON.parse('{"backpack":{"name":{"fr":"Sac à dos","en":"Backpack"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/5UQVd1Agl11","scale":0.4},"book":{"name":{"fr":"Livre","en":"Book"},"author":"Anastasiia Ku","url":"https://poly.google.com/view/0-_UGETLPsX"},"candelabra":{"name":{"fr":"Candélabre","en":"Candelabra"},"author":"BitGem","url":"https://sketchfab.com/models/89f71a03a338491c92ada680e6f51749","scale":0.005},"chest":{"name":{"fr":"Coffre","en":"Chest"},"author":"Alex “SAFFY” Safayan","url":"https://poly.google.com/view/3SGvQIwe214","scale":0.2},"ghost":{"name":{"fr":"Fantôme","en":"Ghost"},"url":"https://sketchfab.com/models/ea591844b42d459e86d0e7c9ab4cc43c","license":"Sketchfab standard, see https://sketchfab.com/licenses","translation":{"z":0.5}},"griffin":{"name":{"fr":"Griffon","en":"Griffin"},"author":"VitSh","url":"https://sketchfab.com/models/a8852f113416426bb06e6bba49a525a9","scale":0.3},"gun":{"name":{"fr":"Pistolet","en":"Gun"},"author":"legoingr","url":"https://sketchfab.com/models/bcf398f3109a4d0ea384dcd3196a695e","scale":0.02},"key":{"name":{"fr":"Clé","en":"Key"},"author":"Jerad Bitner","url":"https://poly.google.com/view/dR-kItm5ihP","scale":0.05},"knife":{"name":{"fr":"Couteau","en":"Knife"},"author":"vepr","url":"https://sketchfab.com/models/555a53a177314b789d31e49d731c2184","scale":4},"lamp":{"name":{"fr":"Lampe à pétrole","en":"Kerosene lamp"},"author":"Bruno Oliveira","url":"https://poly.google.com/view/3wJ6loGTYJj"},"lynx":{"name":{"fr":"Lynx","en":"Lynx"},"author":"Victor Tero Vescan","url":"https://www.turbosquid.com/3d-models/lynx-3d-max/844204","scale":0.7},"phone-booth":{"name":{"fr":"Cabine téléphonique","en":"Phone booth"},"author":"Dave Sutton","url":"https://www.cgtrader.com/free-3d-models/exterior/other/telephone-box"},"phone-rotary":{"name":{"fr":"Téléphone à cadran","en":"Phone (rotary)"},"author":"Zell-Wu","url":"https://sketchfab.com/models/eb42c07e79764c74aa5377e092f783ce","scale":0.015}}')},4:function(e,t){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id="4678"},"4c18":function(e){e.exports=JSON.parse('[{"label":"France","value":"FRA"},{"label":"Belgique","value":"BEL"},{"label":"Suisse","value":"CHE"},{"label":"Afghanistan","value":"AFG"},{"label":"Afrique du sud","value":"ZAF"},{"label":"Albanie","value":"ALB"},{"label":"Algerie","value":"DZA"},{"label":"Allemagne","value":"DEU"},{"label":"Andorre","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctique","value":"ATA"},{"label":"Antigua et Barbuda","value":"ATG"},{"label":"Arabie Saoudite","value":"SAU"},{"label":"Argentine","value":"ARG"},{"label":"Armenie","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australie","value":"AUS"},{"label":"Autriche","value":"AUT"},{"label":"Azerbaïdjan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahreïn","value":"BHR"},{"label":"Barbades","value":"BRB"},{"label":"Belize","value":"BLZ"},{"label":"Bengladesh","value":"BGD"},{"label":"Bermudes","value":"BMU"},{"label":"Bhoutan","value":"BTN"},{"label":"Bolivie","value":"BOL"},{"label":"Bonaire, Saint-Eustache et Saba","value":"BES"},{"label":"Bosnie Herzégovine","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Brésil","value":"BRA"},{"label":"Bulgarie","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Bélarus","value":"BLR"},{"label":"Bénin","value":"BEN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cambodge","value":"KHM"},{"label":"Cameroun","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Chad","value":"TCD"},{"label":"Chili","value":"CHL"},{"label":"Chine","value":"CHN"},{"label":"Chypre","value":"CYP"},{"label":"Colombie","value":"COL"},{"label":"Comores","value":"COM"},{"label":"Congo (République démocratique)","value":"COD"},{"label":"Congo","value":"COG"},{"label":"Costa Rica","value":"CRI"},{"label":"Croatie","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curacao","value":"CUW"},{"label":"Côte d\'Ivoire","value":"CIV"},{"label":"Danemark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominique","value":"DMA"},{"label":"Egypte","value":"EGY"},{"label":"Emirats Arabes Unis","value":"ARE"},{"label":"Equateur","value":"ECU"},{"label":"Erythrée","value":"ERI"},{"label":"Espagne","value":"ESP"},{"label":"Estonie","value":"EST"},{"label":"Ethiopie","value":"ETH"},{"label":"Fidji","value":"FJI"},{"label":"Finlande","value":"FIN"},{"label":"Fédération Russe","value":"RUS"},{"label":"Gabon","value":"GAB"},{"label":"Gambie","value":"GMB"},{"label":"Georgie","value":"GEO"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Grenade","value":"GRD"},{"label":"Groenland","value":"GRL"},{"label":"Grèce","value":"GRC"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinée Française","value":"GUF"},{"label":"Guinée Équatoriale","value":"GNQ"},{"label":"Guinée","value":"GIN"},{"label":"Guinée-Bissau","value":"GNB"},{"label":"Guyane","value":"GUY"},{"label":"Géorgie du Sud et les îles Sandwich du Sud","value":"SGS"},{"label":"Haiti","value":"HTI"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hongrie","value":"HUN"},{"label":"Ile Bouvet","value":"BVT"},{"label":"Ile Heard et îles McDonald","value":"HMD"},{"label":"Ile de Man","value":"IMN"},{"label":"Iles Aland","value":"ALA"},{"label":"Iles Caïmans","value":"CYM"},{"label":"Iles Cocos (Keeling)","value":"CCK"},{"label":"Iles Falkland (Malvinas)","value":"FLK"},{"label":"Iles Féroé","value":"FRO"},{"label":"Iles Mariannes du Nord","value":"MNP"},{"label":"Iles Marshall","value":"MHL"},{"label":"Iles Turques-et-Caïques","value":"TCA"},{"label":"Iles Vierges (États-Unis)","value":"VIR"},{"label":"Iles Vierges britanniques","value":"VGB"},{"label":"Iles mineures éloignées des États-Unis","value":"UMI"},{"label":"Indie","value":"IND"},{"label":"Indonesie","value":"IDN"},{"label":"Irak","value":"IRQ"},{"label":"Iran","value":"IRN"},{"label":"Irlande","value":"IRL"},{"label":"Islande","value":"ISL"},{"label":"Israel","value":"ISR"},{"label":"Italie","value":"ITA"},{"label":"Jamaïque","value":"JAM"},{"label":"Japon","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordanie","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kirghizistan","value":"KGZ"},{"label":"Kiribati","value":"KIR"},{"label":"Koweit","value":"KWT"},{"label":"L\'ile de Norfolk","value":"NFK"},{"label":"L\'île de noël","value":"CXR"},{"label":"Laos","value":"LAO"},{"label":"Latvie","value":"LVA"},{"label":"Le Salvador","value":"SLV"},{"label":"Les Îles Cook","value":"COK"},{"label":"Les îles Salomon","value":"SLB"},{"label":"Lesotho","value":"LSO"},{"label":"Liban","value":"LBN"},{"label":"Liberia","value":"LBR"},{"label":"Libye","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lituanie","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonie","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysie","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malte","value":"MLT"},{"label":"Maroc","value":"MAR"},{"label":"Martinique","value":"MTQ"},{"label":"Maurice","value":"MUS"},{"label":"Mauritanie","value":"MRT"},{"label":"Mayotte","value":"MYT"},{"label":"Mexique","value":"MEX"},{"label":"Micronésie","value":"FSM"},{"label":"Moldavie","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolie","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibie","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Nioué","value":"NIU"},{"label":"Norvège","value":"NOR"},{"label":"Nouvelle Caledonie","value":"NCL"},{"label":"Nouvelle Zélande","value":"NZL"},{"label":"Népal","value":"NPL"},{"label":"Oman","value":"OMN"},{"label":"Ouganda","value":"UGA"},{"label":"Ouzbékistan","value":"UZB"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine (état de)","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papouasie Nouvelle Guinée","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Pays-Bas","value":"NLD"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Pologne","value":"POL"},{"label":"Polynesie Française","value":"PYF"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Pérou","value":"PER"},{"label":"Qatar","value":"QAT"},{"label":"Romanie","value":"ROU"},{"label":"Royaume-Uni de Grande-Bretagne et d\'Irlande du Nord","value":"GBR"},{"label":"Rwanda","value":"RWA"},{"label":"République Dominicaine","value":"DOM"},{"label":"République Tchèque","value":"CZE"},{"label":"République arabe syrienne","value":"SYR"},{"label":"République centrafricaine","value":"CAF"},{"label":"République de Corée","value":"KOR"},{"label":"République populaire démocratique de Corée","value":"PRK"},{"label":"Réunion","value":"REU"},{"label":"Sahara occidental","value":"ESH"},{"label":"Saint Barthélemy","value":"BLM"},{"label":"Saint Marin","value":"SMR"},{"label":"Saint Martin","value":"MAF"},{"label":"Saint Pierre et Miquelon","value":"SPM"},{"label":"Saint-Christophe-et-Niévès","value":"KNA"},{"label":"Saint-Siège","value":"VAT"},{"label":"Saint-Vincent-et-les-Grenadines","value":"VCT"},{"label":"Sainte-Hélène, Ascension et Tristan da Cunha","value":"SHN"},{"label":"Sainte-Lucie","value":"LCA"},{"label":"Samoa américaines","value":"ASM"},{"label":"Samoa","value":"WSM"},{"label":"Sao Tomé et Principe","value":"STP"},{"label":"Serbie","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapour","value":"SGP"},{"label":"Sint Maarten","value":"SXM"},{"label":"Slovaquie","value":"SVK"},{"label":"Slovénie","value":"SVN"},{"label":"Somalie","value":"SOM"},{"label":"Soudan du sud","value":"SSD"},{"label":"Soudan","value":"SDN"},{"label":"Sri Lanka","value":"LKA"},{"label":"Suriname","value":"SUR"},{"label":"Suède","value":"SWE"},{"label":"Svalbard et Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sénégal","value":"SEN"},{"label":"Tadjikistan","value":"TJK"},{"label":"Taiwan, Province de Chine","value":"TWN"},{"label":"Tanzanie, United Republic of","value":"TZA"},{"label":"Terres australes françaises","value":"ATF"},{"label":"Territoire britannique de l\'océan Indien","value":"IOT"},{"label":"Thaïlande","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinité-et-Tobago","value":"TTO"},{"label":"Tunisie","value":"TUN"},{"label":"Turkménistan","value":"TKM"},{"label":"Turquie","value":"TUR"},{"label":"Tuvalu","value":"TUV"},{"label":"USA","value":"USA"},{"label":"Ukraine","value":"UKR"},{"label":"Uruguay","value":"URY"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela","value":"VEN"},{"label":"VietNam","value":"VNM"},{"label":"Wallis et Futuna","value":"WLF"},{"label":"Yemen","value":"YEM"},{"label":"Zambie","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},"4d2b":function(e,t,s){"use strict";var a=s("38fa"),r=s.n(a);r.a},"534a":function(e){e.exports=JSON.parse('[{"id":1,"name":"EasyLongDesc"},{"id":2,"name":"NormalLongDesc"},{"id":3,"name":"HardLongDesc"}]')},"547f":function(e){e.exports=JSON.parse('[{"id":"coins","file":"coins-big.png","thumb":"coins-medium.png","name":{"fr":"Pièces","en":"Coins"},"author":"Flaticons.com","url":""},{"id":"chest","file":"chest-big.png","thumb":"chest-medium.png","name":{"fr":"Coffre","en":"Chest"},"author":"Flaticons.com","url":""},{"id":"goldbag","file":"goldbag-big.png","thumb":"goldbag-medium.png","name":{"fr":"Sac d\'or","en":"Gold bag"},"author":"Flaticons.com","url":""},{"id":"rope","file":"rope-big.png","thumb":"rope-medium.png","name":{"fr":"Corde","en":"Rope"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/military-11"},{"id":"key","file":"key-big.png","thumb":"key-medium.png","name":{"fr":"Clé","en":"Key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"airplane","file":"airplane-big.png","thumb":"airplane-medium.png","name":{"fr":"Avion","en":"Airplane"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"backpack","file":"backpack-big.png","thumb":"backpack-medium.png","name":{"fr":"Sac à dos","en":"Backpack"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"briefcase","file":"briefcase-big.png","thumb":"briefcase-medium.png","name":{"fr":"Valise","en":"Briefcase"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/miscellaneous"},{"id":"car","file":"car-big.png","thumb":"car-medium.png","name":{"fr":"Voiture","en":"Car"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"clock","file":"clock-big.png","thumb":"clock-medium.png","name":{"fr":"Horloge","en":"Clock"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"compass","file":"compass-big.png","thumb":"compass-medium.png","name":{"fr":"Boussole","en":"Compass"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"diamond","file":"diamond-big.png","thumb":"diamond-medium.png","name":{"fr":"Diamant","en":"Diamond"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"eyeglasses","file":"eyeglasses-big.png","thumb":"eyeglasses-medium.png","name":{"fr":"Lunettes","en":"Glasses"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"gift","file":"gift-big.png","thumb":"gift-medium.png","name":{"fr":"Cadeau","en":"Gift"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"lifebuoy","file":"help-big.png","thumb":"help-medium.png","name":{"fr":"Bouée de sauvetage","en":"Life buoy"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"letter","file":"letter-big.png","thumb":"letter-medium.png","name":{"fr":"Lettre","en":"Letter"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"map","file":"map-big.png","thumb":"map-medium.png","name":{"fr":"Carte","en":"Map"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"medal","file":"medal-big.png","thumb":"medal-medium.png","name":{"fr":"Medaille","en":"Medal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"newspaper","file":"newspaper-big.png","thumb":"newspaper-medium.png","name":{"fr":"Journal","en":"Newspaper"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"paintbrush","file":"paintbrush-big.png","thumb":"paintbrush-medium.png","name":{"fr":"Pinceau","en":"Paint brush"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pencil","file":"pencil-big.png","thumb":"pencil-medium.png","name":{"fr":"Crayon","en":"Pencil"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"camera","file":"camera-big.png","thumb":"camera-medium.png","name":{"fr":"Appareil photo","en":"Camera"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"pictures","file":"pictures-big.png","thumb":"pictures-medium.png","name":{"fr":"Photos","en":"Pictures"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"rocket","file":"rocket-big.png","thumb":"rocket-medium.png","name":{"fr":"Fusée","en":"Rocket"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"scissors","file":"scissors-big.png","thumb":"scissors-medium.png","name":{"fr":"Ciseaux","en":"Scissors"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"search","file":"search-big.png","thumb":"search-medium.png","name":{"fr":"Loupe","en":"Magnifier"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"bag","file":"bag-big.png","thumb":"bag-medium.png","name":{"fr":"Sac","en":"Bag"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"smartphone","file":"smartphone-big.png","thumb":"smartphone-medium.png","name":{"fr":"Téléphone","en":"Smartphone"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"swissknife","file":"swissknife-big.png","thumb":"swissknife-medium.png","name":{"fr":"Couteau","en":"Knife"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"television","file":"television-big.png","thumb":"television-medium.png","name":{"fr":"Télévision","en":"Television"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"trash","file":"trash-big.png","thumb":"trash-medium.png","name":{"fr":"Poubelle","en":"Trash"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"umbrella","file":"umbrella-big.png","thumb":"umbrella-medium.png","name":{"fr":"Parapluie","en":"Umbrella"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"vest","file":"vest-big.png","thumb":"vest-medium.png","name":{"fr":"Veste","en":"Vest"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"wallet","file":"wallet-big.png","thumb":"wallet-medium.png","name":{"fr":"Portefeuille","en":"Wallet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"watch","file":"watch-big.png","thumb":"watch-medium.png","name":{"fr":"Montre","en":"Watch"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"meal","file":"meal-big.png","thumb":"meal-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"fruit","file":"fruit-big.png","thumb":"fruit-medium.png","name":{"fr":"Fruit","en":"Fruit"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"chicken","file":"chicken-big.png","thumb":"chicken-medium.png","name":{"fr":"Repas","en":"Meal"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/fast-food-43"},{"id":"worker","file":"worker-big.png","thumb":"worker-medium.png","name":{"fr":"Casque","en":"Helmet"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/basic-flat-icons"},{"id":"oldkey","file":"oldkey-big.png","thumb":"oldkey-medium.png","name":{"fr":"Vielle clé","en":"Old key"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"hammer","file":"hammer-big.png","thumb":"hammer-medium.png","name":{"fr":"Marteau","en":"Hammer"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"},{"id":"tools","file":"tools-big.png","thumb":"tools-medium.png","name":{"fr":"Outils","en":"Tools"},"author":"Flaticons.com","url":"https://www.flaticon.com/packs/real-assets-3"}]')},"57e4":function(e){e.exports=JSON.parse('["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060"]')},"732c":function(e,t,s){},"74f2":function(e,t,s){"use strict";var a=s("7da1"),r=s.n(a);r.a},"7da1":function(e,t,s){},"7e6d":function(e,t,s){},9224:function(e){e.exports=JSON.parse('{"name":"graaly-frontend","version":"2.1.31","description":"Graaly Frontend","productName":"Graaly","cordovaId":"graaly.app","author":"Eric Mathieu <eric.mathieu13@gmail.com>, Maxime Pacary <maxime.pacary@gmail.com>","private":true,"scripts":{"lint":"eslint --ext .js,.vue src","start:dev":"quasar dev"},"dependencies":{"@babel/core":"^7.4.5","@quasar/babel-preset-app":"^1.2.0","@quasar/extras":"^1.9.15","@sentry/browser":"^5.27.0","@sentry/integrations":"^5.27.0","@tweenjs/tween.js":"^18.3.1","ajv":"^6.9.1","autoprefixer":"^9.5.0","axios":"^0.21.1","axios-cookiejar-support":"^0.4.2","axios-retry":"^3.1.9","cordova":"^9.0.0","core-js":"^2.5.7","crypto-js":"^3.1.9-1","js-cookie":"^2.2.0","moment":"^2.22.2","mqtt":"^3.0.0","object-hash":"^1.3.1","quasar":"^1.15.1","sortablejs":"^1.7.0","three":"^0.101.1","three-gltf-loader":"^1.98.0","three-orbitcontrols":"^2.102.2","timeago.js":"^4.0.2","tough-cookie":"^3.0.1","vue":"^2.6.10","vue-i18n":"^7.8.1","vue-qrcode-reader":"^3.0.1","vue2-google-maps":"^0.10.6","vuelidate":"^0.7.4","vuex":"^3.0.1","vuex-persistedstate":"^2.5.4","webpack":"^4.29.6"},"devDependencies":{"@babel/cli":"^7.4.4","@quasar/app":"^1.9.6","babel-eslint":"^8.2.1","chalk":"^2.4.2","eslint":"^4.18.2","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.9.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.3.0","start-server-and-test":"^1.11.5","strip-ansi":"^3.0.1","vue-template-compiler":"^2.6.10"},"engines":{"node":">= 8.9.0","npm":">= 5.6.0","yarn":">= 1.6.0"},"browserslist":["> 1%","last 2 versions","not ie <= 10"]}')},9593:function(e,t,s){},a2e6:function(e,t,s){"use strict";var a=s("a553"),r=s.n(a);r.a},a524:function(e,t,s){"use strict";var a=s("d0d8"),r=s.n(a);r.a},a553:function(e,t,s){},ae4c:function(e,t,s){},b44b:function(e,t,s){"use strict";var a=s("732c"),r=s.n(a);r.a},b650:function(e,t,s){"use strict";var a=s("ae4c"),r=s.n(a);r.a},cf83:function(e){e.exports=JSON.parse('[{"label":"United States of America","value":"USA"},{"label":"United Kingdom of Great Britain and Northern Ireland","value":"GBR"},{"label":"Afghanistan","value":"AFG"},{"label":"Åland Islands","value":"ALA"},{"label":"Albania","value":"ALB"},{"label":"Algeria","value":"DZA"},{"label":"American Samoa","value":"ASM"},{"label":"Andorra","value":"AND"},{"label":"Angola","value":"AGO"},{"label":"Anguilla","value":"AIA"},{"label":"Antarctica","value":"ATA"},{"label":"Antigua and Barbuda","value":"ATG"},{"label":"Argentina","value":"ARG"},{"label":"Armenia","value":"ARM"},{"label":"Aruba","value":"ABW"},{"label":"Australia","value":"AUS"},{"label":"Austria","value":"AUT"},{"label":"Azerbaijan","value":"AZE"},{"label":"Bahamas","value":"BHS"},{"label":"Bahrain","value":"BHR"},{"label":"Bangladesh","value":"BGD"},{"label":"Barbados","value":"BRB"},{"label":"Belarus","value":"BLR"},{"label":"Belgium","value":"BEL"},{"label":"Belize","value":"BLZ"},{"label":"Benin","value":"BEN"},{"label":"Bermuda","value":"BMU"},{"label":"Bhutan","value":"BTN"},{"label":"Bolivia (Plurinational State of)","value":"BOL"},{"label":"Bonaire, Sint Eustatius and Saba","value":"BES"},{"label":"Bosnia and Herzegovina","value":"BIH"},{"label":"Botswana","value":"BWA"},{"label":"Bouvet Island","value":"BVT"},{"label":"Brazil","value":"BRA"},{"label":"British Indian Ocean Territory","value":"IOT"},{"label":"Brunei Darussalam","value":"BRN"},{"label":"Bulgaria","value":"BGR"},{"label":"Burkina Faso","value":"BFA"},{"label":"Burundi","value":"BDI"},{"label":"Cambodia","value":"KHM"},{"label":"Cameroon","value":"CMR"},{"label":"Canada","value":"CAN"},{"label":"Cabo Verde","value":"CPV"},{"label":"Cayman Islands","value":"CYM"},{"label":"Central African Republic","value":"CAF"},{"label":"Chad","value":"TCD"},{"label":"Chile","value":"CHL"},{"label":"China","value":"CHN"},{"label":"Christmas Island","value":"CXR"},{"label":"Cocos (Keeling) Islands","value":"CCK"},{"label":"Colombia","value":"COL"},{"label":"Comoros","value":"COM"},{"label":"Congo","value":"COG"},{"label":"Congo (Democratic Republic of the)","value":"COD"},{"label":"Cook Islands","value":"COK"},{"label":"Costa Rica","value":"CRI"},{"label":"Ivory Coast","value":"CIV"},{"label":"Croatia","value":"HRV"},{"label":"Cuba","value":"CUB"},{"label":"Curaçao","value":"CUW"},{"label":"Cyprus","value":"CYP"},{"label":"Czech Republic","value":"CZE"},{"label":"Denmark","value":"DNK"},{"label":"Djibouti","value":"DJI"},{"label":"Dominica","value":"DMA"},{"label":"Dominican Republic","value":"DOM"},{"label":"Ecuador","value":"ECU"},{"label":"Egypt","value":"EGY"},{"label":"El Salvador","value":"SLV"},{"label":"Equatorial Guinea","value":"GNQ"},{"label":"Eritrea","value":"ERI"},{"label":"Estonia","value":"EST"},{"label":"Ethiopia","value":"ETH"},{"label":"Falkland Islands (Malvinas)","value":"FLK"},{"label":"Faroe Islands","value":"FRO"},{"label":"Fiji","value":"FJI"},{"label":"Finland","value":"FIN"},{"label":"France","value":"FRA"},{"label":"French Guiana","value":"GUF"},{"label":"French Polynesia","value":"PYF"},{"label":"French Southern Territories","value":"ATF"},{"label":"Gabon","value":"GAB"},{"label":"Gambia","value":"GMB"},{"label":"Georgia","value":"GEO"},{"label":"Germany","value":"DEU"},{"label":"Ghana","value":"GHA"},{"label":"Gibraltar","value":"GIB"},{"label":"Greece","value":"GRC"},{"label":"Greenland","value":"GRL"},{"label":"Grenada","value":"GRD"},{"label":"Guadeloupe","value":"GLP"},{"label":"Guam","value":"GUM"},{"label":"Guatemala","value":"GTM"},{"label":"Guernsey","value":"GGY"},{"label":"Guinea","value":"GIN"},{"label":"Guinea-Bissau","value":"GNB"},{"label":"Guyana","value":"GUY"},{"label":"Haiti","value":"HTI"},{"label":"Heard Island and McDonald Islands","value":"HMD"},{"label":"Holy See","value":"VAT"},{"label":"Honduras","value":"HND"},{"label":"Hong Kong","value":"HKG"},{"label":"Hungary","value":"HUN"},{"label":"Iceland","value":"ISL"},{"label":"India","value":"IND"},{"label":"Indonesia","value":"IDN"},{"label":"Iran (Islamic Republic of)","value":"IRN"},{"label":"Iraq","value":"IRQ"},{"label":"Ireland","value":"IRL"},{"label":"Isle of Man","value":"IMN"},{"label":"Israel","value":"ISR"},{"label":"Italy","value":"ITA"},{"label":"Jamaica","value":"JAM"},{"label":"Japan","value":"JPN"},{"label":"Jersey","value":"JEY"},{"label":"Jordan","value":"JOR"},{"label":"Kazakhstan","value":"KAZ"},{"label":"Kenya","value":"KEN"},{"label":"Kiribati","value":"KIR"},{"label":"Korea (Democratic People\'s Republic of)","value":"PRK"},{"label":"Korea (Republic of)","value":"KOR"},{"label":"Kuwait","value":"KWT"},{"label":"Kyrgyzstan","value":"KGZ"},{"label":"Lao People\'s Democratic Republic","value":"LAO"},{"label":"Latvia","value":"LVA"},{"label":"Lebanon","value":"LBN"},{"label":"Lesotho","value":"LSO"},{"label":"Liberia","value":"LBR"},{"label":"Libya","value":"LBY"},{"label":"Liechtenstein","value":"LIE"},{"label":"Lithuania","value":"LTU"},{"label":"Luxembourg","value":"LUX"},{"label":"Macao","value":"MAC"},{"label":"Macedonia (the former Yugoslav Republic of)","value":"MKD"},{"label":"Madagascar","value":"MDG"},{"label":"Malawi","value":"MWI"},{"label":"Malaysia","value":"MYS"},{"label":"Maldives","value":"MDV"},{"label":"Mali","value":"MLI"},{"label":"Malta","value":"MLT"},{"label":"Marshall Islands","value":"MHL"},{"label":"Martinique","value":"MTQ"},{"label":"Mauritania","value":"MRT"},{"label":"Mauritius","value":"MUS"},{"label":"Mayotte","value":"MYT"},{"label":"Mexico","value":"MEX"},{"label":"Micronesia (Federated States of)","value":"FSM"},{"label":"Moldova (Republic of)","value":"MDA"},{"label":"Monaco","value":"MCO"},{"label":"Mongolia","value":"MNG"},{"label":"Montenegro","value":"MNE"},{"label":"Montserrat","value":"MSR"},{"label":"Morocco","value":"MAR"},{"label":"Mozambique","value":"MOZ"},{"label":"Myanmar","value":"MMR"},{"label":"Namibia","value":"NAM"},{"label":"Nauru","value":"NRU"},{"label":"Nepal","value":"NPL"},{"label":"Netherlands","value":"NLD"},{"label":"New Caledonia","value":"NCL"},{"label":"New Zealand","value":"NZL"},{"label":"Nicaragua","value":"NIC"},{"label":"Niger","value":"NER"},{"label":"Nigeria","value":"NGA"},{"label":"Niue","value":"NIU"},{"label":"Norfolk Island","value":"NFK"},{"label":"Northern Mariana Islands","value":"MNP"},{"label":"Norway","value":"NOR"},{"label":"Oman","value":"OMN"},{"label":"Pakistan","value":"PAK"},{"label":"Palau","value":"PLW"},{"label":"Palestine, State of","value":"PSE"},{"label":"Panama","value":"PAN"},{"label":"Papua New Guinea","value":"PNG"},{"label":"Paraguay","value":"PRY"},{"label":"Peru","value":"PER"},{"label":"Philippines","value":"PHL"},{"label":"Pitcairn","value":"PCN"},{"label":"Poland","value":"POL"},{"label":"Portugal","value":"PRT"},{"label":"Puerto Rico","value":"PRI"},{"label":"Qatar","value":"QAT"},{"label":"Reunion Island","value":"REU"},{"label":"Romania","value":"ROU"},{"label":"Russian Federation","value":"RUS"},{"label":"Rwanda","value":"RWA"},{"label":"Saint Barthelemy","value":"BLM"},{"label":"Saint Helena, Ascension and Tristan da Cunha","value":"SHN"},{"label":"Saint Kitts and Nevis","value":"KNA"},{"label":"Saint Lucia","value":"LCA"},{"label":"Saint Martin (French part)","value":"MAF"},{"label":"Saint Pierre and Miquelon","value":"SPM"},{"label":"Saint Vincent and the Grenadines","value":"VCT"},{"label":"Samoa","value":"WSM"},{"label":"San Marino","value":"SMR"},{"label":"Sao Tome and Principe","value":"STP"},{"label":"Saudi Arabia","value":"SAU"},{"label":"Senegal","value":"SEN"},{"label":"Serbia","value":"SRB"},{"label":"Seychelles","value":"SYC"},{"label":"Sierra Leone","value":"SLE"},{"label":"Singapore","value":"SGP"},{"label":"Sint Maarten (Dutch part)","value":"SXM"},{"label":"Slovakia","value":"SVK"},{"label":"Slovenia","value":"SVN"},{"label":"Solomon Islands","value":"SLB"},{"label":"Somalia","value":"SOM"},{"label":"South Africa","value":"ZAF"},{"label":"South Georgia and the South Sandwich Islands","value":"SGS"},{"label":"South Sudan","value":"SSD"},{"label":"Spain","value":"ESP"},{"label":"Sri Lanka","value":"LKA"},{"label":"Sudan","value":"SDN"},{"label":"Suriname","value":"SUR"},{"label":"Svalbard and Jan Mayen","value":"SJM"},{"label":"Swaziland","value":"SWZ"},{"label":"Sweden","value":"SWE"},{"label":"Switzerland","value":"CHE"},{"label":"Syrian Arab Republic","value":"SYR"},{"label":"Taiwan, Province of China","value":"TWN"},{"label":"Tajikistan","value":"TJK"},{"label":"Tanzania, United Republic of","value":"TZA"},{"label":"Thailand","value":"THA"},{"label":"Timor-Leste","value":"TLS"},{"label":"Togo","value":"TGO"},{"label":"Tokelau","value":"TKL"},{"label":"Tonga","value":"TON"},{"label":"Trinidad and Tobago","value":"TTO"},{"label":"Tunisia","value":"TUN"},{"label":"Turkey","value":"TUR"},{"label":"Turkmenistan","value":"TKM"},{"label":"Turks and Caicos Islands","value":"TCA"},{"label":"Tuvalu","value":"TUV"},{"label":"Uganda","value":"UGA"},{"label":"Ukraine","value":"UKR"},{"label":"United Arab Emirates","value":"ARE"},{"label":"United States Minor Outlying Islands","value":"UMI"},{"label":"Uruguay","value":"URY"},{"label":"Uzbekistan","value":"UZB"},{"label":"Vanuatu","value":"VUT"},{"label":"Venezuela (Bolivarian Republic of)","value":"VEN"},{"label":"Viet Nam","value":"VNM"},{"label":"Virgin Islands (British)","value":"VGB"},{"label":"Virgin Islands (U.S.)","value":"VIR"},{"label":"Wallis and Futuna","value":"WLF"},{"label":"Western Sahara","value":"ESH"},{"label":"Yemen","value":"YEM"},{"label":"Zambia","value":"ZMB"},{"label":"Zimbabwe","value":"ZWE"}]')},d0d8:function(e,t,s){},d521:function(e,t,s){},e08c:function(e){e.exports=JSON.parse('{"baseServiceID":"4fafc201-1fb5-459e-8fcc-c5c9c331914b","baseCara":"beb5483e-36e1-4688-b7f5-"}')},e18e:function(e){e.exports=JSON.parse('[{"code":"fr","name":"French"},{"code":"en","name":"English"}]')},efff:function(e,t,s){"use strict";var a=s("fa0b"),r=s.n(a);r.a},fa0b:function(e,t,s){},fb4c:function(e){e.exports=JSON.parse('[{"id":1,"name":"CulturalQuest"},{"id":2,"name":"DiscoveryQuest"},{"id":3,"name":"SportQuest"},{"id":4,"name":"ChildQuest"},{"id":7,"name":"ShopQuest"},{"id":13,"name":"Other"}]')}});